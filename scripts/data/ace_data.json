[
    {
        "commit": "https://github.com/apache/ace/commit/f8ad12ff5cbf263c58472559263af296dc683531",
        "file": [
            {
                "patch": "@@ -728,6 +728,10 @@ public Object get(Object key) {\n                     return getStatusAttribute((String) key);\n                 }\n             }\n+            // ACE-509 - make sure we've got a proper target object to work on...\n+            if (m_targetObject == null) {\n+                return null;\n+            }\n             String tag = m_targetObject.getTag((String)key);\n             String attr = m_targetObject.getAttribute((String)key);\n             if (tag == null) {",
                "additions": 4,
                "raw_url": "https://github.com/apache/ace/raw/f8ad12ff5cbf263c58472559263af296dc683531/org.apache.ace.client.repository/src/org/apache/ace/client/repository/stateful/impl/StatefulTargetObjectImpl.java",
                "status": "modified",
                "changes": 4,
                "deletions": 0,
                "sha": "48f0fce47b4efee52036be60be20fd5e169a7253",
                "blob_url": "https://github.com/apache/ace/blob/f8ad12ff5cbf263c58472559263af296dc683531/org.apache.ace.client.repository/src/org/apache/ace/client/repository/stateful/impl/StatefulTargetObjectImpl.java",
                "filename": "org.apache.ace.client.repository/src/org/apache/ace/client/repository/stateful/impl/StatefulTargetObjectImpl.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.client.repository/src/org/apache/ace/client/repository/stateful/impl/StatefulTargetObjectImpl.java?ref=f8ad12ff5cbf263c58472559263af296dc683531"
            }
        ],
        "bug_id": "ace_1",
        "parent": "https://github.com/apache/ace/commit/33d4107d574af543885b46a9e01d8cd3f23e3ab8",
        "message": "ACE-509 - avoid NPE when no target object is available.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1652767 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/d23bf6edf4ec6371f11435c0f314d5defcf0c67a",
        "file": [
            {
                "patch": "@@ -34,6 +34,7 @@\n import org.osgi.service.event.EventHandler;\n \n import com.vaadin.event.ShortcutAction.KeyCode;\n+import com.vaadin.terminal.gwt.server.WebApplicationContext;\n import com.vaadin.terminal.gwt.server.WebBrowser;\n import com.vaadin.ui.Button;\n import com.vaadin.ui.Button.ClickEvent;\n@@ -402,7 +403,9 @@ protected void showWarning(String title, String message) {\n     }\n \n     private void addCrossPlatformShortcut(Button button, int key, String description) {\n-        ShortcutHelper.addCrossPlatformShortcut((WebBrowser) getWindow().getTerminal(), button, description, key);\n+        // ACE-427 - NPE when using getMainWindow() if no authentication is used...\n+        WebApplicationContext context = (WebApplicationContext) getApplication().getContext();\n+        ShortcutHelper.addCrossPlatformShortcut(context.getBrowser(), button, description, key);\n     }\n \n     /**",
                "additions": 4,
                "raw_url": "https://github.com/apache/ace/raw/d23bf6edf4ec6371f11435c0f314d5defcf0c67a/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/MainActionToolbar.java",
                "status": "modified",
                "changes": 5,
                "deletions": 1,
                "sha": "f8fba3a57b6be14a7e73fd872511aba2fe973158",
                "blob_url": "https://github.com/apache/ace/blob/d23bf6edf4ec6371f11435c0f314d5defcf0c67a/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/MainActionToolbar.java",
                "filename": "org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/MainActionToolbar.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/MainActionToolbar.java?ref=d23bf6edf4ec6371f11435c0f314d5defcf0c67a"
            }
        ],
        "bug_id": "ace_2",
        "parent": "https://github.com/apache/ace/commit/247bea9d009fb753fcf0ad371fa872cd06a3a61c",
        "message": "ACE-427 - NPE when running Web UI without user-authentication.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1540698 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/247bea9d009fb753fcf0ad371fa872cd06a3a61c",
        "file": [
            {
                "patch": "@@ -91,10 +91,11 @@\n import com.vaadin.event.ShortcutAction.KeyCode;\n import com.vaadin.event.ShortcutAction.ModifierKey;\n import com.vaadin.service.ApplicationContext;\n-import com.vaadin.terminal.gwt.server.WebBrowser;\n+import com.vaadin.terminal.gwt.server.WebApplicationContext;\n import com.vaadin.ui.Button;\n import com.vaadin.ui.Button.ClickEvent;\n import com.vaadin.ui.DragAndDropWrapper;\n+import com.vaadin.ui.DragAndDropWrapper.DragStartMode;\n import com.vaadin.ui.GridLayout;\n import com.vaadin.ui.HorizontalLayout;\n import com.vaadin.ui.Label;\n@@ -481,7 +482,9 @@ protected StatefulTargetObject createTarget(String name) {\n     }\n \n     private void addCrossPlatformAddShortcut(Button button, int keycode, String description) {\n-        ShortcutHelper.addCrossPlatformShortcut((WebBrowser) getMainWindow().getTerminal(), button, description, keycode, ModifierKey.SHIFT);\n+        // ACE-427 - NPE when using getMainWindow() if no authentication is used...\n+        WebApplicationContext context = (WebApplicationContext) getContext();\n+        ShortcutHelper.addCrossPlatformShortcut(context.getBrowser(), button, description, keycode, ModifierKey.SHIFT);\n     }\n \n     private void addDependency(Component component, Class service) {\n@@ -1115,6 +1118,7 @@ private ArtifactObject uploadToOBR(UploadHandle handle) throws IOException {\n         m_artifactToolbar = createArtifactToolbar();\n \n         final DragAndDropWrapper artifactsPanelWrapper = new DragAndDropWrapper(m_artifactsPanel);\n+        artifactsPanelWrapper.setDragStartMode(DragStartMode.COMPONENT);\n         artifactsPanelWrapper.setDropHandler(new ArtifactDropHandler(uploadHandler));\n         artifactsPanelWrapper.setCaption(m_artifactsPanel.getCaption());\n         artifactsPanelWrapper.setSizeFull();",
                "additions": 6,
                "raw_url": "https://github.com/apache/ace/raw/247bea9d009fb753fcf0ad371fa872cd06a3a61c/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/VaadinClient.java",
                "status": "modified",
                "changes": 8,
                "deletions": 2,
                "sha": "d1a710216b042cb01cc9cd4bb6257114fefd17ac",
                "blob_url": "https://github.com/apache/ace/blob/247bea9d009fb753fcf0ad371fa872cd06a3a61c/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/VaadinClient.java",
                "filename": "org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/VaadinClient.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/VaadinClient.java?ref=247bea9d009fb753fcf0ad371fa872cd06a3a61c"
            }
        ],
        "bug_id": "ace_3",
        "parent": "https://github.com/apache/ace/commit/8f9ed8de37345dd8696f00d50c608a79773987b3",
        "message": "ACE-427 - fixed possible NPE when using Web UI without authentication.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1540697 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/564e8800b53ccde046f7149446af870a03590e70",
        "file": [
            {
                "patch": "@@ -89,6 +89,8 @@ public InputStream get(String fileName) throws IOException {\n \n     public String put(InputStream data, String fileName) throws IOException {\n \n+        if(fileName == null)\n+            fileName = \"\";\n         File tempFile = downloadToTempFile(data);\n \n         ResourceMetaData metaData = ResourceMetaData.getBundleMetaData(tempFile);\n@@ -101,10 +103,10 @@ public String put(InputStream data, String fileName) throws IOException {\n \n         File storeLocation = getResourceFile(metaData);\n         if (storeLocation == null) {\n-            throw new IOException(\"Failed to store resource (filename = \" + fileName + \")\");\n+            throw new IOException(\"Failed to store resource (filename = \" +  fileName  + \")\");\n         }\n         if (storeLocation.exists()) {\n-            m_log.log(LogService.LOG_ERROR, \"Resource already existed in OBR (filename = \" + fileName + \")\");\n+            m_log.log(LogService.LOG_ERROR, \"Resource already existed in OBR (filename = \" +  fileName  + \")\");\n             return null;\n         }\n ",
                "additions": 4,
                "raw_url": "https://github.com/apache/ace/raw/564e8800b53ccde046f7149446af870a03590e70/org.apache.ace.obr/src/org/apache/ace/obr/storage/file/BundleFileStore.java",
                "status": "modified",
                "changes": 6,
                "deletions": 2,
                "sha": "83fb97f2fcb985ab5c781e29c09d625ef134c74f",
                "blob_url": "https://github.com/apache/ace/blob/564e8800b53ccde046f7149446af870a03590e70/org.apache.ace.obr/src/org/apache/ace/obr/storage/file/BundleFileStore.java",
                "filename": "org.apache.ace.obr/src/org/apache/ace/obr/storage/file/BundleFileStore.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.obr/src/org/apache/ace/obr/storage/file/BundleFileStore.java?ref=564e8800b53ccde046f7149446af870a03590e70"
            },
            {
                "patch": "@@ -39,6 +39,7 @@\n import org.apache.ace.test.utils.TestUtils;\n import org.osgi.framework.Constants;\n import org.osgi.service.cm.ConfigurationException;\n+import org.osgi.service.log.LogService;\n import org.testng.annotations.AfterMethod;\n import org.testng.annotations.BeforeMethod;\n import org.testng.annotations.Test;\n@@ -67,6 +68,9 @@ protected void setUp() throws Exception {\n         props.put(OBRFileStoreConstants.FILE_LOCATION_KEY, m_directory.getAbsolutePath());\n         m_bundleStore.updated(props);\n \n+        // set a null object on for log\n+        TestUtils.configureObject(m_bundleStore, LogService.class);\n+\n         // create a mock MetadataGenerator\n         m_metadata = new MockMetadataGenerator();\n         TestUtils.configureObject(m_bundleStore, MetadataGenerator.class, m_metadata);\n@@ -258,7 +262,7 @@ public void putBundleDuplicate() throws Exception {\n         assert filePath2 == null;\n     }\n \n-    @Test(groups = { UNIT }, expectedExceptions = { IOException.class }, expectedExceptionsMessageRegExp = \"Not a valid bundle and no filename found\")\n+    @Test(groups = { UNIT }, expectedExceptions = { IOException.class }, expectedExceptionsMessageRegExp = \"Not a valid bundle and no filename found.*\")\n     public void putBundleFail() throws Exception {\n         File bundle = createTmpResource(null, \"1.0.0\");\n         String filePath = m_bundleStore.put(new FileInputStream(bundle), null);\n@@ -294,13 +298,13 @@ public void putArtifactMavenVersion() throws Exception {\n         assert file.exists();\n     }\n \n-    @Test(groups = { UNIT }, expectedExceptions = { IOException.class }, expectedExceptionsMessageRegExp = \"Not a valid bundle and no filename found\")\n+    @Test(groups = { UNIT }, expectedExceptions = { IOException.class }, expectedExceptionsMessageRegExp = \"Not a valid bundle and no filename found.*\")\n     public void putArtifactFail1() throws Exception {\n         File bundle = createTmpResource(null, null);\n         m_bundleStore.put(new FileInputStream(bundle), null);\n     }\n \n-    @Test(groups = { UNIT }, expectedExceptions = { IOException.class }, expectedExceptionsMessageRegExp = \"Not a valid bundle and no filename found\")\n+    @Test(groups = { UNIT }, expectedExceptions = { IOException.class }, expectedExceptionsMessageRegExp = \"Not a valid bundle and no filename found.*\")\n     public void putArtifactFail2() throws Exception {\n         File bundle = createTmpResource(null, null);\n         m_bundleStore.put(new FileInputStream(bundle), \"\");",
                "additions": 7,
                "raw_url": "https://github.com/apache/ace/raw/564e8800b53ccde046f7149446af870a03590e70/org.apache.ace.obr/test/org/apache/ace/obr/storage/file/BundleFileStoreTest.java",
                "status": "modified",
                "changes": 10,
                "deletions": 3,
                "sha": "b492b5a92988cb8edfc140e85b1e855afb642b88",
                "blob_url": "https://github.com/apache/ace/blob/564e8800b53ccde046f7149446af870a03590e70/org.apache.ace.obr/test/org/apache/ace/obr/storage/file/BundleFileStoreTest.java",
                "filename": "org.apache.ace.obr/test/org/apache/ace/obr/storage/file/BundleFileStoreTest.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.obr/test/org/apache/ace/obr/storage/file/BundleFileStoreTest.java?ref=564e8800b53ccde046f7149446af870a03590e70"
            }
        ],
        "bug_id": "ace_4",
        "parent": "https://github.com/apache/ace/commit/2e54170dca4122255f509cff2c95baa954014791",
        "message": "Fixed itest npe failures introduced in r1498701\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1500605 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/bc5e7e07f3b151c343732cfa5354bcf575f2112c",
        "file": [
            {
                "patch": "@@ -272,11 +272,11 @@ private void setHashForVersion(String url, String target, String version, String\n             byte[] buf = new byte[BUFFER_SIZE];\n             for (int count = in.read(buf); count != -1; count = in.read(buf)) {\n                 baos.write(buf, 0, count);\n-\n-                result = baos.toByteArray();\n-\n-                m_cachedArtifacts.put(url, new WeakReference<byte[]>(result));\n             }\n+            \n+            result = baos.toByteArray();\n+            \n+            m_cachedArtifacts.put(url, new WeakReference<byte[]>(result));\n         }\n         finally {\n             silentlyClose(in);",
                "additions": 4,
                "raw_url": "https://github.com/apache/ace/raw/bc5e7e07f3b151c343732cfa5354bcf575f2112c/ace-client-repository-helper-base/src/main/java/org/apache/ace/client/repository/helper/base/VelocityArtifactPreprocessor.java",
                "status": "modified",
                "changes": 8,
                "deletions": 4,
                "sha": "3e793179f089e11cc248a735b2c0fca1d94ef8ab",
                "blob_url": "https://github.com/apache/ace/blob/bc5e7e07f3b151c343732cfa5354bcf575f2112c/ace-client-repository-helper-base/src/main/java/org/apache/ace/client/repository/helper/base/VelocityArtifactPreprocessor.java",
                "filename": "ace-client-repository-helper-base/src/main/java/org/apache/ace/client/repository/helper/base/VelocityArtifactPreprocessor.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/ace-client-repository-helper-base/src/main/java/org/apache/ace/client/repository/helper/base/VelocityArtifactPreprocessor.java?ref=bc5e7e07f3b151c343732cfa5354bcf575f2112c"
            },
            {
                "patch": "@@ -38,7 +38,7 @@\n public class VelocityArtifactPreprocessorTest {\n     \n     private static final String TARGET = \"target\";\n-    private static final String VERSION = \"1.0.0\";\n+    private static final String VERSION1 = \"1.0.0\";\n     \n     private URL m_obrUrl;\n     private PropertyResolver m_resolver;\n@@ -55,42 +55,54 @@ public String get(String key) {\n     }\n \n     /**\n-     * Test case for {@link VelocityArtifactPreprocessor#preprocess(String, PropertyResolver, String, String, java.net.URL)}\n+     * Test case for {@link VelocityArtifactPreprocessor#needsNewVersion(String, PropertyResolver, String, String)}\n      */\n-    @Test(expected = IOException.class)\n-    public void testPreprocessNonExistingTemplateOk() throws Exception {\n-        // Should be something that really doesn't exist somehow...\n-        String url = \"file:///path/to/nowhere-\" + System.currentTimeMillis();\n+    @Test\n+    public void testNeedsNewVersionChangedTemplateOk() throws Exception {\n+        final VelocityArtifactPreprocessor vap = new VelocityArtifactPreprocessor();\n+        \n+        String url = createArtifact(\"Message: [$context.msg]\");\n+\n+        // \"upload\" a new version...\n+        vap.preprocess(url, m_resolver, TARGET, VERSION1, m_obrUrl);\n+        \n+        boolean result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION1);\n+        assertFalse(result); // no new version is needed...\n+        \n+        updateArtifact(url, \"Another message: [$context.msg2]\");\n         \n-        new VelocityArtifactPreprocessor().preprocess(url, m_resolver, TARGET, VERSION, m_obrUrl);\n+        result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION1);\n+        assertFalse(result); // no new version is needed; original artifact is cached indefinitely...\n     }\n \n     /**\n-     * Test case for {@link VelocityArtifactPreprocessor#preprocess(String, PropertyResolver, String, String, java.net.URL)}\n+     * Test case for {@link VelocityArtifactPreprocessor#needsNewVersion(String, PropertyResolver, String, String)}\n      */\n     @Test\n-    public void testPreprocessExistingRealTemplateOk() throws Exception {\n-        String url = createArtifact(\"Message: [$context.msg]\");\n+    public void testNeedsNewVersionEmptyTemplateOk() throws Exception {\n+        final VelocityArtifactPreprocessor vap = new VelocityArtifactPreprocessor();\n         \n-        String newUrl = new VelocityArtifactPreprocessor().preprocess(url, m_resolver, TARGET, VERSION, m_obrUrl);\n-        assertNotNull(newUrl);\n-        // Verify that it is actually uploaded...\n-        assertFalse(newUrl.equals(url));\n-        // Verify that it is actually uploaded to our (fake) OBR...\n-        assertTrue(newUrl.startsWith(m_obrUrl.toExternalForm()));\n+        String url = createArtifact(\"\");\n+\n+        // \"upload\" a new version...\n+        vap.preprocess(url, m_resolver, TARGET, VERSION1, m_obrUrl);\n+\n+        boolean result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION1);\n+        assertFalse(result); // no new version is needed...\n     }\n \n     /**\n-     * Test case for {@link VelocityArtifactPreprocessor#preprocess(String, PropertyResolver, String, String, java.net.URL)}\n+     * Test case for {@link VelocityArtifactPreprocessor#needsNewVersion(String, PropertyResolver, String, String)}\n      */\n     @Test\n-    public void testPreprocessExistingNoTemplateOk() throws Exception {\n-        String url = createArtifact(\"Message: [context.msg]\");\n+    public void testNeedsNewVersionNonExistingTemplateOk() throws Exception {\n+        final VelocityArtifactPreprocessor vap = new VelocityArtifactPreprocessor();\n         \n-        String newUrl = new VelocityArtifactPreprocessor().preprocess(url, m_resolver, TARGET, VERSION, m_obrUrl);\n-        assertNotNull(newUrl);\n-        // Verify that it is *not* uploaded...\n-        assertEquals(url, newUrl);\n+        // Should be something that really doesn't exist somehow...\n+        String url = \"file:///path/to/nowhere-\" + System.currentTimeMillis();\n+\n+        boolean result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION1);\n+        assertTrue(result); // always true for non-existing templates...\n     }\n \n     /**\n@@ -102,49 +114,53 @@ public void testNeedsNewVersionUnchangedTemplateOk() throws Exception {\n         \n         String url = createArtifact(\"Message: [$context.msg]\");\n         \n-        boolean result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION);\n+        boolean result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION1);\n         assertTrue(result); // nothing uploaded yet; new version is needed...\n-        \n+\n         // \"upload\" a new version...\n-        vap.preprocess(url, m_resolver, TARGET, VERSION, m_obrUrl);\n-        \n-        result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION);\n+        vap.preprocess(url, m_resolver, TARGET, VERSION1, m_obrUrl);\n+\n+        result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION1);\n         assertFalse(result); // no new version is needed...\n     }\n \n     /**\n-     * Test case for {@link VelocityArtifactPreprocessor#needsNewVersion(String, PropertyResolver, String, String)}\n+     * Test case for {@link VelocityArtifactPreprocessor#preprocess(String, PropertyResolver, String, String, java.net.URL)}\n      */\n     @Test\n-    public void testNeedsNewVersionChangedTemplateOk() throws Exception {\n-        final VelocityArtifactPreprocessor vap = new VelocityArtifactPreprocessor();\n-        \n-        String url = createArtifact(\"Message: [$context.msg]\");\n-\n-        // \"upload\" a new version...\n-        vap.preprocess(url, m_resolver, TARGET, VERSION, m_obrUrl);\n-        \n-        boolean result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION);\n-        assertFalse(result); // no new version is needed...\n-        \n-        updateArtifact(url, \"Another message: [$context.msg2]\");\n+    public void testPreprocessExistingNoTemplateOk() throws Exception {\n+        String url = createArtifact(\"Message: [context.msg]\");\n         \n-        result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION);\n-        assertFalse(result); // no new version is needed; original artifact is cached indefinitely...\n+        String newUrl = new VelocityArtifactPreprocessor().preprocess(url, m_resolver, TARGET, VERSION1, m_obrUrl);\n+        assertNotNull(newUrl);\n+        // Verify that it is *not* uploaded...\n+        assertEquals(url, newUrl);\n     }\n \n     /**\n-     * Test case for {@link VelocityArtifactPreprocessor#needsNewVersion(String, PropertyResolver, String, String)}\n+     * Test case for {@link VelocityArtifactPreprocessor#preprocess(String, PropertyResolver, String, String, java.net.URL)}\n      */\n     @Test\n-    public void testNeedsNewVersionNonExistingTemplateOk() throws Exception {\n-        final VelocityArtifactPreprocessor vap = new VelocityArtifactPreprocessor();\n+    public void testPreprocessExistingRealTemplateOk() throws Exception {\n+        String url = createArtifact(\"Message: [$context.msg]\");\n         \n+        String newUrl = new VelocityArtifactPreprocessor().preprocess(url, m_resolver, TARGET, VERSION1, m_obrUrl);\n+        assertNotNull(newUrl);\n+        // Verify that it is actually uploaded...\n+        assertFalse(newUrl.equals(url));\n+        // Verify that it is actually uploaded to our (fake) OBR...\n+        assertTrue(newUrl.startsWith(m_obrUrl.toExternalForm()));\n+    }\n+\n+    /**\n+     * Test case for {@link VelocityArtifactPreprocessor#preprocess(String, PropertyResolver, String, String, java.net.URL)}\n+     */\n+    @Test(expected = IOException.class)\n+    public void testPreprocessNonExistingTemplateOk() throws Exception {\n         // Should be something that really doesn't exist somehow...\n         String url = \"file:///path/to/nowhere-\" + System.currentTimeMillis();\n-\n-        boolean result = vap.needsNewVersion(url, m_resolver, TARGET, VERSION);\n-        assertTrue(result); // always true for non-existing templates...\n+        \n+        new VelocityArtifactPreprocessor().preprocess(url, m_resolver, TARGET, VERSION1, m_obrUrl);\n     }\n \n     private String createArtifact(String string) throws IOException {\n@@ -154,6 +170,7 @@ private String createArtifact(String string) throws IOException {\n         \n         FileWriter writer = new FileWriter(tmpFile);\n         writer.write(string);\n+        writer.flush();\n         writer.close();\n \n         return tmpFile.toURI().toURL().toExternalForm();\n@@ -164,6 +181,7 @@ private String updateArtifact(String url, String string) throws IOException {\n         \n         FileWriter writer = new FileWriter(uri.getFile());\n         writer.write(string);\n+        writer.flush();\n         writer.close();\n \n         return url;",
                "additions": 67,
                "raw_url": "https://github.com/apache/ace/raw/bc5e7e07f3b151c343732cfa5354bcf575f2112c/ace-client-repository-helper-base/src/test/java/org/apache/ace/client/repository/helper/base/VelocityArtifactPreprocessorTest.java",
                "status": "modified",
                "changes": 116,
                "deletions": 49,
                "sha": "f8e35abd47750717bbe2c6cc961bcb08777ba3e0",
                "blob_url": "https://github.com/apache/ace/blob/bc5e7e07f3b151c343732cfa5354bcf575f2112c/ace-client-repository-helper-base/src/test/java/org/apache/ace/client/repository/helper/base/VelocityArtifactPreprocessorTest.java",
                "filename": "ace-client-repository-helper-base/src/test/java/org/apache/ace/client/repository/helper/base/VelocityArtifactPreprocessorTest.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/ace-client-repository-helper-base/src/test/java/org/apache/ace/client/repository/helper/base/VelocityArtifactPreprocessorTest.java?ref=bc5e7e07f3b151c343732cfa5354bcf575f2112c"
            }
        ],
        "bug_id": "ace_5",
        "parent": "https://github.com/apache/ace/commit/883cc6de1532d67d1cf40ddc580d2b26f6d6c385",
        "message": "ACE-257: fixed possible NPE in VelocityArtifactPreprocessor.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1325172 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/f3c2b348ca555fe76de6011dbf0c56f85da957ec",
        "file": [
            {
                "patch": "@@ -1158,7 +1158,6 @@ public RemoveLinkButton(final REPO_OBJECT object, final ObjectPanel toLeft, fina\n             super(\"-\");\n             addListener(new Button.ClickListener() {\n                 public void buttonClick(ClickEvent event) {\n-                    System.out.println(\"Removing link to \" + getNamedObject(object).getName());\n                     if (m_activeTable.equals(toLeft)) {\n                         Set<?> selection = m_activeSelection;\n                         if (selection != null) {",
                "additions": 0,
                "raw_url": "https://github.com/apache/ace/raw/f3c2b348ca555fe76de6011dbf0c56f85da957ec/ace-webui-vaadin/src/main/java/org/apache/ace/webui/vaadin/VaadinClient.java",
                "status": "modified",
                "changes": 1,
                "deletions": 1,
                "sha": "b5cc928d523a18ad4749dc82012fa2bec3ede753",
                "blob_url": "https://github.com/apache/ace/blob/f3c2b348ca555fe76de6011dbf0c56f85da957ec/ace-webui-vaadin/src/main/java/org/apache/ace/webui/vaadin/VaadinClient.java",
                "filename": "ace-webui-vaadin/src/main/java/org/apache/ace/webui/vaadin/VaadinClient.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/ace-webui-vaadin/src/main/java/org/apache/ace/webui/vaadin/VaadinClient.java?ref=f3c2b348ca555fe76de6011dbf0c56f85da957ec"
            }
        ],
        "bug_id": "ace_6",
        "parent": "https://github.com/apache/ace/commit/f2476ed9103b0ad40ad07278708322f1b9675ddb",
        "message": "Small update, removed a print statement that mainly caused NPEs. ;)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ace/trunk@1043992 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/7fdf3ae09f7c7b10582073e6cdd3c14eb5501e47",
        "file": [
            {
                "patch": "@@ -44,6 +44,8 @@\n \n import org.apache.ace.authentication.api.AuthenticationService;\n import org.apache.ace.connectionfactory.ConnectionFactory;\n+import org.apache.felix.dm.Component;\n+import org.apache.felix.dm.DependencyManager;\n import org.osgi.framework.Version;\n import org.osgi.service.cm.ConfigurationException;\n import org.osgi.service.cm.ManagedService;\n@@ -68,6 +70,7 @@\n     public static final String TEXT_MIMETYPE = \"text/plain\";\n \n     // injected by Dependency Manager\n+    private volatile DependencyManager m_dm;\n     private volatile LogService m_log;\n     private volatile AuthenticationService m_authService;\n     private volatile ConnectionFactory m_connectionFactory;\n@@ -127,6 +130,17 @@ public void updated(Dictionary settings) throws ConfigurationException {\n         }\n     }\n \n+    /**\n+     * Called by Dependency Manager upon initialization of this component.\n+     * \n+     * @param comp the component to initialize, cannot be <code>null</code>.\n+     */\n+    protected void init(Component comp) {\n+        comp.add(m_dm.createServiceDependency()\n+            .setService(AuthenticationService.class).setRequired(m_useAuth).setInstanceBound(true)\n+        );\n+    }\n+\n     @Override\n     protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n         try {",
                "additions": 14,
                "raw_url": "https://github.com/apache/ace/raw/7fdf3ae09f7c7b10582073e6cdd3c14eb5501e47/org.apache.ace.deployment/src/org/apache/ace/deployment/servlet/AgentDeploymentServlet.java",
                "status": "modified",
                "changes": 14,
                "deletions": 0,
                "sha": "0d0cfe93fb2787160543f43ffa0ffa5e2d364753",
                "blob_url": "https://github.com/apache/ace/blob/7fdf3ae09f7c7b10582073e6cdd3c14eb5501e47/org.apache.ace.deployment/src/org/apache/ace/deployment/servlet/AgentDeploymentServlet.java",
                "filename": "org.apache.ace.deployment/src/org/apache/ace/deployment/servlet/AgentDeploymentServlet.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.deployment/src/org/apache/ace/deployment/servlet/AgentDeploymentServlet.java?ref=7fdf3ae09f7c7b10582073e6cdd3c14eb5501e47"
            }
        ],
        "bug_id": "ace_7",
        "parent": "https://github.com/apache/ace/commit/ee2dad1da3a514127de459f70f9423b9024defdb",
        "message": "ACE-501 - Fix possible NPE when authentication is enabled:\n\n- add authentication service as required service if authentication\n  is enabled.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1652853 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/312ee8173f61335bc5822c72ba01be84e7bca91e",
        "file": [
            {
                "patch": "@@ -549,9 +549,14 @@ protected void remove(REPO_OBJ object) {\n      * @param object the repository object to update, cannot be <code>null</code>.\n      */\n     protected void update(REPO_OBJ object) {\n-        Item item = getItem(object.getDefinition());\n-        if (item != null) {\n-            populateItem(object, item);\n+        if (object != null) {\n+            String definition = object.getDefinition();\n+            if (definition != null) {\n+                Item item = getItem(definition);\n+                if (item != null) {\n+                    populateItem(object, item);\n+                }\n+            }\n         }\n     }\n ",
                "additions": 8,
                "raw_url": "https://github.com/apache/ace/raw/312ee8173f61335bc5822c72ba01be84e7bca91e/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/BaseObjectPanel.java",
                "status": "modified",
                "changes": 11,
                "deletions": 3,
                "sha": "8739869c77b307a886c7a7b0c4b8a01e61f3cf82",
                "blob_url": "https://github.com/apache/ace/blob/312ee8173f61335bc5822c72ba01be84e7bca91e/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/BaseObjectPanel.java",
                "filename": "org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/BaseObjectPanel.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/BaseObjectPanel.java?ref=312ee8173f61335bc5822c72ba01be84e7bca91e"
            }
        ],
        "bug_id": "ace_8",
        "parent": "https://github.com/apache/ace/commit/0f3143cc38b9b9c13ace39303a225c4c503311a7",
        "message": "Added a couple of null checks to prevent a NPE that occasionally occurred.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1521502 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/6dad2897eb9158b3ed36b7aebe97a14ed49bfe56",
        "file": [
            {
                "patch": "@@ -154,10 +154,12 @@ public void removeUser(UserDTO userDTO) throws UserNotFoundException {\n         List<UserDTO> tempData = new ArrayList<UserDTO>();\n         try {\n             Role[] roles = m_useradmin.getRoles(null);\n-            for (Role role : roles) {\n-                if (role.getType() == Role.USER) {\n-                    User user = (User) role;\n-                    tempData.add(new UserDTO((User) role, getGroup(user)));\n+            if (roles != null) {\n+                for (Role role : roles) {\n+                    if (role.getType() == Role.USER) {\n+                        User user = (User) role;\n+                        tempData.add(new UserDTO((User) role, getGroup(user)));\n+                    }\n                 }\n             }\n         }\n@@ -172,9 +174,11 @@ public void removeUser(UserDTO userDTO) throws UserNotFoundException {\n         List<Group> tempGroups = new ArrayList<Group>();\n         try {\n             Role[] roles = m_useradmin.getRoles(\"(type=userGroup)\");\n-            for (Role role : roles) {\n-                if (role.getType() == Role.GROUP) {\n-                    tempGroups.add((Group) role);\n+            if (roles != null) {\n+                for (Role role : roles) {\n+                    if (role.getType() == Role.GROUP) {\n+                        tempGroups.add((Group) role);\n+                    }\n                 }\n             }\n         }\n@@ -189,9 +193,11 @@ public void removeUser(UserDTO userDTO) throws UserNotFoundException {\n         List<User> tempUsers = new ArrayList<User>();\n         try {\n             Role[] roles = m_useradmin.getRoles(null);\n-            for (Role role : roles) {\n-                if (role.getType() == Role.USER) {\n-                    tempUsers.add((User) role);\n+            if (roles != null) {\n+                for (Role role : roles) {\n+                    if (role.getType() == Role.USER) {\n+                        tempUsers.add((User) role);\n+                    }\n                 }\n             }\n         }\n@@ -210,9 +216,12 @@ public Group getGroup(User user) {\n                 Role result = m_useradmin.getRole(role);\n                 if (result.getType() == Role.GROUP) {\n                     Group group = (Group) result;\n-                    for (Role r : group.getMembers()) {\n-                        if (r.getType() == Role.USER && r.getName().equals(user.getName())) {\n-                            return group;\n+                    Role[] members = group.getMembers();\n+                    if (members != null) {\n+                        for (Role r : members) {\n+                            if (r.getType() == Role.USER && r.getName().equals(user.getName())) {\n+                                return group;\n+                            }\n                         }\n                     }\n                 }",
                "additions": 22,
                "raw_url": "https://github.com/apache/ace/raw/6dad2897eb9158b3ed36b7aebe97a14ed49bfe56/org.apache.ace.useradmin.ui/src/org/apache/ace/useradmin/ui/editor/impl/UserEditorImpl.java",
                "status": "modified",
                "changes": 35,
                "deletions": 13,
                "sha": "50b585202c8a1574a252d7a7d87d9227596274db",
                "blob_url": "https://github.com/apache/ace/blob/6dad2897eb9158b3ed36b7aebe97a14ed49bfe56/org.apache.ace.useradmin.ui/src/org/apache/ace/useradmin/ui/editor/impl/UserEditorImpl.java",
                "filename": "org.apache.ace.useradmin.ui/src/org/apache/ace/useradmin/ui/editor/impl/UserEditorImpl.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.useradmin.ui/src/org/apache/ace/useradmin/ui/editor/impl/UserEditorImpl.java?ref=6dad2897eb9158b3ed36b7aebe97a14ed49bfe56"
            }
        ],
        "bug_id": "ace_9",
        "parent": "https://github.com/apache/ace/commit/fe6477cfc4466746c16d393afbe76cd4f2566727",
        "message": "ACE-339 Prevent some NPEs that occur when useradmin has no data\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1488892 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/e5d86d3424ba829c79435b9d20da3e7303c97f84",
        "file": [
            {
                "patch": "@@ -349,14 +349,15 @@ public void updated(Dictionary settings) throws ConfigurationException {\n             m_baseDirectory = baseDirectory;\n \n             String defaultDirectoryName = (String) settings.get(DEFAULT_DIRECTORY_NAME);\n-            File defaultDirectory = new File(defaultDirectoryName);\n-            if (!defaultDirectory.exists() || !defaultDirectory.isDirectory()) {\n-                // fallback to using the base directory\n-                m_defaultDirectory = baseDirectory;\n-            }\n-            else {\n-                m_defaultDirectory = defaultDirectory;\n+            if (defaultDirectoryName != null) {\n+                File defaultDirectory = new File(defaultDirectoryName);\n+                if (defaultDirectory.exists() && defaultDirectory.isDirectory()) {\n+                    m_defaultDirectory = defaultDirectory;\n+                    return;\n+                }\n             }\n+            // fallback to using the base directory\n+            m_defaultDirectory = baseDirectory;\n         }\n     }\n ",
                "additions": 8,
                "raw_url": "https://github.com/apache/ace/raw/e5d86d3424ba829c79435b9d20da3e7303c97f84/server/src/org/apache/ace/deployment/provider/filebased/FileBasedProvider.java",
                "status": "modified",
                "changes": 15,
                "deletions": 7,
                "sha": "f0f42b6646ff8a3a0fb203574bef4ab2a837e12b",
                "blob_url": "https://github.com/apache/ace/blob/e5d86d3424ba829c79435b9d20da3e7303c97f84/server/src/org/apache/ace/deployment/provider/filebased/FileBasedProvider.java",
                "filename": "server/src/org/apache/ace/deployment/provider/filebased/FileBasedProvider.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/server/src/org/apache/ace/deployment/provider/filebased/FileBasedProvider.java?ref=e5d86d3424ba829c79435b9d20da3e7303c97f84"
            }
        ],
        "bug_id": "ace_10",
        "parent": "https://github.com/apache/ace/commit/746ea2416be6e3af4a0743397e0821f7745dc58f",
        "message": "Bugfix, NPE when the default directory was not specified, made a mistake in the checking code.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ace/trunk@829739 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/ae8e07949ec8ad3a022c694e1c7fa8fb759a460a",
        "file": [
            {
                "patch": "@@ -78,6 +78,7 @@ Test-Cases: ${classes;CONCRETE;EXTENDS;org.apache.ace.it.IntegrationTestBase}\n \torg.apache.ace.client.repository.impl;version=latest,\\\n \torg.apache.ace.deployment.provider.repositorybased;version=latest,\\\n \torg.apache.ace.client.rest;version=latest,\\\n+\torg.apache.ace.client.workspace;version=latest,\\\n \torg.apache.ace.feedback.common;version=latest\n -runproperties: org.apache.felix.log.storeDebug=true,\\\n \torg.apache.felix.eventadmin.Timeout=0,\\",
                "additions": 1,
                "raw_url": "https://github.com/apache/ace/raw/ae8e07949ec8ad3a022c694e1c7fa8fb759a460a/org.apache.ace.client.rest.itest/bnd.bnd",
                "status": "modified",
                "changes": 1,
                "deletions": 0,
                "sha": "1375023033e47259c3042090aac1dfb543fe0797",
                "blob_url": "https://github.com/apache/ace/blob/ae8e07949ec8ad3a022c694e1c7fa8fb759a460a/org.apache.ace.client.rest.itest/bnd.bnd",
                "filename": "org.apache.ace.client.rest.itest/bnd.bnd",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.client.rest.itest/bnd.bnd?ref=ae8e07949ec8ad3a022c694e1c7fa8fb759a460a"
            },
            {
                "patch": "@@ -198,13 +198,14 @@ public static File createTmpConfigOnDisk(String config) throws Exception {\n \n     /** Creates a new workspace. */\n     public static WebResource createWorkspace(String host, Client c) {\n-        WebResource r = c.resource(host.concat(\"/client/work\"));\n+        WebResource r = c.resource(host.concat(\"/client/work/\"));\n         try {\n             r.post(String.class, \"\");\n             fail(\"We should have been redirected to a new workspace.\");\n             return null; // to keep the compiler happy, it does not understand what fail() does\n         }\n         catch (UniformInterfaceException e) {\n+            assertEquals(\"Expected a valid redirect after creating a workspace\", 302, e.getResponse().getStatus());\n             return c.resource(e.getResponse().getLocation());\n         }\n     }",
                "additions": 2,
                "raw_url": "https://github.com/apache/ace/raw/ae8e07949ec8ad3a022c694e1c7fa8fb759a460a/org.apache.ace.client.rest.itest/src/org/apache/ace/client/rest/itest/ClientRestUtils.java",
                "status": "modified",
                "changes": 3,
                "deletions": 1,
                "sha": "e21b2d16e8c6c56a64163f7828e5814323a6ae69",
                "blob_url": "https://github.com/apache/ace/blob/ae8e07949ec8ad3a022c694e1c7fa8fb759a460a/org.apache.ace.client.rest.itest/src/org/apache/ace/client/rest/itest/ClientRestUtils.java",
                "filename": "org.apache.ace.client.rest.itest/src/org/apache/ace/client/rest/itest/ClientRestUtils.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.client.rest.itest/src/org/apache/ace/client/rest/itest/ClientRestUtils.java?ref=ae8e07949ec8ad3a022c694e1c7fa8fb759a460a"
            },
            {
                "patch": "@@ -393,6 +393,15 @@ private void configureServer() throws IOException {\n         configure(\"org.apache.ace.identification.property\",\n             \"targetID\", \"target-test\");\n \n+        configure(\"org.apache.ace.client.workspace\",\n+            \"repository.url\", HOST.concat(\"/repository\"),\n+            \"authentication.enabled\", \"false\",\n+            \"user.name\", \"d\",\n+            \"customer.name\", \"apache\",\n+            \"store.repository.name\", \"shop\",\n+            \"distribution.repository.name\", \"target\",\n+            \"deployment.repository.name\", \"deployment\");\n+\n         configureFactory(\"org.apache.ace.log.server.servlet.factory\",\n             \"name\", \"auditlog\",\n             HttpConstants.ENDPOINT, \"/auditlog\",",
                "additions": 9,
                "raw_url": "https://github.com/apache/ace/raw/ae8e07949ec8ad3a022c694e1c7fa8fb759a460a/org.apache.ace.client.rest.itest/src/org/apache/ace/client/rest/itest/RESTClientTest.java",
                "status": "modified",
                "changes": 9,
                "deletions": 0,
                "sha": "20ba0e084f97e9d1cc70752139ec0090884fa00e",
                "blob_url": "https://github.com/apache/ace/blob/ae8e07949ec8ad3a022c694e1c7fa8fb759a460a/org.apache.ace.client.rest.itest/src/org/apache/ace/client/rest/itest/RESTClientTest.java",
                "filename": "org.apache.ace.client.rest.itest/src/org/apache/ace/client/rest/itest/RESTClientTest.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.client.rest.itest/src/org/apache/ace/client/rest/itest/RESTClientTest.java?ref=ae8e07949ec8ad3a022c694e1c7fa8fb759a460a"
            }
        ],
        "bug_id": "ace_11",
        "parent": "https://github.com/apache/ace/commit/ced85f6fac52167215bf02923e6a1e12433f4d5e",
        "message": "ACE-456 - fixed failing itest:\n\n- added missing workspace bundle + configuration;\n- added additional assertion on createWorkspace to ensure that\n  we've got a valid redirect. Otherwise, obscure NPEs will be\n  thrown later in the test(s).\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1571710 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/cf2d3204604a716fd1834aa493d4681e53c44c58",
        "file": [
            {
                "patch": "@@ -122,7 +122,9 @@ public StatefulTargetObject get(String definition) {\n     public void remove(StatefulTargetObject entity) {\n         synchronized (m_repository) {\n             StatefulTargetObjectImpl statefulTarget = (StatefulTargetObjectImpl) entity;\n-            unregister(statefulTarget.getID());\n+            if (statefulTarget.isRegistered()) {\n+                unregister(statefulTarget.getID());\n+            }\n             removeStateful(statefulTarget);\n             // Ensure the external side sees the changes we've made...\n             statefulTarget.updateTargetObject(false);\n@@ -740,7 +742,8 @@ DeploymentVersionObject generateDeploymentVersion(String targetID) throws IOExce\n      */\n     private static String nextVersion(String version) {\n         try {\n-            Version v = new Version(version);\n+            // in case the given version is null or empty, v will be '0.0.0'... \n+            Version v = Version.parseVersion(version);\n             Version result = new Version(v.getMajor() + 1, 0, 0);\n             return result.toString();\n         }",
                "additions": 5,
                "raw_url": "https://github.com/apache/ace/raw/cf2d3204604a716fd1834aa493d4681e53c44c58/org.apache.ace.client.repository/src/org/apache/ace/client/repository/stateful/impl/StatefulTargetRepositoryImpl.java",
                "status": "modified",
                "changes": 7,
                "deletions": 2,
                "sha": "e8194decb01f80ce8226ede895658b035989ed66",
                "blob_url": "https://github.com/apache/ace/blob/cf2d3204604a716fd1834aa493d4681e53c44c58/org.apache.ace.client.repository/src/org/apache/ace/client/repository/stateful/impl/StatefulTargetRepositoryImpl.java",
                "filename": "org.apache.ace.client.repository/src/org/apache/ace/client/repository/stateful/impl/StatefulTargetRepositoryImpl.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.client.repository/src/org/apache/ace/client/repository/stateful/impl/StatefulTargetRepositoryImpl.java?ref=cf2d3204604a716fd1834aa493d4681e53c44c58"
            }
        ],
        "bug_id": "ace_12",
        "parent": "https://github.com/apache/ace/commit/86ca7f5a93e94423732008e246533b1107a36343",
        "message": "Some minor tweaks and fixes:\n\n- in case we want to remove a stateful target, we shouldn't assume that\n  it is always registered;\n- use Version#parseVersion to properly handle null-values, instead of\n  catching a NPE.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1540067 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/8e7411ca9d9093dcc40ffdf165d29be2535b47d5",
        "file": [
            {
                "patch": "@@ -108,7 +108,13 @@ else if (BaseObjectPanel.ACTION_UNLINK.equals(propertyId)) {\n             }\n \n             private boolean equals(Object itemId, RepositoryObject object) {\n-                return object.getDefinition().equals(itemId);\n+                if (object == null) {\n+                    return false;\n+                }\n+                else {\n+                    String definition = object.getDefinition();\n+                    return definition == null ? false : definition.equals(itemId);\n+                }\n             }\n         };\n     }",
                "additions": 7,
                "raw_url": "https://github.com/apache/ace/raw/8e7411ca9d9093dcc40ffdf165d29be2535b47d5/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/AssociationHelper.java",
                "status": "modified",
                "changes": 8,
                "deletions": 1,
                "sha": "ef70b782e25ed3cdb13d9a57f98bf69ca950f1bc",
                "blob_url": "https://github.com/apache/ace/blob/8e7411ca9d9093dcc40ffdf165d29be2535b47d5/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/AssociationHelper.java",
                "filename": "org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/AssociationHelper.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/org.apache.ace.webui.vaadin/src/org/apache/ace/webui/vaadin/component/AssociationHelper.java?ref=8e7411ca9d9093dcc40ffdf165d29be2535b47d5"
            }
        ],
        "bug_id": "ace_13",
        "parent": "https://github.com/apache/ace/commit/e635a9d2ff9407229d0054a5f246dc827877dd16",
        "message": "Fixed a NPE when dropping a feature onto a bundle name. It now does nothing. We might want to think about ACE-319 in this context.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ace/trunk@1536927 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    },
    {
        "commit": "https://github.com/apache/ace/commit/382535a81f794003bafe601cf01f2ed9b5e5b294",
        "file": [
            {
                "patch": "@@ -19,6 +19,7 @@\n package org.apache.ace.client;\n \n import java.util.Arrays;\n+import java.util.Collections;\n import java.util.HashMap;\n import java.util.List;\n import java.util.Map;\n@@ -184,15 +185,22 @@ void updateUI() {\n      * Triggers the updating of the highlight\n      */\n     void updateHighlight() {\n-        m_assocationService.getRelated(getSelectedObject(), new AsyncCallback<Descriptor[]>() {\n-            public void onFailure(Throwable caught) {\n-                // Too bad...\n-                Window.alert(\"Error updating highlights: \" + caught);\n-            }\n-            public void onSuccess(Descriptor[] result) {\n-                highlight(Arrays.asList(result));\n-            }\n-        });\n+        Descriptor selected = getSelectedObject();\n+        if (selected == null) {\n+            List<Descriptor> emptyList = Collections.emptyList();\n+            highlight(emptyList);\n+        }\n+        else {\n+            m_assocationService.getRelated(selected, new AsyncCallback<Descriptor[]>() {\n+                public void onFailure(Throwable caught) {\n+                    // Too bad...\n+                    Window.alert(\"Error updating highlights: \" + caught);\n+                }\n+                public void onSuccess(Descriptor[] result) {\n+                    highlight(Arrays.asList(result));\n+                }\n+            });\n+        }\n     }\n     \n     /**",
                "additions": 17,
                "raw_url": "https://github.com/apache/ace/raw/382535a81f794003bafe601cf01f2ed9b5e5b294/webui/src/org/apache/ace/client/Main.java",
                "status": "modified",
                "changes": 26,
                "deletions": 9,
                "sha": "d5a854823c4d37238a3dc97c6bb8cecc6498b3e9",
                "blob_url": "https://github.com/apache/ace/blob/382535a81f794003bafe601cf01f2ed9b5e5b294/webui/src/org/apache/ace/client/Main.java",
                "filename": "webui/src/org/apache/ace/client/Main.java",
                "contents_url": "https://api.github.com/repos/apache/ace/contents/webui/src/org/apache/ace/client/Main.java?ref=382535a81f794003bafe601cf01f2ed9b5e5b294"
            }
        ],
        "bug_id": "ace_14",
        "parent": "https://github.com/apache/ace/commit/9708e8c2e43d9a66c40a3665b17dc821d936505b",
        "message": "ACE-41 Now we don't have a selection per se when creating associations, we introduced the opportunity for an NPE when updating highlights; introduced a null check for that.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ace/trunk@821424 13f79535-47bb-0310-9956-ffa450edef68",
        "repo": "ace"
    }
]