[
    {
        "commit": "https://github.com/apache/maven-site-plugin/commit/92d7eff59b92b4c0a198dcc464ed7bb76835bb13",
        "repo": "maven-site-plugin",
        "parent": "https://github.com/apache/maven-site-plugin/commit/1bca8bf668b3e48545ead485d0f3d588edda5bba",
        "message": "[MSITE-644] NullPointerException when site URL is not defined in distributionManagement\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1390726 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-site-plugin_1",
        "file": [
            {
                "sha": "52000bb4ee9bee068aa3844c76dd38805c8a3960",
                "filename": "pom.xml",
                "status": "modified",
                "additions": 3,
                "deletions": 2,
                "changes": 5,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/92d7eff59b92b4c0a198dcc464ed7bb76835bb13/pom.xml",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/92d7eff59b92b4c0a198dcc464ed7bb76835bb13/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/pom.xml?ref=92d7eff59b92b4c0a198dcc464ed7bb76835bb13",
                "patch": "@@ -309,7 +309,7 @@ under the License.\n       <version>2.5</version>\n     </dependency>\n \n-    <!-- Doxia-sitetools -->\n+    <!-- Doxia Sitetools -->\n     <dependency>\n       <groupId>org.apache.maven.doxia</groupId>\n       <artifactId>doxia-decoration-model</artifactId>\n@@ -321,10 +321,11 @@ under the License.\n       <version>${doxiaSitetoolsVersion}</version>\n     </dependency>\n \n+    <!-- Doxia Tools -->\n     <dependency>\n       <groupId>org.apache.maven.doxia</groupId>\n       <artifactId>doxia-integration-tools</artifactId>\n-      <version>1.5-SNAPSHOT</version>\n+      <version>1.5</version>\n       <exclusions>\n         <exclusion>\n           <groupId>org.apache.maven</groupId>"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-site-plugin/commit/29671144fbbba49e064e1ce147922381e05a612d",
        "repo": "maven-site-plugin",
        "parent": "https://github.com/apache/maven-site-plugin/commit/26c3ba022e72823a696d2f8ca31af6943e23a71a",
        "message": "[MSITE-644] NullPointerException when site URL is not defined in distributionManagement\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1351233 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-site-plugin_2",
        "file": [
            {
                "sha": "6921852bc6866917a92b60eb2933d00c686c73ef",
                "filename": "pom.xml",
                "status": "modified",
                "additions": 3,
                "deletions": 3,
                "changes": 6,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/29671144fbbba49e064e1ce147922381e05a612d/pom.xml",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/29671144fbbba49e064e1ce147922381e05a612d/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/pom.xml?ref=29671144fbbba49e064e1ce147922381e05a612d",
                "patch": "@@ -312,9 +312,9 @@ under the License.\n     </dependency>\n \n     <dependency>\n-      <groupId>org.apache.maven.shared</groupId>\n-      <artifactId>maven-doxia-tools</artifactId>\n-      <version>1.4</version>\n+      <groupId>org.apache.maven.doxia</groupId>\n+      <artifactId>doxia-integration-tools</artifactId>\n+      <version>1.5-SNAPSHOT</version>\n       <exclusions>\n         <exclusion>\n           <groupId>org.apache.maven</groupId>"
            },
            {
                "sha": "4ea07d2a3ae6c11d165f7fe3c94a573e60792e92",
                "filename": "src/it/MSITE-644/invoker.properties",
                "status": "added",
                "additions": 1,
                "deletions": 0,
                "changes": 1,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/29671144fbbba49e064e1ce147922381e05a612d/src/it/MSITE-644/invoker.properties",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/29671144fbbba49e064e1ce147922381e05a612d/src/it/MSITE-644/invoker.properties",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/it/MSITE-644/invoker.properties?ref=29671144fbbba49e064e1ce147922381e05a612d",
                "patch": "@@ -0,0 +1 @@\n+invoker.nonRecursive = true"
            },
            {
                "sha": "db2884d98f51d4ccce7dece28e29a43312e0f264",
                "filename": "src/it/MSITE-644/pom.xml",
                "status": "added",
                "additions": 57,
                "deletions": 0,
                "changes": 57,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/29671144fbbba49e064e1ce147922381e05a612d/src/it/MSITE-644/pom.xml",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/29671144fbbba49e064e1ce147922381e05a612d/src/it/MSITE-644/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/it/MSITE-644/pom.xml?ref=29671144fbbba49e064e1ce147922381e05a612d",
                "patch": "@@ -0,0 +1,57 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <groupId>test-site</groupId>\n+  <artifactId>no-url</artifactId>\n+  <version>1.0-SNAPSHOT</version>\n+  <packaging>pom</packaging>\n+  <name>MSITE-644</name>\n+\n+  <distributionManagement>\n+    <site>\n+      <id>site</id>\n+      <!-- missing url -->\n+    </site>\n+  </distributionManagement>\n+\n+  <build>\n+    <pluginManagement>\n+      <plugins>\n+        <plugin>\n+          <artifactId>maven-site-plugin</artifactId>\n+          <version>@project.version@</version>\n+          <configuration>\n+            <generateReports>false</generateReports>\n+          </configuration>\n+        </plugin>\n+      </plugins>\n+    </pluginManagement>\n+  </build>\n+\n+  <modules>\n+    <module>module</module>\n+  </modules>\n+\n+</project>"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-site-plugin/commit/d315d7e22b85dae43673caa1bf2a385ecbd824de",
        "repo": "maven-site-plugin",
        "parent": "https://github.com/apache/maven-site-plugin/commit/2cd32130d432cb733d091a05d30e04bbb17bc50b",
        "message": "fix NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@386835 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-site-plugin_3",
        "file": [
            {
                "sha": "b41fbc4c599f70d93bf56a5e94885fa5496ff0a9",
                "filename": "src/main/java/org/apache/maven/plugins/site/AbstractSiteRenderingMojo.java",
                "status": "modified",
                "additions": 7,
                "deletions": 2,
                "changes": 9,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/d315d7e22b85dae43673caa1bf2a385ecbd824de/src/main/java/org/apache/maven/plugins/site/AbstractSiteRenderingMojo.java",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/d315d7e22b85dae43673caa1bf2a385ecbd824de/src/main/java/org/apache/maven/plugins/site/AbstractSiteRenderingMojo.java",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/main/java/org/apache/maven/plugins/site/AbstractSiteRenderingMojo.java?ref=d315d7e22b85dae43673caa1bf2a385ecbd824de",
                "patch": "@@ -691,7 +691,7 @@ protected void populateReportsMenu( DecorationModel decorationModel, Locale loca\n             if ( menu.getItems().isEmpty() )\n             {\n                 List categoryReports = (List) categories.get( MavenReport.CATEGORY_PROJECT_INFORMATION );\n-                if ( !categoryReports.isEmpty() )\n+                if ( !isEmptyList( categoryReports ) )\n                 {\n                     MenuItem item = createCategoryMenu(\n                         i18n.getString( \"site-plugin\", locale, \"report.menu.projectinformation\" ), \"/project-info.html\",\n@@ -701,7 +701,7 @@ protected void populateReportsMenu( DecorationModel decorationModel, Locale loca\n                 }\n \n                 categoryReports = (List) categories.get( MavenReport.CATEGORY_PROJECT_REPORTS );\n-                if ( !categoryReports.isEmpty() )\n+                if ( !isEmptyList( categoryReports ) )\n                 {\n                     MenuItem item = createCategoryMenu(\n                         i18n.getString( \"site-plugin\", locale, \"report.menu.projectreports\" ), \"/project-reports.html\",\n@@ -853,4 +853,9 @@ protected Map locateDocuments( SiteRenderingContext context, List reports, Local\n         }\n         return documents;\n     }\n+\n+    private static boolean isEmptyList( List list )\n+    {\n+        return list == null || list.isEmpty();\n+    }\n }"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-site-plugin/commit/8509e10d143bcb231d8c8536f723a1c633aba257",
        "repo": "maven-site-plugin",
        "parent": "https://github.com/apache/maven-site-plugin/commit/5a22802aa2adc7e2da9ebd707cc92badfa64dec6",
        "message": "avoid NPE when no authenticationInfo\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1083303 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-site-plugin_4",
        "file": [
            {
                "sha": "7ebbc2271b4208a0fca5ca88441c430c7dab5f1e",
                "filename": "src/main/java/org/apache/maven/plugins/site/AbstractDeployMojo.java",
                "status": "modified",
                "additions": 2,
                "deletions": 1,
                "changes": 3,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/8509e10d143bcb231d8c8536f723a1c633aba257/src/main/java/org/apache/maven/plugins/site/AbstractDeployMojo.java",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/8509e10d143bcb231d8c8536f723a1c633aba257/src/main/java/org/apache/maven/plugins/site/AbstractDeployMojo.java",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/main/java/org/apache/maven/plugins/site/AbstractDeployMojo.java?ref=8509e10d143bcb231d8c8536f723a1c633aba257",
                "patch": "@@ -302,7 +302,8 @@ private static void push( final File inputDirectory, final Repository repository\n         throws MojoExecutionException\n     {\n         AuthenticationInfo authenticationInfo = manager.getAuthenticationInfo( repository.getId() );\n-        log.debug( \"authenticationInfo with id '\" + repository.getId() + \"': \" + authenticationInfo.getUserName() );\n+        log.debug( \"authenticationInfo with id '\" + repository.getId() + \"': \"\n+            + ( ( authenticationInfo == null ) ? \"-\" : authenticationInfo.getUserName() ) );\n \n         try\n         {"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-site-plugin/commit/5a7a81f987f6fe26103dead7208b8b7fa4f3a386",
        "repo": "maven-site-plugin",
        "parent": "https://github.com/apache/maven-site-plugin/commit/2fe3069799066832599f2df5db605e58423cd8e8",
        "message": "Fixed NPE when pom.xml doesn't define a project <url>.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@369197 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-site-plugin_5",
        "file": [
            {
                "sha": "0c49f8e366cf24363963e904fefb4ba5beedaeb7",
                "filename": "src/main/java/org/apache/maven/plugins/site/SiteMojo.java",
                "status": "modified",
                "additions": 3,
                "deletions": 0,
                "changes": 3,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/5a7a81f987f6fe26103dead7208b8b7fa4f3a386/src/main/java/org/apache/maven/plugins/site/SiteMojo.java",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/5a7a81f987f6fe26103dead7208b8b7fa4f3a386/src/main/java/org/apache/maven/plugins/site/SiteMojo.java",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/main/java/org/apache/maven/plugins/site/SiteMojo.java?ref=5a7a81f987f6fe26103dead7208b8b7fa4f3a386",
                "patch": "@@ -498,6 +498,9 @@ private DecorationModel getDecorationModel( List reports, Locale locale, List pr\n \n         DecorationModel decorationModel = getDecorationModel( project, locale, props );\n \n+        if ( project.getUrl() == null )\n+                throw new MojoExecutionException( \"Project \" + project.getId() + \" has no Url defined\" );\n+\n         assembler.resolvePaths( decorationModel, project.getUrl() );\n \n         return decorationModel;"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-site-plugin/commit/82796ce38afcdc1249845b1eef38d55aab42e837",
        "repo": "maven-site-plugin",
        "parent": "https://github.com/apache/maven-site-plugin/commit/d37e7d50d32d02d53fc407a8c72f5792b59225a8",
        "message": "Upgraded to plexus-site-renderer-1.0-alpha-2 and corrected a NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/components/trunk/maven-plugins@219253 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-site-plugin_6",
        "file": [
            {
                "sha": "cd3c623a255e3f442d5456da939d04a8a33a47ac",
                "filename": "pom.xml",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/82796ce38afcdc1249845b1eef38d55aab42e837/pom.xml",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/82796ce38afcdc1249845b1eef38d55aab42e837/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/pom.xml?ref=82796ce38afcdc1249845b1eef38d55aab42e837",
                "patch": "@@ -48,7 +48,7 @@\n     <dependency>\n       <groupId>plexus</groupId>\n       <artifactId>plexus-site-renderer</artifactId>\n-      <version>1.0-alpha-1</version>\n+      <version>1.0-alpha-2-20050715.080727-2</version>\n     </dependency>\n     <dependency>\n       <groupId>org.apache.maven.wagon</groupId>"
            },
            {
                "sha": "a407dde7af0201840ca5a8016bdbb3825b88fff1",
                "filename": "src/main/java/org/apache/maven/doxia/DoxiaMojo.java",
                "status": "modified",
                "additions": 5,
                "deletions": 0,
                "changes": 5,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/82796ce38afcdc1249845b1eef38d55aab42e837/src/main/java/org/apache/maven/doxia/DoxiaMojo.java",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/82796ce38afcdc1249845b1eef38d55aab42e837/src/main/java/org/apache/maven/doxia/DoxiaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/main/java/org/apache/maven/doxia/DoxiaMojo.java?ref=82796ce38afcdc1249845b1eef38d55aab42e837",
                "patch": "@@ -548,6 +548,11 @@ public boolean accept(File file) {\n             }\n         });\n         \n+        if ( ( directories == null ) || ( directories.length  == 0 ) )\n+        {\n+            return false;\n+        }\n+        \n         List indexFound = new ArrayList();\n         for ( int i = 0; i < directories.length; i++ )\n         {"
            },
            {
                "sha": "ece47f98f36164571e9b137b4063cc34251f6f7b",
                "filename": "src/main/resources/org/apache/maven/doxia/maven-site.vm",
                "status": "modified",
                "additions": 28,
                "deletions": 31,
                "changes": 59,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/82796ce38afcdc1249845b1eef38d55aab42e837/src/main/resources/org/apache/maven/doxia/maven-site.vm",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/82796ce38afcdc1249845b1eef38d55aab42e837/src/main/resources/org/apache/maven/doxia/maven-site.vm",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/main/resources/org/apache/maven/doxia/maven-site.vm?ref=82796ce38afcdc1249845b1eef38d55aab42e837",
                "patch": "@@ -39,27 +39,26 @@\n   #end\n #end\n \n+#macro ( displayTree $display $item)\n+  #if ( $item.getChildren() && $item.getChildCount() > 0 )\n+    #foreach( $subitem in $item.getChildren() )\n+      #set ( $subitemHref = $PathTool.calculateLink( $subitem.getAttribute( \"href\" ), $relativePath ) )\n+      #set ( $subitemHref = $$subitemHref.replaceAll( \"\\\\\", \"/\" ) )\n+\n+      #if ( $currentFileName == $subitemHref ) \n+        #set ( $display = true )\n+      #end\n+          \n+      #displayTree($display $subitem)\n+    #end\n+  #end\n+#end\n+        \n #macro ( menuItem $item )\n   #set ( $collapse = \"none\" )\n   #set ( $currentItemHref = $PathTool.calculateLink( $item.getAttribute( \"href\" ), $relativePath ) )\n   #set ( $currentFileName = $currentFileName.replaceAll( \"\\\\\", \"/\" ) )\n   #set ( $currentItemHref = $currentItemHref.replaceAll( \"\\\\\", \"/\" ) )\n-  \n-  #set ( $currentFileNameLastSlash = $currentFileName.lastIndexOf( \"/\" ) )\n-  #if ( $currentFileNameLastSlash != -1)\n-    #set ( $currentFileNameTmp = $currentFileName.substring( 0, $currentFileNameLastSlash ) )\n-  #else\n-    #set ( $currentFileNameTmp = $currentFileName.substring( 0, $currentFileName.lengh() ) )\n-  #end\n-\n-  #set ( $currentItemHrefLastSlash = $currentItemHref.lastIndexOf( \"/\" ) )\n-  #if ( $currentItemHrefLastSlash != -1)\n-    #set ( $currentItemHrefTmp = $currentItemHref.substring( 0, $currentItemHrefLastSlash ) )\n-  #else\n-    #set ( $currentItemHrefTmp = $currentItemHref.substring( 0, $currentItemHref.lengh() ) )\n-  #end\n-\n-  #set ( $tree = $currentFileNameTmp && $currentItemHrefTmp && $currentFileNameTmp.startsWith( $currentItemHrefTmp ) )\n \n   #if ( $item.getChildCount() > 0 )\n     #if ( ( $item.getAttribute( \"collapse\" ) ) && ( $item.getAttribute( \"collapse\" ).equalsIgnoreCase( \"false\" ) ) )\n@@ -68,31 +67,29 @@\n       ## By default collapsed\n       #set ( $collapse = \"collapsed\" )\n     #end\n-\n-    #if ( $currentFileName == $currentItemHref )\n-      #set ( $collapse = \"expanded\" )\n-    #end\n     \n-    #if ( $tree )\n+    #if ( $currentFileName == $currentItemHref ) \n       #set ( $collapse = \"expanded\" )\n     #end\n   #end\n-  <li class=\"$collapse\" $currentFileName $currentItemHref>\n+  <li class=\"$collapse\">\n     #if ( $currentFileName == $currentItemHref ) \n       <strong><a href=\"$currentItemHref\">$item.getAttribute( \"name\" )</a></strong>\n     #else\n       <a href=\"$currentItemHref\">$item.getAttribute( \"name\" )</a>\n     #end\n   </li>\n-  #if ( $item.getChildren() )\n-    #if ( $item.getChildCount() > 0 )\n-      #if ( $collapse == \"expanded\" || $tree )\n-        <ul>\n-          #foreach( $subitem in $item.getChildren() )\n-            #menuItem( $subitem )\n-          #end\n-        </ul>\n-      #end\n+  #if ( $item.getChildren() && $item.getChildCount() > 0 )\n+    #set ( $display = false )\n+    #set ( $itemTmp = $item )\n+    #displayTree($display $itemTmp)\n+\n+    #if ( $collapse == \"expanded\" || $display )\n+      <ul>\n+        #foreach( $subitem in $item.getChildren() )\n+          #menuItem( $subitem )\n+        #end\n+      </ul>\n     #end\n   #end\n #end"
            },
            {
                "sha": "2cb261a6269fc45291526ee7950f71008a9b92ae",
                "filename": "src/test/projects/site-plugin-test6/src/site/apt/gamma/index.apt",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/82796ce38afcdc1249845b1eef38d55aab42e837/src/test/projects/site-plugin-test6/src/site/apt/gamma/index.apt",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/82796ce38afcdc1249845b1eef38d55aab42e837/src/test/projects/site-plugin-test6/src/site/apt/gamma/index.apt",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/test/projects/site-plugin-test6/src/site/apt/gamma/index.apt?ref=82796ce38afcdc1249845b1eef38d55aab42e837",
                "patch": "@@ -9,4 +9,4 @@\n \n Site Plugin Index\n \n- From /theta/index.apt\n+ From /gamma/index.apt"
            },
            {
                "sha": "a7217b32685496ef88f433a8ff4dd7dd77c87c43",
                "filename": "src/test/projects/site-plugin-test6/src/site/apt/gamma/two/index.apt",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/82796ce38afcdc1249845b1eef38d55aab42e837/src/test/projects/site-plugin-test6/src/site/apt/gamma/two/index.apt",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/82796ce38afcdc1249845b1eef38d55aab42e837/src/test/projects/site-plugin-test6/src/site/apt/gamma/two/index.apt",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/test/projects/site-plugin-test6/src/site/apt/gamma/two/index.apt?ref=82796ce38afcdc1249845b1eef38d55aab42e837",
                "patch": "@@ -9,4 +9,4 @@\n  \n Site Plugin Index\n \n- From /theta/two/index.apt\n+ From /gamma/two/index.apt"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-site-plugin/commit/4ba5971384d03c659ce1ae3088b37363ba7dc689",
        "repo": "maven-site-plugin",
        "parent": "https://github.com/apache/maven-site-plugin/commit/879fc5ad73330f8993b37c4a154a57711aa7bb3f",
        "message": "MSITE-138: site:stage does not create xref\n\no replaced all annotations for outputdirectory in Mojo Reports: ${project.build.directory}/site =>  ${project.reporting.outputDirectory}\no setReportOutputDirectory() in all Mojo reports (if required).\no handle outputdirectory for external reports in SiteRunMojo and in DoxiaFilter\no handle NPE for dependencies when site:run is called (due to MPIR-55)\n\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@433277 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-site-plugin_7",
        "file": [
            {
                "sha": "7f16981bbe466b4398988e4822ebaf134e87f31f",
                "filename": "src/main/java/org/apache/maven/plugins/site/ReportDocumentRenderer.java",
                "status": "modified",
                "additions": 12,
                "deletions": 5,
                "changes": 17,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/4ba5971384d03c659ce1ae3088b37363ba7dc689/src/main/java/org/apache/maven/plugins/site/ReportDocumentRenderer.java",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/4ba5971384d03c659ce1ae3088b37363ba7dc689/src/main/java/org/apache/maven/plugins/site/ReportDocumentRenderer.java",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/main/java/org/apache/maven/plugins/site/ReportDocumentRenderer.java?ref=4ba5971384d03c659ce1ae3088b37363ba7dc689",
                "patch": "@@ -28,7 +28,6 @@\n import org.apache.maven.reporting.MavenReport;\n import org.apache.maven.reporting.MavenMultiPageReport;\n import org.apache.maven.reporting.MavenReportException;\n-import org.apache.maven.reporting.MavenReport;\n \n import java.io.FileNotFoundException;\n import java.io.IOException;\n@@ -68,14 +67,14 @@ public ReportDocumentRenderer( MavenReport report, RenderingContext renderingCon\n         private File outputDir;\n \n         private String outputName;\n-            \n+\n         public MySink( File outputDir, String outputName, RenderingContext ctx )\n         {\n             super( ctx );\n             this.outputName = outputName;\n-        this.outputDir = outputDir;\n+            this.outputDir = outputDir;\n         }\n-        \n+\n         public String getOutputName()\n         {\n             return outputName;\n@@ -93,7 +92,7 @@ public File getOutputDir()\n         private RenderingContext context;\n \n         private List sinks = new ArrayList();\n-            \n+\n         public MySinkFactory( RenderingContext ctx )\n         {\n             this.context = ctx;\n@@ -190,4 +189,12 @@ public boolean isOverwrite()\n         // TODO: would be nice to query the report to see if it is modified\n         return true;\n     }\n+\n+    /**\n+     * @return true if the current report is external, false otherwise\n+     */\n+    public boolean isExternalReport()\n+    {\n+        return report.isExternalReport();\n+    }\n }"
            },
            {
                "sha": "6397078e131821577eda1b542af27a6cb0fcbaad",
                "filename": "src/main/java/org/apache/maven/plugins/site/SiteRunMojo.java",
                "status": "modified",
                "additions": 10,
                "deletions": 0,
                "changes": 10,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/4ba5971384d03c659ce1ae3088b37363ba7dc689/src/main/java/org/apache/maven/plugins/site/SiteRunMojo.java",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/4ba5971384d03c659ce1ae3088b37363ba7dc689/src/main/java/org/apache/maven/plugins/site/SiteRunMojo.java",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/main/java/org/apache/maven/plugins/site/SiteRunMojo.java?ref=4ba5971384d03c659ce1ae3088b37363ba7dc689",
                "patch": "@@ -19,6 +19,7 @@\n import org.apache.maven.doxia.siterenderer.SiteRenderingContext;\n import org.apache.maven.plugin.MojoExecutionException;\n import org.apache.maven.plugin.MojoFailureException;\n+import org.apache.maven.reporting.MavenReport;\n import org.codehaus.plexus.util.IOUtil;\n import org.mortbay.jetty.Connector;\n import org.mortbay.jetty.Handler;\n@@ -32,6 +33,7 @@\n import java.io.FileOutputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.util.Iterator;\n import java.util.List;\n import java.util.Locale;\n import java.util.Map;\n@@ -137,6 +139,14 @@ private WebAppContext createWebApplication()\n         webapp.setResourceBase( tempWebappDirectory.getAbsolutePath() );\n         webapp.setAttribute( \"siteRenderer\", siteRenderer );\n \n+        // For external reports\n+        project.getReporting().setOutputDirectory( tempWebappDirectory.getAbsolutePath() );\n+        for ( Iterator i = reports.iterator(); i.hasNext(); )\n+        {\n+            MavenReport report = ( MavenReport ) i.next();\n+            report.setReportOutputDirectory( tempWebappDirectory );\n+        }\n+\n         List filteredReports = filterReports( reports );\n \n         List localesList = getAvailableLocales();"
            },
            {
                "sha": "d33072138a2d88935d2ef47095b86e11c1852b1e",
                "filename": "src/main/java/org/apache/maven/plugins/site/webapp/DoxiaFilter.java",
                "status": "modified",
                "additions": 29,
                "deletions": 3,
                "changes": 32,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/4ba5971384d03c659ce1ae3088b37363ba7dc689/src/main/java/org/apache/maven/plugins/site/webapp/DoxiaFilter.java",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/4ba5971384d03c659ce1ae3088b37363ba7dc689/src/main/java/org/apache/maven/plugins/site/webapp/DoxiaFilter.java",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/main/java/org/apache/maven/plugins/site/webapp/DoxiaFilter.java?ref=4ba5971384d03c659ce1ae3088b37363ba7dc689",
                "patch": "@@ -20,6 +20,7 @@\n import org.apache.maven.doxia.siterenderer.Renderer;\n import org.apache.maven.doxia.siterenderer.RendererException;\n import org.apache.maven.doxia.siterenderer.SiteRenderingContext;\n+import org.apache.maven.plugins.site.ReportDocumentRenderer;\n \n import javax.servlet.Filter;\n import javax.servlet.FilterChain;\n@@ -54,6 +55,9 @@\n \n     private List originalSiteDirectories;\n \n+    /**\n+     * @see javax.servlet.Filter#init(javax.servlet.FilterConfig)\n+     */\n     public void init( FilterConfig filterConfig )\n         throws ServletException\n     {\n@@ -65,6 +69,9 @@ public void init( FilterConfig filterConfig )\n         originalSiteDirectories = new ArrayList( context.getSiteDirectories() );\n     }\n \n+    /**\n+     * @see javax.servlet.Filter#doFilter(javax.servlet.ServletRequest, javax.servlet.ServletResponse, javax.servlet.FilterChain)\n+     */\n     public void doFilter( ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain )\n         throws IOException, ServletException\n     {\n@@ -87,6 +94,22 @@ public void doFilter( ServletRequest servletRequest, ServletResponse servletResp\n             {\n                 DocumentRenderer renderer = (DocumentRenderer) documents.get( path );\n                 renderer.renderDocument( servletResponse.getWriter(), siteRenderer, context );\n+\n+                if (renderer instanceof ReportDocumentRenderer)\n+                {\n+                    ReportDocumentRenderer reportDocumentRenderer = (ReportDocumentRenderer) renderer;\n+                    if (reportDocumentRenderer.isExternalReport())\n+                    {\n+                        try\n+                        {\n+                            filterChain.doFilter( servletRequest, servletResponse );\n+                        }\n+                        catch ( Exception e )\n+                        {\n+                            throw new ServletException( e );\n+                        }\n+                    }\n+                }\n             }\n             catch ( RendererException e )\n             {\n@@ -99,14 +122,14 @@ else if ( generatedSiteDirectory != null && generatedSiteDirectory.exists() )\n             context.addSiteDirectory( generatedSiteDirectory );\n             try\n             {\n-                Map documents = siteRenderer.locateDocumentFiles( context );\n+                Map locateDocuments = siteRenderer.locateDocumentFiles( context );\n \n-                if ( documents.containsKey( path ) )\n+                if ( locateDocuments.containsKey( path ) )\n                 {\n                     // TODO: documents are not right for the locale\n                     context.setLocale( req.getLocale() );\n \n-                    DocumentRenderer renderer = (DocumentRenderer) documents.get( path );\n+                    DocumentRenderer renderer = (DocumentRenderer) locateDocuments.get( path );\n                     renderer.renderDocument( servletResponse.getWriter(), siteRenderer, context );\n                 }\n             }\n@@ -126,6 +149,9 @@ else if ( generatedSiteDirectory != null && generatedSiteDirectory.exists() )\n         }\n     }\n \n+    /**\n+     * @see javax.servlet.Filter#destroy()\n+     */\n     public void destroy()\n     {\n     }"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-site-plugin/commit/db9bbce9f7090b5e7eaba776b807b2919930e0c0",
        "repo": "maven-site-plugin",
        "parent": "https://github.com/apache/maven-site-plugin/commit/372e2c02597dd05d728487bd6781d2a02e7fe8a4",
        "message": "PR: MSITE-154\n\nSometimes parent site.xml is not resolved. This occurs when\neither the current project or the parent doesn't have an <url>.\n\nRemoved check for URL and use current URL if parent URL not specified.\nTested with both URLs set to null - no NPE occurred.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@418889 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-site-plugin_8",
        "file": [
            {
                "sha": "97dc34456087d7133ee453ff02bfae533c70b45e",
                "filename": "src/main/java/org/apache/maven/plugins/site/AbstractSiteRenderingMojo.java",
                "status": "modified",
                "additions": 2,
                "deletions": 2,
                "changes": 4,
                "blob_url": "https://github.com/apache/maven-site-plugin/blob/db9bbce9f7090b5e7eaba776b807b2919930e0c0/src/main/java/org/apache/maven/plugins/site/AbstractSiteRenderingMojo.java",
                "raw_url": "https://github.com/apache/maven-site-plugin/raw/db9bbce9f7090b5e7eaba776b807b2919930e0c0/src/main/java/org/apache/maven/plugins/site/AbstractSiteRenderingMojo.java",
                "contents_url": "https://api.github.com/repos/apache/maven-site-plugin/contents/src/main/java/org/apache/maven/plugins/site/AbstractSiteRenderingMojo.java?ref=db9bbce9f7090b5e7eaba776b807b2919930e0c0",
                "patch": "@@ -210,7 +210,7 @@ protected DecorationModel getDecorationModel( MavenProject project, Locale local\n         }\n \n         MavenProject parentProject = getParentProject( project );\n-        if ( parentProject != null && project.getUrl() != null && parentProject.getUrl() != null )\n+        if ( parentProject != null )\n         {\n             DecorationModel parent = getDecorationModel( parentProject, locale, props );\n \n@@ -221,7 +221,7 @@ protected DecorationModel getDecorationModel( MavenProject project, Locale local\n             else\n             {\n                 assembler.assembleModelInheritance( project.getName(), decoration, parent, project.getUrl(),\n-                                                    parentProject.getUrl() );\n+                                                    parentProject.getUrl() == null ? project.getUrl() : parentProject.getUrl() );\n             }\n             if ( decoration != null )\n             {"
            }
        ]
    }
]
