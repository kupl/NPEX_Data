[
    {
        "commit": "https://github.com/apache/maven-release/commit/d5862ca6a2a62a2bbf13df75e20b3bbc0f1cffb6",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/f0887bafe1ab6c14288d68b577b6568d3e30e15b",
        "message": "Fixes for MRELEASE-1009:\n- clean up ambigous reference in JUnit test\n- upgrade Surefire to 2.22.0 to avoid a NullPointerException under Java 10 when executing \"mvn package\"",
        "bug_id": "maven-release_1",
        "file": [
            {
                "sha": "a82bec53a08484f7a7a0f1038d4024ffa64bc3d6",
                "filename": "maven-release-manager/src/test/java/org/apache/maven/shared/release/transform/jdom/JDomPropertiesTest.java",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/maven-release/blob/d5862ca6a2a62a2bbf13df75e20b3bbc0f1cffb6/maven-release-manager/src/test/java/org/apache/maven/shared/release/transform/jdom/JDomPropertiesTest.java",
                "raw_url": "https://github.com/apache/maven-release/raw/d5862ca6a2a62a2bbf13df75e20b3bbc0f1cffb6/maven-release-manager/src/test/java/org/apache/maven/shared/release/transform/jdom/JDomPropertiesTest.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/test/java/org/apache/maven/shared/release/transform/jdom/JDomPropertiesTest.java?ref=d5862ca6a2a62a2bbf13df75e20b3bbc0f1cffb6",
                "patch": "@@ -105,7 +105,7 @@ public void testStoreToXML()\n     public void testStoreToXMLEncoded()\r\n         throws Exception\r\n     {\r\n-        new JDomProperties( null ).storeToXML( null, null, null );\r\n+        new JDomProperties( null ).storeToXML( (OutputStream) null, null, (String) null );\r\n     }\r\n \r\n     @Test\r"
            },
            {
                "sha": "4c6255c366fb59d13d444d5ab91baff8b3e35af0",
                "filename": "pom.xml",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/maven-release/blob/d5862ca6a2a62a2bbf13df75e20b3bbc0f1cffb6/pom.xml",
                "raw_url": "https://github.com/apache/maven-release/raw/d5862ca6a2a62a2bbf13df75e20b3bbc0f1cffb6/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/pom.xml?ref=d5862ca6a2a62a2bbf13df75e20b3bbc0f1cffb6",
                "patch": "@@ -113,7 +113,7 @@\n         <plugin>\n           <groupId>org.apache.maven.plugins</groupId>\n           <artifactId>maven-surefire-plugin</artifactId>\n-          <version>2.20.1</version>\n+          <version>2.22.0</version>\n         </plugin>\n         <plugin>\n           <groupId>org.codehaus.mojo</groupId>"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/6b1f658451a78e014f849b65a0c0b59ed70ca288",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/c0b2304e73e4044e993e628eb407c72d7f80c33d",
        "message": "[MRELEASE-975] NPE when using an unknown project versionpolicy id\n\nPassing an empty version policy hint (with -DprojectVersionPolicyId on the command-line), on an unknown one, should result in a helpful exception being thrown (not NullPointerException). Upgrading JUnit to 4.11 to use the expected exception mechanism (in order to test that the cause of the exception thrown is a PolicyException). This closes #8.\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@1777917 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_2",
        "file": [
            {
                "sha": "122b05f999275e79dbe1a86c3a1281615fb99030",
                "filename": "maven-release-manager/pom.xml",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/maven-release/blob/6b1f658451a78e014f849b65a0c0b59ed70ca288/maven-release-manager/pom.xml",
                "raw_url": "https://github.com/apache/maven-release/raw/6b1f658451a78e014f849b65a0c0b59ed70ca288/maven-release-manager/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/pom.xml?ref=6b1f658451a78e014f849b65a0c0b59ed70ca288",
                "patch": "@@ -157,7 +157,7 @@\n     <dependency>\n       <groupId>junit</groupId>\n       <artifactId>junit</artifactId>\n-      <version>4.10</version>\n+      <version>4.11</version>\n       <scope>test</scope>\n     </dependency>\n     <dependency>"
            },
            {
                "sha": "f4b2132c7464983fbe1095223b7187361b6ec7d8",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/MapVersionsPhase.java",
                "status": "modified",
                "additions": 5,
                "deletions": 1,
                "changes": 6,
                "blob_url": "https://github.com/apache/maven-release/blob/6b1f658451a78e014f849b65a0c0b59ed70ca288/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/MapVersionsPhase.java",
                "raw_url": "https://github.com/apache/maven-release/raw/6b1f658451a78e014f849b65a0c0b59ed70ca288/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/MapVersionsPhase.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/MapVersionsPhase.java?ref=6b1f658451a78e014f849b65a0c0b59ed70ca288",
                "patch": "@@ -321,8 +321,12 @@ private String resolveSuggestedVersion( String baseVersion, String policyId )\n         throws PolicyException, VersionParseException\n     {\n         VersionPolicy policy = versionPolicies.get( policyId );\n-        VersionPolicyRequest request = new VersionPolicyRequest().setVersion( baseVersion );\n+        if ( policy == null )\n+        {\n+            throw new PolicyException( \"Policy '\" + policyId + \"' is unknown, available: \" + versionPolicies.keySet() );\n+        }\n \n+        VersionPolicyRequest request = new VersionPolicyRequest().setVersion( baseVersion );\n         return convertToSnapshot ? policy.getDevelopmentVersion( request ).getVersion()\n                         : policy.getReleaseVersion( request ).getVersion();\n     }"
            },
            {
                "sha": "62da1bb9c1405fe87a8095ab4d975534f340226f",
                "filename": "maven-release-manager/src/test/java/org/apache/maven/shared/release/phase/MapVersionsPhaseTest.java",
                "status": "modified",
                "additions": 30,
                "deletions": 0,
                "changes": 30,
                "blob_url": "https://github.com/apache/maven-release/blob/6b1f658451a78e014f849b65a0c0b59ed70ca288/maven-release-manager/src/test/java/org/apache/maven/shared/release/phase/MapVersionsPhaseTest.java",
                "raw_url": "https://github.com/apache/maven-release/raw/6b1f658451a78e014f849b65a0c0b59ed70ca288/maven-release-manager/src/test/java/org/apache/maven/shared/release/phase/MapVersionsPhaseTest.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/test/java/org/apache/maven/shared/release/phase/MapVersionsPhaseTest.java?ref=6b1f658451a78e014f849b65a0c0b59ed70ca288",
                "patch": "@@ -42,10 +42,14 @@\n import org.apache.maven.shared.release.ReleaseExecutionException;\n import org.apache.maven.shared.release.config.ReleaseDescriptor;\n import org.apache.maven.shared.release.env.DefaultReleaseEnvironment;\n+import org.apache.maven.shared.release.policy.PolicyException;\n import org.apache.maven.shared.release.versions.VersionParseException;\n import org.codehaus.plexus.components.interactivity.Prompter;\n import org.codehaus.plexus.components.interactivity.PrompterException;\n+import org.hamcrest.CoreMatchers;\n+import org.junit.Rule;\n import org.junit.Test;\n+import org.junit.rules.ExpectedException;\n import org.mockito.Mock;\n import org.mockito.MockitoAnnotations;\n \n@@ -63,6 +67,9 @@\n \n     private static final String TEST_MAP_RELEASE_VERSIONS = \"test-map-release-versions\";\n \n+    @Rule\n+    public ExpectedException expectedException = ExpectedException.none();\n+\n     @Mock\n     private Prompter mockPrompter;\n \n@@ -2112,6 +2119,29 @@ public void testEmptyDefaultReleaseVersion()\n         verify( mockPrompter ).prompt( startsWith( \"What is the release version for \" ), eq( \"1.11\" ) );\n     }\n \n+    /**\n+     * MRELEASE-975: Test that a PolicyException is thrown when using an unknown policy version hint.\n+     * @throws Exception\n+     */\n+    @Test\n+    public void testNonExistentVersionPolicy()\n+        throws Exception\n+    {\n+        expectedException.expect( ReleaseExecutionException.class );\n+        expectedException.expectCause( CoreMatchers.isA( PolicyException.class ) );\n+        \n+        // prepare\n+        MapVersionsPhase phase = (MapVersionsPhase) lookup( ReleasePhase.ROLE, TEST_MAP_RELEASE_VERSIONS );\n+\n+        List<MavenProject> reactorProjects = Collections.singletonList( createProject( \"artifactId\", \"1.0-SNAPSHOT\" ) );\n+\n+        ReleaseDescriptor releaseDescriptor = new ReleaseDescriptor();\n+        releaseDescriptor.setProjectVersionPolicyId( \"UNKNOWN\" );\n+\n+        // test\n+        phase.execute( releaseDescriptor, new DefaultReleaseEnvironment(), reactorProjects );\n+    }\n+\n     private static MavenProject createProject( String artifactId, String version )\n     {\n         Model model = new Model();"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/d602fd6b7c8868ec524c30affa51d2ee431a52fe",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/42eee1dd71f322766448b9aa18f8728960d8ad3c",
        "message": "fix NullPointerException\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@649384 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_3",
        "file": [
            {
                "sha": "d24adce6dd384a7cf63ec29a78d8b0a00677f657",
                "filename": "maven-release-plugin/src/main/java/org/apache/maven/plugins/release/PerformReleaseMojo.java",
                "status": "modified",
                "additions": 4,
                "deletions": 1,
                "changes": 5,
                "blob_url": "https://github.com/apache/maven-release/blob/d602fd6b7c8868ec524c30affa51d2ee431a52fe/maven-release-plugin/src/main/java/org/apache/maven/plugins/release/PerformReleaseMojo.java",
                "raw_url": "https://github.com/apache/maven-release/raw/d602fd6b7c8868ec524c30affa51d2ee431a52fe/maven-release-plugin/src/main/java/org/apache/maven/plugins/release/PerformReleaseMojo.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-plugin/src/main/java/org/apache/maven/plugins/release/PerformReleaseMojo.java?ref=d602fd6b7c8868ec524c30affa51d2ee431a52fe",
                "patch": "@@ -98,7 +98,10 @@ public void execute()\n \n \t\t// goals may be splitted into multiple line in configuration. \n \t\t// Let's build a single line command\n-\t\tgoals = StringUtils.join( StringUtils.split( goals ), \" \" );\n+\t\tif ( goals != null ) \n+\t\t{\n+\t\t\tgoals = StringUtils.join( StringUtils.split( goals ), \" \" );\n+\t\t}\n \t\t\n         try\n         {"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/deb668153c207455768bad3d2f77dc528ded4d68",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/2a6acfd01d7b628ff2c93fa2b1f33dd4ffe8f49b",
        "message": "[MRELEASE-360] NullPointerException in release\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@679051 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_4",
        "file": [
            {
                "sha": "00f9e47b6974985341ac9fcd1ef0635881bb9d34",
                "filename": "maven-release-plugin/src/main/java/org/apache/maven/plugins/release/AbstractReleaseMojo.java",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/maven-release/blob/deb668153c207455768bad3d2f77dc528ded4d68/maven-release-plugin/src/main/java/org/apache/maven/plugins/release/AbstractReleaseMojo.java",
                "raw_url": "https://github.com/apache/maven-release/raw/deb668153c207455768bad3d2f77dc528ded4d68/maven-release-plugin/src/main/java/org/apache/maven/plugins/release/AbstractReleaseMojo.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-plugin/src/main/java/org/apache/maven/plugins/release/AbstractReleaseMojo.java?ref=deb668153c207455768bad3d2f77dc528ded4d68",
                "patch": "@@ -162,7 +162,7 @@\n     /**\n      * Role-hint of the {@link MavenExecutor} implementation to use.\n      *\n-     * @parameter\n+     * @parameter default-value=\"invoker\"\n      */\n     protected String mavenExecutorId;\n "
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/84623ad99ad8839a94fa6cc50bc75bbe698c4b6a",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/d869e632afe21b93132d0ad823e06a3cc1c3b6a6",
        "message": "MRELEASE-273: NullPointerException at end of standalone \"release:perform\" \nhttp://jira.codehaus.org/browse/MRELEASE-273\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@721038 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_5",
        "file": [
            {
                "sha": "6fbabb293e6ee8ea6a9b85260c67ddc0d803c7e6",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java",
                "status": "modified",
                "additions": 17,
                "deletions": 4,
                "changes": 21,
                "blob_url": "https://github.com/apache/maven-release/blob/84623ad99ad8839a94fa6cc50bc75bbe698c4b6a/maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java",
                "raw_url": "https://github.com/apache/maven-release/raw/84623ad99ad8839a94fa6cc50bc75bbe698c4b6a/maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java?ref=84623ad99ad8839a94fa6cc50bc75bbe698c4b6a",
                "patch": "@@ -66,11 +66,16 @@ public static MavenProject getRootProject( List reactorProjects )\n \n     public static File getStandardPom( MavenProject project )\n     {\n+        if ( project == null )\n+            return null;\n+\n         File pom = project.getFile();\n-        File releasePom = getReleasePom( project );\n \n-        // MRELEASE-273 : pom can be null here\n-        if ( pom != null && pom.equals( releasePom ) )\n+        if ( pom == null )\n+            return null;\n+\n+        File releasePom = getReleasePom( project );\n+        if ( pom.equals( releasePom ) )\n         {\n             pom = new File( pom.getParent(), POMv4 );\n         }\n@@ -80,7 +85,15 @@ public static File getStandardPom( MavenProject project )\n \n     public static File getReleasePom( MavenProject project )\n     {\n-        return new File( project.getFile().getParent(), RELEASE_POMv4 );\n+        if ( project == null )\n+            return null;\n+\n+        File pom = project.getFile();\n+\n+        if ( pom == null )\n+            return null;\n+\n+        return new File( pom.getParent(), RELEASE_POMv4 );\n     }\n \n     /**"
            },
            {
                "sha": "b92eb3ca75ce1609d27acfe2b799fd67cf05772c",
                "filename": "maven-release-manager/src/test/java/org/apache/maven/shared/release/util/ReleaseUtilTest.java",
                "status": "added",
                "additions": 26,
                "deletions": 0,
                "changes": 26,
                "blob_url": "https://github.com/apache/maven-release/blob/84623ad99ad8839a94fa6cc50bc75bbe698c4b6a/maven-release-manager/src/test/java/org/apache/maven/shared/release/util/ReleaseUtilTest.java",
                "raw_url": "https://github.com/apache/maven-release/raw/84623ad99ad8839a94fa6cc50bc75bbe698c4b6a/maven-release-manager/src/test/java/org/apache/maven/shared/release/util/ReleaseUtilTest.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/test/java/org/apache/maven/shared/release/util/ReleaseUtilTest.java?ref=84623ad99ad8839a94fa6cc50bc75bbe698c4b6a",
                "patch": "@@ -0,0 +1,26 @@\n+/**\n+ * \n+ */\n+package org.apache.maven.shared.release.util;\n+\n+import org.codehaus.plexus.PlexusTestCase;\n+\n+/**\n+ * Tests for ReleaseUtil methods\n+ * \n+ * @author aheritier\n+ */\n+public class ReleaseUtilTest\n+    extends PlexusTestCase\n+{\n+    /**\n+     * MRELEASE-273 : Tests if there no pom passed as parameter\n+     */\n+    public void testProjectIsNull()\n+        throws Exception\n+    {\n+        assertNull( ReleaseUtil.getReleasePom( null ) );\n+        assertNull( ReleaseUtil.getStandardPom( null ) );\n+    }\n+\n+}"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/d869e632afe21b93132d0ad823e06a3cc1c3b6a6",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/e58c74c718fe750372470f612dad046d1ad94525",
        "message": "MRELEASE-273: NullPointerException at end of standalone \"release:perform\" \nhttp://jira.codehaus.org/browse/MRELEASE-273\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@721030 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_6",
        "file": [
            {
                "sha": "1c825dc1a607f674767344b02f048c465f8ef313",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CreateBackupPomsPhase.java",
                "status": "modified",
                "additions": 1,
                "deletions": 3,
                "changes": 4,
                "blob_url": "https://github.com/apache/maven-release/blob/d869e632afe21b93132d0ad823e06a3cc1c3b6a6/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CreateBackupPomsPhase.java",
                "raw_url": "https://github.com/apache/maven-release/raw/d869e632afe21b93132d0ad823e06a3cc1c3b6a6/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CreateBackupPomsPhase.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CreateBackupPomsPhase.java?ref=d869e632afe21b93132d0ad823e06a3cc1c3b6a6",
                "patch": "@@ -68,9 +68,7 @@ public ReleaseResult clean( List reactorProjects )\n         {\n             MavenProject project = (MavenProject) projects.next();\n \n-            if ( project.getFile() != null )\n-                // MRELEASE-273 : don't cleanup if there's no pom\n-                deletePomBackup( project );\n+            deletePomBackup( project );\n         }\n \n         result.setResultCode( ReleaseResult.SUCCESS );"
            },
            {
                "sha": "16ffb4a717cefd24b8afe37b3d88de8a0c611337",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java",
                "status": "modified",
                "additions": 10,
                "deletions": 9,
                "changes": 19,
                "blob_url": "https://github.com/apache/maven-release/blob/d869e632afe21b93132d0ad823e06a3cc1c3b6a6/maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java",
                "raw_url": "https://github.com/apache/maven-release/raw/d869e632afe21b93132d0ad823e06a3cc1c3b6a6/maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java?ref=d869e632afe21b93132d0ad823e06a3cc1c3b6a6",
                "patch": "@@ -19,16 +19,16 @@\n  * under the License.\n  */\n \n-import org.apache.maven.project.MavenProject;\n-import org.codehaus.plexus.util.IOUtil;\n-import org.codehaus.plexus.util.ReaderFactory;\n-\n import java.io.File;\n import java.io.IOException;\n import java.io.Reader;\n import java.util.Iterator;\n import java.util.List;\n \n+import org.apache.maven.project.MavenProject;\n+import org.codehaus.plexus.util.IOUtil;\n+import org.codehaus.plexus.util.ReaderFactory;\n+\n /**\n  * @author <a href=\"mailto:evenisse@apache.org\">Emmanuel Venisse</a>\n  * @version $Id$\n@@ -69,7 +69,8 @@ public static File getStandardPom( MavenProject project )\n         File pom = project.getFile();\n         File releasePom = getReleasePom( project );\n \n-        if ( pom.equals( releasePom ))\n+        // MRELEASE-273 : pom can be null here\n+        if ( pom != null && pom.equals( releasePom ) )\n         {\n             pom = new File( pom.getParent(), POMv4 );\n         }\n@@ -86,7 +87,7 @@ public static File getReleasePom( MavenProject project )\n      * Gets the string contents of the specified XML file. Note: In contrast to an XML processor, the line separators in\n      * the returned string will be normalized to use the platform's native line separator. This is basically to save\n      * another normalization step when writing the string contents back to an XML file.\n-     *\n+     * \n      * @param file The path to the XML file to read in, must not be <code>null</code>.\n      * @return The string contents of the XML file.\n      * @throws IOException If the file could not be opened/read.\n@@ -108,12 +109,12 @@ public static String readXmlFile( File file )\n \n     /**\n      * Normalizes the line separators in the specified string.\n-     *\n+     * \n      * @param text The string to normalize, may be <code>null</code>.\n      * @param separator The line separator to use for normalization, typically \"\\n\" or \"\\r\\n\", must not be\n      *            <code>null</code>.\n-     * @return The input string with normalized line separators or <code>null</code> if the string was\n-     *         <code>null</code>.\n+     * @return The input string with normalized line separators or <code>null</code> if the string was <code>null</code>\n+     *         .\n      */\n     public static String normalizeLineEndings( String text, String separator )\n     {"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/5772b29b62b7f0024a845a946b0a4dc461fed1cc",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/f63ec477c7f2937e842c12b60a88c2a3c42c32c4",
        "message": "Regression: NullPointerException at end of standalone \"release:perform\" \nhttp://jira.codehaus.org/browse/MRELEASE-273\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@721005 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_7",
        "file": [
            {
                "sha": "ec42dadfd45b653fbc61e5db4325c7f7935a02e2",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CreateBackupPomsPhase.java",
                "status": "modified",
                "additions": 13,
                "deletions": 9,
                "changes": 22,
                "blob_url": "https://github.com/apache/maven-release/blob/5772b29b62b7f0024a845a946b0a4dc461fed1cc/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CreateBackupPomsPhase.java",
                "raw_url": "https://github.com/apache/maven-release/raw/5772b29b62b7f0024a845a946b0a4dc461fed1cc/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CreateBackupPomsPhase.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CreateBackupPomsPhase.java?ref=5772b29b62b7f0024a845a946b0a4dc461fed1cc",
                "patch": "@@ -19,6 +19,10 @@\n  * under the License.\n  */\n \n+import java.io.IOException;\n+import java.util.Iterator;\n+import java.util.List;\n+\n import org.apache.maven.project.MavenProject;\n import org.apache.maven.shared.release.ReleaseExecutionException;\n import org.apache.maven.shared.release.ReleaseFailureException;\n@@ -28,23 +32,20 @@\n import org.apache.maven.shared.release.util.ReleaseUtil;\n import org.codehaus.plexus.util.FileUtils;\n \n-import java.io.IOException;\n-import java.util.Iterator;\n-import java.util.List;\n-\n /**\n  * @author Edwin Punzalan\n  * @plexus.component role=\"org.apache.maven.shared.release.phase.ReleasePhase\" role-hint=\"create-backup-poms\"\n  */\n public class CreateBackupPomsPhase\n     extends AbstractBackupPomsPhase\n {\n-    public ReleaseResult execute( ReleaseDescriptor releaseDescriptor, ReleaseEnvironment releaseEnvironment, List reactorProjects )\n+    public ReleaseResult execute( ReleaseDescriptor releaseDescriptor, ReleaseEnvironment releaseEnvironment,\n+                                  List reactorProjects )\n         throws ReleaseExecutionException, ReleaseFailureException\n     {\n         ReleaseResult result = new ReleaseResult();\n \n-        //remove previous backups, if any\n+        // remove previous backups, if any\n         clean( reactorProjects );\n \n         for ( Iterator projects = reactorProjects.iterator(); projects.hasNext(); )\n@@ -67,15 +68,18 @@ public ReleaseResult clean( List reactorProjects )\n         {\n             MavenProject project = (MavenProject) projects.next();\n \n-            deletePomBackup( project );\n+            if ( project.getFile() != null )\n+                // MRELEASE-273 : don't cleanup if there's no pom\n+                deletePomBackup( project );\n         }\n \n         result.setResultCode( ReleaseResult.SUCCESS );\n \n         return result;\n     }\n \n-    public ReleaseResult simulate( ReleaseDescriptor releaseDescriptor, ReleaseEnvironment releaseEnvironment, List reactorProjects )\n+    public ReleaseResult simulate( ReleaseDescriptor releaseDescriptor, ReleaseEnvironment releaseEnvironment,\n+                                   List reactorProjects )\n         throws ReleaseExecutionException, ReleaseFailureException\n     {\n         return execute( releaseDescriptor, releaseEnvironment, reactorProjects );\n@@ -84,7 +88,7 @@ public ReleaseResult simulate( ReleaseDescriptor releaseDescriptor, ReleaseEnvir\n     private void createPomBackup( MavenProject project )\n         throws ReleaseExecutionException\n     {\n-        //delete any existing backup first\n+        // delete any existing backup first\n         deletePomBackup( project );\n \n         try"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/566ca636a7cea03de30bd9dbb2bf9d622202c9dc",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/ea56421da65feb4940c520df8cb4d9dac308f986",
        "message": "Fix MRELEASE-663: Possible NPE with getBaseWorkingDirectoryParentCount()\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@1348252 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_8",
        "file": [
            {
                "sha": "53cca0837ffa5c184e433e3965543d8032c6d84b",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java",
                "status": "modified",
                "additions": 5,
                "deletions": 2,
                "changes": 7,
                "blob_url": "https://github.com/apache/maven-release/blob/566ca636a7cea03de30bd9dbb2bf9d622202c9dc/maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java",
                "raw_url": "https://github.com/apache/maven-release/raw/566ca636a7cea03de30bd9dbb2bf9d622202c9dc/maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/util/ReleaseUtil.java?ref=566ca636a7cea03de30bd9dbb2bf9d622202c9dc",
                "patch": "@@ -236,8 +236,11 @@ public static int getBaseWorkingDirectoryParentCount( String basedir, String wor\n         workingDirectory = workingDirectory.toLowerCase( Locale.ENGLISH );\n         basedir = basedir.toLowerCase( Locale.ENGLISH );\n \n-        File workingDirectoryFile = new File( workingDirectory );\n-        File basedirFile = new File( basedir );\n+        // MRELEASE-663\n+        // For Windows is does matter if basedir ends with a file-separator or not to be able to compare.\n+        // Using the parent of a dummy file makes it possible to compare them OS-independent\n+        File workingDirectoryFile = new File( workingDirectory, \".tmp\" ).getParentFile();\n+        File basedirFile = new File( basedir, \".tmp\" ).getParentFile();\n \n         if ( !workingDirectoryFile.equals( basedirFile ) && workingDirectory.startsWith( basedir ) )\n         {"
            },
            {
                "sha": "496403448737ea9eedc75a489b5fcfe90a25a6a5",
                "filename": "maven-release-manager/src/test/java/org/apache/maven/shared/release/util/ReleaseUtilTest.java",
                "status": "modified",
                "additions": 10,
                "deletions": 0,
                "changes": 10,
                "blob_url": "https://github.com/apache/maven-release/blob/566ca636a7cea03de30bd9dbb2bf9d622202c9dc/maven-release-manager/src/test/java/org/apache/maven/shared/release/util/ReleaseUtilTest.java",
                "raw_url": "https://github.com/apache/maven-release/raw/566ca636a7cea03de30bd9dbb2bf9d622202c9dc/maven-release-manager/src/test/java/org/apache/maven/shared/release/util/ReleaseUtilTest.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/test/java/org/apache/maven/shared/release/util/ReleaseUtilTest.java?ref=566ca636a7cea03de30bd9dbb2bf9d622202c9dc",
                "patch": "@@ -224,6 +224,16 @@ public void testGetBaseWorkingDirectoryParentCountDifferentCase()\n         String basedir = \"/working/directory\";\n         assertEquals( 3, ReleaseUtil.getBaseWorkingDirectoryParentCount( basedir, workingDirectory ) );\n     }\n+    \n+    public void testGetWindowsRootBaseWorkingDirectoryParentCountDifferentCase()\n+    {\n+        assertEquals( 2, ReleaseUtil.getBaseWorkingDirectoryParentCount( \"C:\", \"C:\\\\working\\\\directory\" ) );\n+        assertEquals( 2, ReleaseUtil.getBaseWorkingDirectoryParentCount( \"C:\", \"C:\\\\working\\\\directory\\\\\" ) );\n+        assertEquals( 2, ReleaseUtil.getBaseWorkingDirectoryParentCount( \"C:\\\\\", \"C:\\\\working\\\\directory\" ) );\n+        assertEquals( 2, ReleaseUtil.getBaseWorkingDirectoryParentCount( \"C:\\\\\", \"C:\\\\working\\\\directory\\\\\" ) );\n+        \n+    }\n+\n \n     private static MavenProject createProject( String basedir )\n     {"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/37e760161b122b832368842aafcba0099792c185",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/cd8364d7dcff97765577f419e3917e87dd2c3394",
        "message": "MRELEASE-273: a NPE can hide another\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@721316 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_9",
        "file": [
            {
                "sha": "558744f057cfa0565ce216ca46494792b97f312b",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/GenerateReleasePomsPhase.java",
                "status": "modified",
                "additions": 16,
                "deletions": 11,
                "changes": 27,
                "blob_url": "https://github.com/apache/maven-release/blob/37e760161b122b832368842aafcba0099792c185/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/GenerateReleasePomsPhase.java",
                "raw_url": "https://github.com/apache/maven-release/raw/37e760161b122b832368842aafcba0099792c185/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/GenerateReleasePomsPhase.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/GenerateReleasePomsPhase.java?ref=37e760161b122b832368842aafcba0099792c185",
                "patch": "@@ -19,6 +19,16 @@\n  * under the License.\n  */\n \n+import java.io.File;\n+import java.io.IOException;\n+import java.io.Writer;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n import org.apache.maven.artifact.Artifact;\n import org.apache.maven.artifact.ArtifactUtils;\n import org.apache.maven.model.Build;\n@@ -48,16 +58,6 @@\n import org.codehaus.plexus.util.IOUtil;\n import org.codehaus.plexus.util.WriterFactory;\n \n-import java.io.File;\n-import java.io.IOException;\n-import java.io.Writer;\n-import java.util.ArrayList;\n-import java.util.Collections;\n-import java.util.Iterator;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.Set;\n-\n /**\n  * Generate release POMs.\n  *\n@@ -145,6 +145,10 @@ private File generateReleasePom( MavenProject project, ReleaseDescriptor release\n         MavenXpp3Writer pomWriter = new MavenXpp3Writer();\n \n         File releasePomFile = ReleaseUtil.getReleasePom( project );\n+        \n+        // MRELEASE-273 : A release pom can be null\n+        if ( releasePomFile == null )\n+            throw new ReleaseExecutionException( \"Cannot generate release POM : pom file is null\" );\n \n         Writer fileWriter = null;\n \n@@ -551,7 +555,8 @@ public ReleaseResult clean( List reactorProjects )\n \n             File releasePom = ReleaseUtil.getReleasePom( project );\n \n-            if ( releasePom.exists() )\n+            // MRELEASE-273 : A release pom can be null\n+            if ( releasePom != null && releasePom.exists() )\n             {\n                 logInfo( result, \"Deleting release POM for '\" + project.getName() + \"'...\" );\n "
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/cd8364d7dcff97765577f419e3917e87dd2c3394",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/84623ad99ad8839a94fa6cc50bc75bbe698c4b6a",
        "message": "MRELEASE-273: a NPE can hide another\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@721313 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_10",
        "file": [
            {
                "sha": "c53bac146378171bcc2ba17a8d40898b32dddd04",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/AbstractRewritePomsPhase.java",
                "status": "modified",
                "additions": 7,
                "deletions": 4,
                "changes": 11,
                "blob_url": "https://github.com/apache/maven-release/blob/cd8364d7dcff97765577f419e3917e87dd2c3394/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/AbstractRewritePomsPhase.java",
                "raw_url": "https://github.com/apache/maven-release/raw/cd8364d7dcff97765577f419e3917e87dd2c3394/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/AbstractRewritePomsPhase.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/AbstractRewritePomsPhase.java?ref=cd8364d7dcff97765577f419e3917e87dd2c3394",
                "patch": "@@ -785,11 +785,14 @@ public ReleaseResult clean( List reactorProjects )\n                 MavenProject project = (MavenProject) i.next();\n \n                 File pomFile = ReleaseUtil.getStandardPom( project );\n-                File file =\n-                    new File( pomFile.getParentFile(), pomFile.getName() + \".\" + pomSuffix );\n-                if ( file.exists() )\n+                // MRELEASE-273 : if no pom\n+                if ( pomFile != null )\n                 {\n-                    file.delete();\n+                    File file = new File( pomFile.getParentFile(), pomFile.getName() + \".\" + pomSuffix );\n+                    if ( file.exists() )\n+                    {\n+                        file.delete();\n+                    }\n                 }\n             }\n         }"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/8ef54f62896daf869751a1c02adc23e554d9cd53",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/3cc491dfd8142aefff46e5b5cc767615c21ea91c",
        "message": "[MRELEASE-232] Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@539088 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_11",
        "file": [
            {
                "sha": "7283a9e2c1b076026cdfe76456cc4ac713ba15cc",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/AbstractBackupPomsPhase.java",
                "status": "modified",
                "additions": 9,
                "deletions": 2,
                "changes": 11,
                "blob_url": "https://github.com/apache/maven-release/blob/8ef54f62896daf869751a1c02adc23e554d9cd53/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/AbstractBackupPomsPhase.java",
                "raw_url": "https://github.com/apache/maven-release/raw/8ef54f62896daf869751a1c02adc23e554d9cd53/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/AbstractBackupPomsPhase.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/AbstractBackupPomsPhase.java?ref=8ef54f62896daf869751a1c02adc23e554d9cd53",
                "patch": "@@ -35,14 +35,21 @@ protected File getPomBackup( MavenProject project )\n     {\n         File pomFile = project.getFile();\n \n-        return new File( pomFile.getAbsolutePath() + backupPrefix );\n+        if ( pomFile != null )\n+        {\n+            return new File( pomFile.getAbsolutePath() + backupPrefix );\n+        }\n+        else\n+        {\n+            return null;\n+        }\n     }\n \n     protected void deletePomBackup( MavenProject project )\n     {\n         File pomBackup = getPomBackup( project );\n \n-        if ( pomBackup.exists() )\n+        if ( pomBackup != null && pomBackup.exists() )\n         {\n             pomBackup.delete();\n         }"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/2c6275d98ddb674847b27361cf0fb10c0e7b279a",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/2c11676027a448457b5bfc603bd58b9a45f8397f",
        "message": "[MRELEASE-318] fix regression that caused NPE when the project.artifacts were null\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@1002167 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_12",
        "file": [
            {
                "sha": "777ddedc5f2900bde7e0acfafe4d217915750f37",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CheckDependencySnapshotsPhase.java",
                "status": "modified",
                "additions": 9,
                "deletions": 3,
                "changes": 12,
                "blob_url": "https://github.com/apache/maven-release/blob/2c6275d98ddb674847b27361cf0fb10c0e7b279a/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CheckDependencySnapshotsPhase.java",
                "raw_url": "https://github.com/apache/maven-release/raw/2c6275d98ddb674847b27361cf0fb10c0e7b279a/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CheckDependencySnapshotsPhase.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/phase/CheckDependencySnapshotsPhase.java?ref=2c6275d98ddb674847b27361cf0fb10c0e7b279a",
                "patch": "@@ -146,7 +146,7 @@ private void checkProject( MavenProject project, Map originalVersions, ReleaseDe\n \n                 if ( checkArtifact( artifact, originalVersions, artifactMap, releaseDescriptor ) )\n                 {\n-                    snapshotDependencies.add( artifactMap.get( ArtifactUtils.versionlessKey( artifact ) ) );\n+                    snapshotDependencies.add( getArtifactFromMap( artifact, artifactMap ) );\n                 }\n             }\n         }\n@@ -257,6 +257,13 @@ else if ( releaseDescriptor.isSnapshotReleasePluginAllowed() )\n     }\n \n     private static boolean checkArtifact( Artifact artifact, Map originalVersions, Map artifactMapByVersionlessId, ReleaseDescriptor releaseDescriptor )\n+    {\n+        Artifact checkArtifact = getArtifactFromMap( artifact, artifactMapByVersionlessId );\n+\n+        return checkArtifact( checkArtifact, originalVersions, releaseDescriptor );\n+    }\n+\n+    private static Artifact getArtifactFromMap( Artifact artifact, Map artifactMapByVersionlessId )\n     {\n         String versionlessId = ArtifactUtils.versionlessKey( artifact );\n         Artifact checkArtifact = (Artifact) artifactMapByVersionlessId.get( versionlessId );\n@@ -265,8 +272,7 @@ private static boolean checkArtifact( Artifact artifact, Map originalVersions, M\n         {\n             checkArtifact = artifact;\n         }\n-\n-        return checkArtifact( checkArtifact, originalVersions, releaseDescriptor );\n+        return checkArtifact;\n     }\n \n     private static boolean checkArtifact( Artifact artifact, Map originalVersions, ReleaseDescriptor releaseDescriptor )"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/maven-release/commit/03033d77d22e689582dcea369517c88bcdda03c4",
        "repo": "maven-release",
        "parent": "https://github.com/apache/maven-release/commit/deb668153c207455768bad3d2f77dc528ded4d68",
        "message": "[MRELEASE-364] InvokerMavenExecutor fails with NPE if additional arguments are not set\nSubmitted by: Steve Gilbert\nReviewed by: Benjamin Bentmann\n\no Applied with improved formatting\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/release/trunk@679172 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "maven-release_13",
        "file": [
            {
                "sha": "9fe07ae58fed4389da5a13c218df022cf85fcad8",
                "filename": "maven-release-manager/src/main/java/org/apache/maven/shared/release/exec/InvokerMavenExecutor.java",
                "status": "modified",
                "additions": 15,
                "deletions": 4,
                "changes": 19,
                "blob_url": "https://github.com/apache/maven-release/blob/03033d77d22e689582dcea369517c88bcdda03c4/maven-release-manager/src/main/java/org/apache/maven/shared/release/exec/InvokerMavenExecutor.java",
                "raw_url": "https://github.com/apache/maven-release/raw/03033d77d22e689582dcea369517c88bcdda03c4/maven-release-manager/src/main/java/org/apache/maven/shared/release/exec/InvokerMavenExecutor.java",
                "contents_url": "https://api.github.com/repos/apache/maven-release/contents/maven-release-manager/src/main/java/org/apache/maven/shared/release/exec/InvokerMavenExecutor.java?ref=03033d77d22e689582dcea369517c88bcdda03c4",
                "patch": "@@ -154,7 +154,15 @@ private void setupRequest( InvocationRequest req,\n                                String additionalArguments )\n         throws MavenExecutorException\n     {\n-        String[] args = additionalArguments.split( \" \" );\n+        String[] args;\n+        if ( additionalArguments == null )\n+        {\n+            args = new String[0];\n+        }\n+        else\n+        {\n+            args = additionalArguments.split( \" \" );\n+        }\n         try\n         {\n             CommandLine cli = new PosixParser().parse( OPTIONS, args );\n@@ -185,7 +193,7 @@ else if ( cli.hasOption( DEBUG ) )\n             {\n                 req.setDebug( true );\n             }\n-            else if ( cli.hasOption(  ERRORS ) )\n+            else if ( cli.hasOption( ERRORS ) )\n             {\n                 req.setShowErrors( true );\n             }\n@@ -212,7 +220,7 @@ else if ( cli.hasOption( NON_RECURSIVE ) )\n \n                 if ( profiles != null )\n                 {\n-                    for ( int i=0; i < profiles.length; ++i )\n+                    for ( int i = 0; i < profiles.length; ++i )\n                     {\n                         StringTokenizer profileTokens = new StringTokenizer( profiles[i], \",\" );\n \n@@ -238,7 +246,10 @@ else if ( profileAction.startsWith( \"+\" ) )\n \n                 if ( !deactivatedProfiles.isEmpty() )\n                 {\n-                    getLogger().warn( \"Explicit profile deactivation is not yet supported. The following profiles will NOT be deactivated: \" + StringUtils.join( deactivatedProfiles.iterator(), \", \" ) );\n+                    getLogger().warn(\n+                                      \"Explicit profile deactivation is not yet supported. \"\n+                                          + \"The following profiles will NOT be deactivated: \"\n+                                          + StringUtils.join( deactivatedProfiles.iterator(), \", \" ) );\n                 }\n \n                 if ( !activatedProfiles.isEmpty() )"
            }
        ]
    }
]
