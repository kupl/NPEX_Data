[
    {
        "commit": "https://github.com/apache/marmotta/commit/0965f73f27e49efc67fde688f81895cc14cadf04",
        "repo": "marmotta",
        "parent": "https://github.com/apache/marmotta/commit/9dfc605bd5244aee3ac7728566efcd97a887c253",
        "message": "MARMOTTA-562: fixed potential npe rendering exceptions",
        "bug_id": "marmotta_1",
        "file": [
            {
                "sha": "69aabfea3a062d116cf561fd7b4e8779ab7f4c3b",
                "filename": "platform/marmotta-core/src/main/java/org/apache/marmotta/platform/core/jaxrs/exceptionmappers/HttpErrorExceptionMapper.java",
                "status": "modified",
                "additions": 12,
                "deletions": 5,
                "changes": 17,
                "blob_url": "https://github.com/apache/marmotta/blob/0965f73f27e49efc67fde688f81895cc14cadf04/platform/marmotta-core/src/main/java/org/apache/marmotta/platform/core/jaxrs/exceptionmappers/HttpErrorExceptionMapper.java",
                "raw_url": "https://github.com/apache/marmotta/raw/0965f73f27e49efc67fde688f81895cc14cadf04/platform/marmotta-core/src/main/java/org/apache/marmotta/platform/core/jaxrs/exceptionmappers/HttpErrorExceptionMapper.java",
                "contents_url": "https://api.github.com/repos/apache/marmotta/contents/platform/marmotta-core/src/main/java/org/apache/marmotta/platform/core/jaxrs/exceptionmappers/HttpErrorExceptionMapper.java?ref=0965f73f27e49efc67fde688f81895cc14cadf04",
                "patch": "@@ -17,6 +17,7 @@\n package org.apache.marmotta.platform.core.jaxrs.exceptionmappers;\n \n import freemarker.template.TemplateException;\n+import org.apache.commons.lang3.StringUtils;\n import org.apache.marmotta.platform.core.api.config.ConfigurationService;\n import org.apache.marmotta.platform.core.api.templating.TemplatingService;\n import org.apache.marmotta.platform.core.exception.HttpErrorException;\n@@ -66,12 +67,18 @@ public Response toResponse(HttpErrorException exception) {\n         Map<String, Object> data = new HashMap<String, Object>();\n         data.put(\"status\", exception.getStatus());\n         data.put(\"reason\", exception.getReason());\n-        data.put(\"uri\", exception.getUri());\n+\n         data.put(\"message\", exception.getMessage());\n-        try {\n-            data.put(\"encoded_uri\", URLEncoder.encode(exception.getUri(), \"UTF-8\"));\n-        } catch (UnsupportedEncodingException uee) {\n-            data.put(\"encoded_uri\", exception.getUri());\n+        if (StringUtils.isNotBlank(exception.getUri())) {\n+            data.put(\"uri\", exception.getUri());\n+            try {\n+                data.put(\"encoded_uri\", URLEncoder.encode(exception.getUri(), \"UTF-8\"));\n+            } catch (UnsupportedEncodingException uee) {\n+                data.put(\"encoded_uri\", exception.getUri());\n+            }\n+        } else {\n+            data.put(\"uri\", \"\");\n+            data.put(\"encoded_uri\", \"\");\n         }\n \n         Response.ResponseBuilder responseBuilder;"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/marmotta/commit/fa98d109dd427f9d420ba4154fb595b4392cafd4",
        "repo": "marmotta",
        "parent": "https://github.com/apache/marmotta/commit/4e4aa9a090e70893ac6b163bc2796ff6ea9185c7",
        "message": "fixed possible NPE when running ldpath-templating from CLI",
        "bug_id": "marmotta_2",
        "file": [
            {
                "sha": "ad96e0be4b52e023ae3138d3e932a18aa84d5354",
                "filename": "libraries/ldpath/ldpath-template-linkeddata/src/main/java/org/apache/marmotta/ldpath/template/LDTemplate.java",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/marmotta/blob/fa98d109dd427f9d420ba4154fb595b4392cafd4/libraries/ldpath/ldpath-template-linkeddata/src/main/java/org/apache/marmotta/ldpath/template/LDTemplate.java",
                "raw_url": "https://github.com/apache/marmotta/raw/fa98d109dd427f9d420ba4154fb595b4392cafd4/libraries/ldpath/ldpath-template-linkeddata/src/main/java/org/apache/marmotta/ldpath/template/LDTemplate.java",
                "contents_url": "https://api.github.com/repos/apache/marmotta/contents/libraries/ldpath/ldpath-template-linkeddata/src/main/java/org/apache/marmotta/ldpath/template/LDTemplate.java?ref=fa98d109dd427f9d420ba4154fb595b4392cafd4",
                "patch": "@@ -103,7 +103,7 @@ public static void main(String[] args) {\n             if(backend != null && context != null && template != null) {\n                 TemplateEngine<Value> engine = new TemplateEngine<Value>(backend);\n \n-                engine.setDirectoryForTemplateLoading(template.getParentFile());\n+                engine.setDirectoryForTemplateLoading(template.getAbsoluteFile().getParentFile());\n                 engine.processFileTemplate(context,template.getName(),out);\n                 out.flush();\n             }"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/marmotta/commit/f995f4bb3526c21c1f2297e65ca1ec6cc17ffd25",
        "repo": "marmotta",
        "parent": "https://github.com/apache/marmotta/commit/dd701b9b82ab01940202cda9a5a17822028889e1",
        "message": "MARMOTTA-525: fix possible NPE when no Accept-Header is provided (default to */*)",
        "bug_id": "marmotta_3",
        "file": [
            {
                "sha": "7a8e7724443ac7f2763a89cafced71059f686ac8",
                "filename": "platform/marmotta-ldp/src/main/java/org/apache/marmotta/platform/ldp/webservices/LdpWebService.java",
                "status": "modified",
                "additions": 6,
                "deletions": 2,
                "changes": 8,
                "blob_url": "https://github.com/apache/marmotta/blob/f995f4bb3526c21c1f2297e65ca1ec6cc17ffd25/platform/marmotta-ldp/src/main/java/org/apache/marmotta/platform/ldp/webservices/LdpWebService.java",
                "raw_url": "https://github.com/apache/marmotta/raw/f995f4bb3526c21c1f2297e65ca1ec6cc17ffd25/platform/marmotta-ldp/src/main/java/org/apache/marmotta/platform/ldp/webservices/LdpWebService.java",
                "contents_url": "https://api.github.com/repos/apache/marmotta/contents/platform/marmotta-ldp/src/main/java/org/apache/marmotta/platform/ldp/webservices/LdpWebService.java?ref=f995f4bb3526c21c1f2297e65ca1ec6cc17ffd25",
                "patch": "@@ -104,14 +104,18 @@ protected void initialize(@Observes SesameStartupEvent event) {\n     }\n \n     @GET\n-    public Response GET(@Context final UriInfo uriInfo, @Context Request r, @HeaderParam(HttpHeaders.ACCEPT) MediaType type) throws RepositoryException {\n+    public Response GET(@Context final UriInfo uriInfo, @Context Request r,\n+                        @HeaderParam(HttpHeaders.ACCEPT) @DefaultValue(MediaType.WILDCARD) MediaType type)\n+            throws RepositoryException {\n         final String resource = ldpService.getResourceUri(uriInfo);\n         log.debug(\"GET to LDPR <{}>\", resource);\n         return buildGetResponse(resource, r, type).build();\n     }\n \n     @HEAD\n-    public Response HEAD(@Context final UriInfo uriInfo, @Context Request r, @HeaderParam(HttpHeaders.ACCEPT) MediaType type)  throws RepositoryException {\n+    public Response HEAD(@Context final UriInfo uriInfo, @Context Request r,\n+                         @HeaderParam(HttpHeaders.ACCEPT) @DefaultValue(MediaType.WILDCARD) MediaType type)\n+            throws RepositoryException {\n         final String resource = ldpService.getResourceUri(uriInfo);\n         log.debug(\"HEAD to LDPR <{}>\", resource);\n         return buildGetResponse(resource, r, type).entity(null).build();"
            }
        ]
    }
]
