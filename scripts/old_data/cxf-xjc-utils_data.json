[
    {
        "commit": "https://github.com/apache/cxf-xjc-utils/commit/069b82bca041e06f051342886f0082a8534a26b4",
        "repo": "cxf-xjc-utils",
        "parent": "https://github.com/apache/cxf-xjc-utils/commit/2a723a9bd6fab0e240d236d02cfe528a842f9fe9",
        "message": "[CXFXJC-35]Maven-Plugin xsdtojava Task throws NullPointerException if project.build.sourceEncoding is not set",
        "bug_id": "cxf-xjc-utils_1",
        "file": [
            {
                "sha": "2f6667c351289fc2a28365f5bb556ef91b04a101",
                "filename": "cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "status": "modified",
                "additions": 4,
                "deletions": 2,
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf-xjc-utils/blob/069b82bca041e06f051342886f0082a8534a26b4/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "raw_url": "https://github.com/apache/cxf-xjc-utils/raw/069b82bca041e06f051342886f0082a8534a26b4/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf-xjc-utils/contents/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java?ref=069b82bca041e06f051342886f0082a8534a26b4",
                "patch": "@@ -432,8 +432,10 @@ private void removeMessages(String file) throws MojoExecutionException {\n         if (getLog().isDebugEnabled()) {\n             list.add(\"-verbose\");            \n         }\n-        list.add(\"-encoding\");\n-        list.add(encoding);\n+        if (encoding != null) {\n+            list.add(\"-encoding\");\n+            list.add(encoding);\n+        }\n         \n         String[] xsdFiles = getXsdFiles(option.getXsdDir(), option.getXsd());\n         for (String xsdFile : xsdFiles) {"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/cxf-xjc-utils/commit/1336710aa119c8df43bcd600ce96b8d6018010d6",
        "repo": "cxf-xjc-utils",
        "parent": "https://github.com/apache/cxf-xjc-utils/commit/b836aa82354f8990730deaa924963ab32b7e258c",
        "message": "Fix NPE",
        "bug_id": "cxf-xjc-utils_2",
        "file": [
            {
                "sha": "86680ef96758b0c571926924739f6832ad370853",
                "filename": "dv/src/main/java/org/apache/cxf/xjc/dv/DefaultValuePlugin.java",
                "status": "modified",
                "additions": 3,
                "deletions": 3,
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf-xjc-utils/blob/1336710aa119c8df43bcd600ce96b8d6018010d6/dv/src/main/java/org/apache/cxf/xjc/dv/DefaultValuePlugin.java",
                "raw_url": "https://github.com/apache/cxf-xjc-utils/raw/1336710aa119c8df43bcd600ce96b8d6018010d6/dv/src/main/java/org/apache/cxf/xjc/dv/DefaultValuePlugin.java",
                "contents_url": "https://api.github.com/repos/apache/cxf-xjc-utils/contents/dv/src/main/java/org/apache/cxf/xjc/dv/DefaultValuePlugin.java?ref=1336710aa119c8df43bcd600ce96b8d6018010d6",
                "patch": "@@ -450,9 +450,9 @@ private void updateSetter(ClassOutline co, FieldOutline fo,\n         JFieldRef fr = JExpr.ref(fieldName);\n         method.body().assign(fr, var);\n         \n-        method = dc.getMethod(\"unset\" + fo.getPropertyInfo().getName(true), new JType[0]);\n-        if (method != null) {\n-            dc.methods().remove(method);\n+        JMethod oldMethod = dc.getMethod(\"unset\" + fo.getPropertyInfo().getName(true), new JType[0]);\n+        if (oldMethod != null) {\n+            dc.methods().remove(oldMethod);\n         }\n         method = dc.method(mods, method.type(), \"unset\" + fo.getPropertyInfo().getName(true));\n         method.body().assign(fr, JExpr._null());"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/cxf-xjc-utils/commit/4cfb27c9d423b8afe4a9f21c823f31bab37c233a",
        "repo": "cxf-xjc-utils",
        "parent": "https://github.com/apache/cxf-xjc-utils/commit/52debe6f6c8810b6278e3dd4211159a68e2c9037",
        "message": "Added failing test for NPE issue",
        "bug_id": "cxf-xjc-utils_3",
        "file": [
            {
                "sha": "101f668d03c769a96abaf0c9a74096545c3c9ca3",
                "filename": "javadoc/src/test/java/org/apache/cxf/xjc/javadoc/JavadocPluginTest.java",
                "status": "modified",
                "additions": 10,
                "deletions": 0,
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf-xjc-utils/blob/4cfb27c9d423b8afe4a9f21c823f31bab37c233a/javadoc/src/test/java/org/apache/cxf/xjc/javadoc/JavadocPluginTest.java",
                "raw_url": "https://github.com/apache/cxf-xjc-utils/raw/4cfb27c9d423b8afe4a9f21c823f31bab37c233a/javadoc/src/test/java/org/apache/cxf/xjc/javadoc/JavadocPluginTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf-xjc-utils/contents/javadoc/src/test/java/org/apache/cxf/xjc/javadoc/JavadocPluginTest.java?ref=4cfb27c9d423b8afe4a9f21c823f31bab37c233a",
                "patch": "@@ -156,6 +156,16 @@ public void testComplexTypeWithDocumentedAttribute() throws Exception {\n         assertThat(getterJavadoc, javadocContains(\"Documentation of attribute\"));\n     }\n \n+    @Test\n+    public void testAnonymousEnum() throws Exception {\n+        String fileName = \"anonymousEnum.xsd\";\n+        assertProcessedSuccessful(fileName, \"-b\", getAbsolutePath(\"anonymousEnum-javadoc-bindings.xjb\"));\n+\n+        CompilationUnit compilationUnit = parseSourceFile(\"AnonymousTypesafeEnumClass.java\");\n+        Javadoc topLevelTypeJavadoc = getTopLevelEnum(compilationUnit).getJavadoc();\n+        assertThat(topLevelTypeJavadoc, javadocContains(\"Documentation of anonymous enum simpleType\"));\n+    }\n+\n     private void assertProcessedSuccessful(String fileName, String... params) throws Exception {\n         String xsdPath = getAbsolutePath(fileName);\n         List<String> args = new ArrayList<String>(Arrays.asList(xsdPath, \"-Xjavadoc\", \"-d\", OUTPUT_DIR));"
            },
            {
                "sha": "c78147f6709cb557150564acd975398d50fffe1b",
                "filename": "javadoc/src/test/resources/anonymousEnum-javadoc-bindings.xjb",
                "status": "added",
                "additions": 30,
                "deletions": 0,
                "changes": 30,
                "blob_url": "https://github.com/apache/cxf-xjc-utils/blob/4cfb27c9d423b8afe4a9f21c823f31bab37c233a/javadoc/src/test/resources/anonymousEnum-javadoc-bindings.xjb",
                "raw_url": "https://github.com/apache/cxf-xjc-utils/raw/4cfb27c9d423b8afe4a9f21c823f31bab37c233a/javadoc/src/test/resources/anonymousEnum-javadoc-bindings.xjb",
                "contents_url": "https://api.github.com/repos/apache/cxf-xjc-utils/contents/javadoc/src/test/resources/anonymousEnum-javadoc-bindings.xjb?ref=4cfb27c9d423b8afe4a9f21c823f31bab37c233a",
                "patch": "@@ -0,0 +1,30 @@\n+<!--\n+ Licensed to the Apache Software Foundation (ASF) under one\n+ or more contributor license agreements. See the NOTICE file\n+ distributed with this work for additional information\n+ regarding copyright ownership. The ASF licenses this file\n+ to you under the Apache License, Version 2.0 (the\n+ \"License\"); you may not use this file except in compliance\n+ with the License. You may obtain a copy of the License at\n+ \n+ http://www.apache.org/licenses/LICENSE-2.0\n+ \n+ Unless required by applicable law or agreed to in writing,\n+ software distributed under the License is distributed on an\n+ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ KIND, either express or implied. See the License for the\n+ specific language governing permissions and limitations\n+ under the License.\n+ -->\n+ <jaxb:bindings xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:jaxb=\"http://java.sun.com/xml/ns/jaxb\"\n+\txmlns:xjc=\"http://java.sun.com/xml/ns/jaxb/xjc\"\n+\txsi:schemaLocation=\"http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd\"\n+\tjaxb:version=\"2.1\" schemaLocation=\"anonymousEnum.xsd\"\n+\tnode=\"/xs:schema\">\n+\t\t\n+\t<jaxb:bindings node=\"./xs:element[@name='someElement']/xs:simpleType\">\n+\t\t<jaxb:typesafeEnumClass name=\"AnonymousTypesafeEnumClass\" />\n+\t</jaxb:bindings>\n+\n+</jaxb:bindings>"
            },
            {
                "sha": "39e02d42ffd86007f4caef63b2d35a149dd288b3",
                "filename": "javadoc/src/test/resources/anonymousEnum.xsd",
                "status": "added",
                "additions": 34,
                "deletions": 0,
                "changes": 34,
                "blob_url": "https://github.com/apache/cxf-xjc-utils/blob/4cfb27c9d423b8afe4a9f21c823f31bab37c233a/javadoc/src/test/resources/anonymousEnum.xsd",
                "raw_url": "https://github.com/apache/cxf-xjc-utils/raw/4cfb27c9d423b8afe4a9f21c823f31bab37c233a/javadoc/src/test/resources/anonymousEnum.xsd",
                "contents_url": "https://api.github.com/repos/apache/cxf-xjc-utils/contents/javadoc/src/test/resources/anonymousEnum.xsd?ref=4cfb27c9d423b8afe4a9f21c823f31bab37c233a",
                "patch": "@@ -0,0 +1,34 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+ Licensed to the Apache Software Foundation (ASF) under one\n+ or more contributor license agreements. See the NOTICE file\n+ distributed with this work for additional information\n+ regarding copyright ownership. The ASF licenses this file\n+ to you under the Apache License, Version 2.0 (the\n+ \"License\"); you may not use this file except in compliance\n+ with the License. You may obtain a copy of the License at\n+ \n+ http://www.apache.org/licenses/LICENSE-2.0\n+ \n+ Unless required by applicable law or agreed to in writing,\n+ software distributed under the License is distributed on an\n+ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ KIND, either express or implied. See the License for the\n+ specific language governing permissions and limitations\n+ under the License.\n+ -->\n+ <schema xmlns=\"http://www.w3.org/2001/XMLSchema\" xmlns:tns=\"http://www.example.org/xjc-javadoc-plugin/\"\n+ \ttargetNamespace=\"http://www.example.org/xjc-javadoc-plugin/\">\n+\n+\t<element name=\"someElement\">\n+\t\t<simpleType>\n+\t\t\t<annotation>\n+\t\t\t\t<documentation>Documentation of anonymous enum simpleType</documentation>\n+\t\t\t</annotation>\n+\t\t\t<restriction base=\"token\">\n+\t\t\t\t<enumeration value=\"ONE\"/>\n+\t\t\t</restriction>\n+\t\t</simpleType>\n+\t</element>\n+\n+</schema>"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/cxf-xjc-utils/commit/d41ade4801ad30003e3fcffe4968e7a229700ede",
        "repo": "cxf-xjc-utils",
        "parent": "https://github.com/apache/cxf-xjc-utils/commit/4cfb27c9d423b8afe4a9f21c823f31bab37c233a",
        "message": "Fixing NPE caused by null enum TypeName.  This closes #3",
        "bug_id": "cxf-xjc-utils_4",
        "file": [
            {
                "sha": "269e613826ea6afd97dde9150e11e2ead5031430",
                "filename": "javadoc/src/main/java/org/apache/cxf/xjc/javadoc/JavadocInserter.java",
                "status": "modified",
                "additions": 12,
                "deletions": 3,
                "changes": 15,
                "blob_url": "https://github.com/apache/cxf-xjc-utils/blob/d41ade4801ad30003e3fcffe4968e7a229700ede/javadoc/src/main/java/org/apache/cxf/xjc/javadoc/JavadocInserter.java",
                "raw_url": "https://github.com/apache/cxf-xjc-utils/raw/d41ade4801ad30003e3fcffe4968e7a229700ede/javadoc/src/main/java/org/apache/cxf/xjc/javadoc/JavadocInserter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf-xjc-utils/contents/javadoc/src/main/java/org/apache/cxf/xjc/javadoc/JavadocInserter.java?ref=d41ade4801ad30003e3fcffe4968e7a229700ede",
                "patch": "@@ -20,9 +20,12 @@\n \n import java.util.Collection;\n \n+import javax.xml.namespace.QName;\n+\n import org.xml.sax.ErrorHandler;\n \n import com.sun.tools.xjc.Options;\n+import com.sun.tools.xjc.model.CEnumLeafInfo;\n import com.sun.tools.xjc.outline.ClassOutline;\n import com.sun.tools.xjc.outline.EnumOutline;\n import com.sun.tools.xjc.outline.FieldOutline;\n@@ -87,11 +90,17 @@ private void addJavadoc(EnumOutline enumOutline) {\n     }\n \n     private boolean isCustomBindingApplied(EnumOutline enumOutline) {\n-        String defaultComment = Messages.format(\"ClassSelector.JavadocHeading\", enumOutline.target\n-            .getTypeName().getLocalPart());\n+        CEnumLeafInfo target = enumOutline.target;\n+        QName typeName = target.getTypeName();\n+        // typeName may be null on anonymous simple types\n+        if (typeName == null) {\n+            return false;\n+        }\n+        String defaultComment = Messages.format(\"ClassSelector.JavadocHeading\",\n+                typeName.getLocalPart());\n         // not very clean but the only way of determining whether Javadoc\n         // customization has been applied\n-        return !enumOutline.target.javadoc.startsWith(defaultComment);\n+        return !target.javadoc.startsWith(defaultComment);\n     }\n \n }"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/cxf-xjc-utils/commit/59cf74748918d0ee07af2cd084cc3f4a68db03da",
        "repo": "cxf-xjc-utils",
        "parent": "https://github.com/apache/cxf-xjc-utils/commit/e761080573593c3e2a8b2ca5d2a751665b422a62",
        "message": "FIx a possible NPE that is logged",
        "bug_id": "cxf-xjc-utils_5",
        "file": [
            {
                "sha": "e1c331a0eae6e09b093eb36efc1164eb2341732b",
                "filename": "cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "status": "modified",
                "additions": 3,
                "deletions": 0,
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf-xjc-utils/blob/59cf74748918d0ee07af2cd084cc3f4a68db03da/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "raw_url": "https://github.com/apache/cxf-xjc-utils/raw/59cf74748918d0ee07af2cd084cc3f4a68db03da/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf-xjc-utils/contents/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java?ref=59cf74748918d0ee07af2cd084cc3f4a68db03da",
                "patch": "@@ -383,6 +383,9 @@ private int run(String[] args, final XJCErrorListener listener, final File file)\n         final CatalogResolver catResolver = new CatalogResolver(true) {\n             public InputSource resolveEntity(String publicId, String systemId) {\n                 String resolved = getResolvedEntity(publicId, systemId);\n+                if (resolved == null) {\n+                    return null;\n+                }\n                 URL url;\n                 InputSource iSource = new InputSource(resolved);\n                 iSource.setPublicId(publicId);"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/cxf-xjc-utils/commit/ef81073963ef5bf56031ad4cdb8aa42ab7f6b7ba",
        "repo": "cxf-xjc-utils",
        "parent": "https://github.com/apache/cxf-xjc-utils/commit/ad38d5a3bfe86c76927845dfc4ac13b77216bd78",
        "message": "Merge branch 'NPE-fix' of https://github.com/spark404/cxf-xjc-utils\nThis closes #1",
        "bug_id": "cxf-xjc-utils_6",
        "file": [
            {
                "sha": "5a6954558b8f3f96c7fc78ff5ea2268ef66fd836",
                "filename": "cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "status": "modified",
                "additions": 5,
                "deletions": 1,
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf-xjc-utils/blob/ef81073963ef5bf56031ad4cdb8aa42ab7f6b7ba/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "raw_url": "https://github.com/apache/cxf-xjc-utils/raw/ef81073963ef5bf56031ad4cdb8aa42ab7f6b7ba/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf-xjc-utils/contents/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java?ref=ef81073963ef5bf56031ad4cdb8aa42ab7f6b7ba",
                "patch": "@@ -258,7 +258,7 @@ public void execute() throws MojoExecutionException {\n         }\n     }\n     \n-    private List<File> resolve(String artifactDescriptor) {\n+    private List<File> resolve(String artifactDescriptor) throws MojoExecutionException {\n         String[] s = artifactDescriptor.split(\":\");\n \n         String type = s.length >= 4 ? s[3] : \"jar\";\n@@ -281,6 +281,10 @@ public void execute() throws MojoExecutionException {\n         ArtifactResolutionResult result = repository.resolve(request);\n         List<File> files = new ArrayList<File>();\n         for (Artifact a : result.getArtifacts()) {\n+            if (a.getFile() == null) {\n+                throw new MojoExecutionException(\"Unable to resolve \" + a.toString()\n+                        + \" while resolving \" + artifactDescriptor);\n+            }\n             files.add(a.getFile());\n         }\n         if (!files.contains(artifact.getFile())) {"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/cxf-xjc-utils/commit/d635d84a0ed8da2deb19712ef23c4ab0e039b2ea",
        "repo": "cxf-xjc-utils",
        "parent": "https://github.com/apache/cxf-xjc-utils/commit/d699b3f21bca4d077ab60e7e223cc72d0a6aa726",
        "message": "[CXF-5158] Protect from getting an NPE if using a non-file based url\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/xjc-utils/trunk@1509782 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "cxf-xjc-utils_7",
        "file": [
            {
                "sha": "3b41207871fbb197be08a4101e4de152beea2225",
                "filename": "cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "status": "modified",
                "additions": 19,
                "deletions": 1,
                "changes": 20,
                "blob_url": "https://github.com/apache/cxf-xjc-utils/blob/d635d84a0ed8da2deb19712ef23c4ab0e039b2ea/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "raw_url": "https://github.com/apache/cxf-xjc-utils/raw/d635d84a0ed8da2deb19712ef23c4ab0e039b2ea/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf-xjc-utils/contents/cxf-xjc-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractXSDToJavaMojo.java?ref=d635d84a0ed8da2deb19712ef23c4ab0e039b2ea",
                "patch": "@@ -141,11 +141,13 @@\n         }\n \n         public void error(SAXParseException exception) {\n-            File file = mapFile(exception.getSystemId());\n+            final String sysId = exception.getSystemId();\n+            File file = mapFile(sysId);\n             if (file != null && !errorfiles.contains(file)) {\n                 buildContext.removeMessages(file);\n                 errorfiles.add(file);\n             }\n+            \n             buildContext.addMessage(file, exception.getLineNumber(), exception.getColumnNumber(),\n                                     mapMessage(exception.getLocalizedMessage()),\n                                     BuildContext.SEVERITY_ERROR, exception);\n@@ -169,6 +171,21 @@ private File mapFile(String s) {\n                     //ignore\n                 }\n             }\n+            if (file == null) {\n+                //Cannot pass a null into buildContext.addMessage.  Create a pointless\n+                //File object that maps to the systemId\n+                if (s == null) {\n+                    file = new File(\"null\");\n+                } else {\n+                    final String s2 = s;\n+                    file = new File(s2) {\n+                        private static final long serialVersionUID = 1L;\n+                        public String getAbsolutePath() {\n+                            return s2;\n+                        }\n+                    };\n+                }\n+            }                        \n             return file;\n         }\n \n@@ -188,6 +205,7 @@ public void warning(SAXParseException exception) {\n         }\n \n         public void info(SAXParseException exception) {\n+            //System.out.println(mapFile(exception.getSystemId()));\n         }\n     }\n     "
            }
        ]
    }
]
