[
    {
        "commit": "https://github.com/apache/sling-org-apache-sling-feature/commit/60d096b166c601e1f4cf69c094471214ea211b93",
        "repo": "sling-org-apache-sling-feature",
        "parent": "https://github.com/apache/sling-org-apache-sling-feature/commit/473f5819ad6c8b1a01c7714af0d0bc87e258879a",
        "message": "SLING-8135: Fix an NPE when removing a bundle from a prototype with configurations.",
        "bug_id": "sling-org-apache-sling-feature_1",
        "file": [
            {
                "sha": "85ede3106c07cc43656c6bf3a641ba0fac85e0d9",
                "filename": "src/main/java/org/apache/sling/feature/builder/FeatureBuilder.java",
                "status": "modified",
                "additions": 11,
                "deletions": 9,
                "changes": 20,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-feature/blob/60d096b166c601e1f4cf69c094471214ea211b93/src/main/java/org/apache/sling/feature/builder/FeatureBuilder.java",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-feature/raw/60d096b166c601e1f4cf69c094471214ea211b93/src/main/java/org/apache/sling/feature/builder/FeatureBuilder.java",
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-feature/contents/src/main/java/org/apache/sling/feature/builder/FeatureBuilder.java?ref=60d096b166c601e1f4cf69c094471214ea211b93",
                "patch": "@@ -394,15 +394,17 @@ private static void processPrototype(final Feature feature, final Prototype prot\n             while ( iter.hasNext() ) {\n                 final Configuration cfg = iter.next();\n                 final String bundleId = (String)cfg.getProperties().get(Configuration.PROP_ARTIFACT_ID);\n-                final ArtifactId bundleArtifactId = ArtifactId.fromMvnId(bundleId);\n-                boolean remove = false;\n-                if ( ignoreVersion ) {\n-                    remove = bundleArtifactId.isSame(a);\n-                } else {\n-                    remove = bundleArtifactId.equals(a);\n-                }\n-                if (  remove) {\n-                    iter.remove();\n+                if (bundleId != null) {\n+                    final ArtifactId bundleArtifactId = ArtifactId.fromMvnId(bundleId);\n+                    boolean remove = false;\n+                    if ( ignoreVersion ) {\n+                        remove = bundleArtifactId.isSame(a);\n+                    } else {\n+                        remove = bundleArtifactId.equals(a);\n+                    }\n+                    if (  remove) {\n+                        iter.remove();\n+                    }\n                 }\n             }\n         }"
            }
        ]
    }
]
