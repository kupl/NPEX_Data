[
    {
        "commit": "https://github.com/apache/sling-whiteboard/commit/1b101fd4e697edd809a74b6c3e9286b528b28a8d",
        "repo": "sling-whiteboard",
        "parent": "https://github.com/apache/sling-whiteboard/commit/b9fcb9a461e9144743ac1cd39a83ab6da34c7a81",
        "message": "Prevent NPE in test",
        "bug_id": "sling-whiteboard_1",
        "file": [
            {
                "sha": "e8b6ac85c94650e36b8cd7bfad314f72d1c025a5",
                "filename": "url-connection-agent/src/test/java/org/apache/sling/uca/impl/AgentIT.java",
                "status": "modified",
                "additions": 3,
                "deletions": 3,
                "changes": 6,
                "blob_url": "https://github.com/apache/sling-whiteboard/blob/1b101fd4e697edd809a74b6c3e9286b528b28a8d/url-connection-agent/src/test/java/org/apache/sling/uca/impl/AgentIT.java",
                "raw_url": "https://github.com/apache/sling-whiteboard/raw/1b101fd4e697edd809a74b6c3e9286b528b28a8d/url-connection-agent/src/test/java/org/apache/sling/uca/impl/AgentIT.java",
                "contents_url": "https://api.github.com/repos/apache/sling-whiteboard/contents/url-connection-agent/src/test/java/org/apache/sling/uca/impl/AgentIT.java?ref=1b101fd4e697edd809a74b6c3e9286b528b28a8d",
                "patch": "@@ -138,15 +138,15 @@ private RecordedThrowable runTest(String urlSpec, ClientType clientType) throws\n         int exitCode = process.exitValue();\n         LOG.info(\"Exited with code {}\", exitCode);\n         \n-        if ( exitCode != 0 ) {\n+        if ( exitCode == 0 ) {\n+            throw new RuntimeException(\"Command terminated successfully. That is unexpected.\");\n+        } else {\n             return Files.lines(STDERR)\n                 .filter( l -> l.startsWith(\"Exception in thread \\\"main\\\"\"))\n                 .map( l -> newRecordedThrowable(l) )\n                 .findFirst()\n                 .orElseThrow(() -> new RuntimeException(\"Exit code was zero but did not find any exception information in stderr.txt\"));\n         }\n-        \n-        return null;\n     }\n     \n     private Process runForkedCommandWithAgent(URL url, int connectTimeoutSeconds, int readTimeoutSeconds, ClientType clientType) throws IOException {"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/sling-whiteboard/commit/a4aa6a14ee9586a41f766799f2e620c34d7e0b26",
        "repo": "sling-whiteboard",
        "parent": "https://github.com/apache/sling-whiteboard/commit/62b089bb5400fdfb38c29a4e5073950e3b11db6e",
        "message": "Revert to 89c8dd0f so that tests pass, but native-image build fails with NPE",
        "bug_id": "sling-whiteboard_2",
        "file": [
            {
                "sha": "64dae78df90ab590f92210b68e5af8430daf9ef4",
                "filename": "graalvm/src/main/java/org/apache/sling/graalvm/osgi/SlingContext.java",
                "status": "modified",
                "additions": 2,
                "deletions": 2,
                "changes": 4,
                "blob_url": "https://github.com/apache/sling-whiteboard/blob/a4aa6a14ee9586a41f766799f2e620c34d7e0b26/graalvm/src/main/java/org/apache/sling/graalvm/osgi/SlingContext.java",
                "raw_url": "https://github.com/apache/sling-whiteboard/raw/a4aa6a14ee9586a41f766799f2e620c34d7e0b26/graalvm/src/main/java/org/apache/sling/graalvm/osgi/SlingContext.java",
                "contents_url": "https://api.github.com/repos/apache/sling-whiteboard/contents/graalvm/src/main/java/org/apache/sling/graalvm/osgi/SlingContext.java?ref=a4aa6a14ee9586a41f766799f2e620c34d7e0b26",
                "patch": "@@ -45,8 +45,8 @@ private static OsgiContext initialize() {\n         //result.registerInjectActivateService(new MockResourceResolver(mrp));\n         result.registerInjectActivateService(new MockServiceUserMapper());\n         result.registerInjectActivateService(new ResourceAccessSecurityTracker());\n-        final ResourceResolverFactoryActivator rrfa = null; // NATIVE new ResourceResolverFactoryActivator();\n-        // NATIVE result.registerInjectActivateService(rrfa);\n+        final ResourceResolverFactoryActivator rrfa = new ResourceResolverFactoryActivator();\n+        result.registerInjectActivateService(rrfa);\n         result.registerInjectActivateService(new ResourceResolverFactoryService(rrfa));\n \n         return result;"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/sling-whiteboard/commit/62b089bb5400fdfb38c29a4e5073950e3b11db6e",
        "repo": "sling-whiteboard",
        "parent": "https://github.com/apache/sling-whiteboard/commit/6c4cc4cae6db99530e81de2226e5ee4b7293cf38",
        "message": "Native build works with these changes, throws NPE without them (with GraalVM CE 19.1.0)",
        "bug_id": "sling-whiteboard_3",
        "file": [
            {
                "sha": "e28d9c5a82b40a1bbd37795881f1d1cd8e25e47d",
                "filename": "graalvm/src/main/java/org/apache/sling/graalvm/osgi/SlingContext.java",
                "status": "modified",
                "additions": 2,
                "deletions": 2,
                "changes": 4,
                "blob_url": "https://github.com/apache/sling-whiteboard/blob/62b089bb5400fdfb38c29a4e5073950e3b11db6e/graalvm/src/main/java/org/apache/sling/graalvm/osgi/SlingContext.java",
                "raw_url": "https://github.com/apache/sling-whiteboard/raw/62b089bb5400fdfb38c29a4e5073950e3b11db6e/graalvm/src/main/java/org/apache/sling/graalvm/osgi/SlingContext.java",
                "contents_url": "https://api.github.com/repos/apache/sling-whiteboard/contents/graalvm/src/main/java/org/apache/sling/graalvm/osgi/SlingContext.java?ref=62b089bb5400fdfb38c29a4e5073950e3b11db6e",
                "patch": "@@ -45,8 +45,8 @@ private static OsgiContext initialize() {\n         //result.registerInjectActivateService(new MockResourceResolver(mrp));\n         result.registerInjectActivateService(new MockServiceUserMapper());\n         result.registerInjectActivateService(new ResourceAccessSecurityTracker());\n-        final ResourceResolverFactoryActivator rrfa = new ResourceResolverFactoryActivator();\n-        result.registerInjectActivateService(rrfa);\n+        final ResourceResolverFactoryActivator rrfa = null; // NATIVE new ResourceResolverFactoryActivator();\n+        // NATIVE result.registerInjectActivateService(rrfa);\n         result.registerInjectActivateService(new ResourceResolverFactoryService(rrfa));\n \n         return result;"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/sling-whiteboard/commit/4fcc38d79c081bcbb42a2b3df4d04caf26e4acee",
        "repo": "sling-whiteboard",
        "parent": "https://github.com/apache/sling-whiteboard/commit/69e0fe76b73e5b1be772221fb1ff530bc326351d",
        "message": "Prevent NPE if agent is launched with no arguments",
        "bug_id": "sling-whiteboard_4",
        "file": [
            {
                "sha": "a9320d6afa9cdf2fde041e88d79f87d7b8da82d9",
                "filename": "url-connection-agent/src/main/java/org/apache/sling/uca/impl/Agent.java",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/sling-whiteboard/blob/4fcc38d79c081bcbb42a2b3df4d04caf26e4acee/url-connection-agent/src/main/java/org/apache/sling/uca/impl/Agent.java",
                "raw_url": "https://github.com/apache/sling-whiteboard/raw/4fcc38d79c081bcbb42a2b3df4d04caf26e4acee/url-connection-agent/src/main/java/org/apache/sling/uca/impl/Agent.java",
                "contents_url": "https://api.github.com/repos/apache/sling-whiteboard/contents/url-connection-agent/src/main/java/org/apache/sling/uca/impl/Agent.java?ref=4fcc38d79c081bcbb42a2b3df4d04caf26e4acee",
                "patch": "@@ -25,7 +25,7 @@\n     public static void premain(String args, Instrumentation inst) {\n         \n         System.out.println(\"[AGENT] Loading agent...\");\n-        String[] parsedArgs = args.split(\",\");\n+        String[] parsedArgs = args != null ? args.split(\",\") : new String[0];\n         long connectTimeout =  TimeUnit.MINUTES.toMillis(1);\n         long readTimeout = TimeUnit.MINUTES.toMillis(1);\n         if ( parsedArgs.length > 0 )"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/sling-whiteboard/commit/68a0d979461d70cbc5d003d88c9dca19065b95e0",
        "repo": "sling-whiteboard",
        "parent": "https://github.com/apache/sling-whiteboard/commit/f990281d8e9772e3e206525404c50bb2e586b147",
        "message": "SLING-6585 - Switch to the ASF code signing service\n\nFix a NPE when the codesign.sslDebug property is enabled.",
        "bug_id": "sling-whiteboard_5",
        "file": [
            {
                "sha": "4bbd62ff8db998e44450a2f16f19e8bdaf6d5724",
                "filename": "codesign/src/main/java/org/apache/tomcat/buildutil/SignCodeMojo.java",
                "status": "modified",
                "additions": 5,
                "deletions": 1,
                "changes": 6,
                "blob_url": "https://github.com/apache/sling-whiteboard/blob/68a0d979461d70cbc5d003d88c9dca19065b95e0/codesign/src/main/java/org/apache/tomcat/buildutil/SignCodeMojo.java",
                "raw_url": "https://github.com/apache/sling-whiteboard/raw/68a0d979461d70cbc5d003d88c9dca19065b95e0/codesign/src/main/java/org/apache/tomcat/buildutil/SignCodeMojo.java",
                "contents_url": "https://api.github.com/repos/apache/sling-whiteboard/contents/codesign/src/main/java/org/apache/tomcat/buildutil/SignCodeMojo.java?ref=68a0d979461d70cbc5d003d88c9dca19065b95e0",
                "patch": "@@ -206,7 +206,11 @@ public void execute() throws MojoExecutionException {\n             throw new MojoExecutionException(\"Signing failed : \" + e.getMessage(), e);\n         } finally {\n             if ( sslDebug ) {\n-                System.setProperty(\"javax.net.debug\", oldSslDebug);\n+                if ( oldSslDebug != null ) {\n+                    System.setProperty(\"javax.net.debug\", oldSslDebug);\n+                } else {\n+                    System.clearProperty(\"javax.net.debug\");\n+                }\n             }\n         }\n     }"
            }
        ]
    }
]
