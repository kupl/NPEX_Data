[
    {
        "commit": "https://github.com/apache/phoenix-tephra/commit/827a70c689664e85c6f37ee0bdce59fb3bbc80d9",
        "repo": "phoenix-tephra",
        "parent": "https://github.com/apache/phoenix-tephra/commit/7cfe0612538ead57ec66e580ed1d2d9e950c5c73",
        "message": "TEPHRA-239 Fix NPE by waiting for the service to startup\n\nThis closes #46 from GitHub.\n\nSigned-off-by: Gokul Gunasekaran <gokul@cask.co>",
        "bug_id": "phoenix-tephra_1",
        "file": [
            {
                "sha": "c929d29f1f93da4af395ea1b9e8c2ce73e14b81e",
                "filename": "tephra-core/src/main/java/org/apache/tephra/coprocessor/ReferenceCountedSupplier.java",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "blob_url": "https://github.com/apache/phoenix-tephra/blob/827a70c689664e85c6f37ee0bdce59fb3bbc80d9/tephra-core/src/main/java/org/apache/tephra/coprocessor/ReferenceCountedSupplier.java",
                "raw_url": "https://github.com/apache/phoenix-tephra/raw/827a70c689664e85c6f37ee0bdce59fb3bbc80d9/tephra-core/src/main/java/org/apache/tephra/coprocessor/ReferenceCountedSupplier.java",
                "contents_url": "https://api.github.com/repos/apache/phoenix-tephra/contents/tephra-core/src/main/java/org/apache/tephra/coprocessor/ReferenceCountedSupplier.java?ref=827a70c689664e85c6f37ee0bdce59fb3bbc80d9",
                "patch": "@@ -54,7 +54,7 @@ public T getOrCreate(Supplier<T> instanceSupplier) {\n         // Instance has not been instantiated\n         T serviceInstance = instanceSupplier.get();\n         instance.set(serviceInstance);\n-        serviceInstance.start();\n+        serviceInstance.startAndWait();\n       }\n       int newCount = refCount.incrementAndGet();\n       if (LOG.isDebugEnabled()) {"
            },
            {
                "sha": "553d3cef578f678c579f89ae395b529971c5a0c6",
                "filename": "tephra-core/src/main/java/org/apache/tephra/coprocessor/TransactionStateCache.java",
                "status": "modified",
                "additions": 7,
                "deletions": 2,
                "changes": 9,
                "blob_url": "https://github.com/apache/phoenix-tephra/blob/827a70c689664e85c6f37ee0bdce59fb3bbc80d9/tephra-core/src/main/java/org/apache/tephra/coprocessor/TransactionStateCache.java",
                "raw_url": "https://github.com/apache/phoenix-tephra/raw/827a70c689664e85c6f37ee0bdce59fb3bbc80d9/tephra-core/src/main/java/org/apache/tephra/coprocessor/TransactionStateCache.java",
                "contents_url": "https://api.github.com/repos/apache/phoenix-tephra/contents/tephra-core/src/main/java/org/apache/tephra/coprocessor/TransactionStateCache.java?ref=827a70c689664e85c6f37ee0bdce59fb3bbc80d9",
                "patch": "@@ -81,8 +81,13 @@ protected void startUp() throws Exception {\n \n   @Override\n   protected void shutDown() throws Exception {\n-    this.refreshService.interrupt();\n-    this.storage.stop();\n+    if (refreshService != null) {\n+      refreshService.interrupt();\n+    }\n+\n+    if (storage != null) {\n+      storage.stop();\n+    }\n   }\n \n   /**"
            }
        ]
    }
]
