[
    {
        "commit": "https://github.com/apache/vxquery/commit/47815f899547f5e23a2d12a7da3ab038649d307f",
        "repo": "vxquery",
        "parent": "https://github.com/apache/vxquery/commit/bb39a04fc6051c49036e4875d8cec72e2c87a270",
        "message": "VXQUERY-139: Fixed the NPE for the compile only flag.\n\nPreviously executing queries with compileonly flag gave NPE, which was due to null value of IHyracksClientConnection.\nSubmitted by: ankitladhania (on github)",
        "bug_id": "vxquery_1",
        "file": [
            {
                "sha": "65263b39e55b3bb60e7840d69c0526af51941ac2",
                "filename": ".gitignore",
                "status": "modified",
                "additions": 1,
                "deletions": 0,
                "changes": 1,
                "blob_url": "https://github.com/apache/vxquery/blob/47815f899547f5e23a2d12a7da3ab038649d307f/.gitignore",
                "raw_url": "https://github.com/apache/vxquery/raw/47815f899547f5e23a2d12a7da3ab038649d307f/.gitignore",
                "contents_url": "https://api.github.com/repos/apache/vxquery/contents/.gitignore?ref=47815f899547f5e23a2d12a7da3ab038649d307f",
                "patch": "@@ -1,5 +1,6 @@\n .project\n .settings\n .classpath\n+.idea\n target\n /ClusterControllerService/"
            },
            {
                "sha": "a02c65dea01dcf619ccb62319462657275c23b7d",
                "filename": "vxquery-cli/src/main/java/org/apache/vxquery/cli/VXQuery.java",
                "status": "modified",
                "additions": 15,
                "deletions": 15,
                "changes": 30,
                "blob_url": "https://github.com/apache/vxquery/blob/47815f899547f5e23a2d12a7da3ab038649d307f/vxquery-cli/src/main/java/org/apache/vxquery/cli/VXQuery.java",
                "raw_url": "https://github.com/apache/vxquery/raw/47815f899547f5e23a2d12a7da3ab038649d307f/vxquery-cli/src/main/java/org/apache/vxquery/cli/VXQuery.java",
                "contents_url": "https://api.github.com/repos/apache/vxquery/contents/vxquery-cli/src/main/java/org/apache/vxquery/cli/VXQuery.java?ref=47815f899547f5e23a2d12a7da3ab038649d307f",
                "patch": "@@ -81,8 +81,7 @@\n     /**\n      * Constructor to use command line options passed.\n      *\n-     * @param opts\n-     *            Command line options object\n+     * @param opts Command line options object\n      */\n     public VXQuery(CmdLineOptions opts) {\n         this.opts = opts;\n@@ -240,23 +239,24 @@ private void runQueries() throws IOException, SystemException, Exception {\n      * @throws Exception\n      */\n     private String[] getNodeList() throws Exception {\n-        Map<String, NodeControllerInfo> nodeControllerInfos = hcc.getNodeControllerInfos();\n-        String[] nodeList = new String[nodeControllerInfos.size()];\n-        int index = 0;\n-        for (String node : nodeControllerInfos.keySet()) {\n-            nodeList[index++] = node;\n+        if (hcc != null) {\n+            Map<String, NodeControllerInfo> nodeControllerInfos = hcc.getNodeControllerInfos();\n+            String[] nodeList = new String[nodeControllerInfos.size()];\n+            int index = 0;\n+            for (String node : nodeControllerInfos.keySet()) {\n+                nodeList[index++] = node;\n+            }\n+            return nodeList;\n         }\n-        return nodeList;\n+        return new String[0];\n     }\n \n     /**\n      * Creates a Hyracks dataset, if not already existing with the job frame size, and 1 reader. Allocates a new buffer of size specified in the frame of Hyracks\n      * node. Creates new dataset reader with the current job ID and result set ID. Outputs the string in buffer for each frame.\n      *\n-     * @param spec\n-     *            JobSpecification object, containing frame size. Current specified job.\n-     * @param writer\n-     *            Writer for output of job.\n+     * @param spec   JobSpecification object, containing frame size. Current specified job.\n+     * @param writer Writer for output of job.\n      * @throws Exception\n      */\n     private void runJob(JobSpecification spec, PrintWriter writer) throws Exception {\n@@ -339,8 +339,7 @@ public void stopLocalHyracks() throws Exception {\n     /**\n      * Reads the contents of file given in query into a String. The file is always closed. For XML files UTF-8 encoding is used.\n      *\n-     * @param query\n-     *            The query with filename to be processed\n+     * @param query The query with filename to be processed\n      * @return UTF-8 formatted query string\n      * @throws IOException\n      */\n@@ -362,7 +361,8 @@ private static void timingMessage(String message) {\n      * Helper class with fields and methods to handle all command line options\n      */\n     private static class CmdLineOptions {\n-        @Option(name = \"-available-processors\", usage = \"Number of available processors. (default: java's available processors)\")\n+        @Option(name = \"-available-processors\",\n+                usage = \"Number of available processors. (default: java's available processors)\")\n         private int availableProcessors = -1;\n \n         @Option(name = \"-client-net-ip-address\", usage = \"IP Address of the ClusterController.\")"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/vxquery/commit/c13ad1202af4da31406b0ac2e83d833e87a4c64d",
        "repo": "vxquery",
        "parent": "https://github.com/apache/vxquery/commit/3f4797bb7b17916947c6d0a9e821eb5084e23f5f",
        "message": "add NullableTypeComputer to avoid NPE",
        "bug_id": "vxquery_2",
        "file": [
            {
                "sha": "2fdfbeac7422e213c3b6297111884d3b5918cd77",
                "filename": "vxquery-core/src/main/java/org/apache/vxquery/xmlquery/query/XMLQueryCompiler.java",
                "status": "modified",
                "additions": 7,
                "deletions": 0,
                "changes": 7,
                "blob_url": "https://github.com/apache/vxquery/blob/c13ad1202af4da31406b0ac2e83d833e87a4c64d/vxquery-core/src/main/java/org/apache/vxquery/xmlquery/query/XMLQueryCompiler.java",
                "raw_url": "https://github.com/apache/vxquery/raw/c13ad1202af4da31406b0ac2e83d833e87a4c64d/vxquery-core/src/main/java/org/apache/vxquery/xmlquery/query/XMLQueryCompiler.java",
                "contents_url": "https://api.github.com/repos/apache/vxquery/contents/vxquery-core/src/main/java/org/apache/vxquery/xmlquery/query/XMLQueryCompiler.java?ref=c13ad1202af4da31406b0ac2e83d833e87a4c64d",
                "patch": "@@ -41,6 +41,7 @@\n import org.apache.vxquery.xmlquery.translator.XMLQueryTranslator;\n \n import edu.uci.ics.hyracks.algebricks.common.exceptions.AlgebricksException;\n+import edu.uci.ics.hyracks.algebricks.common.exceptions.NotImplementedException;\n import edu.uci.ics.hyracks.algebricks.common.utils.Pair;\n import edu.uci.ics.hyracks.algebricks.compiler.api.HeuristicCompilerFactoryBuilder;\n import edu.uci.ics.hyracks.algebricks.compiler.api.ICompiler;\n@@ -149,6 +150,12 @@ public Object getType(ILogicalExpression expr, IMetadataProvider<?, ?> metadataP\n                 return null;\n             }\n         });\n+        builder.setNullableTypeComputer(new INullableTypeComputer() {\n+            @Override\n+            public Object makeNullableType(Object type) throws AlgebricksException {\n+                throw new NotImplementedException(\"NullableTypeComputer is not implented\");\n+            }\n+        });\n         builder.setNullWriterFactory(new VXQueryNullWriterFactory());\n         if (availableProcessors < 1) {\n             builder.setClusterLocations(VXQueryMetadataProvider.getClusterLocations(nodeList));"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/vxquery/commit/44faa1f3f369268fd05b04fd3348a8404c112eee",
        "repo": "vxquery",
        "parent": "https://github.com/apache/vxquery/commit/a09d1f5ddccbf2f031424a79e764d220128863b6",
        "message": "add NullableTypeComputer to avoid NPE",
        "bug_id": "vxquery_3",
        "file": [
            {
                "sha": "a3f5e93a8033cad730f49d7921f6c28416a4d182",
                "filename": "vxquery-core/src/main/java/org/apache/vxquery/xmlquery/query/XMLQueryCompiler.java",
                "status": "modified",
                "additions": 7,
                "deletions": 0,
                "changes": 7,
                "blob_url": "https://github.com/apache/vxquery/blob/44faa1f3f369268fd05b04fd3348a8404c112eee/vxquery-core/src/main/java/org/apache/vxquery/xmlquery/query/XMLQueryCompiler.java",
                "raw_url": "https://github.com/apache/vxquery/raw/44faa1f3f369268fd05b04fd3348a8404c112eee/vxquery-core/src/main/java/org/apache/vxquery/xmlquery/query/XMLQueryCompiler.java",
                "contents_url": "https://api.github.com/repos/apache/vxquery/contents/vxquery-core/src/main/java/org/apache/vxquery/xmlquery/query/XMLQueryCompiler.java?ref=44faa1f3f369268fd05b04fd3348a8404c112eee",
                "patch": "@@ -41,6 +41,7 @@\n \n import edu.uci.ics.hyracks.algebricks.common.constraints.AlgebricksAbsolutePartitionConstraint;\n import edu.uci.ics.hyracks.algebricks.common.exceptions.AlgebricksException;\n+import edu.uci.ics.hyracks.algebricks.common.exceptions.NotImplementedException;\n import edu.uci.ics.hyracks.algebricks.common.utils.Pair;\n import edu.uci.ics.hyracks.algebricks.compiler.api.HeuristicCompilerFactoryBuilder;\n import edu.uci.ics.hyracks.algebricks.compiler.api.ICompiler;\n@@ -142,6 +143,12 @@ public Object getType(ILogicalExpression expr, IMetadataProvider<?, ?> metadataP\n                 return null;\n             }\n         });\n+        builder.setNullableTypeComputer(new INullableTypeComputer() {\n+            @Override\n+            public Object makeNullableType(Object type) throws AlgebricksException {\n+                throw new NotImplementedException(\"NullableTypeComputer is not implented\");\n+            }\n+        });\n         builder.setNullWriterFactory(new VXQueryNullWriterFactory());\n         builder.setClusterLocations(new AlgebricksAbsolutePartitionConstraint(nodeList));\n         cFactory = builder.create();"
            }
        ]
    },
    {
        "commit": "https://github.com/apache/vxquery/commit/6a1cd7801fc1a2c627786e6af10ede36a2091638",
        "repo": "vxquery",
        "parent": "https://github.com/apache/vxquery/commit/743fca6fb7d2ceb5936ebd07779b833fd97fed30",
        "message": "Fixed NPE when variable binding is not specified\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/vxquery/trunk/vxquery@818519 13f79535-47bb-0310-9956-ffa450edef68",
        "bug_id": "vxquery_4",
        "file": [
            {
                "sha": "83417a01effa9ea75d88fad457e4a92e037548f7",
                "filename": "tests/xtest/org/apache/vxquery/xtest/TestRunnerFactory.java",
                "status": "modified",
                "additions": 5,
                "deletions": 1,
                "changes": 6,
                "blob_url": "https://github.com/apache/vxquery/blob/6a1cd7801fc1a2c627786e6af10ede36a2091638/tests/xtest/org/apache/vxquery/xtest/TestRunnerFactory.java",
                "raw_url": "https://github.com/apache/vxquery/raw/6a1cd7801fc1a2c627786e6af10ede36a2091638/tests/xtest/org/apache/vxquery/xtest/TestRunnerFactory.java",
                "contents_url": "https://api.github.com/repos/apache/vxquery/contents/tests/xtest/org/apache/vxquery/xtest/TestRunnerFactory.java?ref=6a1cd7801fc1a2c627786e6af10ede36a2091638",
                "patch": "@@ -18,6 +18,7 @@\n \n import java.io.BufferedWriter;\n import java.io.ByteArrayOutputStream;\n+import java.io.File;\n import java.io.FileReader;\n import java.io.OutputStreamWriter;\n import java.io.PrintWriter;\n@@ -67,7 +68,10 @@ public void run() {\n                     for (PrologVariable pVar : module.getPrologVariables()) {\n                         GlobalVariable var = pVar.getVariable();\n                         QName varName = var.getName();\n-                        iapi.bindExternalVariable(var, testCase.getExternalVariableBinding(varName));\n+                        File binding = testCase.getExternalVariableBinding(varName);\n+                        if (binding != null) {\n+                            iapi.bindExternalVariable(var, testCase.getExternalVariableBinding(varName));\n+                        }\n                     }\n                     OpenableCloseableIterator ri = iapi.execute(module);\n                     ri.open();"
            }
        ]
    }
]
