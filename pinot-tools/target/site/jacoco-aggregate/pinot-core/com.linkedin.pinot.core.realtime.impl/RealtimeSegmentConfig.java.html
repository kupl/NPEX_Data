<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>RealtimeSegmentConfig.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">pinot-tools</a> &gt; <a href="../index.html" class="el_bundle">pinot-core</a> &gt; <a href="index.source.html" class="el_package">com.linkedin.pinot.core.realtime.impl</a> &gt; <span class="el_source">RealtimeSegmentConfig.java</span></div><h1>RealtimeSegmentConfig.java</h1><pre class="source lang-java linenums">/**
 * Copyright (C) 2014-2016 LinkedIn Corp. (pinot-core@linkedin.com)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.linkedin.pinot.core.realtime.impl;

import com.linkedin.pinot.common.config.SegmentPartitionConfig;
import com.linkedin.pinot.common.data.Schema;
import com.linkedin.pinot.common.metadata.segment.RealtimeSegmentZKMetadata;
import com.linkedin.pinot.core.io.readerwriter.PinotDataBufferMemoryManager;
import java.util.Set;


public class RealtimeSegmentConfig {
  private final String _segmentName;
  private final String _streamName;
  private final Schema _schema;
  private final int _capacity;
  private final int _avgNumMultiValues;
  private final Set&lt;String&gt; _noDictionaryColumns;
  private final Set&lt;String&gt; _invertedIndexColumns;
  private final RealtimeSegmentZKMetadata _realtimeSegmentZKMetadata;
  private final boolean _offHeap;
  private final PinotDataBufferMemoryManager _memoryManager;
  private final RealtimeSegmentStatsHistory _statsHistory;
  private final SegmentPartitionConfig _segmentPartitionConfig;

  private RealtimeSegmentConfig(String segmentName, String streamName, Schema schema, int capacity,
      int avgNumMultiValues, Set&lt;String&gt; noDictionaryColumns, Set&lt;String&gt; invertedIndexColumns,
      RealtimeSegmentZKMetadata realtimeSegmentZKMetadata, boolean offHeap,
      PinotDataBufferMemoryManager memoryManager, RealtimeSegmentStatsHistory statsHistory,
<span class="fc" id="L43">      SegmentPartitionConfig segmentPartitionConfig) {</span>
<span class="fc" id="L44">    _segmentName = segmentName;</span>
<span class="fc" id="L45">    _streamName = streamName;</span>
<span class="fc" id="L46">    _schema = schema;</span>
<span class="fc" id="L47">    _capacity = capacity;</span>
<span class="fc" id="L48">    _avgNumMultiValues = avgNumMultiValues;</span>
<span class="fc" id="L49">    _noDictionaryColumns = noDictionaryColumns;</span>
<span class="fc" id="L50">    _invertedIndexColumns = invertedIndexColumns;</span>
<span class="fc" id="L51">    _realtimeSegmentZKMetadata = realtimeSegmentZKMetadata;</span>
<span class="fc" id="L52">    _offHeap = offHeap;</span>
<span class="fc" id="L53">    _memoryManager = memoryManager;</span>
<span class="fc" id="L54">    _statsHistory = statsHistory;</span>
<span class="fc" id="L55">    _segmentPartitionConfig = segmentPartitionConfig;</span>
<span class="fc" id="L56">  }</span>

  public String getSegmentName() {
<span class="fc" id="L59">    return _segmentName;</span>
  }

  public String getStreamName() {
<span class="fc" id="L63">    return _streamName;</span>
  }

  public Schema getSchema() {
<span class="fc" id="L67">    return _schema;</span>
  }

  public int getCapacity() {
<span class="fc" id="L71">    return _capacity;</span>
  }

  public int getAvgNumMultiValues() {
<span class="fc" id="L75">    return _avgNumMultiValues;</span>
  }

  public Set&lt;String&gt; getNoDictionaryColumns() {
<span class="fc" id="L79">    return _noDictionaryColumns;</span>
  }

  public Set&lt;String&gt; getInvertedIndexColumns() {
<span class="fc" id="L83">    return _invertedIndexColumns;</span>
  }

  public RealtimeSegmentZKMetadata getRealtimeSegmentZKMetadata() {
<span class="fc" id="L87">    return _realtimeSegmentZKMetadata;</span>
  }

  public boolean isOffHeap() {
<span class="fc" id="L91">    return _offHeap;</span>
  }

  public PinotDataBufferMemoryManager getMemoryManager() {
<span class="fc" id="L95">    return _memoryManager;</span>
  }

  public RealtimeSegmentStatsHistory getStatsHistory() {
<span class="fc" id="L99">    return _statsHistory;</span>
  }

  public SegmentPartitionConfig getSegmentPartitionConfig() {
<span class="fc" id="L103">    return _segmentPartitionConfig;</span>
  }

  public static class Builder {
    private String _segmentName;
    private String _streamName;
    private Schema _schema;
    private int _capacity;
    private int _avgNumMultiValues;
    private Set&lt;String&gt; _noDictionaryColumns;
    private Set&lt;String&gt; _invertedIndexColumns;
    private RealtimeSegmentZKMetadata _realtimeSegmentZKMetadata;
    private boolean _offHeap;
    private PinotDataBufferMemoryManager _memoryManager;
    private RealtimeSegmentStatsHistory _statsHistory;
    private SegmentPartitionConfig _segmentPartitionConfig;

<span class="fc" id="L120">    public Builder() {</span>
<span class="fc" id="L121">    }</span>

    public Builder setSegmentName(String segmentName) {
<span class="fc" id="L124">      _segmentName = segmentName;</span>
<span class="fc" id="L125">      return this;</span>
    }

    public Builder setStreamName(String streamName) {
<span class="fc" id="L129">      _streamName = streamName;</span>
<span class="fc" id="L130">      return this;</span>
    }

    public Builder setSchema(Schema schema) {
<span class="fc" id="L134">      _schema = schema;</span>
<span class="fc" id="L135">      return this;</span>
    }

    public Builder setCapacity(int capacity) {
<span class="fc" id="L139">      _capacity = capacity;</span>
<span class="fc" id="L140">      return this;</span>
    }

    public Builder setAvgNumMultiValues(int avgNumMultiValues) {
<span class="fc" id="L144">      _avgNumMultiValues = avgNumMultiValues;</span>
<span class="fc" id="L145">      return this;</span>
    }

    public Builder setNoDictionaryColumns(Set&lt;String&gt; noDictionaryColumns) {
<span class="fc" id="L149">      _noDictionaryColumns = noDictionaryColumns;</span>
<span class="fc" id="L150">      return this;</span>
    }

    public Builder setInvertedIndexColumns(Set&lt;String&gt; invertedIndexColumns) {
<span class="fc" id="L154">      _invertedIndexColumns = invertedIndexColumns;</span>
<span class="fc" id="L155">      return this;</span>
    }

    public Builder setRealtimeSegmentZKMetadata(RealtimeSegmentZKMetadata realtimeSegmentZKMetadata) {
<span class="fc" id="L159">      _realtimeSegmentZKMetadata = realtimeSegmentZKMetadata;</span>
<span class="fc" id="L160">      return this;</span>
    }

    public Builder setOffHeap(boolean offHeap) {
<span class="fc" id="L164">      _offHeap = offHeap;</span>
<span class="fc" id="L165">      return this;</span>
    }

    public Builder setMemoryManager(PinotDataBufferMemoryManager memoryManager) {
<span class="fc" id="L169">      _memoryManager = memoryManager;</span>
<span class="fc" id="L170">      return this;</span>
    }

    public Builder setStatsHistory(RealtimeSegmentStatsHistory statsHistory) {
<span class="fc" id="L174">      _statsHistory = statsHistory;</span>
<span class="fc" id="L175">      return this;</span>
    }

    public Builder setSegmentPartitionConfig(SegmentPartitionConfig segmentPartitionConfig) {
<span class="nc" id="L179">      _segmentPartitionConfig = segmentPartitionConfig;</span>
<span class="nc" id="L180">      return this;</span>
    }

    public RealtimeSegmentConfig build() {
<span class="fc" id="L184">      return new RealtimeSegmentConfig(_segmentName, _streamName, _schema, _capacity, _avgNumMultiValues,</span>
          _noDictionaryColumns, _invertedIndexColumns, _realtimeSegmentZKMetadata, _offHeap, _memoryManager,
          _statsHistory, _segmentPartitionConfig);
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>