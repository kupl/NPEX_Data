{
    "xmlbeans_2aed591": {
        "bug_id": "xmlbeans_2aed591",
        "commit": "https://github.com/apache/xmlbeans/commit/2aed5911e8f1264d01dee85241d1e9e690e8ad5b",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/CHANGES.txt",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/CHANGES.txt?ref=2aed5911e8f1264d01dee85241d1e9e690e8ad5b",
                "deletions": 0,
                "filename": "CHANGES.txt",
                "patch": "@@ -1,3 +1,9 @@\n+Changes in V3.0.2 since V3.0.1\n+\n+* XMLBEANS-520: wrong name for source(s) artifact\n+* XMLBEANS-519: issue when using old XML parser versions\n+* XMLBEANS-506: NPE trying to load resource file if XmlBeans was loaded by the bootstrap ClassLoader\n+\n Changes in V3.0.1 since V3.0.0\n \n * XMLBEANS-518: add support to XmlOptions to allow control over the XML parser settings that affect DTD loading",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/CHANGES.txt",
                "sha": "5e6abb60d81cd350a06fc94fd285c8d4cf506629",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/saaj_api/org/apache/xmlbeans/impl/soap/FactoryFinder.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/saaj_api/org/apache/xmlbeans/impl/soap/FactoryFinder.java?ref=2aed5911e8f1264d01dee85241d1e9e690e8ad5b",
                "deletions": 1,
                "filename": "src/saaj_api/org/apache/xmlbeans/impl/soap/FactoryFinder.java",
                "patch": "@@ -147,7 +147,7 @@ private static InputStream getResource(String factoryResource) {\n         }\n \n         if (inputstream == null) {\n-            inputstream = FactoryFinder.class.getClassLoader().getResourceAsStream(factoryResource);\n+            inputstream = FactoryFinder.class.getResourceAsStream(factoryResource);\n         }\n         return inputstream;\n     }",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/saaj_api/org/apache/xmlbeans/impl/soap/FactoryFinder.java",
                "sha": "c826933c590d0b8b4a77640fcbe31df6ac5b8b6e",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/store/org/apache/xmlbeans/impl/store/Path.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/store/org/apache/xmlbeans/impl/store/Path.java?ref=2aed5911e8f1264d01dee85241d1e9e690e8ad5b",
                "deletions": 2,
                "filename": "src/store/org/apache/xmlbeans/impl/store/Path.java",
                "patch": "@@ -67,9 +67,8 @@\n \n     static\n     {\n-        ClassLoader cl = Path.class.getClassLoader();\n         String id = \"META-INF/services/org.apache.xmlbeans.impl.store.PathDelegate.SelectPathInterface\";\n-        InputStream in = cl.getResourceAsStream(id);\n+        InputStream in = Path.class.getResourceAsStream(id);\n         try\n         {\n             BufferedReader br = new BufferedReader(new InputStreamReader(in));",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/store/org/apache/xmlbeans/impl/store/Path.java",
                "sha": "015eea6f5d40e156503a04e3d17fa3677bc50df4",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/store/org/apache/xmlbeans/impl/store/Query.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/store/org/apache/xmlbeans/impl/store/Query.java?ref=2aed5911e8f1264d01dee85241d1e9e690e8ad5b",
                "deletions": 2,
                "filename": "src/store/org/apache/xmlbeans/impl/store/Query.java",
                "patch": "@@ -52,9 +52,8 @@\n \n     static\n     {\n-        ClassLoader cl = Query.class.getClassLoader();\n         String id = \"META-INF/services/org.apache.xmlbeans.impl.store.QueryDelegate.QueryInterface\";\n-        InputStream in = cl.getResourceAsStream(id);\n+        InputStream in = Query.class.getResourceAsStream(id);\n         try\n         {\n             BufferedReader br = new BufferedReader(new InputStreamReader(in));",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/store/org/apache/xmlbeans/impl/store/Query.java",
                "sha": "0b8acccaca71a4624092e8cfe95d98f5a16fade5",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/xmlcomp/org/apache/xmlbeans/impl/tool/CommandLine.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/xmlcomp/org/apache/xmlbeans/impl/tool/CommandLine.java?ref=2aed5911e8f1264d01dee85241d1e9e690e8ad5b",
                "deletions": 1,
                "filename": "src/xmlcomp/org/apache/xmlbeans/impl/tool/CommandLine.java",
                "patch": "@@ -76,7 +76,7 @@ public static void printLicense()\n     {\n         try\n         {\n-            IOUtil.copyCompletely(CommandLine.class.getClassLoader().getResourceAsStream(\"LICENSE.txt\"), System.out);\n+            IOUtil.copyCompletely(CommandLine.class.getResourceAsStream(\"LICENSE.txt\"), System.out);\n         }\n         catch (Exception e)\n         {",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/xmlcomp/org/apache/xmlbeans/impl/tool/CommandLine.java",
                "sha": "55c1ecd07b3ca782ec677f95851fa6e99dbf0692",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/xmlpublic/org/apache/xmlbeans/XmlBeans.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/xmlpublic/org/apache/xmlbeans/XmlBeans.java?ref=2aed5911e8f1264d01dee85241d1e9e690e8ad5b",
                "deletions": 1,
                "filename": "src/xmlpublic/org/apache/xmlbeans/XmlBeans.java",
                "patch": "@@ -35,7 +35,7 @@\n public final class XmlBeans\n {\n     private static String XMLBEANS_TITLE = \"org.apache.xmlbeans\";\n-    private static String XMLBEANS_VERSION = \"2.6.0\";\n+    private static String XMLBEANS_VERSION = \"3.0.2\";\n     private static String XMLBEANS_VENDOR = \"Apache Software Foundation\";\n \n     static",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2aed5911e8f1264d01dee85241d1e9e690e8ad5b/src/xmlpublic/org/apache/xmlbeans/XmlBeans.java",
                "sha": "14bbe6416f95d89bd3f602f8c4e4a0c2ebd13860",
                "status": "modified"
            }
        ],
        "message": "XMLBEANS-506: NPE trying to load resource file if XmlBeans was loaded by the bootstrap ClassLoader\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlbeans/trunk@1844288 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/xmlbeans/commit/ebdc8a71e809fdf3f3918d1cfc1a36cc77a6b051",
        "repo": "xmlbeans",
        "unit_tests": [
            "XmlBeansTests.java"
        ]
    },
    "xmlbeans_2d2f528": {
        "bug_id": "xmlbeans_2d2f528",
        "commit": "https://github.com/apache/xmlbeans/commit/2d2f5281280b9ec45115de4918b818f093d9dd6b",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2d2f5281280b9ec45115de4918b818f093d9dd6b/src/typeimpl/org/apache/xmlbeans/impl/schema/SchemaParticleImpl.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/typeimpl/org/apache/xmlbeans/impl/schema/SchemaParticleImpl.java?ref=2d2f5281280b9ec45115de4918b818f093d9dd6b",
                "deletions": 0,
                "filename": "src/typeimpl/org/apache/xmlbeans/impl/schema/SchemaParticleImpl.java",
                "patch": "@@ -123,6 +123,13 @@ public void setMaxOccurs(BigInteger max)\n \n     public SchemaParticle[] getParticleChildren()\n     {\n+        if (_particleChildren == null)\n+        {\n+            assert _particleType != SchemaParticle.ALL &&\n+                _particleType != SchemaParticle.SEQUENCE &&\n+                _particleType != SchemaParticle.CHOICE;\n+            return null;\n+        }\n         SchemaParticle[] result = new SchemaParticle[_particleChildren.length];\n         System.arraycopy(_particleChildren, 0, result, 0, _particleChildren.length);\n         return result;",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2d2f5281280b9ec45115de4918b818f093d9dd6b/src/typeimpl/org/apache/xmlbeans/impl/schema/SchemaParticleImpl.java",
                "sha": "047d95fc2df32463c03de19b6b569be407086ae8",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2d2f5281280b9ec45115de4918b818f093d9dd6b/src/typeimpl/org/apache/xmlbeans/impl/schema/SchemaTypeCodePrinter.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/typeimpl/org/apache/xmlbeans/impl/schema/SchemaTypeCodePrinter.java?ref=2d2f5281280b9ec45115de4918b818f093d9dd6b",
                "deletions": 2,
                "filename": "src/typeimpl/org/apache/xmlbeans/impl/schema/SchemaTypeCodePrinter.java",
                "patch": "@@ -974,8 +974,11 @@ String javaTypeForProperty(SchemaProperty sProp)\n                 return \"java.util.Calendar\";\n \n             case SchemaProperty.JAVA_ENUM:\n-                SchemaType sType = sProp.javaBasedOnType().getBaseEnumType();\n-                return findJavaType(sType).replace('$', '.') + \".Enum\";\n+                SchemaType sType = sProp.javaBasedOnType();\n+                if (sType.getSimpleVariety() == SchemaType.UNION)\n+                    sType = sType.getUnionCommonBaseType();\n+                assert sType.getBaseEnumType() != null;\n+                return findJavaType(sType.getBaseEnumType()).replace('$', '.') + \".Enum\";\n \n             case SchemaProperty.JAVA_OBJECT:\n                 return \"java.lang.Object\";",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2d2f5281280b9ec45115de4918b818f093d9dd6b/src/typeimpl/org/apache/xmlbeans/impl/schema/SchemaTypeCodePrinter.java",
                "sha": "f50af2e349a7a66f440eb7addc06cf798d304a4e",
                "status": "modified"
            },
            {
                "additions": 17,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2d2f5281280b9ec45115de4918b818f093d9dd6b/src/typeimpl/org/apache/xmlbeans/impl/schema/StscImporter.java",
                "changes": 19,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/typeimpl/org/apache/xmlbeans/impl/schema/StscImporter.java?ref=2d2f5281280b9ec45115de4918b818f093d9dd6b",
                "deletions": 2,
                "filename": "src/typeimpl/org/apache/xmlbeans/impl/schema/StscImporter.java",
                "patch": "@@ -257,7 +257,7 @@ private static URI parseURI(String s)\n     }\n \n     //workaround for Sun bug # 4723726\n-    private static URI resolve(URI base, String child)\n+    public static URI resolve(URI base, String child)\n         throws URISyntaxException\n     {\n         URI childUri = new URI(child);\n@@ -268,11 +268,26 @@ private static URI resolve(URI base, String child)\n         // URI is pointing at something nested inside a jar, we seem to have\n         // to this ourselves to make sure that the nested jar url gets\n         // resolved correctly\n-        if (childUri.equals(ruri) &&\n+        if (childUri.equals(ruri) && !childUri.isAbsolute() &&\n           (base.getScheme().equals(\"jar\") || base.getScheme().equals(\"zip\"))) {\n             String r = base.toString();\n             int lastslash = r.lastIndexOf('/');\n             r = r.substring(0,lastslash) + \"/\" + childUri;\n+            // Sun's implementation of URI doesn't support references to the\n+            // parent directory (\"/..\") in the part after \"!/\" so we have to\n+            // remove these ourselves\n+            int slashDotDotIndex = r.lastIndexOf(\"/..\");\n+            int exclPointSlashIndex = r.lastIndexOf(\"!/\");\n+            while (slashDotDotIndex >= 0 && slashDotDotIndex > exclPointSlashIndex)\n+            {\n+                int prevSlashIndex = r.lastIndexOf(\"/\", slashDotDotIndex - 1);\n+                if (prevSlashIndex >= exclPointSlashIndex)\n+                {\n+                    String temp = r.substring(slashDotDotIndex + 3);\n+                    r = r.substring(0, prevSlashIndex).concat(temp);\n+                }\n+                slashDotDotIndex = r.lastIndexOf(\"/..\");\n+            }\n             return URI.create(r);\n         }\n ",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2d2f5281280b9ec45115de4918b818f093d9dd6b/src/typeimpl/org/apache/xmlbeans/impl/schema/StscImporter.java",
                "sha": "e9ce1da3d3f4b2cab67e68695d4dc74bdc59ee28",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/xmlbeans/blob/2d2f5281280b9ec45115de4918b818f093d9dd6b/src/xmlpublic/org/apache/xmlbeans/XmlBeans.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/xmlpublic/org/apache/xmlbeans/XmlBeans.java?ref=2d2f5281280b9ec45115de4918b818f093d9dd6b",
                "deletions": 4,
                "filename": "src/xmlpublic/org/apache/xmlbeans/XmlBeans.java",
                "patch": "@@ -530,7 +530,7 @@ public static SchemaTypeLoader loadXsd(XmlObject[] schemas, XmlOptions options)\n      */\n     public static SchemaTypeSystem compileXsd(XmlObject[] schemas, SchemaTypeLoader typepath, XmlOptions options) throws XmlException\n     {\n-        return compileXmlBeans(null, null, schemas, null, typepath!=null ? typepath : getContextTypeLoader(), null, options);\n+        return compileXmlBeans(null, null, schemas, null, typepath, null, options);\n     }\n \n     /**\n@@ -578,7 +578,7 @@ public static SchemaTypeSystem compileXsd(XmlObject[] schemas, SchemaTypeLoader\n      */\n     public static SchemaTypeSystem compileXsd(SchemaTypeSystem system, XmlObject[] schemas, SchemaTypeLoader typepath, XmlOptions options) throws XmlException\n     {\n-        return compileXmlBeans(null, system, schemas, null, typepath != null ? typepath : getContextTypeLoader(), null, options);\n+        return compileXmlBeans(null, system, schemas, null, typepath, null, options);\n     }\n \n     /**\n@@ -611,7 +611,8 @@ public static SchemaTypeSystem compileXsd(SchemaTypeSystem system, XmlObject[] s\n      *\n      * <p>The optional SchemaTypeLoader argument will be\n      * consulted for already-compiled schema types which may be linked\n-     * while processing the given schemas.</p>\n+     * while processing the given schemas. If not specified, the context\n+     * typeloader (as returned by {@link #getContextTypeLoader}) will be used.</p>\n      *\n      * <p>The optional {@link Filer} argument is used to create new binary or source\n      * files which are the product of the compilation.  If the Filer is null, the\n@@ -646,7 +647,7 @@ public static SchemaTypeSystem compileXmlBeans(String name, SchemaTypeSystem sys\n \n         try\n         {\n-            return (SchemaTypeSystem)_compilationMethod.invoke(null, new Object[] { name, system, schemas, config, typepath, filer, options });\n+            return (SchemaTypeSystem)_compilationMethod.invoke(null, new Object[] { name, system, schemas, config, typepath != null ? typepath : getContextTypeLoader(), filer, options });\n         }\n         catch (IllegalAccessException e)\n         {",
                "raw_url": "https://github.com/apache/xmlbeans/raw/2d2f5281280b9ec45115de4918b818f093d9dd6b/src/xmlpublic/org/apache/xmlbeans/XmlBeans.java",
                "sha": "84c38e4830ac73bdfbc14ecf04c66ef8359eec25",
                "status": "modified"
            }
        ],
        "message": "Fixed a few NPEs.\nMade some changes to our URI resolver to better handle references from Schemas inside jar and zip files.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlbeans/trunk@160250 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/xmlbeans/commit/58b67d06c8f9962e8f50ba5e4e0936546626f346",
        "repo": "xmlbeans",
        "unit_tests": [
            "XmlBeansTests.java"
        ]
    },
    "xmlbeans_f30ec6f": {
        "bug_id": "xmlbeans_f30ec6f",
        "commit": "https://github.com/apache/xmlbeans/commit/f30ec6f0b36b1e42422a76a94e9d175c457e9f49",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/xmlbeans/blob/f30ec6f0b36b1e42422a76a94e9d175c457e9f49/src/xmlcomp/org/apache/xmlbeans/impl/tool/SchemaCompiler.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlbeans/contents/src/xmlcomp/org/apache/xmlbeans/impl/tool/SchemaCompiler.java?ref=f30ec6f0b36b1e42422a76a94e9d175c457e9f49",
                "deletions": 0,
                "filename": "src/xmlcomp/org/apache/xmlbeans/impl/tool/SchemaCompiler.java",
                "patch": "@@ -748,6 +748,10 @@ private static SchemaTypeSystem loadTypeSystem(String name, File[] xsdFiles, Fil\n     {\n         XmlErrorWatcher errorListener = new XmlErrorWatcher(outerErrorListener);\n \n+        // construct the state (have to initialize early in case of errors)\n+        StscState state = StscState.start();\n+        state.setErrorListener(errorListener);\n+\n         // For parsing XSD and WSDL files, we should use the SchemaDocument\n         // classloader rather than the thread context classloader.  This is\n         // because in some situations (such as when being invoked by ant",
                "raw_url": "https://github.com/apache/xmlbeans/raw/f30ec6f0b36b1e42422a76a94e9d175c457e9f49/src/xmlcomp/org/apache/xmlbeans/impl/tool/SchemaCompiler.java",
                "sha": "3170563b7e1dbd08fbc1d9a5370511020065e2e8",
                "status": "modified"
            }
        ],
        "message": "Fix for XMLBEANS-133 and XMLBEANS-185. If an error was found with any xsdconfig files StscState.get() could be called before StscState.start() which resulted in an NPE.\n\nContributed by Lawrence Jones\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlbeans/trunk@227480 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/xmlbeans/commit/6cd825d4ee2989bc5eb68ee92053c3649f35e2b6",
        "repo": "xmlbeans",
        "unit_tests": [
            "SchemaCompilerTests.java"
        ]
    }
}