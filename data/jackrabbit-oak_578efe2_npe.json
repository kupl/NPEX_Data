[
    {
        "repo": "jackrabbit-oak",
        "commit": "https://github.com/apache/jackrabbit-oak/commit/578efe27c207f6daffb3dd9223cb6bbe14794c12",
        "bug_id": "jackrabbit-oak_578efe2",
        "message": "OAK-1817: NPE in MarkSweepGarbageCollector.saveBatchToFile during Datastore GC with FileDataStore\n\nUse correct segment size when wrapping the buffer\n\ngit-svn-id: https://svn.apache.org/repos/asf/jackrabbit/oak/trunk@1596534 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/jackrabbit-oak/commit/6186a1229ff657dbb4c6a993f16533d8815c0f94",
        "patched_files": [
            "SegmentWriter.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 1,
                "raw_url": "https://github.com/apache/jackrabbit-oak/raw/578efe27c207f6daffb3dd9223cb6bbe14794c12/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentWriter.java",
                "contents_url": "https://api.github.com/repos/apache/jackrabbit-oak/contents/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentWriter.java?ref=578efe27c207f6daffb3dd9223cb6bbe14794c12",
                "filename": "oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentWriter.java",
                "deletions": 1,
                "sha": "16c3f8377730c92f2ece7953b3bd97b79a469ed3",
                "blob_url": "https://github.com/apache/jackrabbit-oak/blob/578efe27c207f6daffb3dd9223cb6bbe14794c12/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentWriter.java",
                "patch": "@@ -219,7 +219,7 @@ public synchronized void flush() {\n                 data.put(buffer, buffer.length - length, length);\n                 data.rewind();\n             } else {\n-                data = ByteBuffer.wrap(buffer);\n+                data = ByteBuffer.wrap(buffer, buffer.length - length, length);\n             }\n             tracker.setSegment(id, new Segment(tracker, id, data));\n ",
                "changes": 2
            },
            {
                "status": "modified",
                "additions": 0,
                "raw_url": "https://github.com/apache/jackrabbit-oak/raw/578efe27c207f6daffb3dd9223cb6bbe14794c12/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/segment/ExternalBlobTest.java",
                "contents_url": "https://api.github.com/repos/apache/jackrabbit-oak/contents/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/segment/ExternalBlobTest.java?ref=578efe27c207f6daffb3dd9223cb6bbe14794c12",
                "filename": "oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/segment/ExternalBlobTest.java",
                "deletions": 1,
                "sha": "00d2321903eeae4e69c7bdcaa3777f8995873954",
                "blob_url": "https://github.com/apache/jackrabbit-oak/blob/578efe27c207f6daffb3dd9223cb6bbe14794c12/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/segment/ExternalBlobTest.java",
                "patch": "@@ -82,7 +82,6 @@ public void testDataStoreBlob() throws Exception {\n         is.close();\n     }\n \n-    @Ignore(\"OAK-1817\")\n     @Test\n     public void testNullBlobId() throws Exception{\n         FileDataStore fds = createFileDataStore();",
                "changes": 1
            }
        ],
        "unit_tests": [
            "ExternalBlobTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/segment/ExternalBlobTest.java",
        "buggy_files": [
            "oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentWriter.java"
        ],
        "fixed": true
    }
]