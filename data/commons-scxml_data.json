[{"commit": "https://github.com/apache/commons-scxml/commit/6ba9e778ef1f99a80f8463fbf68b39e02add6797", "parent": "https://github.com/apache/commons-scxml/commit/07ad5e56818b6937986a1327fdf13102f9baad61", "message": "guard against npes\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/scxml/trunk@1602784 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "commons-scxml_1", "file": [{"additions": 1, "raw_url": "https://github.com/apache/commons-scxml/raw/6ba9e778ef1f99a80f8463fbf68b39e02add6797/src/main/java/org/apache/commons/scxml2/model/Action.java", "blob_url": "https://github.com/apache/commons-scxml/blob/6ba9e778ef1f99a80f8463fbf68b39e02add6797/src/main/java/org/apache/commons/scxml2/model/Action.java", "sha": "e9302ee280038cb9e068ec08f6b0f1f49b88c945", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/commons-scxml/contents/src/main/java/org/apache/commons/scxml2/model/Action.java?ref=6ba9e778ef1f99a80f8463fbf68b39e02add6797", "patch": "@@ -98,7 +98,7 @@ public final void setNamespaces(final Map<String, String> namespaces) {\n      */\n     public final EnterableState getParentEnterableState()\n     throws ModelException {\n-        if (parent == null && this instanceof Script && ((Script)this).isGlobalScript()) {\n+        if (parent == null || (this instanceof Script && ((Script)this).isGlobalScript())) {\n             // global script doesn't have a EnterableState\n             return null;\n         }", "filename": "src/main/java/org/apache/commons/scxml2/model/Action.java"}], "repo": "commons-scxml"}, {"commit": "https://github.com/apache/commons-scxml/commit/b7a1baa272f576e33435bf54d6686016fad2eac0", "parent": "https://github.com/apache/commons-scxml/commit/ce4d045dee16b1cd46b9691d64fe4e28e08103dd", "message": "Fix potential NPE and add consistent legacy flags.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/scxml/trunk@727192 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "commons-scxml_2", "file": [{"additions": 3, "raw_url": "https://github.com/apache/commons-scxml/raw/b7a1baa272f576e33435bf54d6686016fad2eac0/src/main/java/org/apache/commons/scxml/io/SCXMLDigester.java", "blob_url": "https://github.com/apache/commons-scxml/blob/b7a1baa272f576e33435bf54d6686016fad2eac0/src/main/java/org/apache/commons/scxml/io/SCXMLDigester.java", "sha": "14f1c8dd0e0730a99618833187db131b50a85c0a", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/commons-scxml/contents/src/main/java/org/apache/commons/scxml/io/SCXMLDigester.java?ref=b7a1baa272f576e33435bf54d6686016fad2eac0", "patch": "@@ -250,8 +250,8 @@ public static SCXML digest(final URL scxmlURL,\n \n         if (scxml != null) {\n             ModelUpdater.updateSCXML(scxml);\n+            scxml.setLegacy(true);\n         }\n-        scxml.setLegacy(true);\n \n         return scxml;\n \n@@ -312,6 +312,7 @@ public static SCXML digest(final String documentRealPath,\n \n         if (scxml != null) {\n             ModelUpdater.updateSCXML(scxml);\n+            scxml.setLegacy(true);\n         }\n \n         return scxml;\n@@ -367,6 +368,7 @@ public static SCXML digest(final InputSource documentInputSource,\n \n         if (scxml != null) {\n             ModelUpdater.updateSCXML(scxml);\n+            scxml.setLegacy(true);\n         }\n \n         return scxml;", "filename": "src/main/java/org/apache/commons/scxml/io/SCXMLDigester.java"}], "repo": "commons-scxml"}, {"commit": "https://github.com/apache/commons-scxml/commit/757057addf72d587387055dd964ecb2a562a2cc3", "parent": "https://github.com/apache/commons-scxml/commit/6ba9e778ef1f99a80f8463fbf68b39e02add6797", "message": "reverting and correcting previous fix to prevent NPEs which introduced an incorrect side-effect\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/scxml/trunk@1621831 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "commons-scxml_3", "file": [{"additions": 5, "raw_url": "https://github.com/apache/commons-scxml/raw/757057addf72d587387055dd964ecb2a562a2cc3/src/main/java/org/apache/commons/scxml2/model/Action.java", "blob_url": "https://github.com/apache/commons-scxml/blob/757057addf72d587387055dd964ecb2a562a2cc3/src/main/java/org/apache/commons/scxml2/model/Action.java", "sha": "aa31902085c7518d6a3c6315930681fd6f260f2e", "changes": 6, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/commons-scxml/contents/src/main/java/org/apache/commons/scxml2/model/Action.java?ref=757057addf72d587387055dd964ecb2a562a2cc3", "patch": "@@ -98,10 +98,14 @@ public final void setNamespaces(final Map<String, String> namespaces) {\n      */\n     public final EnterableState getParentEnterableState()\n     throws ModelException {\n-        if (parent == null || (this instanceof Script && ((Script)this).isGlobalScript())) {\n+        if (parent == null && this instanceof Script && ((Script)this).isGlobalScript()) {\n             // global script doesn't have a EnterableState\n             return null;\n         }\n+        else if (parent == null) {\n+            throw new ModelException(\"Action \"\n+                    + this.getClass().getName() + \" instance missing required parent TransitionTarget\");\n+        }\n         TransitionTarget tt = parent.getParent();\n         if (tt instanceof EnterableState) {\n             return (EnterableState)tt;", "filename": "src/main/java/org/apache/commons/scxml2/model/Action.java"}], "repo": "commons-scxml"}, {"commit": "https://github.com/apache/commons-scxml/commit/77dc36f5644910cbffbedb9dbc7e0b118b14fa66", "parent": "https://github.com/apache/commons-scxml/commit/19bed73bb2fd71a1be7a7f26b132c47d5c81fa72", "message": "SCXML-196: fix NPE when a Transition has multiple targets (at least 3) without the same Parallel LCA (Least Common Ancestor)\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/scxml/trunk@1580673 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "commons-scxml_4", "file": [{"additions": 5, "raw_url": "https://github.com/apache/commons-scxml/raw/77dc36f5644910cbffbedb9dbc7e0b118b14fa66/src/main/java/org/apache/commons/scxml2/io/ModelUpdater.java", "blob_url": "https://github.com/apache/commons-scxml/blob/77dc36f5644910cbffbedb9dbc7e0b118b14fa66/src/main/java/org/apache/commons/scxml2/io/ModelUpdater.java", "sha": "fb5629b1f19d63658494566edbfb44d20e91ec64", "changes": 6, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/commons-scxml/contents/src/main/java/org/apache/commons/scxml2/io/ModelUpdater.java?ref=77dc36f5644910cbffbedb9dbc7e0b118b14fa66", "patch": "@@ -453,9 +453,13 @@ private static boolean verifyTransitionTargets(final List<TransitionTarget> tts)\n         Parallel parallel = (Parallel) lca;\n         Set<TransitionTarget> regions = new HashSet<TransitionTarget>();\n         for (TransitionTarget tt : tts) {\n-            while (tt.getParent() != parallel) {\n+            while (tt != null && tt.getParent() != parallel) {\n                 tt = tt.getParent();\n             }\n+            if (tt == null) {\n+                // target outside lca\n+                return false;\n+            }\n             if (!regions.add(tt)) {\n                 return false; // One per region\n             }", "filename": "src/main/java/org/apache/commons/scxml2/io/ModelUpdater.java"}], "repo": "commons-scxml"}, {"commit": "https://github.com/apache/commons-scxml/commit/447982f9093380cea909323f504c14f7199a644d", "parent": "https://github.com/apache/commons-scxml/commit/c18a349735ccfe80f778b18c54abfcb100fc3553", "message": "Throw an IAE if the ServletContext passed to the ServletContextResolver is null, since that will just result in an NPE down the road. Don't log error in similar situation in SessionContext, IAE should have the necessary information.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/sandbox/scxml/trunk@376422 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "commons-scxml_5", "file": [{"additions": 0, "raw_url": "https://github.com/apache/commons-scxml/raw/447982f9093380cea909323f504c14f7199a644d/src/main/java/org/apache/commons/scxml/env/faces/SessionContext.java", "blob_url": "https://github.com/apache/commons-scxml/blob/447982f9093380cea909323f504c14f7199a644d/src/main/java/org/apache/commons/scxml/env/faces/SessionContext.java", "sha": "ee34fd1ce0a44f54af64744e93c62759587a0045", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/commons-scxml/contents/src/main/java/org/apache/commons/scxml/env/faces/SessionContext.java?ref=447982f9093380cea909323f504c14f7199a644d", "patch": "@@ -60,7 +60,6 @@ public SessionContext(final FacesContext fc) {\n     public SessionContext(final FacesContext fc, final Context parent) {\n         super(parent);\n         if (fc == null) {\n-            LOG.error(ERR_HOST_FACES_CTX_NULL);\n             throw new IllegalArgumentException(ERR_HOST_FACES_CTX_NULL);\n         } else {\n           // only retain the session map", "filename": "src/main/java/org/apache/commons/scxml/env/faces/SessionContext.java"}, {"additions": 9, "raw_url": "https://github.com/apache/commons-scxml/raw/447982f9093380cea909323f504c14f7199a644d/src/main/java/org/apache/commons/scxml/env/servlet/ServletContextResolver.java", "blob_url": "https://github.com/apache/commons-scxml/blob/447982f9093380cea909323f504c14f7199a644d/src/main/java/org/apache/commons/scxml/env/servlet/ServletContextResolver.java", "sha": "31964f78f025e49a55eae9e9d7dc3e5ba80a1329", "changes": 9, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/commons-scxml/contents/src/main/java/org/apache/commons/scxml/env/servlet/ServletContextResolver.java?ref=447982f9093380cea909323f504c14f7199a644d", "patch": "@@ -28,6 +28,12 @@\n  */\n public class ServletContextResolver implements PathResolver {\n \n+    /** Cannot accept a null ServletContext, it will just throw\n+     *  NullPointerException down the road. */\n+    private static final String ERR_SERVLET_CTX_NULL =\n+        \"ServletContextResolver cannot be instantiated with a null\"\n+        + \" ServletContext\";\n+\n     /** The SevletContext we will use to resolve paths. */\n     private ServletContext ctx = null;\n \n@@ -37,6 +43,9 @@\n      * @param ctx The ServletContext instance for this web application.\n      */\n     public ServletContextResolver(final ServletContext ctx) {\n+        if (ctx == null) {\n+            throw new IllegalArgumentException(ERR_SERVLET_CTX_NULL);\n+        }\n         this.ctx = ctx;\n     }\n ", "filename": "src/main/java/org/apache/commons/scxml/env/servlet/ServletContextResolver.java"}], "repo": "commons-scxml"}]
