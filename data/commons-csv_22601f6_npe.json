[
    {
        "repo": "commons-csv",
        "commit": "https://github.com/apache/commons-csv/commit/22601f647f2ce9a05fa4ce20ea356492c670940c",
        "bug_id": "commons-csv_22601f6",
        "message": "[CSV-100] CSVParser: getHeaderMap throws NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/csv/trunk@1524435 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-csv/commit/2b5f84ede12cfadd7946ffb07a56709b8322a02f",
        "patched_files": [
            "CSVParser.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 2,
                "raw_url": "https://github.com/apache/commons-csv/raw/22601f647f2ce9a05fa4ce20ea356492c670940c/src/main/java/org/apache/commons/csv/CSVParser.java",
                "contents_url": "https://api.github.com/repos/apache/commons-csv/contents/src/main/java/org/apache/commons/csv/CSVParser.java?ref=22601f647f2ce9a05fa4ce20ea356492c670940c",
                "filename": "src/main/java/org/apache/commons/csv/CSVParser.java",
                "deletions": 2,
                "sha": "e97a364206488144b12e663caf9086525bcb241f",
                "blob_url": "https://github.com/apache/commons-csv/blob/22601f647f2ce9a05fa4ce20ea356492c670940c/src/main/java/org/apache/commons/csv/CSVParser.java",
                "patch": "@@ -281,11 +281,11 @@ public long getCurrentLineNumber() {\n      * Returns a copy of the header map that iterates in column order.\n      * <p>\n      * The map keys are column names. The map values are 0-based indices.\n-     *\n+     * </p>\n      * @return a copy of the header map that iterates in column order.\n      */\n     public Map<String, Integer> getHeaderMap() {\n-        return new LinkedHashMap<String, Integer>(this.headerMap);\n+        return this.headerMap == null ? null : new LinkedHashMap<String, Integer>(this.headerMap);\n     }\n \n     /**",
                "changes": 4
            },
            {
                "status": "modified",
                "additions": 6,
                "raw_url": "https://github.com/apache/commons-csv/raw/22601f647f2ce9a05fa4ce20ea356492c670940c/src/test/java/org/apache/commons/csv/CSVParserTest.java",
                "contents_url": "https://api.github.com/repos/apache/commons-csv/contents/src/test/java/org/apache/commons/csv/CSVParserTest.java?ref=22601f647f2ce9a05fa4ce20ea356492c670940c",
                "filename": "src/test/java/org/apache/commons/csv/CSVParserTest.java",
                "deletions": 0,
                "sha": "18a433c07ff007fb2656ad07bc9690fc08144d0e",
                "blob_url": "https://github.com/apache/commons-csv/blob/22601f647f2ce9a05fa4ce20ea356492c670940c/src/test/java/org/apache/commons/csv/CSVParserTest.java",
                "patch": "@@ -664,6 +664,12 @@ public void testGetHeaderMap() throws Exception {\n         assertFalse(records.hasNext());\n     }\n \n+    @Test\n+    public void testNoHeaderMap() throws Exception {\n+        final CSVParser parser = CSVParser.parse(\"a,b,c\\n1,2,3\\nx,y,z\", CSVFormat.DEFAULT);\n+        Assert.assertNull(parser.getHeaderMap());\n+    }\n+\n     @Test\n     public void testGetLineNumberWithLF() throws Exception {\n         this.validateLineNumbers(String.valueOf(LF));",
                "changes": 6
            }
        ],
        "unit_tests": [
            "CSVParserTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "src/test/java/org/apache/commons/csv/CSVParserTest.java",
        "buggy_files": [
            "src/main/java/org/apache/commons/csv/CSVParser.java"
        ],
        "fixed": true
    }
]