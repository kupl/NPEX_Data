[
    {
        "repo": "portals-pluto",
        "message": "Fixed NPE by using null-safe equals check",
        "commit": "https://github.com/apache/portals-pluto/commit/afc428c5ee5733a1739d42445c682c78f8844c1f",
        "parent": "https://github.com/apache/portals-pluto/commit/0000849ea7b7e348e987576c8b05e3a01a89b1dc",
        "bug_id": "portals-pluto_1",
        "file": [
            {
                "sha": "f0122ccedd3a802a25e722bea0b199822f4a9011",
                "filename": "pluto-container/src/main/java/org/apache/pluto/container/impl/ResourceRequestImpl.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/afc428c5ee5733a1739d42445c682c78f8844c1f/pluto-container/src/main/java/org/apache/pluto/container/impl/ResourceRequestImpl.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/afc428c5ee5733a1739d42445c682c78f8844c1f/pluto-container/src/main/java/org/apache/pluto/container/impl/ResourceRequestImpl.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/java/org/apache/pluto/container/impl/ResourceRequestImpl.java?ref=afc428c5ee5733a1739d42445c682c78f8844c1f",
                "patch": "@@ -151,15 +151,15 @@ public DispatcherType getDispatcherType() {\n    \r\n    @Override\r\n    public PortletMode getPortletMode() {\r\n-      if (getCacheability().equals(ResourceURL.FULL)) {\r\n+      if (ResourceURL.FULL.equals(getCacheability())) {\r\n          return PortletMode.UNDEFINED;\r\n       }\r\n       return super.getPortletMode();\r\n    }\r\n    \r\n    @Override\r\n    public WindowState getWindowState() {\r\n-      if (getCacheability().equals(ResourceURL.FULL)) {\r\n+      if (ResourceURL.FULL.equals(getCacheability())) {\r\n          return WindowState.UNDEFINED;\r\n       }\r\n       return super.getWindowState();\r",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "Fix NullPointerException for the case, when multi values are null.\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/trunk@609912 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/1e5f7498baa9399a3778eb75810c9ae8eea00da8",
        "parent": "https://github.com/apache/portals-pluto/commit/e005855f5a8061b68120ac0ec4982900b2ef3588",
        "bug_id": "portals-pluto_2",
        "file": [
            {
                "sha": "dfcd46b7eb17dc8bd056bef42f084d43e2a052f1",
                "filename": "pluto-portal-driver-impl/src/main/java/org/apache/pluto/driver/url/impl/PortalURLParserImpl.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/1e5f7498baa9399a3778eb75810c9ae8eea00da8/pluto-portal-driver-impl/src/main/java/org/apache/pluto/driver/url/impl/PortalURLParserImpl.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/1e5f7498baa9399a3778eb75810c9ae8eea00da8/pluto-portal-driver-impl/src/main/java/org/apache/pluto/driver/url/impl/PortalURLParserImpl.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-portal-driver-impl/src/main/java/org/apache/pluto/driver/url/impl/PortalURLParserImpl.java?ref=1e5f7498baa9399a3778eb75810c9ae8eea00da8",
                "patch": "@@ -353,7 +353,8 @@ private String encodeMultiValues(String[] values) {\n     \tStringBuffer buffer = new StringBuffer();\n         for (int i = 0; i < values.length; i++) {\n         \ttry {\n-\t\t\t\tvalues[i] = URLEncoder.encode(values[i], \"UTF-8\");\n+        \t\tif (values[i] != null)\n+        \t\t\tvalues[i] = URLEncoder.encode(values[i], \"UTF-8\");\n \t\t\t} catch (UnsupportedEncodingException e) {\n \t\t\t\t// TODO Auto-generated catch block\n \t\t\t\te.printStackTrace();",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "fix NullpointerException for PortletPreferences\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/branches/1.1-286-trunk-merge@607190 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/fbb958f4ea857753d75368cee33022238300b6c5",
        "parent": "https://github.com/apache/portals-pluto/commit/62c9ef5a6d751e5cfc964081197720eef1c665fb",
        "bug_id": "portals-pluto_3",
        "file": [
            {
                "sha": "92e9d2244d0f0f85b4e4e1378b58e4efe69cb1ee",
                "filename": "pluto-container/src/main/java/org/apache/pluto/internal/impl/PortletEntityImpl.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/fbb958f4ea857753d75368cee33022238300b6c5/pluto-container/src/main/java/org/apache/pluto/internal/impl/PortletEntityImpl.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/fbb958f4ea857753d75368cee33022238300b6c5/pluto-container/src/main/java/org/apache/pluto/internal/impl/PortletEntityImpl.java",
                "status": "modified",
                "changes": 26,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/java/org/apache/pluto/internal/impl/PortletEntityImpl.java?ref=fbb958f4ea857753d75368cee33022238300b6c5",
                "patch": "@@ -122,19 +122,21 @@ public String getControllerServletUri() {\n             PortletPreferencesDD prefsDD = portletDD.getPortletPreferences();\r\n             if (prefsDD != null) {\r\n             \tList prefs = new ArrayList();\r\n-            \tfor (Iterator it = prefsDD.getPortletPreferences().iterator();\r\n-            \t\t\tit.hasNext(); ) {\r\n-            \t\tPortletPreferenceDD prefDD = (PortletPreferenceDD) it.next();\r\n-            \t\tString[] values = null;\r\n-            \t\tif (prefDD.getValues()!=null){\r\n-\t            \t\tif (prefDD.getValues().size() > 0) {\r\n-\t            \t\t\tvalues = (String[]) prefDD.getValues().toArray(\r\n-\t            \t\t\t\t\tnew String[prefDD.getValues().size()]);\r\n+            \tif (prefsDD.getPortletPreferences() != null){\r\n+\t            \tfor (Iterator it = prefsDD.getPortletPreferences().iterator();\r\n+\t            \t\t\tit.hasNext(); ) {\r\n+\t            \t\tPortletPreferenceDD prefDD = (PortletPreferenceDD) it.next();\r\n+\t            \t\tString[] values = null;\r\n+\t            \t\tif (prefDD.getValues()!=null){\r\n+\t\t            \t\tif (prefDD.getValues().size() > 0) {\r\n+\t\t            \t\t\tvalues = (String[]) prefDD.getValues().toArray(\r\n+\t\t            \t\t\t\t\tnew String[prefDD.getValues().size()]);\r\n+\t\t            \t\t}\r\n \t            \t\t}\r\n-            \t\t}\r\n-            \t\tPortletPreferenceImpl pref = new PortletPreferenceImpl(\r\n-            \t\t\t\tprefDD.getName(), values, prefDD.isReadOnly());\r\n-            \t\tprefs.add(pref);\r\n+\t            \t\tPortletPreferenceImpl pref = new PortletPreferenceImpl(\r\n+\t            \t\t\t\tprefDD.getName(), values, prefDD.isReadOnly());\r\n+\t            \t\tprefs.add(pref);\r\n+\t            \t}\r\n             \t}\r\n             \tdefaultPreferences = (InternalPortletPreference[])\r\n             \t\t\tprefs.toArray(new InternalPortletPreference[prefs.size()]);\r",
                "deletions": 12
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "Fixed NullPointerException in PortletPreferencesImpl.\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/trunk@379420 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/b4d0b5623a217dbd20decb50ca056b4252e2371a",
        "parent": "https://github.com/apache/portals-pluto/commit/58c82e1767c5b8f5d065f877740882b430c0dc7c",
        "bug_id": "portals-pluto_4",
        "file": [
            {
                "sha": "3de9836cab3310823bf28a0320920a91ed025d2e",
                "filename": "pluto-container/src/main/java/org/apache/pluto/core/PortletEntity.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/b4d0b5623a217dbd20decb50ca056b4252e2371a/pluto-container/src/main/java/org/apache/pluto/core/PortletEntity.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/b4d0b5623a217dbd20decb50ca056b4252e2371a/pluto-container/src/main/java/org/apache/pluto/core/PortletEntity.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/java/org/apache/pluto/core/PortletEntity.java?ref=b4d0b5623a217dbd20decb50ca056b4252e2371a",
                "patch": "@@ -105,7 +105,8 @@ public String getControllerServletUri() {\n      * to null (instead of an empty array).\r\n      * </p>\r\n      * <p>\r\n-     * This method never returns null.\r\n+     * This method never returns null, but the values held by PortletPreference\r\n+     * may be null.\r\n      * </p>\r\n      * @return the preference set\r\n      * \r",
                "deletions": 1
            },
            {
                "sha": "f00e15558d1578e3d9688a00d741eedec0f2fb87",
                "filename": "pluto-container/src/main/java/org/apache/pluto/core/impl/PortletPreferencesImpl.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/b4d0b5623a217dbd20decb50ca056b4252e2371a/pluto-container/src/main/java/org/apache/pluto/core/impl/PortletPreferencesImpl.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/b4d0b5623a217dbd20decb50ca056b4252e2371a/pluto-container/src/main/java/org/apache/pluto/core/impl/PortletPreferencesImpl.java",
                "status": "modified",
                "changes": 16,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/java/org/apache/pluto/core/impl/PortletPreferencesImpl.java?ref=b4d0b5623a217dbd20decb50ca056b4252e2371a",
                "patch": "@@ -79,7 +79,10 @@\n      */\r\n     private PortletPreference[] defaultPreferences = null;\r\n     \r\n-    /** Current portlet preferences. */\r\n+    /**\r\n+     * Current portlet preferences: key is the preference name as a string,\r\n+     * value is the PortletPreference instance.\r\n+     */\r\n     private Map preferences = new HashMap();\r\n \r\n     /** Current method used for managing these preferences. */\r\n@@ -203,18 +206,18 @@ public void setValue(String key, String value) throws ReadOnlyException {\n         }\r\n         PortletPreference pref = (PortletPreference) preferences.get(key);\r\n         if (pref != null) {\r\n-            pref.setValues(new String[]{value});\r\n+            pref.setValues(new String[] { value });\r\n         } else {\r\n-            pref = new PortletPreferenceImpl(key, new String[]{value});\r\n+            pref = new PortletPreferenceImpl(key, new String[] { value });\r\n             preferences.put(key, pref);\r\n         }\r\n     }\r\n \r\n     public void setValues(String key, String[] values) throws ReadOnlyException {\r\n         if (isReadOnly(key)) {\r\n-            throw new ReadOnlyException(EXCEPTIONS.getString(\"error.preference.readonly\"));\r\n+            throw new ReadOnlyException(EXCEPTIONS.getString(\r\n+            \t\t\"error.preference.readonly\"));\r\n         }\r\n-\r\n         PortletPreference pref = (PortletPreference) preferences.get(key);\r\n         if (pref != null) {\r\n             pref.setValues(values);\r\n@@ -233,7 +236,8 @@ public Map getMap() {\n         Iterator it = preferences.keySet().iterator();\r\n         while (it.hasNext()) {\r\n             PortletPreference pref = (PortletPreference) preferences.get(it.next());\r\n-            map.put(pref.getName(), pref.getValues().clone());\r\n+            map.put(pref.getName(),\r\n+                    pref.getValues() != null ? pref.getValues().clone() : null);\r\n         }\r\n         return Collections.unmodifiableMap(map);\r\n     }\r",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "[PLUTO-233]: Fixed an NPE related to PLUTO-233.  initSupportedModesService() threw an NPE because the ServletContext hasn't been initalized.\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/trunk@443130 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/65f7a9286d7097d465dc92978614ab313f9795d4",
        "parent": "https://github.com/apache/portals-pluto/commit/0b3b4fb04f37c1198f6e494421f1f529fb2b0a8b",
        "bug_id": "portals-pluto_5",
        "file": [
            {
                "sha": "f52d8c8207ec0bd4be67a258f77463e2324347ee",
                "filename": "pluto-portal-driver/src/main/java/org/apache/pluto/driver/TCKDriverServlet.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/65f7a9286d7097d465dc92978614ab313f9795d4/pluto-portal-driver/src/main/java/org/apache/pluto/driver/TCKDriverServlet.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/65f7a9286d7097d465dc92978614ab313f9795d4/pluto-portal-driver/src/main/java/org/apache/pluto/driver/TCKDriverServlet.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-portal-driver/src/main/java/org/apache/pluto/driver/TCKDriverServlet.java?ref=65f7a9286d7097d465dc92978614ab313f9795d4",
                "patch": "@@ -48,6 +48,7 @@ public String getServletInfo() {\n     }\r\n \r\n     public void init() {\r\n+        super.init();\r\n         ServletContext servletContext = getServletContext();\r\n         container = (PortletContainer) servletContext.getAttribute(\r\n                 AttributeKeys.PORTLET_CONTAINER);\r",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "PLUTO-601 Throw IOException instead of NullPointerException when passed a null InputStream to keep functionality consistent between releases.\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/trunk@1027780 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/70b0cfc86b358901cc93bbad6b79ea56f098b9b8",
        "parent": "https://github.com/apache/portals-pluto/commit/db941c8775b192f53ff58e7ee8585cade3c88517",
        "bug_id": "portals-pluto_6",
        "file": [
            {
                "sha": "09a501b7e6796735a0f3ae64bb593f2440192c04",
                "filename": "pluto-container/src/main/java/org/apache/pluto/container/impl/PortletAppDescriptorServiceImpl.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/70b0cfc86b358901cc93bbad6b79ea56f098b9b8/pluto-container/src/main/java/org/apache/pluto/container/impl/PortletAppDescriptorServiceImpl.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/70b0cfc86b358901cc93bbad6b79ea56f098b9b8/pluto-container/src/main/java/org/apache/pluto/container/impl/PortletAppDescriptorServiceImpl.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/java/org/apache/pluto/container/impl/PortletAppDescriptorServiceImpl.java?ref=70b0cfc86b358901cc93bbad6b79ea56f098b9b8",
                "patch": "@@ -199,6 +199,10 @@ public PortletAppDescriptorServiceImpl() {\n      */\n     public PortletApplicationDefinition read(String name, String contextPath, InputStream in) throws IOException \n     {\n+        if (in == null) {\n+            throw new IOException(\"Cannot read from a null InputStream\");\n+        }\n+        \n         final XMLInputFactory xmlInputFactory = getXmlInputFactory();\n         \n         //Generate an xml stream reader for the input stream ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "prevent possible NPE when no Listeners are created yet\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/branches/2.0-spi-refactoring@708171 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/d77481bcde94eb732f5ffcb8c5999031c1a2f85f",
        "parent": "https://github.com/apache/portals-pluto/commit/c93b6e80b173980c22444c52d7debdf08e1021e2",
        "bug_id": "portals-pluto_7",
        "file": [
            {
                "sha": "511741b11f5a08056a26ff3894894645ea154c3d",
                "filename": "pluto-container/src/main/java/org/apache/pluto/descriptors/portlet/PortletAppType.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/d77481bcde94eb732f5ffcb8c5999031c1a2f85f/pluto-container/src/main/java/org/apache/pluto/descriptors/portlet/PortletAppType.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/d77481bcde94eb732f5ffcb8c5999031c1a2f85f/pluto-container/src/main/java/org/apache/pluto/descriptors/portlet/PortletAppType.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/java/org/apache/pluto/descriptors/portlet/PortletAppType.java?ref=d77481bcde94eb732f5ffcb8c5999031c1a2f85f",
                "patch": "@@ -453,7 +453,7 @@ public PublicRenderParameter addPublicRenderParameter(QName qname, String identi\n     \n     public Listener addListener(String listenerClass)\n     {\n-        for (Listener l : listener)\n+        for (Listener l : getListeners())\n         {\n             if (l.getListenerClass().equals(listenerClass))\n             {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "Copied from trunk to fix NPE at pluto startup (again!!)\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/branches/1.1-286-trunk-merge@602455 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/078603ffeb3154063e069123df98c842712c9dff",
        "parent": "https://github.com/apache/portals-pluto/commit/25afdb3a20f53604a7823ab1b26801ad2452603d",
        "bug_id": "portals-pluto_8",
        "file": [
            {
                "sha": "2078fa6e170a5e4bad306bf2f8643bfe925a8a63",
                "filename": "pluto-container/src/main/resources/META-INF/pluto.properties",
                "blob_url": "https://github.com/apache/portals-pluto/blob/078603ffeb3154063e069123df98c842712c9dff/pluto-container/src/main/resources/META-INF/pluto.properties",
                "raw_url": "https://github.com/apache/portals-pluto/raw/078603ffeb3154063e069123df98c842712c9dff/pluto-container/src/main/resources/META-INF/pluto.properties",
                "status": "added",
                "changes": 37,
                "additions": 37,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/resources/META-INF/pluto.properties?ref=078603ffeb3154063e069123df98c842712c9dff",
                "patch": "@@ -0,0 +1,37 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed  under the  License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT  WARRANTIES OR CONDITIONS  OF ANY KIND, either  express  or\n+# implied.\n+#\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+######################################################################\n+\n+######################################################################\n+# Static and Low Level services required by pluto even before\n+#   the container is configured are registered within resources\n+#   named '/META-INF/pluto.properties'.  These resources are scanned\n+#   and each one is given the opportunity to provide implementations\n+#   of the following services:\n+#\n+#\n+#  org.apache.pluto.core.ApplicationIdResolver -\n+#          used to resolve servlet context names in different environments.\n+#          In a Servlet 2.5 world this is directly available at initialization\n+#          however, in 2.4 and below, it must be resolved.  Unfortunately,\n+#          different application servers do not all get resolved in the same\n+#          manner.\n+org.apache.pluto.core.ApplicationIdResolver=org.apache.pluto.core.DefaultApplicationIdResolver,\\\n+  org.apache.pluto.core.InitParameterApplicationIdResolver,\\\n+  org.apache.pluto.core.AttributeApplicationIdResolver",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "Copied from trunk to fix NPE at pluto startup\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/branches/1.1-286-trunk-merge@602446 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/2e725504c3229eebd100b27d2942d2374c4eb9c6",
        "parent": "https://github.com/apache/portals-pluto/commit/c764edf0dd3a4f48c4272ff613067e82c682c355",
        "bug_id": "portals-pluto_9",
        "file": [
            {
                "sha": "2078fa6e170a5e4bad306bf2f8643bfe925a8a63",
                "filename": "pluto-container/src/main/resources/META-INF",
                "blob_url": "https://github.com/apache/portals-pluto/blob/2e725504c3229eebd100b27d2942d2374c4eb9c6/pluto-container/src/main/resources/META-INF",
                "raw_url": "https://github.com/apache/portals-pluto/raw/2e725504c3229eebd100b27d2942d2374c4eb9c6/pluto-container/src/main/resources/META-INF",
                "status": "added",
                "changes": 37,
                "additions": 37,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/resources/META-INF?ref=2e725504c3229eebd100b27d2942d2374c4eb9c6",
                "patch": "@@ -0,0 +1,37 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed  under the  License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT  WARRANTIES OR CONDITIONS  OF ANY KIND, either  express  or\n+# implied.\n+#\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+######################################################################\n+\n+######################################################################\n+# Static and Low Level services required by pluto even before\n+#   the container is configured are registered within resources\n+#   named '/META-INF/pluto.properties'.  These resources are scanned\n+#   and each one is given the opportunity to provide implementations\n+#   of the following services:\n+#\n+#\n+#  org.apache.pluto.core.ApplicationIdResolver -\n+#          used to resolve servlet context names in different environments.\n+#          In a Servlet 2.5 world this is directly available at initialization\n+#          however, in 2.4 and below, it must be resolved.  Unfortunately,\n+#          different application servers do not all get resolved in the same\n+#          manner.\n+org.apache.pluto.core.ApplicationIdResolver=org.apache.pluto.core.DefaultApplicationIdResolver,\\\n+  org.apache.pluto.core.InitParameterApplicationIdResolver,\\\n+  org.apache.pluto.core.AttributeApplicationIdResolver",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "Copied from trunk to fix NPE at pluto startup\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/branches/1.1-286-trunk-merge@602444 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/3fd8e77ba008368fcbb2afa99e00388895924ce9",
        "parent": "https://github.com/apache/portals-pluto/commit/abe4fead029df5ce0256ed94b3980373be7893e7",
        "bug_id": "portals-pluto_10",
        "file": [
            {
                "sha": "2078fa6e170a5e4bad306bf2f8643bfe925a8a63",
                "filename": "pluto-container/src/main/resources/pluto.properties",
                "blob_url": "https://github.com/apache/portals-pluto/blob/3fd8e77ba008368fcbb2afa99e00388895924ce9/pluto-container/src/main/resources/pluto.properties",
                "raw_url": "https://github.com/apache/portals-pluto/raw/3fd8e77ba008368fcbb2afa99e00388895924ce9/pluto-container/src/main/resources/pluto.properties",
                "status": "added",
                "changes": 37,
                "additions": 37,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/resources/pluto.properties?ref=3fd8e77ba008368fcbb2afa99e00388895924ce9",
                "patch": "@@ -0,0 +1,37 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed  under the  License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT  WARRANTIES OR CONDITIONS  OF ANY KIND, either  express  or\n+# implied.\n+#\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+######################################################################\n+\n+######################################################################\n+# Static and Low Level services required by pluto even before\n+#   the container is configured are registered within resources\n+#   named '/META-INF/pluto.properties'.  These resources are scanned\n+#   and each one is given the opportunity to provide implementations\n+#   of the following services:\n+#\n+#\n+#  org.apache.pluto.core.ApplicationIdResolver -\n+#          used to resolve servlet context names in different environments.\n+#          In a Servlet 2.5 world this is directly available at initialization\n+#          however, in 2.4 and below, it must be resolved.  Unfortunately,\n+#          different application servers do not all get resolved in the same\n+#          manner.\n+org.apache.pluto.core.ApplicationIdResolver=org.apache.pluto.core.DefaultApplicationIdResolver,\\\n+  org.apache.pluto.core.InitParameterApplicationIdResolver,\\\n+  org.apache.pluto.core.AttributeApplicationIdResolver",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "PLUTO-481 - Pluto 2.0 Refactoring Initiative\nSee: http://issues.apache.org/jira/browse/PLUTO-481\nSeveral small fixes:\n- NPE in PortletPreferencesImpl when no Validator is defined\n- Synchronizing on PortletServlet registration/destroy\n- another JSP tag attribute encoding issue (Tomcat really is not allowing these errors anymore)\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/branches/2.0-spi-refactoring@709513 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/4f185a566e10eeff6e3b9b8cff7ff9c0c1468776",
        "parent": "https://github.com/apache/portals-pluto/commit/729a195295b9fccf779aaceed3a9dc3df3b13e0e",
        "bug_id": "portals-pluto_11",
        "file": [
            {
                "sha": "5c775d2e090c82407eca1c664ceab63fe35d289d",
                "filename": "pluto-container-api/src/main/java/org/apache/pluto/core/PortletServlet.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/4f185a566e10eeff6e3b9b8cff7ff9c0c1468776/pluto-container-api/src/main/java/org/apache/pluto/core/PortletServlet.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/4f185a566e10eeff6e3b9b8cff7ff9c0c1468776/pluto-container-api/src/main/java/org/apache/pluto/core/PortletServlet.java",
                "status": "modified",
                "changes": 40,
                "additions": 23,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container-api/src/main/java/org/apache/pluto/core/PortletServlet.java?ref=4f185a566e10eeff6e3b9b8cff7ff9c0c1468776",
                "patch": "@@ -136,12 +136,15 @@ public void init(ServletConfig config) throws ServletException\n         {\n             public void run()\n             {\n-                if (startTimer != null)\n+                synchronized(servletContext)\n                 {\n-                    if (attemptRegistration(servletContext, paClassLoader ))\n+                    if (startTimer != null)\n                     {\n-                        startTimer.cancel();\n-                        startTimer = null;\n+                        if (attemptRegistration(servletContext, paClassLoader ))\n+                        {\n+                            startTimer.cancel();\n+                            startTimer = null;\n+                        }\n                     }\n                 }\n             }\n@@ -198,21 +201,24 @@ protected boolean attemptRegistration(ServletContext context, ClassLoader paClas\n \n     public void destroy()\n     {\n-        if ( startTimer != null )\n+        synchronized(getServletContext())\n         {\n-          startTimer.cancel();\n-          startTimer = null;\n-        }\n-        else if ( started )\n-        {\n-          started = false;\n-          registryService.unregister(portletContext);\n-          if (portlet != null)\n-          {\n-              portlet.destroy();\n-          }\n+            if ( startTimer != null )\n+            {\n+              startTimer.cancel();\n+              startTimer = null;\n+            }\n+            else if ( started && portletContext != null)\n+            {\n+              started = false;\n+              contextService.unregister(portletContext);\n+              if (portlet != null)\n+              {\n+                  portlet.destroy();\n+              }\n+            }\n+            super.destroy();\n         }\n-        super.destroy();\n     }\n \n     protected void doGet(HttpServletRequest request,",
                "deletions": 17
            },
            {
                "sha": "db61fa668d9e27f63254ec5cad74374b13422ef4",
                "filename": "pluto-container/src/main/java/org/apache/pluto/internal/impl/PortletPreferencesImpl.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/4f185a566e10eeff6e3b9b8cff7ff9c0c1468776/pluto-container/src/main/java/org/apache/pluto/internal/impl/PortletPreferencesImpl.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/4f185a566e10eeff6e3b9b8cff7ff9c0c1468776/pluto-container/src/main/java/org/apache/pluto/internal/impl/PortletPreferencesImpl.java",
                "status": "modified",
                "changes": 7,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-container/src/main/java/org/apache/pluto/internal/impl/PortletPreferencesImpl.java?ref=4f185a566e10eeff6e3b9b8cff7ff9c0c1468776",
                "patch": "@@ -24,6 +24,7 @@\n import java.util.Vector;\n \n import javax.portlet.PortletPreferences;\n+import javax.portlet.PreferencesValidator;\n import javax.portlet.ReadOnlyException;\n import javax.portlet.ValidatorException;\n \n@@ -274,7 +275,11 @@ protected final void internalStore() throws IOException, ValidatorException {\n         //   If the preferences cannot pass the validation,\n         //   an ValidatorException will be thrown out.\n         PortletDefinition portletD = window.getPortletEntity().getPortletDefinition();\n-       \tpreferencesService.getPreferencesValidator(portletD).validate(this);\n+        PreferencesValidator validator = preferencesService.getPreferencesValidator(portletD);\n+        if (validator != null)\n+        {\n+            validator.validate(this);\n+        }\n         // Store the portlet preferences.\n         try {\n         \tpreferencesService.store(window, request, preferences);",
                "deletions": 1
            },
            {
                "sha": "082c6ea9eeca4825176e44228cd1177d74e8c1ae",
                "filename": "pluto-portal/src/main/webapp/WEB-INF/themes/portlet-skin.jsp",
                "blob_url": "https://github.com/apache/portals-pluto/blob/4f185a566e10eeff6e3b9b8cff7ff9c0c1468776/pluto-portal/src/main/webapp/WEB-INF/themes/portlet-skin.jsp",
                "raw_url": "https://github.com/apache/portals-pluto/raw/4f185a566e10eeff6e3b9b8cff7ff9c0c1468776/pluto-portal/src/main/webapp/WEB-INF/themes/portlet-skin.jsp",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/pluto-portal/src/main/webapp/WEB-INF/themes/portlet-skin.jsp?ref=4f185a566e10eeff6e3b9b8cff7ff9c0c1468776",
                "patch": "@@ -35,9 +35,9 @@ limitations under the License.\n \t      <pluto:modeDropDown />\n \t\n \t      <!-- Window State Controls -->\n-\t      <pluto:windowStateAnchor windowState=\"minimized\" icon=\"<%= request.getContextPath() + \"/images/controls/min.png\"%>\" />\n-\t      <pluto:windowStateAnchor windowState=\"maximized\" icon=\"<%= request.getContextPath() + \"/images/controls/max.png\"%>\" />\n-\t      <pluto:windowStateAnchor windowState=\"normal\" icon=\"<%= request.getContextPath() + \"/images/controls/norm.png\"%>\" />\n+\t      <pluto:windowStateAnchor windowState=\"minimized\" icon='<%= request.getContextPath() + \"/images/controls/min.png\"%>' />\n+\t      <pluto:windowStateAnchor windowState=\"maximized\" icon='<%= request.getContextPath() + \"/images/controls/max.png\"%>' />\n+\t      <pluto:windowStateAnchor windowState=\"normal\" icon='<%= request.getContextPath() + \"/images/controls/norm.png\"%>' />\n     \t</td>\n     \t</tr>\n     </table>",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "portals-pluto",
        "message": "found this bug in J2, was causing Tomcat to NPE\n\nPR:\nObtained from:\nSubmitted by:\t\nReviewed by:\t\nCVS: ----------------------------------------------------------------------\nCVS: PR:\nCVS:   If this change addresses a PR in the problem report tracking\nCVS:   database, then enter the PR number(s) here.\nCVS: Obtained from:\nCVS:   If this change has been taken from another system, such as NCSA,\nCVS:   then name the system in this line, otherwise delete it.\nCVS: Submitted by:\nCVS:   If this code has been contributed to Apache by someone else; i.e.,\nCVS:   they sent us a patch or a new module, then include their name/email\nCVS:   address here. If this is your work then delete this line.\nCVS: Reviewed by:\nCVS:   If we are doing pre-commit code reviews and someone else has\nCVS:   reviewed your changes, include their name(s) here.\nCVS:   If you have not had it reviewed then delete this line.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/portals/pluto/trunk@35962 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/portals-pluto/commit/43fda8a0f484e361668bd0bf7d4f798159130620",
        "parent": "https://github.com/apache/portals-pluto/commit/34b5a8dc1c4756876bd21801e0558c12c4d8d710",
        "bug_id": "portals-pluto_12",
        "file": [
            {
                "sha": "57a6d338674fb6f7a8aa9fd99de3e4f1ffdc7c31",
                "filename": "portal/src/java/org/apache/pluto/portalImpl/core/PortalURL.java",
                "blob_url": "https://github.com/apache/portals-pluto/blob/43fda8a0f484e361668bd0bf7d4f798159130620/portal/src/java/org/apache/pluto/portalImpl/core/PortalURL.java",
                "raw_url": "https://github.com/apache/portals-pluto/raw/43fda8a0f484e361668bd0bf7d4f798159130620/portal/src/java/org/apache/pluto/portalImpl/core/PortalURL.java",
                "status": "modified",
                "changes": 7,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/portals-pluto/contents/portal/src/java/org/apache/pluto/portalImpl/core/PortalURL.java?ref=43fda8a0f484e361668bd0bf7d4f798159130620",
                "patch": "@@ -370,9 +370,10 @@ void analyzeRequestInformation()\n         // check the complete pathInfo for\n         // * navigational information\n         // * control information\n-        String pathInfo = environment.getRequest().getPathInfo();\n-\n-        if (pathInfo != null) {\n+        \n+        if (environment.getRequest().getPathInfo() != null) \n+        {\n+            String pathInfo = new String(environment.getRequest().getPathInfo());\n             StringTokenizer tokenizer = new StringTokenizer(pathInfo, \"/.\");\n \n             int mode = 0; // 0=navigation, 1=control information",
                "deletions": 3
            }
        ]
    }
]