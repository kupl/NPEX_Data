{
    "incubator-heron_2a1cf77": {
        "bug_id": "incubator-heron_2a1cf77",
        "commit": "https://github.com/apache/incubator-heron/commit/2a1cf77759d06791cb47a7c9845ccd5171d684b0",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/incubator-heron/blob/2a1cf77759d06791cb47a7c9845ccd5171d684b0/heron/scheduler-core/src/java/com/twitter/heron/scheduler/SubmitterMain.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/incubator-heron/contents/heron/scheduler-core/src/java/com/twitter/heron/scheduler/SubmitterMain.java?ref=2a1cf77759d06791cb47a7c9845ccd5171d684b0",
                "deletions": 3,
                "filename": "heron/scheduler-core/src/java/com/twitter/heron/scheduler/SubmitterMain.java",
                "patch": "@@ -425,6 +425,9 @@ public void submitTopology() throws TopologySubmissionException {\n       // initialize the state manager\n       statemgr.initialize(config);\n \n+      // initialize the uploader\n+      uploader.initialize(config);\n+\n       // TODO(mfu): timeout should read from config\n       SchedulerStateManagerAdaptor adaptor = new SchedulerStateManagerAdaptor(statemgr, 5000);\n \n@@ -544,9 +547,6 @@ protected void validateSubmit(SchedulerStateManagerAdaptor adaptor, String topol\n   }\n \n   protected URI uploadPackage(IUploader uploader) throws UploaderException {\n-    // initialize the uploader\n-    uploader.initialize(config);\n-\n     // upload the topology package to the storage\n     return uploader.uploadPackage();\n   }",
                "raw_url": "https://github.com/apache/incubator-heron/raw/2a1cf77759d06791cb47a7c9845ccd5171d684b0/heron/scheduler-core/src/java/com/twitter/heron/scheduler/SubmitterMain.java",
                "sha": "e2121650abc7aa4e75ff970f5c96395ead2e2dc8",
                "status": "modified"
            }
        ],
        "message": "Move uploader init above PackingPlan creation to fix NPE in case of bad PackingPlan (#2083)",
        "parent": "https://github.com/apache/incubator-heron/commit/68d8d0e494cafb1117fff6080a92774744fefcbe",
        "repo": "incubator-heron",
        "unit_tests": [
            "SubmitterMainTest.java"
        ]
    },
    "incubator-heron_414969c": {
        "bug_id": "incubator-heron_414969c",
        "commit": "https://github.com/apache/incubator-heron/commit/414969ce8342b3aadff1fae8674f507ef2bd881c",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/incubator-heron/blob/414969ce8342b3aadff1fae8674f507ef2bd881c/heron/schedulers/src/java/com/twitter/heron/scheduler/marathon/MarathonController.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/incubator-heron/contents/heron/schedulers/src/java/com/twitter/heron/scheduler/marathon/MarathonController.java?ref=414969ce8342b3aadff1fae8674f507ef2bd881c",
                "deletions": 1,
                "filename": "heron/schedulers/src/java/com/twitter/heron/scheduler/marathon/MarathonController.java",
                "patch": "@@ -45,7 +45,8 @@ public MarathonController(\n    */\n   public boolean killTopology() {\n     // Setup Connection\n-    String topologyURI = String.format(\"%s/v2/groups/%s\", this.marathonURI, this.topologyName);\n+    String topologyURI = String.format(\"%s/v2/groups/%s?force=true\",\n+        this.marathonURI, this.topologyName);\n     HttpURLConnection conn = NetworkUtils.getHttpConnection(topologyURI);\n \n     // Attach a token if there is one specified",
                "raw_url": "https://github.com/apache/incubator-heron/raw/414969ce8342b3aadff1fae8674f507ef2bd881c/heron/schedulers/src/java/com/twitter/heron/scheduler/marathon/MarathonController.java",
                "sha": "31c9baa1f6191b102b75758cc05f0bb42a38fba9",
                "status": "modified"
            }
        ],
        "message": "Force destroy Marathon group on topology kill (#2168)\n\n* Move uploader init above PackingPlan creation to fix NPE in case of bad PackingPlan\r\n\r\n* Alwayse use force=true on marathon group deletes\r\n\r\n* Fix style issues",
        "parent": "https://github.com/apache/incubator-heron/commit/e62daed32e823996b8c08beb5fba9a4b89e708ac",
        "repo": "incubator-heron",
        "unit_tests": [
            "MarathonControllerTest.java"
        ]
    },
    "incubator-heron_62e940e": {
        "bug_id": "incubator-heron_62e940e",
        "commit": "https://github.com/apache/incubator-heron/commit/62e940e0924a808f7a3c6dd71e101297f89e9b96",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/incubator-heron/blob/62e940e0924a808f7a3c6dd71e101297f89e9b96/heron/instance/src/java/com/twitter/heron/instance/bolt/BoltInstance.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/incubator-heron/contents/heron/instance/src/java/com/twitter/heron/instance/bolt/BoltInstance.java?ref=62e940e0924a808f7a3c6dd71e101297f89e9b96",
                "deletions": 1,
                "filename": "heron/instance/src/java/com/twitter/heron/instance/bolt/BoltInstance.java",
                "patch": "@@ -42,7 +42,7 @@\n \n public class BoltInstance implements IInstance {\n \n-  protected final PhysicalPlanHelper helper;\n+  protected PhysicalPlanHelper helper;\n   protected final IBolt bolt;\n   protected final BoltOutputCollectorImpl collector;\n   protected final IPluggableSerializer serializer;\n@@ -99,6 +99,11 @@ public void update(PhysicalPlanHelper physicalPlanHelper) {\n       ((IUpdatable) bolt).update(physicalPlanHelper.getTopologyContext());\n     }\n     collector.updatePhysicalPlanHelper(physicalPlanHelper);\n+\n+    // Re-prepare the CustomStreamGrouping since the downstream tasks can change\n+    physicalPlanHelper.prepareForCustomStreamGrouping();\n+    // Reset the helper\n+    helper = physicalPlanHelper;\n   }\n \n   @Override",
                "raw_url": "https://github.com/apache/incubator-heron/raw/62e940e0924a808f7a3c6dd71e101297f89e9b96/heron/instance/src/java/com/twitter/heron/instance/bolt/BoltInstance.java",
                "sha": "1840c0349120b9646dc3a061a3815a3e597390d9",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/incubator-heron/blob/62e940e0924a808f7a3c6dd71e101297f89e9b96/heron/instance/src/java/com/twitter/heron/instance/spout/SpoutInstance.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/incubator-heron/contents/heron/instance/src/java/com/twitter/heron/instance/spout/SpoutInstance.java?ref=62e940e0924a808f7a3c6dd71e101297f89e9b96",
                "deletions": 0,
                "filename": "heron/instance/src/java/com/twitter/heron/instance/spout/SpoutInstance.java",
                "patch": "@@ -117,6 +117,11 @@ public void update(PhysicalPlanHelper physicalPlanHelper) {\n       ((IUpdatable) spout).update(physicalPlanHelper.getTopologyContext());\n     }\n     collector.updatePhysicalPlanHelper(physicalPlanHelper);\n+\n+    // Re-prepare the CustomStreamGrouping since the downstream tasks can change\n+    physicalPlanHelper.prepareForCustomStreamGrouping();\n+    // Reset the helper\n+    helper = physicalPlanHelper;\n   }\n \n   @Override",
                "raw_url": "https://github.com/apache/incubator-heron/raw/62e940e0924a808f7a3c6dd71e101297f89e9b96/heron/instance/src/java/com/twitter/heron/instance/spout/SpoutInstance.java",
                "sha": "b3e1660875ab6e4c6536f3c55fd367748aa2540c",
                "status": "modified"
            }
        ],
        "message": "Fixes NPE in CustomGrouping (#1804)",
        "parent": "https://github.com/apache/incubator-heron/commit/2ece5a91b0587d1beb31ed4743b0fbca561a42b2",
        "repo": "incubator-heron",
        "unit_tests": [
            "SpoutInstanceTest.java"
        ]
    }
}