{
    "tapestry3_0052de7": {
        "bug_id": "tapestry3_0052de7",
        "commit": "https://github.com/apache/tapestry3/commit/0052de79ef91790bb2fab38d237f48e46036455e",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tapestry3/blob/0052de79ef91790bb2fab38d237f48e46036455e/framework/src/org/apache/tapestry/valid/ValidationDelegate.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tapestry3/contents/framework/src/org/apache/tapestry/valid/ValidationDelegate.java?ref=0052de79ef91790bb2fab38d237f48e46036455e",
                "deletions": 1,
                "filename": "framework/src/org/apache/tapestry/valid/ValidationDelegate.java",
                "patch": "@@ -262,7 +262,7 @@ protected FieldTracking findCurrentTracking()\n         if (_trackingMap == null)\n             _trackingMap = new HashMap();\n \n-        if (_currentComponent == null)\n+        if (_currentComponent == null || _currentComponent.getName() == null)\n         {\n             result = new FieldTracking();\n ",
                "raw_url": "https://github.com/apache/tapestry3/raw/0052de79ef91790bb2fab38d237f48e46036455e/framework/src/org/apache/tapestry/valid/ValidationDelegate.java",
                "sha": "986bdb0248d0e026853a302b6894507847f399d6",
                "status": "modified"
            },
            {
                "additions": 28,
                "blob_url": "https://github.com/apache/tapestry3/blob/0052de79ef91790bb2fab38d237f48e46036455e/junit/src/org/apache/tapestry/junit/valid/TestValidationDelegate.java",
                "changes": 29,
                "contents_url": "https://api.github.com/repos/apache/tapestry3/contents/junit/src/org/apache/tapestry/junit/valid/TestValidationDelegate.java?ref=0052de79ef91790bb2fab38d237f48e46036455e",
                "deletions": 1,
                "filename": "junit/src/org/apache/tapestry/junit/valid/TestValidationDelegate.java",
                "patch": "@@ -30,7 +30,6 @@\n  * \n  *\n  *  @author Howard Lewis Ship\n- *  @version $Id$\n  *  @since 1.0.8\n  *\n  **/\n@@ -165,6 +164,34 @@ public void testUnassociatedErrors()\n         assertEquals(1, trackings.size());\n         assertEquals(t0, trackings.get(0));\n     }\n+    \n+\t/**\n+\t * In rare cases, you may add errors even though the page hasn't rendered and that's\n+\t * was causing a NPE.\n+\t */\n+    public void testComponentNotRecorded()\n+    {\n+    \t// This mock field neaver rendered, so it does not have a Form-assigned name.\n+    \t\n+\t\tIFormComponent f = new MockField(null);\n+\t\t\n+\t\td.setFormComponent(f);\n+\t\td.record(\"Never rendered.\", ValidationConstraint.CONSISTENCY);\n+\t\t\n+\t\tassertEquals(true, d.getHasErrors());\n+\t\t\n+\t\tList fieldTracking = d.getFieldTracking();\n+\t\tassertEquals(1, fieldTracking.size());\n+\t\t\n+\t\tList trackings = d.getUnassociatedTrackings();\n+\t\tassertEquals(1, trackings.size());\n+\t\t\n+\t\tIFieldTracking t = (IFieldTracking)trackings.get(0);\n+\t\t\n+\t\tassertEquals(null, t.getComponent());\n+\t\tassertEquals(true, t.isInError());\n+\t\tcheckRender(\"Never rendered.\", t);\n+    }\n \n     private void checkRender(String errorMessage, IFieldTracking tracking)\n     {",
                "raw_url": "https://github.com/apache/tapestry3/raw/0052de79ef91790bb2fab38d237f48e46036455e/junit/src/org/apache/tapestry/junit/valid/TestValidationDelegate.java",
                "sha": "51843bfab98c3027a585abfd085bc22170a3220e",
                "status": "modified"
            },
            {
                "additions": 8,
                "blob_url": "https://github.com/apache/tapestry3/blob/0052de79ef91790bb2fab38d237f48e46036455e/status.xml",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/tapestry3/contents/status.xml?ref=0052de79ef91790bb2fab38d237f48e46036455e",
                "deletions": 0,
                "filename": "status.xml",
                "patch": "@@ -254,6 +254,14 @@ NextGen) be released as version number 3.0.\n       Ensure that the page's requestCycle property is set before finishLoad() is invoked on any component.\n     </action>\n     \n+    <action type=\"update\" dev=\"HLS\">\n+      Make IMessages smartly expand exceptions into their message, or their class name.\n+    </action>\n+    \n+    <action type=\"fix\" dev=\"HLS\" fixes-bug=\"29871\">\n+      Fix NPE in ValidationDelegate when the form has errors recorded for fields that did not render.\n+    </action>\n+    \n   </release>\t\n    \n  \t<release version=\"3.0\" date=\"Apr 18 2004\">",
                "raw_url": "https://github.com/apache/tapestry3/raw/0052de79ef91790bb2fab38d237f48e46036455e/status.xml",
                "sha": "9e7cd6be3890db47883a8f2c5c88fee1b3983a35",
                "status": "modified"
            }
        ],
        "message": "[29871] Fix NPE in ValidationDelegate when the form has errors recorded for fields that did not render.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/tapestry/branches/branch-3-0@243926 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/tapestry3/commit/9f6cb54118d084f48964c8595ce38d7c0c80a488",
        "patched_files": [
            "status.xml",
            "ValidationDelegate.java"
        ],
        "repo": "tapestry3",
        "unit_tests": [
            "TestValidationDelegate.java"
        ]
    },
    "tapestry3_268a857": {
        "bug_id": "tapestry3_268a857",
        "commit": "https://github.com/apache/tapestry3/commit/268a85714cc64daa2d50582c9632ae0889eda3bc",
        "file": [
            {
                "additions": 8,
                "blob_url": "https://github.com/apache/tapestry3/blob/268a85714cc64daa2d50582c9632ae0889eda3bc/framework/src/org/apache/tapestry/valid/ValidationDelegate.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/tapestry3/contents/framework/src/org/apache/tapestry/valid/ValidationDelegate.java?ref=268a85714cc64daa2d50582c9632ae0889eda3bc",
                "deletions": 1,
                "filename": "framework/src/org/apache/tapestry/valid/ValidationDelegate.java",
                "patch": "@@ -62,6 +62,7 @@\n import java.util.List;\n import java.util.Map;\n \n+import org.apache.tapestry.IForm;\n import org.apache.tapestry.IMarkupWriter;\n import org.apache.tapestry.IRender;\n import org.apache.tapestry.IRequestCycle;\n@@ -432,7 +433,13 @@ protected boolean isInError(IFormComponent component)\n         if (_trackingMap == null)\n             return false;\n \n-        String formName = component.getForm().getName();\n+        IForm form = component.getForm();\n+        // if there is no form, the component cannot have been rewound or rendered into a form yet\n+        // so assume it cannot have errors.\n+        if (form == null)\n+            return false;\n+        \n+        String formName = form.getName();\n         Map formMap = (Map) _trackingMap.get(formName);\n \n         if (formMap == null)",
                "raw_url": "https://github.com/apache/tapestry3/raw/268a85714cc64daa2d50582c9632ae0889eda3bc/framework/src/org/apache/tapestry/valid/ValidationDelegate.java",
                "sha": "8d015a18c84ac319a80cbb11c1584bbfc8a67000",
                "status": "modified"
            }
        ],
        "message": "[ 25585 ] ValidationDelegate throws NPE for some new FieldLabel/ValidField\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/tapestry/trunk@243678 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/tapestry3/commit/142eefacf6a50f9cd30f4b9efa69ef16a673b466",
        "patched_files": [
            "ValidationDelegate.java"
        ],
        "repo": "tapestry3",
        "unit_tests": [
            "TestValidationDelegate.java"
        ]
    },
    "tapestry3_909723a": {
        "bug_id": "tapestry3_909723a",
        "commit": "https://github.com/apache/tapestry3/commit/909723a2759dc41524d42e1563ddcad2655b1281",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tapestry3/blob/909723a2759dc41524d42e1563ddcad2655b1281/framework/src/org/apache/tapestry/valid/PatternValidator.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tapestry3/contents/framework/src/org/apache/tapestry/valid/PatternValidator.java?ref=909723a2759dc41524d42e1563ddcad2655b1281",
                "deletions": 1,
                "filename": "framework/src/org/apache/tapestry/valid/PatternValidator.java",
                "patch": "@@ -291,6 +291,6 @@ public String toString()\n             + \"; Script Path: \"\n             + _scriptPath\n             + \"; Pattern Delegate: \"\n-            + _patternDelegate.toString();\n+            + _patternDelegate;\n     }\n }",
                "raw_url": "https://github.com/apache/tapestry3/raw/909723a2759dc41524d42e1563ddcad2655b1281/framework/src/org/apache/tapestry/valid/PatternValidator.java",
                "sha": "98b8eadd2a675caf78b833494411ce0c16efdc9a",
                "status": "modified"
            }
        ],
        "message": "Fixed Bug: 26599; NPE in toString() reported by Michael.Frericks@sparkassen-informatik.de\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/tapestry/trunk@243762 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/tapestry3/commit/528d4e2cb9db38f43a61e07d213d15624dd943aa",
        "patched_files": [
            "PatternValidator.java"
        ],
        "repo": "tapestry3",
        "unit_tests": [
            "TestPatternValidator.java"
        ]
    }
}