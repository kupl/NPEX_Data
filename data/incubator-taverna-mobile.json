{
    "incubator-taverna-mobile_725a5e2": {
        "bug_id": "incubator-taverna-mobile_725a5e2",
        "commit": "https://github.com/apache/incubator-taverna-mobile/commit/725a5e2c4576f5ffafc21b62c3dd600ec7cd939c",
        "file": [
            {
                "additions": 20,
                "blob_url": "https://github.com/apache/incubator-taverna-mobile/blob/725a5e2c4576f5ffafc21b62c3dd600ec7cd939c/app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementFragment.java",
                "changes": 32,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-mobile/contents/app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementFragment.java?ref=725a5e2c4576f5ffafc21b62c3dd600ec7cd939c",
                "deletions": 12,
                "filename": "app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementFragment.java",
                "patch": "@@ -83,9 +83,11 @@\n \n     @Override\n     public void onItemClick(View childView, int position) {\n-        showWaitProgress(true);\n-        mAnnouncementPresenter.loadAnnouncementDetails(mAnnouncements.getAnnouncement().get\n-                (position).getId());\n+        if (mAnnouncements.getAnnouncement().get(position) != null && position != -1) {\n+            showWaitProgress(true);\n+            mAnnouncementPresenter.loadAnnouncementDetails(mAnnouncements.getAnnouncement()\n+                    .get(position).getId());\n+        }\n     }\n \n     @Override\n@@ -132,7 +134,7 @@ public void onRefresh() {\n                     }\n                 } else {\n                     Log.i(LOG_TAG, \"NO Internet Connection\");\n-                    showErrorSnackBar();\n+                    showSnackBar(R.string.no_internet_connection);\n                     if (mSwipeRefresh.isRefreshing()) {\n                         mSwipeRefresh.setRefreshing(false);\n                     }\n@@ -144,7 +146,7 @@ public void onRefresh() {\n         showProgressbar(true);\n         mAnnouncementPresenter.loadAllAnnouncement(mPageNumber);\n \n-        mRecyclerView.setOnScrollListener(new EndlessRecyclerOnScrollListener(layoutManager) {\n+        mRecyclerView.addOnScrollListener(new EndlessRecyclerOnScrollListener(layoutManager) {\n             @Override\n             public void onLoadMore(int current_page) {\n \n@@ -157,7 +159,7 @@ public void onLoadMore(int current_page) {\n                     Log.i(LOG_TAG, \"Loading more\");\n                 } else {\n                     Log.i(LOG_TAG, \"Internet not available. Not loading more posts.\");\n-                    showErrorSnackBar();\n+                    showSnackBar(R.string.no_internet_connection);\n                 }\n             }\n         });\n@@ -172,13 +174,13 @@ public void onDestroyView() {\n \n \n     @Override\n-    public void showAllAnouncement(Announcements announcements) {\n+    public void showAllAnnouncement(Announcements announcements) {\n         if (mPageNumber == 1) {\n             mAnnouncements = announcements;\n             mAnnouncementAdapter = new AnnouncementAdapter(mAnnouncements.getAnnouncement());\n             mRecyclerView.setAdapter(mAnnouncementAdapter);\n         } else {\n-            mAnnouncements.getAnnouncement().remove(mAnnouncements.getAnnouncement().size() - 1);\n+            removeLoadMoreProgressBar();\n             mAnnouncements.getAnnouncement().addAll(announcements.getAnnouncement());\n         }\n \n@@ -189,6 +191,12 @@ public void showAllAnouncement(Announcements announcements) {\n         }\n     }\n \n+    @Override\n+    public void removeLoadMoreProgressBar() {\n+        mAnnouncements.getAnnouncement().remove(mAnnouncements.getAnnouncement().size() - 1);\n+        mAnnouncementAdapter.notifyDataSetChanged();\n+    }\n+\n     @Override\n     public void showProgressbar(boolean status) {\n         if (status) {\n@@ -229,10 +237,10 @@ public void onResume() {\n         super.onResume();\n     }\n \n-    public void showErrorSnackBar() {\n-        final Snackbar snackbar = Snackbar.make(mRecyclerView, \"No Internet Connection\", Snackbar\n-                .LENGTH_LONG);\n-        snackbar.setAction(\"OK\", new View.OnClickListener() {\n+    @Override\n+    public void showSnackBar(int message) {\n+        final Snackbar snackbar = Snackbar.make(mRecyclerView, message, Snackbar.LENGTH_LONG);\n+        snackbar.setAction(getResources().getString(R.string.ok), new View.OnClickListener() {\n             @Override\n             public void onClick(View view) {\n                 snackbar.dismiss();",
                "raw_url": "https://github.com/apache/incubator-taverna-mobile/raw/725a5e2c4576f5ffafc21b62c3dd600ec7cd939c/app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementFragment.java",
                "sha": "4b33f527a31e1e323129a0ddb4b5206507da711b",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/incubator-taverna-mobile/blob/725a5e2c4576f5ffafc21b62c3dd600ec7cd939c/app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementMvpView.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-mobile/contents/app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementMvpView.java?ref=725a5e2c4576f5ffafc21b62c3dd600ec7cd939c",
                "deletions": 2,
                "filename": "app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementMvpView.java",
                "patch": "@@ -25,11 +25,13 @@\n \n public interface AnnouncementMvpView extends MvpView {\n \n-    void showAllAnouncement(Announcements announcements);\n+    void showAllAnnouncement(Announcements announcements);\n+\n+    void removeLoadMoreProgressBar();\n \n     void showProgressbar(boolean b);\n \n-    void showErrorSnackBar();\n+    void showSnackBar(int message);\n \n     void showWaitProgress(boolean b);\n ",
                "raw_url": "https://github.com/apache/incubator-taverna-mobile/raw/725a5e2c4576f5ffafc21b62c3dd600ec7cd939c/app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementMvpView.java",
                "sha": "4a534bd22cea4e4d4e179e13221afaa7ccce9766",
                "status": "modified"
            },
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/incubator-taverna-mobile/blob/725a5e2c4576f5ffafc21b62c3dd600ec7cd939c/app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementPresenter.java",
                "changes": 18,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-mobile/contents/app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementPresenter.java?ref=725a5e2c4576f5ffafc21b62c3dd600ec7cd939c",
                "deletions": 7,
                "filename": "app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementPresenter.java",
                "patch": "@@ -18,13 +18,14 @@\n  */\n package org.apache.taverna.mobile.ui.anouncements;\n \n+import android.util.Log;\n+\n+import org.apache.taverna.mobile.R;\n import org.apache.taverna.mobile.data.DataManager;\n import org.apache.taverna.mobile.data.model.Announcements;\n import org.apache.taverna.mobile.data.model.DetailAnnouncement;\n import org.apache.taverna.mobile.ui.base.BasePresenter;\n \n-import android.util.Log;\n-\n import rx.Observer;\n import rx.android.schedulers.AndroidSchedulers;\n import rx.schedulers.Schedulers;\n@@ -68,15 +69,18 @@ public void onCompleted() {\n \n                     @Override\n                     public void onError(Throwable e) {\n-//                        Log.d(LOG_TAG,e.getMessage());\n                         getMvpView().showProgressbar(false);\n-                        getMvpView().showErrorSnackBar();\n+                        getMvpView().showSnackBar(R.string.failed_to_fetch_announcement);\n                     }\n \n                     @Override\n                     public void onNext(Announcements announcement) {\n-                        getMvpView().showAllAnouncement(announcement);\n-                        Log.d(LOG_TAG, announcement.getAnnouncement().get(1).getResource());\n+                        if (announcement.getAnnouncement() != null) {\n+                            getMvpView().showAllAnnouncement(announcement);\n+                        } else {\n+                            getMvpView().showSnackBar(R.string.no_more_announcement_available);\n+                            getMvpView().removeLoadMoreProgressBar();\n+                        }\n                     }\n                 }));\n     }\n@@ -96,7 +100,7 @@ public void onCompleted() {\n                     public void onError(Throwable e) {\n                         Log.d(LOG_TAG, e.getMessage());\n                         getMvpView().showWaitProgress(false);\n-                        getMvpView().showErrorSnackBar();\n+                        getMvpView().showSnackBar(R.string.failed_to_fetch_announcement);\n                     }\n \n                     @Override",
                "raw_url": "https://github.com/apache/incubator-taverna-mobile/raw/725a5e2c4576f5ffafc21b62c3dd600ec7cd939c/app/src/main/java/org/apache/taverna/mobile/ui/anouncements/AnnouncementPresenter.java",
                "sha": "029a758ea8b054deecc4bfbf341afc8d81934f91",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/incubator-taverna-mobile/blob/725a5e2c4576f5ffafc21b62c3dd600ec7cd939c/app/src/main/res/values/strings.xml",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-mobile/contents/app/src/main/res/values/strings.xml?ref=725a5e2c4576f5ffafc21b62c3dd600ec7cd939c",
                "deletions": 0,
                "filename": "app/src/main/res/values/strings.xml",
                "patch": "@@ -33,6 +33,10 @@ limitations under the License.\n     <string name=\"loginpassword\">Password</string>\n     <string name=\"bLogin\">Login</string>\n     <string name=\"title_activity_dashboard_main\">Dashboard</string>\n+    <string name=\"no_internet_connection\">No Internet Connection</string>\n+    <string name=\"no_more_announcement_available\">No More Announcement Available</string>\n+    <string name=\"failed_to_fetch_announcement\">Failed to fetch announcement</string>\n+    <string name=\"ok\">OK</string>\n \n     <string name=\"title_favorite\">Favorites</string>\n     <string name=\"title_explore\">Workflows</string>",
                "raw_url": "https://github.com/apache/incubator-taverna-mobile/raw/725a5e2c4576f5ffafc21b62c3dd600ec7cd939c/app/src/main/res/values/strings.xml",
                "sha": "95fe89c56117cb5d6b9a2771571649a5ceb447b7",
                "status": "modified"
            }
        ],
        "message": "Annoucement Load More NPE fixed",
        "parent": "https://github.com/apache/incubator-taverna-mobile/commit/c8e4b1975c5c315845b98020d1edafa89a41a35c",
        "repo": "incubator-taverna-mobile",
        "unit_tests": [
            "AnnouncementPresenterTest.java"
        ]
    }
}