{
    "nutch_8168861": {
        "repo": "nutch",
        "message": "NUTCH-950 DomainURLFilter throws NPE on bogus urls\n\ngit-svn-id: https://svn.apache.org/repos/asf/nutch/trunk@1055608 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/nutch/commit/8168861dd1acd0d632050aad45d7dcf358d95e15",
        "parent": "https://github.com/apache/nutch/commit/02e18a5f7e77d040ccb8cda3b2eef1739fef0024",
        "bug_id": "nutch_8168861",
        "file": [
            {
                "sha": "008deed39d281fe0e18c4b0aa7e6230b8dd38e2e",
                "filename": "CHANGES.txt",
                "blob_url": "https://github.com/apache/nutch/blob/8168861dd1acd0d632050aad45d7dcf358d95e15/CHANGES.txt",
                "raw_url": "https://github.com/apache/nutch/raw/8168861dd1acd0d632050aad45d7dcf358d95e15/CHANGES.txt",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/nutch/contents/CHANGES.txt?ref=8168861dd1acd0d632050aad45d7dcf358d95e15",
                "patch": "@@ -2,6 +2,8 @@ Nutch Change Log\n \n Release 2.0 - Current Development\n \n+* NUTCH-950 DomainURLFilter throws NPE on bogus urls (Alexis Detreglode via jnioche)\n+\n * NUTCH-935 basicurlnormalizer removes unnecessary /./ in URLs\n \n * NUTCH-912 MoreIndexingFilter does not parse docx and xlsx date formats (Markus Jelsma, jnioche)",
                "deletions": 0
            },
            {
                "sha": "f1f76a791281f033ae7ac9a42ad44526180fe181",
                "filename": "src/plugin/urlfilter-domain/src/java/org/apache/nutch/urlfilter/domain/DomainURLFilter.java",
                "blob_url": "https://github.com/apache/nutch/blob/8168861dd1acd0d632050aad45d7dcf358d95e15/src/plugin/urlfilter-domain/src/java/org/apache/nutch/urlfilter/domain/DomainURLFilter.java",
                "raw_url": "https://github.com/apache/nutch/raw/8168861dd1acd0d632050aad45d7dcf358d95e15/src/plugin/urlfilter-domain/src/java/org/apache/nutch/urlfilter/domain/DomainURLFilter.java",
                "status": "modified",
                "changes": 8,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/nutch/contents/src/plugin/urlfilter-domain/src/java/org/apache/nutch/urlfilter/domain/DomainURLFilter.java?ref=8168861dd1acd0d632050aad45d7dcf358d95e15",
                "patch": "@@ -32,6 +32,7 @@\n import org.apache.nutch.plugin.Extension;\n import org.apache.nutch.plugin.PluginRepository;\n import org.apache.nutch.util.URLUtil;\n+import org.apache.nutch.util.domain.DomainSuffix;\n \n /**\n  * <p>Filters URLs based on a file containing domain suffixes, domain names, and\n@@ -174,9 +175,14 @@ public String filter(String url) {\n \n       // match for suffix, domain, and host in that order.  more general will\n       // override more specific\n-      String suffix = URLUtil.getDomainSuffix(url).getDomain();\n       String domain = URLUtil.getDomainName(url).toLowerCase().trim();\n       String host = URLUtil.getHost(url);\n+      String suffix = null;\n+      DomainSuffix domainSuffix = URLUtil.getDomainSuffix(url);\n+      if (domainSuffix != null) {\n+        suffix = domainSuffix.getDomain();\n+      }\n+      \n       if (domainSet.contains(suffix) || domainSet.contains(domain)\n         || domainSet.contains(host)) {\n         return url;",
                "deletions": 1
            }
        ],
        "patched_files": [
            "DomainURLFilter.java"
        ],
        "unit_tests": [
            "TestDomainURLFilter.java"
        ]
    }
}