[{"commit": "https://github.com/apache/maven-clean-plugin/commit/b6cf04086dfd80971332e50d05fcb472a6b559b4", "parent": "https://github.com/apache/maven-clean-plugin/commit/5c6d8597ee5c2c66593b6c2a04312d5a9cc0a186", "message": "fix NPE in tests\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@595059 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-clean-plugin_1", "file": [{"additions": 6, "raw_url": "https://github.com/apache/maven-clean-plugin/raw/b6cf04086dfd80971332e50d05fcb472a6b559b4/pom.xml", "blob_url": "https://github.com/apache/maven-clean-plugin/blob/b6cf04086dfd80971332e50d05fcb472a6b559b4/pom.xml", "sha": "a47bd91ad25a2b519aae72a4455001dbf47fa9cb", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-clean-plugin/contents/pom.xml?ref=b6cf04086dfd80971332e50d05fcb472a6b559b4", "patch": "@@ -74,6 +74,12 @@ under the License.\n       <version>3.8.1</version>\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>org.apache.maven.shared</groupId>\n+      <artifactId>maven-plugin-testing-harness</artifactId>\n+      <version>1.1</version>\n+      <scope>test</scope>\n+    </dependency>\t  \n   </dependencies>\n \n   <contributors>", "filename": "pom.xml"}, {"additions": 10, "raw_url": "https://github.com/apache/maven-clean-plugin/raw/b6cf04086dfd80971332e50d05fcb472a6b559b4/src/test/java/org/apache/maven/plugin/clean/CleanMojoTest.java", "blob_url": "https://github.com/apache/maven-clean-plugin/blob/b6cf04086dfd80971332e50d05fcb472a6b559b4/src/test/java/org/apache/maven/plugin/clean/CleanMojoTest.java", "sha": "61a0c08e2320f5cd14c2ce417d48e310ce21d282", "changes": 19, "status": "modified", "deletions": 9, "contents_url": "https://api.github.com/repos/apache/maven-clean-plugin/contents/src/test/java/org/apache/maven/plugin/clean/CleanMojoTest.java?ref=b6cf04086dfd80971332e50d05fcb472a6b559b4", "patch": "@@ -19,21 +19,20 @@\n  * under the License.\n  */\n \n-import junit.framework.TestCase;\n-import org.apache.maven.plugin.MojoExecutionException;\n-import org.codehaus.plexus.util.FileUtils;\n-import org.codehaus.plexus.util.IOUtil;\n-\n import java.io.File;\n-import java.io.FileInputStream;\n-import java.io.FileNotFoundException;\n import java.util.Arrays;\n \n+import org.apache.maven.plugin.MojoExecutionException;\n+import org.apache.maven.plugin.testing.AbstractMojoTestCase;\n+import org.apache.maven.plugin.testing.stubs.MavenProjectStub;\n+import org.apache.maven.project.MavenProject;\n+import org.codehaus.plexus.util.FileUtils;\n+\n /**\n  * Test the clean mojo.\n  */\n public class CleanMojoTest\n-    extends TestCase\n+    extends AbstractMojoTestCase\n {\n     private static final String TARGET_TEST_DIR = \"target/testDirectoryStructure\";\n \n@@ -124,7 +123,9 @@ public void testFilesets()\n         String base = TARGET_TEST_DIR + \"/target\";\n \n         CleanMojo mojo = new CleanMojo();\n-\n+        MavenProjectStub project = new MavenProjectStub();\n+        project.setExecutionRoot( false );\n+        setVariableValueToObject( mojo, \"project\", project );\n         mojo.addFileset( createFileset( base, \"**/file.txt\", \"**/subdir/**\" ) );\n \n         String outputDirectory = TARGET_TEST_DIR + \"/buildOutputDirectory\";", "filename": "src/test/java/org/apache/maven/plugin/clean/CleanMojoTest.java"}], "repo": "maven-clean-plugin"}, {"commit": "https://github.com/apache/maven-clean-plugin/commit/1c0fc9d831ba9f23278cd413ad4caba50b086660", "parent": "https://github.com/apache/maven-clean-plugin/commit/2ffe8c49b01a48a1f1f1cec7ed3e4fc9e708d579", "message": "[MCLEAN-34] NPE when forcing delete of directory\n[MCLEAN-35] Upgrade plexus-utils to a new version\n\no Updated to plexus-utils:1.5.6\no Bumped Maven prerequisite to 2.0.6\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@692711 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-clean-plugin_2", "file": [{"additions": 4, "raw_url": "https://github.com/apache/maven-clean-plugin/raw/1c0fc9d831ba9f23278cd413ad4caba50b086660/pom.xml", "blob_url": "https://github.com/apache/maven-clean-plugin/blob/1c0fc9d831ba9f23278cd413ad4caba50b086660/pom.xml", "sha": "eabbca6dbc2ce9901cf1fec4eaae1cb45869ad2a", "changes": 8, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/maven-clean-plugin/contents/pom.xml?ref=1c0fc9d831ba9f23278cd413ad4caba50b086660", "patch": "@@ -44,7 +44,7 @@ under the License.\n   </contributors>\n \n   <prerequisites>\n-    <maven>2.0</maven>\n+    <maven>2.0.6</maven>\n   </prerequisites>\n \n   <scm>\n@@ -61,12 +61,12 @@ under the License.\n     <dependency>\n       <groupId>org.apache.maven</groupId>\n       <artifactId>maven-project</artifactId>\n-      <version>2.0</version>\n+      <version>2.0.6</version>\n     </dependency>\n     <dependency>\n       <groupId>org.apache.maven</groupId>\n       <artifactId>maven-plugin-api</artifactId>\n-      <version>2.0</version>\n+      <version>2.0.6</version>\n     </dependency>\n     <dependency>\n       <groupId>org.apache.maven.shared</groupId>\n@@ -76,7 +76,7 @@ under the License.\n     <dependency>\n       <groupId>org.codehaus.plexus</groupId>\n       <artifactId>plexus-utils</artifactId>\n-      <version>1.1</version>\n+      <version>1.5.6</version>\n     </dependency>\n \n     <!-- Test -->", "filename": "pom.xml"}], "repo": "maven-clean-plugin"}]
