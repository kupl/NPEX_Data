{
    "aries-jpa_7712046": {
        "bug_id": "aries-jpa_7712046",
        "commit": "https://github.com/apache/aries-jpa/commit/7712046a1e16b65dc1ad2b2dcc0a019c21d78336",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/aries-jpa/blob/7712046a1e16b65dc1ad2b2dcc0a019c21d78336/jpa-blueprint/src/main/java/org/apache/aries/jpa/blueprint/impl/AnnotationScanner.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/aries-jpa/contents/jpa-blueprint/src/main/java/org/apache/aries/jpa/blueprint/impl/AnnotationScanner.java?ref=7712046a1e16b65dc1ad2b2dcc0a019c21d78336",
                "deletions": 1,
                "filename": "jpa-blueprint/src/main/java/org/apache/aries/jpa/blueprint/impl/AnnotationScanner.java",
                "patch": "@@ -29,7 +29,7 @@\n \n     public List<AccessibleObject> getJpaAnnotatedMembers(Class<?> c, Class<? extends Annotation> annotation) {\n         final List<AccessibleObject> jpaAnnotated = new ArrayList<AccessibleObject>();\n-        for (Class<?> cl = c; cl != Object.class; cl = cl.getSuperclass()) {  \n+        for (Class<?> cl = c; cl != Object.class && cl != null; cl = cl.getSuperclass()) {\n             parseClass(annotation, jpaAnnotated, cl);\n         }\n         return jpaAnnotated;",
                "raw_url": "https://github.com/apache/aries-jpa/raw/7712046a1e16b65dc1ad2b2dcc0a019c21d78336/jpa-blueprint/src/main/java/org/apache/aries/jpa/blueprint/impl/AnnotationScanner.java",
                "sha": "8fec1699a9c2a8c7df27b798ed9c25eacec7cb2f",
                "status": "modified"
            },
            {
                "additions": 9,
                "blob_url": "https://github.com/apache/aries-jpa/blob/7712046a1e16b65dc1ad2b2dcc0a019c21d78336/jpa-blueprint/src/test/java/org/apache/aries/jpa/blueprint/impl/AnnotationScannerTest.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/aries-jpa/contents/jpa-blueprint/src/test/java/org/apache/aries/jpa/blueprint/impl/AnnotationScannerTest.java?ref=7712046a1e16b65dc1ad2b2dcc0a019c21d78336",
                "deletions": 0,
                "filename": "jpa-blueprint/src/test/java/org/apache/aries/jpa/blueprint/impl/AnnotationScannerTest.java",
                "patch": "@@ -87,5 +87,14 @@ public void getPUAnnotatedMembersTest() {\n         Assert.assertEquals(\"setEmf\", method.getName());\n     }\n \n+    /**\n+     * When using a factory the class can be an interface. We need to make sure this does not cause a NPE\n+     */\n+    @Test\n+    public void getFactoryTest() {\n+        AnnotationScanner scanner = new AnnotationScanner();\n+        List<AccessibleObject> members = scanner.getJpaAnnotatedMembers(TestInterface.class, PersistenceUnit.class);\n+        Assert.assertEquals(0, members.size());\n+    }\n     \n }",
                "raw_url": "https://github.com/apache/aries-jpa/raw/7712046a1e16b65dc1ad2b2dcc0a019c21d78336/jpa-blueprint/src/test/java/org/apache/aries/jpa/blueprint/impl/AnnotationScannerTest.java",
                "sha": "ebd3b85b5fbf977c01b0920b808dae5f8764bd42",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/aries-jpa/blob/7712046a1e16b65dc1ad2b2dcc0a019c21d78336/jpa-blueprint/src/test/java/org/apache/aries/jpa/blueprint/impl/TestInterface.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/aries-jpa/contents/jpa-blueprint/src/test/java/org/apache/aries/jpa/blueprint/impl/TestInterface.java?ref=7712046a1e16b65dc1ad2b2dcc0a019c21d78336",
                "deletions": 0,
                "filename": "jpa-blueprint/src/test/java/org/apache/aries/jpa/blueprint/impl/TestInterface.java",
                "patch": "@@ -0,0 +1,5 @@\n+package org.apache.aries.jpa.blueprint.impl;\n+\n+public interface TestInterface {\n+\n+}",
                "raw_url": "https://github.com/apache/aries-jpa/raw/7712046a1e16b65dc1ad2b2dcc0a019c21d78336/jpa-blueprint/src/test/java/org/apache/aries/jpa/blueprint/impl/TestInterface.java",
                "sha": "87303f8ca6765940a85c7c58c254df669869a33f",
                "status": "added"
            }
        ],
        "message": "[ARIES-1533] Make sure interfaces do not cause a NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/aries/trunk/jpa@1739703 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/aries-jpa/commit/97cb979df9d1672edc14aad00bd412943de34a5f",
        "patched_files": [
            "AnnotationScanner.java"
        ],
        "repo": "aries-jpa",
        "unit_tests": [
            "TestInterface.java",
            "AnnotationScannerTest.java"
        ]
    }
}