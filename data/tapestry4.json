{
    "tapestry4_1bbbb92": {
        "bug_id": "tapestry4_1bbbb92",
        "commit": "https://github.com/apache/tapestry4/commit/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/tapestry4/blob/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/IEngine.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/org/apache/tapestry/IEngine.java?ref=1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4",
                "deletions": 5,
                "filename": "framework/src/org/apache/tapestry/IEngine.java",
                "patch": "@@ -242,11 +242,8 @@\n     /**\n      *  Method invoked from the {@link org.apache.tapestry.ApplicationServlet} \n      *  to perform processing of the\n-     *  request.  The return value for this method indicates whether the state of the engine\n-     *  could possibly change during processing; in most cases this is true.  In a few\n-     *  possible cases, this is false.  The ApplicationServlet sometimes performs extra\n-     *  work to ensure that the engine is properly replicated in a clustering environment; if\n-     *  this method returns false, it can skip that extra work.\n+     *  request.  In release 2.4, this has become more of a dirty flag, indicating\n+     *  if any state stored by the engine instance itself has changed.\n      *\n      *  @return true if the state of the engine was, or could have been, changed during\n      *  processing.",
                "raw_url": "https://github.com/apache/tapestry4/raw/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/IEngine.java",
                "sha": "1c9cb693a62642bcd00ca6c067e12c4d4303635f",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tapestry4/blob/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/TapestryStrings.properties",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/org/apache/tapestry/TapestryStrings.properties?ref=1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4",
                "deletions": 4,
                "filename": "framework/src/org/apache/tapestry/TapestryStrings.properties",
                "patch": "@@ -121,11 +121,10 @@ AbstractEngine.unknown-specification=<Unknown specification>\n AbstractEngine.unknown-service=Engine does not implement a service name {0}.\n AbstractEngine.unable-to-begin-request=Tapestry unable to begin processing request.\n AbstractEngine.unable-to-cleanup-page=Unable to cleanup page {0}.\n-AbstractEngine.visit-class-property-not-specified=Could not create visit object because property {0} was not configured.\n AbstractEngine.unable-to-instantiate-visit=Unable to instantiate visit object from class {0}.\n AbstractEngine.unable-to-instantiate-global=Unable to instantiate global object from class {0}.\n AbstractEngine.unable-to-redirect=Unable to redirect to {0}.\n-AbstractEngine.service-name-mismatch=Class {1} is registerred as service {0} but provides service {2} instead.\n+AbstractEngine.service-name-mismatch=Class {1} is registered as service {0} but provides service {2} instead.\n AbstractEngine.unable-to-instantiate-service=Unable to instantiate class {1} as service {0}.\n AbstractEngine.unable-to-find-dispatcher=Unable to find a request dispatcher for local resource ''{0}''.\n AbstractEngine.unable-to-forward=Unable to forward to local resource ''{0}''.\n@@ -318,8 +317,6 @@ PageRecorder.null-property-name=A change event for component {0} failed to speci\n \n RollbackException.message=Unable to set property {0} of component {1} to {2}.\n \n-DefaultValuePersister.no-value-copier-for-class=No value copier has been registerred for class {0}.\n-\n # net.sf.tapestry.resource\n \n ContextResourceLocation.unable-to-reference-context-path=Unable to reference context path ''{0}''.",
                "raw_url": "https://github.com/apache/tapestry4/raw/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/TapestryStrings.properties",
                "sha": "c61247e0be924de9e28dfde5c1a8e09cd817d7c1",
                "status": "modified"
            },
            {
                "additions": 138,
                "blob_url": "https://github.com/apache/tapestry4/blob/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/engine/AbstractEngine.java",
                "changes": 169,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/org/apache/tapestry/engine/AbstractEngine.java?ref=1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4",
                "deletions": 31,
                "filename": "framework/src/org/apache/tapestry/engine/AbstractEngine.java",
                "patch": "@@ -75,6 +75,8 @@\n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n import javax.servlet.http.HttpSession;\n+import javax.servlet.http.HttpSessionBindingEvent;\n+import javax.servlet.http.HttpSessionBindingListener;\n \n import org.apache.tapestry.ApplicationRuntimeException;\n import org.apache.tapestry.ApplicationServlet;\n@@ -107,6 +109,7 @@\n import org.apache.tapestry.util.pool.Pool;\n import org.apache.tapestry.util.prop.OgnlUtils;\n import org.apache.bsf.BSFManager;\n+import org.apache.commons.lang.builder.ToStringBuilder;\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;\n \n@@ -162,7 +165,8 @@\n  * \n  **/\n \n-public abstract class AbstractEngine implements IEngine, IEngineServiceView, Externalizable\n+public abstract class AbstractEngine\n+    implements IEngine, IEngineServiceView, Externalizable, HttpSessionBindingListener\n {\n     private static final Log LOG = LogFactory.getLog(AbstractEngine.class);\n \n@@ -312,7 +316,8 @@\n      *\n      **/\n \n-    protected static final String SPECIFICATION_SOURCE_NAME = \"org.apache.tapestry.SpecificationSource\";\n+    protected static final String SPECIFICATION_SOURCE_NAME =\n+        \"org.apache.tapestry.SpecificationSource\";\n \n     /**\n      *  Servlet context attribute name for the {@link IPageSource}\n@@ -431,6 +436,18 @@\n \n     private transient IComponentClassEnhancer _enhancer;\n \n+    /**\n+     *  Set to true when there is a (potential)\n+     *  change to the internal state of the engine, set\n+     *  to false when the engine is stored into the\n+     *  {@link HttpSession}.  \n+     * \n+     *  @since 2.4\n+     * \n+     **/\n+\n+    private transient boolean _dirty;\n+\n     /**\n      *  Sets the Exception page's exception property, then renders the Exception page.\n      *\n@@ -515,23 +532,16 @@ public void reportException(String reportTitle, Throwable ex)\n     /**\n      *  Extends the description of the class generated by {@link #toString()}.\n      *  If a subclass adds additional instance variables that should be described\n-     *  in the instance description, it may overide this method.  Subclasses\n-     *  should invoke this implementation first.  They should append a space\n-     *  before each value.\n+     *  in the instance description, it may overide this method. This implementation\n+     *  does nothing.\n      *\n      *  @see #toString()\n+     * \n      **/\n \n-    public void extendDescription(StringBuffer buffer)\n+    protected void extendDescription(ToStringBuilder builder)\n     {\n-        // In rare cases, toString() may be invoked before\n-        // the engine has a change to obtain the specification\n-        // from the servlet.\n \n-        if (_specification == null)\n-            buffer.append(Tapestry.getString(\"AbstractEngine.unknown-specification\"));\n-        else\n-            buffer.append(_specification.getName());\n     }\n \n     /**\n@@ -850,7 +860,16 @@ public boolean service(RequestContext context) throws ServletException, IOExcept\n \n                 monitor.serviceBegin(serviceName, context.getRequestURI());\n \n-                return service.service(this, cycle, output);\n+                // Invoke the service, which returns true if it may have changed\n+                // the state of the engine (most do return true).\n+\n+                boolean serviceResult = service.service(this, cycle, output);\n+\n+                // Return true only if the engine is actually dirty.  This cuts down\n+                // on the number of times the engine is stored into the\n+                // session unceccesarily.\n+\n+                return serviceResult && _dirty;\n             }\n             catch (PageRedirectException ex)\n             {\n@@ -930,7 +949,7 @@ public boolean service(RequestContext context) throws ServletException, IOExcept\n         // When in doubt, assume that the request did cause some change\n         // to the engine.\n \n-        return true;\n+        return _dirty;\n     }\n \n     /**\n@@ -1049,6 +1068,7 @@ public void setLocale(Locale value)\n         {\n             _locale = value;\n             _localeChanged = true;\n+            markDirty();\n         }\n     }\n \n@@ -1379,23 +1399,28 @@ public IResourceResolver getResourceResolver()\n      *  Invokes {@link #extendDescription(StringBuffer)}\n      *  to fill in details about the instance.\n      *\n-     *  @see #extendDescription(StringBuffer)\n+     *  @see #extendDescription(ToStringB)\n      *\n      **/\n \n     public String toString()\n     {\n-        StringBuffer buffer;\n+        ToStringBuilder builder = new ToStringBuilder(this);\n \n-        buffer = new StringBuffer(super.toString());\n+        builder.append(\n+            \"name\",\n+            _specification == null\n+                ? Tapestry.getString(\"AbstractEngine.unknown-specification\")\n+                : _specification.getName());\n \n-        buffer.append('[');\n+        builder.append(\"dirty\", _dirty);\n+        builder.append(\"locale\", _locale);\n+        builder.append(\"stateful\", _stateful);\n+        builder.append(\"visit\", _visit);\n \n-        extendDescription(buffer);\n+        extendDescription(builder);\n \n-        buffer.append(']');\n-\n-        return buffer.toString();\n+        return builder.toString();\n     }\n \n     /**\n@@ -1420,10 +1445,19 @@ public boolean isResetServiceEnabled()\n     /**\n      *  Gets the visit object, if it has been created already.\n      *\n+     *  <p>\n+     *  If the visit is non-null then\n+     *  the {@link #isDirty()} flag is set (because\n+     *  the engine can't tell what the caller will\n+     *  <i>do</i> with the visit).\n+     * \n      **/\n \n     public Object getVisit()\n     {\n+        if (_visit != null)\n+            markDirty();\n+\n         return _visit;\n     }\n \n@@ -1435,6 +1469,10 @@ public Object getVisit()\n      *  After creating the visit, but before returning,\n      *  the {@link HttpSession} will be created, and\n      *  {@link #setStateful()} will be invoked.\n+     * \n+     *  <p>\n+     *  Sets the {@link #isDirty()} flag, if the return value\n+     *  is not null.\n      *\n      *\n      **/\n@@ -1453,12 +1491,23 @@ public Object getVisit(IRequestCycle cycle)\n             setStateful();\n         }\n \n+        if (_visit != null)\n+            markDirty();\n+\n         return _visit;\n     }\n \n+    /**\n+     *  Updates the visit object and\n+     *  sets the {@link #isDirty() dirty flag}.\n+     * \n+     **/\n+\n     public void setVisit(Object value)\n     {\n         _visit = value;\n+\n+        markDirty();\n     }\n \n     public boolean getHasVisit()\n@@ -1483,11 +1532,6 @@ protected Object createVisit(IRequestCycle cycle)\n         Object result = null;\n \n         visitClassName = _propertySource.getPropertyValue(VISIT_CLASS_PROPERTY_NAME);\n-        if (visitClassName == null)\n-            throw new ApplicationRuntimeException(\n-                Tapestry.getString(\n-                    \"AbstractEngine.visit-class-property-not-specified\",\n-                    VISIT_CLASS_PROPERTY_NAME));\n \n         if (LOG.isDebugEnabled())\n             LOG.debug(\"Creating visit object as instance of \" + visitClassName);\n@@ -1744,7 +1788,7 @@ private Map createServiceMap()\n                         Tapestry.getString(\n                             \"AbstractEngine.service-name-mismatch\",\n                             name,\n-                            serviceClass,\n+                            className,\n                             serviceName));\n \n                 // Replace the class name with an instance\n@@ -1914,7 +1958,8 @@ public IPropertySource getPropertySource()\n      * \n      **/\n \n-    private static final String EXTENSION_PROPERTY_SOURCE_NAME = \"org.apache.tapestry.property-source\";\n+    private static final String EXTENSION_PROPERTY_SOURCE_NAME =\n+        \"org.apache.tapestry.property-source\";\n \n     /**\n      *  The name of an application extension that implements {@link IMonitor}.\n@@ -1972,7 +2017,8 @@ protected IPropertySource createPropertySource(RequestContext context)\n \n         // Lastly, add a final source to handle \"factory defaults\".\n \n-        ResourceBundle bundle = ResourceBundle.getBundle(\"org.apache.tapestry.ConfigurationDefaults\");\n+        ResourceBundle bundle =\n+            ResourceBundle.getBundle(\"org.apache.tapestry.ConfigurationDefaults\");\n \n         result.addSource(new ResourceBundlePropertySource(bundle));\n \n@@ -2072,4 +2118,65 @@ public IComponentClassEnhancer getComponentClassEnhancer()\n         return _enhancer;\n     }\n \n+    /**\n+     *  Returns true if the engine has (potentially) changed\n+     *  state since the last time it was stored\n+     *  into the {@link javax.servlet.http.HttpSession}.  Various\n+     *  events set this property to true.\n+     * \n+     *  @since 2.4\n+     * \n+     **/\n+\n+    public boolean isDirty()\n+    {\n+        return _dirty;\n+    }\n+\n+    /**\n+     *  Invoked to set the dirty flag, indicating that the\n+     *  engine should be stored into the \n+     *  {@link javax.servlet.http.HttpSession}.\n+     * \n+     * \n+     *  @since 2.4\n+     * \n+     **/\n+\n+    protected void markDirty()\n+    {\n+        if (!_dirty)\n+            LOG.debug(\"Setting dirty flag.\");\n+\n+        _dirty = true;\n+    }\n+\n+    /** \n+     * \n+     *  Clears the dirty flag when a engine is stored into the \n+     *  {@link HttpSession}.\n+     * \n+     * \n+     *  @since 2.4 \n+     * \n+     **/\n+\n+    public void valueBound(HttpSessionBindingEvent arg0)\n+    {\n+        LOG.debug(_dirty ? \"Clearing dirty flag.\" : \"Dirty flag already cleared.\");\n+\n+        _dirty = false;\n+    }\n+\n+    /**\n+     *  Does nothing.\n+     * \n+     *  @since 2.4\n+     * \n+     **/\n+\n+    public void valueUnbound(HttpSessionBindingEvent arg0)\n+    {\n+    }\n+\n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/tapestry4/raw/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/engine/AbstractEngine.java",
                "sha": "91d7a16cca32dc63508e399e03e015ae6ddb25a3",
                "status": "modified"
            },
            {
                "additions": 17,
                "blob_url": "https://github.com/apache/tapestry4/blob/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/engine/BaseEngine.java",
                "changes": 17,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/org/apache/tapestry/engine/BaseEngine.java?ref=1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4",
                "deletions": 0,
                "filename": "framework/src/org/apache/tapestry/engine/BaseEngine.java",
                "patch": "@@ -65,6 +65,7 @@\n import java.util.Map;\n import java.util.*;\n \n+import org.apache.commons.lang.builder.ToStringBuilder;\n import org.apache.tapestry.ApplicationRuntimeException;\n import org.apache.tapestry.IRequestCycle;\n import org.apache.tapestry.Tapestry;\n@@ -104,6 +105,7 @@ protected void cleanupAfterRequest(IRequestCycle cycle)\n         if (Tapestry.isEmpty(_recorders))\n             return;\n \n+\t\tboolean markDirty = false;\n         Iterator i = _recorders.entrySet().iterator();\n \n         while (i.hasNext())\n@@ -119,8 +121,13 @@ protected void cleanupAfterRequest(IRequestCycle cycle)\n                 i.remove();\n \n                 _activePageNames.remove(pageName);\n+      \t\n+      \t\t\tmarkDirty = true;\n             }\n         }\n+        \n+        if (markDirty)\n+        \tmarkDirty();\n     }\n \n     public void forgetPage(String name)\n@@ -139,6 +146,8 @@ public void forgetPage(String name)\n         recorder.discard();\n         _recorders.remove(name);\n         _activePageNames.remove(name);\n+        \n+        markDirty();\n     }\n \n     /**\n@@ -190,6 +199,7 @@ public IPageRecorder createPageRecorder(String pageName, IRequestCycle cycle)\n \n         cycle.getRequestContext().createSession();\n         setStateful();\n+       \n \n         IPageRecorder result = new SessionPageRecorder();\n         result.initialize(pageName, cycle);\n@@ -200,6 +210,8 @@ public IPageRecorder createPageRecorder(String pageName, IRequestCycle cycle)\n             _activePageNames = new HashSet();\n \n         _activePageNames.add(pageName);\n+        \n+        markDirty();\n \n         return result;\n     }\n@@ -259,4 +271,9 @@ public void writeExternal(ObjectOutput out) throws IOException\n         }\n     }\n \n+    public void extendDescription(ToStringBuilder builder)\n+    {\n+\t\tbuilder.append(\"activePageNames\", _activePageNames);\n+    }\n+\n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/tapestry4/raw/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/engine/BaseEngine.java",
                "sha": "5ee61c81845cc39d5230d3469eec372173ec6944",
                "status": "modified"
            },
            {
                "additions": 8,
                "blob_url": "https://github.com/apache/tapestry4/blob/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/html/Image.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/org/apache/tapestry/html/Image.java?ref=1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4",
                "deletions": 2,
                "filename": "framework/src/org/apache/tapestry/html/Image.java",
                "patch": "@@ -60,6 +60,7 @@\n import org.apache.tapestry.IMarkupWriter;\n import org.apache.tapestry.IRequestCycle;\n import org.apache.tapestry.RequestCycleException;\n+import org.apache.tapestry.RequiredParameterException;\n \n /**\n  *  Used to insert an image.  To create a rollover image, use the\n@@ -91,7 +92,12 @@ protected void renderComponent(IMarkupWriter writer, IRequestCycle cycle)\n         if (cycle.isRewinding())\n             return;\n \n-        String imageURL = getImage().buildURL(cycle);\n+        IAsset imageAsset = getImage();\n+\n+        if (imageAsset == null)\n+            throw new RequiredParameterException(this, \"image\", getBinding(\"image\"));\n+\n+        String imageURL = imageAsset.buildURL(cycle);\n \n         writer.beginEmpty(\"img\");\n \n@@ -106,6 +112,6 @@ protected void renderComponent(IMarkupWriter writer, IRequestCycle cycle)\n     }\n \n     public abstract IAsset getImage();\n-    \n+\n     public abstract int getBorder();\n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/tapestry4/raw/1bbbb92942c8a4dd4d3cf2a8056cc06bf2a3c6c4/framework/src/org/apache/tapestry/html/Image.java",
                "sha": "a24d23c033d7d2fdf76f0689fb9d54724f0905c5",
                "status": "modified"
            }
        ],
        "message": "Fix minor errors in AbstractEngine exception messages.\nEliminate NPE in Image component when binding value is null.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/tapestry/trunk@243291 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/tapestry4/commit/7ac9c0af04e7fe4166f7ae47e3ea3857a68056f7",
        "repo": "tapestry4",
        "unit_tests": [
            "TestImage.java"
        ]
    },
    "tapestry4_268a857": {
        "bug_id": "tapestry4_268a857",
        "commit": "https://github.com/apache/tapestry4/commit/268a85714cc64daa2d50582c9632ae0889eda3bc",
        "file": [
            {
                "additions": 8,
                "blob_url": "https://github.com/apache/tapestry4/blob/268a85714cc64daa2d50582c9632ae0889eda3bc/framework/src/org/apache/tapestry/valid/ValidationDelegate.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/org/apache/tapestry/valid/ValidationDelegate.java?ref=268a85714cc64daa2d50582c9632ae0889eda3bc",
                "deletions": 1,
                "filename": "framework/src/org/apache/tapestry/valid/ValidationDelegate.java",
                "patch": "@@ -62,6 +62,7 @@\n import java.util.List;\n import java.util.Map;\n \n+import org.apache.tapestry.IForm;\n import org.apache.tapestry.IMarkupWriter;\n import org.apache.tapestry.IRender;\n import org.apache.tapestry.IRequestCycle;\n@@ -432,7 +433,13 @@ protected boolean isInError(IFormComponent component)\n         if (_trackingMap == null)\n             return false;\n \n-        String formName = component.getForm().getName();\n+        IForm form = component.getForm();\n+        // if there is no form, the component cannot have been rewound or rendered into a form yet\n+        // so assume it cannot have errors.\n+        if (form == null)\n+            return false;\n+        \n+        String formName = form.getName();\n         Map formMap = (Map) _trackingMap.get(formName);\n \n         if (formMap == null)",
                "raw_url": "https://github.com/apache/tapestry4/raw/268a85714cc64daa2d50582c9632ae0889eda3bc/framework/src/org/apache/tapestry/valid/ValidationDelegate.java",
                "sha": "8d015a18c84ac319a80cbb11c1584bbfc8a67000",
                "status": "modified"
            }
        ],
        "message": "[ 25585 ] ValidationDelegate throws NPE for some new FieldLabel/ValidField\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/tapestry/trunk@243678 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/tapestry4/commit/142eefacf6a50f9cd30f4b9efa69ef16a673b466",
        "repo": "tapestry4",
        "unit_tests": [
            "ValidationDelegateTest.java"
        ]
    },
    "tapestry4_46a8f31": {
        "bug_id": "tapestry4_46a8f31",
        "commit": "https://github.com/apache/tapestry4/commit/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tapestry4/blob/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/RequestContext.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/net/sf/tapestry/RequestContext.java?ref=46a8f312c2bc1f4de03e4cb19323c2aaec060eaf",
                "deletions": 1,
                "filename": "framework/src/net/sf/tapestry/RequestContext.java",
                "patch": "@@ -819,7 +819,7 @@ public void write(IMarkupWriter writer)\n \n             writer.begin(\"tr\");\n             writer.attribute(\"class\", getRowClass());\n-            writer.begin(\"td\");\n+            writer.begin(\"th\");\n             writer.print(name);\n             writer.end();\n             writer.begin(\"td\");",
                "raw_url": "https://github.com/apache/tapestry4/raw/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/RequestContext.java",
                "sha": "a5b004991110db2c115ba61b9c6b6773954c47cb",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tapestry4/blob/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/TapestryStrings.properties",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/net/sf/tapestry/TapestryStrings.properties?ref=46a8f312c2bc1f4de03e4cb19323c2aaec060eaf",
                "deletions": 1,
                "filename": "framework/src/net/sf/tapestry/TapestryStrings.properties",
                "patch": "@@ -331,7 +331,7 @@ AbstractDocumentParser.invalid-identifier={0} is not a valid identifier (in elem\n # net.sf.tapestry.valid\n \n FieldLabel.no-display-name=Display name not specified and not provided by field {0}.\n-\n+ValidField.no-delegate=No IValidationDelegate is available to ValidField {0}; it is specified as the delegate parameter of Form {1}.\n \n \n ",
                "raw_url": "https://github.com/apache/tapestry4/raw/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/TapestryStrings.properties",
                "sha": "066ad9165839549c3d607d75376a18c3c61f0cd8",
                "status": "modified"
            },
            {
                "additions": 45,
                "blob_url": "https://github.com/apache/tapestry4/blob/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/html/ExceptionDisplay.html",
                "changes": 71,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/net/sf/tapestry/html/ExceptionDisplay.html?ref=46a8f312c2bc1f4de03e4cb19323c2aaec060eaf",
                "deletions": 26,
                "filename": "framework/src/net/sf/tapestry/html/ExceptionDisplay.html",
                "patch": "@@ -1,51 +1,70 @@\n <!-- $Id$ -->\n+<html>\n+<link rel=\"stylesheet\" type=\"text/css\" href=\"../pages/Exception.css\">\n \n+<body>\n+\n+<span jwcid=\"$content$\">\n <p>\n \n <table class=\"exception-display\">\n \n-<jwc id=\"e-exception\">\n+<span jwcid=\"e-exception\">\n \t\n-\t\t<tr class=\"property\">\n-\t\t\t<th>Name:</th>\n-\t\t\t<td><jwc id=\"insertClass\"/></td>\n+\t\t<tr class=\"exception-name\">\n+\t\t\t<td colspan=\"2\"><span jwcid=\"insertClass\">some.exception.Class</span></td>\n \t\t</tr>\n \t\t\n-\t\t<tr class=\"property\">\n-\t\t\t<th>Message:</th>\n-\t\t\t<td><jwc id=\"insertMessage\"/></td>\n+\t\t<tr class=\"exception-message\">\n+\t\t\t<td colspan=\"2\"><span jwcid=\"insertMessage\">A message describing the exception.</span></td>\n \t\t</tr>\n-\n-<jwc id=\"e-property\">\n \t\t\n-\t\t<tr class=\"property\">\n-\t\t\t<th><jwc id=\"insertPropertyName\"/>:</th>\n-\t\t\t<td><jwc id=\"insertPropertyValue\"/></td>\n+\t\t<tr jwcid=\"e-property\">\n+\t\t\t<th><span jwcid=\"insertPropertyName\">Property Name</span>:</th>\n+\t\t\t<td><span jwcid=\"insertPropertyValue\">Property Value</span></td>\n+\t\t</tr>\n+\n+\t\t<tr jwcid=\"$remove$\" class=\"odd\">\n+\t\t\t<th>Property Name 2:</th>\n+\t\t\t<td>Property Value 2</td>\n+\t\t</tr>\n+\n+\t\t<tr jwcid=\"$remove$\" class=\"even\">\n+\t\t\t<th>Property Name 3:</th>\n+\t\t\t<td>Property Value 3</td>\n \t\t</tr>\n+\n+\t\t<tr jwcid=\"$remove$\" class=\"odd\">\n+\t\t\t<th>Property Name 4:</th>\n+\t\t\t<td>Property Value 4</td>\n+\t\t</tr>\t\t\n \t\t\n-</jwc>\t\n-\t\n-<jwc id=\"ifNotLast\">\n+<span jwcid=\"ifNotLast\">\n \t\t<tr> <td colspan=2> &nbsp; </td> </tr>\n-</jwc>\n+</span>\n \t\n-<jwc id=\"ifLast\">\n-\t\t<tr class=\"property\">\n-\t\t\t<th>Trace:</th> <td>&nbsp;</td>\n+<span jwcid=\"ifLast\">\n+\t\t<tr class=\"stack-trace-label\">\n+\t\t\t<td colspan=\"2\">Stack Trace:</td>\n \t\t</tr>\n \n \t\t<tr class=\"stack-trace\">\n \t\t\t<td colspan=2>\n \t\t\t\t<ul>\n-\t\t\t\t<jwc id=\"e-stack\">\n-\t\t\t\t\t<li><jwc id=\"insertStackTrace\"/>\n-\t\t\t\t</jwc>\n+\t\t\t\t\t<li jwcid=\"e-stack\"><span jwcid=\"insertStackTrace\">foo.bar.baz(Line:xyz)</span></li>\n+\t\t\t\t\t<li jwcid=\"$remove$\">foo.bar.baz(Line:xyz)</li>\n+\t\t\t\t\t<li jwcid=\"$remove$\">foo.bar.baz(Line:xyz)</li>\n+\t\t\t\t\t<li jwcid=\"$remove$\">foo.bar.baz(Line:xyz)</li>\t\t\t\t\t\n+\t\t\t\t\t<li jwcid=\"$remove$\">foo.bar.baz(Line:xyz)</li>\n \t\t\t\t</ul>\n-\n-\n \t\t\t</td>\n \t\t</tr>\n-</jwc>\n-</jwc>\n+</span> <!-- ifLast -->\n+</span> <!-- e-exception -->\n \n </table>\n+\n+</span> <!-- $content$ -->\n+\n+</body>\n+</html>",
                "raw_url": "https://github.com/apache/tapestry4/raw/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/html/ExceptionDisplay.html",
                "sha": "835dde12f93543f85b6daa8b19677ad8e9afdb5c",
                "status": "modified"
            },
            {
                "additions": 22,
                "blob_url": "https://github.com/apache/tapestry4/blob/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/html/ExceptionDisplay.java",
                "changes": 24,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/net/sf/tapestry/html/ExceptionDisplay.java?ref=46a8f312c2bc1f4de03e4cb19323c2aaec060eaf",
                "deletions": 2,
                "filename": "framework/src/net/sf/tapestry/html/ExceptionDisplay.java",
                "patch": "@@ -30,6 +30,7 @@\n import net.sf.tapestry.IMarkupWriter;\n import net.sf.tapestry.IRequestCycle;\n import net.sf.tapestry.RequestCycleException;\n+import net.sf.tapestry.bean.EvenOdd;\n import net.sf.tapestry.util.exception.ExceptionDescription;\n \n /**\n@@ -46,6 +47,7 @@\n     private ExceptionDescription exception;\n     private int count;\n     private int index;\n+    private EvenOdd evenOdd;\n \n     public void setExceptionsBinding(IBinding value)\n     {\n@@ -57,9 +59,17 @@ public IBinding getExceptionsBinding()\n         return exceptionsBinding;\n     }\n \n+    /**\n+     *  Each time the current exception is set, as a side effect,\n+     *  the evenOdd helper bean is reset to even.\n+     * \n+     **/\n+    \n     public void setException(ExceptionDescription value)\n     {\n         exception = value;\n+        \n+        evenOdd.setEven(true);\n     }\n \n     public ExceptionDescription getException()\n@@ -76,8 +86,18 @@ protected void renderComponent(IMarkupWriter writer, IRequestCycle cycle)\n                 ExceptionDescription[].class);\n \n         count = exceptions.length;\n-\n-        super.renderComponent(writer, cycle);\n+        \n+        try\n+        {\n+            evenOdd = (EvenOdd)getBeans().getBean(\"evenOdd\");\n+            \n+            super.renderComponent(writer, cycle);\n+        }\n+        finally\n+        {\n+            exception = null;\n+            evenOdd = null;\n+        }\n     }\n \n     public void setIndex(int value)",
                "raw_url": "https://github.com/apache/tapestry4/raw/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/html/ExceptionDisplay.java",
                "sha": "1e33579e8e56a8a37717e7fd07b2485688ec407a",
                "status": "modified"
            },
            {
                "additions": 9,
                "blob_url": "https://github.com/apache/tapestry4/blob/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/html/ExceptionDisplay.jwc",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/net/sf/tapestry/html/ExceptionDisplay.jwc?ref=46a8f312c2bc1f4de03e4cb19323c2aaec060eaf",
                "deletions": 1,
                "filename": "framework/src/net/sf/tapestry/html/ExceptionDisplay.jwc",
                "patch": "@@ -1,6 +1,9 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <!-- $Id$ -->\n-<!DOCTYPE specification PUBLIC \"-//Howard Ship//Tapestry Specification 1.1//EN\" \"http://tapestry.sf.net/dtd/Tapestry_1_1.dtd\">\n+<!DOCTYPE specification PUBLIC \n+\t\"-//Howard Lewis Ship//Tapestry Specification 1.2//EN\" \n+\t\t\"http://tapestry.sf.net/dtd/Tapestry_1_2.dtd\">\n+\t\t\n <specification class=\"net.sf.tapestry.html.ExceptionDisplay\" \n \tallow-body=\"no\" \n \tallow-informal-parameters=\"no\">\n@@ -15,6 +18,8 @@\n     </description>\n   </parameter>\n   \n+  <bean name=\"evenOdd\" class=\"net.sf.tapestry.bean.EvenOdd\"/>\n+    \n   <component id=\"e-exception\" type=\"Foreach\">\n     <inherited-binding name=\"source\" parameter-name=\"exceptions\"/>\n     <binding name=\"value\" property-path=\"exception\"/>\n@@ -30,6 +35,8 @@\n   </component>\n   \n   <component id=\"e-property\" type=\"Foreach\">\n+  \t<static-binding name=\"element\">tr</static-binding>\n+  \t<binding name=\"class\" property-path=\"beans.evenOdd.next\"/>\n     <binding name=\"source\" property-path=\"exception.properties\"/>\n   </component>\n   \n@@ -51,6 +58,7 @@\n   </component>\n   \n   <component id=\"e-stack\" type=\"Foreach\">\n+    <static-binding name=\"element\">li</static-binding>\n     <binding name=\"source\" property-path=\"exception.stackTrace\"/>\n   </component>\n   ",
                "raw_url": "https://github.com/apache/tapestry4/raw/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/html/ExceptionDisplay.jwc",
                "sha": "362413735414d5a5d26e647decdd818255374edf",
                "status": "modified"
            },
            {
                "additions": 23,
                "blob_url": "https://github.com/apache/tapestry4/blob/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/inspector/Inspector.css",
                "changes": 30,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/net/sf/tapestry/inspector/Inspector.css?ref=46a8f312c2bc1f4de03e4cb19323c2aaec060eaf",
                "deletions": 7,
                "filename": "framework/src/net/sf/tapestry/inspector/Inspector.css",
                "patch": "@@ -120,24 +120,24 @@ SPAN.request-context-object  {\n TR.request-context-section TH  {\n \ttext-align : center;\n \tcolor : White;\n-\tbackground-color : \"#330066\";\n+\tbackground-color : Blue;\n }\n \n TR.request-context-header TH  {\n \ttext-align : center;\n \tcolor : White;\n-\tbackground-color : \"#330066\";\n+\tbackground-color : Blue;\n }\n \n TABLE.request-context-object TR.odd TD  {\n \ttext-align : left;\n \tcolor : Black;\n-\tbackground-color : Silver;\n+\tbackground-color : #C0C0FF;\n }\n \n TABLE.request-context-object TR.odd TH  {\n \tcolor : Black;\n-\tbackground-color : Silver;\n+\tbackground-color : #C0C0FF;\n \ttext-align : right;\n }\n \n@@ -158,16 +158,32 @@ TABLE.request-context-object TR  {\n \tvertical-align : text-top;\n }\n \n-TABLE.exception-display TR.property  {\n+TABLE.exception-display TR.even  {\n \ttop : auto;\n }\n \n-TABLE.exception-display TR.property TH  {\n+TABLE.exception-displaY TD\n+{\n+\twidth: 100%;\n+}\n+\n+TABLE.exception-display TR.even TH  {\n+\ttext-align : right;\n+\tfont-weight : bold;\n+}\n+\n+TABLE.exception-display TR.odd TD  {\n+\ttext-align : left;\n+\tbackground-color : #C0C0FF;\n+}\n+\n+TABLE.exception-display TR.odd TH  {\n \ttext-align : right;\n \tfont-weight : bold;\n+\tbackground-color : #C0C0FF;\t\n }\n \n-TABLE.exception-display TR.property TD  {\n+TABLE.exception-display TR.even TD  {\n \ttext-align : left;\n }\n ",
                "raw_url": "https://github.com/apache/tapestry4/raw/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/inspector/Inspector.css",
                "sha": "4d02c3d519fcf7b8f86c27baa27a233faa437b24",
                "status": "modified"
            },
            {
                "additions": 54,
                "blob_url": "https://github.com/apache/tapestry4/blob/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/pages/Exception.css",
                "changes": 68,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/net/sf/tapestry/pages/Exception.css?ref=46a8f312c2bc1f4de03e4cb19323c2aaec060eaf",
                "deletions": 14,
                "filename": "framework/src/net/sf/tapestry/pages/Exception.css",
                "patch": "@@ -16,18 +16,23 @@ A:Hover  {}\n \n BODY  {}\n \n-TABLE.exception-display TR.property  {\n+TABLE.exception-display TR.even  {\n \ttop : auto;\n-\tbackground-color : Silver;\n }\n \n-TABLE.exception-display TR.property TH  {\n+TABLE.exception-display TR.odd  {\n+\ttop : auto;\n+\tbackground-color : #C0C0FF;\n+}\n+\n+TABLE.exception-display TH  {\n \ttext-align : right;\n \tfont-weight : bold;\n }\n \n-TABLE.exception-display TR.property TD  {\n+TABLE.exception-display TD  {\n \ttext-align : left;\n+\twidth : 100%;\t\n }\n \n TABLE.exception-display TR.stack-trace  {\n@@ -60,7 +65,7 @@ TR.request-context-section TH  {\n \tfont-weight : bold;\n \ttext-align : center;\n \tcolor : White;\n-\tbackground-color : Black;\n+\tbackground-color : Blue;\n }\n \n TR.request-context-header TH  {\n@@ -69,18 +74,24 @@ TR.request-context-header TH  {\n \tfont-weight : bold;\n \ttext-align : center;\n \tcolor : White;\n-\tbackground-color : Black;\n+\tbackground-color : Blue;\n+}\n+\n+TABLE.request-context-object TD\n+{\n+\twidth: 100%;\n }\n \n TABLE.request-context-object TR.odd TD  {\n \ttext-align : left;\n \tcolor : Black;\n-\tbackground-color : Silver;\n+\tbackground-color : #C0C0FF;\n+\twidth: 100%;\n }\n \n TABLE.request-context-object TR.odd TH  {\n \tcolor : Black;\n-\tbackground-color : Silver;\n+\tbackground-color : #C0C0FF;\n \ttext-align : right;\n }\n \n@@ -100,9 +111,38 @@ TABLE.request-context-object TR  {\n \tvertical-align : text-top;\n }\n \n-UL \n-{\n-\tmargin-top: 0px;\n-\tmargin-bottom: 0px;\n-\tmargin-left: 20px;\n-}\n\\ No newline at end of file\n+UL  {\n+\tmargin-top : 0px;\n+\tmargin-bottom : 0px;\n+\tmargin-left : 20px;\n+}\n+\n+TABLE.exception-display TR.exception-name TD  {\n+\tfont-size : larger;\n+\tfont-weight : bold;\n+\ttext-align : center;\n+\tbackground-color : Blue;\n+\tcolor : White;\n+}\n+\n+TABLE.exception-display  {\n+\twidth : 100%;\n+}\n+\n+TABLE.exception-display TR.exception-message TD  {\n+\tborder-width : 1;\n+\tborder-color : Black;\n+\tborder-style : solid;\n+\tpadding : 2;\n+\ttext-align : left;\n+\tfont-style : italic;\n+}\n+\n+TABLE.exception-display TR.strack-trace-label TD  {\n+\tmargin : 2;\n+\tborder-width : 1;\n+\tborder-color : Black;\n+\tborder-style : solid;\n+\ttext-align : center;\n+}\n+",
                "raw_url": "https://github.com/apache/tapestry4/raw/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/pages/Exception.css",
                "sha": "e6f19213aa864a1a212398afd30b38af466dc8a4",
                "status": "modified"
            },
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/tapestry4/blob/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/valid/ValidField.java",
                "changes": 22,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/net/sf/tapestry/valid/ValidField.java?ref=46a8f312c2bc1f4de03e4cb19323c2aaec060eaf",
                "deletions": 10,
                "filename": "framework/src/net/sf/tapestry/valid/ValidField.java",
                "patch": "@@ -150,9 +150,7 @@\n  *\n  **/\n \n-public class ValidField\n-    extends AbstractTextField\n-    implements IField, IFormComponent\n+public class ValidField extends AbstractTextField implements IField, IFormComponent\n {\n     private IBinding valueBinding;\n \n@@ -190,7 +188,7 @@ public void setDisplayNameBinding(IBinding value)\n      *  is direction custom, allowing it to be resolved even when not renderring.\n      * \n      **/\n-    \n+\n     public String getDisplayName()\n     {\n         // Return the static value, if known.\n@@ -203,15 +201,14 @@ public String getDisplayName()\n         return displayNameBinding.getString();\n     }\n \n-\n     /**\n      *\n-     * Renders the component, which involves the {@link IValidationDelegate delegate}.\n+     *  Renders the component, which involves the {@link IValidationDelegate delegate}.\n      *\n-     * <p>During a render, the <em>first</em> field rendered that is either\n-     * in error, or required but null gets special treatment.  JavaScript is added\n-     * to select that field (such that the cursor jumps right to the field when the\n-     * page loads).\n+     *  <p>During a render, the <em>first</em> field rendered that is either\n+     *  in error, or required but null gets special treatment.  JavaScript is added\n+     *  to select that field (such that the cursor jumps right to the field when the\n+     *  page loads).\n      *\n      **/\n \n@@ -220,6 +217,11 @@ protected void renderComponent(IMarkupWriter writer, IRequestCycle cycle)\n     {\n         IValidationDelegate delegate = getForm().getDelegate();\n \n+        if (delegate == null)\n+            throw new RequestCycleException(\n+                Tapestry.getString(\"ValidField.no-delegate\", getExtendedId(), getForm().getExtendedId()),\n+                this);\n+\n         String displayName = null;\n \n         boolean rendering = !cycle.isRewinding();",
                "raw_url": "https://github.com/apache/tapestry4/raw/46a8f312c2bc1f4de03e4cb19323c2aaec060eaf/framework/src/net/sf/tapestry/valid/ValidField.java",
                "sha": "0c774de9953a4a0b046c0c57ddd5a7e14dc8dbd0",
                "status": "modified"
            }
        ],
        "message": " [ 566158 ] ValidField NPE if no delegate\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/tapestry/trunk@242590 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/tapestry4/commit/da42fb0784c6b709280df9f0d2792c868a69734b",
        "repo": "tapestry4",
        "unit_tests": [
            "TestValidField.java"
        ]
    },
    "tapestry4_909723a": {
        "bug_id": "tapestry4_909723a",
        "commit": "https://github.com/apache/tapestry4/commit/909723a2759dc41524d42e1563ddcad2655b1281",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tapestry4/blob/909723a2759dc41524d42e1563ddcad2655b1281/framework/src/org/apache/tapestry/valid/PatternValidator.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/org/apache/tapestry/valid/PatternValidator.java?ref=909723a2759dc41524d42e1563ddcad2655b1281",
                "deletions": 1,
                "filename": "framework/src/org/apache/tapestry/valid/PatternValidator.java",
                "patch": "@@ -291,6 +291,6 @@ public String toString()\n             + \"; Script Path: \"\n             + _scriptPath\n             + \"; Pattern Delegate: \"\n-            + _patternDelegate.toString();\n+            + _patternDelegate;\n     }\n }",
                "raw_url": "https://github.com/apache/tapestry4/raw/909723a2759dc41524d42e1563ddcad2655b1281/framework/src/org/apache/tapestry/valid/PatternValidator.java",
                "sha": "98b8eadd2a675caf78b833494411ce0c16efdc9a",
                "status": "modified"
            }
        ],
        "message": "Fixed Bug: 26599; NPE in toString() reported by Michael.Frericks@sparkassen-informatik.de\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/tapestry/trunk@243762 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/tapestry4/commit/528d4e2cb9db38f43a61e07d213d15624dd943aa",
        "repo": "tapestry4",
        "unit_tests": [
            "TestPatternValidator.java"
        ]
    },
    "tapestry4_fa1d223": {
        "bug_id": "tapestry4_fa1d223",
        "commit": "https://github.com/apache/tapestry4/commit/fa1d223e7783eb1fd3e4500023ba3775b868c337",
        "file": [
            {
                "additions": 21,
                "blob_url": "https://github.com/apache/tapestry4/blob/fa1d223e7783eb1fd3e4500023ba3775b868c337/framework/src/com/primix/tapestry/form/Submit.java",
                "changes": 31,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/com/primix/tapestry/form/Submit.java?ref=fa1d223e7783eb1fd3e4500023ba3775b868c337",
                "deletions": 10,
                "filename": "framework/src/com/primix/tapestry/form/Submit.java",
                "patch": "@@ -215,16 +215,27 @@ public void render(IResponseWriter writer, IRequestCycle cycle)\n \t\t\tif (value == null)\n \t\t\t\treturn;\n \n-\t\t\t// OK, now to notify the application code (via the parameters)\n-\t\t\t// that *this* Submit was selected.  We do this by applying\n-\t\t\t// a tag (presumably, specific to the Submit in question)\n-\t\t\t// to the selected binding.\n-\n-\t\t\tif (tagValue == null)\n-\t\t\t\ttagValue = tagBinding.getObject();\n-\n-\t\t\tif (tagValue != null)\n-\t\t\t\tselectedBinding.setObject(tagValue);\n+\t\t\tif (selectedBinding != null)\n+    \t\t\t{\n+    \t\t\t// OK, now to notify the application code (via the parameters)\n+    \t\t\t// that *this* Submit was selected.  We do this by applying\n+    \t\t\t// a tag (presumably, specific to the Submit in question)\n+    \t\t\t// to the selected binding.\n+    \n+\t\t\t\tif (tagBinding == null)\n+\t\t\t\t\tthrow new RequestCycleException(\n+\t\t\t\t\t\t\"The tag parameter is required if the selected parameter is bound.\",\n+\t\t\t\t\t\tthis);\n+\n+    \t\t\tif (tagValue == null)\n+    \t\t\t\ttagValue = tagBinding.getObject();\n+    \n+ \t\t\t\tif (tagValue == null)\n+\t\t\t\t\tthrow new RequiredParameterException(this, \"tag\", tagBinding);\n+\n+\t   \t\t\tif (tagValue != null)\n+    \t\t\t\tselectedBinding.setObject(tagValue);\n+\t\t\t}\n \n \t\t\tif (listenerBinding != null)\n \t\t\t{",
                "raw_url": "https://github.com/apache/tapestry4/raw/fa1d223e7783eb1fd3e4500023ba3775b868c337/framework/src/com/primix/tapestry/form/Submit.java",
                "sha": "18b9da8552ec19a460ec33fa74021f398d69a669",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/tapestry4/blob/fa1d223e7783eb1fd3e4500023ba3775b868c337/framework/src/com/primix/tapestry/form/Submit.jwc",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/tapestry4/contents/framework/src/com/primix/tapestry/form/Submit.jwc?ref=fa1d223e7783eb1fd3e4500023ba3775b868c337",
                "deletions": 2,
                "filename": "framework/src/com/primix/tapestry/form/Submit.jwc",
                "patch": "@@ -4,8 +4,8 @@\n <specification class=\"com.primix.tapestry.form.Submit\" allow-body=\"no\">\n   <parameter name=\"label\" java-type=\"java.lang.String\"/>\n   <parameter name=\"disabled\"/>\n-  <parameter name=\"selected\">\n-  <parameter name=\"tag\">\n+  <parameter name=\"selected\"/>\n+  <parameter name=\"tag\"/>\n   <parameter name=\"listener\" java-type=\"com.primix.tapestry.IActionListener\"/>\n   \n   <reserved-parameter name=\"name\"/>",
                "raw_url": "https://github.com/apache/tapestry4/raw/fa1d223e7783eb1fd3e4500023ba3775b868c337/framework/src/com/primix/tapestry/form/Submit.jwc",
                "sha": "064c6d4fc05697b1797b27ddff16d3ad1ba215d7",
                "status": "modified"
            }
        ],
        "message": "[ 532562 ] Submit.jwc contains error\n[ 532587 ] Submit throws NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/tapestry/trunk@242454 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/tapestry4/commit/7913ff033feac8e7e419f550817cd191473e2618",
        "repo": "tapestry4",
        "unit_tests": [
            "TestSubmit.java"
        ]
    }
}