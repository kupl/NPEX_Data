{
    "james-project_b0d973c": {
        "bug_id": "james-project_b0d973c",
        "commit": "https://github.com/apache/james-project/commit/b0d973c0d86395789e2f2036750d2f8bfaa5fdc3",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/james-project/blob/b0d973c0d86395789e2f2036750d2f8bfaa5fdc3/server/data/data-library/src/main/java/org/apache/james/domainlist/lib/AbstractDomainList.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/james-project/contents/server/data/data-library/src/main/java/org/apache/james/domainlist/lib/AbstractDomainList.java?ref=b0d973c0d86395789e2f2036750d2f8bfaa5fdc3",
                "deletions": 5,
                "filename": "server/data/data-library/src/main/java/org/apache/james/domainlist/lib/AbstractDomainList.java",
                "patch": "@@ -119,7 +119,7 @@ public String getDefaultDomain() throws DomainListException {\n         if (domains != null) {\n \n             // create mutable copy, some subclasses return ImmutableList\n-            domains = new ArrayList<String>(domains);\n+            ArrayList<String> mutableDomains = new ArrayList<String>(domains);\n \n             String hostName;\n             try {\n@@ -131,20 +131,22 @@ public String getDefaultDomain() throws DomainListException {\n             getLogger().info(\"Local host is: \" + hostName);\n \n             if (autoDetect && (!hostName.equals(\"localhost\"))) {\n-                domains.add(hostName.toLowerCase(Locale.US));\n+                mutableDomains.add(hostName.toLowerCase(Locale.US));\n             }\n \n             if (autoDetectIP) {\n-                domains.addAll(getDomainsIP(domains, dns, getLogger()));\n+                mutableDomains.addAll(getDomainsIP(mutableDomains, dns, getLogger()));\n             }\n \n             if (getLogger().isInfoEnabled()) {\n-                for (String domain : domains) {\n+                for (String domain : mutableDomains) {\n                     getLogger().debug(\"Handling mail for: \" + domain);\n                 }\n             }\n+\n+            return ImmutableList.copyOf(mutableDomains);\n         }\n-        return ImmutableList.copyOf(domains);\n+        return ImmutableList.of();// empty list\n     }\n \n     /**",
                "raw_url": "https://github.com/apache/james-project/raw/b0d973c0d86395789e2f2036750d2f8bfaa5fdc3/server/data/data-library/src/main/java/org/apache/james/domainlist/lib/AbstractDomainList.java",
                "sha": "c84e836c205d97fba8bb53fcd43d7a2b03ad3bda",
                "status": "modified"
            }
        ],
        "message": "improved fix for JAMES-1815, also fixes potential NPE",
        "parent": "https://github.com/apache/james-project/commit/cbd2bdf62ff989a18de614de389568a604968814",
        "repo": "james-project",
        "unit_tests": [
            "AbstractDomainListTest.java"
        ]
    }
}