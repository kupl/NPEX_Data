{
    "turbine-core_01517ba": {
        "bug_id": "turbine-core_01517ba",
        "commit": "https://github.com/apache/turbine-core/commit/01517ba2b5ae102dd5950a337624edf5b0e5ff81",
        "file": [
            {
                "additions": 15,
                "blob_url": "https://github.com/apache/turbine-core/blob/01517ba2b5ae102dd5950a337624edf5b0e5ff81/src/java/org/apache/turbine/Turbine.java",
                "changes": 27,
                "contents_url": "https://api.github.com/repos/apache/turbine-core/contents/src/java/org/apache/turbine/Turbine.java?ref=01517ba2b5ae102dd5950a337624edf5b0e5ff81",
                "deletions": 12,
                "filename": "src/java/org/apache/turbine/Turbine.java",
                "patch": "@@ -84,6 +84,7 @@\n import org.apache.turbine.modules.ActionLoader;\n import org.apache.turbine.modules.PageLoader;\n \n+import org.apache.turbine.services.ServiceManager;\n import org.apache.turbine.services.TurbineServices;\n import org.apache.turbine.services.avaloncomponent.AvalonComponentService;\n import org.apache.turbine.services.component.ComponentService;\n@@ -186,9 +187,6 @@\n      */\n     private static String webappRoot;\n \n-    /** instance of turbine services */\n-    private static TurbineServices serviceManager = null;\n-\n     /** Our internal configuration object */\n     private static Configuration configuration = null;\n \n@@ -325,8 +323,6 @@ private void configure(ServletConfig config, ServletContext context)\n         String confPath;\n         String confStyle = \"unset\";\n \n-\n-\n         if (StringUtils.isNotEmpty(confFile))\n         {\n             confPath = getRealPath(confFile);\n@@ -395,10 +391,7 @@ private void configure(ServletConfig config, ServletContext context)\n         setTurbineServletConfig(config);\n         setTurbineServletContext(context);\n \n-        // Get the instance of the service manager\n-        serviceManager = (TurbineServices) TurbineServices.getInstance();\n-\n-        serviceManager.setApplicationRoot(applicationRoot);\n+        getServiceManager().setApplicationRoot(applicationRoot);\n \n         // We want to set a few values in the configuration so\n         // that ${variable} interpolation will work for\n@@ -420,13 +413,13 @@ private void configure(ServletConfig config, ServletContext context)\n                                   AvalonComponentService.SERVICE_NAME + \".earlyInit\",\n                                   Boolean.TRUE);\n \n-        serviceManager.setConfiguration(configuration);\n+        getServiceManager().setConfiguration(configuration);\n \n         // Initialize the service manager. Services\n         // that have its 'earlyInit' property set to\n         // a value of 'true' will be started when\n         // the service manager is initialized.\n-        serviceManager.init();\n+        getServiceManager().init();\n     }\n \n     /**\n@@ -661,7 +654,7 @@ public static ServletContext getTurbineServletContext()\n     public final void destroy()\n     {\n         // Shut down all Turbine Services.\n-        serviceManager.shutdownServices();\n+        getServiceManager().shutdownServices();\n         System.gc();\n \n         log.info(\"Turbine: Done shutting down!\");\n@@ -1131,4 +1124,14 @@ public static String getRealPath(String path)\n \n         return new File(getApplicationRoot(), path).getAbsolutePath();\n     }\n+\n+    /**\n+     * Return an instance of the currently configured Service Manager\n+     *\n+     * @return A service Manager instance\n+     */\n+    private ServiceManager getServiceManager()\n+    {\n+        return TurbineServices.getInstance();\n+    }\n }",
                "raw_url": "https://github.com/apache/turbine-core/raw/01517ba2b5ae102dd5950a337624edf5b0e5ff81/src/java/org/apache/turbine/Turbine.java",
                "sha": "6c468b7599abf5b7019b47db10b22e4df09ed4ee",
                "status": "modified"
            },
            {
                "additions": 99,
                "blob_url": "https://github.com/apache/turbine-core/blob/01517ba2b5ae102dd5950a337624edf5b0e5ff81/src/test/org/apache/turbine/DestroyTest.java",
                "changes": 99,
                "contents_url": "https://api.github.com/repos/apache/turbine-core/contents/src/test/org/apache/turbine/DestroyTest.java?ref=01517ba2b5ae102dd5950a337624edf5b0e5ff81",
                "deletions": 0,
                "filename": "src/test/org/apache/turbine/DestroyTest.java",
                "patch": "@@ -0,0 +1,99 @@\n+package org.apache.turbine;\n+\n+/* ====================================================================\n+ * The Apache Software License, Version 1.1\n+ *\n+ * Copyright (c) 2001-2003 The Apache Software Foundation.  All rights\n+ * reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions\n+ * are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright\n+ *    notice, this list of conditions and the following disclaimer.\n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright\n+ *    notice, this list of conditions and the following disclaimer in\n+ *    the documentation and/or other materials provided with the\n+ *    distribution.\n+ *\n+ * 3. The end-user documentation included with the redistribution,\n+ *    if any, must include the following acknowledgment:\n+ *       \"This product includes software developed by the\n+ *        Apache Software Foundation (http://www.apache.org/).\"\n+ *    Alternately, this acknowledgment may appear in the software itself,\n+ *    if and wherever such third-party acknowledgments normally appear.\n+ *\n+ * 4. The names \"Apache\" and \"Apache Software Foundation\" and\n+ *    \"Apache Turbine\" must not be used to endorse or promote products\n+ *    derived from this software without prior written permission. For\n+ *    written permission, please contact apache@apache.org.\n+ *\n+ * 5. Products derived from this software may not be called \"Apache\",\n+ *    \"Apache Turbine\", nor may \"Apache\" appear in their name, without\n+ *    prior written permission of the Apache Software Foundation.\n+ *\n+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR\n+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF\n+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT\n+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n+ * SUCH DAMAGE.\n+ * ====================================================================\n+ *\n+ * This software consists of voluntary contributions made by many\n+ * individuals on behalf of the Apache Software Foundation.  For more\n+ * information on the Apache Software Foundation, please see\n+ * <http://www.apache.org/>.\n+ */\n+\n+import junit.framework.Test;\n+import junit.framework.TestCase;\n+import junit.framework.TestSuite;\n+\n+import org.apache.turbine.Turbine;\n+import org.apache.turbine.util.TurbineConfig;\n+\n+/**\n+ * Can we call \"destroy\" unconditionally on our Turbine Servlet, even if\n+ * it hasn't configured?\n+ *\n+ * @version $Id$\n+ */\n+public class DestroyTest\n+    extends TestCase\n+{\n+    private static TurbineConfig tc = null;\n+\n+    public DestroyTest(String name)\n+    {\n+        super(name);\n+        tc = new TurbineConfig(\".\", \"/conf/test/TemplateService.properties\");\n+    }\n+\n+    public static Test suite()\n+    {\n+        return new TestSuite(DestroyTest.class);\n+    }\n+\n+    public void testDestroy()\n+        throws Exception\n+    {\n+        Turbine t = new Turbine();\n+        t.destroy();\n+    }\n+\n+    public void testInitAndDestroy()\n+        throws Exception\n+    {\n+        tc.initialize();\n+        tc.dispose();\n+    }\n+}",
                "raw_url": "https://github.com/apache/turbine-core/raw/01517ba2b5ae102dd5950a337624edf5b0e5ff81/src/test/org/apache/turbine/DestroyTest.java",
                "sha": "1b40c28a4ebcf2910fbc41b41385e410c996179c",
                "status": "added"
            }
        ],
        "message": "Move the serviceManager member into a getter so we can assure that it is\nnever null. Makes it possible to call destroy() unconditionally on a\nTurbine object without getting NPEs.\n\nAdded a test for this.\n\nPR:\nObtained from:\nSubmitted by:\nReviewed by:\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/turbine/core/trunk@221472 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/turbine-core/commit/a5b5555e659851cdef72a3df10b423e410c65262",
        "patched_files": [
            "Turbine.java"
        ],
        "repo": "turbine-core",
        "unit_tests": [
            "TurbineTest.java",
            "DestroyTest.java"
        ]
    },
    "turbine-core_1b8d16f": {
        "bug_id": "turbine-core_1b8d16f",
        "commit": "https://github.com/apache/turbine-core/commit/1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/turbine-core/blob/1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87/src/changes/changes.xml",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/turbine-core/contents/src/changes/changes.xml?ref=1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87",
                "deletions": 0,
                "filename": "src/changes/changes.xml",
                "patch": "@@ -25,6 +25,9 @@\n \n   <body>\n     <release version=\"4.0\" date=\"in Subversion\">\n+      <action type=\"fix\" dev=\"tv\">\n+        Fix NPE in LogoutAction: draw user from session instead of RunData. Add test.\n+      </action>\n       <action type=\"update\" dev=\"tv\">\n         Update BrowserDetector to support contemporary browsers.\n       </action>",
                "raw_url": "https://github.com/apache/turbine-core/raw/1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87/src/changes/changes.xml",
                "sha": "91d86b6dec2c2cd428fa8093cb60f69720e07703",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/turbine-core/blob/1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87/src/java/org/apache/turbine/modules/actions/LogoutUser.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/turbine-core/contents/src/java/org/apache/turbine/modules/actions/LogoutUser.java?ref=1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87",
                "deletions": 2,
                "filename": "src/java/org/apache/turbine/modules/actions/LogoutUser.java",
                "patch": "@@ -63,7 +63,7 @@\n      * If this action name is the value of action.logout then we are\n      * being run before the session validator, so we don't need to\n      * set the screen (we assume that the session validator will handle\n-     * that). This is basically still here simply to preserve old behaviour\n+     * that). This is basically still here simply to preserve old behavior\n      * - it is recommended that action.logout is set to \"LogoutUser\" and\n      * that the session validator does handle setting the screen/template\n      * for a logged out (read not-logged-in) user.\n@@ -77,7 +77,9 @@ public void doPerform(PipelineData pipelineData)\n             throws FulcrumSecurityException\n     {\n         RunData data = getRunData(pipelineData);\n-        User user = data.getUser();\n+\n+        // Session validator did not run, so RunData is not populated\n+        User user = data.getUserFromSession();\n \n         if (!security.isAnonymousUser(user))\n         {",
                "raw_url": "https://github.com/apache/turbine-core/raw/1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87/src/java/org/apache/turbine/modules/actions/LogoutUser.java",
                "sha": "d564cc43a5b312dd5bf05858378ce6f565ca5d96",
                "status": "modified"
            },
            {
                "additions": 37,
                "blob_url": "https://github.com/apache/turbine-core/blob/1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87/src/test/org/apache/turbine/pipeline/DefaultLoginValveTest.java",
                "changes": 43,
                "contents_url": "https://api.github.com/repos/apache/turbine-core/contents/src/test/org/apache/turbine/pipeline/DefaultLoginValveTest.java?ref=1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87",
                "deletions": 6,
                "filename": "src/test/org/apache/turbine/pipeline/DefaultLoginValveTest.java",
                "patch": "@@ -22,6 +22,7 @@\n \n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n import static org.junit.Assert.assertNotNull;\n import static org.junit.Assert.assertTrue;\n \n@@ -61,6 +62,7 @@\n     private EnhancedMockHttpServletRequest request = null;\n     private EnhancedMockHttpSession session = null;\n     private HttpServletResponse response = null;\n+    private SecurityService securityService = null;\n \n \n     @BeforeClass\n@@ -89,22 +91,25 @@ public void setUpBefore() throws Exception {\n         session = new EnhancedMockHttpSession();\n         response = new MockHttpServletResponse();\n \n-        session.setupGetAttribute(User.SESSION_KEY, null);\n-\n         request.setSession(session);\n \n         // User must exist\n-        SecurityService securityService = (SecurityService)TurbineServices.getInstance().getService(SecurityService.SERVICE_NAME);\n-        User user = securityService.getUserInstance();\n-        user.setName(\"username\");\n-        securityService.addUser(user, \"password\");\n+        securityService = (SecurityService)TurbineServices.getInstance().getService(SecurityService.SERVICE_NAME);\n+        if (!securityService.accountExists(\"username\"))\n+        {\n+            User user = securityService.getUserInstance();\n+            user.setName(\"username\");\n+            securityService.addUser(user, \"password\");\n+        }\n     }\n \n     /**\n      * Tests the Valve.\n      */\n     @Test public void testDefaults() throws Exception\n     {\n+        session.setupGetAttribute(User.SESSION_KEY, null);\n+\n         Vector<String> v = new Vector<String>();\n         v.add(LoginUser.CGI_USERNAME);\n         v.add(LoginUser.CGI_PASSWORD);\n@@ -130,6 +135,32 @@ public void setUpBefore() throws Exception {\n         assertTrue(user.hasLoggedIn());\n     }\n \n+    /**\n+     * Tests the LogoutAction.\n+     */\n+    @Test public void testLogout() throws Exception\n+    {\n+        User user = securityService.getUser(\"username\");\n+        user.setHasLoggedIn(Boolean.TRUE);\n+        session.setupGetAttribute(User.SESSION_KEY, user);\n+\n+        RunData runData = getRunData(request,response,config);\n+        runData.setAction(TurbineConstants.ACTION_LOGOUT_DEFAULT);\n+\n+        Pipeline pipeline = new TurbinePipeline();\n+        PipelineData pipelineData = runData;\n+\n+        DefaultLoginValve valve = new DefaultLoginValve();\n+        pipeline.addValve(valve);\n+        pipeline.initialize();\n+\n+        pipeline.invoke(pipelineData);\n+        user = runData.getUser();\n+        assertNotNull(user);\n+        assertTrue(securityService.isAnonymousUser(user));\n+        assertFalse(user.hasLoggedIn());\n+    }\n+\n     @AfterClass\n     public static void destroy() {\n         tc.dispose();",
                "raw_url": "https://github.com/apache/turbine-core/raw/1b8d16fbbf5b32c8c5773fd29b2f8b3c31ebad87/src/test/org/apache/turbine/pipeline/DefaultLoginValveTest.java",
                "sha": "9606f79d81247b647b7096405157ce483c00dc97",
                "status": "modified"
            }
        ],
        "message": "Fix NPE in LogoutAction: draw user from session instead of RunData. Add test.\n\ngit-svn-id: https://svn.apache.org/repos/asf/turbine/core/trunk@1754670 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/turbine-core/commit/153cece7e73ea683bfa35062c83f4f0c9c3775da",
        "patched_files": [
            "changes.xml",
            "LogoutUser.java",
            "DefaultLoginValve.java"
        ],
        "repo": "turbine-core",
        "unit_tests": [
            "DefaultLoginValveTest.java"
        ]
    },
    "turbine-core_23d175c": {
        "bug_id": "turbine-core_23d175c",
        "commit": "https://github.com/apache/turbine-core/commit/23d175ccdd42dce3cb31469414c48c2b39e76b92",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/turbine-core/blob/23d175ccdd42dce3cb31469414c48c2b39e76b92/src/java/org/apache/turbine/util/BrowserDetector.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/turbine-core/contents/src/java/org/apache/turbine/util/BrowserDetector.java?ref=23d175ccdd42dce3cb31469414c48c2b39e76b92",
                "deletions": 1,
                "filename": "src/java/org/apache/turbine/util/BrowserDetector.java",
                "patch": "@@ -232,10 +232,15 @@ private void parse()\n         // Modificaton by Chris Mospaw <mospaw@polk-county.com>\n         if (userAgentString.indexOf(OPERA) != -1)\n         {\n-            //Ex: Mozilla/4.0 (Windows NT 4.0;US) Opera 3.61  [en]\n+            // Ex: Mozilla/4.0 (Windows NT 4.0;US) Opera 3.61  [en]\n+            // Ex: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; en) Opera 8.02\n             versionStartIndex = (userAgentString.indexOf(OPERA) \n                     + OPERA.length() + 1);\n             versionEndIndex = userAgentString.indexOf(\" \", versionStartIndex);\n+            if (versionEndIndex == -1)\n+            {\n+                versionEndIndex = userAgentString.length();\n+            }\n \n             browserName = OPERA;\n             try",
                "raw_url": "https://github.com/apache/turbine-core/raw/23d175ccdd42dce3cb31469414c48c2b39e76b92/src/java/org/apache/turbine/util/BrowserDetector.java",
                "sha": "e189d5987ca23613c7aa4f552f9321390fbf5148",
                "status": "modified"
            },
            {
                "additions": 73,
                "blob_url": "https://github.com/apache/turbine-core/blob/23d175ccdd42dce3cb31469414c48c2b39e76b92/src/test/org/apache/turbine/util/BrowserDetectorTest.java",
                "changes": 73,
                "contents_url": "https://api.github.com/repos/apache/turbine-core/contents/src/test/org/apache/turbine/util/BrowserDetectorTest.java?ref=23d175ccdd42dce3cb31469414c48c2b39e76b92",
                "deletions": 0,
                "filename": "src/test/org/apache/turbine/util/BrowserDetectorTest.java",
                "patch": "@@ -0,0 +1,73 @@\n+package org.apache.turbine.util;\n+\n+/*\n+ * Copyright 2005 The Apache Software Foundation.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\")\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+import org.apache.turbine.test.BaseTestCase;\n+\n+/**\n+ * Testing of the BrowserDetector class.\n+ *\n+ * @author <a href=\"mailto:seade@backstagetech.com.au\">Scott Eade</a>\n+ * @version $Id$\n+ */\n+public class BrowserDetectorTest extends BaseTestCase\n+{\n+    public BrowserDetectorTest(String name) throws Exception\n+    {\n+        super(name);\n+    }\n+\n+    public void testFirefox()\n+    {\n+        String userAgent = \"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8) Gecko/20051111 Firefox/1.5\";\n+        BrowserDetector bd = new BrowserDetector(userAgent);\n+        assertEquals(BrowserDetector.MOZILLA, bd.getBrowserName());\n+        // Should this really be 5?\n+        assertEquals(5f, bd.getBrowserVersion(), 0.0f);\n+        assertEquals(BrowserDetector.WINDOWS, bd.getBrowserPlatform());\n+    }\n+\n+    public void testOpera()\n+    {\n+        String userAgent = \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; en) Opera 8.02\";\n+        BrowserDetector bd = new BrowserDetector(userAgent);\n+        assertEquals(BrowserDetector.OPERA, bd.getBrowserName());\n+        assertEquals(8.02f, bd.getBrowserVersion(), 0.0f);\n+        assertEquals(BrowserDetector.WINDOWS, bd.getBrowserPlatform());\n+\n+        userAgent = \"Opera/7.51 (Windows NT 5.1; U) [en]\";\n+        bd = new BrowserDetector(userAgent);\n+        assertEquals(BrowserDetector.OPERA, bd.getBrowserName());\n+        assertEquals(7.51f, bd.getBrowserVersion(), 0.0f);\n+        assertEquals(BrowserDetector.WINDOWS, bd.getBrowserPlatform());\n+    }\n+\n+    public void testIE()\n+    {\n+        String userAgent = \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)\";\n+        BrowserDetector bd = new BrowserDetector(userAgent);\n+        assertEquals(BrowserDetector.MSIE, bd.getBrowserName());\n+        assertEquals(6.0f, bd.getBrowserVersion(), 0.0f);\n+        assertEquals(BrowserDetector.WINDOWS, bd.getBrowserPlatform());\n+\n+        userAgent = \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322)\";\n+        bd = new BrowserDetector(userAgent);\n+        assertEquals(BrowserDetector.MSIE, bd.getBrowserName());\n+        assertEquals(6.0f, bd.getBrowserVersion(), 0.0f);\n+        assertEquals(BrowserDetector.WINDOWS, bd.getBrowserPlatform());\n+    }\n+}",
                "raw_url": "https://github.com/apache/turbine-core/raw/23d175ccdd42dce3cb31469414c48c2b39e76b92/src/test/org/apache/turbine/util/BrowserDetectorTest.java",
                "sha": "dac371dfa5a8ae531eb318cb4a9304cdefeba305",
                "status": "added"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/turbine-core/blob/23d175ccdd42dce3cb31469414c48c2b39e76b92/xdocs/changes.xml",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/turbine-core/contents/xdocs/changes.xml?ref=23d175ccdd42dce3cb31469414c48c2b39e76b92",
                "deletions": 1,
                "filename": "xdocs/changes.xml",
                "patch": "@@ -24,8 +24,12 @@\n \n   <body>\n     <release version=\"2.4-M2\" date=\"in cvs\">\n+      <action dev=\"seade\" type=\"fix\">\n+        BrowserDetector was throwing a NPE for recent versions of Opera - this\n+        has been fixed.\n+      </action>\n       <action dev=\"sgoeschl\" type=\"update\">\n-\t\t\t\tSetting all members of BaseServiceBroker to private as it should be.\n+        Setting all members of BaseServiceBroker to private as it should be.\n       </action>\n       <action dev=\"sgoeschl\" type=\"update\">\n         Removed hack in Turbine.java forcing an early init of the AvalonComponentService. The",
                "raw_url": "https://github.com/apache/turbine-core/raw/23d175ccdd42dce3cb31469414c48c2b39e76b92/xdocs/changes.xml",
                "sha": "8ed1c40532244da349ac62a1a5d23d6c9fb6bee4",
                "status": "modified"
            }
        ],
        "message": "BrowserDetector was throwing an NPE for recent versions of Opera.\r\nAdded a test case.\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/turbine/core/trunk@350121 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/turbine-core/commit/79fd45484baf06b4e48945b47a718c0d2a611a92",
        "patched_files": [
            "changes.xml",
            "BrowserDetector.java"
        ],
        "repo": "turbine-core",
        "unit_tests": [
            "BrowserDetectorTest.java"
        ]
    },
    "turbine-core_2bdfaf7": {
        "bug_id": "turbine-core_2bdfaf7",
        "commit": "https://github.com/apache/turbine-core/commit/2bdfaf7f54f805491d635f14612918e77f21fbee",
        "file": [
            {
                "additions": 137,
                "blob_url": "https://github.com/apache/turbine-core/blob/2bdfaf7f54f805491d635f14612918e77f21fbee/src/test-cactus/org/apache/turbine/om/security/TurbineUserTest.java",
                "changes": 137,
                "contents_url": "https://api.github.com/repos/apache/turbine-core/contents/src/test-cactus/org/apache/turbine/om/security/TurbineUserTest.java?ref=2bdfaf7f54f805491d635f14612918e77f21fbee",
                "deletions": 0,
                "filename": "src/test-cactus/org/apache/turbine/om/security/TurbineUserTest.java",
                "patch": "@@ -0,0 +1,137 @@\n+package org.apache.turbine.om.security;\n+\n+/* ====================================================================\n+ * The Apache Software License, Version 1.1\n+ *\n+ * Copyright (c) 2001 The Apache Software Foundation.  All rights\n+ * reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions\n+ * are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright\n+ *    notice, this list of conditions and the following disclaimer.\n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright\n+ *    notice, this list of conditions and the following disclaimer in\n+ *    the documentation and/or other materials provided with the\n+ *    distribution.\n+ *\n+ * 3. The end-user documentation included with the redistribution,\n+ *    if any, must include the following acknowledgment:\n+ *       \"This product includes software developed by the\n+ *        Apache Software Foundation (http://www.apache.org/).\"\n+ *    Alternately, this acknowledgment may appear in the software itself,\n+ *    if and wherever such third-party acknowledgments normally appear.\n+ *\n+ * 4. The names \"Apache\" and \"Apache Software Foundation\" and\n+ *    \"Apache Turbine\" must not be used to endorse or promote products\n+ *    derived from this software without prior written permission. For\n+ *    written permission, please contact apache@apache.org.\n+ *\n+ * 5. Products derived from this software may not be called \"Apache\",\n+ *    \"Apache Turbine\", nor may \"Apache\" appear in their name, without\n+ *    prior written permission of the Apache Software Foundation.\n+ *\n+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR\n+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF\n+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT\n+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n+ * SUCH DAMAGE.\n+ * ====================================================================\n+ *\n+ * This software consists of voluntary contributions made by many\n+ * individuals on behalf of the Apache Software Foundation.  For more\n+ * information on the Apache Software Foundation, please see\n+ * <http://www.apache.org/>.\n+ */\n+\n+import java.io.CharArrayReader;\n+import java.io.IOException;\n+\n+import junit.framework.Test;\n+import junit.framework.TestSuite;\n+\n+import org.apache.cactus.ServletTestCase;\n+import org.apache.turbine.Turbine;\n+\n+/**\n+ * Test the CSVParser.\n+ *\n+ * NOTE : I am assuming (as is in the code of DataStreamParser.java\n+ * that the values are reusing the same object for the values.\n+ * If this shouldn't be, we need to fix that in the code!.\n+ *\n+ * @author <a href=\"mailto:martin@mvdb.net\">Martin van den Bemt</a>\n+ * @version $Id$\n+ */\n+public class TurbineUserTest extends ServletTestCase\n+{\n+\n+    Turbine turbine = null;\n+\n+    /**\n+     * Constructor for TurbineUserTest.\n+     * @param arg0\n+     */\n+    public TurbineUserTest(String name)\n+    {\n+        super(name);\n+    }\n+\n+    /**\n+     * This will setup an instance of turbine to use when testing\n+     * @exception if an exception occurs.\n+     */\n+\n+    protected void setUp() throws Exception\n+    {\n+        super.setUp();\n+\n+        config.setInitParameter(\"properties\", \"/WEB-INF/conf/TurbineComplete.properties\");\n+        turbine = new Turbine();\n+        turbine.init(config);\n+    }\n+\n+    /**\n+     * Shut down our turbine servlet and let our parents clean up also.\n+     *\n+     * @exception Exception if an error occurs\n+     */\n+    protected void tearDown() throws Exception\n+    {\n+        turbine.destroy();\n+        super.tearDown();\n+    }\n+\n+    /**\n+     * Return a test suite of all our tests.\n+     *\n+     * @return a <code>Test</code> value\n+     */\n+    public static Test suite()\n+    {\n+        return new TestSuite(TurbineUserTest.class);\n+    }\n+\n+    /**\n+     * Tests if a TurbineUser can be created.\n+     */\n+    public void testCreatingTurbineUser() throws Exception\n+    {\n+        TurbineUser user = null;\n+        \n+        user = new TurbineUser();\n+\n+        assertNotNull(user);\n+    }\n+\n+}",
                "raw_url": "https://github.com/apache/turbine-core/raw/2bdfaf7f54f805491d635f14612918e77f21fbee/src/test-cactus/org/apache/turbine/om/security/TurbineUserTest.java",
                "sha": "2abf2a69e8959f017593756770ec44ad87732d34",
                "status": "added"
            }
        ],
        "message": "Initial cut at a TurbineUser Test case.  This test case seems to highlight that \r\nI can NOT create a turbine user.  I get a NPE.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/turbine/core/trunk@221404 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/turbine-core/commit/9f403dda2bf7441398067171e223f87beb21548c",
        "patched_files": [
            "TurbineUser.java"
        ],
        "repo": "turbine-core",
        "unit_tests": [
            "TurbineUserTest.java"
        ]
    }
}