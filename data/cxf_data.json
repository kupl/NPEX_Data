[
    {
        "parent": "https://github.com/apache/cxf/commit/277430f6673140643a5593b979316ff981839b2b",
        "bug_id": "cxf_1",
        "file": [
            {
                "additions": 9,
                "sha": "08e458b3545bcdac7e369215f03fc5b11cdee853",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/189b12e8ca5131f409e6fe68e6665cc9bc02b3d1/rt/ws/security/src/main/java/org/apache/cxf/ws/security/tokenstore/SecurityToken.java",
                "deletions": 2,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/tokenstore/SecurityToken.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/tokenstore/SecurityToken.java?ref=189b12e8ca5131f409e6fe68e6665cc9bc02b3d1",
                "patch": "@@ -225,13 +225,20 @@ private void processLifeTime(Element lifetimeElem) {\n                 DOMUtils.getFirstChildWithName(lifetimeElem,\n                                                 WSS4JConstants.WSU_NS,\n                                                 WSS4JConstants.CREATED_LN);\n-            this.created = ZonedDateTime.parse(DOMUtils.getContent(createdElem)).toInstant();\n+            if (createdElem == null) {\n+                // The spec says that if there is no Created Element in the Lifetime, then take the current time\n+                this.created = Instant.now();\n+            } else {\n+                this.created = ZonedDateTime.parse(DOMUtils.getContent(createdElem)).toInstant();\n+            }\n \n             Element expiresElem =\n                 DOMUtils.getFirstChildWithName(lifetimeElem,\n                                                 WSS4JConstants.WSU_NS,\n                                                 WSS4JConstants.EXPIRES_LN);\n-            this.expires = ZonedDateTime.parse(DOMUtils.getContent(expiresElem)).toInstant();\n+            if (expiresElem != null) {\n+                this.expires = ZonedDateTime.parse(DOMUtils.getContent(expiresElem)).toInstant();\n+            }\n         } catch (DateTimeParseException e) {\n             //shouldn't happen\n         }",
                "changes": 11,
                "blob_url": "https://github.com/apache/cxf/blob/189b12e8ca5131f409e6fe68e6665cc9bc02b3d1/rt/ws/security/src/main/java/org/apache/cxf/ws/security/tokenstore/SecurityToken.java"
            },
            {
                "additions": 130,
                "sha": "d8b2dea36d63f89eca9c0fff0bb8f727666a32b6",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/189b12e8ca5131f409e6fe68e6665cc9bc02b3d1/rt/ws/security/src/test/java/org/apache/cxf/ws/security/tokenstore/SecurityTokenTest.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/test/java/org/apache/cxf/ws/security/tokenstore/SecurityTokenTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/test/java/org/apache/cxf/ws/security/tokenstore/SecurityTokenTest.java?ref=189b12e8ca5131f409e6fe68e6665cc9bc02b3d1",
                "patch": "@@ -0,0 +1,130 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.cxf.ws.security.tokenstore;\n+\n+import java.time.Instant;\n+import java.time.ZoneOffset;\n+\n+import org.w3c.dom.Element;\n+\n+import org.apache.cxf.helpers.DOMUtils;\n+import org.apache.cxf.staxutils.W3CDOMStreamWriter;\n+import org.apache.cxf.ws.security.trust.STSUtils;\n+import org.apache.wss4j.common.WSS4JConstants;\n+import org.apache.wss4j.common.util.DateUtil;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+\n+public class SecurityTokenTest {\n+\n+    @org.junit.Test\n+    public void testCreateSecurityToken() throws Exception {\n+        String key = \"key\";\n+        Instant created = Instant.now();\n+        Instant expires = created.plusSeconds(20L);\n+\n+        SecurityToken token = new SecurityToken(key, created, expires);\n+        assertEquals(key, token.getId());\n+        assertEquals(created, token.getCreated());\n+        assertEquals(expires, token.getExpires());\n+    }\n+\n+    @org.junit.Test\n+    public void testParseLifetimeElement() throws Exception {\n+        String key = \"key\";\n+        Element tokenElement = DOMUtils.createDocument().createElement(\"token\");\n+\n+        // Create Lifetime\n+        W3CDOMStreamWriter writer = new W3CDOMStreamWriter();\n+        Instant created = Instant.now();\n+        Instant expires = created.plusSeconds(20L);\n+\n+        String namespace = STSUtils.WST_NS_05_12;\n+        writer.writeStartElement(\"wst\", \"Lifetime\", namespace);\n+        writer.writeNamespace(\"wst\", namespace);\n+        writer.writeNamespace(\"wsu\", WSS4JConstants.WSU_NS);\n+        writer.writeStartElement(\"wsu\", \"Created\", WSS4JConstants.WSU_NS);\n+        writer.writeCharacters(created.atZone(ZoneOffset.UTC).format(DateUtil.getDateTimeFormatter(true)));\n+        writer.writeEndElement();\n+\n+        writer.writeStartElement(\"wsu\", \"Expires\", WSS4JConstants.WSU_NS);\n+        writer.writeCharacters(expires.atZone(ZoneOffset.UTC).format(DateUtil.getDateTimeFormatter(true)));\n+        writer.writeEndElement();\n+        writer.writeEndElement();\n+\n+        SecurityToken token = new SecurityToken(key, tokenElement, writer.getDocument().getDocumentElement());\n+        assertEquals(key, token.getId());\n+        assertEquals(created, token.getCreated());\n+        assertEquals(expires, token.getExpires());\n+    }\n+\n+    @org.junit.Test\n+    public void testLifetimeNoCreated() throws Exception {\n+        String key = \"key\";\n+        Element tokenElement = DOMUtils.createDocument().createElement(\"token\");\n+\n+        // Create Lifetime\n+        W3CDOMStreamWriter writer = new W3CDOMStreamWriter();\n+        Instant created = Instant.now();\n+        Instant expires = created.plusSeconds(20L);\n+\n+        String namespace = STSUtils.WST_NS_05_12;\n+        writer.writeStartElement(\"wst\", \"Lifetime\", namespace);\n+        writer.writeNamespace(\"wst\", namespace);\n+        writer.writeNamespace(\"wsu\", WSS4JConstants.WSU_NS);\n+\n+        writer.writeStartElement(\"wsu\", \"Expires\", WSS4JConstants.WSU_NS);\n+        writer.writeCharacters(expires.atZone(ZoneOffset.UTC).format(DateUtil.getDateTimeFormatter(true)));\n+        writer.writeEndElement();\n+        writer.writeEndElement();\n+\n+        SecurityToken token = new SecurityToken(key, tokenElement, writer.getDocument().getDocumentElement());\n+        assertEquals(key, token.getId());\n+        // It should default to the current time\n+        assertNotNull(token.getCreated());\n+        assertEquals(expires, token.getExpires());\n+    }\n+\n+    @org.junit.Test\n+    public void testLifetimeNoExpires() throws Exception {\n+        String key = \"key\";\n+        Element tokenElement = DOMUtils.createDocument().createElement(\"token\");\n+\n+        // Create Lifetime\n+        W3CDOMStreamWriter writer = new W3CDOMStreamWriter();\n+        Instant created = Instant.now();\n+\n+        String namespace = STSUtils.WST_NS_05_12;\n+        writer.writeStartElement(\"wst\", \"Lifetime\", namespace);\n+        writer.writeNamespace(\"wst\", namespace);\n+        writer.writeNamespace(\"wsu\", WSS4JConstants.WSU_NS);\n+        writer.writeStartElement(\"wsu\", \"Created\", WSS4JConstants.WSU_NS);\n+        writer.writeCharacters(created.atZone(ZoneOffset.UTC).format(DateUtil.getDateTimeFormatter(true)));\n+        writer.writeEndElement();\n+\n+        writer.writeEndElement();\n+\n+        SecurityToken token = new SecurityToken(key, tokenElement, writer.getDocument().getDocumentElement());\n+        assertEquals(key, token.getId());\n+        assertEquals(created, token.getCreated());\n+        assertNull(token.getExpires());\n+    }\n+}",
                "changes": 130,
                "blob_url": "https://github.com/apache/cxf/blob/189b12e8ca5131f409e6fe68e6665cc9bc02b3d1/rt/ws/security/src/test/java/org/apache/cxf/ws/security/tokenstore/SecurityTokenTest.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-8139 - SecurityToken, parsing the lifetime may cause a NullPointerException",
        "commit": "https://github.com/apache/cxf/commit/189b12e8ca5131f409e6fe68e6665cc9bc02b3d1"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/ecb15d9ed53a1b4dd462399a33a9c4eb8a93e195",
        "bug_id": "cxf_2",
        "file": [
            {
                "additions": 18,
                "sha": "edc87322c981743a6bddabf6a8474258edb04d9e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0a51e42fcb3c783c53ed9de9a4cce455d7272ba9/systests/wsdl_maven/java2ws/pom.xml",
                "deletions": 0,
                "filename": "systests/wsdl_maven/java2ws/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/wsdl_maven/java2ws/pom.xml?ref=0a51e42fcb3c783c53ed9de9a4cce455d7272ba9",
                "patch": "@@ -69,6 +69,24 @@\n                             <goal>java2ws</goal>\n                         </goals>\n                     </execution>\n+                    <execution>\n+                        <id>process-classes2</id>\n+                        <phase>process-classes</phase>\n+                        <configuration>\n+                            <fork>${cxf.codegenplugin.forkmode}</fork>\n+                            <additionalJvmArgs>${cxf.codegen.jvmArgs}</additionalJvmArgs>\n+                            <className>org.apache.cxf.systests.java2ws.HelloWorldArgs</className>\n+                            <genWsdl>true</genWsdl>\n+                            <verbose>true</verbose>\n+                            <classifier>test</classifier>\n+                            <attachWsdl>true</attachWsdl>\n+                            <genWrapperbean>true</genWrapperbean>\n+                            <argline>-s ./target/generated-sources</argline>\n+                        </configuration>\n+                        <goals>\n+                            <goal>java2ws</goal>\n+                        </goals>\n+                    </execution>\n                 </executions>\n             </plugin>\n         </plugins>",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/0a51e42fcb3c783c53ed9de9a4cce455d7272ba9/systests/wsdl_maven/java2ws/pom.xml"
            },
            {
                "additions": 35,
                "sha": "84f0b8d10a94bbf3b0767f59a38d7c112dab550c",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/0a51e42fcb3c783c53ed9de9a4cce455d7272ba9/systests/wsdl_maven/java2ws/src/main/java/org/apache/cxf/systests/java2ws/HelloWorldArgs.java",
                "deletions": 0,
                "filename": "systests/wsdl_maven/java2ws/src/main/java/org/apache/cxf/systests/java2ws/HelloWorldArgs.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/wsdl_maven/java2ws/src/main/java/org/apache/cxf/systests/java2ws/HelloWorldArgs.java?ref=0a51e42fcb3c783c53ed9de9a4cce455d7272ba9",
                "patch": "@@ -0,0 +1,35 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.systests.java2ws;\n+\n+import java.util.Date;\n+\n+import javax.jws.WebParam;\n+import javax.jws.WebService;\n+\n+import org.apache.cxf.annotations.WSDLDocumentation;\n+\n+@WebService\n+@WSDLDocumentation(value = \"A simple service with only one method\")\n+public interface HelloWorldArgs {\n+    @WSDLDocumentation(value = \"Simply return the given text\")\n+    String sayHi(@WebParam(name = \"text\") String text, @WebParam(name = \"date\") Date date,\n+                 StringWrapper[][] wrapper);\n+}",
                "changes": 35,
                "blob_url": "https://github.com/apache/cxf/blob/0a51e42fcb3c783c53ed9de9a4cce455d7272ba9/systests/wsdl_maven/java2ws/src/main/java/org/apache/cxf/systests/java2ws/HelloWorldArgs.java"
            },
            {
                "additions": 32,
                "sha": "15415792dfd4930693c58f3773c18dda0150b65a",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/0a51e42fcb3c783c53ed9de9a4cce455d7272ba9/systests/wsdl_maven/java2ws/src/main/java/org/apache/cxf/systests/java2ws/StringWrapper.java",
                "deletions": 0,
                "filename": "systests/wsdl_maven/java2ws/src/main/java/org/apache/cxf/systests/java2ws/StringWrapper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/wsdl_maven/java2ws/src/main/java/org/apache/cxf/systests/java2ws/StringWrapper.java?ref=0a51e42fcb3c783c53ed9de9a4cce455d7272ba9",
                "patch": "@@ -0,0 +1,32 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.systests.java2ws;\n+\n+public class StringWrapper {\n+    private String value;\n+\n+    public String getValue() {\n+        return value;\n+    }\n+\n+    public void setValue(String value) {\n+        this.value = value;\n+    }\n+}\n\\ No newline at end of file",
                "changes": 32,
                "blob_url": "https://github.com/apache/cxf/blob/0a51e42fcb3c783c53ed9de9a4cce455d7272ba9/systests/wsdl_maven/java2ws/src/main/java/org/apache/cxf/systests/java2ws/StringWrapper.java"
            },
            {
                "additions": 1,
                "sha": "41a6869e500de68bdbc92e8810cd5ba35a41be94",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0a51e42fcb3c783c53ed9de9a4cce455d7272ba9/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2wsdl/processor/internal/jaxws/Wrapper.java",
                "deletions": 1,
                "filename": "tools/javato/ws/src/main/java/org/apache/cxf/tools/java2wsdl/processor/internal/jaxws/Wrapper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2wsdl/processor/internal/jaxws/Wrapper.java?ref=0a51e42fcb3c783c53ed9de9a4cce455d7272ba9",
                "patch": "@@ -182,7 +182,7 @@ protected boolean isBuiltInTypes(Class<?> clz) {\n         if (clz == null || clz.isPrimitive()) {\n             return true;\n         }\n-        return \"java.lang\".equals(clz.getPackage().getName());\n+        return clz.getPackage() != null && \"java.lang\".equals(clz.getPackage().getName());\n     }\n \n     protected List<JavaField> buildFields() {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/0a51e42fcb3c783c53ed9de9a4cce455d7272ba9/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2wsdl/processor/internal/jaxws/Wrapper.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7969 - NullPointerException in CXF JavaToWS",
        "commit": "https://github.com/apache/cxf/commit/0a51e42fcb3c783c53ed9de9a4cce455d7272ba9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f0b60da47e8a1430444551daf970c820101f516a",
        "bug_id": "cxf_3",
        "file": [
            {
                "additions": 2,
                "sha": "d23ce98f0eb54852d00def6d0117cd8aa1846d8f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/67f5befafa7b9aeb831451dbccd3a7e8993b456d/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ResponseImpl.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ResponseImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ResponseImpl.java?ref=67f5befafa7b9aeb831451dbccd3a7e8993b456d",
                "patch": "@@ -238,10 +238,10 @@ public int getLength() {\n \n     public URI getLocation() {\n         Object header = metadata.getFirst(HttpHeaders.LOCATION);\n-        if (header == null) {\n+        if (header == null && outMessage != null) {\n             header = outMessage.get(Message.REQUEST_URI);\n         }\n-        return header == null || header instanceof URI ? (URI)header\n+        return header == null || header instanceof URI ? (URI) header\n             : URI.create(header.toString());\n     }\n ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/67f5befafa7b9aeb831451dbccd3a7e8993b456d/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ResponseImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "Prevent NPE when outMessage is null",
        "commit": "https://github.com/apache/cxf/commit/67f5befafa7b9aeb831451dbccd3a7e8993b456d"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/13e1dae57f5609259f935bfe5e280862e266dcb2",
        "bug_id": "cxf_4",
        "file": [
            {
                "additions": 3,
                "sha": "6eb60e613f2f6723262b9f816a29ce28ec964aff",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b63a8fd9dc2f0aef97f99992cfa5a44b7126e597/rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java",
                "deletions": 1,
                "filename": "rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java?ref=b63a8fd9dc2f0aef97f99992cfa5a44b7126e597",
                "patch": "@@ -153,7 +153,9 @@ public void init() {\n                     if (threads.getMinThreads() != null) {\n                         rThreads.setMinThreads(threads.getMinThreads());\n                     }\n-                    rThreads.setWorkerIOThreads(threads.getWorkerIOThreads());\n+                    if (threads.getWorkerIOThreads() != null) {\n+                        rThreads.setWorkerIOThreads(threads.getWorkerIOThreads());\n+                    }\n                     eng.setThreadingParameters(rThreads);\n                 }\n ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/b63a8fd9dc2f0aef97f99992cfa5a44b7126e597/rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java"
            }
        ],
        "repo": "cxf",
        "message": "Merge pull request #511 from JiriOndrusek/CXF-7973_NPE-guard\n\nCXF-7973 Add NPE guard for jetty and undertow threads configuration",
        "commit": "https://github.com/apache/cxf/commit/b63a8fd9dc2f0aef97f99992cfa5a44b7126e597"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d3b60a4df7a5081bb62e80edef35aa456dd3fd19",
        "bug_id": "cxf_5",
        "file": [
            {
                "additions": 3,
                "sha": "6eb60e613f2f6723262b9f816a29ce28ec964aff",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c679096b685c9b50ff5eda5c477d223e913e62d9/rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java",
                "deletions": 1,
                "filename": "rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java?ref=c679096b685c9b50ff5eda5c477d223e913e62d9",
                "patch": "@@ -153,7 +153,9 @@ public void init() {\n                     if (threads.getMinThreads() != null) {\n                         rThreads.setMinThreads(threads.getMinThreads());\n                     }\n-                    rThreads.setWorkerIOThreads(threads.getWorkerIOThreads());\n+                    if (threads.getWorkerIOThreads() != null) {\n+                        rThreads.setWorkerIOThreads(threads.getWorkerIOThreads());\n+                    }\n                     eng.setThreadingParameters(rThreads);\n                 }\n ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/c679096b685c9b50ff5eda5c477d223e913e62d9/rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7973 Add NPE guard for jetty and undertow threads configuration in blueprint (to prevent NPE during karaf-quickstart/../Keycloak-cxf quickstarts)",
        "commit": "https://github.com/apache/cxf/commit/c679096b685c9b50ff5eda5c477d223e913e62d9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/ebfb3a364c496f76c8b27aacc9bdd7b8aa804602",
        "bug_id": "cxf_6",
        "file": [
            {
                "additions": 2,
                "sha": "64678893ba61e1081c5ff30ed48b051318998c74",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/203ca92cc4ba73afa4ee49f8086452bc3ca06916/core/src/main/java/org/apache/cxf/common/xmlschema/SchemaCollection.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/common/xmlschema/SchemaCollection.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/common/xmlschema/SchemaCollection.java?ref=203ca92cc4ba73afa4ee49f8086452bc3ca06916",
                "patch": "@@ -161,7 +161,8 @@ public void setSchemaResolver(URIResolver schemaResolver) {\n      */\n     public XmlSchema getSchemaByTargetNamespace(String namespaceURI) {\n         for (XmlSchema schema : schemaCollection.getXmlSchemas()) {\n-            if (namespaceURI.equals(schema.getTargetNamespace())) {\n+            if (namespaceURI != null && namespaceURI.equals(schema.getTargetNamespace())\n+                || namespaceURI == null && schema.getTargetNamespace() == null) {\n                 return schema;\n             }\n         }",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/203ca92cc4ba73afa4ee49f8086452bc3ca06916/core/src/main/java/org/apache/cxf/common/xmlschema/SchemaCollection.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7787 - NullPointerException from wsdl2java",
        "commit": "https://github.com/apache/cxf/commit/203ca92cc4ba73afa4ee49f8086452bc3ca06916"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/8388f9ef0aea91a98ec89a68e5e4c2c16849b983",
        "bug_id": "cxf_7",
        "file": [
            {
                "additions": 3,
                "sha": "4f3e292544057fab76c3a39195a281a090b10989",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/70346bfc37cfd4de98bafa99681fa7276379162e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/AnnotationUtils.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/AnnotationUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/AnnotationUtils.java?ref=70346bfc37cfd4de98bafa99681fa7276379162e",
                "patch": "@@ -105,6 +105,9 @@ private static Method getMethodOrNull(final Class<?> type, final String name) {\n     }\n \n     public static int getBindingPriority(Class<?> providerCls) {\n+        if (PRIORITY_API == null) {\n+            return Priorities.USER;\n+        }\n         Annotation b = getClassAnnotation(providerCls, PRIORITY_API);\n         try {\n             return b == null ? Priorities.USER : Integer.class.cast(PRIORITY_VALUE.invoke(b));",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/70346bfc37cfd4de98bafa99681fa7276379162e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/AnnotationUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "fixing getBindingPriority and avoid a NPE",
        "commit": "https://github.com/apache/cxf/commit/70346bfc37cfd4de98bafa99681fa7276379162e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a6978c675d99ed3e317f37ea8f9885004369ff7a",
        "bug_id": "cxf_8",
        "file": [
            {
                "additions": 9,
                "sha": "05e4da90ed666bcc221b1c2ebee1a7aa1316c9b1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d9c0c2ffb468315c9e538736ac8e731782209640/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/Utils.java",
                "deletions": 6,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/Utils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/Utils.java?ref=d9c0c2ffb468315c9e538736ac8e731782209640",
                "patch": "@@ -266,12 +266,15 @@ static XmlJavaTypeAdapter getFieldXJTA(final Field f) {\n             adapter = f.getType().getAnnotation(XmlJavaTypeAdapter.class);\n         }\n         if (adapter == null) {\n-            XmlJavaTypeAdapters adapters = f.getDeclaringClass().getPackage().getAnnotation(XmlJavaTypeAdapters.class);\n-            if (adapters != null) {\n-                for (XmlJavaTypeAdapter candidate : adapters.value()) {\n-                    if (candidate != null && candidate.type().equals(f.getType())) {\n-                        adapter = candidate;\n-                        break;\n+            Package packageDeclaration = f.getDeclaringClass().getPackage();\n+            if (packageDeclaration != null) {\n+                XmlJavaTypeAdapters adapters = packageDeclaration.getAnnotation(XmlJavaTypeAdapters.class);\n+                if (adapters != null) {\n+                    for (XmlJavaTypeAdapter candidate : adapters.value()) {\n+                        if (candidate != null && candidate.type().equals(f.getType())) {\n+                            adapter = candidate;\n+                            break;\n+                        }\n                     }\n                 }\n             }",
                "changes": 15,
                "blob_url": "https://github.com/apache/cxf/blob/d9c0c2ffb468315c9e538736ac8e731782209640/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/Utils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7947] avoid NPE for classes in default package",
        "commit": "https://github.com/apache/cxf/commit/d9c0c2ffb468315c9e538736ac8e731782209640"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/687dd36db702dd8a013d49c71fc4d3afe4323a0c",
        "bug_id": "cxf_9",
        "file": [
            {
                "additions": 12,
                "sha": "7d16238be7827122ef216ab461fc562965ef7335",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6e70d53a7b256c866efe9a5ec863cb998b0b9e58/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/blueprint/JettyHTTPServerEngineFactoryHolder.java",
                "deletions": 4,
                "filename": "rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/blueprint/JettyHTTPServerEngineFactoryHolder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/blueprint/JettyHTTPServerEngineFactoryHolder.java?ref=6e70d53a7b256c866efe9a5ec863cb998b0b9e58",
                "patch": "@@ -89,8 +89,12 @@ public void init() {\n                 for (ThreadingParametersIdentifiedType threads : config.getIdentifiedThreadingParameters()) {\n                     ThreadingParameters rThreads = new ThreadingParameters();\n                     String id = threads.getId();\n-                    rThreads.setMaxThreads(threads.getThreadingParameters().getMaxThreads());\n-                    rThreads.setMinThreads(threads.getThreadingParameters().getMinThreads());\n+                    if (threads.getThreadingParameters().getMaxThreads() != null) {\n+                        rThreads.setMaxThreads(threads.getThreadingParameters().getMaxThreads());\n+                    }\n+                    if (threads.getThreadingParameters().getMinThreads() != null) {\n+                        rThreads.setMinThreads(threads.getThreadingParameters().getMinThreads());\n+                    }\n                     rThreads.setThreadNamePrefix(threads.getThreadingParameters().getThreadNamePrefix());\n                     threadingParametersMap.put(id, rThreads);\n                 }\n@@ -164,8 +168,12 @@ public void init() {\n                 if (engine.getThreadingParameters() != null) {\n                     ThreadingParametersType threads = engine.getThreadingParameters();\n                     ThreadingParameters rThreads = new ThreadingParameters();\n-                    rThreads.setMaxThreads(threads.getMaxThreads());\n-                    rThreads.setMinThreads(threads.getMinThreads());\n+                    if (threads.getMaxThreads() != null) {\n+                        rThreads.setMaxThreads(threads.getMaxThreads());\n+                    }\n+                    if (threads.getMinThreads() != null) {\n+                        rThreads.setMinThreads(threads.getMinThreads());\n+                    }\n \n                     eng.setThreadingParameters(rThreads);\n                 }",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/6e70d53a7b256c866efe9a5ec863cb998b0b9e58/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/blueprint/JettyHTTPServerEngineFactoryHolder.java"
            },
            {
                "additions": 12,
                "sha": "6ad591349698be3bf48b4d147e61d63c647bb78c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6e70d53a7b256c866efe9a5ec863cb998b0b9e58/rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java",
                "deletions": 4,
                "filename": "rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java?ref=6e70d53a7b256c866efe9a5ec863cb998b0b9e58",
                "patch": "@@ -85,8 +85,12 @@ public void init() {\n                 for (ThreadingParametersIdentifiedType threads : config.getIdentifiedThreadingParameters()) {\n                     ThreadingParameters rThreads = new ThreadingParameters();\n                     String id = threads.getId();\n-                    rThreads.setMaxThreads(threads.getThreadingParameters().getMaxThreads());\n-                    rThreads.setMinThreads(threads.getThreadingParameters().getMinThreads());\n+                    if (threads.getThreadingParameters().getMaxThreads() != null) {\n+                        rThreads.setMaxThreads(threads.getThreadingParameters().getMaxThreads());\n+                    }\n+                    if (threads.getThreadingParameters().getMinThreads() != null) {\n+                        rThreads.setMinThreads(threads.getThreadingParameters().getMinThreads());\n+                    }\n                     rThreads.setWorkerIOThreads(threads.getThreadingParameters().getWorkerIOThreads());\n                     threadingParametersMap.put(id, rThreads);\n                 }\n@@ -143,8 +147,12 @@ public void init() {\n                 if (engine.getThreadingParameters() != null) {\n                     ThreadingParametersType threads = engine.getThreadingParameters();\n                     ThreadingParameters rThreads = new ThreadingParameters();\n-                    rThreads.setMaxThreads(threads.getMaxThreads());\n-                    rThreads.setMinThreads(threads.getMinThreads());\n+                    if (threads.getMaxThreads() != null) {\n+                        rThreads.setMaxThreads(threads.getMaxThreads());\n+                    } \n+                    if (threads.getMinThreads() != null) {\n+                        rThreads.setMinThreads(threads.getMinThreads());\n+                    }\n                     rThreads.setWorkerIOThreads(threads.getWorkerIOThreads());\n                     eng.setThreadingParameters(rThreads);\n                 }",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/6e70d53a7b256c866efe9a5ec863cb998b0b9e58/rt/transports/http-undertow/src/main/java/org/apache/cxf/transport/http_undertow/blueprint/UndertowHTTPServerEngineFactoryHolder.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7956]add NPE guard for jetty and undertow threads configuration in blueprint",
        "commit": "https://github.com/apache/cxf/commit/6e70d53a7b256c866efe9a5ec863cb998b0b9e58"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/ad27755270c649ab64f2cec0d3768772ef68fc1f",
        "bug_id": "cxf_10",
        "file": [
            {
                "additions": 3,
                "sha": "a583e70a5bf5e0ede768c1874038c856bb51bd8f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a7b9dca144ca76f4ad62a05310cc298447aa2572/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JCacheOAuthDataProvider.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JCacheOAuthDataProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JCacheOAuthDataProvider.java?ref=a7b9dca144ca76f4ad62a05310cc298447aa2572",
                "patch": "@@ -186,7 +186,9 @@ protected void saveRefreshToken(RefreshToken refreshToken) {\n     @Override\n     protected void linkRefreshTokenToAccessToken(RefreshToken rt, ServerAccessToken at) {\n         super.linkRefreshTokenToAccessToken(rt,  at);\n-        accessTokenCache.replace(at.getTokenKey(), at);\n+        if (!isStoreJwtTokenKeyOnly()) {\n+            accessTokenCache.replace(at.getTokenKey(), at);\n+        }\n     }\n \n     @Override",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/a7b9dca144ca76f4ad62a05310cc298447aa2572/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JCacheOAuthDataProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7913 - Fixing another NPE with JCache",
        "commit": "https://github.com/apache/cxf/commit/a7b9dca144ca76f4ad62a05310cc298447aa2572"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b11ba45f602ee0986cabd2020deb7e56b4f39bc5",
        "bug_id": "cxf_11",
        "file": [
            {
                "additions": 1,
                "sha": "09107f560a3014dd15db977dc1070d02acef373c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/f58500e38c69850d6ac62192ea843ae2a5119418/core/src/main/java/org/apache/cxf/common/jaxb/JAXBUtils.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/common/jaxb/JAXBUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/common/jaxb/JAXBUtils.java?ref=f58500e38c69850d6ac62192ea843ae2a5119418",
                "patch": "@@ -1565,7 +1565,7 @@ public static void setNoEscapeHandler(final Marshaller marshaller) {\n     public static void setEscapeHandler(Marshaller marshaller, Object escapeHandler) {\n         try {\n             String postFix = getPostfix(marshaller.getClass());\n-            if (postFix != null) {\n+            if (postFix != null && escapeHandler != null) {\n                 marshaller.setProperty(\"com.sun.xml\" + postFix + \".bind.characterEscapeHandler\", escapeHandler);\n             }\n         } catch (PropertyException e) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/f58500e38c69850d6ac62192ea843ae2a5119418/core/src/main/java/org/apache/cxf/common/jaxb/JAXBUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7905]add NPE guard for escapeHandler",
        "commit": "https://github.com/apache/cxf/commit/f58500e38c69850d6ac62192ea843ae2a5119418"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7eb08b4e9136bc0bd50a7d23cc392e5cd5501f0c",
        "bug_id": "cxf_12",
        "file": [
            {
                "additions": 5,
                "sha": "0b006b5dabd87f4f77d62fd2bfd82124c42e90d5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/fbbcf945ad9d10b4fb16c8722de77b1f4c62db44/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JCacheOAuthDataProvider.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JCacheOAuthDataProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JCacheOAuthDataProvider.java?ref=fbbcf945ad9d10b4fb16c8722de77b1f4c62db44",
                "patch": "@@ -151,7 +151,11 @@ public ServerAccessToken getAccessToken(String accessTokenKey) throws OAuthServi\n \n     @Override\n     protected void doRevokeAccessToken(ServerAccessToken at) {\n-        accessTokenCache.remove(at.getTokenKey());\n+        if (isUseJwtFormatForAccessTokens() && isStoreJwtTokenKeyOnly()) {\n+            jwtAccessTokenCache.remove(at.getTokenKey());\n+        } else {\n+            accessTokenCache.remove(at.getTokenKey());\n+        }\n     }\n \n     @Override",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/fbbcf945ad9d10b4fb16c8722de77b1f4c62db44/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JCacheOAuthDataProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7913 - NPE in OAuth 2.0 JCacheOAuthDataProvider with isStoreJwtTokenKeyOnly",
        "commit": "https://github.com/apache/cxf/commit/fbbcf945ad9d10b4fb16c8722de77b1f4c62db44"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a7126b66417fd51cbe42f850a5cf8abd6b7e9e02",
        "bug_id": "cxf_13",
        "file": [
            {
                "additions": 10,
                "sha": "7e57dc60c5b7c1932581c4a5834aca01d4560396",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9ef9bc3fdc96ab9b22a3c890cae2d120acb8dbb6/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java",
                "deletions": 6,
                "filename": "tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java?ref=9ef9bc3fdc96ab9b22a3c890cae2d120acb8dbb6",
                "patch": "@@ -984,14 +984,18 @@ public LSInput resolveResource(String type,\n                                            String systemId,\n                                            String baseURI) {\n                 String s = JAXBDataBinding.mapSchemaLocation(systemId, baseURI, catalog);\n-                //System.out.println(namespaceURI + \" \" + systemId + \" \" + baseURI + \" \" + s);\n+                LOG.fine(\"validating: \" + namespaceURI + \" \" + systemId + \" \" + baseURI + \" \" + s);\n                 if (s == null) {\n                     XmlSchema sc = schemaCollection.getSchemaByTargetNamespace(namespaceURI);\n-                    StringWriter writer = new StringWriter();\n-                    sc.write(writer);\n-                    InputSource src = new InputSource(new StringReader(writer.toString()));\n-                    src.setSystemId(sc.getSourceURI());\n-                    return new LSInputSAXWrapper(src);\n+                    if (sc != null) {\n+                        StringWriter writer = new StringWriter();\n+                        sc.write(writer);\n+                        InputSource src = new InputSource(new StringReader(writer.toString()));\n+                        src.setSystemId(sc.getSourceURI());\n+                        return new LSInputSAXWrapper(src);\n+                    } else {\n+                        throw new ToolException(\"Schema not found for namespace: \" + namespaceURI);\n+                    }\n                 }\n                 return new LSInputSAXWrapper(new InputSource(s));\n             }",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/9ef9bc3fdc96ab9b22a3c890cae2d120acb8dbb6/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7454] fixed NullPointerException during wsdl validation",
        "commit": "https://github.com/apache/cxf/commit/9ef9bc3fdc96ab9b22a3c890cae2d120acb8dbb6"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e8c7b338fc920473fe73a3a61a2606edbcdd2993",
        "bug_id": "cxf_14",
        "file": [
            {
                "additions": 1,
                "sha": "36e9e689998fd107885a38ffbd154813b729d414",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/dd2ad753ca0980a3f83347016adff97aee5c09c2/rt/rs/security/oauth-parent/oauth2-saml/src/main/java/org/apache/cxf/rs/security/oauth2/grants/saml/Saml2BearerGrantHandler.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2-saml/src/main/java/org/apache/cxf/rs/security/oauth2/grants/saml/Saml2BearerGrantHandler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2-saml/src/main/java/org/apache/cxf/rs/security/oauth2/grants/saml/Saml2BearerGrantHandler.java?ref=dd2ad753ca0980a3f83347016adff97aee5c09c2",
                "patch": "@@ -138,7 +138,7 @@ protected UserSubject getGrantSubject(Message message, SamlAssertionWrapper wrap\n             SAMLSecurityContext jaxrsSc = (SAMLSecurityContext)sc;\n             Set<Principal> rolesP = jaxrsSc.getUserRoles();\n             List<String> roles = new ArrayList<>();\n-            if (roles != null) {\n+            if (rolesP != null) {\n                 for (Principal p : rolesP) {\n                     roles.add(p.getName());\n                 }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/dd2ad753ca0980a3f83347016adff97aee5c09c2/rt/rs/security/oauth-parent/oauth2-saml/src/main/java/org/apache/cxf/rs/security/oauth2/grants/saml/Saml2BearerGrantHandler.java"
            }
        ],
        "repo": "cxf",
        "message": "Fixed potential NPE in SAML OAuth 2.0 code",
        "commit": "https://github.com/apache/cxf/commit/dd2ad753ca0980a3f83347016adff97aee5c09c2"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/91feb64c98ffe1835075e1fa8d782e43e0c785ee",
        "bug_id": "cxf_15",
        "file": [
            {
                "additions": 2,
                "sha": "042232d4e1b78e6c243e3f130c08924753f44467",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/83ea6c42a798719dfd9d7c3a2f671071ce448a07/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/grants/AbstractGrantHandler.java",
                "deletions": 2,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/grants/AbstractGrantHandler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/grants/AbstractGrantHandler.java?ref=83ea6c42a798719dfd9d7c3a2f671071ce448a07",
                "patch": "@@ -110,7 +110,7 @@ protected ServerAccessToken doCreateAccessToken(Client client,\n                                                     UserSubject subject,\n                                                     String requestedGrant,\n                                                     List<String> requestedScopes) {\n-        return doCreateAccessToken(client, subject, requestedGrant, requestedScopes, null);\n+        return doCreateAccessToken(client, subject, requestedGrant, requestedScopes, Collections.emptyList());\n     }\n \n     protected ServerAccessToken doCreateAccessToken(Client client,\n@@ -136,7 +136,7 @@ protected ServerAccessToken doCreateAccessToken(Client client,\n     }\n \n     protected List<String> getApprovedScopes(Client client, UserSubject subject, List<String> requestedScopes) {\n-        // This method can be overridden if the down-scoping is required \n+        // This method can be overridden if the down-scoping is required\n         return Collections.emptyList();\n     }\n ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/83ea6c42a798719dfd9d7c3a2f671071ce448a07/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/grants/AbstractGrantHandler.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7793 - NPE when using authorization grants with setUseJwtFormatForAccessTokens",
        "commit": "https://github.com/apache/cxf/commit/83ea6c42a798719dfd9d7c3a2f671071ce448a07"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f6b0cb1519f173e7cd393d435d35c67cb3ccab1a",
        "bug_id": "cxf_16",
        "file": [
            {
                "additions": 3,
                "sha": "f3f53d03331a9efe68aba2261672afead774ae8a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b6d2db2bf2682b71fc36cfec85b9f5673f0dcb5c/rt/rs/description-swagger-ui/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java",
                "deletions": 0,
                "filename": "rt/rs/description-swagger-ui/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/description-swagger-ui/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java?ref=b6d2db2bf2682b71fc36cfec85b9f5673f0dcb5c",
                "patch": "@@ -47,6 +47,9 @@ public String findSwaggerUiRootInternal(String swaggerUiMavenGroupAndArtifact,\n             if (bundle == null) {\n                 return null;\n             }\n+            if (bundle.getState() != Bundle.ACTIVE) {\n+                bundle.start();\n+            }\n             String[] locations = swaggerUiMavenGroupAndArtifact == null ? DEFAULT_LOCATIONS\n                 : new String[]{\"mvn:\" + swaggerUiMavenGroupAndArtifact + \"/\",\n                                \"wrap:mvn:\" + swaggerUiMavenGroupAndArtifact + \"/\"};",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/b6d2db2bf2682b71fc36cfec85b9f5673f0dcb5c/rt/rs/description-swagger-ui/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java"
            }
        ],
        "repo": "cxf",
        "message": "Merge pull request #434 from rgra/patch-2\n\nNPE when annotations bundle found but not active",
        "commit": "https://github.com/apache/cxf/commit/b6d2db2bf2682b71fc36cfec85b9f5673f0dcb5c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/2508201c48a4946ae6133e5323cba871bb9f9a18",
        "bug_id": "cxf_17",
        "file": [
            {
                "additions": 7,
                "sha": "1dced4bf02ab2c4a303f653696370bd801852741",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/071aae5b948f233c9202dbfa90444afeea116037/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/saaj/SAAJStreamWriter.java",
                "deletions": 2,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/saaj/SAAJStreamWriter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/saaj/SAAJStreamWriter.java?ref=071aae5b948f233c9202dbfa90444afeea116037",
                "patch": "@@ -133,8 +133,13 @@ protected void createAndAddElement(String prefix, String local, String namespace\n                     setChild(adjustPrefix(getEnvelope(), prefix), false);\n                     adjustPrefix(getEnvelope().getHeader(), prefix);\n                     adjustPrefix(getEnvelope().getBody(), prefix);\n-                    getEnvelope().removeChild(getEnvelope().getHeader());\n-                    getEnvelope().removeChild(getEnvelope().getBody());\n+                    if (getEnvelope().getHeader() != null) {\n+                        getEnvelope().removeChild(getEnvelope().getHeader());\n+                    }\n+                    if (getEnvelope().getBody() != null) {\n+                        getEnvelope().removeChild(getEnvelope().getBody());\n+                    }\n+\n                     return;\n                 } else if (\"Body\".equals(local)) {\n                     if (getEnvelope().getBody() == null) {",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/071aae5b948f233c9202dbfa90444afeea116037/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/saaj/SAAJStreamWriter.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7740]add NPE guard for SAAJStreamWriter",
        "commit": "https://github.com/apache/cxf/commit/071aae5b948f233c9202dbfa90444afeea116037"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/278d9185150d743ff4b411d070b023e8758d372e",
        "bug_id": "cxf_18",
        "file": [
            {
                "additions": 3,
                "sha": "6b7132589625c5e8c4a4c6660641a2da0e97f94b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/96133bca4298b740f8fa46830854f7a5329fe8f3/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java",
                "deletions": 3,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java?ref=96133bca4298b740f8fa46830854f7a5329fe8f3",
                "patch": "@@ -245,7 +245,7 @@ public static JsonWebKeys loadPublicJwkSet(Message m, Properties props) {\n     public static JsonWebKeys loadJwkSet(Message m, Properties props, PrivateKeyPasswordProvider cb) {\n         String key = (String)props.get(JoseConstants.RSSEC_KEY_STORE_FILE);\n         JsonWebKeys jwkSet = null;\n-        if (key != null) {\n+        if (key != null && m != null) {\n             Object jwkSetProp = m.getExchange().get(key);\n             if (jwkSetProp != null && !(jwkSetProp instanceof JsonWebKeys)) {\n                 throw new JwkException(\"Unexpected key store class: \" + jwkSetProp.getClass().getName());\n@@ -254,8 +254,8 @@ public static JsonWebKeys loadJwkSet(Message m, Properties props, PrivateKeyPass\n             }\n         }\n         if (jwkSet == null) {\n-            jwkSet = loadJwkSet(props, m.getExchange().getBus(), cb);\n-            if (key != null) {\n+            jwkSet = loadJwkSet(props, m != null ? m.getExchange().getBus() : null, cb);\n+            if (key != null && m != null) {\n                 m.getExchange().put(key, jwkSet);\n             }\n         }",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/96133bca4298b740f8fa46830854f7a5329fe8f3/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7721] Adding few NPE guards",
        "commit": "https://github.com/apache/cxf/commit/96133bca4298b740f8fa46830854f7a5329fe8f3"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e1e702fcbc51e76c5d2d95fa18b68b67319e0e66",
        "bug_id": "cxf_19",
        "file": [
            {
                "additions": 3,
                "sha": "8cf67623aaeae1c4ba9d23a524a27f852ba1f47c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/5ae9b0a5b928b49fc2a4b3fb8dd9b68dca640eb7/rt/rs/description-swagger-ui/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java",
                "deletions": 0,
                "filename": "rt/rs/description-swagger-ui/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/description-swagger-ui/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java?ref=5ae9b0a5b928b49fc2a4b3fb8dd9b68dca640eb7",
                "patch": "@@ -47,6 +47,9 @@ public String findSwaggerUiRootInternal(String swaggerUiMavenGroupAndArtifact,\n             if (bundle == null) {\n                 return null;\n             }\n+            if (bundle.getState() != Bundle.ACTIVE) {\n+\t\t\t\tbundle.start();\n+\t\t\t}\n             String[] locations = swaggerUiMavenGroupAndArtifact == null ? DEFAULT_LOCATIONS\n                 : new String[]{\"mvn:\" + swaggerUiMavenGroupAndArtifact + \"/\",\n                                \"wrap:mvn:\" + swaggerUiMavenGroupAndArtifact + \"/\"};",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/5ae9b0a5b928b49fc2a4b3fb8dd9b68dca640eb7/rt/rs/description-swagger-ui/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE when annotations bundle found but not active\n\nbundle.getBundleContext() will give an NPE (in Equinox) if the bundle can be found but is not active.\r\nWould also be good to at least log the exception in debug mode to point to a possible problem.",
        "commit": "https://github.com/apache/cxf/commit/5ae9b0a5b928b49fc2a4b3fb8dd9b68dca640eb7"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e1ad0828edc6ceeca0ed5eb68b07dc2a4d370623",
        "bug_id": "cxf_20",
        "file": [
            {
                "additions": 2,
                "sha": "e9d32e18beb5a75ae6824ba646a75f11bff04cc5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b754fadd4f031f652e8f943f426cbc1683d6662c/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/impl/MAPAggregatorImpl.java",
                "deletions": 2,
                "filename": "rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/impl/MAPAggregatorImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/impl/MAPAggregatorImpl.java?ref=b754fadd4f031f652e8f943f426cbc1683d6662c",
                "patch": "@@ -577,8 +577,8 @@ private void checkAddressingResponses(EndpointReferenceType replyTo, EndpointRef\n             && isAnonymous) {\n             passed = true;\n         } else if (WSAddressingFeature.AddressingResponses.NON_ANONYMOUS == addressingResponses\n-                   && (!anonReply && (faultTo.getAddress() != null && !anonFault)\n-                       || !anonReply && faultTo.getAddress() == null)) {\n+                   && (!anonReply && (!anonFault && faultTo.getAddress() != null)\n+                       || !anonReply && faultTo == null)) {        \n             passed = true;\n         }\n         if (!passed) {",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/b754fadd4f031f652e8f943f426cbc1683d6662c/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/impl/MAPAggregatorImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7745]:Fix NPE thrown when replyTo is non-anonymous and faultTo doesn't exists",
        "commit": "https://github.com/apache/cxf/commit/b754fadd4f031f652e8f943f426cbc1683d6662c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3d17bead5bd2c22117b3e532c5184987b529cc01",
        "bug_id": "cxf_21",
        "file": [
            {
                "additions": 4,
                "sha": "e5a92951014be1424995168561bf40cdba4f7267",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3b57c646f07963a79b41bb39dabd875b09ed614a/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/ClientCodeRequestFilter.java",
                "deletions": 2,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/ClientCodeRequestFilter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/ClientCodeRequestFilter.java?ref=3b57c646f07963a79b41bb39dabd875b09ed614a",
                "patch": "@@ -154,9 +154,9 @@ protected void checkSecurityContextStart(ContainerRequestContext rc) {\n \n     private void checkSecurityContextEnd(ContainerRequestContext rc,\n                                          MultivaluedMap<String, String> requestParams) {\n-        String codeParam = requestParams.getFirst(OAuthConstants.AUTHORIZATION_CODE_VALUE);\n         SecurityContext sc = rc.getSecurityContext();\n         if (sc == null || sc.getUserPrincipal() == null) {\n+            String codeParam = requestParams.getFirst(OAuthConstants.AUTHORIZATION_CODE_VALUE);\n             if (codeParam == null\n                 && requestParams.containsKey(OAuthConstants.ERROR_KEY)\n                 && !faultAccessDeniedResponses) {\n@@ -235,7 +235,9 @@ protected void processCodeResponse(ContainerRequestContext rc,\n         ClientAccessToken at = null;\n         if (codeParam != null) {\n             AuthorizationCodeGrant grant = prepareCodeGrant(codeParam, getAbsoluteRedirectUri(ui));\n-            grant.setCodeVerifier(state.getFirst(OAuthConstants.AUTHORIZATION_CODE_VERIFIER));\n+            if (state != null) {\n+                grant.setCodeVerifier(state.getFirst(OAuthConstants.AUTHORIZATION_CODE_VERIFIER));\n+            }\n             at = OAuthClientUtils.getAccessToken(accessTokenServiceClient, consumer, grant, useAuthorizationHeader);\n         }\n         ClientTokenContext tokenContext = initializeClientTokenContext(rc, at, requestParams, state);",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/3b57c646f07963a79b41bb39dabd875b09ed614a/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/ClientCodeRequestFilter.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid NPE in ClientCodeRequestFilter if the state is not configured",
        "commit": "https://github.com/apache/cxf/commit/3b57c646f07963a79b41bb39dabd875b09ed614a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/70ac8edcc95d88ae4a338005ffd07fe149b46793",
        "bug_id": "cxf_22",
        "file": [
            {
                "additions": 1,
                "sha": "4679e6e27e2c9e049388c0a43280bfe0f6c33b47",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3453c6ccac9bb829af8ecc65823e66b68db3e831/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/Swagger2Feature.java",
                "deletions": 1,
                "filename": "rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/Swagger2Feature.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/Swagger2Feature.java?ref=3453c6ccac9bb829af8ecc65823e66b68db3e831",
                "patch": "@@ -305,7 +305,7 @@ protected void initBeanConfig(BeanConfig beanConfig, Properties props) {\n         if (theLicense == null && !licenseWasSet) {\n             if (props != null) {\n                 theLicense = props.getProperty(LICENSE_PROPERTY);\n-                if (theLicense.isEmpty()) {\n+                if (theLicense != null && theLicense.isEmpty()) {\n                     theLicense = null;\n                 }\n             } else {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/3453c6ccac9bb829af8ecc65823e66b68db3e831/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/Swagger2Feature.java"
            }
        ],
        "repo": "cxf",
        "message": "fixed NPE",
        "commit": "https://github.com/apache/cxf/commit/3453c6ccac9bb829af8ecc65823e66b68db3e831"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/dd81c1eb76d853f735b2265a18653ab862298468",
        "bug_id": "cxf_23",
        "file": [
            {
                "additions": 1,
                "sha": "d214f462d0ade282c2d7f35c11da801fac17b967",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2d3145fe8323533e371b11f40888ecc70a424df7/core/src/main/java/org/apache/cxf/interceptor/LoggingInInterceptor.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/interceptor/LoggingInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/interceptor/LoggingInInterceptor.java?ref=2d3145fe8323533e371b11f40888ecc70a424df7",
                "patch": "@@ -78,7 +78,7 @@ public LoggingInInterceptor(String id, PrintWriter w) {\n     \n     public void handleMessage(Message message) throws Fault {\n         Logger logger = getMessageLogger(message);\n-        if (writer != null || logger.isLoggable(Level.INFO)) {\n+        if (logger != null && (writer != null || logger.isLoggable(Level.INFO))) {\n             logging(logger, message);\n         }\n     }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/2d3145fe8323533e371b11f40888ecc70a424df7/core/src/main/java/org/apache/cxf/interceptor/LoggingInInterceptor.java"
            },
            {
                "additions": 1,
                "sha": "043aa373198993d6edefafcc123c088a5145194d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2d3145fe8323533e371b11f40888ecc70a424df7/core/src/main/java/org/apache/cxf/interceptor/LoggingOutInterceptor.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/interceptor/LoggingOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/interceptor/LoggingOutInterceptor.java?ref=2d3145fe8323533e371b11f40888ecc70a424df7",
                "patch": "@@ -69,7 +69,7 @@ public void handleMessage(Message message) throws Fault {\n             return;\n         }\n         Logger logger = getMessageLogger(message);\n-        if (logger.isLoggable(Level.INFO) || writer != null) {\n+        if (logger != null && (logger.isLoggable(Level.INFO) || writer != null)) {\n             // Write the output while caching it for the log message\n             boolean hasLogged = message.containsKey(LOG_SETUP);\n             if (!hasLogged) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/2d3145fe8323533e371b11f40888ecc70a424df7/core/src/main/java/org/apache/cxf/interceptor/LoggingOutInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "NullPointerException when using org.apache.cxf.logging.enable and logging interceptors\nThis closes #225",
        "commit": "https://github.com/apache/cxf/commit/2d3145fe8323533e371b11f40888ecc70a424df7"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/30a6e5b5091d8feabb1eb8e27c08016b2c34b48c",
        "bug_id": "cxf_24",
        "file": [
            {
                "additions": 3,
                "sha": "5cb5e943e2023ddf61c9db7a83da9e5a38b8e210",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/pom.xml",
                "deletions": 0,
                "filename": "systests/uncategorized/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/uncategorized/pom.xml?ref=65f119d0904b25690600fd70fd751462cbd5113f",
                "patch": "@@ -60,6 +60,9 @@\n                                 <frontEnd>cxf</frontEnd>\n                             </defaultOptions>\n                             <wsdlOptions>\n+                                <wsdlOption>\n+                                    <wsdl>${basedir}/src/test/resources/DoubleItLogical.wsdl</wsdl>\n+                                </wsdlOption>\n                                 <wsdlOption>\n                                     <wsdl>${basedir}/src/test/resources/wsdl_systest/hello_world_corba.wsdl</wsdl>\n                                 </wsdlOption>",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/pom.xml"
            },
            {
                "additions": 44,
                "sha": "6f4c8cd62e17a5224cca660ced25666c739d26bf",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/DummyService.java",
                "deletions": 0,
                "filename": "systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/DummyService.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/DummyService.java?ref=65f119d0904b25690600fd70fd751462cbd5113f",
                "patch": "@@ -0,0 +1,44 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.systest.soap;\n+\n+\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.Produces;\n+\n+/**\n+ * A dummy JAX-RS service that just echoes back a SOAP Body\n+ */\n+@Path(\"/\")\n+public class DummyService {\n+\n+    public DummyService() {\n+    }\n+\n+    @POST\n+    @Produces({\"text/xml\"})\n+    public String echoText() {\n+        return \"<soap:Envelope xmlns:soap=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\"><soap:Header></soap:Header>\"\n+            + \"<soap:Body /></soap:Envelope>\";\n+    }\n+}\n+\n+",
                "changes": 44,
                "blob_url": "https://github.com/apache/cxf/blob/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/DummyService.java"
            },
            {
                "additions": 47,
                "sha": "f7bba4ddd369cbc507809b1596493fa0df84d3c4",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/EmptySOAPBodyServer.java",
                "deletions": 0,
                "filename": "systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/EmptySOAPBodyServer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/EmptySOAPBodyServer.java?ref=65f119d0904b25690600fd70fd751462cbd5113f",
                "patch": "@@ -0,0 +1,47 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.systest.soap;\n+\n+import java.net.URL;\n+\n+import org.apache.cxf.Bus;\n+import org.apache.cxf.BusFactory;\n+import org.apache.cxf.bus.spring.SpringBusFactory;\n+import org.apache.cxf.testutil.common.AbstractBusTestServerBase;\n+\n+public class EmptySOAPBodyServer extends AbstractBusTestServerBase {\n+\n+    public EmptySOAPBodyServer() {\n+\n+    }\n+\n+    protected void run()  {\n+        URL busFile = EmptySOAPBodyServer.class.getResource(\"server.xml\");\n+        Bus busLocal = new SpringBusFactory().createBus(busFile);\n+        BusFactory.setDefaultBus(busLocal);\n+        setBus(busLocal);\n+\n+        try {\n+            new EmptySOAPBodyServer();\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+    }\n+}",
                "changes": 47,
                "blob_url": "https://github.com/apache/cxf/blob/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/EmptySOAPBodyServer.java"
            },
            {
                "additions": 84,
                "sha": "2cc103d276c700acc4ff3b6940e449443a2dbfb1",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/EmptySOAPBodyTest.java",
                "deletions": 0,
                "filename": "systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/EmptySOAPBodyTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/EmptySOAPBodyTest.java?ref=65f119d0904b25690600fd70fd751462cbd5113f",
                "patch": "@@ -0,0 +1,84 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.systest.soap;\n+\n+import java.net.URL;\n+\n+import javax.xml.namespace.QName;\n+import javax.xml.ws.Service;\n+\n+import org.apache.cxf.Bus;\n+import org.apache.cxf.BusFactory;\n+import org.apache.cxf.bus.spring.SpringBusFactory;\n+import org.apache.cxf.testutil.common.AbstractBusClientServerTestBase;\n+import org.example.contract.doubleit.DoubleItPortType;\n+\n+import org.junit.BeforeClass;\n+\n+/**\n+ * Test what happens when we make an invocation and get back an empty SOAP Body (see CXF-7653)\n+ */\n+@org.junit.Ignore(\"Ignoring this until CXF-7653 is resolved\")\n+public class EmptySOAPBodyTest extends AbstractBusClientServerTestBase {\n+    static final String PORT = allocatePort(EmptySOAPBodyServer.class);\n+\n+    private static final String NAMESPACE = \"http://www.example.org/contract/DoubleIt\";\n+    private static final QName SERVICE_QNAME = new QName(NAMESPACE, \"DoubleItService\");\n+\n+    @BeforeClass\n+    public static void startServers() throws Exception {\n+        assertTrue(\n+            \"Server failed to launch\",\n+            // run the server in the same process\n+            // set this to false to fork\n+            launchServer(EmptySOAPBodyServer.class, true)\n+        );\n+    }\n+\n+    @org.junit.AfterClass\n+    public static void cleanup() throws Exception {\n+        stopAllServers();\n+    }\n+\n+    @org.junit.Test\n+    public void testPlaintext() throws Exception {\n+\n+        SpringBusFactory bf = new SpringBusFactory();\n+        URL busFile = EmptySOAPBodyTest.class.getResource(\"client.xml\");\n+\n+        Bus bus = bf.createBus(busFile.toString());\n+        BusFactory.setDefaultBus(bus);\n+        BusFactory.setThreadDefaultBus(bus);\n+\n+        URL wsdl = EmptySOAPBodyTest.class.getResource(\"DoubleIt.wsdl\");\n+        Service service = Service.create(wsdl, SERVICE_QNAME);\n+        QName portQName = new QName(NAMESPACE, \"DoubleItPlaintextPort\");\n+        DoubleItPortType port =\n+                service.getPort(portQName, DoubleItPortType.class);\n+        updateAddressPort(port, PORT);\n+\n+        port.doubleIt(25);\n+\n+        ((java.io.Closeable)port).close();\n+\n+        bus.shutdown(true);\n+    }\n+\n+}\n\\ No newline at end of file",
                "changes": 84,
                "blob_url": "https://github.com/apache/cxf/blob/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/java/org/apache/cxf/systest/soap/EmptySOAPBodyTest.java"
            },
            {
                "additions": 142,
                "sha": "768ac76b4f9a4cdf49e915c497e53a9d5d4090c4",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/resources/DoubleItLogical.wsdl",
                "deletions": 0,
                "filename": "systests/uncategorized/src/test/resources/DoubleItLogical.wsdl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/uncategorized/src/test/resources/DoubleItLogical.wsdl?ref=65f119d0904b25690600fd70fd751462cbd5113f",
                "patch": "@@ -0,0 +1,142 @@\n+<?xml version=\"1.0\"?>\n+<!--\n+ Licensed to the Apache Software Foundation (ASF) under one\n+ or more contributor license agreements. See the NOTICE file\n+ distributed with this work for additional information\n+ regarding copyright ownership. The ASF licenses this file\n+ to you under the Apache License, Version 2.0 (the\n+ \"License\"); you may not use this file except in compliance\n+ with the License. You may obtain a copy of the License at\n+ \n+ http://www.apache.org/licenses/LICENSE-2.0\n+ \n+ Unless required by applicable law or agreed to in writing,\n+ software distributed under the License is distributed on an\n+ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ KIND, either express or implied. See the License for the\n+ specific language governing permissions and limitations\n+ under the License.\n+-->\n+<wsdl:definitions xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" xmlns:di=\"http://www.example.org/schema/DoubleIt\" xmlns:tns=\"http://www.example.org/contract/DoubleIt\" xmlns:wsp=\"http://www.w3.org/ns/ws-policy\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" xmlns:wsam=\"http://www.w3.org/2007/05/addressing/metadata\" xmlns:sp=\"http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702\" xmlns:t=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\" xmlns:wsaw=\"http://www.w3.org/2005/08/addressing\" xmlns:wsx=\"http://schemas.xmlsoap.org/ws/2004/09/mex\" xmlns:xmime=\"http://www.w3.org/2005/05/xmlmime\" name=\"DoubleIt\" targetNamespace=\"http://www.example.org/contract/DoubleIt\">\n+    <!-- Replaced for wsp: http://schemas.xmlsoap.org/ws/2004/09/policy -->\n+    <wsdl:types>\n+        <xsd:schema targetNamespace=\"http://www.example.org/schema/DoubleIt\">\n+            <xsd:element name=\"DoubleIt\">\n+                <xsd:complexType>\n+                    <xsd:sequence>\n+                        <xsd:element name=\"numberToDouble\" type=\"xsd:int\"/>\n+                    </xsd:sequence>\n+                </xsd:complexType>\n+            </xsd:element>\n+            <xsd:element name=\"DoubleIt2\">\n+                <xsd:complexType>\n+                    <xsd:sequence>\n+                        <xsd:element name=\"numberToDouble\" type=\"xsd:int\"/>\n+                    </xsd:sequence>\n+                </xsd:complexType>\n+            </xsd:element>\n+            <xsd:element name=\"DoubleIt3\">\n+                <xsd:complexType>\n+                    <xsd:sequence>\n+                        <xsd:element name=\"numberToDouble\" type=\"xsd:int\"/>\n+                    </xsd:sequence>\n+                </xsd:complexType>\n+            </xsd:element>\n+            <xsd:element name=\"DoubleIt4\">\n+                <xsd:complexType>\n+                    <xsd:sequence>\n+                        <xsd:element name=\"numberToDouble\" type=\"xsd:int\"/>\n+                        <xsd:element name=\"ImageData\" type=\"xsd:base64Binary\"\n+                            xmime:expectedContentTypes=\"application/octet-stream\"/>\n+                    </xsd:sequence>\n+                </xsd:complexType>\n+            </xsd:element>\n+            <xsd:element name=\"DoubleItResponse\">\n+                <xsd:complexType>\n+                    <xsd:sequence>\n+                        <xsd:element name=\"doubledNumber\" type=\"xsd:int\"/>\n+                    </xsd:sequence>\n+                </xsd:complexType>\n+            </xsd:element>\n+            <xsd:element name=\"DoubleItHeader\" type=\"xsd:int\"/>\n+            <xsd:element name=\"DoubleItFault\">\n+                <xsd:complexType>\n+                    <xsd:sequence>\n+                        <xsd:element name=\"minor\" type=\"xsd:short\"/>\n+                        <xsd:element name=\"major\" type=\"xsd:short\"/>\n+                    </xsd:sequence>\n+                </xsd:complexType>\n+            </xsd:element>\n+        </xsd:schema>\n+    </wsdl:types>\n+    <wsdl:message name=\"DoubleItRequest\">\n+        <wsdl:part element=\"di:DoubleIt\" name=\"parameters\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"DoubleIt2Request\">\n+        <wsdl:part element=\"di:DoubleIt2\" name=\"parameters\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"DoubleIt3Request\">\n+        <wsdl:part element=\"di:DoubleIt3\" name=\"parameters\"/>\n+        <wsdl:part name=\"attachment\" type=\"xsd:base64Binary\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"DoubleIt4Request\">\n+        <wsdl:part element=\"di:DoubleIt4\" name=\"parameters\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"DoubleItRequestHeader\">\n+        <wsdl:part element=\"di:DoubleIt\" name=\"parameters\"/>\n+        <wsdl:part element=\"di:DoubleItHeader\" name=\"header\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"DoubleItResponse\">\n+        <wsdl:part element=\"di:DoubleItResponse\" name=\"parameters\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"DoubleIt2Response\">\n+        <wsdl:part element=\"di:DoubleItResponse\" name=\"parameters\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"DoubleIt3Response\">\n+        <wsdl:part element=\"di:DoubleItResponse\" name=\"parameters\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"DoubleIt4Response\">\n+        <wsdl:part element=\"di:DoubleItResponse\" name=\"parameters\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"DoubleItFault\">\n+        <wsdl:part element=\"di:DoubleItFault\" name=\"DoubleItFault\"/>\n+    </wsdl:message>\n+    <wsdl:portType name=\"DoubleItPortType\">\n+        <wsdl:operation name=\"DoubleIt\">\n+            <wsdl:input message=\"tns:DoubleItRequest\"/>\n+            <wsdl:output message=\"tns:DoubleItResponse\"/>\n+            <wsdl:fault message=\"tns:DoubleItFault\" name=\"DoubleItFault\"/>\n+        </wsdl:operation>\n+    </wsdl:portType>\n+    <wsdl:portType name=\"DoubleItPortTypeHeader\">\n+        <wsdl:operation name=\"DoubleIt\">\n+            <wsdl:input message=\"tns:DoubleItRequestHeader\"/>\n+            <wsdl:output message=\"tns:DoubleItResponse\"/>\n+        </wsdl:operation>\n+    </wsdl:portType>\n+    <wsdl:portType name=\"DoubleItPortType2\">\n+        <wsdl:operation name=\"DoubleIt\">\n+            <wsdl:input message=\"tns:DoubleItRequest\"/>\n+            <wsdl:output message=\"tns:DoubleItResponse\"/>\n+            <wsdl:fault message=\"tns:DoubleItFault\" name=\"DoubleItFault\"/>\n+        </wsdl:operation>\n+        <wsdl:operation name=\"DoubleIt2\">\n+            <wsdl:input message=\"tns:DoubleIt2Request\"/>\n+            <wsdl:output message=\"tns:DoubleIt2Response\"/>\n+        </wsdl:operation>\n+    </wsdl:portType>\n+    <wsdl:portType name=\"DoubleItSwaPortType\">\n+        <wsdl:operation name=\"DoubleIt3\">\n+            <wsdl:input message=\"tns:DoubleIt3Request\"/>\n+            <wsdl:output message=\"tns:DoubleIt3Response\"/>\n+            <wsdl:fault message=\"tns:DoubleItFault\" name=\"DoubleItFault\"/>\n+        </wsdl:operation>\n+    </wsdl:portType>\n+    <wsdl:portType name=\"DoubleItMtomPortType\">\n+        <wsdl:operation name=\"DoubleIt4\">\n+            <wsdl:input message=\"tns:DoubleIt4Request\"/>\n+            <wsdl:output message=\"tns:DoubleIt4Response\"/>\n+            <wsdl:fault message=\"tns:DoubleItFault\" name=\"DoubleItFault\"/>\n+        </wsdl:operation>\n+    </wsdl:portType>\n+</wsdl:definitions>",
                "changes": 142,
                "blob_url": "https://github.com/apache/cxf/blob/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/resources/DoubleItLogical.wsdl"
            },
            {
                "additions": 42,
                "sha": "f52b6a1488d336178c5d28da6d0473e2cc56e49f",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/DoubleIt.wsdl",
                "deletions": 0,
                "filename": "systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/DoubleIt.wsdl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/DoubleIt.wsdl?ref=65f119d0904b25690600fd70fd751462cbd5113f",
                "patch": "@@ -0,0 +1,42 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+ Licensed to the Apache Software Foundation (ASF) under one\n+ or more contributor license agreements. See the NOTICE file\n+ distributed with this work for additional information\n+ regarding copyright ownership. The ASF licenses this file\n+ to you under the Apache License, Version 2.0 (the\n+ \"License\"); you may not use this file except in compliance\n+ with the License. You may obtain a copy of the License at\n+ \n+ http://www.apache.org/licenses/LICENSE-2.0\n+ \n+ Unless required by applicable law or agreed to in writing,\n+ software distributed under the License is distributed on an\n+ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ KIND, either express or implied. See the License for the\n+ specific language governing permissions and limitations\n+ under the License.\n+-->\n+<wsdl:definitions xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap12/\" xmlns:tns=\"http://www.example.org/contract/DoubleIt\" xmlns:wsp=\"http://www.w3.org/ns/ws-policy\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" xmlns:wsaws=\"http://www.w3.org/2005/08/addressing\" xmlns:sp=\"http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702\" xmlns:sp13=\"http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200802\" name=\"DoubleIt\" targetNamespace=\"http://www.example.org/contract/DoubleIt\">\n+    <wsdl:import location=\"src/test/resources/DoubleItLogical.wsdl\" namespace=\"http://www.example.org/contract/DoubleIt\"/>\n+    <wsdl:binding name=\"DoubleItPlaintextBinding\" type=\"tns:DoubleItPortType\">\n+        <soap:binding style=\"document\" transport=\"http://schemas.xmlsoap.org/soap/http\"/>\n+        <wsdl:operation name=\"DoubleIt\">\n+            <soap:operation soapAction=\"\"/>\n+            <wsdl:input>\n+                <soap:body use=\"literal\"/>\n+            </wsdl:input>\n+            <wsdl:output>\n+                <soap:body use=\"literal\"/>\n+            </wsdl:output>\n+            <wsdl:fault name=\"DoubleItFault\">\n+                <soap:body use=\"literal\" name=\"DoubleItFault\"/>\n+            </wsdl:fault>\n+        </wsdl:operation>\n+    </wsdl:binding>\n+    <wsdl:service name=\"DoubleItService\">\n+        <wsdl:port name=\"DoubleItPlaintextPort\" binding=\"tns:DoubleItPlaintextBinding\">\n+            <soap:address location=\"http://localhost:9009/doubleit\"/>\n+        </wsdl:port>\n+    </wsdl:service>\n+ </wsdl:definitions>\n\\ No newline at end of file",
                "changes": 42,
                "blob_url": "https://github.com/apache/cxf/blob/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/DoubleIt.wsdl"
            },
            {
                "additions": 33,
                "sha": "de56172ff231696185481f9a8befe6e753928582",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/client.xml",
                "deletions": 0,
                "filename": "systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/client.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/client.xml?ref=65f119d0904b25690600fd70fd751462cbd5113f",
                "patch": "@@ -0,0 +1,33 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+ Licensed to the Apache Software Foundation (ASF) under one\n+ or more contributor license agreements. See the NOTICE file\n+ distributed with this work for additional information\n+ regarding copyright ownership. The ASF licenses this file\n+ to you under the Apache License, Version 2.0 (the\n+ \"License\"); you may not use this file except in compliance\n+ with the License. You may obtain a copy of the License at\n+ \n+ http://www.apache.org/licenses/LICENSE-2.0\n+ \n+ Unless required by applicable law or agreed to in writing,\n+ software distributed under the License is distributed on an\n+ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ KIND, either express or implied. See the License for the\n+ specific language governing permissions and limitations\n+ under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:http=\"http://cxf.apache.org/transports/http/configuration\" xmlns:jaxws=\"http://cxf.apache.org/jaxws\" xmlns:cxf=\"http://cxf.apache.org/core\" xmlns:p=\"http://cxf.apache.org/policy\" xmlns:sec=\"http://cxf.apache.org/configuration/security\" xsi:schemaLocation=\"           http://www.springframework.org/schema/beans           http://www.springframework.org/schema/beans/spring-beans-4.2.xsd           http://cxf.apache.org/jaxws                           http://cxf.apache.org/schemas/jaxws.xsd           http://cxf.apache.org/transports/http/configuration   http://cxf.apache.org/schemas/configuration/http-conf.xsd           http://cxf.apache.org/configuration/security          http://cxf.apache.org/schemas/configuration/security.xsd           http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd           http://cxf.apache.org/policy http://cxf.apache.org/schemas/policy.xsd\">\n+    <cxf:bus>\n+        <cxf:features>\n+            <p:policies/>\n+            <cxf:logging/>\n+        </cxf:features>\n+    </cxf:bus>\n+    \n+    <jaxws:client name=\"{http://www.example.org/contract/DoubleIt}DoubleItPlaintextPort\" createdFromAPI=\"true\">\n+        <jaxws:properties>\n+        </jaxws:properties>\n+    </jaxws:client>\n+  \n+</beans>",
                "changes": 33,
                "blob_url": "https://github.com/apache/cxf/blob/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/client.xml"
            },
            {
                "additions": 51,
                "sha": "0ddc86d80490c0830e486993e1ecad84bc9c593e",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/server.xml",
                "deletions": 0,
                "filename": "systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/server.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/server.xml?ref=65f119d0904b25690600fd70fd751462cbd5113f",
                "patch": "@@ -0,0 +1,51 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements. See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership. The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License. You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied. See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<beans xmlns=\"http://www.springframework.org/schema/beans\" \n+    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n+    xmlns:http=\"http://cxf.apache.org/transports/http/configuration\" \n+    xmlns:httpj=\"http://cxf.apache.org/transports/http-jetty/configuration\" \n+    xmlns:sec=\"http://cxf.apache.org/configuration/security\" \n+    xmlns:cxf=\"http://cxf.apache.org/core\" \n+    xmlns:jaxrs=\"http://cxf.apache.org/jaxrs\" \n+    xmlns:util=\"http://www.springframework.org/schema/util\"\n+    xsi:schemaLocation=\"http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\n+             http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd\n+             http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd\n+             http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util-4.2.xsd\n+             http://cxf.apache.org/transports/http/configuration http://cxf.apache.org/schemas/configuration/http-conf.xsd\n+             http://cxf.apache.org/transports/http-jetty/configuration http://cxf.apache.org/schemas/configuration/http-jetty.xsd \n+             http://cxf.apache.org/configuration/security http://cxf.apache.org/schemas/configuration/security.xsd\">\n+    <bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"/>\n+    <cxf:bus>\n+        <cxf:features>\n+            <cxf:logging/>\n+        </cxf:features>\n+    </cxf:bus>\n+\n+   <bean id=\"serviceBean\" class=\"org.apache.cxf.systest.soap.DummyService\"/>\n+   \n+   <jaxrs:server \n+       address=\"http://localhost:${testutil.ports.soap.EmptySOAPBodyServer}/doubleit\">\n+       <jaxrs:serviceBeans>\n+           <ref bean=\"serviceBean\"/>\n+       </jaxrs:serviceBeans>\n+   </jaxrs:server>\n+\n+</beans>",
                "changes": 51,
                "blob_url": "https://github.com/apache/cxf/blob/65f119d0904b25690600fd70fd751462cbd5113f/systests/uncategorized/src/test/resources/org/apache/cxf/systest/soap/server.xml"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7653 - Adding an @Ignore'd test that reproduces the NPE",
        "commit": "https://github.com/apache/cxf/commit/65f119d0904b25690600fd70fd751462cbd5113f"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/dbaf44f3ed9c72d31f5083a4a6e3f92af48d7b26",
        "bug_id": "cxf_25",
        "file": [
            {
                "additions": 1,
                "sha": "d45ada778d544e9f45d5e2cbefeecbbc985f2fef",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/62ca005b5c1b5e97a3ad75dceae9b355f65a9e35/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweUtils.java",
                "deletions": 1,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweUtils.java?ref=62ca005b5c1b5e97a3ad75dceae9b355f65a9e35",
                "patch": "@@ -352,7 +352,7 @@ public static JweDecryption getEcDirectKeyJweDecryption(JsonWebKey key, ContentA\n         throw new JweException(JweException.Error.INVALID_KEY_ALGORITHM);\n     }\n     public static JweEncryptionProvider loadEncryptionProvider(boolean required) {\n-        return loadEncryptionProvider(null, required);\n+        return loadEncryptionProvider(new JweHeaders(), required);\n     }\n \n     public static JweEncryptionProvider loadEncryptionProvider(JweHeaders headers, boolean required) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/62ca005b5c1b5e97a3ad75dceae9b355f65a9e35/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7504] Avoiding NPE",
        "commit": "https://github.com/apache/cxf/commit/62ca005b5c1b5e97a3ad75dceae9b355f65a9e35"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/031502b34abbdda1da06c20a256822167177c75d",
        "bug_id": "cxf_26",
        "file": [
            {
                "additions": 5,
                "sha": "f9da335ede243bdba24138da8263a15dccee7bec",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ba1fa120af2d45ab601c3da46d47224dfd5e567c/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweOutputStream.java",
                "deletions": 3,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweOutputStream.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweOutputStream.java?ref=ba1fa120af2d45ab601c3da46d47224dfd5e567c",
                "patch": "@@ -79,10 +79,12 @@ public void write(byte b[], int off, int len) throws IOException {\n \n     private void encryptAndWrite(byte[] chunk, int off, int len) throws IOException {\n         byte[] encrypted = encryptingCipher.update(chunk, off, len);\n-        if (authTagProducer != null) {\n-            authTagProducer.update(encrypted, 0, encrypted.length);\n+        if (encrypted != null) {\n+            if (authTagProducer != null) {\n+                authTagProducer.update(encrypted, 0, encrypted.length);\n+            }\n+            encodeAndWrite(encrypted, 0, encrypted.length, false);\n         }\n-        encodeAndWrite(encrypted, 0, encrypted.length, false);\n     }\n     private void encodeAndWrite(byte[] encryptedChunk, int off, int len, boolean finalWrite) throws IOException {\n         byte[] theChunk = lastEncryptedDataChunk;",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/ba1fa120af2d45ab601c3da46d47224dfd5e567c/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweOutputStream.java"
            }
        ],
        "repo": "cxf",
        "message": "Preventing a possible NPE in JweOutputStream",
        "commit": "https://github.com/apache/cxf/commit/ba1fa120af2d45ab601c3da46d47224dfd5e567c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/de9c7ecd7a4d205aa26d893889235468797e87bb",
        "bug_id": "cxf_27",
        "file": [
            {
                "additions": 2,
                "sha": "dcbe9fc5785c4851de2bcc6557e8e5d2fc24514d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b49075882641fcebbbdf1ed8d84247fcf80aa558/core/src/main/java/org/apache/cxf/common/jaxb/JAXBContextCache.java",
                "deletions": 6,
                "filename": "core/src/main/java/org/apache/cxf/common/jaxb/JAXBContextCache.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/common/jaxb/JAXBContextCache.java?ref=b49075882641fcebbbdf1ed8d84247fcf80aa558",
                "patch": "@@ -69,11 +69,6 @@ private CachedContextAndSchemas(JAXBContext context, Set<Class<?>> classes, Cach\n             this.classes = classes;\n             ccas = new WeakReference<CachedContextAndSchemasInternal>(i);\n         }\n-        private CachedContextAndSchemas(CachedContextAndSchemasInternal i) {\n-            this.context = i.getContext();\n-            this.classes = i.getClasses();\n-            ccas = new WeakReference<CachedContextAndSchemasInternal>(i);\n-        }\n         public JAXBContext getContext() {\n             return context;\n         }\n@@ -237,7 +232,8 @@ public static CachedContextAndSchemas getCachedContextAndSchemas(final Set<Class\n                         JAXBCONTEXT_CACHE.remove(cachedContextAndSchemasInternal.getClasses());\n                         cachedContextAndSchemasInternal = null;\n                     } else {\n-                        return new CachedContextAndSchemas(cachedContextAndSchemasInternal);\n+                        return new CachedContextAndSchemas(context, cachedContextAndSchemasInternal.getClasses(),\n+                            cachedContextAndSchemasInternal);\n                     }\n                 }\n             }",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/b49075882641fcebbbdf1ed8d84247fcf80aa558/core/src/main/java/org/apache/cxf/common/jaxb/JAXBContextCache.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7166] NullPointerException at org.apache.cxf.common.jaxb.JAXBUtils.createJAXBContextProxy",
        "commit": "https://github.com/apache/cxf/commit/b49075882641fcebbbdf1ed8d84247fcf80aa558"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3fc5e29018ca32c14f82ced1f07678c4bf35bfea",
        "bug_id": "cxf_28",
        "file": [
            {
                "additions": 1,
                "sha": "00a6227c5f535f4150ac94307689d9310310f5a7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/bb1e05690f88ea3a4781bd7939c68c8c0495517c/rt/security-saml/src/main/java/org/apache/cxf/rt/security/saml/interceptor/WSS4JBasicAuthValidator.java",
                "deletions": 1,
                "filename": "rt/security-saml/src/main/java/org/apache/cxf/rt/security/saml/interceptor/WSS4JBasicAuthValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/security-saml/src/main/java/org/apache/cxf/rt/security/saml/interceptor/WSS4JBasicAuthValidator.java?ref=bb1e05690f88ea3a4781bd7939c68c8c0495517c",
                "patch": "@@ -48,7 +48,7 @@\n /**\n  * An abstract class containing some functionality to validate a username + password received\n  * via HTTP Basic Authentication via a WSS4J Validator (and hence JAAS, the STS, etc.). It can\n- * be subclasses and used as a CXF interceptor or else via a JAX-RS ContainerRequestFilter.\n+ * be subclassed and used as a CXF interceptor or else via a JAX-RS ContainerRequestFilter.\n  */\n public abstract class WSS4JBasicAuthValidator {\n ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/bb1e05690f88ea3a4781bd7939c68c8c0495517c/rt/security-saml/src/main/java/org/apache/cxf/rt/security/saml/interceptor/WSS4JBasicAuthValidator.java"
            },
            {
                "additions": 6,
                "sha": "9119a0ce79b6d28c191c3ba975b5d8aad5953ee5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/bb1e05690f88ea3a4781bd7939c68c8c0495517c/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/jwt/JWTTokenProvider.java",
                "deletions": 3,
                "filename": "services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/jwt/JWTTokenProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/jwt/JWTTokenProvider.java?ref=bb1e05690f88ea3a4781bd7939c68c8c0495517c",
                "patch": "@@ -245,9 +245,12 @@ private String signToken(\n                 }\n             }\n             // Get the password\n-            WSPasswordCallback[] cb = {new WSPasswordCallback(alias, WSPasswordCallback.SIGNATURE)};\n-            callbackHandler.handle(cb);\n-            String password = cb[0].getPassword();\n+            String password = null;\n+            if (callbackHandler != null) {\n+                WSPasswordCallback[] cb = {new WSPasswordCallback(alias, WSPasswordCallback.SIGNATURE)};\n+                callbackHandler.handle(cb);\n+                password = cb[0].getPassword();\n+            }\n \n             Properties signingProperties = new Properties();\n ",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/bb1e05690f88ea3a4781bd7939c68c8c0495517c/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/jwt/JWTTokenProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/bb1e05690f88ea3a4781bd7939c68c8c0495517c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/85e9a478055cb35f917e5cfa8e19fa52a7290fe0",
        "bug_id": "cxf_29",
        "file": [
            {
                "additions": 1,
                "sha": "eed47448c840fea211324d175bf8528e8f09119b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java?ref=0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e",
                "patch": "@@ -223,7 +223,7 @@ public void init(List<ClassResourceInfo> cris) {\n             }\n             if (!schemaLocs.isEmpty()) {\n                 this.setSchemaLocations(schemaLocs);\n-                if (cris.size() == 0 && schema != null) {\n+                if (cris.size() == 0 && schema != null && sv != null) {\n                     SchemaValidation.SchemaValidationType type = sv.type();\n                     if (type == SchemaValidation.SchemaValidationType.OUT) {\n                         validateInputIfPossible = false;",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java"
            },
            {
                "additions": 2,
                "sha": "37897c8bf4446fd8530dc175e7e99a48db61a617",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java?ref=0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e",
                "patch": "@@ -929,12 +929,12 @@ private static Object injectIntoCollectionOrArray(Class<?> rawType,\n             realGenericType = realType;\n         } else {\n             Type[] types = getActualTypes(genericType);\n-            if (types.length == 0 || !(types[0] instanceof ParameterizedType)) {\n+            if (types == null || types.length == 0 || !(types[0] instanceof ParameterizedType)) {\n                 realType = getActualType(genericType);\n                 realGenericType = realType;\n             } else {\n                 realType = getRawType(types[0]);\n-                realGenericType = types[0] == realType ? realType : types[0];\n+                realGenericType = types[0];\n             }\n         }\n         Object theValues = null;",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java"
            },
            {
                "additions": 7,
                "sha": "87217bf00af22dcc9003dcb69f5834d61372fba4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java",
                "deletions": 4,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java?ref=0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e",
                "patch": "@@ -339,7 +339,8 @@ public static void injectParameters(OperationResourceInfo ori,\n                 if (cris.isEmpty()) {\n                     firstCri = cri;\n                     cris.put(cri, entry.getValue());\n-                } else if (URITemplate.compareTemplates(firstCri.getURITemplate(), cri.getURITemplate()) == 0) {\n+                } else if (firstCri != null\n+                        && URITemplate.compareTemplates(firstCri.getURITemplate(), cri.getURITemplate()) == 0) {\n                     cris.put(cri, entry.getValue());\n                 } else {\n                     break;\n@@ -1550,8 +1551,10 @@ private static boolean compareCompositeSubtypes(MediaType requiredType, MediaTyp\n                     String subTypeBeforePlus1 = splitMediaSubType(subType1, false);\n                     String subTypeBeforePlus2 = splitMediaSubType(subType2, false);\n                     nullPossible = subTypeBeforePlus1 == null || subTypeBeforePlus2 == null;\n-                    isCompatible = subTypeBeforePlus1 == null && subTypeBeforePlus2.equals(subType1)\n-                        || subTypeBeforePlus2 == null && subTypeBeforePlus1.equals(subType2);\n+                    isCompatible = subTypeBeforePlus1 == null && subTypeBeforePlus2 != null\n+                            && subTypeBeforePlus2.equals(subType1)\n+                            || subTypeBeforePlus2 == null && subTypeBeforePlus1 != null\n+                            && subTypeBeforePlus1.equals(subType2);\n                     if (!isCompatible && !nullPossible) {\n                         isCompatible = subTypeBeforePlus1.equalsIgnoreCase(subTypeBeforePlus2)\n                             && (subType1.charAt(subType1.length() - 1) == '*'\n@@ -1569,7 +1572,7 @@ private static boolean compareCompositeSubtypes(MediaType requiredType, MediaTyp\n                     String subTypeBeforePlus1 = splitMediaSubType(subType1, false);\n                     String subTypeBeforePlus2 = splitMediaSubType(subType2, false);\n \n-                    isCompatible = subTypeBeforePlus1.equalsIgnoreCase(subTypeBeforePlus2)\n+                    isCompatible = subTypeBeforePlus1 != null && subTypeBeforePlus1.equalsIgnoreCase(subTypeBeforePlus2)\n                         && (subType1.charAt(subType1.length() - 1) == '*'\n                             || subType2.charAt(subType2.length() - 1) == '*');\n                 }",
                "changes": 11,
                "blob_url": "https://github.com/apache/cxf/blob/0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java"
            },
            {
                "additions": 1,
                "sha": "5e93b5f6df714a4854dda05ac0b966d46ae54bf7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/ResourceUtils.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/ResourceUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/ResourceUtils.java?ref=0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e",
                "patch": "@@ -896,7 +896,7 @@ public static JAXRSServerFactoryBean createApplication(Application app,\n     public static Object createProviderInstance(Class<?> cls) {\n         try {\n             Constructor<?> c = ResourceUtils.findResourceConstructor(cls, false);\n-            if (c.getParameterTypes().length == 0) {\n+            if (c != null && c.getParameterTypes().length == 0) {\n                 return c.newInstance();\n             }\n             return c;",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/ResourceUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "Add some NPE checks",
        "commit": "https://github.com/apache/cxf/commit/0ada3f2b8ce9575ce27ed67b1eeecaf0be52943e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/dd2ef496df36ef8967b5274c0a5928f5594469be",
        "bug_id": "cxf_30",
        "file": [
            {
                "additions": 1,
                "sha": "aee34fd0f39ebed557bcd0239c9bf02d7ed04b3f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ff2a2793ea253a1cd45ea30507cbfc87b879fcf8/core/src/main/java/org/apache/cxf/staxutils/transform/InTransformReader.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/staxutils/transform/InTransformReader.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/staxutils/transform/InTransformReader.java?ref=ff2a2793ea253a1cd45ea30507cbfc87b879fcf8",
                "patch": "@@ -139,7 +139,7 @@ public int next() throws XMLStreamException {\n             if (null != appendProp && !replaceContent) {\n                 // handle one of the four append modes\n                 handleAppendMode(expected, appendProp);\n-            } else if (replaceContent) {\n+            } else if (null != appendProp && replaceContent) {\n                 replaceText = appendProp.getText();\n                 if (doDebug) {\n                     LOG.fine(\"replacing content with \" + replaceText);",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/ff2a2793ea253a1cd45ea30507cbfc87b879fcf8/core/src/main/java/org/apache/cxf/staxutils/transform/InTransformReader.java"
            },
            {
                "additions": 1,
                "sha": "ec7fa8ce671ce30b54bf0f6e6aa5bceabb58d105",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ff2a2793ea253a1cd45ea30507cbfc87b879fcf8/core/src/main/java/org/apache/cxf/staxutils/transform/OutTransformWriter.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/staxutils/transform/OutTransformWriter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/staxutils/transform/OutTransformWriter.java?ref=ff2a2793ea253a1cd45ea30507cbfc87b879fcf8",
                "patch": "@@ -242,7 +242,7 @@ public void writeStartElement(String prefix, String local, String uri) throws XM\n                     super.writeEndElement();\n                 }\n             }\n-        } else if (replaceContent) {\n+        } else if (null != appendProp && replaceContent) {\n             //\n             replaceText = appendProp.getText();\n         } else if (dropped) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/ff2a2793ea253a1cd45ea30507cbfc87b879fcf8/core/src/main/java/org/apache/cxf/staxutils/transform/OutTransformWriter.java"
            },
            {
                "additions": 2,
                "sha": "1fdca0b8ee00e57459c350ead5038c397b9eafae",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ff2a2793ea253a1cd45ea30507cbfc87b879fcf8/core/src/main/java/org/apache/cxf/ws/addressing/VersionTransformer.java",
                "deletions": 2,
                "filename": "core/src/main/java/org/apache/cxf/ws/addressing/VersionTransformer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/ws/addressing/VersionTransformer.java?ref=ff2a2793ea253a1cd45ea30507cbfc87b879fcf8",
                "patch": "@@ -184,7 +184,7 @@ public static AttributedURIType convert(org.apache.cxf.ws.addressing.v200403.Att\n             exposed.setServiceName(serviceName);\n         }\n         String portLocalName = EndpointReferenceUtils.getPortName(internal);\n-        if (portLocalName != null) {\n+        if (portLocalName != null && serviceQName != null) {\n             String namespace = serviceQName.getNamespaceURI() != null\n                                ? serviceQName.getNamespaceURI()\n                                : Names.WSDL_INSTANCE_NAMESPACE_NAME;\n@@ -221,7 +221,7 @@ public static AttributedURIType convert(org.apache.cxf.ws.addressing.v200403.Att\n             exposed.setServiceName(serviceName);\n         }\n         String portLocalName = EndpointReferenceUtils.getPortName(internal);\n-        if (portLocalName != null) {\n+        if (portLocalName != null && serviceQName != null) {\n             String namespace = serviceQName.getNamespaceURI() != null\n                 ? serviceQName.getNamespaceURI() : Names.WSDL_INSTANCE_NAMESPACE_NAME;\n             QName portQName = new QName(namespace, portLocalName);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/ff2a2793ea253a1cd45ea30507cbfc87b879fcf8/core/src/main/java/org/apache/cxf/ws/addressing/VersionTransformer.java"
            },
            {
                "additions": 1,
                "sha": "ab7b7ee05ef5526ef6eb62fbedde57cedaffa038",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ff2a2793ea253a1cd45ea30507cbfc87b879fcf8/integration/jca/src/test/java/org/apache/cxf/jca/core/resourceadapter/UriHandlerInitTest.java",
                "deletions": 8,
                "filename": "integration/jca/src/test/java/org/apache/cxf/jca/core/resourceadapter/UriHandlerInitTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/integration/jca/src/test/java/org/apache/cxf/jca/core/resourceadapter/UriHandlerInitTest.java?ref=ff2a2793ea253a1cd45ea30507cbfc87b879fcf8",
                "patch": "@@ -46,15 +46,8 @@ public void testAppendToProp() {\n                              + newValue.length(), newValue.length(), len);\n \n             } finally {\n-                if (origVal != null) {\n-                    properties.put(PROP_NAME, origVal);\n-                }\n+                properties.put(PROP_NAME, origVal);\n             }\n         }\n     }\n-\n-\n-\n-\n-\n }",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/ff2a2793ea253a1cd45ea30507cbfc87b879fcf8/integration/jca/src/test/java/org/apache/cxf/jca/core/resourceadapter/UriHandlerInitTest.java"
            }
        ],
        "repo": "cxf",
        "message": "Add some NPE checks",
        "commit": "https://github.com/apache/cxf/commit/ff2a2793ea253a1cd45ea30507cbfc87b879fcf8"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/8b5cc1a7f7b1308932189546f458e8d1115dec43",
        "bug_id": "cxf_31",
        "file": [
            {
                "additions": 9,
                "sha": "b00acd2cb1effc2464d3db6934f1ed4d92d40411",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/88f8ce6eb41c557ece52b305959f6b2647bfb001/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/WriterInterceptorMBW.java",
                "deletions": 8,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/WriterInterceptorMBW.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/WriterInterceptorMBW.java?ref=88f8ce6eb41c557ece52b305959f6b2647bfb001",
                "patch": "@@ -58,10 +58,6 @@ public WriterInterceptorMBW(MessageBodyWriter<Object> writer, Message m) {\n     @Override\n     public void aroundWriteTo(WriterInterceptorContext c) throws IOException, WebApplicationException {\n \n-        if (LOG.isLoggable(Level.FINE)) {\n-            LOG.fine(\"Response EntityProvider is: \" + writer.getClass().getName());\n-        }\n-\n         MultivaluedMap<String, Object> headers = c.getHeaders();\n         Object mtObject = headers.getFirst(HttpHeaders.CONTENT_TYPE);\n         MediaType entityMt = mtObject == null ? c.getMediaType() : JAXRSUtils.toMediaType(mtObject.toString());\n@@ -77,14 +73,19 @@ public void aroundWriteTo(WriterInterceptorContext c) throws IOException, WebApp\n \n             writer = (MessageBodyWriter<Object>)ProviderFactory.getInstance(m)\n                 .createMessageBodyWriter(entityCls, entityType, entityAnns, entityMt, m);\n-            if (writer == null) {\n-                String errorMessage = JAXRSUtils.logMessageHandlerProblem(\"NO_MSG_WRITER\", entityCls, entityMt);\n-                throw new ProcessingException(errorMessage);\n-            }\n         }\n \n+        if (writer == null) {\n+            String errorMessage = JAXRSUtils.logMessageHandlerProblem(\"NO_MSG_WRITER\", entityCls, entityMt);\n+            throw new ProcessingException(errorMessage);\n+        }\n+        \n         HttpUtils.convertHeaderValuesToString(headers, true);\n \n+        if (LOG.isLoggable(Level.FINE)) {\n+            LOG.fine(\"Response EntityProvider is: \" + writer.getClass().getName());\n+        }\n+        \n         writer.writeTo(c.getEntity(),\n                        c.getType(),\n                        c.getGenericType(),",
                "changes": 17,
                "blob_url": "https://github.com/apache/cxf/blob/88f8ce6eb41c557ece52b305959f6b2647bfb001/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/WriterInterceptorMBW.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7429] Preventing NPE",
        "commit": "https://github.com/apache/cxf/commit/88f8ce6eb41c557ece52b305959f6b2647bfb001"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1f7241ba6017f1496e9b8aadec5c807ed05e63b4",
        "bug_id": "cxf_32",
        "file": [
            {
                "additions": 5,
                "sha": "74227b4fb6266f4ab2e59e1af6c2e5b9e7412b7d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0b7b18333591d6bb8e0bfcf324bbdefaa8cce21d/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java",
                "deletions": 5,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java?ref=0b7b18333591d6bb8e0bfcf324bbdefaa8cce21d",
                "patch": "@@ -161,7 +161,7 @@ public final boolean isGET(SoapMessage message) {\n     }\n \n     public void handleMessage(SoapMessage msg) throws Fault {\n-        if (msg.containsKey(SECURITY_PROCESSED) || isGET(msg)) {\n+        if (msg.containsKey(SECURITY_PROCESSED) || isGET(msg) || msg.getExchange() == null) {\n             return;\n         }\n \n@@ -293,7 +293,7 @@ private void handleMessageInternal(SoapMessage msg) throws Fault {\n                 }\n \n                 checkActions(msg, reqData, wsResult.getResults(), actions, SAAJUtils.getBody(doc));\n-                                       \n+\n                 doResults(\n                     msg, actor,\n                     header,\n@@ -370,16 +370,16 @@ private void importNewDomToSAAJ(SOAPMessage doc, Element elem, Node originalNode\n                             newNode = (Element)method.invoke(newNode);\n                         } catch (java.lang.NoSuchMethodException ex) {\n                             // do nothing;\n-                        } \n+                        }\n                     }\n                     elem.getOwnerDocument().getDocumentElement().getFirstChild().\n                         getNextSibling().replaceChild(newNode, node);\n                 } catch (Exception ex) {\n                     //just to the best try\n                 }\n-                \n+\n             }\n-            \n+\n         }\n     }\n ",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/0b7b18333591d6bb8e0bfcf324bbdefaa8cce21d/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/0b7b18333591d6bb8e0bfcf324bbdefaa8cce21d"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/94a89c7dd208998fcfc612d49e230ea33c7dc063",
        "bug_id": "cxf_33",
        "file": [
            {
                "additions": 7,
                "sha": "7830065d83789ff98b7d9bea3a5e8d2aadce4d14",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ac133b9f0feccc120cdf70ebbd68e1752f2372ad/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/policy/RMPolicyInterceptorProvider.java",
                "deletions": 0,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/policy/RMPolicyInterceptorProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/policy/RMPolicyInterceptorProvider.java?ref=ac133b9f0feccc120cdf70ebbd68e1752f2372ad",
                "patch": "@@ -27,9 +27,11 @@\n import org.apache.cxf.ws.policy.AbstractPolicyInterceptorProvider;\n import org.apache.cxf.ws.rm.RM10Constants;\n import org.apache.cxf.ws.rm.RM11Constants;\n+import org.apache.cxf.ws.rm.RMCaptureInInterceptor;\n import org.apache.cxf.ws.rm.RMCaptureOutInterceptor;\n import org.apache.cxf.ws.rm.RMDeliveryInterceptor;\n import org.apache.cxf.ws.rm.RMInInterceptor;\n+import org.apache.cxf.ws.rm.RMManager;\n import org.apache.cxf.ws.rm.RMOutInterceptor;\n import org.apache.cxf.ws.rm.soap.RMSoapInInterceptor;\n import org.apache.cxf.ws.rm.soap.RMSoapOutInterceptor;\n@@ -40,6 +42,7 @@\n     private static final Collection<QName> ASSERTION_TYPES;\n     private RMInInterceptor rmIn = new RMInInterceptor();\n     private RMOutInterceptor rmOut = new RMOutInterceptor();\n+    private RMCaptureInInterceptor rmCaptureIn = new RMCaptureInInterceptor();\n     private RMCaptureOutInterceptor rmCaptureOut = new RMCaptureOutInterceptor();\n     private RMSoapOutInterceptor rmOutSoap = new RMSoapOutInterceptor();\n     private RMSoapInInterceptor rmInSoap = new RMSoapInInterceptor();\n@@ -64,6 +67,10 @@ public RMPolicyInterceptorProvider(Bus bus) {\n         getInInterceptors().add(rmIn);\n         getInInterceptors().add(rmInSoap);\n         getInInterceptors().add(rmDelivery);\n+        RMManager manager = bus.getExtension(RMManager.class);\n+        if (null != manager && null != manager.getStore()) {\n+            getInInterceptors().add(rmCaptureIn);\n+        }\n \n         getOutInterceptors().add(rmOut);\n         getOutInterceptors().add(rmCaptureOut);",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/ac133b9f0feccc120cdf70ebbd68e1752f2372ad/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/policy/RMPolicyInterceptorProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6274] NullPointerException in DestinationSequence because of RMCaptureInInterceptor not inserted",
        "commit": "https://github.com/apache/cxf/commit/ac133b9f0feccc120cdf70ebbd68e1752f2372ad"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b62ea11153d17a5849ef4242842f22ca996ce2a1",
        "bug_id": "cxf_34",
        "file": [
            {
                "additions": 1,
                "sha": "0e70836423db9d3b5a035d2985271b546837d41f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c6ec599873a67cccae0a75270900c1cbec2cd796/rt/rs/security/sso/saml/src/main/java/org/apache/cxf/rs/security/saml/sso/SAMLSSOResponseValidator.java",
                "deletions": 1,
                "filename": "rt/rs/security/sso/saml/src/main/java/org/apache/cxf/rs/security/saml/sso/SAMLSSOResponseValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/sso/saml/src/main/java/org/apache/cxf/rs/security/saml/sso/SAMLSSOResponseValidator.java?ref=c6ec599873a67cccae0a75270900c1cbec2cd796",
                "patch": "@@ -172,7 +172,7 @@ private void validateIssuer(org.opensaml.saml.saml2.core.Issuer issuer) throws W\n         }\n \n         // Issuer value must match (be contained in) Issuer IDP\n-        if (enforceKnownIssuer && !issuerIDP.startsWith(issuer.getValue())) {\n+        if (enforceKnownIssuer && (issuer.getValue() == null || !issuerIDP.startsWith(issuer.getValue()))) {\n             LOG.fine(\"Issuer value: \" + issuer.getValue() + \" does not match issuer IDP: \"\n                 + issuerIDP);\n             throw new WSSecurityException(WSSecurityException.ErrorCode.FAILURE, \"invalidSAMLsecurity\");",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/c6ec599873a67cccae0a75270900c1cbec2cd796/rt/rs/security/sso/saml/src/main/java/org/apache/cxf/rs/security/saml/sso/SAMLSSOResponseValidator.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix if a SAML Issuer is null",
        "commit": "https://github.com/apache/cxf/commit/c6ec599873a67cccae0a75270900c1cbec2cd796"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/19cad14f41be42f02a429bdcf93613fa43673448",
        "bug_id": "cxf_35",
        "file": [
            {
                "additions": 23,
                "sha": "bcca66826c0135ad5641140cd363a49b1c775a58",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/156b166b093aa92c1fc400e0f1f7440ded701169/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/CryptoCoverageChecker.java",
                "deletions": 21,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/CryptoCoverageChecker.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/CryptoCoverageChecker.java?ref=156b166b093aa92c1fc400e0f1f7440ded701169",
                "patch": "@@ -137,31 +137,33 @@ public void handleMessage(SoapMessage message) throws Fault {\n                 (List<?>) message.get(WSHandlerConstants.RECV_RESULTS));\n \n         // Get all encrypted and signed references\n-        for (WSHandlerResult wshr : results) {\n-            List<WSSecurityEngineResult> signedResults = wshr.getActionResults().get(WSConstants.SIGN);\n-            if (signedResults != null) {\n-                for (WSSecurityEngineResult signedResult : signedResults) {\n-                    List<WSDataRef> sl =\n-                        CastUtils.cast((List<?>)signedResult.get(WSSecurityEngineResult.TAG_DATA_REF_URIS));\n-                    if (sl != null) {\n-                        if (sl.size() == 1\n-                            && sl.get(0).getName().equals(new QName(WSConstants.SIG_NS, WSConstants.SIG_LN))) {\n-                            //endorsing the signature so don't include\n-                            continue;\n+        if (results != null) {\n+            for (WSHandlerResult wshr : results) {\n+                List<WSSecurityEngineResult> signedResults = wshr.getActionResults().get(WSConstants.SIGN);\n+                if (signedResults != null) {\n+                    for (WSSecurityEngineResult signedResult : signedResults) {\n+                        List<WSDataRef> sl =\n+                            CastUtils.cast((List<?>)signedResult.get(WSSecurityEngineResult.TAG_DATA_REF_URIS));\n+                        if (sl != null) {\n+                            if (sl.size() == 1\n+                                && sl.get(0).getName().equals(new QName(WSConstants.SIG_NS, WSConstants.SIG_LN))) {\n+                                //endorsing the signature so don't include\n+                                continue;\n+                            }\n+\n+                            signed.addAll(sl);\n                         }\n-\n-                        signed.addAll(sl);\n                     }\n                 }\n-            }\n \n-            List<WSSecurityEngineResult> encryptedResults = wshr.getActionResults().get(WSConstants.ENCR);\n-            if (encryptedResults != null) {\n-                for (WSSecurityEngineResult encryptedResult : encryptedResults) {\n-                    List<WSDataRef> el =\n-                        CastUtils.cast((List<?>)encryptedResult.get(WSSecurityEngineResult.TAG_DATA_REF_URIS));\n-                    if (el != null) {\n-                        encrypted.addAll(el);\n+                List<WSSecurityEngineResult> encryptedResults = wshr.getActionResults().get(WSConstants.ENCR);\n+                if (encryptedResults != null) {\n+                    for (WSSecurityEngineResult encryptedResult : encryptedResults) {\n+                        List<WSDataRef> el =\n+                            CastUtils.cast((List<?>)encryptedResult.get(WSSecurityEngineResult.TAG_DATA_REF_URIS));\n+                        if (el != null) {\n+                            encrypted.addAll(el);\n+                        }\n                     }\n                 }\n             }",
                "changes": 44,
                "blob_url": "https://github.com/apache/cxf/blob/156b166b093aa92c1fc400e0f1f7440ded701169/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/CryptoCoverageChecker.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/156b166b093aa92c1fc400e0f1f7440ded701169"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/51db79ca7bd2c703a4dbbd42d7761c97af3bad84",
        "bug_id": "cxf_36",
        "file": [
            {
                "additions": 5,
                "sha": "b04886d213c6eb7893f868e6f0221f895a662ce0",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/53889ee97a637f07fe39dc3d7d75714ed016ff4e/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/DefaultSubjectProvider.java",
                "deletions": 1,
                "filename": "services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/DefaultSubjectProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/DefaultSubjectProvider.java?ref=53889ee97a637f07fe39dc3d7d75714ed016ff4e",
                "patch": "@@ -21,8 +21,11 @@\n import java.security.Principal;\n import java.security.PublicKey;\n import java.security.cert.X509Certificate;\n+import java.util.Collection;\n+import java.util.Collections;\n import java.util.logging.Level;\n import java.util.logging.Logger;\n+import java.util.regex.Pattern;\n \n import org.w3c.dom.Document;\n import org.w3c.dom.Element;\n@@ -173,8 +176,9 @@ public SubjectBean getSubject(\n             if (stsProperties.isValidateUseKey() && stsProperties.getSignatureCrypto() != null) {\n                 if (receivedKey.getX509Cert() != null) {\n                     try {\n+                        Collection<Pattern> constraints = Collections.emptyList();\n                         stsProperties.getSignatureCrypto().verifyTrust(\n-                            new X509Certificate[]{receivedKey.getX509Cert()}, false, null);\n+                            new X509Certificate[]{receivedKey.getX509Cert()}, false, constraints);\n                     } catch (WSSecurityException e) {\n                         LOG.log(Level.FINE, \"Error in trust validation of UseKey: \", e);\n                         throw new STSException(\"Error in trust validation of UseKey\", STSException.REQUEST_FAILED);",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/53889ee97a637f07fe39dc3d7d75714ed016ff4e/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/DefaultSubjectProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6032] - NullPointerException while validating cert for SAML HOK",
        "commit": "https://github.com/apache/cxf/commit/53889ee97a637f07fe39dc3d7d75714ed016ff4e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/19121e3da243bb1516d605fd1498087efedd387c",
        "bug_id": "cxf_37",
        "file": [
            {
                "additions": 1,
                "sha": "8787a8bf508cae1f9988bff0c94bd21a1e1c8454",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/10ebf9ccfd29ad5888e639b4d4f558cc59bbdc60/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/grants/code/AbstractCodeDataProvider.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/grants/code/AbstractCodeDataProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/grants/code/AbstractCodeDataProvider.java?ref=10ebf9ccfd29ad5888e639b4d4f558cc59bbdc60",
                "patch": "@@ -69,7 +69,7 @@ public static ServerAuthorizationCodeGrant initCodeGrant(AuthorizationCodeRegist\n     protected abstract void saveCodeGrant(ServerAuthorizationCodeGrant grant);\n \n     public static boolean isCodeMatched(ServerAuthorizationCodeGrant grant, Client c, UserSubject sub) {\n-        if (c == null || grant.getClient().getClientId().equals(c.getClientId())) {\n+        if (grant != null && (c == null || grant.getClient().getClientId().equals(c.getClientId()))) {\n             UserSubject grantSub = grant.getSubject();\n             return sub == null || grantSub != null && grantSub.getLogin().equals(sub.getLogin());\n         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/10ebf9ccfd29ad5888e639b4d4f558cc59bbdc60/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/grants/code/AbstractCodeDataProvider.java"
            },
            {
                "additions": 1,
                "sha": "cc1b623248bb0517c39c9f206d1e5fedbc0f9710",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/10ebf9ccfd29ad5888e639b4d4f558cc59bbdc60/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/AbstractOAuthDataProvider.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/AbstractOAuthDataProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/AbstractOAuthDataProvider.java?ref=10ebf9ccfd29ad5888e639b4d4f558cc59bbdc60",
                "patch": "@@ -579,7 +579,7 @@ protected static boolean isClientMatched(Client c, UserSubject resourceOwner) {\n                 && c.getResourceOwnerSubject().getLogin().equals(resourceOwner.getLogin());\n     }\n     protected static boolean isTokenMatched(ServerAccessToken token, Client c, UserSubject sub) {\n-        if (c == null || token.getClient().getClientId().equals(c.getClientId())) {\n+        if (token != null && (c == null || token.getClient().getClientId().equals(c.getClientId()))) {\n             UserSubject tokenSub = token.getSubject();\n             if (sub == null || tokenSub != null && tokenSub.getLogin().equals(sub.getLogin())) {\n                 return true;",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/10ebf9ccfd29ad5888e639b4d4f558cc59bbdc60/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/AbstractOAuthDataProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoiding possible NPEs in the oauth2 providers",
        "commit": "https://github.com/apache/cxf/commit/10ebf9ccfd29ad5888e639b4d4f558cc59bbdc60"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f1593e4d3ab856611f419f3948252ccfd4b09fa0",
        "bug_id": "cxf_38",
        "file": [
            {
                "additions": 1,
                "sha": "750c2f59137165a5b9e1dc1b51baeeab7f059ad0",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/19cad14f41be42f02a429bdcf93613fa43673448/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpServletRequestFilter.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpServletRequestFilter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpServletRequestFilter.java?ref=19cad14f41be42f02a429bdcf93613fa43673448",
                "patch": "@@ -65,7 +65,7 @@ public ServletInputStream getInputStream() throws IOException {\n     @Override\n     public String getParameter(String name) {\n         String[] values = this.getParameterValues(name);\n-        return values == null ? null : values[0];\n+        return values == null || values.length == 0 ? null : values[0];\n     }\n     @Override\n     public String[] getParameterValues(String name) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/19cad14f41be42f02a429bdcf93613fa43673448/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpServletRequestFilter.java"
            }
        ],
        "repo": "cxf",
        "message": "Preveinting NPE in JAXRS HttpServletRequestFilter",
        "commit": "https://github.com/apache/cxf/commit/19cad14f41be42f02a429bdcf93613fa43673448"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/089ba5825c6ff173358f0a4da1fe20b9cfa7543c",
        "bug_id": "cxf_39",
        "file": [
            {
                "additions": 3,
                "sha": "428c775177dc0014383f1e87edfc94c3da7204f1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/aaa8fde1e631c53252d822d4ff24689f186cc668/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/JoseUtils.java",
                "deletions": 0,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/JoseUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/JoseUtils.java?ref=aaa8fde1e631c53252d822d4ff24689f186cc668",
                "patch": "@@ -196,6 +196,9 @@ public static URL getClasspathResourceURL(String path, Class<?> callingClass, Bu\n     public static Properties loadProperties(String propertiesLocation, Bus bus) throws Exception {\n         Properties props = new Properties();\n         try (InputStream is = getResourceStream(propertiesLocation, bus)) {\n+            if (is == null) {\n+                throw new JoseException(\"The properties file \" + propertiesLocation + \" could not be read\");\n+            }\n             props.load(is);\n         }\n         return props;",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/aaa8fde1e631c53252d822d4ff24689f186cc668/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/JoseUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix if the resource can't be loaded",
        "commit": "https://github.com/apache/cxf/commit/aaa8fde1e631c53252d822d4ff24689f186cc668"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/cb14bf9ac392a7936aff08d7e54dd12720f8e733",
        "bug_id": "cxf_40",
        "file": [
            {
                "additions": 10,
                "sha": "ce39516665045aa3258e348837d06c6f7bfa7a7a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7043ded41dc7484a9c47b38888a191ee70802c11/core/src/main/java/org/apache/cxf/common/classloader/ClassLoaderUtils.java",
                "deletions": 11,
                "filename": "core/src/main/java/org/apache/cxf/common/classloader/ClassLoaderUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/common/classloader/ClassLoaderUtils.java?ref=7043ded41dc7484a9c47b38888a191ee70802c11",
                "patch": "@@ -89,11 +89,10 @@ public static ClassLoader getURLClassLoader(\n      * @param callingClass The Class object of the calling object\n      */\n     public static URL getResource(String resourceName, Class<?> callingClass) {\n-        URL url = Thread.currentThread().getContextClassLoader().getResource(resourceName);\n+        URL url = getContextClassLoader().getResource(resourceName);\n         if (url == null && resourceName.startsWith(\"/\")) {\n             //certain classloaders need it without the leading /\n-            url = Thread.currentThread().getContextClassLoader()\n-                .getResource(resourceName.substring(1));\n+            url = getContextClassLoader().getResource(resourceName.substring(1));\n         }\n \n         ClassLoader cluClassloader = ClassLoaderUtils.class.getClassLoader();\n@@ -151,16 +150,14 @@ public URL nextElement() {\n \n         };\n         try {\n-            urls = Thread.currentThread().getContextClassLoader()\n-                .getResources(resourceName);\n+            urls = getContextClassLoader().getResources(resourceName);\n         } catch (IOException e) {\n             //ignore\n         }\n         if (!urls.hasMoreElements() && resourceName.startsWith(\"/\")) {\n             //certain classloaders need it without the leading /\n             try {\n-                urls = Thread.currentThread().getContextClassLoader()\n-                    .getResources(resourceName.substring(1));\n+                urls = getContextClassLoader().getResources(resourceName.substring(1));\n             } catch (IOException e) {\n                 // ignore\n             }\n@@ -295,16 +292,18 @@ public static InputStream getResourceAsStream(String resourceName, Class<?> call\n         }\n     }\n \n-    private static ClassLoader getContextClassLoader() {\n+    static ClassLoader getContextClassLoader() {\n         final SecurityManager sm = System.getSecurityManager();\n         if (sm != null) {\n             return AccessController.doPrivileged(new PrivilegedAction<ClassLoader>() {\n                 public ClassLoader run() {\n-                    return Thread.currentThread().getContextClassLoader();\n+                    ClassLoader loader = Thread.currentThread().getContextClassLoader();\n+                    return loader != null ? loader : ClassLoader.getSystemClassLoader();\n                 }\n             });\n-        }\n-        return Thread.currentThread().getContextClassLoader();\n+        } \n+        ClassLoader loader = Thread.currentThread().getContextClassLoader();\n+        return loader != null ? loader : ClassLoader.getSystemClassLoader();\n     }\n \n     private static ClassLoader getClassLoader(final Class<?> clazz) {",
                "changes": 21,
                "blob_url": "https://github.com/apache/cxf/blob/7043ded41dc7484a9c47b38888a191ee70802c11/core/src/main/java/org/apache/cxf/common/classloader/ClassLoaderUtils.java"
            },
            {
                "additions": 79,
                "sha": "8e1fa18032393f5e0c77454897fd91c044c1ff7f",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/7043ded41dc7484a9c47b38888a191ee70802c11/core/src/test/java/org/apache/cxf/common/classloader/ClassLoaderUtilsTest.java",
                "deletions": 0,
                "filename": "core/src/test/java/org/apache/cxf/common/classloader/ClassLoaderUtilsTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/test/java/org/apache/cxf/common/classloader/ClassLoaderUtilsTest.java?ref=7043ded41dc7484a9c47b38888a191ee70802c11",
                "patch": "@@ -0,0 +1,79 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.common.classloader;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLClassLoader;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+public class ClassLoaderUtilsTest extends Assert {\n+\n+    private static void setTCCL(ClassLoader loader) {\n+        Thread.currentThread().setContextClassLoader(loader);\n+    }\n+\n+    /**\n+     * This test confirms that the expected thread context classloader\n+     * is returned from the getContextClassLoader method.\n+     */\n+    @Test\n+    public void getContextClassLoader() throws MalformedURLException {\n+        final ClassLoader nullLoader = null;\n+        final ClassLoader jvmAppLoader = ClassLoader.getSystemClassLoader();\n+        final ClassLoader jvmExtLoader = jvmAppLoader.getParent();\n+        final ClassLoader testClassLoader = ClassLoaderUtilsTest.class.getClassLoader();\n+        final ClassLoader clildLoader = new URLClassLoader(new URL[]{new URL(\"file:/.\")});\n+        final ClassLoader previousTCCL = Thread.currentThread().getContextClassLoader();\n+\n+        try {\n+            // TCCL = null\n+            setTCCL(nullLoader);\n+            assertEquals(\"TCCL == null; wrong loader returned; expected JVM App loader\", \n+                         jvmAppLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+            // TCCL = JVM App CL\n+            setTCCL(jvmAppLoader);\n+            assertEquals(\"TCCL == JVM App loader; wrong loader returned; expected JVM App loader\",\n+                         jvmAppLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+            // TCCL = JVM Ext CL\n+            setTCCL(jvmExtLoader);\n+            assertEquals(\"TCCL == JVM Ext loader; wrong loader returned; expected JVM Ext loader\",\n+                         jvmExtLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+            // TCCL = This test class loader (which is likely also the JVM App CL)\n+            setTCCL(testClassLoader);\n+            assertEquals(\"TCCL == this test laoder; wrong loader returned; expected JVM App loader\",\n+                         testClassLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+            // TCCL = a random child classloader\n+            setTCCL(clildLoader);\n+            assertEquals(\"TCCL == random child loader, wrong loader returned; expected child of test class loader\",\n+                         clildLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+        } finally {\n+            // reset the TCCL for other tests\n+            setTCCL(previousTCCL);\n+        }\n+    }\n+}",
                "changes": 79,
                "blob_url": "https://github.com/apache/cxf/blob/7043ded41dc7484a9c47b38888a191ee70802c11/core/src/test/java/org/apache/cxf/common/classloader/ClassLoaderUtilsTest.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7349: Resolve NPE when TCCL is null",
        "commit": "https://github.com/apache/cxf/commit/7043ded41dc7484a9c47b38888a191ee70802c11"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d655bcb160e5403f60a8365b2bf41ef07cb0414b",
        "bug_id": "cxf_41",
        "file": [
            {
                "additions": 1,
                "sha": "8324dae9fc5e86a480f39c129df692ac4abc417f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3ee75a865656883ac9602d75ff19ef0312d03743/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java",
                "deletions": 1,
                "filename": "rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java?ref=3ee75a865656883ac9602d75ff19ef0312d03743",
                "patch": "@@ -269,7 +269,7 @@ private String getRestOperationName(Message curMessage) {\n     }\n     \n     private static String safeGet(Message message, String key) {\n-        if (!message.containsKey(key)) {\n+        if (message == null || !message.containsKey(key)) {\n             return null;\n         }\n         Object value = message.get(key);",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/3ee75a865656883ac9602d75ff19ef0312d03743/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix NPE if message is null",
        "commit": "https://github.com/apache/cxf/commit/3ee75a865656883ac9602d75ff19ef0312d03743"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/08e8316aa5c575d6117d20c4054405e1ea0e2887",
        "bug_id": "cxf_42",
        "file": [
            {
                "additions": 4,
                "sha": "ac9f8ba5977add988b759d5c92251faaf8c90e83",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7d344ae7ed882a4347d0f8775744646e0013aca5/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/nio/NioMessageBodyWriter.java",
                "deletions": 6,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/nio/NioMessageBodyWriter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/nio/NioMessageBodyWriter.java?ref=7d344ae7ed882a4347d0f8775744646e0013aca5",
                "patch": "@@ -43,14 +43,14 @@ public NioMessageBodyWriter() {\n \n     @Override\n     public boolean isWriteable(Class<?> cls, Type type, Annotation[] anns, MediaType mt) {\n-        return NioWriteEntity.class.isAssignableFrom(cls);\n+        return NioWriteEntity.class.isAssignableFrom(cls) && getContinuationProvider() != null;\n     }\n     \n     @Override\n     public void writeTo(NioWriteEntity entity, Class<?> cls, Type t, Annotation[] anns,\n             MediaType mt, MultivaluedMap<String, Object> headers, OutputStream os) \n                 throws IOException, WebApplicationException {\n-        Continuation cont = getContinuation();\n+        Continuation cont = getContinuationProvider().getContinuation();\n         NioWriteListenerImpl listener = new NioWriteListenerImpl(cont, entity, os);\n         Message m = JAXRSUtils.getCurrentMessage();\n         m.put(WriteListener.class, listener);\n@@ -65,10 +65,8 @@ public long getSize(NioWriteEntity t, Class<?> type, Type genericType, Annotatio\n             MediaType mediaType) {\n         return -1;\n     }\n-    private Continuation getContinuation() {\n-        ContinuationProvider provider = \n-            (ContinuationProvider)JAXRSUtils.getCurrentMessage().getExchange()\n+    private ContinuationProvider getContinuationProvider() {\n+        return (ContinuationProvider)JAXRSUtils.getCurrentMessage().getExchange()\n             .getInMessage().get(ContinuationProvider.class.getName());\n-        return provider.getContinuation();\n     }\n }",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/7d344ae7ed882a4347d0f8775744646e0013aca5/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/nio/NioMessageBodyWriter.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6882] Avoiding potential NPE",
        "commit": "https://github.com/apache/cxf/commit/7d344ae7ed882a4347d0f8775744646e0013aca5"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/93462d66a1e706ec028f5ebbaf55d619d02fae62",
        "bug_id": "cxf_43",
        "file": [
            {
                "additions": 4,
                "sha": "eb1758a2c5b10bb924f0ca771e6d2388dccf12e6",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/319456ecd2dd149b8efa925d851d8dec3a76f961/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpServletRequestFilter.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpServletRequestFilter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpServletRequestFilter.java?ref=319456ecd2dd149b8efa925d851d8dec3a76f961",
                "patch": "@@ -72,7 +72,10 @@ public String getParameter(String name) {\n         String[] value = super.getParameterValues(name);\n         if (value == null && isPostFormRequest) {\n             readFromParamsIfNeeded();\n-            value = formParams.get(name).toArray(new String[]{});\n+            List<String> values = formParams.get(name);\n+            if (values != null) {\n+                value = values.toArray(new String[]{});\n+            }\n         }\n         return value;\n     }",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/319456ecd2dd149b8efa925d851d8dec3a76f961/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpServletRequestFilter.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7075] Fixing NPE",
        "commit": "https://github.com/apache/cxf/commit/319456ecd2dd149b8efa925d851d8dec3a76f961"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/408fe3384925122c4e68b7d020de5ff9d1376096",
        "bug_id": "cxf_44",
        "file": [
            {
                "additions": 4,
                "sha": "b23b48c47e91c7d4781ec80646956335d7cefa9c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/fe4c8b6e94fd286473f8ca3b626f08cee50d2ee2/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/validator/WrapperStyleNameCollisionValidator.java",
                "deletions": 2,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/validator/WrapperStyleNameCollisionValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/validator/WrapperStyleNameCollisionValidator.java?ref=fe4c8b6e94fd286473f8ca3b626f08cee50d2ee2",
                "patch": "@@ -167,9 +167,11 @@ private boolean isValidOperation(OperationInfo operation) {\n                         String mappedName = mapElementName(operation,\n                                                            operation.getUnwrappedOperation().getOutput(),\n                                                            element);\n+                        \n+                        QName mn = names.get(mappedName);\n                         if (names.containsKey(mappedName)\n-                            &&  !(names.get(mappedName) == element.getSchemaTypeName()\n-                                || names.get(mappedName).equals(element.getSchemaTypeName()))) {\n+                            &&  !(mn == element.getSchemaTypeName()\n+                                || (mn != null && mn.equals(element.getSchemaTypeName())))) {\n                             handleErrors(names.get(mappedName), element);\n                             return false;\n                         } else {",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/fe4c8b6e94fd286473f8ca3b626f08cee50d2ee2/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/validator/WrapperStyleNameCollisionValidator.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6894] prevent NPE if request uses anonymous types",
        "commit": "https://github.com/apache/cxf/commit/fe4c8b6e94fd286473f8ca3b626f08cee50d2ee2"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/408fe3384925122c4e68b7d020de5ff9d1376096",
        "bug_id": "cxf_45",
        "file": [
            {
                "additions": 4,
                "sha": "b23b48c47e91c7d4781ec80646956335d7cefa9c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6fd76780cc60f477ca0ccbad2b2298051657ef2c/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/validator/WrapperStyleNameCollisionValidator.java",
                "deletions": 2,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/validator/WrapperStyleNameCollisionValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/validator/WrapperStyleNameCollisionValidator.java?ref=6fd76780cc60f477ca0ccbad2b2298051657ef2c",
                "patch": "@@ -167,9 +167,11 @@ private boolean isValidOperation(OperationInfo operation) {\n                         String mappedName = mapElementName(operation,\n                                                            operation.getUnwrappedOperation().getOutput(),\n                                                            element);\n+                        \n+                        QName mn = names.get(mappedName);\n                         if (names.containsKey(mappedName)\n-                            &&  !(names.get(mappedName) == element.getSchemaTypeName()\n-                                || names.get(mappedName).equals(element.getSchemaTypeName()))) {\n+                            &&  !(mn == element.getSchemaTypeName()\n+                                || (mn != null && mn.equals(element.getSchemaTypeName())))) {\n                             handleErrors(names.get(mappedName), element);\n                             return false;\n                         } else {",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/6fd76780cc60f477ca0ccbad2b2298051657ef2c/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/validator/WrapperStyleNameCollisionValidator.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6894] prevent NPE if request uses anonymous types",
        "commit": "https://github.com/apache/cxf/commit/6fd76780cc60f477ca0ccbad2b2298051657ef2c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/dcb4070248666908113395b0f1c689dc1c30b493",
        "bug_id": "cxf_46",
        "file": [
            {
                "additions": 24,
                "sha": "340c966ac8f3484971040f05acf7e4ac3470c1c2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0c307b67340dcafd75a1fd40ce003869ddd4594b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/handler/soap/SOAPHandlerInterceptor.java",
                "deletions": 23,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/handler/soap/SOAPHandlerInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/handler/soap/SOAPHandlerInterceptor.java?ref=0c307b67340dcafd75a1fd40ce003869ddd4594b",
                "patch": "@@ -254,35 +254,36 @@ protected MessageContext createProtocolMessageContext(SoapMessage message) {\n         Exchange exch = message.getExchange();\n         setupBindingOperationInfo(exch, sm);\n         SOAPMessage msg = sm.getMessage();\n-        try {\n-            List<SOAPElement> params = new ArrayList<>();\n-            message.put(MessageContext.REFERENCE_PARAMETERS, params);\n-            SOAPHeader head = SAAJUtils.getHeader(msg);\n-            if (head != null) {\n-                Iterator<Node> it = CastUtils.cast(head.getChildElements());\n-                while (it != null && it.hasNext()) {\n-                    Node nd = it.next();\n-                    if (nd instanceof SOAPElement) {\n-                        SOAPElement el = (SOAPElement)nd;\n-                        if (el.hasAttributeNS(Names.WSA_NAMESPACE_NAME, \"IsReferenceParameter\")\n-                            && (\"1\".equals(el.getAttributeNS(Names.WSA_NAMESPACE_NAME,\n-                                                             \"IsReferenceParameter\"))\n-                                || Boolean.parseBoolean(el.getAttributeNS(Names.WSA_NAMESPACE_NAME,\n-                                                                          \"IsReferenceParameter\")))) {\n-                            params.add(el);\n+        if (msg != null) {\n+            try {\n+                List<SOAPElement> params = new ArrayList<>();\n+                message.put(MessageContext.REFERENCE_PARAMETERS, params);\n+                SOAPHeader head = SAAJUtils.getHeader(msg);\n+                if (head != null) {\n+                    Iterator<Node> it = CastUtils.cast(head.getChildElements());\n+                    while (it != null && it.hasNext()) {\n+                        Node nd = it.next();\n+                        if (nd instanceof SOAPElement) {\n+                            SOAPElement el = (SOAPElement) nd;\n+                            if (el.hasAttributeNS(Names.WSA_NAMESPACE_NAME, \"IsReferenceParameter\")\n+                                    && (\"1\".equals(el.getAttributeNS(Names.WSA_NAMESPACE_NAME,\n+                                    \"IsReferenceParameter\"))\n+                                    || Boolean.parseBoolean(el.getAttributeNS(Names.WSA_NAMESPACE_NAME,\n+                                    \"IsReferenceParameter\")))) {\n+                                params.add(el);\n+                            }\n                         }\n                     }\n                 }\n+                if (isRequestor(message) && msg.getSOAPPart().getEnvelope().getBody() != null\n+                        && msg.getSOAPPart().getEnvelope().getBody().hasFault()) {\n+                    return null;\n+                }\n+            } catch (SOAPException e) {\n+                throw new Fault(e);\n             }\n-            if (isRequestor(message) && msg.getSOAPPart().getEnvelope().getBody() != null\n-                && msg.getSOAPPart().getEnvelope().getBody().hasFault()) {\n-                return null;\n-            }\n-        } catch (SOAPException e) {\n-            throw new Fault(e);\n         }\n \n-\n         return sm;\n     }\n ",
                "changes": 47,
                "blob_url": "https://github.com/apache/cxf/blob/0c307b67340dcafd75a1fd40ce003869ddd4594b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/handler/soap/SOAPHandlerInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7412] avoid NPE occuring when handler chain contains a SoapHandler and empty message is received",
        "commit": "https://github.com/apache/cxf/commit/0c307b67340dcafd75a1fd40ce003869ddd4594b"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/cd782fef123d2147a6f5cb04fb6cdfe8cf0ac81a",
        "bug_id": "cxf_47",
        "file": [
            {
                "additions": 8,
                "sha": "859e2b1deeb28a647d27200fc90c3934d8288db1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9e6b5d97cf2180a4f5694ba84866d0fe878f0479/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JPAOAuthDataProvider.java",
                "deletions": 6,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JPAOAuthDataProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JPAOAuthDataProvider.java?ref=9e6b5d97cf2180a4f5694ba84866d0fe878f0479",
                "patch": "@@ -263,12 +263,14 @@ public Void execute(EntityManager em) {\n                 }\n                 serverToken.setScopes(perms);\n \n-                UserSubject sub = em.find(UserSubject.class, serverToken.getSubject().getLogin());\n-                if (sub == null) {\n-                    em.persist(serverToken.getSubject());\n-                } else {\n-                    sub = em.merge(serverToken.getSubject());\n-                    serverToken.setSubject(sub);\n+                if (serverToken.getSubject() != null) {\n+                    UserSubject sub = em.find(UserSubject.class, serverToken.getSubject().getLogin());\n+                    if (sub == null) {\n+                        em.persist(serverToken.getSubject());\n+                    } else {\n+                        sub = serverToken.getSubject();\n+                        serverToken.setSubject(sub);\n+                    }\n                 }\n                 // ensure we have a managed association\n                 // (needed for OpenJPA : InvalidStateException: Encountered unmanaged object)",
                "changes": 14,
                "blob_url": "https://github.com/apache/cxf/blob/9e6b5d97cf2180a4f5694ba84866d0fe878f0479/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/JPAOAuthDataProvider.java"
            },
            {
                "additions": 21,
                "sha": "25da9e26b91944ea368d4ad5ea17a40c724a0b1f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9e6b5d97cf2180a4f5694ba84866d0fe878f0479/rt/rs/security/oauth-parent/oauth2/src/test/java/org/apache/cxf/rs/security/oauth2/provider/JPAOAuthDataProviderTest.java",
                "deletions": 0,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/test/java/org/apache/cxf/rs/security/oauth2/provider/JPAOAuthDataProviderTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/test/java/org/apache/cxf/rs/security/oauth2/provider/JPAOAuthDataProviderTest.java?ref=9e6b5d97cf2180a4f5694ba84866d0fe878f0479",
                "patch": "@@ -176,6 +176,27 @@ public void testAddGetDeleteAccessToken2() {\n         assertEquals(0, tokens.size());\n     }\n \n+    @Test\n+    public void testAddGetDeleteAccessTokenWithNullSubject() {\n+        Client c = addClient(\"102\", \"bob\");\n+\n+        AccessTokenRegistration atr = new AccessTokenRegistration();\n+        atr.setClient(c);\n+        atr.setApprovedScope(Collections.singletonList(\"a\"));\n+        atr.setSubject(null);\n+\n+        getProvider().createAccessToken(atr);\n+        List<ServerAccessToken> tokens = getProvider().getAccessTokens(c, null);\n+        assertNotNull(tokens);\n+        assertEquals(1, tokens.size());\n+\n+        getProvider().removeClient(c.getClientId());\n+\n+        tokens = getProvider().getAccessTokens(c, null);\n+        assertNotNull(tokens);\n+        assertEquals(0, tokens.size());\n+    }\n+\n     @Test\n     public void testAddGetDeleteRefreshToken() {\n         Client c = addClient(\"101\", \"bob\");",
                "changes": 21,
                "blob_url": "https://github.com/apache/cxf/blob/9e6b5d97cf2180a4f5694ba84866d0fe878f0479/rt/rs/security/oauth-parent/oauth2/src/test/java/org/apache/cxf/rs/security/oauth2/provider/JPAOAuthDataProviderTest.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7264: NPE on OAuth RO/CC flows using JPA",
        "commit": "https://github.com/apache/cxf/commit/9e6b5d97cf2180a4f5694ba84866d0fe878f0479"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/ceb04f964e0772389b7a773114c282769ba913a3",
        "bug_id": "cxf_48",
        "file": [
            {
                "additions": 1,
                "sha": "8314c1403a7305f3e06a821505fc8d86587ca7e7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/f1593e4d3ab856611f419f3948252ccfd4b09fa0/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java?ref=f1593e4d3ab856611f419f3948252ccfd4b09fa0",
                "patch": "@@ -1259,7 +1259,7 @@ protected void retransmit(String newURL) throws IOException {\n \n             // If this is a GET method we must not touch the output\n             // stream as this automagically turns the request into a POST.\n-            if (getMethod().equals(\"GET\")) {\n+            if (getMethod().equals(\"GET\") || cachedStream == null) {\n                 handleNoOutput();\n                 return;\n             }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/f1593e4d3ab856611f419f3948252ccfd4b09fa0/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java"
            }
        ],
        "repo": "cxf",
        "message": "Adding a cached stream NPE check to HttpConduit",
        "commit": "https://github.com/apache/cxf/commit/f1593e4d3ab856611f419f3948252ccfd4b09fa0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/59c2f5ab18b7b39f1e1cdf74910a6de03dcc8a31",
        "bug_id": "cxf_49",
        "file": [
            {
                "additions": 10,
                "sha": "ce39516665045aa3258e348837d06c6f7bfa7a7a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/20663ce50eb1210cfbfa765dfadefe702c6ed920/core/src/main/java/org/apache/cxf/common/classloader/ClassLoaderUtils.java",
                "deletions": 11,
                "filename": "core/src/main/java/org/apache/cxf/common/classloader/ClassLoaderUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/common/classloader/ClassLoaderUtils.java?ref=20663ce50eb1210cfbfa765dfadefe702c6ed920",
                "patch": "@@ -89,11 +89,10 @@ public static ClassLoader getURLClassLoader(\n      * @param callingClass The Class object of the calling object\n      */\n     public static URL getResource(String resourceName, Class<?> callingClass) {\n-        URL url = Thread.currentThread().getContextClassLoader().getResource(resourceName);\n+        URL url = getContextClassLoader().getResource(resourceName);\n         if (url == null && resourceName.startsWith(\"/\")) {\n             //certain classloaders need it without the leading /\n-            url = Thread.currentThread().getContextClassLoader()\n-                .getResource(resourceName.substring(1));\n+            url = getContextClassLoader().getResource(resourceName.substring(1));\n         }\n \n         ClassLoader cluClassloader = ClassLoaderUtils.class.getClassLoader();\n@@ -151,16 +150,14 @@ public URL nextElement() {\n \n         };\n         try {\n-            urls = Thread.currentThread().getContextClassLoader()\n-                .getResources(resourceName);\n+            urls = getContextClassLoader().getResources(resourceName);\n         } catch (IOException e) {\n             //ignore\n         }\n         if (!urls.hasMoreElements() && resourceName.startsWith(\"/\")) {\n             //certain classloaders need it without the leading /\n             try {\n-                urls = Thread.currentThread().getContextClassLoader()\n-                    .getResources(resourceName.substring(1));\n+                urls = getContextClassLoader().getResources(resourceName.substring(1));\n             } catch (IOException e) {\n                 // ignore\n             }\n@@ -295,16 +292,18 @@ public static InputStream getResourceAsStream(String resourceName, Class<?> call\n         }\n     }\n \n-    private static ClassLoader getContextClassLoader() {\n+    static ClassLoader getContextClassLoader() {\n         final SecurityManager sm = System.getSecurityManager();\n         if (sm != null) {\n             return AccessController.doPrivileged(new PrivilegedAction<ClassLoader>() {\n                 public ClassLoader run() {\n-                    return Thread.currentThread().getContextClassLoader();\n+                    ClassLoader loader = Thread.currentThread().getContextClassLoader();\n+                    return loader != null ? loader : ClassLoader.getSystemClassLoader();\n                 }\n             });\n-        }\n-        return Thread.currentThread().getContextClassLoader();\n+        } \n+        ClassLoader loader = Thread.currentThread().getContextClassLoader();\n+        return loader != null ? loader : ClassLoader.getSystemClassLoader();\n     }\n \n     private static ClassLoader getClassLoader(final Class<?> clazz) {",
                "changes": 21,
                "blob_url": "https://github.com/apache/cxf/blob/20663ce50eb1210cfbfa765dfadefe702c6ed920/core/src/main/java/org/apache/cxf/common/classloader/ClassLoaderUtils.java"
            },
            {
                "additions": 79,
                "sha": "8e1fa18032393f5e0c77454897fd91c044c1ff7f",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/20663ce50eb1210cfbfa765dfadefe702c6ed920/core/src/test/java/org/apache/cxf/common/classloader/ClassLoaderUtilsTest.java",
                "deletions": 0,
                "filename": "core/src/test/java/org/apache/cxf/common/classloader/ClassLoaderUtilsTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/test/java/org/apache/cxf/common/classloader/ClassLoaderUtilsTest.java?ref=20663ce50eb1210cfbfa765dfadefe702c6ed920",
                "patch": "@@ -0,0 +1,79 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.common.classloader;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLClassLoader;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+public class ClassLoaderUtilsTest extends Assert {\n+\n+    private static void setTCCL(ClassLoader loader) {\n+        Thread.currentThread().setContextClassLoader(loader);\n+    }\n+\n+    /**\n+     * This test confirms that the expected thread context classloader\n+     * is returned from the getContextClassLoader method.\n+     */\n+    @Test\n+    public void getContextClassLoader() throws MalformedURLException {\n+        final ClassLoader nullLoader = null;\n+        final ClassLoader jvmAppLoader = ClassLoader.getSystemClassLoader();\n+        final ClassLoader jvmExtLoader = jvmAppLoader.getParent();\n+        final ClassLoader testClassLoader = ClassLoaderUtilsTest.class.getClassLoader();\n+        final ClassLoader clildLoader = new URLClassLoader(new URL[]{new URL(\"file:/.\")});\n+        final ClassLoader previousTCCL = Thread.currentThread().getContextClassLoader();\n+\n+        try {\n+            // TCCL = null\n+            setTCCL(nullLoader);\n+            assertEquals(\"TCCL == null; wrong loader returned; expected JVM App loader\", \n+                         jvmAppLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+            // TCCL = JVM App CL\n+            setTCCL(jvmAppLoader);\n+            assertEquals(\"TCCL == JVM App loader; wrong loader returned; expected JVM App loader\",\n+                         jvmAppLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+            // TCCL = JVM Ext CL\n+            setTCCL(jvmExtLoader);\n+            assertEquals(\"TCCL == JVM Ext loader; wrong loader returned; expected JVM Ext loader\",\n+                         jvmExtLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+            // TCCL = This test class loader (which is likely also the JVM App CL)\n+            setTCCL(testClassLoader);\n+            assertEquals(\"TCCL == this test laoder; wrong loader returned; expected JVM App loader\",\n+                         testClassLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+            // TCCL = a random child classloader\n+            setTCCL(clildLoader);\n+            assertEquals(\"TCCL == random child loader, wrong loader returned; expected child of test class loader\",\n+                         clildLoader, ClassLoaderUtils.getContextClassLoader());\n+\n+        } finally {\n+            // reset the TCCL for other tests\n+            setTCCL(previousTCCL);\n+        }\n+    }\n+}",
                "changes": 79,
                "blob_url": "https://github.com/apache/cxf/blob/20663ce50eb1210cfbfa765dfadefe702c6ed920/core/src/test/java/org/apache/cxf/common/classloader/ClassLoaderUtilsTest.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-7349 Merge branch 'NPE-ClassLoaderUtils' of github.com:andymc12/cxf",
        "commit": "https://github.com/apache/cxf/commit/20663ce50eb1210cfbfa765dfadefe702c6ed920"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6df5deab24016d07e4099712b07535688d164d94",
        "bug_id": "cxf_50",
        "file": [
            {
                "additions": 5,
                "sha": "ca062be315e5f74bd45b50aac9f05d61623815c0",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3a1fa0b23f1778594b6339dfcfbc90dcc43a87d4/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/MemoryClientTokenContextManager.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/MemoryClientTokenContextManager.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/MemoryClientTokenContextManager.java?ref=3a1fa0b23f1778594b6339dfcfbc90dcc43a87d4",
                "patch": "@@ -40,7 +40,11 @@ public void setClientTokenContext(MessageContext mc, ClientTokenContext request)\n \n     @Override\n     public ClientTokenContext getClientTokenContext(MessageContext mc) {\n-        return map.get(getKey(mc, false));\n+        String key = getKey(mc, false);\n+        if (key != null) {\n+            return map.get(key);\n+        }\n+        return null;\n     }\n \n     @Override",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/3a1fa0b23f1778594b6339dfcfbc90dcc43a87d4/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/MemoryClientTokenContextManager.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/3a1fa0b23f1778594b6339dfcfbc90dcc43a87d4"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/87b4ca4362ea7a0e7b45d1589027045c6e3a552e",
        "bug_id": "cxf_51",
        "file": [
            {
                "additions": 1,
                "sha": "dbd59ad17b7ade7efd36c69f85fa06d1357ece02",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d2be1f3b07e27675f8e53fac1adade3b223e9751/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java?ref=d2be1f3b07e27675f8e53fac1adade3b223e9751",
                "patch": "@@ -187,7 +187,7 @@ public boolean invoke(HttpServletRequest request, HttpServletResponse res, boole\n                     }\n                 }\n             }\n-            if (d != null) {\n+            if (d != null && d.getMessageObserver() != null) {\n                 Bus bus = d.getBus();\n                 ClassLoaderHolder orig = null;\n                 try {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/d2be1f3b07e27675f8e53fac1adade3b223e9751/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6979] Avoid NPE",
        "commit": "https://github.com/apache/cxf/commit/d2be1f3b07e27675f8e53fac1adade3b223e9751"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1e4b96124c326eb96804f6574419797e999acb40",
        "bug_id": "cxf_52",
        "file": [
            {
                "additions": 1,
                "sha": "90b9e5c56c46dd83499130ac37d7a110a21d6c65",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/05b12529f2bb037aa2c73564455c1b511ef715aa/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/MemoryClientCodeStateManager.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/MemoryClientCodeStateManager.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/MemoryClientCodeStateManager.java?ref=05b12529f2bb037aa2c73564455c1b511ef715aa",
                "patch": "@@ -56,7 +56,7 @@\n                                                             MultivaluedMap<String, String> redirectState) {\n         String stateParam = redirectState.getFirst(OAuthConstants.STATE);\n         String sessionToken = OAuthUtils.getSessionToken(mc, \"state\");\n-        if (!sessionToken.equals(stateParam)) {\n+        if (sessionToken == null || !sessionToken.equals(stateParam)) {\n             throw new OAuthServiceException(\"Invalid session token\");\n         }\n         return map.remove(stateParam);",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/05b12529f2bb037aa2c73564455c1b511ef715aa/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/MemoryClientCodeStateManager.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/05b12529f2bb037aa2c73564455c1b511ef715aa"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9b130539041164a95bd70cb5711473c0417fadaa",
        "bug_id": "cxf_53",
        "file": [
            {
                "additions": 4,
                "sha": "3f42117d317e3647d8811e0e3118b57250b1f6b4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9c5b14dbc284cfccc3fa590fb729d9f11c91bc16/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/OAuthClientUtils.java",
                "deletions": 0,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/OAuthClientUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/OAuthClientUtils.java?ref=9c5b14dbc284cfccc3fa590fb729d9f11c91bc16",
                "patch": "@@ -275,6 +275,10 @@ public static ClientAccessToken getAccessToken(WebClient accessTokenService,\n                                                    boolean setAuthorizationHeader) \n         throws OAuthServiceException {    \n         \n+        if (accessTokenService == null) {\n+            throw new OAuthServiceException(OAuthConstants.SERVER_ERROR);\n+        }\n+        \n         Form form = new Form(grant.toMap());\n         if (extraParams != null) {\n             for (Map.Entry<String, String> entry : extraParams.entrySet()) {",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/9c5b14dbc284cfccc3fa590fb729d9f11c91bc16/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/client/OAuthClientUtils.java"
            },
            {
                "additions": 3,
                "sha": "015be15cbe86780a32fede207ccc1b88f10d78f2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9c5b14dbc284cfccc3fa590fb729d9f11c91bc16/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/rp/OidcClientCodeRequestFilter.java",
                "deletions": 0,
                "filename": "rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/rp/OidcClientCodeRequestFilter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/rp/OidcClientCodeRequestFilter.java?ref=9c5b14dbc284cfccc3fa590fb729d9f11c91bc16",
                "patch": "@@ -72,6 +72,9 @@ protected ClientTokenContext createTokenContext(ContainerRequestContext rc,\n         }\n         OidcClientTokenContextImpl ctx = new OidcClientTokenContextImpl();\n         if (at != null) {\n+            if (idTokenReader == null) {\n+                throw new OAuthServiceException(OAuthConstants.SERVER_ERROR);\n+            }\n             IdToken idToken = idTokenReader.getIdToken(at, \n                                   requestParams.getFirst(OAuthConstants.AUTHORIZATION_CODE_VALUE),\n                                   getConsumer());",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/9c5b14dbc284cfccc3fa590fb729d9f11c91bc16/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/rp/OidcClientCodeRequestFilter.java"
            }
        ],
        "repo": "cxf",
        "message": "Some NPE fixes",
        "commit": "https://github.com/apache/cxf/commit/9c5b14dbc284cfccc3fa590fb729d9f11c91bc16"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/8269b3c46dcd88c4cff754c0df5ec92d020acd09",
        "bug_id": "cxf_54",
        "file": [
            {
                "additions": 1,
                "sha": "edade5b38baef83e39eeb0071c83e71b1d65079c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c9e1cb7239b875c08697b894ca9d42c14d6dbfec/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcHybridService.java",
                "deletions": 1,
                "filename": "rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcHybridService.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcHybridService.java?ref=c9e1cb7239b875c08697b894ca9d42c14d6dbfec",
                "patch": "@@ -74,7 +74,7 @@ protected StringBuilder prepareGrant(OAuthRedirectionState state,\n         StringBuilder sb = super.prepareGrant(state, client, requestedScope, \n                                                           approvedScope, userSubject, preAuthorizedToken);\n    \n-        if (state.getResponseType().startsWith(OAuthConstants.CODE_RESPONSE_TYPE)) {\n+        if (state.getResponseType() != null && state.getResponseType().startsWith(OAuthConstants.CODE_RESPONSE_TYPE)) {\n             String code = codeService.getGrantCode(state, client, requestedScope,\n                                                    approvedScope, userSubject, preAuthorizedToken);\n             ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/c9e1cb7239b875c08697b894ca9d42c14d6dbfec/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcHybridService.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/c9e1cb7239b875c08697b894ca9d42c14d6dbfec"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f4d0b2152036c6e57f82d762464f6c96907e0a37",
        "bug_id": "cxf_55",
        "file": [
            {
                "additions": 4,
                "sha": "d116af6476d43bba6f7c97b7d23126fb1ae56280",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/eef5bc685a4147eadb0d7784b926197db6765e2e/core/src/main/java/org/apache/cxf/common/jaxb/JAXBContextCache.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/common/jaxb/JAXBContextCache.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/common/jaxb/JAXBContextCache.java?ref=eef5bc685a4147eadb0d7784b926197db6765e2e",
                "patch": "@@ -229,7 +229,10 @@ public static CachedContextAndSchemas getCachedContextAndSchemas(final Set<Class\n                 if (cachedContextAndSchemasInternal != null) {\n                     context = cachedContextAndSchemasInternal.getContext();\n                     if (context == null) {\n-                        JAXBCONTEXT_CACHE.remove(cachedContextAndSchemasInternal.getClasses());\n+                        final Set<Class<?>> cls = cachedContextAndSchemasInternal.getClasses();\n+                        if (cls != null) {\n+                            JAXBCONTEXT_CACHE.remove(cls);\n+                        }\n                         cachedContextAndSchemasInternal = null;\n                     } else {\n                         return new CachedContextAndSchemas(context, cachedContextAndSchemasInternal.getClasses(),",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/eef5bc685a4147eadb0d7784b926197db6765e2e/core/src/main/java/org/apache/cxf/common/jaxb/JAXBContextCache.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7339] Fix NPE due to weak reference being GC-ed",
        "commit": "https://github.com/apache/cxf/commit/eef5bc685a4147eadb0d7784b926197db6765e2e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7d9db664a2f29310e42eef6f92a9066cb205bdba",
        "bug_id": "cxf_56",
        "file": [
            {
                "additions": 5,
                "sha": "a8c3494a8c8273776168b697bc20b1404c5e3087",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad922b47519632d7a0442524f24752f2f2dd84c1/rt/transports/http/src/main/java/org/apache/cxf/transport/https/HttpsURLConnectionFactory.java",
                "deletions": 5,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/https/HttpsURLConnectionFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/https/HttpsURLConnectionFactory.java?ref=ad922b47519632d7a0442524f24752f2f2dd84c1",
                "patch": "@@ -161,12 +161,12 @@ protected synchronized void decorateWithTLS(TLSClientParameters tlsClientParamet\n                 .getInstance(protocol, provider);\n             ctx.getClientSessionContext().setSessionTimeout(tlsClientParameters.getSslCacheTimeout());\n             KeyManager[] keyManagers = tlsClientParameters.getKeyManagers();\n-            if (tlsClientParameters.getCertAlias() != null) {\n-                getKeyManagersWithCertAlias(tlsClientParameters, keyManagers);\n-            }            \n             if (keyManagers == null) {\n                 keyManagers = SSLUtils.getDefaultKeyStoreManagers(LOG);\n-            }            \n+            }\n+            if (tlsClientParameters.getCertAlias() != null) {\n+                getKeyManagersWithCertAlias(tlsClientParameters, keyManagers);\n+            }\n             ctx.init(keyManagers, tlsClientParameters.getTrustManagers(),\n                      tlsClientParameters.getSecureRandom());\n \n@@ -258,7 +258,7 @@ protected void addLogHandler(Handler handler) {\n     \n     protected void getKeyManagersWithCertAlias(TLSClientParameters tlsClientParameters,\n                                                KeyManager[] keyManagers) throws GeneralSecurityException {\n-        if (tlsClientParameters.getCertAlias() != null) {\n+        if (tlsClientParameters.getCertAlias() != null && keyManagers != null) {\n             for (int idx = 0; idx < keyManagers.length; idx++) {\n                 if (keyManagers[idx] instanceof X509KeyManager\n                     && !(keyManagers[idx] instanceof AliasedX509ExtendedKeyManager)) {",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/ad922b47519632d7a0442524f24752f2f2dd84c1/rt/transports/http/src/main/java/org/apache/cxf/transport/https/HttpsURLConnectionFactory.java"
            },
            {
                "additions": 128,
                "sha": "0a7a17cf7f237e2369d205033df14354a577fdbd",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/ad922b47519632d7a0442524f24752f2f2dd84c1/rt/transports/http/src/test/java/org/apache/cxf/transport/https/HttpsURLConnectionFactoryTest.java",
                "deletions": 0,
                "filename": "rt/transports/http/src/test/java/org/apache/cxf/transport/https/HttpsURLConnectionFactoryTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/test/java/org/apache/cxf/transport/https/HttpsURLConnectionFactoryTest.java?ref=ad922b47519632d7a0442524f24752f2f2dd84c1",
                "patch": "@@ -0,0 +1,128 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.cxf.transport.https;\n+\n+import java.lang.reflect.Field;\n+import javax.net.ssl.HttpsURLConnection;\n+\n+import org.apache.cxf.common.util.ReflectionUtil;\n+import org.apache.cxf.configuration.jsse.SSLUtils;\n+import org.apache.cxf.configuration.jsse.TLSClientParameters;\n+import org.easymock.EasyMock;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+public class HttpsURLConnectionFactoryTest {\n+\n+    @Test\n+    public void noExplicitKeystoreNoCertAlias() throws Exception {\n+        clearDefaults();\n+        System.clearProperty(\"javax.net.ssl.keyStore\");\n+        System.clearProperty(\"javax.net.ssl.keyStorePassword\");\n+\n+        HttpsURLConnectionFactory factory = new HttpsURLConnectionFactory();\n+        Assert.assertNull(factory.socketFactory);\n+\n+        TLSClientParameters tlsClientParams = new TLSClientParameters();\n+        tlsClientParams.setUseHttpsURLConnectionDefaultSslSocketFactory(false);\n+\n+        HttpsURLConnection conn = EasyMock.createMock(HttpsURLConnection.class);\n+\n+        try {\n+            factory.decorateWithTLS(tlsClientParams, conn);\n+        } catch (NullPointerException e) {\n+            Assert.fail(\"should not fail with NullPointerException\");\n+        }\n+    }\n+\n+    @Test\n+    public void noExplicitKeystoreWithCertAlias() throws Exception {\n+        clearDefaults();\n+        System.clearProperty(\"javax.net.ssl.keyStore\");\n+        System.clearProperty(\"javax.net.ssl.keyStorePassword\");\n+\n+        HttpsURLConnectionFactory factory = new HttpsURLConnectionFactory();\n+        Assert.assertNull(factory.socketFactory);\n+\n+        TLSClientParameters tlsClientParams = new TLSClientParameters();\n+        tlsClientParams.setUseHttpsURLConnectionDefaultSslSocketFactory(false);\n+        tlsClientParams.setCertAlias(\"someAlias\");\n+\n+        HttpsURLConnection conn = EasyMock.createMock(HttpsURLConnection.class);\n+\n+        try {\n+            factory.decorateWithTLS(tlsClientParams, conn);\n+        } catch (NullPointerException e) {\n+            Assert.fail(\"should not fail with NullPointerException\");\n+        }\n+    }\n+\n+    @Test\n+    public void defaultKeystoreNoCertAlias() throws Exception {\n+        clearDefaults();\n+        String keystorePath = getClass().getResource(\"resources/defaultkeystore2\").getPath();\n+        System.setProperty(\"javax.net.ssl.keyStore\", keystorePath);\n+        System.setProperty(\"javax.net.ssl.keyStorePassword\", \"123456\");\n+\n+        HttpsURLConnectionFactory factory = new HttpsURLConnectionFactory();\n+        Assert.assertNull(factory.socketFactory);\n+\n+        TLSClientParameters tlsClientParams = new TLSClientParameters();\n+        tlsClientParams.setUseHttpsURLConnectionDefaultSslSocketFactory(false);\n+\n+        HttpsURLConnection conn = EasyMock.createMock(HttpsURLConnection.class);\n+\n+        try {\n+            factory.decorateWithTLS(tlsClientParams, conn);\n+        } catch (NullPointerException e) {\n+            Assert.fail(\"should not fail with NullPointerException\");\n+        }\n+    }\n+\n+    @Test\n+    public void defaultKeystoreWithCertAlias() throws Exception {\n+        clearDefaults();\n+        String keystorePath = getClass().getResource(\"resources/defaultkeystore2\").getPath();\n+        System.setProperty(\"javax.net.ssl.keyStore\", keystorePath);\n+        System.setProperty(\"javax.net.ssl.keyStorePassword\", \"123456\");\n+\n+        HttpsURLConnectionFactory factory = new HttpsURLConnectionFactory();\n+        Assert.assertNull(factory.socketFactory);\n+\n+        TLSClientParameters tlsClientParams = new TLSClientParameters();\n+        tlsClientParams.setUseHttpsURLConnectionDefaultSslSocketFactory(false);\n+        tlsClientParams.setCertAlias(\"someAlias\");\n+\n+        HttpsURLConnection conn = EasyMock.createMock(HttpsURLConnection.class);\n+\n+        try {\n+            factory.decorateWithTLS(tlsClientParams, conn);\n+        } catch (NullPointerException e) {\n+            Assert.fail(\"should not fail with NullPointerException\");\n+        }\n+    }\n+\n+    private void clearDefaults() throws IllegalAccessException {\n+        Field defaultManagers = ReflectionUtil.getDeclaredField(SSLUtils.class, \"defaultManagers\");\n+        ReflectionUtil.setAccessible(defaultManagers);\n+\n+        defaultManagers.set(SSLUtils.class, null);\n+    }\n+\n+}",
                "changes": 128,
                "blob_url": "https://github.com/apache/cxf/blob/ad922b47519632d7a0442524f24752f2f2dd84c1/rt/transports/http/src/test/java/org/apache/cxf/transport/https/HttpsURLConnectionFactoryTest.java"
            },
            {
                "additions": 0,
                "sha": "195e1f32c3e05ef68006878c571744fc4667e1e0",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/ad922b47519632d7a0442524f24752f2f2dd84c1/rt/transports/http/src/test/java/org/apache/cxf/transport/https/resources/defaultkeystore2",
                "deletions": 0,
                "filename": "rt/transports/http/src/test/java/org/apache/cxf/transport/https/resources/defaultkeystore2",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/test/java/org/apache/cxf/transport/https/resources/defaultkeystore2?ref=ad922b47519632d7a0442524f24752f2f2dd84c1",
                "changes": 0,
                "blob_url": "https://github.com/apache/cxf/blob/ad922b47519632d7a0442524f24752f2f2dd84c1/rt/transports/http/src/test/java/org/apache/cxf/transport/https/resources/defaultkeystore2"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6359] - NullPointerException when certAlias specified but no keyManagers are configured. Thanks to Tom Pasierb for the patch",
        "commit": "https://github.com/apache/cxf/commit/ad922b47519632d7a0442524f24752f2f2dd84c1"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/74aea1227832d3000f2f9fe61d7cc3bcb8a60a79",
        "bug_id": "cxf_57",
        "file": [
            {
                "additions": 1,
                "sha": "64a0d77e38f5ef3c6bbf4e233ae14daaa1e9eb66",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a6598eebe4a8e737efd9ac42424e0589fda8e1c9/core/src/main/java/org/apache/cxf/service/model/EndpointInfo.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/service/model/EndpointInfo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/service/model/EndpointInfo.java?ref=a6598eebe4a8e737efd9ac42424e0589fda8e1c9",
                "patch": "@@ -89,7 +89,7 @@ public void setBinding(BindingInfo b) {\n     }    \n     \n     public String getAddress() {\n-        return (null != address) ? address.getAddress().getValue() : null;\n+        return (null != address && null != address.getAddress()) ? address.getAddress().getValue() : null;\n     }\n     \n     public void setAddress(String addr) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/a6598eebe4a8e737efd9ac42424e0589fda8e1c9/core/src/main/java/org/apache/cxf/service/model/EndpointInfo.java"
            },
            {
                "additions": 1,
                "sha": "793f6ba83e007263bbddeef2d62eb153ce87f7f8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a6598eebe4a8e737efd9ac42424e0589fda8e1c9/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java?ref=a6598eebe4a8e737efd9ac42424e0589fda8e1c9",
                "patch": "@@ -338,7 +338,7 @@ protected void doPublish(String addr) {\n             serv = getServer(addr);\n             if (addr != null) {            \n                 EndpointInfo endpointInfo = serv.getEndpoint().getEndpointInfo();\n-                if (!endpointInfo.getAddress().contains(addr)) {\n+                if (endpointInfo.getAddress() == null || !endpointInfo.getAddress().contains(addr)) {\n                     endpointInfo.setAddress(addr);\n                 }\n                 if (publishedEndpointUrl != null) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/a6598eebe4a8e737efd9ac42424e0589fda8e1c9/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6257] Creating and Endpoint using JAX-WS API, getting the binding and then publishing causes a NullPointerException",
        "commit": "https://github.com/apache/cxf/commit/a6598eebe4a8e737efd9ac42424e0589fda8e1c9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9fd37c1e6f79c4f0e20d001df79e1debed363bf3",
        "bug_id": "cxf_58",
        "file": [
            {
                "additions": 4,
                "sha": "cb129ef1ae63ff3fe30f507a23ffa065b5d44ded",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/04c05b1481e6148cb31f30b01eb4ac2d37229617/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapTransportFactory.java",
                "deletions": 0,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapTransportFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapTransportFactory.java?ref=04c05b1481e6148cb31f30b01eb4ac2d37229617",
                "patch": "@@ -128,6 +128,10 @@ public Destination getDestination(EndpointInfo ei, Bus bus) throws IOException {\n             } else {\n                 destinationFactory = mgr.getDestinationFactoryForUri(address);\n             }\n+            if (destinationFactory == null) {\n+                throw new IOException(\"Could not find destination factory for transport \" + transId);\n+            }\n+\n             return destinationFactory.getDestination(ei, bus);\n         } catch (BusException e) {\n             IOException ex = new IOException(\"Could not find destination factory for transport \" + transId);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/04c05b1481e6148cb31f30b01eb4ac2d37229617/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapTransportFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/04c05b1481e6148cb31f30b01eb4ac2d37229617"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4dcf5120561ba5b11bf9493c931889c591cf36e0",
        "bug_id": "cxf_59",
        "file": [
            {
                "additions": 3,
                "sha": "abf6eefe565da5a940fdf9c2e9555388f4d291ef",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d99c9ad353894b95b6ae866a7e63b9dbb8a0665c/rt/rs/extensions/json-basic/src/main/java/org/apache/cxf/jaxrs/json/basic/JsonMapObjectReaderWriter.java",
                "deletions": 0,
                "filename": "rt/rs/extensions/json-basic/src/main/java/org/apache/cxf/jaxrs/json/basic/JsonMapObjectReaderWriter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/extensions/json-basic/src/main/java/org/apache/cxf/jaxrs/json/basic/JsonMapObjectReaderWriter.java?ref=d99c9ad353894b95b6ae866a7e63b9dbb8a0665c",
                "patch": "@@ -305,6 +305,9 @@ public Output append(String str) {\n         @Override\n         public Output append(String str) {\n             try {\n+                if (str == null) {\n+                    str = \"null\";\n+                }\n                 os.write(StringUtils.toBytesUTF8(str));\n             } catch (IOException ex) {\n                 throw new RuntimeException(ex);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/d99c9ad353894b95b6ae866a7e63b9dbb8a0665c/rt/rs/extensions/json-basic/src/main/java/org/apache/cxf/jaxrs/json/basic/JsonMapObjectReaderWriter.java"
            }
        ],
        "repo": "cxf",
        "message": "Completing the NPE checking code in the basic json writer",
        "commit": "https://github.com/apache/cxf/commit/d99c9ad353894b95b6ae866a7e63b9dbb8a0665c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b510153525a6f7af25017cb9a6f9a74e48a04fc9",
        "bug_id": "cxf_60",
        "file": [
            {
                "additions": 4,
                "sha": "0bb290090425486b76f1d0a3e6ee88568579a9ca",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/91c310b78d208d778a4918056c8e28f8e323eed9/services/sts/sts-core/src/main/java/org/apache/cxf/sts/claims/ClaimsManager.java",
                "deletions": 0,
                "filename": "services/sts/sts-core/src/main/java/org/apache/cxf/sts/claims/ClaimsManager.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-core/src/main/java/org/apache/cxf/sts/claims/ClaimsManager.java?ref=91c310b78d208d778a4918056c8e28f8e323eed9",
                "patch": "@@ -183,6 +183,10 @@ private ProcessedClaimCollection handleClaims(ClaimCollection claims, ClaimsPara\n         ProcessedClaimCollection returnCollection = new ProcessedClaimCollection();\n         Principal originalPrincipal = parameters.getPrincipal();\n         \n+        if (claimHandlers == null) {\n+            return returnCollection;\n+        }\n+        \n         for (ClaimsHandler handler : claimHandlers) {\n             \n             ClaimCollection supportedClaims = ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/91c310b78d208d778a4918056c8e28f8e323eed9/services/sts/sts-core/src/main/java/org/apache/cxf/sts/claims/ClaimsManager.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/91c310b78d208d778a4918056c8e28f8e323eed9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9d6d9438c85b46b89510362dba89d85b8aa3796b",
        "bug_id": "cxf_61",
        "file": [
            {
                "additions": 3,
                "sha": "4ca6ef9b2bf762a34a933675d7065498043ee1c3",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a056d558cb8bb4e4b4f513b5a5955c98607f9e18/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java",
                "deletions": 0,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java?ref=a056d558cb8bb4e4b4f513b5a5955c98607f9e18",
                "patch": "@@ -95,6 +95,9 @@ public static String loadDigestAndEncodeX509Certificate(Message m, Properties pr\n         return loadX509CertificateOrChain(keyStore, alias);\n     }\n     private static X509Certificate[] loadX509CertificateOrChain(KeyStore keyStore, String alias) {\n+        if (alias == null) {\n+            throw new JoseException(\"No alias supplied\");\n+        }\n         try {\n             Certificate[] certs = keyStore.getCertificateChain(alias);\n             if (certs != null) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/a056d558cb8bb4e4b4f513b5a5955c98607f9e18/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/a056d558cb8bb4e4b4f513b5a5955c98607f9e18"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/cf492753cd899f1ac7056e3523270db6714d4420",
        "bug_id": "cxf_62",
        "file": [
            {
                "additions": 1,
                "sha": "db42fd4ef04e77a80cf313aeec2f871e615dd28b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/351364f7f32970754af4583ffc0626b177b023e9/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/PrettyLoggingFilter.java",
                "deletions": 0,
                "filename": "rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/PrettyLoggingFilter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/PrettyLoggingFilter.java?ref=351364f7f32970754af4583ffc0626b177b023e9",
                "patch": "@@ -66,6 +66,7 @@ public String getPrettyMessage(String message, String encoding) {\n             // that can occur when we set a limit and cur the rest off\n             XMLStreamWriter xwriter = StaxUtils.createXMLStreamWriter(swriter);\n             xwriter = new PrettyPrintXMLStreamWriter(xwriter, 2);\n+            encoding = encoding == null ? \"UTF-8\" : encoding;\n             InputStream in = new ByteArrayInputStream(message.getBytes(encoding));\n             try {\n                 StaxUtils.copy(new StreamSource(in), xwriter);",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/351364f7f32970754af4583ffc0626b177b023e9/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/PrettyLoggingFilter.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6770] Fixing NPE",
        "commit": "https://github.com/apache/cxf/commit/351364f7f32970754af4583ffc0626b177b023e9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0b8ac3e0e2488b015f52d178a33da943ce81ce0e",
        "bug_id": "cxf_63",
        "file": [
            {
                "additions": 1,
                "sha": "667de929b68a6adae9d4aaf297acf890a333c730",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c5413a80e67b9b9a319ab8e3112486f093892528/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/services/RedirectionBasedGrantService.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/services/RedirectionBasedGrantService.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/services/RedirectionBasedGrantService.java?ref=c5413a80e67b9b9a319ab8e3112486f093892528",
                "patch": "@@ -271,7 +271,7 @@ protected Response completeAuthorization(MultivaluedMap<String, String> params)\n             sessionTokenParamName = OAuthConstants.SESSION_AUTHENTICITY_TOKEN;\n         }\n         String sessionToken = params.getFirst(sessionTokenParamName);\n-        if (!compareRequestAndSessionTokens(sessionToken, params, userSubject)) {\n+        if (sessionToken == null || !compareRequestAndSessionTokens(sessionToken, params, userSubject)) {\n             throw ExceptionUtils.toBadRequestException(null, null);     \n         }\n         ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/c5413a80e67b9b9a319ab8e3112486f093892528/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/services/RedirectionBasedGrantService.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/c5413a80e67b9b9a319ab8e3112486f093892528"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6c96aa3247891af50b9f3f63a5e21368b2b5bd0d",
        "bug_id": "cxf_64",
        "file": [
            {
                "additions": 5,
                "sha": "e936359a211329917a91fca95ca34510fb98e4dc",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/67e48ee00b55cb0780b01f91fd08716f8d953592/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweUtils.java",
                "deletions": 0,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweUtils.java?ref=67e48ee00b55cb0780b01f91fd08716f8d953592",
                "patch": "@@ -388,6 +388,11 @@ public static JweDecryptionProvider loadDecryptionProvider(JweHeaders inHeaders,\n         } else {\n             if (JoseConstants.HEADER_JSON_WEB_KEY.equals(props.get(JoseConstants.RSSEC_KEY_STORE_TYPE))) {\n                 JsonWebKey jwk = JwkUtils.loadJsonWebKey(m, props, KeyOperation.DECRYPT);\n+                if (jwk == null) {\n+                    LOG.warning(\"Extracting the JsonWebKey failed\");\n+                    throw new JweException(JweException.Error.KEY_DECRYPTION_FAILURE);\n+                }\n+                \n                 if (\"direct\".equals(keyEncryptionAlgo)) {\n                     contentEncryptionAlgo = getContentEncryptionAlgo(m, props, jwk.getAlgorithm());\n                     ctDecryptionKey = getContentDecryptionSecretKey(jwk, contentEncryptionAlgo);",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/67e48ee00b55cb0780b01f91fd08716f8d953592/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/67e48ee00b55cb0780b01f91fd08716f8d953592"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1b8064f475b09323c5c11d9e8a4e1440879cae26",
        "bug_id": "cxf_65",
        "file": [
            {
                "additions": 3,
                "sha": "d39812b8d4fb996a7711a6b80d8e73ef2aa0bfdb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/802d168d4c772bd97a0c69a0f6c7dc639598f2ea/rt/transports/http/src/main/java/org/apache/cxf/transport/http/osgi/HTTPTransportActivator.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/osgi/HTTPTransportActivator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/osgi/HTTPTransportActivator.java?ref=802d168d4c772bd97a0c69a0f6c7dc639598f2ea",
                "patch": "@@ -85,6 +85,8 @@ private ServiceRegistration registerService(BundleContext context, Class<?> serv\n     }\n \n     public void stop(BundleContext context) throws Exception {\n-        httpServiceTracker.close();\n+        if (httpServiceTracker != null) {\n+            httpServiceTracker.close();\n+        }\n     }\n }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/802d168d4c772bd97a0c69a0f6c7dc639598f2ea/rt/transports/http/src/main/java/org/apache/cxf/transport/http/osgi/HTTPTransportActivator.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7250]NPE in HTTPTransportActivator stop if DISABLE_DEFAULT_HTTP_TRANSPORT is true",
        "commit": "https://github.com/apache/cxf/commit/802d168d4c772bd97a0c69a0f6c7dc639598f2ea"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f0d6854a8c9e9cf20ec50daa86ae2c5396f365b7",
        "bug_id": "cxf_66",
        "file": [
            {
                "additions": 2,
                "sha": "17a07bfcc8c9f38dfbaa89a7efafa323c103fa4e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/26aec8750ada9e05d829efbc3e3bba8991710998/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java",
                "deletions": 1,
                "filename": "rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java?ref=26aec8750ada9e05d829efbc3e3bba8991710998",
                "patch": "@@ -191,7 +191,8 @@ private boolean isSOAPMessage(Message message) {\n     private String getMessageId(Message message) {\n         AddressingProperties addrProp = ContextUtils.retrieveMAPs(message, false,\n                                                                   MessageUtils.isOutbound(message), false);\n-        return (addrProp != null) ? addrProp.getMessageID().getValue() : UUID.randomUUID().toString();\n+        return addrProp != null && addrProp.getMessageID() != null\n+            ? addrProp.getMessageID().getValue() : UUID.randomUUID().toString();\n     }\n \n     private String getOperationName(Message message) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/26aec8750ada9e05d829efbc3e3bba8991710998/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6721] Preventing NPE",
        "commit": "https://github.com/apache/cxf/commit/26aec8750ada9e05d829efbc3e3bba8991710998"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3b1ffa60c510eda213a3adb09478201c6d9dfd03",
        "bug_id": "cxf_67",
        "file": [
            {
                "additions": 11,
                "sha": "08d673579a1ea242069322f3082972f9d9062780",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6021189d1f783ae20353f71ddd211cf06c0ba5cf/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/IdTokenResponseFilter.java",
                "deletions": 9,
                "filename": "rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/IdTokenResponseFilter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/IdTokenResponseFilter.java?ref=6021189d1f783ae20353f71ddd211cf06c0ba5cf",
                "patch": "@@ -73,16 +73,18 @@ private String getProcessedIdToken(ServerAccessToken st) {\n             return st.getSubject().getProperties().get(OidcUtils.ID_TOKEN);\n         } else if (st.getSubject() instanceof OidcUserSubject) {\n             OidcUserSubject sub = (OidcUserSubject)st.getSubject();\n-            IdToken idToken = new IdToken(sub.getIdToken());\n-            idToken.setAudience(st.getClient().getClientId());\n-            idToken.setAuthorizedParty(st.getClient().getClientId());\n-            // if this token was refreshed then the cloned IDToken might need to have its\n-            // issuedAt and expiry time properties adjusted if it proves to be necessary\n-            setAtHashAndNonce(idToken, st);\n-            return processJwt(new JwtToken(idToken), st.getClient());\n-        } else {\n-            return null;\n+            if (sub.getIdToken() != null) {\n+                IdToken idToken = new IdToken(sub.getIdToken());\n+                idToken.setAudience(st.getClient().getClientId());\n+                idToken.setAuthorizedParty(st.getClient().getClientId());\n+                // if this token was refreshed then the cloned IDToken might need to have its\n+                // issuedAt and expiry time properties adjusted if it proves to be necessary\n+                setAtHashAndNonce(idToken, st);\n+                return processJwt(new JwtToken(idToken), st.getClient());\n+            }\n         }\n+        return null;\n+        \n     }\n     private void setAtHashAndNonce(IdToken idToken, ServerAccessToken st) {\n         String rType = st.getResponseType();",
                "changes": 20,
                "blob_url": "https://github.com/apache/cxf/blob/6021189d1f783ae20353f71ddd211cf06c0ba5cf/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/IdTokenResponseFilter.java"
            }
        ],
        "repo": "cxf",
        "message": "Preventing a possible NPE in IdTokenResponseFilter",
        "commit": "https://github.com/apache/cxf/commit/6021189d1f783ae20353f71ddd211cf06c0ba5cf"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/fbf69824d551605272fad67cc0bbc60a93fb52d7",
        "bug_id": "cxf_68",
        "file": [
            {
                "additions": 5,
                "sha": "b1da5390fba66d81411fafaa5259fcb4f0c18289",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/793eebe60d3f934bdaf009f24a392e68c5ab4630/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/WebSocketTransportFactory.java",
                "deletions": 0,
                "filename": "rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/WebSocketTransportFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/WebSocketTransportFactory.java?ref=793eebe60d3f934bdaf009f24a392e68c5ab4630",
                "patch": "@@ -134,6 +134,11 @@ public Destination getDestination(EndpointInfo endpointInfo, Bus bus) throws IOE\n             AbstractHTTPDestination d = registry.getDestinationForPath(endpointInfo.getAddress());\n             if (d == null) {\n                 d = factory.createDestination(endpointInfo, bus, registry);\n+                if (d == null) {\n+                    String error = \"No destination available. The CXF websocket transport needs either the \"\n+                        + \"Jetty WebSocket or Atmosphere dependencies to be available\";\n+                    throw new IOException(error); \n+                }\n                 registry.addDestination(d);\n                 configure(bus, d);\n                 d.finalizeConfig();",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/793eebe60d3f934bdaf009f24a392e68c5ab4630/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/WebSocketTransportFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid a NPE in websocket transport",
        "commit": "https://github.com/apache/cxf/commit/793eebe60d3f934bdaf009f24a392e68c5ab4630"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6d58c07420b09e1f617084661f03c418a5b4bed7",
        "bug_id": "cxf_69",
        "file": [
            {
                "additions": 5,
                "sha": "79b1aede7a90e5dacab4556bcd1aa871062a1c68",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/49b24fa300107366b1f47e9415dc418eafd820b6/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java",
                "deletions": 2,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java?ref=49b24fa300107366b1f47e9415dc418eafd820b6",
                "patch": "@@ -236,11 +236,14 @@ public static KeyStore loadPersistKeyStore(Message m, Properties props) {\n                 LOG.warning(\"No keystore file has been configured\");\n                 throw new JoseException(\"No keystore file has been configured\");\n             }\n-            keyStore = (KeyStore)m.getExchange().get(props.get(JoseConstants.RSSEC_KEY_STORE_FILE));\n+            if (m != null) {\n+                keyStore = (KeyStore)m.getExchange().get(props.get(JoseConstants.RSSEC_KEY_STORE_FILE));\n+            }\n         }\n         \n         if (keyStore == null) {\n-            keyStore = loadKeyStore(props, m.getExchange().getBus());\n+            Bus bus = m != null ? m.getExchange().getBus() : null;\n+            keyStore = loadKeyStore(props, bus);\n             if (m != null) {\n                 m.getExchange().put((String)props.get(JoseConstants.RSSEC_KEY_STORE_FILE), keyStore);\n             }",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/49b24fa300107366b1f47e9415dc418eafd820b6/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid some NPEs",
        "commit": "https://github.com/apache/cxf/commit/49b24fa300107366b1f47e9415dc418eafd820b6"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/71ec36d2cd3e3841817203c7da6b19d8a36bca44",
        "bug_id": "cxf_70",
        "file": [
            {
                "additions": 1,
                "sha": "f52f9e206882b92cc0969399b44af36fbbd2dca7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ee6125fc811fa639175e4ee14e1885a2801cbcaf/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweJwtCompactProducer.java",
                "deletions": 1,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweJwtCompactProducer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweJwtCompactProducer.java?ref=ee6125fc811fa639175e4ee14e1885a2801cbcaf",
                "patch": "@@ -38,7 +38,7 @@ public JweJwtCompactProducer(JwtClaims claims) {\n         this(new JweHeaders(), claims);\n     }\n     public JweJwtCompactProducer(JweHeaders joseHeaders, JwtClaims claims) {\n-        headers = new JweHeaders(joseHeaders);\n+        headers = joseHeaders;\n         claimsJson = JwtUtils.claimsToJson(claims);\n     }\n     ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/ee6125fc811fa639175e4ee14e1885a2801cbcaf/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwe/JweJwtCompactProducer.java"
            },
            {
                "additions": 2,
                "sha": "3ac60211463eabd3937ef414b5c2e798c9f743d5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ee6125fc811fa639175e4ee14e1885a2801cbcaf/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jws/JwsJwtCompactProducer.java",
                "deletions": 3,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jws/JwsJwtCompactProducer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jws/JwsJwtCompactProducer.java?ref=ee6125fc811fa639175e4ee14e1885a2801cbcaf",
                "patch": "@@ -17,7 +17,6 @@\n  * under the License.\n  */\n package org.apache.cxf.rs.security.jose.jws;\n-import org.apache.cxf.rs.security.jose.common.JoseHeaders;\n import org.apache.cxf.rs.security.jose.jwt.JwtClaims;\n import org.apache.cxf.rs.security.jose.jwt.JwtToken;\n import org.apache.cxf.rs.security.jose.jwt.JwtTokenReaderWriter;\n@@ -30,9 +29,9 @@ public JwsJwtCompactProducer(JwtToken token) {\n         this(token, null);\n     }\n     public JwsJwtCompactProducer(JwtClaims claims) {\n-        this(new JwtToken(null, claims), null);\n+        this(new JwsHeaders(), claims);\n     }\n-    public JwsJwtCompactProducer(JoseHeaders headers, JwtClaims claims) {\n+    public JwsJwtCompactProducer(JwsHeaders headers, JwtClaims claims) {\n         this(new JwtToken(headers, claims), null);\n     }\n     protected JwsJwtCompactProducer(JwtToken token, JwtTokenReaderWriter w) {",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/ee6125fc811fa639175e4ee14e1885a2801cbcaf/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jws/JwsJwtCompactProducer.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoiding NPE in JwsJwtCompactproducer",
        "commit": "https://github.com/apache/cxf/commit/ee6125fc811fa639175e4ee14e1885a2801cbcaf"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1487fccd43c3bcc463f12cdc1573cde68323f8b6",
        "bug_id": "cxf_71",
        "file": [
            {
                "additions": 28,
                "sha": "c360f7975ba100efbef88c860fad5d695cf54281",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ef34a5c50245cb51996689f0aa1c1dfab3a595de/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/AlgorithmSuiteTranslater.java",
                "deletions": 26,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/AlgorithmSuiteTranslater.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/AlgorithmSuiteTranslater.java?ref=ef34a5c50245cb51996689f0aa1c1dfab3a595de",
                "patch": "@@ -95,37 +95,39 @@ private AlgorithmSuite translateAlgorithmSuites(\n             }\n             \n             AlgorithmSuiteType algorithmSuiteType = cxfAlgorithmSuite.getAlgorithmSuiteType();\n+            if (algorithmSuiteType != null) {\n             // Set asymmetric key lengths\n-            if (algorithmSuite.getMaximumAsymmetricKeyLength() \n-                < algorithmSuiteType.getMaximumAsymmetricKeyLength()) {\n-                algorithmSuite.setMaximumAsymmetricKeyLength(\n-                    algorithmSuiteType.getMaximumAsymmetricKeyLength());\n-            }\n-            if (algorithmSuite.getMinimumAsymmetricKeyLength() \n-                > algorithmSuiteType.getMinimumAsymmetricKeyLength()) {\n-                algorithmSuite.setMinimumAsymmetricKeyLength(\n-                    algorithmSuiteType.getMinimumAsymmetricKeyLength());\n-            }\n-            \n-            // Set symmetric key lengths\n-            if (algorithmSuite.getMaximumSymmetricKeyLength() \n-                < algorithmSuiteType.getMaximumSymmetricKeyLength()) {\n-                algorithmSuite.setMaximumSymmetricKeyLength(\n-                    algorithmSuiteType.getMaximumSymmetricKeyLength());\n-            }\n-            if (algorithmSuite.getMinimumSymmetricKeyLength() \n-                > algorithmSuiteType.getMinimumSymmetricKeyLength()) {\n-                algorithmSuite.setMinimumSymmetricKeyLength(\n-                    algorithmSuiteType.getMinimumSymmetricKeyLength());\n-            }\n+                if (algorithmSuite.getMaximumAsymmetricKeyLength() \n+                    < algorithmSuiteType.getMaximumAsymmetricKeyLength()) {\n+                    algorithmSuite.setMaximumAsymmetricKeyLength(\n+                        algorithmSuiteType.getMaximumAsymmetricKeyLength());\n+                }\n+                if (algorithmSuite.getMinimumAsymmetricKeyLength() \n+                    > algorithmSuiteType.getMinimumAsymmetricKeyLength()) {\n+                    algorithmSuite.setMinimumAsymmetricKeyLength(\n+                        algorithmSuiteType.getMinimumAsymmetricKeyLength());\n+                }\n                 \n-            algorithmSuite.addEncryptionMethod(algorithmSuiteType.getEncryption());\n-            algorithmSuite.addKeyWrapAlgorithm(algorithmSuiteType.getSymmetricKeyWrap());\n-            algorithmSuite.addKeyWrapAlgorithm(algorithmSuiteType.getAsymmetricKeyWrap());\n+                // Set symmetric key lengths\n+                if (algorithmSuite.getMaximumSymmetricKeyLength() \n+                    < algorithmSuiteType.getMaximumSymmetricKeyLength()) {\n+                    algorithmSuite.setMaximumSymmetricKeyLength(\n+                        algorithmSuiteType.getMaximumSymmetricKeyLength());\n+                }\n+                if (algorithmSuite.getMinimumSymmetricKeyLength() \n+                    > algorithmSuiteType.getMinimumSymmetricKeyLength()) {\n+                    algorithmSuite.setMinimumSymmetricKeyLength(\n+                        algorithmSuiteType.getMinimumSymmetricKeyLength());\n+                }\n+                    \n+                algorithmSuite.addEncryptionMethod(algorithmSuiteType.getEncryption());\n+                algorithmSuite.addKeyWrapAlgorithm(algorithmSuiteType.getSymmetricKeyWrap());\n+                algorithmSuite.addKeyWrapAlgorithm(algorithmSuiteType.getAsymmetricKeyWrap());\n+                algorithmSuite.addDigestAlgorithm(algorithmSuiteType.getDigest());\n+            }\n     \n             algorithmSuite.addSignatureMethod(cxfAlgorithmSuite.getAsymmetricSignature());\n             algorithmSuite.addSignatureMethod(cxfAlgorithmSuite.getSymmetricSignature());\n-            algorithmSuite.addDigestAlgorithm(algorithmSuiteType.getDigest());\n             algorithmSuite.addC14nAlgorithm(cxfAlgorithmSuite.getC14n().getValue());\n     \n             algorithmSuite.addTransformAlgorithm(cxfAlgorithmSuite.getC14n().getValue());",
                "changes": 54,
                "blob_url": "https://github.com/apache/cxf/blob/ef34a5c50245cb51996689f0aa1c1dfab3a595de/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/AlgorithmSuiteTranslater.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/ef34a5c50245cb51996689f0aa1c1dfab3a595de"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/84d71635c7dae21cfa9b5fb3ae11d4950ad8729b",
        "bug_id": "cxf_72",
        "file": [
            {
                "additions": 4,
                "sha": "0f69d335ab54fcb90008f0684a6ceb9bb889fba1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/539cbd70fb39676d64d0987e570fe69ff3d485d3/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "deletions": 0,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java?ref=539cbd70fb39676d64d0987e570fe69ff3d485d3",
                "patch": "@@ -174,6 +174,10 @@ private AuthorizationPolicy getAuthorizationPolicyFromMessage(String credentials\n             try {\n                 byte[] authBytes = Base64Utility.decode(authEncoded);\n \n+                if (authBytes == null) {\n+                    throw new Base64Exception(new Throwable(\"Invalid Base64 data.\"));\n+                }\n+                \n                 String authDecoded = decodeBasicAuthWithIso8859\n                     ? new String(authBytes, StandardCharsets.ISO_8859_1) : new String(authBytes);\n ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/539cbd70fb39676d64d0987e570fe69ff3d485d3/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java"
            }
        ],
        "repo": "cxf",
        "message": "Prevent NPE thrown in getAuthorizationPolicyFromMessage for authorization header values with length less than 4, patch from emswbandara applied, This closes #295",
        "commit": "https://github.com/apache/cxf/commit/539cbd70fb39676d64d0987e570fe69ff3d485d3"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/cb2160fee6782b8638477ae7af5ad4cd82d6b88f",
        "bug_id": "cxf_73",
        "file": [
            {
                "additions": 3,
                "sha": "7a68622c64750092ff747383adf76fbbfceedd72",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/5c2d0981036a9c26e935b4748489d8898583d70c/rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/Swagger2Feature.java",
                "deletions": 1,
                "filename": "rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/Swagger2Feature.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/Swagger2Feature.java?ref=5c2d0981036a9c26e935b4748489d8898583d70c",
                "patch": "@@ -25,6 +25,7 @@\n import java.util.List;\n import java.util.Set;\n \n+import javax.servlet.ServletContext;\n import javax.ws.rs.container.ContainerRequestContext;\n import javax.ws.rs.container.ContainerRequestFilter;\n import javax.ws.rs.container.PreMatching;\n@@ -174,7 +175,8 @@ public void filter(ContainerRequestContext requestContext) throws IOException {\n \n         @Override\n         public void filter(ContainerRequestContext requestContext) throws IOException {\n-            if (mc.getServletContext().getAttribute(ReaderConfig.class.getName()) == null) {\n+            ServletContext servletContext = mc.getServletContext();\n+            if (servletContext != null && servletContext.getAttribute(ReaderConfig.class.getName()) == null) {\n                 if (mc.getServletConfig() != null\n                     && Boolean.valueOf(mc.getServletConfig().getInitParameter(\"scan.all.resources\"))) {\n                     addReaderConfig(mc.getServletConfig().getInitParameter(\"ignore.routes\"));",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/5c2d0981036a9c26e935b4748489d8898583d70c/rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/Swagger2Feature.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-6601: avoid NPE",
        "commit": "https://github.com/apache/cxf/commit/5c2d0981036a9c26e935b4748489d8898583d70c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3e8d71b42b3cf74b15080fad9769330992e384ca",
        "bug_id": "cxf_74",
        "file": [
            {
                "additions": 3,
                "sha": "241fe6b4ff1007b2ec8263b3465ee612a00c224a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3f719f99dbb6ba9ae961d90323e7f8c55961e616/rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java",
                "deletions": 0,
                "filename": "rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java?ref=3f719f99dbb6ba9ae961d90323e7f8c55961e616",
                "patch": "@@ -236,6 +236,9 @@ public static JsonWebKeys loadJwkSet(Properties props, Bus bus, JweDecryptionPro\n         if (keyStoreLoc != null) {\n             try {\n                 InputStream is = ResourceUtils.getResourceStream(keyStoreLoc, bus);\n+                if (is == null) {\n+                    throw new SecurityException(\"Error in loading keystore location: \" + keyStoreLoc);\n+                }\n                 keyContent = IOUtils.readStringFromStream(is);\n             } catch (Exception ex) {\n                 throw new SecurityException(ex);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/3f719f99dbb6ba9ae961d90323e7f8c55961e616/rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/3f719f99dbb6ba9ae961d90323e7f8c55961e616"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0696b166015543a1b2ad9c165dd00e27fea8dd18",
        "bug_id": "cxf_75",
        "file": [
            {
                "additions": 6,
                "sha": "18b198f4dbcfe0e70eb41288426dec4495b1cb3e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ddc01a185658418ce8b68ebf5e1a57c1a7de06ce/core/src/main/java/org/apache/cxf/attachment/AttachmentUtil.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/attachment/AttachmentUtil.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/attachment/AttachmentUtil.java?ref=ddc01a185658418ce8b68ebf5e1a57c1a7de06ce",
                "patch": "@@ -199,7 +199,12 @@ public static String createContentID(String ns) throws UnsupportedEncodingExcept\n         if (ns != null && (ns.length() > 0)) {\n             try {\n                 URI uri = new URI(ns);\n-                cid = uri.getHost();\n+                String host = uri.getHost();\n+                if (host != null) {\n+                    cid = host;\n+                } else {\n+                    cid = ns;\n+                }\n             } catch (Exception e) {\n                 cid = ns;\n             }",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/ddc01a185658418ce8b68ebf5e1a57c1a7de06ce/core/src/main/java/org/apache/cxf/attachment/AttachmentUtil.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6517] Avoiding NPE",
        "commit": "https://github.com/apache/cxf/commit/ddc01a185658418ce8b68ebf5e1a57c1a7de06ce"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b1ea9390417ad96fe7edb78d2f9a11c8a5c9e870",
        "bug_id": "cxf_76",
        "file": [
            {
                "additions": 1,
                "sha": "95d019781caca18b8d35073dbf97a9f8f39658a4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/81f3a848e30751f52be6e4d694e3522f77a14b50/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/WSDLGetUtils.java",
                "deletions": 1,
                "filename": "rt/frontend/simple/src/main/java/org/apache/cxf/frontend/WSDLGetUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/WSDLGetUtils.java?ref=81f3a848e30751f52be6e4d694e3522f77a14b50",
                "patch": "@@ -174,7 +174,7 @@ protected String mapUri(Bus bus, String base, Map<String, SchemaReference> smp,\n                 if (!smp.containsKey(URLDecoder.decode(key, \"utf-8\"))) {\n                     // if the result is not known, check if we can resolve it into something known\n                     String resolved = resolveWithCatalogs(OASISCatalogManager.getCatalogManager(bus), key, base);\n-                    if (smp.containsKey(URLDecoder.decode(resolved, \"utf-8\"))) {\n+                    if (resolved != null  && smp.containsKey(URLDecoder.decode(resolved, \"utf-8\"))) {\n                         // if it is resolvable, we can use it\n                         return base + \"?xsd=\" + key.replace(\" \", \"%20\");\n                     }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/81f3a848e30751f52be6e4d694e3522f77a14b50/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/WSDLGetUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6392] Prevent NPE",
        "commit": "https://github.com/apache/cxf/commit/81f3a848e30751f52be6e4d694e3522f77a14b50"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9e6b5d97cf2180a4f5694ba84866d0fe878f0479",
        "bug_id": "cxf_77",
        "file": [],
        "repo": "cxf",
        "message": "CXF-7264: NPE on OAuth RO/CC flows using JPA, patch from Adrian Gonzalez applied, This closes #242",
        "commit": "https://github.com/apache/cxf/commit/0e1d4826cab2975b437219f740381574536d4ff3"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/81bc682a409806567fc3485157e184e72feaf086",
        "bug_id": "cxf_78",
        "file": [
            {
                "additions": 8,
                "sha": "94911297a403f36cc154aab091e76e0fbecd292b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4e1149ce5ee48723719305c68e00ec6f2d1e475e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java",
                "deletions": 5,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java?ref=4e1149ce5ee48723719305c68e00ec6f2d1e475e",
                "patch": "@@ -1010,12 +1010,15 @@ private static boolean isServletApiContext(String name) {\n         } else if (SERVLET_CONFIG_CLASS_NAME.equals(name)) {\n             proxyClassName = \"org.apache.cxf.jaxrs.impl.tl.ThreadLocalServletConfig\";\n         }\n-        try {\n-            return (ThreadLocalProxy<?>)ClassLoaderUtils.loadClass(proxyClassName, InjectionUtils.class)\n-                .newInstance();\n-        } catch (Throwable t) {\n-            throw new RuntimeException(t);\n+        if (proxyClassName != null) {\n+            try {\n+                return (ThreadLocalProxy<?>)ClassLoaderUtils.loadClass(proxyClassName, InjectionUtils.class)\n+                    .newInstance();\n+            } catch (Throwable t) {\n+                throw new RuntimeException(t);\n+            }\n         }\n+        return null;\n     }\n     \n     public static Method getGetterFromSetter(Method setter) throws Exception {",
                "changes": 13,
                "blob_url": "https://github.com/apache/cxf/blob/4e1149ce5ee48723719305c68e00ec6f2d1e475e/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6480] Avoiding NPE",
        "commit": "https://github.com/apache/cxf/commit/4e1149ce5ee48723719305c68e00ec6f2d1e475e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4c9cc32f7bba136b3970c91f15a7f24c94c94c89",
        "bug_id": "cxf_79",
        "file": [
            {
                "additions": 4,
                "sha": "b5a0d972ea88cfadaca4c390a70ca2dfeacc5e9a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/bbcbac00dd7a1bf5f0c68f9a77dae1497d969167/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/CryptoCoverageChecker.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/CryptoCoverageChecker.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/CryptoCoverageChecker.java?ref=bbcbac00dd7a1bf5f0c68f9a77dae1497d969167",
                "patch": "@@ -116,6 +116,10 @@ public void handleMessage(SoapMessage message) throws Fault {\n             // return\n         }\n         \n+        if (message.getContent(SOAPMessage.class) == null) {\n+            throw new SoapFault(\"Error obtaining SOAP document\", Fault.FAULT_CODE_CLIENT);\n+        }\n+        \n         Element documentElement = null;\n         try {\n             SOAPMessage saajDoc = message.getContent(SOAPMessage.class);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/bbcbac00dd7a1bf5f0c68f9a77dae1497d969167/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/CryptoCoverageChecker.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/bbcbac00dd7a1bf5f0c68f9a77dae1497d969167"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/04d160cad1a27bb4cc694077125c6ea742647d3d",
        "bug_id": "cxf_80",
        "file": [
            {
                "additions": 8,
                "sha": "d76e5ac9033a43820285676a2b3e1b96f7191a00",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/61e60c186ca17b89e407622ccfec9771484dd418/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java",
                "deletions": 5,
                "filename": "rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java?ref=61e60c186ca17b89e407622ccfec9771484dd418",
                "patch": "@@ -19,6 +19,7 @@\n package org.apache.cxf.ext.logging.event;\n \n import java.security.AccessController;\n+import java.util.Arrays;\n import java.util.Collections;\n import java.util.HashMap;\n import java.util.HashSet;\n@@ -126,17 +127,19 @@ private String getJAASPrincipal() {\n     }\n \n     private Map<String, String> getHeaders(Message message) {\n-        Map<String, List<String>> headers = CastUtils.cast((Map<?, ?>)message.get(Message.PROTOCOL_HEADERS));\n+        Map<String, List<Object>> headers = CastUtils.cast((Map<?, ?>)message.get(Message.PROTOCOL_HEADERS));\n         Map<String, String> result = new HashMap<>();\n         if (headers == null) {\n             return result;\n         }\n-        for (Map.Entry<String, List<String>> entry : headers.entrySet()) {\n+        for (Map.Entry<String, List<Object>> entry : headers.entrySet()) {\n             if (entry.getValue().size() == 1) {\n-                result.put(entry.getKey(), entry.getValue().get(0));\n+                Object value = entry.getValue().get(0);\n+                if (value != null) {\n+                    result.put(entry.getKey(), value.toString());\n+                }\n             } else {\n-                String[] valueAr = entry.getValue().toArray(new String[] {});\n-                result.put(entry.getKey(), valueAr.toString());\n+                result.put(entry.getKey(), Arrays.deepToString(entry.getValue().toArray()));\n             }\n         }\n         return result;",
                "changes": 13,
                "blob_url": "https://github.com/apache/cxf/blob/61e60c186ca17b89e407622ccfec9771484dd418/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java"
            },
            {
                "additions": 3,
                "sha": "e41b3b3b5974b6c03b9d5577dcf1568c6e2846f6",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/61e60c186ca17b89e407622ccfec9771484dd418/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerBookTest.java",
                "deletions": 1,
                "filename": "systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerBookTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerBookTest.java?ref=61e60c186ca17b89e407622ccfec9771484dd418",
                "patch": "@@ -1078,8 +1078,10 @@ public void testWebApplicationException() throws Exception {\n \n     @Test\n     public void testAddBookProxyResponse() {\n-        BookStore store = JAXRSClientFactory.create(\"http://localhost:\" + PORT, BookStore.class);\n         Book b = new Book(\"CXF rocks\", 123L);\n+        \n+        System.out.println(Arrays.deepToString(Arrays.asList(b, b).toArray()));\n+        BookStore store = JAXRSClientFactory.create(\"http://localhost:\" + PORT, BookStore.class);\n         Response r = store.addBook(b);\n         assertNotNull(r);\n         InputStream is = (InputStream)r.getEntity();",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/61e60c186ca17b89e407622ccfec9771484dd418/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerBookTest.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoiding NPEs in the logging feature given that headers can be non Strings on the out flow especially for JAXRS",
        "commit": "https://github.com/apache/cxf/commit/61e60c186ca17b89e407622ccfec9771484dd418"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/50b4ccf167d73fc547a0567f49cdffe41e68cb9a",
        "bug_id": "cxf_81",
        "file": [
            {
                "additions": 6,
                "sha": "c5f6fddd49a5d4a1b313d3d3bd594bad4034a3ef",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b4f34d03b2a244f9b97918d6ca33f532079e8dcb/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java?ref=b4f34d03b2a244f9b97918d6ca33f532079e8dcb",
                "patch": "@@ -1473,7 +1473,12 @@ protected boolean redirectRetransmit() throws IOException {\n         protected boolean authorizationRetransmit() throws IOException {\n             Message m = new MessageImpl();\n             updateResponseHeaders(m);\n-            HttpAuthHeader authHeader = new HttpAuthHeader(Headers.getSetProtocolHeaders(m).get(\"WWW-Authenticate\"));\n+            List<String> authHeaderValues = Headers.getSetProtocolHeaders(m).get(\"WWW-Authenticate\");\n+            if (authHeaderValues == null) {\n+                LOG.warning(\"WWW-Authenticate response header is not set\");\n+                return false;\n+            }\n+            HttpAuthHeader authHeader = new HttpAuthHeader(authHeaderValues);\n             URI currentURI = url;\n             String realm = authHeader.getRealm();\n             detectAuthorizationLoop(getConduitName(), outMessage, currentURI, realm);",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/b4f34d03b2a244f9b97918d6ca33f532079e8dcb/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6408] Preventing NPE",
        "commit": "https://github.com/apache/cxf/commit/b4f34d03b2a244f9b97918d6ca33f532079e8dcb"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b97598447f52f1ae627ae2b06c98d2dd99abf539",
        "bug_id": "cxf_82",
        "file": [
            {
                "additions": 3,
                "sha": "5c4d18969505269119ad4080430a1b2440df71af",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b875cecedb449c764de9c6669dd6d7d80e146f23/core/src/main/java/org/apache/cxf/helpers/IOUtils.java",
                "deletions": 0,
                "filename": "core/src/main/java/org/apache/cxf/helpers/IOUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/helpers/IOUtils.java?ref=b875cecedb449c764de9c6669dd6d7d80e146f23",
                "patch": "@@ -142,6 +142,9 @@ public static String newStringFromBytes(byte[] bytes, int start, int length) {\n \n     public static int copy(final InputStream input, final OutputStream output)\n         throws IOException {\n+        if (input == null) {\n+            return 0;\n+        }\n         if (output instanceof CopyingOutputStream) {\n             return ((CopyingOutputStream)output).copyFrom(input);\n         }",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/b875cecedb449c764de9c6669dd6d7d80e146f23/core/src/main/java/org/apache/cxf/helpers/IOUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6463] Preventing NPE if InputStream is null",
        "commit": "https://github.com/apache/cxf/commit/b875cecedb449c764de9c6669dd6d7d80e146f23"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4786e832573f1fcc07ed190ab21fdb2820348e4d",
        "bug_id": "cxf_83",
        "file": [
            {
                "additions": 30,
                "sha": "13d1f52edf82a9f955661dfc5ee3348955d9b7d7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a752ca60b3b430c02feb89eb7930c13c21b94b0e/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/Activator.java",
                "deletions": 26,
                "filename": "rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/Activator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/Activator.java?ref=a752ca60b3b430c02feb89eb7930c13c21b94b0e",
                "patch": "@@ -25,60 +25,58 @@\n import java.util.Map;\n \n import org.apache.cxf.Bus;\n-import org.apache.cxf.transport.http.HTTPConduitFactory;\n import org.osgi.framework.BundleActivator;\n import org.osgi.framework.BundleContext;\n import org.osgi.framework.Constants;\n-import org.osgi.framework.ServiceRegistration;\n+import org.osgi.framework.ServiceReference;\n import org.osgi.service.cm.ConfigurationException;\n import org.osgi.service.cm.ManagedService;\n import org.osgi.util.tracker.ServiceTracker;\n \n public class Activator implements BundleActivator {\n-\n-    private ServiceTracker tracker;\n+    private ConduitConfigurer conduitConfigurer;\n \n     @Override\n     public void start(BundleContext context) throws Exception {\n-        tracker = new ServiceTracker(context, Bus.class.getName(), null);\n-        tracker.open();\n-        ConduitConfigurer conduitConfigurer = new ConduitConfigurer(context, tracker);\n-        registerManagedService(context, conduitConfigurer, \"org.apache.cxf.transport.http.async\");\n-    }\n-\n-    private void registerManagedService(BundleContext context, ConduitConfigurer conduitConfigurer, String servicePid) {\n+        conduitConfigurer = new ConduitConfigurer(context);\n+        conduitConfigurer.open();\n         Dictionary<String, Object> properties = new Hashtable<String, Object>();\n-        properties.put(Constants.SERVICE_PID, servicePid);\n+        properties.put(Constants.SERVICE_PID, \"org.apache.cxf.transport.http.async\");\n         context.registerService(ManagedService.class.getName(), conduitConfigurer, properties);\n     }\n \n     @Override\n     public void stop(BundleContext context) throws Exception {\n-        tracker.close();\n+        conduitConfigurer.close();\n     }\n \n-    class ConduitConfigurer implements ManagedService {\n-        private AsyncHTTPConduitFactory conduitFactory;\n-        private ServiceTracker busTracker;\n-        private BundleContext context;\n-        private ServiceRegistration reg;\n+    public class ConduitConfigurer extends ServiceTracker implements ManagedService {\n+        private Map<String, Object> currentConfig;\n         \n-        ConduitConfigurer(BundleContext context, ServiceTracker busTracker) {\n-            this.context = context;\n-            this.busTracker = busTracker;\n+        public ConduitConfigurer(BundleContext context) {\n+            super(context, Bus.class.getName(), null);\n         }\n \n         @SuppressWarnings({\n             \"rawtypes\", \"unchecked\"\n         })\n         @Override\n         public void updated(Dictionary properties) throws ConfigurationException {\n-            if (reg != null) {\n-                reg.unregister();\n+            this.currentConfig = toMap(properties);\n+            Bus[] buses = (Bus[])getServices();\n+            if (buses == null) {\n+                return;\n             }\n-            conduitFactory = new AsyncHTTPConduitFactory((Bus)this.busTracker.getService());\n-            conduitFactory.update(toMap(properties));\n-            reg = context.registerService(HTTPConduitFactory.class.getName(), conduitFactory, null);\n+            for (Bus bus : buses) {\n+                configureConduitFactory(bus);\n+            }\n+        }\n+        \n+        @Override\n+        public Object addingService(ServiceReference reference) {\n+            Bus bus = (Bus)super.addingService(reference);\n+            configureConduitFactory(bus);\n+            return bus;\n         }\n         \n         private Map<String, Object> toMap(Dictionary<String, ?> properties) {\n@@ -94,5 +92,11 @@ public void updated(Dictionary properties) throws ConfigurationException {\n             return props;\n         }\n         \n+        private void configureConduitFactory(Bus bus) {\n+            AsyncHTTPConduitFactory conduitFactory = bus.getExtension(AsyncHTTPConduitFactory.class);\n+            conduitFactory.update(this.currentConfig);\n+        }\n+\n+        \n     }\n }",
                "changes": 56,
                "blob_url": "https://github.com/apache/cxf/blob/a752ca60b3b430c02feb89eb7930c13c21b94b0e/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/Activator.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6887] Handle multiple busses and avoid NPE",
        "commit": "https://github.com/apache/cxf/commit/a752ca60b3b430c02feb89eb7930c13c21b94b0e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d6043fd1ce22c2e5991345747ac2c0ee3824a198",
        "bug_id": "cxf_84",
        "file": [
            {
                "additions": 1,
                "sha": "a0bfdf8d60d670addc4858a6afedee9397c10674",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3b302262ca78035fd76eb03e7f51bd67189f8031/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java",
                "deletions": 1,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java?ref=3b302262ca78035fd76eb03e7f51bd67189f8031",
                "patch": "@@ -315,7 +315,7 @@ public static void validateCertificateChain(KeyStore ks, List<X509Certificate> i\n         return chain == null ? null : chain.toArray(new X509Certificate[]{});\n     }\n     public static String getKeyAlgorithm(Message m, Properties props, String propName, String defaultAlg) {\n-        String algo = props.getProperty(propName);\n+        String algo = props != null ? props.getProperty(propName) : null;\n         if (algo == null && m != null) {\n             algo = (String)m.getContextualProperty(propName);\n         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/3b302262ca78035fd76eb03e7f51bd67189f8031/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "Adding an npe guard to KeyManagementUtils.getKeyAlgorithm",
        "commit": "https://github.com/apache/cxf/commit/3b302262ca78035fd76eb03e7f51bd67189f8031"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9d25f9a0617bcb30e19d23fa4d5b4bd7948b8434",
        "bug_id": "cxf_85",
        "file": [
            {
                "additions": 1,
                "sha": "85ef7a8e70a30343e28e3b8418179ea4c146f1a1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8bf53f9766b13c4e5ff2ed719f7250d34f77f219/rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/SwaggerFeature.java",
                "deletions": 1,
                "filename": "rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/SwaggerFeature.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/SwaggerFeature.java?ref=8bf53f9766b13c4e5ff2ed719f7250d34f77f219",
                "patch": "@@ -96,7 +96,7 @@ private void calculateDefaultResourcePackage(Server server) {\n         \n         if ((resourceInfo != null) \n             && (getResourcePackage() == null || getResourcePackage().length() == 0)) {\n-            setResourcePackage(resourceInfo.getResourceClass().getPackage().getName());\n+            setResourcePackage(resourceInfo.getServiceClass().getPackage().getName());\n         }\n     }\n     ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/8bf53f9766b13c4e5ff2ed719f7250d34f77f219/rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/SwaggerFeature.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6285] Fixing NPE",
        "commit": "https://github.com/apache/cxf/commit/8bf53f9766b13c4e5ff2ed719f7250d34f77f219"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/dcaf6ecd5cc41abcce85b7cfa86e65ee01b36ebd",
        "bug_id": "cxf_86",
        "file": [
            {
                "additions": 38,
                "sha": "a9fe043526a2b4c38b4a12a5804f00c6a8a54fcb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d4de0ced8b53599229a7a3e43ad3bb5cf70b401b/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java",
                "deletions": 40,
                "filename": "rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java?ref=d4de0ced8b53599229a7a3e43ad3bb5cf70b401b",
                "patch": "@@ -29,7 +29,6 @@\n import java.util.UUID;\n \n import javax.security.auth.Subject;\n-import javax.xml.namespace.QName;\n import javax.xml.stream.XMLStreamReader;\n \n import org.apache.cxf.binding.Binding;\n@@ -70,19 +69,10 @@ public LogEvent map(Message message) {\n             }\n         }\n \n-        String encoding = (String)message.get(Message.ENCODING);\n+        event.setEncoding(safeGet(message, Message.ENCODING));\n+        event.setHttpMethod(safeGet(message, Message.HTTP_REQUEST_METHOD));\n+        event.setContentType(safeGet(message, Message.CONTENT_TYPE));\n \n-        if (encoding != null) {\n-            event.setEncoding(encoding);\n-        }\n-        String httpMethod = (String)message.get(Message.HTTP_REQUEST_METHOD);\n-        if (httpMethod != null) {\n-            event.setHttpMethod(httpMethod);\n-        }\n-        String ct = (String)message.get(Message.CONTENT_TYPE);\n-        if (ct != null) {\n-            event.setContentType(ct);\n-        }\n         Map<String, String> headerMap = getHeaders(message);\n         event.setHeaders(headerMap);\n \n@@ -138,6 +128,9 @@ private String getJAASPrincipal() {\n     private Map<String, String> getHeaders(Message message) {\n         Map<String, List<String>> headers = CastUtils.cast((Map<?, ?>)message.get(Message.PROTOCOL_HEADERS));\n         Map<String, String> result = new HashMap<>();\n+        if (headers == null) {\n+            return result;\n+        }\n         for (Map.Entry<String, List<String>> entry : headers.entrySet()) {\n             if (entry.getValue().size() == 1) {\n                 result.put(entry.getKey(), entry.getValue().get(0));\n@@ -150,10 +143,10 @@ private String getJAASPrincipal() {\n     }\n \n     private String getUri(Message message) {\n-        String uri = (String)message.get(Message.REQUEST_URL);\n+        String uri = safeGet(message, Message.REQUEST_URL);\n         if (uri == null) {\n-            String address = (String)message.get(Message.ENDPOINT_ADDRESS);\n-            uri = (String)message.get(Message.REQUEST_URI);\n+            String address = safeGet(message, Message.ENDPOINT_ADDRESS);\n+            uri = safeGet(message, Message.REQUEST_URI);\n             if (uri != null && uri.startsWith(\"/\")) {\n                 if (address != null && !address.startsWith(uri)) {\n                     if (address.endsWith(\"/\") && address.length() > 1) {\n@@ -165,7 +158,7 @@ private String getUri(Message message) {\n                 uri = address;\n             }\n         }\n-        String query = (String)message.get(Message.QUERY_STRING);\n+        String query = safeGet(message, Message.QUERY_STRING);\n         if (query != null) {\n             return uri + \"?\" + query;\n         } else {\n@@ -174,7 +167,7 @@ private String getUri(Message message) {\n     }\n \n     private boolean isBinaryContent(Message message) {\n-        String contentType = (String)message.get(Message.CONTENT_TYPE);\n+        String contentType = safeGet(message, Message.CONTENT_TYPE);\n         return contentType != null && BINARY_CONTENT_MEDIA_TYPES.contains(contentType);\n     }\n \n@@ -228,13 +221,12 @@ private String getOperationName(Message message) {\n     }\n \n     private BindingOperationInfo getOperationFromContent(Message message) {\n-        BindingOperationInfo boi = null;\n         XMLStreamReader xmlReader = message.getContent(XMLStreamReader.class);\n-        if (null != xmlReader) {\n-            QName qName = xmlReader.getName();\n-            boi = ServiceModelUtil.getOperation(message.getExchange(), qName);\n+        if (xmlReader != null) {\n+            return ServiceModelUtil.getOperation(message.getExchange(), xmlReader.getName());\n+        } else {\n+            return null;\n         }\n-        return boi;\n     }\n \n     private Message getEffectiveMessage(Message message) {\n@@ -249,23 +241,30 @@ private Message getEffectiveMessage(Message message) {\n \n     private String getRestOperationName(Message curMessage) {\n         Message message = getEffectiveMessage(curMessage);\n-        if (message.containsKey(Message.HTTP_REQUEST_METHOD)) {\n-            String httpMethod = message.get(Message.HTTP_REQUEST_METHOD).toString();\n-\n-            String path = \"\";\n-            if (message.containsKey(Message.REQUEST_URI)) {\n-                String requestUri = message.get(Message.REQUEST_URI).toString();\n-                int baseUriLength = (message.containsKey(Message.BASE_PATH)) ? message.get(Message.BASE_PATH)\n-                    .toString().length() : 0;\n-                path = requestUri.substring(baseUriLength);\n-                if (path.isEmpty()) {\n-                    path = \"/\";\n-                }\n-            }\n+        String httpMethod = safeGet(message, Message.HTTP_REQUEST_METHOD);\n+        if (httpMethod == null) {\n+            return \"\";\n+        }\n \n-            return new StringBuffer().append(httpMethod).append('[').append(path).append(']').toString();\n+        String path = \"\";\n+        String requestUri = safeGet(message, Message.REQUEST_URI);\n+        if (requestUri != null) {\n+            String basePath = safeGet(message, Message.BASE_PATH);\n+            int baseUriLength = (basePath != null) ? basePath.length() : 0;\n+            path = requestUri.substring(baseUriLength);\n+            if (path.isEmpty()) {\n+                path = \"/\";\n+            }\n+        }\n+        return new StringBuffer().append(httpMethod).append('[').append(path).append(']').toString();\n+    }\n+    \n+    private String safeGet(Message message, String key) {\n+        if (!message.containsKey(key)) {\n+            return null;\n         }\n-        return \"\";\n+        Object value = message.get(key);\n+        return (value instanceof String) ? value.toString() : null;\n     }\n \n     /**\n@@ -317,7 +316,6 @@ private void setEpInfo(Message message, final LogEvent event) {\n         EndpointInfo endpoint = getEPInfo(message);\n         event.setPortName(endpoint.getName());\n         event.setPortTypeName(endpoint.getName());\n-        event.setOperationName(getRestOperationName(message));\n         String opName = isSOAPMessage(message) ? getOperationName(message) : getRestOperationName(message);\n         event.setOperationName(opName);\n         if (endpoint.getService() != null) {\n@@ -333,7 +331,7 @@ private void setServiceInfo(ServiceInfo service, LogEvent event) {\n \n     private EndpointInfo getEPInfo(Message message) {\n         Endpoint ep = message.getExchange().getEndpoint();\n-        return (ep == null) ? null : ep.getEndpointInfo();\n+        return (ep == null) ? new EndpointInfo() : ep.getEndpointInfo();\n     }\n \n }",
                "changes": 78,
                "blob_url": "https://github.com/apache/cxf/blob/d4de0ced8b53599229a7a3e43ad3bb5cf70b401b/rt/features/logging/src/main/java/org/apache/cxf/ext/logging/event/DefaultLogEventMapper.java"
            },
            {
                "additions": 85,
                "sha": "0d64e649fe4a06fc6d06df0ee2384ff22f528c45",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/d4de0ced8b53599229a7a3e43ad3bb5cf70b401b/rt/features/logging/src/test/java/org/apache/cxf/ext/logging/DefaultLogEventMapperTest.java",
                "deletions": 0,
                "filename": "rt/features/logging/src/test/java/org/apache/cxf/ext/logging/DefaultLogEventMapperTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/features/logging/src/test/java/org/apache/cxf/ext/logging/DefaultLogEventMapperTest.java?ref=d4de0ced8b53599229a7a3e43ad3bb5cf70b401b",
                "patch": "@@ -0,0 +1,85 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.cxf.ext.logging;\n+\n+import javax.xml.namespace.QName;\n+\n+import org.apache.cxf.binding.Binding;\n+import org.apache.cxf.binding.soap.SoapBinding;\n+import org.apache.cxf.ext.logging.event.DefaultLogEventMapper;\n+import org.apache.cxf.ext.logging.event.LogEvent;\n+import org.apache.cxf.message.Exchange;\n+import org.apache.cxf.message.ExchangeImpl;\n+import org.apache.cxf.message.Message;\n+import org.apache.cxf.message.MessageImpl;\n+import org.apache.cxf.service.model.BindingInfo;\n+import org.apache.cxf.service.model.BindingOperationInfo;\n+import org.apache.cxf.service.model.OperationInfo;\n+import org.apache.cxf.service.model.ServiceInfo;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+public class DefaultLogEventMapperTest {\n+\n+    @Test\n+    public void testRest() {\n+        DefaultLogEventMapper mapper = new DefaultLogEventMapper();\n+        Message message = new MessageImpl();\n+        message.put(Message.HTTP_REQUEST_METHOD, \"GET\");\n+        message.put(Message.REQUEST_URI, \"test\");\n+        Exchange exchange = new ExchangeImpl();\n+        message.setExchange(exchange);\n+        LogEvent event = mapper.map(message);\n+        Assert.assertEquals(\"GET[test]\", event.getOperationName());\n+    }\n+    \n+    /**\n+     * Test for NPE described in CXF-6436\n+     */\n+    @Test\n+    public void testNullValues() {\n+        DefaultLogEventMapper mapper = new DefaultLogEventMapper();\n+        Message message = new MessageImpl();\n+        message.put(Message.HTTP_REQUEST_METHOD, null);\n+        message.put(Message.REQUEST_URI, null);\n+        Exchange exchange = new ExchangeImpl();\n+        message.setExchange(exchange);\n+        LogEvent event = mapper.map(message);\n+        Assert.assertEquals(\"\", event.getOperationName());\n+    }\n+    \n+    @Test\n+    public void testSoap() {\n+        DefaultLogEventMapper mapper = new DefaultLogEventMapper();\n+        Message message = new MessageImpl();\n+        ExchangeImpl exchange = new ExchangeImpl();\n+        ServiceInfo service = new ServiceInfo();\n+        BindingInfo info = new BindingInfo(service, \"bindingId\");\n+        SoapBinding value = new SoapBinding(info);\n+        exchange.put(Binding.class, value);\n+        OperationInfo opInfo = new OperationInfo();\n+        opInfo.setName(new QName(\"http://my\", \"Operation\"));\n+        BindingOperationInfo boi = new BindingOperationInfo(info, opInfo);\n+        exchange.put(BindingOperationInfo.class, boi);\n+        message.setExchange(exchange);\n+        LogEvent event = mapper.map(message);\n+        Assert.assertEquals(\"{http://my}Operation\", event.getOperationName());\n+    }\n+\n+}",
                "changes": 85,
                "blob_url": "https://github.com/apache/cxf/blob/d4de0ced8b53599229a7a3e43ad3bb5cf70b401b/rt/features/logging/src/test/java/org/apache/cxf/ext/logging/DefaultLogEventMapperTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6436] Fix for NPE",
        "commit": "https://github.com/apache/cxf/commit/d4de0ced8b53599229a7a3e43ad3bb5cf70b401b"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/71488c6fa7635c88285214a0479379aafef9ed3c",
        "bug_id": "cxf_87",
        "file": [
            {
                "additions": 1,
                "sha": "c23739b07dde392084294cdbb4c30c85f627a4c7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b9f47488b223a386572719ce93534abbd57bbc55/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/security/KerberosAuthenticationFilter.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/security/KerberosAuthenticationFilter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/security/KerberosAuthenticationFilter.java?ref=b9f47488b223a386572719ce93534abbd57bbc55",
                "patch": "@@ -73,7 +73,7 @@ public void filter(ContainerRequestContext context) {\n         \n         List<String> authHeaders = messageContext.getHttpHeaders()\n             .getRequestHeader(HttpHeaders.AUTHORIZATION);\n-        if (authHeaders.size() != 1) {\n+        if (authHeaders == null || authHeaders.size() != 1) {\n             LOG.fine(\"No Authorization header is available\");\n             throw ExceptionUtils.toNotAuthorizedException(null, getFaultResponse());\n         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/b9f47488b223a386572719ce93534abbd57bbc55/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/security/KerberosAuthenticationFilter.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix",
        "commit": "https://github.com/apache/cxf/commit/b9f47488b223a386572719ce93534abbd57bbc55"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1946e323a0df6e5f9748af82106cff39d7b5d01f",
        "bug_id": "cxf_88",
        "file": [
            {
                "additions": 1,
                "sha": "09df5ef5c938c196df82b71571fed8ec52adc92c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/002890617019d1e706a32847b71952f1e99f2c68/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/utils/AuthorizationUtils.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/utils/AuthorizationUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/utils/AuthorizationUtils.java?ref=002890617019d1e706a32847b71952f1e99f2c68",
                "patch": "@@ -73,7 +73,7 @@ private AuthorizationUtils() {\n                                                  Set<String> challenges,\n                                                  String realm) {\n         List<String> headers = mc.getHttpHeaders().getRequestHeader(\"Authorization\");\n-        if (headers.size() == 1) {\n+        if (headers != null && headers.size() == 1) {\n             String[] parts = headers.get(0).split(\" \");\n             if (parts.length > 0 \n                 && (challenges == null || challenges.isEmpty() || challenges.contains(parts[0]))) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/002890617019d1e706a32847b71952f1e99f2c68/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/utils/AuthorizationUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6153] Fixing NPE",
        "commit": "https://github.com/apache/cxf/commit/002890617019d1e706a32847b71952f1e99f2c68"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/2f0b3e38212674883d610cfcfbd76b901bd3d997",
        "bug_id": "cxf_89",
        "file": [
            {
                "additions": 3,
                "sha": "d3fe66e92999c1d6c122cb5731f8c1ff167cb4ad",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c32136c0bb980d152954eca44f6b8f06e84bd913/core/src/main/java/org/apache/cxf/service/model/ServiceModelUtil.java",
                "deletions": 0,
                "filename": "core/src/main/java/org/apache/cxf/service/model/ServiceModelUtil.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/service/model/ServiceModelUtil.java?ref=c32136c0bb980d152954eca44f6b8f06e84bd913",
                "patch": "@@ -52,6 +52,9 @@ public static String getTargetNamespace(Exchange exchange) {\n \n     public static BindingOperationInfo getOperation(Exchange exchange, String opName) {\n         Endpoint ep = exchange.get(Endpoint.class);\n+        if (ep == null) {\n+            return null;\n+        }\n         BindingInfo service = ep.getEndpointInfo().getBinding();\n \n         for (BindingOperationInfo b : service.getOperations()) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/c32136c0bb980d152954eca44f6b8f06e84bd913/core/src/main/java/org/apache/cxf/service/model/ServiceModelUtil.java"
            }
        ],
        "repo": "cxf",
        "message": "added npe guard",
        "commit": "https://github.com/apache/cxf/commit/c32136c0bb980d152954eca44f6b8f06e84bd913"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7fbbd1d13bbb7ccbbc1213ed86a456794583fd3e",
        "bug_id": "cxf_90",
        "file": [
            {
                "additions": 5,
                "sha": "182730af886fdbdbce68fdbd0793b16c9ab6edc2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b9ebd26d181cd31b124f384f29d8946512935335/rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/saml/AbstractSamlInHandler.java",
                "deletions": 1,
                "filename": "rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/saml/AbstractSamlInHandler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/saml/AbstractSamlInHandler.java?ref=b9ebd26d181cd31b124f384f29d8946512935335",
                "patch": "@@ -259,7 +259,11 @@ protected void setSecurityContext(Message message, SamlAssertionWrapper wrapper)\n     protected void throwFault(String error, Exception ex) {\n         // TODO: get bundle resource message once this filter is moved \n         // to rt/rs/security\n-        LOG.warning(error + \": \" + ExceptionUtils.getStackTrace(ex));\n+        String errorMsg = error;\n+        if (ex != null) {\n+            errorMsg += \": \" + ExceptionUtils.getStackTrace(ex);\n+        }\n+        LOG.warning(errorMsg);\n         Response response = JAXRSUtils.toResponseBuilder(401).entity(error).build();\n         throw ExceptionUtils.toNotAuthorizedException(null, response);\n     }",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/b9ebd26d181cd31b124f384f29d8946512935335/rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/saml/AbstractSamlInHandler.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE fix when exception is null",
        "commit": "https://github.com/apache/cxf/commit/b9ebd26d181cd31b124f384f29d8946512935335"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/abcffd0649d9a0467dd3ed7a4a3c561712ef4c0c",
        "bug_id": "cxf_91",
        "file": [
            {
                "additions": 4,
                "sha": "accd4af3de283b3113b9211f3edc5dc618adedea",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/5cf43ce7bebe7cccbbb75e6ef2c8421eb6838b2f/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/AbstractOAuthDataProvider.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/AbstractOAuthDataProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/AbstractOAuthDataProvider.java?ref=5cf43ce7bebe7cccbbb75e6ef2c8421eb6838b2f",
                "patch": "@@ -51,7 +51,10 @@ public void removeAccessToken(ServerAccessToken token) throws OAuthServiceExcept\n     @Override\n     public ServerAccessToken refreshAccessToken(Client client, String refreshTokenKey,\n                                                 List<String> restrictedScopes) throws OAuthServiceException {\n-        RefreshToken oldRefreshToken = revokeRefreshAndAccessTokens(client, refreshTokenKey); \n+        RefreshToken oldRefreshToken = revokeRefreshAndAccessTokens(client, refreshTokenKey);\n+        if (oldRefreshToken == null) {\n+            throw new OAuthServiceException(OAuthConstants.ACCESS_DENIED);\n+        }\n         return doRefreshAccessToken(client, oldRefreshToken, restrictedScopes);\n         \n     }",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/5cf43ce7bebe7cccbbb75e6ef2c8421eb6838b2f/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/AbstractOAuthDataProvider.java"
            },
            {
                "additions": 5,
                "sha": "d033b1f3f0a8e853e05d8854f6ef5b884a12c10d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/5cf43ce7bebe7cccbbb75e6ef2c8421eb6838b2f/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/DefaultEncryptingOAuthDataProvider.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/DefaultEncryptingOAuthDataProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/DefaultEncryptingOAuthDataProvider.java?ref=5cf43ce7bebe7cccbbb75e6ef2c8421eb6838b2f",
                "patch": "@@ -109,7 +109,11 @@ protected void saveRefreshToken(ServerAccessToken at, RefreshToken refreshToken)\n     @Override\n     protected RefreshToken revokeRefreshToken(Client client, String refreshTokenKey) {\n         refreshTokens.remove(refreshTokenKey);\n-        return ModelEncryptionSupport.decryptRefreshToken(this, refreshTokenKey, key);\n+        try {\n+            return ModelEncryptionSupport.decryptRefreshToken(this, refreshTokenKey, key);\n+        } catch (SecurityException ex) {\n+            throw new OAuthServiceException(OAuthConstants.ACCESS_DENIED, ex);\n+        }\n     }\n \n     private void encryptAccessToken(ServerAccessToken token) {",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/5cf43ce7bebe7cccbbb75e6ef2c8421eb6838b2f/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/provider/DefaultEncryptingOAuthDataProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6559] Avoiding NPE in AbstractOAuthDataProvider.refreshAccessToken",
        "commit": "https://github.com/apache/cxf/commit/5cf43ce7bebe7cccbbb75e6ef2c8421eb6838b2f"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/64f232307444269286b7f14fc3838b07187d4c03",
        "bug_id": "cxf_92",
        "file": [
            {
                "additions": 5,
                "sha": "013ff4969120d28814690eea48f69cebe9472cb5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6ef499754117896def72972bf86ff513ce905157/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/AbstractSTSClient.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/AbstractSTSClient.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/AbstractSTSClient.java?ref=6ef499754117896def72972bf86ff513ce905157",
                "patch": "@@ -1255,6 +1255,11 @@ protected String writeKeyType(W3CDOMStreamWriter writer, String keyTypeToWrite)\n     }\n \n     protected X509Certificate getCert(Crypto crypto) throws Exception {\n+        if (crypto == null) {\n+            throw new Fault(\"No Crypto token properties are available to retrieve a certificate\", \n+                            LOG);\n+        }\n+        \n         String alias = (String)getProperty(SecurityConstants.STS_TOKEN_USERNAME);\n         if (alias == null) {\n             alias = crypto.getDefaultX509Identifier();",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/6ef499754117896def72972bf86ff513ce905157/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/AbstractSTSClient.java"
            },
            {
                "additions": 8,
                "sha": "708699f240378103b3026d5161ee6512303fd0a5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6ef499754117896def72972bf86ff513ce905157/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/TransportBindingHandler.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/TransportBindingHandler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/TransportBindingHandler.java?ref=6ef499754117896def72972bf86ff513ce905157",
                "patch": "@@ -552,6 +552,14 @@ private void handleEndorsingToken(\n             if (crypto == null) {\n                 crypto = getSignatureCrypto(wrapper);\n             }\n+            if (crypto == null) {\n+                LOG.fine(\"No signature Crypto properties are available\");\n+                Exception ex = new Exception(\"No signature Crypto properties are available\");\n+                throw new WSSecurityException(\n+                    WSSecurityException.ErrorCode.FAILURE, ex\n+                );\n+            }\n+            \n             String uname = crypto.getX509Identifier(secTok.getX509Certificate());\n             if (uname == null) {\n                 String userNameKey = SecurityConstants.SIGNATURE_USERNAME;",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/6ef499754117896def72972bf86ff513ce905157/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/TransportBindingHandler.java"
            }
        ],
        "repo": "cxf",
        "message": "Fixing two NPEs",
        "commit": "https://github.com/apache/cxf/commit/6ef499754117896def72972bf86ff513ce905157"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5d9af8f90f82f913681409d6a8ab13f2b1c12652",
        "bug_id": "cxf_93",
        "file": [
            {
                "additions": 3,
                "sha": "c2b5309bb1a75ad8ba3002d3ae6d7abb59505746",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSDefaultFaultOutInterceptor.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSDefaultFaultOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSDefaultFaultOutInterceptor.java?ref=621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf",
                "patch": "@@ -58,6 +58,9 @@ public void handleMessage(Message message) throws Fault {\n         if (r != null) {\n             JAXRSUtils.setMessageContentType(message, r);\n             message.setContent(List.class, new MessageContentsList(r));\n+            if (message.getExchange().getOutMessage() == null && message.getExchange().getOutFaultMessage() != null) {\n+                message.getExchange().setOutMessage(message.getExchange().getOutFaultMessage());\n+            }\n             new JAXRSOutInterceptor().handleMessage(message);\n             return;\n         }",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSDefaultFaultOutInterceptor.java"
            },
            {
                "additions": 7,
                "sha": "b15ad0be8175970dbc1d974067736a7c5d840a57",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/ValidationExceptionMapper.java",
                "deletions": 11,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/ValidationExceptionMapper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/ValidationExceptionMapper.java?ref=621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf",
                "patch": "@@ -29,6 +29,7 @@\n import javax.ws.rs.ext.Provider;\n \n import org.apache.cxf.common.logging.LogUtils;\n+import org.apache.cxf.jaxrs.utils.JAXRSUtils;\n import org.apache.cxf.validation.ResponseConstraintViolationException;\n \n @Provider\n@@ -37,27 +38,22 @@\n     \n     @Override\n     public Response toResponse(ValidationException exception) {\n+        Response.Status errorStatus = Response.Status.INTERNAL_SERVER_ERROR;\n         if (exception instanceof ConstraintViolationException) { \n             \n             final ConstraintViolationException constraint = (ConstraintViolationException) exception;\n-            final boolean isResponseException = constraint instanceof ResponseConstraintViolationException;\n-                        \n+            \n             for (final ConstraintViolation< ? > violation: constraint.getConstraintViolations()) {\n                 LOG.log(Level.WARNING, \n                     violation.getRootBeanClass().getSimpleName() \n                     + \".\" + violation.getPropertyPath() \n                     + \": \" + violation.getMessage());\n             }\n             \n-            if (isResponseException) {\n-                return Response.status(Response.Status.INTERNAL_SERVER_ERROR).build();\n+            if (!(constraint instanceof ResponseConstraintViolationException)) {\n+                errorStatus = Response.Status.BAD_REQUEST;\n             }\n-            \n-            return Response.status(Response.Status.BAD_REQUEST).build();\n-        } else {\n-            return Response.status(Response.Status.INTERNAL_SERVER_ERROR).build();\n-        }\n-        \n-        \n+        } \n+        return JAXRSUtils.toResponse(errorStatus);\n     }\n }",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/ValidationExceptionMapper.java"
            },
            {
                "additions": 11,
                "sha": "507f4c4aabbc5770c0aacf45fba41ba14a4d680d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/JAXRSClientServerValidationTest.java",
                "deletions": 1,
                "filename": "systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/JAXRSClientServerValidationTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/JAXRSClientServerValidationTest.java?ref=621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf",
                "patch": "@@ -21,6 +21,7 @@\n import java.util.Arrays;\n import java.util.Collections;\n \n+import javax.validation.ValidationException;\n import javax.ws.rs.core.Form;\n import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.Response;\n@@ -30,11 +31,13 @@\n import org.apache.cxf.jaxrs.JAXRSServerFactoryBean;\n import org.apache.cxf.jaxrs.lifecycle.SingletonResourceProvider;\n import org.apache.cxf.jaxrs.model.AbstractResourceInfo;\n+import org.apache.cxf.jaxrs.utils.JAXRSUtils;\n import org.apache.cxf.jaxrs.validation.JAXRSBeanValidationInInterceptor;\n import org.apache.cxf.jaxrs.validation.JAXRSBeanValidationOutInterceptor;\n import org.apache.cxf.jaxrs.validation.JAXRSParameterNameProvider;\n import org.apache.cxf.jaxrs.validation.ValidationExceptionMapper;\n import org.apache.cxf.message.Message;\n+import org.apache.cxf.systest.jaxrs.Book;\n import org.apache.cxf.testutil.common.AbstractBusTestServerBase;\n import org.apache.cxf.validation.BeanValidationInInterceptor;\n import org.apache.cxf.validation.BeanValidationProvider;\n@@ -54,7 +57,14 @@ protected void run() {\n             sf.setResourceClasses(BookStoreWithValidation.class);\n             sf.setResourceProvider(BookStoreWithValidation.class, \n                 new SingletonResourceProvider(new BookStoreWithValidation()));\n-            sf.setProvider(new ValidationExceptionMapper());\n+            sf.setProvider(new ValidationExceptionMapper() {\n+                @Override\n+                public Response toResponse(ValidationException exception) {\n+                    Response r = super.toResponse(exception);\n+                    return JAXRSUtils.toResponseBuilder(\n+                        r.getStatus()).type(\"application/xml\").entity(new Book(\"Validation\", 123L)).build();\n+                }\n+            });\n \n             sf.setAddress(\"http://localhost:\" + PORT + \"/\");\n             BeanValidationInInterceptor in = new JAXRSBeanValidationInInterceptor();",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/JAXRSClientServerValidationTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5966] Fixing NPE",
        "commit": "https://github.com/apache/cxf/commit/621e3a79914e33ebfa9f0ad1124f5c3e9ea07abf"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/45bc2219b761e671973acf297e0f37a1b8934c6c",
        "bug_id": "cxf_94",
        "file": [
            {
                "additions": 1,
                "sha": "8aecbd384ec633f04f65aa001acd8b8c69e1d73b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/de9c7ecd7a4d205aa26d893889235468797e87bb/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java?ref=de9c7ecd7a4d205aa26d893889235468797e87bb",
                "patch": "@@ -373,7 +373,7 @@ public void setProtocolHeadersInConnection(HttpURLConnection connection) throws\n     public String determineContentType() {\n         String ct = null;\n         List<Object> ctList = CastUtils.cast(headers.get(Message.CONTENT_TYPE));\n-        if (ctList != null && ctList.size() == 1) {\n+        if (ctList != null && ctList.size() == 1 && ctList.get(0) != null) {\n             ct = ctList.get(0).toString();\n         } else {\n             ct  = (String)message.get(Message.CONTENT_TYPE);",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/de9c7ecd7a4d205aa26d893889235468797e87bb/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java"
            },
            {
                "additions": 47,
                "sha": "bcb4228d56a21ff178dfcadfcfa3313679c11657",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/de9c7ecd7a4d205aa26d893889235468797e87bb/rt/transports/http/src/test/java/org/apache/cxf/transport/http/HeadersTest.java",
                "deletions": 13,
                "filename": "rt/transports/http/src/test/java/org/apache/cxf/transport/http/HeadersTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/test/java/org/apache/cxf/transport/http/HeadersTest.java?ref=de9c7ecd7a4d205aa26d893889235468797e87bb",
                "patch": "@@ -36,29 +36,17 @@\n import org.easymock.EasyMock;\n import org.easymock.IMocksControl;\n \n-import org.junit.AfterClass;\n import org.junit.Assert;\n-import org.junit.BeforeClass;\n import org.junit.Test;\n \n /**\n  *\n  */\n public class HeadersTest extends Assert {\n-    private static IMocksControl control;\n-\n-    @BeforeClass\n-    public static void setUpClass() {\n-        control = EasyMock.createNiceControl();\n-    }\n-\n-    @AfterClass\n-    public static void tearDown() {\n-        control.verify();\n-    }\n \n     @Test\n     public void setHeadersTest() throws Exception {\n+        IMocksControl control = EasyMock.createNiceControl();\n         String[] headerNames = {\"Content-Type\", \"authorization\", \"soapAction\"};\n         String[] headerValues = {\"text/xml\", \"Basic Zm9vOmJhcg==\", \"foo\"};\n         Map<String, List<String>> inmap = new HashMap<String, List<String>>();\n@@ -102,6 +90,7 @@ public void setHeadersTest() throws Exception {\n         assertEquals(\"unexpected header\", protocolHeaders.get(\"SOAPACTION\").get(0), headerValues[2]);\n         assertEquals(\"unexpected header\", protocolHeaders.get(\"soapAction\").get(0), headerValues[2]);\n \n+        control.verify();\n     }\n \n     @Test\n@@ -173,4 +162,49 @@ public void close() throws SecurityException {\n \n         Headers.logProtocolHeaders(logger, Level.INFO, headerMap, false);\n     }\n+\n+    @Test\n+    public void nullContentTypeTest() {\n+        IMocksControl control = EasyMock.createNiceControl();\n+\n+        Message message = new MessageImpl();\n+\n+        // first check - content-type==null in message, nothing specified in request\n+        // expect that determineContentType will return the default value of text/xml\n+        message.put(Message.CONTENT_TYPE, null);\n+        Headers headers = new Headers(message);\n+        assertEquals(\"Unexpected content-type determined - expected text/xml\", \"text/xml\", \n+                     headers.determineContentType());\n+\n+        // second check - null specified in request, valid content-type specified in message\n+        // expect that determineContentType returns the content-type specified in the message\n+        HttpServletRequest req = control.createMock(HttpServletRequest.class);\n+        EasyMock.expect(req.getHeaderNames()).andReturn(Collections.emptyEnumeration());\n+        EasyMock.expect(req.getContentType()).andReturn(null).anyTimes();\n+        control.replay();\n+        message = new MessageImpl();\n+        message.put(Message.CONTENT_TYPE, \"application/json\");\n+        headers = new Headers(message);\n+        headers.copyFromRequest(req);\n+        assertEquals(\"Unexpected content-type determined - expected application/json\", \"application/json\", \n+                     headers.determineContentType());\n+\n+        control.verify();\n+\n+        // third check - content-type==null in message, null in request\n+        // expect that determineContentType returns the default value of text/xml\n+        control = EasyMock.createNiceControl();\n+        req = control.createMock(HttpServletRequest.class);\n+        EasyMock.expect(req.getHeaderNames()).andReturn(Collections.emptyEnumeration());\n+        EasyMock.expect(req.getContentType()).andReturn(null).anyTimes();\n+        control.replay();\n+        message = new MessageImpl();\n+        message.put(Message.CONTENT_TYPE, null);\n+        headers = new Headers(message);\n+        headers.copyFromRequest(req);\n+        assertEquals(\"Unexpected content-type determined - expected text/xml\", \"text/xml\", \n+                     headers.determineContentType());\n+\n+        control.verify();\n+    }\n }",
                "changes": 60,
                "blob_url": "https://github.com/apache/cxf/blob/de9c7ecd7a4d205aa26d893889235468797e87bb/rt/transports/http/src/test/java/org/apache/cxf/transport/http/HeadersTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7174] Avoid NPE when content-type not set in http request, patch from Andy McCright applied, This closes #213",
        "commit": "https://github.com/apache/cxf/commit/de9c7ecd7a4d205aa26d893889235468797e87bb"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/88a7cd850f0471d6e51f9045bf01f775a905cbf2",
        "bug_id": "cxf_95",
        "file": [
            {
                "additions": 3,
                "sha": "df0e23a5a34576a72c5fab183c0a17ceb776e53b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/da963ab6e038f28d5d8bdfcf8371774a4365f904/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPServerEngine.java",
                "deletions": 1,
                "filename": "rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPServerEngine.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPServerEngine.java?ref=da963ab6e038f28d5d8bdfcf8371774a4365f904",
                "patch": "@@ -385,6 +385,9 @@ public synchronized void addServant(URL url, JettyHTTPHandler handler) {\n         if (shouldCheckUrl(handler.getBus())) {\n             checkRegistedContext(url);\n         }\n+        if (contexts == null) {\n+            contexts = new ContextHandlerCollection();\n+        }\n         \n         SecurityHandler securityHandler = null;\n         if (server == null) {\n@@ -454,7 +457,6 @@ public synchronized void addServant(URL url, JettyHTTPHandler handler) {\n                     }\n                 }\n             }\n-            contexts = new ContextHandlerCollection();\n             /*\n              * handlerCollection may be null here if is only one handler to deal with.\n              * Which in turn implies that there can't be a 'defaultHander' to deal with.",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/da963ab6e038f28d5d8bdfcf8371774a4365f904/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPServerEngine.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6402] preventing NPE in JettyHTTPServerEngine",
        "commit": "https://github.com/apache/cxf/commit/da963ab6e038f28d5d8bdfcf8371774a4365f904"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/276343f2bbe1daecefcc1c18d5cb5e48b75a90d4",
        "bug_id": "cxf_96",
        "file": [
            {
                "additions": 8,
                "sha": "7155941d6ea5cb5313d9e691bdebcf9fafc5588c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d86d201d00092876a06176638d520fce94e58d89/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ThreadLocalClientState.java",
                "deletions": 1,
                "filename": "rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ThreadLocalClientState.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ThreadLocalClientState.java?ref=d86d201d00092876a06176638d520fce94e58d89",
                "patch": "@@ -120,6 +120,7 @@ protected ClientState getState() {\n             cs = new LocalClientState(initialState);\n             state.put(Thread.currentThread(), cs);\n             if (timeToKeepState > 0) {\n+                prepareCheckpointMap();\n                 long currentTime = System.currentTimeMillis();\n                 checkpointMap.put(Thread.currentThread(), currentTime);\n                 new CleanupThread(Thread.currentThread(), currentTime).start();\n@@ -131,10 +132,16 @@ protected ClientState getState() {\n     public void setTimeToKeepState(long timeToKeepState) {\n         this.timeToKeepState = timeToKeepState;\n         if (timeToKeepState > 0) {\n-            checkpointMap = new ConcurrentHashMap<Thread, Long>();\n+            prepareCheckpointMap();\n         }\n     }\n \n+    private void prepareCheckpointMap() {\n+        if (checkpointMap == null) {\n+            checkpointMap = new ConcurrentHashMap<Thread, Long>();\n+        }\n+    }\n+    \n     private class CleanupThread extends Thread {\n         private Thread thread;\n         private long originalTime;",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/d86d201d00092876a06176638d520fce94e58d89/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ThreadLocalClientState.java"
            }
        ],
        "repo": "cxf",
        "message": "Preventing possible ThreadLocalClientState NPE",
        "commit": "https://github.com/apache/cxf/commit/d86d201d00092876a06176638d520fce94e58d89"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1feb5a7811be010c92ae73477d35f1830212cff7",
        "bug_id": "cxf_97",
        "file": [
            {
                "additions": 3,
                "sha": "2b3d0855a845cfc46bf82dbdb4e15c160c6ec1aa",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/97dab3da95f4d833888b30ceb553af6436116e9d/rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/SwaggerFeature.java",
                "deletions": 2,
                "filename": "rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/SwaggerFeature.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/SwaggerFeature.java?ref=97dab3da95f4d833888b30ceb553af6436116e9d",
                "patch": "@@ -26,7 +26,7 @@\n import org.apache.cxf.feature.AbstractFeature;\n import org.apache.cxf.jaxrs.JAXRSServiceFactoryBean;\n import org.apache.cxf.jaxrs.model.AbstractResourceInfo;\n-import org.apache.cxf.jaxrs.provider.ProviderFactory;\n+import org.apache.cxf.jaxrs.provider.ServerProviderFactory;\n \n public class SwaggerFeature extends AbstractFeature {\n     \n@@ -50,7 +50,8 @@ public void initialize(Server server, Bus bus) {\n         List<Object> providers = new ArrayList<Object>();\n         providers.add(new com.wordnik.swagger.jaxrs.listing.ResourceListingProvider());\n         providers.add(new com.wordnik.swagger.jaxrs.listing.ApiDeclarationProvider());\n-        ((ProviderFactory)bus.getProperty(ProviderFactory.class.getName())).setUserProviders(providers);\n+        ((ServerProviderFactory)server.getEndpoint().get(\n+                ServerProviderFactory.class.getName())).setUserProviders(providers);\n         com.wordnik.swagger.jaxrs.config.BeanConfig beanConfig = new com.wordnik.swagger.jaxrs.config.BeanConfig();\n         beanConfig.setResourcePackage(getResourcePackage());\n         beanConfig.setVersion(getVersion());",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/97dab3da95f4d833888b30ceb553af6436116e9d/rt/rs/description/src/main/java/org/apache/cxf/jaxrs/swagger/SwaggerFeature.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5856]NPE in SwaggerFeature",
        "commit": "https://github.com/apache/cxf/commit/97dab3da95f4d833888b30ceb553af6436116e9d"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5885d6be3fdb3b9b38a4d9d753e927424f20096c",
        "bug_id": "cxf_98",
        "file": [
            {
                "additions": 1,
                "sha": "51ff48dec7f8035b5c358b33c651a28d8d5c71fb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/f75fa599c12005fd8541dbfe783882a334366307/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ResponseImpl.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ResponseImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ResponseImpl.java?ref=f75fa599c12005fd8541dbfe783882a334366307",
                "patch": "@@ -385,7 +385,7 @@ public Link getLink(String relation) {\n         } \n         \n         throw new IllegalStateException(\"The entity is not backed by an input stream, entity class is : \"\n-            + entity != null ? entity.getClass().getName() : null);\n+            + (entity != null ? entity.getClass().getName() : null));\n         \n     }\n     ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/f75fa599c12005fd8541dbfe783882a334366307/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ResponseImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5795] Prevening misleading NPE",
        "commit": "https://github.com/apache/cxf/commit/f75fa599c12005fd8541dbfe783882a334366307"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9df377971980a0224f9a03f605c48f075d720446",
        "bug_id": "cxf_99",
        "file": [
            {
                "additions": 8,
                "sha": "3cb4f3a70c12e5a552fe1c2c8013a2c325b61e7a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9dc7a39b4142e504e1f9df00b396f03ec893e277/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/STSUtils.java",
                "deletions": 8,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/STSUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/STSUtils.java?ref=9dc7a39b4142e504e1f9df00b396f03ec893e277",
                "patch": "@@ -118,23 +118,23 @@ public static STSClient getClientWithIssuer(Message message, String type, Elemen\n             }\n         }\n         \n+        boolean preferWSMex = \n+            SecurityUtils.getSecurityPropertyBoolean(SecurityConstants.PREFER_WSMEX_OVER_STS_CLIENT_CONFIG,\n+                                                     message, \n+                                                     false);\n         \n         // Find out if we have an EPR to get the STS Address (possibly via WS-MEX)\n-        if (issuer != null) {\n+        // Only parse the EPR if we really have to\n+        if (issuer != null\n+            && (preferWSMex || client.getLocation() == null && client.getWsdlLocation() == null)) {\n             EndpointReferenceType epr = null;\n             try {\n                 epr = VersionTransformer.parseEndpointReference(issuer);\n             } catch (JAXBException e) {\n                 throw new IllegalArgumentException(e);\n             }\n             \n-            String mexLocation = findMEXLocation(epr);\n-            // Configure via WS-MEX\n-            \n-            if (mexLocation != null\n-                && SecurityUtils.getSecurityPropertyBoolean(SecurityConstants.PREFER_WSMEX_OVER_STS_CLIENT_CONFIG,\n-                                                     message, \n-                                                     false)) {\n+            if (preferWSMex && findMEXLocation(epr) != null) {\n                 // WS-MEX call. So now either get the WS-MEX specific STSClient or else create one\n                 STSClient wsMexClient = \n                     (STSClient)SecurityUtils.getSecurityPropertyValue(SecurityConstants.STS_CLIENT + \".wsmex\", ",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/9dc7a39b4142e504e1f9df00b396f03ec893e277/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/STSUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6600] - Sudden repeating NPE on token request by STSClient",
        "commit": "https://github.com/apache/cxf/commit/9dc7a39b4142e504e1f9df00b396f03ec893e277"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/c9ec28df42e815b0771964fdae96b7ecb2e2281b",
        "bug_id": "cxf_100",
        "file": [
            {
                "additions": 42,
                "sha": "bd926fd3df94a08b47740040d3a2dad1c31628ff",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9b52e410b42e45ad240f71080dbd671e18843b38/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/tl/ThreadLocalMessageContext.java",
                "deletions": 17,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/tl/ThreadLocalMessageContext.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/tl/ThreadLocalMessageContext.java?ref=9b52e410b42e45ad240f71080dbd671e18843b38",
                "patch": "@@ -30,70 +30,95 @@\n import javax.ws.rs.ext.Providers;\n \n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.apache.cxf.jaxrs.ext.MessageContextImpl;\n+import org.apache.cxf.jaxrs.utils.JAXRSUtils;\n+import org.apache.cxf.message.Message;\n \n public class ThreadLocalMessageContext extends AbstractThreadLocalProxy<MessageContext> \n     implements MessageContext {\n \n     public Object get(Object key) {\n-        return get() != null ? get().get(key) : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.get(key) : null;\n     }\n     \n     public <T> T getContext(Class<T> contextClass) {\n-        return get() != null ? get().getContext(contextClass) : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getContext(contextClass) : null;\n     }\n \n     public HttpHeaders getHttpHeaders() {\n-        return get() != null ? get().getHttpHeaders() : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getHttpHeaders() : null;\n     }\n \n     public HttpServletRequest getHttpServletRequest() {\n-        return get() != null ? get().getHttpServletRequest() : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getHttpServletRequest() : null;\n     }\n \n     public HttpServletResponse getHttpServletResponse() {\n-        return get() != null ? get().getHttpServletResponse() : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getHttpServletResponse() : null;\n     }\n \n     public Providers getProviders() {\n-        return get() != null ? get().getProviders() : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getProviders() : null;\n     }\n \n     public SecurityContext getSecurityContext() {\n-        return get() != null ? get().getSecurityContext() : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getSecurityContext() : null;\n     }\n \n     public ServletConfig getServletConfig() {\n-        return get() != null ? get().getServletConfig() : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getServletConfig() : null;\n     }\n \n     public ServletContext getServletContext() {\n-        return get() != null ? get().getServletContext() : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getServletContext() : null;\n     }\n \n     public UriInfo getUriInfo() {\n-        return get() != null ? get().getUriInfo() : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getUriInfo() : null;\n     }\n \n     public Request getRequest() {\n-        return get() != null ? get().getRequest() : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getRequest() : null;\n     }\n \n     public void put(Object key, Object value) {\n-        if (get() != null) {\n-            get().put(key, value);\n+        MessageContext mc = getCurrentMessageContext();\n+        if (mc != null) {\n+            mc.put(key, value);\n         }\n     }\n \n     public <T, E> T getResolver(Class<T> resolverClass, Class<E> resolveClazz) {\n-        return get() != null ? get().getResolver(resolverClass, resolveClazz) : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getResolver(resolverClass, resolveClazz) : null;\n     }\n \n     public <T> T getContent(Class<T> format) {\n-        return get() != null ? get().getContent(format) : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getContent(format) : null;\n     }\n \n     public Object getContextualProperty(Object key) {\n-        return get() != null ? get().getContextualProperty(key) : null;\n+        MessageContext mc = getCurrentMessageContext();\n+        return mc != null ? mc.getContextualProperty(key) : null;\n+    }\n+    private MessageContext getCurrentMessageContext() {\n+        MessageContext mc = get();\n+        return mc != null ? mc : getMessageContextImpl();\n+    }\n+    private MessageContext getMessageContextImpl() {\n+        Message m = JAXRSUtils.getCurrentMessage();\n+        return m != null ? new MessageContextImpl(m) : null;\n     }\n-\n }",
                "changes": 59,
                "blob_url": "https://github.com/apache/cxf/blob/9b52e410b42e45ad240f71080dbd671e18843b38/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/tl/ThreadLocalMessageContext.java"
            },
            {
                "additions": 20,
                "sha": "bf195852795fa175a1405331b726d22075011b7a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9b52e410b42e45ad240f71080dbd671e18843b38/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/tl/ThreadLocalProviders.java",
                "deletions": 4,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/tl/ThreadLocalProviders.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/tl/ThreadLocalProviders.java?ref=9b52e410b42e45ad240f71080dbd671e18843b38",
                "patch": "@@ -29,29 +29,45 @@\n import javax.ws.rs.ext.MessageBodyWriter;\n import javax.ws.rs.ext.Providers;\n \n+import org.apache.cxf.jaxrs.impl.ProvidersImpl;\n+import org.apache.cxf.jaxrs.utils.JAXRSUtils;\n+import org.apache.cxf.message.Message;\n+\n public class ThreadLocalProviders extends AbstractThreadLocalProxy<Providers>\n        implements Providers {\n \n     public <T> MessageBodyReader<T> getMessageBodyReader(Class<T> type, \n                                                          Type genericType, \n                                                          Annotation[] annotations,\n                                                          MediaType mediaType) {\n-        return get().getMessageBodyReader(type, genericType, annotations, mediaType);\n+        Providers p = getCurrentProviders();\n+        return p != null ? p.getMessageBodyReader(type, genericType, annotations, mediaType) : null;\n     }\n \n     public <T> MessageBodyWriter<T> getMessageBodyWriter(Class<T> type, \n                                                          Type genericType, \n                                                          Annotation[] annotations,\n                                                          MediaType mediaType) {\n-        return get().getMessageBodyWriter(type, genericType, annotations, mediaType);\n+        Providers p = getCurrentProviders();\n+        return p != null ? p.getMessageBodyWriter(type, genericType, annotations, mediaType) : null;\n     }\n \n     public <T> ContextResolver<T> getContextResolver(Class<T> contextType, MediaType mediaType) {\n-        return get().getContextResolver(contextType, mediaType);\n+        Providers p = getCurrentProviders();\n+        return p != null ? p.getContextResolver(contextType, mediaType) : null;\n     }\n \n     public <T extends Throwable> ExceptionMapper<T> getExceptionMapper(Class<T> type) {\n-        return get().getExceptionMapper(type);\n+        Providers p = getCurrentProviders();\n+        return p != null ? p.getExceptionMapper(type) : null;\n     }\n \n+    private Providers getCurrentProviders() {\n+        Providers p = get();\n+        return p != null ? p : getProvidersImpl();\n+    }\n+    private Providers getProvidersImpl() {\n+        Message m = JAXRSUtils.getCurrentMessage();\n+        return m != null ? new ProvidersImpl(JAXRSUtils.getContextMessage(m)) : null;\n+    }\n }",
                "changes": 24,
                "blob_url": "https://github.com/apache/cxf/blob/9b52e410b42e45ad240f71080dbd671e18843b38/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/tl/ThreadLocalProviders.java"
            },
            {
                "additions": 8,
                "sha": "d4d64cd079de9b482f385c2b3fbf0be8e048e411",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9b52e410b42e45ad240f71080dbd671e18843b38/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java?ref=9b52e410b42e45ad240f71080dbd671e18843b38",
                "patch": "@@ -1062,12 +1062,18 @@ public static Object createBeanParamValue(Message m, Class<?> clazz, OperationRe\n         return instance;\n     }\n     \n-    public static <T> T createContextValue(Message m, Type genericType, Class<T> clazz) {\n- \n+    public static Message getContextMessage(Message m) {\n+        \n         Message contextMessage = m.getExchange() != null ? m.getExchange().getInMessage() : m;\n         if (contextMessage == null && !PropertyUtils.isTrue(m.get(Message.INBOUND_MESSAGE))) {\n             contextMessage = m;\n         }\n+        return contextMessage;\n+    }\n+    \n+    public static <T> T createContextValue(Message m, Type genericType, Class<T> clazz) {\n+ \n+        Message contextMessage = getContextMessage(m);\n         Object o = null;\n         if (UriInfo.class.isAssignableFrom(clazz)) {\n             o = createUriInfo(contextMessage);",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/9b52e410b42e45ad240f71080dbd671e18843b38/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6593] Protecting against NPE if TL contexts are refreshed",
        "commit": "https://github.com/apache/cxf/commit/9b52e410b42e45ad240f71080dbd671e18843b38"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/514f341958701f973e7a08f4a1791ef698d85242",
        "bug_id": "cxf_101",
        "file": [
            {
                "additions": 10,
                "sha": "52ad836e40b29b89d585e3f69799962ab3d6c254",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/74ab648ebd678e5d23365507a78f1429540f63fd/core/src/main/java/org/apache/cxf/helpers/JavaUtils.java",
                "deletions": 0,
                "filename": "core/src/main/java/org/apache/cxf/helpers/JavaUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/helpers/JavaUtils.java?ref=74ab648ebd678e5d23365507a78f1429540f63fd",
                "patch": "@@ -46,6 +46,7 @@\n         \"void\", \"volatile\", \"while\"\n     ));\n \n+    private static boolean isJava11Compatible;\n     private static boolean isJava9Compatible;\n     private static boolean isJava8Before161;\n \n@@ -66,6 +67,7 @@\n         }\n \n         setJava9Compatible(Integer.valueOf(version) >= 9);\n+        setJava11Compatible(Integer.valueOf(version) >= 11);\n     }\n \n     private JavaUtils() {\n@@ -91,10 +93,18 @@ public static String makeNonJavaKeyword(String keyword) {\n     public static boolean isJava9Compatible() {\n         return isJava9Compatible;\n     }\n+    \n+    public static boolean isJava11Compatible() {\n+        return isJava11Compatible;\n+    }\n \n     private static void setJava9Compatible(boolean java9Compatible) {\n         JavaUtils.isJava9Compatible = java9Compatible;\n     }\n+    \n+    private static void setJava11Compatible(boolean java11Compatible) {\n+        JavaUtils.isJava11Compatible = java11Compatible;\n+    }\n \n     public static boolean isJava8Before161() {\n         return isJava8Before161;",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/74ab648ebd678e5d23365507a78f1429540f63fd/core/src/main/java/org/apache/cxf/helpers/JavaUtils.java"
            },
            {
                "additions": 61,
                "sha": "84b7f023d8bfe09a97fc49cf9e795f91aa47a84d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/74ab648ebd678e5d23365507a78f1429540f63fd/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/Java2WSMojo.java",
                "deletions": 14,
                "filename": "maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/Java2WSMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/Java2WSMojo.java?ref=74ab648ebd678e5d23365507a78f1429540f63fd",
                "patch": "@@ -209,19 +209,41 @@\n      */\n     private String additionalJvmArgs;\n \n+    /**\n+     * Determines how the classpath is applied to the executed command,\n+     * either as a command line argument, or as an environment variable\n+     * for the executing process. Only applicable when fork is set to <code>true</code>\n+     * (which is always the case for JDK 9+).\n+     * <p>\n+     * Primarily useful on Windows because of length limitations for command arguments,\n+     * which is why the default is <code>true</code> in that case.\n+     *\n+     * @parameter default-value=\"false\"\n+     * @since 3.3\n+     */\n+    private Boolean classpathAsEnvVar;\n+\n     public void execute() throws MojoExecutionException {\n-        if (JavaUtils.isJava9Compatible()) {\n+        boolean requiresModules = JavaUtils.isJava9Compatible();\n+        if (requiresModules) {\n+            // Since JEP 261 (\"Jigsaw\"), access to some packages must be granted\n             fork = true;\n+            boolean skipXmlWsModule = JavaUtils.isJava11Compatible(); //\n             additionalJvmArgs = \"--add-exports=jdk.xml.dom/org.w3c.dom.html=ALL-UNNAMED \"\n                     + \"--add-exports=java.xml/com.sun.org.apache.xerces.internal.impl.xs=ALL-UNNAMED \"\n-                    + \"--add-opens java.xml.ws/javax.xml.ws.wsaddressing=ALL-UNNAMED \"\n+                    + (skipXmlWsModule ? \"\" : \"--add-opens java.xml.ws/javax.xml.ws.wsaddressing=ALL-UNNAMED \")\n                     + \"--add-opens java.base/java.security=ALL-UNNAMED \"\n                     + \"--add-opens java.base/java.net=ALL-UNNAMED \"\n                     + \"--add-opens java.base/java.lang=ALL-UNNAMED \"\n                     + \"--add-opens java.base/java.util=ALL-UNNAMED \"\n                     + \"--add-opens java.base/java.util.concurrent=ALL-UNNAMED \" \n                     + (additionalJvmArgs == null ? \"\" : additionalJvmArgs); \n         }\n+        if (fork && SystemUtils.IS_OS_WINDOWS) {\n+            // Windows does not allow for very long command lines,\n+            // so by default CLASSPATH environment variable is used.\n+            classpathAsEnvVar = true;\n+        }\n         System.setProperty(\"org.apache.cxf.JDKBugHacks.defaultUsesCaches\", \"true\");\n         if (skip) {\n             getLog().info(\"Skipping Java2WS execution\");\n@@ -247,8 +269,8 @@ public void execute() throws MojoExecutionException {\n                 cp = StringUtils.join(artifactsPath.iterator(), File.pathSeparator) + File.pathSeparator + cp;\n             }\n \n-            List<String> args = initArgs(cp);\n-            processJavaClass(args);\n+            List<String> args = initArgs(classpathAsEnvVar ? null : cp);\n+            processJavaClass(args, classpathAsEnvVar ? cp : null);\n         } finally {\n             classLoaderSwitcher.restoreClassLoader();\n         }\n@@ -268,9 +290,11 @@ public void execute() throws MojoExecutionException {\n             args.add(\"-DexitOnFinish=true\");\n         }\n \n-        // classpath arg\n-        args.add(\"-cp\");\n-        args.add(cp);\n+        if (!StringUtils.isEmpty(cp)) {\n+            // classpath arg\n+            args.add(\"-cp\");\n+            args.add(cp);\n+        }\n \n         if (fork) {\n             args.add(JavaToWS.class.getCanonicalName());\n@@ -384,7 +408,7 @@ public void execute() throws MojoExecutionException {\n         return args;\n     }\n \n-    private void processJavaClass(List<String> args) throws MojoExecutionException {\n+    private void processJavaClass(List<String> args, String cp) throws MojoExecutionException {\n         if (!fork) {\n             try {\n                 CommandInterfaceUtils.commandCommonMain();\n@@ -416,22 +440,37 @@ private void processJavaClass(List<String> args) throws MojoExecutionException {\n             }\n \n             cmd.addArguments(args.toArray(new String[0]));\n+            if (classpathAsEnvVar && !StringUtils.isEmpty(cp)) {\n+                cmd.addEnvironment(\"CLASSPATH\", cp);\n+            }\n \n             CommandLineUtils.StringStreamConsumer err = new CommandLineUtils.StringStreamConsumer();\n             CommandLineUtils.StringStreamConsumer out = new CommandLineUtils.StringStreamConsumer();\n \n+            String cmdLine = CommandLineUtils.toString(cmd.getCommandline());\n+\n             int exitCode;\n             try {\n                 exitCode = CommandLineUtils.executeCommandLine(cmd, out, err);\n             } catch (CommandLineException e) {\n                 getLog().debug(e);\n-                throw new MojoExecutionException(e.getMessage(), e);\n+                StringBuilder msg = new StringBuilder(e.getMessage());\n+                if (!(fork && classpathAsEnvVar)) {\n+                    msg.append('\\n');\n+                    msg.append(\"Try to run this goal using <fork>true</fork> and \"\n+                            + \"<classpathAsEnvVar>true</classpathAsEnvVar>.\");\n+                }\n+                msg.append('\\n');\n+                msg.append(\"Command line was: \").append(cmdLine).append('\\n');\n+                if (classpathAsEnvVar && !StringUtils.isEmpty(cp)) {\n+                    msg.append(\"   CLASSPATH env: \").append(cp).append('\\n');\n+                }\n+                msg.append('\\n');\n+                throw new MojoExecutionException(msg.toString(), e);\n             }\n \n             String output = StringUtils.isEmpty(out.getOutput()) ? null : '\\n' + out.getOutput().trim();\n \n-            String cmdLine = CommandLineUtils.toString(cmd.getCommandline());\n-\n             if (exitCode != 0) {\n                 if (StringUtils.isNotEmpty(output)) {\n                     getLog().info(output);\n@@ -443,7 +482,11 @@ private void processJavaClass(List<String> args) throws MojoExecutionException {\n                     msg.append(\" - \").append(err.getOutput());\n                 }\n                 msg.append('\\n');\n-                msg.append(\"Command line was: \").append(cmdLine).append('\\n').append('\\n');\n+                msg.append(\"Command line was: \").append(cmdLine).append('\\n');\n+                if (classpathAsEnvVar && !StringUtils.isEmpty(cp)) {\n+                    msg.append(\"   CLASSPATH env: \").append(cp).append('\\n');\n+                }\n+                msg.append('\\n');\n \n                 throw new MojoExecutionException(msg.toString());\n             }\n@@ -452,7 +495,11 @@ private void processJavaClass(List<String> args) throws MojoExecutionException {\n                 StringBuilder msg = new StringBuilder();\n                 msg.append(err.getOutput());\n                 msg.append('\\n');\n-                msg.append(\"Command line was: \").append(cmdLine).append('\\n').append('\\n');\n+                msg.append(\"Command line was: \").append(cmdLine).append('\\n');\n+                if (classpathAsEnvVar && !StringUtils.isEmpty(cp)) {\n+                    msg.append(\"   CLASSPATH env: \").append(cp).append('\\n');\n+                }\n+                msg.append('\\n');\n                 throw new MojoExecutionException(msg.toString());\n             }\n         }\n@@ -465,7 +512,7 @@ private void processJavaClass(List<String> args) throws MojoExecutionException {\n                 \n                 boolean hasWsdlAttached = false;\n                 for (Artifact a : project.getAttachedArtifacts()) {\n-                    if (\"wsdl\".equals(a.getType()) && classifier.equals(a.getClassifier())) {\n+                    if (\"wsdl\".equals(a.getType()) && classifier != null && classifier.equals(a.getClassifier())) {\n                         hasWsdlAttached = true;\n                     }\n                 }",
                "changes": 75,
                "blob_url": "https://github.com/apache/cxf/blob/74ab648ebd678e5d23365507a78f1429540f63fd/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/Java2WSMojo.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-7830] Support for running java2ws-plugin using JDK9+ on Windows.\n\nFix for \"CreateProcess error=206, The filename or extension is too long\":\n - Added parameter `classpathAsEnvVar`, which is `false` by default,\n   unless plugin is running in a Windows OS using JDK 9+, in which\n   case it is activated automatically. This parameter controls if\n   the CLASSPATH is applied via environment variable or as an\n   argument to the command line that executes the java2ws tool.\n\nCleaning up the JDK9+ JVM arguments code:\n - Single block for JDK 9, 10, 11 and up.\n - For JDK 11 and up the java.xml.ws module is skipped since\n   it was moved out of the JDK.\n\nMore verbose error reporting:\n - If command fails to execute, the reported message\n   includes information about the command line, and\n   the CLASSPATH environment variable if defined.\n\nOther fixes:\n - Fixed NPE when classifier is undefined.",
        "commit": "https://github.com/apache/cxf/commit/74ab648ebd678e5d23365507a78f1429540f63fd"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/55a4b7bf99c22a0ccb3b8f3c321ecad187581061",
        "bug_id": "cxf_102",
        "file": [
            {
                "additions": 9,
                "sha": "4932c2c10212985f4bbe9c4f9b4fff6d1933fc06",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0bbd3da675bd37691bb5bb247fa9ec186dcec45c/rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/SecureConversationTokenInterceptorProvider.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/SecureConversationTokenInterceptorProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/SecureConversationTokenInterceptorProvider.java?ref=0bbd3da675bd37691bb5bb247fa9ec186dcec45c",
                "patch": "@@ -21,9 +21,12 @@\n \n import java.util.Arrays;\n import java.util.Map;\n+import java.util.logging.Logger;\n \n import org.apache.cxf.binding.soap.Soap11;\n import org.apache.cxf.binding.soap.SoapMessage;\n+import org.apache.cxf.common.logging.LogUtils;\n+import org.apache.cxf.interceptor.Fault;\n import org.apache.cxf.message.Message;\n import org.apache.cxf.ws.policy.AbstractPolicyInterceptorProvider;\n import org.apache.cxf.ws.policy.AssertionInfoMap;\n@@ -45,6 +48,8 @@\n public class SecureConversationTokenInterceptorProvider extends AbstractPolicyInterceptorProvider {\n \n     private static final long serialVersionUID = 8739057200687855383L;\n+    private static final Logger LOG = \n+        LogUtils.getL7dLogger(SecureConversationTokenInterceptorProvider.class);\n \n \n     public SecureConversationTokenInterceptorProvider() {\n@@ -63,6 +68,10 @@ static String setupClient(STSClient client,\n                             AssertionInfoMap aim,\n                             SecureConversationToken itok,\n                             boolean endorse) {\n+        if (itok.getBootstrapPolicy() == null || itok.getBootstrapPolicy().getPolicy() == null) {\n+            throw new Fault(\"The SecureConversationToken does not define a BootstrapPolicy\", LOG);\n+        }\n+        \n         client.setTrust(NegotiationUtils.getTrust10(aim));\n         client.setTrust(NegotiationUtils.getTrust13(aim));\n         Policy pol = itok.getBootstrapPolicy().getPolicy();",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/0bbd3da675bd37691bb5bb247fa9ec186dcec45c/rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/SecureConversationTokenInterceptorProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid NPE in SecureConversation code",
        "commit": "https://github.com/apache/cxf/commit/0bbd3da675bd37691bb5bb247fa9ec186dcec45c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9f32e2bf5bc3ed9b896e0e81f993e76a445cb609",
        "bug_id": "cxf_103",
        "file": [
            {
                "additions": 13,
                "sha": "a5b94bf15d1ad9dd01889200ce550a9609efe040",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c7a8af405f4766ada611a39e0675c39a6322e175/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduitFactory.java",
                "deletions": 9,
                "filename": "rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduitFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduitFactory.java?ref=c7a8af405f4766ada611a39e0675c39a6322e175",
                "patch": "@@ -282,15 +282,19 @@ private static void shutdown(CloseableHttpAsyncClient client) {\n \n \n     private void addListener(Bus b) {\n-        b.getExtension(BusLifeCycleManager.class).registerLifeCycleListener(new BusLifeCycleListener() {\n-            public void initComplete() {\n-            }\n-            public void preShutdown() {\n-                shutdown();\n-            }\n-            public void postShutdown() {\n-            }\n-        });\n+        BusLifeCycleManager manager = b.getExtension(BusLifeCycleManager.class);\n+        if (manager != null) {\n+            \n+            manager.registerLifeCycleListener(new BusLifeCycleListener() {\n+                public void initComplete() {\n+                }\n+                public void preShutdown() {\n+                    shutdown();\n+                }\n+                public void postShutdown() {\n+                }\n+            });\n+        }\n     }\n \n     public synchronized void setupNIOClient(HTTPClientPolicy clientPolicy) throws IOReactorException {",
                "changes": 22,
                "blob_url": "https://github.com/apache/cxf/blob/c7a8af405f4766ada611a39e0675c39a6322e175/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduitFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoding a possible NPE in the async conduit factory",
        "commit": "https://github.com/apache/cxf/commit/c7a8af405f4766ada611a39e0675c39a6322e175"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7845fa85e7640bad0e7bd42d1a2ac77873def0ac",
        "bug_id": "cxf_104",
        "file": [
            {
                "additions": 5,
                "sha": "775170cfcad6ae530fa9ce995613865948357da2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8f12a150b8902c59a96d7cde90ac833628aa0dd8/core/src/main/java/org/apache/cxf/endpoint/ClientImpl.java",
                "deletions": 3,
                "filename": "core/src/main/java/org/apache/cxf/endpoint/ClientImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/endpoint/ClientImpl.java?ref=8f12a150b8902c59a96d7cde90ac833628aa0dd8",
                "patch": "@@ -325,7 +325,9 @@ public void setThreadLocalRequestContext(boolean b) {\n         try {\n             return invoke(oi, params, context, exchange);\n         } finally {\n-            responseContext.put(Thread.currentThread(), resp);\n+            if (responseContext != null) {\n+                responseContext.put(Thread.currentThread(), resp);\n+            }\n         }\n     }\n     public Object[] invoke(BindingOperationInfo oi,\n@@ -336,7 +338,7 @@ public void setThreadLocalRequestContext(boolean b) {\n         } finally {\n             if (context != null) {\n                 Map<String, Object> resp = CastUtils.cast((Map<?, ?>)context.get(RESPONSE_CONTEXT));\n-                if (resp != null) {\n+                if (resp != null && responseContext != null) {\n                     responseContext.put(Thread.currentThread(), resp);\n                 }\n             }\n@@ -811,7 +813,7 @@ public void onMessage(Message message) {\n                                                                 .getOutMessage()\n                                                                 .get(Message.INVOCATION_CONTEXT));\n                 resCtx = CastUtils.cast((Map<?, ?>)resCtx.get(RESPONSE_CONTEXT));\n-                if (resCtx != null) {\n+                if (resCtx != null && responseContext != null) {\n                     responseContext.put(Thread.currentThread(), resCtx);\n                 }\n                 try {",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/8f12a150b8902c59a96d7cde90ac833628aa0dd8/core/src/main/java/org/apache/cxf/endpoint/ClientImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6092] Add a couple NPE guards",
        "commit": "https://github.com/apache/cxf/commit/8f12a150b8902c59a96d7cde90ac833628aa0dd8"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5cf72fee49149c746897611aa63134db62181778",
        "bug_id": "cxf_105",
        "file": [
            {
                "additions": 2,
                "sha": "6c8dacdf71c66e78bcdd64a6a9ef0b91d4174804",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/cdc55cd46959d896a2e0e471a03a4733b1662394/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java?ref=cdc55cd46959d896a2e0e471a03a4733b1662394",
                "patch": "@@ -277,7 +277,8 @@ void logProtocolHeaders(Level level) {\n         for (String header : headers.keySet()) {\n             List<?> headerList = headers.get(header);\n             for (Object value : headerList) {\n-                LOG.log(level, header + \": \" + value.toString());\n+                LOG.log(level, header + \": \" \n+                    + (value == null ? \"<null>\" : value.toString()));\n             }\n         }\n     }",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/cdc55cd46959d896a2e0e471a03a4733b1662394/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6058] NPE guard in Header logging",
        "commit": "https://github.com/apache/cxf/commit/cdc55cd46959d896a2e0e471a03a4733b1662394"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/30529297e058283728aabf4899606a0847326c54",
        "bug_id": "cxf_106",
        "file": [
            {
                "additions": 1,
                "sha": "ef70a3986070f790f798af465c8f8fea2fc0f2d5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/1fa008dd160dde9c4d614700556ba9f0d8f17fdd/rt/rs/security/oauth-parent/oauth2-jwt/src/test/java/org/apache/cxf/rs/security/oauth2/jwe/JweCompactReaderWriterTest.java",
                "deletions": 1,
                "filename": "rt/rs/security/oauth-parent/oauth2-jwt/src/test/java/org/apache/cxf/rs/security/oauth2/jwe/JweCompactReaderWriterTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2-jwt/src/test/java/org/apache/cxf/rs/security/oauth2/jwe/JweCompactReaderWriterTest.java?ref=1fa008dd160dde9c4d614700556ba9f0d8f17fdd",
                "patch": "@@ -175,7 +175,7 @@ private String encryptContent(String content, boolean createIfException) throws\n         }\n         JweEncryptionProvider encryptor = new WrappedKeyJweEncryption(\n                                                         new JweHeaders(Algorithm.RSA_OAEP.getJwtName(), jwtKeyName),  \n-                                                        key.getEncoded(), \n+                                                        key == null ? null : key.getEncoded(), \n                                                         INIT_VECTOR_A1,\n                                                         new RSAOaepKeyEncryptionAlgorithm(publicKey, \n                                                             Algorithm.RSA_OAEP.getJwtName()));",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/1fa008dd160dde9c4d614700556ba9f0d8f17fdd/rt/rs/security/oauth-parent/oauth2-jwt/src/test/java/org/apache/cxf/rs/security/oauth2/jwe/JweCompactReaderWriterTest.java"
            }
        ],
        "repo": "cxf",
        "message": "Preventing NPE in a JWE test",
        "commit": "https://github.com/apache/cxf/commit/1fa008dd160dde9c4d614700556ba9f0d8f17fdd"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/bc00a781cda125b815297a2829991430be877146",
        "bug_id": "cxf_107",
        "file": [
            {
                "additions": 6,
                "sha": "68c05b8643a0fa8617aaf22bc7167f3aeda664fc",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/288259b274c9ac59803c6c5016467413be980400/rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/NegotiationUtils.java",
                "deletions": 4,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/NegotiationUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/NegotiationUtils.java?ref=288259b274c9ac59803c6c5016467413be980400",
                "patch": "@@ -275,11 +275,13 @@ static boolean parseSCTResult(SoapMessage message) {\n                             getTokenStore(message).add(token);\n                         }\n                     }\n-                    final SecurityContext sc = token.getSecurityContext();\n-                    if (sc != null) {\n-                        message.put(SecurityContext.class, sc);\n+                    if (token != null) {\n+                        final SecurityContext sc = token.getSecurityContext();\n+                        if (sc != null) {\n+                            message.put(SecurityContext.class, sc);\n+                        }\n+                        return true;\n                     }\n-                    return true;\n                 }\n             }\n         }",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/288259b274c9ac59803c6c5016467413be980400/rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/NegotiationUtils.java"
            },
            {
                "additions": 21,
                "sha": "921998bd1654e0ae2ab2f89cbde83fd79f1ba8d9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/288259b274c9ac59803c6c5016467413be980400/services/sts/systests/advanced/src/test/java/org/apache/cxf/systest/sts/secure_conv/SecureConversationTest.java",
                "deletions": 0,
                "filename": "services/sts/systests/advanced/src/test/java/org/apache/cxf/systest/sts/secure_conv/SecureConversationTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/systests/advanced/src/test/java/org/apache/cxf/systest/sts/secure_conv/SecureConversationTest.java?ref=288259b274c9ac59803c6c5016467413be980400",
                "patch": "@@ -110,6 +110,27 @@ public void testSecureConversationSymmetric() throws Exception {\n         bus.shutdown(true);\n     }\n \n+    @org.junit.Test\n+    public void testSecureConversationSupporting() throws Exception {\n+        SpringBusFactory bf = new SpringBusFactory();\n+        URL busFile = SecureConversationTest.class.getResource(\"cxf-client.xml\");\n+\n+        Bus bus = bf.createBus(busFile.toString());\n+        SpringBusFactory.setDefaultBus(bus);\n+        SpringBusFactory.setThreadDefaultBus(bus);\n+\n+        URL wsdl = SecureConversationTest.class.getResource(\"DoubleIt.wsdl\");\n+        Service service = Service.create(wsdl, SERVICE_QNAME);\n+        QName portQName = new QName(NAMESPACE, \"DoubleItTransportSupportingPort\");\n+        DoubleItPortType transportPort = \n+            service.getPort(portQName, DoubleItPortType.class);\n+        updateAddressPort(transportPort, PORT);\n+\n+        doubleIt(transportPort, 25);\n+        \n+        bus.shutdown(true);\n+    }\n+    \n     private static void doubleIt(DoubleItPortType port, int numToDouble) {\n         int resp = port.doubleIt(numToDouble);\n         assertTrue(resp == 2 * numToDouble);",
                "changes": 21,
                "blob_url": "https://github.com/apache/cxf/blob/288259b274c9ac59803c6c5016467413be980400/services/sts/systests/advanced/src/test/java/org/apache/cxf/systest/sts/secure_conv/SecureConversationTest.java"
            },
            {
                "additions": 61,
                "sha": "d860e53063379c7803e20602f52d6ad39441b61c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/288259b274c9ac59803c6c5016467413be980400/services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/DoubleIt.wsdl",
                "deletions": 0,
                "filename": "services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/DoubleIt.wsdl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/DoubleIt.wsdl?ref=288259b274c9ac59803c6c5016467413be980400",
                "patch": "@@ -49,13 +49,32 @@\n             </wsdl:output>\n         </wsdl:operation>\n     </wsdl:binding>\n+    <wsdl:binding name=\"DoubleItTransportSupportingBinding\" type=\"tns:DoubleItPortType\">\n+        <wsp:PolicyReference URI=\"#DoubleItBindingTransportSupportingPolicy\"/>\n+        <soap:binding style=\"document\" transport=\"http://schemas.xmlsoap.org/soap/http\"/>\n+        <wsdl:operation name=\"DoubleIt\">\n+            <soap:operation soapAction=\"\"/>\n+            <wsdl:input>\n+                <soap:body use=\"literal\"/>\n+                <wsp:PolicyReference URI=\"#DoubleItBinding_DoubleIt_Input_Policy\"/>\n+            </wsdl:input>\n+            <wsdl:output>\n+                <soap:body use=\"literal\"/>\n+                <wsp:PolicyReference URI=\"#DoubleItBinding_DoubleIt_Output_Policy\"/>\n+            </wsdl:output>\n+        </wsdl:operation>\n+    </wsdl:binding>\n     <wsdl:service name=\"DoubleItService\">\n         <wsdl:port name=\"DoubleItTransportSecureConvPort\" binding=\"tns:DoubleItTransportSecureConvBinding\">\n             <soap:address location=\"https://localhost:8081/doubleit/services/doubleittransportsecureconv\"/>\n         </wsdl:port>\n         <wsdl:port name=\"DoubleItSymmetricSecureConvPort\" binding=\"tns:DoubleItSymmetricSecureConvBinding\">\n             <soap:address location=\"http://localhost:8082/doubleit/services/doubleitsymmetricsecureconv\"/>\n         </wsdl:port>\n+        <wsdl:port name=\"DoubleItTransportSupportingPort\" \n+                   binding=\"tns:DoubleItTransportSupportingBinding\">\n+            <soap:address location=\"https://localhost:8081/doubleit/services/doubleittransportsupporting\"/>\n+        </wsdl:port>\n     </wsdl:service>\n     <wsp:Policy wsu:Id=\"DoubleItBindingTransportSecureConvPolicy\">\n         <wsp:ExactlyOne>\n@@ -226,6 +245,48 @@\n             </wsp:All>\n         </wsp:ExactlyOne>\n     </wsp:Policy>\n+    <wsp:Policy wsu:Id=\"DoubleItBindingTransportSupportingPolicy\">\n+        <wsp:ExactlyOne>\n+            <wsp:All>\n+                <wsam:Addressing wsp:Optional=\"false\">\n+                    <wsp:Policy/>\n+                </wsam:Addressing>\n+                <sp:TransportBinding xmlns:sp=\"http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702\">\n+                    <wsp:Policy>\n+                        <sp:TransportToken>\n+                            <wsp:Policy>\n+                                <sp:HttpsToken>\n+                                    <wsp:Policy/>\n+                                </sp:HttpsToken>\n+                            </wsp:Policy>\n+                        </sp:TransportToken>\n+                        <sp:AlgorithmSuite>\n+                            <wsp:Policy>\n+                                <sp:Basic128/>\n+                            </wsp:Policy>\n+                        </sp:AlgorithmSuite>\n+                        <sp:Layout>\n+                            <wsp:Policy>\n+                                <sp:Lax/>\n+                            </wsp:Policy>\n+                        </sp:Layout>\n+                        <sp:IncludeTimestamp/>\n+                    </wsp:Policy>\n+                </sp:TransportBinding>\n+                <sp:SupportingTokens xmlns:sp=\"http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702\">\n+                    <wsp:Policy>\n+                        <sp:SecureConversationToken sp:IncludeToken=\"http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient\">\n+                            <wsp:Policy>\n+                                <sp:BootstrapPolicy>\n+                                    <wsp:Policy />\n+                                </sp:BootstrapPolicy>\n+                            </wsp:Policy>\n+                        </sp:SecureConversationToken>\n+                    </wsp:Policy>\n+                </sp:SupportingTokens>\n+            </wsp:All>\n+        </wsp:ExactlyOne>\n+    </wsp:Policy>\n     <wsp:Policy wsu:Id=\"DoubleItBinding_DoubleIt_Input_Policy\">\n         <wsp:ExactlyOne>\n             <wsp:All>",
                "changes": 61,
                "blob_url": "https://github.com/apache/cxf/blob/288259b274c9ac59803c6c5016467413be980400/services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/DoubleIt.wsdl"
            },
            {
                "additions": 6,
                "sha": "2349fb93c57d98eff882eefa9974146b12a6222a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/288259b274c9ac59803c6c5016467413be980400/services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/cxf-client.xml",
                "deletions": 0,
                "filename": "services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/cxf-client.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/cxf-client.xml?ref=288259b274c9ac59803c6c5016467413be980400",
                "patch": "@@ -49,6 +49,12 @@\n             <entry key=\"ws-security.sts.client\" value-ref=\"stsClient\"/>\n         </jaxws:properties>\n     </jaxws:client>\n+    <jaxws:client name=\"{http://www.example.org/contract/DoubleIt}DoubleItTransportSupportingPort\" createdFromAPI=\"true\">\n+        <jaxws:properties>\n+            <entry key=\"ws-security.sts.client\" value-ref=\"stsClient\"/>\n+        </jaxws:properties>\n+    </jaxws:client>\n+    \n     <http:conduit name=\"https://localhost:.*\">\n         <http:tlsClientParameters disableCNCheck=\"true\">\n             <sec:trustManagers>",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/288259b274c9ac59803c6c5016467413be980400/services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/cxf-client.xml"
            },
            {
                "additions": 19,
                "sha": "6ddfd39ade647db1ee77e6bd499d5125d09da725",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/288259b274c9ac59803c6c5016467413be980400/services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/cxf-service.xml",
                "deletions": 0,
                "filename": "services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/cxf-service.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/cxf-service.xml?ref=288259b274c9ac59803c6c5016467413be980400",
                "patch": "@@ -55,6 +55,25 @@\n             </entry>\n         </jaxws:properties>\n     </jaxws:endpoint>\n+    <jaxws:endpoint xmlns:s=\"http://www.example.org/contract/DoubleIt\" id=\"doubleittransportsupporting\" implementor=\"org.apache.cxf.systest.sts.common.DoubleItPortTypeImpl\" endpointName=\"s:DoubleItTransportSupportingPort\" serviceName=\"s:DoubleItService\" depends-on=\"ClientAuthHttpsSettings\" address=\"https://localhost:${testutil.ports.Server}/doubleit/services/doubleittransportsupporting\" wsdlLocation=\"org/apache/cxf/systest/sts/secure_conv/DoubleIt.wsdl\">\n+        <jaxws:properties>\n+            <entry key=\"ws-security.callback-handler\" value=\"org.apache.cxf.systest.sts.common.CommonCallbackHandler\"/>\n+            <entry key=\"ws-security.signature.properties\" value=\"serviceKeystore.properties\"/>\n+            <entry key=\"ws-security.sct.validator\">\n+                <bean class=\"org.apache.cxf.systest.sts.secure_conv.SCTTokenValidator\"/>\n+            </entry>\n+            <entry key=\"ws-security.sts.client\">\n+                <bean class=\"org.apache.cxf.ws.security.trust.STSClient\">\n+                    <constructor-arg ref=\"cxf\"/>\n+                    <property name=\"wsdlLocation\" value=\"https://localhost:${testutil.ports.STSServer}/SecurityTokenService/TransportSCT?wsdl\"/>\n+                    <property name=\"serviceName\" value=\"{http://docs.oasis-open.org/ws-sx/ws-trust/200512/}SecurityTokenService\"/>\n+                    <property name=\"endpointName\" value=\"{http://docs.oasis-open.org/ws-sx/ws-trust/200512/}Transport_Port\"/>\n+                    <property name=\"tokenType\" value=\"http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0\"/>\n+                </bean>\n+            </entry>\n+        </jaxws:properties>\n+    </jaxws:endpoint>\n+    \n     <httpj:engine-factory id=\"ClientAuthHttpsSettings\" bus=\"cxf\">\n         <httpj:engine port=\"${testutil.ports.Server}\">\n             <httpj:tlsServerParameters>",
                "changes": 19,
                "blob_url": "https://github.com/apache/cxf/blob/288259b274c9ac59803c6c5016467413be980400/services/sts/systests/advanced/src/test/resources/org/apache/cxf/systest/sts/secure_conv/cxf-service.xml"
            }
        ],
        "repo": "cxf",
        "message": "Another SCT system test + a NPE fix",
        "commit": "https://github.com/apache/cxf/commit/288259b274c9ac59803c6c5016467413be980400"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6a2001fb1d7df3e2afa92586a3b169f9888f2a99",
        "bug_id": "cxf_108",
        "file": [
            {
                "additions": 2,
                "sha": "f510f282469a0b5b230de9a0bb7da7b01d4baf1a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RMSoapInterceptor.java",
                "deletions": 2,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RMSoapInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RMSoapInterceptor.java?ref=ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b",
                "patch": "@@ -282,11 +282,11 @@ public void decodeHeaders(SoapMessage message, List<Header> headers, RMPropertie\n                                 wsauri = maps.getNamespaceURI();\n                             }\n                             ProtocolVariation protocol = ProtocolVariation.findVariant(rmUri, wsauri);\n-                            codec = protocol.getCodec();\n-                            if (codec == null) {\n+                            if (protocol == null) {\n                                 LOG.log(Level.WARNING, \"NAMESPACE_ERROR_MSG\", wsauri); \n                                 break;\n                             }\n+                            codec = protocol.getCodec();\n                         }\n                         String localName = elem.getLocalName();\n                         LOG.log(Level.FINE, \"decoding RM header {0}\", localName);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RMSoapInterceptor.java"
            },
            {
                "additions": 48,
                "sha": "c2d3c0d9c922622d8d24337cfbefab097ee14b52",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b/rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/ProtocolVariationTest.java",
                "deletions": 0,
                "filename": "rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/ProtocolVariationTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/ProtocolVariationTest.java?ref=ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b",
                "patch": "@@ -0,0 +1,48 @@\n+/**\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements. See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership. The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License. You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied. See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.\r\n+ */\r\n+\r\n+package org.apache.cxf.ws.rm;\r\n+\r\n+import junit.framework.Assert;\r\n+\r\n+import org.apache.cxf.ws.addressing.Names;\r\n+import org.apache.cxf.ws.addressing.VersionTransformer.Names200408;\r\n+\r\n+import org.junit.Test;\r\n+\r\n+/**\r\n+ * \r\n+ */\r\n+public class ProtocolVariationTest extends Assert {\r\n+\r\n+    @Test\r\n+    public void testFindVariant() {\r\n+        // valid combinations\r\n+        assertNotNull(ProtocolVariation.findVariant(\r\n+                          RM10Constants.NAMESPACE_URI, Names200408.WSA_NAMESPACE_NAME));\r\n+        assertNotNull(ProtocolVariation.findVariant(\r\n+                          RM10Constants.NAMESPACE_URI, Names.WSA_NAMESPACE_NAME));\r\n+        assertNotNull(ProtocolVariation.findVariant(\r\n+                          RM11Constants.NAMESPACE_URI, Names.WSA_NAMESPACE_NAME));\r\n+        \r\n+        // invalid combinations \r\n+        assertNull(ProtocolVariation.findVariant(\r\n+                          RM11Constants.NAMESPACE_URI, Names200408.WSA_NAMESPACE_NAME));\r\n+    }\r\n+}\r",
                "changes": 48,
                "blob_url": "https://github.com/apache/cxf/blob/ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b/rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/ProtocolVariationTest.java"
            },
            {
                "additions": 24,
                "sha": "42aaf57e9ab50cd9cc1069e47123d14f9f6c96ce",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/rm/ProtocolVariationsTest.java",
                "deletions": 0,
                "filename": "systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/rm/ProtocolVariationsTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/rm/ProtocolVariationsTest.java?ref=ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b",
                "patch": "@@ -50,6 +50,7 @@\n import org.apache.cxf.ws.rm.RM10Constants;\n import org.apache.cxf.ws.rm.RM11Constants;\n import org.apache.cxf.ws.rm.RMConstants;\n+import org.apache.cxf.ws.rm.RMException;\n import org.apache.cxf.ws.rm.RMManager;\n \n import org.junit.After;\n@@ -161,6 +162,29 @@ public void testRM11() throws Exception {\n         verifyTwowayNonAnonymous(Names.WSA_NAMESPACE_NAME, RM11Constants.INSTANCE);\n     }\n     \n+    @Test\n+    public void testInvalidRM11WSA200408() throws Exception {\n+        init(\"org/apache/cxf/systest/ws/rm/rminterceptors.xml\", false);\n+        \n+        // WS-RM 1.1, but using the WS-A 1.0 namespace\n+        Client client = ClientProxy.getClient(greeter);\n+        client.getRequestContext().put(RMManager.WSRM_VERSION_PROPERTY, RM11Constants.NAMESPACE_URI);\n+        client.getRequestContext().put(RMManager.WSRM_WSA_VERSION_PROPERTY, Names200408.WSA_NAMESPACE_NAME);\n+\n+        try {\n+            greeter.greetMe(\"one\");\n+            fail(\"invalid namespace combination\");\n+        } catch (Exception e) {\n+            assertTrue(e.getCause() instanceof RMException);\n+            // verify a partial error text match to exclude an unexpected exception\n+            // (see UNSUPPORTED_NAMESPACE in Messages.properties)\n+            final String text = Names200408.WSA_NAMESPACE_NAME + \" is not supported\";\n+            assertTrue(e.getCause().getMessage() != null \n+                       && e.getCause().getMessage().indexOf(text) > 0);\n+        }\n+        \n+    }\n+    \n     @Test\n     public void testDefaultDecoupled() throws Exception {\n         init(\"org/apache/cxf/systest/ws/rm/rminterceptors.xml\", true);",
                "changes": 24,
                "blob_url": "https://github.com/apache/cxf/blob/ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/rm/ProtocolVariationsTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4023] invalid ProtocolVariant causes NullPointerException in RMSoapInterceptor\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1245572 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ad37213c3e8dc849ddc6ed7fab0e3eccf1421a8b"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d391d9371d8505c7774308c4fbbb9bc57ffd34a6",
        "bug_id": "cxf_109",
        "file": [
            {
                "additions": 7,
                "sha": "7a8bad5d8f024e04bae6104af071c9563e12bdc3",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d45de9c2548f38798954016faa6ac207257ad12c/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/EndpointPolicyImpl.java",
                "deletions": 1,
                "filename": "rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/EndpointPolicyImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/EndpointPolicyImpl.java?ref=d45de9c2548f38798954016faa6ac207257ad12c",
                "patch": "@@ -21,6 +21,7 @@\n \n import java.util.ArrayList;\n import java.util.Collection;\n+import java.util.Collections;\n import java.util.Iterator;\n import java.util.LinkedHashSet;\n import java.util.List;\n@@ -158,7 +159,12 @@ void initializePolicy() {\n     void chooseAlternative(Message m) {\n         Collection<Assertion> alternative = null;\n         if (requestor) {\n-            alternative = engine.getAlternativeSelector().selectAlternative(policy, engine, assertor, null, m);\n+            if (engine.isEnabled()) {\n+                alternative = engine.getAlternativeSelector().selectAlternative(policy, engine, assertor, null, m);\n+            } else {\n+                // use an empty list to avoid getting NPE\n+                alternative = Collections.emptyList();\n+            }\n         } else {\n             alternative = getSupportedAlternatives(m);\n         }",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/d45de9c2548f38798954016faa6ac207257ad12c/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/EndpointPolicyImpl.java"
            },
            {
                "additions": 16,
                "sha": "42dc83b71b5b110e819b642693f22be359e1d491",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d45de9c2548f38798954016faa6ac207257ad12c/rt/ws/policy/src/test/java/org/apache/cxf/ws/policy/EndpointPolicyImplTest.java",
                "deletions": 0,
                "filename": "rt/ws/policy/src/test/java/org/apache/cxf/ws/policy/EndpointPolicyImplTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/policy/src/test/java/org/apache/cxf/ws/policy/EndpointPolicyImplTest.java?ref=d45de9c2548f38798954016faa6ac207257ad12c",
                "patch": "@@ -166,6 +166,7 @@ public void testChooseAlternative() {\n         EndpointPolicyImpl epi = new EndpointPolicyImpl(null, engine, true, assertor);\n         epi.setPolicy(policy);\n \n+        EasyMock.expect(engine.isEnabled()).andReturn(true).anyTimes();\n         EasyMock.expect(engine.getAlternativeSelector()).andReturn(selector);\n         EasyMock.expect(selector.selectAlternative(policy, engine, assertor, null, m)).andReturn(null);\n \n@@ -179,6 +180,7 @@ public void testChooseAlternative() {\n         control.verify();\n \n         control.reset();\n+        EasyMock.expect(engine.isEnabled()).andReturn(true).anyTimes();\n         EasyMock.expect(engine.getAlternativeSelector()).andReturn(selector);\n         Collection<Assertion> alternative = new ArrayList<Assertion>();\n         EasyMock.expect(selector.selectAlternative(policy, engine, assertor, null, m)).andReturn(alternative);\n@@ -187,6 +189,20 @@ public void testChooseAlternative() {\n         Collection<Assertion> choice = epi.getChosenAlternative();\n         assertSame(choice, alternative);\n         control.verify();\n+\n+        control.reset();\n+        EasyMock.expect(engine.isEnabled()).andReturn(false).anyTimes();\n+        EasyMock.expect(engine.getAlternativeSelector()).andReturn(null).anyTimes();\n+        control.replay();\n+        try {\n+            epi.chooseAlternative(m);\n+        } catch (Exception ex) {\n+            // no NPE expected\n+            fail(\"No Exception expected: \" + ex);\n+        }\n+        choice = epi.getChosenAlternative();\n+        assertTrue(\"not an empty list\", choice != null && choice.isEmpty());\n+        control.verify();\n     }\n \n     private MessageImpl createMessage() {",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/d45de9c2548f38798954016faa6ac207257ad12c/rt/ws/policy/src/test/java/org/apache/cxf/ws/policy/EndpointPolicyImplTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5878] Disabling policy engine causes NPE",
        "commit": "https://github.com/apache/cxf/commit/d45de9c2548f38798954016faa6ac207257ad12c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4bf328ae55f5877ca538386d6e0892af0a7a57a3",
        "bug_id": "cxf_110",
        "file": [
            {
                "additions": 5,
                "sha": "63d6711535cae88f8ba1f9fb8e284de9258ed826",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7b402ed31b2971671543d465b32ad27995c9d941/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java?ref=7b402ed31b2971671543d465b32ad27995c9d941",
                "patch": "@@ -50,6 +50,7 @@\n import javax.xml.ws.soap.SOAPBinding;\n \n import org.apache.cxf.common.classloader.ClassLoaderUtils;\n+import org.apache.cxf.common.i18n.Message;\n import org.apache.cxf.common.logging.LogUtils;\n import org.apache.cxf.common.util.PackageUtils;\n import org.apache.cxf.common.util.StringUtils;\n@@ -185,6 +186,10 @@ private void loadWSFeatureAnnotation(Class<?> serviceClass, Class<?> implementor\n \n     @Override\n     public void setServiceClass(Class<?> serviceClass) {\n+        if (serviceClass == null) {\n+            Message message = new Message(\"SERVICECLASS_MUST_BE_SET\", LOG);\n+            throw new ServiceConstructionException(message);\n+        }\n         setJaxWsImplementorInfo(new JaxWsImplementorInfo(serviceClass));\n         super.setServiceClass(getJaxWsImplementorInfo().getEndpointClass());\n     }",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/7b402ed31b2971671543d465b32ad27995c9d941/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java"
            },
            {
                "additions": 1,
                "sha": "0bed8cf4e8112b348081806c999826e80f9276e7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7b402ed31b2971671543d465b32ad27995c9d941/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/Messages.properties",
                "deletions": 0,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/Messages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/Messages.properties?ref=7b402ed31b2971671543d465b32ad27995c9d941",
                "patch": "@@ -28,3 +28,4 @@ COULD_NOT_FIND_ENDPOINT = Could not find endpoint named {0}.  Possible values ar\n SOAPBinding_MESSAGE_RPC= JAX-WS SOAPBinding annotation with Style of RPC found on method {0}. This is not supported.\n INVALID_REQUEST_WRAPPER = @RequestWrapper class {0} is the same as the actual parameter {1}.  This is likely not to work. \n INVALID_RESPONSE_WRAPPER = @ResponseWrapper class {0} is the same as the actual return class {1}.  This is likely not to work. \n+SERVICECLASS_MUST_BE_SET = serviceClass must be set to a valid service interface or class\n\\ No newline at end of file",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/7b402ed31b2971671543d465b32ad27995c9d941/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/Messages.properties"
            }
        ],
        "repo": "cxf",
        "message": "CXF-2476 Throw meaningfull exception instead of NullpointerException\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@826181 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/7b402ed31b2971671543d465b32ad27995c9d941"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3f742349af9b52d001c27ee19dd708b615cec9fb",
        "bug_id": "cxf_111",
        "file": [
            {
                "additions": 2,
                "sha": "4561b6fa042e11298e6d0569e2d2f18d4fb068f4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/aec5212a93eaea503b916d92ff6167609ab73e63/rt/transports/jms/src/main/java/org/apache/cxf/transport/jms/JMSConduit.java",
                "deletions": 2,
                "filename": "rt/transports/jms/src/main/java/org/apache/cxf/transport/jms/JMSConduit.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/jms/src/main/java/org/apache/cxf/transport/jms/JMSConduit.java?ref=aec5212a93eaea503b916d92ff6167609ab73e63",
                "patch": "@@ -191,10 +191,10 @@ public void sendExchange(final Exchange exchange, final Object request) {\n                 }\n                 correlationMap.remove(correlationId);\n             }\n+            exchange.setInMessage(inMessage);\n             if (incomingObserver != null) {\n                 incomingObserver.onMessage(inMessage);\n-            }\n-            exchange.setInMessage(inMessage);\n+            }      \n         }\n     }\n ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/aec5212a93eaea503b916d92ff6167609ab73e63/rt/transports/jms/src/main/java/org/apache/cxf/transport/jms/JMSConduit.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix for broken build NullpointerException in ClientImpl\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@700308 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/aec5212a93eaea503b916d92ff6167609ab73e63"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/bcae9ca929f47ffb89af0e2c4f322548d09c8246",
        "bug_id": "cxf_112",
        "file": [
            {
                "additions": 3,
                "sha": "b3d129b03c76627ec0a06e87f59a3040c82e2b45",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8be86ff22dbbcaec0903e952d20935ef8e29e995/rt/transports/jbi/src/main/java/org/apache/cxf/transport/jbi/JBIConduitOutputStream.java",
                "deletions": 0,
                "filename": "rt/transports/jbi/src/main/java/org/apache/cxf/transport/jbi/JBIConduitOutputStream.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/jbi/src/main/java/org/apache/cxf/transport/jbi/JBIConduitOutputStream.java?ref=8be86ff22dbbcaec0903e952d20935ef8e29e995",
                "patch": "@@ -131,6 +131,9 @@ private void commitOutputMessage() throws IOException {\n                     if (outMsg != null) {\n                         content = outMsg.getContent();\n                     } else {\n+                        if (((InOut)xchng).getFault() == null) {\n+                            throw xchng.getError();\n+                        }\n                         content = ((InOut)xchng).getFault().getContent();\n                     }\n                     Message inMessage = new MessageImpl();",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/8be86ff22dbbcaec0903e952d20935ef8e29e995/rt/transports/jbi/src/main/java/org/apache/cxf/transport/jbi/JBIConduitOutputStream.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1588]NullPointerException in JbiConduitOutputStream\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@656605 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/8be86ff22dbbcaec0903e952d20935ef8e29e995"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a5d111e31f72b1a2bf05af59c2f61e79965fb9dc",
        "bug_id": "cxf_113",
        "file": [
            {
                "additions": 3,
                "sha": "7a4e5c63ffaf31b98eff6f79c97495d6ae8c96cd",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/013fd951b5e401fcd4ca2bf18b301b7404f35ade/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java?ref=013fd951b5e401fcd4ca2bf18b301b7404f35ade",
                "patch": "@@ -692,7 +692,9 @@ private HttpServletResponse getHttpResponseFromMessage(Message message) throws I\n     }\n \n     private boolean isResponseRedirected(Message outMessage) {\n-        return Boolean.TRUE.equals(outMessage.getExchange().get(REQUEST_REDIRECTED));\n+        Exchange exchange = outMessage.getExchange();\n+        return exchange != null \n+               && Boolean.TRUE.equals(exchange.get(REQUEST_REDIRECTED));\n     }\n \n     /**",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/013fd951b5e401fcd4ca2bf18b301b7404f35ade/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java"
            }
        ],
        "repo": "cxf",
        "message": "Preventing an unexpected NPE in AbstractHttpDestination in the MTOM test",
        "commit": "https://github.com/apache/cxf/commit/013fd951b5e401fcd4ca2bf18b301b7404f35ade"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b9a7d7dd2247c9532cabd7b7696772af471bde5d",
        "bug_id": "cxf_114",
        "file": [
            {
                "additions": 3,
                "sha": "51db0d2c672ce2323dbd5622a0ccef5196f22d9e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/099c710c1b83e6dc91ebfde728dd05a445feaee6/rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/common/SecurityUtils.java",
                "deletions": 0,
                "filename": "rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/common/SecurityUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/common/SecurityUtils.java?ref=099c710c1b83e6dc91ebfde728dd05a445feaee6",
                "patch": "@@ -88,6 +88,9 @@ public static X509Certificate loadX509IssuerSerial(Crypto crypto, Element certNo\n     \n     public static X509Certificate[] getCertificates(Crypto crypto, String user)\n         throws Exception {\n+        if (crypto == null) {\n+            throw new Exception(\"Crypto instance is null\");\n+        }\n         CryptoType cryptoType = new CryptoType(CryptoType.TYPE.ALIAS);\n         cryptoType.setAlias(user);\n         X509Certificate[] issuerCerts = crypto.getX509Certificates(cryptoType);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/099c710c1b83e6dc91ebfde728dd05a445feaee6/rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/common/SecurityUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid a NPE on no Crypto instance",
        "commit": "https://github.com/apache/cxf/commit/099c710c1b83e6dc91ebfde728dd05a445feaee6"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/8c8ed16605a2d7468da380155e9aa4c4bbd62031",
        "bug_id": "cxf_115",
        "file": [
            {
                "additions": 4,
                "sha": "0447a1941bdf4affbde978a1044387a26d2a76b8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4fdb951039dd8c7bd840d85e68e4225057f2d52d/rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jaxrs/KeyManagementUtils.java",
                "deletions": 0,
                "filename": "rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jaxrs/KeyManagementUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jaxrs/KeyManagementUtils.java?ref=4fdb951039dd8c7bd840d85e68e4225057f2d52d",
                "patch": "@@ -226,6 +226,10 @@ public static KeyStore loadKeyStore(Properties props, Bus bus) {\n         String keyStoreType = props.getProperty(RSSEC_KEY_STORE_TYPE);\n         String keyStoreLoc = props.getProperty(RSSEC_KEY_STORE_FILE);\n         String keyStorePswd = props.getProperty(RSSEC_KEY_STORE_PSWD);\n+        \n+        if (keyStorePswd == null) {\n+            throw new JoseException(\"No keystore password was defined\");\n+        }\n         try {\n             InputStream is = ResourceUtils.getResourceStream(keyStoreLoc, bus);\n             return CryptoUtils.loadKeyStore(is, keyStorePswd.toCharArray(), keyStoreType);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/4fdb951039dd8c7bd840d85e68e4225057f2d52d/rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jaxrs/KeyManagementUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid NPE if no keystore password was provided",
        "commit": "https://github.com/apache/cxf/commit/4fdb951039dd8c7bd840d85e68e4225057f2d52d"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9bcc593c140f656ea79ab6da23cd76eaf2274576",
        "bug_id": "cxf_116",
        "file": [
            {
                "additions": 4,
                "sha": "c434fa59183629533fdcd42d1ac85de929e82957",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e4feffb6f13fd5ba1c8c76bb2301d2d1a13fd43a/rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jaxrs/KeyManagementUtils.java",
                "deletions": 0,
                "filename": "rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jaxrs/KeyManagementUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jaxrs/KeyManagementUtils.java?ref=e4feffb6f13fd5ba1c8c76bb2301d2d1a13fd43a",
                "patch": "@@ -211,6 +211,10 @@ private static RSAPrivateKey loadPrivateKey(KeyStore keyStore, Message m, Proper\n         return (RSAPrivateKey)loadPrivateKey(keyStore, m, props, bus, cb, keyOper, alias);\n     }\n     public static KeyStore loadPersistKeyStore(Message m, Properties props) {\n+        if (!props.containsKey(RSSEC_KEY_STORE_FILE)) {\n+            LOG.warning(\"No keystore file has been configured\");\n+            throw new JoseException(\"No keystore file has been configured\");\n+        }\n         KeyStore keyStore = (KeyStore)m.getExchange().get(props.get(RSSEC_KEY_STORE_FILE));\n         if (keyStore == null) {\n             keyStore = loadKeyStore(props, m.getExchange().getBus());",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/e4feffb6f13fd5ba1c8c76bb2301d2d1a13fd43a/rt/rs/security/jose/src/main/java/org/apache/cxf/rs/security/jose/jaxrs/KeyManagementUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid a NPE if the keystore file is not configured",
        "commit": "https://github.com/apache/cxf/commit/e4feffb6f13fd5ba1c8c76bb2301d2d1a13fd43a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/26e8350e122ed94155e58aa1f937cace205cfbc5",
        "bug_id": "cxf_117",
        "file": [
            {
                "additions": 3,
                "sha": "5bc108f3b5772bb212afc25068802a3840e7c282",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3c056d9f8a5324ecc9de46e687436937c03b2f46/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/ValidationUtils.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/ValidationUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/ValidationUtils.java?ref=3c056d9f8a5324ecc9de46e687436937c03b2f46",
                "patch": "@@ -35,6 +35,9 @@ public static Object getResourceInstance(Message message) {\n         if (ori == null) {\n             return null;\n         }\n+        if (!ori.getClassResourceInfo().isRoot()) {\n+            return message.getExchange().get(\"org.apache.cxf.service.object.last\");\n+        }\n         final ResourceProvider resourceProvider = ori.getClassResourceInfo().getResourceProvider();\n         if (!resourceProvider.isSingleton()) {\n             String error = \"Service object is not a singleton, use a custom invoker to validate\";",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/3c056d9f8a5324ecc9de46e687436937c03b2f46/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/validation/ValidationUtils.java"
            },
            {
                "additions": 5,
                "sha": "7b6d46359ce58ea49af763871370c9d66d843aff",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3c056d9f8a5324ecc9de46e687436937c03b2f46/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/BookStoreWithValidation.java",
                "deletions": 0,
                "filename": "systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/BookStoreWithValidation.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/BookStoreWithValidation.java?ref=3c056d9f8a5324ecc9de46e687436937c03b2f46",
                "patch": "@@ -67,6 +67,11 @@ public Response getBookResponseNoValidation(@PathParam(\"bookId\") String id) {\n         return Response.ok(books.get(id)).build();\n     }\n     \n+    @Path(\"/sub\")\n+    public BookStoreWithValidation getBookResponseSub() {\n+        return this;\n+    }\n+    \n     @POST\n     @Path(\"/books\")\n     public Response addBook(@Context final UriInfo uriInfo, ",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/3c056d9f8a5324ecc9de46e687436937c03b2f46/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/BookStoreWithValidation.java"
            },
            {
                "additions": 9,
                "sha": "08d6bae1099bf2fe9403bdeb2e126a9a3f8f1190",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3c056d9f8a5324ecc9de46e687436937c03b2f46/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/JAXRSClientServerValidationTest.java",
                "deletions": 0,
                "filename": "systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/JAXRSClientServerValidationTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/JAXRSClientServerValidationTest.java?ref=3c056d9f8a5324ecc9de46e687436937c03b2f46",
                "patch": "@@ -180,6 +180,15 @@ public void testThatResponseValidationForOneBookNotFails()  {\n         assertEquals(200, r.getStatus());\n     }\n     \n+    @Test\n+    public void testThatResponseValidationForOneBookSubNotFails()  {\n+        Response r = createWebClient(\"/bookstore/books\").post(new Form().param(\"id\", \"1234\").param(\"name\", \"cxf\"));\n+        assertEquals(Status.CREATED.getStatusCode(), r.getStatus());\n+\n+        r = createWebClient(\"/bookstore/sub/books/1234\").get();\n+        assertEquals(200, r.getStatus());\n+    }\n+    \n     @Test\n     public void testThatResponseValidationForNullBookFails()  {\n         Response r = createWebClient(\"/bookstore/books\").post(new Form().param(\"id\", \"1234\").param(\"name\", \"cxf\"));",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/3c056d9f8a5324ecc9de46e687436937c03b2f46/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/validation/JAXRSClientServerValidationTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6297] Avoiding NPE if a subresource method was invoked",
        "commit": "https://github.com/apache/cxf/commit/3c056d9f8a5324ecc9de46e687436937c03b2f46"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f2f8b95ad823b38aa68e7a2071eac0b5b637b2aa",
        "bug_id": "cxf_118",
        "file": [
            {
                "additions": 19,
                "sha": "dd01d0ac32a1e684c7adec9091f1dda29069cd61",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/97f3ac75fd9fc105c346acfc48a646d5088a2127/services/sts/sts-core/src/main/java/org/apache/cxf/sts/rest/RESTSecurityTokenServiceImpl.java",
                "deletions": 4,
                "filename": "services/sts/sts-core/src/main/java/org/apache/cxf/sts/rest/RESTSecurityTokenServiceImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-core/src/main/java/org/apache/cxf/sts/rest/RESTSecurityTokenServiceImpl.java?ref=97f3ac75fd9fc105c346acfc48a646d5088a2127",
                "patch": "@@ -81,6 +81,9 @@\n \n     @Context\n     private MessageContext messageContext;\n+    \n+    @Context\n+    private javax.ws.rs.core.SecurityContext securityContext;\n \n     private Map<String, String> claimTypeMap = DEFAULT_CLAIM_TYPE_MAP;\n \n@@ -297,12 +300,24 @@ public void setClaimTypeMap(Map<String, String> claimTypeMap) {\n     \n     @Override\n     protected Principal getPrincipal() {\n+        // Try JAX-RS SecurityContext first\n+        if (securityContext != null && securityContext.getUserPrincipal() != null) {\n+            return securityContext.getUserPrincipal();\n+        }\n+        \n+        // Then try the CXF SecurityContext\n         SecurityContext sc = (SecurityContext)messageContext.get(SecurityContext.class);\n-        if (sc == null || sc.getUserPrincipal() == null) {\n-            // Get the TLS client principal if no security context is set up\n-            return getTLSClientCertificate().getSubjectX500Principal();\n+        if (sc != null && sc.getUserPrincipal() != null) {\n+            return sc.getUserPrincipal();\n         }\n-        return messageContext.getSecurityContext().getUserPrincipal();\n+        \n+        // Get the TLS client principal if no security context is set up\n+        X509Certificate clientCert = getTLSClientCertificate();\n+        if (clientCert != null) {\n+            return clientCert.getSubjectX500Principal();\n+        }\n+        \n+        return null;\n     }\n     \n     private X509Certificate getTLSClientCertificate() {",
                "changes": 23,
                "blob_url": "https://github.com/apache/cxf/blob/97f3ac75fd9fc105c346acfc48a646d5088a2127/services/sts/sts-core/src/main/java/org/apache/cxf/sts/rest/RESTSecurityTokenServiceImpl.java"
            },
            {
                "additions": 0,
                "sha": "a7c1156e3432867bde18c4426b26780d3757d7b1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/97f3ac75fd9fc105c346acfc48a646d5088a2127/services/sts/systests/basic/src/test/resources/org/apache/cxf/systest/sts/rest/cxf-rest-sts.xml",
                "deletions": 8,
                "filename": "services/sts/systests/basic/src/test/resources/org/apache/cxf/systest/sts/rest/cxf-rest-sts.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/systests/basic/src/test/resources/org/apache/cxf/systest/sts/rest/cxf-rest-sts.xml?ref=97f3ac75fd9fc105c346acfc48a646d5088a2127",
                "patch": "@@ -113,14 +113,6 @@\n         <property name=\"renewOperation\" ref=\"transportRenewDelegate\"/>\n     </bean>\n     \n-    <bean id=\"jaxbProvider\" class=\"org.apache.cxf.jaxrs.provider.JAXBElementProvider\">\n-        <property name=\"depthProperties\">\n-            <bean class=\"org.apache.cxf.staxutils.DocumentDepthProperties\">\n-                <property name=\"innerElementCountThreshold\" value=\"500\" />\n-            </bean>\n-        </property>\n-    </bean>\n-\n     <bean id=\"jsonProvider\" class=\"com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider\" />\n     \n     <jaxrs:server id=\"stsRESTService\"",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/97f3ac75fd9fc105c346acfc48a646d5088a2127/services/sts/systests/basic/src/test/resources/org/apache/cxf/systest/sts/rest/cxf-rest-sts.xml"
            }
        ],
        "repo": "cxf",
        "message": "Fixing NPE in REST STS implementation + got it to work on Tomcat",
        "commit": "https://github.com/apache/cxf/commit/97f3ac75fd9fc105c346acfc48a646d5088a2127"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/bd5fad7d1bd414e339f62b7950a6b157f6fb54df",
        "bug_id": "cxf_119",
        "file": [
            {
                "additions": 12,
                "sha": "3bbedcf03f05eaa57da04796782d94754ceb09ef",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7845fa85e7640bad0e7bd42d1a2ac77873def0ac/rt/databinding/xmlbeans/src/main/java/org/apache/cxf/xmlbeans/tools/XMLBeansToolingDataBinding.java",
                "deletions": 0,
                "filename": "rt/databinding/xmlbeans/src/main/java/org/apache/cxf/xmlbeans/tools/XMLBeansToolingDataBinding.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/xmlbeans/src/main/java/org/apache/cxf/xmlbeans/tools/XMLBeansToolingDataBinding.java?ref=7845fa85e7640bad0e7bd42d1a2ac77873def0ac",
                "patch": "@@ -42,6 +42,7 @@\n import org.xml.sax.EntityResolver;\n import org.xml.sax.InputSource;\n \n+import org.apache.cxf.common.jaxb.JAXBUtils;\n import org.apache.cxf.helpers.IOUtils;\n import org.apache.cxf.staxutils.StaxUtils;\n import org.apache.cxf.tools.common.ToolConstants;\n@@ -50,6 +51,7 @@\n import org.apache.cxf.tools.common.model.DefaultValueWriter;\n import org.apache.cxf.tools.util.ClassCollector;\n import org.apache.cxf.tools.wsdlto.core.DataBindingProfile;\n+import org.apache.ws.commons.schema.constants.Constants;\n import org.apache.xmlbeans.SchemaGlobalElement;\n import org.apache.xmlbeans.SchemaProperty;\n import org.apache.xmlbeans.SchemaType;\n@@ -144,6 +146,9 @@ public String getType(QName qn, boolean element) {\n             if (type == null)  {\n                 type = typeLoader.findDocumentType(qn);\n             }\n+            if (type == null) {\n+                return null;\n+            }\n \n             ret = type.getFullJavaName();\n             if (ret.contains(\"$\")) {\n@@ -157,6 +162,13 @@ public String getType(QName qn, boolean element) {\n             type = typeLoader.findType(qn);\n         }\n \n+        if (type == null\n+            && Constants.URI_2001_SCHEMA_XSD.equals(qn.getNamespaceURI())) {\n+            return JAXBUtils.builtInTypeToJavaType(qn.getLocalPart());\n+        }\n+        if (type == null) {\n+            return null;\n+        }\n         ret = type.getFullJavaName();\n         return ret.replace('$', '.');\n     }",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/7845fa85e7640bad0e7bd42d1a2ac77873def0ac/rt/databinding/xmlbeans/src/main/java/org/apache/cxf/xmlbeans/tools/XMLBeansToolingDataBinding.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6090] Add some NPE guards in xmlbeans tooling.",
        "commit": "https://github.com/apache/cxf/commit/7845fa85e7640bad0e7bd42d1a2ac77873def0ac"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5e06ba0c4970700477484bd2409a226aa9ec7f0a",
        "bug_id": "cxf_120",
        "file": [
            {
                "additions": 3,
                "sha": "9114c66f130924948b0b12902bc6a9a707bc951c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/73ad9a853d999d7f60039e482c182c79a1d57a09/core/src/main/java/org/apache/cxf/endpoint/ClientImpl.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/endpoint/ClientImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/endpoint/ClientImpl.java?ref=73ad9a853d999d7f60039e482c182c79a1d57a09",
                "patch": "@@ -699,7 +699,9 @@ protected void setParameters(Object[] params, Message message) {\n     }\n \n     public void onMessage(Message message) {\n-\n+        if (bus == null) {\n+            throw new IllegalStateException(\"Message received on a Client that has been closed or destroyed.\");\n+        }\n         Endpoint endpoint = message.getExchange().getEndpoint();\n         if (endpoint == null) {\n             // in this case correlation will occur outside the transport,",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/73ad9a853d999d7f60039e482c182c79a1d57a09/core/src/main/java/org/apache/cxf/endpoint/ClientImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6070] Instead of NPE, throw a more meaningful exception.",
        "commit": "https://github.com/apache/cxf/commit/73ad9a853d999d7f60039e482c182c79a1d57a09"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b57976f9d2e7436f4a632383e4466590e6c5eee3",
        "bug_id": "cxf_121",
        "file": [
            {
                "additions": 1,
                "sha": "48e47a6c60531156aaf9e29bce23dff9b9a806f4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/77a6da2ceabc8a19cf423a33430ea5995ea811e3/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/SoapHeaderOutFilterInterceptor.java",
                "deletions": 2,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/SoapHeaderOutFilterInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/SoapHeaderOutFilterInterceptor.java?ref=77a6da2ceabc8a19cf423a33430ea5995ea811e3",
                "patch": "@@ -34,13 +34,12 @@ public SoapHeaderOutFilterInterceptor()  {\n     }\n \n     public void handleMessage(SoapMessage message) throws Fault {\n-        // TODO Auto-generated method stub\n         Iterator<Header> iter =  message.getHeaders().iterator();\n         \n         while (iter.hasNext()) {\n             Header hdr  = iter.next();\n             //Only remove inbound marked headers..\n-            if (hdr.getDirection() == Header.Direction.DIRECTION_IN) {\n+            if (hdr == null || hdr.getDirection() == Header.Direction.DIRECTION_IN) {\n                 iter.remove(); \n             }\n         }",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/77a6da2ceabc8a19cf423a33430ea5995ea811e3/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/SoapHeaderOutFilterInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6030] Add an NPE guard and remove \"null\" headers",
        "commit": "https://github.com/apache/cxf/commit/77a6da2ceabc8a19cf423a33430ea5995ea811e3"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a51f6d96a920257911e83d8e68719165ef3c9399",
        "bug_id": "cxf_122",
        "file": [
            {
                "additions": 4,
                "sha": "8d9fcaaa040c839c2fec0d947bfb496f4aa88728",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/53d3867cd7135f8c34f8b570c9812c214c6a22fa/core/src/main/java/org/apache/cxf/common/util/Compiler.java",
                "deletions": 0,
                "filename": "core/src/main/java/org/apache/cxf/common/util/Compiler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/common/util/Compiler.java?ref=53d3867cd7135f8c34f8b570c9812c214c6a22fa",
                "patch": "@@ -184,6 +184,10 @@ public boolean compileFiles(String[] files) {\n \n     protected boolean useJava6Compiler(String[] files) {\n         JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\n+        if (compiler == null) {\n+            throw new IllegalStateException(\n+                \"No compiler detected, make sure you are running on top of a JDK instead of a JRE.\");\n+        }\n         StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null, null);\n         Iterable<? extends JavaFileObject> fileList = fileManager.getJavaFileObjectsFromStrings(Arrays\n             .asList(files));",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/53d3867cd7135f8c34f8b570c9812c214c6a22fa/core/src/main/java/org/apache/cxf/common/util/Compiler.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6935] Better error message than NPE in Compiler.useJava6Compiler, patch from Gary Gregory applied with thanks",
        "commit": "https://github.com/apache/cxf/commit/53d3867cd7135f8c34f8b570c9812c214c6a22fa"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/04f0ef2e32f55d51f14cfc6d7a14616b62a6cce5",
        "bug_id": "cxf_123",
        "file": [
            {
                "additions": 10,
                "sha": "815558ad95baef8c8cff7eeee678c6f43a667604",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/745a7840f80f0e6c712b708bf9fb5506b931ac9b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/MessageModeOutInterceptor.java",
                "deletions": 8,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/MessageModeOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/MessageModeOutInterceptor.java?ref=745a7840f80f0e6c712b708bf9fb5506b931ac9b",
                "patch": "@@ -202,16 +202,18 @@ private void validatePossibleFault(Message message, BindingOperationInfo bop, No\n         }\n     }\n     private void validateFaultDetail(Element detail, Schema schema, BindingOperationInfo bop) throws Exception {\n-        Element el = DOMUtils.getFirstElement(detail);\n-        while (el != null) {\n-            QName qn = DOMUtils.getElementQName(el);\n-            for (BindingFaultInfo bfi : bop.getFaults()) {\n-                if (bfi.getFaultInfo().getMessagePartByIndex(0).getConcreteName().equals(qn)) {\n-                    //Found a fault with the correct QName, we can validate it\n-                    schema.newValidator().validate(new DOMSource(el));\n+        if (detail != null) {\n+            Element el = DOMUtils.getFirstElement(detail);\n+            while (el != null) {\n+                QName qn = DOMUtils.getElementQName(el);\n+                for (BindingFaultInfo bfi : bop.getFaults()) {\n+                    if (bfi.getFaultInfo().getMessagePartByIndex(0).getConcreteName().equals(qn)) {\n+                        //Found a fault with the correct QName, we can validate it\n+                        schema.newValidator().validate(new DOMSource(el));\n+                    }\n                 }\n+                el = DOMUtils.getNextElement(el);\n             }\n-            el = DOMUtils.getNextElement(el);\n         }\n     }\n     private void validateFault(SoapMessage message, SOAPFault fault, BindingOperationInfo bop) {",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/745a7840f80f0e6c712b708bf9fb5506b931ac9b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/MessageModeOutInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6010] Fix potential NPE\nPatch from Eirik Bjorsnos applied",
        "commit": "https://github.com/apache/cxf/commit/745a7840f80f0e6c712b708bf9fb5506b931ac9b"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/bb4ddb5be95d3ce415bab2aec290ff09a3a572f6",
        "bug_id": "cxf_124",
        "file": [
            {
                "additions": 5,
                "sha": "d964070131c019a8be61981621485cb01240abef",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6113febb17a728296d08667ce207aa5ee40d7c4a/core/src/main/java/org/apache/cxf/message/MessageUtils.java",
                "deletions": 3,
                "filename": "core/src/main/java/org/apache/cxf/message/MessageUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/message/MessageUtils.java?ref=6113febb17a728296d08667ce207aa5ee40d7c4a",
                "patch": "@@ -124,9 +124,11 @@ public static boolean isTrue(Object value) {\n     }\n     \n     public static boolean getContextualBoolean(Message m, String key, boolean defaultValue) {\n-        Object o = m.getContextualProperty(key);\n-        if (o != null) {\n-            return PropertyUtils.isTrue(o);\n+        if (m != null) {\n+            Object o = m.getContextualProperty(key);\n+            if (o != null) {\n+                return PropertyUtils.isTrue(o);\n+            }\n         }\n         return defaultValue;\n     }",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/6113febb17a728296d08667ce207aa5ee40d7c4a/core/src/main/java/org/apache/cxf/message/MessageUtils.java"
            },
            {
                "additions": 5,
                "sha": "cf9f90a069c65536040a3e1f392b47dfc0f220f2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6113febb17a728296d08667ce207aa5ee40d7c4a/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/JoseConstants.java",
                "deletions": 0,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/JoseConstants.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/JoseConstants.java?ref=6113febb17a728296d08667ce207aa5ee40d7c4a",
                "patch": "@@ -94,6 +94,11 @@\n      */\n     public static final String RSSEC_KEY_STORE_FILE = \"rs.security.keystore.file\";\n     \n+    /**\n+     * The KeyStore Object.\n+     */\n+    public static final String RSSEC_KEY_STORE= \"rs.security.keystore\";\n+    \n     /**\n      * A reference to a PrivateKeyPasswordProvider instance used to retrieve passwords to access keys.\n      */",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/6113febb17a728296d08667ce207aa5ee40d7c4a/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/JoseConstants.java"
            },
            {
                "additions": 21,
                "sha": "2ca6e805849404d220f1373bc5ca6342c9036ebe",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6113febb17a728296d08667ce207aa5ee40d7c4a/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java",
                "deletions": 16,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java?ref=6113febb17a728296d08667ce207aa5ee40d7c4a",
                "patch": "@@ -139,8 +139,6 @@ private static String getMessageProperty(Message m, String keyStoreLocPropPrefer\n     private static PrivateKey loadPrivateKey(KeyStore keyStore, \n                                             Message m,\n                                             Properties props, \n-                                            Bus bus, \n-                                            PrivateKeyPasswordProvider provider,\n                                             KeyOperation keyOper,\n                                             String alias) {\n         \n@@ -149,8 +147,11 @@ private static PrivateKey loadPrivateKey(KeyStore keyStore,\n         if (theAlias != null) {\n             props.put(JoseConstants.RSSEC_KEY_STORE_ALIAS, theAlias);\n         }\n-        char[] keyPswdChars = provider != null ? provider.getPassword(props) \n-            : keyPswd != null ? keyPswd.toCharArray() : null;    \n+        char[] keyPswdChars = keyPswd != null ? keyPswd.toCharArray() : null;\n+        if (keyPswdChars == null) {\n+            PrivateKeyPasswordProvider provider = loadPasswordProvider(m, props, keyOper);\n+            keyPswdChars = provider != null ? provider.getPassword(props) : null;\n+        }\n         return CryptoUtils.loadPrivateKey(keyStore, keyPswdChars, theAlias);\n     }\n     \n@@ -174,7 +175,7 @@ public static String getKeyId(Message m, Properties props,\n                                   KeyOperation keyOper) {\n         String kid = null;\n         String altPropertyName = null;\n-        if (keyOper != null) {\n+        if (keyOper != null && m != null) {\n             if (keyOper == KeyOperation.ENCRYPT || keyOper == KeyOperation.DECRYPT) {\n                 altPropertyName = preferredPropertyName + \".jwe\";\n             } else if (keyOper == KeyOperation.SIGN || keyOper == KeyOperation.VERIFY) {\n@@ -216,21 +217,25 @@ public static PrivateKey loadPrivateKey(Message m, Properties props, KeyOperatio\n         KeyStore keyStore = loadPersistKeyStore(m, props);\n         return loadPrivateKey(keyStore, m, props, keyOper, null);\n     }\n-    private static PrivateKey loadPrivateKey(KeyStore keyStore, Message m, Properties props, KeyOperation keyOper, \n-                                                String alias) {\n-        Bus bus = m.getExchange().getBus();\n-        PrivateKeyPasswordProvider cb = loadPasswordProvider(m, props, keyOper);\n-        return loadPrivateKey(keyStore, m, props, bus, cb, keyOper, alias);\n-    }\n     public static KeyStore loadPersistKeyStore(Message m, Properties props) {\n-        if (!props.containsKey(JoseConstants.RSSEC_KEY_STORE_FILE)) {\n-            LOG.warning(\"No keystore file has been configured\");\n-            throw new JoseException(\"No keystore file has been configured\");\n+        KeyStore keyStore = null;\n+        if (props.containsKey(JoseConstants.RSSEC_KEY_STORE)) {\n+            keyStore = (KeyStore)props.get(JoseConstants.RSSEC_KEY_STORE);\n+        }\n+        \n+        if (keyStore == null) {\n+            if (!props.containsKey(JoseConstants.RSSEC_KEY_STORE_FILE)) {\n+                LOG.warning(\"No keystore file has been configured\");\n+                throw new JoseException(\"No keystore file has been configured\");\n+            }\n+            keyStore = (KeyStore)m.getExchange().get(props.get(JoseConstants.RSSEC_KEY_STORE_FILE));\n         }\n-        KeyStore keyStore = (KeyStore)m.getExchange().get(props.get(JoseConstants.RSSEC_KEY_STORE_FILE));\n+        \n         if (keyStore == null) {\n             keyStore = loadKeyStore(props, m.getExchange().getBus());\n-            m.getExchange().put((String)props.get(JoseConstants.RSSEC_KEY_STORE_FILE), keyStore);\n+            if (m != null) {\n+                m.getExchange().put((String)props.get(JoseConstants.RSSEC_KEY_STORE_FILE), keyStore);\n+            }\n         }\n         return keyStore;\n     }",
                "changes": 37,
                "blob_url": "https://github.com/apache/cxf/blob/6113febb17a728296d08667ce207aa5ee40d7c4a/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/common/KeyManagementUtils.java"
            },
            {
                "additions": 1,
                "sha": "0bce50e39eb8627069f658477051199d2e9afbdc",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6113febb17a728296d08667ce207aa5ee40d7c4a/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jws/JwsUtils.java",
                "deletions": 1,
                "filename": "rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jws/JwsUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jws/JwsUtils.java?ref=6113febb17a728296d08667ce207aa5ee40d7c4a",
                "patch": "@@ -261,7 +261,7 @@ public static boolean validateCriticalHeaders(JoseHeaders headers) {\n         //TODO: validate JWS specific constraints\n         return JoseUtils.validateCriticalHeaders(headers);\n     }\n-    private static JwsSignatureProvider loadSignatureProvider(Message m, \n+    public static JwsSignatureProvider loadSignatureProvider(Message m, \n                                                               Properties props,\n                                                               JoseHeaders headers,\n                                                               boolean ignoreNullProvider) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/6113febb17a728296d08667ce207aa5ee40d7c4a/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jws/JwsUtils.java"
            },
            {
                "additions": 96,
                "sha": "573788bbd255097eafe774bc9dfecac050012dd9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6113febb17a728296d08667ce207aa5ee40d7c4a/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/jwt/JWTTokenProvider.java",
                "deletions": 19,
                "filename": "services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/jwt/JWTTokenProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/jwt/JWTTokenProvider.java?ref=6113febb17a728296d08667ce207aa5ee40d7c4a",
                "patch": "@@ -19,24 +19,37 @@\n \n package org.apache.cxf.sts.token.provider.jwt;\n \n+import java.security.KeyStore;\n import java.util.Date;\n import java.util.HashMap;\n import java.util.Map;\n import java.util.Properties;\n import java.util.logging.Level;\n import java.util.logging.Logger;\n \n+import javax.security.auth.callback.CallbackHandler;\n+\n import org.apache.cxf.common.logging.LogUtils;\n+import org.apache.cxf.message.Message;\n+import org.apache.cxf.phase.PhaseInterceptorChain;\n import org.apache.cxf.rs.security.jose.common.JoseConstants;\n+import org.apache.cxf.rs.security.jose.jwa.SignatureAlgorithm;\n import org.apache.cxf.rs.security.jose.jws.JwsJwtCompactProducer;\n+import org.apache.cxf.rs.security.jose.jws.JwsSignatureProvider;\n+import org.apache.cxf.rs.security.jose.jws.JwsUtils;\n import org.apache.cxf.rs.security.jose.jwt.JwtClaims;\n import org.apache.cxf.rs.security.jose.jwt.JwtToken;\n+import org.apache.cxf.sts.STSPropertiesMBean;\n+import org.apache.cxf.sts.SignatureProperties;\n import org.apache.cxf.sts.request.TokenRequirements;\n import org.apache.cxf.sts.token.provider.TokenProvider;\n import org.apache.cxf.sts.token.provider.TokenProviderParameters;\n import org.apache.cxf.sts.token.provider.TokenProviderResponse;\n import org.apache.cxf.sts.token.realm.SAMLRealm;\n import org.apache.cxf.ws.security.sts.provider.STSException;\n+import org.apache.wss4j.common.crypto.Crypto;\n+import org.apache.wss4j.common.crypto.Merlin;\n+import org.apache.wss4j.common.ext.WSPasswordCallback;\n \n /**\n  * A TokenProvider implementation that provides a JWT Token.\n@@ -85,13 +98,6 @@ public TokenProviderResponse createToken(TokenProviderParameters tokenParameters\n         \n         JwtClaims claims = jwtClaimsProvider.getJwtClaims(jwtClaimsProviderParameters);\n         \n-        /*\n-        if (signToken) {\n-            STSPropertiesMBean stsProperties = tokenParameters.getStsProperties();\n-            signToken(assertion, samlRealm, stsProperties, tokenParameters.getKeyRequirements());\n-        }\n-        */\n-        \n         try {\n             /*\n             Document doc = DOMUtils.createDocument();\n@@ -120,12 +126,8 @@ public TokenProviderResponse createToken(TokenProviderParameters tokenParameters\n             \n             JwtToken token = new JwtToken(claims);\n             \n-            Properties signingProperties = new Properties();\n-            signingProperties.put(JoseConstants.RSSEC_SIGNATURE_ALGORITHM, \"none\");\n-            \n-            JwsJwtCompactProducer jws = new JwsJwtCompactProducer(token);\n-            jws.setSignatureProperties(signingProperties);\n-            String tokenData = jws.getSignedEncodedJws();\n+            String tokenData = signToken(token, null, tokenParameters.getStsProperties(), \n+                      tokenParameters.getTokenRequirements());\n             \n             TokenProviderResponse response = new TokenProviderResponse();\n             response.setToken(tokenData);\n@@ -139,12 +141,6 @@ public TokenProviderResponse createToken(TokenProviderParameters tokenParameters\n                 response.setExpires(new Date(claims.getExpiryTime() * 1000L));\n             }\n             \n-            /*response.setEntropy(entropyBytes);\n-            if (keySize > 0) {\n-                response.setKeySize(keySize);\n-            }\n-            response.setComputedKey(computedKey);\n-            */\n             LOG.fine(\"JWT Token successfully created\");\n             return response;\n         } catch (Exception e) {\n@@ -192,4 +188,85 @@ public void setJwtClaimsProvider(JWTClaimsProvider jwtClaimsProvider) {\n         this.jwtClaimsProvider = jwtClaimsProvider;\n     }\n     \n+    private String signToken(\n+        JwtToken token, \n+        SAMLRealm samlRealm,\n+        STSPropertiesMBean stsProperties,\n+        TokenRequirements tokenRequirements\n+    ) throws Exception {\n+        \n+        Properties signingProperties = new Properties();\n+        \n+        if (signToken) {\n+            // Initialise signature objects with defaults of STSPropertiesMBean\n+            Crypto signatureCrypto = stsProperties.getSignatureCrypto();\n+            CallbackHandler callbackHandler = stsProperties.getCallbackHandler();\n+            SignatureProperties signatureProperties = stsProperties.getSignatureProperties();\n+            String alias = stsProperties.getSignatureUsername();\n+\n+            if (samlRealm != null) {\n+                // If SignatureCrypto configured in realm then\n+                // callbackhandler and alias of STSPropertiesMBean is ignored\n+                if (samlRealm.getSignatureCrypto() != null) {\n+                    LOG.fine(\"SAMLRealm signature keystore used\");\n+                    signatureCrypto = samlRealm.getSignatureCrypto();\n+                    callbackHandler = samlRealm.getCallbackHandler();\n+                    alias = samlRealm.getSignatureAlias();\n+                }\n+                // SignatureProperties can be defined independently of SignatureCrypto\n+                if (samlRealm.getSignatureProperties() != null) {\n+                    signatureProperties = samlRealm.getSignatureProperties();\n+                }\n+            }\n+\n+            // Get the signature algorithm to use - for now we don't allow the client to ask\n+            // for a particular signature algorithm, as with SAML\n+            String signatureAlgorithm = signatureProperties.getSignatureAlgorithm();\n+            try {\n+                SignatureAlgorithm.getAlgorithm(signatureAlgorithm);\n+            } catch (IllegalArgumentException ex) {\n+                signatureAlgorithm = SignatureAlgorithm.RS256.name();\n+            }\n+\n+            // If alias not defined, get the default of the SignatureCrypto\n+            if ((alias == null || \"\".equals(alias)) && (signatureCrypto != null)) {\n+                alias = signatureCrypto.getDefaultX509Identifier();\n+                if (LOG.isLoggable(Level.FINE)) {\n+                    LOG.fine(\"Signature alias is null so using default alias: \" + alias);\n+                }\n+            }\n+            // Get the password\n+            WSPasswordCallback[] cb = {new WSPasswordCallback(alias, WSPasswordCallback.SIGNATURE)};\n+            callbackHandler.handle(cb);\n+            String password = cb[0].getPassword();\n+\n+            signingProperties.put(JoseConstants.RSSEC_SIGNATURE_ALGORITHM, signatureAlgorithm);\n+            signingProperties.put(JoseConstants.RSSEC_KEY_STORE_ALIAS, alias);\n+            signingProperties.put(JoseConstants.RSSEC_KEY_PSWD, password);\n+            \n+            if (!(signatureCrypto instanceof Merlin)) {\n+                throw new STSException(\"Can't get the keystore\", STSException.REQUEST_FAILED);\n+            }\n+            KeyStore keystore = ((Merlin)signatureCrypto).getKeyStore();\n+            signingProperties.put(JoseConstants.RSSEC_KEY_STORE, keystore);\n+            \n+            JwsJwtCompactProducer jws = new JwsJwtCompactProducer(token);\n+            jws.setSignatureProperties(signingProperties);\n+            \n+            Message m = PhaseInterceptorChain.getCurrentMessage();\n+            JwsSignatureProvider sigProvider = \n+                JwsUtils.loadSignatureProvider(m, signingProperties, token.getJwsHeaders(), false);\n+            token.getJwsHeaders().setSignatureAlgorithm(sigProvider.getAlgorithm());\n+            \n+            return jws.signWith(sigProvider);\n+        } else {\n+            signingProperties.put(JoseConstants.RSSEC_SIGNATURE_ALGORITHM, \"none\");\n+            \n+            JwsJwtCompactProducer jws = new JwsJwtCompactProducer(token);\n+            jws.setSignatureProperties(signingProperties);\n+            return jws.getSignedEncodedJws();\n+        }\n+        \n+    }\n+\n }",
                "changes": 115,
                "blob_url": "https://github.com/apache/cxf/blob/6113febb17a728296d08667ce207aa5ee40d7c4a/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/jwt/JWTTokenProvider.java"
            },
            {
                "additions": 40,
                "sha": "aed28ef096694f4f0c3864e2f960076fc9079a75",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6113febb17a728296d08667ce207aa5ee40d7c4a/services/sts/sts-core/src/test/java/org/apache/cxf/sts/token/provider/JWTTokenProviderTest.java",
                "deletions": 0,
                "filename": "services/sts/sts-core/src/test/java/org/apache/cxf/sts/token/provider/JWTTokenProviderTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-core/src/test/java/org/apache/cxf/sts/token/provider/JWTTokenProviderTest.java?ref=6113febb17a728296d08667ce207aa5ee40d7c4a",
                "patch": "@@ -18,11 +18,13 @@\n  */\n package org.apache.cxf.sts.token.provider;\n \n+import java.security.cert.X509Certificate;\n import java.util.Properties;\n \n import org.apache.cxf.jaxws.context.WebServiceContextImpl;\n import org.apache.cxf.jaxws.context.WrappedMessageContext;\n import org.apache.cxf.message.MessageImpl;\n+import org.apache.cxf.rs.security.jose.jwa.SignatureAlgorithm;\n import org.apache.cxf.rs.security.jose.jws.JwsJwtCompactConsumer;\n import org.apache.cxf.rs.security.jose.jwt.JwtConstants;\n import org.apache.cxf.rs.security.jose.jwt.JwtToken;\n@@ -36,6 +38,7 @@\n import org.apache.cxf.ws.security.tokenstore.TokenStore;\n import org.apache.wss4j.common.crypto.Crypto;\n import org.apache.wss4j.common.crypto.CryptoFactory;\n+import org.apache.wss4j.common.crypto.CryptoType;\n import org.apache.wss4j.common.ext.WSSecurityException;\n import org.apache.wss4j.common.principal.CustomTokenPrincipal;\n import org.junit.Assert;\n@@ -50,6 +53,7 @@\n     @org.junit.Test\n     public void testCreateUnsignedJWT() throws Exception {\n         TokenProvider jwtTokenProvider = new JWTTokenProvider();\n+        ((JWTTokenProvider)jwtTokenProvider).setSignToken(false);\n         \n         TokenProviderParameters providerParameters = createProviderParameters();\n         \n@@ -73,6 +77,42 @@ public void testCreateUnsignedJWT() throws Exception {\n                             jwt.getClaim(JwtConstants.CLAIM_EXPIRY));\n     }\n     \n+    @org.junit.Test\n+    public void testCreateSignedJWT() throws Exception {\n+        TokenProvider jwtTokenProvider = new JWTTokenProvider();\n+        ((JWTTokenProvider)jwtTokenProvider).setSignToken(true);\n+        \n+        TokenProviderParameters providerParameters = createProviderParameters();\n+        \n+        assertTrue(jwtTokenProvider.canHandleToken(JWTTokenProvider.JWT_TOKEN_TYPE));\n+        TokenProviderResponse providerResponse = jwtTokenProvider.createToken(providerParameters);\n+        assertTrue(providerResponse != null);\n+        assertTrue(providerResponse.getToken() != null && providerResponse.getTokenId() != null);\n+\n+        String token = (String)providerResponse.getToken();\n+        assertNotNull(token);\n+        assertTrue(token.split(\"\\\\.\").length == 3);\n+        \n+        // Validate the token\n+        JwsJwtCompactConsumer jwtConsumer = new JwsJwtCompactConsumer(token);\n+        JwtToken jwt = jwtConsumer.getJwtToken();\n+        Assert.assertEquals(\"alice\", jwt.getClaim(JwtConstants.CLAIM_SUBJECT));\n+        Assert.assertEquals(providerResponse.getTokenId(), jwt.getClaim(JwtConstants.CLAIM_JWT_ID));\n+        Assert.assertEquals(providerResponse.getCreated().getTime() / 1000L, \n+                            jwt.getClaim(JwtConstants.CLAIM_ISSUED_AT));\n+        Assert.assertEquals(providerResponse.getExpires().getTime() / 1000L, \n+                            jwt.getClaim(JwtConstants.CLAIM_EXPIRY));\n+        \n+        // Verify Signature\n+        Crypto crypto = providerParameters.getStsProperties().getSignatureCrypto();\n+        CryptoType cryptoType = new CryptoType(CryptoType.TYPE.ALIAS);\n+        cryptoType.setAlias(providerParameters.getStsProperties().getSignatureUsername());\n+        X509Certificate[] certs = crypto.getX509Certificates(cryptoType);\n+        assertNotNull(certs);\n+        \n+        assertTrue(jwtConsumer.verifySignatureWith(certs[0], SignatureAlgorithm.RS256));\n+    }\n+    \n     private TokenProviderParameters createProviderParameters() throws WSSecurityException {\n         TokenProviderParameters parameters = new TokenProviderParameters();\n         ",
                "changes": 40,
                "blob_url": "https://github.com/apache/cxf/blob/6113febb17a728296d08667ce207aa5ee40d7c4a/services/sts/sts-core/src/test/java/org/apache/cxf/sts/token/provider/JWTTokenProviderTest.java"
            }
        ],
        "repo": "cxf",
        "message": "Adding the ability to sign JWT tokens in the STS plus some NPE fixes",
        "commit": "https://github.com/apache/cxf/commit/6113febb17a728296d08667ce207aa5ee40d7c4a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1c092b9b3b0d438e4e5d44d44b5942cb406f8ade",
        "bug_id": "cxf_125",
        "file": [
            {
                "additions": 16,
                "sha": "d35a2edf554804c64658161d5f5a66a009decd3e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6d7d8eb39c6fdd1323bf50b410302e48240d0a3a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/LinkBuilderImpl.java",
                "deletions": 3,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/LinkBuilderImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/LinkBuilderImpl.java?ref=6d7d8eb39c6fdd1323bf50b410302e48240d0a3a",
                "patch": "@@ -74,12 +74,25 @@ public Builder link(Link link) {\n \n     @Override\n     public Builder link(String link) {\n+        \n+        link = link.trim();\n+        if (link.length() > 1 && link.startsWith(\"<\")) {\n+            int index = link.indexOf(\">\", 1);\n+            if (index != -1) {\n+                String uri = link.substring(1, index);\n+                ub = UriBuilder.fromUri(uri);\n+                if (index + 1 == link.length()) {\n+                    link = \"\";\n+                } else {\n+                    link = link.substring(index + 1);\n+                }\n+            }\n+        }\n+        \n         String[] tokens = StringUtils.split(link, \";\");\n         for (String token : tokens) {\n             String theToken = token.trim();\n-            if (theToken.startsWith(\"<\") && theToken.endsWith(\">\")) {\n-                ub = UriBuilder.fromUri(theToken.substring(1, theToken.length() - 1));\n-            } else {\n+            if (!theToken.isEmpty()) {\n                 int i = theToken.indexOf('=');\n                 if (i != -1) {\n                     String name = theToken.substring(0, i);",
                "changes": 19,
                "blob_url": "https://github.com/apache/cxf/blob/6d7d8eb39c6fdd1323bf50b410302e48240d0a3a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/LinkBuilderImpl.java"
            },
            {
                "additions": 1,
                "sha": "70920cc2531ff55c9e20cbb49c9a45303bc95af9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6d7d8eb39c6fdd1323bf50b410302e48240d0a3a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/impl/LinkBuilderImplTest.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/impl/LinkBuilderImplTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/impl/LinkBuilderImplTest.java?ref=6d7d8eb39c6fdd1323bf50b410302e48240d0a3a",
                "patch": "@@ -41,7 +41,7 @@ public void testBuild() throws Exception {\n     }\n     \n     @Test\n-    public void testbBuildObjects() throws Exception {\n+    public void testBuildObjects() throws Exception {\n         StringBuilder path1 = new StringBuilder().append(\"p1\");\n         ByteArrayInputStream path2 = new ByteArrayInputStream(\"p2\".getBytes()) {\n             @Override",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/6d7d8eb39c6fdd1323bf50b410302e48240d0a3a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/impl/LinkBuilderImplTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6664] Fixing NPE based on the input from with the help from Michael Krenn",
        "commit": "https://github.com/apache/cxf/commit/6d7d8eb39c6fdd1323bf50b410302e48240d0a3a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/38a1b770407c6e1955e46ca700e7babd15276c08",
        "bug_id": "cxf_126",
        "file": [
            {
                "additions": 10,
                "sha": "5740460c7977484233f93f7f906522fd1f15f7fb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/1616f19109942a38a9cd410afbb7626bf5053b02/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/EncoderDecoder11Impl.java",
                "deletions": 2,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/EncoderDecoder11Impl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/EncoderDecoder11Impl.java?ref=1616f19109942a38a9cd410afbb7626bf5053b02",
                "patch": "@@ -41,6 +41,7 @@\n import org.apache.cxf.ws.rm.v200702.CloseSequenceType;\n import org.apache.cxf.ws.rm.v200702.CreateSequenceResponseType;\n import org.apache.cxf.ws.rm.v200702.CreateSequenceType;\n+import org.apache.cxf.ws.rm.v200702.DetailType;\n import org.apache.cxf.ws.rm.v200702.Identifier;\n import org.apache.cxf.ws.rm.v200702.SequenceAcknowledgement;\n import org.apache.cxf.ws.rm.v200702.SequenceFaultType;\n@@ -142,16 +143,23 @@ public void buildHeaderFault(SequenceFault sf, Element header, Marshaller marsha\n         }\n         Element data = doc.getDocumentElement();\n         if (data != null) {\n-            flt.getDetail().getAny().add(data);\n+            addDetail(flt, data);\n         }\n         data = sf.getExtraDetail();\n         if (data != null) {\n-            flt.getDetail().getAny().add(data);\n+            addDetail(flt, data);\n         }\n         marshaller.marshal(new JAXBElement<SequenceFaultType>(RM11Constants.SEQUENCE_FAULT_QNAME,\n             SequenceFaultType.class, flt), header);\n     }\n \n+    private static void addDetail(SequenceFaultType sft, Element data) {\n+        if (!sft.isSetDetail()) {\n+            sft.setDetail(new DetailType());\n+        }\n+        sft.getDetail().getAny().add(data);\n+    }\n+\n     public Element encodeSequenceAcknowledgement(SequenceAcknowledgement ack) throws JAXBException {\n         Document doc = DOMUtils.createDocument();\n         Marshaller marshaller = getContext().createMarshaller();",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/1616f19109942a38a9cd410afbb7626bf5053b02/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/EncoderDecoder11Impl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6653] NPE may result while generating a SequenceFault in WS-RM 1.1",
        "commit": "https://github.com/apache/cxf/commit/1616f19109942a38a9cd410afbb7626bf5053b02"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/021646df45517d2c06680e20da050f8ebe424a26",
        "bug_id": "cxf_127",
        "file": [
            {
                "additions": 8,
                "sha": "96d86b3795cf18121af4ceaf76456aaa9959cb2e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/95d6cfcd27d16d37497875125a1a0c6aa276fcd5/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/Servant.java",
                "deletions": 7,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/Servant.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/Servant.java?ref=95d6cfcd27d16d37497875125a1a0c6aa276fcd5",
                "patch": "@@ -214,13 +214,14 @@ public void createSequenceResponse(CreateSequenceResponseType createResponse,\n         Identifier offeredId = reliableEndpoint.getProxy().getOfferedIdentifier();\n         if (null != offeredId) {\n             AcceptType accept = createResponse.getAccept();\n-            assert null != accept;\n-            Destination dest = reliableEndpoint.getDestination();\n-            String address = accept.getAcksTo().getAddress().getValue();\n-            if (!RMUtils.getAddressingConstants().getNoneURI().equals(address)) {\n-                DestinationSequence ds =  new DestinationSequence(offeredId, accept.getAcksTo(), dest,\n-                    protocol);\n-                dest.addSequence(ds);\n+            if (accept != null) {\n+                Destination dest = reliableEndpoint.getDestination();\n+                String address = accept.getAcksTo().getAddress().getValue();\n+                if (!RMUtils.getAddressingConstants().getNoneURI().equals(address)) {\n+                    DestinationSequence ds =  new DestinationSequence(offeredId, accept.getAcksTo(), dest,\n+                                                                      protocol);\n+                    dest.addSequence(ds);\n+                }\n             }\n         }\n     }",
                "changes": 15,
                "blob_url": "https://github.com/apache/cxf/blob/95d6cfcd27d16d37497875125a1a0c6aa276fcd5/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/Servant.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5725] Fix NPE when no Accept for Offer",
        "commit": "https://github.com/apache/cxf/commit/95d6cfcd27d16d37497875125a1a0c6aa276fcd5"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/cd4adda07214cb06912872f15b54a991759556a7",
        "bug_id": "cxf_128",
        "file": [
            {
                "additions": 6,
                "sha": "b43f0d548a4c1047d9e910535d1653f91852ca6d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2e6ce310695f110e8a809297276fdbfaca04c395/core/src/main/java/org/apache/cxf/interceptor/AbstractLoggingInterceptor.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/interceptor/AbstractLoggingInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/interceptor/AbstractLoggingInterceptor.java?ref=2e6ce310695f110e8a809297276fdbfaca04c395",
                "patch": "@@ -36,6 +36,7 @@\n \n import org.apache.cxf.common.logging.LogUtils;\n import org.apache.cxf.common.util.StringUtils;\n+import org.apache.cxf.endpoint.Endpoint;\n import org.apache.cxf.io.CachedOutputStream;\n import org.apache.cxf.message.Message;\n import org.apache.cxf.phase.AbstractPhaseInterceptor;\n@@ -76,7 +77,11 @@ public AbstractLoggingInterceptor(String id, String phase) {\n     protected abstract Logger getLogger();\n     \n     Logger getMessageLogger(Message message) {\n-        EndpointInfo endpoint = message.getExchange().getEndpoint().getEndpointInfo();\n+        Endpoint ep = message.getExchange().getEndpoint();\n+        if (ep == null || ep.getEndpointInfo() == null) {\n+            return getLogger();\n+        }\n+        EndpointInfo endpoint = ep.getEndpointInfo();\n         if (endpoint.getService() == null) {\n             return getLogger();\n         }",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/2e6ce310695f110e8a809297276fdbfaca04c395/core/src/main/java/org/apache/cxf/interceptor/AbstractLoggingInterceptor.java"
            },
            {
                "additions": 4,
                "sha": "acd7d73d644a850e00fbc3099dd4cce828c69651",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2e6ce310695f110e8a809297276fdbfaca04c395/systests/uncategorized/src/test/java/org/apache/cxf/systest/versioning/Server.java",
                "deletions": 0,
                "filename": "systests/uncategorized/src/test/java/org/apache/cxf/systest/versioning/Server.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/uncategorized/src/test/java/org/apache/cxf/systest/versioning/Server.java?ref=2e6ce310695f110e8a809297276fdbfaca04c395",
                "patch": "@@ -21,6 +21,8 @@\n \n import javax.xml.ws.Endpoint;\n \n+import org.apache.cxf.BusFactory;\n+import org.apache.cxf.interceptor.LoggingInInterceptor;\n import org.apache.cxf.jaxws.EndpointImpl;\n import org.apache.cxf.testutil.common.AbstractBusTestServerBase;\n import org.apache.cxf.transport.MultipleEndpointObserver;\n@@ -31,6 +33,8 @@\n     public static final String PORT = allocatePort(Server.class);\n     \n     protected void run() {\n+        setBus(BusFactory.getDefaultBus());\n+        getBus().getInInterceptors().add(new LoggingInInterceptor());\n         String address = \"http://localhost:\" + PORT + \"/SoapContext/SoapPort\";\n \n         Object implementor1 = new GreeterImplMixedStyle(\" version1\");",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/2e6ce310695f110e8a809297276fdbfaca04c395/systests/uncategorized/src/test/java/org/apache/cxf/systest/versioning/Server.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5504] Fix potential NPE in Logging interceptors",
        "commit": "https://github.com/apache/cxf/commit/2e6ce310695f110e8a809297276fdbfaca04c395"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d3e2ebd99778a9426b199fd7d2a1cc57a299af05",
        "bug_id": "cxf_129",
        "file": [
            {
                "additions": 3,
                "sha": "089ed048d125fd2a11d918d0dd0cf2cbc1004d24",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ae95e49c500b529236732a14c86b4c9e100ac143/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduitFactory.java",
                "deletions": 0,
                "filename": "rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduitFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduitFactory.java?ref=ae95e49c500b529236732a14c86b4c9e100ac143",
                "patch": "@@ -168,6 +168,9 @@ private synchronized void resetVars() {\n \n     private boolean setProperties(Map<String, Object> s) {\n         //properties that can be updated \"live\"\n+        if (s == null) {\n+            return false;\n+        }\n         Object st = s.get(USE_POLICY);\n         if (st == null) {\n             st = SystemPropertyAction.getPropertyOrNull(USE_POLICY);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/ae95e49c500b529236732a14c86b4c9e100ac143/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduitFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6550] Avoiding NPE if the properties are null, thanks to Alexey Markevich",
        "commit": "https://github.com/apache/cxf/commit/ae95e49c500b529236732a14c86b4c9e100ac143"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7a52636862d2d920a2a6d5c5f00821611b7faa37",
        "bug_id": "cxf_130",
        "file": [
            {
                "additions": 1,
                "sha": "7c4e66d740e0e30a478467e2aa8f1db4179cb345",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/af2c42489d67a39e5adb3689e92c4d088422f6c5/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/rp/OidcRpAuthenticationService.java",
                "deletions": 1,
                "filename": "rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/rp/OidcRpAuthenticationService.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/rp/OidcRpAuthenticationService.java?ref=af2c42489d67a39e5adb3689e92c4d088422f6c5",
                "patch": "@@ -61,7 +61,7 @@ public Response completeAuthentication(@Context OidcClientTokenContext oidcConte\n         if (location == null && defaultLocation != null) {\n             String basePath = (String)mc.get(\"http.base.path\");\n             redirectUri = UriBuilder.fromUri(basePath).path(defaultLocation).build();\n-        } else {\n+        } else if (location != null) {\n             redirectUri = URI.create(location);\n         }\n         if (redirectUri != null) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/af2c42489d67a39e5adb3689e92c4d088422f6c5/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/rp/OidcRpAuthenticationService.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6487] Avoiding NPE in the RP service if no redirect is needed",
        "commit": "https://github.com/apache/cxf/commit/af2c42489d67a39e5adb3689e92c4d088422f6c5"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3913cbf504bb863e48ed5fcff25edc06e25f52c0",
        "bug_id": "cxf_131",
        "file": [
            {
                "additions": 2,
                "sha": "c21e52823fc756019baec30174feb86a2f266990",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9469be2decdf115f4fe6b16e0d1465a62da8dc07/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/AsyncResponseImpl.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/AsyncResponseImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/AsyncResponseImpl.java?ref=9469be2decdf115f4fe6b16e0d1465a62da8dc07",
                "patch": "@@ -176,6 +176,8 @@ public void setTimeoutHandler(TimeoutHandler handler) {\n                 extraCallbacks[i] = callbacks[i].newInstance();\n             }\n             return register(callback.newInstance(), extraCallbacks);    \n+        } catch (NullPointerException e) {\n+            throw e;\n         } catch (Throwable t) {\n             return Collections.emptyMap();\n         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/9469be2decdf115f4fe6b16e0d1465a62da8dc07/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/AsyncResponseImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6388] Rethrowing NPE from AsyncResponseImpl, patch from Iris Ding applied",
        "commit": "https://github.com/apache/cxf/commit/9469be2decdf115f4fe6b16e0d1465a62da8dc07"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e4feffb6f13fd5ba1c8c76bb2301d2d1a13fd43a",
        "bug_id": "cxf_132",
        "file": [
            {
                "additions": 3,
                "sha": "5495fbc18fdad9b3d6dd7c9792972548682925b7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8c8ed16605a2d7468da380155e9aa4c4bbd62031/core/src/main/java/org/apache/cxf/common/util/crypto/CryptoUtils.java",
                "deletions": 0,
                "filename": "core/src/main/java/org/apache/cxf/common/util/crypto/CryptoUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/common/util/crypto/CryptoUtils.java?ref=8c8ed16605a2d7468da380155e9aa4c4bbd62031",
                "patch": "@@ -637,6 +637,9 @@ public static Certificate loadCertificate(InputStream storeLocation, char[] stor\n     }\n     public static Certificate loadCertificate(KeyStore keyStore, String alias) {\n         try {\n+            if (!keyStore.containsAlias(alias)) {\n+                throw new SecurityException(\"No alias exists in the keystore for the given alias: \" + alias);\n+            }\n             return keyStore.getCertificate(alias);\n         } catch (Exception ex) { \n             throw new SecurityException(ex);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/8c8ed16605a2d7468da380155e9aa4c4bbd62031/core/src/main/java/org/apache/cxf/common/util/crypto/CryptoUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid NPE if the keystore does not contain the given alias",
        "commit": "https://github.com/apache/cxf/commit/8c8ed16605a2d7468da380155e9aa4c4bbd62031"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/daac77b18e2693ef4ad424937aedc764229a63ee",
        "bug_id": "cxf_133",
        "file": [
            {
                "additions": 9,
                "sha": "897b0d1a3d5e1f25d50056eb843a63a89509c168",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c1a43f2e6593c7dbf3b7a40e6533e37fee2ef9a9/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/ahc/AhcWebSocketConduit.java",
                "deletions": 1,
                "filename": "rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/ahc/AhcWebSocketConduit.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/ahc/AhcWebSocketConduit.java?ref=c1a43f2e6593c7dbf3b7a40e6533e37fee2ef9a9",
                "patch": "@@ -447,7 +447,15 @@ private String readLine() {\n         }\n \n         private int length(Object o) {\n-            return o instanceof char[] ? ((String)o).length() : (o instanceof byte[] ? ((byte[])o).length : 0);\n+            if (o instanceof String) {\n+                return ((String)o).length();\n+            } else if (o instanceof char[]) {\n+                return ((char[])o).length;\n+            } else if (o instanceof byte[]) {\n+                return ((byte[])o).length;\n+            } else {\n+                return 0;\n+            }\n         }\n \n         private int getchar(Object o, int p) {",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/c1a43f2e6593c7dbf3b7a40e6533e37fee2ef9a9/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/ahc/AhcWebSocketConduit.java"
            },
            {
                "additions": 72,
                "sha": "5508fbd9cfbbd95ebe366165cb3bfea6d975599b",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/c1a43f2e6593c7dbf3b7a40e6533e37fee2ef9a9/rt/transports/websocket/src/test/java/org/apache/cxf/transport/websocket/ahc/AhcWebSocketConduitTest.java",
                "deletions": 0,
                "filename": "rt/transports/websocket/src/test/java/org/apache/cxf/transport/websocket/ahc/AhcWebSocketConduitTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/websocket/src/test/java/org/apache/cxf/transport/websocket/ahc/AhcWebSocketConduitTest.java?ref=c1a43f2e6593c7dbf3b7a40e6533e37fee2ef9a9",
                "patch": "@@ -0,0 +1,72 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.transport.websocket.ahc;\n+\n+import org.apache.cxf.transport.websocket.WebSocketConstants;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+/**\n+ * \n+ */\n+public class AhcWebSocketConduitTest extends Assert {\n+    private static final String TEST_RESPONSE1 = \n+        \"200\\r\\nresponseId: 59610eed-d9de-4692-96d4-bb95a36c41ea\\r\\nContent-Type: text/plain\\r\\n\\r\\nHola!\";\n+    private static final String TEST_RESPONSE2 = \n+        \"responseId: 59610eed-d9de-4692-96d4-bb95a36c41ea\\r\\n\\r\\nNada!\";\n+\n+    @Test\n+    public void testResponseParsing() throws Exception {\n+\n+        // with all the headers using type string\n+        AhcWebSocketConduit.Response resp = \n+            new AhcWebSocketConduit.Response(WebSocketConstants.DEFAULT_RESPONSE_ID_KEY, TEST_RESPONSE1);\n+        assertEquals(200, resp.getStatusCode());\n+        assertEquals(\"59610eed-d9de-4692-96d4-bb95a36c41ea\", resp.getId());\n+        assertEquals(\"text/plain\", resp.getContentType());\n+        assertTrue(resp.getEntity() instanceof String);\n+        assertEquals(\"Hola!\", resp.getEntity());\n+\n+        // with all the heaers using type byte[]\n+        resp = new AhcWebSocketConduit.Response(WebSocketConstants.DEFAULT_RESPONSE_ID_KEY, TEST_RESPONSE1.getBytes());\n+        assertEquals(200, resp.getStatusCode());\n+        assertEquals(\"59610eed-d9de-4692-96d4-bb95a36c41ea\", resp.getId());\n+        assertEquals(\"text/plain\", resp.getContentType());\n+        assertTrue(resp.getEntity() instanceof byte[]);\n+        assertEquals(\"Hola!\", resp.getTextEntity());\n+\n+        // with only the id header using type String\n+        resp = new AhcWebSocketConduit.Response(WebSocketConstants.DEFAULT_RESPONSE_ID_KEY, TEST_RESPONSE2);\n+        assertEquals(0, resp.getStatusCode());\n+        assertEquals(\"59610eed-d9de-4692-96d4-bb95a36c41ea\", resp.getId());\n+        assertNull(resp.getContentType());\n+        assertTrue(resp.getEntity() instanceof String);\n+        assertEquals(\"Nada!\", resp.getEntity());\n+\n+        // with only the id header using type byte[]\n+        resp = new AhcWebSocketConduit.Response(WebSocketConstants.DEFAULT_RESPONSE_ID_KEY, TEST_RESPONSE2.getBytes());\n+        assertEquals(0, resp.getStatusCode());\n+        assertEquals(\"59610eed-d9de-4692-96d4-bb95a36c41ea\", resp.getId());\n+        assertNull(resp.getContentType());\n+        assertTrue(resp.getEntity() instanceof byte[]);\n+        assertEquals(\"Nada!\", resp.getTextEntity());\n+    }\n+}",
                "changes": 72,
                "blob_url": "https://github.com/apache/cxf/blob/c1a43f2e6593c7dbf3b7a40e6533e37fee2ef9a9/rt/transports/websocket/src/test/java/org/apache/cxf/transport/websocket/ahc/AhcWebSocketConduitTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6250] WebSocket conduit fails to process String based responses and throws NPE",
        "commit": "https://github.com/apache/cxf/commit/c1a43f2e6593c7dbf3b7a40e6533e37fee2ef9a9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/c1eea3f31b047a8e69605e7196b67cd5be101ff6",
        "bug_id": "cxf_134",
        "file": [
            {
                "additions": 4,
                "sha": "1ad1bd52bc930cabf0bafe0b509b06a0cbc4251a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/92a726ac642728322f795668708b0d8ea1e70653/rt/ws/security/src/main/java/org/apache/cxf/ws/security/sts/provider/SecurityTokenServiceProvider.java",
                "deletions": 2,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/sts/provider/SecurityTokenServiceProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/sts/provider/SecurityTokenServiceProvider.java?ref=92a726ac642728322f795668708b0d8ea1e70653",
                "patch": "@@ -227,10 +227,12 @@ public Source invoke(Source request) {\n         } catch (Exception e) {\n             try {\n                 SOAPFault fault = soapFactory.createFault();\n-                if (e.getMessage() == null) {\n+                if (e.getMessage() != null) {\n+                    fault.setFaultString(e.getMessage());\n+                } else if (e.getCause() != null && e.getCause().getMessage() != null) {\n                     fault.setFaultString(e.getCause().getMessage());\n                 } else {\n-                    fault.setFaultString(e.getMessage());\n+                    fault.setFaultString(\"Internal STS error\");\n                 }\n                 Detail detail = fault.addDetail();\n                 detail = fault.getDetail();",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/92a726ac642728322f795668708b0d8ea1e70653/rt/ws/security/src/main/java/org/apache/cxf/ws/security/sts/provider/SecurityTokenServiceProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoiding a NPE in the STS when creating a fault caused by a NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1133899 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/92a726ac642728322f795668708b0d8ea1e70653"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0aa08eec65301d329efce12da8e98cf0c3d3112e",
        "bug_id": "cxf_135",
        "file": [
            {
                "additions": 8,
                "sha": "620deb1b8382d613786ad2dd5c0b3d9ac6503f72",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9283d10adb87d00e68b49444a3d2222469770bf8/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java",
                "deletions": 2,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java?ref=9283d10adb87d00e68b49444a3d2222469770bf8",
                "patch": "@@ -435,12 +435,18 @@ protected void copyToResponse(HttpServletResponse response) {\n             \n             if (addHeaders || HTTP_HEADERS_SINGLE_VALUE_ONLY.contains(header)) {\n                 for (int i = 0; i < headerList.size(); i++) {\n-                    response.addHeader(header, headerObjectToString(headerList.get(i)));\n+                    Object headerObject = headerList.get(i);\n+                    if (headerObject != null) {\n+                        response.addHeader(header, headerObjectToString(headerObject));\n+                    }\n                 }\n             } else {\n                 StringBuilder sb = new StringBuilder();\n                 for (int i = 0; i < headerList.size(); i++) {\n-                    sb.append(headerObjectToString(headerList.get(i)));\n+                    Object headerObject = headerList.get(i);\n+                    if (headerObject != null) {\n+                        sb.append(headerObjectToString(headerObject));\n+                    }\n                     \n                     if (i + 1 < headerList.size()) {\n                         sb.append(',');",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/9283d10adb87d00e68b49444a3d2222469770bf8/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java"
            }
        ],
        "repo": "cxf",
        "message": "Adding NPE guards to HTTP Headers utility, thanks to Raman Malisetti",
        "commit": "https://github.com/apache/cxf/commit/9283d10adb87d00e68b49444a3d2222469770bf8"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/fe9aaf634bfc29271bf9ac59e73af23c56e42cf7",
        "bug_id": "cxf_136",
        "file": [
            {
                "additions": 14,
                "sha": "38e65992db16b98bd77982d04ba28fad7f581ec1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/56c0db05126292a61a782f05848321b9b8b8b80c/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/atmosphere/AtmosphereWebSocketHandler.java",
                "deletions": 2,
                "filename": "rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/atmosphere/AtmosphereWebSocketHandler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/atmosphere/AtmosphereWebSocketHandler.java?ref=56c0db05126292a61a782f05848321b9b8b8b80c",
                "patch": "@@ -27,6 +27,7 @@\n import java.util.Enumeration;\n import java.util.List;\n import java.util.Locale;\n+import java.util.concurrent.RejectedExecutionException;\n import java.util.logging.Level;\n import java.util.logging.Logger;\n \n@@ -99,11 +100,11 @@ public void configure(AtmosphereConfig config) {\n     \n     protected List<AtmosphereRequest> invokeService(final WebSocket webSocket,  final InputStream stream) {\n         LOG.fine(\"invokeService(WebSocket, InputStream)\");\n-        // invoke the service directly as onMessage is synchronously blocked (in jetty)\n+        // invoke the service asynchronously as onMessage is synchronously blocked (in jetty)\n         // make sure the byte array passed to this method is immutable, as the websocket framework\n         // may corrupt the byte array after this method is returned (i.e., before the data is returned in\n         // the executor's thread.\n-        destination.getExecutor().execute(new Runnable() {\n+        executeServiceTask(new Runnable() {\n             @Override\n             public void run() {\n                 HttpServletRequest request = null;\n@@ -131,6 +132,17 @@ public void run() {\n         return null;\n     }\n \n+    private void executeServiceTask(Runnable r) {\n+        try {\n+            destination.getExecutor().execute(r);\n+        } catch (RejectedExecutionException e) {\n+            LOG.warning(\n+                \"Executor queue is full, run the service invocation task in caller thread.\" \n+                + \"  Users can specify a larger executor queue to avoid this.\");\n+            r.run();\n+        }\n+    }\n+    \n     // may want to move this error reporting code to WebSocketServletHolder\n     protected void reportErrorStatus(HttpServletResponse response, int status) {\n         if (response != null) {",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/56c0db05126292a61a782f05848321b9b8b8b80c/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/atmosphere/AtmosphereWebSocketHandler.java"
            },
            {
                "additions": 14,
                "sha": "6ae3c9f55a67477ae700f5676c76059a4f826ac9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/56c0db05126292a61a782f05848321b9b8b8b80c/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/jetty/JettyWebSocket.java",
                "deletions": 2,
                "filename": "rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/jetty/JettyWebSocket.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/jetty/JettyWebSocket.java?ref=56c0db05126292a61a782f05848321b9b8b8b80c",
                "patch": "@@ -28,6 +28,7 @@\n import java.util.Locale;\n import java.util.Map;\n import java.util.TreeMap;\n+import java.util.concurrent.RejectedExecutionException;\n import java.util.logging.Level;\n import java.util.logging.Logger;\n \n@@ -109,7 +110,7 @@ private void invokeService(final byte[] data, final int offset, final int length\n         // make sure the byte array passed to this method is immutable, as the websocket framework\n         // may corrupt the byte array after this method is returned (i.e., before the data is returned in\n         // the executor's thread.\n-        manager.getExecutor().execute(new Runnable() {\n+        executeServiceTask(new Runnable() {\n             @Override\n             public void run() {\n                 HttpServletRequest request = null;\n@@ -133,7 +134,18 @@ public void run() {\n             }\n         });\n     }\n-    \n+\n+    private void executeServiceTask(Runnable r) {\n+        try {\n+            manager.getExecutor().execute(r);\n+        } catch (RejectedExecutionException e) {\n+            LOG.warning(\n+                \"Executor queue is full, run the service invocation task in caller thread.\" \n+                + \"  Users can specify a larger executor queue to avoid this.\");\n+            r.run();\n+        }\n+    }\n+\n     // may want to move this error reporting code to WebSocketServletHolder\n     private void reportErrorStatus(HttpServletResponse response, int status) {\n         if (response != null) {",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/56c0db05126292a61a782f05848321b9b8b8b80c/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/jetty/JettyWebSocket.java"
            },
            {
                "additions": 17,
                "sha": "32e681ed988e41d6e252517905e8867a999e2767",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/56c0db05126292a61a782f05848321b9b8b8b80c/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/jetty9/Jetty9WebSocketDestination.java",
                "deletions": 1,
                "filename": "rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/jetty9/Jetty9WebSocketDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/jetty9/Jetty9WebSocketDestination.java?ref=56c0db05126292a61a782f05848321b9b8b8b80c",
                "patch": "@@ -28,6 +28,8 @@\n import java.util.Locale;\n import java.util.concurrent.ExecutionException;\n import java.util.concurrent.Executor;\n+import java.util.concurrent.RejectedExecutionException;\n+import java.util.logging.Logger;\n \n import javax.servlet.DispatcherType;\n import javax.servlet.ServletConfig;\n@@ -37,6 +39,7 @@\n \n import org.apache.cxf.Bus;\n import org.apache.cxf.common.classloader.ClassLoaderUtils;\n+import org.apache.cxf.common.logging.LogUtils;\n import org.apache.cxf.service.model.EndpointInfo;\n import org.apache.cxf.transport.http.DestinationRegistry;\n import org.apache.cxf.transport.http_jetty.JettyHTTPDestination;\n@@ -62,6 +65,7 @@\n  */\n public class Jetty9WebSocketDestination extends JettyHTTPDestination implements \n     WebSocketDestinationService {\n+    private static final Logger LOG = LogUtils.getL7dLogger(Jetty9WebSocketDestination.class);\n \n     //REVISIT make these keys configurable\n     private String requestIdKey = WebSocketConstants.DEFAULT_REQUEST_ID_KEY;\n@@ -130,7 +134,7 @@ private void invoke(final byte[] data, final int offset, final int length, final\n         // make sure the byte array passed to this method is immutable, as the websocket framework\n         // may corrupt the byte array after this method is returned (i.e., before the data is returned in\n         // the executor's thread.\n-        executor.execute(new Runnable() {\n+        executeServiceTask(new Runnable() {\n             @Override\n             public void run() {\n                 HttpServletRequest request = null;\n@@ -155,6 +159,18 @@ public void run() {\n \n         });\n     }\n+\n+    private void executeServiceTask(Runnable r) {\n+        try {\n+            executor.execute(r);\n+        } catch (RejectedExecutionException e) {\n+            LOG.warning(\n+                \"Executor queue is full, run the service invocation task in caller thread.\" \n+                + \"  Users can specify a larger executor queue to avoid this.\");\n+            r.run();\n+        }\n+    }\n+\n     private void reportErrorStatus(Session session, int i, HttpServletResponse resp) {\n         try {\n             resp.sendError(i);",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/56c0db05126292a61a782f05848321b9b8b8b80c/rt/transports/websocket/src/main/java/org/apache/cxf/transport/websocket/jetty9/Jetty9WebSocketDestination.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-6075] NPE may occur at websocket destination under high load",
        "commit": "https://github.com/apache/cxf/commit/56c0db05126292a61a782f05848321b9b8b8b80c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/ebd537875cc6a785421cecacfb187d0b8f4d0988",
        "bug_id": "cxf_137",
        "file": [
            {
                "additions": 1,
                "sha": "67b01edec6e63d1fc8892900c36bace40bf80096",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/32caf7feff3b8730d797f428be5d0d80148be062/rt/rs/extensions/search/src/main/java/org/apache/cxf/jaxrs/ext/search/DefaultParamConverterProvider.java",
                "deletions": 1,
                "filename": "rt/rs/extensions/search/src/main/java/org/apache/cxf/jaxrs/ext/search/DefaultParamConverterProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/extensions/search/src/main/java/org/apache/cxf/jaxrs/ext/search/DefaultParamConverterProvider.java?ref=32caf7feff3b8730d797f428be5d0d80148be062",
                "patch": "@@ -48,7 +48,7 @@ public Date fromString(final String value) {\n         \n         @Override\n         public String toString(final Date value) {\n-            return DateTools.dateToString(value, Resolution.MILLISECOND);\n+            return value != null ? DateTools.dateToString(value, Resolution.MILLISECOND) : null;\n         }\n     }\n     ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/32caf7feff3b8730d797f428be5d0d80148be062/rt/rs/extensions/search/src/main/java/org/apache/cxf/jaxrs/ext/search/DefaultParamConverterProvider.java"
            },
            {
                "additions": 15,
                "sha": "76785d5db3b141f48c5c03ef03efa581dead4e55",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/32caf7feff3b8730d797f428be5d0d80148be062/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/extraction/BookCatalog.java",
                "deletions": 0,
                "filename": "systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/extraction/BookCatalog.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/extraction/BookCatalog.java?ref=32caf7feff3b8730d797f428be5d0d80148be062",
                "patch": "@@ -29,6 +29,7 @@\n \n import javax.activation.DataHandler;\n import javax.ws.rs.Consumes;\n+import javax.ws.rs.DELETE;\n import javax.ws.rs.GET;\n import javax.ws.rs.POST;\n import javax.ws.rs.Path;\n@@ -113,6 +114,20 @@ public Response addBook(final MultipartBody body) throws Exception {\n             reader.close();\n         }\n     }\n+    \n+    @DELETE\n+    public Response delete() throws IOException {\n+        final IndexWriter writer = new IndexWriter(directory, config);\n+        \n+        try {\n+            writer.deleteAll();\n+            writer.commit();\n+        } finally {\n+            writer.close();\n+        }  \n+        \n+        return Response.ok().build();\n+    }\n }\n \n ",
                "changes": 15,
                "blob_url": "https://github.com/apache/cxf/blob/32caf7feff3b8730d797f428be5d0d80148be062/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/extraction/BookCatalog.java"
            },
            {
                "additions": 23,
                "sha": "2cb7e24fc88a00bf374cac606b5c8358ab8d5cfe",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/32caf7feff3b8730d797f428be5d0d80148be062/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/extraction/JAXRSClientServerTikaTest.java",
                "deletions": 1,
                "filename": "systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/extraction/JAXRSClientServerTikaTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/extraction/JAXRSClientServerTikaTest.java?ref=32caf7feff3b8730d797f428be5d0d80148be062",
                "patch": "@@ -35,6 +35,7 @@\n import org.apache.cxf.jaxrs.ext.multipart.MultipartBody;\n import org.apache.cxf.jaxrs.ext.search.SearchBean;\n import org.apache.cxf.jaxrs.ext.search.SearchContextProvider;\n+import org.apache.cxf.jaxrs.ext.search.SearchUtils;\n import org.apache.cxf.jaxrs.ext.search.fiql.FiqlParser;\n import org.apache.cxf.jaxrs.lifecycle.SingletonResourceProvider;\n import org.apache.cxf.jaxrs.model.AbstractResourceInfo;\n@@ -43,6 +44,7 @@\n import org.apache.cxf.testutil.common.AbstractBusTestServerBase;\n import org.apache.lucene.search.ScoreDoc;\n import org.junit.BeforeClass;\n+import org.junit.Before;\n import org.junit.Ignore;\n import org.junit.Test;\n \n@@ -57,6 +59,7 @@ protected void run() {\n             final Map< String, Object > properties = new HashMap< String, Object >();        \n             properties.put(\"search.query.parameter.name\", \"$filter\");\n             properties.put(\"search.parser\", new FiqlParser< SearchBean >(SearchBean.class));\n+            properties.put(SearchUtils.DATE_FORMAT_PROPERTY, \"yyyy/MM/dd\");\n             \n             sf.setResourceClasses(BookCatalog.class);\n             sf.setResourceProvider(BookCatalog.class, new SingletonResourceProvider(new BookCatalog()));\n@@ -90,6 +93,11 @@ public static void startServers() throws Exception {\n         createStaticBus();\n     }\n     \n+    @Before\n+    public void setUp() {\n+        createWebClient(\"/catalog\").delete();        \n+    }\n+    \n     @Test\n     public void testUploadIndexAndSearchPdfFile() {\n         final WebClient wc = createWebClient(\"/catalog\").type(MediaType.MULTIPART_FORM_DATA);\n@@ -99,9 +107,23 @@ public void testUploadIndexAndSearchPdfFile() {\n             getClass().getResourceAsStream(\"/files/testPDF.pdf\"), disposition);\n         wc.post(new MultipartBody(attachment));\n         \n-        final Collection<ScoreDoc> hits = search(\"modified=le=2007-09-16\");        \n+        final Collection<ScoreDoc> hits = search(\"modified=le=2007-09-16T09:00:00\");        \n         assertEquals(hits.size(), 1);\n     }\n+    \n+    @Test\n+    public void testUploadIndexAndSearchPdfFileUsingUserDefinedDatePattern() {\n+        final WebClient wc = createWebClient(\"/catalog\").type(MediaType.MULTIPART_FORM_DATA);\n+        \n+        final ContentDisposition disposition = new ContentDisposition(\"attachment;filename=testPDF.pdf\");\n+        final Attachment attachment = new Attachment(\"root\", \n+            getClass().getResourceAsStream(\"/files/testPDF.pdf\"), disposition);\n+        wc.post(new MultipartBody(attachment));\n+        \n+        // Use user-defined date pattern\n+        final Collection<ScoreDoc> custom = search(\"modified=le=2007/09/16\");        \n+        assertEquals(custom.size(), 1);\n+    }\n \n     @SuppressWarnings(\"unchecked\")\n     private Collection<ScoreDoc> search(final String expression) {",
                "changes": 24,
                "blob_url": "https://github.com/apache/cxf/blob/32caf7feff3b8730d797f428be5d0d80148be062/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/extraction/JAXRSClientServerTikaTest.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-5549: Introduce Tika Search Visitor. Added contextual property systest and fixed NPE (DefaultParamConverterProvider)",
        "commit": "https://github.com/apache/cxf/commit/32caf7feff3b8730d797f428be5d0d80148be062"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9be6ef67c1099992a44e91cf1af48b43123d6cbc",
        "bug_id": "cxf_138",
        "file": [
            {
                "additions": 3,
                "sha": "9f2a178b9fb3e7aae955087c6776de18552cdaf9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/388ee56113467653f48f02d1d927b91a8ce9de45/core/src/main/java/org/apache/cxf/interceptor/ClientFaultConverter.java",
                "deletions": 0,
                "filename": "core/src/main/java/org/apache/cxf/interceptor/ClientFaultConverter.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/interceptor/ClientFaultConverter.java?ref=388ee56113467653f48f02d1d927b91a8ce9de45",
                "patch": "@@ -169,6 +169,9 @@ protected void processFaultDetail(Fault fault, Message msg) {\n             \n             try {\n                 Class<?> exClass = faultWanted.getProperty(Class.class.getName(), Class.class);\n+                if (exClass == null) {\n+                    return;\n+                }\n                 if (e == null) { \n                     Constructor<?> constructor = exClass.getConstructor(new Class[]{String.class});\n                     e = constructor.newInstance(new Object[]{fault.getMessage()});",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/388ee56113467653f48f02d1d927b91a8ce9de45/core/src/main/java/org/apache/cxf/interceptor/ClientFaultConverter.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5872] Fix NPE when Dispatch clients trying to process a fault",
        "commit": "https://github.com/apache/cxf/commit/388ee56113467653f48f02d1d927b91a8ce9de45"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d40ea830bd7ddd973d9b2b15b42783f30a399790",
        "bug_id": "cxf_139",
        "file": [
            {
                "additions": 1,
                "sha": "d1d6abd81488e0096aed248ea4cac8acd7a0ba66",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0fdde9e2b7057328a71c978a0b1727a80a8078db/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduit.java",
                "deletions": 1,
                "filename": "rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduit.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduit.java?ref=0fdde9e2b7057328a71c978a0b1727a80a8078db",
                "patch": "@@ -217,7 +217,7 @@ public boolean isRepeatable() {\n             .setSocketTimeout((int) csPolicy.getReceiveTimeout())\n             .setConnectTimeout((int) csPolicy.getConnectionTimeout());\n         Proxy p = proxyFactory.createProxy(csPolicy , uri);\n-        if (p != null) {\n+        if (p != null && p.type() != Proxy.Type.DIRECT) {\n             InetSocketAddress isa = (InetSocketAddress)p.address();\n             HttpHost proxy = new HttpHost(isa.getHostName(), isa.getPort());\n             b.setProxy(proxy);",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/0fdde9e2b7057328a71c978a0b1727a80a8078db/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduit.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5836] Fix NPE when nonProxyHosts is used\nPatch from Nicolas Sprauel applied",
        "commit": "https://github.com/apache/cxf/commit/0fdde9e2b7057328a71c978a0b1727a80a8078db"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/403a4fb83a23b6bae60bc12eb48c357d1f822040",
        "bug_id": "cxf_140",
        "file": [
            {
                "additions": 3,
                "sha": "08129280fedc032e6841617ab055fcc85ba98321",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/68372daf6074e38d9297bb69a7810c51a70bae3e/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/AbstractSTSClient.java",
                "deletions": 1,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/AbstractSTSClient.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/AbstractSTSClient.java?ref=68372daf6074e38d9297bb69a7810c51a70bae3e",
                "patch": "@@ -638,11 +638,13 @@ protected void createClient() throws BusException, EndpointException {\n             EndpointInfo ei = service.getEndpointInfo(endpointName);\n             Endpoint endpoint = new EndpointImpl(bus, service, ei);\n             client = new ClientImpl(bus, endpoint);\n-        } else {\n+        } else if (location != null) {\n             Endpoint endpoint = STSUtils.createSTSEndpoint(bus, namespace, null, location, soapVersion,\n                                                            policy, endpointName);\n \n             client = new ClientImpl(bus, endpoint);\n+        } else {\n+            throw new TrustException(LOG, \"NO_LOCATION\");\n         }\n         \n         client.getInFaultInterceptors().addAll(inFault);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/68372daf6074e38d9297bb69a7810c51a70bae3e/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/AbstractSTSClient.java"
            },
            {
                "additions": 1,
                "sha": "570dacd51f98da49c42d909166b0d6969a80b58a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/68372daf6074e38d9297bb69a7810c51a70bae3e/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/Messages.properties",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/Messages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/Messages.properties?ref=68372daf6074e38d9297bb69a7810c51a70bae3e",
                "patch": "@@ -27,3 +27,4 @@ VALIDATION_FAILED=Validation of security token failed: {0}\n NO_USER_PASSWORD=No user name and/or password is available, name: {0}, password: {1}\n ADDRESS_NOT_MATCHED=Cannot match the address {0} to the WSDL received via WS-MEX\n WS_MEX_ERROR=Exception when trying to retrieve/process a WSDL via WS-MEX\n+NO_LOCATION=The STSClient is not configured with either a location or wsdlLocation property",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/68372daf6074e38d9297bb69a7810c51a70bae3e/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/Messages.properties"
            }
        ],
        "repo": "cxf",
        "message": "Avoiding NPE if either a location/wsdlLocation is not configured on the STSClient",
        "commit": "https://github.com/apache/cxf/commit/68372daf6074e38d9297bb69a7810c51a70bae3e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5daca2d2bc1e771468fcad6d22c6b0db843e24cb",
        "bug_id": "cxf_141",
        "file": [
            {
                "additions": 4,
                "sha": "e7c91d3f8aea39be2d40b456ac72d7d62c2d180a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/403a4fb83a23b6bae60bc12eb48c357d1f822040/core/src/main/java/org/apache/cxf/common/util/PropertiesLoaderUtils.java",
                "deletions": 0,
                "filename": "core/src/main/java/org/apache/cxf/common/util/PropertiesLoaderUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/common/util/PropertiesLoaderUtils.java?ref=403a4fb83a23b6bae60bc12eb48c357d1f822040",
                "patch": "@@ -63,6 +63,10 @@ public static Properties loadAllProperties(String resourceName, ClassLoader clas\n                                                Logger logger, Level level, String msg)\n         throws IOException {\n         Properties properties = new Properties();\n+        // Set default class loader if neccessary\n+        if (classLoader == null) {\n+            classLoader = PropertiesLoaderUtils.class.getClassLoader();\n+        }\n         Enumeration<URL> urls = classLoader.getResources(resourceName);\n \n         while (urls.hasMoreElements()) {",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/403a4fb83a23b6bae60bc12eb48c357d1f822040/core/src/main/java/org/apache/cxf/common/util/PropertiesLoaderUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5822] Fixing a possible NPE in PropertiesLoaderUtils, patch from Christoph E\u00dfer applied",
        "commit": "https://github.com/apache/cxf/commit/403a4fb83a23b6bae60bc12eb48c357d1f822040"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1900e1f4ace53bc112c16f36d846f25905daab4c",
        "bug_id": "cxf_142",
        "file": [
            {
                "additions": 6,
                "sha": "1319936973ab7462c322a46405189f6683a5b839",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/db470d74ba946246428168d3c50c60ff0116cbe6/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java",
                "deletions": 0,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java?ref=db470d74ba946246428168d3c50c60ff0116cbe6",
                "patch": "@@ -495,6 +495,12 @@ protected void addMessageFromBinding(ExtensibilityElement ext, BindingOperationI\n \n         ServiceInfo serviceInfo = bop.getBinding().getService();\n \n+        if (header != null && header.getMessage() == null) {\n+            throw new RuntimeException(\"Problem with WSDL: soap:header element\" \n+                + \" for operation \" + bop.getName() + \" under binding \" + bop.getBinding().getName()\n+                + \" does not contain a valid message attribute.\");\n+        }\n+        \n         if (header != null && serviceInfo.getMessage(header.getMessage()) == null) {\n             Definition def = (Definition)serviceInfo.getProperty(WSDLServiceBuilder.WSDL_DEFINITION);\n             SchemaCollection schemas = serviceInfo.getXmlSchemaCollection();",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/db470d74ba946246428168d3c50c60ff0116cbe6/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5793] A better error message than an NPE if the \"message\" attribute isn't there.",
        "commit": "https://github.com/apache/cxf/commit/db470d74ba946246428168d3c50c60ff0116cbe6"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/8b457fda0421ed5594a9e5e19349e265c5b1fbf8",
        "bug_id": "cxf_143",
        "file": [
            {
                "additions": 4,
                "sha": "703b552396e88f3f5eb08f7e9e65f6e9c24e2dc3",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8c138e03557e85601a5f2a4a10905eda5673590f/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPDestination.java",
                "deletions": 2,
                "filename": "rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPDestination.java?ref=8c138e03557e85601a5f2a4a10905eda5673590f",
                "patch": "@@ -51,6 +51,7 @@\n import org.apache.cxf.transport.http.DestinationRegistry;\n import org.apache.cxf.transport.http_jetty.continuations.JettyContinuationProvider;\n import org.apache.cxf.transport.https.CertConstraintsJaxBUtils;\n+import org.apache.cxf.transports.http.configuration.HTTPServerPolicy;\n import org.eclipse.jetty.http.Generator;\n import org.eclipse.jetty.io.AbstractConnection;\n import org.eclipse.jetty.server.AbstractHttpConnection.Output;\n@@ -242,8 +243,9 @@ protected void doService(ServletContext context,\n                 setHeadFalse(c);\n             }\n         }\n-        if (getServer().isSetRedirectURL()) {\n-            resp.sendRedirect(getServer().getRedirectURL());\n+        HTTPServerPolicy sp = getServer();\n+        if (sp.isSetRedirectURL()) {\n+            resp.sendRedirect(sp.getRedirectURL());\n             resp.flushBuffer();\n             baseRequest.setHandled(true);\n             return;",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/8c138e03557e85601a5f2a4a10905eda5673590f/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPDestination.java"
            },
            {
                "additions": 21,
                "sha": "62367c5bdf18baa186c5609192b2cae8f5f18282",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8c138e03557e85601a5f2a4a10905eda5673590f/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "deletions": 12,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java?ref=8c138e03557e85601a5f2a4a10905eda5673590f",
                "patch": "@@ -111,7 +111,7 @@\n     protected final String path;\n \n     // Configuration values\n-    protected HTTPServerPolicy serverPolicy;\n+    protected volatile HTTPServerPolicy serverPolicy;\n     protected String contextMatchStrategy = \"stem\";\n     protected boolean fixedParameterOrder;\n     protected boolean multiplexWithAddress;\n@@ -513,18 +513,28 @@ private void initConfig() {\n         cproviderFactory = bus.getExtension(ContinuationProviderFactory.class);\n     }\n \n-    private void calcServerPolicy(Message m) {\n+    private synchronized HTTPServerPolicy calcServerPolicyInternal(Message m) {\n+        HTTPServerPolicy sp = serverPolicy;\n         if (!serverPolicyCalced) {\n             PolicyDataEngine pde = bus.getExtension(PolicyDataEngine.class);\n             if (pde != null) {\n-                serverPolicy = pde.getServerEndpointPolicy(m, endpointInfo, this, new ServerPolicyCalculator());\n+                sp = pde.getServerEndpointPolicy(m, endpointInfo, this, new ServerPolicyCalculator());\n             }\n-            if (null == serverPolicy) {\n-                serverPolicy = endpointInfo.getTraversedExtensor(\n+            if (null == sp) {\n+                sp = endpointInfo.getTraversedExtensor(\n                         new HTTPServerPolicy(), HTTPServerPolicy.class);\n             }\n+            serverPolicy = sp;\n+            serverPolicyCalced = true;\n+        }\n+        return sp;\n+    }\n+    private HTTPServerPolicy calcServerPolicy(Message m) {\n+        HTTPServerPolicy sp = serverPolicy;\n+        if (!serverPolicyCalced) {\n+            sp = calcServerPolicyInternal(m);\n         }\n-        serverPolicyCalced = true;\n+        return sp;\n     }\n     \n     /**\n@@ -581,9 +591,9 @@ protected OutputStream flushHeaders(Message outMessage, boolean getStream) throw\n         }\n \n         cacheInput(outMessage);\n-        calcServerPolicy(outMessage);\n-        if (serverPolicy != null) {\n-            new Headers(outMessage).setFromServerPolicy(serverPolicy);\n+        HTTPServerPolicy sp = calcServerPolicy(outMessage);\n+        if (sp != null) {\n+            new Headers(outMessage).setFromServerPolicy(sp);\n         }\n \n         OutputStream responseStream = null;\n@@ -879,8 +889,7 @@ public void setMultiplexWithAddress(boolean multiplexWithAddress) {\n     }\n \n     public HTTPServerPolicy getServer() {\n-        calcServerPolicy(null);\n-        return serverPolicy;\n+        return calcServerPolicy(null);\n     }\n \n     public void setServer(HTTPServerPolicy server) {\n@@ -892,7 +901,7 @@ public void setServer(HTTPServerPolicy server) {\n     \n     public void assertMessage(Message message) {\n         PolicyDataEngine pde = bus.getExtension(PolicyDataEngine.class);\n-        pde.assertMessage(message, serverPolicy, new ServerPolicyCalculator());\n+        pde.assertMessage(message, calcServerPolicy(message), new ServerPolicyCalculator());\n     }\n \n     public boolean canAssert(QName type) {",
                "changes": 33,
                "blob_url": "https://github.com/apache/cxf/blob/8c138e03557e85601a5f2a4a10905eda5673590f/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix a startup race condition that could lead to a NPE",
        "commit": "https://github.com/apache/cxf/commit/8c138e03557e85601a5f2a4a10905eda5673590f"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0cab9af902645eb9b72b3225c8271afa6002684f",
        "bug_id": "cxf_144",
        "file": [
            {
                "additions": 7,
                "sha": "d72854832440383ad7d4d5045a67473097f8641a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/503663709c991b26d28d41a3689f5ed56cdda1d6/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java",
                "deletions": 3,
                "filename": "rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java?ref=503663709c991b26d28d41a3689f5ed56cdda1d6",
                "patch": "@@ -166,7 +166,7 @@ public Object invoke(Object o, Method m, Object[] params) throws Throwable {\n         \n         List<Object> pathParams = getPathParamValues(m, params, types, beanParamsList, ori);\n         \n-        int bodyIndex = getBodyIndex(types, ori);\n+        int bodyIndex = getBodyIndex(types, ori, params);\n         \n         UriBuilder builder = getCurrentBuilder().clone(); \n         if (isRoot) {\n@@ -205,13 +205,16 @@ public Object invoke(Object o, Method m, Object[] params) throws Throwable {\n         \n         headers.putAll(paramHeaders);\n         setRequestHeaders(headers, ori, types.containsKey(ParameterType.FORM), \n-            bodyIndex == -1 ? null : params[bodyIndex].getClass(), m.getReturnType());\n+            bodyIndex == -1 || params[bodyIndex] == null ? null : params[bodyIndex].getClass(), m.getReturnType());\n         \n         getState().setTemplates(getTemplateParametersMap(ori.getURITemplate(), pathParams));\n         \n         Object body = null;\n         if (bodyIndex != -1) {\n             body = params[bodyIndex];\n+            if (body == null) {\n+                bodyIndex = -1;\n+            }\n         } else if (types.containsKey(ParameterType.FORM))  {\n             body = handleForm(m, params, types, beanParamsList);\n         } else if (types.containsKey(ParameterType.REQUEST_BODY))  {\n@@ -275,7 +278,8 @@ private static boolean isIgnorableParameter(Method m, Parameter p) {\n     }\n     \n     private static int getBodyIndex(MultivaluedMap<ParameterType, Parameter> map, \n-                                    OperationResourceInfo ori) {\n+                                    OperationResourceInfo ori,\n+                                    Object[] params) {\n         List<Parameter> list = map.get(ParameterType.REQUEST_BODY);\n         int index = list == null || list.size() > 1 ? -1 : list.get(0).getIndex();\n         if (ori.isSubResourceLocator() && index != -1) {",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/503663709c991b26d28d41a3689f5ed56cdda1d6/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java"
            },
            {
                "additions": 4,
                "sha": "af4bdc660f92668399c3e09e2a5d22108c5858b5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/503663709c991b26d28d41a3689f5ed56cdda1d6/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/BookStore.java",
                "deletions": 2,
                "filename": "systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/BookStore.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/BookStore.java?ref=503663709c991b26d28d41a3689f5ed56cdda1d6",
                "patch": "@@ -562,9 +562,11 @@ public Response outfault() {\n     @Path(\"/collectionBook\")\n     @Produces({\"application/xml\", \"application/json\" })\n     @Consumes({\"application/xml\", \"application/json\" })\n-    public List<Book> postBookGetCollection(Book book) throws Exception {\n+    public List<Book> postBookGetCollection(@Nullable Book book) throws Exception {\n         List<Book> list = new ArrayList<Book>();\n-        list.add(book);\n+        if (book != null) {\n+            list.add(book);\n+        }\n         return list;\n     }\n     ",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/503663709c991b26d28d41a3689f5ed56cdda1d6/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/BookStore.java"
            },
            {
                "additions": 11,
                "sha": "c2f355c2e4c99c9d3d6fb5e7a97785f70d695714",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/503663709c991b26d28d41a3689f5ed56cdda1d6/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerBookTest.java",
                "deletions": 0,
                "filename": "systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerBookTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerBookTest.java?ref=503663709c991b26d28d41a3689f5ed56cdda1d6",
                "patch": "@@ -619,6 +619,17 @@ public void testPostCollectionOfBooksWebClient() throws Exception {\n         assertEquals(200, wc.getResponse().getStatus());\n     }\n     \n+    @Test\n+    public void testPostNullGetEmptyCollectionProxy() throws Exception {\n+        \n+        String endpointAddress = \"http://localhost:\" + PORT; \n+        BookStore bs = JAXRSClientFactory.create(endpointAddress, BookStore.class);\n+        List<Book> books = bs.postBookGetCollection(null);\n+        assertNotNull(books);\n+        assertEquals(0, books.size());\n+        \n+    }\n+    \n     @Test\n     public void testPostObjectGetCollection() throws Exception {\n         ",
                "changes": 11,
                "blob_url": "https://github.com/apache/cxf/blob/503663709c991b26d28d41a3689f5ed56cdda1d6/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerBookTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5749] Avoiding NPE if client proxy is given null body parameter",
        "commit": "https://github.com/apache/cxf/commit/503663709c991b26d28d41a3689f5ed56cdda1d6"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/2bc939a7f5af22f0ed9ea3d81ea93ec33630a6f6",
        "bug_id": "cxf_145",
        "file": [
            {
                "additions": 2,
                "sha": "92503938f560267ff0e26fe5c35b620f431a48a8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ba2db0b4691f6ebc83ce41d3b73a77ef9d929793/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java",
                "deletions": 1,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java?ref=ba2db0b4691f6ebc83ce41d3b73a77ef9d929793",
                "patch": "@@ -204,7 +204,8 @@ private void processService(JavaModel model) throws ToolException {\n                         name = name.substring(name.lastIndexOf('.') + 1);\n                     }\n                 }\n-                if (serviceBinding2.getJaxwsClass().getComments() != null) {\n+                if (serviceBinding2.getJaxwsClass() != null\n+                    && serviceBinding2.getJaxwsClass().getComments() != null) {\n                     jaxwsBinding.setClassJavaDoc(serviceBinding2.getJaxwsClass().getComments());\n                 }\n                 if (!serviceBinding2.getPackageJavaDoc().equals(\"\")) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/ba2db0b4691f6ebc83ce41d3b73a77ef9d929793/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java"
            },
            {
                "additions": 12,
                "sha": "c5b24a516a04909cd5ae99dacf80694e474496e9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ba2db0b4691f6ebc83ce41d3b73a77ef9d929793/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java",
                "deletions": 0,
                "filename": "tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java?ref=ba2db0b4691f6ebc83ce41d3b73a77ef9d929793",
                "patch": "@@ -1176,4 +1176,16 @@ public void testCXF4128() throws Exception {\n             fail(\"shouldn't get exception\");\n         }\n     }\n+    \n+    @Test\n+    public void testCXF4452() throws Exception {\n+        try {\n+            env.put(ToolConstants.CFG_WSDLURL, getLocation(\"/wsdl2java_wsdl/hello_world.wsdl\"));\n+            env.put(ToolConstants.CFG_BINDING, getLocation(\"/wsdl2java_wsdl/cxf4452/binding.xml\"));\n+            processor.setContext(env);\n+            processor.execute();\n+        } catch (Exception e) {\n+            fail(\"shouldn't get exception\");\n+        }\n+    }\n }",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/ba2db0b4691f6ebc83ce41d3b73a77ef9d929793/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java"
            },
            {
                "additions": 23,
                "sha": "a7ec7dc92f16a5547d0d69ebaf23807c43539905",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/ba2db0b4691f6ebc83ce41d3b73a77ef9d929793/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf4452/binding.xml",
                "deletions": 0,
                "filename": "tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf4452/binding.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf4452/binding.xml?ref=ba2db0b4691f6ebc83ce41d3b73a77ef9d929793",
                "patch": "@@ -0,0 +1,23 @@\n+<!--\n+  Licensed to the Apache Software Foundation (ASF) under one\n+  or more contributor license agreements. See the NOTICE file\n+  distributed with this work for additional information\n+  regarding copyright ownership. The ASF licenses this file\n+  to you under the Apache License, Version 2.0 (the\n+  \"License\"); you may not use this file except in compliance\n+  with the License. You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing,\n+  software distributed under the License is distributed on an\n+  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+  KIND, either express or implied. See the License for the\n+  specific language governing permissions and limitations\n+  under the License.\n+-->\n+<bindings wsdlLocation=\"../hello_world.wsdl\" xmlns=\"http://java.sun.com/xml/ns/jaxws\" xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\">\n+<bindings node=\"wsdl:definitions/wsdl:service[@name='SOAPService']\">\n+<package name=\"cxf4452.binding.test\"/>\n+</bindings>\n+</bindings>",
                "changes": 23,
                "blob_url": "https://github.com/apache/cxf/blob/ba2db0b4691f6ebc83ce41d3b73a77ef9d929793/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf4452/binding.xml"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4452]NullPointerException when trying to customize the package name for a service definition without customizing the class name.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1370687 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ba2db0b4691f6ebc83ce41d3b73a77ef9d929793"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5287bb35f427feef1a8d1daffee157abda488d51",
        "bug_id": "cxf_146",
        "file": [
            {
                "additions": 2,
                "sha": "e3f724562d7297b1b66f062c7322dedd01508ecf",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c9c443054401f594f8046d63d8c1fe56523fce4e/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMDeliveryInterceptor.java",
                "deletions": 0,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMDeliveryInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMDeliveryInterceptor.java?ref=c9c443054401f594f8046d63d8c1fe56523fce4e",
                "patch": "@@ -22,6 +22,7 @@\n import java.util.logging.Logger;\n \n import org.apache.cxf.common.logging.LogUtils;\n+import org.apache.cxf.interceptor.OutgoingChainInterceptor;\n import org.apache.cxf.message.Message;\n import org.apache.cxf.message.MessageUtils;\n import org.apache.cxf.phase.Phase;\n@@ -37,6 +38,7 @@\n   \n     public RMDeliveryInterceptor() {\n         super(Phase.POST_INVOKE);\n+        addBefore(OutgoingChainInterceptor.class.getName());\n     }\n     \n     // Interceptor interface ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/c9c443054401f594f8046d63d8c1fe56523fce4e/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMDeliveryInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5600] WSDL generation at WS-RM endpoint leads to NPE in the server's log",
        "commit": "https://github.com/apache/cxf/commit/c9c443054401f594f8046d63d8c1fe56523fce4e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/38043b6b2ba4b5dbae82b5272c00e5f7cc870e56",
        "bug_id": "cxf_147",
        "file": [
            {
                "additions": 5,
                "sha": "f77fd35bcfd2e9fe8f4267ad1ed9d9afb03d50af",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/TransportBindingHandler.java",
                "deletions": 1,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/TransportBindingHandler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/TransportBindingHandler.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -62,6 +62,7 @@\n import org.apache.ws.security.WSEncryptionPart;\n import org.apache.ws.security.WSPasswordCallback;\n import org.apache.ws.security.WSSConfig;\n+import org.apache.ws.security.WSSecurityException;\n import org.apache.ws.security.components.crypto.Crypto;\n import org.apache.ws.security.conversation.ConversationConstants;\n import org.apache.ws.security.message.WSSecDKSign;\n@@ -281,7 +282,6 @@ private void handleEndorsingToken(\n         if (token instanceof IssuedToken\n             || token instanceof SecureConversationToken\n             || token instanceof SecurityContextToken\n-            || token instanceof KeyValueToken\n             || token instanceof KerberosToken) {\n             addSig(\n                 signatureValues, \n@@ -387,6 +387,10 @@ private void handleEndorsingToken(\n         boolean tokenIncluded = false;\n         // Get the issued token\n         SecurityToken secTok = getSecurityToken();\n+        if (secTok == null) {\n+            LOG.fine(\"The retrieved SecurityToken was null\");\n+            throw new WSSecurityException(\"The retrieved SecurityToken was null\");\n+        }\n         \n         if (includeToken(token.getInclusion())) {\n             //Add the token",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/TransportBindingHandler.java"
            },
            {
                "additions": 47,
                "sha": "f9af3349f20be3658447b1f25da496e730c10a41",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/AbstractSupportingTokenPolicyValidator.java",
                "deletions": 6,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/AbstractSupportingTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/AbstractSupportingTokenPolicyValidator.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -19,6 +19,7 @@\n \n package org.apache.cxf.ws.security.wss4j.policyvalidators;\n \n+import java.security.PublicKey;\n import java.security.cert.X509Certificate;\n import java.util.ArrayList;\n import java.util.Arrays;\n@@ -299,6 +300,40 @@ protected boolean processX509Tokens() {\n         return true;\n     }\n     \n+    /**\n+     * Process KeyValue Tokens.\n+     */\n+    protected boolean processKeyValueTokens() {\n+        List<WSSecurityEngineResult> tokenResults = new ArrayList<WSSecurityEngineResult>();\n+        for (WSSecurityEngineResult wser : signedResults) {\n+            PublicKey publicKey = \n+                (PublicKey)wser.get(WSSecurityEngineResult.TAG_PUBLIC_KEY);\n+            if (publicKey != null) {\n+                tokenResults.add(wser);\n+            }\n+        }\n+        \n+        if (tokenResults.isEmpty()) {\n+            return false;\n+        }\n+        \n+        if (signed && !areTokensSigned(tokenResults)) {\n+            return false;\n+        }\n+        if (encrypted && !areTokensEncrypted(tokenResults)) {\n+            return false;\n+        }\n+        if (endorsed && !checkEndorsed(tokenResults)) {\n+            return false;\n+        }\n+        \n+        if (!validateSignedEncryptedPolicies(tokenResults)) {\n+            return false;\n+        }\n+        \n+        return true;\n+    }\n+    \n     /**\n      * Validate (SignedParts|SignedElements|EncryptedParts|EncryptedElements) policies of this\n      * SupportingToken.\n@@ -447,7 +482,7 @@ private boolean areTokensSigned(List<WSSecurityEngineResult> tokens) {\n         if (!isTLSInUse()) {\n             for (WSSecurityEngineResult wser : tokens) {\n                 Element tokenElement = (Element)wser.get(WSSecurityEngineResult.TAG_TOKEN_ELEMENT);\n-                if (!isTokenSigned(tokenElement)) {\n+                if (tokenElement == null || !isTokenSigned(tokenElement)) {\n                     return false;\n                 }\n             }\n@@ -462,7 +497,7 @@ private boolean areTokensEncrypted(List<WSSecurityEngineResult> tokens) {\n         if (!isTLSInUse()) {\n             for (WSSecurityEngineResult wser : tokens) {\n                 Element tokenElement = (Element)wser.get(WSSecurityEngineResult.TAG_TOKEN_ELEMENT);\n-                if (!isTokenEncrypted(tokenElement)) {\n+                if (tokenElement == null || !isTokenEncrypted(tokenElement)) {\n                     return false;\n                 }\n             }\n@@ -538,6 +573,8 @@ private boolean checkSignatureOrEncryptionResult(\n             Integer actInt = (Integer)token.get(WSSecurityEngineResult.TAG_ACTION);\n             BinarySecurity binarySecurity = \n                 (BinarySecurity)token.get(WSSecurityEngineResult.TAG_BINARY_SECURITY_TOKEN);\n+            PublicKey publicKey = \n+                (PublicKey)token.get(WSSecurityEngineResult.TAG_PUBLIC_KEY);\n             if (binarySecurity instanceof X509Security\n                 || binarySecurity instanceof PKIPathSecurity) {\n                 X509Certificate foundCert = \n@@ -560,14 +597,18 @@ private boolean checkSignatureOrEncryptionResult(\n                         return true;\n                     }\n                 }\n-            } else {\n-                byte[] foundSecret = (byte[])token.get(WSSecurityEngineResult.TAG_SECRET);\n-                if (foundSecret != null && Arrays.equals(foundSecret, secret)) {\n+            } else if (publicKey != null) {\n+                PublicKey foundPublicKey = \n+                    (PublicKey)token.get(WSSecurityEngineResult.TAG_PUBLIC_KEY);\n+                if (publicKey.equals(foundPublicKey)) {\n                     return true;\n                 }\n+            } else {\n+                byte[] foundSecret = (byte[])token.get(WSSecurityEngineResult.TAG_SECRET);\n                 byte[] derivedKey = \n                     (byte[])token.get(WSSecurityEngineResult.TAG_ENCRYPTED_EPHEMERAL_KEY);\n-                if (derivedKey != null && Arrays.equals(derivedKey, secret)) {\n+                if ((foundSecret != null && Arrays.equals(foundSecret, secret))\n+                    || (derivedKey != null && Arrays.equals(derivedKey, secret))) {\n                     return true;\n                 }\n             }",
                "changes": 53,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/AbstractSupportingTokenPolicyValidator.java"
            },
            {
                "additions": 5,
                "sha": "b51589557ed888410b0e8b6c482194a57c9fe2a7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/ConcreteSupportingTokenPolicyValidator.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/ConcreteSupportingTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/ConcreteSupportingTokenPolicyValidator.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -29,6 +29,7 @@\n import org.apache.cxf.ws.security.policy.SPConstants;\n import org.apache.cxf.ws.security.policy.model.IssuedToken;\n import org.apache.cxf.ws.security.policy.model.KerberosToken;\n+import org.apache.cxf.ws.security.policy.model.KeyValueToken;\n import org.apache.cxf.ws.security.policy.model.SamlToken;\n import org.apache.cxf.ws.security.policy.model.SecurityContextToken;\n import org.apache.cxf.ws.security.policy.model.SupportingToken;\n@@ -98,6 +99,10 @@ public boolean validatePolicy(\n                     if (!processX509Tokens()) {\n                         processingFailed = true;\n                     }\n+                } else if (token instanceof KeyValueToken) {\n+                    if (!processKeyValueTokens()) {\n+                        processingFailed = true;\n+                    }\n                 } else if (token instanceof SecurityContextToken) {\n                     if (!processSCTokens()) {\n                         processingFailed = true;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/ConcreteSupportingTokenPolicyValidator.java"
            },
            {
                "additions": 5,
                "sha": "bc218478e00638e75668aa3d91d73d6cd00a0b5c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EncryptedTokenPolicyValidator.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EncryptedTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EncryptedTokenPolicyValidator.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -29,6 +29,7 @@\n import org.apache.cxf.ws.security.policy.SPConstants;\n import org.apache.cxf.ws.security.policy.model.IssuedToken;\n import org.apache.cxf.ws.security.policy.model.KerberosToken;\n+import org.apache.cxf.ws.security.policy.model.KeyValueToken;\n import org.apache.cxf.ws.security.policy.model.SamlToken;\n import org.apache.cxf.ws.security.policy.model.SecurityContextToken;\n import org.apache.cxf.ws.security.policy.model.SupportingToken;\n@@ -94,6 +95,10 @@ public boolean validatePolicy(\n                     if (!processX509Tokens()) {\n                         processingFailed = true;\n                     }\n+                } else if (token instanceof KeyValueToken) {\n+                    if (!processKeyValueTokens()) {\n+                        processingFailed = true;\n+                    }\n                 } else if (token instanceof SecurityContextToken) {\n                     if (!processSCTokens()) {\n                         processingFailed = true;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EncryptedTokenPolicyValidator.java"
            },
            {
                "additions": 5,
                "sha": "344b0aa4bc0b2ac61acd8833c4a9408d7d94025c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EndorsingEncryptedTokenPolicyValidator.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EndorsingEncryptedTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EndorsingEncryptedTokenPolicyValidator.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -29,6 +29,7 @@\n import org.apache.cxf.ws.security.policy.SPConstants;\n import org.apache.cxf.ws.security.policy.model.IssuedToken;\n import org.apache.cxf.ws.security.policy.model.KerberosToken;\n+import org.apache.cxf.ws.security.policy.model.KeyValueToken;\n import org.apache.cxf.ws.security.policy.model.SamlToken;\n import org.apache.cxf.ws.security.policy.model.SecurityContextToken;\n import org.apache.cxf.ws.security.policy.model.SupportingToken;\n@@ -94,6 +95,10 @@ public boolean validatePolicy(\n                     if (!processX509Tokens()) {\n                         processingFailed = true;\n                     }\n+                } else if (token instanceof KeyValueToken) {\n+                    if (!processKeyValueTokens()) {\n+                        processingFailed = true;\n+                    }\n                 } else if (token instanceof UsernameToken) {\n                     if (!processUsernameTokens()) {\n                         processingFailed = true;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EndorsingEncryptedTokenPolicyValidator.java"
            },
            {
                "additions": 5,
                "sha": "d99509c6887e6c5061e4bd2c9e092e163572c4dd",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EndorsingTokenPolicyValidator.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EndorsingTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EndorsingTokenPolicyValidator.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -29,6 +29,7 @@\n import org.apache.cxf.ws.security.policy.SPConstants;\n import org.apache.cxf.ws.security.policy.model.IssuedToken;\n import org.apache.cxf.ws.security.policy.model.KerberosToken;\n+import org.apache.cxf.ws.security.policy.model.KeyValueToken;\n import org.apache.cxf.ws.security.policy.model.SamlToken;\n import org.apache.cxf.ws.security.policy.model.SecurityContextToken;\n import org.apache.cxf.ws.security.policy.model.SupportingToken;\n@@ -93,6 +94,10 @@ public boolean validatePolicy(\n                     if (!processX509Tokens()) {\n                         processingFailed = true;\n                     }\n+                } else if (token instanceof KeyValueToken) {\n+                    if (!processKeyValueTokens()) {\n+                        processingFailed = true;\n+                    }\n                 } else if (token instanceof UsernameToken) {\n                     if (!processUsernameTokens()) {\n                         processingFailed = true;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/EndorsingTokenPolicyValidator.java"
            },
            {
                "additions": 5,
                "sha": "0b292b09500b9b2e4b7d6c7835f2195408312b1d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEncryptedTokenPolicyValidator.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEncryptedTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEncryptedTokenPolicyValidator.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -29,6 +29,7 @@\n import org.apache.cxf.ws.security.policy.SPConstants;\n import org.apache.cxf.ws.security.policy.model.IssuedToken;\n import org.apache.cxf.ws.security.policy.model.KerberosToken;\n+import org.apache.cxf.ws.security.policy.model.KeyValueToken;\n import org.apache.cxf.ws.security.policy.model.SamlToken;\n import org.apache.cxf.ws.security.policy.model.SecurityContextToken;\n import org.apache.cxf.ws.security.policy.model.SupportingToken;\n@@ -95,6 +96,10 @@ public boolean validatePolicy(\n                     if (!processX509Tokens()) {\n                         processingFailed = true;\n                     }\n+                } else if (token instanceof KeyValueToken) {\n+                    if (!processKeyValueTokens()) {\n+                        processingFailed = true;\n+                    }\n                 } else if (token instanceof SecurityContextToken) {\n                     if (!processSCTokens()) {\n                         processingFailed = true;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEncryptedTokenPolicyValidator.java"
            },
            {
                "additions": 5,
                "sha": "489c739b26996f49235c1b22444164bc3b35d294",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEndorsingEncryptedTokenPolicyValidator.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEndorsingEncryptedTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEndorsingEncryptedTokenPolicyValidator.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -29,6 +29,7 @@\n import org.apache.cxf.ws.security.policy.SPConstants;\n import org.apache.cxf.ws.security.policy.model.IssuedToken;\n import org.apache.cxf.ws.security.policy.model.KerberosToken;\n+import org.apache.cxf.ws.security.policy.model.KeyValueToken;\n import org.apache.cxf.ws.security.policy.model.SamlToken;\n import org.apache.cxf.ws.security.policy.model.SecurityContextToken;\n import org.apache.cxf.ws.security.policy.model.SupportingToken;\n@@ -99,6 +100,10 @@ public boolean validatePolicy(\n                     if (!processX509Tokens()) {\n                         processingFailed = true;\n                     }\n+                } else if (token instanceof KeyValueToken) {\n+                    if (!processKeyValueTokens()) {\n+                        processingFailed = true;\n+                    }\n                 } else if (token instanceof UsernameToken) {\n                     if (!processUsernameTokens()) {\n                         processingFailed = true;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEndorsingEncryptedTokenPolicyValidator.java"
            },
            {
                "additions": 5,
                "sha": "4f9886f300f6090ed7c530c106180fde8374650c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEndorsingTokenPolicyValidator.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEndorsingTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEndorsingTokenPolicyValidator.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -29,6 +29,7 @@\n import org.apache.cxf.ws.security.policy.SPConstants;\n import org.apache.cxf.ws.security.policy.model.IssuedToken;\n import org.apache.cxf.ws.security.policy.model.KerberosToken;\n+import org.apache.cxf.ws.security.policy.model.KeyValueToken;\n import org.apache.cxf.ws.security.policy.model.SamlToken;\n import org.apache.cxf.ws.security.policy.model.SecurityContextToken;\n import org.apache.cxf.ws.security.policy.model.SupportingToken;\n@@ -97,6 +98,10 @@ public boolean validatePolicy(\n                     if (!processX509Tokens()) {\n                         processingFailed = true;\n                     }\n+                } else if (token instanceof KeyValueToken) {\n+                    if (!processKeyValueTokens()) {\n+                        processingFailed = true;\n+                    }\n                 } else if (token instanceof UsernameToken) {\n                     if (!processUsernameTokens()) {\n                         processingFailed = true;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedEndorsingTokenPolicyValidator.java"
            },
            {
                "additions": 5,
                "sha": "a1543a04790e57cc5f281ae17c3ff68279751154",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedTokenPolicyValidator.java",
                "deletions": 0,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedTokenPolicyValidator.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -29,6 +29,7 @@\n import org.apache.cxf.ws.security.policy.SPConstants;\n import org.apache.cxf.ws.security.policy.model.IssuedToken;\n import org.apache.cxf.ws.security.policy.model.KerberosToken;\n+import org.apache.cxf.ws.security.policy.model.KeyValueToken;\n import org.apache.cxf.ws.security.policy.model.SamlToken;\n import org.apache.cxf.ws.security.policy.model.SecurityContextToken;\n import org.apache.cxf.ws.security.policy.model.SupportingToken;\n@@ -98,6 +99,10 @@ public boolean validatePolicy(\n                     if (!processX509Tokens()) {\n                         processingFailed = true;\n                     }\n+                } else if (token instanceof KeyValueToken) {\n+                    if (!processKeyValueTokens()) {\n+                        processingFailed = true;\n+                    }\n                 } else if (token instanceof SecurityContextToken) {\n                     if (!processSCTokens()) {\n                         processingFailed = true;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SignedTokenPolicyValidator.java"
            },
            {
                "additions": 24,
                "sha": "eec7606c09f90c1f32f05350ed63edf49e2327e2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/systests/ws-security/src/test/java/org/apache/cxf/systest/ws/x509/X509TokenTest.java",
                "deletions": 0,
                "filename": "systests/ws-security/src/test/java/org/apache/cxf/systest/ws/x509/X509TokenTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-security/src/test/java/org/apache/cxf/systest/ws/x509/X509TokenTest.java?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -488,6 +488,30 @@ public void testTransportSupportingSigned() throws Exception {\n         x509Port.doubleIt(25);\n     }\n     \n+    @org.junit.Test\n+    public void testTransportKVT() throws Exception {\n+        if (!unrestrictedPoliciesInstalled) {\n+            return;\n+        }\n+\n+        SpringBusFactory bf = new SpringBusFactory();\n+        URL busFile = X509TokenTest.class.getResource(\"client/client.xml\");\n+\n+        Bus bus = bf.createBus(busFile.toString());\n+        SpringBusFactory.setDefaultBus(bus);\n+        SpringBusFactory.setThreadDefaultBus(bus);\n+\n+        URL wsdl = X509TokenTest.class.getResource(\"DoubleItX509.wsdl\");\n+        Service service = Service.create(wsdl, SERVICE_QNAME);\n+        QName portQName = new QName(NAMESPACE, \"DoubleItTransportKVTPort\");\n+        DoubleItPortType x509Port = \n+                service.getPort(portQName, DoubleItPortType.class);\n+        updateAddressPort(x509Port, PORT2);\n+        x509Port.doubleIt(25);\n+        \n+        bus.shutdown(true);\n+    }\n+    \n     private boolean checkUnrestrictedPoliciesInstalled() {\n         try {\n             byte[] data = {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07};",
                "changes": 24,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/systests/ws-security/src/test/java/org/apache/cxf/systest/ws/x509/X509TokenTest.java"
            },
            {
                "additions": 60,
                "sha": "29250fdcdf8cc75be7d88d3ff165fdd084cad01c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/DoubleItX509.wsdl",
                "deletions": 0,
                "filename": "systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/DoubleItX509.wsdl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/DoubleItX509.wsdl?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -275,6 +275,23 @@\n             </wsdl:fault>\n         </wsdl:operation>\n     </wsdl:binding>\n+    <wsdl:binding name=\"DoubleItTransportKVTBinding\" type=\"tns:DoubleItPortType\">\n+        <wsp:PolicyReference URI=\"#DoubleItTransportKVTPolicy\" />\n+        <soap:binding style=\"document\"\n+            transport=\"http://schemas.xmlsoap.org/soap/http\" />\n+        <wsdl:operation name=\"DoubleIt\">\n+            <soap:operation soapAction=\"\" />\n+            <wsdl:input>\n+                <soap:body use=\"literal\" />\n+            </wsdl:input>\n+            <wsdl:output>\n+                <soap:body use=\"literal\" />\n+            </wsdl:output>\n+            <wsdl:fault name=\"DoubleItFault\">\n+                <soap:body use=\"literal\" name=\"DoubleItFault\" />\n+            </wsdl:fault>\n+        </wsdl:operation>\n+    </wsdl:binding>\n     \n     <wsdl:service name=\"DoubleItService\">\n         <wsdl:port name=\"DoubleItKeyIdentifierPort\" binding=\"tns:DoubleItKeyIdentifierBinding\">\n@@ -326,6 +343,10 @@\n                    binding=\"tns:DoubleItTransportSupportingSignedBinding\">\n             <soap:address location=\"https://localhost:9002/DoubleItX509TransportSupportingSigned\" />\n         </wsdl:port>\n+        <wsdl:port name=\"DoubleItTransportKVTPort\" \n+                   binding=\"tns:DoubleItTransportKVTBinding\">\n+            <soap:address location=\"https://localhost:9002/DoubleItX509TransportKVT\" />\n+        </wsdl:port>\n     </wsdl:service>\n \n     <wsp:Policy wsu:Id=\"DoubleItKeyIdentifierPolicy\">\n@@ -846,6 +867,45 @@\n         </wsp:ExactlyOne>\n     </wsp:Policy>\n     \n+    <wsp:Policy wsu:Id=\"DoubleItTransportKVTPolicy\">\n+        <wsp:ExactlyOne>\n+            <wsp:All>\n+                <sp:TransportBinding>\n+                    <wsp:Policy>\n+                        <sp:TransportToken>\n+                            <wsp:Policy>\n+                                <sp:HttpsToken>\n+                                    <wsp:Policy/>\n+                                </sp:HttpsToken>\n+                            </wsp:Policy>\n+                        </sp:TransportToken>\n+                        <sp:Layout>\n+                            <wsp:Policy>\n+                                <sp:Lax />\n+                            </wsp:Policy>\n+                        </sp:Layout>\n+                        <sp:IncludeTimestamp />\n+                        <sp:AlgorithmSuite>\n+                            <wsp:Policy>\n+                                <sp:Basic128 />\n+                            </wsp:Policy>\n+                        </sp:AlgorithmSuite>\n+                    </wsp:Policy>\n+                </sp:TransportBinding>\n+                <sp:EndorsingSupportingTokens>\n+                   <wsp:Policy>\n+                        <sp:KeyValueToken\n+                           sp:IncludeToken=\"http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/Never\">\n+                           <wsp:Policy>\n+                              <sp:RsaKeyValue />\n+                           </wsp:Policy>\n+                        </sp:KeyValueToken>\n+                    </wsp:Policy>\n+                </sp:EndorsingSupportingTokens>\n+            </wsp:All>\n+        </wsp:ExactlyOne>\n+    </wsp:Policy>\n+    \n     \n     <wsp:Policy wsu:Id=\"DoubleItBinding_DoubleIt_Input_Policy\">\n       <wsp:ExactlyOne>",
                "changes": 60,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/DoubleItX509.wsdl"
            },
            {
                "additions": 11,
                "sha": "77a745c382010803122a9f418d617671cb43990a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/client/client.xml",
                "deletions": 0,
                "filename": "systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/client/client.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/client/client.xml?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -222,6 +222,17 @@\n        </jaxws:properties>\n     </jaxws:client>\n     \n+    <jaxws:client name=\"{http://www.example.org/contract/DoubleIt}DoubleItTransportKVTPort\" \n+                  createdFromAPI=\"true\">\n+       <jaxws:properties>\n+           <entry key=\"ws-security.signature.properties\" \n+                  value=\"org/apache/cxf/systest/ws/wssec10/client/alice.properties\"/> \n+           <entry key=\"ws-security.signature.username\" value=\"alice\"/>\n+           <entry key=\"ws-security.callback-handler\" \n+                  value=\"org.apache.cxf.systest.ws.wssec10.client.KeystorePasswordCallback\"/>\n+       </jaxws:properties>\n+    </jaxws:client>\n+    \n     <http:conduit name=\"https://localhost:.*\">\n         <http:tlsClientParameters disableCNCheck=\"true\">\n             <sec:trustManagers>",
                "changes": 11,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/client/client.xml"
            },
            {
                "additions": 18,
                "sha": "ea91e7cb4dfe88bf9f6cb154bc0a994aebf19d05",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/afb813100c5a27dea58ec4a62f74c8959fb44e58/systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/server/server.xml",
                "deletions": 0,
                "filename": "systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/server/server.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/server/server.xml?ref=afb813100c5a27dea58ec4a62f74c8959fb44e58",
                "patch": "@@ -364,4 +364,22 @@\n      \n     </jaxws:endpoint> \n     \n+    <jaxws:endpoint \n+       id=\"TransportKVT\"\n+       address=\"https://localhost:${testutil.ports.Server.2}/DoubleItX509TransportKVT\" \n+       serviceName=\"s:DoubleItService\"\n+       endpointName=\"s:DoubleItTransportKVTPort\"\n+       xmlns:s=\"http://www.example.org/contract/DoubleIt\"\n+       implementor=\"org.apache.cxf.systest.ws.common.DoubleItImpl\"\n+       wsdlLocation=\"org/apache/cxf/systest/ws/x509/DoubleItX509.wsdl\"\n+       depends-on=\"tls-settings\">\n+        \n+       <jaxws:properties>\n+          <entry key=\"ws-security.encryption.properties\" \n+                  value=\"org/apache/cxf/systest/ws/wssec10/client/alice.properties\"/> \n+          <entry key=\"ws-security.is-bsp-compliant\" value=\"false\"/>\n+       </jaxws:properties> \n+     \n+    </jaxws:endpoint> \n+    \n </beans>",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/afb813100c5a27dea58ec4a62f74c8959fb44e58/systests/ws-security/src/test/resources/org/apache/cxf/systest/ws/x509/server/server.xml"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4357][CXF-4358] - Support KeyValueTokens via the Transport binding\n - Also fixed \"NullPointerException in the TransportBindingHandler\".\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1346342 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/afb813100c5a27dea58ec4a62f74c8959fb44e58"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d81e85b5765774bef64b43a10e6b1e8bab26cbf8",
        "bug_id": "cxf_148",
        "file": [
            {
                "additions": 4,
                "sha": "ff5c79c29f1eef0e25d304bccd232fa1079e4301",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/1df1d2127bd64b26fa763e4d8d7ec8f67767f757/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java",
                "deletions": 1,
                "filename": "rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java?ref=1df1d2127bd64b26fa763e4d8d7ec8f67767f757",
                "patch": "@@ -756,7 +756,10 @@ private static String getActionFromServiceModel(Message message,\n                 // http://www.w3.org/2005/02/addressing/wsdl schema\n                 for (BindingFaultInfo bfi : bindingOpInfo.getFaults()) {\n                     FaultInfo fi = bfi.getFaultInfo();\n-                    if (t != null && t.getClass().isAssignableFrom(fi.getMessagePart(0).getTypeClass())) {\n+                    Class<?> fiTypeClass = fi.getMessagePart(0).getTypeClass();\n+                    if (t != null \n+                            && fiTypeClass != null\n+                            && t.getClass().isAssignableFrom(fiTypeClass)) {\n                         if (fi.getExtensionAttributes() == null) {\n                             continue;\n                         }",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/1df1d2127bd64b26fa763e4d8d7ec8f67767f757/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java"
            },
            {
                "additions": 44,
                "sha": "9403729986396dfdfc6167dd8d5293cd7c27d15d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/1df1d2127bd64b26fa763e4d8d7ec8f67767f757/rt/ws/addr/src/test/java/org/apache/cxf/ws/addressing/MAPAggregatorTest.java",
                "deletions": 6,
                "filename": "rt/ws/addr/src/test/java/org/apache/cxf/ws/addressing/MAPAggregatorTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/addr/src/test/java/org/apache/cxf/ws/addressing/MAPAggregatorTest.java?ref=1df1d2127bd64b26fa763e4d8d7ec8f67767f757",
                "patch": "@@ -22,8 +22,11 @@\n \n import java.lang.reflect.Method;\n import java.util.ArrayList;\n+import java.util.Collection;\n import java.util.Collections;\n import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n \n import javax.wsdl.extensions.ExtensibilityElement;\n import javax.xml.namespace.QName;\n@@ -38,16 +41,19 @@\n import org.apache.cxf.binding.Binding;\n import org.apache.cxf.binding.soap.SoapFault;\n import org.apache.cxf.endpoint.Endpoint;\n+import org.apache.cxf.interceptor.Fault;\n import org.apache.cxf.message.Exchange;\n import org.apache.cxf.message.Message;\n import org.apache.cxf.message.MessageImpl;\n import org.apache.cxf.phase.PhaseManager;\n import org.apache.cxf.phase.PhaseManagerImpl;\n import org.apache.cxf.service.Service;\n+import org.apache.cxf.service.model.BindingFaultInfo;\n import org.apache.cxf.service.model.BindingInfo;\n import org.apache.cxf.service.model.BindingMessageInfo;\n import org.apache.cxf.service.model.BindingOperationInfo;\n import org.apache.cxf.service.model.EndpointInfo;\n+import org.apache.cxf.service.model.FaultInfo;\n import org.apache.cxf.service.model.InterfaceInfo;\n import org.apache.cxf.service.model.MessageInfo.Type;\n import org.apache.cxf.service.model.OperationInfo;\n@@ -292,6 +298,7 @@ public void testResponderOutboundFault() throws Exception {\n                                                       true,\n                                                       false,\n                                                       true});\n+        \n         aggregator.mediate(message, true);\n         control.verify();\n         verifyMessage(message, false, true, true);\n@@ -405,7 +412,7 @@ private Message setUpMessage(boolean[] params)\n         \n         Message message = getMessage();        \n         Exchange exchange = getExchange();\n-        setUpOutbound(message, exchange, outbound);\n+        setUpOutbound(message, exchange, outbound, fault);\n         setUpMessageProperty(message,\n                              REQUESTOR_ROLE,\n                              Boolean.valueOf(requestor));\n@@ -574,7 +581,14 @@ private void setUpResponder(Message message,\n                 setUpMessageProperty(message,\n                                      REQUESTOR_ROLE,\n                                      Boolean.FALSE);\n-                expectedAction = \"http://foo/bar/SEI/opResponse\";\n+                \n+                if (fault) {\n+                    message.setContent(Exception.class, new SoapFault(\"blah\",\n+                            (Throwable) new Exception(), Fault.FAULT_CODE_SERVER));\n+                    expectedAction = \"http://foo/bar/SEI/Fault/Exception\";\n+                } else {\n+                    expectedAction = \"http://foo/bar/SEI/opResponse\";\n+                }\n             }\n             setUpMessageProperty(message,\n                                  REQUESTOR_ROLE,\n@@ -631,9 +645,9 @@ private void setUpOneway(Message message, Exchange exchange, boolean oneway) {\n         setUpExchangeOneway(exchange, oneway);\n     }\n \n-    private void setUpOutbound(Message message, Exchange exchange, boolean outbound) {\n+    private void setUpOutbound(Message message, Exchange exchange, boolean outbound, boolean fault) {\n         setUpMessageExchange(message, exchange);\n-        setUpExchangeOutbound(exchange, message, outbound);\n+        setUpExchangeOutbound(exchange, message, outbound, fault);\n     }\n \n     private void setUpConduit(Message message, Exchange exchange) {\n@@ -657,6 +671,10 @@ private void setUpMethod(Message message, Exchange exchange, Method method) {\n                         opInfo.createMessage(new QName(\"http://foo/bar\", \"opRequest\"), Type.INPUT));\n         opInfo.setOutput(\"opResponse\",\n                          opInfo.createMessage(new QName(\"http://foo/bar\", \"opResponse\"), Type.INPUT));\n+        FaultInfo finfo = opInfo.addFault(new QName(\"http://foo/bar\", \"opFault\"),\n+                new QName(\"http://foo/bar\", \"opFault\"));\n+        finfo.addMessagePart(\"fault\");\n+        \n         BindingOperationInfo bindingOpInfo = new TestBindingOperationInfo(opInfo);\n         setUpExchangeGet(exchange, BindingOperationInfo.class, bindingOpInfo);\n         // Usual fun with EasyMock not always working as expected\n@@ -718,8 +736,13 @@ private void setUpExchangeOneway(Exchange exchange, boolean oneway) {\n \n     private void setUpExchangeOutbound(Exchange exchange,\n                                        Message message,\n-                                       boolean outbound) {\n-        exchange.getOutMessage();\n+                                       boolean outbound,\n+                                       boolean fault) {\n+        if (fault) {\n+            exchange.getOutFaultMessage();\n+        } else {\n+            exchange.getOutMessage();\n+        }\n         EasyMock.expectLastCall().andReturn(outbound ? message : null).anyTimes();\n         //exchange.setOutMessage(outbound ? message : new MessageImpl());\n     }\n@@ -797,8 +820,18 @@ private void verifyMessage(Message message,\n     }\n \n     private static class TestBindingOperationInfo extends BindingOperationInfo {\n+        private Map<QName, BindingFaultInfo> faults;\n+        \n         public TestBindingOperationInfo(OperationInfo oi) {\n             opInfo = oi;\n+            \n+            Collection<FaultInfo> of = opInfo.getFaults();\n+            if (of != null && !of.isEmpty()) {\n+                faults = new ConcurrentHashMap<QName, BindingFaultInfo>(of.size());\n+                for (FaultInfo fault : of) {\n+                    faults.put(fault.getFaultName(), new BindingFaultInfo(fault, this));\n+                }\n+            }\n         }\n \n         public BindingMessageInfo getInput() {\n@@ -808,5 +841,10 @@ public BindingMessageInfo getInput() {\n         public BindingMessageInfo getOutput() {\n             return new TestBindingMessageInfo();\n         }\n+\n+        @Override\n+        public Collection<BindingFaultInfo> getFaults() {\n+            return Collections.unmodifiableCollection(this.faults.values());\n+        }        \n     }\n }",
                "changes": 50,
                "blob_url": "https://github.com/apache/cxf/blob/1df1d2127bd64b26fa763e4d8d7ec8f67767f757/rt/ws/addr/src/test/java/org/apache/cxf/ws/addressing/MAPAggregatorTest.java"
            }
        ],
        "repo": "cxf",
        "message": "WS-A support throws NullPointerException in cases where we aren't mapped\ndirectly to class objects (example: camel/smx routes and such)\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@903443 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/1df1d2127bd64b26fa763e4d8d7ec8f67767f757"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6cc192c2f4a0d45ec277f800c267ef242b44f0d4",
        "bug_id": "cxf_149",
        "file": [
            {
                "additions": 11,
                "sha": "c1744293b9a695450e5bcbaeaec89a90c1d89353",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/743b191f333a49c527f2e750d7d03aa0ea30af33/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/services/RedirectionBasedGrantService.java",
                "deletions": 6,
                "filename": "rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/services/RedirectionBasedGrantService.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/services/RedirectionBasedGrantService.java?ref=743b191f333a49c527f2e750d7d03aa0ea30af33",
                "patch": "@@ -145,9 +145,9 @@ protected Response startAuthorization(MultivaluedMap<String, String> params,\n             return createErrorResponse(params, redirectUri, OAuthConstants.INVALID_SCOPE);\n         }\n         // Convert the requested scopes to OAuthPermission instances\n-        List<OAuthPermission> permissions = null;\n+        List<OAuthPermission> requestedPermissions = null;\n         try {\n-            permissions = getDataProvider().convertScopeToPermissions(client, requestedScope);\n+            requestedPermissions = getDataProvider().convertScopeToPermissions(client, requestedScope);\n         } catch (OAuthServiceException ex) {\n             return createErrorResponse(params, redirectUri, OAuthConstants.INVALID_SCOPE);\n         }\n@@ -161,18 +161,21 @@ protected Response startAuthorization(MultivaluedMap<String, String> params,\n         ServerAccessToken preAuthorizedToken = getDataProvider().getPreauthorizedToken(\n             client, requestedScope, userSubject, supportedGrantType);\n         final boolean authorizationCanBeSkipped = \n-            preAuthorizedToken != null || canAuthorizationBeSkipped(client, permissions);\n+            preAuthorizedToken != null \n+            || canAuthorizationBeSkipped(client, requestedScope, requestedPermissions);\n         \n         // Populate the authorization challenge data \n         OAuthAuthorizationData data = \n-            createAuthorizationData(client, params, redirectUri, userSubject, permissions, \n+            createAuthorizationData(client, params, redirectUri, userSubject, requestedPermissions, \n                                     authorizationCanBeSkipped);\n         \n         if (authorizationCanBeSkipped) {\n+            List<OAuthPermission> approvedScopes = \n+                preAuthorizedToken != null ? preAuthorizedToken.getScopes() : requestedPermissions; \n             return createGrant(data,\n                                client, \n                                requestedScope,\n-                               OAuthUtils.convertPermissionsToScopeList(preAuthorizedToken.getScopes()),\n+                               OAuthUtils.convertPermissionsToScopeList(approvedScopes),\n                                userSubject,\n                                preAuthorizedToken);\n         }\n@@ -181,7 +184,9 @@ protected Response startAuthorization(MultivaluedMap<String, String> params,\n         \n     }\n     \n-    protected boolean canAuthorizationBeSkipped(Client client, List<OAuthPermission> permissions) {\n+    protected boolean canAuthorizationBeSkipped(Client client, \n+                                                List<String> requestedScope, \n+                                                List<OAuthPermission> permissions) {\n         return false;\n     }\n ",
                "changes": 17,
                "blob_url": "https://github.com/apache/cxf/blob/743b191f333a49c527f2e750d7d03aa0ea30af33/rt/rs/security/oauth-parent/oauth2/src/main/java/org/apache/cxf/rs/security/oauth2/services/RedirectionBasedGrantService.java"
            },
            {
                "additions": 9,
                "sha": "bb3b27e4f1966503a9b5ab3fbcddad1c7d7b9540",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/743b191f333a49c527f2e750d7d03aa0ea30af33/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcAuthorizationCodeService.java",
                "deletions": 3,
                "filename": "rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcAuthorizationCodeService.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcAuthorizationCodeService.java?ref=743b191f333a49c527f2e750d7d03aa0ea30af33",
                "patch": "@@ -29,13 +29,19 @@\n @Path(\"/login\")\n public class OidcAuthorizationCodeService extends AuthorizationCodeGrantService {\n     private static final String OPEN_ID_CONNECT_SCOPE = \"openid\";\n+    private boolean skipAuthorizationWithOidcScope;\n     @Override\n-    protected boolean canAuthorizationBeSkipped(Client client, List<OAuthPermission> permissions) {\n+    protected boolean canAuthorizationBeSkipped(Client client,\n+                                                List<String> requestedScope,\n+                                                List<OAuthPermission> permissions) {\n         // No need to challenge the authenticated user with the authorization form \n         // if all the client application redirecting a user needs is to get this user authenticated\n         // with OIDC IDP\n-        return permissions.size() == 1 \n-            && OPEN_ID_CONNECT_SCOPE.equals(permissions.get(0).getPermission());\n+        return requestedScope.size() == 1 && skipAuthorizationWithOidcScope\n+            && OPEN_ID_CONNECT_SCOPE.equals(requestedScope.get(0));\n+    }\n+    public void setSkipAuthorizationWithOidcScope(boolean skipAuthorizationWithOidcScope) {\n+        this.skipAuthorizationWithOidcScope = skipAuthorizationWithOidcScope;\n     }\n     \n }",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/743b191f333a49c527f2e750d7d03aa0ea30af33/rt/rs/security/sso/oidc/src/main/java/org/apache/cxf/rs/security/oidc/idp/OidcAuthorizationCodeService.java"
            }
        ],
        "repo": "cxf",
        "message": "Fixing NPE if the authorization is skipped and disabling the skipping the authorization in the restricted case unless a user is fine",
        "commit": "https://github.com/apache/cxf/commit/743b191f333a49c527f2e750d7d03aa0ea30af33"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/925dffc63611a9e66846848850f4f8bcc29c2ffb",
        "bug_id": "cxf_150",
        "file": [
            {
                "additions": 1,
                "sha": "83ebfa881bd616ffb14bd0aabb27f888e17499c1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/482d9d6cf8ef5499bbe88f35f6e33224d254f2ef/services/sts/sts-core/src/main/java/org/apache/cxf/sts/event/map/MapEventLogger.java",
                "deletions": 1,
                "filename": "services/sts/sts-core/src/main/java/org/apache/cxf/sts/event/map/MapEventLogger.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-core/src/main/java/org/apache/cxf/sts/event/map/MapEventLogger.java?ref=482d9d6cf8ef5499bbe88f35f6e33224d254f2ef",
                "patch": "@@ -83,7 +83,7 @@ private String format(Object value) {\n         } else if (value instanceof Date) {\n             return dateFormat.format(value);\n         } else {\n-            return value.toString();\n+            return (value == null) ? \"<null>\" : value.toString();\n         }\n     }\n ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/482d9d6cf8ef5499bbe88f35f6e33224d254f2ef/services/sts/sts-core/src/main/java/org/apache/cxf/sts/event/map/MapEventLogger.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE in MapEventLogger\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1562563 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/482d9d6cf8ef5499bbe88f35f6e33224d254f2ef"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b7a111f5c5b69d4c5abdf56cf02a4454b54fcd17",
        "bug_id": "cxf_151",
        "file": [
            {
                "additions": 3,
                "sha": "719df01affc4a24120ef494a623fc7dbf195c405",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3fbce4d5c18a1f34fa55d0c67ea730ac865bcd32/rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/common/TrustValidator.java",
                "deletions": 1,
                "filename": "rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/common/TrustValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/common/TrustValidator.java?ref=3fbce4d5c18a1f34fa55d0c67ea730ac865bcd32",
                "patch": "@@ -36,7 +36,9 @@ public void validateTrust(Crypto crypto, X509Certificate cert, PublicKey publicK\n         \n         Credential trustCredential = new Credential();\n         trustCredential.setPublicKey(publicKey);\n-        trustCredential.setCertificates(new X509Certificate[]{cert});\n+        if (cert != null) {\n+            trustCredential.setCertificates(new X509Certificate[]{cert});\n+        }\n         validator.validate(trustCredential, data);\n     }\n }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/3fbce4d5c18a1f34fa55d0c67ea730ac865bcd32/rt/rs/security/xml/src/main/java/org/apache/cxf/rs/security/common/TrustValidator.java"
            }
        ],
        "repo": "cxf",
        "message": "Potential NPE fix\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1557187 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/3fbce4d5c18a1f34fa55d0c67ea730ac865bcd32"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/c55dbb53258a2d13054508994ee352eddbe20e35",
        "bug_id": "cxf_152",
        "file": [
            {
                "additions": 3,
                "sha": "1419c174253ebbc30828e926abe4f7b7c8a98bfa",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2abb504c8716f25ce3146d56302c2b7bf1e0bc96/bin/DoMerges.java",
                "deletions": 0,
                "filename": "bin/DoMerges.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/bin/DoMerges.java?ref=2abb504c8716f25ce3146d56302c2b7bf1e0bc96",
                "patch": "@@ -844,6 +844,9 @@ public static void main (String args[]) throws Exception {\n     }\n \n     private static boolean checkAlreadyMerged(List<String[]> gitLogs, String[] logLines) throws IOException {\n+        if (gitLogs == null) {\n+            return false;\n+        }\n         for (String[] f : gitLogs) {\n             if (compareLogs(f, logLines)) {\n                 return true;",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/2abb504c8716f25ce3146d56302c2b7bf1e0bc96/bin/DoMerges.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix possible NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1374268 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/2abb504c8716f25ce3146d56302c2b7bf1e0bc96"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1518177ccd3dbaa1ad418d4b4993f91820ae7163",
        "bug_id": "cxf_153",
        "file": [
            {
                "additions": 4,
                "sha": "955c50f662b27fc0b8e0548a21ae823032d74149",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/703f9880343c66dbeb0d120d6fda27fbe0310c36/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java",
                "deletions": 2,
                "filename": "maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java?ref=703f9880343c66dbeb0d120d6fda27fbe0310c36",
                "patch": "@@ -174,8 +174,10 @@ protected boolean shouldRun(GenericWsdlOption genericWsdlOption,\n     protected List<String> generateCommandLine(GenericWsdlOption wsdlOption)\n         throws MojoExecutionException {\n         List<String> ret = super.generateCommandLine(wsdlOption);\n-        ret.add(0, \"-encoding\");\n-        ret.add(1, encoding);\n+        if (encoding != null) {\n+            ret.add(0, \"-encoding\");\n+            ret.add(1, encoding);\n+        }\n         return ret;\n     }\n ",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/703f9880343c66dbeb0d120d6fda27fbe0310c36/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix possible NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1334142 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/703f9880343c66dbeb0d120d6fda27fbe0310c36"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4fc64407f4a7c88ab4bbbec895d89ed326e19d7d",
        "bug_id": "cxf_154",
        "file": [
            {
                "additions": 1,
                "sha": "4099d25aa8d4e711a53f955a75839adb8b0a1dcb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/fe5ac178c5aaf1510693654d6029cb7274f8ee86/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java",
                "deletions": 1,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java?ref=fe5ac178c5aaf1510693654d6029cb7274f8ee86",
                "patch": "@@ -510,7 +510,7 @@ private void addSchemas(Options opts,\n                     if (key.contains(\"#\")) {\n                         for (ServiceInfo si : serviceList) {\n                             for (SchemaInfo sci : si.getSchemas()) {\n-                                if (key.equals(sci.getSystemId())) {\n+                                if (key != null && key.equals(sci.getSystemId())) {\n                                     key = null;\n                                 }\n                             }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/fe5ac178c5aaf1510693654d6029cb7274f8ee86/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1325378 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/fe5ac178c5aaf1510693654d6029cb7274f8ee86"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e9b329714c83c41b3f9d7efd1ccff0014b5bdcff",
        "bug_id": "cxf_155",
        "file": [
            {
                "additions": 2,
                "sha": "2eccb16bfa07d5c1c3766b696b5533651e16efd1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8321bbd912ca7462ac77e21b3f15c1accad932c7/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/io/DataReaderImpl.java",
                "deletions": 1,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/io/DataReaderImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/io/DataReaderImpl.java?ref=8321bbd912ca7462ac77e21b3f15c1accad932c7",
                "patch": "@@ -66,7 +66,8 @@ public Object read(T input) {\n         \n         public boolean handleEvent(ValidationEvent event) {\n             String msg = event.getMessage();\n-            if (msg.contains(\":Id\") \n+            if (msg != null \n+                && msg.contains(\":Id\") \n                 && (msg.startsWith(\"cvc-type.3.1.1: \") \n                     || msg.startsWith(\"cvc-type.3.2.2: \") \n                     || msg.startsWith(\"cvc-complex-type.3.1.1: \")",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/8321bbd912ca7462ac77e21b3f15c1accad932c7/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/io/DataReaderImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "A NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1304008 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/8321bbd912ca7462ac77e21b3f15c1accad932c7"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/da18cfcf54dac8e0bba96b351a106a7c2f19467c",
        "bug_id": "cxf_156",
        "file": [
            {
                "additions": 5,
                "sha": "2fde06e2f182d7d95f72b613fd9c7554a6260ddf",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/42fa58e77a0f85ed12c7d0b2fc97d98f77ef067a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java",
                "deletions": 1,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java?ref=42fa58e77a0f85ed12c7d0b2fc97d98f77ef067a",
                "patch": "@@ -872,7 +872,11 @@ private static XMLStreamReader findExtraNamespaces(XMLStreamReader source) {\n                 f.setAccessible(true);\n                 String ns[] = (String[])f.get(c);\n                 for (int x = 0; x < ns.length; x += 2) {\n-                    nsMap.put(ns[x], ns[x + 1]);\n+                    if (ns[x] == null) {\n+                        nsMap.put(null, ns[x + 1]);\n+                    } else {\n+                        nsMap.put(ns[x], ns[x + 1]);\n+                    }\n                 }\n             }\n         } catch (Throwable t) {",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/42fa58e77a0f85ed12c7d0b2fc97d98f77ef067a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix potential NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1298956 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/42fa58e77a0f85ed12c7d0b2fc97d98f77ef067a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5c018542425f2ec5ce22f523e99de7544b8199de",
        "bug_id": "cxf_157",
        "file": [
            {
                "additions": 2,
                "sha": "ed935e4d03d5d00e1df1f5942e69d4715397f881",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/83875108b5de522efb12a7846e4618ad3e17f18d/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/impl/MAPAggregatorImpl.java",
                "deletions": 1,
                "filename": "rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/impl/MAPAggregatorImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/impl/MAPAggregatorImpl.java?ref=83875108b5de522efb12a7846e4618ad3e17f18d",
                "patch": "@@ -537,7 +537,8 @@ protected boolean mediate(Message message, boolean isFault) {\n                                                           Names.HEADER_REQUIRED_NAME));\n                 }\n             }\n-            if (MessageUtils.isPartialResponse(message)) {\n+            if (MessageUtils.isPartialResponse(message) \n+                && message.getExchange().getOutMessage() != null) {\n                 // marked as a partial response, let's see if it really is\n                 MessageInfo min = message.get(MessageInfo.class);\n                 MessageInfo mout = message.getExchange().getOutMessage().get(MessageInfo.class);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/83875108b5de522efb12a7846e4618ad3e17f18d/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/impl/MAPAggregatorImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1294827 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/83875108b5de522efb12a7846e4618ad3e17f18d"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e6e8b142e88f45d81ac548b3be6134055cadb0d6",
        "bug_id": "cxf_158",
        "file": [
            {
                "additions": 1,
                "sha": "a25c0e6949d7c40e59fb7c2518d5596bfc0dc5cd",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d3bd4a21808bae33ae41b70ce2ba551ad1ae3dc9/rt/transports/http/src/main/java/org/apache/cxf/transport/http/osgi/HTTPTransportActivator.java",
                "deletions": 0,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/osgi/HTTPTransportActivator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/osgi/HTTPTransportActivator.java?ref=d3bd4a21808bae33ae41b70ce2ba551ad1ae3dc9",
                "patch": "@@ -268,6 +268,7 @@ private void applyTlsClientParameters(Dictionary<String, String> d, HTTPConduit\n                     StringTokenizer st = new StringTokenizer(v, \",\");\n                     FiltersType ft = p.getCipherSuitesFilter();\n                     if (ft == null) {\n+                        ft = new FiltersType();\n                         p.setCipherSuitesFilter(ft);\n                     }\n                     List<String> lst = \"include\".equals(k) ? ft.getInclude() : ft.getExclude();",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/d3bd4a21808bae33ae41b70ce2ba551ad1ae3dc9/rt/transports/http/src/main/java/org/apache/cxf/transport/http/osgi/HTTPTransportActivator.java"
            }
        ],
        "repo": "cxf",
        "message": "Prevent an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1242796 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/d3bd4a21808bae33ae41b70ce2ba551ad1ae3dc9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6f1b9bad25a6097b4c76a92efa2e6828a7f21dc6",
        "bug_id": "cxf_159",
        "file": [
            {
                "additions": 3,
                "sha": "e1e583e24903eeeb0081edbb8664875bb918e2b9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8eee4588c23f492f2cf4831617f4f0dc1bc93753/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "deletions": 0,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java?ref=8eee4588c23f492f2cf4831617f4f0dc1bc93753",
                "patch": "@@ -462,6 +462,9 @@ void setPolicies(Map<String, List<String>> headers) {\n      * @param outMessage\n      */\n     private void cacheInput(Message outMessage) {\n+        if (outMessage.getExchange() == null) {\n+            return;\n+        }\n         Message inMessage = outMessage.getExchange().getInMessage();\n         if (inMessage == null) {\n             return;",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/8eee4588c23f492f2cf4831617f4f0dc1bc93753/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java"
            }
        ],
        "repo": "cxf",
        "message": "NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@900899 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/8eee4588c23f492f2cf4831617f4f0dc1bc93753"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/2c040aebc0ffdb599c2ff3dc3b9e8a4c8fa952ee",
        "bug_id": "cxf_160",
        "file": [
            {
                "additions": 1,
                "sha": "9d625261067463b7e073f79d2b2237aa133c931d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/842729f78df0ca634d8a3a2aedd42ff57a8269a3/common/common/src/main/java/org/apache/cxf/resource/URIResolver.java",
                "deletions": 1,
                "filename": "common/common/src/main/java/org/apache/cxf/resource/URIResolver.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/common/common/src/main/java/org/apache/cxf/resource/URIResolver.java?ref=842729f78df0ca634d8a3a2aedd42ff57a8269a3",
                "patch": "@@ -205,7 +205,7 @@ private void tryFileSystem(String baseUriStr, String uriStr) throws IOException,\n             // do nothing\n         }\n \n-        if (is == null && baseUriStr.startsWith(\"classpath:\")) {\n+        if (is == null && baseUriStr != null && baseUriStr.startsWith(\"classpath:\")) {\n             tryClasspath(baseUriStr + uriStr);\n         }\n         if (is == null && uri != null && \"file\".equals(uri.getScheme())) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/842729f78df0ca634d8a3a2aedd42ff57a8269a3/common/common/src/main/java/org/apache/cxf/resource/URIResolver.java"
            }
        ],
        "repo": "cxf",
        "message": "Add NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@831417 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/842729f78df0ca634d8a3a2aedd42ff57a8269a3"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a228025341bc6952a0ad31e6818c17605e38a9ae",
        "bug_id": "cxf_161",
        "file": [
            {
                "additions": 3,
                "sha": "50228cd0eab8c1ea2299ff48818e325546405172",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/68e1329fa0babfc20723fd00fd2e3f7cb165ccee/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/annotator/WSActionAnnotator.java",
                "deletions": 0,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/annotator/WSActionAnnotator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/annotator/WSActionAnnotator.java?ref=68e1329fa0babfc20723fd00fd2e3f7cb165ccee",
                "patch": "@@ -85,6 +85,9 @@ public void annotate(JavaAnnotatable ja) {\n             for (FaultInfo faultInfo : operation.getFaults()) {\n                 if (faultInfo.getExtensionAttributes() != null) {\n                     QName faultAction = (QName)faultInfo.getExtensionAttribute(WSAW_ACTION_QNAME);\n+                    if (faultAction == null) {\n+                        continue;\n+                    }\n \n                     JavaException exceptionClass = getExceptionClass(method, faultInfo);                    \n                     if (!StringUtils.isEmpty(exceptionClass.getPackageName())",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/68e1329fa0babfc20723fd00fd2e3f7cb165ccee/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/annotator/WSActionAnnotator.java"
            }
        ],
        "repo": "cxf",
        "message": "Add NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@789900 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/68e1329fa0babfc20723fd00fd2e3f7cb165ccee"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f4d2145139c37b67cc3206a47fd8c4f0d11f3366",
        "bug_id": "cxf_162",
        "file": [
            {
                "additions": 1,
                "sha": "fe72d2e2a9b1ee1e9e4d5296d8bcc50672d4f50c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0246ad5cc3e2d153290cb8e768e2c5ad15698327/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPTransportFactory.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPTransportFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPTransportFactory.java?ref=0246ad5cc3e2d153290cb8e768e2c5ad15698327",
                "patch": "@@ -160,7 +160,7 @@ public Conduit getConduit(\n             : new HTTPConduit(bus, endpointInfo, target);\n         // Spring configure the conduit.  \n         String address = conduit.getAddress();\n-        if (address.indexOf('?') != -1) {\n+        if (address != null && address.indexOf('?') != -1) {\n             address = address.substring(0, address.indexOf('?'));\n         }\n         configure(conduit, conduit.getBeanName(), address);",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/0246ad5cc3e2d153290cb8e768e2c5ad15698327/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPTransportFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix possible NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@714168 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/0246ad5cc3e2d153290cb8e768e2c5ad15698327"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3d2e276bbda7eb67348089db2e7ea7279731e701",
        "bug_id": "cxf_163",
        "file": [
            {
                "additions": 3,
                "sha": "1a5ee00c28fc6d1175e35e87a44e175933189bc9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8e1dc05fcd9c2b6b3e9d7cd0eef70471e5cd0b97/core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerImpl.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerImpl.java?ref=8e1dc05fcd9c2b6b3e9d7cd0eef70471e5cd0b97",
                "patch": "@@ -337,7 +337,9 @@ private void invokeSetterActivationNSMethod(Object target, Object value) {\n                         if (ex.getLoadedObject() == null) {\n                             loadAndRegister(ex);\n                         }\n-                        ret.add(type.cast(ex.getLoadedObject()));\n+                        if (ex.getLoadedObject() != null) {\n+                            ret.add(type.cast(ex.getLoadedObject()));\n+                        }\n                     }                \n                 }\n             }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/8e1dc05fcd9c2b6b3e9d7cd0eef70471e5cd0b97/core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "If the requested extension could not be loaded, but was optional, don't add a null to the return collection or an NPE will result",
        "commit": "https://github.com/apache/cxf/commit/8e1dc05fcd9c2b6b3e9d7cd0eef70471e5cd0b97"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3bf3d07c954536d099274ebf1c5690e84ff3a423",
        "bug_id": "cxf_164",
        "file": [
            {
                "additions": 0,
                "sha": "73520106bfceab18966694425ccb6f009918efc8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d721bd15440cdacd94f5835ecfe513db891262cf/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java",
                "deletions": 1,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java?ref=d721bd15440cdacd94f5835ecfe513db891262cf",
                "patch": "@@ -300,7 +300,6 @@ protected void copyAllJaxbDeclarations(final Node schemaNode, final Element jaxw\n                     }\n                 }\n                 appinfoNode.appendChild(cloneNode);\n-                childNode = childNode.getNextSibling();\n             }\n         }\n         ",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/d721bd15440cdacd94f5835ecfe513db891262cf/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5862] Make sure we don't skip binding nodes in the binding file\nFixes a potential NPE if there are an odd number of binding nodes",
        "commit": "https://github.com/apache/cxf/commit/d721bd15440cdacd94f5835ecfe513db891262cf"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/743852fad0f04bbdcd060d3f0bc3f592a132d3d6",
        "bug_id": "cxf_165",
        "file": [
            {
                "additions": 1,
                "sha": "2f180e7350387887686400d7ee325a579b38b783",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e7013ba82626938bbfe4c62d5c0823b3a182fbb4/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ProviderFactory.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ProviderFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ProviderFactory.java?ref=e7013ba82626938bbfe4c62d5c0823b3a182fbb4",
                "patch": "@@ -1003,7 +1003,7 @@ protected static int compareClasses(Class<?> expectedCls, Object o1, Object o2)\n                 Class<?> actualType = InjectionUtils.getActualType(genericSuperType);\n                 if (expectedClass == actualType) {\n                     return new Type[]{genericSuperType};\n-                } else if (expectedClass.isAssignableFrom(actualType)) {\n+                } else if (actualType != null && expectedClass.isAssignableFrom(actualType)) {\n                     return new Type[]{};    \n                 }\n             }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/e7013ba82626938bbfe4c62d5c0823b3a182fbb4/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ProviderFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5348] Preventing NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1563198 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/e7013ba82626938bbfe4c62d5c0823b3a182fbb4"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1f60c6b3d49aa037c87c50fb1595e99448384695",
        "bug_id": "cxf_166",
        "file": [
            {
                "additions": 3,
                "sha": "df224063199e41d4479e8d28c451794ec4446fd5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/508ed233f535fb4f6187a7369aa4360599b27361/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/ServiceImpl.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/ServiceImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/ServiceImpl.java?ref=508ed233f535fb4f6187a7369aa4360599b27361",
                "patch": "@@ -270,7 +270,9 @@ private JaxWsClientEndpointImpl getJaxwsEndpoint(QName portName, AbstractService\n         \n         //When the dispatch is created from EPR, the EPR's address will be set in portInfo\n         PortInfoImpl portInfo = getPortInfo(portName);\n-        if (portInfo != null && !portInfo.getAddress().equals(ei.getAddress())) {\n+        if (portInfo != null\n+            && portInfo.getAddress() != null \n+            && !portInfo.getAddress().equals(ei.getAddress())) {\n             ei.setAddress(portInfo.getAddress());\n         }\n ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/508ed233f535fb4f6187a7369aa4360599b27361/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/ServiceImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5476] Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1559242 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/508ed233f535fb4f6187a7369aa4360599b27361"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/fcc19c3ddd36f3a55ae2675e2ebbf853cbd3d9f7",
        "bug_id": "cxf_167",
        "file": [
            {
                "additions": 1,
                "sha": "70b547ea53f5b389f169bcd723e8e59537d3e672",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/90b98052841c12eaa4ba0d99013c7844f193fd32/core/src/main/java/org/apache/cxf/bus/blueprint/BlueprintBeanLocator.java",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/cxf/bus/blueprint/BlueprintBeanLocator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/bus/blueprint/BlueprintBeanLocator.java?ref=90b98052841c12eaa4ba0d99013c7844f193fd32",
                "patch": "@@ -68,7 +68,7 @@ public BlueprintBeanLocator(ConfiguredBeanLocator orig,\n             if (bm instanceof ExtendedBeanMetadata) {\n                 cls = ((ExtendedBeanMetadata)bm).getRuntimeClass();\n             } \n-            if (cls == null && container instanceof ExtendedBlueprintContainer) {\n+            if (cls == null && container instanceof ExtendedBlueprintContainer && bm.getClassName() != null) {\n                 try {\n                     cls = ((ExtendedBlueprintContainer)container).loadClass(bm.getClassName());\n                 } catch (ClassNotFoundException cnfe) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/90b98052841c12eaa4ba0d99013c7844f193fd32/core/src/main/java/org/apache/cxf/bus/blueprint/BlueprintBeanLocator.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix a potential NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1556058 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/90b98052841c12eaa4ba0d99013c7844f193fd32"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/8eb0e72d3da0247bcea0a29fcdc29946c2fc4c73",
        "bug_id": "cxf_168",
        "file": [
            {
                "additions": 0,
                "sha": "396c546e3e24df18d4b2aac60d8ca4aa6d5c2487",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/883739a64f3ea76e146490d4c158314c75603285/core/src/main/java/org/apache/cxf/bus/osgi/CXFActivator.java",
                "deletions": 2,
                "filename": "core/src/main/java/org/apache/cxf/bus/osgi/CXFActivator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/bus/osgi/CXFActivator.java?ref=883739a64f3ea76e146490d4c158314c75603285",
                "patch": "@@ -50,7 +50,6 @@\n     private ServiceTracker configAdminTracker;\n     private CXFExtensionBundleListener cxfBundleListener;\n     private ServiceRegistration workQueueServiceRegistration;\n-    private ServiceRegistration wqSingleConfigRegistratin;\n \n     /** {@inheritDoc}*/\n     public void start(BundleContext context) throws Exception {\n@@ -119,7 +118,6 @@ public void stop(BundleContext context) throws Exception {\n         cxfBundleListener.shutdown();\n         workQueues.shutDown();\n         workQueueServiceRegistration.unregister();\n-        wqSingleConfigRegistratin.unregister();\n         configAdminTracker.close();\n         ExtensionRegistry.removeExtensions(extensions);\n     }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/883739a64f3ea76e146490d4c158314c75603285/core/src/main/java/org/apache/cxf/bus/osgi/CXFActivator.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix NPE on shutdown\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1556049 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/883739a64f3ea76e146490d4c158314c75603285"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3acbca4221ae1d75e31b16ab077a0b8361b4df86",
        "bug_id": "cxf_169",
        "file": [
            {
                "additions": 6,
                "sha": "587b8981c1e8ec698ce6d771a2e4b0eaba5ff651",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e3d8ccc09f6c540dc1d377ffb42b2d867ee86ac8/core/src/main/java/org/apache/cxf/message/ExchangeImpl.java",
                "deletions": 2,
                "filename": "core/src/main/java/org/apache/cxf/message/ExchangeImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/core/src/main/java/org/apache/cxf/message/ExchangeImpl.java?ref=e3d8ccc09f6c540dc1d377ffb42b2d867ee86ac8",
                "patch": "@@ -160,7 +160,9 @@ public Message getInFaultMessage() {\n \n     public void setInFaultMessage(Message m) {\n         inFaultMessage = m;\n-        m.setExchange(this);\n+        if (null != m) {\n+            m.setExchange(this);\n+        }\n     }\n \n     public Message getOutFaultMessage() {\n@@ -169,7 +171,9 @@ public Message getOutFaultMessage() {\n \n     public void setOutFaultMessage(Message m) {\n         outFaultMessage = m;\n-        m.setExchange(this);\n+        if (null != m) {\n+            m.setExchange(this);\n+        }\n     }\n \n     public void setDestination(Destination d) {",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/e3d8ccc09f6c540dc1d377ffb42b2d867ee86ac8/core/src/main/java/org/apache/cxf/message/ExchangeImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "Add some NPE guards\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1535092 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/e3d8ccc09f6c540dc1d377ffb42b2d867ee86ac8"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/19e99e219c74326ce6edc30a0b69a0bc45ce85d8",
        "bug_id": "cxf_170",
        "file": [
            {
                "additions": 2,
                "sha": "812e204c419d0cae2a153974b4e537a92530ce96",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/51814b35896eb9143c62990a95d60d510a8d48db/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/WebClient.java",
                "deletions": 2,
                "filename": "rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/WebClient.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/WebClient.java?ref=51814b35896eb9143c62990a95d60d510a8d48db",
                "patch": "@@ -1443,8 +1443,8 @@ private void setEntityHeaders(Entity<?> entity) {\n         public <T> Future<T> method(String name, Entity<?> entity, InvocationCallback<T> callback) {\n             WebClient.this.setEntityHeaders(entity);\n             return doInvokeAsyncCallback(name, \n-                                         entity.getEntity(), \n-                                         entity.getEntity().getClass(), \n+                                         entity == null ? null : entity.getEntity(), \n+                                         entity == null ? null : entity.getEntity().getClass(),\n                                          null, \n                                          callback);\n         }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/51814b35896eb9143c62990a95d60d510a8d48db/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/WebClient.java"
            },
            {
                "additions": 15,
                "sha": "d4c4b0d37269a47d1c749cdab5fb777b8054a3b6",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/51814b35896eb9143c62990a95d60d510a8d48db/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/spec/ClientImpl.java",
                "deletions": 7,
                "filename": "rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/spec/ClientImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/spec/ClientImpl.java?ref=51814b35896eb9143c62990a95d60d510a8d48db",
                "patch": "@@ -33,6 +33,7 @@\n import javax.ws.rs.client.WebTarget;\n import javax.ws.rs.core.Configurable;\n import javax.ws.rs.core.Configuration;\n+import javax.ws.rs.core.Feature;\n import javax.ws.rs.core.Link;\n import javax.ws.rs.core.MediaType;\n import javax.ws.rs.core.UriBuilder;\n@@ -71,7 +72,12 @@ public void close() {\n     @Override\n     public Builder invocation(Link link) {\n         checkClosed();\n-        return target(link.getUriBuilder()).request();\n+        Builder builder = target(link.getUriBuilder()).request();\n+        String type = link.getType();\n+        if (type != null) {\n+            builder.accept(type);\n+        }\n+        return builder;\n     }\n \n     @Override\n@@ -205,12 +211,14 @@ public Builder request() {\n             List<Object> providers = new LinkedList<Object>();\n             Configuration cfg = configImpl.getConfiguration();\n             for (Object p : cfg.getInstances()) {\n-                Map<Class<?>, Integer> contracts = cfg.getContracts(p.getClass());\n-                if (contracts == null || contracts.isEmpty()) {\n-                    providers.add(p);\n-                } else {\n-                    providers.add(\n-                        new FilterProviderInfo<Object>(p, pf.getBus(), contracts));\n+                if (!(p instanceof Feature)) {\n+                    Map<Class<?>, Integer> contracts = cfg.getContracts(p.getClass());\n+                    if (contracts == null || contracts.isEmpty()) {\n+                        providers.add(p);\n+                    } else {\n+                        providers.add(\n+                            new FilterProviderInfo<Object>(p, pf.getBus(), contracts));\n+                    }\n                 }\n             }\n             ",
                "changes": 22,
                "blob_url": "https://github.com/apache/cxf/blob/51814b35896eb9143c62990a95d60d510a8d48db/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/spec/ClientImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5135] Adding a missing NPE guard to AsyncInvokerImpl\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1520597 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/51814b35896eb9143c62990a95d60d510a8d48db"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e560cfeee66f238d232e7d7073b6adea991c66fc",
        "bug_id": "cxf_171",
        "file": [
            {
                "additions": 1,
                "sha": "e555c1ac94983a111128b8756ab4588514780c6d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/98db1cd54046d06fd4ae7ea66d96d24c9d7a3dee/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduit.java",
                "deletions": 1,
                "filename": "rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduit.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduit.java?ref=98db1cd54046d06fd4ae7ea66d96d24c9d7a3dee",
                "patch": "@@ -377,7 +377,7 @@ public int copyFrom(InputStream in) throws IOException {\n         \n         @Override\n         public void close() throws IOException {\n-            if (!chunking) {\n+            if (!chunking && wrappedStream != null) {\n                 CachedOutputStream out = (CachedOutputStream)wrappedStream;\n                 this.basicEntity.setContentLength(out.size());\n                 wrappedStream = null;",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/98db1cd54046d06fd4ae7ea66d96d24c9d7a3dee/rt/transports/http-hc/src/main/java/org/apache/cxf/transport/http/asyncclient/AsyncHTTPConduit.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix NPE on GET requests\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1518297 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/98db1cd54046d06fd4ae7ea66d96d24c9d7a3dee"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/37fa0f860fb9cea02de8a792567e76ff2dc6627e",
        "bug_id": "cxf_172",
        "file": [
            {
                "additions": 12,
                "sha": "8f98902497c476a02527799b896dee27b119049a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d2f7a6d9e9b0b30e99de70d195b45ff3dcc8b2f0/rt/features/clustering/src/main/java/org/apache/cxf/clustering/FailoverTargetSelector.java",
                "deletions": 10,
                "filename": "rt/features/clustering/src/main/java/org/apache/cxf/clustering/FailoverTargetSelector.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/features/clustering/src/main/java/org/apache/cxf/clustering/FailoverTargetSelector.java?ref=d2f7a6d9e9b0b30e99de70d195b45ff3dcc8b2f0",
                "patch": "@@ -392,16 +392,18 @@ public boolean equals(Object o) {\n         }\n \n         Endpoint retrieveOriginalEndpoint(Endpoint endpoint) {\n-            if (endpoint != originalEndpoint) {\n-                getLogger().log(Level.INFO,\n-                                \"REVERT_TO_ORIGINAL_TARGET\",\n-                                endpoint.getEndpointInfo().getName());\n-            }\n-            if (!endpoint.getEndpointInfo().getAddress().equals(originalAddress)) {\n-                endpoint.getEndpointInfo().setAddress(originalAddress);\n-                getLogger().log(Level.INFO,\n-                                \"REVERT_TO_ORIGINAL_ADDRESS\",\n-                                endpoint.getEndpointInfo().getAddress());\n+            if (endpoint != null) {\n+                if (endpoint != originalEndpoint) {\n+                    getLogger().log(Level.INFO,\n+                                    \"REVERT_TO_ORIGINAL_TARGET\",\n+                                    endpoint.getEndpointInfo().getName());\n+                }\n+                if (!endpoint.getEndpointInfo().getAddress().equals(originalAddress)) {\n+                    endpoint.getEndpointInfo().setAddress(originalAddress);\n+                    getLogger().log(Level.INFO,\n+                                    \"REVERT_TO_ORIGINAL_ADDRESS\",\n+                                    endpoint.getEndpointInfo().getAddress());\n+                }\n             }\n             return originalEndpoint;\n         }",
                "changes": 22,
                "blob_url": "https://github.com/apache/cxf/blob/d2f7a6d9e9b0b30e99de70d195b45ff3dcc8b2f0/rt/features/clustering/src/main/java/org/apache/cxf/clustering/FailoverTargetSelector.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5185] NPE guard in FailoverTargetSelector\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1514018 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/d2f7a6d9e9b0b30e99de70d195b45ff3dcc8b2f0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6a825d6f00ee51a58effb6bc07339f62bb3ae67c",
        "bug_id": "cxf_173",
        "file": [
            {
                "additions": 2,
                "sha": "0995b9ce8de56e05842432abb446b88d324c518f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/56a44e02e49f1d5281799ac57370b03772620cc8/rt/transports/http-netty/netty-server/src/main/java/org/apache/cxf/transport/http/netty/server/NettyHttpDestination.java",
                "deletions": 2,
                "filename": "rt/transports/http-netty/netty-server/src/main/java/org/apache/cxf/transport/http/netty/server/NettyHttpDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-netty/netty-server/src/main/java/org/apache/cxf/transport/http/netty/server/NettyHttpDestination.java?ref=56a44e02e49f1d5281799ac57370b03772620cc8",
                "patch": "@@ -196,13 +196,13 @@ protected void serviceRequest(final ServletContext context,\n \n         if (inMessage == null) {\n \n+            ExchangeImpl exchange = new ExchangeImpl();\n             inMessage = new MessageImpl();\n+            exchange.setInMessage(inMessage);\n             setupMessage(inMessage, context, req, resp);\n \n             ((MessageImpl) inMessage).setDestination(this);\n \n-            ExchangeImpl exchange = new ExchangeImpl();\n-            exchange.setInMessage(inMessage);\n             exchange.setSession(new HTTPSession(req));\n         }\n ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/56a44e02e49f1d5281799ac57370b03772620cc8/rt/transports/http-netty/netty-server/src/main/java/org/apache/cxf/transport/http/netty/server/NettyHttpDestination.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix NPE on server side\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1502082 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/56a44e02e49f1d5281799ac57370b03772620cc8"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/51335a6e108f1b66c141c1c1354170d20f3495b3",
        "bug_id": "cxf_174",
        "file": [
            {
                "additions": 3,
                "sha": "6b6673151e494cd763948753cea5492846c17544",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/912dd1c11798dc69320dc7c81667e02925ebeed4/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SamlTokenPolicyValidator.java",
                "deletions": 1,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SamlTokenPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SamlTokenPolicyValidator.java?ref=912dd1c11798dc69320dc7c81667e02925ebeed4",
                "patch": "@@ -163,7 +163,9 @@ private boolean checkVersion(\n             return false;\n         }\n         \n-        assertPolicy(aim, new QName(samlToken.getVersion().getNamespace(), samlTokenType.name()));\n+        if (samlTokenType != null) {\n+            assertPolicy(aim, new QName(samlToken.getVersion().getNamespace(), samlTokenType.name()));\n+        }\n         return true;\n     }\n     ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/912dd1c11798dc69320dc7c81667e02925ebeed4/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/SamlTokenPolicyValidator.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid a NPE when no SAML Token Type is specified\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1493699 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/912dd1c11798dc69320dc7c81667e02925ebeed4"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/13b02383a3590149174d0f22bd07853d5cf31a03",
        "bug_id": "cxf_175",
        "file": [
            {
                "additions": 1,
                "sha": "275d42ed91659bb083df18820416f6bb9b2b45b5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/69a81532a908194e4b27359aa3fbe063515bb70a/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java",
                "deletions": 1,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java?ref=69a81532a908194e4b27359aa3fbe063515bb70a",
                "patch": "@@ -593,7 +593,7 @@ public void handle(Callback[] callbacks) throws IOException, UnsupportedCallback\n                     || WSConstants.WSS_KRB_KI_VALUE_TYPE.equals(pc.getType())) {\n                     for (String tokenId : store.getTokenIdentifiers()) {\n                         SecurityToken token = store.getToken(tokenId);\n-                        if (id.equals(token.getSHA1())) {\n+                        if (token != null && id.equals(token.getSHA1())) {\n                             pc.setKey(token.getSecret());\n                             return;\n                         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/69a81532a908194e4b27359aa3fbe063515bb70a/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5011] - Fix NPE in WSS4JInterceptor\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/branches/wss4j2.0-port@1481085 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/69a81532a908194e4b27359aa3fbe063515bb70a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4720dbf421c6231b790710b379ab57b14415c384",
        "bug_id": "cxf_176",
        "file": [
            {
                "additions": 1,
                "sha": "b5f09b692a624dda4bb1c06a2da84787f9fbfbae",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a372781bb429b50f5897af37ed72970ac06a0ac8/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java",
                "deletions": 1,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java?ref=a372781bb429b50f5897af37ed72970ac06a0ac8",
                "patch": "@@ -613,7 +613,7 @@ public void handle(Callback[] callbacks) throws IOException, UnsupportedCallback\n                     || WSConstants.WSS_KRB_KI_VALUE_TYPE.equals(pc.getType())) {\n                     for (String tokenId : store.getTokenIdentifiers()) {\n                         SecurityToken token = store.getToken(tokenId);\n-                        if (id.equals(token.getSHA1())) {\n+                        if (token != null && id.equals(token.getSHA1())) {\n                             pc.setKey(token.getSecret());\n                             return;\n                         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/a372781bb429b50f5897af37ed72970ac06a0ac8/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/WSS4JInInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5011] - Fix NPE in WSS4JInterceptor\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1481076 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/a372781bb429b50f5897af37ed72970ac06a0ac8"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/40c49c0fbb290f8dc75b9d60ee2555c20c2c8791",
        "bug_id": "cxf_177",
        "file": [
            {
                "additions": 1,
                "sha": "f9301fa3f8993580b2095726dc1a648217627b3c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/434132594b23cc18f36cab5c3109a4490b35883c/rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/json/JSONProvider.java",
                "deletions": 1,
                "filename": "rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/json/JSONProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/json/JSONProvider.java?ref=434132594b23cc18f36cab5c3109a4490b35883c",
                "patch": "@@ -491,7 +491,7 @@ protected XMLStreamWriter createWriter(Object actualObject, Class<?> actualClass\n         Type genericType, String enc, OutputStream os, boolean isCollection) throws Exception {\n         \n         QName qname = actualClass == Document.class ? null : getQName(actualClass, genericType, actualObject);\n-        if (ignoreNamespaces && (isCollection  || dropRootElement)) {        \n+        if (qname != null && ignoreNamespaces && (isCollection  || dropRootElement)) {        \n             qname = new QName(qname.getLocalPart());\n         }\n         if (BADGER_FISH_CONVENTION.equals(convention)) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/434132594b23cc18f36cab5c3109a4490b35883c/rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/json/JSONProvider.java"
            },
            {
                "additions": 46,
                "sha": "818f6ce924ddd77421507b5c59d55e273e52f812",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/434132594b23cc18f36cab5c3109a4490b35883c/rt/rs/extensions/providers/src/test/java/org/apache/cxf/jaxrs/provider/dom4j/DOM4JProviderTest.java",
                "deletions": 2,
                "filename": "rt/rs/extensions/providers/src/test/java/org/apache/cxf/jaxrs/provider/dom4j/DOM4JProviderTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/extensions/providers/src/test/java/org/apache/cxf/jaxrs/provider/dom4j/DOM4JProviderTest.java?ref=434132594b23cc18f36cab5c3109a4490b35883c",
                "patch": "@@ -30,6 +30,7 @@\n import org.apache.cxf.jaxrs.impl.ProvidersImpl;\n import org.apache.cxf.jaxrs.provider.ProviderFactory;\n import org.apache.cxf.jaxrs.provider.ServerProviderFactory;\n+import org.apache.cxf.jaxrs.provider.json.JSONProvider;\n import org.apache.cxf.message.Exchange;\n import org.apache.cxf.message.ExchangeImpl;\n import org.apache.cxf.message.Message;\n@@ -48,9 +49,10 @@ public void testReadXML() throws Exception {\n         // starts with the xml PI\n         assertTrue(str.contains(\"<a/>\") || str.contains(\"<a></a>\"));\n     }\n-    \n     private org.dom4j.Document readXML() throws Exception {\n-        final String xml = \"<a/>\";\n+        return readXML(\"<a/>\");\n+    }\n+    private org.dom4j.Document readXML(final String xml) throws Exception {\n         DOM4JProvider p = new DOM4JProvider();\n         p.setProviders(new ProvidersImpl(createMessage()));\n         org.dom4j.Document dom = p.readFrom(org.dom4j.Document.class, org.dom4j.Document.class, \n@@ -102,6 +104,21 @@ public void testWriteJSON() throws Exception {\n         assertEquals(\"{\\\"a\\\":\\\"\\\"}\", str);\n     }\n     \n+    @Test\n+    public void testWriteJSONDropRoot() throws Exception {\n+        org.dom4j.Document dom = readXML(\"<root><a/></root>\");\n+        DOM4JProvider p = new DOM4JProvider();\n+        p.setProviders(new ProvidersImpl(createMessageWithJSONProvider()));\n+        \n+        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n+        p.writeTo(dom, org.dom4j.Document.class, org.dom4j.Document.class, \n+                   new Annotation[]{}, MediaType.APPLICATION_JSON_TYPE, new MetadataMap<String, Object>(),\n+                   bos);\n+        String str = bos.toString();\n+        // starts with the xml PI\n+        assertEquals(\"{\\\"a\\\":\\\"\\\"}\", str);\n+    }\n+    \n     private Message createMessage() {\n         ProviderFactory factory = ServerProviderFactory.getInstance();\n         Message m = new MessageImpl();\n@@ -124,4 +141,31 @@ private Message createMessage() {\n         e.put(Endpoint.class, endpoint);\n         return m;\n     }\n+    \n+    private Message createMessageWithJSONProvider() {\n+        ProviderFactory factory = ServerProviderFactory.getInstance();\n+        JSONProvider<Object> provider = new JSONProvider<Object>();\n+        provider.setDropRootElement(true);\n+        provider.setIgnoreNamespaces(true);\n+        factory.registerUserProvider(provider);\n+        Message m = new MessageImpl();\n+        m.put(\"org.apache.cxf.http.case_insensitive_queries\", false);\n+        Exchange e = new ExchangeImpl();\n+        m.setExchange(e);\n+        e.setInMessage(m);\n+        Endpoint endpoint = EasyMock.createMock(Endpoint.class);\n+        endpoint.getEndpointInfo();\n+        EasyMock.expectLastCall().andReturn(null).anyTimes();\n+        endpoint.get(Application.class.getName());\n+        EasyMock.expectLastCall().andReturn(null);\n+        endpoint.size();\n+        EasyMock.expectLastCall().andReturn(0).anyTimes();\n+        endpoint.isEmpty();\n+        EasyMock.expectLastCall().andReturn(true).anyTimes();\n+        endpoint.get(ServerProviderFactory.class.getName());\n+        EasyMock.expectLastCall().andReturn(factory).anyTimes();\n+        EasyMock.replay(endpoint);\n+        e.put(Endpoint.class, endpoint);\n+        return m;\n+    }\n }",
                "changes": 48,
                "blob_url": "https://github.com/apache/cxf/blob/434132594b23cc18f36cab5c3109a4490b35883c/rt/rs/extensions/providers/src/test/java/org/apache/cxf/jaxrs/provider/dom4j/DOM4JProviderTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4967] Fixing NPE in JSONProvider\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1468490 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/434132594b23cc18f36cab5c3109a4490b35883c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d5e5211301d67aeaf81d078cb2fc9b76478e555f",
        "bug_id": "cxf_178",
        "file": [
            {
                "additions": 1,
                "sha": "a1642568406c574c1c9ce777ba63688dc0181de9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/1a0d8e4ccd4c6546bc8812fb96ddd93aea6a9a97/rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/DestinationSequenceTest.java",
                "deletions": 1,
                "filename": "rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/DestinationSequenceTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/DestinationSequenceTest.java?ref=1a0d8e4ccd4c6546bc8812fb96ddd93aea6a9a97",
                "patch": "@@ -638,7 +638,7 @@ public void testSequenceTerminationNotNecessary() {\n         DestinationSequence seq = new DestinationSequence(id, ref, destination,\n             ProtocolVariation.RM10WSA200408);\n         RMEndpoint rme = control.createMock(RMEndpoint.class);\n-        EasyMock.expect(destination.getReliableEndpoint()).andReturn(rme);\n+        EasyMock.expect(destination.getReliableEndpoint()).andReturn(rme).anyTimes();\n         DestinationSequence.SequenceTermination st = seq.new SequenceTermination();\n         st.updateInactivityTimeout(30000L);\n         long lastAppMessage = System.currentTimeMillis() - 1000L;",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/1a0d8e4ccd4c6546bc8812fb96ddd93aea6a9a97/rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/DestinationSequenceTest.java"
            }
        ],
        "repo": "cxf",
        "message": "fix NPE at ws.rm.DestinationSequenceTest\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1463972 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/1a0d8e4ccd4c6546bc8812fb96ddd93aea6a9a97"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/53fde8767c4614b2cdd2d410ed723eb0f870f715",
        "bug_id": "cxf_179",
        "file": [
            {
                "additions": 1,
                "sha": "0bb53a84ca8f903fc820ffa176afacf7de9af96f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/dae60556e28d22a4e0231099178e6e1ad4f68126/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/WSPolicyFeature.java",
                "deletions": 1,
                "filename": "rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/WSPolicyFeature.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/WSPolicyFeature.java?ref=dae60556e28d22a4e0231099178e6e1ad4f68126",
                "patch": "@@ -233,7 +233,7 @@ Policy resolveReference(PolicyReference ref, PolicyBuilder builder, Bus bus, Des\n     \n     Policy resolveLocal(PolicyReference ref, final Bus bus, DescriptionInfo i) {\n         String uri = ref.getURI().substring(1);\n-        String absoluteURI = i.getBaseURI() + uri;\n+        String absoluteURI = i == null ? uri : i.getBaseURI() + uri;\n         PolicyRegistry registry = bus.getExtension(PolicyEngine.class).getRegistry();\n         Policy resolved = registry.lookup(absoluteURI);\n         if (null != resolved) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/dae60556e28d22a4e0231099178e6e1ad4f68126/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/WSPolicyFeature.java"
            },
            {
                "additions": 29,
                "sha": "b7848be9ffdb084e76b3a8eb7397b8427e94697f",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/dae60556e28d22a4e0231099178e6e1ad4f68126/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/BasicDocEndpoint.java",
                "deletions": 0,
                "filename": "systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/BasicDocEndpoint.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/BasicDocEndpoint.java?ref=dae60556e28d22a4e0231099178e6e1ad4f68126",
                "patch": "@@ -0,0 +1,29 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.cxf.systest.ws.rm;\n+\n+import javax.jws.WebMethod;\n+import javax.jws.WebService;\n+\n+@WebService(name = \"RMEndpoint\", targetNamespace = \"http://cxf.apache.org/wsrm\")\n+public interface BasicDocEndpoint {\n+    @WebMethod\n+    String echo(String arg0);\n+\n+}",
                "changes": 29,
                "blob_url": "https://github.com/apache/cxf/blob/dae60556e28d22a4e0231099178e6e1ad4f68126/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/BasicDocEndpoint.java"
            },
            {
                "additions": 30,
                "sha": "6e7952d4c3d4b1171c59cc89daf13b62cb0ba845",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/dae60556e28d22a4e0231099178e6e1ad4f68126/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/BasicDocEndpointImpl.java",
                "deletions": 0,
                "filename": "systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/BasicDocEndpointImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/BasicDocEndpointImpl.java?ref=dae60556e28d22a4e0231099178e6e1ad4f68126",
                "patch": "@@ -0,0 +1,30 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.cxf.systest.ws.rm;\n+\n+import javax.jws.WebMethod;\n+import javax.jws.WebService;\n+\n+@WebService(name = \"RMEndpoint\", targetNamespace = \"http://cxf.apache.org/wsrm\", serviceName = \"RMService\")\n+public class BasicDocEndpointImpl implements BasicDocEndpoint {\n+    @WebMethod\n+    public String echo(String input) {\n+        return input;\n+    }\n+}\n\\ No newline at end of file",
                "changes": 30,
                "blob_url": "https://github.com/apache/cxf/blob/dae60556e28d22a4e0231099178e6e1ad4f68126/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/BasicDocEndpointImpl.java"
            },
            {
                "additions": 52,
                "sha": "6907c678e87785200129e851d85eab78f027bfba",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/dae60556e28d22a4e0231099178e6e1ad4f68126/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/WSRMPolicyResolveTest.java",
                "deletions": 0,
                "filename": "systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/WSRMPolicyResolveTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/WSRMPolicyResolveTest.java?ref=dae60556e28d22a4e0231099178e6e1ad4f68126",
                "patch": "@@ -0,0 +1,52 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.cxf.systest.ws.rm;\n+\n+\n+import org.apache.cxf.test.AbstractCXFSpringTest;\n+import org.apache.cxf.testutil.common.TestUtil;\n+\n+import org.junit.Test;\n+\n+import org.springframework.context.support.GenericApplicationContext;\n+\n+\n+\n+//CXF-4875\n+public class WSRMPolicyResolveTest extends AbstractCXFSpringTest {\n+    public static final String PORT = TestUtil.getPortNumber(WSRMPolicyResolveTest.class);\n+    /** {@inheritDoc}*/\n+    @Override\n+    protected void additionalSpringConfiguration(GenericApplicationContext context) throws Exception {\n+    }\n+    \n+    @Test\n+    public void testHello() throws Exception {\n+        BasicDocEndpoint port = getApplicationContext().getBean(\"TestClient\",\n+                  BasicDocEndpoint.class);\n+        Object retObj = port.echo(\"Hello\");\n+        assertEquals(\"Hello\", retObj);\n+    }\n+\n+    /** {@inheritDoc}*/\n+    @Override\n+    protected String[] getConfigLocations() {\n+        return new String[] {\"classpath:/org/apache/cxf/systest/ws/rm/wsrm-policy-resolve.xml\" };\n+    }\n+}\n\\ No newline at end of file",
                "changes": 52,
                "blob_url": "https://github.com/apache/cxf/blob/dae60556e28d22a4e0231099178e6e1ad4f68126/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/WSRMPolicyResolveTest.java"
            },
            {
                "additions": 44,
                "sha": "ce33d9678ffc7ca2022f1fd58a4f0b5d706a5e40",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/dae60556e28d22a4e0231099178e6e1ad4f68126/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/wsrm-policy-resolve.xml",
                "deletions": 0,
                "filename": "systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/wsrm-policy-resolve.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/wsrm-policy-resolve.xml?ref=dae60556e28d22a4e0231099178e6e1ad4f68126",
                "patch": "@@ -0,0 +1,44 @@\n+<beans xmlns='http://www.springframework.org/schema/beans'\n+\txmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:beans='http://www.springframework.org/schema/beans'\n+\txmlns:jaxws='http://cxf.apache.org/jaxws' xmlns:p=\"http://cxf.apache.org/policy\"\n+\txsi:schemaLocation='http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\n+  http://cxf.apache.org/policy http://cxf.apache.org/schemas/policy.xsd \n+  http://www.w3.org/2006/07/ws-policy http://www.w3.org/2006/07/ws-policy.xsd \n+  http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd'>\n+\t<bean\n+\t\tclass=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\" />\n+\t<wsp:Policy wsu:Id=\"RM\" xmlns:wsp=\"http://www.w3.org/2006/07/ws-policy\"\n+\t\txmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n+\t\t<wsam:Addressing xmlns:wsam=\"http://www.w3.org/2007/02/addressing/metadata\">\n+\t\t\t<wsp:Policy />\n+\t\t</wsam:Addressing>\n+\t\t<wsrmp:RMAssertion xmlns:wsrmp=\"http://schemas.xmlsoap.org/ws/2005/02/rm/policy\">\n+\t\t\t<wsrmp:BaseRetransmissionInterval\n+\t\t\t\tMilliseconds=\"10000\" />\n+\t\t</wsrmp:RMAssertion>\n+\t</wsp:Policy>\n+\n+\t<jaxws:endpoint id='RMService'\n+\t\taddress=\"http://localhost:${testutil.ports.WSRMPolicyResolveTest}/wsrmPolicyResolve\"\n+\t\timplementor='org.apache.cxf.systest.ws.rm.BasicDocEndpointImpl'>\n+\t\t<jaxws:features>\n+\t\t\t<p:policies>\n+\t\t\t\t<wsp:PolicyReference URI=\"#RM\"\n+\t\t\t\t\txmlns:wsp=\"http://www.w3.org/2006/07/ws-policy\" />\n+\t\t\t</p:policies>\n+\t\t</jaxws:features>\n+\t</jaxws:endpoint>\n+\n+\t<jaxws:client id=\"TestClient\"\n+\t\tserviceClass=\"org.apache.cxf.systest.ws.rm.BasicDocEndpoint\"\n+\t\taddress=\"http://localhost:${testutil.ports.WSRMPolicyResolveTest}/wsrmPolicyResolve\">\n+\t\t<jaxws:features>\n+\t\t\t<p:policies>\n+\t\t\t\t<wsp:PolicyReference URI=\"#RM\"\n+\t\t\t\t\txmlns:wsp=\"http://www.w3.org/2006/07/ws-policy\" />\n+\t\t\t</p:policies>\n+\t\t</jaxws:features>\n+\t</jaxws:client>\n+\n+\n+</beans>\n\\ No newline at end of file",
                "changes": 44,
                "blob_url": "https://github.com/apache/cxf/blob/dae60556e28d22a4e0231099178e6e1ad4f68126/systests/ws-rm/src/test/java/org/apache/cxf/systest/ws/rm/wsrm-policy-resolve.xml"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4875]:Fix NPE when resolve the wsrm policy\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1454984 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/dae60556e28d22a4e0231099178e6e1ad4f68126"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/df3da6f92d4159380b0ddf7dbb9e174e00cdd51b",
        "bug_id": "cxf_180",
        "file": [
            {
                "additions": 1,
                "sha": "88e93a1b620188f76f0a39a416222e1d04cac36e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c786610bcc187d8a350437c4d01a59fc5d8d0cae/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java?ref=c786610bcc187d8a350437c4d01a59fc5d8d0cae",
                "patch": "@@ -337,7 +337,7 @@ protected void doPublish(String addr) {\n                 if (!endpointInfo.getAddress().contains(addr)) {\n                     endpointInfo.setAddress(addr);\n                 }\n-                if (publishedEndpointUrl != null) {\n+                if (publishedEndpointUrl != null && wsdlLocation != null) {\n                     endpointInfo.setProperty(WSDLGetUtils.PUBLISHED_ENDPOINT_URL, publishedEndpointUrl);\n                     //early update the publishedEndpointUrl so that endpoints in the same app sharing the same wsdl\n                     //do not require all of them to be queried for wsdl before the wsdl is finally fully updated",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/c786610bcc187d8a350437c4d01a59fc5d8d0cae/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4856] Fix a NPE for java first cases.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1450880 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c786610bcc187d8a350437c4d01a59fc5d8d0cae"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/ca203ac499491de2ce46db535c18b5a8942f4470",
        "bug_id": "cxf_181",
        "file": [
            {
                "additions": 4,
                "sha": "bfbb8712dac7c1b66f37ec6e2d0a8b90c7da1f54",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/deb8677902982e76e97b945b97f3734df34ee479/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/JavaScriptContainer.java",
                "deletions": 0,
                "filename": "tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/JavaScriptContainer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/JavaScriptContainer.java?ref=deb8677902982e76e97b945b97f3734df34ee479",
                "patch": "@@ -126,8 +126,12 @@ public void execute() throws ToolException {\n \n             } else {\n                 // TODO: wsdl2.0 support\n+                throw new ToolException(\"Only WSDL 1.1 supported\");\n             }\n         }\n+        if (serviceList.isEmpty()) {\n+            throw new ToolException(\"Did not find any services in WSDL\");\n+        }\n         Map<String, InterfaceInfo> interfaces = new LinkedHashMap<String, InterfaceInfo>();\n         \n         ServiceInfo service0 = serviceList.get(0);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/deb8677902982e76e97b945b97f3734df34ee479/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/JavaScriptContainer.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4820] Add a better exception instead of an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1446358 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/deb8677902982e76e97b945b97f3734df34ee479"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/53e5857352897bc197a78d11b77d84cffe8ead0e",
        "bug_id": "cxf_182",
        "file": [
            {
                "additions": 18,
                "sha": "065be6dc0e615d113eb93fa2e2a8527e172b048a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/06a551954350575c4f34f5de9d348af3df430926/api/src/main/java/org/apache/cxf/interceptor/DocLiteralInInterceptor.java",
                "deletions": 11,
                "filename": "api/src/main/java/org/apache/cxf/interceptor/DocLiteralInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/interceptor/DocLiteralInInterceptor.java?ref=06a551954350575c4f34f5de9d348af3df430926",
                "patch": "@@ -30,6 +30,7 @@\n import javax.xml.stream.XMLStreamReader;\n \n import org.apache.cxf.common.logging.LogUtils;\n+import org.apache.cxf.common.util.XMLSchemaQNames;\n import org.apache.cxf.databinding.DataReader;\n import org.apache.cxf.endpoint.Endpoint;\n import org.apache.cxf.message.Exchange;\n@@ -148,17 +149,7 @@ public void handleMessage(Message message) {\n     \n                 if (xmlReader == null || !StaxUtils.toNextElement(xmlReader)) {\n                     // empty input\n-    \n-                    // TO DO : check duplicate operation with no input\n-                    for (OperationInfo op : operations) {\n-                        MessageInfo bmsg = op.getInput();\n-                        if (bmsg.getMessageParts().size() == 0) {\n-                            BindingOperationInfo boi = ep.getEndpointInfo().getBinding().getOperation(op);\n-                            exchange.put(BindingOperationInfo.class, boi);\n-                            exchange.put(OperationInfo.class, op);\n-                            exchange.setOneWay(op.isOneWay());\n-                        }\n-                    }\n+                    getBindingOperationForEmptyBody(operations, ep, exchange);\n                     return;\n                 }\n \n@@ -220,6 +211,22 @@ public void handleMessage(Message message) {\n         }\n     }\n \n+    private void getBindingOperationForEmptyBody(Collection<OperationInfo> operations, Endpoint ep, Exchange exchange) {\n+        // TO DO : check duplicate operation with no input and also check if the action matches \n+        for (OperationInfo op : operations) {\n+            MessageInfo bmsg = op.getInput();\n+            List<MessagePartInfo> bparts = bmsg.getMessageParts();\n+            if (bparts.size() == 0\n+                || (bparts.size() == 1 \n+                    && XMLSchemaQNames.XSD_ANY.equals(bparts.get(0).getTypeQName()))) {\n+                BindingOperationInfo boi = ep.getEndpointInfo().getBinding().getOperation(op);\n+                exchange.put(BindingOperationInfo.class, boi);\n+                exchange.put(OperationInfo.class, op);\n+                exchange.setOneWay(op.isOneWay());\n+            }\n+        }\n+    }\n+\n     private BindingOperationInfo getBindingOperationInfo(DepthXMLStreamReader xmlReader, Exchange exchange,\n                                                          BindingOperationInfo bop, boolean client) {\n         //bop might be a unwrapped, wrap it back so that we can get correct info ",
                "changes": 29,
                "blob_url": "https://github.com/apache/cxf/blob/06a551954350575c4f34f5de9d348af3df430926/api/src/main/java/org/apache/cxf/interceptor/DocLiteralInInterceptor.java"
            },
            {
                "additions": 2,
                "sha": "e8823eb39ff0e7ab84e64b6d0fb7ca1bf767d630",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/06a551954350575c4f34f5de9d348af3df430926/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/MessageModeInInterceptor.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/MessageModeInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/MessageModeInInterceptor.java?ref=06a551954350575c4f34f5de9d348af3df430926",
                "patch": "@@ -68,8 +68,8 @@ public MessageModeInInterceptor(Class<?> c, QName bName) {\n     }\n \n     public void handleMessage(Message message) throws Fault {\n-        if (!bindingName.equals(message.getExchange().get(BindingOperationInfo.class)\n-                               .getBinding().getName())) {\n+        BindingOperationInfo bop = message.getExchange().get(BindingOperationInfo.class); \n+        if (bop == null || !bindingName.equals(bop.getBinding().getName())) {\n             return;\n         }\n         Object o = message.getContent(soapMsgClass);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/06a551954350575c4f34f5de9d348af3df430926/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/MessageModeInInterceptor.java"
            },
            {
                "additions": 138,
                "sha": "0ba83ffb54a96b92c6e15d4e0a817083d3c1f366",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/06a551954350575c4f34f5de9d348af3df430926/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/NBProviderClientServerTest.java",
                "deletions": 0,
                "filename": "systests/jaxws/src/test/java/org/apache/cxf/systest/provider/NBProviderClientServerTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/NBProviderClientServerTest.java?ref=06a551954350575c4f34f5de9d348af3df430926",
                "patch": "@@ -0,0 +1,138 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.systest.provider;\n+\n+import java.lang.reflect.UndeclaredThrowableException;\n+\n+import javax.xml.namespace.QName;\n+import javax.xml.soap.MessageFactory;\n+import javax.xml.soap.SOAPEnvelope;\n+import javax.xml.soap.SOAPException;\n+import javax.xml.soap.SOAPMessage;\n+import javax.xml.ws.Dispatch;\n+import javax.xml.ws.Endpoint;\n+import javax.xml.ws.Service;\n+import javax.xml.ws.soap.SOAPBinding;\n+\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+\n+import org.apache.cxf.testutil.common.AbstractBusClientServerTestBase;\n+import org.apache.cxf.testutil.common.AbstractBusTestServerBase;\n+import org.apache.cxf.testutil.common.TestUtil;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+public class NBProviderClientServerTest extends AbstractBusClientServerTestBase {\n+    public static final String ADDRESS \n+        = \"http://localhost:\" + TestUtil.getPortNumber(Server.class)\n+            + \"/SoapContext/SoapProviderPort\";\n+\n+    private static QName sayHi = new QName(\"http://apache.org/hello_world_soap_http/types\", \"sayHi\");\n+\n+    public static class Server extends AbstractBusTestServerBase {\n+        Endpoint ep;\n+        \n+        protected void run() {\n+            Object implementor = new NBSoapMessageDocProvider();\n+            ep = Endpoint.publish(ADDRESS, implementor);                                 \n+        }\n+\n+        @Override\n+        public void tearDown() {\n+            ep.stop();\n+        }\n+\n+        public static void main(String[] args) {\n+            try {\n+                Server s = new Server();\n+                s.start();\n+            } catch (Exception ex) {\n+                ex.printStackTrace();\n+                System.exit(-1);\n+            } finally {\n+                System.out.println(\"done!\");\n+            }\n+        }\n+    }\n+\n+    @BeforeClass\n+    public static void startServers() throws Exception {\n+        assertTrue(\"server did not launch correctly\", launchServer(Server.class, true));\n+    }\n+    \n+    @Test\n+    public void testSOAPMessageModeDocLit() throws Exception {\n+        QName serviceName = \n+            new QName(\"http://apache.org/hello_world_soap_http\", \"SOAPProviderService\");\n+        QName portName = \n+            new QName(\"http://apache.org/hello_world_soap_http\", \"SoapProviderPort\");\n+\n+        Service service = Service.create(serviceName);\n+        assertNotNull(service);\n+        service.addPort(portName, SOAPBinding.SOAP11HTTP_BINDING, ADDRESS);\n+\n+        try {\n+            Dispatch<SOAPMessage> dispatch = service.createDispatch(portName, SOAPMessage.class, Service.Mode.MESSAGE);\n+            \n+            MessageFactory factory = MessageFactory.newInstance();\n+            SOAPMessage request = encodeRequest(factory, \"sayHi\");\n+            SOAPMessage response;\n+            try {\n+                response = dispatch.invoke(request);\n+                fail(\"Should have thrown an exception\");\n+            } catch (Exception ex) {\n+                //expected \n+                assertEquals(\"no body expected\", ex.getMessage());\n+            }\n+            \n+            request = encodeRequest(factory, null);\n+            response = dispatch.invoke(request);\n+            String resp = decodeResponse(response);\n+            assertEquals(\"Bonjour\", resp);\n+            \n+        } catch (UndeclaredThrowableException ex) {\n+            throw (Exception)ex.getCause();\n+        }\n+        \n+    }\n+\n+    private SOAPMessage encodeRequest(MessageFactory factory, String value) throws SOAPException {\n+        SOAPMessage request = factory.createMessage();\n+        SOAPEnvelope envelope = request.getSOAPPart().getEnvelope();\n+        request.setProperty(\"soapaction\", \"\");\n+        if (value != null) {\n+            request.getSOAPBody().addBodyElement(envelope.createName(value, \"ns1\", sayHi.getNamespaceURI()));\n+        }\n+        \n+        return request;\n+    }\n+\n+    private String decodeResponse(SOAPMessage response) throws SOAPException {\n+        NodeList nodelist = response.getSOAPBody().getElementsByTagNameNS(sayHi.getNamespaceURI(), \"responseType\");\n+        if (nodelist.getLength() == 1) {\n+            Node node = nodelist.item(0).getFirstChild();\n+            if (node != null) {\n+                return node.getNodeValue();\n+            }\n+        }\n+        return null;\n+    }\n+}",
                "changes": 138,
                "blob_url": "https://github.com/apache/cxf/blob/06a551954350575c4f34f5de9d348af3df430926/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/NBProviderClientServerTest.java"
            },
            {
                "additions": 65,
                "sha": "e67f1de799751f7394257d16348e24d1f544b70c",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/06a551954350575c4f34f5de9d348af3df430926/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/NBSoapMessageDocProvider.java",
                "deletions": 0,
                "filename": "systests/jaxws/src/test/java/org/apache/cxf/systest/provider/NBSoapMessageDocProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/NBSoapMessageDocProvider.java?ref=06a551954350575c4f34f5de9d348af3df430926",
                "patch": "@@ -0,0 +1,65 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.cxf.systest.provider;\n+\n+import java.io.InputStream;\n+\n+import javax.xml.soap.MessageFactory;\n+import javax.xml.soap.SOAPBody;\n+import javax.xml.soap.SOAPException;\n+import javax.xml.soap.SOAPMessage;\n+import javax.xml.ws.Provider;\n+import javax.xml.ws.Service;\n+import javax.xml.ws.ServiceMode;\n+import javax.xml.ws.WebServiceProvider;\n+\n+import org.apache.cxf.binding.soap.saaj.SAAJUtils;\n+\n+@WebServiceProvider(portName = \"SoapProviderPort\", serviceName = \"SOAPProviderService\",\n+                    targetNamespace = \"http://apache.org/hello_world_soap_http\")\n+@ServiceMode(value = Service.Mode.MESSAGE)            \n+public class NBSoapMessageDocProvider implements Provider<SOAPMessage> {\n+    private SOAPMessage sayHiResponse;\n+    \n+    public NBSoapMessageDocProvider() {\n+       \n+        try {\n+            MessageFactory factory = MessageFactory.newInstance();            \n+            InputStream is = getClass().getResourceAsStream(\"resources/sayHiDocLiteralResp.xml\");\n+            sayHiResponse =  factory.createMessage(null, is);\n+            is.close();\n+        } catch (Exception ex) {\n+            ex.printStackTrace();\n+        }\n+    }\n+    \n+    public SOAPMessage invoke(SOAPMessage request) {\n+        SOAPBody body = null;\n+        try {\n+            body = SAAJUtils.getBody(request);\n+        } catch (SOAPException e) {\n+            throw new RuntimeException(\"soap body expected\");\n+        }\n+        if (body.getFirstChild() != null) {\n+            throw new RuntimeException(\"no body expected\");\n+        }\n+        return sayHiResponse;\n+    }\n+}",
                "changes": 65,
                "blob_url": "https://github.com/apache/cxf/blob/06a551954350575c4f34f5de9d348af3df430926/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/NBSoapMessageDocProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4812] NPE on MessageModeInInterceptor when sending empty SOAPBody\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1444251 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/06a551954350575c4f34f5de9d348af3df430926"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/98758817124cc348bcb6553591ff157cdc1cf747",
        "bug_id": "cxf_183",
        "file": [
            {
                "additions": 3,
                "sha": "70ab9eefc64c283004748ef4b8162b069c95cb5a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7050fa40a6a5359b308ff43e3d2430cb9ad80b8d/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/AbstractClient.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/AbstractClient.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/AbstractClient.java?ref=7050fa40a6a5359b308ff43e3d2430cb9ad80b8d",
                "patch": "@@ -674,6 +674,9 @@ private void addMatrixOrQueryToBuilder(UriBuilder ub,\n     \n     \n     protected String convertParamValue(Object pValue) {\n+        if (pValue == null) {\n+            return null;\n+        }\n         Class<?> pClass = pValue.getClass();\n         if (pClass == String.class || pClass.isPrimitive()) {\n             return pValue.toString();",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/7050fa40a6a5359b308ff43e3d2430cb9ad80b8d/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/AbstractClient.java"
            },
            {
                "additions": 6,
                "sha": "9dc7b917af0681bfdee075f02d48a871a6572990",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7050fa40a6a5359b308ff43e3d2430cb9ad80b8d/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/client/WebClientTest.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/client/WebClientTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/client/WebClientTest.java?ref=7050fa40a6a5359b308ff43e3d2430cb9ad80b8d",
                "patch": "@@ -62,6 +62,12 @@ public void testEncoding() {\n         assertEquals(\"http://foo/bar+%20%2B;a=value+%20?b=bv%2B+%2B\", u.toString());\n     }\n     \n+    @Test(expected = IllegalArgumentException.class)\n+    public void testNullPath() {\n+        WebClient.create(\"http://foo\").path(null);\n+        fail(\"Exception expected\");\n+    }\n+    \n     @Test\n     public void testExistingAsteriscs() {\n         URI u = WebClient.create(\"http://foo/*\").getCurrentURI();",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/7050fa40a6a5359b308ff43e3d2430cb9ad80b8d/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/client/WebClientTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4770] Adding NPE guard to make sure IllegalArgumentException is thrown\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1436887 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/7050fa40a6a5359b308ff43e3d2430cb9ad80b8d"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/106608544b75605a41c266995b945e1fb34bfc37",
        "bug_id": "cxf_184",
        "file": [
            {
                "additions": 3,
                "sha": "ffd796456873803474a536d83a6f1cf3014a0891",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/aa9f1b7906b8bfcf2cf041a4ec037dc5fd11dd6e/api/src/main/java/org/apache/cxf/resource/ExtendedURIResolver.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/resource/ExtendedURIResolver.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/resource/ExtendedURIResolver.java?ref=aa9f1b7906b8bfcf2cf041a4ec037dc5fd11dd6e",
                "patch": "@@ -72,7 +72,9 @@ public void close() {\n         while (!resourceOpened.isEmpty()) {\n             try {\n                 InputStream in = resourceOpened.pop();\n-                in.close();\n+                if (in != null) {\n+                    in.close();\n+                }\n             } catch (IOException ioe) {\n                 // move on...\n             }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/aa9f1b7906b8bfcf2cf041a4ec037dc5fd11dd6e/api/src/main/java/org/apache/cxf/resource/ExtendedURIResolver.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4727] Add an npe guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1428524 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/aa9f1b7906b8bfcf2cf041a4ec037dc5fd11dd6e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/af72503cfd4f4d503168248524155c8b1b3c8a57",
        "bug_id": "cxf_185",
        "file": [
            {
                "additions": 2,
                "sha": "1e9586fe34be168eb3e8edf7f1a9e1d63bf7e7b7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/fd70825a59214b8e78a8ef75d5b956d17fa11267/rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProvider.java",
                "deletions": 2,
                "filename": "rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProvider.java?ref=fd70825a59214b8e78a8ef75d5b956d17fa11267",
                "patch": "@@ -286,7 +286,7 @@ private String getCollectionMethod(Map<String, String> map, Class<?> pojoClass)\n         return null;\n     }\n     \n-    private <T> T getAtomElementHandler(Map<String, T> handlers, Class<?> pojoClass) {\n+    protected <T> T getAtomElementHandler(Map<String, T> handlers, Class<?> pojoClass) {\n         T handler = getAtomElementHandlerSuperClass(handlers, pojoClass);\n         if (handler == null) {\n             Class<?>[] interfaces = pojoClass.getInterfaces();\n@@ -301,7 +301,7 @@ private String getCollectionMethod(Map<String, String> map, Class<?> pojoClass)\n     }\n     \n     private <T> T getAtomElementHandlerSuperClass(Map<String, T> handlers, Class<?> pojoClass) {\n-        if (pojoClass == Object.class) {\n+        if (pojoClass == null || pojoClass == Object.class) {\n             return null;\n         }\n         T handler = handlers.get(pojoClass.getName());",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/fd70825a59214b8e78a8ef75d5b956d17fa11267/rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "AtomPojoProvider will throw NPE if interface classes are used\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1422958 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/fd70825a59214b8e78a8ef75d5b956d17fa11267"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3072fce60e7707cd053f3c6b6a7a2cf612d1a4fb",
        "bug_id": "cxf_186",
        "file": [
            {
                "additions": 9,
                "sha": "ab4bd08d7155fcc3ec849173c68850d62491b6b5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c31c0109b17be4099a3426611f19773f34ab9dbb/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractCodegenMoho.java",
                "deletions": 3,
                "filename": "maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractCodegenMoho.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractCodegenMoho.java?ref=c31c0109b17be4099a3426611f19773f34ab9dbb",
                "patch": "@@ -321,9 +321,15 @@ public void execute() throws MojoExecutionException {\n \n     private void restoreProxySetting(String originalProxyHost, String originalProxyPort,\n                                      String originalNonProxyHosts) {\n-        System.setProperty(HTTP_PROXY_HOST, originalProxyHost);\n-        System.setProperty(HTTP_PROXY_PORT, originalProxyPort);\n-        System.setProperty(HTTP_NON_PROXY_HOSTS, originalNonProxyHosts);        \n+        if (originalProxyHost != null) {\n+            System.setProperty(HTTP_PROXY_HOST, originalProxyHost);\n+        }\n+        if (originalProxyPort != null) {\n+            System.setProperty(HTTP_PROXY_PORT, originalProxyPort);\n+        }\n+        if (originalNonProxyHosts != null) {\n+            System.setProperty(HTTP_NON_PROXY_HOSTS, originalNonProxyHosts);\n+        }\n     }\n \n     protected abstract Bus generate(GenericWsdlOption o, ",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/c31c0109b17be4099a3426611f19773f34ab9dbb/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/AbstractCodegenMoho.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4687]add NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1421120 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c31c0109b17be4099a3426611f19773f34ab9dbb"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3e58bca03394f60c4a453c41c7bed14700129529",
        "bug_id": "cxf_187",
        "file": [
            {
                "additions": 4,
                "sha": "8922fbe18eba1516aca9f3c22c7a22d81a52482c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6f20b90588f1371b8a0edfdf05cfeb266aaf0b9d/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceUtils.java",
                "deletions": 1,
                "filename": "rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceUtils.java?ref=6f20b90588f1371b8a0edfdf05cfeb266aaf0b9d",
                "patch": "@@ -41,7 +41,10 @@ public static BindingFactory getBindingFactory(Binding binding, Bus bus, StringB\n                 sb.delete(0, sb.length());\n                 sb.append(ext.getElementType().getNamespaceURI());\n                 try {\n-                    factory = bus.getExtension(BindingFactoryManager.class).getBindingFactory(sb.toString());\n+                    BindingFactoryManager manager = bus.getExtension(BindingFactoryManager.class);\n+                    if (manager != null) {\n+                        factory = manager.getBindingFactory(sb.toString());\n+                    }\n                 } catch (BusException e) {\n                     // ignore, we'll use a generic BindingInfo\n                 }",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/6f20b90588f1371b8a0edfdf05cfeb266aaf0b9d/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceUtils.java"
            },
            {
                "additions": 1,
                "sha": "c038842e109c9940ec64ecba1c12954d89bac1d3",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6f20b90588f1371b8a0edfdf05cfeb266aaf0b9d/rt/databinding/jaxb/src/test/java/org/apache/cxf/jaxb/JAXBDataBindingTest.java",
                "deletions": 1,
                "filename": "rt/databinding/jaxb/src/test/java/org/apache/cxf/jaxb/JAXBDataBindingTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/test/java/org/apache/cxf/jaxb/JAXBDataBindingTest.java?ref=6f20b90588f1371b8a0edfdf05cfeb266aaf0b9d",
                "patch": "@@ -97,7 +97,7 @@ public void setUp() throws Exception {\n         bindingFactoryManager = control.createMock(BindingFactoryManager.class);\n         destinationFactoryManager = control.createMock(DestinationFactoryManager.class);\n         \n-        EasyMock.expect(bus.getExtension(BindingFactoryManager.class)).andReturn(bindingFactoryManager);\n+        EasyMock.expect(bus.getExtension(BindingFactoryManager.class)).andStubReturn(bindingFactoryManager);\n         EasyMock.expect(bus.getExtension(DestinationFactoryManager.class))\n             .andStubReturn(destinationFactoryManager);\n ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/6f20b90588f1371b8a0edfdf05cfeb266aaf0b9d/rt/databinding/jaxb/src/test/java/org/apache/cxf/jaxb/JAXBDataBindingTest.java"
            }
        ],
        "repo": "cxf",
        "message": "Fixed the NPE WSDLServiceUtils\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1410201 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/6f20b90588f1371b8a0edfdf05cfeb266aaf0b9d"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/69da5182286cb3b45adf931959e21c160a56f9f1",
        "bug_id": "cxf_188",
        "file": [
            {
                "additions": 1,
                "sha": "7611db02375ee6c03bf3722f8b496649b7bd695b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/58a1b61adb5bba5aeac7623cec6acacce921cd6e/api/src/main/java/org/apache/cxf/message/MessageImpl.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/message/MessageImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/message/MessageImpl.java?ref=58a1b61adb5bba5aeac7623cec6acacce921cd6e",
                "patch": "@@ -181,7 +181,7 @@ private void calcContextCache() {\n             private static final long serialVersionUID = 7067290677790419348L;\n \n             public void putAll(Map<? extends String, ? extends Object> m) {\n-                if (m != null) {\n+                if (m != null && m.size() > 0) {\n                     super.putAll(m);\n                 }\n             }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/58a1b61adb5bba5aeac7623cec6acacce921cd6e/api/src/main/java/org/apache/cxf/message/MessageImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "Fixed the NPE of WadlGeneratorTest on AIX JDK\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1409665 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/58a1b61adb5bba5aeac7623cec6acacce921cd6e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b1ccee77bdfdba0ce1b4d88a0f923f9c9dcb03c3",
        "bug_id": "cxf_189",
        "file": [
            {
                "additions": 5,
                "sha": "08fb0165b908d3b275ddb4a3d6db81edeb8be2dd",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/05012b2870339b9e966e4c5899f47bcb8593e91f/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyAnnotationListener.java",
                "deletions": 1,
                "filename": "rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyAnnotationListener.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyAnnotationListener.java?ref=05012b2870339b9e966e4c5899f47bcb8593e91f",
                "patch": "@@ -20,6 +20,7 @@\n package org.apache.cxf.ws.policy;\n \n import java.lang.reflect.Method;\n+import java.net.URL;\n import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.List;\n@@ -358,7 +359,10 @@ private Element addPolicy(ServiceInfo service, Policy p, Class<?> cls, String de\n             \n             if (service.getDescription() == null && cls != null) {\n                 service.setDescription(new DescriptionInfo());\n-                service.getDescription().setBaseURI(cls.getResource(\"/\").toString());\n+                URL u = cls.getResource(\"/\");\n+                if (u != null) {\n+                    service.getDescription().setBaseURI(u.toString());\n+                }\n             }\n \n             // if not already added to service add it, otherwise ignore ",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/05012b2870339b9e966e4c5899f47bcb8593e91f/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyAnnotationListener.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4526] Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1393574 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/05012b2870339b9e966e4c5899f47bcb8593e91f"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b7138cc714b0c7e92ec3983e107c69d50f7ac338",
        "bug_id": "cxf_190",
        "file": [
            {
                "additions": 2,
                "sha": "bdf15404d180d1d7fc750ea03d5b5679086276fb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/f20c924442a8f5055dd7021f03eb364b675052b0/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java?ref=f20c924442a8f5055dd7021f03eb364b675052b0",
                "patch": "@@ -579,15 +579,15 @@ private void buildWSAActions(OperationInfo operation, Method method) {\n             if (faultActions != null && faultActions.length > 0 && operation.getFaults() != null) {\n                 for (FaultAction faultAction : faultActions) {\n                     FaultInfo faultInfo = getFaultInfo(operation, faultAction.className());\n-                    if (!StringUtils.isEmpty(faultAction.value())) {\n+                    if (faultInfo != null && !StringUtils.isEmpty(faultAction.value())) {\n                         faultInfo.addExtensionAttribute(JAXWSAConstants.WSAW_ACTION_QNAME, faultAction\n                             .value());\n                         faultInfo.addExtensionAttribute(JAXWSAConstants.WSAM_ACTION_QNAME, faultAction\n                             .value());\n                     }\n                     if (operation.isUnwrappedCapable()) {\n                         faultInfo = getFaultInfo(operation.getUnwrappedOperation(), faultAction.className());\n-                        if (!StringUtils.isEmpty(faultAction.value())) {\n+                        if (faultInfo != null && !StringUtils.isEmpty(faultAction.value())) {\n                             faultInfo.addExtensionAttribute(JAXWSAConstants.WSAW_ACTION_QNAME, faultAction\n                                 .value());\n                             faultInfo.addExtensionAttribute(JAXWSAConstants.WSAM_ACTION_QNAME, faultAction",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/f20c924442a8f5055dd7021f03eb364b675052b0/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4493]add NPE guard when FaultAction is used with OneWay\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1380132 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/f20c924442a8f5055dd7021f03eb364b675052b0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/55781e1c2eb52fddcc3b62138e2fa79604d69b93",
        "bug_id": "cxf_191",
        "file": [
            {
                "additions": 2,
                "sha": "ca40717e8240f4a4eda5a009d918b528bf183335",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2158264d2a1826556c6a88a68e82ea46a7fc2fc3/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/persistence/jdbc/Messages.properties",
                "deletions": 1,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/persistence/jdbc/Messages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/persistence/jdbc/Messages.properties?ref=2158264d2a1826556c6a88a68e82ea46a7fc2fc3",
                "patch": "@@ -24,4 +24,5 @@ CLOSE_FAILED_MSG = Failed to close connection.\n RECONNECT_WAIT_MSG = Waiting for the next reconnect attempt.\n SELECT_DEST_SEQ_FAILED_MSG = Failed to retrieve destination sequences from persistent store.\n SELECT_SRC_SEQ_FAILED_MSG = Failed to retrieve source sequences from persistent store.\n-VERIFY_TABLE_FAILED_MSG = Failed to verify the table definition.\n\\ No newline at end of file\n+VERIFY_TABLE_FAILED_MSG = Failed to verify the table definition.\n+INITIALIZATION_FAILED_MSG = Failed to initialize RMTxStore.\n\\ No newline at end of file",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/2158264d2a1826556c6a88a68e82ea46a7fc2fc3/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/persistence/jdbc/Messages.properties"
            },
            {
                "additions": 2,
                "sha": "5d037e7b23a6a14513c80d85d07558cb0cb3d2ac",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2158264d2a1826556c6a88a68e82ea46a7fc2fc3/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/persistence/jdbc/RMTxStore.java",
                "deletions": 3,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/persistence/jdbc/RMTxStore.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/persistence/jdbc/RMTxStore.java?ref=2158264d2a1826556c6a88a68e82ea46a7fc2fc3",
                "patch": "@@ -877,7 +877,7 @@ protected void createTables() throws SQLException {\n                 }\n             }\n         } finally {\n-            if (connection == null) {\n+            if (connection == null && con != null) {\n                 con.close();\n             }\n         }\n@@ -1068,7 +1068,6 @@ public synchronized void init() {\n                 cacheStatements();\n             }\n         } catch (SQLException ex) {\n-            ex.printStackTrace();\n             LogUtils.log(LOG, Level.SEVERE, \"CONNECT_EXC\", ex);\n             SQLException se = ex;\n             while (se.getNextException() != null) {\n@@ -1077,7 +1076,7 @@ public synchronized void init() {\n             }\n             throw new RMStoreException(ex);\n         } catch (Throwable ex) {\n-            ex.printStackTrace();\n+            LogUtils.log(LOG, Level.SEVERE, \"INITIALIZATION_FAILED_MSG\", ex);\n         }\n     }   \n     ",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/2158264d2a1826556c6a88a68e82ea46a7fc2fc3/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/persistence/jdbc/RMTxStore.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix ignorable NPE stack traces in tests\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1359285 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/2158264d2a1826556c6a88a68e82ea46a7fc2fc3"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/bcddc81ef964ef71151ec4e9bbf583ba7517b575",
        "bug_id": "cxf_192",
        "file": [
            {
                "additions": 1,
                "sha": "bef2f510a2c0e9bab03ba19ef5c0995e88397403",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/69ecf739fb008998c208f1d27af295baa8e969e7/rt/ws/mex/src/main/java/org/apache/cxf/ws/mex/MEXInInterceptor.java",
                "deletions": 1,
                "filename": "rt/ws/mex/src/main/java/org/apache/cxf/ws/mex/MEXInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/mex/src/main/java/org/apache/cxf/ws/mex/MEXInInterceptor.java?ref=69ecf739fb008998c208f1d27af295baa8e969e7",
                "patch": "@@ -60,7 +60,7 @@ public void handleMessage(Message message) throws Fault {\n         if (action == null) {\n             AddressingProperties inProps = (AddressingProperties)message\n                 .getContextualProperty(JAXWSAConstants.SERVER_ADDRESSING_PROPERTIES_INBOUND);\n-            if (inProps != null) {\n+            if (inProps != null && inProps.getAction() != null) {\n                 action = inProps.getAction().getValue();\n             }\n         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/69ecf739fb008998c208f1d27af295baa8e969e7/rt/ws/mex/src/main/java/org/apache/cxf/ws/mex/MEXInInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4321] Prevent NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1340102 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/69ecf739fb008998c208f1d27af295baa8e969e7"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a00dcf9c5b5f6705edc5bdaebea431037b5f3ac5",
        "bug_id": "cxf_193",
        "file": [
            {
                "additions": 23,
                "sha": "aa7925f5b8129511293a0175a0059bb1df7ece10",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/685811bbde1d7d2eae1472ce8fd5bf81ecf58e30/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java",
                "deletions": 21,
                "filename": "maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java?ref=685811bbde1d7d2eae1472ce8fd5bf81ecf58e30",
                "patch": "@@ -58,29 +58,29 @@\n      * @required\n      */\n     File sourceRoot;\n-    \n+\n     /**\n      * Options that specify WSDLs to process and/or control the processing of wsdls. \n      * If you have enabled wsdl scanning, these elements attach options to particular wsdls.\n      * If you have not enabled wsdl scanning, these options call out the wsdls to process. \n      * @parameter\n      */\n     WsdlOption wsdlOptions[];\n-    \n+\n     /**\n      * Default options to be used when a wsdl has not had it's options explicitly specified.\n      * \n      * @parameter\n      */\n     Option defaultOptions = new Option();\n-    \n+\n     /**\n      * Encoding to use for generated sources\n      * \n      * @parameter default-value=\"${project.build.sourceEncoding}\"\n      */\n     String encoding;\n-    \n+\n     /**\n      * Merge WsdlOptions that point to the same file by adding the extraargs to the first option and deleting\n      * the second from the options list\n@@ -90,8 +90,8 @@\n     protected void mergeOptions(List<GenericWsdlOption> effectiveWsdlOptions) {\n \n         File outputDirFile = getGeneratedTestRoot() == null \n-                ? getGeneratedSourceRoot() : getGeneratedTestRoot();\n-                \n+                             ? getGeneratedSourceRoot() : getGeneratedTestRoot();\n+\n         List<GenericWsdlOption> newList = new ArrayList<GenericWsdlOption>();\n \n         for (GenericWsdlOption go : effectiveWsdlOptions) {\n@@ -129,7 +129,7 @@ protected void mergeOptions(List<GenericWsdlOption> effectiveWsdlOptions) {\n         effectiveWsdlOptions.clear();\n         effectiveWsdlOptions.addAll(newList);\n     }\n-    \n+\n     /**\n      * Determine if code should be generated from the given wsdl\n      * \n@@ -170,9 +170,9 @@ protected boolean shouldRun(GenericWsdlOption genericWsdlOption,\n         }\n         return doWork;\n     }\n-    \n+\n     protected List<String> generateCommandLine(GenericWsdlOption wsdlOption)\n-        throws MojoExecutionException {\n+    throws MojoExecutionException {\n         List<String> ret = super.generateCommandLine(wsdlOption);\n         if (encoding != null) {\n             ret.add(0, \"-encoding\");\n@@ -183,8 +183,8 @@ protected boolean shouldRun(GenericWsdlOption genericWsdlOption,\n \n     @Override\n     protected Bus generate(GenericWsdlOption genericWsdlOption, \n-                              Bus bus,\n-                              Set<URI> classPath) throws MojoExecutionException {\n+                           Bus bus,\n+                           Set<URI> classPath) throws MojoExecutionException {\n         WsdlOption wsdlOption = (WsdlOption) genericWsdlOption;\n         File outputDirFile = wsdlOption.getOutputDir();\n         outputDirFile.mkdirs();\n@@ -199,11 +199,13 @@ protected Bus generate(GenericWsdlOption genericWsdlOption,\n \n         List<String> list = wsdlOption.generateCommandLine(outputDirFile, basedir, wsdlURI, \n                                                            getLog().isDebugEnabled());\n-        list.add(0, \"-encoding\");\n-        list.add(1, encoding);\n+        if (encoding != null) {\n+            list.add(0, \"-encoding\");\n+            list.add(1, encoding);\n+        }\n         String[] args = list.toArray(new String[list.size()]);\n         getLog().debug(\"Calling wsdl2java with args: \" + Arrays.toString(args));\n-        \n+\n         if (!\"false\".equals(fork)) {\n             Set<URI> artifactsPath = new LinkedHashSet<URI>();\n             for (Artifact a : pluginArtifacts) {\n@@ -217,7 +219,7 @@ protected Bus generate(GenericWsdlOption genericWsdlOption,\n             }\n             addPluginArtifact(artifactsPath);\n             artifactsPath.addAll(classPath);\n-            \n+\n             runForked(artifactsPath, WSDLToJava.class.getName(), args);\n \n         } else {\n@@ -230,9 +232,9 @@ protected Bus generate(GenericWsdlOption genericWsdlOption,\n             } catch (Throwable e) {\n                 getLog().debug(e);\n                 throw new MojoExecutionException(e.getMessage(), e);\n-            }  \n+            }\n         }\n-        \n+\n \n         try {\n             doneFile.createNewFile();\n@@ -249,21 +251,21 @@ protected Bus generate(GenericWsdlOption genericWsdlOption,\n         }\n         return bus;\n     }\n-    \n+\n     /**\n      * @return effective WsdlOptions\n      * @throws MojoExecutionException\n      */\n     protected List<GenericWsdlOption> createWsdlOptionsFromScansAndExplicitWsdlOptions()\n-        throws MojoExecutionException {\n+    throws MojoExecutionException {\n         List<GenericWsdlOption> effectiveWsdlOptions = new ArrayList<GenericWsdlOption>();\n-        \n+\n         if (wsdlOptions != null) {\n             for (WsdlOption wo : wsdlOptions) {\n                 effectiveWsdlOptions.add(wo);\n             }\n         }\n-        \n+\n         List<GenericWsdlOption> temp;\n         if (wsdlRoot != null && wsdlRoot.exists() && !disableDirectoryScan) {\n             temp = WsdlOptionLoader.loadWsdlOptionsFromFiles(wsdlRoot, includes, excludes,",
                "changes": 44,
                "blob_url": "https://github.com/apache/cxf/blob/685811bbde1d7d2eae1472ce8fd5bf81ecf58e30/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1335709 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/685811bbde1d7d2eae1472ce8fd5bf81ecf58e30"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f8d2b65c5e3eb5444cfce2257e705e092bf7b3b0",
        "bug_id": "cxf_194",
        "file": [
            {
                "additions": 1,
                "sha": "e81a359f646193dc8233ca2a575ec239c229f8f2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9192b48919f1ff2c07c6e20f8382a1c8b1fd19b7/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBDataBinding.java",
                "deletions": 0,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBDataBinding.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBDataBinding.java?ref=9192b48919f1ff2c07c6e20f8382a1c8b1fd19b7",
                "patch": "@@ -126,6 +126,7 @@ public synchronized Node getNode() {\n                     src.setPublicId(publicId);\n                     Document doc = StaxUtils.read(src);\n                     setNode(doc);\n+                    nd = super.getNode();\n                 } catch (Exception ex) {\n                     throw new RuntimeException(ex);\n                 }",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/9192b48919f1ff2c07c6e20f8382a1c8b1fd19b7/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBDataBinding.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix NPE in some tests with j5\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1332490 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/9192b48919f1ff2c07c6e20f8382a1c8b1fd19b7"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f3a4019a87dc58084b38057e0fa4c9577a0cb57e",
        "bug_id": "cxf_195",
        "file": [
            {
                "additions": 3,
                "sha": "178120567776759e43c7fcd8f5c3e51a607d5ea6",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/38f07548ddc00c14e07b2228860850f808f76167/api/src/main/java/org/apache/cxf/attachment/AttachmentDataSource.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/attachment/AttachmentDataSource.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/attachment/AttachmentDataSource.java?ref=38f07548ddc00c14e07b2228860850f808f76167",
                "patch": "@@ -62,7 +62,9 @@ public void hold(Message message) throws IOException {\n         cache.holdTempFile();\n     }\n     public void release() {\n-        cache.releaseTempFileHold();\n+        if (cache != null) {\n+            cache.releaseTempFileHold();\n+        }\n     }\n     \n     public String getContentType() {",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/38f07548ddc00c14e07b2228860850f808f76167/api/src/main/java/org/apache/cxf/attachment/AttachmentDataSource.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4267] Put an NPE guard in AttachmentDataSource\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1330945 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/38f07548ddc00c14e07b2228860850f808f76167"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/691953b6892c988e7af1bf76f72fbd534dac1926",
        "bug_id": "cxf_196",
        "file": [
            {
                "additions": 2,
                "sha": "5dca059985b6bab79401e4ae130c5fca8d5c5039",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/f9433fe9b98ba5d283d68afde08e5fb309891ec8/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/Soap12FaultInInterceptor.java",
                "deletions": 1,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/Soap12FaultInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/Soap12FaultInInterceptor.java?ref=f9433fe9b98ba5d283d68afde08e5fb309891ec8",
                "patch": "@@ -125,7 +125,8 @@ public static SoapFault unmarshalFault(SoapMessage message,\n                                         fault,\n                                         XPathConstants.STRING);                       \n         } catch (XMLStreamException e) {\n-            throw new SoapFault(\"Could not parse message.\", \n+            throw new SoapFault(\"Could not parse message.\",\n+                                e,\n                                 message.getVersion().getSender());\n         }\n ",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/f9433fe9b98ba5d283d68afde08e5fb309891ec8/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/Soap12FaultInInterceptor.java"
            },
            {
                "additions": 4,
                "sha": "088802431be03330aa75b062e4477cf1e5fdd917",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/f9433fe9b98ba5d283d68afde08e5fb309891ec8/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/JaxWsClientProxy.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/JaxWsClientProxy.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/JaxWsClientProxy.java?ref=f9433fe9b98ba5d283d68afde08e5fb309891ec8",
                "patch": "@@ -216,7 +216,10 @@ static SOAPFault createSoapFault(SOAPBinding binding, Exception ex) throws SOAPE\n             }\n             soapFault.setFaultString(((SoapFault)ex).getReason());\n             SAAJUtils.setFaultCode(soapFault, ((SoapFault)ex).getFaultCode());\n-            soapFault.setFaultActor(((SoapFault)ex).getRole());\n+            String role = ((SoapFault)ex).getRole();\n+            if (role != null) {\n+                soapFault.setFaultActor(role);\n+            }\n             if (((SoapFault)ex).getSubCode() != null) {\n                 soapFault.appendFaultSubcode(((SoapFault)ex).getSubCode());\n             }",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/f9433fe9b98ba5d283d68afde08e5fb309891ec8/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/JaxWsClientProxy.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4265] Fix potential NPE when createing soap faults.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1329905 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/f9433fe9b98ba5d283d68afde08e5fb309891ec8"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/21df6d90185c755079d817cc39be3baefd93fcdc",
        "bug_id": "cxf_197",
        "file": [
            {
                "additions": 6,
                "sha": "4ab9163b41b2c3f0cee419cab335d7d77a878ea3",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/19f79924ada3850e62ab429e538ee63a23445836/rt/core/src/main/java/org/apache/cxf/bus/blueprint/ConfigurerImpl.java",
                "deletions": 4,
                "filename": "rt/core/src/main/java/org/apache/cxf/bus/blueprint/ConfigurerImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/bus/blueprint/ConfigurerImpl.java?ref=19f79924ada3850e62ab429e538ee63a23445836",
                "patch": "@@ -131,11 +131,13 @@ public synchronized void configureBean(String bn, Object beanInstance, boolean c\n                 //Aries blueprint 0.3.x\n                 m = ReflectionUtil.findMethod(container.getClass(), \"getRepository\");\n                 Object o = ReflectionUtil.setAccessible(m).invoke(container);\n-                m = ReflectionUtil.findMethod(container.getClass(), \"getRecipe\", String.class);\n+                m = ReflectionUtil.findMethod(o.getClass(), \"getRecipe\", String.class);\n                 o = ReflectionUtil.setAccessible(m).invoke(o, bn);  //returns the recipe\n-                m = ReflectionUtil.findMethod(o.getClass(), \"setProperties\", Object.class);\n-                if (m != null) {\n-                    ReflectionUtil.setAccessible(m).invoke(o, beanInstance);\n+                if (o != null) {\n+                    m = ReflectionUtil.findMethod(o.getClass(), \"setProperties\", Object.class);\n+                    if (m != null) {\n+                        ReflectionUtil.setAccessible(m).invoke(o, beanInstance);\n+                    }\n                 }\n             }\n         } catch (InvocationTargetException ite) {",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/19f79924ada3850e62ab429e538ee63a23445836/rt/core/src/main/java/org/apache/cxf/bus/blueprint/ConfigurerImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix a potential NPE in blueprint configuration\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1311832 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/19f79924ada3850e62ab429e538ee63a23445836"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a6d28c13d01c1690e6268784222acdd6b3b3268f",
        "bug_id": "cxf_198",
        "file": [
            {
                "additions": 1,
                "sha": "ee39b2ed87926f2fa349fbe3e83ace63763f4b51",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ab7b0a3b12090969d543126132bfbbe6a7d75eaa/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java",
                "deletions": 1,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java?ref=ab7b0a3b12090969d543126132bfbbe6a7d75eaa",
                "patch": "@@ -873,7 +873,7 @@ private static XMLStreamReader findExtraNamespaces(XMLStreamReader source) {\n                 String ns[] = (String[])f.get(c);\n                 for (int x = 0; x < ns.length; x += 2) {\n                     if (ns[x] == null) {\n-                        nsMap.put(null, ns[x + 1]);\n+                        nsMap.put(\"\", ns[x + 1]);\n                     } else {\n                         nsMap.put(ns[x], ns[x + 1]);\n                     }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/ab7b0a3b12090969d543126132bfbbe6a7d75eaa/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java"
            }
        ],
        "repo": "cxf",
        "message": "Once again, fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1301201 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ab7b0a3b12090969d543126132bfbbe6a7d75eaa"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6316998ec65238e3b06d9c6b4b01ef449c340018",
        "bug_id": "cxf_199",
        "file": [
            {
                "additions": 8,
                "sha": "37708db4c79d6df27e82f3c566d8cbaa7192e4f9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c49d895242156ce34506f74f7857125342f8e070/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/WSDLGetUtils.java",
                "deletions": 6,
                "filename": "rt/frontend/simple/src/main/java/org/apache/cxf/frontend/WSDLGetUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/WSDLGetUtils.java?ref=c49d895242156ce34506f74f7857125342f8e070",
                "patch": "@@ -575,12 +575,14 @@ protected void updateSchemaImports(Bus bus,\n     }\n \n     private String findSchemaLocation(Map<String, SchemaReference> doneSchemas, SchemaReference imp) {\n-        for (Map.Entry<String, SchemaReference> e : doneSchemas.entrySet()) {\n-            if (e.getValue().getReferencedSchema().getElement() \n-                == imp.getReferencedSchema().getElement()) {\n-                doneSchemas.put(imp.getSchemaLocationURI(), imp);\n-                imp.setSchemaLocationURI(e.getKey());\n-                return e.getKey();\n+        if (imp.getReferencedSchema() != null) {\n+            for (Map.Entry<String, SchemaReference> e : doneSchemas.entrySet()) {\n+                if (e.getValue().getReferencedSchema().getElement() \n+                    == imp.getReferencedSchema().getElement()) {\n+                    doneSchemas.put(imp.getSchemaLocationURI(), imp);\n+                    imp.setSchemaLocationURI(e.getKey());\n+                    return e.getKey();\n+                }\n             }\n         }\n         return imp.getSchemaLocationURI();",
                "changes": 14,
                "blob_url": "https://github.com/apache/cxf/blob/c49d895242156ce34506f74f7857125342f8e070/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/WSDLGetUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4103] Prevent NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1243620 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c49d895242156ce34506f74f7857125342f8e070"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b69bf0956ad6c67114151ef59e3ff566abe49d90",
        "bug_id": "cxf_200",
        "file": [
            {
                "additions": 1,
                "sha": "dd5529424aa89bdf48b16ac3b15bfa0e6b1bad43",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b7658b31fe172eee288eaa6678ae87e33858ebba/api/src/main/java/org/apache/cxf/interceptor/FaultOutInterceptor.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/interceptor/FaultOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/interceptor/FaultOutInterceptor.java?ref=b7658b31fe172eee288eaa6678ae87e33858ebba",
                "patch": "@@ -168,7 +168,7 @@ public FaultInfo getFaultForClass(BindingOperationInfo op, Class<?> class1) {\n \n             FaultInfo faultInfo = bfi.getFaultInfo();\n             Class<?> c = (Class<?>)faultInfo.getProperty(Class.class.getName());\n-            if (c.isAssignableFrom(class1)) {\n+            if (c != null && c.isAssignableFrom(class1)) {\n                 return faultInfo;\n             }\n         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/b7658b31fe172eee288eaa6678ae87e33858ebba/api/src/main/java/org/apache/cxf/interceptor/FaultOutInterceptor.java"
            },
            {
                "additions": 2,
                "sha": "313156daca9f4261e564b37dada11cb2e84b89b4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b7658b31fe172eee288eaa6678ae87e33858ebba/rt/core/src/main/java/org/apache/cxf/service/factory/Messages.properties",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/service/factory/Messages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/service/factory/Messages.properties?ref=b7658b31fe172eee288eaa6678ae87e33858ebba",
                "patch": "@@ -37,3 +37,5 @@ JAXWS_ANNOTATION_FOUND=A JAX-WS Annotation was found on {0} while using the Simp\n XSD_VALIDATION_ERROR= Error in W3C XML Schema associated with service: {0}\n COULD_NOT_UNWRAP=Could not unwrap Operation {0} to match method \"{1}\"\n NO_WSDL_PROVIDED=WSDL is required for services created from class {0}, but no WSDL location specified. \n+NO_FAULT_PART = Could not find a fault part for {0}. The fault message must have a single part.\n+",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/b7658b31fe172eee288eaa6678ae87e33858ebba/rt/core/src/main/java/org/apache/cxf/service/factory/Messages.properties"
            },
            {
                "additions": 6,
                "sha": "464a34dec19fa61d16406badc16733573472f014",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b7658b31fe172eee288eaa6678ae87e33858ebba/rt/core/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "deletions": 1,
                "filename": "rt/core/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java?ref=b7658b31fe172eee288eaa6678ae87e33858ebba",
                "patch": "@@ -887,7 +887,12 @@ private void setFaultClassInfo(OperationInfo o, Method selected) {\n             QName name = getFaultName(o.getInterface(), o, exClass, beanClass);\n \n             for (FaultInfo fi : o.getFaults()) {\n-                for (MessagePartInfo mpi : fi.getMessageParts()) {\n+                List<MessagePartInfo> mpis = fi.getMessageParts();\n+                if (mpis.size() != 1) {\n+                    Message message = new Message(\"NO_FAULT_PART\", LOG, fi.getFaultName()); \n+                    LOG.log(Level.WARNING, message.toString());\n+                }\n+                for (MessagePartInfo mpi : mpis) {\n                     String ns = null;\n                     if (mpi.isElement()) {\n                         ns = mpi.getElementQName().getNamespaceURI();",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/b7658b31fe172eee288eaa6678ae87e33858ebba/rt/core/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4072] avoid NPE when a fault has no part\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1239373 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/b7658b31fe172eee288eaa6678ae87e33858ebba"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f2198b778fe9329615690ddf7e9fb74bcdd3d69a",
        "bug_id": "cxf_201",
        "file": [
            {
                "additions": 3,
                "sha": "4f475f5e940f086a2e3a5e04382cb877b64a176c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d8cf59d4171bb5697f7f5090ac0b9342e38368df/rt/core/src/main/java/org/apache/cxf/bus/osgi/WorkQueueSingleConfig.java",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/bus/osgi/WorkQueueSingleConfig.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/bus/osgi/WorkQueueSingleConfig.java?ref=d8cf59d4171bb5697f7f5090ac0b9342e38368df",
                "patch": "@@ -41,6 +41,9 @@ public WorkQueueSingleConfig(ManagedWorkQueueList workQueueList) {\n     }\r\n \r\n     public void updated(@SuppressWarnings(\"rawtypes\") Dictionary properties) throws ConfigurationException {\r\n+        if (properties == null) {\r\n+            return;\r\n+        }\r\n         Dictionary<String, String> p = CastUtils.cast(properties);\r\n         String names = (String)properties.get(PROPERTY_PREFIX + \".names\");\r\n         String[] nameAr = names.split(\",\");\r",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/d8cf59d4171bb5697f7f5090ac0b9342e38368df/rt/core/src/main/java/org/apache/cxf/bus/osgi/WorkQueueSingleConfig.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-3983 Fix for NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1232048 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/d8cf59d4171bb5697f7f5090ac0b9342e38368df"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e362fe49c3a19c18d517e8d51655d0909322fb90",
        "bug_id": "cxf_202",
        "file": [
            {
                "additions": 1,
                "sha": "5b7f22361a1d6c208efc8be97896325381653e3f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9e9652a9e15fba94b575283bc6461d4f7f669e14/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapTransportFactory.java",
                "deletions": 1,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapTransportFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapTransportFactory.java?ref=9e9652a9e15fba94b575283bc6461d4f7f669e14",
                "patch": "@@ -202,7 +202,7 @@ public EndpointInfo createEndpointInfo(ServiceInfo serviceInfo, BindingInfo b,\n \n \n     public Conduit getConduit(EndpointInfo ei, EndpointReferenceType target) throws IOException {\n-        String address = target.getAddress().getValue();\n+        String address = target == null ? ei.getAddress() : target.getAddress().getValue();\n         if (!StringUtils.isEmpty(address) && address.startsWith(\"soap.tcp://\")) {\n             //TODO - examine policies and stuff to look for the sun tcp policies\n             return new TCPConduit(ei);",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/9e9652a9e15fba94b575283bc6461d4f7f669e14/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapTransportFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "Add a NPE guard to SoapTransportFactory\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1226972 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/9e9652a9e15fba94b575283bc6461d4f7f669e14"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/dac17ee791b08a96a07dea2fa4282ce4f498def8",
        "bug_id": "cxf_203",
        "file": [
            {
                "additions": 3,
                "sha": "3f2d7ae4f37da44d738e79a111adb7a9918ad96b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/28ef288cbe3a078abaabd1cb1f39b0675edc3faa/rt/core/src/main/java/org/apache/cxf/interceptor/FaultOutInterceptor.java",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/interceptor/FaultOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/interceptor/FaultOutInterceptor.java?ref=28ef288cbe3a078abaabd1cb1f39b0675edc3faa",
                "patch": "@@ -51,6 +51,9 @@ public FaultOutInterceptor() {\n \n     public void handleMessage(Message message) throws Fault {\n         Fault f = (Fault)message.getContent(Exception.class);\n+        if (f == null) {\n+            return;\n+        }\n \n         Throwable cause = f.getCause();\n         if (cause == null) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/28ef288cbe3a078abaabd1cb1f39b0675edc3faa/rt/core/src/main/java/org/apache/cxf/interceptor/FaultOutInterceptor.java"
            },
            {
                "additions": 3,
                "sha": "280b2424f2e32495c212705a3e1df9fabeb2c208",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/28ef288cbe3a078abaabd1cb1f39b0675edc3faa/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WebFaultOutInterceptor.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WebFaultOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WebFaultOutInterceptor.java?ref=28ef288cbe3a078abaabd1cb1f39b0675edc3faa",
                "patch": "@@ -79,6 +79,9 @@ private WebFault getWebFaultAnnotation(Class<?> t) {\n     \n     public void handleMessage(Message message) throws Fault {\n         Fault f = (Fault)message.getContent(Exception.class);\n+        if (f == null) {\n+            return;\n+        }\n \n         Throwable cause = f.getCause();\n         WebFault fault = null;",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/28ef288cbe3a078abaabd1cb1f39b0675edc3faa/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WebFaultOutInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3925] Add some NPE guards on the fault chain\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1208097 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/28ef288cbe3a078abaabd1cb1f39b0675edc3faa"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1fe19dc206aab805f40d671d0b39e672d1bdb400",
        "bug_id": "cxf_204",
        "file": [
            {
                "additions": 1,
                "sha": "d13b35c8a595133e302ce12ca372944f1667730b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ecbbda410dbe6e36b1cd425d07ad3c8756c5c2e4/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java",
                "deletions": 1,
                "filename": "rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java?ref=ecbbda410dbe6e36b1cd425d07ad3c8756c5c2e4",
                "patch": "@@ -918,7 +918,7 @@ public static String getAction(Extensible ext) {\n         if (o instanceof QName) {\n             return ((QName)o).getLocalPart();\n         }\n-        return o.toString();\n+        return o == null ? null : o.toString();\n     }\n     public static EndpointReferenceType getNoneEndpointReference() {\n         return NONE_ENDPOINT_REFERENCE;",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/ecbbda410dbe6e36b1cd425d07ad3c8756c5c2e4/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3871] avoid NPE at getAction in wsa ContextUtils.getAction\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1187370 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ecbbda410dbe6e36b1cd425d07ad3c8756c5c2e4"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/18da32052e7ab2a7e88003b0f5dc49cf4f1c1d8f",
        "bug_id": "cxf_205",
        "file": [
            {
                "additions": 2,
                "sha": "2afdaf3861a824670dc0375f8185fb0d7ee63d6e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7681b1a938fe15f68d0a6a14099fa00f422bc5a4/common/wstx-msv-validation/src/main/java/org/apache/cxf/wstx_msv_validation/WoodstoxValidationImpl.java",
                "deletions": 2,
                "filename": "common/wstx-msv-validation/src/main/java/org/apache/cxf/wstx_msv_validation/WoodstoxValidationImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/common/wstx-msv-validation/src/main/java/org/apache/cxf/wstx_msv_validation/WoodstoxValidationImpl.java?ref=7681b1a938fe15f68d0a6a14099fa00f422bc5a4",
                "patch": "@@ -63,13 +63,13 @@ public WoodstoxValidationImpl(Bus b) {\n      * @throws XMLStreamException */\n     public void setupValidation(XMLStreamReader reader, \n                                 ServiceInfo serviceInfo) throws XMLStreamException {\n-        if (utils != null) {\n+        if (utils != null && reader != null) {\n             utils.setupValidation(reader, serviceInfo);\n         }\n     }\n \n     public void setupValidation(XMLStreamWriter writer, ServiceInfo serviceInfo) throws XMLStreamException {\n-        if (utils != null) {\n+        if (utils != null && writer != null) {\n             utils.setupValidation(writer, serviceInfo);\n         }\n     }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/7681b1a938fe15f68d0a6a14099fa00f422bc5a4/common/wstx-msv-validation/src/main/java/org/apache/cxf/wstx_msv_validation/WoodstoxValidationImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3846] Add a NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1186386 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/7681b1a938fe15f68d0a6a14099fa00f422bc5a4"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d01421601bbfaa8e557f682ae86c16c1c630bdbb",
        "bug_id": "cxf_206",
        "file": [
            {
                "additions": 3,
                "sha": "6e33974e0ea3f4da345c4c1434edec18c51c59cc",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/18da32052e7ab2a7e88003b0f5dc49cf4f1c1d8f/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java",
                "deletions": 0,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java?ref=18da32052e7ab2a7e88003b0f5dc49cf4f1c1d8f",
                "patch": "@@ -648,6 +648,9 @@ private Map getSoapOperationProp(BindingOperationInfo bop) {\n     }\n \n     private BindingType getBindingType(BindingInfo binding) {\n+        if (binding.getExtensors(ExtensibilityElement.class) == null) {\n+            return null;\n+        }\n         for (ExtensibilityElement ext : binding.getExtensors(ExtensibilityElement.class)) {\n             if (SOAPBindingUtil.isSOAPBinding(ext)) {\n                 bindingObj = SOAPBindingUtil.getSoapBinding(ext);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/18da32052e7ab2a7e88003b0f5dc49cf4f1c1d8f/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3829] Add and NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1186385 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/18da32052e7ab2a7e88003b0f5dc49cf4f1c1d8f"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/20bf791691638558ff061f8d23e4ebed1fbe8661",
        "bug_id": "cxf_207",
        "file": [
            {
                "additions": 3,
                "sha": "0cf0cfff41579ea56c3e32fc79034d1f1539bfd0",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d6c1af87db2b0cf390e32a8917f2646bd827e8d0/rt/core/src/main/java/org/apache/cxf/bus/osgi/OSGiExtensionLocator.java",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/bus/osgi/OSGiExtensionLocator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/bus/osgi/OSGiExtensionLocator.java?ref=d6c1af87db2b0cf390e32a8917f2646bd827e8d0",
                "patch": "@@ -71,6 +71,9 @@\n             = new ConcurrentHashMap<String, OSGiAutomaticWorkQueue>();\n \n         public void updated(Dictionary d) throws ConfigurationException {\n+            if (d == null) {\n+                return;\n+            }\n             String s = (String)d.get(\"org.apache.cxf.workqueue.names\");\n             if (s != null) {\n                 String s2[] = s.split(\",\");",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/d6c1af87db2b0cf390e32a8917f2646bd827e8d0/rt/core/src/main/java/org/apache/cxf/bus/osgi/OSGiExtensionLocator.java"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1182786 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/d6c1af87db2b0cf390e32a8917f2646bd827e8d0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f57e7aa9922b37f07edc2c435465b1cc3cf17fba",
        "bug_id": "cxf_208",
        "file": [
            {
                "additions": 6,
                "sha": "9ad3dbc14c2b09ce5b79bc71b6b2a5e5e3d8bd3d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d595ed4ab9f0a27f48575c0cf4005c0d2093ceab/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/spring/JettyHTTPServerEngineBeanDefinitionParser.java",
                "deletions": 2,
                "filename": "rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/spring/JettyHTTPServerEngineBeanDefinitionParser.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/spring/JettyHTTPServerEngineBeanDefinitionParser.java?ref=d595ed4ab9f0a27f48575c0cf4005c0d2093ceab",
                "patch": "@@ -137,8 +137,12 @@ public void doParse(Element element, ParserContext ctx, BeanDefinitionBuilder be\n     private static ThreadingParameters toThreadingParameters(\n                                     ThreadingParametersType paramtype) {\n         ThreadingParameters params = new ThreadingParameters();\n-        params.setMaxThreads(paramtype.getMaxThreads());\n-        params.setMinThreads(paramtype.getMinThreads());\n+        if (paramtype.getMaxThreads() != null) {\n+            params.setMaxThreads(paramtype.getMaxThreads());\n+        }\n+        if (paramtype.getMinThreads() != null) {\n+            params.setMinThreads(paramtype.getMinThreads());\n+        }\n         return params;\n     }\n     ",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/d595ed4ab9f0a27f48575c0cf4005c0d2093ceab/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/spring/JettyHTTPServerEngineBeanDefinitionParser.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid potential NPE if optional attributes aren't specified\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1179686 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/d595ed4ab9f0a27f48575c0cf4005c0d2093ceab"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5af4066acba87bae5687ff5f50e573cc5808e777",
        "bug_id": "cxf_209",
        "file": [
            {
                "additions": 3,
                "sha": "2389322778a7f0a653287e7db323541767930103",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/eea01bbe70a1b1f472fdd63c363d1f15e550b1bc/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/FormEncodingProvider.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/FormEncodingProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/FormEncodingProvider.java?ref=eea01bbe70a1b1f472fdd63c363d1f15e550b1bc",
                "patch": "@@ -89,6 +89,9 @@ public Object readFrom(\n         Class<Object> clazz, Type genericType, Annotation[] annotations, MediaType mt, \n         MultivaluedMap<String, String> headers, InputStream is) \n         throws IOException {\n+        if (is == null) {\n+            return null;\n+        }\n         try {\n             if (mt.isCompatible(MediaType.MULTIPART_FORM_DATA_TYPE)) {\n                 MultipartBody body = AttachmentUtils.getMultipartBody(mc);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/eea01bbe70a1b1f472fdd63c363d1f15e550b1bc/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/FormEncodingProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3821] Adding an NPE guard to FormEncodingProvider\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1175951 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/eea01bbe70a1b1f472fdd63c363d1f15e550b1bc"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7c4a15ff6d03feb8ff652d3d058ba25c063e540b",
        "bug_id": "cxf_210",
        "file": [
            {
                "additions": 3,
                "sha": "a0fca0d588c636d280ae827e5d473d88f5b6bfe9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/dfb24e2c6eecbdf96e2c241360843afa01b12eec/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPTransportFactory.java",
                "deletions": 0,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPTransportFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPTransportFactory.java?ref=dfb24e2c6eecbdf96e2c241360843afa01b12eec",
                "patch": "@@ -255,6 +255,9 @@ public Conduit getConduit(\n     }\n     \n     public Destination getDestination(EndpointInfo endpointInfo) throws IOException {\n+        if (endpointInfo == null) {\n+            throw new IllegalArgumentException(\"EndpointInfo cannot be null\");\n+        }\n         AbstractHTTPDestination d = registry.getDestinationForPath(endpointInfo.getAddress());\n         if (d == null) {\n             HttpDestinationFactory jettyFactory = bus.getExtension(HttpDestinationFactory.class);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/dfb24e2c6eecbdf96e2c241360843afa01b12eec/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPTransportFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1152083 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/dfb24e2c6eecbdf96e2c241360843afa01b12eec"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9a8b4046001d063ead85d4f1a152bcc1f01e9d16",
        "bug_id": "cxf_211",
        "file": [
            {
                "additions": 9,
                "sha": "64d5d27684fcc08cd3f381379012f4605d991a16",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a4f94b4e09a639bd7a579fad6cd9e8b429418306/rt/core/src/main/java/org/apache/cxf/bus/blueprint/BlueprintBeanLocator.java",
                "deletions": 4,
                "filename": "rt/core/src/main/java/org/apache/cxf/bus/blueprint/BlueprintBeanLocator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/bus/blueprint/BlueprintBeanLocator.java?ref=a4f94b4e09a639bd7a579fad6cd9e8b429418306",
                "patch": "@@ -25,12 +25,14 @@\n import java.util.LinkedHashSet;\n import java.util.List;\n import java.util.Set;\n+import java.util.logging.Logger;\n \n import org.apache.aries.blueprint.ExtendedBlueprintContainer;\n import org.apache.aries.blueprint.container.BeanRecipe;\n import org.apache.aries.blueprint.di.ExecutionContext;\n import org.apache.aries.blueprint.di.Recipe;\n import org.apache.cxf.bus.extension.ExtensionManagerImpl;\n+import org.apache.cxf.common.logging.LogUtils;\n import org.apache.cxf.configuration.ConfiguredBeanLocator;\n import org.osgi.framework.BundleContext;\n import org.osgi.framework.ServiceReference;\n@@ -40,6 +42,7 @@\n  * \n  */\n public class BlueprintBeanLocator implements ConfiguredBeanLocator {\n+    private static final Logger LOG = LogUtils.getL7dLogger(BlueprintBeanLocator.class);\n     ConfiguredBeanLocator orig;\n     ExtendedBlueprintContainer container;\n     BundleContext context;\n@@ -65,7 +68,7 @@ public BlueprintBeanLocator(ConfiguredBeanLocator orig,\n         try {\n             for (String s : container.getComponentIds()) {\n                 Recipe r = container.getRepository().getRecipe(s);\n-                if (r instanceof BeanRecipe \n+                if (r instanceof BeanRecipe && ((BeanRecipe)r).getType() != null\n                     && type.isAssignableFrom(((BeanRecipe)r).getType())) {\n                     names.add(s);\n                 }\n@@ -86,11 +89,11 @@ public BlueprintBeanLocator(ConfiguredBeanLocator orig,\n         try {\n             for (String s : container.getComponentIds()) {\n                 Recipe r = container.getRepository().getRecipe(s);\n-                if (r instanceof BeanRecipe \n+                if (r instanceof BeanRecipe && ((BeanRecipe)r).getType() != null\n                     && type.isAssignableFrom(((BeanRecipe)r).getType())) {\n                     \n                     list.add(type.cast(container.getComponentInstance(s)));\n-                }\n+                } \n             }\n         } finally {\n             ExecutionContext.Holder.setContext(origContext);\n@@ -106,6 +109,8 @@ public BlueprintBeanLocator(ConfiguredBeanLocator orig,\n                 }\n             } catch (Exception ex) {\n                 //ignore, just don't support the OSGi services\n+                LOG.info(\"Try to find the Bean with type:\" + type \n+                    + \" from OSGi services and get error: \" + ex);  \n             }\n         }\n         \n@@ -121,7 +126,7 @@ public BlueprintBeanLocator(ConfiguredBeanLocator orig,\n         try {\n             for (String s : container.getComponentIds()) {\n                 Recipe r = container.getRepository().getRecipe(s);\n-                if (r instanceof BeanRecipe \n+                if (r instanceof BeanRecipe && ((BeanRecipe)r).getType() != null\n                     && type.isAssignableFrom(((BeanRecipe)r).getType())) {\n                     names.add(s);\n                 }",
                "changes": 13,
                "blob_url": "https://github.com/apache/cxf/blob/a4f94b4e09a639bd7a579fad6cd9e8b429418306/rt/core/src/main/java/org/apache/cxf/bus/blueprint/BlueprintBeanLocator.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-3678 Fixed the NPE error of BlueprintBeanLocator\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1149444 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/a4f94b4e09a639bd7a579fad6cd9e8b429418306"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/c021eb8e1e9aa37a23b1265fe1e6d0c63bc1e70b",
        "bug_id": "cxf_212",
        "file": [
            {
                "additions": 6,
                "sha": "ce229cb2b24573e8c72c7ce23c809e809fd3c7c6",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4a8be430434f089138f6f06a83bb24294119b03c/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/AbstractTypeCreator.java",
                "deletions": 3,
                "filename": "rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/AbstractTypeCreator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/AbstractTypeCreator.java?ref=4a8be430434f089138f6f06a83bb24294119b03c",
                "patch": "@@ -22,6 +22,7 @@\n import java.lang.reflect.Field;\n import java.lang.reflect.Method;\n import java.lang.reflect.Type;\n+import java.lang.reflect.TypeVariable;\n import java.util.Collection;\n import java.util.Map;\n \n@@ -103,12 +104,14 @@ public TypeClassInfo createBasicClassInfo(Type type) {\n     }\n \n     public AegisType createTypeForClass(TypeClassInfo info) {\n-\n+        \n         Class javaClass = TypeUtil.getTypeRelatedClass(info.getType());\n         AegisType result = null;\n         boolean newType = true;\n-\n-        if (info.getAegisTypeClass() != null) {\n+        if (info.getType() instanceof TypeVariable) {\n+            //it's the generic type\n+            result = getOrCreateGenericType(info);\n+        } else if (info.getAegisTypeClass() != null) {\n             result = createUserType(info);\n         } else if (isArray(javaClass)) {\n             result = createArrayType(info);",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/4a8be430434f089138f6f06a83bb24294119b03c/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/AbstractTypeCreator.java"
            },
            {
                "additions": 16,
                "sha": "10d3576d03a714c867bd47e3bbfd7ee7a55015b9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4a8be430434f089138f6f06a83bb24294119b03c/systests/databinding/src/test/java/org/apache/cxf/systest/aegis/AegisClientServerTest.java",
                "deletions": 0,
                "filename": "systests/databinding/src/test/java/org/apache/cxf/systest/aegis/AegisClientServerTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/databinding/src/test/java/org/apache/cxf/systest/aegis/AegisClientServerTest.java?ref=4a8be430434f089138f6f06a83bb24294119b03c",
                "patch": "@@ -22,6 +22,7 @@\n \n import java.lang.reflect.Method;\n import java.net.URL;\n+import java.util.ArrayList;\n import java.util.Collection;\n import java.util.List;\n import java.util.Map;\n@@ -178,6 +179,21 @@ public void testComplexMapResult() throws Exception {\n         assertEquals(result.toString(), \"{key1={1=3}}\");\n     }\n     \n+    @Test\n+    public void testGenericCollection() throws Exception {\n+        AegisDatabinding aegisBinding = new AegisDatabinding();\n+        JaxWsProxyFactoryBean proxyFactory = new JaxWsProxyFactoryBean();\n+        proxyFactory.setDataBinding(aegisBinding);\n+        proxyFactory.setServiceClass(SportsService.class);\n+        proxyFactory.setAddress(\"http://localhost:\" + PORT + \"/jaxwsAndAegisSports\");\n+        proxyFactory.getInInterceptors().add(new LoggingInInterceptor());\n+        proxyFactory.getOutInterceptors().add(new LoggingOutInterceptor());\n+        SportsService service = (SportsService) proxyFactory.create();\n+        List<String> list = new ArrayList<String>();\n+        list.add(\"ffang\");\n+        String ret = service.getGeneric(list);\n+        assertEquals(ret, \"ffang\");\n+    }\n           \n     @Test\n     public void testDynamicClient() throws Exception {",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/4a8be430434f089138f6f06a83bb24294119b03c/systests/databinding/src/test/java/org/apache/cxf/systest/aegis/AegisClientServerTest.java"
            },
            {
                "additions": 2,
                "sha": "445cb8d2a7382b7d0cab31282b9dfc77611554a4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4a8be430434f089138f6f06a83bb24294119b03c/systests/databinding/src/test/java/org/apache/cxf/systest/aegis/SportsService.java",
                "deletions": 0,
                "filename": "systests/databinding/src/test/java/org/apache/cxf/systest/aegis/SportsService.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/databinding/src/test/java/org/apache/cxf/systest/aegis/SportsService.java?ref=4a8be430434f089138f6f06a83bb24294119b03c",
                "patch": "@@ -43,4 +43,6 @@\n     }\n \n     Map<String, Map<Integer, Integer>> testComplexMapResult();\n+    \n+    <T> T getGeneric(Collection<T> collection);\n }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/4a8be430434f089138f6f06a83bb24294119b03c/systests/databinding/src/test/java/org/apache/cxf/systest/aegis/SportsService.java"
            },
            {
                "additions": 12,
                "sha": "6b0480777ed15decaed58ee9fb6f1c917017ae2a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4a8be430434f089138f6f06a83bb24294119b03c/systests/databinding/src/test/java/org/apache/cxf/systest/aegis/SportsServiceImpl.java",
                "deletions": 0,
                "filename": "systests/databinding/src/test/java/org/apache/cxf/systest/aegis/SportsServiceImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/databinding/src/test/java/org/apache/cxf/systest/aegis/SportsServiceImpl.java?ref=4a8be430434f089138f6f06a83bb24294119b03c",
                "patch": "@@ -22,6 +22,7 @@\n import java.util.ArrayList;\n import java.util.Collection;\n import java.util.HashMap;\n+import java.util.Iterator;\n import java.util.List;\n import java.util.Map;\n \n@@ -60,5 +61,16 @@ public BeanWithCharacter getCharBean() {\n         return result;\n \n     }\n+\n+   \n+    public <T> T getGeneric(Collection<T> collection) {\n+        Iterator<T> iter = collection.iterator();\n+        \n+        T ret = null;\n+        if (iter.hasNext()) {\n+            ret = iter.next();\n+        }\n+        return ret;\n+    }\n       \n }",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/4a8be430434f089138f6f06a83bb24294119b03c/systests/databinding/src/test/java/org/apache/cxf/systest/aegis/SportsServiceImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3527]NPE while use generic in collections with aegis databinding\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1127829 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/4a8be430434f089138f6f06a83bb24294119b03c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/56d523028dce32cad09d0eafb5017d1a06ef730f",
        "bug_id": "cxf_213",
        "file": [
            {
                "additions": 2,
                "sha": "aef49ecf0ba780107e733e7144c7c36f4367f1b5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c612cc81ea4094cb3087b656cdafaa54fcf14e97/common/common/src/main/java/org/apache/cxf/staxutils/StaxSource.java",
                "deletions": 2,
                "filename": "common/common/src/main/java/org/apache/cxf/staxutils/StaxSource.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/common/common/src/main/java/org/apache/cxf/staxutils/StaxSource.java?ref=c612cc81ea4094cb3087b656cdafaa54fcf14e97",
                "patch": "@@ -182,8 +182,8 @@ protected Attributes getAttributes() {\n             }\n             // Default namespace\n             if (prefix == null || prefix.length() == 0) {\n-                attrs.addAttribute(XMLConstants.DEFAULT_NS_PREFIX, \n-                                   null, \n+                attrs.addAttribute(\"\", \n+                                   \"\", \n                                    XMLConstants.XMLNS_ATTRIBUTE, \n                                    \"CDATA\", \n                                    uri);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/c612cc81ea4094cb3087b656cdafaa54fcf14e97/common/common/src/main/java/org/apache/cxf/staxutils/StaxSource.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3539] Fix NPE in STS if default namespace is used\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1127605 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c612cc81ea4094cb3087b656cdafaa54fcf14e97"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/2d16f1426ce3ba931fa1c3c6dac00ae451443649",
        "bug_id": "cxf_214",
        "file": [
            {
                "additions": 1,
                "sha": "03d5575befccf4d5b70bc3392f0b836816cc4d1a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4a579f27dcce7774db1f4184f5fe4ff311570eea/common/common/src/main/java/org/apache/cxf/jaxb/JAXBContextCache.java",
                "deletions": 0,
                "filename": "common/common/src/main/java/org/apache/cxf/jaxb/JAXBContextCache.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/common/common/src/main/java/org/apache/cxf/jaxb/JAXBContextCache.java?ref=4a579f27dcce7774db1f4184f5fe4ff311570eea",
                "patch": "@@ -258,6 +258,7 @@ private static JAXBContext createContext(Set<Class<?>> classes,\n             ctx = JAXBContext.newInstance(classes.toArray(new Class[classes.size()]), map);\n         } catch (JAXBException ex) {\n             if (map.containsKey(\"com.sun.xml.bind.defaultNamespaceRemap\")\n+                && ex.getMessage() != null\n                 && ex.getMessage().contains(\"com.sun.xml.bind.defaultNamespaceRemap\")) {\n                 map.put(\"com.sun.xml.internal.bind.defaultNamespaceRemap\",\n                         map.remove(\"com.sun.xml.bind.defaultNamespaceRemap\"));",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/4a579f27dcce7774db1f4184f5fe4ff311570eea/common/common/src/main/java/org/apache/cxf/jaxb/JAXBContextCache.java"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1125209 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/4a579f27dcce7774db1f4184f5fe4ff311570eea"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4204d68d4a61aacb3e4e4f315797b87fe8c7197c",
        "bug_id": "cxf_215",
        "file": [
            {
                "additions": 3,
                "sha": "b334b51c4a597602e7173db07f9c380fd8ca3720",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad6d13ba2cbd6ac822e9b3e0db96cd617a32e16c/tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/MIMEBindingValidator.java",
                "deletions": 0,
                "filename": "tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/MIMEBindingValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/MIMEBindingValidator.java?ref=ad6d13ba2cbd6ac822e9b3e0db96cd617a32e16c",
                "patch": "@@ -47,6 +47,9 @@ public boolean isValid() {\n             Iterator itOperation = binding.getBindingOperations().iterator();\n             while (itOperation.hasNext()) {\n                 BindingOperation bindingOperation = (BindingOperation)itOperation.next();\n+                if (bindingOperation.getBindingInput() == null) {\n+                    continue;\n+                }\n                 Iterator itInputExt = bindingOperation.getBindingInput().getExtensibilityElements()\n                     .iterator();\n                 while (itInputExt.hasNext()) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/ad6d13ba2cbd6ac822e9b3e0db96cd617a32e16c/tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/MIMEBindingValidator.java"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard in the MIME validator\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1095750 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ad6d13ba2cbd6ac822e9b3e0db96cd617a32e16c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3c6437f0f6c1877c36bcc11caddfdd23e5ff7f78",
        "bug_id": "cxf_216",
        "file": [
            {
                "additions": 7,
                "sha": "99092de0f0fc69e00cecaa21ff15beb4e2fc72f8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4f23e446fc2ea356b62eff0edc09bac658d719ca/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyAnnotationListener.java",
                "deletions": 1,
                "filename": "rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyAnnotationListener.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyAnnotationListener.java?ref=4f23e446fc2ea356b62eff0edc09bac658d719ca",
                "patch": "@@ -208,6 +208,9 @@ private void addPolicies(AbstractServiceFactoryBean factory, Server server, Clas\n         if (list != null) {\n             addPolicies(factory, server.getEndpoint(), cls, list, Policy.Placement.BINDING);\n         }\n+        if (cls == null) {\n+            return;\n+        }\n         Policy p = cls.getAnnotation(Policy.class);\n         Policies ps = cls.getAnnotation(Policies.class);\n         if (p != null || ps != null) {\n@@ -268,6 +271,9 @@ private void addPolicies(AbstractServiceFactoryBean factory, Endpoint endpoint,\n \n \n     private void addPolicies(AbstractServiceFactoryBean factory, InterfaceInfo ii, Class<?> cls) {\n+        if (cls == null) {\n+            return;\n+        }\n         Policy p = cls.getAnnotation(Policy.class);\n         Policies ps = cls.getAnnotation(Policies.class);\n         if (p != null || ps != null) {\n@@ -335,7 +341,7 @@ private Element addPolicy(ServiceInfo service, Policy p, Class<?> cls, String de\n             if (src != null) {\n                 try {\n                     Document doc = StaxUtils.read(StaxUtils.createXMLStreamReader(src));\n-                    if (service.getDescription() == null) {\n+                    if (service.getDescription() == null && cls != null) {\n                         service.setDescription(new DescriptionInfo());\n                         service.getDescription().setBaseURI(cls.getResource(\"/\").toString());\n                     }",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/4f23e446fc2ea356b62eff0edc09bac658d719ca/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyAnnotationListener.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3410] Added a bunch of NPE guards\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1089193 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/4f23e446fc2ea356b62eff0edc09bac658d719ca"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4bdbcc0af48d90dd7e229721969bf9743d59ede7",
        "bug_id": "cxf_217",
        "file": [
            {
                "additions": 6,
                "sha": "d055266b9112add4a0e2f34a8fccdd9504675002",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/3c2a97a926baa894d9eea469e0c174fda1b5d006/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/STSClient.java",
                "deletions": 1,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/STSClient.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/STSClient.java?ref=3c2a97a926baa894d9eea469e0c174fda1b5d006",
                "patch": "@@ -820,7 +820,12 @@ private X509Certificate getCert(Crypto crypto) throws Exception {\n         }\n         CryptoType cryptoType = new CryptoType(CryptoType.TYPE.ALIAS);\n         cryptoType.setAlias(alias);\n-        return crypto.getX509Certificates(cryptoType)[0];\n+        \n+        X509Certificate certs[] = crypto.getX509Certificates(cryptoType);\n+        if (certs == null || certs.length == 0) {\n+            throw new Fault(\"Could not get X509Certificate for alias \" + alias, LOG);\n+        }\n+        return certs[0];\n     }\n \n     private void addLifetime(XMLStreamWriter writer) throws XMLStreamException {",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/3c2a97a926baa894d9eea469e0c174fda1b5d006/rt/ws/security/src/main/java/org/apache/cxf/ws/security/trust/STSClient.java"
            }
        ],
        "repo": "cxf",
        "message": "Add a NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1082698 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/3c2a97a926baa894d9eea469e0c174fda1b5d006"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d3cf02ad87ad118ab8f0016ae48f193697c03de9",
        "bug_id": "cxf_218",
        "file": [
            {
                "additions": 5,
                "sha": "4a9e2cbd89e8d8cb0a52186d9ec1e62cb64231b1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2a64be6861c3b1dfa502e13dc39b83f35f5a3103/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/TypeDclVisitor.java",
                "deletions": 0,
                "filename": "tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/TypeDclVisitor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/TypeDclVisitor.java?ref=2a64be6861c3b1dfa502e13dc39b83f35f5a3103",
                "patch": "@@ -70,6 +70,11 @@ public void visit(AST node) {\n             //\n             // native type not supported\n             throw new RuntimeException(\"[TypeDclVisitor: native type not supported!]\");\n+        }  else if (node.getType() == IDLTokenTypes.LITERAL_typeprefix) {\n+            // typeprefix <scoped_name> <string_literal>\n+            // typeprefix not supported\n+            // keyword since CORBA 3.0\n+            throw new RuntimeException(\"[TypeDclVisitor: typeprefix not supported!]\");\n         }\n \n         // TODO forward declaration <constr_forward_declaration>",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/2a64be6861c3b1dfa502e13dc39b83f35f5a3103/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/TypeDclVisitor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3297]idl2wsdl fails with NPE if IDL contains typeprefix keyword\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1065609 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/2a64be6861c3b1dfa502e13dc39b83f35f5a3103"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9e0729a6977313f550d34e03686d80abe8784d61",
        "bug_id": "cxf_219",
        "file": [
            {
                "additions": 1,
                "sha": "b9ad81f4b26c561747d966e920eb059ced79eaff",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2b8ccfbe36c007b74e5d93690fa68e3a974c0bf2/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java?ref=2b8ccfbe36c007b74e5d93690fa68e3a974c0bf2",
                "patch": "@@ -362,7 +362,7 @@ private String getContentTypeFromMessage() {\n     protected void copyToResponse(HttpServletResponse response) {\r\n         String contentType = getContentTypeFromMessage();\r\n  \r\n-        if (!headers.containsKey(Message.CONTENT_TYPE)) {\r\n+        if (!headers.containsKey(Message.CONTENT_TYPE) && contentType != null) {\r\n             response.setContentType(contentType);\r\n         }\r\n \r",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/2b8ccfbe36c007b74e5d93690fa68e3a974c0bf2/rt/transports/http/src/main/java/org/apache/cxf/transport/http/Headers.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3232] Add a NPE guard around setting the content type\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1057390 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/2b8ccfbe36c007b74e5d93690fa68e3a974c0bf2"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/43155e24c6998b3c1ceccab5018649f727f3645b",
        "bug_id": "cxf_220",
        "file": [
            {
                "additions": 13,
                "sha": "dba6d579c3565d90c2444d2300c8689a3f891802",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/435a4f0f09a2fc7715a25fe0b219563022c79d20/api/src/main/java/org/apache/cxf/wsdl/EndpointReferenceUtils.java",
                "deletions": 11,
                "filename": "api/src/main/java/org/apache/cxf/wsdl/EndpointReferenceUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/wsdl/EndpointReferenceUtils.java?ref=435a4f0f09a2fc7715a25fe0b219563022c79d20",
                "patch": "@@ -195,17 +195,19 @@ public LSInput resolveResource(String type, String namespaceURI, String publicId\n             // handle case where given systemId is null (so that\n             // direct key lookup fails) by scanning through map\n             // searching for a namespace match\n-            for (Map.Entry<String, byte[]> ent : schemas.entrySet()) {\n-                if (ent.getKey().endsWith(namespaceURI)) {\n-                    schemas.remove(ent.getKey());\n-                    impl = new LSInputImpl();\n-                    impl.setSystemId(newId);\n-                    impl.setBaseURI(newId);\n-                    impl.setCharacterStream(\n-                        new InputStreamReader(\n-                            new ByteArrayInputStream(ent.getValue())));\n-                    done.add(newId + \":\" + namespaceURI);\n-                    return impl;\n+            if (namespaceURI != null) {\n+                for (Map.Entry<String, byte[]> ent : schemas.entrySet()) {\n+                    if (ent.getKey().endsWith(namespaceURI)) {\n+                        schemas.remove(ent.getKey());\n+                        impl = new LSInputImpl();\n+                        impl.setSystemId(newId);\n+                        impl.setBaseURI(newId);\n+                        impl.setCharacterStream(\n+                            new InputStreamReader(\n+                                new ByteArrayInputStream(ent.getValue())));\n+                        done.add(newId + \":\" + namespaceURI);\n+                        return impl;\n+                    }\n                 }\n             }\n                 ",
                "changes": 24,
                "blob_url": "https://github.com/apache/cxf/blob/435a4f0f09a2fc7715a25fe0b219563022c79d20/api/src/main/java/org/apache/cxf/wsdl/EndpointReferenceUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3061] Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1040314 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/435a4f0f09a2fc7715a25fe0b219563022c79d20"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/685ee056a0812b9b32b4af9d89a5a0baf8d7bc77",
        "bug_id": "cxf_221",
        "file": [
            {
                "additions": 6,
                "sha": "8c3e4b5970d9f327f412459aed71ccd84ff27c3b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a17e946ac8a0fe3c9e70285fd7d7446c164952f0/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/HolderInInterceptor.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/HolderInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/HolderInInterceptor.java?ref=a17e946ac8a0fe3c9e70285fd7d7446c164952f0",
                "patch": "@@ -30,6 +30,7 @@\n import org.apache.cxf.message.MessageContentsList;\n import org.apache.cxf.phase.AbstractPhaseInterceptor;\n import org.apache.cxf.phase.Phase;\n+import org.apache.cxf.service.model.BindingOperationInfo;\n import org.apache.cxf.service.model.MessagePartInfo;\n import org.apache.cxf.service.model.OperationInfo;\n \n@@ -46,8 +47,11 @@ public void handleMessage(Message message) throws Fault {\n         MessageContentsList inObjects = MessageContentsList.getContentsList(message);\n \n         Exchange exchange = message.getExchange();\n-        \n-        OperationInfo op = exchange.getBindingOperationInfo().getOperationInfo();\n+        BindingOperationInfo bop = exchange.getBindingOperationInfo();\n+        if (bop == null) {\n+            return;\n+        }\n+        OperationInfo op = bop.getOperationInfo();\n         if (op == null || !op.hasOutput() || op.getOutput().size() == 0) {\n             return;\n         }",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/a17e946ac8a0fe3c9e70285fd7d7446c164952f0/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/HolderInInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3116] Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1034062 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/a17e946ac8a0fe3c9e70285fd7d7446c164952f0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/93b280e2353cc9477db7918c06812c30443ea071",
        "bug_id": "cxf_222",
        "file": [
            {
                "additions": 7,
                "sha": "81e2d0200a4bbfc44b2b66beeb852d3f5a5b18a0",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8aa2857dfb2a04431461f75eb1338da3a8df7776/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceConfiguration.java",
                "deletions": 5,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceConfiguration.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceConfiguration.java?ref=8aa2857dfb2a04431461f75eb1338da3a8df7776",
                "patch": "@@ -844,11 +844,13 @@ public Boolean isWrapperPartQualified(MessagePartInfo mpi) {\n     \n     public Long getWrapperPartMinOccurs(MessagePartInfo mpi) {\n         Annotation[] a = (Annotation[])mpi.getProperty(ReflectionServiceFactoryBean.PARAM_ANNOTATION);\n-        for (Annotation a2 : a) {\n-            if (a2 instanceof XmlElement) {\n-                XmlElement e = (XmlElement)a2;\n-                if (e.required()) {\n-                    return 1L;\n+        if (a != null) {\n+            for (Annotation a2 : a) {\n+                if (a2 instanceof XmlElement) {\n+                    XmlElement e = (XmlElement)a2;\n+                    if (e.required()) {\n+                        return 1L;\n+                    }\n                 }\n             }\n         }",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/8aa2857dfb2a04431461f75eb1338da3a8df7776/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceConfiguration.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3069] Adding NPE guard to getWrapperPartMinOccurs method\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1027509 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/8aa2857dfb2a04431461f75eb1338da3a8df7776"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5e5f102527e107602b1590c1842a9d7cb77226b8",
        "bug_id": "cxf_223",
        "file": [
            {
                "additions": 6,
                "sha": "d25ef6ef078f1bb004aded8ae646a8929eb30685",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/54dc8595fefc2c66492e6a51ca1fba624f30f6d8/rt/core/src/main/java/org/apache/cxf/interceptor/OneWayProcessorInterceptor.java",
                "deletions": 2,
                "filename": "rt/core/src/main/java/org/apache/cxf/interceptor/OneWayProcessorInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/interceptor/OneWayProcessorInterceptor.java?ref=54dc8595fefc2c66492e6a51ca1fba624f30f6d8",
                "patch": "@@ -86,8 +86,12 @@ public void handleMessage(Message message) throws Fault {\n                 partial.setExchange(message.getExchange());\n                 Conduit conduit = message.getExchange().getDestination()\n                     .getBackChannel(message, null, null);\n-                conduit.prepare(partial);\n-                conduit.close(partial);\n+                if (conduit != null) {\n+                    //for a one-way, the back channel could be\n+                    //null if it knows it cannot send anything.\n+                    conduit.prepare(partial);\n+                    conduit.close(partial);\n+                }\n             } catch (IOException e) {\n                 //IGNORE\n             }",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/54dc8595fefc2c66492e6a51ca1fba624f30f6d8/rt/core/src/main/java/org/apache/cxf/interceptor/OneWayProcessorInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard to the OneWayProcessor.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1027274 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/54dc8595fefc2c66492e6a51ca1fba624f30f6d8"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7e8fc29fa1c73a7528952e801fdc822ac09e451b",
        "bug_id": "cxf_224",
        "file": [
            {
                "additions": 4,
                "sha": "d16f8d08cd65221f2f19669b5097399bd2c3197d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7fd6bd0b7beeb12aa69ae5ff1980bdeabb528679/rt/core/src/main/java/org/apache/cxf/service/factory/AnnotationsFactoryBeanListener.java",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/service/factory/AnnotationsFactoryBeanListener.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/service/factory/AnnotationsFactoryBeanListener.java?ref=7fd6bd0b7beeb12aa69ae5ff1980bdeabb528679",
                "patch": "@@ -81,6 +81,10 @@ public void handleEvent(Event ev, AbstractServiceFactoryBean factory, Object...\n             Class<?> cls = (Class<?>)args[2];\n             Endpoint ep = (Endpoint)args[1];\n             Bus bus = factory.getBus();\n+            // To avoid the NPE\n+            if (cls == null) {\n+                return;\n+            }\n             addSchemaValidationSupport(ep, cls.getAnnotation(SchemaValidation.class));\n             addFastInfosetSupport(ep, cls.getAnnotation(FastInfoset.class));\n             addGZipSupport(ep, bus, cls.getAnnotation(GZIP.class));",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/7fd6bd0b7beeb12aa69ae5ff1980bdeabb528679/rt/core/src/main/java/org/apache/cxf/service/factory/AnnotationsFactoryBeanListener.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-2971 Avoid the NPE of AnnotationsFactoryBeanListener\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@992225 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/7fd6bd0b7beeb12aa69ae5ff1980bdeabb528679"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9dbe5d7bc932ca447980505b56df44e3bb3ed5b4",
        "bug_id": "cxf_225",
        "file": [
            {
                "additions": 2,
                "sha": "80730fa8a47652290d76865de4dec7aed8a80d70",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/87a14ebbe79faf57c38754fb22c7a47477ff9ccf/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2ws/JavaToWSContainer.java",
                "deletions": 1,
                "filename": "tools/javato/ws/src/main/java/org/apache/cxf/tools/java2ws/JavaToWSContainer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2ws/JavaToWSContainer.java?ref=87a14ebbe79faf57c38754fb22c7a47477ff9ccf",
                "patch": "@@ -85,10 +85,11 @@ public void execute(boolean exitOnFinish) throws ToolException {\n         } catch (Exception ex) {\n             \n             // Try to find an exception with a message on the stack\n-            Throwable e = ex.getCause();\n+            Throwable e = ex;\n             while ((e.getMessage() == null || \"\".equals(e.getMessage())) && e.getCause() != null) {\n                 e = e.getCause();\n             }\n+        \n             err.println(\"Error: \" + e.toString());\n             err.println();\n             if (isVerboseOn()) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/87a14ebbe79faf57c38754fb22c7a47477ff9ccf/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2ws/JavaToWSContainer.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2962] Add a better NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@992000 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/87a14ebbe79faf57c38754fb22c7a47477ff9ccf"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/706f7a0a7d321df669a40b8a3cc7d6e3687377e2",
        "bug_id": "cxf_226",
        "file": [
            {
                "additions": 7,
                "sha": "498123c1b888a9cb18d104a35e12e3ab49955c9d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d5eca298b744a4bf7fb73a96b08191ed92b0098a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/UriBuilderImpl.java",
                "deletions": 5,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/UriBuilderImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/UriBuilderImpl.java?ref=d5eca298b744a4bf7fb73a96b08191ed92b0098a",
                "patch": "@@ -550,12 +550,14 @@ public UriBuilder segment(String... segments) throws IllegalArgumentException {\n      */\n     private List<String> toStringList(Object... values) throws IllegalArgumentException {\n         List<String> list = new ArrayList<String>();\n-        for (int i = 0; i < values.length; i++) {\n-            Object value = values[i];\n-            if (value == null) {\n-                throw new IllegalArgumentException(\"Null value on \" + i + \" position\");\n+        if (values != null) {\n+            for (int i = 0; i < values.length; i++) {\n+                Object value = values[i];\n+                if (value == null) {\n+                    throw new IllegalArgumentException(\"Null value on \" + i + \" position\");\n+                }\n+                list.add(value.toString());\n             }\n-            list.add(value.toString());\n         }\n         if (list.isEmpty()) {\n             list.add(\"\");",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/d5eca298b744a4bf7fb73a96b08191ed92b0098a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/UriBuilderImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@984493 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/d5eca298b744a4bf7fb73a96b08191ed92b0098a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6b5fe08a131a9addd80f6b2ccf3f198d650b6a37",
        "bug_id": "cxf_227",
        "file": [
            {
                "additions": 3,
                "sha": "0eb0281015278d13759172a6433e844325032271",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/5f800397146f994e32b6f71b5afd9088d0cd1500/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java",
                "deletions": 1,
                "filename": "common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java?ref=5f800397146f994e32b6f71b5afd9088d0cd1500",
                "patch": "@@ -784,7 +784,9 @@ public static void writeNode(Node n, XMLStreamWriter writer, boolean repairing)\n         }\n         case Node.DOCUMENT_TYPE_NODE:\n             try {\n-                writer.writeDTD(((DocumentType)n).getTextContent());\n+                if (((DocumentType)n).getTextContent() != null) {\n+                    writer.writeDTD(((DocumentType)n).getTextContent());\n+                }\n             } catch (UnsupportedOperationException ex) {\n                 //can we ignore?  DOM writers really don't allow this\n                 //as there isn't a way to write a DTD in dom",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/5f800397146f994e32b6f71b5afd9088d0cd1500/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2919] Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@984454 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/5f800397146f994e32b6f71b5afd9088d0cd1500"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/06eacb1fb02934d0c73e73d84201d63737423098",
        "bug_id": "cxf_228",
        "file": [
            {
                "additions": 7,
                "sha": "cacb602bc88a5ded2d1ab6c4bf51f6ef8a00690e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad878493fc7f4c272f4d98649df57530837fbef0/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/UriBuilderImpl.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/UriBuilderImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/UriBuilderImpl.java?ref=ad878493fc7f4c272f4d98649df57530837fbef0",
                "patch": "@@ -162,8 +162,14 @@ public URI buildFromEncoded(Object... values) throws IllegalArgumentException, U\n         // is promising unfortunatley it causes the loss of encoded reserved values such as +,\n         // which might cause problems if consumers do rely on URLEncoder which would turn '+' into\n         // ' ' or would break the contract in when query parameters are expected to have %2B \n-        \n+        if (values == null) {\n+            throw new IllegalArgumentException(\"Template parameter values are set to null\");\n+        }\n         for (int i = 0; i < values.length; i++) {\n+            if (values[i] == null) {\n+                throw new IllegalArgumentException(\"Template parameter value is set to null\");\n+            }\n+            \n             values[i] = HttpUtils.encodePartiallyEncoded(values[i].toString(), false);\n         }\n         return doBuild(true, values);",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/ad878493fc7f4c272f4d98649df57530837fbef0/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/UriBuilderImpl.java"
            },
            {
                "additions": 12,
                "sha": "30748bab2354161253e6ebf6c0e882df8612a9b0",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad878493fc7f4c272f4d98649df57530837fbef0/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/impl/UriBuilderImplTest.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/impl/UriBuilderImplTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/impl/UriBuilderImplTest.java?ref=ad878493fc7f4c272f4d98649df57530837fbef0",
                "patch": "@@ -126,6 +126,18 @@ public void testPathTrailingSlash() throws Exception {\n         assertEquals(\"URI is not built correctly\", \"http://bar/\", newUri.toString());\n     }\n     \n+    @Test(expected = IllegalArgumentException.class)\n+    public void testNullPathWithBuildEncoded() throws Exception {\n+        URI uri = new URI(\"http://bar\");\n+        new UriBuilderImpl(uri).path(\"{bar}\").buildFromEncoded((Object[])null);\n+    }\n+    \n+    @Test(expected = IllegalArgumentException.class)\n+    public void testNullPathWithBuildEncoded2() throws Exception {\n+        URI uri = new URI(\"http://bar\");\n+        new UriBuilderImpl(uri).path(\"{bar}\").buildFromEncoded(new Object[] {null});\n+    }\n+    \n     @Test\n     public void testPathTrailingSlash2() throws Exception {\n         URI uri = new URI(\"http://bar\");",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/ad878493fc7f4c272f4d98649df57530837fbef0/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/impl/UriBuilderImplTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2887] Fixing NPE in UriBuilderImpl\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@966026 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ad878493fc7f4c272f4d98649df57530837fbef0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5f620de8b0952a2a4d1d44d33848508e6462b839",
        "bug_id": "cxf_229",
        "file": [
            {
                "additions": 4,
                "sha": "55662d63fb86c235823c94b346d12a57689c083e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/61b13052c3e38491f46792ed607105c9d1f92b55/rt/transports/jms/src/main/java/org/apache/cxf/transport/jms/JMSDestination.java",
                "deletions": 2,
                "filename": "rt/transports/jms/src/main/java/org/apache/cxf/transport/jms/JMSDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/jms/src/main/java/org/apache/cxf/transport/jms/JMSDestination.java?ref=61b13052c3e38491f46792ed607105c9d1f92b55",
                "patch": "@@ -218,8 +218,10 @@ public void onMessage(javax.jms.Message message, Session session) {\n             // handle the incoming message\n             incomingObserver.onMessage(inMessage);\n             \n-            inMessage = inMessage.getExchange().getInMessage();\n-            \n+            if (inMessage.getExchange() != null \n+                && inMessage.getExchange().getInMessage() != null) {\n+                inMessage = inMessage.getExchange().getInMessage();\n+            }\n             //need to propagate any exceptions back to Spring container \n             //so transactions can occur\n             if (inMessage.getContent(Exception.class) != null && session != null) {",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/61b13052c3e38491f46792ed607105c9d1f92b55/rt/transports/jms/src/main/java/org/apache/cxf/transport/jms/JMSDestination.java"
            }
        ],
        "repo": "cxf",
        "message": "Add some NPE guards\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@951549 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/61b13052c3e38491f46792ed607105c9d1f92b55"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/2e7271331efc39c4a1a3a46c96ddba6b69d578c9",
        "bug_id": "cxf_230",
        "file": [
            {
                "additions": 3,
                "sha": "d881295ae102482a39d3762de1a655cedb1e8c22",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0bf7e5faca43af0cfb574c07e3b5c1df5e91ff72/rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/IssuedTokenInterceptorProvider.java",
                "deletions": 2,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/IssuedTokenInterceptorProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/IssuedTokenInterceptorProvider.java?ref=0bf7e5faca43af0cfb574c07e3b5c1df5e91ff72",
                "patch": "@@ -121,8 +121,9 @@ public void handleMessage(Message message) throws Fault {\n                                 if (maps == null) {\n                                     tok = client.requestSecurityToken();\n                                 } else {\n-                                    String s = message\n-                                        .getContextualProperty(SecurityConstants.STS_APPLIES_TO).toString();\n+                                    Object o = message\n+                                        .getContextualProperty(SecurityConstants.STS_APPLIES_TO);\n+                                    String s = o == null ? null : o.toString();\n                                     s = s == null \n                                         ? message.getContextualProperty(Message.ENDPOINT_ADDRESS).toString()\n                                             : s;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/0bf7e5faca43af0cfb574c07e3b5c1df5e91ff72/rt/ws/security/src/main/java/org/apache/cxf/ws/security/policy/interceptors/IssuedTokenInterceptorProvider.java"
            }
        ],
        "repo": "cxf",
        "message": "Put a NPE guard in place\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@948914 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/0bf7e5faca43af0cfb574c07e3b5c1df5e91ff72"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e50bce7e60e27cfd74aee6bdc92693c67017cbb2",
        "bug_id": "cxf_231",
        "file": [
            {
                "additions": 4,
                "sha": "fff879ea8c17d2890de7ad1128d89dad7877c66d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/bee2a927fb5c2f0c6760cbafe08c5dd50430440c/tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/WSIBPValidator.java",
                "deletions": 0,
                "filename": "tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/WSIBPValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/WSIBPValidator.java?ref=bee2a927fb5c2f0c6760cbafe08c5dd50430440c",
                "patch": "@@ -297,6 +297,10 @@ public boolean checkR2203And2204() {\n             Binding binding = (Binding)ite.next();\n \n             String style = SOAPBindingUtil.getCanonicalBindingStyle(binding);\n+            \n+            if (binding.getPortType() == null) {\n+                return true;\n+            }\n \n             //\n ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/bee2a927fb5c2f0c6760cbafe08c5dd50430440c/tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/WSIBPValidator.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2821] Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@948585 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/bee2a927fb5c2f0c6760cbafe08c5dd50430440c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4915507daf5df1f479e1698755b1cf04bbdc4d16",
        "bug_id": "cxf_232",
        "file": [
            {
                "additions": 1,
                "sha": "c64d08fcab118d4ddcad9aaa56acef8b24e38690",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/5921df37ec1452772b9506151c6091420e6e36ca/common/common/src/main/java/org/apache/cxf/common/xmlschema/SchemaCollection.java",
                "deletions": 1,
                "filename": "common/common/src/main/java/org/apache/cxf/common/xmlschema/SchemaCollection.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/common/common/src/main/java/org/apache/cxf/common/xmlschema/SchemaCollection.java?ref=5921df37ec1452772b9506151c6091420e6e36ca",
                "patch": "@@ -215,7 +215,7 @@ public void setSchemaResolver(URIResolver schemaResolver) {\n      */\n     public XmlSchema getSchemaByTargetNamespace(String namespaceURI) {\n         for (XmlSchema schema : schemaCollection.getXmlSchemas()) {\n-            if (schema.getTargetNamespace().equals(namespaceURI)) {\n+            if (namespaceURI.equals(schema.getTargetNamespace())) {\n                 return schema;\n             }\n         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/5921df37ec1452772b9506151c6091420e6e36ca/common/common/src/main/java/org/apache/cxf/common/xmlschema/SchemaCollection.java"
            },
            {
                "additions": 12,
                "sha": "9f42e5f02b9ce7daf5775aac9c4d285a2c2a5df9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/5921df37ec1452772b9506151c6091420e6e36ca/tools/wsdlto/frontend/javascript/src/test/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptTest.java",
                "deletions": 0,
                "filename": "tools/wsdlto/frontend/javascript/src/test/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/javascript/src/test/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptTest.java?ref=5921df37ec1452772b9506151c6091420e6e36ca",
                "patch": "@@ -53,4 +53,16 @@ public void testGeneration() throws Exception {\n         String javascript = IOUtils.readStringFromStream(fis);\n         assertTrue(javascript.contains(\"xmlns:murble='http://apache.org/hello_world_soap_http'\"));\n     }\n+    \n+    // just run with a minimum of fuss.\n+    @Test\n+    public void testGeneration2() throws Exception {\n+        JavaScriptContainer container = new JavaScriptContainer(null);\n+\n+        ToolContext context = new ToolContext();\n+        context.put(ToolConstants.CFG_WSDLURL, \"/tmp/tmp.wsdl\");\n+        context.put(ToolConstants.CFG_OUTPUTDIR, output.toString()); \n+        container.setContext(context); \n+        container.execute();\n+    }\n }",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/5921df37ec1452772b9506151c6091420e6e36ca/tools/wsdlto/frontend/javascript/src/test/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2731] Add a NPE guard in wsdl2js\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@933086 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/5921df37ec1452772b9506151c6091420e6e36ca"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/941e4ae12fdd8aa20437735bcb64da274568e9b2",
        "bug_id": "cxf_233",
        "file": [
            {
                "additions": 4,
                "sha": "4cb7bc4a24b7b08347ac3572ef48858fe2b0ec3c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a6e6f9076d948c10e157beaddac6cd37bba34be1/api/src/main/java/org/apache/cxf/transport/TransportURIResolver.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/transport/TransportURIResolver.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/transport/TransportURIResolver.java?ref=a6e6f9076d948c10e157beaddac6cd37bba34be1",
                "patch": "@@ -130,7 +130,10 @@ public void onMessage(Message message) {\n                 //ignore\n             }\n         }\n-        if (is == null && !DEFAULT_URI_RESOLVER_HANDLES.contains(base.getScheme())) {\n+        if (is == null \n+            && (base == null \n+                || base.getScheme() == null \n+                || !DEFAULT_URI_RESOLVER_HANDLES.contains(base.getScheme()))) {\n             is = super.resolve(curUri, baseUri);            \n         }\n         return is;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/a6e6f9076d948c10e157beaddac6cd37bba34be1/api/src/main/java/org/apache/cxf/transport/TransportURIResolver.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2727] Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@930047 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/a6e6f9076d948c10e157beaddac6cd37bba34be1"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/52d3c3fefb7a77666809ddd56770675a8303462b",
        "bug_id": "cxf_234",
        "file": [
            {
                "additions": 6,
                "sha": "783331eecce8e6e406763e5bb0a80408c21d1ff5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/cbc061900f22366a86af797905bcd46e065c9354/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "deletions": 2,
                "filename": "rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java?ref=cbc061900f22366a86af797905bcd46e065c9354",
                "patch": "@@ -241,11 +241,11 @@ protected DataBinding createDefaultDataBinding() {\n                     try {\n                         res = new URIResolver(l);\n                     } catch (IOException e) {\n-                        throw new ServiceConstructionException(new Message(\"INVALID_SCHEMA_URL\", LOG), e);\n+                        throw new ServiceConstructionException(new Message(\"INVALID_SCHEMA_URL\", LOG, l), e);\n                     }\n \n                     if (!res.isResolved()) {\n-                        throw new ServiceConstructionException(new Message(\"INVALID_SCHEMA_URL\", LOG));\n+                        throw new ServiceConstructionException(new Message(\"INVALID_SCHEMA_URL\", LOG, l));\n                     }\n                     url = res.getURL();\n                 }\n@@ -758,6 +758,10 @@ protected boolean initializeClassInfo(OperationInfo o, Method method, List<Strin\n             }\n \n             setFaultClassInfo(o, method);\n+            if (o.getUnwrappedOperation() == null) {\n+                throw new ServiceConstructionException(new Message(\"COULD_NOT_UNWRAP\", LOG,\n+                                                                   o.getName(), method));\n+            }\n             o = o.getUnwrappedOperation();\n         } else if (o.isUnwrappedCapable()) {\n             // remove the unwrapped operation because it will break the",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/cbc061900f22366a86af797905bcd46e065c9354/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java"
            },
            {
                "additions": 3,
                "sha": "adf6beef7606db676b9ce39d4f9ffe7474b8b033",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/cbc061900f22366a86af797905bcd46e065c9354/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/SimpleMessages.properties",
                "deletions": 1,
                "filename": "rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/SimpleMessages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/SimpleMessages.properties?ref=cbc061900f22366a86af797905bcd46e065c9354",
                "patch": "@@ -31,4 +31,6 @@ UNMAPPABLE_PORT_TYPE= Service class {0} method {1} part {2} cannot be mapped to\n INTRACTABLE_PART= Message part {0} of Message {1} cannot be processed. This can be caused by the use of JAX-WS-specific types \\\n  without the JAX-WS service factory bean.\n JAXWS_ANNOTATION_FOUND=A JAX-WS Annotation was found on {0} while using the Simple frontend.  For better results, use the JAX-WS frontend.\n-XSD_VALIDATION_ERROR= Error in W3C XML Schema associated with service: {0}\n\\ No newline at end of file\n+XSD_VALIDATION_ERROR= Error in W3C XML Schema associated with service: {0}\n+COULD_NOT_UNWRAP=Could not unwrap Operation {0} to match method \"{1}\"\n+INVALID_SCHEMA_URL=Could not load schema {0}\n\\ No newline at end of file",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/cbc061900f22366a86af797905bcd46e065c9354/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/SimpleMessages.properties"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard and better error message\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@924275 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/cbc061900f22366a86af797905bcd46e065c9354"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9ddbb73b9e581604d1cd405d553a810d3e8cd992",
        "bug_id": "cxf_235",
        "file": [
            {
                "additions": 3,
                "sha": "fd867ef5916c381bfe014a3bcba5da734faf5283",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/01011537a4222969e9bb2e1268ddb7010f8eaa94/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/SoapOutInterceptor.java",
                "deletions": 0,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/SoapOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/SoapOutInterceptor.java?ref=01011537a4222969e9bb2e1268ddb7010f8eaa94",
                "patch": "@@ -215,6 +215,9 @@ private boolean handleHeaderPart(boolean preexistingHeaders, SoapMessage message\n \n             for (SoapHeaderInfo header : headers) {\n                 MessagePartInfo part = header.getPart();\n+                if (wrappedBmi != bmi) {\n+                    part = wrappedBmi.getMessageInfo().addMessagePart(part.getName());\n+                }\n                 if (part.getIndex() >= objs.size()) {\n                     // The optional out of band header is not a part of parameters of the method\n                     continue;",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/01011537a4222969e9bb2e1268ddb7010f8eaa94/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/SoapOutInterceptor.java"
            },
            {
                "additions": 5,
                "sha": "50628fd6b5bef06d3f8776d8a7a85fecfc4d826d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/01011537a4222969e9bb2e1268ddb7010f8eaa94/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java",
                "deletions": 2,
                "filename": "rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java?ref=01011537a4222969e9bb2e1268ddb7010f8eaa94",
                "patch": "@@ -617,8 +617,11 @@ public static void checkForWrapped(OperationInfo opInfo, boolean allowRefs, bool\n         // The operation's input and output message (if present) each contain\n         // only a single part\n         // input message must exist\n-        if (inputMessage == null || inputMessage.size() != 1\n-            || (outputMessage != null && outputMessage.size() > 1)) {\n+        if (inputMessage == null || inputMessage.size() == 0 \n+            || (inputMessage.size() > 1 && !relaxed)) {\n+            passedRule = false;\n+        }\n+        if (outputMessage != null && outputMessage.size() > 1) {\n             passedRule = false;\n         }\n ",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/01011537a4222969e9bb2e1268ddb7010f8eaa94/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java"
            },
            {
                "additions": 18,
                "sha": "fefe6cb7bc47c71654f3a4f1333289003f9ce0b8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/01011537a4222969e9bb2e1268ddb7010f8eaa94/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "deletions": 0,
                "filename": "rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java?ref=01011537a4222969e9bb2e1268ddb7010f8eaa94",
                "patch": "@@ -801,6 +801,7 @@ private boolean initializeParameter(OperationInfo o, Method method, int i,\n                                      Class paramType, Type genericType) {\n         boolean isIn = isInParam(method, i);\n         boolean isOut = isOutParam(method, i);\n+        boolean isHeader = isHeader(method, i);\n         Annotation[] paraAnnos = null;\n         if (i != -1 && o.getProperty(METHOD_PARAM_ANNOTATIONS) != null) {\n             Annotation[][] anns = (Annotation[][])o.getProperty(METHOD_PARAM_ANNOTATIONS);\n@@ -816,6 +817,20 @@ private boolean initializeParameter(OperationInfo o, Method method, int i,\n             if (part == null && isFromWsdl()) {\n                 part = o.getInput().getMessagePartByIndex(i);\n             }\n+            if (part == null && isHeader && o.isUnwrapped()) {\n+                part = ((UnwrappedOperationInfo)o).getWrappedOperation().getInput().getMessagePart(name);\n+                if (part != null) {\n+                    //header part in wsdl, need to get this mapped in to the unwrapped form\n+                    MessagePartInfo inf = o.getInput().addMessagePart(part.getName());\n+                    inf.setTypeQName(part.getTypeQName());\n+                    inf.setElement(part.isElement());\n+                    inf.setElementQName(part.getElementQName());\n+                    inf.setConcreteName(part.getConcreteName());\n+                    inf.setXmlSchema(part.getXmlSchema());\n+                    part = inf;\n+                    inf.setProperty(HEADER, Boolean.TRUE);\n+                }\n+            }\n             if (part == null) {\n                 return false;\n             }\n@@ -840,6 +855,9 @@ private boolean initializeParameter(OperationInfo o, Method method, int i,\n             if (part == null && this.isFromWsdl()) {\n                 part = o.getInput().getMessagePartByIndex(i);\n             }\n+            if (part == null && isHeader && o.isUnwrapped()) {\n+                part = o.getUnwrappedOperation().getInput().getMessagePart(name);\n+            }\n             if (part == null) {\n                 return false;\n             }",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/01011537a4222969e9bb2e1268ddb7010f8eaa94/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java"
            },
            {
                "additions": 1,
                "sha": "a244621ae95697306736b06cf60d334e9d1f59a3",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/01011537a4222969e9bb2e1268ddb7010f8eaa94/systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/ClientServerMiscTest.java",
                "deletions": 1,
                "filename": "systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/ClientServerMiscTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/ClientServerMiscTest.java?ref=01011537a4222969e9bb2e1268ddb7010f8eaa94",
                "patch": "@@ -425,6 +425,7 @@ public void testSimpleClientWithWsdl() throws Exception {\n         assertEquals(\"Hello\", echoMsg);\n     }\n     private void runDocLitTest(DocLitWrappedCodeFirstService port) throws Exception {\n+        assertEquals(\"snarf\", port.doBug2692(\"snarf\"));\n         CXF2411Result<CXF2411SubClass> o = port.doCXF2411();\n         assertNotNull(o);\n         assertNotNull(o.getContent());\n@@ -433,7 +434,6 @@ private void runDocLitTest(DocLitWrappedCodeFirstService port) throws Exception\n         Foo foo = new Foo();\n         foo.setName(\"blah\");\n         assertEquals(\"blah\", port.modifyFoo(foo).getName());\n-        \n \n         assertEquals(\"hello\", port.outOnly(new Holder<String>(), new Holder<String>()));\n         ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/01011537a4222969e9bb2e1268ddb7010f8eaa94/systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/ClientServerMiscTest.java"
            },
            {
                "additions": 4,
                "sha": "a87bc16de7bbe45761c143c2b5eed455245fbb7e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/01011537a4222969e9bb2e1268ddb7010f8eaa94/systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/DocLitWrappedCodeFirstService.java",
                "deletions": 0,
                "filename": "systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/DocLitWrappedCodeFirstService.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/DocLitWrappedCodeFirstService.java?ref=01011537a4222969e9bb2e1268ddb7010f8eaa94",
                "patch": "@@ -195,6 +195,10 @@ public String getName() {\n         }\n     }\n     \n+    @WebResult(name = \"return\")\n+    String doBug2692(@WebParam(name = \"name\", header = true) String name);\n+\n+    \n     Set<Foo> getFooSet();\n     \n     Foo modifyFoo(Foo foo);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/01011537a4222969e9bb2e1268ddb7010f8eaa94/systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/DocLitWrappedCodeFirstService.java"
            },
            {
                "additions": 4,
                "sha": "06c94a8492383ae3be4b45222fd31cfd3f8f607f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/01011537a4222969e9bb2e1268ddb7010f8eaa94/systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/DocLitWrappedCodeFirstServiceImpl.java",
                "deletions": 0,
                "filename": "systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/DocLitWrappedCodeFirstServiceImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/DocLitWrappedCodeFirstServiceImpl.java?ref=01011537a4222969e9bb2e1268ddb7010f8eaa94",
                "patch": "@@ -236,5 +236,9 @@ public Foo modifyFoo(Foo f) {\n         ret.setContent(content);\n         return ret;\n     }\n+\n+    public String doBug2692(String name) {\n+        return name;\n+    }\n     \n }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/01011537a4222969e9bb2e1268ddb7010f8eaa94/systests/jaxws/src/test/java/org/apache/cxf/systest/jaxws/DocLitWrappedCodeFirstServiceImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2692] Fix NPE with meethod with only header param\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@920568 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/01011537a4222969e9bb2e1268ddb7010f8eaa94"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1e8c336f1ac31358ca2e57b815b1911b4cad8339",
        "bug_id": "cxf_236",
        "file": [
            {
                "additions": 1,
                "sha": "9c7d36488f66bdd84e226993dc7e7671d7c37e47",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e70a78b924c96c1ff72d2283860aa2b977910560/api/src/main/java/org/apache/cxf/databinding/AbstractWrapperHelper.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/databinding/AbstractWrapperHelper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/databinding/AbstractWrapperHelper.java?ref=e70a78b924c96c1ff72d2283860aa2b977910560",
                "patch": "@@ -82,7 +82,7 @@ public Object createWrapperObject(List<?> lst)\n                 }\n                 Object o = lst.get(x);\n                 o = getPartObject(x, o);                \n-                if (o instanceof List) {\n+                if (o instanceof List && getMethods[x] != null) {\n                     List<Object> col = CastUtils.cast((List)getMethods[x].invoke(wrapperObject));\n                     if (col == null) {\n                         //broken generated java wrappers",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/e70a78b924c96c1ff72d2283860aa2b977910560/api/src/main/java/org/apache/cxf/databinding/AbstractWrapperHelper.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2627] Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@901335 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/e70a78b924c96c1ff72d2283860aa2b977910560"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/883461c7fa6743b7fa5a587f16aadd92a037fb8f",
        "bug_id": "cxf_237",
        "file": [
            {
                "additions": 10,
                "sha": "509048674e5b86fc25a76cf43d32fc3b98f58807",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/85a778f35514da28c4b42ac8a34972931a5d87ee/rt/transports/http/src/main/java/org/apache/cxf/transport/http/CXFAuthenticator.java",
                "deletions": 7,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/CXFAuthenticator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/CXFAuthenticator.java?ref=85a778f35514da28c4b42ac8a34972931a5d87ee",
                "patch": "@@ -87,15 +87,18 @@ protected PasswordAuthentication getPasswordAuthentication() {\n                 HTTPConduit httpConduit = (HTTPConduit)conduit;\n                 if (getRequestorType() == RequestorType.PROXY\n                     && httpConduit.getProxyAuthorization() != null) {\n-                    \n-                    auth = new PasswordAuthentication(httpConduit.getProxyAuthorization().getUserName(),\n-                                                      httpConduit.getProxyAuthorization()\n-                                                          .getPassword().toCharArray());\n+                    String un = httpConduit.getProxyAuthorization().getUserName();\n+                    String pwd =  httpConduit.getProxyAuthorization().getPassword();\n+                    if (un != null && pwd != null) {\n+                        auth = new PasswordAuthentication(un, pwd.toCharArray());\n+                    }\n                 } else if (getRequestorType() == RequestorType.SERVER\n                     && httpConduit.getAuthorization() != null) {\n-                    auth = new PasswordAuthentication(httpConduit.getAuthorization().getUserName(),\n-                                                      httpConduit.getAuthorization()\n-                                                          .getPassword().toCharArray());\n+                    String un = httpConduit.getAuthorization().getUserName();\n+                    String pwd =  httpConduit.getAuthorization().getPassword();\n+                    if (un != null && pwd != null) {\n+                        auth = new PasswordAuthentication(un, pwd.toCharArray());\n+                    }\n                 }\n             }\n         }",
                "changes": 17,
                "blob_url": "https://github.com/apache/cxf/blob/85a778f35514da28c4b42ac8a34972931a5d87ee/rt/transports/http/src/main/java/org/apache/cxf/transport/http/CXFAuthenticator.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2584] NPE guards for CXFAuthenticator\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@891301 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/85a778f35514da28c4b42ac8a34972931a5d87ee"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5b409868efb18b954c3880148d721c7ceabc6bcf",
        "bug_id": "cxf_238",
        "file": [
            {
                "additions": 3,
                "sha": "eb4815aaaa7ff77b5d10ec727a2ac20aaf2fefd8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/883461c7fa6743b7fa5a587f16aadd92a037fb8f/api/src/main/java/org/apache/cxf/phase/PhaseInterceptorChain.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/phase/PhaseInterceptorChain.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/phase/PhaseInterceptorChain.java?ref=883461c7fa6743b7fa5a587f16aadd92a037fb8f",
                "patch": "@@ -297,12 +297,14 @@ public synchronized boolean doIntercept(Message message) {\n                         }\n     \n                         message.setContent(Exception.class, ex);\n+                        boolean isOneWay = false;\n                         if (message.getExchange() != null) {\n                             message.getExchange().put(Exception.class, ex);\n+                            isOneWay = message.getExchange().isOneWay();\n                         }                    \n                         unwind(message);\n                         \n-                        if (faultObserver != null && !message.getExchange().isOneWay()) {\n+                        if (faultObserver != null && !isOneWay) {\n                             faultObserver.onMessage(message);\n                         }\n                     }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/883461c7fa6743b7fa5a587f16aadd92a037fb8f/api/src/main/java/org/apache/cxf/phase/PhaseInterceptorChain.java"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@891037 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/883461c7fa6743b7fa5a587f16aadd92a037fb8f"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/cf56eefa916ca15924e275ae737cd77a4b8b57f5",
        "bug_id": "cxf_239",
        "file": [
            {
                "additions": 8,
                "sha": "2922c1b34136e76c2a74e0c25c8eb4da8aab529b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/df376f99fae456687fdab8a13d2f561f683d57b8/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "deletions": 2,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java?ref=df376f99fae456687fdab8a13d2f561f683d57b8",
                "patch": "@@ -89,8 +89,14 @@ protected synchronized void updateDests(HttpServletRequest request) {\n         for (String path : paths) {\n             ServletDestination d2 = transport.getDestinationForPath(path);\n             String ad = d2.getEndpointInfo().getAddress();\n-            if (ad.equals(path)\n-                || ad.equals(lastBase + path)) {\n+            if (ad == null \n+                && d2.getAddress() != null\n+                && d2.getAddress().getAddress() != null) {\n+                ad = d2.getAddress().getAddress().getValue();\n+            }\n+            if (ad != null \n+                && (ad.equals(path)\n+                || ad.equals(lastBase + path))) {\n                 d2.getEndpointInfo().setAddress(base + path);\n                 if (d2.getEndpointInfo().getExtensor(AddressType.class) != null) {\n                     d2.getEndpointInfo().getExtensor(AddressType.class).setLocation(base + path);",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/df376f99fae456687fdab8a13d2f561f683d57b8/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2551] Add some NPE checks into the ServletController\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@889067 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/df376f99fae456687fdab8a13d2f561f683d57b8"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/05fcdc46f1d9af25e3b91b196deb20298804fbe4",
        "bug_id": "cxf_240",
        "file": [
            {
                "additions": 1,
                "sha": "3b2ce1c8c4ec0e6b04c6401cbaafd597aeb9e4a1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/43bbff0f7bfe1e0b4cc81acc890a92c11e6529d0/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/AbstractPolicyInterceptor.java",
                "deletions": 1,
                "filename": "rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/AbstractPolicyInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/AbstractPolicyInterceptor.java?ref=43bbff0f7bfe1e0b4cc81acc890a92c11e6529d0",
                "patch": "@@ -67,7 +67,7 @@ protected void getTransportAssertions(Message message) {\n     \n     protected BindingFaultInfo getBindingFaultInfo(Message msg, Exception ex, BindingOperationInfo boi) {\n         BindingFaultInfo bfi = msg.get(BindingFaultInfo.class);        \n-        if (null == bfi) {\n+        if (null == bfi && ex != null) {\n             Throwable cause = ex.getCause();\n             if (null == cause) {\n                 return null;",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/43bbff0f7bfe1e0b4cc81acc890a92c11e6529d0/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/AbstractPolicyInterceptor.java"
            },
            {
                "additions": 0,
                "sha": "dcbea0b1b87595b6a8f918b8caf10b4825d505b6",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/43bbff0f7bfe1e0b4cc81acc890a92c11e6529d0/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyVerificationInFaultInterceptor.java",
                "deletions": 1,
                "filename": "rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyVerificationInFaultInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyVerificationInFaultInterceptor.java?ref=43bbff0f7bfe1e0b4cc81acc890a92c11e6529d0",
                "patch": "@@ -90,7 +90,6 @@ protected void handle(Message message) {\n         if (null == ex) {\n             ex = exchange.get(Exception.class);\n         }\n-        assert null != ex;\n         \n         BindingFaultInfo bfi = getBindingFaultInfo(message, ex, boi);\n         if (null == bfi) {",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/43bbff0f7bfe1e0b4cc81acc890a92c11e6529d0/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/PolicyVerificationInFaultInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "Add an NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@888105 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/43bbff0f7bfe1e0b4cc81acc890a92c11e6529d0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d9252676cbeea867b573de360a826de2b996a350",
        "bug_id": "cxf_241",
        "file": [
            {
                "additions": 13,
                "sha": "40d2b930d0c6431f455a78e7ff6d2f05da846f24",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/1708206e4a56af6b8d852a1505713d10c05a004c/api/src/main/java/org/apache/cxf/message/MessageImpl.java",
                "deletions": 15,
                "filename": "api/src/main/java/org/apache/cxf/message/MessageImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/message/MessageImpl.java?ref=1708206e4a56af6b8d852a1505713d10c05a004c",
                "patch": "@@ -110,7 +110,7 @@ public Object getContextualProperty(String key) {\n         Object val = get(key);\n         \n         Exchange ex = getExchange();\n-        if (val == null) {\n+        if (val == null && ex != null) {\n             val = ex.get(key);\n         }\n         \n@@ -121,7 +121,7 @@ public Object getContextualProperty(String key) {\n             }\n         }\n         \n-        if (val == null) {\n+        if (val == null && ex != null) {\n             Endpoint ep = ex.get(Endpoint.class); \n             if (ep != null) {\n                 val = ep.get(key);\n@@ -135,19 +135,17 @@ public Object getContextualProperty(String key) {\n                 }\n \n             }\n-        }\n-        \n-        if (val == null) {\n-            Service ep = ex.get(Service.class); \n-            if (ep != null) {\n-                val = ep.get(key);\n-            }\n-        }\n-        \n-        if (val == null) {\n-            Bus bus = ex.get(Bus.class);\n-            if (bus != null) {\n-                val = bus.getProperty(key);\n+            if (val == null) {\n+                Service sv = ex.get(Service.class); \n+                if (sv != null) {\n+                    val = sv.get(key);\n+                }\n+                if (val == null) {\n+                    Bus bus = ex.get(Bus.class);\n+                    if (bus != null) {\n+                        val = bus.getProperty(key);\n+                    }\n+                }\n             }\n         }\n         ",
                "changes": 28,
                "blob_url": "https://github.com/apache/cxf/blob/1708206e4a56af6b8d852a1505713d10c05a004c/api/src/main/java/org/apache/cxf/message/MessageImpl.java"
            },
            {
                "additions": 34,
                "sha": "c9603c678ec95eb4c9ac82e1e43585e420db63b3",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/1708206e4a56af6b8d852a1505713d10c05a004c/rt/core/src/test/java/org/apache/cxf/attachment/AttachmentDeserializerTest.java",
                "deletions": 0,
                "filename": "rt/core/src/test/java/org/apache/cxf/attachment/AttachmentDeserializerTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/test/java/org/apache/cxf/attachment/AttachmentDeserializerTest.java?ref=1708206e4a56af6b8d852a1505713d10c05a004c",
                "patch": "@@ -25,6 +25,11 @@\n import java.util.Collection;\n import java.util.Iterator;\n \n+import javax.xml.parsers.SAXParser;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+import org.xml.sax.helpers.DefaultHandler;\n+\n import org.apache.cxf.helpers.IOUtils;\n import org.apache.cxf.message.Attachment;\n import org.apache.cxf.message.Exchange;\n@@ -299,4 +304,33 @@ public void testSmallStream() throws Exception {\n         assertEquals(-1, m.read(new byte[1000]));\n         assertEquals(-1, m.read(new byte[1000]));\n     }\n+    \n+    @Test\n+    public void testCXF2542() throws Exception {\n+        StringBuffer buf = new StringBuffer();\n+        buf.append(\"------=_Part_0_2180223.1203118300920\\n\");\n+        buf.append(\"Content-Type: application/xop+xml; charset=UTF-8; type=\\\"text/xml\\\"\\n\");\n+        buf.append(\"Content-Transfer-Encoding: 8bit\\n\");\n+        buf.append(\"Content-ID: <soap.xml@xfire.codehaus.org>\\n\");\n+        buf.append(\"\\n\");\n+        buf.append(\"<soap:Envelope xmlns:soap=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" \"\n+                   + \"xmlns:xsd=\\\"http://www.w3.org/2001/XMLSchema\\\" \"\n+                   + \"xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\">\"\n+                   + \"<soap:Body><getNextMessage xmlns=\\\"http://foo.bar\\\" /></soap:Body>\"\n+                   + \"</soap:Envelope>\\n\");\n+        buf.append(\"------=_Part_0_2180223.1203118300920--\\n\");\n+\n+        InputStream rawInputStream = new ByteArrayInputStream(buf.toString().getBytes());\n+        MessageImpl message = new MessageImpl();\n+        message.setContent(InputStream.class, rawInputStream);\n+        message.put(Message.CONTENT_TYPE, \n+                    \"multipart/related; type=\\\"application/xop+xml\\\"; \"\n+                    + \"start=\\\"<soap.xml@xfire.codehaus.org>\\\"; \"\n+                    + \"start-info=\\\"text/xml\\\"; boundary=\\\"----=_Part_0_2180223.1203118300920\\\"\");\n+        new AttachmentDeserializer(message).initializeAttachments();\n+        InputStream inputStreamWithoutAttachments = message.getContent(InputStream.class);\n+        SAXParser parser = SAXParserFactory.newInstance().newSAXParser();\n+        parser.parse(inputStreamWithoutAttachments, new DefaultHandler());\n+        System.out.println(\"All done.\");\n+    }\n }\n\\ No newline at end of file",
                "changes": 34,
                "blob_url": "https://github.com/apache/cxf/blob/1708206e4a56af6b8d852a1505713d10c05a004c/rt/core/src/test/java/org/apache/cxf/attachment/AttachmentDeserializerTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2543] Add NPE guards to MssageImpl\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@880989 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/1708206e4a56af6b8d852a1505713d10c05a004c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7ce6c7559e346fb03d83e2a704d0e3e01d5313a5",
        "bug_id": "cxf_242",
        "file": [
            {
                "additions": 12,
                "sha": "71ad706c816a8360224c15f22bd56f26a7f8911a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/954128c80854bc166fd30cace425e1270265c7e4/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java",
                "deletions": 6,
                "filename": "common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java?ref=954128c80854bc166fd30cace425e1270265c7e4",
                "patch": "@@ -743,15 +743,19 @@ public static Document read(XMLStreamReader reader) throws XMLStreamException {\n     }\n     public static Document read(XMLStreamReader reader, boolean recordLoc) throws XMLStreamException {\n         Document doc = DOMUtils.createDocument();\n-        doc.setDocumentURI(new String(reader.getLocation().getSystemId()));\n+        if (reader.getLocation().getSystemId() != null) {\n+            doc.setDocumentURI(new String(reader.getLocation().getSystemId()));\n+        }\n         readDocElements(doc, doc, reader, true, recordLoc);\n         return doc;\n     }\n     \n     public static Document read(DocumentBuilder builder, XMLStreamReader reader, boolean repairing) \n         throws XMLStreamException {\n         Document doc = builder.newDocument();\n-        doc.setDocumentURI(new String(reader.getLocation().getSystemId()));\n+        if (reader.getLocation().getSystemId() != null) {\n+            doc.setDocumentURI(new String(reader.getLocation().getSystemId()));\n+        }\n         readDocElements(doc, reader, repairing);\n         return doc;\n     }\n@@ -944,16 +948,18 @@ private static void declare(Element node, String uri, String prefix) {\n         node.setAttributeNodeNS(attr);\n     }\n     public static XMLStreamReader createXMLStreamReader(InputSource src) {\n+        String sysId = src.getSystemId() == null ? null : new String(src.getSystemId());\n+        String pubId = src.getPublicId() == null ? null : new String(src.getPublicId());\n         if (src.getByteStream() != null) {\n             if (src.getEncoding() == null) {\n-                StreamSource ss = new StreamSource(src.getByteStream(), src.getSystemId());\n-                ss.setPublicId(src.getPublicId());\n+                StreamSource ss = new StreamSource(src.getByteStream(), sysId);\n+                ss.setPublicId(pubId);\n                 return createXMLStreamReader(ss);\n             }\n             return createXMLStreamReader(src.getByteStream(), src.getEncoding());\n         } else if (src.getCharacterStream() != null) {\n-            StreamSource ss = new StreamSource(src.getCharacterStream(), src.getSystemId());\n-            ss.setPublicId(src.getPublicId());\n+            StreamSource ss = new StreamSource(src.getCharacterStream(), sysId);\n+            ss.setPublicId(pubId);\n             return createXMLStreamReader(ss);\n         }\n         throw new IllegalArgumentException(\"InputSource must have a ByteStream or CharacterStream\");",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/954128c80854bc166fd30cace425e1270265c7e4/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java"
            },
            {
                "additions": 3,
                "sha": "9e548333b6cf2419e59f46a54075fe3b638594a7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/954128c80854bc166fd30cace425e1270265c7e4/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLManagerImpl.java",
                "deletions": 1,
                "filename": "rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLManagerImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLManagerImpl.java?ref=954128c80854bc166fd30cace425e1270265c7e4",
                "patch": "@@ -222,7 +222,9 @@ private Definition loadDefinition(String url) throws WSDLException {\n         Document doc;\n         try {\n             doc = StaxUtils.read(StaxUtils.createXMLStreamReader(src), true);\n-            doc.setDocumentURI(new String(src.getSystemId()));\n+            if (src.getSystemId() != null) {\n+                doc.setDocumentURI(new String(src.getSystemId()));\n+            }\n         } catch (Exception e) {\n             throw new WSDLException(WSDLException.PARSER_ERROR, e.getMessage(), e);\n         }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/954128c80854bc166fd30cace425e1270265c7e4/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLManagerImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "Add some NPE checks\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@835615 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/954128c80854bc166fd30cace425e1270265c7e4"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/23e52322f2e142efcfb9efc7d18bbb0c0f0b01c7",
        "bug_id": "cxf_243",
        "file": [
            {
                "additions": 19,
                "sha": "ea5590ce76ccbba7594bbffb34902dedf546fc33",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9c8cd3c474bcef24fdc585245528347dce244da9/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "deletions": 17,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java?ref=9c8cd3c474bcef24fdc585245528347dce244da9",
                "patch": "@@ -134,23 +134,25 @@ protected void setHeaders(Message message) {\n         if (requestHeaders.containsKey(\"Authorization\")) {\n             List<String> authorizationLines = requestHeaders.get(\"Authorization\"); \n             String credentials = authorizationLines.get(0);\n-            String authType = credentials.split(\" \")[0];\n-            if (\"Basic\".equals(authType)) {\n-                String authEncoded = credentials.split(\" \")[1];\n-                try {\n-                    String authDecoded = new String(Base64Utility.decode(authEncoded));\n-                    String authInfo[] = authDecoded.split(\":\");\n-                    String username = (authInfo.length > 0) ? authInfo[0] : \"\";\n-                    // Below line for systems that blank out password after authentication;\n-                    // see CXF-1495 for more info\n-                    String password = (authInfo.length > 1) ? authInfo[1] : \"\";\n-                    AuthorizationPolicy policy = new AuthorizationPolicy();\n-                    policy.setUserName(username);\n-                    policy.setPassword(password);\n-                    \n-                    message.put(AuthorizationPolicy.class, policy);\n-                } catch (Base64Exception ex) {\n-                    //ignore, we'll leave things alone.  They can try decoding it themselves\n+            if (credentials != null && !StringUtils.isEmpty(credentials.trim())) {\n+                String authType = credentials.split(\" \")[0];\n+                if (\"Basic\".equals(authType)) {\n+                    String authEncoded = credentials.split(\" \")[1];\n+                    try {\n+                        String authDecoded = new String(Base64Utility.decode(authEncoded));\n+                        String authInfo[] = authDecoded.split(\":\");\n+                        String username = (authInfo.length > 0) ? authInfo[0] : \"\";\n+                        // Below line for systems that blank out password after authentication;\n+                        // see CXF-1495 for more info\n+                        String password = (authInfo.length > 1) ? authInfo[1] : \"\";\n+                        AuthorizationPolicy policy = new AuthorizationPolicy();\n+                        policy.setUserName(username);\n+                        policy.setPassword(password);\n+                        \n+                        message.put(AuthorizationPolicy.class, policy);\n+                    } catch (Base64Exception ex) {\n+                        //ignore, we'll leave things alone.  They can try decoding it themselves\n+                    }\n                 }\n             }\n         }",
                "changes": 36,
                "blob_url": "https://github.com/apache/cxf/blob/9c8cd3c474bcef24fdc585245528347dce244da9/rt/transports/http/src/main/java/org/apache/cxf/transport/http/AbstractHTTPDestination.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1791] Add an extra NPE and AIOOBE guard.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@830967 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/9c8cd3c474bcef24fdc585245528347dce244da9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/08634873f9ecb20c1a1d8f3c6789cc80ed5208f2",
        "bug_id": "cxf_244",
        "file": [
            {
                "additions": 3,
                "sha": "2afc46c7a0a3cc7ff65c53832a548d8275aa8a6b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c44bc1059aed6d1649b3db18b90d4495b6025181/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/mtom/AbstractXOPType.java",
                "deletions": 0,
                "filename": "rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/mtom/AbstractXOPType.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/mtom/AbstractXOPType.java?ref=c44bc1059aed6d1649b3db18b90d4495b6025181",
                "patch": "@@ -36,6 +36,7 @@\n import org.apache.cxf.aegis.type.basic.Base64Type;\n import org.apache.cxf.aegis.xml.MessageReader;\n import org.apache.cxf.aegis.xml.MessageWriter;\n+import org.apache.cxf.common.xmlschema.XmlSchemaConstants;\n import org.apache.cxf.helpers.DOMUtils;\n import org.apache.cxf.message.Attachment;\n import org.apache.ws.commons.schema.XmlSchemaElement;\n@@ -74,6 +75,8 @@ public AbstractXOPType(boolean useXmimeBinaryType, String expectedContentTypes)\n         if (useXmimeBinaryType) {\n         //      we use the XMIME type instead of the XSD type to allow for our content type attribute.\n             setSchemaType(XML_MIME_BASE64);\n+        } else {\n+            setSchemaType(XmlSchemaConstants.BASE64BINARY_QNAME);\n         }\n     }\n     ",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/c44bc1059aed6d1649b3db18b90d4495b6025181/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/mtom/AbstractXOPType.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2457] Fix NPE in AbstractXOPType\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@821173 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c44bc1059aed6d1649b3db18b90d4495b6025181"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4a1121a878f4469a9d87cafd260dc5943c906dad",
        "bug_id": "cxf_245",
        "file": [
            {
                "additions": 2,
                "sha": "55443f28ae751c6e863d97fefd253ff8c698c3e5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ab814e170dc4d0a34ee80421dd9928fb5e337fc0/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/basic/ObjectType.java",
                "deletions": 2,
                "filename": "rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/basic/ObjectType.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/basic/ObjectType.java?ref=ab814e170dc4d0a34ee80421dd9928fb5e337fc0",
                "patch": "@@ -49,7 +49,6 @@\n  * have its schema in the WSDL. Can specify whether or not unknown objects\n  * should be serialized as a byte stream.\n  * \n- * @author <a href=\"mailto:peter.royal@pobox.com\">peter royal</a>\n  */\n public class ObjectType extends AegisType {\n     private static final QName XSI_TYPE = new QName(SOAPConstants.XSI_NS, \"type\");\n@@ -101,10 +100,11 @@ public Object readObject(MessageReader reader, Context context) throws Databindi\n             throw new DatabindingException(\"Missing 'xsi:type' attribute value\");\n         }\n \n-        typeName = typeName.trim();\n         AegisType type = null;\n         QName typeQName = null;\n+        \n         if (typeName != null) {\n+            typeName = typeName.trim();\n             typeQName = extractQName(reader, typeName);\n         } else {\n             typeQName = reader.getName();",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/ab814e170dc4d0a34ee80421dd9928fb5e337fc0/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/basic/ObjectType.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-2413. Avoid NPE on missing xsi:type.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@812621 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ab814e170dc4d0a34ee80421dd9928fb5e337fc0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/45457cdea89522772888fafc7d8fed9de4d50def",
        "bug_id": "cxf_246",
        "file": [
            {
                "additions": 5,
                "sha": "32a06061c8c397cceaed07e4f2b1a7b4e13c32ea",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6c37922c1eee2bc78c576bd69ba32221b60c2d7b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java?ref=6c37922c1eee2bc78c576bd69ba32221b60c2d7b",
                "patch": "@@ -447,7 +447,11 @@ public String getWsdlLocation() {\n     }\n \n     public void setWsdlLocation(String wsdlLocation) {\n-        this.wsdlLocation = new String(wsdlLocation);\n+        if (wsdlLocation != null) {\n+            this.wsdlLocation = new String(wsdlLocation);\n+        } else {\n+            this.wsdlLocation = null;\n+        }\n     }\n \n     public void setBindingUri(String binding) {",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/6c37922c1eee2bc78c576bd69ba32221b60c2d7b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/EndpointImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix a NPE I introduced.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@790642 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/6c37922c1eee2bc78c576bd69ba32221b60c2d7b"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/619ab527acc1eb240007e287718d3edf6450b9d9",
        "bug_id": "cxf_247",
        "file": [
            {
                "additions": 3,
                "sha": "ac34d369e617851e7a9681dbf9da285527c6be73",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/aa6c635cffccc826f29f7c4a883ac7cb72389109/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java",
                "deletions": 0,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java?ref=aa6c635cffccc826f29f7c4a883ac7cb72389109",
                "patch": "@@ -302,6 +302,9 @@ private static void writeArrayObject(Marshaller marshaller,\n                                          Object mObj) throws Fault, JAXBException {\n         // Have to handle this ourselves.... which really\n         // sucks.... but what can we do?\n+        if (mObj == null) {\n+            return;\n+        }\n         Object objArray;\n         Class cls = null;\n         if (mObj instanceof List) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/aa6c635cffccc826f29f7c4a883ac7cb72389109/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2329] Add NPE guard\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@790637 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/aa6c635cffccc826f29f7c4a883ac7cb72389109"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6bef2d486db4fbee62e94861272ed4825714f215",
        "bug_id": "cxf_248",
        "file": [
            {
                "additions": 1,
                "sha": "32a9dcf59b105f26481a68c40b069d5330a431b2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ce468db02727d19e7e41d51c861e2cba79f27f79/rt/javascript/src/main/java/org/apache/cxf/javascript/service/ServiceJavascriptBuilder.java",
                "deletions": 1,
                "filename": "rt/javascript/src/main/java/org/apache/cxf/javascript/service/ServiceJavascriptBuilder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/javascript/src/main/java/org/apache/cxf/javascript/service/ServiceJavascriptBuilder.java?ref=ce468db02727d19e7e41d51c861e2cba79f27f79",
                "patch": "@@ -872,7 +872,7 @@ public void begin(ServiceInfo service) {\n         }\n \n         if (soapBindingInfo != null) {\n-            isRPC = soapBindingInfo.getStyle().equals(WSDLConstants.RPC);\n+            isRPC = WSDLConstants.RPC.equals(soapBindingInfo.getStyle());\n         } else if (xml != null) {\n             xmlBindingInfo = xml;\n         }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/ce468db02727d19e7e41d51c861e2cba79f27f79/rt/javascript/src/main/java/org/apache/cxf/javascript/service/ServiceJavascriptBuilder.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2128] Add an npe guard\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@766770 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ce468db02727d19e7e41d51c861e2cba79f27f79"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/92ae40b38620bfe45463d07d728f31f3a1dea4fb",
        "bug_id": "cxf_249",
        "file": [
            {
                "additions": 7,
                "sha": "31862d091bf92f3dc787de573147dd5052cf11dc",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a027a3c87b4eda59c04b8580eaf80332c8d553d3/systests/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSSoapBookTest.java",
                "deletions": 3,
                "filename": "systests/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSSoapBookTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSSoapBookTest.java?ref=a027a3c87b4eda59c04b8580eaf80332c8d553d3",
                "patch": "@@ -64,15 +64,15 @@ public static void startServers() throws Exception {\n     @Test\n     public void testGetAll() throws Exception {\n         \n-        InputStream in = getRestInputStream(\"http://localhost:9092/test/services/rest2/myRestService\");\n+        InputStream in = getHttpInputStream(\"http://localhost:9092/test/services/rest2/myRestService\");\n         assertEquals(\"0\", getStringFromInputStream(in));\n                 \n     }\n     \n     @Test\n     public void testGetBook123() throws Exception {\n         \n-        InputStream in = getRestInputStream(\"http://localhost:9092/test/services/rest/bookstore/123\");\n+        InputStream in = getHttpInputStream(\"http://localhost:9092/test/services/rest/bookstore/123\");\n         \n         InputStream expected = getClass().getResourceAsStream(\"resources/expected_get_book123.txt\");\n         assertEquals(getStringFromInputStream(expected), getStringFromInputStream(in));\n@@ -331,6 +331,10 @@ public void testGetBookSoap() throws Exception {\n         BookStoreJaxrsJaxws store = service.getBookPort();\n         Book book = store.getBook(new Long(123));\n         assertEquals(\"id is wrong\", book.getId(), 123);\n+        \n+        String listings = \n+            getStringFromInputStream(getHttpInputStream(\"http://localhost:9092/test/services\"));\n+        assertNotNull(listings);\n     }\n \n     private String getStringFromInputStream(InputStream in) throws Exception {        \n@@ -341,7 +345,7 @@ private String getStringFromInputStream(InputStream in) throws Exception {\n         return bos.getOut().toString();        \n     }\n \n-    private InputStream getRestInputStream(String endpointAddress) throws Exception {\n+    private InputStream getHttpInputStream(String endpointAddress) throws Exception {\n         URL url = new URL(endpointAddress);\n         \n         URLConnection connect = url.openConnection();",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/a027a3c87b4eda59c04b8580eaf80332c8d553d3/systests/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSSoapBookTest.java"
            }
        ],
        "repo": "cxf",
        "message": "Fixing NPE caused by JAXRS endpoints\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@763246 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/a027a3c87b4eda59c04b8580eaf80332c8d553d3"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/c338c36cf06ecdf7dbfae62ed253e1366b0b645d",
        "bug_id": "cxf_250",
        "file": [
            {
                "additions": 6,
                "sha": "96673e32f916e5e94aae4787edbe2a722cee2a23",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/92ae40b38620bfe45463d07d728f31f3a1dea4fb/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "deletions": 0,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java?ref=92ae40b38620bfe45463d07d728f31f3a1dea4fb",
                "patch": "@@ -276,6 +276,12 @@ private void renderStyleSheet(HttpServletRequest request,\n                 transport.getDestinations());\n         Collections.sort(destinations, new Comparator<ServletDestination>() {\n             public int compare(ServletDestination o1, ServletDestination o2) {\n+                if (o1.getEndpointInfo().getInterface() == null) {\n+                    return -1;\n+                }\n+                if (o2.getEndpointInfo().getInterface() == null) {\n+                    return 1;\n+                }\n                 return o1.getEndpointInfo().getInterface().getName()\n                         .getLocalPart().compareTo(\n                                 o2.getEndpointInfo().getInterface().getName()",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/92ae40b38620bfe45463d07d728f31f3a1dea4fb/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java"
            }
        ],
        "repo": "cxf",
        "message": "Fixing NPE caused by JAXRS endpoints\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@763200 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/92ae40b38620bfe45463d07d728f31f3a1dea4fb"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/6e05bbdc4ff66ba7d4e1d043f9c041f57269fedd",
        "bug_id": "cxf_251",
        "file": [
            {
                "additions": 2,
                "sha": "d2a10d1d69ac4a172955a05ede01125199440b75",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/da0773710be57810f232ed4ea75ff61acf150f83/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/AbstractPolicyInterceptor.java",
                "deletions": 2,
                "filename": "rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/AbstractPolicyInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/AbstractPolicyInterceptor.java?ref=da0773710be57810f232ed4ea75ff61acf150f83",
                "patch": "@@ -74,7 +74,7 @@ protected BindingFaultInfo getBindingFaultInfo(Message msg, Exception ex, Bindin\n             }\n             for (BindingFaultInfo b : boi.getFaults()) {\n                 Class<?> faultClass = b.getFaultInfo().getProperty(Class.class.getName(), Class.class);\n-                if (faultClass.isAssignableFrom(cause.getClass())) {\n+                if (faultClass != null && faultClass.isAssignableFrom(cause.getClass())) {\n                     bfi = b;\n                     msg.put(BindingFaultInfo.class, bfi);\n                     break;\n@@ -83,7 +83,7 @@ protected BindingFaultInfo getBindingFaultInfo(Message msg, Exception ex, Bindin\n             if (null == bfi && null != boi.getWrappedOperation()) {\n                 for (BindingFaultInfo b : boi.getWrappedOperation().getFaults()) {\n                     Class<?> faultClass = b.getFaultInfo().getProperty(Class.class.getName(), Class.class);\n-                    if (faultClass.isAssignableFrom(cause.getClass())) {\n+                    if (faultClass != null && faultClass.isAssignableFrom(cause.getClass())) {\n                         bfi = b;\n                         msg.put(BindingFaultInfo.class, bfi);\n                         break;",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/da0773710be57810f232ed4ea75ff61acf150f83/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/AbstractPolicyInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2129] Add NPE guard.  Patch from   Alessio Soldano applied.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@757859 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/da0773710be57810f232ed4ea75ff61acf150f83"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/37dd5455220d5e678b533dbe53f1b97568eee84e",
        "bug_id": "cxf_252",
        "file": [
            {
                "additions": 8,
                "sha": "f6d4ac447607507a6e1a32b23ab57d1bb8e7287a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java?ref=c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b",
                "patch": "@@ -265,6 +265,14 @@ public ServiceInfo buildMockService(Definition def, PortType p) {\n         for (Port port : cast(serv.getPorts().values(), Port.class)) {\n             Binding binding = port.getBinding();\n             PortType bindingPt = binding.getPortType();\n+            if (bindingPt == null) {\n+                org.apache.cxf.common.i18n.Message msg = new \n+                org.apache.cxf.common.i18n.Message(\"BINDING_MISSING_TYPE\",\n+                                                   LOG,\n+                                                   binding.getQName());\n+                throw new WSDLRuntimeException(msg);\n+            }\n+\n             //TODO: wsdl4j's bug. if there is recursive import,\n             //wsdl4j can not get operation input message\n             PortType pt = def.getPortType(bindingPt.getQName());",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java"
            },
            {
                "additions": 16,
                "sha": "ade095bc1c0a4913809f6ce06831fdbd244c9b16",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java",
                "deletions": 0,
                "filename": "tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java?ref=c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b",
                "patch": "@@ -40,11 +40,27 @@\n import org.apache.cxf.tools.wsdlto.AbstractCodeGenTest;\n import org.apache.cxf.tools.wsdlto.WSDLToJava;\n import org.apache.cxf.tools.wsdlto.frontend.jaxws.validator.UniqueBodyValidator;\n+import org.apache.cxf.wsdl11.WSDLRuntimeException;\n+\n import org.junit.Test;\n import org.mortbay.jetty.Server;\n import org.mortbay.jetty.handler.ResourceHandler;\n \n public class CodeGenBugTest extends AbstractCodeGenTest {\n+    \n+    \n+    @Test\n+    public void testCXF1969() throws Exception {\n+        env.put(ToolConstants.CFG_WSDLURL, \n+                getLocation(\"/wsdl2java_wsdl/cxf1969/report_incident.wsdl\"));\n+        processor.setContext(env);\n+        \n+        try {\n+            processor.execute();\n+        } catch (WSDLRuntimeException wrex) {\n+            assertEquals(\"BINDING_MISSING_TYPE\", wrex.getMessage());\n+        }  \n+    }\n \n     @Test\n     // Test for CXF-1678",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java"
            },
            {
                "additions": 75,
                "sha": "102910ad7351e22b6f217d521ba35bdbc2c82b6c",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1969/report_incident.wsdl",
                "deletions": 0,
                "filename": "tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1969/report_incident.wsdl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1969/report_incident.wsdl?ref=c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b",
                "patch": "@@ -0,0 +1,75 @@\n+<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\r\n+<wsdl:definitions xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\"\r\n+\txmlns:tns=\"http://reportincident.example.camel.apache.org\"\r\n+\txmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\r\n+\txmlns:http=\"http://schemas.xmlsoap.org/wsdl/http/\"\r\n+\txmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"\r\n+\ttargetNamespace=\"http://reportincident.example.camel.apache.org\">\r\n+\r\n+    <!-- Type definitions for input- and output parameters for webservice -->\r\n+    <wsdl:types>\r\n+        <xs:schema targetNamespace=\"http://reportincident.example.camel.apache.org\">\r\n+            <xs:element name=\"inputReportIncident\">\r\n+                <xs:complexType name=\"inputReportIncident\">\r\n+                    <xs:sequence>\r\n+                        <xs:element type=\"xs:string\" name=\"incidentId\"/>\r\n+                        <xs:element type=\"xs:string\" name=\"incidentDate\"/>\r\n+                        <xs:element type=\"xs:string\" name=\"givenName\"/>\r\n+                        <xs:element type=\"xs:string\" name=\"familyName\"/>\r\n+                        <xs:element type=\"xs:string\" name=\"summary\"/>\r\n+                        <xs:element type=\"xs:string\" name=\"details\"/>\r\n+                        <xs:element type=\"xs:string\" name=\"email\"/>\r\n+                        <xs:element type=\"xs:string\" name=\"phone\"/>\r\n+                    </xs:sequence>\r\n+                </xs:complexType>\r\n+            </xs:element>\r\n+            <xs:element name=\"outputReportIncident\">\r\n+                <xs:complexType name=\"outputReportIncident\">\r\n+                    <xs:sequence>\r\n+                        <xs:element type=\"xs:string\" name=\"code\"/>\r\n+                    </xs:sequence>\r\n+                </xs:complexType>\r\n+            </xs:element>\r\n+        </xs:schema>\r\n+    </wsdl:types>\r\n+\r\n+    <!-- Message definitions for input and output -->\r\n+    <wsdl:message name=\"inputReportIncident\">\r\n+        <wsdl:part name=\"in\" element=\"tns:inputReportIncident\"/>\r\n+    </wsdl:message>\r\n+    <wsdl:message name=\"outputReportIncident\">\r\n+        <wsdl:part name=\"out\" element=\"tns:outputReportIncident\"/>\r\n+    </wsdl:message>\r\n+\r\n+    <!-- Port (interface) definitions -->\r\n+    <wsdl:portType name=\"ReportIncidentEndpoint\">\r\n+        <wsdl:operation name=\"ReportIncident\">\r\n+            <wsdl:input message=\"tns:inputReportIncident\"/>\r\n+            <wsdl:output message=\"tns:outputReportIncident\"/>\r\n+        </wsdl:operation>\r\n+    </wsdl:portType>\r\n+\r\n+    <!-- Port bindings to transports and encoding - HTTP, document literal encoding is used -->\r\n+    <wsdl:binding name=\"ReportIncidentBinding\">\r\n+        <soap:binding transport=\"http://schemas.xmlsoap.org/soap/http\"/>\r\n+        <wsdl:operation name=\"ReportIncident\">\r\n+            <soap:operation\r\n+                    soapAction=\"http://reportincident.example.camel.apache.org/ReportIncident\"\r\n+                    style=\"document\"/>\r\n+            <wsdl:input>\r\n+                <soap:body parts=\"in\" use=\"literal\"/>\r\n+            </wsdl:input>\r\n+            <wsdl:output>\r\n+                <soap:body parts=\"out\" use=\"literal\"/>\r\n+            </wsdl:output>\r\n+        </wsdl:operation>\r\n+    </wsdl:binding>\r\n+\r\n+    <!-- Service definition -->\r\n+    <wsdl:service name=\"ReportIncidentEndpointService\">\r\n+        <wsdl:port name=\"ReportIncidentService\" binding=\"tns:ReportIncidentBinding\">\r\n+            <soap:address location=\"http://localhost:8080/part-five/webservices/incident\"/>\r\n+        </wsdl:port>\r\n+    </wsdl:service>\r\n+\r\n+</wsdl:definitions>\r",
                "changes": 75,
                "blob_url": "https://github.com/apache/cxf/blob/c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1969/report_incident.wsdl"
            }
        ],
        "repo": "cxf",
        "message": "CXF-1969 wsdl2java - NPE when wsdl has a missing attribute\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@736352 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c2e8ddb5b1f3f83971f0ed4b5c9d72629e11285b"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5623e9d5a532e8d1b29d030a6cbe2a86edc6ac44",
        "bug_id": "cxf_253",
        "file": [
            {
                "additions": 2,
                "sha": "335eeb42daf291775bf395d977af83339cdc7710",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/618a9e85dc08432d33b76471b2723dfcdf26542c/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/saaj/SAAJInInterceptor.java",
                "deletions": 1,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/saaj/SAAJInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/saaj/SAAJInInterceptor.java?ref=618a9e85dc08432d33b76471b2723dfcdf26542c",
                "patch": "@@ -127,7 +127,8 @@ public void handleMessage(SoapMessage message) throws Fault {\n                 if (fault.getRole() != null) {\n                     soapFault.setFaultActor(fault.getRole());\n                 }\n-                if (fault.getDetail() != null) {\n+                if (fault.getDetail() != null\n+                    && fault.getDetail().getFirstChild() != null) {\n                     soapFault.addDetail().appendChild(\n                         soapMessage.getSOAPPart().importNode(\n                             fault.getDetail().getFirstChild(), true));",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/618a9e85dc08432d33b76471b2723dfcdf26542c/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/saaj/SAAJInInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix for NPE in SAAJInInterceptor when FaultDetail is not populated\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@734666 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/618a9e85dc08432d33b76471b2723dfcdf26542c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/782216612d60c2f6ffe29c92f103dbda46453444",
        "bug_id": "cxf_254",
        "file": [
            {
                "additions": 31,
                "sha": "4832fcb1edd5961135b5dde44b66f750cd321ece",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/affd57f78aeee0ac0b065ced1f549e9a94f9c5ca/rt/core/src/main/java/org/apache/cxf/databinding/source/XMLStreamDataReader.java",
                "deletions": 30,
                "filename": "rt/core/src/main/java/org/apache/cxf/databinding/source/XMLStreamDataReader.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/databinding/source/XMLStreamDataReader.java?ref=affd57f78aeee0ac0b065ced1f549e9a94f9c5ca",
                "patch": "@@ -53,40 +53,41 @@ public Object read(MessagePartInfo part, XMLStreamReader input) {\n     }\n \n     public Object read(QName name, XMLStreamReader input, Class type) {\n-        if (SAXSource.class.isAssignableFrom(type)) {\n-            try {\n-                CachedOutputStream out = new CachedOutputStream();\n+        if (type != null) {\n+            if (SAXSource.class.isAssignableFrom(type)) {\n                 try {\n-                    XMLStreamWriter xsw = StaxUtils.createXMLStreamWriter(out);\n-                    StaxUtils.copy(input, xsw);\n-                    xsw.close();\n-                    return new SAXSource(new InputSource(out.getInputStream()));\n-                } finally {\n-                    out.close();\n+                    CachedOutputStream out = new CachedOutputStream();\n+                    try {\n+                        XMLStreamWriter xsw = StaxUtils.createXMLStreamWriter(out);\n+                        StaxUtils.copy(input, xsw);\n+                        xsw.close();\n+                        return new SAXSource(new InputSource(out.getInputStream()));\n+                    } finally {\n+                        out.close();\n+                    }\n+                } catch (IOException e) {\n+                    throw new Fault(new Message(\"COULD_NOT_READ_XML_STREAM\", LOG), e);\n+                } catch (XMLStreamException e) {\n+                    throw new Fault(new Message(\"COULD_NOT_READ_XML_STREAM\", LOG), e);\n                 }\n-            } catch (IOException e) {\n-                throw new Fault(new Message(\"COULD_NOT_READ_XML_STREAM\", LOG), e);\n-            } catch (XMLStreamException e) {\n-                throw new Fault(new Message(\"COULD_NOT_READ_XML_STREAM\", LOG), e);\n-            }\n-        } else if (StreamSource.class.isAssignableFrom(type)) {\n-            try {\n-                CachedOutputStream out = new CachedOutputStream();\n+            } else if (StreamSource.class.isAssignableFrom(type)) {\n                 try {\n-                    XMLStreamWriter xsw = StaxUtils.createXMLStreamWriter(out);\n-                    StaxUtils.copy(input, xsw);\n-                    xsw.close();\n-                    return new StreamSource(out.getInputStream());\n-                } finally {\n-                    out.close();\n+                    CachedOutputStream out = new CachedOutputStream();\n+                    try {\n+                        XMLStreamWriter xsw = StaxUtils.createXMLStreamWriter(out);\n+                        StaxUtils.copy(input, xsw);\n+                        xsw.close();\n+                        return new StreamSource(out.getInputStream());\n+                    } finally {\n+                        out.close();\n+                    }\n+                } catch (IOException e) {\n+                    throw new Fault(new Message(\"COULD_NOT_READ_XML_STREAM\", LOG), e);\n+                } catch (XMLStreamException e) {\n+                    throw new Fault(new Message(\"COULD_NOT_READ_XML_STREAM\", LOG), e);\n                 }\n-            } catch (IOException e) {\n-                throw new Fault(new Message(\"COULD_NOT_READ_XML_STREAM\", LOG), e);\n-            } catch (XMLStreamException e) {\n-                throw new Fault(new Message(\"COULD_NOT_READ_XML_STREAM\", LOG), e);\n-            }\n-        } \n-        \n+            } \n+        }\n         return read(input);\n     }\n ",
                "changes": 61,
                "blob_url": "https://github.com/apache/cxf/blob/affd57f78aeee0ac0b065ced1f549e9a94f9c5ca/rt/core/src/main/java/org/apache/cxf/databinding/source/XMLStreamDataReader.java"
            }
        ],
        "repo": "cxf",
        "message": "Don't NPE if type is null\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@725839 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/affd57f78aeee0ac0b065ced1f549e9a94f9c5ca"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/9524b0db1bbf781be26e814ed922aaafcda69314",
        "bug_id": "cxf_255",
        "file": [
            {
                "additions": 1,
                "sha": "39dca99fcdda5adc95185707f8cd6248d1af9319",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/53d69d2e5a7b31a292f0365b0c70a3ad804adb48/api/src/main/java/org/apache/cxf/databinding/AbstractDataBinding.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/databinding/AbstractDataBinding.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/databinding/AbstractDataBinding.java?ref=53d69d2e5a7b31a292f0365b0c70a3ad804adb48",
                "patch": "@@ -84,7 +84,7 @@ public XmlSchema addSchemaDocument(ServiceInfo serviceInfo, SchemaCollection col\n         \n         SchemaInfo schemaInfo = serviceInfo.getSchema(ns);\n         if (schemaInfo != null && (systemId == null && schemaInfo.getSystemId() == null \n-            || systemId != null && schemaInfo.getSystemId().equalsIgnoreCase(systemId))) {\n+            || systemId != null && systemId.equalsIgnoreCase(schemaInfo.getSystemId()))) {\n             return schemaInfo.getSchema();\n         }\n         ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/53d69d2e5a7b31a292f0365b0c70a3ad804adb48/api/src/main/java/org/apache/cxf/databinding/AbstractDataBinding.java"
            }
        ],
        "repo": "cxf",
        "message": "Yet another update to avoid a possible NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@702248 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/53d69d2e5a7b31a292f0365b0c70a3ad804adb48"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3f8f92575276c57764ee3c4e894506853e701bee",
        "bug_id": "cxf_256",
        "file": [
            {
                "additions": 1,
                "sha": "9f9bef7cb67c1be21ee67f6decc4f6ef76f97a97",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/39272e3958873ba61b23fe122ec29e0670d7b352/buildtools/src/main/java/org/apache/cxf/maven/PluginTransformer.java",
                "deletions": 1,
                "filename": "buildtools/src/main/java/org/apache/cxf/maven/PluginTransformer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/buildtools/src/main/java/org/apache/cxf/maven/PluginTransformer.java?ref=39272e3958873ba61b23fe122ec29e0670d7b352",
                "patch": "@@ -80,7 +80,7 @@ public void processResource(InputStream is) throws IOException {\n     }\n \n     public boolean hasTransformedResource() {\n-        return true;\n+        return doc != null;\n     }\n \n     public void modifyOutputStream(JarOutputStream jos) throws IOException {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/39272e3958873ba61b23fe122ec29e0670d7b352/buildtools/src/main/java/org/apache/cxf/maven/PluginTransformer.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix for NPE I'm getting in one of the bundles\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@684895 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/39272e3958873ba61b23fe122ec29e0670d7b352"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/bec4331cd2eb9ef60a80480d7ce718299563a42d",
        "bug_id": "cxf_257",
        "file": [
            {
                "additions": 1,
                "sha": "249d632dee6bb1a08463938bdf9b64d0324d45ce",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/1855e288a4564803be42dad7b9957e16c6b10ac5/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java",
                "deletions": 1,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java?ref=1855e288a4564803be42dad7b9957e16c6b10ac5",
                "patch": "@@ -632,7 +632,7 @@ private void initializeMessage(SoapBindingInfo bi, BindingOperationInfo boi, Bin\n                             bmsg.getMessageParts().remove(mpi);\n                         } else if (SOAPBindingUtil.isSOAPBody(content)) {\n                             SoapBody sb = SOAPBindingUtil.getSoapBody(content);\n-                            if (sb.getParts().size() == 1) {\n+                            if (sb.getParts() != null && sb.getParts().size() == 1) {\n                                 partName = (String) sb.getParts().get(0);\n                             }\n ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/1855e288a4564803be42dad7b9957e16c6b10ac5/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1603] Add another NPE guard, fix from Benjamin Coiffe applied\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@659126 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/1855e288a4564803be42dad7b9957e16c6b10ac5"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/c502440050d118e8a966064712c258aad5426b11",
        "bug_id": "cxf_258",
        "file": [
            {
                "additions": 3,
                "sha": "408077d562406366c1b4913feeb732d4c16c5285",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/42d58e84b4dd5ac8442a10c9a51dba0c84ac1c44/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java",
                "deletions": 0,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java?ref=42d58e84b4dd5ac8442a10c9a51dba0c84ac1c44",
                "patch": "@@ -401,6 +401,9 @@ static void setupClasspath(StringBuilder classPath, ClassLoader classLoader)\n         do {\n             if (tcl instanceof URLClassLoader) {\n                 URL[] urls = ((URLClassLoader)tcl).getURLs();\n+                if (urls == null) {\n+                    urls = new URL[0];\n+                }\n                 for (URL url : urls) {\n                     if (url.getProtocol().startsWith(\"file\")) {\n                         File file; ",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/42d58e84b4dd5ac8442a10c9a51dba0c84ac1c44/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1596] Add another NPE guard\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@658323 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/42d58e84b4dd5ac8442a10c9a51dba0c84ac1c44"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/d9e18df6cd7fe118fd6f24b58c5e85265021181b",
        "bug_id": "cxf_259",
        "file": [
            {
                "additions": 7,
                "sha": "39cb1952f40a81d7e65e5ab48a97435cb4f55bee",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0dd2a34a95055652731dbef0f10234dcc51dfea3/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java",
                "deletions": 2,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java?ref=0dd2a34a95055652731dbef0f10234dcc51dfea3",
                "patch": "@@ -639,8 +639,13 @@ public static Object unmarshall(JAXBContext context, Schema schema, Object sourc\n         } catch (Throwable ex) {\n             if (ex instanceof javax.xml.bind.UnmarshalException) {\n                 javax.xml.bind.UnmarshalException unmarshalEx = (javax.xml.bind.UnmarshalException)ex;\n-                throw new Fault(new Message(\"UNMARSHAL_ERROR\", BUNDLE, unmarshalEx.getLinkedException()\n-                    .getMessage()), ex);\n+                if (unmarshalEx.getLinkedException() != null) {\n+                    throw new Fault(new Message(\"UNMARSHAL_ERROR\", BUNDLE, \n+                                            unmarshalEx.getLinkedException().getMessage()), ex);\n+                } else {\n+                    throw new Fault(new Message(\"UNMARSHAL_ERROR\", BUNDLE, \n+                                                unmarshalEx.getMessage()), ex);                    \n+                }\n             } else {\n                 throw new Fault(new Message(\"UNMARSHAL_ERROR\", BUNDLE, ex.getMessage()), ex);\n             }",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/0dd2a34a95055652731dbef0f10234dcc51dfea3/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBEncoderDecoder.java"
            }
        ],
        "repo": "cxf",
        "message": "Guard against NPE when creating a fault\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@658241 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/0dd2a34a95055652731dbef0f10234dcc51dfea3"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/fc5e74356d476b7fc4ff86507544a6aa477a25bb",
        "bug_id": "cxf_260",
        "file": [
            {
                "additions": 6,
                "sha": "1f785e2d3e55c37cb38780265aa0ec9dcfbef3ad",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad336ad8db4d7c842a6ce8f9ac3253c269c9ef09/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java",
                "deletions": 4,
                "filename": "tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java?ref=ad336ad8db4d7c842a6ce8f9ac3253c269c9ef09",
                "patch": "@@ -362,10 +362,12 @@ public String getWrappedElementType(QName wrapperElement, QName item) {\n         Mapping mapping = rawJaxbModelGenCode.get(wrapperElement);\n         if (mapping != null) {\n             List<? extends Property> propList = mapping.getWrapperStyleDrilldown();\n-            for (Property pro : propList) {\n-                if (pro.elementName().getNamespaceURI().equals(item.getNamespaceURI())\n-                    && pro.elementName().getLocalPart().equals(item.getLocalPart())) {\n-                    return pro.type().fullName();\n+            if (propList != null) {\n+                for (Property pro : propList) {\n+                    if (pro.elementName().getNamespaceURI().equals(item.getNamespaceURI())\n+                        && pro.elementName().getLocalPart().equals(item.getLocalPart())) {\n+                        return pro.type().fullName();\n+                    }\n                 }\n             }\n         }",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/ad336ad8db4d7c842a6ce8f9ac3253c269c9ef09/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java"
            }
        ],
        "repo": "cxf",
        "message": "Add a guard NPE check\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@657922 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ad336ad8db4d7c842a6ce8f9ac3253c269c9ef09"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/57f2bc80760d8bed16d84d1341d10e48add23ff7",
        "bug_id": "cxf_261",
        "file": [
            {
                "additions": 2,
                "sha": "fcf7098ab845ce2065b38ccb14bf6ccf5e8f8235",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6f4efc41aa5018582a798e0bc889e41a18a1fb89/common/common/src/main/java/org/apache/cxf/helpers/WSDLHelper.java",
                "deletions": 2,
                "filename": "common/common/src/main/java/org/apache/cxf/helpers/WSDLHelper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/common/common/src/main/java/org/apache/cxf/helpers/WSDLHelper.java?ref=6f4efc41aa5018582a798e0bc889e41a18a1fb89",
                "patch": "@@ -97,7 +97,7 @@ public Map getParts(Operation operation, boolean out) {\n     public List<Part> getInMessageParts(Operation operation) {\n         Input input = operation.getInput();\n         List<Part> partsList = new ArrayList<Part>();\n-        if (input != null) {\n+        if (input != null && input.getMessage() != null) {\n             Iterator ite = input.getMessage().getParts().values().iterator();\n             while (ite.hasNext()) {\n                 partsList.add((Part)ite.next());\n@@ -109,7 +109,7 @@ public Map getParts(Operation operation, boolean out) {\n     public List<Part> getOutMessageParts(Operation operation) {\n         Output output = operation.getOutput();\n         List<Part> partsList = new ArrayList<Part>();\n-        if (output != null) {\n+        if (output != null && output.getMessage() != null) {\n             Iterator ite = output.getMessage().getParts().values().iterator();\n             while (ite.hasNext()) {\n                 partsList.add((Part)ite.next());",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/6f4efc41aa5018582a798e0bc889e41a18a1fb89/common/common/src/main/java/org/apache/cxf/helpers/WSDLHelper.java"
            },
            {
                "additions": 0,
                "sha": "06e7a942da530742ccb998bc1b7bfbc04ff2c3ae",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6f4efc41aa5018582a798e0bc889e41a18a1fb89/parent/pom.xml",
                "deletions": 6,
                "filename": "parent/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/parent/pom.xml?ref=6f4efc41aa5018582a798e0bc889e41a18a1fb89",
                "patch": "@@ -474,12 +474,6 @@\n                 <groupId>com.sun.xml.parsers</groupId>\n                 <artifactId>jaxp-ri</artifactId>\n                 <version>1.4.2</version>\n-                <exclusions>\n-                    <exclusion>\n-                        <groupId>javax.xml.parsers</groupId>\n-                        <artifactId>jaxp-api</artifactId>\n-                    </exclusion>\n-                </exclusions>\n             </dependency>\n             <dependency>\n                 <groupId>org.apache.servicemix</groupId>",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/6f4efc41aa5018582a798e0bc889e41a18a1fb89/parent/pom.xml"
            },
            {
                "additions": 2,
                "sha": "a208147f60334af7d92651fdb88d6243072d03bb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6f4efc41aa5018582a798e0bc889e41a18a1fb89/rt/javascript/src/test/java/org/apache/cxf/javascript/GreeterClientTest.java",
                "deletions": 2,
                "filename": "rt/javascript/src/test/java/org/apache/cxf/javascript/GreeterClientTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/javascript/src/test/java/org/apache/cxf/javascript/GreeterClientTest.java?ref=6f4efc41aa5018582a798e0bc889e41a18a1fb89",
                "patch": "@@ -58,7 +58,7 @@ private Void sayHiCaller(Context context) {\n             testUtilities.rhinoCallConvert(\"sayHiTest\", Notifier.class, \n                                            testUtilities.javaToJS(getAddress()));\n         \n-        boolean notified = notifier.waitForJavascript(1000 * 10);\n+        boolean notified = notifier.waitForJavascript(1000 * 15);\n         assertTrue(notified);\n         Integer errorStatus = testUtilities.rhinoEvaluateConvert(\"globalErrorStatus\", Integer.class);\n         assertNull(errorStatus);\n@@ -86,7 +86,7 @@ private Void sayHiClosureCaller(Context context) {\n             testUtilities.rhinoCallConvert(\"requestClosureTest\", CountDownNotifier.class, \n                                            testUtilities.javaToJS(getAddress()));\n         \n-        boolean notified = notifier.waitForJavascript(1000 * 10);\n+        boolean notified = notifier.waitForJavascript(1000 * 15);\n         assertTrue(notified);\n         Integer errorStatus = testUtilities.rhinoEvaluateConvert(\"globalErrorStatus\", Integer.class);\n         assertNull(errorStatus);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/6f4efc41aa5018582a798e0bc889e41a18a1fb89/rt/javascript/src/test/java/org/apache/cxf/javascript/GreeterClientTest.java"
            },
            {
                "additions": 2,
                "sha": "922a1b4aaf30edab563f48795b5b0e6182dc82b7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6f4efc41aa5018582a798e0bc889e41a18a1fb89/tools/validator/src/test/java/org/apache/cxf/tools/validator/WSDLValidationTest.java",
                "deletions": 1,
                "filename": "tools/validator/src/test/java/org/apache/cxf/tools/validator/WSDLValidationTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/validator/src/test/java/org/apache/cxf/tools/validator/WSDLValidationTest.java?ref=6f4efc41aa5018582a798e0bc889e41a18a1fb89",
                "patch": "@@ -87,7 +87,8 @@ public void testValidateReferenceError() throws Exception {\n         String error = getStdErr();\n         if (StaxUtils.isWoodstox()) {\n             // sjsxp doesn't report locations.\n-            assertTrue(error.indexOf(\"[147,3]\") != -1);\n+            assertTrue(\"error message does not contain [147,3]. error message: \"\n+                + error, error.indexOf(\"[147,3]\") != -1);\n         }\n         assertTrue(error.indexOf(\"Caused by {http://apache.org/hello_world_soap_http}\"\n                                        + \"[binding:Greeter_SOAPBinding1] not exist.\") != -1);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/6f4efc41aa5018582a798e0bc889e41a18a1fb89/tools/validator/src/test/java/org/apache/cxf/tools/validator/WSDLValidationTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2341] Remove exclusion of jaxp-api which is needed when using ibm jdk 5.\nAlso, added a null check to avoid a NullPointerException seen when running\nthe WSDLValidationTest.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@794892 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/6f4efc41aa5018582a798e0bc889e41a18a1fb89"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0983a2bb2652d3d2f55e36230ccf5a6071b4e1f2",
        "bug_id": "cxf_262",
        "file": [
            {
                "additions": 3,
                "sha": "750b37ccfd64a76164709b0acf401d4e3cc55342",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ec4435d70cb0097e34f38bc0f47c0faca03b4bb0/rt/rs/extensions/search/src/main/java/org/apache/cxf/jaxrs/ext/search/lucene/LuceneQueryVisitor.java",
                "deletions": 2,
                "filename": "rt/rs/extensions/search/src/main/java/org/apache/cxf/jaxrs/ext/search/lucene/LuceneQueryVisitor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/extensions/search/src/main/java/org/apache/cxf/jaxrs/ext/search/lucene/LuceneQueryVisitor.java?ref=ec4435d70cb0097e34f38bc0f47c0faca03b4bb0",
                "patch": "@@ -103,8 +103,6 @@ public LuceneQueryVisitor(Map<String, String> fieldsMap, String contentsFieldNam\n             queryBuilder = new QueryBuilder(analyzer);\n         }                \n         \n-        state.set(new Stack<List<Query>>());\n-        state.get().push(new ArrayList<Query>());        \n     }\n     \n     public void setContentsFieldMap(Map<String, String> map) {\n@@ -121,6 +119,9 @@ public void reset() {\n     }\n     \n     public void visit(SearchCondition<T> sc) {\n+        if (state.get() == null) {\n+            reset();\n+        }\n         PrimitiveStatement statement = sc.getStatement();\n         if (statement != null) {\n             if (statement.getProperty() != null) {",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/ec4435d70cb0097e34f38bc0f47c0faca03b4bb0/rt/rs/extensions/search/src/main/java/org/apache/cxf/jaxrs/ext/search/lucene/LuceneQueryVisitor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5938] Initializing the stack directly in visit() to avoid NPE in cases when a thread that invokes initially was not the same which initiakilized the stack in the constructor",
        "commit": "https://github.com/apache/cxf/commit/ec4435d70cb0097e34f38bc0f47c0faca03b4bb0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0bfee67fff799ffa7845873a4190676763c1c1ea",
        "bug_id": "cxf_263",
        "file": [
            {
                "additions": 10,
                "sha": "c096128ce7fbec6147fb1ce6698a023e3d9f4ace",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/87d67b928b87adb1e60eb817d1718f405cbc7e3c/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java",
                "deletions": 17,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java?ref=87d67b928b87adb1e60eb817d1718f405cbc7e3c",
                "patch": "@@ -19,13 +19,11 @@\n \n package org.apache.cxf.ws.rm.soap;\n \n-import java.io.ByteArrayInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n import java.io.OutputStream;\n import java.net.ConnectException;\n import java.util.ArrayList;\n-import java.util.Arrays;\n import java.util.Collection;\n import java.util.Date;\n import java.util.HashMap;\n@@ -390,7 +388,7 @@ private void serverResend(Message message) throws RMException {\n         }\n         \n         final String address = to.getValue();\n-        LOG.fine(\"Resending to address: \" + address);\n+        LOG.log(Level.FINE, \"Resending to address: {0}\", address);\n         final ProtocolVariation protocol = RMContextUtils.getProtocolVariation(message);\n         final Endpoint reliableEndpoint = manager.getReliableEndpoint(message).getEndpoint(protocol);\n \n@@ -455,15 +453,10 @@ private void resend(Conduit c, Message message) {\n             }\n             CachedOutputStream content = (CachedOutputStream)message\n                 .get(RMMessageConstants.SAVED_CONTENT);\n-            InputStream bis = null;\n             if (null == content) {\n-                byte[] savedbytes = message.getContent(byte[].class);\n-                bis = new ByteArrayInputStream(savedbytes); \n-                if (LOG.isLoggable(Level.FINE)) {\n-                    LOG.fine(\"Using saved byte array: \" + Arrays.toString(savedbytes));\n-                }\n+                LOG.log(Level.WARNING, \"Assuming the message has been acknowledged and released, skipping resend.\");\n             } else {\n-                bis = content.getInputStream();\n+                InputStream bis = content.getInputStream();\n                 if (LOG.isLoggable(Level.FINE)) {\n                     if (content.size() < 65536) {\n                         LOG.fine(\"Using saved output stream: \" \n@@ -472,17 +465,17 @@ private void resend(Conduit c, Message message) {\n                         LOG.fine(\"Using saved output stream: ...\");                        \n                     }\n                 }\n-            }\n \n-            // copy saved output stream to new output stream in chunks of 1024\n-            IOUtils.copyAndCloseInput(bis, os);\n-            os.flush();\n-            // closing the conduit this way will close the underlining stream that is os.\n-            c.close(message);\n+                // copy saved output stream to new output stream in chunks of 1024\n+                IOUtils.copyAndCloseInput(bis, os);\n+                os.flush();\n+                // closing the conduit this way will close the underlining stream that is os.\n+                c.close(message);\n+            }\n         } catch (ConnectException ex) {\n             //ignore, we'll just resent again later\n         } catch (IOException ex) {\n-            LOG.log(Level.SEVERE, \"RESEND_FAILED_MSG\", ex);\n+            LOG.log(Level.WARNING, \"RESEND_FAILED_MSG\", ex);\n         }\n     }\n ",
                "changes": 27,
                "blob_url": "https://github.com/apache/cxf/blob/87d67b928b87adb1e60eb817d1718f405cbc7e3c/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5546] NPE may be thrown and logged during WS-RM's retransmission\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1565162 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/87d67b928b87adb1e60eb817d1718f405cbc7e3c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f42f6b6ba6037850bd200923b72fd3e716ccbbff",
        "bug_id": "cxf_264",
        "file": [
            {
                "additions": 1,
                "sha": "a6cb06b313192587a0e9ab2262426e0df9574879",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8bc55793927818a8b0de19f3851742d597214bc5/rt/transports/http/src/main/java/org/apache/cxf/transport/http/blueprint/HolderUtils.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/blueprint/HolderUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/blueprint/HolderUtils.java?ref=8bc55793927818a8b0de19f3851742d597214bc5",
                "patch": "@@ -45,7 +45,7 @@ public static Object getJaxbObject(Element parent, Class<?> c,\n \n         try {\n             Unmarshaller umr = getContext(c, jaxbContext, jaxbClasses, cl).createUnmarshaller();\n-            JAXBElement<?> ele = (JAXBElement<?>) umr.unmarshal(parent);\n+            JAXBElement<?> ele = (JAXBElement<?>) umr.unmarshal(parent, c);\n \n             return ele.getValue();\n         } catch (JAXBException e) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/8bc55793927818a8b0de19f3851742d597214bc5/rt/transports/http/src/main/java/org/apache/cxf/transport/http/blueprint/HolderUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5440] NPE is thrown at http conduit's authorization setting in BP\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1548496 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/8bc55793927818a8b0de19f3851742d597214bc5"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/48cf4d7192c07581d56438c8779f24401531c286",
        "bug_id": "cxf_265",
        "file": [
            {
                "additions": 22,
                "sha": "8e313eeaf352d602e11374ccd9a750d2c48b4ffd",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/045d3c0501341dfc76e49640eb57a45bfca2429a/rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProvider.java",
                "deletions": 16,
                "filename": "rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProvider.java?ref=045d3c0501341dfc76e49640eb57a45bfca2429a",
                "patch": "@@ -561,8 +561,8 @@ private void reportError(String message, Exception ex) {\n         reportError(message, ex, 500);\n     }\n     \n-    private boolean isFeedRequested(MediaType mt) {\n-        if (\"entry\".equals(mt.getParameters().get(\"type\"))) {\n+    protected boolean isFeedRequested(MediaType mt) {\n+        if (\"entry\".equalsIgnoreCase(mt.getParameters().get(\"type\"))) {\n             return false;\n         }\n         return true;\n@@ -603,25 +603,29 @@ public Object readFrom(Class<Object> cls, Type type, Annotation[] anns, MediaTyp\n         boolean isFeed = isFeedRequested(mt);\n         \n         if (isFeed) {\n-            return readFromFeed(cls, mt, headers, is);\n+            return readFromFeedOrEntry(cls, mt, headers, is);\n         } else {\n             AtomEntryProvider p = new AtomEntryProvider();\n             p.setAutodetectCharset(autodetectCharset);\n             Entry entry = p.readFrom(Entry.class, Entry.class, \n                                      new Annotation[]{}, mt, headers, is);\n-            return readFromEntry(entry, cls, mt, headers, is);\n+            return readFromEntry(entry, cls);\n         }\n     }\n     \n     @SuppressWarnings(\"unchecked\")\n-    private Object readFromFeed(Class<Object> cls, MediaType mt, \n+    private Object readFromFeedOrEntry(Class<Object> cls, MediaType mt, \n                            MultivaluedMap<String, String> headers, InputStream is) \n         throws IOException {\n         \n         AtomFeedProvider p = new AtomFeedProvider();\n         p.setAutodetectCharset(autodetectCharset);\n-        Feed feed = p.readFrom(Feed.class, Feed.class, new Annotation[]{}, mt, headers, is);\n-        \n+        Object atomObject = p.readFrom(Feed.class, Feed.class, new Annotation[]{}, mt, headers, is);\n+        if (atomObject instanceof Entry) {\n+            return this.readFromEntry((Entry)atomObject, cls);\n+        }\n+            \n+        Feed feed = (Feed)atomObject;\n         AtomElementReader<?, ?> reader = getAtomReader(cls);\n         if (reader != null) {\n             return ((AtomElementReader<Feed, Object>)reader).readFrom(feed);\n@@ -634,7 +638,7 @@ private Object readFromFeed(Class<Object> cls, MediaType mt,\n                 = (Class<Object>)InjectionUtils.getActualType(m.getGenericParameterTypes()[0]);\n             List<Object> objects = new ArrayList<Object>();\n             for (Entry e : feed.getEntries()) {\n-                objects.add(readFromEntry(e, realCls, mt, headers, is));\n+                objects.add(readFromEntry(e, realCls));\n             }\n             instance = cls.newInstance();\n             m.invoke(instance, new Object[]{objects});\n@@ -646,20 +650,22 @@ private Object readFromFeed(Class<Object> cls, MediaType mt,\n     }\n     \n     @SuppressWarnings(\"unchecked\")\n-    private Object readFromEntry(Entry entry, Class<Object> cls, MediaType mt, \n-                            MultivaluedMap<String, String> headers, InputStream is) \n+    private Object readFromEntry(Entry entry, Class<Object> cls) \n         throws IOException {\n         \n         AtomElementReader<?, ?> reader = getAtomReader(cls);\n         if (reader != null) {\n             return ((AtomElementReader<Entry, Object>)reader).readFrom(entry);\n         }\n-        try {\n-            Unmarshaller um = \n-                jaxbProvider.getJAXBContext(cls, cls).createUnmarshaller();\n-            return cls.cast(um.unmarshal(new StringReader(entry.getContent())));\n-        } catch (Exception ex) {\n-            reportError(\"Object of type \" + cls.getName() + \" can not be deserialized from Entry\", ex, 400);\n+        String entryContent = entry.getContent();\n+        if (entryContent != null) {\n+            try {\n+                Unmarshaller um = \n+                    jaxbProvider.getJAXBContext(cls, cls).createUnmarshaller();\n+                return cls.cast(um.unmarshal(new StringReader(entryContent)));\n+            } catch (Exception ex) {\n+                reportError(\"Object of type \" + cls.getName() + \" can not be deserialized from Entry\", ex, 400);\n+            }\n         }\n         return null;\n     }",
                "changes": 38,
                "blob_url": "https://github.com/apache/cxf/blob/045d3c0501341dfc76e49640eb57a45bfca2429a/rt/rs/extensions/providers/src/main/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProvider.java"
            },
            {
                "additions": 67,
                "sha": "934f76375da5215ae3b7d2b4e44be5e828f60486",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/045d3c0501341dfc76e49640eb57a45bfca2429a/rt/rs/extensions/providers/src/test/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProviderTest.java",
                "deletions": 2,
                "filename": "rt/rs/extensions/providers/src/test/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProviderTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/extensions/providers/src/test/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProviderTest.java?ref=045d3c0501341dfc76e49640eb57a45bfca2429a",
                "patch": "@@ -22,6 +22,7 @@\n import java.io.ByteArrayOutputStream;\n import java.io.StringReader;\n import java.lang.annotation.Annotation;\n+import java.nio.charset.Charset;\n import java.util.ArrayList;\n import java.util.List;\n \n@@ -31,6 +32,7 @@\n \n import org.apache.abdera.model.Entry;\n import org.apache.abdera.model.Feed;\n+import org.apache.cxf.jaxrs.impl.MetadataMap;\n import org.apache.cxf.jaxrs.provider.JAXBElementProvider;\n \n import org.junit.Assert;\n@@ -39,7 +41,6 @@\n \n import org.springframework.context.support.ClassPathXmlApplicationContext;\n \n-\n public class AtomPojoProviderTest extends Assert {\n \n     private ClassPathXmlApplicationContext ctx;\n@@ -177,7 +178,71 @@ private void doTestReadFeed(AtomPojoProvider provider) throws Exception {\n         assertTrue(\"a\".equals(list.get(0).getName()) || \"a\".equals(list.get(1).getName()));\n         assertTrue(\"b\".equals(list.get(0).getName()) || \"b\".equals(list.get(1).getName()));        \n     }\n-        \n+     \n+    @Test\n+    public void testReadEntryNoContent() throws Exception {\n+        /** A sample entry without content. */\n+        final String entryNoContent =\n+            \"<?xml version='1.0' encoding='UTF-8'?>\\n\" \n+            + \"<entry xmlns=\\\"http://www.w3.org/2005/Atom\\\">\\n\" \n+            + \"  <id>84297856</id>\\n\" \n+            + \"</entry>\";\n+\n+        AtomPojoProvider atomPojoProvider = new AtomPojoProvider();\n+        @SuppressWarnings({\n+            \"rawtypes\", \"unchecked\"\n+        })\n+        JaxbDataType type = (JaxbDataType)atomPojoProvider.readFrom((Class)JaxbDataType.class,\n+                                  JaxbDataType.class,\n+                                  new Annotation[0],\n+                                  MediaType.valueOf(\"application/atom+xml;type=entry\"),\n+                                  new MetadataMap<String, String>(),\n+                                  new ByteArrayInputStream(entryNoContent.getBytes(Charset.forName(\"UTF-8\"))));\n+        assertNull(type);\n+    }\n+    \n+    @Test\n+    public void testReadEntryWithUpperCaseTypeParam() throws Exception {\n+        doReadEntryWithContent(\"application/atom+xml;type=ENTRY\");\n+    }\n+    \n+    @Test\n+    public void testReadEntryNoTypeParam() throws Exception {\n+        doReadEntryWithContent(\"application/atom+xml\");\n+    }\n+    \n+    private void doReadEntryWithContent(String mediaType) throws Exception {\n+        final String entryWithContent =\n+            \"<?xml version='1.0' encoding='UTF-8'?>\\n\" \n+            + \"<entry xmlns=\\\"http://www.w3.org/2005/Atom\\\">\\n\" \n+            + \"  <id>84297856</id>\\n\" \n+            + \"  <content type=\\\"application/xml\\\">\\n\" \n+            + \"    <jaxbDataType xmlns=\\\"\\\">\\n\" \n+            + \"    </jaxbDataType>\\n\" \n+            + \"  </content>\\n\" \n+            + \"</entry>\";\n+\n+        AtomPojoProvider atomPojoProvider = new AtomPojoProvider();\n+        @SuppressWarnings({\n+            \"rawtypes\", \"unchecked\"\n+        })\n+        JaxbDataType type = (JaxbDataType)atomPojoProvider.readFrom((Class)JaxbDataType.class,\n+                                  JaxbDataType.class,\n+                                  new Annotation[0],\n+                                  MediaType.valueOf(mediaType),\n+                                  new MetadataMap<String, String>(),\n+                                  new ByteArrayInputStream(entryWithContent.getBytes(Charset.forName(\"UTF-8\"))));\n+        assertNotNull(type);\n+    }\n+    \n+    /**\n+     * A sample JAXB data-type to read data into.\n+     */\n+    @XmlRootElement\n+    public static class JaxbDataType {\n+        // no data\n+    }\n+    \n     private Entry getEntry(List<Entry> entries, String title) {\n         for (Entry e : entries) {\n             if (title.equals(e.getTitle())) {",
                "changes": 69,
                "blob_url": "https://github.com/apache/cxf/blob/045d3c0501341dfc76e49640eb57a45bfca2429a/rt/rs/extensions/providers/src/test/java/org/apache/cxf/jaxrs/provider/atom/AtomPojoProviderTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5404,CXF-5406] Fixing NPE and ClassCastException when reading entries with no content or without 'type' parameter\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1543800 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/045d3c0501341dfc76e49640eb57a45bfca2429a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e2e20c56579b40536298184b889d00a667d55a01",
        "bug_id": "cxf_266",
        "file": [
            {
                "additions": 11,
                "sha": "b6fff97a166e5faad49757a3825c6d560ba8f715",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b656ec8541676eac37b024291afdd2b8cee627cf/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java",
                "deletions": 7,
                "filename": "maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java?ref=b656ec8541676eac37b024291afdd2b8cee627cf",
                "patch": "@@ -117,18 +117,22 @@ public ClassLoaderSwitcher(Log log) {\n      * Restore the old classloader\n      */\n     public void restoreClassLoader() {\n-        Thread.currentThread().setContextClassLoader(origContextClassloader);\n+        if (origContextClassloader != null) {\n+            Thread.currentThread().setContextClassLoader(origContextClassloader);\n+            origContextClassloader = null; // don't hold a reference.\n+        }\n         if (origClassPath != null) {\n             System.setProperty(\"java.class.path\", origClassPath);\n         }\n \n-        Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n-        for (Object o : newProps.keySet()) {\n-            if (!origProps.containsKey(o)) {\n-                System.clearProperty(o.toString());\n+        if (origProps != null) {\n+            Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n+            for (Object o : newProps.keySet()) {\n+                if (!origProps.containsKey(o)) {\n+                    System.clearProperty(o.toString());\n+                }\n             }\n+            System.getProperties().putAll(origProps);\n         }\n-        System.getProperties().putAll(origProps);\n-        origContextClassloader = null; // don't hold a reference.\n     }\n }",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/b656ec8541676eac37b024291afdd2b8cee627cf/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java"
            },
            {
                "additions": 11,
                "sha": "0f8ca2c651dd4c9adf446a8561dd99df6cd41bb0",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b656ec8541676eac37b024291afdd2b8cee627cf/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java",
                "deletions": 7,
                "filename": "maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java?ref=b656ec8541676eac37b024291afdd2b8cee627cf",
                "patch": "@@ -110,18 +110,22 @@ public String switchClassLoader(MavenProject project,\n      * Restore the old classloader\n      */\n     public void restoreClassLoader() {\n-        Thread.currentThread().setContextClassLoader(origContextClassloader);\n+        if (origContextClassloader != null) {\n+            Thread.currentThread().setContextClassLoader(origContextClassloader);\n+            origContextClassloader = null; // don't hold a reference.\n+        }\n         if (origClassPath != null) {\n             System.setProperty(\"java.class.path\", origClassPath);\n         }\n \n-        Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n-        for (Object o : newProps.keySet()) {\n-            if (!origProps.containsKey(o)) {\n-                System.clearProperty(o.toString());\n+        if (origProps != null) {\n+            Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n+            for (Object o : newProps.keySet()) {\n+                if (!origProps.containsKey(o)) {\n+                    System.clearProperty(o.toString());\n+                }\n             }\n+            System.getProperties().putAll(origProps);\n         }\n-        System.getProperties().putAll(origProps);\n-        origContextClassloader = null; // don't hold a reference.\n     }\n }",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/b656ec8541676eac37b024291afdd2b8cee627cf/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java"
            },
            {
                "additions": 11,
                "sha": "21b13ef0e80c0c5f3a0a4d51aad63d1b3f905b0d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/b656ec8541676eac37b024291afdd2b8cee627cf/maven-plugins/wadl2java-plugin/src/main/java/org/apache/cxf/maven_plugin/common/ClassLoaderSwitcher.java",
                "deletions": 7,
                "filename": "maven-plugins/wadl2java-plugin/src/main/java/org/apache/cxf/maven_plugin/common/ClassLoaderSwitcher.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/wadl2java-plugin/src/main/java/org/apache/cxf/maven_plugin/common/ClassLoaderSwitcher.java?ref=b656ec8541676eac37b024291afdd2b8cee627cf",
                "patch": "@@ -119,18 +119,22 @@ public ClassLoaderSwitcher(Log log) {\n      * Restore the old classloader\n      */\n     public void restoreClassLoader() {\n-        Thread.currentThread().setContextClassLoader(origContextClassloader);\n+        if (origContextClassloader != null) {\n+            Thread.currentThread().setContextClassLoader(origContextClassloader);\n+            origContextClassloader = null; // don't hold a reference.\n+        }\n         if (origClassPath != null) {\n             System.setProperty(\"java.class.path\", origClassPath);\n         }\n \n-        Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n-        for (Object o : newProps.keySet()) {\n-            if (!origProps.containsKey(o)) {\n-                System.clearProperty(o.toString());\n+        if (origProps != null) {\n+            Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n+            for (Object o : newProps.keySet()) {\n+                if (!origProps.containsKey(o)) {\n+                    System.clearProperty(o.toString());\n+                }\n             }\n+            System.getProperties().putAll(origProps);\n         }\n-        System.getProperties().putAll(origProps);\n-        origContextClassloader = null; // don't hold a reference.\n     }\n }",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/b656ec8541676eac37b024291afdd2b8cee627cf/maven-plugins/wadl2java-plugin/src/main/java/org/apache/cxf/maven_plugin/common/ClassLoaderSwitcher.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5287] Fix for possible NPE in maven plugins\nPatch from Nickolay Martinov applied in multiple places\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1526679 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/b656ec8541676eac37b024291afdd2b8cee627cf"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1ab3a297190ed942fa2cbd3b21ee99a1eb48cb32",
        "bug_id": "cxf_267",
        "file": [
            {
                "additions": 4,
                "sha": "a7dd3b912b0c2a2c2a508d79c96d572dcf51b61b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c9a267b08b3fc2f055a4cd0b85eae46c93efb33e/rt/transports/http/src/main/java/org/apache/cxf/transport/http/blueprint/HTTPClientPolicyHolder.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/blueprint/HTTPClientPolicyHolder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/blueprint/HTTPClientPolicyHolder.java?ref=c9a267b08b3fc2f055a4cd0b85eae46c93efb33e",
                "patch": "@@ -70,7 +70,10 @@ public void init() {\n             this.setMaxRetransmits(clientPolicy.getMaxRetransmits());\n             this.setNonProxyHosts(clientPolicy.getNonProxyHosts());\n             this.setProxyServer(clientPolicy.getProxyServer());\n-            this.setProxyServerPort(clientPolicy.getProxyServerPort());\n+            // need to check if the property is set to avoid NPE\n+            if (clientPolicy.isSetProxyServerPort()) {\n+                this.setProxyServerPort(clientPolicy.getProxyServerPort());\n+            }\n             this.setProxyServerType(clientPolicy.getProxyServerType());\n             this.setReceiveTimeout(clientPolicy.getReceiveTimeout());\n             this.setReferer(clientPolicy.getReferer());",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/c9a267b08b3fc2f055a4cd0b85eae46c93efb33e/rt/transports/http/src/main/java/org/apache/cxf/transport/http/blueprint/HTTPClientPolicyHolder.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-5272 fixed the NPE issue which caused camel-cxf endpoint cannot be started in Blueprint with ClientPolicy is set\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1522151 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c9a267b08b3fc2f055a4cd0b85eae46c93efb33e"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/415fc29334310285b25d2c9a59c2640ee56a5963",
        "bug_id": "cxf_268",
        "file": [
            {
                "additions": 7,
                "sha": "403c0f81965085b07d99adcbdc54d3ddd25d88d5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0a7a0d023cffec2db34da7df4582c832dabbcdcd/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/FilterProviderInfo.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/FilterProviderInfo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/FilterProviderInfo.java?ref=0a7a0d023cffec2db34da7df4582c832dabbcdcd",
                "patch": "@@ -24,12 +24,19 @@\n import java.util.Set;\n \n import org.apache.cxf.Bus;\n+import org.apache.cxf.jaxrs.provider.ProviderFactory;\n \n public class FilterProviderInfo<T> extends ProviderInfo<T> {\n \n     private Set<String> nameBinding;\n     private Map<Class<?>, Integer> supportedContracts;\n     \n+    public FilterProviderInfo(T provider,\n+                              Bus bus,\n+                              Map<Class<?>, Integer> supportedContracts) {\n+        this(provider, bus, ProviderFactory.DEFAULT_FILTER_NAME_BINDING, supportedContracts);        \n+    }\n+    \n     public FilterProviderInfo(T provider,\n                               Bus bus,\n                               String nameBinding,",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/0a7a0d023cffec2db34da7df4582c832dabbcdcd/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/FilterProviderInfo.java"
            },
            {
                "additions": 4,
                "sha": "aa5d71e49ee512a96e93ed78c33fbe4c306d1c5c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0a7a0d023cffec2db34da7df4582c832dabbcdcd/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ProviderFactory.java",
                "deletions": 4,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ProviderFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ProviderFactory.java?ref=0a7a0d023cffec2db34da7df4582c832dabbcdcd",
                "patch": "@@ -77,7 +77,7 @@\n import org.apache.cxf.message.MessageUtils;\n \n public abstract class ProviderFactory {\n-    protected static final String DEFAULT_FILTER_NAME_BINDING = \"org.apache.cxf.filter.binding\";\n+    public static final String DEFAULT_FILTER_NAME_BINDING = \"org.apache.cxf.filter.binding\";\n     protected static final String SERVER_FACTORY_NAME = \"org.apache.cxf.jaxrs.provider.ServerProviderFactory\";\n     protected static final String CLIENT_FACTORY_NAME = \"org.apache.cxf.jaxrs.client.ClientProviderFactory\";\n     protected static final String IGNORE_TYPE_VARIABLES = \"org.apache.cxf.jaxrs.providers.ignore.typevars\";\n@@ -362,7 +362,7 @@ public Configuration getDynamicConfiguration() {\n             if (size > 0) {\n                 interceptors = new ArrayList<ReaderInterceptor>(size + 1);\n                 List<ProviderInfo<ReaderInterceptor>> readers =\n-                    getPostMatchContainerFilters(readerInterceptors, names);\n+                    getBoundFilters(readerInterceptors, names);\n                 for (ProviderInfo<ReaderInterceptor> p : readers) {\n                     InjectionUtils.injectContexts(p.getProvider(), p, m);\n                     interceptors.add(p.getProvider());\n@@ -401,7 +401,7 @@ public Configuration getDynamicConfiguration() {\n             if (size > 0) {\n                 interceptors = new ArrayList<WriterInterceptor>(size + 1);\n                 List<ProviderInfo<WriterInterceptor>> writers =\n-                    getPostMatchContainerFilters(writerInterceptors, names);\n+                    getBoundFilters(writerInterceptors, names);\n                 for (ProviderInfo<WriterInterceptor> p : writers) {\n                     InjectionUtils.injectContexts(p.getProvider(), p, m);\n                     interceptors.add(p.getProvider());\n@@ -884,7 +884,7 @@ public void setSchemaLocations(List<String> schemas) {\n         }\n     }\n \n-    protected static <T> List<ProviderInfo<T>> getPostMatchContainerFilters(Map<NameKey, ProviderInfo<T>> boundFilters,\n+    protected static <T> List<ProviderInfo<T>> getBoundFilters(Map<NameKey, ProviderInfo<T>> boundFilters,\n                                                                           Set<String> names) {\n         if (boundFilters.isEmpty()) {\n             return Collections.emptyList();",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/0a7a0d023cffec2db34da7df4582c832dabbcdcd/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ProviderFactory.java"
            },
            {
                "additions": 2,
                "sha": "51f333031d7f37fc4e8a846997a3f5a2eb0dfd16",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0a7a0d023cffec2db34da7df4582c832dabbcdcd/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerProviderFactory.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerProviderFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerProviderFactory.java?ref=0a7a0d023cffec2db34da7df4582c832dabbcdcd",
                "patch": "@@ -138,7 +138,7 @@ private static synchronized ServerProviderFactory initBaseFactory(Bus bus) {\n     }\n     \n     public List<ProviderInfo<ContainerRequestFilter>> getPostMatchContainerRequestFilters(Set<String> names) {\n-        return getPostMatchContainerFilters(postMatchContainerRequestFilters, names);\n+        return getBoundFilters(postMatchContainerRequestFilters, names);\n         \n     }\n     \n@@ -165,7 +165,7 @@ private static synchronized ServerProviderFactory initBaseFactory(Bus bus) {\n     }\n     \n     public List<ProviderInfo<ContainerResponseFilter>> getContainerResponseFilters(Set<String> names) {\n-        return getPostMatchContainerFilters(postMatchContainerResponseFilters, \n+        return getBoundFilters(postMatchContainerResponseFilters, \n                                             names);\n     }\n     ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/0a7a0d023cffec2db34da7df4582c832dabbcdcd/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/ServerProviderFactory.java"
            },
            {
                "additions": 1,
                "sha": "b04b3a3762d394e19e8f0c512a68b7c27435fd05",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0a7a0d023cffec2db34da7df4582c832dabbcdcd/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/spec/ClientImpl.java",
                "deletions": 1,
                "filename": "rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/spec/ClientImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/spec/ClientImpl.java?ref=0a7a0d023cffec2db34da7df4582c832dabbcdcd",
                "patch": "@@ -210,7 +210,7 @@ public Builder request() {\n                     providers.add(p);\n                 } else {\n                     providers.add(\n-                        new FilterProviderInfo<Object>(p, pf.getBus(), null, contracts));\n+                        new FilterProviderInfo<Object>(p, pf.getBus(), contracts));\n                 }\n             }\n             ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/0a7a0d023cffec2db34da7df4582c832dabbcdcd/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/spec/ClientImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5135] Using default binding name when creating client interceptors to prevent NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1520291 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/0a7a0d023cffec2db34da7df4582c832dabbcdcd"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/90c163306e79d9f2d38c094ac6b8996fc7c62bcc",
        "bug_id": "cxf_269",
        "file": [
            {
                "additions": 3,
                "sha": "fb229afa58515c8e51321b056eff94816f2f3d68",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/bb42285dce2af51edf4f90985a50b6eed5a77015/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/soap/MAPCodec.java",
                "deletions": 2,
                "filename": "rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/soap/MAPCodec.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/soap/MAPCodec.java?ref=bb42285dce2af51edf4f90985a50b6eed5a77015",
                "patch": "@@ -826,8 +826,9 @@ private void restoreExchange(SoapMessage message, AddressingProperties maps) {\n                                           \"org.apache.cxf.ws.addressing.MAPAggregator.addressingDisabled\",\n                                           false)) {\n                     //see if it can directly be correlated with the out message:\n-                    AddressingProperties outp = ContextUtils.retrieveMAPs(message.getExchange().getOutMessage(),\n-                                                                          false, true, false);\n+                    Message outmsg = message.getExchange().getOutMessage();\n+                    AddressingProperties outp = outmsg != null \n+                        ? ContextUtils.retrieveMAPs(outmsg, false, true, false) : null;\n                     if (outp == null \n                         || !outp.getMessageID().getValue().equals(maps.getRelatesTo().getValue())) {\n                         LOG.log(Level.WARNING, \"CORRELATION_FAILURE_MSG\");",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/bb42285dce2af51edf4f90985a50b6eed5a77015/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/soap/MAPCodec.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5057] NPE at the decoupled endpoint when receving a response messge with unknown identifier\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1489942 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/bb42285dce2af51edf4f90985a50b6eed5a77015"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/865036b9e1576360b34798c5fc89e81af96fbfe6",
        "bug_id": "cxf_270",
        "file": [
            {
                "additions": 3,
                "sha": "fbd94d012a8e3383c1c2fe1b4d21087ef61db22d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8616653e43046fe7c09c0cf8eb5c169d64e7c59b/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java",
                "deletions": 1,
                "filename": "maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java?ref=8616653e43046fe7c09c0cf8eb5c169d64e7c59b",
                "patch": "@@ -118,7 +118,9 @@ public ClassLoaderSwitcher(Log log) {\n      */\n     public void restoreClassLoader() {\n         Thread.currentThread().setContextClassLoader(origContextClassloader);\n-        System.setProperty(\"java.class.path\", origClassPath);\n+        if (origClassPath != null) {\n+            System.setProperty(\"java.class.path\", origClassPath);\n+        }\n \n         Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n         for (Object o : newProps.keySet()) {",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/8616653e43046fe7c09c0cf8eb5c169d64e7c59b/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java"
            },
            {
                "additions": 3,
                "sha": "cad38940eeda811007ea35bd7a81c2ee2ce7d977",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8616653e43046fe7c09c0cf8eb5c169d64e7c59b/maven-plugins/corba/src/main/java/org/apache/cxf/maven_plugin/corba/maven/plugins/WSDLToIDLPlugin.java",
                "deletions": 1,
                "filename": "maven-plugins/corba/src/main/java/org/apache/cxf/maven_plugin/corba/maven/plugins/WSDLToIDLPlugin.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/corba/src/main/java/org/apache/cxf/maven_plugin/corba/maven/plugins/WSDLToIDLPlugin.java?ref=8616653e43046fe7c09c0cf8eb5c169d64e7c59b",
                "patch": "@@ -169,7 +169,9 @@ public void execute() throws MojoExecutionException {\n                 bus.shutdown(true);\n             }\n             Thread.currentThread().setContextClassLoader(origContext);\n-            System.setProperty(\"java.class.path\", cp);\n+            if (cp != null) {\n+                System.setProperty(\"java.class.path\", cp);\n+            }\n             \n             Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n             for (Object o : newProps.keySet()) {",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/8616653e43046fe7c09c0cf8eb5c169d64e7c59b/maven-plugins/corba/src/main/java/org/apache/cxf/maven_plugin/corba/maven/plugins/WSDLToIDLPlugin.java"
            },
            {
                "additions": 3,
                "sha": "a78a25bda2cba3ab50b189e1e0ff01261e5322eb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8616653e43046fe7c09c0cf8eb5c169d64e7c59b/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java",
                "deletions": 1,
                "filename": "maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java?ref=8616653e43046fe7c09c0cf8eb5c169d64e7c59b",
                "patch": "@@ -111,7 +111,9 @@ public String switchClassLoader(MavenProject project,\n      */\n     public void restoreClassLoader() {\n         Thread.currentThread().setContextClassLoader(origContextClassloader);\n-        System.setProperty(\"java.class.path\", origClassPath);\n+        if (origClassPath != null) {\n+            System.setProperty(\"java.class.path\", origClassPath);\n+        }\n \n         Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n         for (Object o : newProps.keySet()) {",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/8616653e43046fe7c09c0cf8eb5c169d64e7c59b/maven-plugins/java2ws-plugin/src/main/java/org/apache/cxf/maven_plugin/ClassLoaderSwitcher.java"
            },
            {
                "additions": 3,
                "sha": "122e2aa2ee0932748dabb9d6c282e4fcd060968e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8616653e43046fe7c09c0cf8eb5c169d64e7c59b/maven-plugins/wadl2java-plugin/src/main/java/org/apache/cxf/maven_plugin/common/ClassLoaderSwitcher.java",
                "deletions": 1,
                "filename": "maven-plugins/wadl2java-plugin/src/main/java/org/apache/cxf/maven_plugin/common/ClassLoaderSwitcher.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/wadl2java-plugin/src/main/java/org/apache/cxf/maven_plugin/common/ClassLoaderSwitcher.java?ref=8616653e43046fe7c09c0cf8eb5c169d64e7c59b",
                "patch": "@@ -120,7 +120,9 @@ public ClassLoaderSwitcher(Log log) {\n      */\n     public void restoreClassLoader() {\n         Thread.currentThread().setContextClassLoader(origContextClassloader);\n-        System.setProperty(\"java.class.path\", origClassPath);\n+        if (origClassPath != null) {\n+            System.setProperty(\"java.class.path\", origClassPath);\n+        }\n \n         Map<Object, Object> newProps = new HashMap<Object, Object>(System.getProperties());\n         for (Object o : newProps.keySet()) {",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/8616653e43046fe7c09c0cf8eb5c169d64e7c59b/maven-plugins/wadl2java-plugin/src/main/java/org/apache/cxf/maven_plugin/common/ClassLoaderSwitcher.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5020]add NPE guard when we restore original java.class.path system property\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1483151 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/8616653e43046fe7c09c0cf8eb5c169d64e7c59b"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/51ed8435f6d373f8cd510aea85e5ff6e13f488a2",
        "bug_id": "cxf_271",
        "file": [
            {
                "additions": 2,
                "sha": "832f8665f162ed20127c805bd78dd9128ed60219",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/942e3f021dc5b961bf56a76d481dd5b752c0644c/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/WSPolicyFeature.java",
                "deletions": 1,
                "filename": "rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/WSPolicyFeature.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/WSPolicyFeature.java?ref=942e3f021dc5b961bf56a76d481dd5b752c0644c",
                "patch": "@@ -220,7 +220,8 @@ public void setAlternativeSelector(AlternativeSelector as) {\n     Policy resolveReference(PolicyReference ref, PolicyBuilder builder, Bus bus, DescriptionInfo i) {\n         Policy p = null;\n         if (!ref.getURI().startsWith(\"#\")) {\n-            p = resolveExternal(ref, i.getBaseURI(), bus);\n+            String base = i == null ? null : i.getBaseURI();\n+            p = resolveExternal(ref, base, bus);\n         } else {\n             p = resolveLocal(ref, bus, i);\n         }",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/942e3f021dc5b961bf56a76d481dd5b752c0644c/rt/ws/policy/src/main/java/org/apache/cxf/ws/policy/WSPolicyFeature.java"
            }
        ],
        "repo": "cxf",
        "message": "Fix a potential NPE when using java-first clients and the WSPolicy feature within spring\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1480310 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/942e3f021dc5b961bf56a76d481dd5b752c0644c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/74a52d0fe68a7a84f44cdc4583ed8b1ef2036b42",
        "bug_id": "cxf_272",
        "file": [
            {
                "additions": 3,
                "sha": "151e61d934d1799cbefb6a0b57a683d5d9c14d99",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6e022e235449c0167f3700b6579d261586d87055/api/src/main/java/org/apache/cxf/staxutils/StaxUtils.java",
                "deletions": 0,
                "filename": "api/src/main/java/org/apache/cxf/staxutils/StaxUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/staxutils/StaxUtils.java?ref=6e022e235449c0167f3700b6579d261586d87055",
                "patch": "@@ -738,6 +738,9 @@ private static void writeStartElement(XMLStreamReader reader, XMLStreamWriter wr\n             if (nsPrefix == null) {\n                 nsPrefix = \"\";\n             }\n+            if (nsURI == null) {\n+                nsURI = \"\";\n+            }\n             if (nsPrefix.length() == 0) {\n                 writer.writeDefaultNamespace(nsURI);\n                 writer.setDefaultNamespace(nsURI);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/6e022e235449c0167f3700b6579d261586d87055/api/src/main/java/org/apache/cxf/staxutils/StaxUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5004] NPE at StaxUtils.copy for empty namespaces under JDK's XMLStreamReader\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1479735 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/6e022e235449c0167f3700b6579d261586d87055"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/4318942cb10e3454de5d084646a9ee199bad54e6",
        "bug_id": "cxf_273",
        "file": [
            {
                "additions": 2,
                "sha": "103b380c8409749484aad7587aeed49eb8d77c31",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/a49acbdff65435b2addc0e01fd13040c229516ee/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/DestinationSequence.java",
                "deletions": 2,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/DestinationSequence.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/DestinationSequence.java?ref=a49acbdff65435b2addc0e01fd13040c229516ee",
                "patch": "@@ -401,15 +401,15 @@ String getCorrelationID() {\n     void scheduleAcknowledgement(long acknowledgementInterval) {  \n         AcksPolicyType ap = destination.getManager().getDestinationPolicy().getAcksPolicy();\n  \n-        if (acknowledgementInterval > 0 && getMonitor().getMPM() >= ap.getIntraMessageThreshold()) {\n+        if (acknowledgementInterval > 0 && getMonitor().getMPM() >= (ap == null ? 10 : ap.getIntraMessageThreshold())) {\n             LOG.fine(\"Schedule deferred acknowledgment\");\n             scheduleDeferredAcknowledgement(acknowledgementInterval);\n         } else {\n             LOG.fine(\"Schedule immediate acknowledgment\");\n             scheduleImmediateAcknowledgement();\n             \n             destination.getManager().getTimer().schedule(\n-                new ImmediateFallbackAcknowledgment(), ap.getImmediaAcksTimeout());\n+                new ImmediateFallbackAcknowledgment(), ap == null ? 1000L : ap.getImmediaAcksTimeout());\n            \n         }\n     }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/a49acbdff65435b2addc0e01fd13040c229516ee/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/DestinationSequence.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4964] NPE is thrown when WS-RM's destination has no ackPolicy configured\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1468436 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/a49acbdff65435b2addc0e01fd13040c229516ee"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b89dddd7e351b2867a537ceda150e6f6d0728900",
        "bug_id": "cxf_274",
        "file": [
            {
                "additions": 1,
                "sha": "5d2d561538b2a30853af33855bd2593c8a0957e4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/46192d68f0d906cdbbd8f045417e20e7027f8349/rt/core/src/main/java/org/apache/cxf/service/factory/Messages.properties",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/service/factory/Messages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/service/factory/Messages.properties?ref=46192d68f0d906cdbbd8f045417e20e7027f8349",
                "patch": "@@ -34,5 +34,6 @@ JAXWS_ANNOTATION_FOUND=A JAX-WS Annotation was found on {0} while using the Simp\n XSD_VALIDATION_ERROR= Error in W3C XML Schema associated with service: {0}\n COULD_NOT_UNWRAP=Could not unwrap Operation {0} to match method \"{1}\"\n NO_WSDL_PROVIDED=WSDL is required for services created from class {0}, but no WSDL location specified. \n+NO_WSDL_NO_SERVICE_CLASS_PROVIDED=No valid WSDL {0} nor service class is specified.\n NO_FAULT_PART = Could not find a fault part for {0}. The fault message must have a single part.\n INVALID_BARE_METHOD= Method {0} is configured as BARE but there are more than one parameters with wrong @Webparam annotated or without @WebParam annotated.",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/46192d68f0d906cdbbd8f045417e20e7027f8349/rt/core/src/main/java/org/apache/cxf/service/factory/Messages.properties"
            },
            {
                "additions": 3,
                "sha": "53f68feef3b4fa000e843d3273c4329eb432f5d5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/46192d68f0d906cdbbd8f045417e20e7027f8349/rt/core/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "deletions": 1,
                "filename": "rt/core/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java?ref=46192d68f0d906cdbbd8f045417e20e7027f8349",
                "patch": "@@ -536,8 +536,10 @@ protected void initializeServiceModel() {\n \n         if (isFromWsdl()) {\n             buildServiceFromWSDL(wsdlurl);\n-        } else {\n+        } else if (getServiceClass() != null) {\n             buildServiceFromClass();\n+        } else {\n+            throw new ServiceConstructionException(new Message(\"NO_WSDL_NO_SERVICE_CLASS_PROVIDED\", LOG, wsdlurl));\n         }\n \n         if (isValidate()) {",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/46192d68f0d906cdbbd8f045417e20e7027f8349/rt/core/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java"
            },
            {
                "additions": 76,
                "sha": "39ed27adc2d23c30f8a360f4a0c107346aecb52e",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/46192d68f0d906cdbbd8f045417e20e7027f8349/rt/core/src/test/java/org/apache/cxf/service/factory/ReflectionServiceFactorBeanTest.java",
                "deletions": 0,
                "filename": "rt/core/src/test/java/org/apache/cxf/service/factory/ReflectionServiceFactorBeanTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/test/java/org/apache/cxf/service/factory/ReflectionServiceFactorBeanTest.java?ref=46192d68f0d906cdbbd8f045417e20e7027f8349",
                "patch": "@@ -0,0 +1,76 @@\n+/**\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements. See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership. The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License. You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied. See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.\r\n+ */\r\n+\r\n+package org.apache.cxf.service.factory;\r\n+\r\n+import javax.wsdl.WSDLException;\r\n+import javax.xml.namespace.QName;\r\n+\r\n+import org.apache.cxf.Bus;\r\n+import org.apache.cxf.wsdl.WSDLManager;\r\n+import org.easymock.EasyMock;\r\n+import org.easymock.IMocksControl;\r\n+\r\n+import org.junit.After;\r\n+import org.junit.Assert;\r\n+import org.junit.Before;\r\n+import org.junit.Test;\r\n+\r\n+/**\r\n+ * \r\n+ */\r\n+public class ReflectionServiceFactorBeanTest extends Assert {\r\n+    protected IMocksControl control;\r\n+    \r\n+    @Before\r\n+    public void setUp() throws Exception {\r\n+        control = EasyMock.createNiceControl();\r\n+    }\r\n+    \r\n+    @After \r\n+    public void tearDown() throws Exception {\r\n+        control.verify();\r\n+    }\r\n+    \r\n+    @Test\r\n+    public void testEmptyWsdlAndNoServiceClass() throws Exception {\r\n+        final String dummyWsdl = \"target/dummy.wsdl\";\r\n+        ReflectionServiceFactoryBean bean = new ReflectionServiceFactoryBean();\r\n+        Bus bus = control.createMock(Bus.class);\r\n+        \r\n+        WSDLManager wsdlmanager = control.createMock(WSDLManager.class);\r\n+        EasyMock.expect(bus.getExtension(WSDLManager.class)).andReturn(wsdlmanager);\r\n+        EasyMock.expect(wsdlmanager.getDefinition(dummyWsdl))\r\n+            .andThrow(new WSDLException(\"PARSER_ERROR\", \"Problem parsing '\" + dummyWsdl + \"'.\"));\r\n+        EasyMock.expect(bus.getExtension(FactoryBeanListenerManager.class)).andReturn(null);\r\n+        \r\n+        control.replay();\r\n+        \r\n+        bean.setWsdlURL(dummyWsdl);\r\n+        bean.setServiceName(new QName(\"http://cxf.apache.org/hello_world_soap_http\", \"GreeterService\"));\r\n+        bean.setBus(bus);\r\n+        \r\n+        try {\r\n+            bean.create();\r\n+            fail(\"no valid wsdl nor service class specified\");\r\n+        } catch (ServiceConstructionException e) {\r\n+            // ignore\r\n+        }\r\n+    }\r\n+}\r",
                "changes": 76,
                "blob_url": "https://github.com/apache/cxf/blob/46192d68f0d906cdbbd8f045417e20e7027f8349/rt/core/src/test/java/org/apache/cxf/service/factory/ReflectionServiceFactorBeanTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4922] NPE is thrown at EP creation when no service class specified and the provided wsdl not loaded\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1460691 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/46192d68f0d906cdbbd8f045417e20e7027f8349"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/f3f330de2234a63b30df2199fdabbf861f2050d2",
        "bug_id": "cxf_275",
        "file": [
            {
                "additions": 4,
                "sha": "7f5692346da1319a6fda411510b7e77265d5fe88",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/34bf4dc72aa8f2a74abf76ca561c3aae6a2b43ac/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ContainerRequestContextImpl.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ContainerRequestContextImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ContainerRequestContextImpl.java?ref=34bf4dc72aa8f2a74abf76ca561c3aae6a2b43ac",
                "patch": "@@ -92,7 +92,10 @@ public void setRequestUri(URI requestUri) throws IllegalStateException {\n                 setRequestUri(requestUri, URI.create(\"/\"));\n                 return;\n             } else {\n-                requestUriString = requestUriString.substring(baseUriString.length() + 1);\n+                requestUriString = requestUriString.substring(baseUriString.length());\n+                if (requestUriString.isEmpty()) {\n+                    requestUriString = \"/\";\n+                }\n                 requestUri = URI.create(requestUriString);\n             }\n                 ",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/34bf4dc72aa8f2a74abf76ca561c3aae6a2b43ac/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ContainerRequestContextImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4852] Minor fix to prevent NPE when new URI is the same as the base one\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1449747 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/34bf4dc72aa8f2a74abf76ca561c3aae6a2b43ac"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/023872e3024af7bf283031372fc0340d9560f51c",
        "bug_id": "cxf_276",
        "file": [
            {
                "additions": 3,
                "sha": "12b9e34e6cac3de3ee0b9ee854131c2fd9e435ad",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/bcde842311354df4d7fb4c4f18776854fa70c900/api/src/main/java/org/apache/cxf/transport/AbstractObservable.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/transport/AbstractObservable.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/transport/AbstractObservable.java?ref=bcde842311354df4d7fb4c4f18776854fa70c900",
                "patch": "@@ -40,8 +40,9 @@\n     public synchronized void setMessageObserver(MessageObserver observer) {\n         if (observer != incomingObserver) {\n             MessageObserver old = incomingObserver;\n-            incomingObserver = observer;\n+            // the observer switch must take place before activation or after deactivation\n             if (observer != null) {\n+                incomingObserver = observer;\n                 getLogger().fine(\"registering incoming observer: \" + observer);\n                 if (old == null) {\n                     try {\n@@ -56,6 +57,7 @@ public synchronized void setMessageObserver(MessageObserver observer) {\n                     getLogger().fine(\"unregistering incoming observer: \" + old);\n                     deactivate();\n                 }\n+                incomingObserver = observer;\n             }\n         }\n     }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/bcde842311354df4d7fb4c4f18776854fa70c900/api/src/main/java/org/apache/cxf/transport/AbstractObservable.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4838] Server-side EP may throw NPE when a request message arrives while the EP is being stopped ...\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1447862 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/bcde842311354df4d7fb4c4f18776854fa70c900"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/c738276bea35237efedc8b6c35dfaef0aa604ad3",
        "bug_id": "cxf_277",
        "file": [
            {
                "additions": 1,
                "sha": "fd69a5efb98c1f179e0a11358c2652fae8a03b26",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e67f2cfc12b55b06632b1e0e733a91a09a0a734d/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java",
                "deletions": 1,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java?ref=e67f2cfc12b55b06632b1e0e733a91a09a0a734d",
                "patch": "@@ -1693,7 +1693,7 @@ protected void makeTrustDecision() throws IOException {\n                 } catch (UntrustedURLConnectionIOException untrustedEx) {\n                     if (LOG.isLoggable(Level.FINE)) {\n                         LOG.log(Level.FINE, \"Trust Decider \"\n-                            + trustDecider.getLogicalName()\n+                            + trustDecider != null ? trustDecider.getLogicalName() : decider2.getLogicalName()\n                             + \" considers Conduit \"\n                             + conduitName \n                             + \" untrusted.\", untrustedEx);",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/e67f2cfc12b55b06632b1e0e733a91a09a0a734d/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4803]NPE is thrown while enabling fine log level in TrustDecisionUtil if MessageTrustDecider from message context is used\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1442016 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/e67f2cfc12b55b06632b1e0e733a91a09a0a734d"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/91eda5cf342c28fcd8cc5667600322edf200b015",
        "bug_id": "cxf_278",
        "file": [
            {
                "additions": 3,
                "sha": "f2fd3cfd2abe1ecbf8fe7b1f58408a3ceab59461",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/fedc95adf6f9a8656df5c8723a4e6c373558d9eb/rt/features/clustering/src/main/java/org/apache/cxf/clustering/FailoverTargetSelector.java",
                "deletions": 0,
                "filename": "rt/features/clustering/src/main/java/org/apache/cxf/clustering/FailoverTargetSelector.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/features/clustering/src/main/java/org/apache/cxf/clustering/FailoverTargetSelector.java?ref=fedc95adf6f9a8656df5c8723a4e6c373558d9eb",
                "patch": "@@ -74,6 +74,9 @@ public FailoverTargetSelector(Conduit c) {\n      * @param message the current Message\n      */\n     public void prepare(Message message) {\n+        if (message.getContent(List.class) == null) {\n+            return;\n+        }\n         Exchange exchange = message.getExchange();\n         InvocationKey key = new InvocationKey(exchange);\n         if (!inProgress.containsKey(key)) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/fedc95adf6f9a8656df5c8723a4e6c373558d9eb/rt/features/clustering/src/main/java/org/apache/cxf/clustering/FailoverTargetSelector.java"
            },
            {
                "additions": 4,
                "sha": "820b6064eebc9eb2c467d37bfad928048fc75665",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/fedc95adf6f9a8656df5c8723a4e6c373558d9eb/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/ClientConfiguration.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/ClientConfiguration.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/ClientConfiguration.java?ref=fedc95adf6f9a8656df5c8723a4e6c373558d9eb",
                "patch": "@@ -28,6 +28,7 @@\n import org.apache.cxf.common.util.ModCountCopyOnWriteArrayList;\n import org.apache.cxf.endpoint.ConduitSelector;\n import org.apache.cxf.endpoint.ConduitSelectorHolder;\n+import org.apache.cxf.endpoint.Endpoint;\n import org.apache.cxf.interceptor.Fault;\n import org.apache.cxf.interceptor.Interceptor;\n import org.apache.cxf.interceptor.InterceptorProvider;\n@@ -194,6 +195,9 @@ public Conduit getConduit() {\n         Exchange exchange = new ExchangeImpl();\n         message.setExchange(exchange);\n         exchange.put(MessageObserver.class, new ClientMessageObserver(this));\n+        if (conduitSelector != null) {\n+            exchange.put(Endpoint.class, conduitSelector.getEndpoint());\n+        }\n         exchange.put(Bus.class, bus);\n         prepareConduitSelector(message);\n         return getConduitSelector().selectConduit(message);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/fedc95adf6f9a8656df5c8723a4e6c373558d9eb/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/ClientConfiguration.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4796] Minor updates to protect against NPE when conduit is accessed on JAX-RS ClientConfiguration in the failover mode\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1441034 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/fedc95adf6f9a8656df5c8723a4e6c373558d9eb"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5f4f7d25cd0cfdb34193d99e4cee5a4f446aa3a9",
        "bug_id": "cxf_279",
        "file": [
            {
                "additions": 12,
                "sha": "663a925bb9e0c13ee6d913c85e0a091f11a464d4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c2c1a6ba6ff3610be0efeadbe70fb98109f32b73/api/src/main/java/org/apache/cxf/service/model/ServiceModelUtil.java",
                "deletions": 0,
                "filename": "api/src/main/java/org/apache/cxf/service/model/ServiceModelUtil.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/service/model/ServiceModelUtil.java?ref=c2c1a6ba6ff3610be0efeadbe70fb98109f32b73",
                "patch": "@@ -183,4 +183,16 @@ public static EndpointInfo findBestEndpointInfo(QName qn, List<ServiceInfo> serv\n \n         return best;\n     }\n+    \n+    public static QName getServiceQName(EndpointInfo ei) {\n+        InterfaceInfo ii = ei.getInterface();\n+        if (ii != null) {\n+            return ii.getName();\n+        } else if (ei.getService() != null) {\n+            return ei.getService().getName();\n+        } else {\n+            return ei.getName();\n+        }\n+        \n+    }\n }",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/c2c1a6ba6ff3610be0efeadbe70fb98109f32b73/api/src/main/java/org/apache/cxf/service/model/ServiceModelUtil.java"
            },
            {
                "additions": 5,
                "sha": "5017e7d03e7c7a3435aa099363196e5c1af88546",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c2c1a6ba6ff3610be0efeadbe70fb98109f32b73/services/ws-discovery/ws-discovery-api/src/main/java/org/apache/cxf/ws/discovery/internal/WSDiscoveryServiceImpl.java",
                "deletions": 1,
                "filename": "services/ws-discovery/ws-discovery-api/src/main/java/org/apache/cxf/ws/discovery/internal/WSDiscoveryServiceImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/ws-discovery/ws-discovery-api/src/main/java/org/apache/cxf/ws/discovery/internal/WSDiscoveryServiceImpl.java?ref=c2c1a6ba6ff3610be0efeadbe70fb98109f32b73",
                "patch": "@@ -55,6 +55,7 @@\n import org.apache.cxf.common.jaxb.JAXBContextCache;\n import org.apache.cxf.common.util.StringUtils;\n import org.apache.cxf.endpoint.Server;\n+import org.apache.cxf.service.model.ServiceModelUtil;\n import org.apache.cxf.staxutils.StaxUtils;\n import org.apache.cxf.staxutils.transform.InTransformReader;\n import org.apache.cxf.ws.discovery.WSDiscoveryClient;\n@@ -123,7 +124,10 @@ public void serverStarted(Server server) {\n         HelloType ht = new HelloType();\n         ht.setScopes(new ScopesType());\n         ht.setMetadataVersion(1);\n-        ht.getTypes().add(server.getEndpoint().getEndpointInfo().getInterface().getName());\n+        \n+        QName sn = ServiceModelUtil.getServiceQName(server.getEndpoint().getEndpointInfo());\n+        ht.getTypes().add(sn);\n+        \n         Object o = server.getEndpoint().get(\"ws-discovery-scopes\");\n         if (o != null) {\n             setScopes(ht, o);",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/c2c1a6ba6ff3610be0efeadbe70fb98109f32b73/services/ws-discovery/ws-discovery-api/src/main/java/org/apache/cxf/ws/discovery/internal/WSDiscoveryServiceImpl.java"
            },
            {
                "additions": 9,
                "sha": "c018e880b3c46005ed8b3bbed890ca739390f19a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c2c1a6ba6ff3610be0efeadbe70fb98109f32b73/services/ws-discovery/ws-discovery-api/src/main/java/org/apache/cxf/ws/discovery/listeners/WSDiscoveryServerListener.java",
                "deletions": 16,
                "filename": "services/ws-discovery/ws-discovery-api/src/main/java/org/apache/cxf/ws/discovery/listeners/WSDiscoveryServerListener.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/ws-discovery/ws-discovery-api/src/main/java/org/apache/cxf/ws/discovery/listeners/WSDiscoveryServerListener.java?ref=c2c1a6ba6ff3610be0efeadbe70fb98109f32b73",
                "patch": "@@ -25,14 +25,16 @@\n import org.apache.cxf.BusFactory;\n import org.apache.cxf.endpoint.Server;\n import org.apache.cxf.endpoint.ServerLifeCycleListener;\n-import org.apache.cxf.service.model.EndpointInfo;\n-import org.apache.cxf.service.model.InterfaceInfo;\n+import org.apache.cxf.service.model.ServiceModelUtil;\n import org.apache.cxf.ws.discovery.internal.WSDiscoveryServiceImpl;\n \n /**\n  * \n  */\n public class WSDiscoveryServerListener implements ServerLifeCycleListener {\n+    private static final String WS_DISCOVERY_SERVICE_NS = \n+        \"http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01\";\n+    \n     final Bus bus;\n     volatile WSDiscoveryServiceImpl service;\n \n@@ -65,31 +67,22 @@ private static WSDiscoveryServiceImpl getStaticService() {\n     }\n \n     public void startServer(Server server) {\n-        QName sn = getServiceQName(server);\n-        if (\"http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01\".equals(sn.getNamespaceURI())) {\n+        if (isWsDiscoveryServer(server)) {\n             return;\n         }\n         getService().serverStarted(server);\n     }\n \n     public void stopServer(Server server) {\n-        QName sn = getServiceQName(server);\n-        if (\"http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01\".equals(sn.getNamespaceURI())) {\n+        if (isWsDiscoveryServer(server)) {\n             return;\n         }\n         getService().serverStopped(server);\n     }\n     \n-    private QName getServiceQName(Server server) {\n-        EndpointInfo ei = server.getEndpoint().getEndpointInfo();\n-        InterfaceInfo ii = ei.getInterface();\n-        if (ii != null) {\n-            return ii.getName();\n-        } else if (ei.getService() != null) {\n-            return ei.getService().getName();\n-        } else {\n-            return ei.getName();\n-        }\n+    private boolean isWsDiscoveryServer(Server server) {\n+        QName sn = ServiceModelUtil.getServiceQName(server.getEndpoint().getEndpointInfo());\n+        return WS_DISCOVERY_SERVICE_NS.equals(sn.getNamespaceURI());\n     }\n     \n }",
                "changes": 25,
                "blob_url": "https://github.com/apache/cxf/blob/c2c1a6ba6ff3610be0efeadbe70fb98109f32b73/services/ws-discovery/ws-discovery-api/src/main/java/org/apache/cxf/ws/discovery/listeners/WSDiscoveryServerListener.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4767] Fixing one more NPE when JAX-RS endpoints register with WS-Discovery service\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1440922 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c2c1a6ba6ff3610be0efeadbe70fb98109f32b73"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e74b62fa7554f68ecf46eb1f578500fedcc65e41",
        "bug_id": "cxf_280",
        "file": [
            {
                "additions": 3,
                "sha": "7b1e7e97fa90c69fa1f2aa1248baf2dfba15cd3e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/21843f1697a1a7aed6da589c3e86c05adfd37a96/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMInInterceptor.java",
                "deletions": 0,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMInInterceptor.java?ref=21843f1697a1a7aed6da589c3e86c05adfd37a96",
                "patch": "@@ -47,6 +47,9 @@ public RMInInterceptor() {\n     @Override\n     public void handleFault(Message message) {\n         message.put(MAPAggregator.class.getName(), true);\n+        if (null == RMContextUtils.getProtocolVariation(message)) {\n+            return;\n+        }\n         if (MessageUtils.isTrue(message.get(RMMessageConstants.DELIVERING_ROBUST_ONEWAY))) {\n             // revert the delivering entry from the destination sequence\n             try {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/21843f1697a1a7aed6da589c3e86c05adfd37a96/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMInInterceptor.java"
            },
            {
                "additions": 82,
                "sha": "b5fcfdbcac40d344f1a213c23d6a59191017b06c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/21843f1697a1a7aed6da589c3e86c05adfd37a96/rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/RMInInterceptorTest.java",
                "deletions": 0,
                "filename": "rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/RMInInterceptorTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/RMInInterceptorTest.java?ref=21843f1697a1a7aed6da589c3e86c05adfd37a96",
                "patch": "@@ -282,7 +282,89 @@ public void testProcessDeliveryAssurance() {\n         control.replay(); \n         // TODO\n     }\n+\n+    @Test\n+    public void testProcessInvalidMessage() throws SequenceFault, RMException {\n+        interceptor = new RMInInterceptor();\n+        \n+        Message message = control.createMock(Message.class);\n+        Exchange exchange = control.createMock(Exchange.class);\n+        org.apache.cxf.transport.Destination destination = \n+            control.createMock(org.apache.cxf.transport.Destination.class);\n+        EasyMock.expect(message.getExchange()).andReturn(exchange).anyTimes();\n+        EasyMock.expect(exchange.getDestination()).andReturn(destination).anyTimes();\n+        EasyMock.expect(exchange.getOutMessage()).andReturn(null).anyTimes();\n+        EasyMock.expect(exchange.getOutFaultMessage()).andReturn(null).anyTimes();\n+        control.replay();\n+\n+        try {\n+            interceptor.handle(message);\n+            fail(\"must reject the invalid rm message\");\n+        } catch (Exception e) {\n+            assertTrue(e instanceof RMException);\n+            // verify a partial error text match to exclude an unexpected exception\n+            // (see WSA_REQUIRED_EXC in Messages.properties)\n+            final String text = \"WS-Addressing is required\";\n+            assertTrue(e.getMessage() != null \n+                && e.getMessage().indexOf(text) >= 0);\n+        }\n+        \n+        control.reset();\n+        EasyMock.expect(message.getExchange()).andReturn(exchange).anyTimes();\n+        AddressingPropertiesImpl maps = control.createMock(AddressingPropertiesImpl.class);\n+        EasyMock.expect(maps.getNamespaceURI()).andReturn(Names200408.WSA_NAMESPACE_NAME).anyTimes();\n+        EasyMock.expect(message.get(JAXWSAConstants.SERVER_ADDRESSING_PROPERTIES_INBOUND)).andReturn(maps);\n+        AttributedURIType actionURI = control.createMock(AttributedURIType.class);\n+        EasyMock.expect(maps.getAction()).andReturn(actionURI).times(2);\n+        EasyMock.expect(actionURI.getValue()).andReturn(\"foo\");\n+        EasyMock.expect(message.get(RMMessageConstants.RM_PROPERTIES_INBOUND)).andReturn(rmps);\n+        EasyMock.expect(exchange.getDestination()).andReturn(destination).anyTimes();\n+        EasyMock.expect(exchange.getOutMessage()).andReturn(null).anyTimes();\n+        EasyMock.expect(exchange.getOutFaultMessage()).andReturn(null).anyTimes();\n+\n+        control.replay();\n+        \n+        try {\n+            interceptor.handle(message);\n+            fail(\"must reject the invalid rm message\");\n+        } catch (Exception e) {\n+            System.out.println(e);\n+            assertTrue(e instanceof RMException);\n+            // verify a partial error text match to exclude an unexpected exception\n+            // (see WSRM_REQUIRED_EXC in Messages.properties)\n+            final String text = \"WS-ReliableMessaging is required\";\n+            assertTrue(e.getMessage() != null \n+                && e.getMessage().indexOf(text) >= 0);\n+        }\n+    }\n     \n+    @Test\n+    public void testProcessInvalidMessageOnFault() throws SequenceFault, RMException {\n+        interceptor = new RMInInterceptor();\n+        \n+        Message message = control.createMock(Message.class);\n+        Exchange exchange = control.createMock(Exchange.class);\n+        EasyMock.expect(message.getExchange()).andReturn(exchange).anyTimes();\n+        control.replay();\n+        \n+        try {\n+            interceptor.handleFault(message);\n+        } catch (Exception e) {\n+            fail(\"unexpected exception thrown from handleFault: \" + e);\n+        }\n+        \n+        control.reset();\n+        EasyMock.expect(message.getExchange()).andReturn(exchange).anyTimes();\n+        EasyMock.expect(message.get(RMMessageConstants.DELIVERING_ROBUST_ONEWAY)).andReturn(true).anyTimes();\n+        control.replay();\n+        \n+        try {\n+            interceptor.handleFault(message);\n+        } catch (Exception e) {\n+            fail(\"unexpected exception thrown from handleFault: \" + e);\n+        }\n+    }\n+\n     private Message setupInboundMessage(String action, boolean serverSide) throws RMException {\n         Message message = control.createMock(Message.class);\n         Exchange exchange = control.createMock(Exchange.class);",
                "changes": 82,
                "blob_url": "https://github.com/apache/cxf/blob/21843f1697a1a7aed6da589c3e86c05adfd37a96/rt/ws/rm/src/test/java/org/apache/cxf/ws/rm/RMInInterceptorTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4601] invlaid WS-RM messages to a robust WS-RM endpoint may lead to NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1402084 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/21843f1697a1a7aed6da589c3e86c05adfd37a96"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0c0ee62dc445ca2f18be30359259ea7352283c28",
        "bug_id": "cxf_281",
        "file": [
            {
                "additions": 10,
                "sha": "b15b8b2d5027ab9be5e912cdd26908c39d168ce9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/96730bc47ff9a19bcfe68cbfbe7001d285363251/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java",
                "deletions": 6,
                "filename": "maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java?ref=96730bc47ff9a19bcfe68cbfbe7001d285363251",
                "patch": "@@ -71,12 +71,16 @@ public void addError(final String file, int line, int column, String message, Th\n                 errorfiles.add(f);\n             }\n             if (f == null) {\n-                f = new File(file) {\n-                    private static final long serialVersionUID = 1L;\n-                    public String getAbsolutePath() {\n-                        return file;\n-                    }\n-                };\n+                if (file == null) {\n+                    f = new File(\"null\");\n+                } else {\n+                    f = new File(file) {\n+                        private static final long serialVersionUID = 1L;\n+                        public String getAbsolutePath() {\n+                            return file;\n+                        }\n+                    };\n+                }\n             }\n             buildContext.addMessage(f, line, column, message, BuildContext.SEVERITY_ERROR, t);\n         }",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/96730bc47ff9a19bcfe68cbfbe7001d285363251/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid a NPE in the mojo to make sure the \"real\" error surfaces\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1401418 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/96730bc47ff9a19bcfe68cbfbe7001d285363251"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0c3cd6dd384f90d656083f7a073c4b122bfa0603",
        "bug_id": "cxf_282",
        "file": [
            {
                "additions": 2,
                "sha": "ffd3fe441b1465d04bfcf9ab7eb4e76700514ac3",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c2dc00089f4cfbd74ed69403b34ca88232368127/api/src/main/java/org/apache/cxf/helpers/DOMUtils.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/helpers/DOMUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/helpers/DOMUtils.java?ref=c2dc00089f4cfbd74ed69403b34ca88232368127",
                "patch": "@@ -653,7 +653,8 @@ public static String getNamespace(Node node, String searchPrefix) {\n     private static void findAllElementsByTagNameNS(Element el, String nameSpaceURI, String localName,\n                                                    List<Element> elementList) {\n \n-        if (localName.equals(el.getLocalName()) && nameSpaceURI.contains(el.getNamespaceURI())) {\n+        if (el.getNamespaceURI() != null && localName.equals(el.getLocalName())\n+            && nameSpaceURI.contains(el.getNamespaceURI())) {\n             elementList.add(el);\n         }\n         Element elem = getFirstElement(el);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/c2dc00089f4cfbd74ed69403b34ca88232368127/api/src/main/java/org/apache/cxf/helpers/DOMUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4408]:Fix NPE in DOMUtils when soap header contains null namespace element\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1358045 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c2dc00089f4cfbd74ed69403b34ca88232368127"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/64d6a8a70a04eab2dc480502857a00b7785c95c9",
        "bug_id": "cxf_283",
        "file": [
            {
                "additions": 6,
                "sha": "449cbce3f05c89d557dd124f7d9fe4dabb40e12a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e855e8f139fdff2fb397e45ee0df9a7e70378a59/api/src/main/java/org/apache/cxf/message/Message.java",
                "deletions": 0,
                "filename": "api/src/main/java/org/apache/cxf/message/Message.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/message/Message.java?ref=e855e8f139fdff2fb397e45ee0df9a7e70378a59",
                "patch": "@@ -69,6 +69,12 @@\n     String PARTIAL_RESPONSE_MESSAGE = \"org.apache.cxf.partial.response\";\n     String EMPTY_PARTIAL_RESPONSE_MESSAGE = \"org.apache.cxf.partial.response.empty\";\n     String ONE_WAY_REQUEST = \"OnewayRequest\";\n+\n+    /**\n+     * Boolean property specifying if oneWay response must be processed.\n+     */\n+    String PROCESS_ONEWAY_REPONSE = \"org.apache.cxf.transport.processOneWayResponse\";\n+    \n     \n     String ROBUST_ONEWAY = \"org.apache.cxf.oneway.robust\";\n     ",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/e855e8f139fdff2fb397e45ee0df9a7e70378a59/api/src/main/java/org/apache/cxf/message/Message.java"
            },
            {
                "additions": 13,
                "sha": "4fce16c1f3e9672d51ddd317c622430f7cfff5d2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e855e8f139fdff2fb397e45ee0df9a7e70378a59/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java",
                "deletions": 2,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java?ref=e855e8f139fdff2fb397e45ee0df9a7e70378a59",
                "patch": "@@ -18,7 +18,6 @@\n  */\n package org.apache.cxf.transport.http;\n \n-\n import java.beans.PropertyChangeEvent;\n import java.beans.PropertyChangeListener;\n import java.io.ByteArrayInputStream;\n@@ -1564,6 +1563,15 @@ private boolean isOneway(Exchange exchange) {\n             return exchange != null && exchange.isOneWay();\n         }\n         \n+        private boolean doProcessResponse(Message message) {\n+            // 1. Not oneWay\n+            if (!isOneway(message.getExchange())) {\n+                return true;\n+            }\n+            // 2. Context property\n+            return MessageUtils.getContextualBoolean(message, Message.PROCESS_ONEWAY_REPONSE, false);\n+        }\n+\n         protected void handleResponseInternal() throws IOException {\n             Exchange exchange = outMessage.getExchange();\n             int responseCode = connection.getResponseCode();\n@@ -1590,7 +1598,7 @@ protected void handleResponseInternal() throws IOException {\n             if (isOneway(exchange) \n                 || HttpURLConnection.HTTP_ACCEPTED == responseCode) {\n                 in = ChunkedUtil.getPartialResponse(connection, responseCode);\n-                if (in == null) {\n+                if ((in == null) || (!doProcessResponse(outMessage))) {\n                     // oneway operation or decoupled MEP without \n                     // partial response\n                     connection.getInputStream().close();\n@@ -1603,6 +1611,9 @@ protected void handleResponseInternal() throws IOException {\n                             cc.handleResponse(null, null);\n                         }\n                     }\n+                    if (in != null) {\n+                        in.close();\n+                    }\n                     return;\n                 }\n             } else {",
                "changes": 15,
                "blob_url": "https://github.com/apache/cxf/blob/e855e8f139fdff2fb397e45ee0df9a7e70378a59/rt/transports/http/src/main/java/org/apache/cxf/transport/http/HTTPConduit.java"
            },
            {
                "additions": 45,
                "sha": "46c1e9095f49b10ab1383cc3991232afc9c42915",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e855e8f139fdff2fb397e45ee0df9a7e70378a59/rt/transports/http/src/test/java/org/apache/cxf/transport/http/HTTPConduitURLEasyMockTest.java",
                "deletions": 27,
                "filename": "rt/transports/http/src/test/java/org/apache/cxf/transport/http/HTTPConduitURLEasyMockTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/test/java/org/apache/cxf/transport/http/HTTPConduitURLEasyMockTest.java?ref=e855e8f139fdff2fb397e45ee0df9a7e70378a59",
                "patch": "@@ -48,7 +48,6 @@\n import org.apache.cxf.ws.addressing.EndpointReferenceType;\n import org.easymock.EasyMock;\n import org.easymock.IMocksControl;\n-\n import org.junit.After;\n import org.junit.AfterClass;\n import org.junit.Assert;\n@@ -61,7 +60,7 @@\n public class HTTPConduitURLEasyMockTest extends Assert {\n     private static String oldHttpProxyHost;\n \n-    private enum ResponseStyle { NONE, BACK_CHANNEL, BACK_CHANNEL_ERROR, DECOUPLED };\n+    private enum ResponseStyle { NONE, BACK_CHANNEL, BACK_CHANNEL_ERROR, DECOUPLED, ONEWAY_NONE };\n     private enum ResponseDelimiter { LENGTH, CHUNKED, EOF };\n \n     private static final String NOWHERE = \"http://nada.nothing.nowhere.null/\";\n@@ -212,12 +211,13 @@ public void testSendHttpGetConnection() throws Exception {\n     }\n \n     @Test\n-    public void testSendOnewayChunkedEmptyPartialResponse() \n+    public void testSendOnewayChunkedEmptyPartialResponseProcessResponse() \n         throws Exception {\n         control = EasyMock.createNiceControl();\n         HTTPConduit conduit = setUpConduit(true, false);\n         Message message = new MessageImpl();\n         conduit.prepare(message);\n+        message.put(Message.PROCESS_ONEWAY_REPONSE, Boolean.TRUE);\n         verifySentMessage(conduit, \n                           message, \n                           ResponseStyle.NONE,\n@@ -226,7 +226,23 @@ public void testSendOnewayChunkedEmptyPartialResponse()\n                           \"POST\");\n         finalVerify();\n     }\n-    \n+\n+    @Test\n+    public void testSendOnewayDoNotProcessResponse() \n+        throws Exception {\n+        control = EasyMock.createNiceControl();\n+        HTTPConduit conduit = setUpConduit(true, false);\n+        Message message = new MessageImpl();\n+        conduit.prepare(message);\n+        verifySentMessage(conduit, \n+                          message, \n+                          ResponseStyle.ONEWAY_NONE,\n+                          ResponseDelimiter.CHUNKED,\n+                          true,  // empty response\n+                          \"POST\");\n+        finalVerify();\n+    }\n+\n     @Test\n     public void testSendTwowayDecoupledEmptyPartialResponse() \n         throws Exception {\n@@ -266,9 +282,9 @@ private void setUpOneway(Message message) {\n         Exchange exchange = control.createMock(Exchange.class);\n         message.setExchange(exchange);\n         exchange.isOneWay();\n-        EasyMock.expectLastCall().andReturn(true);\n+        EasyMock.expectLastCall().andReturn(true).anyTimes();\n         exchange.isSynchronous();\n-        EasyMock.expectLastCall().andReturn(true);\n+        EasyMock.expectLastCall().andReturn(true).anyTimes();\n         exchange.isEmpty();\n         EasyMock.expectLastCall().andReturn(true).anyTimes();\n     }\n@@ -425,33 +441,35 @@ private void verifySentMessage(HTTPConduit conduit,\n             EasyMock.expectLastCall();\n         }\n         \n-        if (style == ResponseStyle.NONE) {\n+        if ((style == ResponseStyle.NONE) || (style == ResponseStyle.ONEWAY_NONE)) {\n             setUpOneway(message);\n         }\n         \n         connection.getRequestMethod();\n         EasyMock.expectLastCall().andReturn(method).anyTimes();\n-        verifyHandleResponse(style, delimiter, conduit);\n+        verifyHandleResponse(style, delimiter, emptyResponse, conduit);\n \n         control.replay();\n         \n         wrappedOS.flush();\n         wrappedOS.flush();\n         wrappedOS.close();\n \n-        assertNotNull(\"expected in message\", inMessage);\n-        Map<?, ?> headerMap = (Map<?, ?>) inMessage.get(Message.PROTOCOL_HEADERS);\n-        assertEquals(\"unexpected response headers\", headerMap.size(), 0);\n-        Integer expectedResponseCode = getResponseCode(style);\n-        assertEquals(\"unexpected response code\",\n-                     expectedResponseCode,\n-                     inMessage.get(Message.RESPONSE_CODE));\n-        if (!emptyResponse) {\n-            assertTrue(\"unexpected content formats\",\n-                       inMessage.getContentFormats().contains(InputStream.class));\n-            InputStream content = inMessage.getContent(InputStream.class);\n-            if (!(content instanceof PushbackInputStream)) {\n-                assertSame(\"unexpected content\", is, content);            \n+        if (style != ResponseStyle.ONEWAY_NONE) {\n+            assertNotNull(\"expected in message\", inMessage);\n+            Map<?, ?> headerMap = (Map<?, ?>) inMessage.get(Message.PROTOCOL_HEADERS);\n+            assertEquals(\"unexpected response headers\", headerMap.size(), 0);\n+            Integer expectedResponseCode = getResponseCode(style);\n+            assertEquals(\"unexpected response code\",\n+                         expectedResponseCode,\n+                         inMessage.get(Message.RESPONSE_CODE));\n+            if (!emptyResponse) {\n+                assertTrue(\"unexpected content formats\",\n+                           inMessage.getContentFormats().contains(InputStream.class));\n+                InputStream content = inMessage.getContent(InputStream.class);\n+                if (!(content instanceof PushbackInputStream)) {\n+                    assertSame(\"unexpected content\", is, content);            \n+                }\n             }\n         }\n         \n@@ -505,11 +523,6 @@ private OutputStream verifyRequestHeaders(Message message, boolean expectHeaders\n         return wrappedOS;\n     }\n     \n-    private void verifyHandleResponse(ResponseStyle style, ResponseDelimiter delimiter, HTTPConduit conduit) \n-        throws IOException {\n-        verifyHandleResponse(style, delimiter, false, conduit);\n-    }\n-    \n     private void verifyHandleResponse(ResponseStyle style, \n                                       ResponseDelimiter delimiter,\n                                       boolean emptyResponse,\n@@ -560,7 +573,12 @@ private void verifyHandleResponse(ResponseStyle style,\n         case BACK_CHANNEL_ERROR:\n             connection.getErrorStream();\n             EasyMock.expectLastCall().andReturn(null);\n-            break;    \n+            break; \n+            \n+        case ONEWAY_NONE:\n+            is.close();\n+            EasyMock.expectLastCall();\n+            break;\n             \n         default:\n             break;",
                "changes": 72,
                "blob_url": "https://github.com/apache/cxf/blob/e855e8f139fdff2fb397e45ee0df9a7e70378a59/rt/transports/http/src/test/java/org/apache/cxf/transport/http/HTTPConduitURLEasyMockTest.java"
            },
            {
                "additions": 5,
                "sha": "e765ad839b4f9a72d7f2c74d45dda6f1f6cf77c8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e855e8f139fdff2fb397e45ee0df9a7e70378a59/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMOutInterceptor.java",
                "deletions": 0,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMOutInterceptor.java?ref=e855e8f139fdff2fb397e45ee0df9a7e70378a59",
                "patch": "@@ -117,6 +117,11 @@ protected void handle(Message msg) throws SequenceFault, RMException {\n             RMContextUtils.storeRMProperties(msg, rmpsOut, true);\n         }\n         \n+        // Activate process response for oneWay\n+        if (msg.getExchange().isOneWay()) {\n+            msg.getExchange().put(Message.PROCESS_ONEWAY_REPONSE, true);\n+        }\n+        \n         RMProperties rmpsIn = null;\n         Identifier inSeqId = null;\n         long inMessageNumber = 0;",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/e855e8f139fdff2fb397e45ee0df9a7e70378a59/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/RMOutInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4248] DocLiteralInInterceptor throws NPE if oneWay operation sends non-empty response\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1342527 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/e855e8f139fdff2fb397e45ee0df9a7e70378a59"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/04f6724eebc696199fb526648820158d20438b81",
        "bug_id": "cxf_284",
        "file": [
            {
                "additions": 8,
                "sha": "1d4afb55383a37e2a664d7c4465ddf076a39b2b9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4acc750921dd0fb50bc2e629aa6280550a97ef5c/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/AbstractBindingPolicyValidator.java",
                "deletions": 6,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/AbstractBindingPolicyValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/AbstractBindingPolicyValidator.java?ref=4acc750921dd0fb50bc2e629aa6280550a97ef5c",
                "patch": "@@ -114,12 +114,14 @@ protected boolean validateEntireHeaderAndBodySignatures(\n                     CastUtils.cast((List<?>)signedResult.get(WSSecurityEngineResult.TAG_DATA_REF_URIS));\n             for (WSDataRef dataRef : dataRefs) {\n                 String xpath = dataRef.getXpath();\n-                String[] nodes = xpath.split(\"/\");\n-                // envelope/Body || envelope/Header/header || envelope/Header/wsse:Security/header\n-                if (nodes.length == 5 && nodes[3].contains(\"Security\")) {\n-                    continue;\n-                } else if (nodes.length < 3 || nodes.length > 4) {\n-                    return false;\n+                if (xpath != null) {\n+                    String[] nodes = xpath.split(\"/\");\n+                    // envelope/Body || envelope/Header/header || envelope/Header/wsse:Security/header\n+                    if (nodes.length == 5 && nodes[3].contains(\"Security\")) {\n+                        continue;\n+                    } else if (nodes.length < 3 || nodes.length > 4) {\n+                        return false;\n+                    }\n                 }\n             }\n         }",
                "changes": 14,
                "blob_url": "https://github.com/apache/cxf/blob/4acc750921dd0fb50bc2e629aa6280550a97ef5c/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyvalidators/AbstractBindingPolicyValidator.java"
            }
        ],
        "repo": "cxf",
        "message": "Avoid NPE when checking OnlySignEntireHeadersAndBody Element when a STR Transform is used in the Signature\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1328314 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/4acc750921dd0fb50bc2e629aa6280550a97ef5c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a7d1cadf7ab3e87e0e25e799bb546ce3a79ddfce",
        "bug_id": "cxf_285",
        "file": [
            {
                "additions": 5,
                "sha": "b874d79eba9b6a01b385d5ca4df2d2a6814b5858",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9c52875306e5c844955df424895374614191effa/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/DefaultSubjectProvider.java",
                "deletions": 0,
                "filename": "services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/DefaultSubjectProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/DefaultSubjectProvider.java?ref=9c52875306e5c844955df424895374614191effa",
                "patch": "@@ -110,6 +110,11 @@ public SubjectBean getSubject(\n             principal = providerParameters.getPrincipal();\n         }\n         \n+        if (principal == null) {\n+            LOG.fine(\"Error in getting principal\");\n+            throw new STSException(\"Error in getting principal\", STSException.REQUEST_FAILED);\n+        }\n+        \n         SubjectBean subjectBean = \n             new SubjectBean(principal.getName(), subjectNameQualifier, confirmationMethod);\n         LOG.fine(\"Creating new subject with principal name: \" + principal.getName());",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/9c52875306e5c844955df424895374614191effa/services/sts/sts-core/src/main/java/org/apache/cxf/sts/token/provider/DefaultSubjectProvider.java"
            },
            {
                "additions": 6,
                "sha": "4b6ed6e61583e7316fe372edd4b90a0d038bf69d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9c52875306e5c844955df424895374614191effa/services/sts/sts-war/pom.xml",
                "deletions": 2,
                "filename": "services/sts/sts-war/pom.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-war/pom.xml?ref=9c52875306e5c844955df424895374614191effa",
                "patch": "@@ -1,5 +1,5 @@\n <!--\n-  Licensed to the Apache Software Foundation (ASF) under one\n+  Licensed to the Apache Soft Foundation (ASF) under one\n   or more contributor license agreements. See the NOTICE file\n   distributed with this work for additional information\n   regarding copyright ownership. The ASF licenses this file\n@@ -10,7 +10,7 @@\n   http://www.apache.org/licenses/LICENSE-2.0\n  \n   Unless required by applicable law or agreed to in writing,\n-  software distributed under the License is distributed on an\n+  softwwareare distributed under the License is distributed on an\n   \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n   KIND, either express or implied. See the License for the\n   specific language governing permissions and limitations\n@@ -72,6 +72,10 @@\n            <artifactId>hazelcast</artifactId>\n            <version>${cxf.hazelcast.version}</version>\n         </dependency> \n+        <dependency>\n+           <groupId>org.springframework</groupId>\n+           <artifactId>spring-web</artifactId>\n+        </dependency> \n \n     </dependencies>\n ",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/9c52875306e5c844955df424895374614191effa/services/sts/sts-war/pom.xml"
            },
            {
                "additions": 1,
                "sha": "a478e97a380d2cb7883bf55d4497adadc921fc30",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9c52875306e5c844955df424895374614191effa/services/sts/sts-war/src/main/webapp/WEB-INF/cxf-transport.xml",
                "deletions": 0,
                "filename": "services/sts/sts-war/src/main/webapp/WEB-INF/cxf-transport.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/sts-war/src/main/webapp/WEB-INF/cxf-transport.xml?ref=9c52875306e5c844955df424895374614191effa",
                "patch": "@@ -47,6 +47,7 @@\n \n \t<bean id=\"transportIssueDelegate\" class=\"org.apache.cxf.sts.operation.TokenIssueOperation\">\n \t\t<property name=\"tokenProviders\" ref=\"transportTokenProviders\" />\n+\t\t<property name=\"tokenValidators\" ref=\"transportTokenValidators\" />\n \t\t<property name=\"services\" ref=\"transportService\" />\n \t\t<property name=\"stsProperties\" ref=\"transportSTSProperties\" />\n \t</bean>",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/9c52875306e5c844955df424895374614191effa/services/sts/sts-war/src/main/webapp/WEB-INF/cxf-transport.xml"
            },
            {
                "additions": 24,
                "sha": "b83229a3fc37e06c5bfc24deb7571fe96cd6e39a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9c52875306e5c844955df424895374614191effa/services/sts/systests/basic/src/test/java/org/apache/cxf/systest/sts/username_onbehalfof/UsernameOnBehalfOfTest.java",
                "deletions": 4,
                "filename": "services/sts/systests/basic/src/test/java/org/apache/cxf/systest/sts/username_onbehalfof/UsernameOnBehalfOfTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/services/sts/systests/basic/src/test/java/org/apache/cxf/systest/sts/username_onbehalfof/UsernameOnBehalfOfTest.java?ref=9c52875306e5c844955df424895374614191effa",
                "patch": "@@ -84,6 +84,10 @@ public static void cleanup() {\n \n     @org.junit.Test\n     public void testUsernameOnBehalfOf() throws Exception {\n+        // Only run these tests for the standalone scenario.\n+        if (!standalone) {\n+            return;\n+        }\n \n         SpringBusFactory bf = new SpringBusFactory();\n         URL busFile = UsernameOnBehalfOfTest.class.getResource(\"cxf-client.xml\");\n@@ -131,7 +135,11 @@ public void testUsernameOnBehalfOf() throws Exception {\n      */\n     @org.junit.Test\n     public void testUsernameOnBehalfOfCaching() throws Exception {\n-\n+        // Only run these tests for the standalone scenario.\n+        if (!standalone) {\n+            return;\n+        }\n+        \n         SpringBusFactory bf = new SpringBusFactory();\n         URL busFile = UsernameOnBehalfOfTest.class.getResource(\"cxf-client.xml\");\n \n@@ -220,7 +228,11 @@ public void testUsernameOnBehalfOfCaching() throws Exception {\n      */\n     @org.junit.Test\n     public void testDifferentUsersCaching() throws Exception {\n-\n+        // Only run these tests for the standalone scenario.\n+        if (!standalone) {\n+            return;\n+        }\n+        \n         SpringBusFactory bf = new SpringBusFactory();\n         URL busFile = UsernameOnBehalfOfTest.class.getResource(\"cxf-client.xml\");\n \n@@ -310,7 +322,11 @@ public void testDifferentUsersCaching() throws Exception {\n      */\n     @org.junit.Test\n     public void testAppliesToCaching() throws Exception {\n-\n+        // Only run these tests for the standalone scenario.\n+        if (!standalone) {\n+            return;\n+        }\n+        \n         SpringBusFactory bf = new SpringBusFactory();\n         URL busFile = UsernameOnBehalfOfTest.class.getResource(\"cxf-client.xml\");\n \n@@ -401,7 +417,11 @@ public void testAppliesToCaching() throws Exception {\n      */\n     @org.junit.Test\n     public void testNoAppliesToCaching() throws Exception {\n-\n+        // Only run these tests for the standalone scenario.\n+        if (!standalone) {\n+            return;\n+        }\n+        \n         SpringBusFactory bf = new SpringBusFactory();\n         URL busFile = UsernameOnBehalfOfTest.class.getResource(\"cxf-client.xml\");\n ",
                "changes": 28,
                "blob_url": "https://github.com/apache/cxf/blob/9c52875306e5c844955df424895374614191effa/services/sts/systests/basic/src/test/java/org/apache/cxf/systest/sts/username_onbehalfof/UsernameOnBehalfOfTest.java"
            }
        ],
        "repo": "cxf",
        "message": "Fixed sts-war systests + added a NPE guard in the sts-core\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1325714 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/9c52875306e5c844955df424895374614191effa"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/032eb30e14361e9f3d09b31f81d562f6a725ff6d",
        "bug_id": "cxf_286",
        "file": [
            {
                "additions": 5,
                "sha": "a66676ed1bf8d77c7d3ff8421ba5c96497041d7b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8aa31d93dbbf15550bc4582f2d73b01f5be9b6e9/rt/databinding/jibx/src/main/java/org/apache/cxf/jibx/tools/JibxToolingDataBinding.java",
                "deletions": 2,
                "filename": "rt/databinding/jibx/src/main/java/org/apache/cxf/jibx/tools/JibxToolingDataBinding.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jibx/src/main/java/org/apache/cxf/jibx/tools/JibxToolingDataBinding.java?ref=8aa31d93dbbf15550bc4582f2d73b01f5be9b6e9",
                "patch": "@@ -166,12 +166,15 @@ public void generate(ToolContext context) throws ToolException {\n                 codegen.compile();\n             }\n \n-            BindingUtils.getDefinitions(codegen.getRootBinding(), types, elements, null);\n+            Map<QName, Object> formats = new HashMap<QName, Object>();\n+            BindingUtils.getDefinitions(codegen.getRootBinding(), types, elements, formats);\n             \n             Iterator<?> it = codegen.getBindingOrganizer().iterateBindings();\n             while (it.hasNext()) {\n                 BindingHolder o = (BindingHolder)it.next();\n-                getDefinitions(o, types, elements);\n+                if (o != null) {\n+                    getDefinitions(o, types, elements);\n+                }\n             }\n \n         } catch (Exception e) {",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/8aa31d93dbbf15550bc4582f2d73b01f5be9b6e9/rt/databinding/jibx/src/main/java/org/apache/cxf/jibx/tools/JibxToolingDataBinding.java"
            }
        ],
        "repo": "cxf",
        "message": "Add some NPE guards in Jibx tooling\nFix an issue reported on the list.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1230800 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/8aa31d93dbbf15550bc4582f2d73b01f5be9b6e9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/16e66827d5ab2445459e2a62cf2b5bdbe0f09af0",
        "bug_id": "cxf_287",
        "file": [
            {
                "additions": 2,
                "sha": "7779531daa4743cd51b6567842078bf148c13876",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/57019cdfceffb176c9bd005eff0b50cdb358c5d6/rt/javascript/src/main/java/org/apache/cxf/javascript/service/ServiceJavascriptBuilder.java",
                "deletions": 1,
                "filename": "rt/javascript/src/main/java/org/apache/cxf/javascript/service/ServiceJavascriptBuilder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/javascript/src/main/java/org/apache/cxf/javascript/service/ServiceJavascriptBuilder.java?ref=57019cdfceffb176c9bd005eff0b50cdb358c5d6",
                "patch": "@@ -740,7 +740,8 @@ private void getElementsForParts(MessageInfo message, List<ParticleInfo> element\n                         if (element.getSchemaTypeName() != null) {\n                             element.setSchemaType(xmlSchemaCollection\n                                                   .getTypeByQName(element.getSchemaTypeName()));\n-                        } else if (element.getRef().getTargetQName() != null) {\n+                        } else if (element.getRef().getTargetQName() != null\n+                            && element.getRef().getTarget().getSchemaTypeName() != null) {\n                             element = element.getRef().getTarget();\n                             element.setSchemaType(xmlSchemaCollection\n                                                   .getTypeByQName(element.getSchemaTypeName()));",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/57019cdfceffb176c9bd005eff0b50cdb358c5d6/rt/javascript/src/main/java/org/apache/cxf/javascript/service/ServiceJavascriptBuilder.java"
            },
            {
                "additions": 20,
                "sha": "15af8697b08bc2c9b71af21ded29247143728876",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/57019cdfceffb176c9bd005eff0b50cdb358c5d6/tools/wsdlto/frontend/javascript/src/test/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptTest.java",
                "deletions": 1,
                "filename": "tools/wsdlto/frontend/javascript/src/test/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/javascript/src/test/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptTest.java?ref=57019cdfceffb176c9bd005eff0b50cdb358c5d6",
                "patch": "@@ -53,6 +53,25 @@ public void testGeneration() throws Exception {\n         String javascript = IOUtils.readStringFromStream(fis);\n         assertTrue(javascript.contains(\"xmlns:murble='http://apache.org/hello_world_soap_http'\"));\n     }\n-    \n+   \n+    @Test\n+    public void testCXF3891() throws Exception {\n+        JavaScriptContainer container = new JavaScriptContainer(null);\n+\n+        ToolContext context = new ToolContext();\n+        context.put(ToolConstants.CFG_WSDLURL, getLocation(\"hello_world_ref.wsdl\"));\n+        context.put(ToolConstants.CFG_OUTPUTDIR, output.toString()); \n+        String[] prefixes = new String[1];\n+        prefixes[0] = \"http://apache.org/hello_world_soap_http=murble\";\n+        context.put(ToolConstants.CFG_JSPACKAGEPREFIX, prefixes);\n+        container.setContext(context); \n+        container.execute();\n+        // now we really want to check some results.\n+        File resultFile = new File(output, \"SOAPService.js\");\n+        assertTrue(resultFile.canRead());\n+        FileInputStream fis = new FileInputStream(resultFile);\n+        String javascript = IOUtils.readStringFromStream(fis);\n+        assertTrue(javascript.contains(\"xmlns:murble='http://apache.org/hello_world_soap_http'\"));\n+    }\n    \n }",
                "changes": 21,
                "blob_url": "https://github.com/apache/cxf/blob/57019cdfceffb176c9bd005eff0b50cdb358c5d6/tools/wsdlto/frontend/javascript/src/test/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptTest.java"
            },
            {
                "additions": 80,
                "sha": "77f039c3a54f61d2b370e0042e5de8fbe5e95559",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/57019cdfceffb176c9bd005eff0b50cdb358c5d6/tools/wsdlto/frontend/javascript/src/test/resources/org/apache/cxf/tools/wsdlto/javascript/hello_world_ref.wsdl",
                "deletions": 0,
                "filename": "tools/wsdlto/frontend/javascript/src/test/resources/org/apache/cxf/tools/wsdlto/javascript/hello_world_ref.wsdl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/javascript/src/test/resources/org/apache/cxf/tools/wsdlto/javascript/hello_world_ref.wsdl?ref=57019cdfceffb176c9bd005eff0b50cdb358c5d6",
                "patch": "@@ -0,0 +1,80 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements. See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership. The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License. You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied. See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<wsdl:definitions xmlns=\"http://schemas.xmlsoap.org/wsdl/\"\n+      xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\"\n+      xmlns:tns=\"http://apache.org/hello_world_soap_http\"\n+      xmlns:x1=\"http://apache.org/hello_world_soap_http/types\"\n+      xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"\n+      xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n+      targetNamespace=\"http://apache.org/hello_world_soap_http\" name=\"HelloWorld\">\n+    <wsdl:types>\n+        <schema targetNamespace=\"http://apache.org/hello_world_soap_http/types\" xmlns=\"http://www.w3.org/2001/XMLSchema\" xmlns:x1=\"http://apache.org/hello_world_soap_http/types\" elementFormDefault=\"qualified\">\n+            <element name=\"sayHi\">\n+                <complexType/>\n+            </element>\n+            <element name=\"sayHiResponse\">\n+                <complexType>\n+                    <sequence>\n+                        <element ref=\"x1:responseType\"/>\n+                    </sequence>\n+                </complexType>\n+            </element>\n+            <element name=\"responseType\">\n+                <complexType>\n+                    <sequence>\n+                        <element name=\"message\" type=\"string\"/>\n+                    </sequence>\n+                </complexType>\n+            </element>\n+        </schema>\n+    </wsdl:types>\n+    <wsdl:message name=\"sayHiRequest\">\n+        <wsdl:part name=\"in\" element=\"x1:sayHi\"/>\n+    </wsdl:message>\n+    <wsdl:message name=\"sayHiResponse\">\n+        <wsdl:part name=\"out\" element=\"x1:sayHiResponse\"/>\n+    </wsdl:message>\n+    <wsdl:portType name=\"Greeter\">\n+        <wsdl:operation name=\"sayHi\">\n+            <wsdl:input name=\"sayHiRequest\" message=\"tns:sayHiRequest\"/>\n+            <wsdl:output name=\"sayHiResponse\" message=\"tns:sayHiResponse\"/>\n+        </wsdl:operation>\n+    </wsdl:portType>\n+\n+    <wsdl:binding name=\"Greeter_SOAPBinding\" type=\"tns:Greeter\">\n+        <soap:binding style=\"document\" transport=\"http://schemas.xmlsoap.org/soap/http\"/>\n+        <wsdl:operation name=\"sayHi\">\n+            <soap:operation style=\"document\"/>\n+            <wsdl:input>\n+                <soap:body use=\"literal\"/>\n+            </wsdl:input>\n+            <wsdl:output>\n+                <soap:body use=\"literal\"/>\n+            </wsdl:output>\n+        </wsdl:operation>\n+    </wsdl:binding>\n+\n+    <wsdl:service name=\"SOAPService\">\n+        <wsdl:port name=\"SoapPort\" binding=\"tns:Greeter_SOAPBinding\">\n+            <soap:address location=\"http://localhost:9000/SoapContext/SoapPort\"/>\n+        </wsdl:port>\n+    </wsdl:service>\n+</wsdl:definitions>\n+",
                "changes": 80,
                "blob_url": "https://github.com/apache/cxf/blob/57019cdfceffb176c9bd005eff0b50cdb358c5d6/tools/wsdlto/frontend/javascript/src/test/resources/org/apache/cxf/tools/wsdlto/javascript/hello_world_ref.wsdl"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3891] wsdl2js NPE's with element references to an element with an\nanonymous type\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1210614 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/57019cdfceffb176c9bd005eff0b50cdb358c5d6"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3f59221581d1cc6db6580d9724235f26b5e67239",
        "bug_id": "cxf_288",
        "file": [
            {
                "additions": 13,
                "sha": "13cfeab4169efc3a66ccd6a0ccc2f0ea144ec5d1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/42623eb2e1bf11585c25dc98252f6542948464d0/rt/core/src/main/java/org/apache/cxf/bus/osgi/OSGiExtensionLocator.java",
                "deletions": 10,
                "filename": "rt/core/src/main/java/org/apache/cxf/bus/osgi/OSGiExtensionLocator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/bus/osgi/OSGiExtensionLocator.java?ref=42623eb2e1bf11585c25dc98252f6542948464d0",
                "patch": "@@ -142,7 +142,6 @@ protected void unregister(final long bundleId) {\n         public static final String CONTEXT_NAME_PROPERTY = \"cxf.bus.id\";\n         \n         Bus bus;\n-        BundleContext context;\n         ServiceRegistration service;\n  \n         public OSGIBusListener(Bus b) {\n@@ -156,19 +155,23 @@ private Version getBundleVersion(Bundle bundle) {\n         }\n  \n         public void initComplete() {\n-            context = bus.getExtension(BundleContext.class);\n-            Properties props = new Properties();\n-            props.put(CONTEXT_SYMBOLIC_NAME_PROPERTY, context.getBundle().getSymbolicName());\n-            props.put(CONTEXT_VERSION_PROPERTY, getBundleVersion(context.getBundle()));\n-            props.put(CONTEXT_NAME_PROPERTY, bus.getId());\n-\n-            service = context.registerService(Bus.class.getName(), bus, props);\n+            BundleContext context = bus.getExtension(BundleContext.class);\n+            if (context != null) {\n+                Properties props = new Properties();\n+                props.put(CONTEXT_SYMBOLIC_NAME_PROPERTY, context.getBundle().getSymbolicName());\n+                props.put(CONTEXT_VERSION_PROPERTY, getBundleVersion(context.getBundle()));\n+                props.put(CONTEXT_NAME_PROPERTY, bus.getId());\n+    \n+                service = context.registerService(Bus.class.getName(), bus, props);\n+            }\n         }\n         public void preShutdown() {\n         }\n         public void postShutdown() {\n-            service.unregister();\n-            service = null;\n+            if (service != null) {\n+                service.unregister();\n+                service = null;\n+            }\n         }\n     }\n     ",
                "changes": 23,
                "blob_url": "https://github.com/apache/cxf/blob/42623eb2e1bf11585c25dc98252f6542948464d0/rt/core/src/main/java/org/apache/cxf/bus/osgi/OSGiExtensionLocator.java"
            }
        ],
        "repo": "cxf",
        "message": "When running in OSGi, you could create a non-osgi associated bus.\nDon't NPE in that case.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1166226 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/42623eb2e1bf11585c25dc98252f6542948464d0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3f3785001bd5d672ef926773d7464df4ee53e359",
        "bug_id": "cxf_289",
        "file": [
            {
                "additions": 6,
                "sha": "769293e1cb5077dfa510a106ecea51caec015d40",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/7b78b8b49f5ee85231b9a966689f2fff9531782c/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java",
                "deletions": 4,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java?ref=7b78b8b49f5ee85231b9a966689f2fff9531782c",
                "patch": "@@ -544,10 +544,12 @@ private void buildWSAActions(OperationInfo operation, Method method) {\n                                                        inputAction);\n             operation.getInput().addExtensionAttribute(JAXWSAConstants.WSAW_ACTION_QNAME,\n                                                        inputAction);\n-            operation.getOutput().addExtensionAttribute(JAXWSAConstants.WSAM_ACTION_QNAME,\n-                                                       computeAction(operation, \"Response\"));\n-            operation.getOutput().addExtensionAttribute(JAXWSAConstants.WSAW_ACTION_QNAME,\n-                                                        computeAction(operation, \"Response\"));\n+            if (operation.getOutput() != null) {\n+                operation.getOutput().addExtensionAttribute(JAXWSAConstants.WSAM_ACTION_QNAME,\n+                                                            computeAction(operation, \"Response\"));\n+                operation.getOutput().addExtensionAttribute(JAXWSAConstants.WSAW_ACTION_QNAME,\n+                                                            computeAction(operation, \"Response\"));\n+            }\n \n         } else {\n             MessageInfo input = operation.getInput();",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/7b78b8b49f5ee85231b9a966689f2fff9531782c/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3560] Add NPE guard when WS-A is used with one-ways\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1132857 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/7b78b8b49f5ee85231b9a966689f2fff9531782c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3ce1441e61233845b8fef403536bd6df323ad876",
        "bug_id": "cxf_290",
        "file": [
            {
                "additions": 23,
                "sha": "483f8479d1e53dcf1124f32889e7efd967beb1b8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2c81965cfe31529b2364326facca5703a423199d/rt/core/src/main/java/org/apache/cxf/attachment/LazyDataSource.java",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/attachment/LazyDataSource.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/attachment/LazyDataSource.java?ref=2c81965cfe31529b2364326facca5703a423199d",
                "patch": "@@ -22,7 +22,9 @@\n import java.io.IOException;\n import java.io.InputStream;\n import java.io.OutputStream;\n+import java.util.ArrayList;\n import java.util.Collection;\n+import java.util.List;\n \n import javax.activation.DataSource;\n \n@@ -53,6 +55,27 @@ private synchronized void load() {\n                 }\n             }\n         }\n+        if (dataSource == null) {\n+            //couldn't find it, build up error message\n+            List<String> ids = new ArrayList<String>(10);\n+            for (Attachment a : attachments) {\n+                ids.add(a.getId());\n+                if (a.getId().equals(id)) {\n+                    this.dataSource = a.getDataHandler().getDataSource();\n+                    if (dataSource != null) {\n+                        ids = null;\n+                        break;\n+                    } else {\n+                        throw new IllegalStateException(\"Could not get DataSource for \"\n+                                                        + \"attachment of id \" + id);\n+                    }\n+                }\n+            }\n+            if (ids != null) {\n+                throw new IllegalStateException(\"No attachment for \"\n+                                                + \" id \" + id + \" found in \" + ids);\n+            }\n+        }\n     }\n     \n     public String getContentType() {",
                "changes": 23,
                "blob_url": "https://github.com/apache/cxf/blob/2c81965cfe31529b2364326facca5703a423199d/rt/core/src/main/java/org/apache/cxf/attachment/LazyDataSource.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3477] Stick a better error message in (rather than an NPE) if an\nattachment couldn't be found.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1129987 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/2c81965cfe31529b2364326facca5703a423199d"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/3694146adde1a15ceecc3aa3dc465b5d11c6eccc",
        "bug_id": "cxf_291",
        "file": [
            {
                "additions": 7,
                "sha": "6835eb9bc58af7608e204e2eb310a3e5c54eccd7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2e1f619f65e6981c7ad3bf957078e9f1967d49c7/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java",
                "deletions": 5,
                "filename": "rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java?ref=2e1f619f65e6981c7ad3bf957078e9f1967d49c7",
                "patch": "@@ -360,7 +360,7 @@ public static boolean hasEmptyAction(AddressingProperties maps) {\n      * @param inMAPs the inbound MAPs\n      * @param inMessage the current message\n      */\n-    public static void rebaseResponse(final EndpointReferenceType reference,\n+    public static void rebaseResponse(EndpointReferenceType reference,\n                                       AddressingProperties inMAPs,\n                                       final Message inMessage) {\n         \n@@ -382,12 +382,13 @@ public static void rebaseResponse(final EndpointReferenceType reference,\n             }\n             \n             try {\n+                if (reference == null) {\n+                    reference = ContextUtils.getNoneEndpointReference();\n+                }\n                 exchange.setOutMessage(partialResponse);\n                 Conduit backChannel = target.getBackChannel(inMessage,\n                                                             partialResponse,\n-                                                            reference == null\n-                                                            ? ContextUtils.getNoneEndpointReference()\n-                                                            : reference);\n+                                                            reference);\n \n                 if (backChannel != null) {\n                     // set up interceptor chains and send message\n@@ -419,7 +420,8 @@ public static void rebaseResponse(final EndpointReferenceType reference,\n                     exchange.setOutMessage(fullResponse);\n                     \n                     Destination destination = createDecoupledDestination(\n-                        exchange, reference);\n+                        exchange, \n+                        reference);\n                     exchange.setDestination(destination);\n                          \n                     ",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/2e1f619f65e6981c7ad3bf957078e9f1967d49c7/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/ContextUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3349] Fix possible NPE in WS-RM scenarios\nPatch suggestion from Aki Yoshida applied\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1072196 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/2e1f619f65e6981c7ad3bf957078e9f1967d49c7"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/194c101e4a5a37036f36daa96387e7069f7c912b",
        "bug_id": "cxf_292",
        "file": [
            {
                "additions": 3,
                "sha": "4e290f69f5788583aea6e22add540daa55640121",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/ConstVisitor.java",
                "deletions": 1,
                "filename": "tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/ConstVisitor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/ConstVisitor.java?ref=e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9",
                "patch": "@@ -93,7 +93,9 @@ public void visit(AST constNode) {\n         } else if (ScopedNameVisitor.accept(getScope(), definition, schema, constTypeNode, wsdlVisitor)) {\n             visitor = new ScopedNameVisitor(getScope(), definition, schema, wsdlVisitor);            \n         }\n-        \n+        if (visitor == null) {\n+            throw new RuntimeException(\"can't resolve type for const \" + constNameNode.getText());\n+        }\n         visitor.visit(constTypeNode);                \n         XmlSchemaType constSchemaType = visitor.getSchemaType();\n         CorbaTypeImpl constCorbaType = visitor.getCorbaType();        ",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/ConstVisitor.java"
            },
            {
                "additions": 17,
                "sha": "f5d7e2b6800c4e801d123a0c27caf01f2c7999f3",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9/tools/corba/src/test/java/org/apache/cxf/tools/corba/IDLToWSDLTest.java",
                "deletions": 0,
                "filename": "tools/corba/src/test/java/org/apache/cxf/tools/corba/IDLToWSDLTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/corba/src/test/java/org/apache/cxf/tools/corba/IDLToWSDLTest.java?ref=e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9",
                "patch": "@@ -378,4 +378,21 @@ public void testDuplicateTypeGeneration() throws Exception {\n         doTestGeneratedWsdl(expected, actual);\n     }\n \n+    public void testUndefinedTypeRef() throws Exception {\n+        File input = new File(getClass().getResource(\"/idl/ReferUndefinedType.idl\").toURI());\n+        File include1Dir = new File(getClass().getResource(\"/idl\").toURI());\n+               \n+        String[] args = new String[] {\"-ow\", \"ExternalInterfaceRef.wsdl\",\n+                                      \"-o\", output.toString(),\n+                                      \"-I\", include1Dir.toString(),\n+                                      \"-verbose\",\n+                                      input.toString()\n+        };\n+        try {\n+            IDLToWSDL.run(args);\n+            fail(\"should throw a RuntimeException\");\n+        } catch (Exception e) {\n+            assertTrue(e.getMessage().indexOf(\"can't resolve type for const myConst\") >= 0);\n+        }\n+    }\n }",
                "changes": 17,
                "blob_url": "https://github.com/apache/cxf/blob/e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9/tools/corba/src/test/java/org/apache/cxf/tools/corba/IDLToWSDLTest.java"
            },
            {
                "additions": 30,
                "sha": "c7898198e2c37deb9aa3de6c5f9b1562e0c8810c",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9/tools/corba/src/test/resources/idl/ReferUndefinedType.idl",
                "deletions": 0,
                "filename": "tools/corba/src/test/resources/idl/ReferUndefinedType.idl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/corba/src/test/resources/idl/ReferUndefinedType.idl?ref=e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9",
                "patch": "@@ -0,0 +1,30 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+#ifndef EXTERNAL_INTTERFACE_REF_IDL\n+#define EXTERNAL_INTTERFACE_REF_IDL\n+\n+#include \"PragmaPrefix.idl\"\n+\n+module ReferUndefinedType {\n+\n+  \n+  const Test2::NoThisType myConst = 1;\n+};\n+#endif",
                "changes": 30,
                "blob_url": "https://github.com/apache/cxf/blob/e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9/tools/corba/src/test/resources/idl/ReferUndefinedType.idl"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3303]idl2wsdl fails with NPE if a type cannot be resolved\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1070799 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/e4ddb0a149edfbf95cbf427d4d1ba63d8a4ab6b9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7db203192dc4ae77fbc1f7feca40ed0a45e47946",
        "bug_id": "cxf_293",
        "file": [
            {
                "additions": 2,
                "sha": "57cd519b64ae56c5f1fb22226c5b9a5ad433c9d1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/84f47cf7fb535dc2eb1258e68fc1068c2f0b5178/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java",
                "deletions": 2,
                "filename": "rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java?ref=84f47cf7fb535dc2eb1258e68fc1068c2f0b5178",
                "patch": "@@ -754,8 +754,8 @@ private static boolean isWrappableSequence(XmlSchemaComplexType type, String nam\n                     MessagePartInfo mpi = wrapper.addMessagePart(new QName(namespaceURI, el.getName()));\n                     mpi.setTypeQName(el.getSchemaTypeName());\n                     mpi.setElement(true);\n-                    mpi.setConcreteName(el.getWireName());\n                     mpi.setElementQName(el.getWireName());\n+                    mpi.setConcreteName(el.getWireName());\n                     mpi.setXmlSchema(el);\n                 } else if (el.getRef().getTargetQName() != null) {\n                     MessagePartInfo mpi = wrapper.addMessagePart(el.getRef().getTargetQName());\n@@ -771,8 +771,8 @@ private static boolean isWrappableSequence(XmlSchemaComplexType type, String nam\n                 } else {\n                     // anonymous type\n                     MessagePartInfo mpi = wrapper.addMessagePart(new QName(namespaceURI, el.getName()));\n-                    mpi.setConcreteName(el.getWireName());\n                     mpi.setElementQName(mpi.getName());\n+                    mpi.setConcreteName(el.getWireName());\n                     mpi.setElement(true);\n                     mpi.setXmlSchema(el);\n                 }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/84f47cf7fb535dc2eb1258e68fc1068c2f0b5178/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java"
            },
            {
                "additions": 7,
                "sha": "0a520bad07009746519b50ed54fdb71b7b080ca7",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/84f47cf7fb535dc2eb1258e68fc1068c2f0b5178/systests/ws-specs/src/test/resources/wsdl_systest_wsspec/DoubleIt.wsdl",
                "deletions": 1,
                "filename": "systests/ws-specs/src/test/resources/wsdl_systest_wsspec/DoubleIt.wsdl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/ws-specs/src/test/resources/wsdl_systest_wsspec/DoubleIt.wsdl?ref=84f47cf7fb535dc2eb1258e68fc1068c2f0b5178",
                "patch": "@@ -25,7 +25,13 @@\n \t\t\t<xsd:element name=\"DoubleIt\">\n \t\t\t\t<xsd:complexType>\n \t\t\t\t\t<xsd:sequence>\n-\t\t\t\t\t\t<xsd:element name=\"numberToDouble\" type=\"xsd:integer\" />\n+\t\t\t\t\t\t<xsd:element name=\"numberToDouble\">\n+                            <xsd:simpleType>\n+\t\t\t\t\t\t\t\t<xsd:restriction base=\"xsd:integer\">\n+\t\t\t\t\t\t\t\t\t<xsd:minInclusive value=\"0\"/>\n+\t\t\t\t\t\t\t\t</xsd:restriction>\n+\t\t\t\t\t\t\t</xsd:simpleType>\n+                        </xsd:element>\n \t\t\t\t\t</xsd:sequence>\n \t\t\t\t</xsd:complexType>\n \t\t\t</xsd:element>",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/84f47cf7fb535dc2eb1258e68fc1068c2f0b5178/systests/ws-specs/src/test/resources/wsdl_systest_wsspec/DoubleIt.wsdl"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3197] Fix NPE in wsdl2java when unwrapping elements that have\nanonymous types.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1050156 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/84f47cf7fb535dc2eb1258e68fc1068c2f0b5178"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/c4215e1c7c3dc35005e913e5c6a994c48019fc3e",
        "bug_id": "cxf_294",
        "file": [
            {
                "additions": 4,
                "sha": "40acfaefa4c938338f60089bbe2b1777c4572047",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/79b4284ca030d868f1594d66cb747aca13fc5ffd/rt/core/src/main/java/org/apache/cxf/interceptor/URIMappingInterceptor.java",
                "deletions": 5,
                "filename": "rt/core/src/main/java/org/apache/cxf/interceptor/URIMappingInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/interceptor/URIMappingInterceptor.java?ref=79b4284ca030d868f1594d66cb747aca13fc5ffd",
                "patch": "@@ -337,13 +337,12 @@ private String uriDecode(String query) {\n         return queries;\n     }\n     \n-    private String getBasePath(Message message) {\n-        return (String)message.get(Message.BASE_PATH);        \n-    }\n-    \n     private String getRest(Message message) {\n         String path = (String)message.get(Message.PATH_INFO);\n-        String basePath = getBasePath(message);        \n+        String basePath = (String)message.get(Message.BASE_PATH);\n+        if (basePath == null) {\n+            basePath = \"/\";\n+        }\n         return StringUtils.diff(path, basePath);        \n     }\n     ",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/79b4284ca030d868f1594d66cb747aca13fc5ffd/rt/core/src/main/java/org/apache/cxf/interceptor/URIMappingInterceptor.java"
            },
            {
                "additions": 3,
                "sha": "b4137d4918058c380d3f7316e92310da10d87d57",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/79b4284ca030d868f1594d66cb747aca13fc5ffd/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "deletions": 0,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java?ref=79b4284ca030d868f1594d66cb747aca13fc5ffd",
                "patch": "@@ -93,6 +93,9 @@ protected synchronized void updateDests(HttpServletRequest request) {\n                 && d2.getAddress() != null\n                 && d2.getAddress().getAddress() != null) {\n                 ad = d2.getAddress().getAddress().getValue();\n+                if (ad == null) {\n+                    ad = \"/\";\n+                }\n             }\n             if (ad != null \n                 && (ad.equals(path)",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/79b4284ca030d868f1594d66cb747aca13fc5ffd/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java"
            },
            {
                "additions": 3,
                "sha": "b9cd64de2ad23b50b99aeafecb7923e87ee696a6",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/79b4284ca030d868f1594d66cb747aca13fc5ffd/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletDestination.java",
                "deletions": 0,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletDestination.java?ref=79b4284ca030d868f1594d66cb747aca13fc5ffd",
                "patch": "@@ -100,6 +100,9 @@ public void invoke(final ServletConfig config,\n     protected String getBasePath(String contextPath) throws IOException {\n         \n         String address = getAddress().getAddress().getValue();\n+        if (address == null) {\n+            return contextPath;\n+        }\n         if (address.startsWith(\"http\")) {\n             return URI.create(address).getPath();\n         }",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/79b4284ca030d868f1594d66cb747aca13fc5ffd/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletDestination.java"
            },
            {
                "additions": 12,
                "sha": "7e3b6e4fbcfe26df8b4ed6d55a597b492582c656",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/79b4284ca030d868f1594d66cb747aca13fc5ffd/systests/transports/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletClientTest.java",
                "deletions": 3,
                "filename": "systests/transports/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletClientTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/transports/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletClientTest.java?ref=79b4284ca030d868f1594d66cb747aca13fc5ffd",
                "patch": "@@ -20,6 +20,9 @@\n \n import java.lang.reflect.UndeclaredThrowableException;\n import java.net.URL;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n import javax.xml.namespace.QName;\n \n import com.meterware.httpunit.WebConversation;\n@@ -75,10 +78,16 @@ public void testHelloService() throws Exception {\n     @Test\n     public void testGetServiceList() throws Exception {\n         WebConversation client = new WebConversation();\n-        WebResponse res = client.getResponse(serviceURL);\n+        WebResponse res = client.getResponse(serviceURL + \"/services\");\n         WebLink[] links = res.getLinks();\n-        assertEquals(\"There should get two links for the service\", 2, links.length);\n-        assertEquals(serviceURL + \"Greeter?wsdl\", links[0].getURLString());\n+        Set<String> s = new HashSet<String>();\n+        for (WebLink l : links) {\n+            s.add(l.getURLString());\n+        }\n+        assertEquals(\"There should be 3 links for the service\", 3, links.length);\n+        assertTrue(s.contains(serviceURL + \"Greeter?wsdl\"));\n+        assertTrue(s.contains(serviceURL + \"Hello?wsdl\"));\n+        assertTrue(s.contains(serviceURL + \"?wsdl\"));\n         assertEquals(\"text/html\", res.getContentType());\n     }\n }",
                "changes": 15,
                "blob_url": "https://github.com/apache/cxf/blob/79b4284ca030d868f1594d66cb747aca13fc5ffd/systests/transports/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletClientTest.java"
            },
            {
                "additions": 3,
                "sha": "ad7bb5ef65d9071087b9b20e0cf020edd3f155b2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/79b4284ca030d868f1594d66cb747aca13fc5ffd/systests/transports/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletServer.java",
                "deletions": 0,
                "filename": "systests/transports/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletServer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/transports/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletServer.java?ref=79b4284ca030d868f1594d66cb747aca13fc5ffd",
                "patch": "@@ -22,6 +22,7 @@\n \n import org.apache.cxf.Bus;\n import org.apache.cxf.BusFactory;\n+import org.apache.cxf.jaxws.EndpointImpl;\n import org.apache.cxf.testutil.common.AbstractBusTestServerBase;\n import org.apache.cxf.transport.servlet.CXFNonSpringServlet;\n import org.apache.hello_world_soap_http.GreeterImpl;\n@@ -63,6 +64,8 @@ protected void run() {\n             Endpoint.publish(\"/Greeter\", impl);\n             HelloImpl helloImpl = new HelloImpl();\n             Endpoint.publish(\"/Hello\", helloImpl);\n+            \n+            ((EndpointImpl)Endpoint.create(helloImpl)).publish();\n \n         } catch (Exception e) {\n             throw new RuntimeException(e);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/79b4284ca030d868f1594d66cb747aca13fc5ffd/systests/transports/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletServer.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3082] Make EndpointImpl.publish() work correctly without throwing\nthe NPE on the get of the service list and wsdl\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1026341 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/79b4284ca030d868f1594d66cb747aca13fc5ffd"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a37f4aaad4d95c83d75c78a07529ba4a3fa8f4fd",
        "bug_id": "cxf_295",
        "file": [
            {
                "additions": 31,
                "sha": "9454015831571a40d3b30c61f0046d4a10327c11",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4bf7f16cf04d8863ec6fbaf2caf0c5894acad1f0/rt/core/src/main/java/org/apache/cxf/bus/CXFBusImpl.java",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/bus/CXFBusImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/bus/CXFBusImpl.java?ref=4bf7f16cf04d8863ec6fbaf2caf0c5894acad1f0",
                "patch": "@@ -20,6 +20,7 @@\n package org.apache.cxf.bus;\n \n import java.util.Collection;\n+import java.util.List;\n import java.util.Map;\n import java.util.concurrent.ConcurrentHashMap;\n import java.util.concurrent.CopyOnWriteArrayList;\n@@ -90,6 +91,9 @@ public void setId(String i) {\n         Object obj = extensions.get(extensionType);\n         if (obj == null) {\n             ConfiguredBeanLocator loc = (ConfiguredBeanLocator)extensions.get(ConfiguredBeanLocator.class);\n+            if (loc == null) {\n+                loc = createConfiguredBeanLocator();\n+            }\n             if (loc != null) {\n                 //force loading\n                 Collection<?> objs = loc.getBeansOfType(extensionType);\n@@ -107,6 +111,33 @@ public void setId(String i) {\n         return null;\n     }\n     \n+    protected synchronized ConfiguredBeanLocator createConfiguredBeanLocator() {\n+        ConfiguredBeanLocator loc = (ConfiguredBeanLocator)extensions.get(ConfiguredBeanLocator.class);\n+        if (loc == null) {\n+            loc = new ConfiguredBeanLocator() {\n+                public List<String> getBeanNamesOfType(Class<?> type) {\n+                    return null;\n+                }\n+                public <T> Collection<? extends T> getBeansOfType(Class<T> type) {\n+                    return null;\n+                }\n+                public <T> T getBeanOfType(String name, Class<T> type) {\n+                    return null;\n+                }\n+                public <T> boolean loadBeansOfType(Class<T> type, BeanLoaderListener<T> listener) {\n+                    return false;\n+                }\n+                public boolean hasConfiguredPropertyValue(String beanName, \n+                                                          String propertyName,\n+                                                          String value) {\n+                    return false;\n+                }\n+            };\n+            this.setExtension(loc, ConfiguredBeanLocator.class);\n+        }\n+        return loc;\n+    }\n+\n     public <T> void setExtension(T extension, Class<T> extensionType) {\n         extensions.put(extensionType, extension);\n     }",
                "changes": 31,
                "blob_url": "https://github.com/apache/cxf/blob/4bf7f16cf04d8863ec6fbaf2caf0c5894acad1f0/rt/core/src/main/java/org/apache/cxf/bus/CXFBusImpl.java"
            },
            {
                "additions": 60,
                "sha": "b056f0dc4316fcd061f2adbe062e3ca78af73d3a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/4bf7f16cf04d8863ec6fbaf2caf0c5894acad1f0/rt/core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerBus.java",
                "deletions": 13,
                "filename": "rt/core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerBus.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerBus.java?ref=4bf7f16cf04d8863ec6fbaf2caf0c5894acad1f0",
                "patch": "@@ -18,7 +18,10 @@\n  */\n package org.apache.cxf.bus.extension;\n \n+import java.util.ArrayList;\n+import java.util.Collection;\n import java.util.HashMap;\n+import java.util.List;\n import java.util.Map;\n \n import org.apache.cxf.binding.BindingFactory;\n@@ -27,6 +30,7 @@\n import org.apache.cxf.bus.BusState;\n import org.apache.cxf.bus.CXFBusImpl;\n import org.apache.cxf.buslifecycle.BusLifeCycleManager;\n+import org.apache.cxf.configuration.ConfiguredBeanLocator;\n import org.apache.cxf.configuration.Configurer;\n import org.apache.cxf.configuration.NullConfigurer;\n import org.apache.cxf.resource.DefaultResourceManager;\n@@ -52,7 +56,7 @@\n     \n     public static final String BUS_PROPERTY_NAME = \"bus\";\n     private static final String BUS_ID_PROPERTY_NAME = \"org.apache.cxf.bus.id\";\n-    \n+    private final ExtensionManagerImpl extensionManager;\n     \n     public ExtensionManagerBus(Map<Class, Object> e, Map<String, Object> properties) {\n         super(e);\n@@ -88,11 +92,11 @@ public ExtensionManagerBus(Map<Class, Object> e, Map<String, Object> properties)\n         \n         extensions.put(ResourceManager.class, resourceManager);\n \n-        ExtensionManagerImpl em = new ExtensionManagerImpl(new String[0],\n-                                                           Thread.currentThread().getContextClassLoader(),\n-                                                           extensions,\n-                                                           resourceManager, \n-                                                           this);\n+        extensionManager = new ExtensionManagerImpl(new String[0],\n+                                                    Thread.currentThread().getContextClassLoader(),\n+                                                    extensions,\n+                                                    resourceManager, \n+                                                    this);\n                                   \n         setState(BusState.INITIAL);\n         \n@@ -104,33 +108,76 @@ public ExtensionManagerBus(Map<Class, Object> e, Map<String, Object> properties)\n         DestinationFactoryManager dfm = this.getExtension(DestinationFactoryManager.class);\n         if (null == dfm) {\n             dfm = new DestinationFactoryManagerImpl(\n-                new DeferredMap<DestinationFactory>(em, DestinationFactory.class),\n+                new DeferredMap<DestinationFactory>(extensionManager,\n+                        DestinationFactory.class),\n                 this);\n         }\n \n         ConduitInitiatorManager cfm = this.getExtension(ConduitInitiatorManager.class);\n         if (null == cfm) {\n-            cfm = new ConduitInitiatorManagerImpl(new DeferredMap<ConduitInitiator>(em, \n+            cfm = new ConduitInitiatorManagerImpl(new DeferredMap<ConduitInitiator>(extensionManager, \n                 ConduitInitiator.class), this);\n         }\n         \n         BindingFactoryManager bfm = this.getExtension(BindingFactoryManager.class);\n         if (null == bfm) {\n-            bfm = new BindingFactoryManagerImpl(new DeferredMap<BindingFactory>(em, BindingFactory.class),\n+            bfm = new BindingFactoryManagerImpl(new DeferredMap<BindingFactory>(extensionManager,\n+                                                    BindingFactory.class),\n                                                 this);\n             extensions.put(BindingFactoryManager.class, bfm);\n         }\n-        em.load(new String[] {ExtensionManagerImpl.BUS_EXTENSION_RESOURCE,\n-                              ExtensionManagerImpl.BUS_EXTENSION_RESOURCE_COMPAT});\n+        extensionManager.load(new String[] {\n+            ExtensionManagerImpl.BUS_EXTENSION_RESOURCE,\n+            ExtensionManagerImpl.BUS_EXTENSION_RESOURCE_COMPAT});\n         \n         \n-        this.setExtension(em, ExtensionManager.class);\n+        this.setExtension(extensionManager, ExtensionManager.class);\n     }\n \n     public ExtensionManagerBus() {\n         this(null, null);\n     }\n-    \n+    protected synchronized ConfiguredBeanLocator createConfiguredBeanLocator() {\n+        ConfiguredBeanLocator loc = (ConfiguredBeanLocator)extensions.get(ConfiguredBeanLocator.class);\n+        if (loc == null) {\n+            loc = new ConfiguredBeanLocator() {\n+                public List<String> getBeanNamesOfType(Class<?> type) {\n+                    return null;\n+                }\n+                public <T> Collection<? extends T> getBeansOfType(Class<T> type) {\n+                    extensionManager.activateAllByType(type);\n+                    List<T> lst = new ArrayList<T>();\n+                    for (Object o : extensions.values()) {\n+                        if (type.isInstance(o)) {\n+                            lst.add(type.cast(o));\n+                        }\n+                    }\n+                    return lst;\n+                }\n+                public <T> T getBeanOfType(String name, Class<T> type) {\n+                    T t = extensionManager.getExtension(name, type);\n+                    if (t != null) {\n+                        return t;\n+                    }\n+                    extensionManager.activateAllByType(type);\n+                    return type.cast(extensions.get(type));\n+                }\n+                public <T> boolean loadBeansOfType(Class<T> type, BeanLoaderListener<T> listener) {\n+                    int s = extensions.size();\n+                    extensionManager.activateAllByType(type);\n+                    return s != extensions.size();\n+                }\n+                public boolean hasConfiguredPropertyValue(String beanName, \n+                                                          String propertyName,\n+                                                          String value) {\n+                    return false;\n+                }\n+            };\n+            this.setExtension(loc, ConfiguredBeanLocator.class);\n+        }\n+        return loc;\n+    }\n+\n     private String getBusId(Map<String, Object> properties) {\n \n         String busId = null;",
                "changes": 73,
                "blob_url": "https://github.com/apache/cxf/blob/4bf7f16cf04d8863ec6fbaf2caf0c5894acad1f0/rt/core/src/main/java/org/apache/cxf/bus/extension/ExtensionManagerBus.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2927] Create a ConfiguredBeanLocator if there isn't one to make\nsure we don't get NPE's\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1005222 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/4bf7f16cf04d8863ec6fbaf2caf0c5894acad1f0"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/7579f06b42a8cc656a2b60d0c2fe59519ca9a399",
        "bug_id": "cxf_296",
        "file": [
            {
                "additions": 1,
                "sha": "4acbff406d6346d5e9f640f8f0a1d1fc4fde3224",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ab5c7588667eb972a748035bfa0ce3a939132e22/rt/core/src/main/java/org/apache/cxf/service/invoker/AbstractInvoker.java",
                "deletions": 1,
                "filename": "rt/core/src/main/java/org/apache/cxf/service/invoker/AbstractInvoker.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/service/invoker/AbstractInvoker.java?ref=ab5c7588667eb972a748035bfa0ce3a939132e22",
                "patch": "@@ -54,7 +54,7 @@ public Object invoke(Exchange exchange, Object o) {\n             BindingOperationInfo bop = exchange.get(BindingOperationInfo.class);\n             MethodDispatcher md = (MethodDispatcher) \n                 exchange.get(Service.class).get(MethodDispatcher.class.getName());\n-            Method m = md.getMethod(bop);\n+            Method m = bop == null ? null : md.getMethod(bop);\n             if (m == null && bop == null) {\n                 LOG.severe(new Message(\"MISSING_BINDING_OPERATION\", LOG).toString());\n                 throw new Fault(new Message(\"EXCEPTION_INVOKING_OBJECT\", LOG, ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/ab5c7588667eb972a748035bfa0ce3a939132e22/rt/core/src/main/java/org/apache/cxf/service/invoker/AbstractInvoker.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2824] Put NPE guard in place for looking up the method\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@984894 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ab5c7588667eb972a748035bfa0ce3a939132e22"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/91848c9e9ba130d7d81aaf042c67a4c84d845fc3",
        "bug_id": "cxf_297",
        "file": [
            {
                "additions": 1,
                "sha": "f179ed84fc529e8c40a3f2d407c41701b5fc51a2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2e7271331efc39c4a1a3a46c96ddba6b69d578c9/api/src/main/java/org/apache/cxf/wsdl/EndpointReferenceUtils.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/wsdl/EndpointReferenceUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/wsdl/EndpointReferenceUtils.java?ref=2e7271331efc39c4a1a3a46c96ddba6b69d578c9",
                "patch": "@@ -161,7 +161,7 @@ public LSInput resolveResource(String type, String namespaceURI, String publicId\n                 impl.setByteStream(new ByteArrayInputStream(ds));\n                 done.add(newId + \":\" + namespaceURI);\n             }\n-            if (impl == null && bus != null) {\n+            if (impl == null && bus != null && systemId != null) {\n                 ResourceManager rm = bus.getExtension(ResourceManager.class);\n                 URL url = rm == null ? null : rm.resolveResource(systemId, URL.class);\n                 if (url != null) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/2e7271331efc39c4a1a3a46c96ddba6b69d578c9/api/src/main/java/org/apache/cxf/wsdl/EndpointReferenceUtils.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2830] Add NPE guard to EndpointReferenceUtils\nPatch from Chris Nelson applied\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@948907 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/2e7271331efc39c4a1a3a46c96ddba6b69d578c9"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/762a579fe54f0688dd0bd19116dcda0c65076cfa",
        "bug_id": "cxf_298",
        "file": [
            {
                "additions": 0,
                "sha": "38624bb8ee900b75ecd6538b54d8a15453d92aef",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java",
                "deletions": 23,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -23,7 +23,6 @@\n import java.io.OutputStream;\n import java.io.PrintWriter;\n import java.io.StringWriter;\n-import java.io.UnsupportedEncodingException;\n import java.lang.annotation.Annotation;\n import java.lang.reflect.Array;\n import java.lang.reflect.Type;\n@@ -44,7 +43,6 @@\n import javax.ws.rs.WebApplicationException;\n import javax.ws.rs.core.HttpHeaders;\n import javax.ws.rs.core.MediaType;\n-import javax.ws.rs.core.MultivaluedMap;\n import javax.ws.rs.core.Response;\n import javax.ws.rs.ext.ContextResolver;\n import javax.ws.rs.ext.MessageBodyReader;\n@@ -92,7 +90,6 @@\n     private static final String JAXB_DEFAULT_NAMESPACE = \"##default\";\n     private static final String JAXB_DEFAULT_NAME = \"##default\";\n     \n-    private static final String CHARSET_PARAMETER = \"charset\";\n     private static Map<String, JAXBContext> packageContexts = new WeakHashMap<String, JAXBContext>();\n     private static Map<Class<?>, JAXBContext> classContexts = new WeakHashMap<Class<?>, JAXBContext>();\n    \n@@ -443,27 +440,7 @@ protected Marshaller createMarshaller(Object obj, Class<?> cls, Type genericType\n         return marshaller;\n     }\n     \n-    protected String getEncoding(MediaType mt, MultivaluedMap<String, Object> headers) {\n-        String enc = mt.getParameters().get(CHARSET_PARAMETER);\n-        if (enc == null) {\n-            return null;\n-        }\n-        try {\n-            \"0\".getBytes(enc);\n-            return enc;\n-        } catch (UnsupportedEncodingException ex) {\n-            String message = new org.apache.cxf.common.i18n.Message(\"UNSUPPORTED_ENCODING\", \n-                                 BUNDLE, enc).toString();\n-            LOG.warning(message);\n-            headers.putSingle(HttpHeaders.CONTENT_TYPE, \n-                JAXRSUtils.removeMediaTypeParameter(mt, CHARSET_PARAMETER) \n-                + ';' + CHARSET_PARAMETER + \"=UTF-8\");\n-        }\n-        return null;\n-    }\n         \n-\n-    \n     protected Class<?> getActualType(Class<?> type, Type genericType, Annotation[] anns) {\n         Class<?> theType = null;\n         if (JAXBElement.class.isAssignableFrom(type)) {",
                "changes": 23,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java"
            },
            {
                "additions": 2,
                "sha": "7f7b4427a84ecf200c1f22fc1ab8c754b91315a5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/JAXBElementProvider.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/JAXBElementProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/JAXBElementProvider.java?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -55,6 +55,7 @@\n import org.apache.cxf.helpers.CastUtils;\n import org.apache.cxf.jaxb.NamespaceMapper;\n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.apache.cxf.jaxrs.utils.HttpUtils;\n import org.apache.cxf.jaxrs.utils.InjectionUtils;\n import org.apache.cxf.jaxrs.utils.schemas.SchemaHandler;\n import org.apache.cxf.message.Attachment;\n@@ -230,7 +231,7 @@ public void writeTo(Object obj, Class<?> cls, Type genericType, Annotation[] ann\n         try {\n             Object actualObject = checkAdapter(obj, anns, true);\n             Class<?> actualClass = obj != actualObject ? actualObject.getClass() : cls;\n-            String encoding = getEncoding(m, headers);\n+            String encoding = HttpUtils.getSetEncoding(m, headers, null);\n             if (InjectionUtils.isSupportedCollectionOrArray(actualClass)) {\n                 actualClass = InjectionUtils.getActualType(genericType);\n                 marshalCollection(cls, actualObject, actualClass, genericType, encoding, os, m);",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/JAXBElementProvider.java"
            },
            {
                "additions": 3,
                "sha": "6f10d453555ee510db730de958d15cdfdd75683a",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/JSONProvider.java",
                "deletions": 4,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/JSONProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/JSONProvider.java?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -51,6 +51,7 @@\n import javax.xml.stream.XMLStreamWriter;\n \n import org.apache.cxf.jaxrs.ext.MessageContext;\n+import org.apache.cxf.jaxrs.utils.HttpUtils;\n import org.apache.cxf.jaxrs.utils.InjectionUtils;\n import org.apache.cxf.jaxrs.utils.schemas.SchemaHandler;\n \n@@ -258,10 +259,8 @@ public void writeTo(Object obj, Class<?> cls, Type genericType, Annotation[] ann\n             if (cls == genericType) {\n                 genericType = actualClass;\n             }\n-            String encoding = getEncoding(m, headers);\n-            if (encoding == null) {\n-                encoding = \"UTF-8\";\n-            }\n+            String encoding = HttpUtils.getSetEncoding(m, headers, \"UTF-8\");\n+            \n             if (InjectionUtils.isSupportedCollectionOrArray(actualClass)) {\n                 actualClass = InjectionUtils.getActualType(genericType);\n                 marshalCollection(cls, actualObject, actualClass, genericType, encoding, os, m);",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/JSONProvider.java"
            },
            {
                "additions": 0,
                "sha": "329a7e86025cf99ce8f8306473d725a0e7d894bc",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/Messages.properties",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/Messages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/Messages.properties?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -19,7 +19,6 @@\n #\n #\n JAXB_EXCEPTION=JAXBException occurred : {0}\n-UNSUPPORTED_ENCODING=Unsupported encoding : {0}, defaulting to UTF-8\n NO_COLLECTION_ROOT=No collection name is provided\n NO_MSG_WRITER =.No message body writer found for class : {0}.\n EMPTY_BODY=Message body is empty",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/Messages.properties"
            },
            {
                "additions": 3,
                "sha": "ddcd8274766470d08190a821cdf939a2e15590e8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/PrimitiveTextProvider.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/PrimitiveTextProvider.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/PrimitiveTextProvider.java?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -31,6 +31,7 @@\n \n import org.apache.cxf.helpers.IOUtils;\n import org.apache.cxf.jaxrs.model.ParameterType;\n+import org.apache.cxf.jaxrs.utils.HttpUtils;\n import org.apache.cxf.jaxrs.utils.InjectionUtils;\n \n public class PrimitiveTextProvider \n@@ -65,7 +66,8 @@ public boolean isWriteable(Class<?> type, Type genericType, Annotation[] annotat\n     public void writeTo(Object obj, Class<?> type, Type genType, Annotation[] anns, \n                         MediaType mt, MultivaluedMap<String, Object> headers,\n                         OutputStream os) throws IOException {\n-        os.write(obj.toString().getBytes(\"UTF-8\"));\n+        String encoding = HttpUtils.getSetEncoding(mt, headers, \"UTF-8\");\n+        os.write(obj.toString().getBytes(encoding));\n     }\n \n }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/PrimitiveTextProvider.java"
            },
            {
                "additions": 32,
                "sha": "ba53d0fff8eb98e4ed9352ce906d9681379dd8f8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/HttpUtils.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/HttpUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/HttpUtils.java?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -28,15 +28,21 @@\n import java.util.List;\n import java.util.Locale;\n import java.util.Map;\n+import java.util.ResourceBundle;\n import java.util.TimeZone;\n+import java.util.logging.Logger;\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n import javax.servlet.http.HttpServletRequest;\n import javax.ws.rs.core.HttpHeaders;\n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.MultivaluedMap;\n import javax.ws.rs.core.PathSegment;\n import javax.ws.rs.core.Response;\n \n+import org.apache.cxf.common.i18n.BundleUtils;\n+import org.apache.cxf.common.logging.LogUtils;\n import org.apache.cxf.common.util.UrlUtils;\n import org.apache.cxf.jaxrs.impl.HttpHeadersImpl;\n import org.apache.cxf.jaxrs.impl.PathSegmentImpl;\n@@ -47,10 +53,14 @@\n \n public final class HttpUtils {\n     \n+    private static final ResourceBundle BUNDLE = BundleUtils.getBundle(HttpUtils.class);\n+    private static final Logger LOG = LogUtils.getL7dLogger(HttpUtils.class);\n+    \n     private static final String LOCAL_IP_ADDRESS = \"127.0.0.1\";\n     private static final String LOCAL_HOST = \"localhost\";\n     private static final Pattern ENCODE_PATTERN = Pattern.compile(\"%[0-9a-fA-F][0-9a-fA-F]\");\n-    \n+    private static final String CHARSET_PARAMETER = \"charset\";\n+        \n     private HttpUtils() {\n     }\n     \n@@ -244,5 +254,25 @@ public static String fromPathSegment(PathSegment ps) {\n         }\n         return Response.Status.BAD_REQUEST;\n     }\n-    \n+ \n+    public static String getSetEncoding(MediaType mt, MultivaluedMap<String, Object> headers,\n+                                        String defaultEncoding) {\n+        String enc = mt.getParameters().get(CHARSET_PARAMETER);\n+        if (enc == null) {\n+            return defaultEncoding;\n+        }\n+        try {\n+            \"0\".getBytes(enc);\n+            return enc;\n+        } catch (UnsupportedEncodingException ex) {\n+            String message = new org.apache.cxf.common.i18n.Message(\"UNSUPPORTED_ENCODING\", \n+                                 BUNDLE, enc, defaultEncoding).toString();\n+            LOG.warning(message);\n+            headers.putSingle(HttpHeaders.CONTENT_TYPE, \n+                JAXRSUtils.removeMediaTypeParameter(mt, CHARSET_PARAMETER) \n+                + ';' + CHARSET_PARAMETER + \"=\" \n+                + (defaultEncoding == null ? \"UTF-8\" : defaultEncoding));\n+        }\n+        return defaultEncoding;\n+    }\n }",
                "changes": 34,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/HttpUtils.java"
            },
            {
                "additions": 3,
                "sha": "0319dfa5f13337b3278759809de1c9ac275b9c6b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -831,6 +831,9 @@ public static void fillInValuesFromBean(Object bean, String baseName,\n                 }\n                 \n                 Object value = extractFromMethod(bean, m);\n+                if (value == null) {\n+                    continue;\n+                }\n                 if (isPrimitive(value.getClass())) {\n                     values.putSingle(propertyName, value);\n                 } else if (isSupportedCollectionOrArray(value.getClass())) {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java"
            },
            {
                "additions": 2,
                "sha": "0752a7c30f38bb4e61d8793426e92150e04f949e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/Messages.properties",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/Messages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/Messages.properties?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -40,4 +40,5 @@ CRI_SELECTED_POSSIBLY=Resource class {0} may get selected, request path : {0}, r\n CRI_SELECTED=Resource class {0} has been selected, request path : {0}, resource class @Path : {1}\n OPER_NO_MATCH=No method match, method name : {0}, request path : {1}, method @Path : {2}, HTTP Method : {3}, method HTTP Method : {4}, ContentType : {5}, method @Consumes : {6}, Accept : {7}, method @Produces : {8}.\n MULTTIPART_ID_NOT_FOUND=No multipart with content id {0} found, request content type : {1}\n-WRONG_FORM_MEDIA_TYPE=An application/x-www-form-urlencoded form request is expected but the request media type is {0}. Consider removing @FormParam annotations.    \n\\ No newline at end of file\n+WRONG_FORM_MEDIA_TYPE=An application/x-www-form-urlencoded form request is expected but the request media type is {0}. Consider removing @FormParam annotations.\n+UNSUPPORTED_ENCODING=Unsupported encoding : {0}, defaulting to {1}    \n\\ No newline at end of file",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/Messages.properties"
            },
            {
                "additions": 21,
                "sha": "3378955e9a69bb7ae86cdd4d691d6eee4c8912c9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/PrimitiveTextProviderTest.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/PrimitiveTextProviderTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/PrimitiveTextProviderTest.java?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -23,9 +23,13 @@\n import java.io.ByteArrayOutputStream;\n import java.util.Arrays;\n \n+import javax.ws.rs.core.MediaType;\n+import javax.ws.rs.core.MultivaluedMap;\n import javax.ws.rs.ext.MessageBodyReader;\n import javax.ws.rs.ext.MessageBodyWriter;\n \n+import org.apache.cxf.jaxrs.impl.MetadataMap;\n+\n import org.junit.Assert;\n import org.junit.Test;\n \n@@ -84,13 +88,28 @@ public void testReadBoolean() throws Exception {\n     public void testWriteBoolean() throws Exception {\n         MessageBodyWriter p = new PrimitiveTextProvider();\n         ByteArrayOutputStream os = new ByteArrayOutputStream();\n-        p.writeTo(Boolean.TRUE, null, null, null, null, null, os);\n+        p.writeTo(Boolean.TRUE, null, null, null, MediaType.TEXT_PLAIN_TYPE, null, os);\n         assertTrue(Arrays.equals(new String(\"true\").getBytes(), os.toByteArray()));\n         \n         os = new ByteArrayOutputStream();\n         \n         final boolean value = true;\n-        p.writeTo(value, null, null, null, null, null, os);\n+        p.writeTo(value, null, null, null, MediaType.TEXT_PLAIN_TYPE, null, os);\n         assertTrue(Arrays.equals(new String(\"true\").getBytes(), os.toByteArray()));\n     }\n+    \n+    \n+    @SuppressWarnings(\"unchecked\")\n+    @Test\n+    public void testWriteStringISO() throws Exception {\n+        MessageBodyWriter p = new PrimitiveTextProvider();\n+        ByteArrayOutputStream os = new ByteArrayOutputStream();\n+        MultivaluedMap<String, Object> headers = new MetadataMap<String, Object>();\n+        p.writeTo(\"Hello, my name is F\ufffdlix Agn\ufffds\", \n+                  String.class, String.class, null, MediaType.valueOf(\"text/plain;charset=ISO-8859-1\"),\n+                  headers, os);\n+        assertEquals(\"Hello, my name is F\ufffdlix Agn\ufffds\", new String(os.toByteArray()));\n+    }\n+    \n+        \n }",
                "changes": 23,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/PrimitiveTextProviderTest.java"
            },
            {
                "additions": 9,
                "sha": "a86697f117932e067952fde5ab4a1260e92edd4d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/utils/InjectionUtilsTest.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/utils/InjectionUtilsTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/utils/InjectionUtilsTest.java?ref=569b0336ee0e2ac30a977d297b5368dd37585468",
                "patch": "@@ -100,6 +100,8 @@ public void testExtractValuesFromBean() {\n         private Long b;\n         private List<String> c;\n         private CustomerBean2 d;\n+        private String e; \n+        \n         public void setA(String aString) {\n             this.a = aString;\n         }\n@@ -125,6 +127,13 @@ public CustomerBean2 getD() {\n             return d;\n         }\n         \n+        public void setE(String e) {\n+            this.e = e;\n+        }\n+        public String getE() {\n+            return e;\n+        }\n+        \n     }\n     \n     static class CustomerBean2 {",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/569b0336ee0e2ac30a977d297b5368dd37585468/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/utils/InjectionUtilsTest.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-2784,CXF-2787: fixing NPE to do with  extracting values from parameter beans, updating primitives provider to check for custom charsets\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@939012 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/569b0336ee0e2ac30a977d297b5368dd37585468"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/287fbe1a653a12f90cb7d324ac83ed848ef13589",
        "bug_id": "cxf_299",
        "file": [
            {
                "additions": 3,
                "sha": "8ffabb679c37e8029a37396af845d673cffc40d1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e848fc3499b3deb95ff5e0c5a6e80867f5c903f2/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java",
                "deletions": 2,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java?ref=e848fc3499b3deb95ff5e0c5a6e80867f5c903f2",
                "patch": "@@ -208,8 +208,9 @@ public BindingInfo createBindingInfo(ServiceInfo si, String bindingid, Object co\n \n     private void createSoapBinding(final SoapBindingInfo bi) throws WSDLException {\n         boolean isSoap12 = bi.getSoapVersion() instanceof Soap12;\n-        ExtensionRegistry extensionRegistry = getBus().getExtension(WSDLManager.class)\n-            .getExtensionRegistry();\n+        Bus bs = getBus();\n+        WSDLManager m = bs.getExtension(WSDLManager.class);\n+        ExtensionRegistry extensionRegistry = m.getExtensionRegistry();\n \n         SoapBinding soapBinding = SOAPBindingUtil.createSoapBinding(extensionRegistry, isSoap12);\n         soapBinding.setStyle(bi.getStyle());",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/e848fc3499b3deb95ff5e0c5a6e80867f5c903f2/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/SoapBindingFactory.java"
            }
        ],
        "repo": "cxf",
        "message": "Split line into 3 to try and debug which part is causing the NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@922913 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/e848fc3499b3deb95ff5e0c5a6e80867f5c903f2"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/85bb4855c1521a72d72115fdb4fc2a91fae2ea0b",
        "bug_id": "cxf_300",
        "file": [
            {
                "additions": 7,
                "sha": "a5b24209d8131c53c439b5d6b29432b648f3c068",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/5a67729bef8110bd9a61fa026a3e7bca09864dec/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/CXFServlet.java",
                "deletions": 2,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/CXFServlet.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/CXFServlet.java?ref=5a67729bef8110bd9a61fa026a3e7bca09864dec",
                "patch": "@@ -118,7 +118,12 @@ private void updateContext(ServletConfig servletConfig, ApplicationContext ctx)\n             ctx = bus.getExtension(BusApplicationContext.class);\n         } else {\n             LOG.info(\"LOAD_BUS_WITH_APPLICATION_CONTEXT\");\n-            bus = new SpringBusFactory(ctx).createBus();\n+            inRefresh = true;\n+            try {\n+                bus = new SpringBusFactory(ctx).createBus();\n+            } finally {\n+                inRefresh = false;\n+            }\n         }        \n         \n         ResourceManager resourceManager = bus.getExtension(ResourceManager.class);\n@@ -175,7 +180,7 @@ public void destroy() {\n     }\n \n     public void onApplicationEvent(ApplicationEvent event) {\n-        if (!inRefresh && event instanceof ContextRefreshedEvent) {\n+        if (!inRefresh && event instanceof ContextRefreshedEvent && getServletConfig() != null) {\n             //need to re-do the bus/controller stuff\n             try {\n                 inRefresh = true;",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/5a67729bef8110bd9a61fa026a3e7bca09864dec/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/CXFServlet.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2620] Add some guards to prevent NPE with certain use cases and\nSpring 3.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@900875 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/5a67729bef8110bd9a61fa026a3e7bca09864dec"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/c44bc1059aed6d1649b3db18b90d4495b6025181",
        "bug_id": "cxf_301",
        "file": [
            {
                "additions": 3,
                "sha": "406816dc068010b053905772ca086dc6148def59",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/916e9d345fcec4211c57b0955b51020b6dc2376b/tools/common/src/main/java/org/apache/cxf/tools/common/ToolContext.java",
                "deletions": 0,
                "filename": "tools/common/src/main/java/org/apache/cxf/tools/common/ToolContext.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/common/src/main/java/org/apache/cxf/tools/common/ToolContext.java?ref=916e9d345fcec4211c57b0955b51020b6dc2376b",
                "patch": "@@ -200,6 +200,9 @@ public String getPackageName() {\n     }\n \n     public String mapPackageName(String ns) {\n+        if (ns == null) {\n+            ns = \"\";\n+        }\n         if (hasNamespace(ns)) {\n             return mapNamespaceToPackageName(ns);\n         } else {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/916e9d345fcec4211c57b0955b51020b6dc2376b/tools/common/src/main/java/org/apache/cxf/tools/common/ToolContext.java"
            },
            {
                "additions": 1,
                "sha": "927c06824c3da0255f15bd25c0f113252264a44d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/916e9d345fcec4211c57b0955b51020b6dc2376b/tools/common/src/main/java/org/apache/cxf/tools/util/URIParserUtil.java",
                "deletions": 1,
                "filename": "tools/common/src/main/java/org/apache/cxf/tools/util/URIParserUtil.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/common/src/main/java/org/apache/cxf/tools/util/URIParserUtil.java?ref=916e9d345fcec4211c57b0955b51020b6dc2376b",
                "patch": "@@ -90,7 +90,7 @@ public static String getPackageName(String nameSpaceURI) {\n \n         List<String> tokens = tokenize(nameSpaceURI, \"/: \");\n         if (tokens.size() == 0) {\n-            return null;\n+            return \"cxf\"; \n         }\n \n         if (tokens.size() > 1) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/916e9d345fcec4211c57b0955b51020b6dc2376b/tools/common/src/main/java/org/apache/cxf/tools/util/URIParserUtil.java"
            },
            {
                "additions": 1,
                "sha": "f9a377ea86e8a917eecd78e76fbe6fdf3ff480fb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/916e9d345fcec4211c57b0955b51020b6dc2376b/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java",
                "deletions": 1,
                "filename": "tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java?ref=916e9d345fcec4211c57b0955b51020b6dc2376b",
                "patch": "@@ -481,7 +481,7 @@ private boolean addedToClassCollector(String packageName) {\n         Collection<String> files = classCollector.getGeneratedFileInfo();\n         for (String file : files) {\n             int dotIndex = file.lastIndexOf(\".\");\n-            String sub = dotIndex == -1 ? \"\" : file.substring(0, dotIndex - 1);\n+            String sub = dotIndex <= 0 ? \"\" : file.substring(0, dotIndex - 1);\n             if (sub.equals(packageName)) {\n                 return true;\n             }",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/916e9d345fcec4211c57b0955b51020b6dc2376b/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java"
            },
            {
                "additions": 1,
                "sha": "26336737c22b120df15e61ad621a26b12c72805b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/916e9d345fcec4211c57b0955b51020b6dc2376b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/mapper/InterfaceMapper.java",
                "deletions": 0,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/mapper/InterfaceMapper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/mapper/InterfaceMapper.java?ref=916e9d345fcec4211c57b0955b51020b6dc2376b",
                "patch": "@@ -36,6 +36,7 @@ public InterfaceMapper(ToolContext c) {\n     public JavaInterface map(InterfaceInfo interfaceInfo) {\n         JavaInterface intf = new JavaInterface();\n         String namespace = interfaceInfo.getName().getNamespaceURI();\n+\n         String packageName = ProcessorUtil.parsePackageName(namespace, context.mapPackageName(namespace));\n         \n         String loc = (String)context.get(ToolConstants.CFG_WSDLLOCATION);",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/916e9d345fcec4211c57b0955b51020b6dc2376b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/mapper/InterfaceMapper.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2431] If the wsdl doesn't have a targetnamespace defined, at least\ntry to do something and not NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@821216 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/916e9d345fcec4211c57b0955b51020b6dc2376b"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/b105ccd46daf966ef00a76cf9911ad72c7718646",
        "bug_id": "cxf_302",
        "file": [
            {
                "additions": 1,
                "sha": "cafcd1f18ddd89dd40733d5ade2ace118b3ac6df",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9726201a36691afaf02dcaf19974b13b1f9efbbb/rt/core/src/main/java/org/apache/cxf/wsdl11/Messages.properties",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/wsdl11/Messages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/wsdl11/Messages.properties?ref=9726201a36691afaf02dcaf19974b13b1f9efbbb",
                "patch": "@@ -30,4 +30,5 @@ FAIL_TO_CREATE_WSDL_DEFINITION = Fail to create wsdl definition from : {0}\\r\\nCa\n MISSING_DESTINATION_FACTORY = Cannot find the destination factory, check the port //wsdl:port[@name=''{0}'']\n MISSING_SERVICE= No definition of service {0} in the WSDL.\n WSDL4J_BAD_ELEMENT_PART= Part {0} defined as element {1} which is not in the schema.\n+PART_NO_NAME_NO_TYPE= Part {0} defined with no element and no type.\n NO_MESSAGE=No {0} message was found for operation {1} and input named {2}.  Check the wsdl for errors.",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/9726201a36691afaf02dcaf19974b13b1f9efbbb/rt/core/src/main/java/org/apache/cxf/wsdl11/Messages.properties"
            },
            {
                "additions": 8,
                "sha": "8fde3cd1812d6aa1249e61830a341fe14b77f5e5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9726201a36691afaf02dcaf19974b13b1f9efbbb/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java",
                "deletions": 1,
                "filename": "rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java?ref=9726201a36691afaf02dcaf19974b13b1f9efbbb",
                "patch": "@@ -797,7 +797,7 @@ private void buildMessage(AbstractMessageContainer minfo, Message msg) {\n                 pi.setTypeQName(part.getTypeName());\n                 pi.setElement(false);\n                 pi.setXmlSchema(schemas.getTypeByQName(part.getTypeName()));\n-            } else {\n+            } else if (part.getElementName() != null) {\n                 pi.setElementQName(part.getElementName());\n                 XmlSchemaElement schemaElement = schemas.getElementByQName(part.getElementName());\n                 if (null == schemaElement) {\n@@ -810,6 +810,13 @@ private void buildMessage(AbstractMessageContainer minfo, Message msg) {\n                 }\n                 pi.setElement(true);\n                 pi.setXmlSchema(schemaElement);\n+            } else {\n+                org.apache.cxf.common.i18n.Message errorMessage = \n+                    new org.apache.cxf.common.i18n.Message(\"PART_NO_NAME_NO_TYPE\",\n+                                                           LOG,\n+                                                           part.getName());\n+                throw new WSDLRuntimeException(errorMessage);\n+                \n             }\n         }\n     }",
                "changes": 9,
                "blob_url": "https://github.com/apache/cxf/blob/9726201a36691afaf02dcaf19974b13b1f9efbbb/rt/core/src/main/java/org/apache/cxf/wsdl11/WSDLServiceBuilder.java"
            }
        ],
        "repo": "cxf",
        "message": "Change NPE to Runtime error for part with no content. CXF-2438.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@816778 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/9726201a36691afaf02dcaf19974b13b1f9efbbb"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/55076a9b869b53918a21b8a3c139aaf3ff4daf1f",
        "bug_id": "cxf_303",
        "file": [
            {
                "additions": 3,
                "sha": "8d1e00e44650c9810dc586cc43890b8265b4a534",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/60148ecdde0ee79aa2c495650668a936fddb361b/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java",
                "deletions": 3,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java?ref=60148ecdde0ee79aa2c495650668a936fddb361b",
                "patch": "@@ -131,9 +131,9 @@ public void purgeAcknowledged(SourceSequence seq) {\n                         purged.add(m);\n                     }\n                 }\n-            }\n-            if (sequenceCandidates.isEmpty()) {\n-                candidates.remove(seq.getIdentifier().getValue());\n+                if (sequenceCandidates.isEmpty()) {\n+                    candidates.remove(seq.getIdentifier().getValue());\n+                }\n             }\n             LOG.fine(\"Completed purging resend candidates.\");\n         }",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/60148ecdde0ee79aa2c495650668a936fddb361b/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2317] Fix for NPE in RetransmissionQueueImpl - fix from Guillaume\nPorcher applied.\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@789528 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/60148ecdde0ee79aa2c495650668a936fddb361b"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/8747a0eaabfed393b1c2b2320616ea727d4d0521",
        "bug_id": "cxf_304",
        "file": [
            {
                "additions": 2,
                "sha": "d2cd5a5d7131e03617f59cd098a961321807170b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2cf78fe07827e899067b9711aaeb3f6748feb81c/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WrapperClassInInterceptor.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WrapperClassInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WrapperClassInInterceptor.java?ref=2cf78fe07827e899067b9711aaeb3f6748feb81c",
                "patch": "@@ -55,7 +55,8 @@ public WrapperClassInInterceptor() {\n     public void handleMessage(Message message) throws Fault {\n         Exchange ex = message.getExchange();\n         BindingOperationInfo boi = ex.get(BindingOperationInfo.class);\n-        if (boi == null) {\n+        if (Boolean.TRUE.equals(message.get(Message.PARTIAL_RESPONSE_MESSAGE)) \n+            || boi == null) {\n             return;\n         }\n                ",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/2cf78fe07827e899067b9711aaeb3f6748feb81c/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WrapperClassInInterceptor.java"
            },
            {
                "additions": 24,
                "sha": "2f0c28d5fd7f7b2ef26134d7844dc3432e0dff71",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2cf78fe07827e899067b9711aaeb3f6748feb81c/systests/src/test/java/org/apache/cxf/systest/ws/rm/SequenceTest.java",
                "deletions": 17,
                "filename": "systests/src/test/java/org/apache/cxf/systest/ws/rm/SequenceTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/src/test/java/org/apache/cxf/systest/ws/rm/SequenceTest.java?ref=2cf78fe07827e899067b9711aaeb3f6748feb81c",
                "patch": "@@ -28,6 +28,7 @@\n import java.util.concurrent.Executors;\n import java.util.logging.Logger;\n \n+import javax.xml.namespace.QName;\n import javax.xml.parsers.DocumentBuilder;\n import javax.xml.parsers.DocumentBuilderFactory;\n import javax.xml.transform.Transformer;\n@@ -39,8 +40,8 @@\n import javax.xml.ws.BindingProvider;\n import javax.xml.ws.Dispatch;\n import javax.xml.ws.Service;\n-\n import javax.xml.ws.WebServiceException;\n+import javax.xml.ws.handler.MessageContext;\n \n import org.w3c.dom.Document;\n \n@@ -92,8 +93,12 @@\n public class SequenceTest extends AbstractBusClientServerTestBase {\n \n     private static final Logger LOG = LogUtils.getLogger(SequenceTest.class);\n+    private static final QName GREETMEONEWAY_NAME \n+        = new QName(\"http://cxf.apache.org/greeter_control\", \"greetMeOneWay\");\n     private static final String GREETMEONEWAY_ACTION \n         = \"http://cxf.apache.org/greeter_control/Greeter/greetMeOneWayRequest\";\n+    private static final QName GREETME_NAME \n+        = new QName(\"http://cxf.apache.org/greeter_control\", \"greetMe\");\n     private static final String GREETME_ACTION\n         = \"http://cxf.apache.org/greeter_control/Greeter/greetMeRequest\";\n     private static final String GREETME_RESPONSE_ACTION\n@@ -188,23 +193,24 @@ public void testOnewayAnonymousAcks() throws Exception {\n         greeter.greetMeOneWay(\"twice\");\n         greeter.greetMeOneWay(\"thrice\");\n \n-        verifyOnewayAnonymousAcks(GREETMEONEWAY_ACTION);\n+        verifyOnewayAnonymousAcks();\n     }\n \n     @Test\n     public void testOnewayAnonymousAcksDispatch() throws Exception {\n         init(\"org/apache/cxf/systest/ws/rm/rminterceptors.xml\", false, true);\n \n+        dispatch.getRequestContext().put(MessageContext.WSDL_OPERATION,\n+                                         GREETMEONEWAY_NAME);\n+\n         dispatch.invokeOneWay(getDOMRequest(\"One\", true));\n         dispatch.invokeOneWay(getDOMRequest(\"Two\", true));\n         dispatch.invokeOneWay(getDOMRequest(\"Three\", true));\n \n-        String dispatchStyleAction = \n-            \"http://cxf.apache.org/jaxws/dispatch/Greeter/InvokeOneWayRequest\";\n-        verifyOnewayAnonymousAcks(dispatchStyleAction);\n+        verifyOnewayAnonymousAcks();\n     }\n \n-    private void verifyOnewayAnonymousAcks(String greeterAction) throws Exception {\n+    private void verifyOnewayAnonymousAcks() throws Exception {\n         // three application messages plus createSequence\n \n         awaitMessages(4, 4);\n@@ -213,9 +219,9 @@ private void verifyOnewayAnonymousAcks(String greeterAction) throws Exception {\n \n         mf.verifyMessages(4, true);\n         String[] expectedActions = new String[] {RMConstants.getCreateSequenceAction(),\n-                                                 greeterAction,\n-                                                 greeterAction,\n-                                                 greeterAction};\n+                                                 GREETMEONEWAY_ACTION,\n+                                                 GREETMEONEWAY_ACTION,\n+                                                 GREETMEONEWAY_ACTION};\n         mf.verifyActions(expectedActions, true);\n         mf.verifyMessageNumbers(new String[] {null, \"1\", \"2\", \"3\"}, true);\n \n@@ -422,23 +428,24 @@ public void testTwowayNonAnonymous() throws Exception {\n         assertEquals(\"TWO\", greeter.greetMe(\"two\"));\n         assertEquals(\"THREE\", greeter.greetMe(\"three\"));\n \n-        verifyTwowayNonAnonymous(GREETME_ACTION);\n+        verifyTwowayNonAnonymous();\n     }\n \n     @Test\n     public void testTwowayNonAnonymousDispatch() throws Exception {\n         init(\"org/apache/cxf/systest/ws/rm/rminterceptors.xml\", true, true);\n \n+        dispatch.getRequestContext().put(MessageContext.WSDL_OPERATION,\n+                                         GREETME_NAME);\n+\n         verifyDOMResponse(dispatch.invoke(getDOMRequest(\"One\")), \"ONE\");\n         verifyDOMResponse(dispatch.invoke(getDOMRequest(\"Two\")), \"TWO\");\n         verifyDOMResponse(dispatch.invoke(getDOMRequest(\"Three\")), \"THREE\");\n \n-        String dispatchStyleAction = \n-            \"http://cxf.apache.org/jaxws/dispatch/Greeter/InvokeRequest\";\n-        verifyTwowayNonAnonymous(dispatchStyleAction);\n+        verifyTwowayNonAnonymous();\n     }\n \n-    private void verifyTwowayNonAnonymous(String greeterAction) throws Exception {\n+    private void verifyTwowayNonAnonymous() throws Exception {\n     \n         // CreateSequence and three greetMe messages\n         // TODO there should be partial responses to the decoupled responses!\n@@ -450,9 +457,9 @@ private void verifyTwowayNonAnonymous(String greeterAction) throws Exception {\n         \n         mf.verifyMessages(4, true);\n         String[] expectedActions = new String[] {RMConstants.getCreateSequenceAction(), \n-                                                 greeterAction,\n-                                                 greeterAction, \n-                                                 greeterAction};\n+                                                 GREETME_ACTION,\n+                                                 GREETME_ACTION, \n+                                                 GREETME_ACTION};\n         mf.verifyActions(expectedActions, true);\n         mf.verifyMessageNumbers(new String[] {null, \"1\", \"2\", \"3\"}, true);\n         mf.verifyLastMessage(new boolean[] {false, false, false, false}, true);",
                "changes": 41,
                "blob_url": "https://github.com/apache/cxf/blob/2cf78fe07827e899067b9711aaeb3f6748feb81c/systests/src/test/java/org/apache/cxf/systest/ws/rm/SequenceTest.java"
            }
        ],
        "repo": "cxf",
        "message": "Fixed NPE exception in Dispatch client in receipt of partial response when operation was provided via Message.WSDL_OPERATION property on request context.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@775926 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/2cf78fe07827e899067b9711aaeb3f6748feb81c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e094214559f768a10078d4a0b67347130915fc4e",
        "bug_id": "cxf_305",
        "file": [
            {
                "additions": 9,
                "sha": "7e2cdec47dc732cdb78adc625f060853db053078",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d809b56b8ea82abf98ea82f09d66f92b4b5a0b17/rt/core/src/main/java/org/apache/cxf/attachment/AttachmentSerializer.java",
                "deletions": 6,
                "filename": "rt/core/src/main/java/org/apache/cxf/attachment/AttachmentSerializer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/attachment/AttachmentSerializer.java?ref=d809b56b8ea82abf98ea82f09d66f92b4b5a0b17",
                "patch": "@@ -124,13 +124,16 @@ private void writeHeaders(String contentType, String attachmentId, Writer writer\n \n         writer.write(\"Content-Transfer-Encoding: binary\\r\\n\");\n \n-        writer.write(\"Content-ID: <\");\n-        if (attachmentId.charAt(0) == '<'\n-            && attachmentId.charAt(attachmentId.length() - 1) == '>') {\n-            attachmentId = attachmentId.substring(1, attachmentId.length() - 1);\n+        if (attachmentId != null) {\n+            writer.write(\"Content-ID: <\");\n+            if (attachmentId.charAt(0) == '<'\n+                && attachmentId.charAt(attachmentId.length() - 1) == '>') {\n+                attachmentId = attachmentId.substring(1, attachmentId.length() - 1);\n+            }\n+            writer.write(URLDecoder.decode(attachmentId, \"UTF-8\"));\n+            writer.write(\">\\r\\n\");\n         }\n-        writer.write(URLDecoder.decode(attachmentId, \"UTF-8\"));\n-        writer.write(\">\\r\\n\\r\\n\");\n+        writer.write(\"\\r\\n\");\n     }\n \n     /**",
                "changes": 15,
                "blob_url": "https://github.com/apache/cxf/blob/d809b56b8ea82abf98ea82f09d66f92b4b5a0b17/rt/core/src/main/java/org/apache/cxf/attachment/AttachmentSerializer.java"
            },
            {
                "additions": 2,
                "sha": "488923aca7a32bbfc85dd191142e4e00924b7e15",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d809b56b8ea82abf98ea82f09d66f92b4b5a0b17/rt/core/src/main/java/org/apache/cxf/interceptor/AttachmentOutInterceptor.java",
                "deletions": 1,
                "filename": "rt/core/src/main/java/org/apache/cxf/interceptor/AttachmentOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/interceptor/AttachmentOutInterceptor.java?ref=d809b56b8ea82abf98ea82f09d66f92b4b5a0b17",
                "patch": "@@ -47,7 +47,8 @@ public void handleMessage(Message message) {\n         // by declaring the Object.\n         Object prop = message.getContextualProperty(org.apache.cxf.message.Message.MTOM_ENABLED); \n         boolean mtomEnabled = MessageUtils.isTrue(prop);\n-        boolean writeAtts = MessageUtils.isTrue(message.getContextualProperty(WRITE_ATTACHMENTS));\n+        boolean writeAtts = MessageUtils.isTrue(message.getContextualProperty(WRITE_ATTACHMENTS))\n+            || (message.getAttachments() != null && !message.getAttachments().isEmpty());\n         \n         if (!mtomEnabled && !writeAtts) {\n             return;",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/d809b56b8ea82abf98ea82f09d66f92b4b5a0b17/rt/core/src/main/java/org/apache/cxf/interceptor/AttachmentOutInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "If message has attachments, force into mime mode\nIf attachment doesn't have an ID, be OK with that.  Don't NPE.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@773693 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/d809b56b8ea82abf98ea82f09d66f92b4b5a0b17"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/dbd8b8cd20a3e867d8db40f8eb2b4eba9d4147a9",
        "bug_id": "cxf_306",
        "file": [
            {
                "additions": 1,
                "sha": "2366574945158dee59a3dfe92cd6d979da96fb66",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6bef2d486db4fbee62e94861272ed4825714f215/api/src/main/java/org/apache/cxf/tools/common/ToolConstants.java",
                "deletions": 0,
                "filename": "api/src/main/java/org/apache/cxf/tools/common/ToolConstants.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/tools/common/ToolConstants.java?ref=6bef2d486db4fbee62e94861272ed4825714f215",
                "patch": "@@ -40,6 +40,7 @@\n     public static final String CFG_OUTPUTFILE = \"outputfile\";\n     public static final String CFG_WSDLURL = \"wsdlurl\";\n     public static final String CFG_WSDLLOCATION = \"wsdlLocation\";\n+    public static final String CFG_WSDLLIST = \"wsdlList\";\n     public static final String CFG_NAMESPACE = \"namespace\";\n     public static final String CFG_VERBOSE = \"verbose\";\n     public static final String CFG_PORT = \"port\";",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/6bef2d486db4fbee62e94861272ed4825714f215/api/src/main/java/org/apache/cxf/tools/common/ToolConstants.java"
            },
            {
                "additions": 14,
                "sha": "cab9be1d5ee06992d2efddb3a7cbf0a0ade90beb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6bef2d486db4fbee62e94861272ed4825714f215/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/Option.java",
                "deletions": 0,
                "filename": "maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/Option.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/Option.java?ref=6bef2d486db4fbee62e94861272ed4825714f215",
                "patch": "@@ -89,6 +89,12 @@\n      */\n     String wsdlLocation = DEFAULT_WSDL_LOCATION;\n \n+    /**\n+     * Specifies that the wsdlurl contains a plain text, new line delimited,\n+     * list of wsdlurls instead of the wsdl itself.\n+     */\n+    boolean wsdlList;\n+\n     /**\n      * Specifies the frontend. Default is JAXWS. Currently supports only JAXWS frontend.\n      */\n@@ -213,6 +219,14 @@ public boolean isSetWsdlLocation() {\n         return !DEFAULT_WSDL_LOCATION.equals(wsdlLocation);\n     }\n \n+    public boolean isWsdlList() {\n+        return wsdlList;\n+    }\n+\n+    public void setWsdlList(boolean wsdlList) {\n+        this.wsdlList = wsdlList;\n+    }\n+\n     public String getFrontEnd() {\n         return frontEnd;\n     }",
                "changes": 14,
                "blob_url": "https://github.com/apache/cxf/blob/6bef2d486db4fbee62e94861272ed4825714f215/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/Option.java"
            },
            {
                "additions": 3,
                "sha": "f113b2b9092dec1d37b71c847e1cf664dbc71217",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6bef2d486db4fbee62e94861272ed4825714f215/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/WSDL2JavaMojo.java",
                "deletions": 0,
                "filename": "maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/WSDL2JavaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/WSDL2JavaMojo.java?ref=6bef2d486db4fbee62e94861272ed4825714f215",
                "patch": "@@ -459,6 +459,9 @@ private void processWsdl(WsdlOption wsdlOption) throws MojoExecutionException {\n             list.add(\"-wsdlLocation\");\n             list.add(wsdlOption.getWsdlLocation() == null ? \"\" : wsdlOption.getWsdlLocation());\n         }\n+        if (wsdlOption.isWsdlList()) {\n+            list.add(\"-wsdlList\");\n+        }\n         if (getLog().isDebugEnabled() && !list.contains(\"-verbose\")) {\n             list.add(\"-verbose\");            \n         }",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/6bef2d486db4fbee62e94861272ed4825714f215/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/WSDL2JavaMojo.java"
            },
            {
                "additions": 14,
                "sha": "7154840571e9cf17cc6f2a92e15d71708c4f8850",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6bef2d486db4fbee62e94861272ed4825714f215/rt/core/src/main/java/org/apache/cxf/interceptor/LoggingInInterceptor.java",
                "deletions": 2,
                "filename": "rt/core/src/main/java/org/apache/cxf/interceptor/LoggingInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/interceptor/LoggingInInterceptor.java?ref=6bef2d486db4fbee62e94861272ed4825714f215",
                "patch": "@@ -83,6 +83,18 @@ public void handleMessage(Message message) throws Fault {\n         }\n     }\n \n+    /**\n+     * Transform the string before display. The implementation in this class \n+     * does nothing. Override this method if you want to change the contents of the \n+     * logged message before it is delivered to the output. \n+     * For example, you can use this to mask out sensitive information.\n+     * @param originalLogString the raw log message.\n+     * @return transformed data\n+     */\n+    protected String transform(String originalLogString) {\n+        return originalLogString;\n+    } \n+\n     private void logging(Message message) throws Fault {\n         String id = (String)message.getExchange().get(LoggingMessage.ID_KEY);\n         if (id == null) {\n@@ -139,9 +151,9 @@ private void logging(Message message) throws Fault {\n         }\n \n         if (writer != null) {\n-            writer.println(buffer.toString());\n+            writer.println(transform(buffer.toString()));\n         } else if (LOG.isLoggable(Level.INFO)) {\n-            LOG.info(buffer.toString());\n+            LOG.info(transform(buffer.toString()));\n         }\n     }\n }",
                "changes": 16,
                "blob_url": "https://github.com/apache/cxf/blob/6bef2d486db4fbee62e94861272ed4825714f215/rt/core/src/main/java/org/apache/cxf/interceptor/LoggingInInterceptor.java"
            },
            {
                "additions": 7,
                "sha": "99b5f45dac81e668c67eed83c80449cac435d167",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6bef2d486db4fbee62e94861272ed4825714f215/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java",
                "deletions": 1,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java?ref=6bef2d486db4fbee62e94861272ed4825714f215",
                "patch": "@@ -561,10 +561,16 @@ static void setupClasspath(StringBuilder classPath, ClassLoader classLoader)\n                 }\n                 for (URL url : urls) {\n                     if (url.getProtocol().startsWith(\"file\")) {\n-                        File file; \n+                        File file;\n+                        if (url.toURI().getPath() == null) {\n+                            continue;\n+                        }\n                         try { \n                             file = new File(url.toURI().getPath()); \n                         } catch (URISyntaxException urise) { \n+                            if (url.getPath() == null) {\n+                                continue;\n+                            }\n                             file = new File(url.getPath()); \n                         } \n ",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/6bef2d486db4fbee62e94861272ed4825714f215/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java"
            },
            {
                "additions": 7,
                "sha": "d0f78218aee9919c2aae3a33b7cbda66b181524b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6bef2d486db4fbee62e94861272ed4825714f215/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "deletions": 0,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java?ref=6bef2d486db4fbee62e94861272ed4825714f215",
                "patch": "@@ -306,9 +306,16 @@ protected void generateUnformattedServiceList(HttpServletRequest request,\n         if (!isHideServiceList) {\n             List<ServletDestination> destinations = getServletDestinations();\n \n+            boolean renderWsdlList = \"true\".equals(request.getParameter(\"wsdlList\"));\n+            \n             for (ServletDestination sd : destinations) {\n                 String address = sd.getEndpointInfo().getAddress();\n                 response.getWriter().write(address);\n+                \n+                if (renderWsdlList) {\n+                    response.getWriter().write(\"?wsdl\");\n+                }\n+                \n                 response.getWriter().write('\\n');\n             }\n         }",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/6bef2d486db4fbee62e94861272ed4825714f215/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletController.java"
            },
            {
                "additions": 25,
                "sha": "ce4f65d999f4d2fe0656c2d3e83a34661925ddfd",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6bef2d486db4fbee62e94861272ed4825714f215/tools/common/src/main/java/org/apache/cxf/tools/common/ToolContext.java",
                "deletions": 1,
                "filename": "tools/common/src/main/java/org/apache/cxf/tools/common/ToolContext.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/common/src/main/java/org/apache/cxf/tools/common/ToolContext.java?ref=6bef2d486db4fbee62e94861272ed4825714f215",
                "patch": "@@ -97,7 +97,7 @@ public boolean containsKey(String key) {\n     public Object get(String key) {\n         return (paramMap == null) ? null : paramMap.get(key);\n     }\n-\n+    \n     public Object get(String key, Object defaultValue) {\n         if (!optionSet(key)) {\n             return defaultValue;\n@@ -263,4 +263,28 @@ public QName getQName(String key, String defaultNamespace) {\n     public boolean isPackageNameChanged() {\n         return packageNameChanged;\n     }\n+    \n+    /**\n+     * This method attempts to do a deep copy of items which may change in this ToolContext.\n+     * The intent of this is to be able to take a snapshot of the state of the ToolContext\n+     * after it's initialised so we can run a tool multiple times with the same setup\n+     * while not having the state preserved between multiple runs. I didn't want \n+     * to call this clone() as it neither does a deep nor shallow copy. It does a mix\n+     * based on my best guess at what changes and what doesn't.\n+     */\n+    public ToolContext makeCopy() {\n+        ToolContext newCopy = new ToolContext();\n+        \n+        newCopy.javaModel = javaModel;\n+        newCopy.paramMap = new HashMap<String, Object>(paramMap);\n+        newCopy.packageName = packageName;\n+        newCopy.packageNameChanged = packageNameChanged;\n+        newCopy.namespacePackageMap = new HashMap<String, String>(namespacePackageMap);\n+        newCopy.excludeNamespacePackageMap = new HashMap<String, String>(excludeNamespacePackageMap);\n+        newCopy.jaxbBindingFiles = new ArrayList<InputSource>(jaxbBindingFiles);\n+        newCopy.excludePkgList = new ArrayList<String>(excludePkgList);\n+        newCopy.excludeFileList = new ArrayList<String>(excludeFileList);\n+        \n+        return newCopy;\n+    }    \n }",
                "changes": 26,
                "blob_url": "https://github.com/apache/cxf/blob/6bef2d486db4fbee62e94861272ed4825714f215/tools/common/src/main/java/org/apache/cxf/tools/common/ToolContext.java"
            },
            {
                "additions": 128,
                "sha": "44556ded1061893653b8211953a60d1568355c80",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6bef2d486db4fbee62e94861272ed4825714f215/tools/wsdlto/core/src/main/java/org/apache/cxf/tools/wsdlto/WSDLToJavaContainer.java",
                "deletions": 92,
                "filename": "tools/wsdlto/core/src/main/java/org/apache/cxf/tools/wsdlto/WSDLToJavaContainer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/core/src/main/java/org/apache/cxf/tools/wsdlto/WSDLToJavaContainer.java?ref=6bef2d486db4fbee62e94861272ed4825714f215",
                "patch": "@@ -19,9 +19,11 @@\n \n package org.apache.cxf.tools.wsdlto;\n \n+import java.io.BufferedReader;\n import java.io.File;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.io.InputStreamReader;\n import java.net.MalformedURLException;\n import java.net.URL;\n import java.util.ArrayList;\n@@ -91,115 +93,149 @@ public WSDLToJavaContainer(String name, ToolSpec toolspec) throws Exception {\n         return WSDLConstants.getVersion(version);\n     }\n \n-    @SuppressWarnings(\"unchecked\")\n     public void execute() throws ToolException {\n-        if (!hasInfoOption()) {\n-            // TODO: After runtime support w3c EPR mapping ,this will be removed\n-            //context.put(ToolConstants.CFG_NO_ADDRESS_BINDING, \n-            //            ToolConstants.CFG_NO_ADDRESS_BINDING);\n-            buildToolContext();\n-            validate(context);\n-            FrontEndProfile frontend = context.get(FrontEndProfile.class);\n-\n-            if (frontend == null) {\n-                throw new ToolException(new Message(\"FOUND_NO_FRONTEND\", LOG));\n-            }\n+        if (hasInfoOption()) {\n+            return;\n+        }\n \n-            WSDLConstants.WSDLVersion version = getWSDLVersion();\n-\n-            String wsdlURL = (String)context.get(ToolConstants.CFG_WSDLURL);\n-            List<ServiceInfo> serviceList = (List<ServiceInfo>)context.get(ToolConstants.SERVICE_LIST);\n-            if (serviceList == null) {\n-                serviceList = new ArrayList<ServiceInfo>();\n-\n-                // Build the ServiceModel from the WSDLModel\n-                if (version == WSDLConstants.WSDLVersion.WSDL11) {\n-                    AbstractWSDLBuilder<Definition> builder = (AbstractWSDLBuilder<Definition>)frontend\n-                        .getWSDLBuilder();\n-                    builder.setContext(context);\n-                    builder.setBus(getBus());\n-                    context.put(Bus.class, getBus());\n-                    wsdlURL = URIParserUtil.getAbsoluteURI(wsdlURL);\n-                    builder.build(wsdlURL);\n-                    builder.customize();\n-                    Definition definition = builder.getWSDLModel();\n-\n-                    context.put(Definition.class, definition);\n-\n-                    builder.validate(definition);\n-\n-                    WSDLServiceBuilder serviceBuilder = new WSDLServiceBuilder(getBus());\n-                    serviceBuilder.setIgnoreUnknownBindings(true);\n-                    String serviceName = (String)context.get(ToolConstants.CFG_SERVICENAME);\n-\n-                    if (serviceName != null) {\n-                        List<ServiceInfo> services = serviceBuilder\n-                            .buildServices(definition, getServiceQName(definition));\n-                        serviceList.addAll(services);\n-                    } else if (definition.getServices().size() > 0) {\n-                        serviceList = serviceBuilder.buildServices(definition);\n-                    } else {\n-                        serviceList = serviceBuilder.buildMockServices(definition);\n-                    }\n+        buildToolContext();\n+        \n+        boolean isWsdlList = context.optionSet(ToolConstants.CFG_WSDLLIST);\n \n-                } else {\n-                    // TODO: wsdl2.0 support\n+        if (isWsdlList) {\n+            try {\n+                ToolContext initialContextState = context.makeCopy();\n+                String wsdlURL = (String)context.get(ToolConstants.CFG_WSDLURL);\n+                wsdlURL = URIParserUtil.getAbsoluteURI(wsdlURL);\n+\n+                URL url = new URL(wsdlURL);\n+                InputStream is = (InputStream)url.getContent();\n+                BufferedReader reader = new BufferedReader(new InputStreamReader(is));\n+                String tempLine = null;\n+                while ((tempLine = reader.readLine()) != null) {                    \n+                    ToolContext freshContext = initialContextState.makeCopy();\n+                    freshContext.put(ToolConstants.CFG_WSDLURL, tempLine);\n+                    setContext(freshContext);\n+                    buildToolContext();\n+                    \n+                    processWsdl();\n                 }\n-            }\n-            context.put(ToolConstants.SERVICE_LIST, serviceList);\n-            \n-            Map<String, InterfaceInfo> interfaces = new LinkedHashMap<String, InterfaceInfo>();\n-\n-            ServiceInfo service0 = serviceList.get(0);\n-            SchemaCollection schemaCollection = service0.getXmlSchemaCollection();\n-            context.put(ToolConstants.XML_SCHEMA_COLLECTION, schemaCollection);\n-            \n-            context.put(ToolConstants.PORTTYPE_MAP, interfaces);\n-            context.put(ClassCollector.class, new ClassCollector());\n-            Processor processor = frontend.getProcessor();\n-            if (processor instanceof ClassNameProcessor) {\n-                processor.setEnvironment(context);\n-                for (ServiceInfo service : serviceList) {\n-\n-                    context.put(ServiceInfo.class, service);\n-\n-                    ((ClassNameProcessor)processor).processClassNames();\n-\n-                    context.put(ServiceInfo.class, null);\n+            } catch (IOException e) {\n+                throw new ToolException(e);\n+            }       \n+        } else {\n+            processWsdl();\n+        }\n+    }\n+\n+    private void processWsdl() {\n+        // TODO: After runtime support w3c EPR mapping ,this will be removed\n+        //context.put(ToolConstants.CFG_NO_ADDRESS_BINDING, \n+        //            ToolConstants.CFG_NO_ADDRESS_BINDING);\n+        validate(context);\n+        FrontEndProfile frontend = context.get(FrontEndProfile.class);\n+\n+        if (frontend == null) {\n+            throw new ToolException(new Message(\"FOUND_NO_FRONTEND\", LOG));\n+        }\n+\n+        WSDLConstants.WSDLVersion version = getWSDLVersion();\n+\n+        String wsdlURL = (String)context.get(ToolConstants.CFG_WSDLURL);\n+\n+        @SuppressWarnings(\"unchecked\")\n+        List<ServiceInfo> serviceList = (List<ServiceInfo>)context.get(ToolConstants.SERVICE_LIST);\n+        if (serviceList == null) {\n+            serviceList = new ArrayList<ServiceInfo>();\n+\n+            // Build the ServiceModel from the WSDLModel\n+            if (version == WSDLConstants.WSDLVersion.WSDL11) {\n+                @SuppressWarnings(\"unchecked\")\n+                AbstractWSDLBuilder<Definition> builder = (AbstractWSDLBuilder<Definition>)frontend\n+                    .getWSDLBuilder();\n+                builder.setContext(context);\n+                builder.setBus(getBus());\n+                context.put(Bus.class, getBus());\n+                wsdlURL = URIParserUtil.getAbsoluteURI(wsdlURL);\n+                builder.build(wsdlURL);\n+                builder.customize();\n+                Definition definition = builder.getWSDLModel();\n+\n+                context.put(Definition.class, definition);\n+\n+                builder.validate(definition);\n+\n+                WSDLServiceBuilder serviceBuilder = new WSDLServiceBuilder(getBus());\n+                serviceBuilder.setIgnoreUnknownBindings(true);\n+                String serviceName = (String)context.get(ToolConstants.CFG_SERVICENAME);\n+\n+                if (serviceName != null) {\n+                    List<ServiceInfo> services = serviceBuilder\n+                        .buildServices(definition, getServiceQName(definition));\n+                    serviceList.addAll(services);\n+                } else if (definition.getServices().size() > 0) {\n+                    serviceList = serviceBuilder.buildServices(definition);\n+                } else {\n+                    serviceList = serviceBuilder.buildMockServices(definition);\n                 }\n+\n+            } else {\n+                // TODO: wsdl2.0 support\n             }\n-            generateTypes();\n+        }\n+        context.put(ToolConstants.SERVICE_LIST, serviceList);\n+        \n+        Map<String, InterfaceInfo> interfaces = new LinkedHashMap<String, InterfaceInfo>();\n \n+        ServiceInfo service0 = serviceList.get(0);\n+        SchemaCollection schemaCollection = service0.getXmlSchemaCollection();\n+        context.put(ToolConstants.XML_SCHEMA_COLLECTION, schemaCollection);\n+        \n+        context.put(ToolConstants.PORTTYPE_MAP, interfaces);\n+        context.put(ClassCollector.class, new ClassCollector());\n+        Processor processor = frontend.getProcessor();\n+        if (processor instanceof ClassNameProcessor) {\n+            processor.setEnvironment(context);\n             for (ServiceInfo service : serviceList) {\n \n                 context.put(ServiceInfo.class, service);\n \n-                validate(service);\n+                ((ClassNameProcessor)processor).processClassNames();\n \n-                // Build the JavaModel from the ServiceModel\n-                processor.setEnvironment(context);\n-                processor.process();\n+                context.put(ServiceInfo.class, null);\n+            }\n+        }\n+        generateTypes();\n \n-                if (!isSuppressCodeGen()) {\n-                    // Generate artifacts\n-                    for (FrontEndGenerator generator : frontend.getGenerators()) {\n-                        generator.generate(context);\n-                    }\n+        for (ServiceInfo service : serviceList) {\n+\n+            context.put(ServiceInfo.class, service);\n+\n+            validate(service);\n+\n+            // Build the JavaModel from the ServiceModel\n+            processor.setEnvironment(context);\n+            processor.process();\n+\n+            if (!isSuppressCodeGen()) {\n+                // Generate artifacts\n+                for (FrontEndGenerator generator : frontend.getGenerators()) {\n+                    generator.generate(context);\n                 }\n             }\n-            context.remove(ToolConstants.SERVICE_LIST);\n+        }\n+        context.remove(ToolConstants.SERVICE_LIST);\n \n-            // Build projects: compile classes and copy resources etc.\n-            if (context.optionSet(ToolConstants.CFG_COMPILE)) {\n-                new ClassUtils().compile(context);\n-            }\n+        // Build projects: compile classes and copy resources etc.\n+        if (context.optionSet(ToolConstants.CFG_COMPILE)) {\n+            new ClassUtils().compile(context);\n+        }\n \n-            if (context.isExcludeNamespaceEnabled()) {\n-                try {\n-                    removeExcludeFiles();\n-                } catch (IOException e) {\n-                    throw new ToolException(e);\n-                }\n+        if (context.isExcludeNamespaceEnabled()) {\n+            try {\n+                removeExcludeFiles();\n+            } catch (IOException e) {\n+                throw new ToolException(e);\n             }\n         }\n     }",
                "changes": 220,
                "blob_url": "https://github.com/apache/cxf/blob/6bef2d486db4fbee62e94861272ed4825714f215/tools/wsdlto/core/src/main/java/org/apache/cxf/tools/wsdlto/WSDLToJavaContainer.java"
            },
            {
                "additions": 10,
                "sha": "e776aa888bc3412cb0b984ccc7d87c7bb89babc4",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6bef2d486db4fbee62e94861272ed4825714f215/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/jaxws-toolspec.xml",
                "deletions": 0,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/jaxws-toolspec.xml",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/jaxws-toolspec.xml?ref=6bef2d486db4fbee62e94861272ed4825714f215",
                "patch": "@@ -315,6 +315,16 @@ Examples:\n                 <switch>q</switch>\n             </option>\n \n+\t        <option id=\"wsdlList\" maxOccurs=\"1\">\n+\t            <annotation>\n+\t                Indicates the wsdlurl is a plain text list of wsdlurls that are new line delimited.\n+\t                As an example the wsdlurl might point to \n+\t                http://127.0.0.1:8080/context_path/ws?formatted=false&amp;wsdlList=true on a cxf \n+\t                server. \n+\t            </annotation>\n+\t            <switch>wsdlList</switch>\n+\t        </option>\n+\n         </optionGroup>\n         <argument id=\"wsdlurl\" minOccurs=\"1\" maxOccurs=\"1\">\n             <annotation>",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/6bef2d486db4fbee62e94861272ed4825714f215/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/jaxws-toolspec.xml"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2177, CXF-2174, CXF-2175] Patches from Juan Uys, Ted Leung applied\nAdd NPE check to DynamicClient\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@766763 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/6bef2d486db4fbee62e94861272ed4825714f215"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/56bbde09564042015424c08998cdb2af6c8bdec2",
        "bug_id": "cxf_307",
        "file": [
            {
                "additions": 5,
                "sha": "8cf6a343d67957133eef2d47eb1bdedef345c6a2",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/98062c748282de1bb198b6e2685840a87f4e5a96/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/AbstractJAXWSMethodInvoker.java",
                "deletions": 3,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/AbstractJAXWSMethodInvoker.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/AbstractJAXWSMethodInvoker.java?ref=98062c748282de1bb198b6e2685840a87f4e5a96",
                "patch": "@@ -127,9 +127,11 @@ protected void updateWebServiceContext(Exchange exchange, MessageContext ctx) {\n             List list = (List) ctx.get(Header.HEADER_LIST);\n             if (list != null && !list.isEmpty()) {\n                 SoapMessage sm = (SoapMessage) createResponseMessage(exchange);\n-                Iterator iter = list.iterator();\n-                while (iter.hasNext()) {\n-                    sm.getHeaders().add((Header) iter.next());\n+                if (sm != null) {\n+                    Iterator iter = list.iterator();\n+                    while (iter.hasNext()) {\n+                        sm.getHeaders().add((Header) iter.next());\n+                    }\n                 }\n             }\n         }",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/98062c748282de1bb198b6e2685840a87f4e5a96/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/AbstractJAXWSMethodInvoker.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-2122] Fix potential NPE in the method invoker.   Fix from Richard Opalka applied.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@760178 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/98062c748282de1bb198b6e2685840a87f4e5a96"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/292ec4031ee036fa0121dd7e6ef50ea3e143edcd",
        "bug_id": "cxf_308",
        "file": [
            {
                "additions": 19,
                "sha": "bf4e0023299f2fccdddc1055d1189463b9222777",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/d01423ed8042caeea60eba66f06eaeb66996146a/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/AbstractBindingBuilder.java",
                "deletions": 16,
                "filename": "rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/AbstractBindingBuilder.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/AbstractBindingBuilder.java?ref=d01423ed8042caeea60eba66f06eaeb66996146a",
                "patch": "@@ -995,25 +995,28 @@ public void setEncryptionUser(WSSecEncryptedKey encrKeyBuilder, TokenWrapper tok\n         String encrUser = (String)message.getContextualProperty(sign \n                                                                 ? SecurityConstants.SIGNATURE_USERNAME\n                                                                 : SecurityConstants.ENCRYPT_USERNAME);\n-        if (encrUser == null) {\n-            encrUser = crypto.getDefaultX509Alias();\n-        }\n-        if (encrUser == null) {\n-            try {\n-                Enumeration<String> en = crypto.getKeyStore().aliases();\n-                if (en.hasMoreElements()) {\n-                    encrUser = en.nextElement();\n+        if (crypto != null) {\n+            if (encrUser == null) {\n+                encrUser = crypto.getDefaultX509Alias();\n+            }\n+            if (encrUser == null) {\n+                try {\n+                    Enumeration<String> en = crypto.getKeyStore().aliases();\n+                    if (en.hasMoreElements()) {\n+                        encrUser = en.nextElement();\n+                    }\n+                    if (en.hasMoreElements()) {\n+                        //more than one alias in the keystore, user WILL need\n+                        //to specify\n+                        encrUser = null;\n+                    }            \n+                } catch (KeyStoreException e) {\n+                    //ignore\n                 }\n-                if (en.hasMoreElements()) {\n-                    //more than one alias in the keystore, user WILL need\n-                    //to specify\n-                    encrUser = null;\n-                }            \n-            } catch (KeyStoreException e) {\n-                //ignore\n             }\n+        } else if (encrUser == null || \"\".equals(encrUser)) {\n+            policyNotAsserted(token, \"No \" + (sign ? \"signature\" : \"encryption\") + \" crypto object found.\");\n         }\n-\n         if (encrUser == null || \"\".equals(encrUser)) {\n             policyNotAsserted(token, \"No \" + (sign ? \"signature\" : \"encryption\") + \" username found.\");\n         }",
                "changes": 35,
                "blob_url": "https://github.com/apache/cxf/blob/d01423ed8042caeea60eba66f06eaeb66996146a/rt/ws/security/src/main/java/org/apache/cxf/ws/security/wss4j/policyhandlers/AbstractBindingBuilder.java"
            }
        ],
        "repo": "cxf",
        "message": "Throw a better exception than a NPE if the crypto properties are not given\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@759962 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/d01423ed8042caeea60eba66f06eaeb66996146a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5823c88f598b3f0588cef0ce87f5d06bd399b0f4",
        "bug_id": "cxf_309",
        "file": [
            {
                "additions": 9,
                "sha": "5dca9193c067bf3c745347802127a08930b70c6d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/f227e61764874c882068d74c301b59a553d61574/tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/WSDLRefValidator.java",
                "deletions": 3,
                "filename": "tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/WSDLRefValidator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/WSDLRefValidator.java?ref=f227e61764874c882068d74c301b59a553d61574",
                "patch": "@@ -247,7 +247,7 @@ public boolean isValid() {\n                                                   vNode.getPlainText()));\n                 }\n             }\n-        } catch (ToolException e) {\n+        } catch (Exception e) {\n             this.vResults.addError(e.getMessage());\n             return false;\n         }\n@@ -393,7 +393,7 @@ private void addWarning(String warningMsg) {\n     }\n \n     @SuppressWarnings(\"unchecked\")\n-    private void collectValidationPoints() {\n+    private void collectValidationPoints() throws Exception {\n         if (services.size() == 0) {\n             LOG.log(Level.WARNING, \"WSDL document \" \n                     + this.definition.getDocumentBaseURI() + \" does not define any services\");\n@@ -407,14 +407,20 @@ private void collectValidationPoints() {\n         collectValidationPointsForMessages();\n     }\n \n-    private void collectValidationPointsForBindings() {\n+    private void collectValidationPointsForBindings() throws Exception {\n         Map<QName, XNode> vBindingNodes = new HashMap<QName, XNode>();\n         for (Service service : services.values()) {\n             vBindingNodes.putAll(getBindings(service));\n         }\n \n         for (QName bName : vBindingNodes.keySet()) {\n             Binding binding = this.definition.getBinding(bName);\n+            if (binding == null) {\n+                LOG.log(Level.SEVERE, bName.toString() \n+                        + \" is not correct, please check that the correct namespace is being used\");\n+                throw new Exception(bName.toString() \n+                        + \" is not correct, please check that the correct namespace is being used\");\n+            }\n             XNode vBindingNode = getXNode(binding);\n             vBindingNode.setFailurePoint(vBindingNodes.get(bName));\n             vNodes.add(vBindingNode);",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/f227e61764874c882068d74c301b59a553d61574/tools/validator/src/main/java/org/apache/cxf/tools/validator/internal/WSDLRefValidator.java"
            },
            {
                "additions": 13,
                "sha": "9acf67652515c341a3f8e1df5557f28dc6c810cd",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/f227e61764874c882068d74c301b59a553d61574/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java",
                "deletions": 0,
                "filename": "tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java?ref=f227e61764874c882068d74c301b59a553d61574",
                "patch": "@@ -1041,5 +1041,18 @@ public void testCXF1048() throws Exception {\n         assertEquals(\"GreeterSOAPService\", webServiceAnn.serviceName());\n         assertEquals(\"PingSoapPort\", webServiceAnn.portName());\n     }\n+\n+    \n+    @Test\n+    public void testCXF1694() throws Exception {\n+\n+        try {\n+            env.put(ToolConstants.CFG_WSDLURL, getLocation(\"/wsdl2java_wsdl/cxf1694/test.wsdl\"));\n+            processor.setContext(env);\n+            processor.execute();\n+        } catch (Exception ex) {\n+            assertTrue(ex.getMessage().contains(\"{http://child/}Binding is not correct\"));\n+        }\n+    }\n     \n }",
                "changes": 13,
                "blob_url": "https://github.com/apache/cxf/blob/f227e61764874c882068d74c301b59a553d61574/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java"
            },
            {
                "additions": 39,
                "sha": "728af270d86c9f2d9cf387f7c6d99adb6c585529",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/f227e61764874c882068d74c301b59a553d61574/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1694/child.wsdl",
                "deletions": 0,
                "filename": "tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1694/child.wsdl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1694/child.wsdl?ref=f227e61764874c882068d74c301b59a553d61574",
                "patch": "@@ -0,0 +1,39 @@\n+<wsdl:definitions name=\"Child\"\r\n+  xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"\r\n+  xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\"\r\n+  xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\r\n+  xmlns:tns=\"http://child/\"\r\n+  xmlns:xsd=\"http://child/xsd\"\r\n+  targetNamespace=\"http://child/\">\r\n+  <wsdl:types>\r\n+    <xs:schema targetNamespace=\"http://child/xsd\">\r\n+      <xs:element name=\"Message\">\r\n+        <xs:complexType>\r\n+          <xs:sequence/>\r\n+        </xs:complexType>\r\n+      </xs:element>\r\n+    </xs:schema>\r\n+  </wsdl:types>\r\n+  <wsdl:message name=\"Message\">\r\n+    <wsdl:part name=\"msg\" element=\"xsd:Message\"/>\r\n+  </wsdl:message>\r\n+  <wsdl:portType name=\"PortType\">\r\n+    <wsdl:operation name=\"Operation\">\r\n+      <wsdl:input message=\"tns:Message\"/>\r\n+    </wsdl:operation>\r\n+  </wsdl:portType>\r\n+  <wsdl:binding name=\"Binding\" type=\"tns:PortType\">\r\n+        <soap:binding style=\"document\" transport=\"http://schemas.xmlsoap.org/soap/http\" />\r\n+    <wsdl:operation name=\"Operation\">\r\n+      <soap:operation style=\"document\"/>\r\n+      <wsdl:input>\r\n+        <soap:body use=\"literal\"/>\r\n+      </wsdl:input>\r\n+    </wsdl:operation>\r\n+  </wsdl:binding>\r\n+  <wsdl:service name=\"Service\">\r\n+        <wsdl:port name=\"Port\" binding=\"tns:Binding\">\r\n+            <soap:address location=\"http://localhost/service\" />\r\n+        </wsdl:port>\r\n+  </wsdl:service>\r\n+</wsdl:definitions>\n\\ No newline at end of file",
                "changes": 39,
                "blob_url": "https://github.com/apache/cxf/blob/f227e61764874c882068d74c301b59a553d61574/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1694/child.wsdl"
            },
            {
                "additions": 3,
                "sha": "9aaa96929f3af48a138ed0660b7811c40b7a6648",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/f227e61764874c882068d74c301b59a553d61574/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1694/test.wsdl",
                "deletions": 0,
                "filename": "tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1694/test.wsdl",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1694/test.wsdl?ref=f227e61764874c882068d74c301b59a553d61574",
                "patch": "@@ -0,0 +1,3 @@\n+<wsdl:definitions xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" name=\"Parent\">\r\n+    <wsdl:import namespace=\"http://incorrect-namespace\" location=\"child.wsdl\" />\r\n+</wsdl:definitions>\n\\ No newline at end of file",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/f227e61764874c882068d74c301b59a553d61574/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1694/test.wsdl"
            }
        ],
        "repo": "cxf",
        "message": "Fix for https://issues.apache.org/jira/browse/CXF-1694\nNPE with invalid wsld:impor\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@688735 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/f227e61764874c882068d74c301b59a553d61574"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/e212736195d6e6d92d4adc30ffd4972d588ce209",
        "bug_id": "cxf_310",
        "file": [
            {
                "additions": 17,
                "sha": "5aa45fff95f5a000114722b002a14509d3d47503",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2040cc7d79b65de0d61802f62e10b5723e623049/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceConfiguration.java",
                "deletions": 15,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceConfiguration.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceConfiguration.java?ref=2040cc7d79b65de0d61802f62e10b5723e623049",
                "patch": "@@ -145,29 +145,31 @@ public Boolean isWebMethod(final Method method) {\n         if (method == null\n             || method.getReturnType().equals(Future.class)\n             || method.getReturnType().equals(Response.class)) {\n-            return false;\n+            return Boolean.FALSE;\n         }\n         \n-        if (method != null) {\n-            WebMethod wm = method.getAnnotation(WebMethod.class);\n-            if (wm != null) {\n-                if (wm.exclude()) {\n-                    return Boolean.FALSE;\n-                } else {\n-                    return Boolean.TRUE;\n-                }\n+        WebMethod wm = method.getAnnotation(WebMethod.class);\n+        if (wm != null) {\n+            if (wm.exclude()) {\n+                return Boolean.FALSE;\n             } else {\n-                if (method.getDeclaringClass().isInterface()) {\n-                    return hasWebServiceAnnotation(method);\n-                }\n-                return hasWebServiceAnnotation(method);              \n+                return Boolean.TRUE;\n             }\n+        } \n+        if (method.getDeclaringClass().isInterface()) {\n+            return hasWebServiceAnnotation(method);\n+        }\n+        if (implInfo.getSEIClass() == null) {\n+            return hasWebServiceAnnotation(method);\n         }\n-        return Boolean.FALSE;\n+        return implInfo.getSEIClass().isAssignableFrom(method.getDeclaringClass());\n     }\n \n     @Override\n     public Boolean isOperation(final Method method) {\n+        if (Object.class.equals(method.getDeclaringClass())) {\n+            return false;\n+        }\n         Class implClz = implInfo.getImplementorClass();\n         if (isWebMethod(getDeclaredMethod(implClz, method))) {\n             return true;\n@@ -190,7 +192,7 @@ private Method getDeclaredMethod(Class<?> endpointClass, Method method) {\n             } catch (SecurityException e) {\n                 throw new ServiceConstructionException(e);\n             } catch (NoSuchMethodException e) {\n-                return null;\n+                return isWebMethod(method) ? method : null;\n             }\n         }\n         return method;",
                "changes": 32,
                "blob_url": "https://github.com/apache/cxf/blob/2040cc7d79b65de0d61802f62e10b5723e623049/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceConfiguration.java"
            },
            {
                "additions": 1,
                "sha": "76d8cef8001cf4d2d8a55839959fa3eb7e23c205",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2040cc7d79b65de0d61802f62e10b5723e623049/tools/javato/ws/src/test/java/org/apache/cxf/tools/java2ws/JavaToWSTest.java",
                "deletions": 1,
                "filename": "tools/javato/ws/src/test/java/org/apache/cxf/tools/java2ws/JavaToWSTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/javato/ws/src/test/java/org/apache/cxf/tools/java2ws/JavaToWSTest.java?ref=2040cc7d79b65de0d61802f62e10b5723e623049",
                "patch": "@@ -271,7 +271,7 @@ public void testImplClassWithoutSei() throws Exception {\n         File wsdlFile = outputFile(\"tmp.wsdl\");\n         String[] args = new String[] {\"-wsdl\", \"-o\", output.getPath() + \"/tmp.wsdl\", \"-verbose\", \"-s\",\n                                       output.getPath(), \"-frontend\", \"jaxws\", \"-client\", \"-server\",\n-                                      \"org.apache.cxf.tools.fortest.GreeterImpl\"};\n+                                      org.apache.cxf.tools.fortest.GreeterImpl.class.getName()};\n         JavaToWS.main(args);\n         assertTrue(\"Failed to generate WSDL file\", wsdlFile.exists());\n ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/2040cc7d79b65de0d61802f62e10b5723e623049/tools/javato/ws/src/test/java/org/apache/cxf/tools/java2ws/JavaToWSTest.java"
            },
            {
                "additions": 1,
                "sha": "39a6b3523d4851f1cf087ede23b01d3505918875",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2040cc7d79b65de0d61802f62e10b5723e623049/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/template/impl.vm",
                "deletions": 1,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/template/impl.vm",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/template/impl.vm?ref=2040cc7d79b65de0d61802f62e10b5723e623049",
                "patch": "@@ -34,7 +34,7 @@ import ${import};\n  * \r\n  */\r\n \r\n-@javax.jws.WebService(name = \"$intf.Name\",\r\n+@javax.jws.WebService(\r\n #if ($service.ServiceName != \"\") \r\n                       serviceName = \"$service.ServiceName\",\r\n #end\r",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/2040cc7d79b65de0d61802f62e10b5723e623049/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/template/impl.vm"
            },
            {
                "additions": 4,
                "sha": "35f2385695ded2ba54d6950c713dedca5ab3a753",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2040cc7d79b65de0d61802f62e10b5723e623049/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java",
                "deletions": 2,
                "filename": "tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java?ref=2040cc7d79b65de0d61802f62e10b5723e623049",
                "patch": "@@ -94,7 +94,8 @@ public void testLogicalOnlyWSDL() throws Exception {\n \n         Class clz = classLoader.loadClass(\"org.apache.cxf.cxf1678.hello_world_soap_http.GreeterImpl\");\n         WebService webServiceAnn = AnnotationUtil.getPrivClassAnnotation(clz, WebService.class);\n-        assertEquals(\"Greeter\", webServiceAnn.name());\n+        assertEquals(\"org.apache.cxf.cxf1678.hello_world_soap_http.Greeter\",\n+                     webServiceAnn.endpointInterface());\n     }\n \n     @Test\n@@ -119,7 +120,8 @@ public void testBug305773() throws Exception {\n         Class clz = classLoader.loadClass(\"org.apache.cxf.w2j.hello_world_soap_http.GreeterImpl\");\n \n         WebService webServiceAnn = AnnotationUtil.getPrivClassAnnotation(clz, WebService.class);\n-        assertEquals(\"Greeter\", webServiceAnn.name());\n+        assertTrue(\"Impl class should note generate name property value in webService annotation\",\n+                    webServiceAnn.name().equals(\"\"));\n         assertFalse(\"Impl class should generate portName property value in webService annotation\",\n                     webServiceAnn.portName().equals(\"\"));\n         assertFalse(\"Impl class should generate serviceName property value in webService annotation\",",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/2040cc7d79b65de0d61802f62e10b5723e623049/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java"
            },
            {
                "additions": 0,
                "sha": "f724b92a0aee31233c6640a0a1034a29a4ff4962",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/2040cc7d79b65de0d61802f62e10b5723e623049/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenTest.java",
                "deletions": 1,
                "filename": "tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenTest.java?ref=2040cc7d79b65de0d61802f62e10b5723e623049",
                "patch": "@@ -315,7 +315,6 @@ public void testRPCLit() throws Exception {\n         assertTrue(\"Webservice annotation wsdlLocation should begin with file\", ws.wsdlLocation()\n             .startsWith(\"file\"));\n         assertEquals(\"org.apache.cxf.w2j.hello_world_rpclit.GreeterRPCLit\", ws.endpointInterface());\n-        assertEquals(\"GreeterRPCLit\", ws.name());\n \n     }\n ",
                "changes": 1,
                "blob_url": "https://github.com/apache/cxf/blob/2040cc7d79b65de0d61802f62e10b5723e623049/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenTest.java"
            }
        ],
        "repo": "cxf",
        "message": "Update to try and eliminate a NPE with service creation\n[CXF-1756] Remove name attribute from generated impls\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@687463 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/2040cc7d79b65de0d61802f62e10b5723e623049"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf",
        "bug_id": "cxf_311",
        "file": [
            {
                "additions": 11,
                "sha": "f737a2fd8cbcf870b4a8b94cc360df360717410e",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/de813c5b37dab65320d7b4cccd45232abb54d207/rt/core/src/main/java/org/apache/cxf/transport/DestinationFactoryManagerImpl.java",
                "deletions": 7,
                "filename": "rt/core/src/main/java/org/apache/cxf/transport/DestinationFactoryManagerImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/transport/DestinationFactoryManagerImpl.java?ref=de813c5b37dab65320d7b4cccd45232abb54d207",
                "patch": "@@ -68,19 +68,19 @@ public void setMapProvider(MapProvider<String, DestinationFactory> mapProvider)\n     public void setBus(Bus b) {\n         bus = b;\n     }\n-    \n+\n     @PostConstruct\n     public void register() {\n         if (null != bus) {\n             bus.setExtension(this, DestinationFactoryManager.class);\n         }\n     }\n-    \n+\n \n \n     /*\n      * (non-Javadoc)\n-     * \n+     *\n      * @see org.apache.cxf.bus.DestinationFactoryManager#registerDestinationFactory(java.lang.String,\n      *      org.apache.cxf.transports.DestinationFactory)\n      */\n@@ -90,7 +90,7 @@ public void registerDestinationFactory(String namespace, DestinationFactory fact\n \n     /*\n      * (non-Javadoc)\n-     * \n+     *\n      * @see org.apache.cxf.bus.DestinationFactoryManager#deregisterDestinationFactory(java.lang.String)\n      */\n     public void deregisterDestinationFactory(String namespace) {\n@@ -99,14 +99,14 @@ public void deregisterDestinationFactory(String namespace) {\n \n     /*\n      * (non-Javadoc)\n-     * \n+     *\n      * @see org.apache.cxf.bus.DestinationFactoryManager#DestinationFactory(java.lang.String)\n      */\n     /**\n      * Returns the conduit initiator for the given namespace, constructing it\n      * (and storing in the cache for future reference) if necessary, using its\n      * list of factory classname to namespace mappings.\n-     * \n+     *\n      * @param namespace the namespace.\n      */\n     public DestinationFactory getDestinationFactory(String namespace) throws BusException {\n@@ -123,6 +123,10 @@ public void shutdown() {\n     }\n \n     public DestinationFactory getDestinationFactoryForUri(String uri) {\n+        //If the uri is related path or has no protocol prefix , we will set it to be http\n+        if (uri.startsWith(\"/\") || uri.indexOf(\":\") < 0) {\n+            uri = \"http://\" + uri;\n+        }\n         //first attempt the ones already registered\n         for (Map.Entry<String, DestinationFactory> df : destinationFactories.entrySet()) {\n             for (String prefix : df.getValue().getUriPrefixes()) {\n@@ -142,7 +146,7 @@ public DestinationFactory getDestinationFactoryForUri(String uri) {\n                 }\n             }\n         }\n-        \n+\n         return null;\n     }\n ",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/de813c5b37dab65320d7b4cccd45232abb54d207/rt/core/src/main/java/org/apache/cxf/transport/DestinationFactoryManagerImpl.java"
            },
            {
                "additions": 10,
                "sha": "f3fb34a054e3da6a5bfc8f4a0548ad338b2e3ca1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/de813c5b37dab65320d7b4cccd45232abb54d207/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletContextResourceResolver.java",
                "deletions": 8,
                "filename": "rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletContextResourceResolver.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletContextResourceResolver.java?ref=de813c5b37dab65320d7b4cccd45232abb54d207",
                "patch": "@@ -37,11 +37,11 @@\n public class ServletContextResourceResolver implements ResourceResolver {\n     ServletContext servletContext;\n     Map<String, URL> urlMap = new ConcurrentHashMap<String, URL>();\n-    \n+\n     public ServletContextResourceResolver(ServletContext sc) {\n         servletContext = sc;\n     }\n-    \n+\n \n     public final InputStream getAsStream(final String string) {\n         if (urlMap.containsKey(string)) {\n@@ -55,19 +55,21 @@ public final InputStream getAsStream(final String string) {\n     }\n \n     public final <T> T resolve(final String entryName, final Class<T> clz) {\n-        \n+\n         Object obj = null;\n         try {\n-            InitialContext ic = new InitialContext();\n-            obj = ic.lookup(entryName);\n+            if (entryName != null) {\n+                InitialContext ic = new InitialContext();\n+                obj = ic.lookup(entryName);\n+            }\n         } catch (NamingException e) {\n             //do nothing\n         }\n-        \n+\n         if (obj != null && clz.isInstance(obj)) {\n             return clz.cast(obj);\n         }\n-        \n+\n         if (clz.isAssignableFrom(URL.class)) {\n             if (urlMap.containsKey(entryName)) {\n                 return clz.cast(urlMap.get(entryName));\n@@ -92,7 +94,7 @@ public final InputStream getAsStream(final String string) {\n             }\n         } else if (clz.isAssignableFrom(InputStream.class)) {\n             return clz.cast(getAsStream(entryName));\n-        }        \n+        }\n         return null;\n     }\n }",
                "changes": 18,
                "blob_url": "https://github.com/apache/cxf/blob/de813c5b37dab65320d7b4cccd45232abb54d207/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/ServletContextResourceResolver.java"
            },
            {
                "additions": 18,
                "sha": "9189d0237074444292ae72d7333ceaca477a2ce9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/de813c5b37dab65320d7b4cccd45232abb54d207/systests/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletClientTest.java",
                "deletions": 5,
                "filename": "systests/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletClientTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletClientTest.java?ref=de813c5b37dab65320d7b4cccd45232abb54d207",
                "patch": "@@ -26,6 +26,8 @@\n import com.meterware.httpunit.WebLink;\n import com.meterware.httpunit.WebResponse;\n \n+import org.apache.cxf.jaxws.JaxWsProxyFactoryBean;\n+import org.apache.cxf.systest.jaxws.Hello;\n import org.apache.cxf.testutil.common.AbstractBusClientServerTestBase;\n import org.apache.hello_world_soap_http.Greeter;\n import org.apache.hello_world_soap_http.SOAPService;\n@@ -41,11 +43,11 @@\n     public static void startServers() throws Exception {\n         assertTrue(\"server did not launch correctly\", launchServer(NoSpringServletServer.class));\n     }\n-    \n+\n     @Test\n     public void testBasicConnection() throws Exception {\n         SOAPService service = new SOAPService(new URL(serviceURL + \"Greeter?wsdl\"));\n-        Greeter greeter = service.getPort(portName, Greeter.class);        \n+        Greeter greeter = service.getPort(portName, Greeter.class);\n         try {\n             String reply = greeter.greetMe(\"test\");\n             assertNotNull(\"no response received from service\", reply);\n@@ -57,14 +59,25 @@ public void testBasicConnection() throws Exception {\n             throw (Exception)ex.getCause();\n         }\n     }\n-    \n+\n+    @Test\n+    public void testHelloService() throws Exception {\n+        JaxWsProxyFactoryBean cpfb = new JaxWsProxyFactoryBean();\n+        String address = serviceURL + \"Hello\";\n+        cpfb.setServiceClass(Hello.class);\n+        cpfb.setAddress(address);\n+        Hello hello = (Hello) cpfb.create();\n+        String reply = hello.sayHi(\" Willem\");\n+        assertEquals(\"Get the wrongreply \", reply, \"get Willem\");\n+    }\n+\n     @Test\n     public void testGetServiceList() throws Exception {\n         WebConversation client = new WebConversation();\n         WebResponse res = client.getResponse(serviceURL);\n         WebLink[] links = res.getLinks();\n-        assertEquals(\"There should get two links for the service\", 1, links.length);\n-        assertEquals(serviceURL + \"Greeter?wsdl\", links[0].getURLString()); \n+        assertEquals(\"There should get two links for the service\", 2, links.length);\n+        assertEquals(serviceURL + \"Greeter?wsdl\", links[0].getURLString());\n         assertEquals(\"text/html\", res.getContentType());\n     }\n }",
                "changes": 23,
                "blob_url": "https://github.com/apache/cxf/blob/de813c5b37dab65320d7b4cccd45232abb54d207/systests/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletClientTest.java"
            },
            {
                "additions": 11,
                "sha": "40f296f30768d611f8b50e93e523d8fdbbf7e731",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/de813c5b37dab65320d7b4cccd45232abb54d207/systests/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletServer.java",
                "deletions": 8,
                "filename": "systests/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletServer.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletServer.java?ref=de813c5b37dab65320d7b4cccd45232abb54d207",
                "patch": "@@ -22,10 +22,10 @@\n \n import org.apache.cxf.Bus;\n import org.apache.cxf.BusFactory;\n+import org.apache.cxf.systest.jaxws.HelloImpl;\n import org.apache.cxf.testutil.common.AbstractBusTestServerBase;\n import org.apache.cxf.transport.servlet.CXFNonSpringServlet;\n import org.apache.hello_world_soap_http.GreeterImpl;\n-\n import org.mortbay.jetty.Server;\n import org.mortbay.jetty.handler.ContextHandlerCollection;\n import org.mortbay.jetty.servlet.Context;\n@@ -42,22 +42,25 @@ protected void run() {\n             httpServer = new Server(9000);\n             ContextHandlerCollection contexts = new ContextHandlerCollection();\n             httpServer.setHandler(contexts);\n-            \n+\n             Context root = new Context(contexts, \"/\", Context.SESSIONS);\n-            \n+\n             CXFNonSpringServlet cxf = new CXFNonSpringServlet();\n             ServletHolder servlet = new ServletHolder(cxf);\n             servlet.setName(\"soap\");\n             servlet.setForcedPath(\"soap\");\n             root.addServlet(servlet, \"/soap/*\");\n-            \n+\n             httpServer.start();\n-            \n+\n             Bus bus = cxf.getBus();\n             setBus(bus);\n             BusFactory.setDefaultBus(bus);\n             GreeterImpl impl = new GreeterImpl();\n             Endpoint.publish(\"/Greeter\", impl);\n+            HelloImpl helloImpl = new HelloImpl();\n+            Endpoint.publish(\"/Hello\", helloImpl);\n+\n         } catch (Exception e) {\n             throw new RuntimeException(e);\n         } finally {\n@@ -69,13 +72,13 @@ protected void run() {\n             }\n         }\n     }\n-    \n+\n     public void tearDown() throws Exception {\n         if (httpServer != null) {\n             httpServer.stop();\n-        }    \n+        }\n     }\n-    \n+\n     public static void main(String[] args) {\n         try {\n             NoSpringServletServer s = new NoSpringServletServer();",
                "changes": 19,
                "blob_url": "https://github.com/apache/cxf/blob/de813c5b37dab65320d7b4cccd45232abb54d207/systests/src/test/java/org/apache/cxf/systest/servlet/NoSpringServletServer.java"
            }
        ],
        "repo": "cxf",
        "message": "CXF-1741 Fixed the NPE when publish the code first service in NoSpringServlet\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@684397 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/de813c5b37dab65320d7b4cccd45232abb54d207"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/a83ab46840245ae174d4c79a892a45ce84e604d1",
        "bug_id": "cxf_312",
        "file": [
            {
                "additions": 7,
                "sha": "ac0e3814f35fbed625ae3a6ab70d88ae71faceaa",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/f5190422eb70cb75a2e56cbfd7ea8ee6ded3e521/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSInInterceptor.java",
                "deletions": 7,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSInInterceptor.java?ref=f5190422eb70cb75a2e56cbfd7ea8ee6ded3e521",
                "patch": "@@ -108,6 +108,13 @@ private void processRequest(Message message) {\n             path = path + \"/\";\n         }\n         \n+        String acceptTypes = (String)message.get(Message.ACCEPT_CONTENT_TYPE);\n+        if (acceptTypes == null) {\n+            acceptTypes = \"*/*\";\n+        }\n+        List<MediaType> acceptContentTypes = JAXRSUtils.sortMediaTypes(acceptTypes);\n+        message.getExchange().put(Message.ACCEPT_CONTENT_TYPE, acceptContentTypes);\n+        \n         \n         //1. Matching target resource class\n         Service service = message.getExchange().get(Service.class);\n@@ -134,13 +141,6 @@ private void processRequest(Message message) {\n             }\n         }\n         \n-        String acceptTypes = (String)message.get(Message.ACCEPT_CONTENT_TYPE);\n-        if (acceptTypes == null) {\n-            acceptTypes = \"*/*\";\n-        }\n-        \n-        List<MediaType> acceptContentTypes = JAXRSUtils.sortMediaTypes(acceptTypes);\n-        message.getExchange().put(Message.ACCEPT_CONTENT_TYPE, acceptContentTypes);\n         message.getExchange().put(ROOT_RESOURCE_CLASS, resource);\n         \n         LOG.fine(\"Request path is: \" + path);",
                "changes": 14,
                "blob_url": "https://github.com/apache/cxf/blob/f5190422eb70cb75a2e56cbfd7ea8ee6ded3e521/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSInInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1730] Actually, if a ProviderInfo<RequestHandler> handles it, the ACCEPT_CONTENT_TYPES wouldn't be set and NPE.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@683263 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/f5190422eb70cb75a2e56cbfd7ea8ee6ded3e521"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/8c2287729186511f1c97ea968352552368ff1825",
        "bug_id": "cxf_313",
        "file": [
            {
                "additions": 1,
                "sha": "1ba982c0f6432d618f00075e1d2724ea068094bb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c4967804c45d220350a017473ccf2bdbef788efa/common/schemas/src/main/resources/schemas/wsdl/ws-addr-wsdl.xjb",
                "deletions": 1,
                "filename": "common/schemas/src/main/resources/schemas/wsdl/ws-addr-wsdl.xjb",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/common/schemas/src/main/resources/schemas/wsdl/ws-addr-wsdl.xjb?ref=c4967804c45d220350a017473ccf2bdbef788efa",
                "patch": "@@ -28,6 +28,6 @@\n         </jaxb:schemaBindings>\n     </jaxb:bindings>\n     <jaxb:bindings schemaLocation=\"ws-addr-wsdl.xsd\" node=\"/xs:schema/xs:element[@name='UsingAddressing']\">\n-      <jaxb:class ref=\"org.apache.cxf.ws.addressing.wsdl.UsingAddressingImpl\"/>\n+      <jaxb:class ref=\"org.apache.cxf.ws.addressing.wsdl.UsingAddressing\"/>\n     </jaxb:bindings>\n </jaxb:bindings>",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/c4967804c45d220350a017473ccf2bdbef788efa/common/schemas/src/main/resources/schemas/wsdl/ws-addr-wsdl.xjb"
            },
            {
                "additions": 2,
                "sha": "8969ba3d6872f1c27cd96cd0579f5a92c310bb9d",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c4967804c45d220350a017473ccf2bdbef788efa/rt/core/src/main/java/org/apache/cxf/transport/http/QueryMessages.properties",
                "deletions": 0,
                "filename": "rt/core/src/main/java/org/apache/cxf/transport/http/QueryMessages.properties",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/transport/http/QueryMessages.properties?ref=c4967804c45d220350a017473ccf2bdbef788efa",
                "patch": "@@ -19,3 +19,5 @@\n #\n #\n COULD_NOT_PROVIDE_WSDL = Exception occurred while trying to process {0}\n+WSDL_NOT_FOUND = Could not find wsdl {0}\n+SCHEMA_NOT_FOUND = Could not find xsd {0}",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/c4967804c45d220350a017473ccf2bdbef788efa/rt/core/src/main/java/org/apache/cxf/transport/http/QueryMessages.properties"
            },
            {
                "additions": 51,
                "sha": "f9b558515de127ac5034502ae36082b055fa52b8",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c4967804c45d220350a017473ccf2bdbef788efa/rt/core/src/main/java/org/apache/cxf/transport/http/WSDLQueryHandler.java",
                "deletions": 33,
                "filename": "rt/core/src/main/java/org/apache/cxf/transport/http/WSDLQueryHandler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/core/src/main/java/org/apache/cxf/transport/http/WSDLQueryHandler.java?ref=c4967804c45d220350a017473ccf2bdbef788efa",
                "patch": "@@ -145,7 +145,12 @@ public void writeResponse(String baseUri, String ctxUri,\n                     String wsdl2 = resolveWithCatalogs(OASISCatalogManager.getCatalogManager(bus),\n                                                        wsdl,\n                                                        base);\n-                    def = mp.get(wsdl2);\n+                    if (wsdl2 != null) {\n+                        def = mp.get(wsdl2);\n+                    }\n+                }\n+                if (def == null) {\n+                    throw new WSDLQueryException(new Message(\"WSDL_NOT_FOUND\", LOG, wsdl), null);\n                 }\n                 \n                 synchronized (def) {\n@@ -168,7 +173,12 @@ public void writeResponse(String baseUri, String ctxUri,\n                     String xsd2 = resolveWithCatalogs(OASISCatalogManager.getCatalogManager(bus),\n                                                        xsd,\n                                                        base);\n-                    si = smp.get(xsd2);\n+                    if (xsd2 != null) { \n+                        si = smp.get(xsd2);\n+                    }\n+                }\n+                if (si == null) {\n+                    throw new WSDLQueryException(new Message(\"SCHEMA_NOT_FOUND\", LOG, wsdl), null);\n                 }\n                 \n                 String uri = si.getReferencedSchema().getDocumentBaseURI();\n@@ -185,37 +195,7 @@ public void writeResponse(String baseUri, String ctxUri,\n                 doc = XMLUtils.getParser().parse(src);\n             }\n             \n-            NodeList nl = doc.getDocumentElement()\n-                .getElementsByTagNameNS(\"http://www.w3.org/2001/XMLSchema\",\n-                                        \"import\");\n-            for (int x = 0; x < nl.getLength(); x++) {\n-                Element el = (Element)nl.item(x);\n-                String sl = el.getAttribute(\"schemaLocation\");\n-                if (smp.containsKey(sl)) {\n-                    el.setAttribute(\"schemaLocation\", base + \"?xsd=\" + sl);\n-                }\n-            }\n-            nl = doc.getDocumentElement()\n-                .getElementsByTagNameNS(\"http://www.w3.org/2001/XMLSchema\",\n-                                        \"include\");\n-            for (int x = 0; x < nl.getLength(); x++) {\n-                Element el = (Element)nl.item(x);\n-                String sl = el.getAttribute(\"schemaLocation\");\n-                if (smp.containsKey(sl)) {\n-                    el.setAttribute(\"schemaLocation\", base + \"?xsd=\" + sl);\n-                }\n-            }\n-            nl = doc.getDocumentElement()\n-                .getElementsByTagNameNS(\"http://schemas.xmlsoap.org/wsdl/\",\n-                                    \"import\");\n-            for (int x = 0; x < nl.getLength(); x++) {\n-                Element el = (Element)nl.item(x);\n-                String sl = el.getAttribute(\"location\");\n-                if (mp.containsKey(sl)) {\n-                    el.setAttribute(\"location\", base + \"?wsdl=\" + sl);\n-                }\n-            }\n-            doc.setXmlStandalone(true);\n+            updateDoc(doc, base, mp, smp);\n             String enc = doc.getXmlEncoding();\n             if (enc == null) {\n                 enc = \"utf-8\";\n@@ -225,12 +205,50 @@ public void writeResponse(String baseUri, String ctxUri,\n                                                                      enc);\n             StaxUtils.writeNode(doc, writer, true);\n             writer.flush();\n+        } catch (WSDLQueryException wex) {\n+            throw wex;\n         } catch (Exception wex) {\n             throw new WSDLQueryException(new Message(\"COULD_NOT_PROVIDE_WSDL\",\n                                                      LOG,\n                                                      baseUri), wex);\n         }\n     }\n+    \n+    private void updateDoc(Document doc, String base,\n+                           Map<String, Definition> mp,\n+                           Map<String, SchemaReference> smp) {\n+        NodeList nl = doc.getDocumentElement()\n+            .getElementsByTagNameNS(\"http://www.w3.org/2001/XMLSchema\",\n+                                    \"import\");\n+        for (int x = 0; x < nl.getLength(); x++) {\n+            Element el = (Element)nl.item(x);\n+            String sl = el.getAttribute(\"schemaLocation\");\n+            if (smp.containsKey(sl)) {\n+                el.setAttribute(\"schemaLocation\", base + \"?xsd=\" + sl);\n+            }\n+        }\n+        nl = doc.getDocumentElement()\n+            .getElementsByTagNameNS(\"http://www.w3.org/2001/XMLSchema\",\n+                                    \"include\");\n+        for (int x = 0; x < nl.getLength(); x++) {\n+            Element el = (Element)nl.item(x);\n+            String sl = el.getAttribute(\"schemaLocation\");\n+            if (smp.containsKey(sl)) {\n+                el.setAttribute(\"schemaLocation\", base + \"?xsd=\" + sl);\n+            }\n+        }\n+        nl = doc.getDocumentElement()\n+            .getElementsByTagNameNS(\"http://schemas.xmlsoap.org/wsdl/\",\n+                                \"import\");\n+        for (int x = 0; x < nl.getLength(); x++) {\n+            Element el = (Element)nl.item(x);\n+            String sl = el.getAttribute(\"location\");\n+            if (mp.containsKey(sl)) {\n+                el.setAttribute(\"location\", base + \"?wsdl=\" + sl);\n+            }\n+        }\n+        doc.setXmlStandalone(true);\n+    }\n \n     static String resolveWithCatalogs(OASISCatalogManager catalogs, String start, String base) {\n         String resolvedSchemaLocation = null;",
                "changes": 84,
                "blob_url": "https://github.com/apache/cxf/blob/c4967804c45d220350a017473ccf2bdbef788efa/rt/core/src/main/java/org/apache/cxf/transport/http/WSDLQueryHandler.java"
            },
            {
                "additions": 5,
                "sha": "d6105e821fda49b90f36ab715a3f07ca9d429f83",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c4967804c45d220350a017473ccf2bdbef788efa/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPDestination.java",
                "deletions": 0,
                "filename": "rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPDestination.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPDestination.java?ref=c4967804c45d220350a017473ccf2bdbef788efa",
                "patch": "@@ -230,6 +230,11 @@ protected void doService(ServletContext context,\n                             qh.writeResponse(requestURL, pathInfo, endpointInfo, resp.getOutputStream());\n                         } catch (Exception ex) {\n                             LOG.log(Level.WARNING, \"writeResponse failed: \", ex);\n+                            try {\n+                                resp.sendError(500, ex.getMessage());\n+                            } catch (IOException ioe) {\n+                                //ignore\n+                            }\n                         }\n                         endpointInfo.setAddress(oldAddress);\n                         resp.getOutputStream().flush();                     ",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/c4967804c45d220350a017473ccf2bdbef788efa/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/JettyHTTPDestination.java"
            },
            {
                "additions": 7,
                "sha": "af67f72125deee6cc88e268351346b6655bf1927",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/c4967804c45d220350a017473ccf2bdbef788efa/systests/src/test/java/org/apache/cxf/systest/http/PublishedEndpointUrlTest.java",
                "deletions": 0,
                "filename": "systests/src/test/java/org/apache/cxf/systest/http/PublishedEndpointUrlTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/src/test/java/org/apache/cxf/systest/http/PublishedEndpointUrlTest.java?ref=c4967804c45d220350a017473ccf2bdbef788efa",
                "patch": "@@ -18,6 +18,8 @@\n  */\n package org.apache.cxf.systest.http;\n \n+import java.net.HttpURLConnection;\n+import java.net.URL;\n import java.util.Collection;\n import java.util.List;\n \n@@ -55,6 +57,11 @@ public void testPublishedEndpointUrl() throws Exception {\n \n         WSDLReader wsdlReader = WSDLFactory.newInstance().newWSDLReader();\n         wsdlReader.setFeature(\"javax.wsdl.verbose\", false);\n+        \n+        URL url = new URL(svrFactory.getAddress() + \"?wsdl=1\");\n+        HttpURLConnection connect = (HttpURLConnection)url.openConnection();\n+        assertEquals(500, connect.getResponseCode());\n+        \n         Definition wsdl = wsdlReader.readWSDL(svrFactory.getAddress() + \"?wsdl\");\n         assertNotNull(wsdl);\n         ",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/c4967804c45d220350a017473ccf2bdbef788efa/systests/src/test/java/org/apache/cxf/systest/http/PublishedEndpointUrlTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1644] Return a real error message if the wsdl/schema isn't found in the maps instead of a NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@667197 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/c4967804c45d220350a017473ccf2bdbef788efa"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/1855e288a4564803be42dad7b9957e16c6b10ac5",
        "bug_id": "cxf_314",
        "file": [
            {
                "additions": 3,
                "sha": "918e1cad680deab332fe8303855415420a688604",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/aece664b6956be21b7509e9d937d667b2c0e097c/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WrapperHelperCompiler.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WrapperHelperCompiler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WrapperHelperCompiler.java?ref=aece664b6956be21b7509e9d937d667b2c0e097c",
                "patch": "@@ -301,7 +301,7 @@ private void doCollection(MethodVisitor mv, int x) {\n         // List newA = (List)lst.get(99);\n         // if (aVal == null) {\n         // obj.setA(newA);\n-        // } else {\n+        // } else if (newA != null) {\n         // aVal.addAll(newA);\n         // }\n         \n@@ -341,6 +341,8 @@ private void doCollection(MethodVisitor mv, int x) {\n         Label jumpOverLabel = new Label();\n         mv.visitJumpInsn(Opcodes.GOTO, jumpOverLabel);\n         mv.visitLabel(nonNullLabel);\n+        mv.visitVarInsn(Opcodes.ALOAD, 4);\n+        mv.visitJumpInsn(Opcodes.IFNULL, jumpOverLabel);\n         mv.visitVarInsn(Opcodes.ALOAD, 3);\n         mv.visitVarInsn(Opcodes.ALOAD, 4);\n         mv.visitMethodInsn(Opcodes.INVOKEINTERFACE,",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/aece664b6956be21b7509e9d937d667b2c0e097c/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WrapperHelperCompiler.java"
            },
            {
                "additions": 3,
                "sha": "bc4cf060464662b8a74a889f282b63cb01281e7f",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/aece664b6956be21b7509e9d937d667b2c0e097c/systests/src/test/java/org/apache/cxf/systest/type_test/AbstractTypeTestClient.java",
                "deletions": 0,
                "filename": "systests/src/test/java/org/apache/cxf/systest/type_test/AbstractTypeTestClient.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/src/test/java/org/apache/cxf/systest/type_test/AbstractTypeTestClient.java?ref=aece664b6956be21b7509e9d937d667b2c0e097c",
                "patch": "@@ -2074,6 +2074,9 @@ public void testStringList() throws Exception {\n                 assertTrue(\"testStringList(): Incorrect value for out param\", yOrig.equals(z.value));\n                 assertTrue(\"testStringList(): Incorrect return value\", x.equals(ret));\n             }\n+            if (testDocLiteral) {\n+                ret = docClient.testStringList(null, y, z);\n+            }\n         } else {\n             String[] x = {\"I\", \"am\", \"SimpleList\"};\n             String[] yOrig = {\"Does\", \"SimpleList\", \"Work\"};",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/aece664b6956be21b7509e9d937d667b2c0e097c/systests/src/test/java/org/apache/cxf/systest/type_test/AbstractTypeTestClient.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1604] Fix NPE issues with null Lists being sent as wrapped doc/lit params\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@659141 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/aece664b6956be21b7509e9d937d667b2c0e097c"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/43f948d67fc06275ce3ae92631db6b8f81a216ae",
        "bug_id": "cxf_315",
        "file": [
            {
                "additions": 4,
                "sha": "e081acebd3fed0939a542d56c2d8ff9bffa68a85",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad780627db2d70008192506df55bdf4649c8fc8a/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java",
                "deletions": 1,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java?ref=ad780627db2d70008192506df55bdf4649c8fc8a",
                "patch": "@@ -364,7 +364,10 @@ static void addClasspathFromManifest(StringBuilder classPath, File file)\n         throws URISyntaxException, IOException {\n         \n         JarFile jar = new JarFile(file);\n-        Attributes attr = jar.getManifest().getMainAttributes();\n+        Attributes attr = null;\n+        if (jar.getManifest() != null) {\n+            attr = jar.getManifest().getMainAttributes();\n+        }\n         if (attr != null) {\n             String cp = attr.getValue(\"Class-Path\");\n             while (cp != null) {",
                "changes": 5,
                "blob_url": "https://github.com/apache/cxf/blob/ad780627db2d70008192506df55bdf4649c8fc8a/rt/databinding/jaxb/src/main/java/org/apache/cxf/endpoint/dynamic/DynamicClientFactory.java"
            },
            {
                "additions": 45,
                "sha": "4523a69c6bfad4a1229cbcab3fd356b81be59069",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad780627db2d70008192506df55bdf4649c8fc8a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java",
                "deletions": 46,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java?ref=ad780627db2d70008192506df55bdf4649c8fc8a",
                "patch": "@@ -50,6 +50,7 @@\n import org.apache.cxf.helpers.MapNamespaceContext;\n import org.apache.cxf.helpers.XMLUtils;\n import org.apache.cxf.resource.URIResolver;\n+import org.apache.cxf.staxutils.StaxUtils;\n import org.apache.cxf.tools.common.ToolConstants;\n import org.apache.cxf.tools.common.ToolContext;\n import org.apache.cxf.tools.common.ToolException;\n@@ -184,15 +185,28 @@ private void buildHandlerChains() {\n     private Node[] getAnnotationNodes(final Node node) {\n         Node[] nodes = new Node[2];\n \n-        Node annotationNode = nodeSelector.queryNode(node, \"//xsd:annotation\");\n-\n+        Node annotationNode = node.getFirstChild();\n+        while (annotationNode != null) {\n+            if (\"annotation\".equals(annotationNode.getLocalName())\n+                && ToolConstants.SCHEMA_URI.equals(annotationNode.getNamespaceURI())) {\n+                break;\n+            }\n+            annotationNode = annotationNode.getNextSibling();\n+        }\n         if (annotationNode == null) {\n             annotationNode = node.getOwnerDocument().createElementNS(ToolConstants.SCHEMA_URI, \"annotation\");\n         }\n \n         nodes[0] = annotationNode;\n \n-        Node appinfoNode = nodeSelector.queryNode(annotationNode, \"//xsd:appinfo\");\n+        Node appinfoNode = annotationNode.getFirstChild();\n+        while (appinfoNode != null) {\n+            if (\"appinfo\".equals(appinfoNode.getLocalName())\n+                && ToolConstants.SCHEMA_URI.equals(appinfoNode.getNamespaceURI())) {\n+                break;\n+            }\n+            appinfoNode = appinfoNode.getNextSibling();\n+        }\n \n         if (appinfoNode == null) {\n             appinfoNode = node.getOwnerDocument().createElementNS(ToolConstants.SCHEMA_URI, \"appinfo\");\n@@ -211,32 +225,32 @@ private void appendJaxbVersion(final Element schemaElement) {\n     }\n \n     protected void copyAllJaxbDeclarations(final Node schemaNode, final Element jaxwsBindingNode) {\n-        Element jaxbBindingElement = getJaxbBindingElement(jaxwsBindingNode);\n         appendJaxbVersion((Element)schemaNode);\n-        if (jaxbBindingElement != null) {\n-            NodeList nlist = nodeSelector.queryNodes(schemaNode, jaxbBindingElement.getAttribute(\"node\"));\n-            for (int i = 0; i < nlist.getLength(); i++) {\n-                Node node = nlist.item(i);\n-                copyAllJaxbDeclarations(node, jaxbBindingElement);\n-            }\n-            return;\n-        }\n \n         Node[] embededNodes = getAnnotationNodes(schemaNode);\n         Node annotationNode = embededNodes[0];\n         Node appinfoNode = embededNodes[1];\n-\n-        NodeList childNodes = jaxwsBindingNode.getChildNodes();\n-        for (int i = 0; i < childNodes.getLength(); i++) {\n-            Node childNode = childNodes.item(i);\n-            if (!isJaxbBindings(childNode) || isJaxbBindingsElement(childNode)) {\n+        \n+        for (Node childNode = jaxwsBindingNode.getFirstChild();\n+            childNode != null;\n+            childNode = childNode.getNextSibling()) {\n+            if (!isJaxbBindings(childNode)) {\n                 continue;\n             }\n-\n-            final Node jaxbNode = childNode;\n-\n-            Node cloneNode = ProcessorUtil.cloneNode(schemaNode.getOwnerDocument(), jaxbNode, true);\n-            appinfoNode.appendChild(cloneNode);\n+            \n+            Element childEl = (Element)childNode;\n+            if (isJaxbBindingsElement(childEl)) {\n+                NodeList nlist = nodeSelector.queryNodes(schemaNode, childEl.getAttribute(\"node\"));\n+                for (int i = 0; i < nlist.getLength(); i++) {\n+                    Node node = nlist.item(i);\n+                    copyAllJaxbDeclarations(node, childEl);\n+                }\n+            } else {\n+                final Node jaxbNode = childEl;\n+                Node cloneNode = ProcessorUtil.cloneNode(schemaNode.getOwnerDocument(), jaxbNode, true);\n+                appinfoNode.appendChild(cloneNode);\n+                childNode = childNode.getNextSibling();\n+            }\n         }\n \n         if (schemaNode.getChildNodes().getLength() > 0) {\n@@ -283,12 +297,9 @@ protected void internalizeBinding(Element bindings, Element targetNode, String e\n         }\n \n         Element[] children = getChildElements(bindings, ToolConstants.NS_JAXWS_BINDINGS);\n-        for (int i = 0; i < children.length; i++) {\n-            if (children[i].getNodeType() == Node.ELEMENT_NODE) {\n-                internalizeBinding(children[i], targetNode, expression);\n-            }\n+        for (Element child : children) {\n+            internalizeBinding(child, targetNode, expression);\n         }\n-\n     }\n \n     private void copyBindingsToWsdl(Node node, Node bindings, MapNamespaceContext ctx) {\n@@ -365,9 +376,7 @@ private boolean isGlobaleBindings(Element binding) {\n \n     private Element[] getChildElements(Element parent, String nsUri) {\n         List<Element> a = new ArrayList<Element>();\n-        NodeList children = parent.getChildNodes();\n-        for (int i = 0; i < children.getLength(); i++) {\n-            Node item = children.item(i);\n+        for (Node item = parent.getFirstChild(); item != null; item = item.getNextSibling()) {\n             if (!(item instanceof Element)) {\n                 continue;\n             }\n@@ -379,10 +388,6 @@ private boolean isGlobaleBindings(Element binding) {\n     }\n \n     private void addBinding(String bindingFile) throws XMLStreamException {\n-        InputSource is = new InputSource(bindingFile);\n-        XMLStreamReader reader = StAXUtil.createFreshXMLStreamReader(is);\n-\n-        StAXUtil.toStartTag(reader);\n \n         Element root = null;\n         try {\n@@ -392,6 +397,8 @@ private void addBinding(String bindingFile) throws XMLStreamException {\n             Message msg = new Message(\"CAN_NOT_READ_AS_ELEMENT\", LOG, new Object[] {bindingFile});\n             throw new ToolException(msg, e1);\n         }\n+        XMLStreamReader reader = StaxUtils.createXMLStreamReader(root);\n+        StAXUtil.toStartTag(reader);\n         if (isValidJaxwsBindingFile(bindingFile, reader)) {\n \n             String wsdlLocation = root.getAttribute(\"wsdlLocation\");\n@@ -441,7 +448,7 @@ private void addBinding(String bindingFile) throws XMLStreamException {\n                 }\n                 jaxbBindings.add(tmpIns);\n             } else {\n-                jaxbBindings.add(is);\n+                jaxbBindings.add(new InputSource(bindingFile));\n             }\n \n         } else {\n@@ -549,18 +556,10 @@ private boolean isJaxbBindingsElement(Node bindings) {\n         return \"bindings\".equals(bindings.getLocalName());\n     }\n \n-    protected Element getJaxbBindingElement(final Element bindings) {\n-        NodeList list = bindings.getElementsByTagNameNS(ToolConstants.NS_JAXB_BINDINGS, \"bindings\");\n-        if (list.getLength() > 0) {\n-            return (Element)list.item(0);\n-        }\n-        return null;\n-    }\n-\n     protected boolean hasJaxbBindingDeclaration(Node bindings) {\n-        NodeList childNodes = bindings.getChildNodes();\n-        for (int i = 0; i < childNodes.getLength(); i++) {\n-            Node childNode = childNodes.item(i);\n+        for (Node childNode = bindings.getFirstChild();\n+            childNode != null;\n+            childNode = childNode.getNextSibling()) {\n             if (isJaxbBindings(childNode)) {\n                 return true;\n             }",
                "changes": 91,
                "blob_url": "https://github.com/apache/cxf/blob/ad780627db2d70008192506df55bdf4649c8fc8a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java"
            },
            {
                "additions": 11,
                "sha": "8c5b0fb4dfc76f1b685300979684493304df46e0",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/ad780627db2d70008192506df55bdf4649c8fc8a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/JAXWSBindingParser.java",
                "deletions": 25,
                "filename": "tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/JAXWSBindingParser.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/JAXWSBindingParser.java?ref=ad780627db2d70008192506df55bdf4649c8fc8a",
                "patch": "@@ -62,8 +62,8 @@ public JAXWSBinding parse(Class parentType, Element element, String namespace) t\n     }\n \n     void parseElement(JAXWSBinding jaxwsBinding, Element element) {\n-        NodeList children = element.getChildNodes();\n-        if (children != null && children.getLength() == 0) {\n+        Node child = element.getFirstChild();\n+        if (child == null) {\n             // global binding\n             if (isAsyncElement(element)) {\n                 jaxwsBinding.setEnableAsyncMapping(getNodeValue(element));\n@@ -78,33 +78,20 @@ void parseElement(JAXWSBinding jaxwsBinding, Element element) {\n             if (isWrapperStyle(element)) {\n                 jaxwsBinding.setEnableWrapperStyle(getNodeValue(element));\n             }\n-        }\n-\n-        if (children != null && children.getLength() > 0) {\n+        } else {\n             // other binding\n-            for (int i = 0; i < children.getLength(); i++) {\n-                Node child = children.item(i);\n-\n+            while (child != null) {\n                 if (isAsyncElement(child)) {\n                     jaxwsBinding.setEnableAsyncMapping(getNodeValue(child));\n-                }\n-                if (isMIMEElement(child)) {\n+                } else if (isMIMEElement(child)) {\n                     jaxwsBinding.setEnableMime(getNodeValue(child));\n-                }\n-\n-                if (isWrapperStyle(child)) {\n+                } else if (isWrapperStyle(child)) {\n                     jaxwsBinding.setEnableWrapperStyle(getNodeValue(child));\n-                }\n-\n-                if (isPackageElement(child)) {\n+                } else if (isPackageElement(child)) {\n                     jaxwsBinding.setPackage(getPackageName(child));\n-                }\n-\n-                if (isJAXWSMethodElement(child)) {\n+                } else if (isJAXWSMethodElement(child)) {\n                     jaxwsBinding.setMethodName(getMethodName(child));\n-                }\n-\n-                if (isJAXWSParameterElement(child)) {\n+                } else if (isJAXWSParameterElement(child)) {\n                     Element childElement = (Element)child;\n                     String partPath = \"//\" +  childElement.getAttribute(\"part\");\n                     Node node = queryXPathNode(element.getOwnerDocument().getDocumentElement(), partPath);\n@@ -121,9 +108,7 @@ void parseElement(JAXWSBinding jaxwsBinding, Element element) {\n                     String elementName = childElement.getAttribute(\"childElementName\");\n                     JAXWSParameter jpara = new JAXWSParameter(messageName, elementName, name);\n                     jaxwsBinding.setJaxwsPara(jpara);\n-                }\n-\n-                if (isJAXWSClass(child)) {\n+                } else if (isJAXWSClass(child)) {\n                     Element childElement = (Element)child;\n                     String clzName = childElement.getAttribute(\"name\");\n                     String javadoc = \"\";\n@@ -136,6 +121,7 @@ void parseElement(JAXWSBinding jaxwsBinding, Element element) {\n                     JAXWSClass jaxwsClass = new JAXWSClass(clzName, javadoc);\n                     jaxwsBinding.setJaxwsClass(jaxwsClass);\n                 }\n+                child = child.getNextSibling();\n             }\n         }\n ",
                "changes": 36,
                "blob_url": "https://github.com/apache/cxf/blob/ad780627db2d70008192506df55bdf4649c8fc8a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/JAXWSBindingParser.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1565, CXF-1567] Fix problems with NPE in DynamicClientFactory as well as a bunch of issues with JAXB binding files\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@652869 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/ad780627db2d70008192506df55bdf4649c8fc8a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0e48353c50960afc28bfa7afba0a7e2e5e06eb99",
        "bug_id": "cxf_316",
        "file": [
            {
                "additions": 15,
                "sha": "c86a43bc86210e7d2c5efc311ca8a96e2a7af103",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6f947b7a3e5c935500c949cc5648f7a6a0e94288/api/src/main/java/org/apache/cxf/common/util/ASMHelper.java",
                "deletions": 0,
                "filename": "api/src/main/java/org/apache/cxf/common/util/ASMHelper.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/common/util/ASMHelper.java?ref=6f947b7a3e5c935500c949cc5648f7a6a0e94288",
                "patch": "@@ -38,6 +38,7 @@\n public class ASMHelper {\n     protected static final Map<Class<?>, String> PRIMITIVE_MAP = new HashMap<Class<?>, String>();\n     protected static final Map<Class<?>, String> NONPRIMITIVE_MAP = new HashMap<Class<?>, String>();\n+    protected static final Map<Class<?>, Integer> PRIMITIVE_ZERO_MAP = new HashMap<Class<?>, Integer>();\n     \n     protected static final Map<Class<?>, WeakReference<TypeHelperClassLoader>> LOADER_MAP \n         = new WeakIdentityHashMap<Class<?>, WeakReference<TypeHelperClassLoader>>();\n@@ -135,6 +136,11 @@ private static void tryClass(String s) {\n         public static int IFNONNULL = 0;\n         public static int SIPUSH = 0;\n         public static int INVOKESTATIC = 0;\n+        public static int ICONST_0;\n+        public static int LCONST_0;\n+        public static int FCONST_0;\n+        public static int DCONST_0;\n+        \n         //CHECKSTYLE:ON\n         static {\n             try {\n@@ -147,6 +153,15 @@ private static void tryClass(String s) {\n             } catch (Throwable e) {\n                 //ignore\n             }\n+            \n+            PRIMITIVE_ZERO_MAP.put(Byte.TYPE, Opcodes.ICONST_0);\n+            PRIMITIVE_ZERO_MAP.put(Boolean.TYPE, Opcodes.ICONST_0);\n+            PRIMITIVE_ZERO_MAP.put(Long.TYPE, Opcodes.LCONST_0);\n+            PRIMITIVE_ZERO_MAP.put(Integer.TYPE, Opcodes.ICONST_0);\n+            PRIMITIVE_ZERO_MAP.put(Short.TYPE, Opcodes.ICONST_0);\n+            PRIMITIVE_ZERO_MAP.put(Character.TYPE, Opcodes.ICONST_0);\n+            PRIMITIVE_ZERO_MAP.put(Float.TYPE, Opcodes.FCONST_0);\n+            PRIMITIVE_ZERO_MAP.put(Double.TYPE, Opcodes.DCONST_0);\n         }\n     }\n     ",
                "changes": 15,
                "blob_url": "https://github.com/apache/cxf/blob/6f947b7a3e5c935500c949cc5648f7a6a0e94288/api/src/main/java/org/apache/cxf/common/util/ASMHelper.java"
            },
            {
                "additions": 20,
                "sha": "17124c9841d1818c6251041d5507b633df68414c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/6f947b7a3e5c935500c949cc5648f7a6a0e94288/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/WrapperHelperCompiler.java",
                "deletions": 4,
                "filename": "rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/WrapperHelperCompiler.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/WrapperHelperCompiler.java?ref=6f947b7a3e5c935500c949cc5648f7a6a0e94288",
                "patch": "@@ -38,7 +38,6 @@\n     final Object objectFactory;\n     final ClassWriter cw;\n \n-    \n     private WrapperHelperCompiler(Class<?> wrapperType,\n                                   Method setMethods[],\n                                   Method getMethods[],\n@@ -260,22 +259,39 @@ private boolean addCreateWrapperObject(String newClassName,\n                 \n                 if (tp.isPrimitive()) {\n                     mv.visitTypeInsn(Opcodes.CHECKCAST, NONPRIMITIVE_MAP.get(tp));\n+                    Label l45 = createLabel();\n+                    Label l46 = createLabel();\n+                    mv.visitInsn(Opcodes.DUP);\n+                    mv.visitJumpInsn(Opcodes.IFNULL, l45);\n                     mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL, NONPRIMITIVE_MAP.get(tp), \n                                        tp.getName() + \"Value\", \"()\" + PRIMITIVE_MAP.get(tp));\n+                    mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL,\n+                                       periodToSlashes(wrapperType.getName()),\n+                                       setMethods[x].getName(), \"(\" + getClassCode(tp) + \")V\");\n+                    mv.visitJumpInsn(Opcodes.GOTO, l46);\n+                    mv.visitLabel(l45);\n+                    mv.visitInsn(Opcodes.POP);\n+                    mv.visitLabel(l46);\n                 } else if (JAXBElement.class.isAssignableFrom(tp)) {\n                     mv.visitTypeInsn(Opcodes.CHECKCAST,\n                                      periodToSlashes(jaxbMethods[x].getParameterTypes()[0].getName()));\n                     mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL, periodToSlashes(objectFactoryClass.getName()),\n                                        jaxbMethods[x].getName(),\n                                        getMethodSignature(jaxbMethods[x]));\n+                    mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL,\n+                                       periodToSlashes(wrapperType.getName()),\n+                                       setMethods[x].getName(), \"(\" + getClassCode(tp) + \")V\");\n                 } else if (tp.isArray()) { \n                     mv.visitTypeInsn(Opcodes.CHECKCAST, getClassCode(tp));\n+                    mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL,\n+                                       periodToSlashes(wrapperType.getName()),\n+                                       setMethods[x].getName(), \"(\" + getClassCode(tp) + \")V\");\n                 } else {\n                     mv.visitTypeInsn(Opcodes.CHECKCAST, periodToSlashes(tp.getName()));\n+                    mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL,\n+                                       periodToSlashes(wrapperType.getName()),\n+                                       setMethods[x].getName(), \"(\" + getClassCode(tp) + \")V\");\n                 }\n-                mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL,\n-                                   periodToSlashes(wrapperType.getName()),\n-                                   setMethods[x].getName(), \"(\" + getClassCode(tp) + \")V\");\n             }\n         }\n         ",
                "changes": 24,
                "blob_url": "https://github.com/apache/cxf/blob/6f947b7a3e5c935500c949cc5648f7a6a0e94288/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/WrapperHelperCompiler.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-5147] Don't NPE if using a primitive for a holder. If null, don't call the setter so whatever is the default in the wrapper object would end up being used. (basically, same behavior as when a BARE method is used)\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1508965 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/6f947b7a3e5c935500c949cc5648f7a6a0e94288"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/84ec3a8e9b0735b9b6d40222848fe288b19c7a03",
        "bug_id": "cxf_317",
        "file": [
            {
                "additions": 9,
                "sha": "bd42dc0418c51a73a193a0c26230037dae1bd709",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e74b62fa7554f68ecf46eb1f578500fedcc65e41/api/src/main/java/org/apache/cxf/common/util/ReflectionUtil.java",
                "deletions": 8,
                "filename": "api/src/main/java/org/apache/cxf/common/util/ReflectionUtil.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/common/util/ReflectionUtil.java?ref=e74b62fa7554f68ecf46eb1f578500fedcc65e41",
                "patch": "@@ -202,17 +202,17 @@ private static String getPackageName(String clzName) {\n         }\n         \n         if (springBeanUtilsDescriptorFetcher != null) {\n-            PropertyDescriptor[] descriptors = null;\n             if (propertyDescriptors != null) {\n-                descriptors = new PropertyDescriptor[propertyDescriptors.length];\n+                List<PropertyDescriptor> descriptors = new ArrayList<PropertyDescriptor>(propertyDescriptors.length);\n                 for (int i = 0; i < propertyDescriptors.length; i++) {\n                     PropertyDescriptor propertyDescriptor = propertyDescriptors[i];\n                     try {\n-                        descriptors[i] = \n-                            (PropertyDescriptor)\n-                            springBeanUtilsDescriptorFetcher.invoke(null,\n-                                                                    beanClass, \n-                                                                    propertyDescriptor.getName());\n+                        propertyDescriptor = (PropertyDescriptor)springBeanUtilsDescriptorFetcher.invoke(null,\n+                                                                                     beanClass, \n+                                                                                     propertyDescriptor.getName());\n+                        if (propertyDescriptor != null) {\n+                            descriptors.add(propertyDescriptor);\n+                        }\n                     } catch (IllegalArgumentException e) {\n                         throw new RuntimeException(e);\n                     } catch (IllegalAccessException e) {\n@@ -221,8 +221,9 @@ private static String getPackageName(String clzName) {\n                         throw new RuntimeException(e);\n                     } \n                 }\n+                return descriptors.toArray(new PropertyDescriptor[descriptors.size()]);\n             }\n-            return descriptors;\n+            return null;\n         } else {\n             return beanInfo.getPropertyDescriptors();\n         }",
                "changes": 17,
                "blob_url": "https://github.com/apache/cxf/blob/e74b62fa7554f68ecf46eb1f578500fedcc65e41/api/src/main/java/org/apache/cxf/common/util/ReflectionUtil.java"
            },
            {
                "additions": 3,
                "sha": "a273675f72572aa72ba41896a5e588319bd67252",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/e74b62fa7554f68ecf46eb1f578500fedcc65e41/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/AbstractTypeCreator.java",
                "deletions": 0,
                "filename": "rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/AbstractTypeCreator.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/AbstractTypeCreator.java?ref=e74b62fa7554f68ecf46eb1f578500fedcc65e41",
                "patch": "@@ -132,6 +132,9 @@ public AegisType createTypeForClass(TypeClassInfo info) {\n                 if (info.getTypeName() != null) {\n                     type = getTypeMapping().getType(info.getTypeName());\n                 }\n+                if (type == null) {\n+                    type = getTypeMapping().getType(javaClass);\n+                }\n                 if (type == null) {\n                     type = createDefaultType(info);\n                 } else {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/e74b62fa7554f68ecf46eb1f578500fedcc65e41/rt/databinding/aegis/src/main/java/org/apache/cxf/aegis/type/AbstractTypeCreator.java"
            },
            {
                "additions": 135,
                "sha": "4c9843b47f44096e552311cee442765f2dc5ce8e",
                "status": "added",
                "raw_url": "https://github.com/apache/cxf/raw/e74b62fa7554f68ecf46eb1f578500fedcc65e41/rt/databinding/aegis/src/test/java/org/apache/cxf/aegis/type/java5/ClassTest.java",
                "deletions": 0,
                "filename": "rt/databinding/aegis/src/test/java/org/apache/cxf/aegis/type/java5/ClassTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/databinding/aegis/src/test/java/org/apache/cxf/aegis/type/java5/ClassTest.java?ref=e74b62fa7554f68ecf46eb1f578500fedcc65e41",
                "patch": "@@ -0,0 +1,135 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.cxf.aegis.type.java5;\n+\n+import java.io.Serializable;\n+\n+import javax.xml.namespace.QName;\n+\n+import org.w3c.dom.Document;\n+\n+import org.apache.cxf.aegis.AbstractAegisTest;\n+import org.apache.cxf.aegis.AegisContext;\n+import org.apache.cxf.aegis.Context;\n+import org.apache.cxf.aegis.DatabindingException;\n+import org.apache.cxf.aegis.databinding.AegisDatabinding;\n+import org.apache.cxf.aegis.type.AegisType;\n+import org.apache.cxf.aegis.type.basic.StringType;\n+import org.apache.cxf.aegis.xml.MessageReader;\n+import org.apache.cxf.aegis.xml.MessageWriter;\n+import org.apache.cxf.common.util.XMLSchemaQNames;\n+import org.apache.cxf.endpoint.Server;\n+import org.apache.cxf.frontend.ServerFactoryBean;\n+import org.apache.cxf.staxutils.StaxUtils;\n+import org.apache.ws.commons.schema.XmlSchema;\n+import org.apache.ws.commons.schema.XmlSchemaSimpleType;\n+import org.apache.ws.commons.schema.XmlSchemaSimpleTypeRestriction;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+public class ClassTest extends AbstractAegisTest {\n+    Server server;\n+\n+    @Before\n+    public void startServer() throws Exception {\n+        AegisContext context = new AegisContext();\n+        context.initialize();\n+        context.getTypeMapping().register(new ClassAsStringType());\n+        \n+        ServerFactoryBean b = new ServerFactoryBean();\n+        b.setDataBinding(new AegisDatabinding(context));\n+        b.setServiceClass(GenericsService.class);\n+        b.setAddress(\"local://GenericsService\");\n+        server = b.create();\n+    }\n+    @After\n+    public void stopServer() {\n+        server.stop();\n+        server.destroy();\n+        server = null;\n+    }\n+\n+    @Test\n+    public void testType() throws Exception {\n+        Document doc = getWSDLDocument(\"GenericsService\");\n+        assertNotNull(doc);\n+        this.assertValidBoolean(\"//xsd:simpleType[@name='class']/xsd:restriction\", doc.getDocumentElement());\n+    }\n+\n+    public static class GenericsService {\n+\n+        public <T extends Serializable> T createInstance(Class<T> type)\n+            throws InstantiationException, IllegalAccessException {\n+            return type.newInstance();\n+        }\n+    }\n+    \n+    \n+    public static class ClassAsStringType extends AegisType {\n+        \n+        public static final QName CLASS_AS_STRING_TYPE_QNAME \n+            = new QName(\"http://cxf.apache.org/my/class/test\", \"class\");\n+             \n+        private StringType stringType;\n+             \n+        public ClassAsStringType() {\n+            stringType = new StringType();\n+            super.setTypeClass(Class.class);\n+            super.setSchemaType(CLASS_AS_STRING_TYPE_QNAME);\n+        }\n+         \n+        public Object readObject(MessageReader reader, Context context)\n+            throws DatabindingException {\n+            String className = (String) stringType.readObject(reader, context);\n+            Class<?> cls = null;\n+            try {\n+                context.getClass().getClassLoader().loadClass(className);\n+            } catch (ClassNotFoundException x) {\n+                throw new DatabindingException(\"Unable to dynamically load class '\"\n+                    + className + \"'\", x);\n+            }\n+            return cls;\n+        }\n+         \n+        public void writeObject(Object object, MessageWriter writer, Context context) \n+            throws DatabindingException {\n+            if (object == null) {\n+                stringType.writeObject(null, writer, context);\n+            } else {\n+                Class<?> cls = (Class<?>) object;\n+                stringType.writeObject(cls.getName(), writer, context);\n+            }\n+        }\n+        public void writeSchema(XmlSchema root) {\n+            XmlSchemaSimpleType xst = new XmlSchemaSimpleType(root, true);\n+            xst.setName(\"class\");\n+            \n+            XmlSchemaSimpleTypeRestriction content = new XmlSchemaSimpleTypeRestriction();\n+            content.setBaseTypeName(XMLSchemaQNames.XSD_STRING);\n+            xst.setContent(content);\n+        }\n+                 \n+        public boolean usesUtilityTypes() {\n+            return true;\n+        }\n+    }    \n+\n+}",
                "changes": 135,
                "blob_url": "https://github.com/apache/cxf/blob/e74b62fa7554f68ecf46eb1f578500fedcc65e41/rt/databinding/aegis/src/test/java/org/apache/cxf/aegis/type/java5/ClassTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-3613] Update to show how to use Class as a param/type with Aegis\nFix potential NPE via a null in the PropertyDescriptor[]\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1401880 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/e74b62fa7554f68ecf46eb1f578500fedcc65e41"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/898ab0ab675eaf62519394e9e425b7e954468852",
        "bug_id": "cxf_318",
        "file": [
            {
                "additions": 65,
                "sha": "f221f843f84549869630c718b4f193bd9e25638c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/395dafda97d485c91e32f2733e97f7c0183f591a/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java",
                "deletions": 20,
                "filename": "maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java?ref=395dafda97d485c91e32f2733e97f7c0183f591a",
                "patch": "@@ -23,6 +23,7 @@\n import java.io.IOException;\n import java.io.OutputStream;\n import java.net.URI;\n+import java.net.URISyntaxException;\n import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.LinkedHashSet;\n@@ -51,6 +52,69 @@\n  */\n public class WSDL2JavaMojo extends AbstractCodegenMoho {\n \n+    final class MavenToolErrorListener extends ToolErrorListener {\n+        private final List<File> errorfiles;\n+\n+        MavenToolErrorListener(List<File> errorfiles) {\n+            this.errorfiles = errorfiles;\n+        }\n+\n+        public void addError(final String file, int line, int column, String message, Throwable t) {\n+            super.addError(file, line, column, message, t);\n+            \n+            File f = mapFile(file);\n+            \n+            if (f != null && !errorfiles.contains(f)) {\n+                buildContext.removeMessages(f);\n+                errorfiles.add(f);\n+            }\n+            if (f == null) {\n+                f = new File(file) {\n+                    private static final long serialVersionUID = 1L;\n+                    public String getAbsolutePath() {\n+                        return file;\n+                    }\n+                };\n+            }\n+            buildContext.addMessage(f, line, column, message, BuildContext.SEVERITY_ERROR, t);\n+        }\n+\n+        public void addWarning(final String file, int line, int column, String message, Throwable t) {\n+            File f = mapFile(file);\n+            if (f != null && !errorfiles.contains(f)) {\n+                buildContext.removeMessages(f);\n+                errorfiles.add(f);\n+            }\n+            if (f == null) {\n+                f = new File(file) {\n+                    private static final long serialVersionUID = 1L;\n+                    public String getAbsolutePath() {\n+                        return file;\n+                    }\n+                };\n+            }\n+            //don't send to super which just LOG.warns.   We'll let Maven do that to\n+            //not duplicate the error message.\n+            buildContext.addMessage(f, line, column, message, BuildContext.SEVERITY_WARNING, t);\n+        }\n+\n+        private File mapFile(String s) {\n+            File file = null;\n+            if (s != null && s.startsWith(\"file:\")) {\n+                if (s.contains(\"#\")) {\n+                    s = s.substring(0, s.indexOf('#'));\n+                }\n+                try {\n+                    URI uri = new URI(s);\n+                    file = new File(uri);\n+                } catch (URISyntaxException e) {\n+                    //ignore\n+                }\n+            }\n+            return file;\n+        }\n+    }\n+\n     /**\n      * @parameter expression=\"${cxf.testSourceRoot}\"\n      */\n@@ -257,26 +321,7 @@ public OutputStream createOutputStream(File file) throws IOException {\n                         return buildContext.newFileOutputStream(file);\n                     }\n                 });\n-                ctx.setErrorListener(new ToolErrorListener() {\n-                    public void addError(File file, int line, int column, String message, Throwable t) {\n-                        super.addError(file, line, column, message, t);\n-                        if (!errorfiles.contains(file)) {\n-                            buildContext.removeMessages(file);\n-                            errorfiles.add(file);\n-                        }\n-                        buildContext.addMessage(file, line, column, message, BuildContext.SEVERITY_ERROR, t);\n-                    }\n-\n-                    public void addWarning(File file, int line, int column, String message, Throwable t) {\n-                        if (!errorfiles.contains(file)) {\n-                            buildContext.removeMessages(file);\n-                            errorfiles.add(file);\n-                        }\n-                        //don't send to super which just LOG.warns.   We'll let Maven do that to\n-                        //not duplicate the error message.\n-                        buildContext.addMessage(file, line, column, message, BuildContext.SEVERITY_WARNING, t);\n-                    }\n-                });\n+                ctx.setErrorListener(new MavenToolErrorListener(errorfiles));\n                 new WSDLToJava(args).run(ctx);\n                 \n                 List<File> oldFiles = CastUtils.cast((List<?>)buildContext",
                "changes": 85,
                "blob_url": "https://github.com/apache/cxf/blob/395dafda97d485c91e32f2733e97f7c0183f591a/maven-plugins/codegen-plugin/src/main/java/org/apache/cxf/maven_plugin/wsdl2java/WSDL2JavaMojo.java"
            },
            {
                "additions": 8,
                "sha": "5d695aeb5da9c6e25aad7d83d20f257f9659d0fb",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/395dafda97d485c91e32f2733e97f7c0183f591a/tools/common/src/main/java/org/apache/cxf/tools/common/ToolErrorListener.java",
                "deletions": 9,
                "filename": "tools/common/src/main/java/org/apache/cxf/tools/common/ToolErrorListener.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/common/src/main/java/org/apache/cxf/tools/common/ToolErrorListener.java?ref=395dafda97d485c91e32f2733e97f7c0183f591a",
                "patch": "@@ -19,7 +19,6 @@\n \n package org.apache.cxf.tools.common;\n \n-import java.io.File;\n import java.util.LinkedList;\n import java.util.List;\n import java.util.logging.Logger;\n@@ -33,13 +32,13 @@\n     private static final Logger LOG = LogUtils.getL7dLogger(ToolErrorListener.class);\n     \n     class ErrorInfo {\n-        File file;\n+        String file;\n         int line;\n         int col;\n         Throwable cause;\n         String message;\n         \n-        ErrorInfo(File f, int l, int c, String m, Throwable t) {\n+        ErrorInfo(String f, int l, int c, String m, Throwable t) {\n             file = f;\n             line = l;\n             col = c;\n@@ -49,19 +48,19 @@\n     }\n     List<ErrorInfo> errors = new LinkedList<ErrorInfo>();\n     \n-    public void addError(File file, int line, int column, String message) {\n+    public void addError(String file, int line, int column, String message) {\n         addError(file, line, column, null);\n     }\n-    public void addError(File file, int line, int column, String message, Throwable t) {\n+    public void addError(String file, int line, int column, String message, Throwable t) {\n         errors.add(new ErrorInfo(file, line, column, message, t));\n     }\n \n-    public void addWarning(File file, int line, int column, String message) {\n+    public void addWarning(String file, int line, int column, String message) {\n         addWarning(file, line, column, null);\n     }\n-    public void addWarning(File file, int line, int column, String message, Throwable t) {\n+    public void addWarning(String file, int line, int column, String message, Throwable t) {\n         if (file != null) {\n-            message = file.getAbsolutePath() + \" [\" + line + \",\" + column + \"]: \" + message; \n+            message = file + \" [\" + line + \",\" + column + \"]: \" + message; \n         }\n         LOG.warning(message);\n     }\n@@ -71,7 +70,7 @@ public int getErrorCount() {\n     }\n     private StringBuilder createMessage(StringBuilder b, ToolErrorListener.ErrorInfo e) {\n         if (e.file != null) {\n-            b.append(e.file.getAbsolutePath())\n+            b.append(e.file)\n                 .append(\" [\").append(e.line).append(',').append(e.col).append(\"]: \").append(e.message);\n         } else if (e.message == null && e.cause != null) {\n             b.append(e.cause.getLocalizedMessage());",
                "changes": 17,
                "blob_url": "https://github.com/apache/cxf/blob/395dafda97d485c91e32f2733e97f7c0183f591a/tools/common/src/main/java/org/apache/cxf/tools/common/ToolErrorListener.java"
            },
            {
                "additions": 1,
                "sha": "05ceb09ca6b5c51fe0caea3973db80fed11a79c5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/395dafda97d485c91e32f2733e97f7c0183f591a/tools/common/src/main/java/org/apache/cxf/tools/common/ToolException.java",
                "deletions": 1,
                "filename": "tools/common/src/main/java/org/apache/cxf/tools/common/ToolException.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/common/src/main/java/org/apache/cxf/tools/common/ToolException.java?ref=395dafda97d485c91e32f2733e97f7c0183f591a",
                "patch": "@@ -89,7 +89,7 @@ public ToolException(String messageId, Logger logger, Object ... args) {\n     }\n     private String createMessage(ToolErrorListener.ErrorInfo e) {\n         if (e.file != null) {\n-            return e.file.getAbsolutePath() + \" [\" + e.line + \",\" + e.col + \"]: \" + e.message; \n+            return e.file + \" [\" + e.line + \",\" + e.col + \"]: \" + e.message; \n         }\n         if (e.message == null && e.cause != null) {\n             return e.cause.getLocalizedMessage();",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/395dafda97d485c91e32f2733e97f7c0183f591a/tools/common/src/main/java/org/apache/cxf/tools/common/ToolException.java"
            },
            {
                "additions": 2,
                "sha": "d0892e4791933e778f93d537f21731fd4e080f9b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/395dafda97d485c91e32f2733e97f7c0183f591a/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBBindErrorListener.java",
                "deletions": 32,
                "filename": "tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBBindErrorListener.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBBindErrorListener.java?ref=395dafda97d485c91e32f2733e97f7c0183f591a",
                "patch": "@@ -19,10 +19,6 @@\n \n package org.apache.cxf.tools.wsdlto.databinding.jaxb;\n \n-import java.io.File;\n-import java.net.URI;\n-import java.net.URISyntaxException;\n-\n import com.sun.tools.xjc.api.ErrorListener;\n \n import org.apache.cxf.tools.common.ToolErrorListener;\n@@ -41,20 +37,7 @@ public boolean hasErrors() {\n     }\n \n     public void error(org.xml.sax.SAXParseException exception) {\n-        String s = exception.getSystemId();\n-        File file = null;\n-        if (s != null && s.startsWith(\"file:\")) {\n-            if (s.contains(\"#\")) {\n-                s = s.substring(0, s.indexOf('#'));\n-            }\n-            try {\n-                URI uri = new URI(s);\n-                file = new File(uri);\n-            } catch (URISyntaxException e) {\n-                //ignore\n-            }\n-        }\n-        listener.addError(file,\n+        listener.addError(exception.getSystemId(),\n                           exception.getLineNumber(),\n                           exception.getColumnNumber(),\n                           mapMessage(exception.getLocalizedMessage()),\n@@ -77,20 +60,7 @@ public void warning(org.xml.sax.SAXParseException exception) {\n             System.out.println(\"JAXB parsing schema warning \" + exception.toString()\n                                + \" in schema \" + exception.getSystemId());\n         }\n-        String s = exception.getSystemId();\n-        File file = null;\n-        if (s != null && s.startsWith(\"file:\")) {\n-            if (s.contains(\"#\")) {\n-                s = s.substring(0, s.indexOf('#'));\n-            }\n-            try {\n-                URI uri = new URI(s);\n-                file = new File(uri);\n-            } catch (URISyntaxException e) {\n-                //ignore\n-            }\n-        }\n-        listener.addWarning(file,\n+        listener.addWarning(exception.getSystemId(),\n                           exception.getLineNumber(),\n                           exception.getColumnNumber(),\n                           mapMessage(exception.getLocalizedMessage()),",
                "changes": 34,
                "blob_url": "https://github.com/apache/cxf/blob/395dafda97d485c91e32f2733e97f7c0183f591a/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBBindErrorListener.java"
            }
        ],
        "repo": "cxf",
        "message": "Update to keep the \"file\" where the error occured as a String for as long as possible to avoid NPE and allow the file to be a real url like an HTTP url\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1375635 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/395dafda97d485c91e32f2733e97f7c0183f591a"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/eb8928278f16bc9ae4384ef6b2b03befab62e92c",
        "bug_id": "cxf_319",
        "file": [
            {
                "additions": 2,
                "sha": "5c4a6d5de8241edbda11477ea5bd993afcb78d32",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8d0fefa3990b902776741e631fdb1fe53c350c6f/api/src/main/java/org/apache/cxf/interceptor/ServiceInvokerInterceptor.java",
                "deletions": 1,
                "filename": "api/src/main/java/org/apache/cxf/interceptor/ServiceInvokerInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/api/src/main/java/org/apache/cxf/interceptor/ServiceInvokerInterceptor.java?ref=8d0fefa3990b902776741e631fdb1fe53c350c6f",
                "patch": "@@ -88,7 +88,8 @@ public void run() {\n         };\n         \n         Executor executor = getExecutor(endpoint);\n-        if (exchange.get(Executor.class) == executor) {\n+        Executor executor2 = exchange.get(Executor.class);\n+        if (executor2 == executor || executor == null) {\n             // already executing on the appropriate executor\n             invocation.run();\n         } else {",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/8d0fefa3990b902776741e631fdb1fe53c350c6f/api/src/main/java/org/apache/cxf/interceptor/ServiceInvokerInterceptor.java"
            },
            {
                "additions": 0,
                "sha": "24508220582799081c8fd1d5b6eaf41b103d6338",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8d0fefa3990b902776741e631fdb1fe53c350c6f/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/JAXRSServiceImpl.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/JAXRSServiceImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/JAXRSServiceImpl.java?ref=8d0fefa3990b902776741e631fdb1fe53c350c6f",
                "patch": "@@ -50,7 +50,6 @@\n import org.apache.cxf.service.model.MessagePartInfo;\n import org.apache.cxf.service.model.OperationInfo;\n import org.apache.cxf.service.model.ServiceInfo;\n-import org.apache.cxf.workqueue.SynchronousExecutor;\n \n /**\n  * The CXF Service implementation which is used \n@@ -74,7 +73,6 @@ public JAXRSServiceImpl(String address, QName qname) {\n \n     public JAXRSServiceImpl(List<ClassResourceInfo> cri, QName qname) {\n         this.classResourceInfos = cri;\n-        executor = SynchronousExecutor.getInstance();    \n         this.serviceName = qname;\n     }\n     ",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/8d0fefa3990b902776741e631fdb1fe53c350c6f/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/JAXRSServiceImpl.java"
            },
            {
                "additions": 7,
                "sha": "28d3bd1f073dd52976f6c87d839aad8ceb5af999",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8d0fefa3990b902776741e631fdb1fe53c350c6f/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/Proxy.java",
                "deletions": 1,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/Proxy.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/Proxy.java?ref=8d0fefa3990b902776741e631fdb1fe53c350c6f",
                "patch": "@@ -22,6 +22,7 @@\n import java.util.Collections;\n import java.util.HashMap;\n import java.util.Map;\n+import java.util.concurrent.Executor;\n import java.util.logging.Level;\n import java.util.logging.Logger;\n \n@@ -41,6 +42,7 @@\n import org.apache.cxf.service.model.InterfaceInfo;\n import org.apache.cxf.service.model.OperationInfo;\n import org.apache.cxf.transport.Conduit;\n+import org.apache.cxf.workqueue.SynchronousExecutor;\n import org.apache.cxf.ws.addressing.AttributedURIType;\n import org.apache.cxf.ws.addressing.EndpointReferenceType;\n import org.apache.cxf.ws.addressing.RelatesToType;\n@@ -169,7 +171,11 @@ public void run() {\n                     }\n                 }\n             };\n-            reliableEndpoint.getApplicationEndpoint().getExecutor().execute(r);\n+            Executor ex = reliableEndpoint.getApplicationEndpoint().getExecutor();\n+            if (ex == null) {\n+                ex = SynchronousExecutor.getInstance();\n+            }\n+            ex.execute(r);\n             return null;\n         }\n         ",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/8d0fefa3990b902776741e631fdb1fe53c350c6f/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/Proxy.java"
            },
            {
                "additions": 6,
                "sha": "42601cafa2a7e2d5572ef1384c625248d68f528c",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/8d0fefa3990b902776741e631fdb1fe53c350c6f/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java",
                "deletions": 1,
                "filename": "rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java?ref=8d0fefa3990b902776741e631fdb1fe53c350c6f",
                "patch": "@@ -49,6 +49,7 @@\n import org.apache.cxf.service.model.EndpointInfo;\n import org.apache.cxf.transport.Conduit;\n import org.apache.cxf.transport.MessageObserver;\n+import org.apache.cxf.workqueue.SynchronousExecutor;\n import org.apache.cxf.ws.addressing.AddressingProperties;\n import org.apache.cxf.ws.addressing.AttributedURIType;\n import org.apache.cxf.ws.addressing.EndpointReferenceType;\n@@ -527,7 +528,11 @@ protected void initiate(boolean requestAcknowledge) {\n             Executor executor = ep.getExecutor();\n             if (null == executor) {\n                 executor = ep.getService().getExecutor();\n-                LOG.log(Level.FINE, \"Using service executor {0}\", executor.getClass().getName());\n+                if (executor == null) {\n+                    executor = SynchronousExecutor.getInstance();\n+                } else {\n+                    LOG.log(Level.FINE, \"Using service executor {0}\", executor.getClass().getName());\n+                }\n             } else {\n                 LOG.log(Level.FINE, \"Using endpoint executor {0}\", executor.getClass().getName());\n             }",
                "changes": 7,
                "blob_url": "https://github.com/apache/cxf/blob/8d0fefa3990b902776741e631fdb1fe53c350c6f/rt/ws/rm/src/main/java/org/apache/cxf/ws/rm/soap/RetransmissionQueueImpl.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-4312] Similar issue on the server side about having an executor set\nby default.   Not needed if the rest of the code guards against NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@1337293 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/8d0fefa3990b902776741e631fdb1fe53c350c6f"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/63be5fbdfcfd34e5ef6dbf83e7d64592693ff0d9",
        "bug_id": "cxf_320",
        "file": [
            {
                "additions": 13,
                "sha": "9ce9b3ad0f7917dc52ed126018c978ef10cb79d0",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/AbstractClient.java",
                "deletions": 9,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/AbstractClient.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/AbstractClient.java?ref=9976b7737d766c931a0143fd4a828205c62be179",
                "patch": "@@ -73,7 +73,7 @@\n  * Common proxy and http-centric client implementation\n  *\n  */\n-public class AbstractClient implements Client, InvocationHandlerAware {\n+public class AbstractClient implements Client {\n     private static final Logger LOG = LogUtils.getL7dLogger(AbstractClient.class);\n     private static final ResourceBundle BUNDLE = BundleUtils.getBundle(AbstractClient.class);\n \n@@ -369,13 +369,20 @@ protected void writeBody(Object o, Message m, Class<?> cls, Type type, Annotatio\n     }\n     \n     @SuppressWarnings(\"unchecked\")\n-    protected Object readBody(Response r, HttpURLConnection conn, Message inMessage, \n-                              Class<?> cls, Type type, Annotation[] anns) {\n+    protected Object readBody(Response r, HttpURLConnection conn, Message inMessage, Class<?> cls, \n+                              Type type, Annotation[] anns) {\n \n+        InputStream inputStream = (InputStream)r.getEntity();\n+        if (inputStream == null) {\n+            return cls == Response.class ? cls : null;\n+        }\n         try {\n             int status = conn.getResponseCode();\n             if (status < 200 || status == 204 || status > 300) {\n-                return null;\n+                Object length = r.getMetadata().getFirst(HttpHeaders.CONTENT_LENGTH);\n+                if (length == null || Integer.parseInt(length.toString()) == 0) {\n+                    return cls == Response.class ? cls : null;\n+                }\n             }\n         } catch (IOException ex) {\n             // won't happen at this stage\n@@ -392,8 +399,7 @@ protected Object readBody(Response r, HttpURLConnection conn, Message inMessage,\n         if (mbr != null) {\n             try {\n                 return mbr.readFrom(cls, type, anns, contentType, \n-                       new MetadataMap<String, Object>(r.getMetadata(), true, true), \n-                       (InputStream)r.getEntity());\n+                       new MetadataMap<String, Object>(r.getMetadata(), true, true), inputStream);\n             } catch (Exception ex) {\n                 throw new WebApplicationException();\n             }\n@@ -569,9 +575,7 @@ public void onMessage(Message m) {\n         \n     }\n \n-    public Object getInvocationHandler() {\n-        return this;\n-    }\n+    \n \n \n }",
                "changes": 22,
                "blob_url": "https://github.com/apache/cxf/blob/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/AbstractClient.java"
            },
            {
                "additions": 5,
                "sha": "afd8f3dc5be4954bcc5d4f99c292ddc0fe730d5b",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java?ref=9976b7737d766c931a0143fd4a828205c62be179",
                "patch": "@@ -62,7 +62,7 @@\n  * Proxy-based client implementation\n  *\n  */\n-public class ClientProxyImpl extends AbstractClient implements InvocationHandler {\n+public class ClientProxyImpl extends AbstractClient implements InvocationHandlerAware, InvocationHandler {\n \n     private static final Logger LOG = LogUtils.getL7dLogger(ClientProxyImpl.class);\n     private static final ResourceBundle BUNDLE = BundleUtils.getBundle(ClientProxyImpl.class);\n@@ -407,6 +407,10 @@ protected Object handleResponse(HttpURLConnection connect, Message outMessage, O\n                         method.getGenericReturnType(), method.getDeclaredAnnotations());\n     }\n \n+    public Object getInvocationHandler() {\n+        return this;\n+    }\n+    \n     protected static void reportInvalidResourceMethod(Method m, String name) {\n         org.apache.cxf.common.i18n.Message errorMsg = \n             new org.apache.cxf.common.i18n.Message(name, ",
                "changes": 6,
                "blob_url": "https://github.com/apache/cxf/blob/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/ClientProxyImpl.java"
            },
            {
                "additions": 12,
                "sha": "568a486cf17a5bf428accbcb1765354276b063c5",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/WebClient.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/WebClient.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/WebClient.java?ref=9976b7737d766c931a0143fd4a828205c62be179",
                "patch": "@@ -36,6 +36,7 @@\n import javax.ws.rs.core.PathSegment;\n import javax.ws.rs.core.Response;\n import javax.ws.rs.core.Response.ResponseBuilder;\n+import javax.ws.rs.core.UriBuilder;\n \n import org.apache.cxf.Bus;\n import org.apache.cxf.bus.spring.SpringBusFactory;\n@@ -303,6 +304,17 @@ public WebClient path(Object path) {\n         return this;\n     }\n     \n+    /**\n+     * Updates the current URI path with path segment which may contain template variables\n+     * @param path new relative path segment\n+     * @param values template variable values\n+     * @return updated WebClient\n+     */\n+    public WebClient path(String path, Object... values) {\n+        URI u = UriBuilder.fromUri(URI.create(\"http://tempuri\")).path(path).buildFromEncoded(values);\n+        return path(u.getRawPath());\n+    }\n+    \n     /**\n      * Updates the current URI query parameters\n      * @param name query name",
                "changes": 12,
                "blob_url": "https://github.com/apache/cxf/blob/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/client/WebClient.java"
            },
            {
                "additions": 1,
                "sha": "9b7f95fb1535ec0843bc95355ef4575028cee2a1",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpHeadersImpl.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpHeadersImpl.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpHeadersImpl.java?ref=9976b7737d766c931a0143fd4a828205c62be179",
                "patch": "@@ -123,7 +123,7 @@ public MediaType getMediaType() {\n \n     private List<String> getListValues(String headerName) {\n         List<String> values = headers.get(headerName);\n-        if (values == null || values.isEmpty()) {\n+        if (values == null || values.isEmpty() || values.get(0) == null) {\n             return Collections.emptyList();\n         }\n         if (HttpUtils.isDateRelatedHeader(headerName)) {",
                "changes": 2,
                "blob_url": "https://github.com/apache/cxf/blob/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/HttpHeadersImpl.java"
            },
            {
                "additions": 10,
                "sha": "a693c557cc82d200fab531243627eb4f719df376",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/client/WebClientTest.java",
                "deletions": 0,
                "filename": "rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/client/WebClientTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/client/WebClientTest.java?ref=9976b7737d766c931a0143fd4a828205c62be179",
                "patch": "@@ -133,4 +133,14 @@ public void testBack() {\n         assertEquals(URI.create(\"http://foo\"), wc.getCurrentURI());\n     }\n     \n+    @Test\n+    public void testPathWithTemplates() {\n+        WebClient wc = WebClient.create(URI.create(\"http://foo\"));\n+        assertEquals(URI.create(\"http://foo\"), wc.getBaseURI());\n+        assertEquals(URI.create(\"http://foo\"), wc.getCurrentURI());\n+        \n+        wc.path(\"{bar}/{foo}\", 1, 2);\n+        assertEquals(URI.create(\"http://foo\"), wc.getBaseURI());\n+        assertEquals(URI.create(\"http://foo/1/2\"), wc.getCurrentURI());\n+    }\n }",
                "changes": 10,
                "blob_url": "https://github.com/apache/cxf/blob/9976b7737d766c931a0143fd4a828205c62be179/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/client/WebClientTest.java"
            },
            {
                "additions": 2,
                "sha": "486ee2956717143ea442b46831e590488901dbb9",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/9976b7737d766c931a0143fd4a828205c62be179/systests/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSSoapBookTest.java",
                "deletions": 2,
                "filename": "systests/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSSoapBookTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/systests/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSSoapBookTest.java?ref=9976b7737d766c931a0143fd4a828205c62be179",
                "patch": "@@ -476,7 +476,7 @@ public void handleMessage(Message message) throws Fault {\n     }\n     \n     @Ignore\n-    private class TestFeature extends AbstractFeature {\n+    public class TestFeature extends AbstractFeature {\n         private TestInterceptor testInterceptor;\n \n         @Override\n@@ -491,7 +491,7 @@ protected boolean handleMessageCalled() {\n     }\n  \n     @Ignore\n-    private class TestInterceptor extends AbstractPhaseInterceptor<Message> {\n+    public class TestInterceptor extends AbstractPhaseInterceptor<Message> {\n         private boolean handleMessageCalled;\n         public TestInterceptor() {\n             this(Phase.PRE_STREAM);",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/9976b7737d766c931a0143fd4a828205c62be179/systests/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSSoapBookTest.java"
            }
        ],
        "repo": "cxf",
        "message": "JAX-RS : adding WebClient.path() which can deal with templates, updating AbstractClient.readBody to return null only if Content-Length is 0 or absent, fixing HTTPHeadersImpl NPE issue\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@790868 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/9976b7737d766c931a0143fd4a828205c62be179"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/0a85e211c03d1db80c040e57966cfd49e6800f0a",
        "bug_id": "cxf_321",
        "file": [
            {
                "additions": 4,
                "sha": "5abf67e192d41bc9f0011e74c22d3b47e8932d67",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/CheckFaultInterceptor.java",
                "deletions": 0,
                "filename": "rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/CheckFaultInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/CheckFaultInterceptor.java?ref=58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf",
                "patch": "@@ -54,6 +54,10 @@ public void handleMessage(SoapMessage message) {\n                 && xmlReader.hasNext()) {\n                 x = xmlReader.next();\n             }\n+            if (!xmlReader.hasNext()) {\n+                //end of document, just return\n+                return;\n+            }\n         } catch (XMLStreamException e) {\n             throw new SoapFault(new Message(\"XML_STREAM_EXC\", LOG), e, \n                                 message.getVersion().getSender());",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf/rt/bindings/soap/src/main/java/org/apache/cxf/binding/soap/interceptor/CheckFaultInterceptor.java"
            },
            {
                "additions": 6,
                "sha": "8bfa7faa79dacb798d74b2c1481177a2f82546d6",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSInInterceptor.java",
                "deletions": 2,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSInInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSInInterceptor.java?ref=58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf",
                "patch": "@@ -134,6 +134,7 @@ private void processRequest(Message message) {\n             throw new WebApplicationException(404);\n         }\n \n+        message.getExchange().put(ROOT_RESOURCE_CLASS, resource);\n \n         List<ProviderInfo<RequestHandler>> shs = \n             ProviderFactory.getInstance().getRequestHandlers();\n@@ -144,6 +145,11 @@ private void processRequest(Message message) {\n                 acceptTypes = (String)message.get(Message.ACCEPT_CONTENT_TYPE);\n                 List<MediaType> acceptContentTypes = JAXRSUtils.sortMediaTypes(acceptTypes);\n                 message.getExchange().put(Message.ACCEPT_CONTENT_TYPE, acceptContentTypes);\n+                OperationResourceInfo ori = \n+                    JAXRSUtils.findTargetMethod(resource, values.getFirst(URITemplate.FINAL_MATCH_GROUP), \n+                                               httpMethod, values, requestContentType, acceptContentTypes);\n+                message.getExchange().put(OperationResourceInfo.class, ori);\n+\n                 return;\n             }\n         }\n@@ -152,8 +158,6 @@ private void processRequest(Message message) {\n         List<MediaType> acceptContentTypes = JAXRSUtils.sortMediaTypes(acceptTypes);\n         message.getExchange().put(Message.ACCEPT_CONTENT_TYPE, acceptContentTypes);\n         \n-        message.getExchange().put(ROOT_RESOURCE_CLASS, resource);\n-        \n         LOG.fine(\"Request path is: \" + path);\n         LOG.fine(\"Request HTTP method is: \" + httpMethod);\n         LOG.fine(\"Request contentType is: \" + requestContentType);",
                "changes": 8,
                "blob_url": "https://github.com/apache/cxf/blob/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSInInterceptor.java"
            },
            {
                "additions": 2,
                "sha": "cf255f0cfd9106383469e0d9fee96f333c04c908",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "deletions": 1,
                "filename": "rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java?ref=58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf",
                "patch": "@@ -615,7 +615,8 @@ protected boolean initializeClassInfo(OperationInfo o, Method method, List<Strin\n         Class paramType = method.getReturnType();\n         Type genericType = method.getGenericReturnType();\n \n-        if (!initializeParameter(o, method, -1, paramType, genericType)) {\n+        if (o.hasOutput()\n+            && !initializeParameter(o, method, -1, paramType, genericType)) {\n             return false;\n         }\n ",
                "changes": 3,
                "blob_url": "https://github.com/apache/cxf/blob/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java"
            },
            {
                "additions": 23,
                "sha": "4a922ad24083b775eeb27c51e8618df71d995c64",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/RountripTest.java",
                "deletions": 0,
                "filename": "rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/RountripTest.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/RountripTest.java?ref=58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf",
                "patch": "@@ -18,12 +18,16 @@\n  */\n package org.apache.cxf.service.factory;\n \n+import javax.xml.namespace.QName;\n+\n import org.apache.cxf.endpoint.ClientImpl;\n import org.apache.cxf.frontend.ClientFactoryBean;\n import org.apache.cxf.frontend.ClientProxyFactoryBean;\n import org.apache.cxf.frontend.ServerFactoryBean;\n import org.apache.cxf.interceptor.LoggingInInterceptor;\n import org.apache.cxf.interceptor.LoggingOutInterceptor;\n+import org.apache.hello_world_doc_lit.Greeter;\n+import org.apache.hello_world_doc_lit.GreeterImplDoc;\n import org.junit.Test;\n \n public class RountripTest extends AbstractSimpleFrontendTest {\n@@ -34,6 +38,7 @@ public void testServerFactoryBean() throws Exception {\n         svrBean.setAddress(\"http://localhost/Hello\");\n         svrBean.setTransportId(\"http://schemas.xmlsoap.org/soap/http\");\n         svrBean.setServiceBean(new HelloServiceImpl());\n+        svrBean.setServiceClass(HelloService.class);        \n         svrBean.setBus(getBus());\n         \n         svrBean.create();\n@@ -53,5 +58,23 @@ public void testServerFactoryBean() throws Exception {\n         c.getInInterceptors().add(new LoggingInInterceptor());\n         \n         assertEquals(\"hello\", client.sayHello());\n+        assertEquals(\"hello\", client.echo(\"hello\"));\n+    }\n+\n+    @Test\n+    public void testOneWay() throws Exception {\n+        ServerFactoryBean svrBean = new ServerFactoryBean();\n+        svrBean.setAddress(\"http://localhost/Hello2\");\n+        svrBean.setTransportId(\"http://schemas.xmlsoap.org/soap/http\");\n+        svrBean.setServiceBean(new GreeterImplDoc());\n+        svrBean.setServiceClass(Greeter.class);\n+        svrBean.setEndpointName(new QName(\"http://apache.org/hello_world_doc_lit\",\n+                                        \"SoapPort\"));\n+        svrBean.setServiceName(new QName(\"http://apache.org/hello_world_doc_lit\",\n+                                         \"SOAPService\"));\n+        svrBean.setWsdlLocation(\"testutils/hello_world_doc_lit.wsdl\");\n+        svrBean.setBus(getBus());\n+        \n+        svrBean.create();\n     }\n }",
                "changes": 23,
                "blob_url": "https://github.com/apache/cxf/blob/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/RountripTest.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1657, CXF-1737] Fix bug with on-ways in wsdl causing simple frontend to NPE and possible problem in checking for faults with an empty message\nAlso make sure OperationResourceInfo thing is set in JAXRS\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@684099 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/58209cc29f33cd1a6cd7ceee8110e3ed2299a2bf"
    },
    {
        "parent": "https://github.com/apache/cxf/commit/5e6cc58ed541a9fb467ae76643f6c584cd2394bb",
        "bug_id": "cxf_322",
        "file": [
            {
                "additions": 3,
                "sha": "382252226adb546230018890ee922e317f316377",
                "status": "modified",
                "raw_url": "https://github.com/apache/cxf/raw/0270ccceb8b3c23362ea4f36192fe3d5b512a815/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSOutInterceptor.java",
                "deletions": 1,
                "filename": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSOutInterceptor.java",
                "contents_url": "https://api.github.com/repos/apache/cxf/contents/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSOutInterceptor.java?ref=0270ccceb8b3c23362ea4f36192fe3d5b512a815",
                "patch": "@@ -196,7 +196,9 @@ private void writeResponseErrorMessage(OutputStream out, String errorString,\n         }\n         List<MediaType> acceptContentTypes = \n             (List<MediaType>)exchange.get(Message.ACCEPT_CONTENT_TYPE);\n-        \n+        if (acceptContentTypes == null) {\n+            acceptContentTypes = JAXRSUtils.sortMediaTypes(\"*/*\");\n+        }        \n         return JAXRSUtils.intersectMimeTypes(acceptContentTypes, produceTypes);\n         \n     }",
                "changes": 4,
                "blob_url": "https://github.com/apache/cxf/blob/0270ccceb8b3c23362ea4f36192fe3d5b512a815/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSOutInterceptor.java"
            }
        ],
        "repo": "cxf",
        "message": "[CXF-1730] Add a NPE guard.   It DOESN'T look like this should be needed though as the JAXRSInInterceptor should have \nalways set this.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/cxf/trunk@683261 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/cxf/commit/0270ccceb8b3c23362ea4f36192fe3d5b512a815"
    }
]