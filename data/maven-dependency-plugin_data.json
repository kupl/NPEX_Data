[{"commit": "https://github.com/apache/maven-dependency-plugin/commit/6d38875e9e78c70ac542ad09601dcf023dc1185e", "parent": "https://github.com/apache/maven-dependency-plugin/commit/16e9d87da46c906c7e3af79a1ff1668a0d658da1", "message": "[MDEP-506] NPE in AnalyzeDepMgt.getMismatch\n\nSubmitted by: Olivier Orand <olivier.orand@orange.com>\t\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1708923 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-dependency-plugin_1", "file": [{"additions": 18, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/6d38875e9e78c70ac542ad09601dcf023dc1185e/src/it/projects/mdep-506-dependency-without-version-in-depmgt/invoker.properties", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/6d38875e9e78c70ac542ad09601dcf023dc1185e/src/it/projects/mdep-506-dependency-without-version-in-depmgt/invoker.properties", "sha": "d1074d2e6c787118a43a230a4212780a2e780891", "changes": 18, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/it/projects/mdep-506-dependency-without-version-in-depmgt/invoker.properties?ref=6d38875e9e78c70ac542ad09601dcf023dc1185e", "patch": "@@ -0,0 +1,18 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+# \n+#   http://www.apache.org/licenses/LICENSE-2.0\n+# \n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+\n+invoker.goals=${project.groupId}:${project.artifactId}:${project.version}:analyze-dep-mgt", "filename": "src/it/projects/mdep-506-dependency-without-version-in-depmgt/invoker.properties"}, {"additions": 60, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/6d38875e9e78c70ac542ad09601dcf023dc1185e/src/it/projects/mdep-506-dependency-without-version-in-depmgt/pom.xml", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/6d38875e9e78c70ac542ad09601dcf023dc1185e/src/it/projects/mdep-506-dependency-without-version-in-depmgt/pom.xml", "sha": "b81f6766401bbb792a3ab1c4bd449aa03ba06b6f", "changes": 60, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/it/projects/mdep-506-dependency-without-version-in-depmgt/pom.xml?ref=6d38875e9e78c70ac542ad09601dcf023dc1185e", "patch": "@@ -0,0 +1,60 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one\n+  ~ or more contributor license agreements.  See the NOTICE file\n+  ~ distributed with this work for additional information\n+  ~ regarding copyright ownership.  The ASF licenses this file\n+  ~ to you under the Apache License, Version 2.0 (the\n+  ~ \"License\"); you may not use this file except in compliance\n+  ~ with the License.  You may obtain a copy of the License at\n+  ~\n+  ~   http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing,\n+  ~ software distributed under the License is distributed on an\n+  ~ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+  ~ KIND, either express or implied.  See the License for the\n+  ~ specific language governing permissions and limitations\n+  ~ under the License.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <groupId>org.apache.maven.its.dependency</groupId>\n+  <artifactId>dependency-without-version-in-depmgt</artifactId>\n+  <version>1.0</version>\n+  <packaging>pom</packaging>\n+  <name>Analyze-dep-mgt should not fail with NPE when dependency in depMgt is partial</name>\n+\n+  <properties>\n+    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n+    <spring-boot.version>1.2.6.RELEASE</spring-boot.version>\n+  </properties>\n+\n+  <dependencyManagement>\n+    <dependencies>\n+      <dependency>\n+        <groupId>org.springframework.boot</groupId>\n+         <artifactId>spring-boot-dependencies</artifactId>\n+         <version>${spring-boot.version}</version>\n+         <type>pom</type>\n+         <scope>import</scope>\n+       </dependency>\n+       <dependency>\n+         <groupId>org.springframework.cloud</groupId>\n+         <artifactId>spring-cloud-spring-service-connector</artifactId>\n+       </dependency>\n+     </dependencies>\n+   </dependencyManagement>\n+\n+   <dependencies>\n+     <dependency>\n+       <groupId>org.springframework.boot</groupId>\n+       <artifactId>spring-boot-starter-cloud-connectors</artifactId>\n+     </dependency>\n+   </dependencies>\n+</project>\n+", "filename": "src/it/projects/mdep-506-dependency-without-version-in-depmgt/pom.xml"}, {"additions": 2, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/6d38875e9e78c70ac542ad09601dcf023dc1185e/src/main/java/org/apache/maven/plugins/dependency/analyze/AnalyzeDepMgt.java", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/6d38875e9e78c70ac542ad09601dcf023dc1185e/src/main/java/org/apache/maven/plugins/dependency/analyze/AnalyzeDepMgt.java", "sha": "8a28e70381869e1a3d73ce4e73cabf369467edf1", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/main/java/org/apache/maven/plugins/dependency/analyze/AnalyzeDepMgt.java?ref=6d38875e9e78c70ac542ad09601dcf023dc1185e", "patch": "@@ -270,7 +270,8 @@ public String getExclusionKey( Exclusion ex )\n                 //workaround for MNG-2961\n                 dependencyArtifact.isSnapshot();\n \n-                if ( !depFromDepMgt.getVersion().equals( dependencyArtifact.getBaseVersion() ) )\n+                if ( depFromDepMgt.getVersion() != null\n+                        && !depFromDepMgt.getVersion().equals( dependencyArtifact.getBaseVersion() ) )\n                 {\n                     mismatchMap.put( dependencyArtifact, depFromDepMgt );\n                 }", "filename": "src/main/java/org/apache/maven/plugins/dependency/analyze/AnalyzeDepMgt.java"}], "repo": "maven-dependency-plugin"}, {"commit": "https://github.com/apache/maven-dependency-plugin/commit/3b6d428934e4ecefca453b7c726f05574f9f7db4", "parent": "https://github.com/apache/maven-dependency-plugin/commit/65239e4ba838374c63b50dbaf448e51425f2e669", "message": "[MDEP-256] Check for a null scope to avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1399960 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-dependency-plugin_2", "file": [{"additions": 1, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/3b6d428934e4ecefca453b7c726f05574f9f7db4/src/main/java/org/apache/maven/plugin/dependency/PurgeLocalRepositoryMojo.java", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/3b6d428934e4ecefca453b7c726f05574f9f7db4/src/main/java/org/apache/maven/plugin/dependency/PurgeLocalRepositoryMojo.java", "sha": "8bdf417cc6c33582408e2bf24c15fe91d6601fa3", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/main/java/org/apache/maven/plugin/dependency/PurgeLocalRepositoryMojo.java?ref=3b6d428934e4ecefca453b7c726f05574f9f7db4", "patch": "@@ -336,7 +336,7 @@ else if ( includes != null && !includes.isEmpty() )\n \n         for ( Dependency dependency : dependencies )\n         {\n-            if ( dependency.getScope().equals( Artifact.SCOPE_SYSTEM ) )\n+            if ( dependency.getScope() != null && dependency.getScope().equals( Artifact.SCOPE_SYSTEM ) )\n             {\n                 // Don't try to purge system dependencies\n                 continue;", "filename": "src/main/java/org/apache/maven/plugin/dependency/PurgeLocalRepositoryMojo.java"}], "repo": "maven-dependency-plugin"}, {"commit": "https://github.com/apache/maven-dependency-plugin/commit/4126d126130fbe7b3bba50ad2c1d4c43cc5f1fd9", "parent": "https://github.com/apache/maven-dependency-plugin/commit/c9fe4fb0f042ac652f29265c405bf6c24fb4019a", "message": "[MDEP-448]\n - NPE prevented cause don't access the file attribute of the \n   artifact which can be null under different circumstances.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1622859 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-dependency-plugin_3", "file": [{"additions": 1, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/4126d126130fbe7b3bba50ad2c1d4c43cc5f1fd9/src/main/java/org/apache/maven/plugin/dependency/fromDependencies/CopyDependenciesMojo.java", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/4126d126130fbe7b3bba50ad2c1d4c43cc5f1fd9/src/main/java/org/apache/maven/plugin/dependency/fromDependencies/CopyDependenciesMojo.java", "sha": "2e1dd7b51724192d9874a75161a0c6d836f5da5b", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/main/java/org/apache/maven/plugin/dependency/fromDependencies/CopyDependenciesMojo.java?ref=4126d126130fbe7b3bba50ad2c1d4c43cc5f1fd9", "patch": "@@ -153,7 +153,7 @@ protected void doExecute()\n         Set<Artifact> skippedArtifacts = dss.getSkippedDependencies();\n         for ( Artifact artifact : skippedArtifacts )\n         {\n-            getLog().info( artifact.getFile().getName() + \" already exists in destination.\" );\n+            getLog().info( artifact.getId() + \" already exists in destination.\" ) ;\n         }\n \n         if ( isCopyPom() && !useRepositoryLayout )", "filename": "src/main/java/org/apache/maven/plugin/dependency/fromDependencies/CopyDependenciesMojo.java"}], "repo": "maven-dependency-plugin"}, {"commit": "https://github.com/apache/maven-dependency-plugin/commit/2b81de214be15368b79e75f0a28a0696448c3464", "parent": "https://github.com/apache/maven-dependency-plugin/commit/3e205f0867f3a3de6de529c7c27606061715d452", "message": "MDEP-366 - Fix NPE when using site report : dependency:analyze-report\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1396824 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-dependency-plugin_4", "file": [{"additions": 1, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/2b81de214be15368b79e75f0a28a0696448c3464/src/it/analyze-report/invoker.properties", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/2b81de214be15368b79e75f0a28a0696448c3464/src/it/analyze-report/invoker.properties", "sha": "ae3071de819a2ab05f853698e800e4400369811d", "changes": 1, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/it/analyze-report/invoker.properties?ref=2b81de214be15368b79e75f0a28a0696448c3464", "patch": "@@ -0,0 +1 @@\n+invoker.goals = clean ${project.groupId}:${project.artifactId}:${project.version}:analyze-report", "filename": "src/it/analyze-report/invoker.properties"}, {"additions": 7, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/2b81de214be15368b79e75f0a28a0696448c3464/src/it/analyze-report/pom.xml", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/2b81de214be15368b79e75f0a28a0696448c3464/src/it/analyze-report/pom.xml", "sha": "02c646accb89860afc76d9876297b8d4956c7fdf", "changes": 7, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/it/analyze-report/pom.xml?ref=2b81de214be15368b79e75f0a28a0696448c3464", "patch": "@@ -0,0 +1,7 @@\n+<project>\n+  <modelVersion>4.0.0</modelVersion>\n+  <groupId>org.apache.maven.its.dependency</groupId>\n+  <artifactId>test</artifactId>\n+  <version>1.0-SNAPSHOT</version>\n+  <packaging>pom</packaging>\n+</project>", "filename": "src/it/analyze-report/pom.xml"}, {"additions": 14, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/2b81de214be15368b79e75f0a28a0696448c3464/src/it/analyze-report/verify.bsh", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/2b81de214be15368b79e75f0a28a0696448c3464/src/it/analyze-report/verify.bsh", "sha": "245718caf0bd6b56306525063bd935d0999a496a", "changes": 14, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/it/analyze-report/verify.bsh?ref=2b81de214be15368b79e75f0a28a0696448c3464", "patch": "@@ -0,0 +1,14 @@\n+import java.io.*;\n+\n+File htmlFile = new File( basedir, \"target/dependency-analysis.html\" );\n+\n+if ( !htmlFile.isFile() )\n+{\n+    throw new Exception( \"Dependency analysis file missing \" + htmlFile );\n+}\n+if ( htmlFile.length() == 0 )\n+{\n+    throw new Exception( \"Dependency analysis file empty \" + htmlFile );\n+}\n+\n+return true;", "filename": "src/it/analyze-report/verify.bsh"}, {"additions": 1, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/2b81de214be15368b79e75f0a28a0696448c3464/src/main/java/org/apache/maven/plugin/dependency/AnalyzeReportMojo.java", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/2b81de214be15368b79e75f0a28a0696448c3464/src/main/java/org/apache/maven/plugin/dependency/AnalyzeReportMojo.java", "sha": "e8c747f06f2987516b84892bdd2821bd630216c8", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/main/java/org/apache/maven/plugin/dependency/AnalyzeReportMojo.java?ref=2b81de214be15368b79e75f0a28a0696448c3464", "patch": "@@ -59,7 +59,7 @@\n     /**\n      * The Maven project to analyze.\n      */\n-    @Parameter\n+    @Component\n     private MavenProject project;\n \n     /**", "filename": "src/main/java/org/apache/maven/plugin/dependency/AnalyzeReportMojo.java"}], "repo": "maven-dependency-plugin"}, {"commit": "https://github.com/apache/maven-dependency-plugin/commit/716d0e6a1599a309c87e951369dfa2b306b96e15", "parent": "https://github.com/apache/maven-dependency-plugin/commit/68d45d1612661520d95e4bc3222bbb55e2d6b471", "message": "mdep-67 - fixed npe and added new use case in finding missing version.\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@517085 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-dependency-plugin_5", "file": [{"additions": 43, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/716d0e6a1599a309c87e951369dfa2b306b96e15/src/it/mdep-67/pom.xml", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/716d0e6a1599a309c87e951369dfa2b306b96e15/src/it/mdep-67/pom.xml", "sha": "8673cb02b11e72483177165427e11ad92f272ba6", "changes": 43, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/it/mdep-67/pom.xml?ref=716d0e6a1599a309c87e951369dfa2b306b96e15", "patch": "@@ -0,0 +1,43 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\r\n+\t<modelVersion>4.0.0</modelVersion>\r\n+\t<name>Copy Dependencies IT</name>\r\n+\t<groupId>org.apache.maven.plugins.maven-dependency-plugin-it</groupId>\r\n+\t<artifactId>mdep-67-it</artifactId>\r\n+\t<version>1</version>\r\n+\t<packaging>jar</packaging>\r\n+\t<dependencies>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>junit</groupId>\r\n+\t\t\t<artifactId>junit</artifactId>\r\n+\t\t\t<version>4.1</version>\r\n+\t\t</dependency>\r\n+\t</dependencies>\r\n+\t<build>\r\n+\t\t<defaultGoal>generate-sources</defaultGoal>\r\n+\t\t<plugins>\r\n+\t\t\t<plugin>\r\n+         \t\t<groupId>org.apache.maven.plugins</groupId>\r\n+          \t\t\t<artifactId>maven-dependency-plugin</artifactId>\r\n+\t\t              <executions>\r\n+\t\t                    <execution>\r\n+\t\t                        <id>copy</id>\r\n+\t\t                        <phase>compile</phase>\r\n+\t\t                        <goals>\r\n+\t\t                            <goal>copy</goal>\r\n+\t\t                        </goals>\r\n+\t\t                        <configuration>\r\n+\t\t                            <artifactItems>\r\n+\t\t                                <artifactItem>\r\n+\t\t                                    <groupId>junit</groupId>\r\n+\t\t                                    <artifactId>junit</artifactId>\r\n+\t\t                                    <type>java-source</type>\r\n+\t\t                                    <outputDirectory>${project.build.directory}/junit-sources</outputDirectory>                                    \r\n+\t\t                                </artifactItem>\r\n+\t\t                            </artifactItems>\r\n+\t\t                        </configuration>\r\n+\t\t                    </execution>\r\n+\t\t                </executions>\r\n+            \t\t</plugin>\r\n+\t\t</plugins>\r\n+\t</build>\r\n+</project>\r", "filename": "src/it/mdep-67/pom.xml"}, {"additions": 18, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/716d0e6a1599a309c87e951369dfa2b306b96e15/src/main/java/org/apache/maven/plugin/dependency/fromConfiguration/AbstractFromConfigurationMojo.java", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/716d0e6a1599a309c87e951369dfa2b306b96e15/src/main/java/org/apache/maven/plugin/dependency/fromConfiguration/AbstractFromConfigurationMojo.java", "sha": "fc0b50cf918e15a94b79d96b99579e49d8d1277b", "changes": 25, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/main/java/org/apache/maven/plugin/dependency/fromConfiguration/AbstractFromConfigurationMojo.java?ref=716d0e6a1599a309c87e951369dfa2b306b96e15", "patch": "@@ -195,7 +195,8 @@ protected Artifact getArtifact( ArtifactItem artifactItem )\n     {\n         Artifact artifact;\n \n-  //      Map managedVersions = createManagedVersionMap( factory, project.getId(), project.getDependencyManagement() );\n+        // Map managedVersions = createManagedVersionMap( factory,\n+        // project.getId(), project.getDependencyManagement() );\n         VersionRange vr;\n         try\n         {\n@@ -256,15 +257,21 @@ protected Artifact getArtifact( ArtifactItem artifactItem )\n      * Tries to find missing version from dependancy list and dependency\n      * management. If found, the artifact is updated with the correct version.\n      * \n+     * It will first look for an exact match on artifactId/groupId/classifier/type and if it doesn't find\n+     * a match, it will try again looking for artifactId and groupId only.\n      * @param artifact\n      *            representing configured file.\n      * @throws MojoExecutionException\n      */\n     private void fillMissingArtifactVersion( ArtifactItem artifact )\n         throws MojoExecutionException\n     {\n-        if ( !findDependencyVersion( artifact, project.getDependencies() )\n-            && !findDependencyVersion( artifact, project.getDependencyManagement().getDependencies() ) )\n+        if ( !findDependencyVersion( artifact, project.getDependencies(), false )\n+            && ( project.getDependencyManagement() == null || !findDependencyVersion( artifact, project\n+                .getDependencyManagement().getDependencies(), false ) )\n+            && !findDependencyVersion( artifact, project.getDependencies(), true )\n+            && ( project.getDependencyManagement() == null || !findDependencyVersion( artifact, project\n+                .getDependencyManagement().getDependencies(), true ) ) )\n         {\n             throw new MojoExecutionException( \"Unable to find artifact version of \" + artifact.getGroupId() + \":\"\n                 + artifact.getArtifactId() + \" in either dependency list or in project's dependency management.\" );\n@@ -279,18 +286,21 @@ private void fillMissingArtifactVersion( ArtifactItem artifact )\n      *            representing configured file.\n      * @param list\n      *            list of dependencies to search.\n+     * @param looseMatch\n+     *            only look at artifactId and groupId\n      * @return the found dependency\n      */\n-    private boolean findDependencyVersion( ArtifactItem artifact, List list )\n+    private boolean findDependencyVersion( ArtifactItem artifact, List list, boolean looseMatch )\n     {\n         boolean result = false;\n+\n         for ( int i = 0; i < list.size(); i++ )\n         {\n             Dependency dependency = (Dependency) list.get( i );\n             if ( StringUtils.equals( dependency.getArtifactId(), artifact.getArtifactId() )\n                 && StringUtils.equals( dependency.getGroupId(), artifact.getGroupId() )\n-                && StringUtils.equals( dependency.getClassifier(), artifact.getClassifier() )\n-                && StringUtils.equals( dependency.getType(), artifact.getType() ) )\n+                && ( looseMatch || StringUtils.equals( dependency.getClassifier(), artifact.getClassifier() ) )\n+                && ( looseMatch || StringUtils.equals( dependency.getType(), artifact.getType() ) ) )\n             {\n \n                 artifact.setVersion( dependency.getVersion() );\n@@ -299,11 +309,12 @@ private boolean findDependencyVersion( ArtifactItem artifact, List list )\n                 break;\n             }\n         }\n+\n         return result;\n     }\n \n     private Map createManagedVersionMap( ArtifactFactory artifactFactory, String projectId,\n-                                        DependencyManagement dependencyManagement )\n+                                         DependencyManagement dependencyManagement )\n         throws MojoExecutionException\n     {\n         Map map;", "filename": "src/main/java/org/apache/maven/plugin/dependency/fromConfiguration/AbstractFromConfigurationMojo.java"}, {"additions": 61, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/716d0e6a1599a309c87e951369dfa2b306b96e15/src/test/java/org/apache/maven/plugin/dependency/fromConfiguration/TestCopyMojo.java", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/716d0e6a1599a309c87e951369dfa2b306b96e15/src/test/java/org/apache/maven/plugin/dependency/fromConfiguration/TestCopyMojo.java", "sha": "ed209c93c81c011b5898445b16a6e8033176acad", "changes": 61, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/test/java/org/apache/maven/plugin/dependency/fromConfiguration/TestCopyMojo.java?ref=716d0e6a1599a309c87e951369dfa2b306b96e15", "patch": "@@ -235,6 +235,7 @@ public List getDependencyList( ArtifactItem item )\n \r\n         return list;\r\n     }\r\n+   \r\n \r\n     public void testMissingVersionFromDependencies()\r\n         throws MojoExecutionException\r\n@@ -258,6 +259,32 @@ public void testMissingVersionFromDependencies()\n         assertEquals( \"2.0-SNAPSHOT\", item.getVersion() );\r\n     }\r\n \r\n+    public void testMissingVersionFromDependenciesLooseMatch()\r\n+    throws MojoExecutionException\r\n+{\r\n+    ArtifactItem item = new ArtifactItem();\r\n+\r\n+    item.setArtifactId( \"artifactId\" );\r\n+    item.setClassifier( \"\" );\r\n+    item.setGroupId( \"groupId\" );\r\n+    item.setType( \"type\" );\r\n+\r\n+    MavenProject project = mojo.getProject();\r\n+    project.setDependencies( getDependencyList( item ) );\r\n+    \r\n+    item.setClassifier( \"sources\" );\r\n+    item.setType( \"jar\" );\r\n+    \r\n+    ArrayList list = new ArrayList();\r\n+    list.add( item );\r\n+    mojo.setArtifactItems( list );\r\n+    \r\n+    mojo.execute();\r\n+    this.assertFileExists( item, true );\r\n+    assertEquals( \"2.1\", item.getVersion() );\r\n+}\r\n+\r\n+    \r\n     public void testMissingVersionFromDependenciesWithClassifier()\r\n         throws MojoExecutionException\r\n     {\r\n@@ -336,6 +363,40 @@ public void testMissingVersionFromDependencyMgt()\n         assertEquals( \"3.0-SNAPSHOT\", item.getVersion() );\r\n     }\r\n \r\n+    public void testMissingVersionFromDependencyMgtLooseMatch()\r\n+    throws MojoExecutionException\r\n+{\r\n+    ArtifactItem item = new ArtifactItem();\r\n+\r\n+    item.setArtifactId( \"artifactId\" );\r\n+    item.setClassifier( \"\" );\r\n+    item.setGroupId( \"groupId\" );\r\n+    item.setType( \"type\" );\r\n+\r\n+    MavenProject project = mojo.getProject();\r\n+    project.setDependencies( getDependencyList( item ) );\r\n+\r\n+    item = new ArtifactItem();\r\n+\r\n+    item.setArtifactId( \"artifactId-2\" );\r\n+    item.setClassifier( \"\" );\r\n+    item.setGroupId( \"groupId\" );\r\n+    item.setType( \"type\" );\r\n+\r\n+    ArrayList list = new ArrayList();\r\n+    list.add( item );\r\n+\r\n+    mojo.setArtifactItems( list );\r\n+\r\n+    project.getDependencyManagement().setDependencies( getDependencyMgtList( item ) );\r\n+\r\n+    item.setType( \"jar\" );\r\n+    mojo.execute();\r\n+\r\n+    this.assertFileExists( item, true );\r\n+    assertEquals( \"3.1\", item.getVersion() );\r\n+}\r\n+    \r\n     public void testMissingVersionFromDependencyMgtWithClassifier()\r\n         throws MojoExecutionException\r\n     {\r", "filename": "src/test/java/org/apache/maven/plugin/dependency/fromConfiguration/TestCopyMojo.java"}], "repo": "maven-dependency-plugin"}, {"commit": "https://github.com/apache/maven-dependency-plugin/commit/47ef6c9549fa5fbd938992e03d5822de15201f24", "parent": "https://github.com/apache/maven-dependency-plugin/commit/7c0e726bd90fba3ca5d033eca91be496e4d9d675", "message": "[MDEP-483] NullPointerException when using classifier and markers\n NPE prevented cause don't access the file attribute of the \n artifact which can be null under different circumstances.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1677079 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-dependency-plugin_6", "file": [{"additions": 1, "raw_url": "https://github.com/apache/maven-dependency-plugin/raw/47ef6c9549fa5fbd938992e03d5822de15201f24/src/main/java/org/apache/maven/plugin/dependency/fromDependencies/UnpackDependenciesMojo.java", "blob_url": "https://github.com/apache/maven-dependency-plugin/blob/47ef6c9549fa5fbd938992e03d5822de15201f24/src/main/java/org/apache/maven/plugin/dependency/fromDependencies/UnpackDependenciesMojo.java", "sha": "7d7b059f0048ef884707cc9abe2e2ef9a4be62f3", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/maven-dependency-plugin/contents/src/main/java/org/apache/maven/plugin/dependency/fromDependencies/UnpackDependenciesMojo.java?ref=47ef6c9549fa5fbd938992e03d5822de15201f24", "patch": "@@ -95,7 +95,7 @@ protected void doExecute()\n \n         for ( Artifact artifact : dss.getSkippedDependencies() )\n         {\n-            getLog().info( artifact.getFile().getName() + \" already exists in destination.\" );\n+            getLog().info( artifact.getId() + \" already exists in destination.\" );\n         }\n     }\n ", "filename": "src/main/java/org/apache/maven/plugin/dependency/fromDependencies/UnpackDependenciesMojo.java"}], "repo": "maven-dependency-plugin"}]
