[{"commit": "https://github.com/apache/manifoldcf/commit/8132517a11811cd30b26bb8c3d56d507a1c47a83", "parent": "https://github.com/apache/manifoldcf/commit/233a61384ad0f84f83ffe9e965f8e6a5b9b1c33f", "message": "CONNECTORS-1627: Fix NPE for documents that have no owner.\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1868956 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_1", "file": [{"additions": 4, "raw_url": "https://github.com/apache/manifoldcf/raw/8132517a11811cd30b26bb8c3d56d507a1c47a83/connectors/csws/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/csws/CswsConnector.java", "blob_url": "https://github.com/apache/manifoldcf/blob/8132517a11811cd30b26bb8c3d56d507a1c47a83/connectors/csws/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/csws/CswsConnector.java", "sha": "ce8514d1ab9c1237ee1ae93fa6a1b5901059b0c2", "changes": 7, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/csws/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/csws/CswsConnector.java?ref=8132517a11811cd30b26bb8c3d56d507a1c47a83", "patch": "@@ -1273,7 +1273,8 @@ else if (acls != null && acls.length > 0)\n           Logging.connectors.debug(\"Csws: Decided to ingest document \"+objID);\n \n         // Index it\n-        ingestFromCsws(llc, documentIdentifier, versionString, actualAcls, denyAcls, rights.getOwnerRight().getRightID(), categoryPaths, activities, desc, sDesc);\n+        ingestFromCsws(llc, documentIdentifier, versionString, actualAcls, denyAcls,\n+          (rights==null)?null:(rights.getOwnerRight()==null)?null:rights.getOwnerRight().getRightID(), categoryPaths, activities, desc, sDesc);\n \n         if (Logging.connectors.isDebugEnabled())\n           Logging.connectors.debug(\"Csws: Done processing document \"+objID);\n@@ -2673,7 +2674,7 @@ public void viewSpecification(IHTTPOutput out, Locale locale, Specification ds,\n   protected void ingestFromCsws(CswsContext llc,\n     String documentIdentifier, String version,\n     String[] actualAcls, String[] denyAcls,\n-    long ownerID,\n+    Long ownerID,\n     String[] categoryPaths,\n     IProcessActivity activities,\n     MetadataDescription desc, SystemMetadataDescription sDesc)\n@@ -2810,7 +2811,7 @@ protected void ingestFromCsws(CswsContext llc,\n       if (parentID != null)\n         rd.addField(GENERAL_PARENTID,parentID.toString());\n \n-      UserInformation owner = llc.getUserInformation(ownerID);  // from ObjectRights\n+      UserInformation owner = ownerID == null?null:llc.getUserInformation(ownerID);  // from ObjectRights\n       UserInformation creator = llc.getUserInformation(objInfo.getCreatorId());\n       UserInformation modifier = llc.getUserInformation(versInfo.getOwnerId());\n       if (owner != null)", "filename": "connectors/csws/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/csws/CswsConnector.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/ba71620fbe03fbcac4eeeb909e7974574abf7d45", "parent": "https://github.com/apache/manifoldcf/commit/aa764bfe1f43ea7619cc27c929bf3b846f9ddae5", "message": "Fix UI NPE reported for Web Connector.\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1850620 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_2", "file": [{"additions": 6, "raw_url": "https://github.com/apache/manifoldcf/raw/ba71620fbe03fbcac4eeeb909e7974574abf7d45/connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/WebcrawlerConnector.java", "blob_url": "https://github.com/apache/manifoldcf/blob/ba71620fbe03fbcac4eeeb909e7974574abf7d45/connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/WebcrawlerConnector.java", "sha": "f1eda70b5eda1cc7d6e24d2af0cb4ebb04d80480", "changes": 7, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/WebcrawlerConnector.java?ref=ba71620fbe03fbcac4eeeb909e7974574abf7d45", "patch": "@@ -1698,7 +1698,12 @@ private void fillInCertificatesTab(Map<String,Object> velocityContext, IHTTPOutp\n         if(trustEverything == \"false\")\n         {\n           String trustStore = cn.getAttributeValue(WebcrawlerConfig.ATTR_TRUSTSTORE);\n-          IKeystoreManager localTruststore = KeystoreManagerFactory.make(\"\",trustStore);\n+          IKeystoreManager localTruststore;\n+          if (trustStore == null) {\n+              localTruststore = KeystoreManagerFactory.make(\"\");\n+          } else {\n+              localTruststore = KeystoreManagerFactory.make(\"\",trustStore);\n+          }\n           String[] truststoreContents = localTruststore.getContents();\n \n           // Each trust store will have only at most one cert in it at this level.  These individual certs are assembled into the proper trust store", "filename": "connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/WebcrawlerConnector.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/98071815852304c31bce87dcd2c8fe3a159cc6fd", "parent": "https://github.com/apache/manifoldcf/commit/488e3498fe20aa92ee9125e4579732a35f972959", "message": "Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/branches/CONNECTORS-1270@1727375 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_3", "file": [{"additions": 1, "raw_url": "https://github.com/apache/manifoldcf/raw/98071815852304c31bce87dcd2c8fe3a159cc6fd/connectors/opennlp/connector/src/main/java/org/apache/manifoldcf/agents/transformation/opennlp/OpenNlpExtractor.java", "blob_url": "https://github.com/apache/manifoldcf/blob/98071815852304c31bce87dcd2c8fe3a159cc6fd/connectors/opennlp/connector/src/main/java/org/apache/manifoldcf/agents/transformation/opennlp/OpenNlpExtractor.java", "sha": "fc02dc6588c124dda3cde75e6b1672111a914853", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/opennlp/connector/src/main/java/org/apache/manifoldcf/agents/transformation/opennlp/OpenNlpExtractor.java?ref=98071815852304c31bce87dcd2c8fe3a159cc6fd", "patch": "@@ -284,7 +284,7 @@ public int addOrReplaceDocumentWithException(String documentURI, VersionContext\n   public boolean checkMimeTypeIndexable(VersionContext pipelineDescription, String mimeType, IOutputCheckActivity checkActivity)\n     throws ManifoldCFException, ServiceInterruption\n   {\n-    if (!acceptableMimeTypes.contains(mimeType.toLowerCase(Locale.ROOT))) {\n+    if (mimeType == null || !acceptableMimeTypes.contains(mimeType.toLowerCase(Locale.ROOT))) {\n       return false;\n     }\n     // Do a downstream check too", "filename": "connectors/opennlp/connector/src/main/java/org/apache/manifoldcf/agents/transformation/opennlp/OpenNlpExtractor.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/35b5fd474127f9f03ee74d6f46f793b894876ef6", "parent": "https://github.com/apache/manifoldcf/commit/1e6c7427820db96dd5bc394e86894ec305267348", "message": "Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1445027 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_4", "file": [{"additions": 2, "raw_url": "https://github.com/apache/manifoldcf/raw/35b5fd474127f9f03ee74d6f46f793b894876ef6/connectors/elasticsearch/connector/src/main/java/org/apache/manifoldcf/agents/output/elasticsearch/ElasticSearchIndex.java", "blob_url": "https://github.com/apache/manifoldcf/blob/35b5fd474127f9f03ee74d6f46f793b894876ef6/connectors/elasticsearch/connector/src/main/java/org/apache/manifoldcf/agents/output/elasticsearch/ElasticSearchIndex.java", "sha": "438effd747b2e6160e713504dcda2fb609deb164", "changes": 2, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/elasticsearch/connector/src/main/java/org/apache/manifoldcf/agents/output/elasticsearch/ElasticSearchIndex.java?ref=35b5fd474127f9f03ee74d6f46f793b894876ef6", "patch": "@@ -154,6 +154,8 @@ protected static boolean writeField(PrintWriter pw, boolean needComma,\n     String fieldName, String[] fieldValues)\n     throws IOException\n   {\n+    if (fieldValues == null)\n+      return needComma;\n     for(int j=0; j<fieldValues.length; j++){\n       if (needComma)\n         pw.print(\",\");", "filename": "connectors/elasticsearch/connector/src/main/java/org/apache/manifoldcf/agents/output/elasticsearch/ElasticSearchIndex.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/1d921e0cbd97fcf8a6792028dcc0c8940ef3b601", "parent": "https://github.com/apache/manifoldcf/commit/d9e6ff7f6ff65a86acc393cf2233761edc56f35c", "message": "Add illegal argument exception so we don't get NPEs later\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1615716 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_5", "file": [{"additions": 9, "raw_url": "https://github.com/apache/manifoldcf/raw/1d921e0cbd97fcf8a6792028dcc0c8940ef3b601/framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/system/WorkerThread.java", "blob_url": "https://github.com/apache/manifoldcf/blob/1d921e0cbd97fcf8a6792028dcc0c8940ef3b601/framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/system/WorkerThread.java", "sha": "4ca3aaa09d59ac9ebbcb2ef2083deace7a7fd9aa", "changes": 14, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/system/WorkerThread.java?ref=1d921e0cbd97fcf8a6792028dcc0c8940ef3b601", "patch": "@@ -1280,7 +1280,7 @@ public boolean checkDocumentNeedsReindexing(String documentIdentifier,\n     {\n       String documentIdentifierHash = ManifoldCF.hash(documentIdentifier);\n       String componentIdentifierHash = computeComponentIDHash(componentIdentifier);\n-      IPipelineSpecificationWithVersions spec = computePipelineSpecification(documentIdentifierHash,componentIdentifierHash);\n+      IPipelineSpecificationWithVersions spec = computePipelineSpecification(documentIdentifierHash,componentIdentifierHash,documentIdentifier);\n       return ingester.checkFetchDocument(spec,newVersionString,parameterVersion,connection.getACLAuthority());\n     }\n \n@@ -1598,7 +1598,7 @@ public void ingestDocumentWithException(String documentIdentifier,\n         \n       // First, we need to add into the metadata the stuff from the job description.\n       ingester.documentIngest(\n-        computePipelineSpecification(documentIdentifierHash,componentIdentifierHash),\n+        computePipelineSpecification(documentIdentifierHash,componentIdentifierHash,documentIdentifier),\n         connectionName,documentIdentifierHash,componentIdentifierHash,\n         version,parameterVersion,\n         connection.getACLAuthority(),\n@@ -1641,7 +1641,7 @@ public void noDocument(String documentIdentifier,\n       checkMultipleDispositions(documentIdentifier,componentIdentifier,componentIdentifierHash);\n \n       ingester.documentNoData(\n-        computePipelineSpecification(documentIdentifierHash,componentIdentifierHash),\n+        computePipelineSpecification(documentIdentifierHash,componentIdentifierHash,documentIdentifier),\n         connectionName,documentIdentifierHash,componentIdentifierHash,\n         version,parameterVersion,\n         connection.getACLAuthority(),\n@@ -2142,9 +2142,13 @@ protected void touchComponentSet(String documentIdentifier, String componentIden\n     }\n     \n     protected IPipelineSpecificationWithVersions computePipelineSpecification(String documentIdentifierHash,\n-      String componentIdentifierHash)\n+      String componentIdentifierHash,\n+      String documentIdentifier)\n     {\n-      return new PipelineSpecificationWithVersions(pipelineSpecification,previousDocuments.get(documentIdentifierHash),componentIdentifierHash);\n+      QueuedDocument qd = previousDocuments.get(documentIdentifierHash);\n+      if (qd == null)\n+        throw new IllegalArgumentException(\"Unrecognized document identifier: '\"+documentIdentifier+\"'\");\n+      return new PipelineSpecificationWithVersions(pipelineSpecification,qd,componentIdentifierHash);\n     }\n \n   }", "filename": "framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/system/WorkerThread.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/c45d5e4bd7639160ce9c743c7c58efcee03ac02c", "parent": "https://github.com/apache/manifoldcf/commit/47004983f292691f5929ce512dbfbaf4584b11bf", "message": "Fix an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/branches/CONNECTORS-990@1610484 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_6", "file": [{"additions": 2, "raw_url": "https://github.com/apache/manifoldcf/raw/c45d5e4bd7639160ce9c743c7c58efcee03ac02c/framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/system/WorkerThread.java", "blob_url": "https://github.com/apache/manifoldcf/blob/c45d5e4bd7639160ce9c743c7c58efcee03ac02c/framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/system/WorkerThread.java", "sha": "c6a0286e58e452a8c636f63e260f615fc5c6b498", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/system/WorkerThread.java?ref=c45d5e4bd7639160ce9c743c7c58efcee03ac02c", "patch": "@@ -1324,7 +1324,8 @@ public boolean checkDocumentNeedsReindexing(String documentIdentifier,\n       String newVersionString)\n       throws ManifoldCFException\n     {\n-      IPipelineSpecificationWithVersions spec = fetchPipelineSpecifications.get(documentIdentifier);\n+      String documentIdentifierHash = ManifoldCF.hash(documentIdentifier);\n+      IPipelineSpecificationWithVersions spec = fetchPipelineSpecifications.get(documentIdentifierHash);\n       return ingester.checkFetchDocument(spec,newVersionString,parameterVersion,connection.getACLAuthority());\n     }\n ", "filename": "framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/system/WorkerThread.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/3838faea4b0177b28899521831e8fa9ca4dadbaf", "parent": "https://github.com/apache/manifoldcf/commit/7e998067e641aa2c877c25eb03f116f3a23c9c07", "message": "Fix an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/branches/CONNECTORS-946@1599991 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_7", "file": [{"additions": 10, "raw_url": "https://github.com/apache/manifoldcf/raw/3838faea4b0177b28899521831e8fa9ca4dadbaf/framework/crawler-ui/src/main/webapp/editjob.jsp", "blob_url": "https://github.com/apache/manifoldcf/blob/3838faea4b0177b28899521831e8fa9ca4dadbaf/framework/crawler-ui/src/main/webapp/editjob.jsp", "sha": "13d01890e9ab0b25ef93c5d3a26e74932f860f7e", "changes": 11, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/framework/crawler-ui/src/main/webapp/editjob.jsp?ref=3838faea4b0177b28899521831e8fa9ca4dadbaf", "patch": "@@ -208,7 +208,6 @@\n \t\tsequenceArray.add(null);\n \t}\n \n-\n \t// Get the names of the various Javascript methods we'll need to call\n \tString outputCheckMethod = \"checkOutputSpecification\";\n \tString outputSaveCheckMethod = \"checkOutputSpecificationForSave\";\n@@ -654,6 +653,7 @@\n \t\t\tsequenceArray.add(transformationConnectionSequenceNumber);\n \t\t}\n \t}\n+\t\n %>\n \n </head>\n@@ -734,9 +734,18 @@\n \tif (startColumn != tabsArray.size())\n \t{\n \t\tint colspan = tabsArray.size() - startColumn;\n+\t\tif (currentSequenceNumber == null)\n+\t\t{\n+%>\n+\t\t      <td class=\"blanksequencetab\" colspan=\"<%=colspan%>\"></td>\n+<%\n+\t\t}\n+\t\telse\n+\t\t{\n %>\n \t\t      <td class=\"sequencetab\" colspan=\"<%=colspan%>\"><%=(currentSequenceNumber.intValue()+1)%>.</td>\n <%\n+\t\t}\n \t}\n %>\n \t\t      <td class=\"remaindersequencetab\" rowspan=\"2\">", "filename": "framework/crawler-ui/src/main/webapp/editjob.jsp"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/f4f9e457b33faef6f3550239c9f05f4dd2fea943", "parent": "https://github.com/apache/manifoldcf/commit/1109a1d26f72891c7e579347986c8525a539679c", "message": "Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/branches/CONNECTORS-829@1551687 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_8", "file": [{"additions": 12, "raw_url": "https://github.com/apache/manifoldcf/raw/f4f9e457b33faef6f3550239c9f05f4dd2fea943/connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/ThrottledFetcher.java", "blob_url": "https://github.com/apache/manifoldcf/blob/f4f9e457b33faef6f3550239c9f05f4dd2fea943/connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/ThrottledFetcher.java", "sha": "89267422c6f7dab7b6167a76ff23d290870dd57a", "changes": 15, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/ThrottledFetcher.java?ref=f4f9e457b33faef6f3550239c9f05f4dd2fea943", "patch": "@@ -1813,7 +1813,7 @@ public int hashCode()\n       return protocol.hashCode() +\n         server.hashCode() +\n         (port * 31) +\n-        authentication.hashCode() +\n+        ((authentication==null)?0:authentication.hashCode()) +\n         ((trustStoreString==null)?0:trustStoreString.hashCode()) +\n         ((proxyHost==null)?0:proxyHost.hashCode()) +\n         (proxyPort * 29) +\n@@ -1828,9 +1828,18 @@ public boolean equals(Object o)\n         return false;\n       ConnectionPoolKey other = (ConnectionPoolKey)o;\n       if (!server.equals(other.server) ||\n-        port != other.port ||\n-        !authentication.equals(other.authentication))\n+        port != other.port)\n         return false;\n+      if (authentication == null || other.authentication == null)\n+      {\n+        if (authentication != other.authentication)\n+          return false;\n+      }\n+      else\n+      {\n+        if (!authentication.equals(other.authentication))\n+          return false;\n+      }\n       if (trustStoreString == null || other.trustStoreString == null)\n       {\n         if (trustStoreString != other.trustStoreString)", "filename": "connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/ThrottledFetcher.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/bfe0a45de153cd19a206b4a8cdf1a0c799e0f948", "parent": "https://github.com/apache/manifoldcf/commit/75f6b73a6fafbaab5bd36b7adf208af11243d8cf", "message": "Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/branches/CONNECTORS-703@1497321 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_9", "file": [{"additions": 10, "raw_url": "https://github.com/apache/manifoldcf/raw/bfe0a45de153cd19a206b4a8cdf1a0c799e0f948/framework/crawler-ui/src/main/webapp/execute.jsp", "blob_url": "https://github.com/apache/manifoldcf/blob/bfe0a45de153cd19a206b4a8cdf1a0c799e0f948/framework/crawler-ui/src/main/webapp/execute.jsp", "sha": "24b4b09cef0dc07ba9c3106cb49e4b76c6e876c2", "changes": 14, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/framework/crawler-ui/src/main/webapp/execute.jsp?ref=bfe0a45de153cd19a206b4a8cdf1a0c799e0f948", "patch": "@@ -256,9 +256,12 @@\n \t\t\t\t\t{\n \t\t\t\t\t\tconnection.getPrerequisites().clear();\n \t\t\t\t\t\tString[] y = variableContext.getParameterValues(\"prerequisites\");\n-\t\t\t\t\t\tfor (String s : y)\n+\t\t\t\t\t\tif (y != null)\n \t\t\t\t\t\t{\n-\t\t\t\t\t\t\tconnection.getPrerequisites().add(s);\n+\t\t\t\t\t\t\tfor (String s : y)\n+\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\tconnection.getPrerequisites().add(s);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\t\n@@ -381,9 +384,12 @@\n \t\t\t\t\t{\n \t\t\t\t\t\tconnection.getPrerequisites().clear();\n \t\t\t\t\t\tString[] y = variableContext.getParameterValues(\"prerequisites\");\n-\t\t\t\t\t\tfor (String s : y)\n+\t\t\t\t\t\tif (y != null)\n \t\t\t\t\t\t{\n-\t\t\t\t\t\t\tconnection.getPrerequisites().add(s);\n+\t\t\t\t\t\t\tfor (String s : y)\n+\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\tconnection.getPrerequisites().add(s);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n ", "filename": "framework/crawler-ui/src/main/webapp/execute.jsp"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/41a724005d352585c0134332711e46d2650225c3", "parent": "https://github.com/apache/manifoldcf/commit/8016c6135343a80b720653d1ae8fa25d2bb81e3c", "message": "Fix NPE; no ticket number yet.\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1491844 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_10", "file": [{"additions": 8, "raw_url": "https://github.com/apache/manifoldcf/raw/41a724005d352585c0134332711e46d2650225c3/connectors/livelink/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/livelink/LivelinkAuthority.java", "blob_url": "https://github.com/apache/manifoldcf/blob/41a724005d352585c0134332711e46d2650225c3/connectors/livelink/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/livelink/LivelinkAuthority.java", "sha": "b034937ad4df4aca5eb6cefcfae426626f00b3b6", "changes": 12, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/livelink/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/livelink/LivelinkAuthority.java?ref=41a724005d352585c0134332711e46d2650225c3", "patch": "@@ -1265,7 +1265,10 @@ public AuthorizationResponseDescription(String userName,\n       this.serverHTTPNTLMDomain = (serverHTTPNTLMDomain==null)?\"\":serverHTTPNTLMDomain;\n       this.serverHTTPNTLMUsername = (serverHTTPNTLMUsername==null)?\"\":serverHTTPNTLMUsername;\n       this.serverHTTPNTLMPassword = (serverHTTPNTLMPassword==null)?\"\":serverHTTPNTLMPassword;\n-      this.serverHTTPSKeystore = serverHTTPSKeystore.getString();\n+      if (serverHTTPSKeystore != null)\n+        this.serverHTTPSKeystore = serverHTTPSKeystore.getString();\n+      else\n+        this.serverHTTPSKeystore = null;\n       this.responseLifetime = responseLifetime;\n     }\n \n@@ -1281,7 +1284,7 @@ public String getCriticalSectionName()\n       return getClass().getName() + \"-\" + userName + \"-\" + serverProtocol + \"-\" + serverName +\n         \"-\" + Integer.toString(serverPort) + \"-\" + serverUsername + \"-\" + serverPassword +\n         \"-\" + serverHTTPCgi + \"-\" + serverHTTPNTLMDomain + \"-\" + serverHTTPNTLMUsername +\n-        \"-\" + serverHTTPNTLMPassword + \"-\" + serverHTTPSKeystore;\n+        \"-\" + serverHTTPNTLMPassword + \"-\" + ((serverHTTPSKeystore==null)?\"\":serverHTTPSKeystore);\n     }\n \n     /** Return the object expiration interval */\n@@ -1298,7 +1301,7 @@ public int hashCode()\n         serverProtocol.hashCode() + serverName.hashCode() + new Integer(serverPort).hashCode() +\n         serverUsername.hashCode() + serverPassword.hashCode() +\n         serverHTTPCgi.hashCode() + serverHTTPNTLMDomain.hashCode() + serverHTTPNTLMUsername.hashCode() +\n-        serverHTTPNTLMPassword.hashCode() + serverHTTPSKeystore.hashCode();\n+        serverHTTPNTLMPassword.hashCode() + ((serverHTTPSKeystore==null)?0:serverHTTPSKeystore.hashCode());\n     }\n     \n     public boolean equals(Object o)\n@@ -1311,7 +1314,8 @@ public boolean equals(Object o)\n         ard.serverUsername.equals(serverUsername) && ard.serverPassword.equals(serverPassword) &&\n         ard.serverHTTPCgi.equals(serverHTTPCgi) && ard.serverHTTPNTLMDomain.equals(serverHTTPNTLMDomain) &&\n         ard.serverHTTPNTLMUsername.equals(serverHTTPNTLMUsername) && ard.serverHTTPNTLMPassword.equals(serverHTTPNTLMPassword) &&\n-        ard.serverHTTPSKeystore.equals(serverHTTPSKeystore);\n+        ((ard.serverHTTPSKeystore != null && serverHTTPSKeystore != null && ard.serverHTTPSKeystore.equals(serverHTTPSKeystore)) ||\n+          ((ard.serverHTTPSKeystore == null || serverHTTPSKeystore == null) && ard.serverHTTPSKeystore == serverHTTPSKeystore));\n     }\n     \n   }", "filename": "connectors/livelink/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/livelink/LivelinkAuthority.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/d039cef9dfd4fb4a491e22e968ff07692514c19e", "parent": "https://github.com/apache/manifoldcf/commit/1bb5956e11ce2e6c0fec99109130dbf3e8eadc90", "message": "Fix an NPE, part of CONNECTORS-623\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1447526 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_11", "file": [{"additions": 1, "raw_url": "https://github.com/apache/manifoldcf/raw/d039cef9dfd4fb4a491e22e968ff07692514c19e/connectors/solr/connector/src/main/java/org/apache/manifoldcf/agents/output/solr/ModifiedHttpSolrServer.java", "blob_url": "https://github.com/apache/manifoldcf/blob/d039cef9dfd4fb4a491e22e968ff07692514c19e/connectors/solr/connector/src/main/java/org/apache/manifoldcf/agents/output/solr/ModifiedHttpSolrServer.java", "sha": "df7544f32442617dbda154c22b4f8a2eb45612d2", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/solr/connector/src/main/java/org/apache/manifoldcf/agents/output/solr/ModifiedHttpSolrServer.java?ref=d039cef9dfd4fb4a491e22e968ff07692514c19e", "patch": "@@ -167,7 +167,7 @@ else if( SolrRequest.METHOD.POST == request.getMethod() ) {\n                 }\n               }\n \n-              if (isMultipart) {\n+              if (isMultipart && streams != null) {\n                 for (ContentStream content : streams) {\n                   String contentType = content.getContentType();\n                   if(contentType==null) {", "filename": "connectors/solr/connector/src/main/java/org/apache/manifoldcf/agents/output/solr/ModifiedHttpSolrServer.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/4f2592d9d02b956415afc49f855fa9d7f28eb9e0", "parent": "https://github.com/apache/manifoldcf/commit/de7d3b315d4b6fd385de71d3b5069bcba32edf78", "message": "Move NPE fix to release as well.\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1437953 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_12", "file": [{"additions": 3, "raw_url": "https://github.com/apache/manifoldcf/raw/4f2592d9d02b956415afc49f855fa9d7f28eb9e0/CHANGES.txt", "blob_url": "https://github.com/apache/manifoldcf/blob/4f2592d9d02b956415afc49f855fa9d7f28eb9e0/CHANGES.txt", "sha": "e06f73c70457fafa41c9cd73bb44b4863888b46d", "changes": 5, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/CHANGES.txt?ref=4f2592d9d02b956415afc49f855fa9d7f28eb9e0", "patch": "@@ -3,11 +3,12 @@ $Id$\n \n ======================= 1.2-dev =====================\n \n-CONNECTORS-617: Simple report NPE under Derby.\n-(Karl Wright)\n \n ======================= Release 1.1 =====================\n \n+CONNECTORS-617: Simple report NPE under Derby.\n+(Karl Wright)\n+\n CONNECTORS-621: Solr connector commit logic needs to use specified\n update path.\n (Karl Wright)", "filename": "CHANGES.txt"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/d5ec4ed9f2f2aaa39f5d6556c357b923fd9a8a8c", "parent": "https://github.com/apache/manifoldcf/commit/91b85fd08f4eec767fccd82bc5704e5fd312c59c", "message": "More NPE fixes, part of CONNECTORS-617.\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1435543 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_13", "file": [{"additions": 3, "raw_url": "https://github.com/apache/manifoldcf/raw/d5ec4ed9f2f2aaa39f5d6556c357b923fd9a8a8c/framework/core/src/main/java/org/apache/manifoldcf/core/database/DBInterfaceDerby.java", "blob_url": "https://github.com/apache/manifoldcf/blob/d5ec4ed9f2f2aaa39f5d6556c357b923fd9a8a8c/framework/core/src/main/java/org/apache/manifoldcf/core/database/DBInterfaceDerby.java", "sha": "ac48e6c5874043fca471f6e627dea125bc248bc4", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/framework/core/src/main/java/org/apache/manifoldcf/core/database/DBInterfaceDerby.java?ref=d5ec4ed9f2f2aaa39f5d6556c357b923fd9a8a8c", "patch": "@@ -1583,7 +1583,7 @@ public static String caseSensitiveRegularExpressionCompare(String value, String\n     try\n     {\n       Pattern p = Pattern.compile(regularExpression,0);\n-      Matcher m = p.matcher(value);\n+      Matcher m = p.matcher((value==null)?\"\":value);\n       if (m.find())\n         return \"true\";\n       else\n@@ -1603,7 +1603,7 @@ public static String caseInsensitiveSubstring(String value, String regularExpres\n     try\n     {\n       Pattern p = Pattern.compile(regularExpression,Pattern.CASE_INSENSITIVE);\n-      Matcher m = p.matcher(value);\n+      Matcher m = p.matcher((value==null)?\"\":value);\n       if (m.find())\n         return m.group(1);\n       return \"\";\n@@ -1626,7 +1626,7 @@ public static String caseSensitiveSubstring(String value, String regularExpressi\n     try\n     {\n       Pattern p = Pattern.compile(regularExpression,0);\n-      Matcher m = p.matcher(value);\n+      Matcher m = p.matcher((value==null)?\"\":value);\n       if (m.find())\n         return m.group(1);\n       return \"\";", "filename": "framework/core/src/main/java/org/apache/manifoldcf/core/database/DBInterfaceDerby.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/c5bdc95dfc2a766e51fd960b6ea318f1afc87b2b", "parent": "https://github.com/apache/manifoldcf/commit/2a142eaf04037f05dd4260dfb8517b0b1e1b4cee", "message": "Fix NPE that results when fetch is aborted before it starts.\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1428135 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_14", "file": [{"additions": 2, "raw_url": "https://github.com/apache/manifoldcf/raw/c5bdc95dfc2a766e51fd960b6ea318f1afc87b2b/connectors/rss/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.java", "blob_url": "https://github.com/apache/manifoldcf/blob/c5bdc95dfc2a766e51fd960b6ea318f1afc87b2b/connectors/rss/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.java", "sha": "405ae3ee0592430dbfdfa90482f13b571378a887", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/rss/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.java?ref=c5bdc95dfc2a766e51fd960b6ea318f1afc87b2b", "patch": "@@ -681,7 +681,8 @@ public void doneFetch(IVersionActivity activities)\n       \n       if (fetchType != null)\n       {\n-        methodThread.abort();\n+        if (methodThread != null && threadStarted)\n+          methodThread.abort();\n         long endTime = System.currentTimeMillis();\n         server.endFetch();\n ", "filename": "connectors/rss/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/rss/ThrottledFetcher.java"}, {"additions": 2, "raw_url": "https://github.com/apache/manifoldcf/raw/c5bdc95dfc2a766e51fd960b6ea318f1afc87b2b/connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/ThrottledFetcher.java", "blob_url": "https://github.com/apache/manifoldcf/blob/c5bdc95dfc2a766e51fd960b6ea318f1afc87b2b/connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/ThrottledFetcher.java", "sha": "2f6c8b9c10cc508a108fc0d5d68a2f5f6f1fcb35", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/ThrottledFetcher.java?ref=c5bdc95dfc2a766e51fd960b6ea318f1afc87b2b", "patch": "@@ -1806,7 +1806,8 @@ public void doneFetch(IVersionActivity activities)\n       if (fetchType != null)\n       {\n         // Abort the connection, if not already complete\n-        methodThread.abort();\n+        if (methodThread != null && threadStarted)\n+          methodThread.abort();\n \n         long endTime = System.currentTimeMillis();\n         int i = 0;", "filename": "connectors/webcrawler/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/webcrawler/ThrottledFetcher.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/fd6bdb80c0ae4ea93bb9073720af716b8be5e748", "parent": "https://github.com/apache/manifoldcf/commit/bf3d3ef1bf746536ba31bd71d70b54958cc80211", "message": "Fix NPE resulting from premature cleanup\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/branches/CONNECTORS-578@1421365 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_15", "file": [{"additions": 2, "raw_url": "https://github.com/apache/manifoldcf/raw/fd6bdb80c0ae4ea93bb9073720af716b8be5e748/connectors/livelink/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/livelink/LivelinkConnector.java", "blob_url": "https://github.com/apache/manifoldcf/blob/fd6bdb80c0ae4ea93bb9073720af716b8be5e748/connectors/livelink/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/livelink/LivelinkConnector.java", "sha": "126f48c3b9466d97bb70f95b7a410f64a7ae79fb", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/livelink/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/livelink/LivelinkConnector.java?ref=fd6bdb80c0ae4ea93bb9073720af716b8be5e748", "patch": "@@ -602,7 +602,8 @@ public void poll()\n   public void disconnect()\n     throws ManifoldCFException\n   {\n-    llServer.disconnect();\n+    if (llServer != null)\n+      llServer.disconnect();\n     hasBeenSetup = false;\n     llServer = null;\n     LLDocs = null;", "filename": "connectors/livelink/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/livelink/LivelinkConnector.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/2d78bd68d7f6be23f7a375ecab0a1e38911dae07", "parent": "https://github.com/apache/manifoldcf/commit/2c413af4c5ab2faf581771cb556f69f5e2985ea2", "message": "Fix NPE from the hopcount fix I committed earlier today.\n\ngit-svn-id: https://svn.apache.org/repos/asf/manifoldcf/trunk@1372670 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_16", "file": [{"additions": 69, "raw_url": "https://github.com/apache/manifoldcf/raw/2d78bd68d7f6be23f7a375ecab0a1e38911dae07/framework/core/src/main/java/org/apache/manifoldcf/core/database/DBInterfaceMySQL.java", "blob_url": "https://github.com/apache/manifoldcf/blob/2d78bd68d7f6be23f7a375ecab0a1e38911dae07/framework/core/src/main/java/org/apache/manifoldcf/core/database/DBInterfaceMySQL.java", "sha": "a49b7d58032ef5f55d0e53b1343af886dc440a97", "changes": 73, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/framework/core/src/main/java/org/apache/manifoldcf/core/database/DBInterfaceMySQL.java?ref=2d78bd68d7f6be23f7a375ecab0a1e38911dae07", "patch": "@@ -33,7 +33,10 @@\n   public static final String mysqlClientProperty = \"org.apache.manifoldcf.mysql.client\";\n   \n   private static final String _driver = \"com.mysql.jdbc.Driver\";\n-  \n+\n+  // Once we enter the serializable realm, STOP any additional transactions from doing anything at all.\n+  protected int serializableDepth = 0;\n+\n   protected String cacheKey;\n \n   public DBInterfaceMySQL(IThreadContext tc, String databaseName, String userName, String password)\n@@ -1001,9 +1004,16 @@ public int getWindowedReportMaxRows()\n   public void beginTransaction()\n     throws ManifoldCFException\n   {\n-    super.beginTransaction(TRANSACTION_READCOMMITTED);\n+    beginTransaction(TRANSACTION_ENCLOSING);\n   }\n \n+  protected int getActualTransactionType()\n+  {\n+    if (th == null)\n+      return -1;\n+    return th.getTransactionType();\n+  }\n+  \n   /** Begin a database transaction.  This method call MUST be paired with an endTransaction() call,\n   * or database handles will be lost.  If the transaction should be rolled back, then signalRollback() should\n   * be called before the transaction is ended.\n@@ -1016,7 +1026,40 @@ public void beginTransaction()\n   public void beginTransaction(int transactionType)\n     throws ManifoldCFException\n   {\n-    super.beginTransaction(TRANSACTION_READCOMMITTED);\n+    if (getCurrentTransactionType() == TRANSACTION_SERIALIZED)\n+    {\n+      serializableDepth++;\n+      return;\n+    }\n+\n+    if (transactionType == TRANSACTION_ENCLOSING)\n+    {\n+      transactionType = getCurrentTransactionType();\n+    }\n+\n+    switch (transactionType)\n+    {\n+    case TRANSACTION_REPEATABLEREAD:\n+      if (transactionType != getActualTransactionType())\n+        // Must precede actual transaction start\n+        performModification(\"SET TRANSACTION ISOLATION LEVEL REPEATABLE READ\",null,null);\n+      super.beginTransaction(transactionType);\n+      break;\n+    case TRANSACTION_READCOMMITTED:\n+      if (transactionType != getActualTransactionType())\n+        // Must precede actual transaction start\n+        performModification(\"SET TRANSACTION ISOLATION LEVEL READ COMMITTED\",null,null);\n+      super.beginTransaction(transactionType);\n+      break;\n+    case TRANSACTION_SERIALIZED:\n+      if (transactionType != getActualTransactionType())\n+        // Must precede actual transaction start\n+        performModification(\"SET TRANSACTION ISOLATION LEVEL SERIALIZABLE\",null,null);\n+      super.beginTransaction(TRANSACTION_SERIALIZED);\n+      break;\n+    default:\n+      throw new ManifoldCFException(\"Bad transaction type: \"+Integer.toString(transactionType));\n+    }\n   }\n \n   /** Abstract method to start a transaction */\n@@ -1046,7 +1089,29 @@ protected void commitCurrentTransaction()\n       throw reinterpretException(e);\n     }\n   }\n-  \n+\n+  /** Signal that a rollback should occur on the next endTransaction().\n+  */\n+  public void signalRollback()\n+  {\n+    if (serializableDepth == 0)\n+      super.signalRollback();\n+  }\n+\n+  /** End a database transaction, either performing a commit or a rollback (depending on whether\n+  * signalRollback() was called within the transaction).\n+  */\n+  public void endTransaction()\n+    throws ManifoldCFException\n+  {\n+    if (serializableDepth > 0)\n+    {\n+      serializableDepth--;\n+      return;\n+    }\n+    super.endTransaction();\n+  }\n+\n   /** Abstract method to roll back a transaction */\n   protected void rollbackCurrentTransaction()\n     throws ManifoldCFException", "filename": "framework/core/src/main/java/org/apache/manifoldcf/core/database/DBInterfaceMySQL.java"}, {"additions": 1, "raw_url": "https://github.com/apache/manifoldcf/raw/2d78bd68d7f6be23f7a375ecab0a1e38911dae07/framework/core/src/main/java/org/apache/manifoldcf/core/interfaces/IDBInterface.java", "blob_url": "https://github.com/apache/manifoldcf/blob/2d78bd68d7f6be23f7a375ecab0a1e38911dae07/framework/core/src/main/java/org/apache/manifoldcf/core/interfaces/IDBInterface.java", "sha": "651588bf92c69cd5919b0a022099a8ddbae88731", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/framework/core/src/main/java/org/apache/manifoldcf/core/interfaces/IDBInterface.java?ref=2d78bd68d7f6be23f7a375ecab0a1e38911dae07", "patch": "@@ -38,6 +38,7 @@\n   public static int TRANSACTION_ENCLOSING = 0;\n   public static int TRANSACTION_READCOMMITTED = 1;\n   public static int TRANSACTION_SERIALIZED = 2;\n+  public static int TRANSACTION_REPEATABLEREAD = 3;\n \n   /** Initialize.  This method is called once per JVM instance, in order to set up\n   * database communication.", "filename": "framework/core/src/main/java/org/apache/manifoldcf/core/interfaces/IDBInterface.java"}, {"additions": 2, "raw_url": "https://github.com/apache/manifoldcf/raw/2d78bd68d7f6be23f7a375ecab0a1e38911dae07/framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/jobs/HopCount.java", "blob_url": "https://github.com/apache/manifoldcf/blob/2d78bd68d7f6be23f7a375ecab0a1e38911dae07/framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/jobs/HopCount.java", "sha": "862d7636016bd2b19302184b72e8b7a15aef8f15", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/jobs/HopCount.java?ref=2d78bd68d7f6be23f7a375ecab0a1e38911dae07", "patch": "@@ -503,7 +503,8 @@ public void finishParents(Long jobID, String[] legalLinkTypes, String[] sourceDo\n         }\n         for (int i = 0; i < rval.length; i++)\n         {\n-          if (changeMap.get(targetDocumentIDHashes[i]).booleanValue())\n+          Boolean x = changeMap.get(targetDocumentIDHashes[i]);\n+          if (x != null && x.booleanValue())\n             rval[i] = true;\n         }\n ", "filename": "framework/pull-agent/src/main/java/org/apache/manifoldcf/crawler/jobs/HopCount.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/f1350d0ea72e2a48ac4d8f1b93e971669c95dff6", "parent": "https://github.com/apache/manifoldcf/commit/667178957b2767789b05b514b8e26d7b615e574e", "message": "Fix an NPE bug in CMIS UI.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/lcf/trunk@1298510 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_17", "file": [{"additions": 3, "raw_url": "https://github.com/apache/manifoldcf/raw/f1350d0ea72e2a48ac4d8f1b93e971669c95dff6/connectors/cmis/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/cmis/CmisRepositoryConnector.java", "blob_url": "https://github.com/apache/manifoldcf/blob/f1350d0ea72e2a48ac4d8f1b93e971669c95dff6/connectors/cmis/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/cmis/CmisRepositoryConnector.java", "sha": "8ebbc86ce4de9c41ac10c06c53aa0e788cf23dcf", "changes": 9, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/cmis/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/cmis/CmisRepositoryConnector.java?ref=f1350d0ea72e2a48ac4d8f1b93e971669c95dff6", "patch": "@@ -881,19 +881,16 @@ public String processConfigurationPost(IThreadContext threadContext,\n   public void viewSpecification(IHTTPOutput out, Locale locale, DocumentSpecification ds)\n       throws ManifoldCFException, IOException {\n     int i = 0;\n-    boolean seenAny = false;\n     ConfigParams specificationParams = new ConfigParams();\n+    String cmisQuery = \"\";\n     while (i < ds.getChildCount()) {\n       SpecificationNode sn = ds.getChild(i);\n       if (sn.getType().equals(JOB_STARTPOINT_NODE_TYPE)) {\n-        if (seenAny == false) {\n-          seenAny = true;\n-        }\n-        specificationParams.setParameter(\n-            CmisConfig.CMIS_QUERY_PARAM.toUpperCase(), sn.getAttributeValue(CmisConfig.CMIS_QUERY_PARAM));\n+        cmisQuery = sn.getAttributeValue(CmisConfig.CMIS_QUERY_PARAM);\n       }\n       i++;\n     }\n+    specificationParams.setParameter(CmisConfig.CMIS_QUERY_PARAM.toUpperCase(), cmisQuery);\n     outputResource(VIEW_SPEC_FORWARD, out, locale, specificationParams);\n   }\n ", "filename": "connectors/cmis/connector/src/main/java/org/apache/manifoldcf/crawler/connectors/cmis/CmisRepositoryConnector.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/4abd0bac0d3bda5ce21128da3b55406fd06ea55b", "parent": "https://github.com/apache/manifoldcf/commit/e83fd791c7fa4cf60e60fadcdd21c27b8f2aff4d", "message": "UI error due to NPE; broken as part of CONNECTORS-335, fixed now.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/lcf/trunk@1225560 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_18", "file": [{"additions": 1, "raw_url": "https://github.com/apache/manifoldcf/raw/4abd0bac0d3bda5ce21128da3b55406fd06ea55b/connectors/opensearchserver/connector/src/main/java/org/apache/manifoldcf/agents/output/opensearchserver/OpenSearchServerConnector.java", "blob_url": "https://github.com/apache/manifoldcf/blob/4abd0bac0d3bda5ce21128da3b55406fd06ea55b/connectors/opensearchserver/connector/src/main/java/org/apache/manifoldcf/agents/output/opensearchserver/OpenSearchServerConnector.java", "sha": "3f8cc21cb8259c5d48159400ebee710464c31239", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/connectors/opensearchserver/connector/src/main/java/org/apache/manifoldcf/agents/output/opensearchserver/OpenSearchServerConnector.java?ref=4abd0bac0d3bda5ce21128da3b55406fd06ea55b", "patch": "@@ -85,7 +85,7 @@ public OpenSearchServerConnector() {\n    */\n   private static void outputResource(String resName, IHTTPOutput out,\n       Locale locale, OpenSearchServerParam params) throws ManifoldCFException {\n-    Messages.outputResource(out,locale,resName,params.buildMap(),false);\n+    Messages.outputResource(out,locale,resName,(params==null)?null:params.buildMap(),false);\n   }\n \n   @Override", "filename": "connectors/opensearchserver/connector/src/main/java/org/apache/manifoldcf/agents/output/opensearchserver/OpenSearchServerConnector.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/845b1c65c16dc372df52250053a71cb18886239e", "parent": "https://github.com/apache/manifoldcf/commit/f4938cc766c5c9d22c6ad423456eff16e50913fe", "message": "Fix NPE in solr connector, due to the addition of metadata mapping functionality.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/lcf/trunk@966209 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_19", "file": [{"additions": 1, "raw_url": "https://github.com/apache/manifoldcf/raw/845b1c65c16dc372df52250053a71cb18886239e/modules/connectors/solr/connector/org/apache/lcf/agents/output/solr/HttpPoster.java", "blob_url": "https://github.com/apache/manifoldcf/blob/845b1c65c16dc372df52250053a71cb18886239e/modules/connectors/solr/connector/org/apache/lcf/agents/output/solr/HttpPoster.java", "sha": "0908bad422018b1662c7e071b0465fb69de5e578", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/modules/connectors/solr/connector/org/apache/lcf/agents/output/solr/HttpPoster.java?ref=845b1c65c16dc372df52250053a71cb18886239e", "patch": "@@ -903,6 +903,7 @@ public IngestThread(String documentURI, RepositoryDocument document, Map argumen\n       this.shareDenyAcls = shareDenyAcls;\n       this.acls = acls;\n       this.denyAcls = denyAcls;\n+      this.sourceTargets = sourceTargets;\n     }\n \n     public void run()", "filename": "modules/connectors/solr/connector/org/apache/lcf/agents/output/solr/HttpPoster.java"}], "repo": "manifoldcf"}, {"commit": "https://github.com/apache/manifoldcf/commit/0e8c1e923d8575267570daabb4ceab1a56722971", "parent": "https://github.com/apache/manifoldcf/commit/be38cbbfe78919fa29c2ef9af44788d21d768f18", "message": "Fix a NPE issue with the backup command, when job schedules are present.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/lcf/trunk@926245 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "manifoldcf_20", "file": [{"additions": 9, "raw_url": "https://github.com/apache/manifoldcf/raw/0e8c1e923d8575267570daabb4ceab1a56722971/modules/framework/pull-agent/org/apache/lcf/crawler/jobs/JobManager.java", "blob_url": "https://github.com/apache/manifoldcf/blob/0e8c1e923d8575267570daabb4ceab1a56722971/modules/framework/pull-agent/org/apache/lcf/crawler/jobs/JobManager.java", "sha": "65845509b8408a1cfa3d455772858c1a44eceb32", "changes": 11, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/manifoldcf/contents/modules/framework/pull-agent/org/apache/lcf/crawler/jobs/JobManager.java?ref=0e8c1e923d8575267570daabb4ceab1a56722971", "patch": "@@ -155,8 +155,13 @@ public void exportConfiguration(java.io.OutputStream os)\n   protected static void writeEnumeratedValues(java.io.OutputStream os, EnumeratedValues ev)\n     throws java.io.IOException\n   {\n+    if (ev == null)\n+    {\n+      LCF.writeSdword(os,-1);\n+      return;\n+    }\n     int size = ev.size();\n-    LCF.writeDword(os,size);\n+    LCF.writeSdword(os,size);\n     Iterator iter = ev.getValues();\n     while (iter.hasNext())\n     {\n@@ -230,7 +235,9 @@ public void importConfiguration(java.io.InputStream is)\n   protected EnumeratedValues readEnumeratedValues(java.io.InputStream is)\n     throws java.io.IOException\n   {\n-    int size = LCF.readDword(is);\n+    int size = LCF.readSdword(is);\n+    if (size == -1)\n+      return null;\n     int[] values = new int[size];\n     int i = 0;\n     while (i < size)", "filename": "modules/framework/pull-agent/org/apache/lcf/crawler/jobs/JobManager.java"}], "repo": "manifoldcf"}]
