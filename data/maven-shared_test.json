{
    "maven-shared_1886267": {
        "repo": "maven-shared",
        "message": "Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@447321 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/18862672ed69bf56a319ea7d05da9580c8ca79c3",
        "parent": "https://github.com/apache/maven-shared/commit/95732c167128d807a94e7bd7d1b3fba52afd5a71",
        "bug_id": "maven-shared_1886267",
        "file": [
            {
                "sha": "5610c6e05a28b1c4fd1ae0541235a172f3876968",
                "filename": "maven-user/maven-user-acegi/src/main/java/org/apache/maven/user/acegi/AclManager.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/18862672ed69bf56a319ea7d05da9580c8ca79c3/maven-user/maven-user-acegi/src/main/java/org/apache/maven/user/acegi/AclManager.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/18862672ed69bf56a319ea7d05da9580c8ca79c3/maven-user/maven-user-acegi/src/main/java/org/apache/maven/user/acegi/AclManager.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-user/maven-user-acegi/src/main/java/org/apache/maven/user/acegi/AclManager.java?ref=18862672ed69bf56a319ea7d05da9580c8ca79c3",
                "patch": "@@ -62,7 +62,7 @@ public BasicAclExtendedDao getAclDao()\n     protected String getCurrentUserName()\n     {\n         Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n-        \n+\n         /* seems that anonymous user sets principal as String */\n         if ( principal instanceof String )\n         {\n@@ -171,7 +171,11 @@ public List getUsersInstancePermissions( Class clazz, Object id, List userPermis\n     public InstancePermissions getUserInstancePermissions( Class clazz, Object id )\n     {\n         InstancePermissions permission = new InstancePermissions();\n-        aclToPermission( getAcl( clazz, id, getCurrentUserName() ), permission );\n+        BasicAclEntry acl = getAcl( clazz, id, getCurrentUserName() );\n+        if ( acl != null )\n+        {\n+            aclToPermission( acl, permission );\n+        }\n         return permission;\n     }\n ",
                "deletions": 2
            }
        ],
        "patched_files": [
            "AclManager.java"
        ],
        "unit_tests": [
            "AclManagerTest.java"
        ]
    },
    "maven-shared_d347960": {
        "repo": "maven-shared",
        "message": "Fix NPE when no settings.xml available or localRepository not specified\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@489698 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/d347960b9509515cef3b6bb7314e434aea66e6d6",
        "parent": "https://github.com/apache/maven-shared/commit/66b9b54252779e9e8320f695c50cfa9d7100c304",
        "bug_id": "maven-shared_d347960",
        "file": [
            {
                "sha": "7af6802f97bacb4537a414e1685c999733454813",
                "filename": "maven-plugin-testing-tools/src/main/java/org/apache/maven/shared/test/plugin/RepositoryTool.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/d347960b9509515cef3b6bb7314e434aea66e6d6/maven-plugin-testing-tools/src/main/java/org/apache/maven/shared/test/plugin/RepositoryTool.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/d347960b9509515cef3b6bb7314e434aea66e6d6/maven-plugin-testing-tools/src/main/java/org/apache/maven/shared/test/plugin/RepositoryTool.java",
                "status": "modified",
                "changes": 28,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-plugin-testing-tools/src/main/java/org/apache/maven/shared/test/plugin/RepositoryTool.java?ref=d347960b9509515cef3b6bb7314e434aea66e6d6",
                "patch": "@@ -47,16 +47,16 @@\n import org.codehaus.plexus.util.xml.pull.XmlPullParserException;\n \n /**\n- * Tools to access and manage Maven repositories for test builds, including construction of a local \n+ * Tools to access and manage Maven repositories for test builds, including construction of a local\n  * repository directory structure.\n- * \n+ *\n  * <p>\n- * <b>WARNING:</b> Currently, the <code>createLocalRepositoryFromPlugin</code> method will not \n- * resolve parent POMs that exist <b>only</b> in your normal local repository, and are not reachable \n- * using the relativePath element. This may result in failed test builds, as one or more of the \n+ * <b>WARNING:</b> Currently, the <code>createLocalRepositoryFromPlugin</code> method will not\n+ * resolve parent POMs that exist <b>only</b> in your normal local repository, and are not reachable\n+ * using the relativePath element. This may result in failed test builds, as one or more of the\n  * plugin's ancestor POMs cannot be resolved.\n  * </p>\n- * \n+ *\n  * @plexus.component role=\"org.apache.maven.shared.test.plugin.RepositoryTool\" role-hint=\"default\"\n  * @author jdcasey\n  */\n@@ -108,7 +108,9 @@ public File findLocalRepositoryDirectory()\n             throw new TestToolsException( \"Error building Maven settings.\", e );\n         }\n \n-        return new File( settings.getLocalRepository() );\n+        return settings == null || settings.getLocalRepository() == null\n+            ? new File( new File( System.getProperty( \"user.home\" ) ), \".m2/repository\" )\n+            : new File( settings.getLocalRepository() );\n     }\n \n     /**\n@@ -155,13 +157,13 @@ public ArtifactRepository createLocalArtifactRepositoryInstance( File localRepos\n      * Install a test version of a plugin - along with its POM, and as many ancestor POMs as can be\n      * reached using the &lt;relativePath/&gt; element - to a clean local repository directory for\n      * use in test builds.\n-     * \n+     *\n      * <p>\n      * <b>WARNING:</b> Currently, this method will not resolve parent POMs that exist <b>only</b> in\n      * your normal local repository, and are not reachable using the relativePath element. This may\n      * result in failed test builds, as one or more of the plugin's ancestor POMs cannot be resolved.\n      * </p>\n-     * \n+     *\n      * @param pluginProject\n      * @param targetLocalRepoBasedir\n      * @throws TestToolsException\n@@ -196,8 +198,8 @@ public void createLocalRepositoryFromPlugin( MavenProject pluginProject, File re\n     /**\n      * Traverse &lt;relativePath/&gt; links for successive POMs in the plugin's ancestry, installing\n      * each one into the test-time local repository.\n-     * \n-     * @param realPomFile The real plugin POM; a starting point, but the POM is already installed, \n+     *\n+     * @param realPomFile The real plugin POM; a starting point, but the POM is already installed,\n      *   so we won't actually install this file, only use it to locate parents.\n      * @param localRepo The test-time local repository instance\n      */\n@@ -241,12 +243,12 @@ private void installLocallyReachableAncestorPoms( File realPomFile, ArtifactRepo\n                 if ( parent != null )\n                 {\n                     pom = new File( pom.getParentFile(), parent.getRelativePath() );\n-                    \n+\n                     if ( pomGroupId == null )\n                     {\n                         pomGroupId = parent.getGroupId();\n                     }\n-                    \n+\n                     if ( pomVersion == null )\n                     {\n                         pomVersion = parent.getVersion();",
                "deletions": 13
            }
        ],
        "patched_files": [
            "RepositoryTool.java"
        ],
        "unit_tests": [
            "RepositoryToolTest.java"
        ]
    },
    "maven-shared_2a16c67": {
        "repo": "maven-shared",
        "message": "avoid NPE if decoration == null\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@1060297 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/2a16c67457c6058b3ba5c1725158bbd384bdfa25",
        "parent": "https://github.com/apache/maven-shared/commit/5521982b752a978a7f94a9c5882945ad632c0038",
        "bug_id": "maven-shared_2a16c67",
        "file": [
            {
                "sha": "b66b5bfc68ce9234824e2dfffedb5dd490ded971",
                "filename": "maven-doxia-tools/src/main/java/org/apache/maven/doxia/tools/DefaultSiteTool.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/2a16c67457c6058b3ba5c1725158bbd384bdfa25/maven-doxia-tools/src/main/java/org/apache/maven/doxia/tools/DefaultSiteTool.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/2a16c67457c6058b3ba5c1725158bbd384bdfa25/maven-doxia-tools/src/main/java/org/apache/maven/doxia/tools/DefaultSiteTool.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-doxia-tools/src/main/java/org/apache/maven/doxia/tools/DefaultSiteTool.java?ref=2a16c67457c6058b3ba5c1725158bbd384bdfa25",
                "patch": "@@ -1269,8 +1269,11 @@ private DecorationModel getDecorationModel( MavenProject project, MavenProject p\n                 decoration = new DecorationModel();\n             }\n \n-            final String name = ( StringUtils.isEmpty( decoration.getName() ) ?\n-                project.getName() : decoration.getName() );\n+            String name = project.getName();\n+            if ( decoration != null && StringUtils.isNotEmpty( decoration.getName() ) )\n+            {\n+                name = decoration.getName();\n+            }\n \n             // Merge the parent and child site descriptors\n             assembler.assembleModelInheritance( name, decoration, parent, project.getUrl(),",
                "deletions": 2
            }
        ],
        "patched_files": [
            "DefaultSiteTool.java"
        ],
        "unit_tests": [
            "DefaultSiteToolTest.java"
        ]
    },
    "maven-shared_d392767": {
        "repo": "maven-shared",
        "message": "[MSHARED-144] NPE in DefaultSiteTool.populateParentMenu() under certain conditions\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@919638 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/d392767889834c08ce4001dafbc267b5b1f0d35f",
        "parent": "https://github.com/apache/maven-shared/commit/571965128dba3bf45cec595d1e8c0ac262830c50",
        "bug_id": "maven-shared_d392767",
        "file": [
            {
                "sha": "359669b242bbc9b0619865fc62bab5494cb761ab",
                "filename": "maven-doxia-tools/src/main/java/org/apache/maven/doxia/tools/DefaultSiteTool.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/d392767889834c08ce4001dafbc267b5b1f0d35f/maven-doxia-tools/src/main/java/org/apache/maven/doxia/tools/DefaultSiteTool.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/d392767889834c08ce4001dafbc267b5b1f0d35f/maven-doxia-tools/src/main/java/org/apache/maven/doxia/tools/DefaultSiteTool.java",
                "status": "modified",
                "changes": 31,
                "additions": 21,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-doxia-tools/src/main/java/org/apache/maven/doxia/tools/DefaultSiteTool.java?ref=d392767889834c08ce4001dafbc267b5b1f0d35f",
                "patch": "@@ -827,20 +827,31 @@ public void populateParentMenu( DecorationModel decorationModel, Locale locale,\n             else\n             {\n                 // parent has no url, assume relative path is given by site structure\n-                String parentPath = parentProject.getBasedir().getAbsolutePath();\n-                String projectPath = project.getBasedir().getAbsolutePath();\n-                parentUrl = getRelativePath( parentPath, projectPath ) + \"/index.html\";\n+                File parentBasedir = parentProject.getBasedir();\n+                // First make sure that the parent is available on the file system\n+                if( parentBasedir != null ) {\n+                    // Try to find the relative path to the parent via the file system\n+                    String parentPath = parentBasedir.getAbsolutePath();\n+                    String projectPath = project.getBasedir().getAbsolutePath();\n+                    parentUrl = getRelativePath( parentPath, projectPath ) + \"/index.html\";\n+                }\n             }\n \n-            if ( menu.getName() == null )\n-            {\n-                menu.setName( i18n.getString( \"site-tool\", locale, \"decorationModel.menu.parentproject\" ) );\n+            // Only add the parent menu if we were able to find a URL for it\n+            if( parentUrl == null ) {\n+                getLogger().warn( \"Unable to find a URL to the parent project. The parent menu will NOT be added.\" );\n             }\n+            else {\n+                if ( menu.getName() == null )\n+                {\n+                    menu.setName( i18n.getString( \"site-tool\", locale, \"decorationModel.menu.parentproject\" ) );\n+                }\n \n-            MenuItem item = new MenuItem();\n-            item.setName( parentProject.getName() );\n-            item.setHref( parentUrl );\n-            menu.addItem( item );\n+                MenuItem item = new MenuItem();\n+                item.setName( parentProject.getName() );\n+                item.setHref( parentUrl );\n+                menu.addItem( item );\n+            }\n         }\n     }\n ",
                "deletions": 10
            }
        ],
        "patched_files": [
            "DefaultSiteTool.java"
        ],
        "unit_tests": [
            "DefaultSiteToolTest.java"
        ]
    },
    "maven-shared_b9541fb": {
        "repo": "maven-shared",
        "message": "o Changed commented-out testProjectWithConflictDependencyScope to the behaviour Maven appears to exhibit - real expected outcome is still preserved in comments\n\no Added commented-out testProjectWithConflictDependencyScopeReversedOrder to fix corrected NPE - cannot uncomment since Maven's internal resolution tree is contradictory to the events it fires\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@556047 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/b9541fb1d2afae8bc62741f170123d8f47df2e84",
        "parent": "https://github.com/apache/maven-shared/commit/7259f4178a3ca50263b23d173406be0223415513",
        "bug_id": "maven-shared_b9541fb",
        "file": [
            {
                "sha": "38a94e9cb61b8a813b912cba42cced6cb6eb7f89",
                "filename": "maven-dependency-tree/src/test/java/org/apache/maven/shared/dependency/tree/DependencyTreeBuilderTest.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/b9541fb1d2afae8bc62741f170123d8f47df2e84/maven-dependency-tree/src/test/java/org/apache/maven/shared/dependency/tree/DependencyTreeBuilderTest.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/b9541fb1d2afae8bc62741f170123d8f47df2e84/maven-dependency-tree/src/test/java/org/apache/maven/shared/dependency/tree/DependencyTreeBuilderTest.java",
                "status": "modified",
                "changes": 46,
                "additions": 44,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-dependency-tree/src/test/java/org/apache/maven/shared/dependency/tree/DependencyTreeBuilderTest.java?ref=b9541fb1d2afae8bc62741f170123d8f47df2e84",
                "patch": "@@ -227,15 +227,57 @@ public void testProjectWithConflictDependencyScope() throws DependencyTreeBuilde\n \n         MavenProject project = createProject( projectArtifact, new Artifact[] { childArtifact } );\n \n+        // TODO: i would have expected this..\n+//        DependencyNode expectedRootNode = createNode( \"g:p:t:1\" );\n+//        DependencyNode childArtifactNode = createNode( \"g:a:t:1\" );\n+//        expectedRootNode.addChild( childArtifactNode );\n+//        DependencyNode nearestArtifactNode = createNode( \"g:c:t:1:compile\" );\n+//        nearestArtifactNode.setOriginalScope( \"test\" );\n+//        childArtifactNode.addChild( nearestArtifactNode );\n+//        DependencyNode grandchildArtifactNode = createNode( \"g:b:t:1\" );\n+//        childArtifactNode.addChild( grandchildArtifactNode );\n+//        grandchildArtifactNode.addChild( createNode( \"g:c:t:1:compile\", DependencyNode.OMITTED_FOR_DUPLICATE, nearestArtifactNode.getArtifact() ) );\n+\n         DependencyNode expectedRootNode = createNode( \"g:p:t:1\" );\n         DependencyNode childArtifactNode = createNode( \"g:a:t:1\" );\n         expectedRootNode.addChild( childArtifactNode );\n-        DependencyNode nearestArtifactNode = createNode( \"g:c:t:1:compile\" );\n+        DependencyNode farthestArtifactNode = createNode( \"g:c:t:1:compile\" );\n+        DependencyNode nearestArtifactNode = createNode( \"g:c:t:1:compile\", DependencyNode.OMITTED_FOR_DUPLICATE, farthestArtifactNode.getArtifact() );\n         nearestArtifactNode.setOriginalScope( \"test\" );\n         childArtifactNode.addChild( nearestArtifactNode );\n         DependencyNode grandchildArtifactNode = createNode( \"g:b:t:1\" );\n         childArtifactNode.addChild( grandchildArtifactNode );\n-        grandchildArtifactNode.addChild( createNode( \"g:c:t:1:compile\", DependencyNode.OMITTED_FOR_DUPLICATE, nearestArtifactNode.getArtifact() ) );\n+        grandchildArtifactNode.addChild( farthestArtifactNode );\n+        \n+        assertDependencyTree( expectedRootNode, project );\n+    }\n+    */\n+\n+    // TODO: fix when discussion resolved: http://www.mail-archive.com/dev@maven.apache.org/msg68011.html\n+    /*\n+    public void testProjectWithConflictDependencyScopeReversedOrder() throws DependencyTreeBuilderException, ArtifactResolutionException\n+    {\n+        Artifact projectArtifact = createArtifact( \"g:p:t:1\" );\n+        Artifact childArtifact = createArtifact( \"g:a:t:1\" );\n+        Artifact nearestArtifact = createArtifact( \"g:c:t:1:test\" );\n+        Artifact grandchildArtifact = createArtifact( \"g:b:t:1\" );\n+        Artifact farthestArtifact = createArtifact( \"g:c:t:1:compile\" );\n+        addArtifactMetadata( childArtifact, new Artifact[] { grandchildArtifact, nearestArtifact } );\n+        addArtifactMetadata( grandchildArtifact, farthestArtifact );\n+\n+        MavenProject project = createProject( projectArtifact, new Artifact[] { childArtifact } );\n+\n+        // TODO: add expected results as per above test method\n+        DependencyNode expectedRootNode = createNode( \"g:p:t:1\" );\n+        DependencyNode childArtifactNode = createNode( \"g:a:t:1\" );\n+        expectedRootNode.addChild( childArtifactNode );\n+        DependencyNode grandchildArtifactNode = createNode( \"g:b:t:1\" );\n+        childArtifactNode.addChild( grandchildArtifactNode );\n+        DependencyNode farthestArtifactNode = createNode( \"g:c:t:1:compile\" );\n+        grandchildArtifactNode.addChild( farthestArtifactNode );\n+        DependencyNode nearestArtifactNode = createNode( \"g:c:t:1:compile\", DependencyNode.OMITTED_FOR_DUPLICATE, farthestArtifactNode.getArtifact() );\n+        nearestArtifactNode.setOriginalScope( \"test\" );\n+        childArtifactNode.addChild( nearestArtifactNode );\n         \n         assertDependencyTree( expectedRootNode, project );\n     }",
                "deletions": 2
            }
        ],
        "patched_files": [
            "DependencyTreeBuilder.java"
        ],
        "unit_tests": [
            "DependencyTreeBuilderTest.java"
        ]
    },
    "maven-shared_0f9c478": {
        "repo": "maven-shared",
        "message": "more generics and prevent NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@1358529 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/0f9c4783604809d7e497022af3f89b3364a63777",
        "parent": "https://github.com/apache/maven-shared/commit/a7dc99cd560b941812c8e9cf3540c77bf007c043",
        "bug_id": "maven-shared_0f9c478",
        "file": [
            {
                "sha": "9cd5e9fde3563c0532d64372c10226bceb79a68f",
                "filename": "maven-filtering/src/main/java/org/apache/maven/shared/filtering/DefaultMavenResourcesFiltering.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/0f9c4783604809d7e497022af3f89b3364a63777/maven-filtering/src/main/java/org/apache/maven/shared/filtering/DefaultMavenResourcesFiltering.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/0f9c4783604809d7e497022af3f89b3364a63777/maven-filtering/src/main/java/org/apache/maven/shared/filtering/DefaultMavenResourcesFiltering.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-filtering/src/main/java/org/apache/maven/shared/filtering/DefaultMavenResourcesFiltering.java?ref=0f9c4783604809d7e497022af3f89b3364a63777",
                "patch": "@@ -40,7 +40,6 @@\n \n /**\n  * @author Olivier Lamy\n- *\n  * @plexus.component role=\"org.apache.maven.shared.filtering.MavenResourcesFiltering\"\n  * role-hint=\"default\"\n  */\n@@ -124,8 +123,12 @@ public boolean filteredFileExtension( String fileName, List<String> userNonFilte\n         return filteredFileExtension;\n     }\n \n-    public List getDefaultNonFilteredFileExtensions()\n+    public List<String> getDefaultNonFilteredFileExtensions()\n     {\n+        if ( this.defaultNonFilteredFileExtensions == null )\n+        {\n+            this.defaultNonFilteredFileExtensions = new ArrayList<String>();\n+        }\n         return this.defaultNonFilteredFileExtensions;\n     }\n ",
                "deletions": 2
            }
        ],
        "patched_files": [
            "DefaultMavenResourcesFiltering.java"
        ],
        "unit_tests": [
            "DefaultMavenResourcesFilteringTest.java"
        ]
    },
    "maven-shared_47e3a4c": {
        "repo": "maven-shared",
        "message": "MNG-2981: [PATCH] NPE in PluginXDocGenerator while creating plugin site\nSubmitted by: Steve Rowe and Jason Melnick\nReviewed by: Vincent Siveton\n\no patch applied\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@541624 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/47e3a4c1a89f50166ead37ad19e6728f96dc7a2e",
        "parent": "https://github.com/apache/maven-shared/commit/d6e8543b1933a5c97f1fcf2223fd5f326a13b161",
        "bug_id": "maven-shared_47e3a4c",
        "file": [
            {
                "sha": "115283680d89ccb194e87fc386b230a274db726a",
                "filename": "maven-plugin-tools/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/generator/PluginXdocGenerator.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/47e3a4c1a89f50166ead37ad19e6728f96dc7a2e/maven-plugin-tools/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/generator/PluginXdocGenerator.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/47e3a4c1a89f50166ead37ad19e6728f96dc7a2e/maven-plugin-tools/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/generator/PluginXdocGenerator.java",
                "status": "modified",
                "changes": 18,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-plugin-tools/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/generator/PluginXdocGenerator.java?ref=47e3a4c1a89f50166ead37ad19e6728f96dc7a2e",
                "patch": "@@ -250,17 +250,20 @@ private List filterParameters( List parameterList )\n     {\n         List filtered = new ArrayList();\n \n-        for ( Iterator parameters = parameterList.iterator(); parameters.hasNext(); )\n+        if ( parameterList != null )\n         {\n-            Parameter parameter = (Parameter) parameters.next();\n-\n-            if ( parameter.isEditable() )\n+            for ( Iterator parameters = parameterList.iterator(); parameters.hasNext(); )\n             {\n-                String expression = parameter.getExpression();\n+                Parameter parameter = (Parameter) parameters.next();\n \n-                if ( expression == null || !expression.startsWith( \"${component.\" ) )\n+                if ( parameter.isEditable() )\n                 {\n-                    filtered.add( parameter );\n+                    String expression = parameter.getExpression();\n+\n+                    if ( expression == null || !expression.startsWith( \"${component.\" ) )\n+                    {\n+                        filtered.add( parameter );\n+                    }\n                 }\n             }\n         }\n@@ -418,3 +421,4 @@ private List getParametersByRequired( boolean required, List parameterList )\n     }\n }\n \n+",
                "deletions": 7
            }
        ],
        "patched_files": [
            "PluginXdocGenerator.java"
        ],
        "unit_tests": [
            "PluginXdocGeneratorTest.java"
        ]
    },
    "maven-shared_4777ada": {
        "repo": "maven-shared",
        "message": "[MSHARED-319] Filtering throws NPE when using JDK8\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@1563467 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/4777adaf6badd1dd4f2a5f22d77c93be2dc16766",
        "parent": "https://github.com/apache/maven-shared/commit/07dc0e2c9cd3ffaa058c824f95931ae57acf9435",
        "bug_id": "maven-shared_4777ada",
        "file": [
            {
                "sha": "7fbf119715814dfed1a5095d5709275e0f91bd5b",
                "filename": "maven-filtering/src/main/java/org/apache/maven/shared/filtering/DefaultMavenFileFilter.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/4777adaf6badd1dd4f2a5f22d77c93be2dc16766/maven-filtering/src/main/java/org/apache/maven/shared/filtering/DefaultMavenFileFilter.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/4777adaf6badd1dd4f2a5f22d77c93be2dc16766/maven-filtering/src/main/java/org/apache/maven/shared/filtering/DefaultMavenFileFilter.java",
                "status": "modified",
                "changes": 7,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-filtering/src/main/java/org/apache/maven/shared/filtering/DefaultMavenFileFilter.java?ref=4777adaf6badd1dd4f2a5f22d77c93be2dc16766",
                "patch": "@@ -214,7 +214,12 @@ public void copyFile( File from, File to, boolean filtering, List<FileUtils.Filt\n             {\n                 @SuppressWarnings( \"unchecked\" )\n                 List<String> buildFilters = new ArrayList<String>( request.getMavenProject().getBuild().getFilters() );\n-                buildFilters.removeAll( request.getFileFilters() );\n+\n+                // JDK-8015656: (coll) unexpected NPE from removeAll \n+                if ( request.getFileFilters() != null )\n+                {\n+                    buildFilters.removeAll( request.getFileFilters() );\n+                }\n \n                 loadProperties( filterProperties, buildFilters, baseProps );\n             }",
                "deletions": 1
            }
        ],
        "patched_files": [
            "DefaultMavenFileFilter.java"
        ],
        "unit_tests": [
            "DefaultMavenFileFilterTest.java"
        ]
    },
    "maven-shared_dba9472": {
        "repo": "maven-shared",
        "message": "[MSHARED-278] NullPointerException in MavenCommandLineBuilder\nSubmitted by Mikolaj Izdebski\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@1463470 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/dba9472d77956d7a91f17b122d4d35cda4f901e3",
        "parent": "https://github.com/apache/maven-shared/commit/75385965df3b5025fca3a889d427fd1e72c7cc0a",
        "bug_id": "maven-shared_dba9472",
        "file": [
            {
                "sha": "8f97966dcf289370d931e08f0afc07b577d9bc4f",
                "filename": "maven-invoker/src/main/java/org/apache/maven/shared/invoker/MavenCommandLineBuilder.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/dba9472d77956d7a91f17b122d4d35cda4f901e3/maven-invoker/src/main/java/org/apache/maven/shared/invoker/MavenCommandLineBuilder.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/dba9472d77956d7a91f17b122d4d35cda4f901e3/maven-invoker/src/main/java/org/apache/maven/shared/invoker/MavenCommandLineBuilder.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-invoker/src/main/java/org/apache/maven/shared/invoker/MavenCommandLineBuilder.java?ref=dba9472d77956d7a91f17b122d4d35cda4f901e3",
                "patch": "@@ -542,7 +542,7 @@ protected File findMavenExecutable()\n                 if ( !mavenHome.isDirectory() )\n                 {\n                     File binDir = mavenHome.getParentFile();\n-                    if ( \"bin\".equals( binDir.getName() ) )\n+                    if ( binDir != null && \"bin\".equals( binDir.getName() ) )\n                     {\n                         // ah, they specified the mvn\n                         // executable instead...",
                "deletions": 1
            }
        ],
        "patched_files": [
            "MavenCommandLineBuilder.java"
        ],
        "unit_tests": [
            "MavenCommandLineBuilderTest.java"
        ]
    },
    "maven-shared_593b376": {
        "repo": "maven-shared",
        "message": "[MSHARED-74] Fix NPE for Artifact.getId() when artifact uses a version range instead of a single version...this is triggered when an artifact is excluded from the ScopeArtifactFilter.include() method.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/shared/trunk@697220 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shared/commit/593b376f3e360cf7f646f58d036f40b5bc10c0dd",
        "parent": "https://github.com/apache/maven-shared/commit/7807d967971ba93f2a11ee2c3040ade32003766a",
        "bug_id": "maven-shared_593b376",
        "file": [
            {
                "sha": "b2d281d5d590202aef018f602f28e484736a170d",
                "filename": "maven-common-artifact-filters/src/main/java/org/apache/maven/shared/artifact/filter/ScopeArtifactFilter.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/593b376f3e360cf7f646f58d036f40b5bc10c0dd/maven-common-artifact-filters/src/main/java/org/apache/maven/shared/artifact/filter/ScopeArtifactFilter.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/593b376f3e360cf7f646f58d036f40b5bc10c0dd/maven-common-artifact-filters/src/main/java/org/apache/maven/shared/artifact/filter/ScopeArtifactFilter.java",
                "status": "modified",
                "changes": 14,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-common-artifact-filters/src/main/java/org/apache/maven/shared/artifact/filter/ScopeArtifactFilter.java?ref=593b376f3e360cf7f646f58d036f40b5bc10c0dd",
                "patch": "@@ -139,7 +139,19 @@ else if ( Artifact.SCOPE_SYSTEM.equals( artifact.getScope() ) )\n \n         if ( !result )\n         {\n-            filteredArtifactIds.add( artifact.getId() );\n+            // We have to be very careful with artifacts that have ranges, \n+            // because artifact.getId() will throw a NPE if a range is specified.\n+            String id;\n+            if ( artifact.getVersionRange() != null )\n+            {\n+                id = artifact.getDependencyConflictId() + \":\" + artifact.getVersionRange();\n+            }\n+            else\n+            {\n+                id = artifact.getId();\n+            }\n+            \n+            filteredArtifactIds.add( id );\n         }\n \n         return result;",
                "deletions": 1
            },
            {
                "sha": "13b6c75764414c1bcf16c73572d3895d9395b236",
                "filename": "maven-common-artifact-filters/src/test/java/org/apache/maven/shared/artifact/filter/ScopeArtifactFilterTest.java",
                "blob_url": "https://github.com/apache/maven-shared/blob/593b376f3e360cf7f646f58d036f40b5bc10c0dd/maven-common-artifact-filters/src/test/java/org/apache/maven/shared/artifact/filter/ScopeArtifactFilterTest.java",
                "raw_url": "https://github.com/apache/maven-shared/raw/593b376f3e360cf7f646f58d036f40b5bc10c0dd/maven-common-artifact-filters/src/test/java/org/apache/maven/shared/artifact/filter/ScopeArtifactFilterTest.java",
                "status": "modified",
                "changes": 39,
                "additions": 21,
                "contents_url": "https://api.github.com/repos/apache/maven-shared/contents/maven-common-artifact-filters/src/test/java/org/apache/maven/shared/artifact/filter/ScopeArtifactFilterTest.java?ref=593b376f3e360cf7f646f58d036f40b5bc10c0dd",
                "patch": "@@ -18,16 +18,29 @@\n  */\n package org.apache.maven.shared.artifact.filter;\n \n-import junit.framework.TestCase;\n-\n import org.apache.maven.artifact.Artifact;\n+import org.apache.maven.artifact.factory.ArtifactFactory;\n import org.apache.maven.artifact.resolver.filter.ArtifactFilter;\n+import org.apache.maven.artifact.versioning.VersionRange;\n import org.apache.maven.shared.tools.easymock.MockManager;\n+import org.codehaus.plexus.PlexusTestCase;\n import org.easymock.MockControl;\n \n public class ScopeArtifactFilterTest\n-    extends TestCase\n+    extends PlexusTestCase\n {\n+    \n+    public void testExcludedArtifactWithRangeShouldNotCauseNPE()\n+        throws Exception\n+    {\n+        ArtifactFactory factory = (ArtifactFactory) lookup( ArtifactFactory.ROLE );\n+        \n+        Artifact excluded = factory.createDependencyArtifact( \"group\", \"artifact\", VersionRange.createFromVersionSpec( \"[1.2.3]\" ), \"jar\", null, Artifact.SCOPE_PROVIDED );\n+        \n+        ArtifactFilter filter = new ScopeArtifactFilter( Artifact.SCOPE_RUNTIME );\n+        \n+        assertFalse( filter.include( excluded ) );\n+    }\n \n     private MockManager mockManager = new MockManager();\n \n@@ -148,31 +161,21 @@ private void verifyExcluded( String filterScope, String artifactScope )\n \n         MockControl control;\n \n-        private final String scope;\n-\n         ArtifactMockAndControl( String scope )\n         {\n-            this.scope = scope;\n-\n             control = MockControl.createControl( Artifact.class );\n             mockManager.add( control );\n \n             artifact = (Artifact) control.getMock();\n \n-            enableGetScope();\n-            enableGetId();\n-        }\n-\n-        void enableGetScope()\n-        {\n             artifact.getScope();\n-            control.setReturnValue( scope, MockControl.ONE_OR_MORE );\n-        }\n-\n-        void enableGetId()\n-        {\n+            control.setReturnValue( scope, MockControl.ZERO_OR_MORE );\n+            \n             artifact.getId();\n             control.setReturnValue( \"group:artifact:type:version\", MockControl.ZERO_OR_MORE );\n+            \n+            artifact.getVersionRange();\n+            control.setReturnValue( null, MockControl.ZERO_OR_MORE );\n         }\n     }\n ",
                "deletions": 18
            }
        ],
        "patched_files": [
            "ScopeArtifactFilter.java"
        ],
        "unit_tests": [
            "ScopeArtifactFilterTest.java"
        ]
    }
}