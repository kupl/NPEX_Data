{
    "openwebbeans_2902256": {
        "bug_id": "openwebbeans_2902256",
        "commit": "https://github.com/apache/openwebbeans/commit/290225643db17bdddda757d45c8a8db54f3361b9",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/openwebbeans/blob/290225643db17bdddda757d45c8a8db54f3361b9/webbeans-web/src/main/java/org/apache/webbeans/servlet/WebBeansConfigurationListener.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/openwebbeans/contents/webbeans-web/src/main/java/org/apache/webbeans/servlet/WebBeansConfigurationListener.java?ref=290225643db17bdddda757d45c8a8db54f3361b9",
                "deletions": 1,
                "filename": "webbeans-web/src/main/java/org/apache/webbeans/servlet/WebBeansConfigurationListener.java",
                "patch": "@@ -31,6 +31,7 @@\n import javax.enterprise.context.ConversationScoped;\n import javax.enterprise.context.RequestScoped;\n import javax.enterprise.context.SessionScoped;\n+import javax.enterprise.context.spi.Context;\n import javax.servlet.ServletContextEvent;\n import javax.servlet.ServletContextListener;\n import javax.servlet.ServletRequestEvent;\n@@ -211,7 +212,9 @@ public void sessionDestroyed(HttpSessionEvent event)\n \n     private boolean ensureRequestScope()\n     {\n-        if (!this.lifeCycle.getContextService().getCurrentContext(RequestScoped.class).isActive())\n+        Context context = this.lifeCycle.getContextService().getCurrentContext(RequestScoped.class);\n+        \n+        if (context == null || !context.isActive())\n         {\n             requestInitialized(null);\n             return true;",
                "raw_url": "https://github.com/apache/openwebbeans/raw/290225643db17bdddda757d45c8a8db54f3361b9/webbeans-web/src/main/java/org/apache/webbeans/servlet/WebBeansConfigurationListener.java",
                "sha": "70873cfb9204a87fb68953d0144cd9ad4002d267",
                "status": "modified"
            }
        ],
        "message": "OWB-920 Prevent NPE in WebBeansConfigurationListener.ensureRequestScope() when null context returned from the ContextsService\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/openwebbeans/trunk@1550838 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/openwebbeans/commit/836161c058f9fcfd69ae20363869d3e202f11fb1",
        "repo": "openwebbeans",
        "unit_tests": [
            "WebBeansConfigurationListenerTest.java"
        ]
    },
    "openwebbeans_372f9eb": {
        "bug_id": "openwebbeans_372f9eb",
        "commit": "https://github.com/apache/openwebbeans/commit/372f9ebb4be5ba697bde28c85169bbff153769b4",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/openwebbeans/blob/372f9ebb4be5ba697bde28c85169bbff153769b4/webbeans-web/src/main/java/org/apache/webbeans/web/context/WebContextsService.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/openwebbeans/contents/webbeans-web/src/main/java/org/apache/webbeans/web/context/WebContextsService.java?ref=372f9ebb4be5ba697bde28c85169bbff153769b4",
                "deletions": 11,
                "filename": "webbeans-web/src/main/java/org/apache/webbeans/web/context/WebContextsService.java",
                "patch": "@@ -116,24 +116,14 @@ public void destroy(Object destroyObject)\n         endContext(Singleton.class, destroyObject);\n         \n         requestContext.remove();\n-        requestContext = null;        \n         dependentContext.remove();\n-        dependentContext = null;\n         sessionContext.remove();\n-        sessionContext = null;\n         conversationContext.remove();\n-        conversationContext = null;\n         applicationContext.remove();\n-        applicationContext = null;\n         singletonContext.remove();\n-        singletonContext = null;\n-        \n+\n         currentApplicationContexts.clear();\n-        currentApplicationContexts = null;\n         currentSingletonContexts.clear();\n-        currentSingletonContexts = null;\n-        sessionCtxManager = null;\n-        conversationManager = null;\n     }    \n     \n     ",
                "raw_url": "https://github.com/apache/openwebbeans/raw/372f9ebb4be5ba697bde28c85169bbff153769b4/webbeans-web/src/main/java/org/apache/webbeans/web/context/WebContextsService.java",
                "sha": "abfe2051a21bf342a659d57429c65a956621c429",
                "status": "modified"
            }
        ],
        "message": "[OWB-354] WebContextService may throw NPE in tiered classloading environmemt\n\ngit-svn-id: https://svn.apache.org/repos/asf/openwebbeans/trunk@934189 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/openwebbeans/commit/c84d05d6ba12f8934b2d262c2eca61260c79b395",
        "repo": "openwebbeans",
        "unit_tests": [
            "WebContextsServiceTest.java"
        ]
    },
    "openwebbeans_a713f50": {
        "bug_id": "openwebbeans_a713f50",
        "commit": "https://github.com/apache/openwebbeans/commit/a713f50075004dc3d9a398811cc94c5f5501e8b1",
        "file": [
            {
                "additions": 20,
                "blob_url": "https://github.com/apache/openwebbeans/blob/a713f50075004dc3d9a398811cc94c5f5501e8b1/webbeans-impl/src/main/java/org/apache/webbeans/corespi/scanner/AbstractMetaDataDiscovery.java",
                "changes": 29,
                "contents_url": "https://api.github.com/repos/apache/openwebbeans/contents/webbeans-impl/src/main/java/org/apache/webbeans/corespi/scanner/AbstractMetaDataDiscovery.java?ref=a713f50075004dc3d9a398811cc94c5f5501e8b1",
                "deletions": 9,
                "filename": "webbeans-impl/src/main/java/org/apache/webbeans/corespi/scanner/AbstractMetaDataDiscovery.java",
                "patch": "@@ -253,6 +253,9 @@ protected void filterExcludedJars(Set<URL> classPathUrls)\n \n     private int isKnownJar(final String path)\n     {\n+        // lazy init - required when using DS CdiTestRunner\n+        initScanningExcludes();\n+\n         for (final String p : scanningExcludes)\n         {\n             final int i = path.indexOf(p);\n@@ -305,21 +308,29 @@ public void init(Object object)\n         String usage = WebBeansContext.currentInstance().getOpenWebBeansConfiguration().getProperty(OpenWebBeansConfiguration.USE_BDA_BEANSXML_SCANNER);\n         isBDAScannerEnabled = Boolean.parseBoolean(usage);\n \n-        String scanningExcludesProperty =\n-                WebBeansContext.currentInstance().getOpenWebBeansConfiguration().getProperty(OpenWebBeansConfiguration.SCAN_EXCLUSION_PATHS);\n-        ArrayList<String> scanningExcludesList = new ArrayList<String>();\n-        if (scanningExcludesProperty != null)\n+        initScanningExcludes();\n+    }\n+\n+    public void initScanningExcludes()\n+    {\n+        if (scanningExcludes == null)\n         {\n-            for (String scanningExclude : scanningExcludesProperty.split(\",\"))\n+            String scanningExcludesProperty =\n+                    WebBeansContext.currentInstance().getOpenWebBeansConfiguration().getProperty(OpenWebBeansConfiguration.SCAN_EXCLUSION_PATHS);\n+            ArrayList<String> scanningExcludesList = new ArrayList<String>();\n+            if (scanningExcludesProperty != null)\n             {\n-                scanningExclude = scanningExclude.trim();\n-                if (!scanningExclude.isEmpty())\n+                for (String scanningExclude : scanningExcludesProperty.split(\",\"))\n                 {\n-                    scanningExcludesList.add(scanningExclude);\n+                    scanningExclude = scanningExclude.trim();\n+                    if (!scanningExclude.isEmpty())\n+                    {\n+                        scanningExcludesList.add(scanningExclude);\n+                    }\n                 }\n             }\n+            scanningExcludes = scanningExcludesList.toArray(new String[scanningExcludesList.size()]);\n         }\n-        scanningExcludes = scanningExcludesList.toArray(new String[scanningExcludesList.size()]);\n     }\n \n     /**",
                "raw_url": "https://github.com/apache/openwebbeans/raw/a713f50075004dc3d9a398811cc94c5f5501e8b1/webbeans-impl/src/main/java/org/apache/webbeans/corespi/scanner/AbstractMetaDataDiscovery.java",
                "sha": "0873c02eb35cfb4ebec318e006882aed444f14c8",
                "status": "modified"
            }
        ],
        "message": "OWB-1094 possible NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/openwebbeans/trunk@1705018 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/openwebbeans/commit/b8a8101574fc0b09ca2a0bca76b9d748a8c3ac5a",
        "repo": "openwebbeans",
        "unit_tests": [
            "AbstractMetaDataDiscoveryTest.java"
        ]
    },
    "openwebbeans_e01cc8e": {
        "bug_id": "openwebbeans_e01cc8e",
        "commit": "https://github.com/apache/openwebbeans/commit/e01cc8e545e562502783a0ba0d1b9a71b12990fa",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/openwebbeans/blob/e01cc8e545e562502783a0ba0d1b9a71b12990fa/webbeans-impl/src/main/java/org/apache/webbeans/config/BeansDeployer.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/openwebbeans/contents/webbeans-impl/src/main/java/org/apache/webbeans/config/BeansDeployer.java?ref=e01cc8e545e562502783a0ba0d1b9a71b12990fa",
                "deletions": 0,
                "filename": "webbeans-impl/src/main/java/org/apache/webbeans/config/BeansDeployer.java",
                "patch": "@@ -765,6 +765,9 @@ private boolean isVetoed(final Class<?> implClass)\n         }\n \n         Package pckge = implClass.getPackage();\n+        if (pckge == null) {\n+            return false;\n+        }\n         do\n         {\n             // yes we cache result with potentially different classloader but this is not portable by spec",
                "raw_url": "https://github.com/apache/openwebbeans/raw/e01cc8e545e562502783a0ba0d1b9a71b12990fa/webbeans-impl/src/main/java/org/apache/webbeans/config/BeansDeployer.java",
                "sha": "23aca33645e61cfdc4ec8730ca8cbca28ad32b3d",
                "status": "modified"
            }
        ],
        "message": "default package is null so avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/openwebbeans/trunk@1617143 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/openwebbeans/commit/34f1f8bba93cfa0f562cf598cae0899e0868bdd2",
        "repo": "openwebbeans",
        "unit_tests": [
            "BeansDeployerTest.java"
        ]
    },
    "openwebbeans_ff55dfe": {
        "bug_id": "openwebbeans_ff55dfe",
        "commit": "https://github.com/apache/openwebbeans/commit/ff55dfedd624cac07a3349b2f198a32ca519e388",
        "file": [
            {
                "additions": 23,
                "blob_url": "https://github.com/apache/openwebbeans/blob/ff55dfedd624cac07a3349b2f198a32ca519e388/webbeans-web/src/main/java/org/apache/webbeans/web/context/WebContextsService.java",
                "changes": 40,
                "contents_url": "https://api.github.com/repos/apache/openwebbeans/contents/webbeans-web/src/main/java/org/apache/webbeans/web/context/WebContextsService.java?ref=ff55dfedd624cac07a3349b2f198a32ca519e388",
                "deletions": 17,
                "filename": "webbeans-web/src/main/java/org/apache/webbeans/web/context/WebContextsService.java",
                "patch": "@@ -103,7 +103,6 @@\n         //Dependent context is always active\n         dependentContext = new DependentContext();\n         dependentContext.setActive(true);\n-\n     }\n \n     /**\n@@ -379,20 +378,25 @@ private void destroyRequestContext(ServletRequestEvent request)\n      */\n     private void initSessionContext(HttpSession session)\n     {\n+        if (session == null)\n+        {\n+            // no session -> no SessionContext\n+            return;\n+        }\n+\n         String sessionId = session.getId();\n         //Current context\n         SessionContext currentSessionContext = sessionCtxManager.getSessionContextWithSessionId(sessionId);\n-        \n+\n         //No current context\n         if (currentSessionContext == null)\n         {\n             currentSessionContext = new SessionContext();\n             sessionCtxManager.addNewSessionContext(sessionId, currentSessionContext);\n         }\n-\n         //Activate\n         currentSessionContext.setActive(true);\n-        \n+\n         //Set thread local\n         sessionContext.set(currentSessionContext);\n     }\n@@ -404,22 +408,24 @@ private void initSessionContext(HttpSession session)\n      */\n     private void destroySessionContext(HttpSession session)\n     {\n-        //Get current session context\n-        SessionContext context = sessionContext.get();\n-\n-        //Destroy context\n-        if (context != null)\n+        if (session != null)\n         {\n-            context.destroy();\n-        }\n+            //Get current session context\n+            SessionContext context = sessionContext.get();\n \n-        //Clear thread locals\n-        sessionContext.set(null);\n-        sessionContext.remove();\n-        \n-        //Remove session from manager\n-        sessionCtxManager.destroySessionContextWithSessionId(session.getId());\n+            //Destroy context\n+            if (context != null)\n+            {\n+                context.destroy();\n+            }\n \n+            //Clear thread locals\n+            sessionContext.set(null);\n+            sessionContext.remove();\n+\n+            //Remove session from manager\n+            sessionCtxManager.destroySessionContextWithSessionId(session.getId());\n+        }\n     }\n \n     /**",
                "raw_url": "https://github.com/apache/openwebbeans/raw/ff55dfedd624cac07a3349b2f198a32ca519e388/webbeans-web/src/main/java/org/apache/webbeans/web/context/WebContextsService.java",
                "sha": "318317651d723f026a683b1682d65bcc7dc55a09",
                "status": "modified"
            }
        ],
        "message": "OWB-547 avoid NPE in WebContextsService\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/openwebbeans/trunk@1083717 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/openwebbeans/commit/f1224302e94c08128d1f962687ec1efd11059614",
        "repo": "openwebbeans",
        "unit_tests": [
            "WebContextsServiceTest.java"
        ]
    }
}