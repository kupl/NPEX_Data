{
    "roller_3c4fd21": {
        "bug_id": "roller_3c4fd21",
        "commit": "https://github.com/apache/roller/commit/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed",
        "file": [
            {
                "additions": 20,
                "blob_url": "https://github.com/apache/roller/blob/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed/src/org/roller/presentation/velocity/PageModel.java",
                "changes": 34,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/velocity/PageModel.java?ref=3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed",
                "deletions": 14,
                "filename": "src/org/roller/presentation/velocity/PageModel.java",
                "patch": "@@ -115,16 +115,18 @@ public void init(RollerRequest rreq) {\n     \n     /** Encapsulates folder.getBookmarks() & sorting */\n     public Collection getBookmarks(FolderDataWrapper folder) {\n-        mLogger.debug(\"Getting bookmarks for folder : \"+folder.getName());\n-        \n-        // since we already have a wrapped pojo we know the output\n-        // will be wrapped as well :)\n-        Collection bookmarks = folder.getBookmarks();\n-        \n-        // TODO: need to setup new BookmarkWrapperComparator\n-        //List mBookmarks = new ArrayList(bookmarks);\n-        //Collections.sort( mBookmarks, new BookmarkComparator() );\n-        \n+        Collection bookmarks = null;\n+        if (folder != null) {\n+            mLogger.debug(\"Getting bookmarks for folder : \"+folder.getName());\n+\n+            // since we already have a wrapped pojo we know the output\n+            // will be wrapped as well :)\n+            bookmarks = folder.getBookmarks();\n+\n+            // TODO: need to setup new BookmarkWrapperComparator\n+            //List mBookmarks = new ArrayList(bookmarks);\n+            //Collections.sort( mBookmarks, new BookmarkComparator() );\n+        }\n         return bookmarks;\n     }\n     \n@@ -742,9 +744,13 @@ public List getRecentComments(int maxCount) {\n     }\n     \n     public boolean getEmailComments() {\n-        WebsiteData website = mRollerReq.getWebsite();\n-        boolean emailComments = RollerRuntimeConfig.getBooleanProperty(\"users.comments.emailnotify\");\n-        \n-        return (website.getEmailComments().booleanValue() && emailComments);\n+        if (mRollerReq != null) {\n+            WebsiteData website = mRollerReq.getWebsite();\n+            if (website != null) {\n+                boolean emailComments = RollerRuntimeConfig.getBooleanProperty(\"users.comments.emailnotify\");        \n+                return (website.getEmailComments().booleanValue() && emailComments);\n+            }\n+        }\n+        return false;\n     }\n }",
                "raw_url": "https://github.com/apache/roller/raw/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed/src/org/roller/presentation/velocity/PageModel.java",
                "sha": "8e9ff6ecfbf4a49bcd4ac5762f0f6602db703550",
                "status": "modified"
            },
            {
                "additions": 13,
                "blob_url": "https://github.com/apache/roller/blob/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed/src/org/roller/util/Utilities.java",
                "changes": 23,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/util/Utilities.java?ref=3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed",
                "deletions": 10,
                "filename": "src/org/roller/util/Utilities.java",
                "patch": "@@ -1057,17 +1057,20 @@ public static final String charToCDATA(char ch)\n         }\n     }\n     \n-    public static final String encode(String s) \n+    public static final String encode(String s)\n     {\n-        try \n-        {\n-            return URLEncoder.encode(s, \"utf-8\");\n-        } \n-        catch (UnsupportedEncodingException e) \n-        {\n-            return s;\n-        }\n-    }\n+       try\n+       {\n+           if (s != null)\n+               return URLEncoder.encode(s, \"utf-8\");\n+           else\n+               return s;\n+       }\n+       catch (UnsupportedEncodingException e)\n+       {\n+           return s;\n+       }\n+   }\n \n     /**\n      * @param string",
                "raw_url": "https://github.com/apache/roller/raw/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed/src/org/roller/util/Utilities.java",
                "sha": "fd012eeedccc3f86cadc353e05283c8c3aceea1a",
                "status": "modified"
            }
        ],
        "message": "NPE checks from Matt Schmidt\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/roller/trunk@367184 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/roller/commit/056de538ebbef0dbd8947284ef1db2326d66824d",
        "patched_files": [
            "Utilities.java"
        ],
        "repo": "roller",
        "unit_tests": [
            "UtilitiesTest.java"
        ]
    },
    "roller_4354feb": {
        "bug_id": "roller_4354feb",
        "commit": "https://github.com/apache/roller/commit/4354febbbdb9640e54a2313f88482a00a40edeb3",
        "file": [
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/weblog/actions/PingSetupAction.java",
                "changes": 20,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/weblog/actions/PingSetupAction.java?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 9,
                "filename": "src/org/roller/presentation/weblog/actions/PingSetupAction.java",
                "patch": "@@ -92,7 +92,7 @@ public ActionForward view(ActionMapping mapping, ActionForm form,\n         WebsiteData website = rreq.getWebsite();\n         try\n         {\n-            if (!isAuthorized(rreq))\n+            if (!isAuthorized(rreq, website))\n             {\n                 return mapping.findForward(\"access-denied\");\n             }\n@@ -174,13 +174,13 @@ public ActionForward enableSelected(ActionMapping mapping, ActionForm form,\n     {\n         RollerRequest rreq = RollerRequest.getRollerRequest(req);\n         AutoPingManager autoPingMgr = RollerFactory.getRoller().getAutopingManager();\n+        PingTargetData pingTarget = select(rreq);\n         try\n         {\n-            if (!isAuthorized(rreq))\n+            if (!isAuthorized(rreq, rreq.getWebsite()))\n             {\n                 return mapping.findForward(\"access-denied\");\n             }\n-            PingTargetData pingTarget = select(rreq);\n             AutoPingData autoPing = autoPingMgr.createAutoPing(pingTarget, \n                     rreq.getWebsite());\n             autoPingMgr.storeAutoPing(autoPing);\n@@ -204,13 +204,13 @@ public ActionForward disableSelected(ActionMapping mapping, ActionForm form,\n     {\n         RollerRequest rreq = RollerRequest.getRollerRequest(req);\n         AutoPingManager autoPingMgr = RollerFactory.getRoller().getAutopingManager();\n+        PingTargetData pingTarget = select(rreq);\n         try\n         {\n-            if (!isAuthorized(rreq))\n+            if (!isAuthorized(rreq, rreq.getWebsite()))\n             {\n                 return mapping.findForward(\"access-denied\");\n             }\n-            PingTargetData pingTarget = select(rreq);\n             autoPingMgr.removeAutoPing(pingTarget, rreq.getWebsite());\n             RollerFactory.getRoller().commit();\n         \n@@ -238,7 +238,7 @@ public ActionForward pingSelectedNow(ActionMapping mapping, ActionForm form,\n             WebsiteData website = rreq.getWebsite();\n             try\n             {\n-                if (!isAuthorized(rreq))\n+                if (!isAuthorized(rreq, website))\n                 {\n                     return mapping.findForward(\"access-denied\");\n                 }\n@@ -251,7 +251,8 @@ public ActionForward pingSelectedNow(ActionMapping mapping, ActionForm form,\n                 }\n                 else\n                 {\n-                    WeblogUpdatePinger.PingResult pingResult = WeblogUpdatePinger.sendPing(absoluteUrl, pingTarget, website);\n+                    WeblogUpdatePinger.PingResult pingResult = \n+                        WeblogUpdatePinger.sendPing(absoluteUrl, pingTarget, website);\n                     if (pingResult.isError())\n                     {\n                         if (mLogger.isDebugEnabled()) mLogger.debug(\"Ping Result: \" + pingResult);\n@@ -334,10 +335,11 @@ else if (ex instanceof SocketException)\n         }\n     }\n \n-    private boolean isAuthorized(RollerRequest rreq) throws RollerException\n+    private boolean isAuthorized(RollerRequest rreq, WebsiteData website) \n+        throws RollerException\n     {\n         RollerSession rses = RollerSession.getRollerSession(rreq.getRequest());\n-        return rses.isUserAuthorizedToAdmin(rreq.getWebsite()) \n+        return rses.isUserAuthorizedToAdmin(website) \n             && !PingConfig.getDisablePingUsage();\n     }\n }",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/weblog/actions/PingSetupAction.java",
                "sha": "f9f6493c4bb9a85621c6f62185ac0356273ee48f",
                "status": "modified"
            },
            {
                "additions": 18,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/actions/InviteMemberAction.java",
                "changes": 27,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/website/actions/InviteMemberAction.java?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 9,
                "filename": "src/org/roller/presentation/website/actions/InviteMemberAction.java",
                "patch": "@@ -41,7 +41,7 @@\n  * Allows website admin to invite new members to website.\n  * \n  * @struts.action path=\"/editor/inviteMember\" parameter=\"method\" name=\"inviteMemberForm\"\n- * @struts.action-forward name=\"inviteMember.page\"     path=\".InviteMember\"\n+ * @struts.action-forward name=\"inviteMember.page\" path=\".InviteMember\"\n  */\n public class InviteMemberAction extends DispatchAction\n {\n@@ -60,7 +60,7 @@ public ActionForward unspecified(\n         {\n             return edit(mapping, actionForm, request, response);\n         }\n-        return save(mapping, actionForm, request, response);\n+        return send(mapping, actionForm, request, response);\n     }\n     \n     /** If method param is not specified, use HTTP verb to pick method to call */\n@@ -81,13 +81,18 @@ public ActionForward edit(\n         HttpServletResponse response)\n         throws IOException, ServletException\n     {\n-        ActionForward forward = mapping.findForward(\"inviteMember.page\");        \n-        request.setAttribute(\"model\", new BasePageModel(\n-            \"inviteMember.title\", request, response, mapping));\n+        ActionForward forward = mapping.findForward(\"inviteMember.page\"); \n+        \n+        BasePageModel pageModel = new BasePageModel(\n+            \"inviteMember.title\", request, response, mapping);\n+        request.setAttribute(\"model\", pageModel);\n+        \n+        InviteMemberForm form = (InviteMemberForm)actionForm;\n+        form.setWebsiteId(pageModel.getWebsite().getId());\n         return forward; \n     }\n     \n-    public ActionForward save(\n+    public ActionForward send(\n             ActionMapping       mapping,\n             ActionForm          actionForm,\n             HttpServletRequest  request,\n@@ -101,9 +106,6 @@ public ActionForward save(\n         UserManager umgr = RollerFactory.getRoller().getUserManager();\n         UserData user = umgr.getUser(form.getUserName());\n         \n-        request.setAttribute(\"model\", new BasePageModel(\n-            \"inviteMember.title\", request, response, mapping));\n-\n         if (user == null)\n         {\n             errors.add(ActionErrors.GLOBAL_ERROR, \n@@ -118,11 +120,15 @@ public ActionForward save(\n             {\n                 errors.add(ActionErrors.GLOBAL_ERROR, \n                     new ActionError(\"inviteMember.error.userAlreadyInvited\"));\n+                request.setAttribute(\"model\", new BasePageModel(\n+                    \"inviteMember.title\", request, response, mapping));\n             }\n             else if (perms != null)\n             {\n                 errors.add(ActionErrors.GLOBAL_ERROR, \n                     new ActionError(\"inviteMember.error.userAlreadyMember\"));\n+                request.setAttribute(\"model\", new BasePageModel(\n+                    \"inviteMember.title\", request, response, mapping));\n             }\n             else\n             {\n@@ -141,6 +147,9 @@ else if (perms != null)\n                 msgs.add(ActionMessages.GLOBAL_MESSAGE, \n                     new ActionMessage(\"inviteMember.userInvited\"));\n                 \n+                request.setAttribute(\"model\", new BasePageModel(\n+                    \"inviteMemberDone.title\", request, response, mapping));\n+                \n                 forward = mapping.findForward(\"memberPermissions\");                \n             }\n         }",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/actions/InviteMemberAction.java",
                "sha": "57cae4e29f19b3dc3b54295c12d53fa45228e243",
                "status": "modified"
            },
            {
                "additions": 20,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/actions/MemberPermissionsAction.java",
                "changes": 22,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/website/actions/MemberPermissionsAction.java?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 2,
                "filename": "src/org/roller/presentation/website/actions/MemberPermissionsAction.java",
                "patch": "@@ -26,6 +26,7 @@\n import org.roller.presentation.BasePageModel;\n import org.roller.presentation.RollerRequest;\n import org.roller.presentation.RollerSession;\n+import org.roller.presentation.website.formbeans.MemberPermissionsForm;\n \n /**\n  * Allows website admin to change website member permissions.\n@@ -53,6 +54,17 @@ public ActionForward unspecified(\n         return save(mapping, actionForm, request, response);\n     }\n     \n+    /** Called after invite user action posted */\n+    public ActionForward send(\n+            ActionMapping       mapping,\n+            ActionForm          actionForm,\n+            HttpServletRequest  request,\n+            HttpServletResponse response)\n+            throws Exception\n+    {\n+        return edit(mapping, actionForm, request, response);\n+    }\n+    \n     public ActionForward cancel(\n             ActionMapping       mapping,\n             ActionForm          actionForm,\n@@ -70,8 +82,12 @@ public ActionForward edit(\n             HttpServletResponse response)\n             throws Exception\n     {\n-        request.setAttribute(\"model\", \n-                new MemberPermissionsPageModel(request, response, mapping));\n+        MemberPermissionsPageModel pageModel = \n+           new MemberPermissionsPageModel(request, response, mapping);\n+        request.setAttribute(\"model\", pageModel);\n+        \n+        MemberPermissionsForm form = (MemberPermissionsForm)actionForm;\n+        form.setWebsiteId(pageModel.getWebsite().getId());\n         ActionForward forward = mapping.findForward(\"memberPermissions.page\");\n         return forward;\n     }\n@@ -85,8 +101,10 @@ public ActionForward save(\n     {\n         ActionErrors errors = new ActionErrors();\n         ActionMessages msgs = new ActionMessages();\n+        \n         MemberPermissionsPageModel model = \n             new MemberPermissionsPageModel(request, response, mapping);\n+        \n         Iterator iter = model.getPermissions().iterator();\n         int removed = 0;\n         int changed = 0;",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/actions/MemberPermissionsAction.java",
                "sha": "cab525950fe8a34f24cd015ef551e168569f32e5",
                "status": "modified"
            },
            {
                "additions": 44,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/actions/WeblogTemplateFormAction.java",
                "changes": 83,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/website/actions/WeblogTemplateFormAction.java?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 39,
                "filename": "src/org/roller/presentation/website/actions/WeblogTemplateFormAction.java",
                "patch": "@@ -69,7 +69,7 @@ public ActionForward add(\n                 WeblogTemplateForm form = (WeblogTemplateForm)actionForm;\n                 WeblogTemplate data = new WeblogTemplate();\n                 form.copyTo(data, request.getLocale());\n-                data.setWebsite( website );\n+                data.setWebsite(website);\n                 data.setLastModified( new java.util.Date() );\n                 data.setDescription(\"\");\n                 data.setContents(\"\");\n@@ -90,7 +90,7 @@ public ActionForward add(\n                     \n                 actionForm.reset(mapping,request);                \n                 \n-                addModelObjects(request, response, mapping);\n+                addModelObjects(request, response, mapping, website);\n             }\n             else\n             {\n@@ -115,22 +115,25 @@ public ActionForward edit(\n     {\n         ActionForward forward = mapping.findForward(\"editPage.page\");\n         try\n-        {\n-            request.setAttribute(\"model\", new BasePageModel(\n-                \"pageForm.title\", request, response, mapping));   \n+        {            \n             RollerRequest rreq = RollerRequest.getRollerRequest(request);\n-            RollerSession rses = RollerSession.getRollerSession(request);\n-            WebsiteData website = rreq.getWebsite();\n-            if ( rses.isUserAuthorizedToAdmin(website) )\n+            WeblogTemplate pd = (WeblogTemplate)rreq.getPage();\n+            \n+            RollerSession rses = RollerSession.getRollerSession(request);            \n+            if ( rses.isUserAuthorizedToAdmin(pd.getWebsite()) )\n             {\n+                BasePageModel pageModel = new BasePageModel(\n+                    \"pageForm.title\", request, response, mapping);\n+                pageModel.setWebsite(pd.getWebsite());\n+                request.setAttribute(\"model\", pageModel); \n+                \n                 UserData ud = rses.getAuthenticatedUser();\n-                WeblogTemplate pd = (WeblogTemplate) rreq.getPage();\n                 WeblogTemplateForm pf = (WeblogTemplateForm)actionForm;\n                 pf.copyFrom(pd, request.getLocale());\n \n                 PageCacheFilter.removeFromCache( request, pd.getWebsite() );\n                 \n-                addModelObjects(request, response, mapping);\n+                addModelObjects(request, response, mapping, pd.getWebsite());\n             }\n             else\n             {\n@@ -163,7 +166,7 @@ public ActionForward editPages(\n             WebsiteData website = rreq.getWebsite();\n             if ( rses.isUserAuthorizedToAdmin(website) )\n             {\n-                addModelObjects(request, response, mapping);\n+                addModelObjects(request, response, mapping, website);\n             }\n             else\n             {\n@@ -191,24 +194,22 @@ public ActionForward remove(\n             \"pagesForm.title\", request, response, mapping));\n         try\n         {\n-            RollerRequest rreq = RollerRequest.getRollerRequest(request);\n-            RollerSession rses = RollerSession.getRollerSession(request);\n-            WebsiteData website = rreq.getWebsite();\n+            UserManager mgr = RollerFactory.getRoller().getUserManager();\n+            WeblogTemplateForm form = (WeblogTemplateForm)actionForm;\n+            WeblogTemplate template = mgr.retrievePage(form.getId());\n+            WebsiteData website = template.getWebsite();\n+            \n+            RollerSession rses = RollerSession.getRollerSession(request);          \n             if ( rses.isUserAuthorizedToAdmin(website) )\n             {\n-                WeblogTemplateForm form = (WeblogTemplateForm)actionForm;\n-                UserManager mgr = RollerFactory.getRoller().getUserManager();\n-                \n-                // fetch template to be deleted (we'll need its website)\n-                WeblogTemplate template = mgr.retrievePage(form.getId());\n-                \n                 mgr.removePageSafely(template.getId());\n                 RollerFactory.getRoller().commit();\n \n                 UserData user = rses.getAuthenticatedUser();\n                 PageCacheFilter.removeFromCache(request, template.getWebsite());\n                     \n-                addModelObjects(request, response, mapping);\n+                addModelObjects(\n+                        request, response, mapping, template.getWebsite());\n                 actionForm.reset(mapping, request);\n             }\n             else\n@@ -232,6 +233,7 @@ public ActionForward remove(\n     }\n \n     //-----------------------------------------------------------------------\n+    /** Send user to remove confirmation page */\n     public ActionForward removeOk(\n         ActionMapping       mapping,\n         ActionForm          actionForm,\n@@ -246,10 +248,10 @@ public ActionForward removeOk(\n         {\n             RollerSession rses = RollerSession.getRollerSession(request);\n             RollerRequest rreq = RollerRequest.getRollerRequest(request);\n-            WebsiteData website = rreq.getWebsite();\n+            WeblogTemplate cd = (WeblogTemplate) rreq.getPage();\n+            WebsiteData website = cd.getWebsite();\n             if ( rses.isUserAuthorizedToAdmin(website) )\n             {\n-                WeblogTemplate cd = (WeblogTemplate) rreq.getPage();\n                 WeblogTemplateForm pf = (WeblogTemplateForm)actionForm;\n                 pf.copyFrom(cd, request.getLocale());\n \n@@ -280,20 +282,17 @@ public ActionForward update(\n         ActionForward forward = mapping.findForward(\"editPage.page\");\n         try\n         {\n-            RollerSession rses = RollerSession.getRollerSession(request);\n             RollerRequest rreq = RollerRequest.getRollerRequest(request);\n-            request.setAttribute(\"model\", new BasePageModel(\n-                \"pageForm.title\", request, response, mapping));\n-            WebsiteData website = rreq.getWebsite();\n-            if ( rses.isUserAuthorizedToAdmin(website) )\n+            WeblogTemplateForm form = (WeblogTemplateForm)actionForm;\n+            UserManager mgr = RollerFactory.getRoller().getUserManager();\n+            WeblogTemplate data = mgr.retrievePage(form.getId());\n+            WebsiteData website = data.getWebsite();\n+            \n+            RollerSession rses = RollerSession.getRollerSession(request);\n+            if (rses.isUserAuthorizedToAdmin(website))\n             {\n-                WeblogTemplateForm form = (WeblogTemplateForm)actionForm;\n-                UserManager mgr = RollerFactory.getRoller().getUserManager();\n-                WeblogTemplate data = mgr.retrievePage(form.getId());\n-                data.save(); // should through exception if no save permission\n                 form.copyTo(data, request.getLocale());\n                 data.setLastModified( new java.util.Date() );\n-                data.setWebsite(mgr.retrieveWebsite(form.getWebsite().getId()));\n \n                 validateLink( data );\n \n@@ -311,6 +310,11 @@ public ActionForward update(\n \n                 UserData user = rses.getAuthenticatedUser();\n                 PageCacheFilter.removeFromCache(request, data.getWebsite());\n+                \n+                BasePageModel pageModel = new BasePageModel(\n+                    \"pageForm.title\", request, response, mapping);\n+                pageModel.setWebsite(website);\n+                request.setAttribute(\"model\", pageModel);\n             }\n             else\n             {\n@@ -374,29 +378,30 @@ public ActionForward cancel(\n         throws IOException, ServletException\n     {\n         request.setAttribute(\"model\", new BasePageModel(\n-                \"pagesForm.title\", request, response, mapping));\n+            \"pagesForm.title\", request, response, mapping));\n         return (mapping.findForward(\"editPages\"));\n     }\n     \n     //-----------------------------------------------------------------------\n     private void addModelObjects( \n         HttpServletRequest  request,\n         HttpServletResponse response,\n-        ActionMapping mapping)\n+        ActionMapping mapping, \n+        WebsiteData website)\n     throws RollerException \n     {             \n         UserManager mgr = RollerFactory.getRoller().getUserManager();        \n         RollerSession rses = RollerSession.getRollerSession(request);\n         RollerRequest rreq = RollerRequest.getRollerRequest(request);\n                 \n         UserData user = rses.getAuthenticatedUser();\n-        request.setAttribute(\"user\",user);\n+        request.setAttribute(\"user\", user);\n \n         WebsiteData wd = rreq.getWebsite();\n-        request.setAttribute(\"website\", wd);\n+        request.setAttribute(\"website\", website);\n \n-        List pages = mgr.getPages(wd);\n-        request.setAttribute(\"pages\",pages);\n+        List pages = mgr.getPages(website);\n+        request.setAttribute(\"pages\", pages);\n     }\n }\n ",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/actions/WeblogTemplateFormAction.java",
                "sha": "e9a74a467303b8528751dabe9ed4ba5c244f30e3",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/actions/WebsiteFormAction.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/website/actions/WebsiteFormAction.java?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 0,
                "filename": "src/org/roller/presentation/website/actions/WebsiteFormAction.java",
                "patch": "@@ -137,7 +137,12 @@ public ActionForward update(\n             WebsiteFormEx form = (WebsiteFormEx)actionForm;\n             WeblogManager wmgr = RollerFactory.getRoller().getWeblogManager();\n             UserManager umgr = RollerFactory.getRoller().getUserManager();\n+            \n             WebsiteData wd = umgr.retrieveWebsite(form.getId());\n+            \n+            // Set website in request, so subsequent action gets it\n+            RollerRequest.getRollerRequest(request).setWebsite(wd);\n+            \n             RollerSession rollerSession = RollerSession.getRollerSession(request);\n             if ( rollerSession.isUserAuthorizedToAdmin(wd))\n             {",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/actions/WebsiteFormAction.java",
                "sha": "4cf09214de49b6f1d8c1f9a9cfe3faf4b1e48526",
                "status": "modified"
            },
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/formbeans/InviteMemberForm.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/website/formbeans/InviteMemberForm.java?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 0,
                "filename": "src/org/roller/presentation/website/formbeans/InviteMemberForm.java",
                "patch": "@@ -9,6 +9,8 @@\n public class InviteMemberForm extends ActionForm\n {\n     private String userName;\n+    private String websiteId;\n+    \n     public String getUserName()\n     {\n         return userName;\n@@ -17,4 +19,14 @@ public void setUserName(String userName)\n     {\n         this.userName = userName;\n     }\n+\n+    public String getWebsiteId() \n+    {\n+        return websiteId;\n+    }\n+\n+    public void setWebsiteId(String websiteId) \n+    {\n+        this.websiteId = websiteId;\n+    }\n }",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/src/org/roller/presentation/website/formbeans/InviteMemberForm.java",
                "sha": "4415b690d30b2f4ad6f171bf24a947ad9722bc24",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/WEB-INF/classes/ApplicationResources.properties",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/WEB-INF/classes/ApplicationResources.properties?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 1,
                "filename": "web/WEB-INF/classes/ApplicationResources.properties",
                "patch": "@@ -448,6 +448,7 @@ inviteMember.error.userAlreadyMember=User already a member of this weblog\n inviteMemberDone.title=Invitation Sent\n inviteMemberDone.message=User [{0}] has been invited to join this weblog\n inviteMemberDone.inviteAnother=Invite another\n+inviteMember.userInvited=User successfully invited\n \n inviteMember.notificationSubject=Roller: invitation to join weblog \"{0}\" ({1})\n inviteMember.notificationContent=You have been invited to join weblog \"{0}\" ({1}). \\\n@@ -1347,7 +1348,7 @@ yourProfile.button.save=Save\n # ---------------------------------------------------------------- Your Weblogs\n \n yourWebsites.title=Main Menu\n-yourWebsites.subtitle=Welcome to Roller. Use this main menu page to\\\n+yourWebsites.subtitle=Welcome to Roller. Use this main menu page to \\\n manage your weblogs, your user profile and (if you have admin permissions) \\\n administer the blog server.\n ",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/WEB-INF/classes/ApplicationResources.properties",
                "sha": "0541ca0452161b49e4705d741e689a29c25b9231",
                "status": "modified"
            },
            {
                "additions": 39,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/taglibs.jsp",
                "changes": 64,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/taglibs.jsp?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 25,
                "filename": "web/taglibs.jsp",
                "patch": "@@ -1,26 +1,40 @@\n-<%@ page language=\"java\" errorPage=\"/error.jsp\" contentType=\"text/html; charset=UTF-8\" %><%@ \n-taglib uri=\"http://java.sun.com/jstl/core\"   prefix=\"c\" %><%@ \n-taglib uri=\"http://java.sun.com/jstl/fmt\"    prefix=\"fmt\" %><%@ \n-taglib uri=\"http://struts.apache.org/tags-bean\"  prefix=\"bean\" %><%@ \n-taglib uri=\"http://struts.apache.org/tags-html\"  prefix=\"html\" %><%@ \n-taglib uri=\"http://struts.apache.org/tags-logic\" prefix=\"logic\" %><%@ \n-taglib uri=\"http://struts.apache.org/tags-tiles\" prefix=\"tiles\" %><%@ \n-taglib uri=\"http://jakarta.apache.org/taglibs/string-1.0.1\" prefix=\"str\" %><%@ \n-taglib uri=\"http://www.rollerweblogger.org/tags\" prefix=\"roller\" %><%@ \n-page import=\"org.roller.model.Roller\" %><%@ \n-page import=\"org.roller.model.RollerFactory\" %><%@ \n-page import=\"org.roller.pojos.UserData\" %><%@ \n-page import=\"org.roller.pojos.WebsiteData\" %><%@ \n-page import=\"org.roller.pojos.RollerConfigData\" %><%@ \n-page import=\"org.roller.presentation.RollerContext\" %><%@ \n-page import=\"org.roller.presentation.RollerSession\" %><%@ \n-page import=\"org.roller.config.RollerConfig\" %><%@ \n-page import=\"org.roller.presentation.RollerRequest\" %><%@ \n-page import=\"org.roller.config.RollerRuntimeConfig\" %><%@ \n-page import=\"org.roller.config.RollerConfig\" %><%@ \n-page import=\"org.roller.presentation.LanguageUtil\" %><%@ \n-page import=\"javax.servlet.jsp.jstl.core.Config\" %><%   \n+<%@ page language=\"java\" errorPage=\"/error.jsp\" contentType=\"text/html; charset=UTF-8\" %>\n+\n+<%@ taglib uri=\"http://java.sun.com/jstl/core\"       prefix=\"c\" %>\n+<%@ taglib uri=\"http://java.sun.com/jstl/fmt\"        prefix=\"fmt\" %>\n+<%@ taglib uri=\"http://struts.apache.org/tags-bean\"  prefix=\"bean\" %>\n+<%@ taglib uri=\"http://struts.apache.org/tags-html\"  prefix=\"html\" %>\n+<%@ taglib uri=\"http://struts.apache.org/tags-logic\" prefix=\"logic\" %>\n+<%@ taglib uri=\"http://struts.apache.org/tags-tiles\" prefix=\"tiles\" %>\n+<%@ taglib uri=\"http://jakarta.apache.org/taglibs/string-1.0.1\" prefix=\"str\" %>\n+\n+<%@ taglib uri=\"http://www.rollerweblogger.org/tags\" prefix=\"roller\" %>\n+\n+<%@ page import=\"javax.servlet.jsp.jstl.core.Config\" %>\n+\n+<%@ page import=\"org.roller.model.Roller\" %>\n+<%@ page import=\"org.roller.model.RollerFactory\" %>\n+\n+<%@ page import=\"org.roller.pojos.UserData\" %>\n+<%@ page import=\"org.roller.pojos.WebsiteData\" %>\n+<%@ page import=\"org.roller.pojos.RollerConfigData\" %>\n+\n+<%@ page import=\"org.roller.config.RollerConfig\" %>\n+<%@ page import=\"org.roller.config.RollerRuntimeConfig\" %>\n+<%@ page import=\"org.roller.config.RollerConfig\" %>\n+\n+<%@ page import=\"org.roller.presentation.RollerRequest\" %>\n+<%@ page import=\"org.roller.presentation.BasePageModel\" %>\n+<%@ page import=\"org.roller.presentation.RollerContext\" %>\n+<%@ page import=\"org.roller.presentation.RollerSession\" %>\n+<%@ page import=\"org.roller.presentation.LanguageUtil\" %>\n+\n+<%   \n // fmt:setLocale doesn't accept an expression, hence this hack\n-Config.set(pageContext, Config.FMT_LOCALE, LanguageUtil.getViewLocale(request), pageContext.PAGE_SCOPE); \n-%><fmt:setBundle basename=\"ApplicationResources\" /><%-- \n-Set all pages that include this page to use XHTML --%><html:xhtml />\n\\ No newline at end of file\n+Config.set(pageContext, Config.FMT_LOCALE, \n+        LanguageUtil.getViewLocale(request), pageContext.PAGE_SCOPE); \n+%>\n+<fmt:setBundle basename=\"ApplicationResources\" />\n+\n+<%-- Set Struts tags to use XHTML --%>\n+<html:xhtml />\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/taglibs.jsp",
                "sha": "b3e8f07df07947fffb54d3fa0d4b34af3c82129f",
                "status": "modified"
            },
            {
                "additions": 8,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/theme/messages.jsp",
                "changes": 17,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/theme/messages.jsp?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 9,
                "filename": "web/theme/messages.jsp",
                "patch": "@@ -13,15 +13,6 @@ function dirty() {\n -->\r\n </script>\r\n \r\n-<%-- Error Messages --%>\r\n-<logic:messagesPresent>\r\n-    <div id=\"errors\" class=\"errors\">\r\n-        <html:messages id=\"error\">\r\n-            <c:out value=\"${error}\" /><br />\r\n-        </html:messages>\r\n-    </div>\r\n-</logic:messagesPresent>\r\n-\r\n <%-- Success Messages --%>\r\n <logic:messagesPresent message=\"true\">\r\n     <div id=\"messages\" class=\"messages\">\r\n@@ -31,3 +22,11 @@ function dirty() {\n     </div>\r\n </logic:messagesPresent>\r\n \r\n+<%-- Error Messages --%>\r\n+<logic:messagesPresent>\r\n+    <div id=\"errors\" class=\"errors\">\r\n+        <html:messages id=\"error\">\r\n+            <c:out value=\"${error}\" /><br />\r\n+        </html:messages>\r\n+    </div>\r\n+</logic:messagesPresent>\r",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/theme/messages.jsp",
                "sha": "39600989bbdee283d6655386336194e7761c404f",
                "status": "modified"
            },
            {
                "additions": 16,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/weblog/Pings.jsp",
                "changes": 16,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/weblog/Pings.jsp?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 0,
                "filename": "web/weblog/Pings.jsp",
                "patch": "@@ -1,5 +1,9 @@\n <%@ page import=\"org.roller.presentation.RollerRequest\"%>\n <%@ include file=\"/taglibs.jsp\" %>\n+<%\n+BasePageModel pageModel = (BasePageModel)request.getAttribute(\"model\");\n+String websiteHandle = pageModel.getWebsite().getHandle();\n+%>\n \n <p class=\"subtitle\">\n    <fmt:message key=\"pings.subtitle\" >\n@@ -59,6 +63,8 @@\n                      <roller:linkparam\n                         id=\"<%= RollerRequest.PINGTARGETID_KEY %>\"\n                         name=\"pingTarget\" property=\"id\" />\n+                     <roller:linkparam\n+                       id=\"weblog\" value=\"<%= websiteHandle %>\" />\n                      <roller:linkparam\n                        id=\"method\" value=\"disableSelected\" />\n                      <fmt:message key=\"pingTarget.disable\"/>\n@@ -69,6 +75,8 @@\n                      <roller:linkparam\n                         id=\"<%= RollerRequest.PINGTARGETID_KEY %>\"\n                         name=\"pingTarget\" property=\"id\" />\n+                     <roller:linkparam\n+                       id=\"weblog\" value=\"<%= websiteHandle %>\" />\n                      <roller:linkparam\n                        id=\"method\" value=\"enableSelected\" />\n                      <fmt:message key=\"pingTarget.enable\"/>\n@@ -82,6 +90,8 @@\n                      <roller:linkparam\n                         id=\"<%= RollerRequest.PINGTARGETID_KEY %>\"\n                         name=\"pingTarget\" property=\"id\" />\n+                     <roller:linkparam\n+                       id=\"weblog\" value=\"<%= websiteHandle %>\" />\n                      <roller:linkparam\n                        id=\"method\" value=\"pingSelectedNow\" />\n                     <fmt:message key=\"pingTarget.sendPingNow\"/>\n@@ -152,6 +162,8 @@\n                              name=\"pingTarget\" property=\"id\" />\n                            <roller:linkparam\n                              id=\"method\" value=\"disableSelected\" />\n+                           <roller:linkparam\n+                             id=\"weblog\" value=\"<%= websiteHandle %>\" />\n                            <fmt:message key=\"pingTarget.disable\"/>\n                        </roller:link>\n                     </c:when>\n@@ -162,6 +174,8 @@\n                               name=\"pingTarget\" property=\"id\" />\n                            <roller:linkparam\n                              id=\"method\" value=\"enableSelected\" />\n+                           <roller:linkparam\n+                             id=\"weblog\" value=\"<%= websiteHandle %>\" />\n                            <fmt:message key=\"pingTarget.enable\"/>\n                        </roller:link>\n                     </c:otherwise>\n@@ -175,6 +189,8 @@\n                             name=\"pingTarget\" property=\"id\" />\n                          <roller:linkparam\n                             id=\"method\" value=\"pingSelectedNow\" />\n+                           <roller:linkparam\n+                             id=\"weblog\" value=\"<%= websiteHandle %>\" />\n                          <fmt:message key=\"pingTarget.sendPingNow\"/>\n                      </roller:link>\n                   </td>",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/weblog/Pings.jsp",
                "sha": "043e52a690ef11a33e51b21dc3a9c91ad2d297c9",
                "status": "modified"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/CreateWebsite.jsp",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/website/CreateWebsite.jsp?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 2,
                "filename": "web/website/CreateWebsite.jsp",
                "patch": "@@ -12,8 +12,6 @@ function cancel() {\n -->\n </script>\n \n-<h1><fmt:message key=\"createWebsite.title\" /></h1>\n-\n <p class=\"subtitle\"><fmt:message key=\"createWebsite.prompt\" /></p>\n \n <br /> ",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/CreateWebsite.jsp",
                "sha": "2379c5c71d8a6e65e181a33cc3f4cd5e74a34e4e",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/InviteMember.jsp",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/website/InviteMember.jsp?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 1,
                "filename": "web/website/InviteMember.jsp",
                "patch": "@@ -13,7 +13,8 @@ function cancel() {\n <p class=\"subtitle\"><fmt:message key=\"inviteMember.description\" /></p>\n \n <html:form action=\"/editor/inviteMember\" method=\"post\" focus=\"userName\">\n-    <input name=\"method\" type=\"hidden\" value=\"save\" />\n+    <html:hidden property=\"websiteId\" />\n+    <input name=\"method\" type=\"hidden\" value=\"send\" />\n     \n     <div class=\"formrow\">\n        <label for=\"userName\" class=\"formrow\" />",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/InviteMember.jsp",
                "sha": "dd9cd7e7a4bd4ce14386ed8e0722baf17db235ca",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/MemberPermissionsSidebar.jsp",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/website/MemberPermissionsSidebar.jsp?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 3,
                "filename": "web/website/MemberPermissionsSidebar.jsp",
                "patch": "@@ -8,9 +8,12 @@\n             <h3><fmt:message key=\"mainPage.actions\" /></h3>\n             <hr />\n             <img src='<c:url value=\"/images/ComposeMail16.gif\"/>' alt=\"mail-icon\" align=\"bottom\" />\n-            <roller:link page=\"/editor/inviteMember.do\">\n-               <fmt:message key=\"memberPermissions.inviteMember\" />\n-            </roller:link>\n+            <c:url value=\"/editor/inviteMember.do\" var=\"inviteUrl\">\n+               <c:param name=\"weblog\" value=\"${model.website.handle}\" />\n+            </c:url>\n+            <a href='<c:out value=\"${inviteUrl}\" />'>\n+                <fmt:message key=\"memberPermissions.inviteMember\" />\n+            </a>\n             <br />\n             <fmt:message key=\"memberPermissions.whyInvite\" />       \n \t\t\t<br />",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/MemberPermissionsSidebar.jsp",
                "sha": "a34d7a4530a011614648850df79ba027f5e47373",
                "status": "modified"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/YourProfile.jsp",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/website/YourProfile.jsp?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 1,
                "filename": "web/website/YourProfile.jsp",
                "patch": "@@ -8,7 +8,6 @@ function cancel() {\n -->\n </script>\n \n-<h1><fmt:message key=\"yourProfile.title\" /></h1>\n <p class=\"subtitle\"><fmt:message key=\"yourProfile.description\" /></p>\n \n <html:form action=\"/editor/yourProfile\" method=\"post\" focus=\"fullName\">",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/YourProfile.jsp",
                "sha": "10326773f944343a6c98a6081e4abf352d113cbb",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/edit-page.jsp",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/website/edit-page.jsp?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 5,
                "filename": "web/website/edit-page.jsp",
                "patch": "@@ -37,16 +37,16 @@ function cancel() {\n             <html:textarea property=\"description\" rows=\"3\" cols=\"50\"/>\r\n             </td>\r\n         </tr>\r\n-        <tr>\r\n-            <td><fmt:message key=\"pageForm.template\" /><br />\r\n-            <html:textarea property=\"contents\" cols=\"80\" rows=\"30\" style=\"width: 100%\" />\r\n-            </td>\r\n-        </tr>\r\n+\r\n     </table>\r\n \r\n+    <fmt:message key=\"pageForm.template\" /><br />\r\n+    <html:textarea property=\"contents\" cols=\"80\" rows=\"30\" style=\"width: 100%\" />\r\n+            \r\n     <html:hidden property=\"id\"/>\r\n     <html:hidden property=\"name\"/>\r\n     <input type=\"hidden\" name=\"method\" value=\"update\" />\r\n+    <input type=\"hidden\" name=\"weblog\" value='<c:out value=\"${model.website.handle}\" />' />\r\n \r\n     <br />\r\n     <input type=\"submit\" value='<fmt:message key=\"pageForm.save\" />' /></input>\r",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/edit-page.jsp",
                "sha": "1f2ceeeaa44e755f8d63049cf6ff965f22e5a50e",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/roller/blob/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/edit-pages-sidebar.jsp",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/website/edit-pages-sidebar.jsp?ref=4354febbbdb9640e54a2313f88482a00a40edeb3",
                "deletions": 2,
                "filename": "web/website/edit-pages-sidebar.jsp",
                "patch": "@@ -13,8 +13,7 @@\n                 <fmt:message key=\"pagesForm.name\"/>: <input type=\"text\" name=\"name\" size=\"30\" />\r\n \r\n                 <input type=\"submit\" value='<fmt:message key=\"pagesForm.add\" />' />\r\n-                <input type=\"hidden\" property=\"template\" \r\n-                    value=\"<html><body><fmt:message key=\"pagesForm.emptyPage\" /></body></html>\" />\r\n+                <input type=\"hidden\" name=\"weblog\" value='<c:out value=\"${model.website.handle}\" />' />\r\n                 <html:hidden property=\"method\" value=\"add\"/>\r\n \r\n              </html:form>\r",
                "raw_url": "https://github.com/apache/roller/raw/4354febbbdb9640e54a2313f88482a00a40edeb3/web/website/edit-pages-sidebar.jsp",
                "sha": "58bc0da07bf3d3cb530cd535899cbd508a8f6035",
                "status": "modified"
            }
        ],
        "message": "NPE fixes in template pages, ping pages and website settings\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/roller/branches/roller_2.0@264823 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/roller/commit/aab8c702ee307bb904a20c030af31ae8e6975887",
        "patched_files": [
            "ApplicationResources.java",
            "Pings.java"
        ],
        "repo": "roller",
        "unit_tests": [
            "PingsTest.java",
            "ApplicationResourcesTest.java"
        ]
    },
    "roller_778b412": {
        "bug_id": "roller_778b412",
        "commit": "https://github.com/apache/roller/commit/778b412f968a4022c037e3a5c368e50b1ebe7ab7",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/roller/blob/778b412f968a4022c037e3a5c368e50b1ebe7ab7/apps/weblogger/src/java/org/apache/roller/weblogger/ui/struts2/editor/MediaFileView.java",
                "changes": 16,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/apps/weblogger/src/java/org/apache/roller/weblogger/ui/struts2/editor/MediaFileView.java?ref=778b412f968a4022c037e3a5c368e50b1ebe7ab7",
                "deletions": 9,
                "filename": "apps/weblogger/src/java/org/apache/roller/weblogger/ui/struts2/editor/MediaFileView.java",
                "patch": "@@ -173,17 +173,16 @@ public String execute() {\n         MediaFileManager manager = WebloggerFactory.getWeblogger().getMediaFileManager();\r\n         try {\r\n             MediaFileDirectory directory;\r\n-            if (this.directoryId != null) {\r\n+            if (StringUtils.isNotEmpty(this.directoryId)) {\r\n                 directory = manager.getMediaFileDirectory(this.directoryId);\r\n \r\n-            } else if (this.directoryPath != null) {\r\n+            } else if (StringUtils.isNotEmpty(this.directoryPath)) {\r\n                 directory = manager.getMediaFileDirectoryByPath(getActionWeblog(), this.directoryPath);\r\n-                this.directoryId = directory.getId();\r\n \r\n             } else {\r\n                 directory = manager.getMediaFileRootDirectory(getActionWeblog());\r\n-                this.directoryId = directory.getId();\r\n             }\r\n+            this.directoryId = directory.getId();\r\n             this.directoryPath = directory.getPath();\r\n \r\n             this.childDirectories = new ArrayList<MediaFileDirectory>();\r\n@@ -194,18 +193,18 @@ public String execute() {\n \r\n             if (\"type\".equals(sortBy)) {\r\n                 Collections.sort(this.childFiles,\r\n-                        new MediaFileComparator(MediaFileComparatorType.TYPE));\r\n+                    new MediaFileComparator(MediaFileComparatorType.TYPE));\r\n \r\n             } else if (\"date_uploaded\".equals(sortBy)) {\r\n                 Collections.sort(this.childFiles,\r\n-                        new MediaFileComparator(MediaFileComparatorType.DATE_UPLOADED));\r\n+                    new MediaFileComparator(MediaFileComparatorType.DATE_UPLOADED));\r\n \r\n             } else { // default to sort by name\r\n                 sortBy = \"name\";\r\n                 Collections.sort(this.childDirectories,\r\n-                        new MediaFileDirectoryComparator(DirectoryComparatorType.NAME));\r\n+                    new MediaFileDirectoryComparator(DirectoryComparatorType.NAME));\r\n                 Collections.sort(this.childFiles,\r\n-                        new MediaFileComparator(MediaFileComparatorType.NAME));\r\n+                    new MediaFileComparator(MediaFileComparatorType.NAME));\r\n             }\r\n \r\n             this.currentDirectory = directory;\r\n@@ -269,7 +268,6 @@ public String search() {\n         String fullPath = this.currentDirectory.getPath();\r\n         if (fullPath.length() > 1) {\r\n             String[] directoryNames = fullPath.substring(1).split(\"/\");\r\n-            String directoryPath = \"\";\r\n             for (String directoryName : directoryNames) {\r\n                 directoryPath = directoryPath + \"/\" + directoryName;\r\n                 directoryHierarchy.add(new KeyValueObject(directoryPath, directoryName));\r",
                "raw_url": "https://github.com/apache/roller/raw/778b412f968a4022c037e3a5c368e50b1ebe7ab7/apps/weblogger/src/java/org/apache/roller/weblogger/ui/struts2/editor/MediaFileView.java",
                "sha": "091805a211f469ca8ef1797766bbaaeb529297d2",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/roller/blob/778b412f968a4022c037e3a5c368e50b1ebe7ab7/apps/weblogger/web/WEB-INF/classes/ApplicationResources.properties",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/apps/weblogger/web/WEB-INF/classes/ApplicationResources.properties?ref=778b412f968a4022c037e3a5c368e50b1ebe7ab7",
                "deletions": 2,
                "filename": "apps/weblogger/web/WEB-INF/classes/ApplicationResources.properties",
                "patch": "@@ -981,7 +981,7 @@ mediaFileAdd.name=Name\n mediaFileAdd.description=Description\n mediaFileAdd.tags=Tags (space separated)\n mediaFileAdd.copyright=Copyright statement\n-mediaFileAdd.directory=Place in directory\n+mediaFileAdd.directory=Directory\n mediaFileAdd.includeGallery=Include in Gallery?\n mediaFileAdd.upload=Upload\n mediaFileAdd.multipleNames=(Multiple names)\n@@ -1033,7 +1033,7 @@ mediaFileEdit.name=Name\n mediaFileEdit.description=Description\n mediaFileEdit.tags=Tags (space separated)\n mediaFileEdit.copyright=Copyright statement\n-mediaFileEdit.directory=Place file under\n+mediaFileEdit.directory=Directory\n mediaFileEdit.save=Save\n mediaFileEdit.cancel=Cancel\n mediaFileEdit.fileInfo=File info",
                "raw_url": "https://github.com/apache/roller/raw/778b412f968a4022c037e3a5c368e50b1ebe7ab7/apps/weblogger/web/WEB-INF/classes/ApplicationResources.properties",
                "sha": "67ab21da228358c9bc46c49f3a28215ab1ef5578",
                "status": "modified"
            },
            {
                "additions": 37,
                "blob_url": "https://github.com/apache/roller/blob/778b412f968a4022c037e3a5c368e50b1ebe7ab7/apps/weblogger/web/WEB-INF/jsps/editor/MediaFileView.jsp",
                "changes": 53,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/apps/weblogger/web/WEB-INF/jsps/editor/MediaFileView.jsp?ref=778b412f968a4022c037e3a5c368e50b1ebe7ab7",
                "deletions": 16,
                "filename": "apps/weblogger/web/WEB-INF/jsps/editor/MediaFileView.jsp",
                "patch": "@@ -158,11 +158,13 @@\n     <p class=\"subtitle\">\r\n         <s:text name=\"mediaFileView.path\"/> /\r\n         <s:iterator id=\"directory\" value=\"currentDirectoryHierarchy\">\r\n+\r\n             <s:url id=\"getDirectoryByPathUrl\" action=\"mediaFileView\">\r\n                 <s:param name=\"directoryPath\" value=\"#directory.key\" />\r\n                 <s:param name=\"weblog\" value=\"%{actionWeblog.handle}\" />\r\n             </s:url>\r\n             <s:a href=\"%{getDirectoryByPathUrl}\"><s:property value=\"#directory.value\" /></s:a> /\r\n+            \r\n         </s:iterator>\r\n     </p>\r\n     <p class=\"pagetip\">\r\n@@ -179,37 +181,28 @@\n     <s:hidden name=\"directoryId\" />\r\n     <input type=\"hidden\" name=\"mediaFileId\" value=\"\" />\r\n \r\n-    <%--\r\n-    <s:url id=\"mediaFileHierarchicalViewURL\" action=\"mediaFileHierarchicalView\">\r\n-        <s:param name=\"weblog\" value=\"%{actionWeblog.handle}\" />\r\n-    </s:url>\r\n-    <p><span style=\"font-weight:bold\"><s:text name=\"mediaFileView.tabular\" /></span> |\r\n-        <s:a href=\"%{mediaFileHierarchicalViewURL}\"><s:text name=\"mediaFileView.hierarchy\" /></s:a></p>\r\n-    --%>\r\n-\r\n     <div class=\"control\">\r\n \r\n         <span style=\"padding-left:20px\">\r\n             <s:text name=\"mediaFileView.sortby\" />\r\n-            <s:select name=\"sortBy\" list=\"sortOptions\" listKey=\"key\"\r\n+            <s:select id=\"sortByMenu\" name=\"sortBy\" list=\"sortOptions\" listKey=\"key\"\r\n                   listValue=\"value\"\r\n                   onchange=\"document.mediaFileViewForm.submit();\" />\r\n         </span>\r\n \r\n         <span style=\"float:right\">\r\n-            <input type=\"button\" style=\"padding-right:20px\"\r\n+            <input id=\"deleteButton\" type=\"button\" style=\"padding-right:20px\"\r\n                value='<s:text name=\"mediaFileView.deleteSelected\" />' onclick=\"onDeleteSelected()\" />\r\n \r\n-            <input type=\"button\" style=\"padding-left:20px\"\r\n+            <input id=\"moveButton\" type=\"button\" style=\"padding-left:20px\"\r\n                value=<s:text name=\"mediaFileView.moveSelected\" /> onclick=\"onMoveSelected()\" />\r\n \r\n-            <s:select name=\"selectedDirectory\" list=\"allDirectories\" listKey=\"id\" listValue=\"path\" />\r\n+            <s:select id=\"moveTargetMenu\" name=\"selectedDirectory\" list=\"allDirectories\" listKey=\"id\" listValue=\"path\" />\r\n         </span>\r\n \r\n     </div>\r\n \r\n \r\n-\r\n     <%-- ***************************************************************** --%>\r\n \r\n     <%-- Media file folder contents --%>\r\n@@ -408,6 +401,35 @@\n </s:form>\r\n \r\n \r\n+<%-- ***************************************************************** --%>\r\n+\r\n+<%-- code to toggle buttons on/off as media file/directory selections change --%>\r\n+\r\n+<script type=\"text/javascript\">\r\n+    $(document).ready(function() {\r\n+        $(\"#deleteButton\").attr('disabled',true)\r\n+        $(\"#moveButton\").attr('disabled',true)\r\n+        $(\"#moveTargetMenu\").attr('disabled',true)\r\n+\r\n+        $(\"input[type=checkbox]\").change(function() {\r\n+            var count = 0;\r\n+            $(\"input[type=checkbox]\").each(function(index, element) {\r\n+                if (element.checked) count++;\r\n+            });\r\n+            if (count == 0) {\r\n+                $(\"#deleteButton\").attr('disabled',true)\r\n+                $(\"#moveButton\").attr('disabled',true)\r\n+                $(\"#moveTargetMenu\").attr('disabled',true)\r\n+            } else {\r\n+                $(\"#deleteButton\").attr('disabled',false)\r\n+                $(\"#moveButton\").attr('disabled',false)\r\n+                $(\"#moveTargetMenu\").attr('disabled',false)\r\n+            }\r\n+        });\r\n+    });\r\n+</script>\r\n+\r\n+\r\n <%-- ***************************************************************** --%>\r\n \r\n <%-- code to launch Media File Edit lightbox when user clicks a media file --%>\r\n@@ -429,7 +451,7 @@\n     }\r\n \r\n     YAHOO.namespace(\"mediaFileEditor\");\r\n-    function init() {\r\n+    $(document).ready(function() {\r\n         YAHOO.mediaFileEditor.lightbox = new YAHOO.widget.Panel(\r\n             \"mediafile_edit_lightbox\", {\r\n                 modal:    true,\r\n@@ -441,8 +463,7 @@\n             }\r\n         );\r\n         YAHOO.mediaFileEditor.lightbox.render(document.body);\r\n-    }\r\n-    YAHOO.util.Event.addListener(window, \"load\", init);\r\n+    });\r\n \r\n </script>\r\n \r",
                "raw_url": "https://github.com/apache/roller/raw/778b412f968a4022c037e3a5c368e50b1ebe7ab7/apps/weblogger/web/WEB-INF/jsps/editor/MediaFileView.jsp",
                "sha": "7ff567540694df7f685679e899e91b1b7b3f2ba1",
                "status": "modified"
            }
        ],
        "message": "Couple of small fixes:\n- Only show move and delete buttons when files or directories are selected\n- Fixed NPE when attempting to move files from search view\n\ngit-svn-id: https://svn.apache.org/repos/asf/roller/trunk@821575 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/roller/commit/d5de887dcb98960d84565f4a07a81ba5aaf20d73",
        "patched_files": [
            "ApplicationResources.java"
        ],
        "repo": "roller",
        "unit_tests": [
            "ApplicationResourcesTest.java"
        ]
    },
    "roller_c181f4c": {
        "bug_id": "roller_c181f4c",
        "commit": "https://github.com/apache/roller/commit/c181f4c2e36e7efed3b34c8295c648fb16b85b2d",
        "file": [
            {
                "additions": 35,
                "blob_url": "https://github.com/apache/roller/blob/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/src/org/roller/presentation/weblog/actions/BasePingTargetsAction.java",
                "changes": 59,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/weblog/actions/BasePingTargetsAction.java?ref=c181f4c2e36e7efed3b34c8295c648fb16b85b2d",
                "deletions": 24,
                "filename": "src/org/roller/presentation/weblog/actions/BasePingTargetsAction.java",
                "patch": "@@ -24,6 +24,7 @@\n import org.roller.RollerException;\n import org.roller.model.PingTargetManager;\n import org.roller.model.RollerFactory;\n+import org.roller.pojos.WebsiteData;\n import org.roller.pojos.PingTargetData;\n import org.roller.presentation.BasePageModel;\n import org.roller.presentation.forms.PingTargetForm;\n@@ -92,7 +93,7 @@ public ActionForward view(ActionMapping mapping, ActionForm form,\n             BasePageModel pageModel = \n                 new BasePageModel(getPingTargetsTitle(), req, res, mapping);\n             req.setAttribute(\"model\",pageModel);            \n-            if (!hasRequiredRights(rreq))\n+            if (!hasRequiredRights(rreq, rreq.getWebsite()))\n             {\n                 return mapping.findForward(ACCESS_DENIED_PAGE);\n             }\n@@ -131,7 +132,7 @@ public ActionForward save(ActionMapping mapping, ActionForm form,\n             BasePageModel pageModel = \n                 new BasePageModel(getPingTargetEditTitle(), req, res, mapping);\n             req.setAttribute(\"model\",pageModel);            \n-            if (!hasRequiredRights(rreq))\n+            if (!hasRequiredRights(rreq, rreq.getWebsite()))\n             {\n                 return mapping.findForward(ACCESS_DENIED_PAGE);\n             }\n@@ -220,7 +221,7 @@ public ActionForward editSelected(ActionMapping mapping, ActionForm form,\n             BasePageModel pageModel = \n                 new BasePageModel(getPingTargetEditTitle(), req, res, mapping);\n             req.setAttribute(\"model\",pageModel);            \n-            if (!hasRequiredRights(rreq))\n+            if (!hasRequiredRights(rreq, rreq.getWebsite()))\n             {\n                 return mapping.findForward(ACCESS_DENIED_PAGE);\n             }\n@@ -256,7 +257,7 @@ public ActionForward deleteSelected(ActionMapping mapping, ActionForm form,\n             BasePageModel pageModel = new BasePageModel(\n                     getPingTargetDeleteOKTitle(), req, res, mapping);\n             req.setAttribute(\"model\",pageModel);            \n-            if (!hasRequiredRights(rreq))\n+            if (!hasRequiredRights(rreq, rreq.getWebsite()))\n             {\n                 return mapping.findForward(ACCESS_DENIED_PAGE);\n             }\n@@ -290,7 +291,7 @@ public ActionForward deleteConfirmed(ActionMapping mapping, ActionForm form,\n         PingTargetManager pingTargetMgr = RollerFactory.getRoller().getPingTargetManager();\n         try\n         {\n-            if (!hasRequiredRights(rreq))\n+            if (!hasRequiredRights(rreq, rreq.getWebsite()))\n             {\n                 return mapping.findForward(ACCESS_DENIED_PAGE);\n             }\n@@ -311,7 +312,7 @@ public ActionForward deleteConfirmed(ActionMapping mapping, ActionForm form,\n     }\n \n     // TODO: Consider unifying with other RollerRequest methods\n-    /*\n+    /**\n      * Helper to select the ping target specified by the id in the request.\n      * @param rreq\n      * @return the ping target specified by the id in the request\n@@ -334,19 +335,22 @@ private PingTargetData select(RollerRequest rreq) throws RollerException\n         return pingTarget;\n     }\n \n-    /*\n+    /**\n      * Private helper to validate a ping target.\n-     * @param rreq       the request\n+     * @param rreq the request\n      * @param pingTarget the ping target to validate\n-     * @return an <code>ActionMessages</code> object with <code>ActionMessage</code> for each error encountered, empty if no\n-     * errors were encountered.\n+     * @return an <code>ActionMessages</code> object with \n+     *         <code>ActionMessage</code> for each error encountered, \n+     *         empty if no errors were encountered.\n      * @throws RollerException\n      */\n-    private ActionMessages validate(RollerRequest rreq, PingTargetData pingTarget) throws RollerException\n+    private ActionMessages validate(\n+        RollerRequest rreq, PingTargetData pingTarget) throws RollerException\n     {\n         ActionMessages errors = new ActionMessages();\n \n-        PingTargetManager pingTargetMgr = RollerFactory.getRoller().getPingTargetManager();\n+        PingTargetManager pingTargetMgr = \n+                RollerFactory.getRoller().getPingTargetManager();\n         if (!pingTargetMgr.isNameUnique(pingTarget))\n         {\n             errors.add(ActionMessages.GLOBAL_MESSAGE,\n@@ -365,26 +369,33 @@ private ActionMessages validate(RollerRequest rreq, PingTargetData pingTarget) t\n     }\n \n \n-    /*\n-     *  Helper defined by the subclass to determine if user has adequate rights for the action.\n-     *  This and the {@link org.roller.pojos.PingTargetData#canSave()} method determine the access\n-     *  control for the action.\n+    /**\n+     * Helper defined by the subclass to determine if user has adequate \n+     * rights for the action. This and the \n+     * {@link org.roller.pojos.PingTargetData#canSave()} method determine the \n+     * access control for the action.\n      */\n-    protected abstract boolean hasRequiredRights(RollerRequest rreq) throws RollerException;\n+    protected abstract boolean hasRequiredRights(\n+            RollerRequest rreq, WebsiteData website) throws RollerException;\n \n-    /*\n+    /**\n      * Get the logger from the concrete subclass\n      */\n     protected abstract Log getLogger();\n \n-    /*\n-     * Get the ping targets for the view.  This is implemented differently in the concrete subclasses.\n+    /**\n+     * Get the ping targets for the view.  This is implemented differently in \n+     * the concrete subclasses.\n      */\n-    protected abstract List getPingTargets(RollerRequest rreq) throws RollerException;\n+    protected abstract List getPingTargets(RollerRequest rreq) \n+        throws RollerException;\n \n \n-    /*\n-     * Create a new ping target (blank). This is implemented differently in the concrete subclasses.\n+    /**\n+     * Create a new ping target (blank). This is implemented differently in \n+     * the concrete subclasses.\n      */\n-    protected abstract PingTargetData createPingTarget(RollerRequest rreq, PingTargetForm pingTargetForm) throws RollerException;\n+    protected abstract PingTargetData createPingTarget(\n+        RollerRequest rreq, PingTargetForm pingTargetForm) \n+            throws RollerException;\n }",
                "raw_url": "https://github.com/apache/roller/raw/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/src/org/roller/presentation/weblog/actions/BasePingTargetsAction.java",
                "sha": "029ae37640f334dcb9cda62441e667cda5bdec25",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/roller/blob/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/src/org/roller/presentation/weblog/actions/CustomPingTargetsAction.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/weblog/actions/CustomPingTargetsAction.java?ref=c181f4c2e36e7efed3b34c8295c648fb16b85b2d",
                "deletions": 2,
                "filename": "src/org/roller/presentation/weblog/actions/CustomPingTargetsAction.java",
                "patch": "@@ -24,6 +24,7 @@\n import org.roller.model.PingTargetManager;\n import org.roller.model.RollerFactory;\n import org.roller.pojos.PingTargetData;\n+import org.roller.pojos.WebsiteData;\n import org.roller.presentation.forms.PingTargetForm;\n import org.roller.presentation.RollerRequest;\n import org.roller.presentation.RollerSession;\n@@ -99,10 +100,11 @@ protected PingTargetData createPingTarget(RollerRequest rreq, PingTargetForm pin\n     /*\n      *  Check if the user has editing rights.\n      */\n-    protected boolean hasRequiredRights(RollerRequest rreq) throws RollerException\n+    protected boolean hasRequiredRights(RollerRequest rreq, WebsiteData website) \n+        throws RollerException\n     {\n         RollerSession rses = RollerSession.getRollerSession(rreq.getRequest());\n-        return (rses.isUserAuthorizedToAdmin(rreq.getWebsite()) \n+        return (rses.isUserAuthorizedToAdmin(website)\n             && !PingConfig.getDisallowCustomTargets());\n     }\n ",
                "raw_url": "https://github.com/apache/roller/raw/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/src/org/roller/presentation/weblog/actions/CustomPingTargetsAction.java",
                "sha": "82929ce829b8ec02ffc81cb6955c7cff3421dbaf",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/roller/blob/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/WEB-INF/classes/ApplicationResources.properties",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/WEB-INF/classes/ApplicationResources.properties?ref=c181f4c2e36e7efed3b34c8295c648fb16b85b2d",
                "deletions": 0,
                "filename": "web/WEB-INF/classes/ApplicationResources.properties",
                "patch": "@@ -694,6 +694,7 @@ customPingTargets.disAllowedExplanation=The use of custom ping targets has been\n disabled on this site. To get an additional common ping target added, \\\n Please contact an administrator.\n \n+\n pings.title=Configure Automatic Weblog Pings\n pings.subtitle=Setup automatic pings for weblog [<b>{0}</b>]\n pings.explanation=Pings allow you to notify sites that your weblog has changed \\\n@@ -727,7 +728,12 @@ ping.pingProcessingIsSuspended=Ping processing has been suspended temporarily by\n a site administrator.\n pingResult.OK=OK\n \n+\n pingTarget.pingTarget=Ping Target\n+\n+customPingTarget.subtitle=Editing custom ping target in weblog [{0}]\n+commonPingTarget.subtitle=Editing common ping target\n+\n pingTarget.name=Name\n pingTarget.pingUrl=Ping URL\n pingTarget.addNew=Add New",
                "raw_url": "https://github.com/apache/roller/raw/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/WEB-INF/classes/ApplicationResources.properties",
                "sha": "c67eef300fe43465944bff3463c1918ea3611618",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/roller/blob/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/weblog/CategoryForm.jsp",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/weblog/CategoryForm.jsp?ref=c181f4c2e36e7efed3b34c8295c648fb16b85b2d",
                "deletions": 1,
                "filename": "web/weblog/CategoryForm.jsp",
                "patch": "@@ -3,7 +3,8 @@\n \r\n <p class=\"subtitle\">\r\n <c:if test=\"${state == 'add'}\">\r\n-    <fmt:message key=\"categoryForm.add.subtitle\" /></h3>\r\n+    <fmt:message key=\"categoryForm.add.subtitle\" />\r\n+    \r\n </c:if>\r\n <c:if test=\"${state == 'edit'}\">\r\n     <fmt:message key=\"categoryForm.edit.subtitle\" />\r",
                "raw_url": "https://github.com/apache/roller/raw/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/weblog/CategoryForm.jsp",
                "sha": "bb493a9bfda06de45a5df1979fcc23a5f45b0626",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/roller/blob/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/weblog/CustomPingTargetDeleteOK.jsp",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/weblog/CustomPingTargetDeleteOK.jsp?ref=c181f4c2e36e7efed3b34c8295c648fb16b85b2d",
                "deletions": 0,
                "filename": "web/weblog/CustomPingTargetDeleteOK.jsp",
                "patch": "@@ -13,6 +13,7 @@\n <tr>\n <td>\n <html:form action=\"/editor/customPingTargets\" method=\"post\">\n+    <input type=\"hidden\" name=\"weblog\" value='<c:out value=\"${model.website.handle}\" />' />\n     <html:hidden property=\"method\" value=\"deleteConfirmed\" />\n     <html:hidden property=\"id\" />\n     <div class=\"control\">\n@@ -22,6 +23,7 @@\n </td>\n <td>\n <html:form action=\"/editor/customPingTargets\" method=\"post\">\n+    <input type=\"hidden\" name=\"weblog\" value='<c:out value=\"${model.website.handle}\" />' />\n     <!-- Results in returning to the view on common ping targets. -->\n     <div class=\"control\">\n        <input type=\"submit\" value='<fmt:message key=\"pingTarget.cancel\" />' />",
                "raw_url": "https://github.com/apache/roller/raw/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/weblog/CustomPingTargetDeleteOK.jsp",
                "sha": "500bc8c71c53e284d6b5b61afa08ebd39a3c6778",
                "status": "modified"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/roller/blob/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/weblog/CustomPingTargetEdit.jsp",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/weblog/CustomPingTargetEdit.jsp?ref=c181f4c2e36e7efed3b34c8295c648fb16b85b2d",
                "deletions": 1,
                "filename": "web/weblog/CustomPingTargetEdit.jsp",
                "patch": "@@ -8,10 +8,16 @@ function cancel() {\n // -->\n </script> \n \n-<br />\n+<p class=\"subtitle\">\n+<fmt:message key=\"customPingTarget.subtitle\">\n+    <fmt:param value=\"${model.website.handle}\" />\n+</fmt:message>\n+</p>\n+\n <html:form action=\"/editor/customPingTargets\" method=\"post\" focus=\"name\">\n     <html:hidden property=\"method\" value=\"save\" />\n     <html:hidden property=\"id\" />\n+    <input type=\"hidden\" name=\"weblog\" value='<c:out value=\"${model.website.handle}\" />' />\n \n     <div class=\"formrow\">\n        <label for=\"name\" class=\"formrow\"><fmt:message key=\"pingTarget.name\" /></label>",
                "raw_url": "https://github.com/apache/roller/raw/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/weblog/CustomPingTargetEdit.jsp",
                "sha": "f75097288b0fc165ca90fb9aab701e5e509e272d",
                "status": "modified"
            },
            {
                "additions": 9,
                "blob_url": "https://github.com/apache/roller/blob/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/weblog/CustomPingTargets.jsp",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/weblog/CustomPingTargets.jsp?ref=c181f4c2e36e7efed3b34c8295c648fb16b85b2d",
                "deletions": 0,
                "filename": "web/weblog/CustomPingTargets.jsp",
                "patch": "@@ -1,5 +1,9 @@\n <%@ page import=\"org.roller.presentation.RollerRequest\"%>\n <%@ include file=\"/taglibs.jsp\" %>\n+<%\n+BasePageModel pageModel = (BasePageModel)request.getAttribute(\"model\");\n+String websiteHandle = pageModel.getWebsite().getHandle();\n+%>\n \n <p class=\"subtitle\">\n    <fmt:message key=\"customPingTargets.subtitle\" >\n@@ -41,6 +45,8 @@\n                        <roller:linkparam\n                            id=\"<%= RollerRequest.PINGTARGETID_KEY %>\"\n                            name=\"pingTarget\" property=\"id\" />\n+                       <roller:linkparam\n+                           id=\"weblog\" value=\"<%= websiteHandle %>\" />\n                        <roller:linkparam\n     \t                   id=\"method\" value=\"editSelected\" />\n                        <img src='<c:url value=\"/images/Edit16.png\"/>' border=\"0\"\n@@ -53,6 +59,8 @@\n                        <roller:linkparam\n     \t                   id=\"<%= RollerRequest.PINGTARGETID_KEY %>\"\n     \t                   name=\"pingTarget\" property=\"id\" />\n+                       <roller:linkparam\n+                           id=\"weblog\" value=\"<%= websiteHandle %>\" />\n                        <roller:linkparam\n     \t                   id=\"method\" value=\"deleteSelected\" />\n                        <img src='<c:url value=\"/images/Remove16.gif\"/>' border=\"0\"\n@@ -70,6 +78,7 @@\n     <html:form action=\"/editor/customPingTargets\" method=\"post\">\n         <div class=\"control\">\n            <html:hidden property=\"method\" value=\"addNew\" />\n+           <input type=\"hidden\" name=\"weblog\" value='<c:out value=\"${model.website.handle}\" />' />           \n            <input type=\"submit\" value='<fmt:message key=\"pingTarget.addNew\"/>' />\n         </div>\n     </html:form>",
                "raw_url": "https://github.com/apache/roller/raw/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/weblog/CustomPingTargets.jsp",
                "sha": "8f7f8994d9e605b92db94726f154fa2d407d3a8e",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/roller/blob/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/website/CommonPingTargetEdit.jsp",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/web/website/CommonPingTargetEdit.jsp?ref=c181f4c2e36e7efed3b34c8295c648fb16b85b2d",
                "deletions": 1,
                "filename": "web/website/CommonPingTargetEdit.jsp",
                "patch": "@@ -1,7 +1,10 @@\n <%@ include file=\"/taglibs.jsp\" %>\n \n \n-<br />\n+<p class=\"subtitle\">\n+<fmt:message key=\"commonPingTarget.subtitle\"/>\n+</p>\n+\n <html:form action=\"/admin/commonPingTargets\" method=\"post\" focus=\"name\">\n     <html:hidden property=\"method\" value=\"save\" />\n     <html:hidden property=\"id\" />",
                "raw_url": "https://github.com/apache/roller/raw/c181f4c2e36e7efed3b34c8295c648fb16b85b2d/web/website/CommonPingTargetEdit.jsp",
                "sha": "b138c2ec19d2c426c3b91dff3e84c4ac1209b4f5",
                "status": "modified"
            }
        ],
        "message": "NPE fixes in ping pages\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/roller/branches/roller_2.0@264827 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/roller/commit/4354febbbdb9640e54a2313f88482a00a40edeb3",
        "patched_files": [
            "ApplicationResources.java"
        ],
        "repo": "roller",
        "unit_tests": [
            "ApplicationResourcesTest.java"
        ]
    }
}