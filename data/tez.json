{
    "tez_0ac846e": {
        "bug_id": "tez_0ac846e",
        "commit": "https://github.com/apache/tez/commit/0ac846ec5a41dd9f7839774eb9af4c8036e64a5b",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/0ac846ec5a41dd9f7839774eb9af4c8036e64a5b/TEZ-3334-CHANGES.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/TEZ-3334-CHANGES.txt?ref=0ac846ec5a41dd9f7839774eb9af4c8036e64a5b",
                "deletions": 0,
                "filename": "TEZ-3334-CHANGES.txt",
                "patch": "@@ -4,6 +4,7 @@ Apache Tez Change Log\n INCOMPATIBLE CHANGES:\n \n ALL CHANGES:\n+  TEZ-3587. Fetcher fetchInputs() can NPE on srcAttempt due to missing entry in pathToAttemptMap\n   TEZ-3586. Remove fusesource.leveldbjni from the tez-auxservices shaded jar\n   TEZ-3532. Backport MAPREDUCE-6808. Log map attempts as part of shuffle handler audit log\n   TEZ-3563. Tez Shuffle Handler logging fails to initialize",
                "raw_url": "https://github.com/apache/tez/raw/0ac846ec5a41dd9f7839774eb9af4c8036e64a5b/TEZ-3334-CHANGES.txt",
                "sha": "d7c9e300c384a0e41bb3fbaae0fcb33f1e9f77aa",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/0ac846ec5a41dd9f7839774eb9af4c8036e64a5b/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/Fetcher.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/Fetcher.java?ref=0ac846ec5a41dd9f7839774eb9af4c8036e64a5b",
                "deletions": 1,
                "filename": "tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/Fetcher.java",
                "patch": "@@ -258,7 +258,7 @@ public FetchResult callInternal() throws Exception {\n       if (in instanceof CompositeInputAttemptIdentifier) {\n         CompositeInputAttemptIdentifier cin = (CompositeInputAttemptIdentifier)in;\n         for (int i = 0; i < cin.getInputIdentifierCount(); i++) {\n-          pathToAttemptMap.put(new PathPartition(cin.getPathComponent(), i), cin.expand(i));\n+          pathToAttemptMap.put(new PathPartition(cin.getPathComponent(), partition + i), cin.expand(i));\n         }\n       } else {\n         pathToAttemptMap.put(new PathPartition(in.getPathComponent(), 0), in);",
                "raw_url": "https://github.com/apache/tez/raw/0ac846ec5a41dd9f7839774eb9af4c8036e64a5b/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/Fetcher.java",
                "sha": "7b5ca17115705c9561c5f8592b229d57319bd0bb",
                "status": "modified"
            }
        ],
        "message": "TEZ-3587. Fetcher fetchInputs() can NPE on srcAttempt due to missing entry in pathToAttemptMap (Kuhu Shukla via jeagles)",
        "parent": "https://github.com/apache/tez/commit/4e44712448361e2e62262d4c297c67995ff2c520",
        "repo": "tez",
        "unit_tests": [
            "TestFetcher.java"
        ]
    },
    "tez_150ebd3": {
        "bug_id": "tez_150ebd3",
        "commit": "https://github.com/apache/tez/commit/150ebd3c7934339f31a7b24012ece8e171e1f993",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/tez/blob/150ebd3c7934339f31a7b24012ece8e171e1f993/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/impl/ShuffleInputEventHandler.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/impl/ShuffleInputEventHandler.java?ref=150ebd3c7934339f31a7b24012ece8e171e1f993",
                "deletions": 1,
                "filename": "tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/impl/ShuffleInputEventHandler.java",
                "patch": "@@ -90,7 +90,8 @@ private void processDataMovementEvent(DataMovementEvent dmEvent) {\n         byte[] emptyPartitions = TezUtils.decompressByteStringToByteArray(shufflePayload.getEmptyPartitions());\n         BitSet emptyPartitionsBitSet = TezUtils.fromByteArray(emptyPartitions);\n         if (emptyPartitionsBitSet.get(partitionId)) {\n-          LOG.info(\"Source partition: \" + partitionId + \" did not generate any data. Not fetching.\");\n+          LOG.info(\"Source partition: \" + partitionId + \" did not generate any data. SrcAttempt: [\"\n+              + srcAttemptIdentifier + \"]. Not fetching.\");\n           scheduler.copySucceeded(srcAttemptIdentifier, null, 0, 0, 0, null);\n           return;\n         }",
                "raw_url": "https://github.com/apache/tez/raw/150ebd3c7934339f31a7b24012ece8e171e1f993/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/impl/ShuffleInputEventHandler.java",
                "sha": "e0a416090b60f28e22e2c04124f23b0cc61ed144",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/tez/blob/150ebd3c7934339f31a7b24012ece8e171e1f993/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/impl/ShuffleScheduler.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/impl/ShuffleScheduler.java?ref=150ebd3c7934339f31a7b24012ece8e171e1f993",
                "deletions": 1,
                "filename": "tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/impl/ShuffleScheduler.java",
                "patch": "@@ -203,7 +203,11 @@ public synchronized void copySucceeded(InputAttemptIdentifier srcAttemptIdentifi\n       // input is already finished. duplicate fetch.\n       LOG.warn(\"Duplicate fetch of input no longer needs to be fetched: \" + srcAttemptIdentifier);\n       // free the resource - specially memory\n-      output.abort();\n+      \n+      // If the src does not generate data, output will be null.\n+      if (output != null) {\n+        output.abort();\n+      }\n     }\n     // TODO NEWTEZ Should this be releasing the output, if not committed ? Possible memory leak in case of speculation.\n   }",
                "raw_url": "https://github.com/apache/tez/raw/150ebd3c7934339f31a7b24012ece8e171e1f993/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/impl/ShuffleScheduler.java",
                "sha": "45a50ad8394514d558a2d79eb1e8dce1ef689ea9",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/tez/blob/150ebd3c7934339f31a7b24012ece8e171e1f993/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/shuffle/common/impl/ShuffleInputEventHandlerImpl.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/shuffle/common/impl/ShuffleInputEventHandlerImpl.java?ref=150ebd3c7934339f31a7b24012ece8e171e1f993",
                "deletions": 1,
                "filename": "tez-runtime-library/src/main/java/org/apache/tez/runtime/library/shuffle/common/impl/ShuffleInputEventHandlerImpl.java",
                "patch": "@@ -106,7 +106,8 @@ private void processDataMovementEvent(DataMovementEvent dme) throws IOException\n       if (emptyPartionsBitSet.get(srcIndex)) {\n         InputAttemptIdentifier srcAttemptIdentifier = new InputAttemptIdentifier(dme.getTargetIndex(),\n             dme.getVersion());\n-        LOG.info(\"Source partition: \" + srcIndex + \" did not generate any data. Not fetching.\");\n+        LOG.info(\"Source partition: \" + srcIndex + \" did not generate any data. SrcAttempt: [\"\n+            + srcAttemptIdentifier + \"]. Not fetching.\");\n         shuffleManager.addCompletedInputWithNoData(srcAttemptIdentifier);\n         return;\n       }",
                "raw_url": "https://github.com/apache/tez/raw/150ebd3c7934339f31a7b24012ece8e171e1f993/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/shuffle/common/impl/ShuffleInputEventHandlerImpl.java",
                "sha": "ac5da74ec0686acc2af40fca318eed3bc941cee4",
                "status": "modified"
            }
        ],
        "message": "TEZ-1048. Fix an NPE which can occur when the source task generates no\ndata for a partition, and runs multiple attempts. (sseth)",
        "parent": "https://github.com/apache/tez/commit/a786e41a3c0a164c649ef4922ebbc5a5f3d59201",
        "repo": "tez",
        "unit_tests": [
            "TestShuffleInputEventHandlerImpl.java"
        ]
    },
    "tez_1795ea8": {
        "bug_id": "tez_1795ea8",
        "commit": "https://github.com/apache/tez/commit/1795ea84fc899f5e522680119b1853f559030a14",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/tez/blob/1795ea84fc899f5e522680119b1853f559030a14/tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java?ref=1795ea84fc899f5e522680119b1853f559030a14",
                "deletions": 3,
                "filename": "tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java",
                "patch": "@@ -250,9 +250,6 @@\n               EnumSet.of(VertexState.TERMINATING, VertexState.KILLED, VertexState.FAILED),\n               VertexEventType.V_TASK_COMPLETED,\n               new TaskCompletedTransition())\n-          .addTransition(VertexState.TERMINATING, VertexState.TERMINATING,\n-              VertexEventType.V_TASK_ATTEMPT_COMPLETED,\n-              TASK_ATTEMPT_COMPLETED_EVENT_TRANSITION) // TODO shouldnt be done for KILL_WAIT vertex\n           .addTransition(VertexState.TERMINATING, VertexState.TERMINATING,\n               VertexEventType.V_SOURCE_TASK_ATTEMPT_COMPLETED,\n               SOURCE_TASK_ATTEMPT_COMPLETED_EVENT_TRANSITION)\n@@ -263,6 +260,7 @@\n           // Ignore-able events\n           .addTransition(VertexState.TERMINATING, VertexState.TERMINATING,\n               EnumSet.of(VertexEventType.V_TERMINATE,\n+                  VertexEventType.V_TASK_ATTEMPT_COMPLETED,\n                   VertexEventType.V_TASK_RESCHEDULED))\n \n           // Transitions from SUCCEEDED state\n@@ -301,6 +299,7 @@\n           // Ignore-able events\n           .addTransition(VertexState.KILLED, VertexState.KILLED,\n               EnumSet.of(VertexEventType.V_TERMINATE,\n+                  VertexEventType.V_SOURCE_VERTEX_STARTED,\n                   VertexEventType.V_START,\n                   VertexEventType.V_TASK_RESCHEDULED,\n                   VertexEventType.V_TASK_ATTEMPT_COMPLETED,\n@@ -311,6 +310,8 @@\n               VertexState.ERROR,\n               VertexState.ERROR,\n               EnumSet.of(VertexEventType.V_INIT,\n+                  VertexEventType.V_SOURCE_VERTEX_STARTED,\n+                  VertexEventType.V_START,\n                   VertexEventType.V_TERMINATE,\n                   VertexEventType.V_TASK_COMPLETED,\n                   VertexEventType.V_TASK_ATTEMPT_COMPLETED,",
                "raw_url": "https://github.com/apache/tez/raw/1795ea84fc899f5e522680119b1853f559030a14/tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java",
                "sha": "597acb2aa2545374a181e0df604e9aad1bea06bd",
                "status": "modified"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/tez/blob/1795ea84fc899f5e522680119b1853f559030a14/tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java",
                "changes": 13,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java?ref=1795ea84fc899f5e522680119b1853f559030a14",
                "deletions": 6,
                "filename": "tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java",
                "patch": "@@ -98,13 +98,14 @@ public void run(Map<String, LogicalInput> inputs,\n     OnFileUnorderedKVOutput kvOutput = (OnFileUnorderedKVOutput) lo;\n \n     Configuration updatedConf = mrInput.getConfigUpdates();\n-    String fileName = updatedConf.get(MRJobConfig.MAP_INPUT_FILE);\n-    LOG.info(\"Processing file: \" + fileName);\n     Text srcFile = new Text();\n-    if (fileName == null) {\n-      srcFile.set(\"UNKNOWN_FILENAME_IN_PROCESSOR\");\n-    } else {\n-      srcFile.set(fileName);\n+    srcFile.set(\"UNKNOWN_FILENAME_IN_PROCESSOR\");\n+    if (updatedConf != null) {\n+      String fileName = updatedConf.get(MRJobConfig.MAP_INPUT_FILE);\n+      if (fileName != null) {\n+        LOG.info(\"Processing file: \" + fileName);\n+        srcFile.set(fileName);\n+      }\n     }\n \n     KVReader kvReader = mrInput.getReader();",
                "raw_url": "https://github.com/apache/tez/raw/1795ea84fc899f5e522680119b1853f559030a14/tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java",
                "sha": "6c97430a889c5aab5beb9570b2b8fc6e833348ea",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/1795ea84fc899f5e522680119b1853f559030a14/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java?ref=1795ea84fc899f5e522680119b1853f559030a14",
                "deletions": 1,
                "filename": "tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java",
                "patch": "@@ -209,7 +209,7 @@ public void setNumPhysicalInputs(int numInputs) {\n    * @return the additional fields set by {@link MRInput}\n    */\n   public Configuration getConfigUpdates() {\n-    return new Configuration(incrementalConf);\n+    return incrementalConf;\n   }\n \n   public float getProgress() throws IOException, InterruptedException {",
                "raw_url": "https://github.com/apache/tez/raw/1795ea84fc899f5e522680119b1853f559030a14/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java",
                "sha": "f0aea339ed7f7fe629d2adc4a6c9e08d72d94969",
                "status": "modified"
            }
        ],
        "message": "TEZ-510. Test MRRJobs failing with NPE (bikas)",
        "parent": "https://github.com/apache/tez/commit/38350663c4f367efb46f7cb488cd85607d1dfc24",
        "repo": "tez",
        "unit_tests": [
            "TestMRInput.java"
        ]
    },
    "tez_1885b9e": {
        "bug_id": "tez_1885b9e",
        "commit": "https://github.com/apache/tez/commit/1885b9ed252b7728eb7636a4a1c447a35504b4fa",
        "file": [
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/tez/blob/1885b9ed252b7728eb7636a4a1c447a35504b4fa/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/common/MRInputAMSplitGenerator.java",
                "changes": 18,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/common/MRInputAMSplitGenerator.java?ref=1885b9ed252b7728eb7636a4a1c447a35504b4fa",
                "deletions": 6,
                "filename": "tez-mapreduce/src/main/java/org/apache/tez/mapreduce/common/MRInputAMSplitGenerator.java",
                "patch": "@@ -104,14 +104,16 @@ public MRInputAMSplitGenerator() {\n           String rack = \n               ((org.apache.hadoop.mapreduce.split.TezGroupedSplit) split).getRack();\n           if (rack == null) {\n-            locationHints.add(new TaskLocationHint(new HashSet<String>(Arrays\n-                .asList(split.getLocations())), null));\n+            if (split.getLocations() != null) {\n+              locationHints.add(new TaskLocationHint(new HashSet<String>(Arrays\n+                  .asList(split.getLocations())), null));\n+            } else {\n+              locationHints.add(new TaskLocationHint(null, null));\n+            }\n           } else {\n             locationHints.add(new TaskLocationHint(null, \n                 Collections.singleton(rack)));\n           }\n-          locationHints.add(new TaskLocationHint(new HashSet<String>(Arrays\n-              .asList(split.getLocations())), null));\n         }\n         inputSplitInfo = new InputSplitInfoMem(splitsBuilder.build(),\n             locationHints, splits.length);\n@@ -128,8 +130,12 @@ public MRInputAMSplitGenerator() {\n           String rack = \n               ((org.apache.hadoop.mapred.split.TezGroupedSplit) split).getRack();\n           if (rack == null) {\n-            locationHints.add(new TaskLocationHint(new HashSet<String>(Arrays\n-                .asList(split.getLocations())), null));\n+            if (split.getLocations() != null) {\n+              locationHints.add(new TaskLocationHint(new HashSet<String>(Arrays\n+                  .asList(split.getLocations())), null));\n+            } else {\n+              locationHints.add(new TaskLocationHint(null, null));\n+            }\n           } else {\n             locationHints.add(new TaskLocationHint(null, \n                 Collections.singleton(rack)));",
                "raw_url": "https://github.com/apache/tez/raw/1885b9ed252b7728eb7636a4a1c447a35504b4fa/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/common/MRInputAMSplitGenerator.java",
                "sha": "da9ce556dbee68022d9647c951423ad778728466",
                "status": "modified"
            }
        ],
        "message": "TEZ-629. NPE in MRAMSplitGenerator (bikas)",
        "parent": "https://github.com/apache/tez/commit/f9c9c0c9c49ab973cea7920c26c494e23b788c3a",
        "repo": "tez",
        "unit_tests": [
            "TestMRInputAMSplitGenerator.java"
        ]
    },
    "tez_2debbca": {
        "bug_id": "tez_2debbca",
        "commit": "https://github.com/apache/tez/commit/2debbca5921daa8fd4a9080e8390c0c086914d62",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/tez/blob/2debbca5921daa8fd4a9080e8390c0c086914d62/tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java",
                "changes": 11,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java?ref=2debbca5921daa8fd4a9080e8390c0c086914d62",
                "deletions": 6,
                "filename": "tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java",
                "patch": "@@ -250,19 +250,15 @@\n               EnumSet.of(VertexState.TERMINATING, VertexState.KILLED, VertexState.FAILED),\n               VertexEventType.V_TASK_COMPLETED,\n               new TaskCompletedTransition())\n-          .addTransition(VertexState.TERMINATING, VertexState.TERMINATING,\n-              VertexEventType.V_TASK_ATTEMPT_COMPLETED,\n-              TASK_ATTEMPT_COMPLETED_EVENT_TRANSITION) // TODO shouldnt be done for KILL_WAIT vertex\n-          .addTransition(VertexState.TERMINATING, VertexState.TERMINATING,\n-              VertexEventType.V_SOURCE_TASK_ATTEMPT_COMPLETED,\n-              SOURCE_TASK_ATTEMPT_COMPLETED_EVENT_TRANSITION)\n           .addTransition(\n               VertexState.TERMINATING,\n               VertexState.ERROR, VertexEventType.V_INTERNAL_ERROR,\n               INTERNAL_ERROR_TRANSITION)\n           // Ignore-able events\n           .addTransition(VertexState.TERMINATING, VertexState.TERMINATING,\n               EnumSet.of(VertexEventType.V_TERMINATE,\n+                  VertexEventType.V_SOURCE_TASK_ATTEMPT_COMPLETED,\n+                  VertexEventType.V_TASK_ATTEMPT_COMPLETED,\n                   VertexEventType.V_TASK_RESCHEDULED))\n \n           // Transitions from SUCCEEDED state\n@@ -301,6 +297,7 @@\n           // Ignore-able events\n           .addTransition(VertexState.KILLED, VertexState.KILLED,\n               EnumSet.of(VertexEventType.V_TERMINATE,\n+                  VertexEventType.V_SOURCE_VERTEX_STARTED,\n                   VertexEventType.V_START,\n                   VertexEventType.V_TASK_RESCHEDULED,\n                   VertexEventType.V_TASK_ATTEMPT_COMPLETED,\n@@ -311,6 +308,8 @@\n               VertexState.ERROR,\n               VertexState.ERROR,\n               EnumSet.of(VertexEventType.V_INIT,\n+                  VertexEventType.V_SOURCE_VERTEX_STARTED,\n+                  VertexEventType.V_START,\n                   VertexEventType.V_TERMINATE,\n                   VertexEventType.V_TASK_COMPLETED,\n                   VertexEventType.V_TASK_ATTEMPT_COMPLETED,",
                "raw_url": "https://github.com/apache/tez/raw/2debbca5921daa8fd4a9080e8390c0c086914d62/tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java",
                "sha": "99dbb872f633b1545ebc2af2d52931d1c19bcc15",
                "status": "modified"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/tez/blob/2debbca5921daa8fd4a9080e8390c0c086914d62/tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java",
                "changes": 13,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java?ref=2debbca5921daa8fd4a9080e8390c0c086914d62",
                "deletions": 6,
                "filename": "tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java",
                "patch": "@@ -98,13 +98,14 @@ public void run(Map<String, LogicalInput> inputs,\n     OnFileUnorderedKVOutput kvOutput = (OnFileUnorderedKVOutput) lo;\n \n     Configuration updatedConf = mrInput.getConfigUpdates();\n-    String fileName = updatedConf.get(MRJobConfig.MAP_INPUT_FILE);\n-    LOG.info(\"Processing file: \" + fileName);\n     Text srcFile = new Text();\n-    if (fileName == null) {\n-      srcFile.set(\"UNKNOWN_FILENAME_IN_PROCESSOR\");\n-    } else {\n-      srcFile.set(fileName);\n+    srcFile.set(\"UNKNOWN_FILENAME_IN_PROCESSOR\");\n+    if (updatedConf != null) {\n+      String fileName = updatedConf.get(MRJobConfig.MAP_INPUT_FILE);\n+      if (fileName != null) {\n+        LOG.info(\"Processing file: \" + fileName);\n+        srcFile.set(fileName);\n+      }\n     }\n \n     KVReader kvReader = mrInput.getReader();",
                "raw_url": "https://github.com/apache/tez/raw/2debbca5921daa8fd4a9080e8390c0c086914d62/tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java",
                "sha": "6c97430a889c5aab5beb9570b2b8fc6e833348ea",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/tez/blob/2debbca5921daa8fd4a9080e8390c0c086914d62/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java?ref=2debbca5921daa8fd4a9080e8390c0c086914d62",
                "deletions": 1,
                "filename": "tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java",
                "patch": "@@ -209,7 +209,10 @@ public void setNumPhysicalInputs(int numInputs) {\n    * @return the additional fields set by {@link MRInput}\n    */\n   public Configuration getConfigUpdates() {\n-    return new Configuration(incrementalConf);\n+    if (incrementalConf != null) {\n+      return new Configuration(incrementalConf);\n+    }\n+    return null;\n   }\n \n   public float getProgress() throws IOException, InterruptedException {",
                "raw_url": "https://github.com/apache/tez/raw/2debbca5921daa8fd4a9080e8390c0c086914d62/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java",
                "sha": "ed675a44ae397a5f552fd485391746410fc3b16d",
                "status": "modified"
            }
        ],
        "message": "Addendum TEZ-510. Test MRRJobs failing with NPE (bikas)",
        "parent": "https://github.com/apache/tez/commit/968e31f96e41ce4c4e7717c6264e70e627f99837",
        "repo": "tez",
        "unit_tests": [
            "TestMRInput.java"
        ]
    },
    "tez_3d795d6": {
        "bug_id": "tez_3d795d6",
        "commit": "https://github.com/apache/tez/commit/3d795d62c0d471ff866adb9002e8c6fe6ea9536a",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/TEZ-2003-CHANGES.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/TEZ-2003-CHANGES.txt?ref=3d795d62c0d471ff866adb9002e8c6fe6ea9536a",
                "deletions": 0,
                "filename": "TEZ-2003-CHANGES.txt",
                "patch": "@@ -25,5 +25,6 @@ ALL CHANGES:\n   TEZ-2433. Fixes after rebase 05/08\n   TEZ-2438. tez-tools version in the branch is incorrect.\n   TEZ-2434. Allow tasks to be killed in the Runtime.\n+  TEZ-2443. TaskRunner2 should call abort, NPEs while cleaning up tasks.\n \n INCOMPATIBLE CHANGES:",
                "raw_url": "https://github.com/apache/tez/raw/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/TEZ-2003-CHANGES.txt",
                "sha": "ed72d6befbb86a796bdefd7fabdf49e40d2eaa11",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/tez/blob/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-dag/src/main/java/org/apache/tez/dag/api/TaskCommunicator.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-dag/src/main/java/org/apache/tez/dag/api/TaskCommunicator.java?ref=3d795d62c0d471ff866adb9002e8c6fe6ea9536a",
                "deletions": 0,
                "filename": "tez-dag/src/main/java/org/apache/tez/dag/api/TaskCommunicator.java",
                "patch": "@@ -48,6 +48,10 @@ public abstract void registerRunningTaskAttempt(ContainerId containerId, TaskSpe\n   // TODO TEZ-2003. Are additional APIs required to mark a container as completed ? - for completeness.\n \n   // TODO TEZ-2003 Remove reference to TaskAttemptID\n+  // TODO TEZ-2003 This needs some information about why the attempt is being unregistered.\n+  // e.g. preempted in which case the task may need to be informed. Alternately as a result of\n+  // a failed task.\n+  // In case of preemption - a killTask API is likely a better bet than trying to overload this method.\n   public abstract void unregisterRunningTaskAttempt(TezTaskAttemptID taskAttemptID);\n \n   // TODO TEZ-2003 This doesn't necessarily belong here. A server may not start within the AM.",
                "raw_url": "https://github.com/apache/tez/raw/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-dag/src/main/java/org/apache/tez/dag/api/TaskCommunicator.java",
                "sha": "2651013cd9008b0ac18f311c43f3ed8cd81a6bbb",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/tez/blob/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-runtime-internals/src/main/java/org/apache/tez/runtime/LogicalIOProcessorRuntimeTask.java",
                "changes": 11,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-internals/src/main/java/org/apache/tez/runtime/LogicalIOProcessorRuntimeTask.java?ref=3d795d62c0d471ff866adb9002e8c6fe6ea9536a",
                "deletions": 5,
                "filename": "tez-runtime-internals/src/main/java/org/apache/tez/runtime/LogicalIOProcessorRuntimeTask.java",
                "patch": "@@ -704,7 +704,7 @@ public synchronized void handleEvents(Collection<TezEvent> events) {\n   }\n \n   @Override\n-  public synchronized void abortTask() throws Exception {\n+  public synchronized void abortTask() {\n     if (processor != null) {\n       processor.abort();\n     }\n@@ -803,6 +803,7 @@ public void cleanup() throws InterruptedException {\n       LOG.debug(\"Num of inputs to be closed={}\", initializedInputs.size());\n       LOG.debug(\"Num of outputs to be closed={}\", initializedOutputs.size());\n     }\n+\n     // Close processor\n     if (!processorClosed && processor != null) {\n       try {\n@@ -820,8 +821,8 @@ public void cleanup() throws InterruptedException {\n         Thread.currentThread().interrupt();\n       } catch (Throwable e) {\n         LOG.warn(\n-            \"Ignoring Exception when closing processor(cleanup). Exception class={}, message={}\",\n-                e.getClass().getName(), e.getMessage());\n+            \"Ignoring Exception when closing processor(cleanup). Exception class={}, message={}\" +\n+                e.getClass().getName(), e.getMessage(), e);\n       }\n     }\n \n@@ -842,7 +843,7 @@ public void cleanup() throws InterruptedException {\n       } catch (Throwable e) {\n         LOG.warn(\n             \"Ignoring exception when closing input {}(cleanup). Exception class={}, message={}\",\n-            srcVertexName, e.getClass().getName(), e.getMessage());\n+            srcVertexName, e.getClass().getName(), e.getMessage(), e);\n       } finally {\n         LOG.info(\"Close input for vertex={}, sourceVertex={}, interruptedStatus={}\", processor\n             .getContext().getTaskVertexName(), srcVertexName, Thread.currentThread().isInterrupted());\n@@ -866,7 +867,7 @@ public void cleanup() throws InterruptedException {\n       } catch (Throwable e) {\n         LOG.warn(\n             \"Ignoring exception when closing output {}(cleanup). Exception class={}, message={}\",\n-            destVertexName, e.getClass().getName(), e.getMessage());\n+            destVertexName, e.getClass().getName(), e.getMessage(), e);\n       } finally {\n         LOG.info(\"Close input for vertex={}, sourceVertex={}, interruptedStatus={}\", processor\n             .getContext().getTaskVertexName(), destVertexName, Thread.currentThread().isInterrupted());",
                "raw_url": "https://github.com/apache/tez/raw/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-runtime-internals/src/main/java/org/apache/tez/runtime/LogicalIOProcessorRuntimeTask.java",
                "sha": "de08e56ac4329f930d855fdc2d88e59ff0f40cec",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-runtime-internals/src/main/java/org/apache/tez/runtime/RuntimeTask.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-internals/src/main/java/org/apache/tez/runtime/RuntimeTask.java?ref=3d795d62c0d471ff866adb9002e8c6fe6ea9536a",
                "deletions": 1,
                "filename": "tez-runtime-internals/src/main/java/org/apache/tez/runtime/RuntimeTask.java",
                "patch": "@@ -167,5 +167,5 @@ protected void setTaskDone() {\n     taskDone.set(true);\n   }\n \n-  public abstract void abortTask() throws Exception;\n+  public abstract void abortTask();\n }",
                "raw_url": "https://github.com/apache/tez/raw/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-runtime-internals/src/main/java/org/apache/tez/runtime/RuntimeTask.java",
                "sha": "33c0113f1537ce81579d920b000bf70931da8f0a",
                "status": "modified"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/tez/blob/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TaskRunner2Callable.java",
                "changes": 13,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TaskRunner2Callable.java?ref=3d795d62c0d471ff866adb9002e8c6fe6ea9536a",
                "deletions": 6,
                "filename": "tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TaskRunner2Callable.java",
                "patch": "@@ -63,26 +63,26 @@ public TaskRunner2CallableResult run() throws Exception {\n           if (stopRequested.get() || Thread.currentThread().isInterrupted()) {\n             return new TaskRunner2CallableResult(null);\n           }\n-          LOG.info(\"Initializing task\" + \", taskAttemptId=\" + task.getTaskAttemptID());\n+          LOG.info(\"Initializing task\" + \", taskAttemptId={}\", task.getTaskAttemptID());\n           task.initialize();\n \n           if (!stopRequested.get() && !Thread.currentThread().isInterrupted()) {\n-            LOG.info(\"Running task, taskAttemptId=\" + task.getTaskAttemptID());\n+            LOG.info(\"Running task, taskAttemptId={}\", task.getTaskAttemptID());\n             task.run();\n           } else {\n-            LOG.info(\"Stopped before running the processor.\");\n+            LOG.info(\"Stopped before running the processor taskAttemptId={}\", task.getTaskAttemptID());\n             return new TaskRunner2CallableResult(null);\n           }\n \n           if (!stopRequested.get() && !Thread.currentThread().isInterrupted()) {\n-            LOG.info(\"Closing task, taskAttemptId=\" + task.getTaskAttemptID());\n+            LOG.info(\"Closing task, taskAttemptId={}\", task.getTaskAttemptID());\n             task.close();\n             task.setFrameworkCounters();\n           } else {\n-            LOG.info(\"Stopped before closing the processor\");\n+            LOG.info(\"Stopped before closing the processor, taskAttemptId={}\", task.getTaskAttemptID());\n             return new TaskRunner2CallableResult(null);\n           }\n-          LOG.info(\"Task completed, taskAttemptId=\" + task.getTaskAttemptID() + \", askedToStop=\" + stopRequested.get());\n+          LOG.info(\"Task completed, taskAttemptId={}, askedToStop={}\", task.getTaskAttemptID(), stopRequested.get());\n \n \n           return new TaskRunner2CallableResult(null);\n@@ -115,6 +115,7 @@ private void maybeFixInterruptStatus() {\n   public void interruptTask() {\n     // Ensure the task is only interrupted once.\n     if (!stopRequested.getAndSet(true)) {\n+      task.abortTask();\n       if (ownThread != null) {\n         ownThread.interrupt();\n       }",
                "raw_url": "https://github.com/apache/tez/raw/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TaskRunner2Callable.java",
                "sha": "ab77635203f03cc3843a03a4a2304e3318389519",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/tez/blob/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TezTaskRunner2.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TezTaskRunner2.java?ref=3d795d62c0d471ff866adb9002e8c6fe6ea9536a",
                "deletions": 4,
                "filename": "tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TezTaskRunner2.java",
                "patch": "@@ -250,10 +250,12 @@ public TaskRunner2Result run() {\n   public void killTask() {\n     synchronized (this) {\n       if (isRunningState()) {\n-        trySettingEndReason(EndReason.KILL_REQUESTED);\n-        if (taskRunnerCallable != null) {\n-          taskKillStartTime = System.currentTimeMillis();\n-          taskRunnerCallable.interruptTask();\n+        if (trySettingEndReason(EndReason.KILL_REQUESTED)) {\n+          killTaskRequested.set(true);\n+          if (taskRunnerCallable != null) {\n+            taskKillStartTime = System.currentTimeMillis();\n+            taskRunnerCallable.interruptTask();\n+          }\n         }\n       }\n     }",
                "raw_url": "https://github.com/apache/tez/raw/3d795d62c0d471ff866adb9002e8c6fe6ea9536a/tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TezTaskRunner2.java",
                "sha": "ffbc6e890801cffdeacc29b792ef9121e44d2831",
                "status": "modified"
            }
        ],
        "message": "TEZ-2443. TaskRunner2 should call abort, NPEs while cleaning up tasks. (sseth)",
        "parent": "https://github.com/apache/tez/commit/7cf416ae8cb19757e42530d42a7ccc3532d2f927",
        "repo": "tez",
        "unit_tests": [
            "TestTezTaskRunner2.java"
        ]
    },
    "tez_5ef639b": {
        "bug_id": "tez_5ef639b",
        "commit": "https://github.com/apache/tez/commit/5ef639b1e97c3e8628c20ab826a399857fa6c276",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/5ef639b1e97c3e8628c20ab826a399857fa6c276/tez-mapreduce-examples/src/main/java/org/apache/tez/mapreduce/examples/OrderedWordCount.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce-examples/src/main/java/org/apache/tez/mapreduce/examples/OrderedWordCount.java?ref=5ef639b1e97c3e8628c20ab826a399857fa6c276",
                "deletions": 1,
                "filename": "tez-mapreduce-examples/src/main/java/org/apache/tez/mapreduce/examples/OrderedWordCount.java",
                "patch": "@@ -386,7 +386,7 @@ public static void main(String[] args) throws Exception {\n             + \", outputPath=\" + outputPath);\n \n         Map<String, LocalResource> localResources =\n-          Collections.emptyMap();\n+          new TreeMap<String, LocalResource>();\n         DAG dag = createDAG(fs, conf, localResources,\n             stagingDir, dagIndex, inputPath, outputPath,\n             generateSplitsInClient);",
                "raw_url": "https://github.com/apache/tez/raw/5ef639b1e97c3e8628c20ab826a399857fa6c276/tez-mapreduce-examples/src/main/java/org/apache/tez/mapreduce/examples/OrderedWordCount.java",
                "sha": "07a80d6cc5c128994ab7a6fb2a30d7a8bfd5936f",
                "status": "modified"
            }
        ],
        "message": "TEZ-616. Addendum patch for OrderedWordCount with -generateSplitsInClient true throws NPE. (hitesh)",
        "parent": "https://github.com/apache/tez/commit/40dfb77c9742561a2554c20343381114081575e4",
        "repo": "tez",
        "unit_tests": [
            "TestOrderedWordCount.java"
        ]
    },
    "tez_6176432": {
        "bug_id": "tez_6176432",
        "commit": "https://github.com/apache/tez/commit/61764323798385ec8d8103db2d4dcc24c2ebd1ae",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/61764323798385ec8d8103db2d4dcc24c2ebd1ae/CHANGES.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/CHANGES.txt?ref=61764323798385ec8d8103db2d4dcc24c2ebd1ae",
                "deletions": 0,
                "filename": "CHANGES.txt",
                "patch": "@@ -266,6 +266,7 @@ TEZ-UI CHANGES (TEZ-8):\n Release 0.5.4: Unreleased\n \n ALL CHANGES:\n+  TEZ-2257. Fix potential NPEs in TaskReporter.\n   TEZ-2192. Relocalization does not check for source.\n   TEZ-2224. EventQueue empty doesn't mean events are consumed in RecoveryService\n   TEZ-2240. Fix toUpperCase/toLowerCase to use Locale.ENGLISH.",
                "raw_url": "https://github.com/apache/tez/raw/61764323798385ec8d8103db2d4dcc24c2ebd1ae/CHANGES.txt",
                "sha": "dc28971462553026e26c583b1cd4c3f4ab4a9c28",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/tez/blob/61764323798385ec8d8103db2d4dcc24c2ebd1ae/tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TaskReporter.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TaskReporter.java?ref=61764323798385ec8d8103db2d4dcc24c2ebd1ae",
                "deletions": 3,
                "filename": "tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TaskReporter.java",
                "patch": "@@ -374,16 +374,16 @@ public void onFailure(Throwable t) {\n     }\n   }\n \n-  public boolean taskSucceeded(TezTaskAttemptID taskAttemptID) throws IOException, TezException {\n+  public synchronized boolean taskSucceeded(TezTaskAttemptID taskAttemptID) throws IOException, TezException {\n     return currentCallable.taskSucceeded(taskAttemptID);\n   }\n \n-  public boolean taskFailed(TezTaskAttemptID taskAttemptID, Throwable t, String diagnostics,\n+  public synchronized boolean taskFailed(TezTaskAttemptID taskAttemptID, Throwable t, String diagnostics,\n       EventMetaData srcMeta) throws IOException, TezException {\n     return currentCallable.taskFailed(taskAttemptID, t, diagnostics, srcMeta);\n   }\n \n-  public void addEvents(TezTaskAttemptID taskAttemptID, Collection<TezEvent> events) {\n+  public synchronized void addEvents(TezTaskAttemptID taskAttemptID, Collection<TezEvent> events) {\n     currentCallable.addEvents(taskAttemptID, events);\n   }\n ",
                "raw_url": "https://github.com/apache/tez/raw/61764323798385ec8d8103db2d4dcc24c2ebd1ae/tez-runtime-internals/src/main/java/org/apache/tez/runtime/task/TaskReporter.java",
                "sha": "4c07f5a46a52c4ee50070b45c611e0a863260a42",
                "status": "modified"
            }
        ],
        "message": "TEZ-2257. Fix potential NPEs in TaskReporter. (sseth)",
        "parent": "https://github.com/apache/tez/commit/9316fe627a9153a5caf8c653e97300c7b4bb8095",
        "repo": "tez",
        "unit_tests": [
            "TestTaskReporter.java"
        ]
    },
    "tez_727431f": {
        "bug_id": "tez_727431f",
        "commit": "https://github.com/apache/tez/commit/727431fe7b0051bcd1b2f3856fa95ef4192daa43",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/tez/blob/727431fe7b0051bcd1b2f3856fa95ef4192daa43/tez-mapreduce-examples/src/main/java/org/apache/tez/mapreduce/examples/OrderedWordCount.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce-examples/src/main/java/org/apache/tez/mapreduce/examples/OrderedWordCount.java?ref=727431fe7b0051bcd1b2f3856fa95ef4192daa43",
                "deletions": 2,
                "filename": "tez-mapreduce-examples/src/main/java/org/apache/tez/mapreduce/examples/OrderedWordCount.java",
                "patch": "@@ -20,12 +20,14 @@\n \n import java.io.IOException;\n import java.util.ArrayList;\n+import java.util.Collections;\n import java.util.EnumSet;\n import java.util.HashMap;\n import java.util.List;\n import java.util.Map;\n import java.util.Set;\n import java.util.StringTokenizer;\n+import java.util.TreeMap;\n \n import org.apache.commons.cli.ParseException;\n import org.apache.commons.logging.Log;\n@@ -383,8 +385,11 @@ public static void main(String[] args) throws Exception {\n             + \", inputPath=\" + inputPath\n             + \", outputPath=\" + outputPath);\n \n-        DAG dag = createDAG(fs, conf, null, stagingDir,\n-            dagIndex, inputPath, outputPath, generateSplitsInClient);\n+        Map<String, LocalResource> localResources =\n+          Collections.emptyMap();\n+        DAG dag = createDAG(fs, conf, localResources,\n+            stagingDir, dagIndex, inputPath, outputPath,\n+            generateSplitsInClient);\n \n         if (useTezSession) {\n           LOG.info(\"Waiting for TezSession to get into ready state\");",
                "raw_url": "https://github.com/apache/tez/raw/727431fe7b0051bcd1b2f3856fa95ef4192daa43/tez-mapreduce-examples/src/main/java/org/apache/tez/mapreduce/examples/OrderedWordCount.java",
                "sha": "190678f839815b1e93ccc0c3da65811cf84f1ecc",
                "status": "modified"
            }
        ],
        "message": "TEZ-616. OrderedWordCount with -generateSplitsInClient true throws NPE. (hitesh)",
        "parent": "https://github.com/apache/tez/commit/8a3dcf4763ad1eaefd0b6d08685a3ade91977324",
        "repo": "tez",
        "unit_tests": [
            "TestOrderedWordCount.java"
        ]
    },
    "tez_7b2a0e6": {
        "bug_id": "tez_7b2a0e6",
        "commit": "https://github.com/apache/tez/commit/7b2a0e6f3427182e0c7d55f3da1c369500770ab0",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/tez/blob/7b2a0e6f3427182e0c7d55f3da1c369500770ab0/tez-api/src/main/java/org/apache/tez/client/TezClientUtils.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-api/src/main/java/org/apache/tez/client/TezClientUtils.java?ref=7b2a0e6f3427182e0c7d55f3da1c369500770ab0",
                "deletions": 1,
                "filename": "tez-api/src/main/java/org/apache/tez/client/TezClientUtils.java",
                "patch": "@@ -373,7 +373,9 @@ static ApplicationSubmissionContext createApplicationSubmissionContext(\n         if (v.getTaskLocalResources() == null) {\n           v.setTaskLocalResources(new TreeMap<String, LocalResource>());\n         }\n-        v.getTaskLocalResources().putAll(tezJarResources);\n+        if (tezJarResources != null) {\n+          v.getTaskLocalResources().putAll(tezJarResources);\n+        }\n         v.getTaskLocalResources().put(TezConfiguration.TEZ_PB_BINARY_CONF_NAME,\n             binaryConfLRsrc);\n ",
                "raw_url": "https://github.com/apache/tez/raw/7b2a0e6f3427182e0c7d55f3da1c369500770ab0/tez-api/src/main/java/org/apache/tez/client/TezClientUtils.java",
                "sha": "c415f8ae49dc22cdc3371e1604e0c0d5e081362b",
                "status": "modified"
            }
        ],
        "message": "TEZ-616. Addendum patch for OrderedWordCount with -generateSplitsInClient true throws NPE. (hitesh)",
        "parent": "https://github.com/apache/tez/commit/6ccebe747217adcef05a7137eb8844c11e8ae18c",
        "repo": "tez",
        "unit_tests": [
            "TestTezClientUtils.java"
        ]
    },
    "tez_8a3dcf4": {
        "bug_id": "tez_8a3dcf4",
        "commit": "https://github.com/apache/tez/commit/8a3dcf4763ad1eaefd0b6d08685a3ade91977324",
        "file": [
            {
                "additions": 10,
                "blob_url": "https://github.com/apache/tez/blob/8a3dcf4763ad1eaefd0b6d08685a3ade91977324/tez-api/src/main/java/org/apache/tez/client/TezClientUtils.java",
                "changes": 13,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-api/src/main/java/org/apache/tez/client/TezClientUtils.java?ref=8a3dcf4763ad1eaefd0b6d08685a3ade91977324",
                "deletions": 3,
                "filename": "tez-api/src/main/java/org/apache/tez/client/TezClientUtils.java",
                "patch": "@@ -364,9 +364,16 @@ static ApplicationSubmissionContext createApplicationSubmissionContext(\n     if(dag != null) {\n \n       for (Vertex v : dag.getVertices()) {\n+        if (v.getTaskLocalResources() == null) {\n+          v.setTaskLocalResources(new TreeMap<String, LocalResource>());\n+        }\n         v.getTaskLocalResources().putAll(tezJarResources);\n         v.getTaskLocalResources().put(TezConfiguration.TEZ_PB_BINARY_CONF_NAME,\n             binaryConfLRsrc);\n+\n+        if (v.getTaskEnvironment() == null) {\n+          v.setTaskEnvironment(new TreeMap<String, String>());\n+        }\n         Map<String, String> taskEnv = v.getTaskEnvironment();\n         for (Map.Entry<String, String> entry : environment.entrySet()) {\n           String key = entry.getKey();\n@@ -399,9 +406,9 @@ static ApplicationSubmissionContext createApplicationSubmissionContext(\n       }\n \n       localResources.put(TezConfiguration.TEZ_PB_PLAN_BINARY_NAME,\n-          TezClientUtils.createLocalResource(fs,\n-              binaryPath, LocalResourceType.FILE,\n-              LocalResourceVisibility.APPLICATION));\n+        TezClientUtils.createLocalResource(fs,\n+          binaryPath, LocalResourceType.FILE,\n+          LocalResourceVisibility.APPLICATION));\n \n       if (Level.DEBUG.isGreaterOrEqual(Level.toLevel(amLogLevel))) {\n         Path textPath = localizeDagPlanAsText(dagPB, fs,",
                "raw_url": "https://github.com/apache/tez/raw/8a3dcf4763ad1eaefd0b6d08685a3ade91977324/tez-api/src/main/java/org/apache/tez/client/TezClientUtils.java",
                "sha": "042ff91885e232ddf6a15a2ee127a020b0c46823",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/8a3dcf4763ad1eaefd0b6d08685a3ade91977324/tez-dag/src/main/java/org/apache/tez/dag/app/rm/TaskScheduler.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-dag/src/main/java/org/apache/tez/dag/app/rm/TaskScheduler.java?ref=8a3dcf4763ad1eaefd0b6d08685a3ade91977324",
                "deletions": 1,
                "filename": "tez-dag/src/main/java/org/apache/tez/dag/app/rm/TaskScheduler.java",
                "patch": "@@ -670,7 +670,7 @@ public void onContainersAllocated(List<Container> containers) {\n             boolean safeToRelease = true;\n             Priority topPendingPriority = amRmClient.getTopPriority();\n             Priority containerPriority = heldContainer.container.getPriority();\n-            if (topPendingPriority != null && \n+            if (isNew && topPendingPriority != null &&\n                 containerPriority.compareTo(topPendingPriority) < 0) {\n               // this container is of lower priority and given to us by the RM for\n               // a task that will be matched after the current top priority. Keep ",
                "raw_url": "https://github.com/apache/tez/raw/8a3dcf4763ad1eaefd0b6d08685a3ade91977324/tez-dag/src/main/java/org/apache/tez/dag/app/rm/TaskScheduler.java",
                "sha": "6eedb15adab8267cc86ce5fd8cb42609a6ce8e0a",
                "status": "modified"
            }
        ],
        "message": "TEZ-615. OrderedWordCount with -DUSE_TEZ_SESSION=false throws NPE. (hitesh)",
        "parent": "https://github.com/apache/tez/commit/d4bb730eaa4b8b793b2c7f8b08e1faa50ed566e8",
        "repo": "tez",
        "unit_tests": [
            "TestTaskScheduler.java"
        ]
    },
    "tez_968e31f": {
        "bug_id": "tez_968e31f",
        "commit": "https://github.com/apache/tez/commit/968e31f96e41ce4c4e7717c6264e70e627f99837",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/tez/blob/968e31f96e41ce4c4e7717c6264e70e627f99837/tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java?ref=968e31f96e41ce4c4e7717c6264e70e627f99837",
                "deletions": 4,
                "filename": "tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java",
                "patch": "@@ -250,6 +250,9 @@\n               EnumSet.of(VertexState.TERMINATING, VertexState.KILLED, VertexState.FAILED),\n               VertexEventType.V_TASK_COMPLETED,\n               new TaskCompletedTransition())\n+          .addTransition(VertexState.TERMINATING, VertexState.TERMINATING,\n+              VertexEventType.V_TASK_ATTEMPT_COMPLETED,\n+              TASK_ATTEMPT_COMPLETED_EVENT_TRANSITION) // TODO shouldnt be done for KILL_WAIT vertex\n           .addTransition(VertexState.TERMINATING, VertexState.TERMINATING,\n               VertexEventType.V_SOURCE_TASK_ATTEMPT_COMPLETED,\n               SOURCE_TASK_ATTEMPT_COMPLETED_EVENT_TRANSITION)\n@@ -260,7 +263,6 @@\n           // Ignore-able events\n           .addTransition(VertexState.TERMINATING, VertexState.TERMINATING,\n               EnumSet.of(VertexEventType.V_TERMINATE,\n-                  VertexEventType.V_TASK_ATTEMPT_COMPLETED,\n                   VertexEventType.V_TASK_RESCHEDULED))\n \n           // Transitions from SUCCEEDED state\n@@ -299,7 +301,6 @@\n           // Ignore-able events\n           .addTransition(VertexState.KILLED, VertexState.KILLED,\n               EnumSet.of(VertexEventType.V_TERMINATE,\n-                  VertexEventType.V_SOURCE_VERTEX_STARTED,\n                   VertexEventType.V_START,\n                   VertexEventType.V_TASK_RESCHEDULED,\n                   VertexEventType.V_TASK_ATTEMPT_COMPLETED,\n@@ -310,8 +311,6 @@\n               VertexState.ERROR,\n               VertexState.ERROR,\n               EnumSet.of(VertexEventType.V_INIT,\n-                  VertexEventType.V_SOURCE_VERTEX_STARTED,\n-                  VertexEventType.V_START,\n                   VertexEventType.V_TERMINATE,\n                   VertexEventType.V_TASK_COMPLETED,\n                   VertexEventType.V_TASK_ATTEMPT_COMPLETED,",
                "raw_url": "https://github.com/apache/tez/raw/968e31f96e41ce4c4e7717c6264e70e627f99837/tez-dag/src/main/java/org/apache/tez/dag/app/dag/impl/VertexImpl.java",
                "sha": "67523284ecd9677245093934878a0ae22b114cae",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/tez/blob/968e31f96e41ce4c4e7717c6264e70e627f99837/tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java",
                "changes": 13,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java?ref=968e31f96e41ce4c4e7717c6264e70e627f99837",
                "deletions": 7,
                "filename": "tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java",
                "patch": "@@ -98,14 +98,13 @@ public void run(Map<String, LogicalInput> inputs,\n     OnFileUnorderedKVOutput kvOutput = (OnFileUnorderedKVOutput) lo;\n \n     Configuration updatedConf = mrInput.getConfigUpdates();\n+    String fileName = updatedConf.get(MRJobConfig.MAP_INPUT_FILE);\n+    LOG.info(\"Processing file: \" + fileName);\n     Text srcFile = new Text();\n-    srcFile.set(\"UNKNOWN_FILENAME_IN_PROCESSOR\");\n-    if (updatedConf != null) {\n-      String fileName = updatedConf.get(MRJobConfig.MAP_INPUT_FILE);\n-      if (fileName != null) {\n-        LOG.info(\"Processing file: \" + fileName);\n-        srcFile.set(fileName);\n-      }\n+    if (fileName == null) {\n+      srcFile.set(\"UNKNOWN_FILENAME_IN_PROCESSOR\");\n+    } else {\n+      srcFile.set(fileName);\n     }\n \n     KVReader kvReader = mrInput.getReader();",
                "raw_url": "https://github.com/apache/tez/raw/968e31f96e41ce4c4e7717c6264e70e627f99837/tez-mapreduce-examples/src/main/java/org/apache/tez/processor/FilterByWordInputProcessor.java",
                "sha": "e8e315a536113b35b3ca2b2e337ee19ef206ba37",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/968e31f96e41ce4c4e7717c6264e70e627f99837/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java?ref=968e31f96e41ce4c4e7717c6264e70e627f99837",
                "deletions": 1,
                "filename": "tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java",
                "patch": "@@ -209,7 +209,7 @@ public void setNumPhysicalInputs(int numInputs) {\n    * @return the additional fields set by {@link MRInput}\n    */\n   public Configuration getConfigUpdates() {\n-    return incrementalConf;\n+    return new Configuration(incrementalConf);\n   }\n \n   public float getProgress() throws IOException, InterruptedException {",
                "raw_url": "https://github.com/apache/tez/raw/968e31f96e41ce4c4e7717c6264e70e627f99837/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/input/MRInput.java",
                "sha": "b9f22421a40857c4f1117cefe25bcf8e7f57b725",
                "status": "modified"
            }
        ],
        "message": "Revert \"TEZ-510. Test MRRJobs failing with NPE (bikas)\"\n\nThis reverts commit 1795ea84fc899f5e522680119b1853f559030a14.",
        "parent": "https://github.com/apache/tez/commit/1795ea84fc899f5e522680119b1853f559030a14",
        "repo": "tez",
        "unit_tests": [
            "TestMRInput.java"
        ]
    },
    "tez_971e095": {
        "bug_id": "tez_971e095",
        "commit": "https://github.com/apache/tez/commit/971e0957a1302e20fe241b4aeac278dc87111257",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/971e0957a1302e20fe241b4aeac278dc87111257/TEZ-2003-CHANGES.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/TEZ-2003-CHANGES.txt?ref=971e0957a1302e20fe241b4aeac278dc87111257",
                "deletions": 0,
                "filename": "TEZ-2003-CHANGES.txt",
                "patch": "@@ -27,5 +27,6 @@ ALL CHANGES:\n   TEZ-2434. Allow tasks to be killed in the Runtime.\n   TEZ-2443. TaskRunner2 should call abort, NPEs while cleaning up tasks.\n   TEZ-2465. Retrun the status of a kill request in TaskRunner2.\n+  TEZ-2471. NPE in LogicalIOProcessorRuntimeTask while printing thread info.\n \n INCOMPATIBLE CHANGES:",
                "raw_url": "https://github.com/apache/tez/raw/971e0957a1302e20fe241b4aeac278dc87111257/TEZ-2003-CHANGES.txt",
                "sha": "d651960646bbcc697affa3d0d32a484e1efbe45a",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/tez/blob/971e0957a1302e20fe241b4aeac278dc87111257/tez-runtime-internals/src/main/java/org/apache/tez/runtime/LogicalIOProcessorRuntimeTask.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-internals/src/main/java/org/apache/tez/runtime/LogicalIOProcessorRuntimeTask.java?ref=971e0957a1302e20fe241b4aeac278dc87111257",
                "deletions": 1,
                "filename": "tez-runtime-internals/src/main/java/org/apache/tez/runtime/LogicalIOProcessorRuntimeTask.java",
                "patch": "@@ -936,7 +936,10 @@ void printThreads() {\n     long[] threadIds = threadMXBean.getAllThreadIds();\n     for (Long id : threadIds) {\n       ThreadInfo threadInfo = threadMXBean.getThreadInfo(id);\n-      LOG.info(\"ThreadId : \" + id + \", name=\" + threadInfo.getThreadName());\n+      // The thread could have been shutdown before we read info about it.\n+      if (threadInfo != null) {\n+        LOG.debug(\"ThreadId : \" + id + \", name=\" + threadInfo.getThreadName());\n+      }\n     }\n   }\n   ",
                "raw_url": "https://github.com/apache/tez/raw/971e0957a1302e20fe241b4aeac278dc87111257/tez-runtime-internals/src/main/java/org/apache/tez/runtime/LogicalIOProcessorRuntimeTask.java",
                "sha": "449fa0fc7100e2a18291e7ce675d91510db9b5aa",
                "status": "modified"
            }
        ],
        "message": "TEZ-2471. NPE in LogicalIOProcessorRuntimeTask while printing thread info. (sseth)",
        "parent": "https://github.com/apache/tez/commit/9e6bd7c8025c63cd919b94cf7a99137f2fc253b6",
        "repo": "tez",
        "unit_tests": [
            "TestLogicalIOProcessorRuntimeTask.java"
        ]
    },
    "tez_a7f93ae": {
        "bug_id": "tez_a7f93ae",
        "commit": "https://github.com/apache/tez/commit/a7f93ae1da114fa03f7e500a12706e5737b189ee",
        "file": [
            {
                "additions": 10,
                "blob_url": "https://github.com/apache/tez/blob/a7f93ae1da114fa03f7e500a12706e5737b189ee/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/Fetcher.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/Fetcher.java?ref=a7f93ae1da114fa03f7e500a12706e5737b189ee",
                "deletions": 0,
                "filename": "tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/Fetcher.java",
                "patch": "@@ -853,7 +853,17 @@ public String toString() {\n           ShuffleHeader header = new ShuffleHeader();\n           header.readFields(input);\n           pathComponent = header.getMapId();\n+          if (!pathComponent.startsWith(InputAttemptIdentifier.PATH_PREFIX)) {\n+            throw new IllegalArgumentException(\"Invalid map id: \" + header.getMapId() + \", expected to start with \" +\n+                InputAttemptIdentifier.PATH_PREFIX + \", partition: \" + header.getPartition()\n+                + \" while fetching \" + inputAttemptIdentifier);\n+          }\n+\n           srcAttemptId = pathToAttemptMap.get(new PathPartition(pathComponent, header.getPartition()));\n+          if (srcAttemptId == null) {\n+            throw new IllegalArgumentException(\"Source attempt not found for map id: \" + header.getMapId() +\n+                \", partition: \" + header.getPartition() + \" while fetching \" + inputAttemptIdentifier);\n+          }\n \n           if (header.getCompressedLength() == 0) {\n             // Empty partitions are already accounted for",
                "raw_url": "https://github.com/apache/tez/raw/a7f93ae1da114fa03f7e500a12706e5737b189ee/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/Fetcher.java",
                "sha": "bf8c83b98e8e27456a13b67b914bd4809216a684",
                "status": "modified"
            }
        ],
        "message": "TEZ-3761. NPE in Fetcher under load (jeagles)",
        "parent": "https://github.com/apache/tez/commit/4a7719b0c164eae41845815d103ceb7e6e2548c3",
        "repo": "tez",
        "unit_tests": [
            "TestFetcher.java"
        ]
    },
    "tez_aeb7038": {
        "bug_id": "tez_aeb7038",
        "commit": "https://github.com/apache/tez/commit/aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/tez/blob/aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850/CHANGES.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/CHANGES.txt?ref=aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850",
                "deletions": 0,
                "filename": "CHANGES.txt",
                "patch": "@@ -9,6 +9,7 @@ INCOMPATIBLE CHANGES\n   TEZ-2949. Allow duplicate dag names within session for Tez.\n \n ALL CHANGES:\n+  TEZ-2798. NPE when executing TestMemoryWithEvents::testMemoryScatterGather.\n   TEZ-2963. RecoveryService#handleSummaryEvent exception with HDFS transparent encryption + kerberos authentication.\n   TEZ-2966. Tez does not honor mapreduce.task.timeout\n   TEZ-2979. FlakyTest: org.apache.tez.history.TestHistoryParser.",
                "raw_url": "https://github.com/apache/tez/raw/aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850/CHANGES.txt",
                "sha": "cc5ff5a8f3e6c0f9f1e031e117868bb847b08a80",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/tez/blob/aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850/tez-dag/src/main/java/org/apache/tez/dag/app/ContainerLauncherContextImpl.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-dag/src/main/java/org/apache/tez/dag/app/ContainerLauncherContextImpl.java?ref=aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850",
                "deletions": 0,
                "filename": "tez-dag/src/main/java/org/apache/tez/dag/app/ContainerLauncherContextImpl.java",
                "patch": "@@ -14,6 +14,7 @@\n \n package org.apache.tez.dag.app;\n \n+import com.google.common.base.Preconditions;\n import org.apache.hadoop.yarn.api.records.ApplicationAttemptId;\n import org.apache.hadoop.yarn.api.records.ContainerId;\n import org.apache.tez.common.TezUtilsInternal;\n@@ -37,6 +38,8 @@\n   private final UserPayload initialUserPayload;\n \n   public ContainerLauncherContextImpl(AppContext appContext, TaskCommunicatorManagerInterface tal, UserPayload initialUserPayload) {\n+    Preconditions.checkNotNull(appContext, \"AppContext cannot be null\");\n+    Preconditions.checkNotNull(tal, \"TaskCommunicator cannot be null\");\n     this.context = appContext;\n     this.tal = tal;\n     this.initialUserPayload = initialUserPayload;",
                "raw_url": "https://github.com/apache/tez/raw/aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850/tez-dag/src/main/java/org/apache/tez/dag/app/ContainerLauncherContextImpl.java",
                "sha": "a2e0dd685eb3598399fe52c9f3a68100d631151a",
                "status": "modified"
            },
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/tez/blob/aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850/tez-dag/src/test/java/org/apache/tez/dag/app/MockDAGAppMaster.java",
                "changes": 22,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-dag/src/test/java/org/apache/tez/dag/app/MockDAGAppMaster.java?ref=aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850",
                "deletions": 11,
                "filename": "tez-dag/src/test/java/org/apache/tez/dag/app/MockDAGAppMaster.java",
                "patch": "@@ -87,8 +87,8 @@\n public class MockDAGAppMaster extends DAGAppMaster {\n   \n   private static final Logger LOG = LoggerFactory.getLogger(MockDAGAppMaster.class);\n-  ContainerLauncherContext containerLauncherContext;\n   MockContainerLauncher containerLauncher;\n+  private final AtomicBoolean launcherGoFlag;\n   boolean initFailFlag;\n   boolean startFailFlag;\n   boolean recoveryFatalError = false;\n@@ -488,17 +488,8 @@ public MockDAGAppMaster(ApplicationAttemptId applicationAttemptId, ContainerId c\n     super(applicationAttemptId, containerId, nmHost, nmPort, nmHttpPort, clock, appSubmitTime,\n         isSession, workingDirectory, localDirs, logDirs,  new TezApiVersionInfo().getVersion(), 1,\n         credentials, jobUserName, null);\n-    Configuration conf = new Configuration(false);\n-    UserPayload userPayload;\n-    try {\n-      userPayload = TezUtils.createUserPayloadFromConf(conf);\n-    } catch (IOException e) {\n-      throw new TezUncheckedException(e);\n-    }\n-    containerLauncherContext =\n-        new ContainerLauncherContextImpl(getContext(), getTaskCommunicatorManager(), userPayload);\n-    containerLauncher = new MockContainerLauncher(launcherGoFlag, containerLauncherContext);\n     shutdownHandler = new MockDAGAppMasterShutdownHandler();\n+    this.launcherGoFlag = launcherGoFlag;\n     this.initFailFlag = initFailFlag;\n     this.startFailFlag = startFailFlag;\n     Preconditions.checkArgument(handlerConcurrency > 0);\n@@ -512,6 +503,15 @@ protected ContainerLauncherManager createContainerLauncherManager(\n       List<NamedEntityDescriptor> containerLauncherDescirptors,\n       boolean isLocal)\n       throws UnknownHostException {\n+    UserPayload userPayload;\n+    try {\n+      userPayload = TezUtils.createUserPayloadFromConf(new Configuration(false));\n+    } catch (IOException e) {\n+      throw new TezUncheckedException(e);\n+    }\n+    ContainerLauncherContext containerLauncherContext =\n+        new ContainerLauncherContextImpl(getContext(), getTaskCommunicatorManager(), userPayload);\n+    containerLauncher = new MockContainerLauncher(launcherGoFlag, containerLauncherContext);\n     return new ContainerLauncherManager(containerLauncher, getContext());\n   }\n ",
                "raw_url": "https://github.com/apache/tez/raw/aeb7038c35a5214d1ca5fe738da9bdeaf6e4a850/tez-dag/src/test/java/org/apache/tez/dag/app/MockDAGAppMaster.java",
                "sha": "bc7fa98e02d52399ae25b086c2d680db130a9339",
                "status": "modified"
            }
        ],
        "message": "TEZ-2798. NPE when executing TestMemoryWithEvents::testMemoryScatterGather. (sseth)",
        "parent": "https://github.com/apache/tez/commit/0c5ccb66afa1a972b2652ecd1d3f98c974f31add",
        "repo": "tez",
        "unit_tests": [
            "TestMockDAGAppMaster.java"
        ]
    },
    "tez_c6177fb": {
        "bug_id": "tez_c6177fb",
        "commit": "https://github.com/apache/tez/commit/c6177fbeeee89ddba1d447d0388b0003613b6101",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/tez/blob/c6177fbeeee89ddba1d447d0388b0003613b6101/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/combine/MRCombiner.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/combine/MRCombiner.java?ref=c6177fbeeee89ddba1d447d0388b0003613b6101",
                "deletions": 1,
                "filename": "tez-mapreduce/src/main/java/org/apache/tez/mapreduce/combine/MRCombiner.java",
                "patch": "@@ -195,7 +195,8 @@ protected VALUE moveToNext() {\n     }\n \n     public void informReduceProgress() {\n-      combinePhase.set(super.in.getProgress().getProgress()); // update progress\n+      // FIXME implement correct progress updates for combiner TEZ-184\n+      // combinePhase.set(super.in.getProgress().getProgress()); // update progress\n       reporter.progress();\n     }\n   }",
                "raw_url": "https://github.com/apache/tez/raw/c6177fbeeee89ddba1d447d0388b0003613b6101/tez-mapreduce/src/main/java/org/apache/tez/mapreduce/combine/MRCombiner.java",
                "sha": "dc7c53def951a08ae810afbe019067b5d73f93ea",
                "status": "modified"
            }
        ],
        "message": "TEZ-185. NPE in MRCombiner when updating progress. (hitesh)",
        "parent": "https://github.com/apache/tez/commit/31c37843ce47f95c818db56123a6fe20b2d35e48",
        "repo": "tez",
        "unit_tests": [
            "TestMRCombiner.java"
        ]
    },
    "tez_f3cea63": {
        "bug_id": "tez_f3cea63",
        "commit": "https://github.com/apache/tez/commit/f3cea630e8329018a1e600859353576cb83cf77d",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/tez/blob/f3cea630e8329018a1e600859353576cb83cf77d/CHANGES.txt",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/CHANGES.txt?ref=f3cea630e8329018a1e600859353576cb83cf77d",
                "deletions": 0,
                "filename": "CHANGES.txt",
                "patch": "@@ -6,6 +6,7 @@ Release 0.8.2: Unreleased\n INCOMPATIBLE CHANGES\n \n ALL CHANGES:\n+  TEZ-2907. NPE in IFile.Reader.getLength during final merge operation\n   TEZ-2903. Stop using proprietary APIs in RPCLoadGen.\n   TEZ-2882. Consider improving fetch failure handling\n   TEZ-2850. Tez MergeManager OOM for small Map Outputs\n@@ -220,6 +221,7 @@ Release 0.7.1: Unreleased\n INCOMPATIBLE CHANGES\n \n ALL CHANGES\n+  TEZ-2907. NPE in IFile.Reader.getLength during final merge operation\n   TEZ-2850. Tez MergeManager OOM for small Map Outputs\n   TEZ-2886. Ability to merge AM credentials with DAG credentials.\n   TEZ-2896. Fix thread names used during Input/Output initialization.\n@@ -504,6 +506,7 @@ Release 0.6.3: Unreleased\n INCOMPATIBLE CHANGES\n \n ALL CHANGES:\n+  TEZ-2907. NPE in IFile.Reader.getLength during final merge operation\n   TEZ-2850. Tez MergeManager OOM for small Map Outputs\n   TEZ-2781. Fallback to send only TaskAttemptFailedEvent if taskFailed heartbeat fails\n   TEZ-2855. Fix a potential NPE while routing VertexManager events.",
                "raw_url": "https://github.com/apache/tez/raw/f3cea630e8329018a1e600859353576cb83cf77d/CHANGES.txt",
                "sha": "d19df34be6c53231053ae3d7ba78e367da6b186c",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/tez/blob/f3cea630e8329018a1e600859353576cb83cf77d/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/orderedgrouped/MergeManager.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/tez/contents/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/orderedgrouped/MergeManager.java?ref=f3cea630e8329018a1e600859353576cb83cf77d",
                "deletions": 0,
                "filename": "tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/orderedgrouped/MergeManager.java",
                "patch": "@@ -949,12 +949,14 @@ private long createInMemorySegments(List<MapOutput> inMemoryMapOutputs,\n   class RawKVIteratorReader extends IFile.Reader {\n \n     private final TezRawKeyValueIterator kvIter;\n+    private final long size;\n \n     public RawKVIteratorReader(TezRawKeyValueIterator kvIter, long size)\n         throws IOException {\n       super(null, size, null, spilledRecordsCounter, null, ifileReadAhead,\n           ifileReadAheadLength, ifileBufferSize);\n       this.kvIter = kvIter;\n+      this.size = size;\n     }\n     @Override\n     public KeyState readRawKey(DataInputBuffer key) throws IOException {\n@@ -982,6 +984,10 @@ public long getPosition() throws IOException {\n     public void close() throws IOException {\n       kvIter.close();\n     }\n+\n+    @Override public long getLength() {\n+      return size;\n+    }\n   }\n \n   private TezRawKeyValueIterator finalMerge(Configuration job, FileSystem fs,",
                "raw_url": "https://github.com/apache/tez/raw/f3cea630e8329018a1e600859353576cb83cf77d/tez-runtime-library/src/main/java/org/apache/tez/runtime/library/common/shuffle/orderedgrouped/MergeManager.java",
                "sha": "fb9b2431e5a6f652614080b2f12d229d992d1a15",
                "status": "modified"
            }
        ],
        "message": "TEZ-2907. NPE in IFile.Reader.getLength during final merge operation (rbalamohan)",
        "parent": "https://github.com/apache/tez/commit/01ad29e44bfb3ca9d6bfff2cc82444e406721b2a",
        "repo": "tez",
        "unit_tests": [
            "TestMergeManager.java"
        ]
    }
}