[{"commit": "https://github.com/apache/sling-org-apache-sling-connection-timeout-agent/commit/19ba7b2b3e960a44b35311f044f03356c1236e9f", "parent": "https://github.com/apache/sling-org-apache-sling-connection-timeout-agent/commit/5e1ea0e18523be6026ac11f470e3d8bb27293a3e", "message": "Prevent NPE in test", "bug_id": "sling-org-apache-sling-connection-timeout-agent_1", "file": [{"additions": 3, "raw_url": "https://github.com/apache/sling-org-apache-sling-connection-timeout-agent/raw/19ba7b2b3e960a44b35311f044f03356c1236e9f/src/test/java/org/apache/sling/uca/impl/AgentIT.java", "blob_url": "https://github.com/apache/sling-org-apache-sling-connection-timeout-agent/blob/19ba7b2b3e960a44b35311f044f03356c1236e9f/src/test/java/org/apache/sling/uca/impl/AgentIT.java", "sha": "e8b6ac85c94650e36b8cd7bfad314f72d1c025a5", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-connection-timeout-agent/contents/src/test/java/org/apache/sling/uca/impl/AgentIT.java?ref=19ba7b2b3e960a44b35311f044f03356c1236e9f", "patch": "@@ -138,15 +138,15 @@ private RecordedThrowable runTest(String urlSpec, ClientType clientType) throws\n         int exitCode = process.exitValue();\n         LOG.info(\"Exited with code {}\", exitCode);\n         \n-        if ( exitCode != 0 ) {\n+        if ( exitCode == 0 ) {\n+            throw new RuntimeException(\"Command terminated successfully. That is unexpected.\");\n+        } else {\n             return Files.lines(STDERR)\n                 .filter( l -> l.startsWith(\"Exception in thread \\\"main\\\"\"))\n                 .map( l -> newRecordedThrowable(l) )\n                 .findFirst()\n                 .orElseThrow(() -> new RuntimeException(\"Exit code was zero but did not find any exception information in stderr.txt\"));\n         }\n-        \n-        return null;\n     }\n     \n     private Process runForkedCommandWithAgent(URL url, int connectTimeoutSeconds, int readTimeoutSeconds, ClientType clientType) throws IOException {", "filename": "src/test/java/org/apache/sling/uca/impl/AgentIT.java"}], "repo": "sling-org-apache-sling-connection-timeout-agent"}, {"commit": "https://github.com/apache/sling-org-apache-sling-connection-timeout-agent/commit/eb8e055de5d01c0e46bce8aff257e44d3a64501a", "parent": "https://github.com/apache/sling-org-apache-sling-connection-timeout-agent/commit/d783f8461eb792a83070a6aef213e1237ca177db", "message": "Prevent NPE if agent is launched with no arguments", "bug_id": "sling-org-apache-sling-connection-timeout-agent_2", "file": [{"additions": 1, "raw_url": "https://github.com/apache/sling-org-apache-sling-connection-timeout-agent/raw/eb8e055de5d01c0e46bce8aff257e44d3a64501a/src/main/java/org/apache/sling/uca/impl/Agent.java", "blob_url": "https://github.com/apache/sling-org-apache-sling-connection-timeout-agent/blob/eb8e055de5d01c0e46bce8aff257e44d3a64501a/src/main/java/org/apache/sling/uca/impl/Agent.java", "sha": "a9320d6afa9cdf2fde041e88d79f87d7b8da82d9", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-connection-timeout-agent/contents/src/main/java/org/apache/sling/uca/impl/Agent.java?ref=eb8e055de5d01c0e46bce8aff257e44d3a64501a", "patch": "@@ -25,7 +25,7 @@\n     public static void premain(String args, Instrumentation inst) {\n         \n         System.out.println(\"[AGENT] Loading agent...\");\n-        String[] parsedArgs = args.split(\",\");\n+        String[] parsedArgs = args != null ? args.split(\",\") : new String[0];\n         long connectTimeout =  TimeUnit.MINUTES.toMillis(1);\n         long readTimeout = TimeUnit.MINUTES.toMillis(1);\n         if ( parsedArgs.length > 0 )", "filename": "src/main/java/org/apache/sling/uca/impl/Agent.java"}], "repo": "sling-org-apache-sling-connection-timeout-agent"}]
