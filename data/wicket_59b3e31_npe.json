[
    {
        "repo": "wicket",
        "commit": "https://github.com/apache/wicket/commit/59b3e318762733adea00cfe3b31c5dd25e4d2147",
        "bug_id": "wicket_59b3e31",
        "message": "Move the try/catch just around the 'validator.validate()' call. Otherwise the construction of the error message will fail with NPE because 'validator' my be null",
        "parent": "https://github.com/apache/wicket/commit/9575f0d93901b7163a46c2ea38f43f135ecd7d50",
        "patched_files": [
            "FormComponent.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 21,
                "raw_url": "https://github.com/apache/wicket/raw/59b3e318762733adea00cfe3b31c5dd25e4d2147/wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java",
                "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java?ref=59b3e318762733adea00cfe3b31c5dd25e4d2147",
                "filename": "wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java",
                "deletions": 21,
                "sha": "660cf5393620e7f470c83c30ab4eef91f6f37916",
                "blob_url": "https://github.com/apache/wicket/blob/59b3e318762733adea00cfe3b31c5dd25e4d2147/wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java",
                "patch": "@@ -1503,38 +1503,38 @@ protected final void validateValidators()\n \n \t\tIValidator<T> validator = null;\n \n-\t\ttry\n+\t\tfor (Behavior behavior : getBehaviors())\n \t\t{\n-\t\t\tfor (Behavior behavior : getBehaviors())\n+\t\t\tvalidator = null;\n+\t\t\tif (behavior instanceof ValidatorAdapter)\n \t\t\t{\n-\t\t\t\tvalidator = null;\n-\t\t\t\tif (behavior instanceof ValidatorAdapter)\n-\t\t\t\t{\n-\t\t\t\t\tvalidator = ((ValidatorAdapter<T>)behavior).getValidator();\n-\t\t\t\t}\n-\t\t\t\telse if (behavior instanceof IValidator)\n-\t\t\t\t{\n-\t\t\t\t\tvalidator = (IValidator<T>)behavior;\n-\t\t\t\t}\n-\t\t\t\tif (validator != null)\n+\t\t\t\tvalidator = ((ValidatorAdapter<T>)behavior).getValidator();\n+\t\t\t}\n+\t\t\telse if (behavior instanceof IValidator)\n+\t\t\t{\n+\t\t\t\tvalidator = (IValidator<T>)behavior;\n+\t\t\t}\n+\t\t\tif (validator != null)\n+\t\t\t{\n+\t\t\t\tif (isNull == false || validator instanceof INullAcceptingValidator<?>)\n \t\t\t\t{\n-\t\t\t\t\tif (isNull == false || validator instanceof INullAcceptingValidator<?>)\n+\t\t\t\t\ttry\n \t\t\t\t\t{\n \t\t\t\t\t\tvalidator.validate(validatable);\n \t\t\t\t\t}\n-\t\t\t\t\tif (!isValid())\n+\t\t\t\t\tcatch (Exception e)\n \t\t\t\t\t{\n-\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\tthrow new WicketRuntimeException(\"Exception '\" + e.getMessage() +\n+\t\t\t\t\t\t\t\t\"' occurred during validation \" + validator.getClass().getName() +\n+\t\t\t\t\t\t\t\t\" on component \" + getPath(), e);\n \t\t\t\t\t}\n \t\t\t\t}\n+\t\t\t\tif (!isValid())\n+\t\t\t\t{\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tcatch (Exception e)\n-\t\t{\n-\t\t\tthrow new WicketRuntimeException(\"Exception '\" + e.getMessage() +\n-\t\t\t\t\"' occurred during validation \" + validator.getClass().getName() +\n-\t\t\t\t\" on component \" + getPath(), e);\n-\t\t}\n \t}\n \n \t/**",
                "changes": 42
            }
        ],
        "unit_tests": [
            "FormComponentTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "wicket-core/src/test/java/org/apache/wicket/markup/html/form/FormComponentTest.java",
        "buggy_files": [
            "wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java"
        ],
        "fixed": true
    }
]