[
    {
        "repo": "maven-archetype",
        "message": "fixed NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/archetype/trunk@924984 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-archetype/commit/0ba4088e1d81fb7231c178b1d4af613b11cf9099",
        "parent": "https://github.com/apache/maven-archetype/commit/9aef61ae73bd7d9d42e58726595081bc54cdbfda",
        "bug_id": "maven-archetype_1",
        "file": [
            {
                "sha": "991e597ac5aad9e604f97c52e583d1c297c14dce",
                "filename": "archetype-common/src/main/java/org/apache/maven/archetype/common/DefaultPomManager.java",
                "blob_url": "https://github.com/apache/maven-archetype/blob/0ba4088e1d81fb7231c178b1d4af613b11cf9099/archetype-common/src/main/java/org/apache/maven/archetype/common/DefaultPomManager.java",
                "raw_url": "https://github.com/apache/maven-archetype/raw/0ba4088e1d81fb7231c178b1d4af613b11cf9099/archetype-common/src/main/java/org/apache/maven/archetype/common/DefaultPomManager.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-common/src/main/java/org/apache/maven/archetype/common/DefaultPomManager.java?ref=0ba4088e1d81fb7231c178b1d4af613b11cf9099",
                "patch": "@@ -298,7 +298,7 @@ public void writePom( final Model model,\n         Writer outputStreamWriter = null;\n \n         String fileEncoding =\n-            StringUtils.isEmpty( model.getModelEncoding() ) ? model.getModelEncoding() : \"UTF-8\";\n+            StringUtils.isEmpty( model.getModelEncoding() ) ? \"UTF-8\" : model.getModelEncoding();\n \n         try\n         {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "maven-archetype",
        "message": "take care of NPE : thanks sonar\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/archetype/trunk@1143338 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-archetype/commit/a126f1d46317e74a64ca36a4bbab08f7385f5c38",
        "parent": "https://github.com/apache/maven-archetype/commit/8b188570f45d781532dadb18d0f015edf1cd5d39",
        "bug_id": "maven-archetype_2",
        "file": [
            {
                "sha": "72f12dd98e363ee627b52f4378738b5346450a06",
                "filename": "archetype-common/src/main/java/org/apache/maven/archetype/common/DefaultArchetypeArtifactManager.java",
                "blob_url": "https://github.com/apache/maven-archetype/blob/a126f1d46317e74a64ca36a4bbab08f7385f5c38/archetype-common/src/main/java/org/apache/maven/archetype/common/DefaultArchetypeArtifactManager.java",
                "raw_url": "https://github.com/apache/maven-archetype/raw/a126f1d46317e74a64ca36a4bbab08f7385f5c38/archetype-common/src/main/java/org/apache/maven/archetype/common/DefaultArchetypeArtifactManager.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-common/src/main/java/org/apache/maven/archetype/common/DefaultArchetypeArtifactManager.java?ref=a126f1d46317e74a64ca36a4bbab08f7385f5c38",
                "patch": "@@ -485,7 +485,10 @@ private boolean isOldArchetype( ZipFile zipFile )\n         }\n         finally\n         {\n-            reader.close();\n+            if (reader != null)\n+            {\n+                reader.close();\n+            }\n         }\n     }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "maven-archetype",
        "message": "Fix the NPE when property File is not given\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/archetype/trunk@636873 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-archetype/commit/e20849804cb02b4b3856d0bd554b1ed333f56da7",
        "parent": "https://github.com/apache/maven-archetype/commit/3f23aacaa417b59da198f10a561a917fa495a3ad",
        "bug_id": "maven-archetype_3",
        "file": [
            {
                "sha": "d05e54b426835b28829c1b7b62f02323bd420569",
                "filename": "archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/CreateArchetypeFromProjectMojo.java",
                "blob_url": "https://github.com/apache/maven-archetype/blob/e20849804cb02b4b3856d0bd554b1ed333f56da7/archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/CreateArchetypeFromProjectMojo.java",
                "raw_url": "https://github.com/apache/maven-archetype/raw/e20849804cb02b4b3856d0bd554b1ed333f56da7/archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/CreateArchetypeFromProjectMojo.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/CreateArchetypeFromProjectMojo.java?ref=e20849804cb02b4b3856d0bd554b1ed333f56da7",
                "patch": "@@ -241,7 +241,7 @@ private List getFilteredExtensions( String archetypeFilteredExtentions, File pro\n             getLog().debug(\"Found in command line extensions = \" + filteredExtensions);\n         }\n \n-        if( filteredExtensions.isEmpty() && propertyFile.exists() )\n+        if( filteredExtensions.isEmpty() && propertyFile != null && propertyFile.exists() )\n         {\n             try\n             {\n@@ -282,7 +282,7 @@ private List getLanguages(String archetypeLanguages, File propertyFile) {\n             getLog().debug(\"Found in command line languages = \" + resultingLanguages);\n         }\n \n-        if( resultingLanguages.isEmpty() && propertyFile.exists() )\n+        if( resultingLanguages.isEmpty() && propertyFile != null && propertyFile.exists() )\n         {\n             try\n             {",
                "deletions": 2
            },
            {
                "sha": "26cf1edea31935b9d9e69eae101670ffe225bef1",
                "filename": "archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeCreationConfigurator.java",
                "blob_url": "https://github.com/apache/maven-archetype/blob/e20849804cb02b4b3856d0bd554b1ed333f56da7/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeCreationConfigurator.java",
                "raw_url": "https://github.com/apache/maven-archetype/raw/e20849804cb02b4b3856d0bd554b1ed333f56da7/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeCreationConfigurator.java",
                "status": "modified",
                "changes": 15,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeCreationConfigurator.java?ref=e20849804cb02b4b3856d0bd554b1ed333f56da7",
                "patch": "@@ -390,13 +390,16 @@ private Properties initialiseArchetypeProperties(\n     {\n         Properties properties = new Properties();\n \n-        try\n-        {\n-            readProperties( properties, propertyFile );\n-        }\n-        catch ( FileNotFoundException ex )\n+        if ( propertyFile != null )\n         {\n-            getLogger().debug( \"archetype.properties does not exist\" );\n+            try\n+            {\n+                readProperties( properties, propertyFile );\n+            }\n+            catch ( FileNotFoundException ex )\n+            {\n+                getLogger().debug( \"archetype.properties does not exist\" );\n+            }\n         }\n \n         return properties;",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "maven-archetype",
        "message": "[ARCHETYPE-117] correct NPE introduced by previous change\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/archetype/trunk@627872 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-archetype/commit/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541",
        "parent": "https://github.com/apache/maven-archetype/commit/4a0751b5dff7a5f875f0b704a9048fe63dc4a61e",
        "bug_id": "maven-archetype_4",
        "file": [
            {
                "sha": "dd0f486d489e1dbd43b82e8ab9239be35101420d",
                "filename": "archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeFactory.java",
                "blob_url": "https://github.com/apache/maven-archetype/blob/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeFactory.java",
                "raw_url": "https://github.com/apache/maven-archetype/raw/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeFactory.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeFactory.java?ref=39fb5dba2669c8fa8e7e884cd2b03c87d17e3541",
                "patch": "@@ -145,7 +145,10 @@ public ArchetypeConfiguration createArchetypeConfiguration(\n                 )\r\n             );\r\n         }\r\n-        configuration.setDefaultProperty( Constants.PACKAGE, configuration.getProperty( Constants.GROUP_ID ) );\r\n+        if ( configuration.getProperty( Constants.GROUP_ID ) != null )\r\n+        {\r\n+            configuration.setDefaultProperty( Constants.PACKAGE, configuration.getProperty( Constants.GROUP_ID ) );\r\n+        }\r\n \r\n         return configuration;\r\n     }\r",
                "deletions": 1
            },
            {
                "sha": "fd4a2ab2bca697a223fe25146fcfb3c12a32aa72",
                "filename": "archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfigurator.java",
                "blob_url": "https://github.com/apache/maven-archetype/blob/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfigurator.java",
                "raw_url": "https://github.com/apache/maven-archetype/raw/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfigurator.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfigurator.java?ref=39fb5dba2669c8fa8e7e884cd2b03c87d17e3541",
                "patch": "@@ -196,8 +196,11 @@ else if ( !archetypeGenerationQueryer.confirmConfiguration( archetypeConfigurati\n \n                     if ( !archetypeConfiguration.isConfigured( requiredProperty ) )\n                     {\n-                        archetypeConfiguration.setProperty( requiredProperty, archetypeConfiguration.getDefaultValue(\n-                            requiredProperty ) );\n+                        if ( archetypeConfiguration.getDefaultValue( requiredProperty ) != null )\n+                        {\n+                            archetypeConfiguration.setProperty( requiredProperty, archetypeConfiguration.getDefaultValue(\n+                                requiredProperty ) );\n+                        }\n                     }\n                 }\n ",
                "deletions": 2
            },
            {
                "sha": "b21878e98c1b4fb9d19fa9329624cc28ed26b7a6",
                "filename": "archetype-plugin/src/test/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfiguratorTest.java",
                "blob_url": "https://github.com/apache/maven-archetype/blob/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/test/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfiguratorTest.java",
                "raw_url": "https://github.com/apache/maven-archetype/raw/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/test/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfiguratorTest.java",
                "status": "modified",
                "changes": 23,
                "additions": 23,
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-plugin/src/test/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfiguratorTest.java?ref=39fb5dba2669c8fa8e7e884cd2b03c87d17e3541",
                "patch": "@@ -108,4 +108,27 @@ public void testOldArchetypeGeneratedFieldsDefaultsBatchMode()\n         assertEquals( \"1.0-SNAPSHOT\", request.getVersion() );\n         assertEquals( \"preset-groupId\", request.getPackage() );\n     }\n+\n+    // TODO: should test this in interactive mode to check for prompting\n+    public void testOldArchetypeGeneratedFieldsDefaultsMissingGroupId()\n+        throws PrompterException, IOException, UnknownGroup, ArchetypeSelectionFailure, UnknownArchetype,\n+        ArchetypeNotDefined, ArchetypeGenerationConfigurationFailure\n+    {\n+        ArchetypeGenerationRequest request = new ArchetypeGenerationRequest();\n+        request.setArchetypeGroupId( \"archetypeGroupId\" );\n+        request.setArchetypeArtifactId( \"archetypeArtifactId\" );\n+        request.setArchetypeVersion( \"archetypeVersion\" );\n+        Properties properties = new Properties();\n+        properties.setProperty( \"artifactId\", \"preset-artifactId\" );\n+\n+        try\n+        {\n+            configurator.configureArchetype( request, Boolean.FALSE, properties );\n+            fail( \"Archetype was not fully configured - fail\" );\n+        }\n+        catch ( ArchetypeNotConfigured archetypeNotDefined )\n+        {\n+            assertTrue( true );\n+        }\n+    }\n }\n\\ No newline at end of file",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "maven-archetype",
        "message": "[ARCHETYPE-355] added a check to avoid NPE if a user runs 'mvn archetype:integration-test' (instead of 'mvn integration-test')\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/archetype/trunk@1163363 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-archetype/commit/a60bb8a42227306c77d41d2af791d3b75cdc83ca",
        "parent": "https://github.com/apache/maven-archetype/commit/e1bf18f31b369cab42d6d78be36742f3337bfa90",
        "bug_id": "maven-archetype_5",
        "file": [
            {
                "sha": "80423a9369f019c14f07ccfec7334173a42383f7",
                "filename": "maven-archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/IntegrationTestMojo.java",
                "blob_url": "https://github.com/apache/maven-archetype/blob/a60bb8a42227306c77d41d2af791d3b75cdc83ca/maven-archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/IntegrationTestMojo.java",
                "raw_url": "https://github.com/apache/maven-archetype/raw/a60bb8a42227306c77d41d2af791d3b75cdc83ca/maven-archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/IntegrationTestMojo.java",
                "status": "modified",
                "changes": 15,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/maven-archetype-plugin/src/main/java/org/apache/maven/archetype/mojos/IntegrationTestMojo.java?ref=a60bb8a42227306c77d41d2af791d3b75cdc83ca",
                "patch": "@@ -60,6 +60,9 @@\n  * <li>an optional <code>reference/</code> directory containing a reference copy of the expected project created from the IT.</li>\n  * </ul>\n  *\n+ * Notice that it is expected to be run as part as of a build after the <code>package</code> phase and not directly\n+ * as a goal from CLI.\n+ *\n  * @author rafale\n  * @requiresProject true\n  * @goal integration-test\n@@ -107,6 +110,16 @@ public void execute()\n             return;\n         }\n \n+        File archetypeFile = project.getArtifact().getFile();\n+\n+        if ( archetypeFile == null )\n+        {\n+            throw new MojoFailureException(\n+                                            \"Unable to get the archetypes' artifact which should have just been built:\"\n+                                                + \" you probably launched 'mvn archetype:integration-test' instead of\"\n+                                                + \" 'mvn integration-test'.\" );\n+        }\n+\n         try\n         {\n             @SuppressWarnings( \"unchecked\" )\n@@ -119,8 +132,6 @@ public void execute()\n                 return;\n             }\n \n-            File archetypeFile = project.getArtifact().getFile();\n-\n             StringWriter errorWriter = new StringWriter();\n             for ( File goalFile : projectsGoalFiles )\n             {",
                "deletions": 2
            }
        ]
    }
]