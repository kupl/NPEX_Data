[
    {
        "repo": "wicket",
        "commit": "https://github.com/apache/wicket/commit/724066f406590a1b383a2476ee9983974f40ab80",
        "bug_id": "wicket_724066f",
        "message": "WICKET-5497 NPE in JsonUtils when the value is null",
        "parent": "https://github.com/apache/wicket/commit/972c71522caddfa3c6836dafab6831a9643cbd08",
        "patched_files": [
            "JsonUtils.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 12,
                "raw_url": "https://github.com/apache/wicket/raw/724066f406590a1b383a2476ee9983974f40ab80/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java",
                "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java?ref=724066f406590a1b383a2476ee9983974f40ab80",
                "filename": "wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java",
                "deletions": 12,
                "sha": "ece49971528276158f163328eac2e31285412653",
                "blob_url": "https://github.com/apache/wicket/blob/724066f406590a1b383a2476ee9983974f40ab80/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java",
                "patch": "@@ -58,23 +58,23 @@ public static JSONArray asArray(Map<String, Object> map) throws JSONException\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t\telse if (value.getClass().isArray())\n+\t\t\t\telse if (value != null)\n \t\t\t\t{\n-\t\t\t\t\tObject[] array = (Object[]) value;\n-\t\t\t\t\tfor (Object v : array)\n+\t\t\t\t\tif (value.getClass().isArray())\n \t\t\t\t\t{\n-\t\t\t\t\t\tif (v != null)\n+\t\t\t\t\t\tObject[] array = (Object[]) value;\n+\t\t\t\t\t\tfor (Object v : array)\n \t\t\t\t\t\t{\n-\t\t\t\t\t\t\tJSONObject object = new JSONObject();\n-\t\t\t\t\t\t\tobject.put(\"name\", name);\n-\t\t\t\t\t\t\tobject.put(\"value\", v);\n-\t\t\t\t\t\t\tjsonArray.put(object);\n+\t\t\t\t\t\t\tif (v != null)\n+\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\tJSONObject object = new JSONObject();\n+\t\t\t\t\t\t\t\tobject.put(\"name\", name);\n+\t\t\t\t\t\t\t\tobject.put(\"value\", v);\n+\t\t\t\t\t\t\t\tjsonArray.put(object);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\telse\n-\t\t\t\t{\n-\t\t\t\t\tif (value != null)\n+\t\t\t\t\telse\n \t\t\t\t\t{\n \t\t\t\t\t\tJSONObject object = new JSONObject();\n \t\t\t\t\t\tobject.put(\"name\", name);",
                "changes": 24
            },
            {
                "status": "modified",
                "additions": 6,
                "raw_url": "https://github.com/apache/wicket/raw/724066f406590a1b383a2476ee9983974f40ab80/wicket-core/src/test/java/org/apache/wicket/ajax/json/JsonUtilsTest.java",
                "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/test/java/org/apache/wicket/ajax/json/JsonUtilsTest.java?ref=724066f406590a1b383a2476ee9983974f40ab80",
                "filename": "wicket-core/src/test/java/org/apache/wicket/ajax/json/JsonUtilsTest.java",
                "deletions": 0,
                "sha": "b78003bcfd3f3906670deba8cb173e2621591127",
                "blob_url": "https://github.com/apache/wicket/blob/724066f406590a1b383a2476ee9983974f40ab80/wicket-core/src/test/java/org/apache/wicket/ajax/json/JsonUtilsTest.java",
                "patch": "@@ -56,5 +56,11 @@ public void asArray() throws Exception\n \t\tObject[] arrayValues = {\"arrayValue\", 3, null, true};\n \t\tmap.put(\"array\", arrayValues);\n \t\tassertEquals(\"[{\\\"name\\\":\\\"array\\\",\\\"value\\\":\\\"arrayValue\\\"},{\\\"name\\\":\\\"array\\\",\\\"value\\\":3},{\\\"name\\\":\\\"array\\\",\\\"value\\\":true}]\", JsonUtils.asArray(map).toString());\n+\n+\t\tmap.clear();\n+\t\tmap.put(\"null\", null);\n+\t\tassertEquals(\"[]\", JsonUtils.asArray(map).toString());\n+\t\tmap.put(\"notNull\", \"notNull\");\n+\t\tassertEquals(\"[{\\\"name\\\":\\\"notNull\\\",\\\"value\\\":\\\"notNull\\\"}]\", JsonUtils.asArray(map).toString());\n \t}\n }",
                "changes": 6
            }
        ],
        "unit_tests": [
            "JsonUtilsTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "wicket-core/src/test/java/org/apache/wicket/ajax/json/JsonUtilsTest.java",
        "buggy_files": [
            "wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java"
        ],
        "fixed": true
    }
]