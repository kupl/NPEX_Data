[
    {
        "repo": "sling-org-apache-sling-launchpad-test-services",
        "message": "SLING-2274 - fixing NPE in integration test\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1200714 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/commit/f2ec10c7acc14f4e209d99a2f25f980c96490109",
        "parent": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/commit/9b44d5623b0cd60c65eb3c47f09fa56f3a58ebf7",
        "bug_id": "sling-org-apache-sling-launchpad-test-services_1",
        "file": [
            {
                "sha": "4299af3b964d8ef8a63037f811bfd5e48309f238",
                "filename": "src/main/java/org/apache/sling/launchpad/testservices/servlets/AnonymousAccessConfigServlet.java",
                "blob_url": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/blob/f2ec10c7acc14f4e209d99a2f25f980c96490109/src/main/java/org/apache/sling/launchpad/testservices/servlets/AnonymousAccessConfigServlet.java",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/raw/f2ec10c7acc14f4e209d99a2f25f980c96490109/src/main/java/org/apache/sling/launchpad/testservices/servlets/AnonymousAccessConfigServlet.java",
                "status": "modified",
                "changes": 7,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-launchpad-test-services/contents/src/main/java/org/apache/sling/launchpad/testservices/servlets/AnonymousAccessConfigServlet.java?ref=f2ec10c7acc14f4e209d99a2f25f980c96490109",
                "patch": "@@ -18,6 +18,7 @@\n \n import java.io.IOException;\n import java.util.Dictionary;\n+import java.util.Hashtable;\n \n import javax.servlet.ServletException;\n \n@@ -69,13 +70,19 @@ protected void doPost(SlingHttpServletRequest request, SlingHttpServletResponse\n             int existingModifiedCounter = modifiedCounter;\n             Configuration config = configAdmin.getConfiguration(AUTH_PID);\n             Dictionary props = config.getProperties();\n+            if (props == null) {\n+                props = new Hashtable();\n+            }\n             props.put(PROP_AUTH_ANNONYMOUS, Boolean.FALSE);\n             config.update(props);\n             waitForModified(existingModifiedCounter, TIMEOUT);\n         } else if (\"enable\".equals(action)) {\n             int existingModifiedCounter = modifiedCounter;\n             Configuration config = configAdmin.getConfiguration(AUTH_PID);\n             Dictionary props = config.getProperties();\n+            if (props == null) {\n+                props = new Hashtable();\n+            }\n             props.put(PROP_AUTH_ANNONYMOUS, Boolean.TRUE);\n             config.update(props);\n             waitForModified(existingModifiedCounter, TIMEOUT);",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "sling-org-apache-sling-launchpad-test-services",
        "message": "SLING-1372 Reverting previous commits to get to a place where jcr bundles can be released.\n\nSquashed commit of the following:\n\ncommit 09ff06e6e95cacef6313232f7aa637175ffb7acc\nAuthor: Ian Boston <ieb@tfd.co.uk>\nDate:   Fri Feb 12 12:34:00 2010 +0000\n\n    Part added SLING-1366 back in Revert \"Revert \"SLING-1366 : Use dynamic proxy to handle session#impersonate call.\"\"\n\n    This reverts commit d0681511cdc8d1b3f18688c5ee2ee71b12e3e76a.\n\n    Conflicts:\n\n    \tbundles/jcr/base/src/main/java/org/apache/sling/jcr/base/AbstractSlingRepository.java\n\ncommit 956e758b6985f6e98e50aaf98508be7f8bf5d36d\nAuthor: Ian Boston <ieb@tfd.co.uk>\nDate:   Fri Feb 12 10:03:57 2010 +0000\n\n    Revert \"SLING-1363 - adding SessionConfigurer interface\"\n\n    This reverts commit 388f1b9373207ae207aa33f5d5c49ff874fd349a.\n\ncommit 4e15f0839cd088db62b32a1632f03f8dfd406253\nAuthor: Ian Boston <ieb@tfd.co.uk>\nDate:   Fri Feb 12 10:03:24 2010 +0000\n\n    Revert \"SLING-1363 Must start the session configurer tracker before starting the repository because starting the repository tries to login which in turn accesses the tracker thus causing an NPE.\"\n\n    This reverts commit d5816bca2af56046d891311f1586e224690f73ab.\n\ncommit c9c885385ecb14917e7341c4656c822836abd918\nAuthor: Ian Boston <ieb@tfd.co.uk>\nDate:   Fri Feb 12 10:02:46 2010 +0000\n\n    Revert \"SLING-1366 : Readd call to NamespaceMapper\"\n\n    This reverts commit 0f8b5c33cd02ec555a527c755b66b827e80ed458.\n\ncommit 90ff911034433cef76556fff6c1d0ef8f7e04cfc\nAuthor: Ian Boston <ieb@tfd.co.uk>\nDate:   Fri Feb 12 10:01:46 2010 +0000\n\n    Revert \"fixing SLING-1367\"\n\n    This reverts commit 33ada52357a8196805c564446d90caf4bf7c6272.\n\ncommit a3e34b648b6ccde37a052276d8c589cd430c0ef0\nAuthor: Ian Boston <ieb@tfd.co.uk>\nDate:   Fri Feb 12 10:01:28 2010 +0000\n\n    Revert \"SLING-1363 - removing SessionConfigurer interface and moving NamespaceMapper from base to api. Created tests for both dynamic NamespaceMapper and static Sling-Namespaces namespace registration. Note - this involved updating the version of jcr.api in the bundle list file which also required including the JCR 2 API bundle.\"\n\n    This reverts commit f7cb30cc73300fec3a49c00d05936bad9a63280a.\n\ncommit a3b32db61b15c2b881733def84770be1fcd96730\nAuthor: Ian Boston <ieb@tfd.co.uk>\nDate:   Fri Feb 12 10:00:56 2010 +0000\n\n    Revert \"correcting jcr.api package version\"\n\n    This reverts commit 21761508bc005ea52150706134da2406b47cb809.\n\ncommit 900e2542ea0a2e38aa09f437fa0521382cf3058e\nAuthor: Ian Boston <ieb@tfd.co.uk>\nDate:   Fri Feb 12 10:00:25 2010 +0000\n\n    Revert \"SLING-1363 - We added a new interface so we should increase the minor version of the exported api; minor cleanup of the interface and a little javadoc.\"\n\n    This reverts commit ea7da107dfd3c2b4f26662469ff6fee66cf2d7f0.\n\ncommit d0681511cdc8d1b3f18688c5ee2ee71b12e3e76a\nAuthor: Ian Boston <ieb@tfd.co.uk>\nDate:   Fri Feb 12 09:59:56 2010 +0000\n\n    Revert \"SLING-1366 : Use dynamic proxy to handle session#impersonate call.\"\n\n    This reverts commit 01ad0d9bd358ce323a5675ef0714a62108a2c24a.\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@909431 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/commit/4b0ab0d1bed2c6a7046ac5e422c042b118531e0f",
        "parent": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/commit/6bf769ad070fca23dea3f143543c294b55436536",
        "bug_id": "sling-org-apache-sling-launchpad-test-services_2",
        "file": [
            {
                "sha": "efd83a50e7c9ddc6b52a62a7ee1c1a80b944700a",
                "filename": "pom.xml",
                "blob_url": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/blob/4b0ab0d1bed2c6a7046ac5e422c042b118531e0f/pom.xml",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/raw/4b0ab0d1bed2c6a7046ac5e422c042b118531e0f/pom.xml",
                "status": "modified",
                "changes": 12,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-launchpad-test-services/contents/pom.xml?ref=4b0ab0d1bed2c6a7046ac5e422c042b118531e0f",
                "patch": "@@ -57,9 +57,6 @@\n                         <Private-Package>\n                             org.apache.sling.launchpad.testservices.*\n                         </Private-Package>\n-                        <Sling-Namespaces>\n-                            test1=http://sling.apache.org/test/one\n-                        </Sling-Namespaces>\n                         <Sling-Nodetypes>\n                             SLING-INF/nodetypes/test.cnd\n                         </Sling-Nodetypes>\n@@ -79,11 +76,6 @@\n             <artifactId>org.apache.sling.api</artifactId>\n             <version>2.0.8</version>\n         </dependency>\n-        <dependency>\n-            <groupId>org.apache.sling</groupId>\n-            <artifactId>org.apache.sling.jcr.api</artifactId>\n-            <version>2.0.7-SNAPSHOT</version>\n-        </dependency>\n         <dependency>\n             <groupId>org.apache.sling</groupId>\n             <artifactId>org.apache.sling.scripting.api</artifactId>\n@@ -101,10 +93,6 @@\n             <groupId>org.slf4j</groupId>\n             <artifactId>slf4j-api</artifactId>\n         </dependency>\n-        <dependency>\n-            <groupId>javax.jcr</groupId>\n-            <artifactId>jcr</artifactId>\n-        </dependency>\n     </dependencies>\n \n </project>",
                "deletions": 12
            },
            {
                "sha": "29502db5d9dfb5c284281795ade8fa51409e312d",
                "filename": "src/main/java/org/apache/sling/launchpad/testservices/jcr/TestNamespaceMapper.java",
                "blob_url": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/blob/6bf769ad070fca23dea3f143543c294b55436536/src/main/java/org/apache/sling/launchpad/testservices/jcr/TestNamespaceMapper.java",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/raw/6bf769ad070fca23dea3f143543c294b55436536/src/main/java/org/apache/sling/launchpad/testservices/jcr/TestNamespaceMapper.java",
                "status": "removed",
                "changes": 40,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-launchpad-test-services/contents/src/main/java/org/apache/sling/launchpad/testservices/jcr/TestNamespaceMapper.java?ref=6bf769ad070fca23dea3f143543c294b55436536",
                "patch": "@@ -1,40 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one or more\n- * contributor license agreements. See the NOTICE file distributed with this\n- * work for additional information regarding copyright ownership. The ASF\n- * licenses this file to You under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- * http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n- * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n- * License for the specific language governing permissions and limitations under\n- * the License.\n- */\n-package org.apache.sling.launchpad.testservices.jcr;\n-\n-import javax.jcr.RepositoryException;\n-import javax.jcr.Session;\n-\n-import org.apache.sling.jcr.api.NamespaceMapper;\n-\n-/**\n- * Test Implementation of NamespaceMapper\n- *\n- * @scr.component immediate=\"true\" metatype=\"no\"\n- * @scr.service interface=\"org.apache.sling.jcr.api.NamespaceMapper\"\n- *\n- * @scr.property name=\"service.description\" value=\"Test NamespaceMapper\"\n- * @scr.property name=\"service.vendor\" value=\"The Apache Software Foundation\"\n- *\n- */\n-public class TestNamespaceMapper implements NamespaceMapper {\n-\n-    public void defineNamespacePrefixes(Session session) throws RepositoryException {\n-        session.setNamespacePrefix(\"test2\", \"test2=http://sling.apache.org/test/two\");\n-    }\n-\n-}",
                "deletions": 40
            },
            {
                "sha": "93f1a4ed64e5b2c1fb2d733a207da93a9157bb04",
                "filename": "src/main/java/org/apache/sling/launchpad/testservices/servlets/NamespaceTestServlet.java",
                "blob_url": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/blob/6bf769ad070fca23dea3f143543c294b55436536/src/main/java/org/apache/sling/launchpad/testservices/servlets/NamespaceTestServlet.java",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-launchpad-test-services/raw/6bf769ad070fca23dea3f143543c294b55436536/src/main/java/org/apache/sling/launchpad/testservices/servlets/NamespaceTestServlet.java",
                "status": "removed",
                "changes": 66,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-launchpad-test-services/contents/src/main/java/org/apache/sling/launchpad/testservices/servlets/NamespaceTestServlet.java?ref=6bf769ad070fca23dea3f143543c294b55436536",
                "patch": "@@ -1,66 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one or more\n- * contributor license agreements. See the NOTICE file distributed with this\n- * work for additional information regarding copyright ownership. The ASF\n- * licenses this file to You under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- * http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n- * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n- * License for the specific language governing permissions and limitations under\n- * the License.\n- */\n-package org.apache.sling.launchpad.testservices.servlets;\n-\n-import java.io.IOException;\n-\n-import javax.jcr.RepositoryException;\n-import javax.jcr.Session;\n-import javax.servlet.ServletException;\n-\n-import org.apache.sling.api.SlingHttpServletRequest;\n-import org.apache.sling.api.SlingHttpServletResponse;\n-import org.apache.sling.api.servlets.SlingSafeMethodsServlet;\n-\n-/**\n- * Test Servlet which outputs the current namespace mappings.\n- *\n- * @scr.component immediate=\"true\" metatype=\"no\"\n- * @scr.service interface=\"javax.servlet.Servlet\"\n- *\n- * @scr.property name=\"service.description\"\n- *               value=\"NamespaceMapping Test Servlet\"\n- * @scr.property name=\"service.vendor\" value=\"The Apache Software Foundation\"\n- *\n- * @scr.property name=\"sling.servlet.paths\"\n- *               values.0=\"/testing/NamespaceTestServlet/output\"\n- *\n- */\n-@SuppressWarnings(\"serial\")\n-public class NamespaceTestServlet extends SlingSafeMethodsServlet {\n-\n-    @Override\n-    protected void doGet(SlingHttpServletRequest request, SlingHttpServletResponse response) throws ServletException,\n-            IOException {\n-        try {\n-            response.setContentType(\"text/plain\");\n-            Session session = request.getResourceResolver().adaptTo(Session.class);\n-\n-            response.getWriter().printf(\"userid=%s\", session.getUserID());\n-            response.getWriter().println();\n-\n-            for (String prefix : session.getNamespacePrefixes()) {\n-                response.getWriter().printf(\"%s=%s\", prefix, session.getNamespaceURI(prefix));\n-                response.getWriter().println();\n-            }\n-            response.getWriter().flush();\n-        } catch (RepositoryException e) {\n-            throw new ServletException(\"Unable to output namespace mappings\", e);\n-        }\n-    }\n-\n-}",
                "deletions": 66
            }
        ]
    }
]