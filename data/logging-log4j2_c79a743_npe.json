[
    {
        "repo": "logging-log4j2",
        "commit": "https://github.com/apache/logging-log4j2/commit/c79a743b14699a605d2e77950dea8c4818dd978c",
        "bug_id": "logging-log4j2_c79a743",
        "message": "LOG4J2-101 - A NullPointerException would occur if no format value was passed to the SyslogAppender.\n\ngit-svn-id: https://svn.apache.org/repos/asf/logging/log4j/log4j2/trunk@1400254 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/logging-log4j2/commit/21cc0609d363237dd2826a12300b99739fe26cac",
        "patched_files": [
            "changes.xml",
            "index.xml",
            "SyslogAppender.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 1,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/c79a743b14699a605d2e77950dea8c4818dd978c/core/src/main/java/org/apache/logging/log4j/core/appender/SyslogAppender.java",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/core/src/main/java/org/apache/logging/log4j/core/appender/SyslogAppender.java?ref=c79a743b14699a605d2e77950dea8c4818dd978c",
                "filename": "core/src/main/java/org/apache/logging/log4j/core/appender/SyslogAppender.java",
                "deletions": 1,
                "sha": "39fbd3871c94f9dec7ab6b1cc366c7ce318ddc82",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/c79a743b14699a605d2e77950dea8c4818dd978c/core/src/main/java/org/apache/logging/log4j/core/appender/SyslogAppender.java",
                "patch": "@@ -111,7 +111,7 @@ public static SyslogAppender createAppender(@PluginAttr(\"host\") String host,\n                 LOGGER.error(\"Charset \" + charset + \" is not supported for layout, using \" + c.displayName());\n             }\n         }\n-        Layout layout = (format.equalsIgnoreCase(RFC5424)) ?\n+        Layout layout = (RFC5424.equalsIgnoreCase(format)) ?\n             RFC5424Layout.createLayout(facility, id, ein, includeMDC, mdcId, includeNL, appName,  msgId,\n                 excludes, includes, required, charset, config) :\n             SyslogLayout.createLayout(facility, includeNL, charset);",
                "changes": 2
            },
            {
                "status": "modified",
                "additions": 23,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/c79a743b14699a605d2e77950dea8c4818dd978c/core/src/test/java/org/apache/logging/log4j/core/appender/SyslogAppenderTest.java",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/core/src/test/java/org/apache/logging/log4j/core/appender/SyslogAppenderTest.java?ref=c79a743b14699a605d2e77950dea8c4818dd978c",
                "filename": "core/src/test/java/org/apache/logging/log4j/core/appender/SyslogAppenderTest.java",
                "deletions": 0,
                "sha": "d3bc68ca3814640ea9cb3ecf1008085f46e5663e",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/c79a743b14699a605d2e77950dea8c4818dd978c/core/src/test/java/org/apache/logging/log4j/core/appender/SyslogAppenderTest.java",
                "patch": "@@ -120,6 +120,29 @@ public void testTCPAppender() throws Exception {\n     }\n \n \n+    @Test\n+    public void testDefaultAppender() throws Exception {\n+        SyslogAppender appender = createAppender(\"tcp\", null);\n+        appender.start();\n+\n+        // set appender on root and set level to debug\n+        root.addAppender(appender);\n+        root.setAdditive(false);\n+        root.setLevel(Level.DEBUG);\n+        root.debug(\"This is a test message\");\n+        String msg = list.poll(3, TimeUnit.SECONDS);\n+        assertNotNull(\"No event retrieved\", msg);\n+        assertTrue(\"Incorrect msg: \" + msg, msg.endsWith(\"This is a test message\\n\"));\n+        assertTrue(\"Message not delivered via TCP\", tcpCount > 0);\n+        root.debug(\"This is test message 2\");\n+        msg = list.poll(3, TimeUnit.SECONDS);\n+        assertNotNull(\"No event retrieved\", msg);\n+        assertTrue(\"Incorrect msg: \" + msg, msg.endsWith(\"This is test message 2\\n\"));\n+        assertTrue(\"Message not delivered via TCP\", tcpCount > 1);\n+    }\n+\n+\n+\n     @Test\n     public void testTCPStructuredAppender() throws Exception {\n         SyslogAppender appender = createAppender(\"tcp\", \"RFC5424\");",
                "changes": 23
            },
            {
                "status": "modified",
                "additions": 2,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/c79a743b14699a605d2e77950dea8c4818dd978c/flume-ng/src/site/xdoc/index.xml",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/flume-ng/src/site/xdoc/index.xml?ref=c79a743b14699a605d2e77950dea8c4818dd978c",
                "filename": "flume-ng/src/site/xdoc/index.xml",
                "deletions": 1,
                "sha": "56b207388f60bac10df413a4fda77948bea8b270",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/c79a743b14699a605d2e77950dea8c4818dd978c/flume-ng/src/site/xdoc/index.xml",
                "patch": "@@ -30,7 +30,8 @@\n             </p>\n           <subsection name=\"Remote Agent\">\n             <p>\n-\n+              Including the Log4j flume-ng jar in your Maven-based project as a dependency should cause all the\n+              transitive dependencies necessary for the remote Agent to function to be included.\n             </p>\n           </subsection>\n ",
                "changes": 3
            },
            {
                "status": "modified",
                "additions": 3,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/c79a743b14699a605d2e77950dea8c4818dd978c/src/changes/changes.xml",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/src/changes/changes.xml?ref=c79a743b14699a605d2e77950dea8c4818dd978c",
                "filename": "src/changes/changes.xml",
                "deletions": 0,
                "sha": "d7f74922f5484c254d62c2320d3d498293e7bddc",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/c79a743b14699a605d2e77950dea8c4818dd978c/src/changes/changes.xml",
                "patch": "@@ -23,6 +23,9 @@\n \n   <body>\n     <release version=\"2.0-beta3\" date=\"TBD\" description= \"Bug fixes and enhancements\">\n+      <action issue=\"LOG4J2-101\" dev=\"rgoers\" type=\"fix\" due-to=\"Emanuele Colombo\">\n+        A NullPointerException would occur if no format value was passed to the SyslogAppender.\n+      </action>\n       <action issue=\"LOG4J2-99\" dev=\"rgoers\" type=\"fix\" due-to=\"Das Archive\">\n         MapRewritePolicy had an extra call to putAll that caused updates to behave like adds.\n       </action>",
                "changes": 3
            }
        ],
        "unit_tests": [
            "SyslogAppenderTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "core/src/test/java/org/apache/logging/log4j/core/appender/SyslogAppenderTest.java",
        "buggy_files": [
            "src/changes/changes.xml",
            "flume-ng/src/site/xdoc/index.xml",
            "core/src/site/xdoc/index.xml",
            "api/src/site/xdoc/index.xml",
            "web/src/site/xdoc/index.xml",
            "slf4j-impl/src/site/xdoc/index.xml",
            "src/site/xdoc/index.xml",
            "src/site/xdoc/manual/index.xml",
            "log4j12-api/src/site/xdoc/index.xml",
            "jcl-bridge/src/site/xdoc/index.xml",
            "core/src/main/java/org/apache/logging/log4j/core/appender/SyslogAppender.java"
        ],
        "fixed": true
    }
]