[
    {
        "repo": "logging-log4j2",
        "commit": "https://github.com/apache/logging-log4j2/commit/50e1924726c060d8ce3f4e9eae4419c420c9e11b",
        "bug_id": "logging-log4j2_50e1924",
        "message": "LOG4J2-139 - Fix NullPointerException when no protocol is specified. Regression introduced by fix for LOG4J2-228\n\ngit-svn-id: https://svn.apache.org/repos/asf/logging/log4j/log4j2/trunk@1491348 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/logging-log4j2/commit/a130097158d9989718ba141ab354e591133e45f5",
        "patched_files": [
            "changes.xml",
            "SocketAppender.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 1,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/50e1924726c060d8ce3f4e9eae4419c420c9e11b/core/src/main/java/org/apache/logging/log4j/core/appender/SocketAppender.java",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/core/src/main/java/org/apache/logging/log4j/core/appender/SocketAppender.java?ref=50e1924726c060d8ce3f4e9eae4419c420c9e11b",
                "filename": "core/src/main/java/org/apache/logging/log4j/core/appender/SocketAppender.java",
                "deletions": 2,
                "sha": "01701f6cdb1318993a3b97756ddb6fb228369f48",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/50e1924726c060d8ce3f4e9eae4419c420c9e11b/core/src/main/java/org/apache/logging/log4j/core/appender/SocketAppender.java",
                "patch": "@@ -115,8 +115,7 @@ public void stop() {\n             return null;\n         }\n \n-        final String prot = protocol != null ? protocol : Protocol.TCP.name();\n-        final Protocol p = EnglishEnums.valueOf(Protocol.class, protocol);\n+        final Protocol p = EnglishEnums.valueOf(Protocol.class, protocol != null ? protocol : Protocol.TCP.name());\n         if (p.equals(Protocol.UDP)) {\n             isFlush = true;\n         }",
                "changes": 3
            },
            {
                "status": "modified",
                "additions": 9,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/50e1924726c060d8ce3f4e9eae4419c420c9e11b/core/src/test/java/org/apache/logging/log4j/core/appender/SocketAppenderTest.java",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/core/src/test/java/org/apache/logging/log4j/core/appender/SocketAppenderTest.java?ref=50e1924726c060d8ce3f4e9eae4419c420c9e11b",
                "filename": "core/src/test/java/org/apache/logging/log4j/core/appender/SocketAppenderTest.java",
                "deletions": 0,
                "sha": "0bb34050e424101d4f23f7de6e6df853b509852d",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/50e1924726c060d8ce3f4e9eae4419c420c9e11b/core/src/test/java/org/apache/logging/log4j/core/appender/SocketAppenderTest.java",
                "patch": "@@ -122,6 +122,15 @@ public void testTCPAppender() throws Exception {\n         assertTrue(\"Message not delivered via TCP\", tcpCount > 1);\n     }\n \n+    @Test\n+    public void testDefaultProtocol() throws Exception {\n+\n+        final SocketAppender appender = SocketAppender.createAppender(\"localhost\", PORT, null, \"-1\",\n+            \"false\", \"Test\", null, null, null, null, null, null);\n+        assertNotNull(appender);\n+    }\n+\n+\n \n     @Test\n     public void testUDPAppender() throws Exception {",
                "changes": 9
            },
            {
                "status": "modified",
                "additions": 3,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/50e1924726c060d8ce3f4e9eae4419c420c9e11b/src/changes/changes.xml",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/src/changes/changes.xml?ref=50e1924726c060d8ce3f4e9eae4419c420c9e11b",
                "filename": "src/changes/changes.xml",
                "deletions": 0,
                "sha": "96b9416f90414f2f40469082fe3fa59ae34c0670",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/50e1924726c060d8ce3f4e9eae4419c420c9e11b/src/changes/changes.xml",
                "patch": "@@ -23,6 +23,9 @@\n   </properties>\n   <body>\n     <release version=\"2.0-beta8\" date=\"2013-??-??\" description=\"Bug fixes and enhancements\">\n+      <action issue=\"LOG4J2-139\" dev=\"rgoers\" type=\"fix\">\n+        Fix NullPointerException (regression due to fix for LOG4J2-228)\n+      </action>\n       <action issue=\"LOG4J2-168\" dev=\"rgoers\" type=\"update\" due-to=\"Scott Severtson\">\n         Allow elements of the logging event to be added to the mdc structured data in RFC5424Layout.\n       </action>",
                "changes": 3
            }
        ],
        "unit_tests": [
            "SocketAppenderTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "core/src/test/java/org/apache/logging/log4j/core/appender/SocketAppenderTest.java",
        "buggy_files": [
            "src/changes/changes.xml",
            "core/src/main/java/org/apache/logging/log4j/core/appender/SocketAppender.java"
        ],
        "fixed": true
    }
]