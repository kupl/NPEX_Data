[
    {
        "repo": "click",
        "message": "fixed couple of NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@791922 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/a536019466cc585cf1626d3e05b62f10750edf87",
        "parent": "https://github.com/apache/click/commit/78edbddb583291212fc0ab912ca3b761c5c07cd1",
        "bug_id": "click_1",
        "file": [
            {
                "sha": "899254704478609392d89c1f6ad6324ebcb08a45",
                "filename": "framework/src/org/apache/click/service/ClickResourceService.java",
                "blob_url": "https://github.com/apache/click/blob/a536019466cc585cf1626d3e05b62f10750edf87/framework/src/org/apache/click/service/ClickResourceService.java",
                "raw_url": "https://github.com/apache/click/raw/a536019466cc585cf1626d3e05b62f10750edf87/framework/src/org/apache/click/service/ClickResourceService.java",
                "status": "modified",
                "changes": 40,
                "additions": 27,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/org/apache/click/service/ClickResourceService.java?ref=a536019466cc585cf1626d3e05b62f10750edf87",
                "patch": "@@ -156,6 +156,12 @@ private void loadFilesInJar(File jar) throws IOException {\n             // from jar\r\n             boolean logFeedback = true;\r\n             while ((jarEntry = jarInputStream.getNextJarEntry()) != null) {\r\n+\r\n+                // Guard against loading folders -> META-INF/web/click/\r\n+                if (jarEntry.isDirectory()) {\r\n+                    continue;\r\n+                }\r\n+\r\n                 // jarEntryName example -> META-INF/web/click/table.css\r\n                 String jarEntryName = jarEntry.getName();\r\n \r\n@@ -198,6 +204,12 @@ private void loadFilesInJarDir(File dir) throws IOException {\n         while (files.hasNext()) {\r\n             // file example -> META-INF/web/click/table.css\r\n             File file = (File) files.next();\r\n+\r\n+            // Guard against loading folders -> META-INF/web/click/\r\n+            if (file.isDirectory()) {\r\n+                continue;\r\n+            }\r\n+\r\n             String fileName = file.getCanonicalPath().replace('\\\\', '/');\r\n \r\n             // Only deploy resources from \"META-INF/web/\"\r\n@@ -259,24 +271,26 @@ private void loadClickDirResources(ServletContext servletContext)\n \r\n         Set resources = servletContext.getResourcePaths(\"/click/\");\r\n \r\n-        // Add all resources withtin web application\r\n-        for (Iterator i = resources.iterator(); i.hasNext();) {\r\n-            String resource = (String) i.next();\r\n+        if (resources != null) {\r\n+            // Add all resources withtin web application\r\n+            for (Iterator i = resources.iterator(); i.hasNext();) {\r\n+                String resource = (String) i.next();\r\n \r\n-            if (!resource.endsWith(\".htm\")\r\n-                && !resource.endsWith(\".jsp\")\r\n-                && !resource.endsWith(\"/\")) {\r\n+                if (!resource.endsWith(\".htm\") && !resource.endsWith(\".jsp\")\r\n+                    && !resource.endsWith(\"/\")) {\r\n \r\n-                InputStream inputStream = null;\r\n-                try {\r\n-                    inputStream = servletContext.getResourceAsStream(resource);\r\n+                    InputStream inputStream = null;\r\n+                    try {\r\n+                        inputStream = servletContext.getResourceAsStream(\r\n+                            resource);\r\n \r\n-                    byte[] resourceData = IOUtils.toByteArray(inputStream);\r\n+                        byte[] resourceData = IOUtils.toByteArray(inputStream);\r\n \r\n-                     resourceCache.put(resource, resourceData);\r\n+                        resourceCache.put(resource, resourceData);\r\n \r\n-                } finally {\r\n-                    ClickUtils.close(inputStream);\r\n+                    } finally {\r\n+                        ClickUtils.close(inputStream);\r\n+                    }\r\n                 }\r\n             }\r\n         }\r",
                "deletions": 13
            }
        ]
    },
    {
        "repo": "click",
        "message": "fixed NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@717241 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/b62dc26b9ae08c5ee9d1953cdebb140222859aab",
        "parent": "https://github.com/apache/click/commit/d972bf803a5f3bad13c4aa9a4c09cb4ef0c7df6f",
        "bug_id": "click_2",
        "file": [
            {
                "sha": "226fc1add6a0029537df6531f83f74cfe8584942",
                "filename": "framework/src/net/sf/click/util/ErrorReport.java",
                "blob_url": "https://github.com/apache/click/blob/b62dc26b9ae08c5ee9d1953cdebb140222859aab/framework/src/net/sf/click/util/ErrorReport.java",
                "raw_url": "https://github.com/apache/click/raw/b62dc26b9ae08c5ee9d1953cdebb140222859aab/framework/src/net/sf/click/util/ErrorReport.java",
                "status": "modified",
                "changes": 8,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/util/ErrorReport.java?ref=b62dc26b9ae08c5ee9d1953cdebb140222859aab",
                "patch": "@@ -234,7 +234,9 @@ public String toString() {\n         buffer.append(\"<table border='1' cellspacing='1' cellpadding='4' width='100%' style='background-color: white;'>\");\n         buffer.append(\"<tr><td colspan='2' style='color:white; background-color: navy; font-weight: bold'>Page</td></tr>\");\n         buffer.append(\"<tr><td width='12%'><b>Classname</b></td><td>\");\n-        buffer.append(pageClass.getName());\n+        if (pageClass != null) {\n+            buffer.append(pageClass.getName());\n+        }\n         buffer.append(\"</td></tr>\");\n         buffer.append(\"<tr><td width='12%'><b>Path</b></td><td>\");\n         buffer.append(ClickUtils.getResourcePath(request));\n@@ -460,6 +462,10 @@ protected LineNumberReader getSourceReader() {\n     protected LineNumberReader getJavaSourceReader(String filename)\n         throws FileNotFoundException {\n \n+        if (pageClass == null) {\n+            return null;\n+        }\n+\n         // Look for source file on classpath\n         InputStream is = pageClass.getResourceAsStream(filename);\n         if (is != null) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "click",
        "message": "fixed NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@717028 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/151de39518eb50f157f004f75a7a0e8a6ca82f9c",
        "parent": "https://github.com/apache/click/commit/e5bcd7da5fb0e6d68d8e86d3b43487cb6ec412d1",
        "bug_id": "click_3",
        "file": [
            {
                "sha": "ce50ea8aac5db4c200d0b4dd3a4bb4ddb894f1ca",
                "filename": "framework/src/net/sf/click/service/XmlConfigService.java",
                "blob_url": "https://github.com/apache/click/blob/151de39518eb50f157f004f75a7a0e8a6ca82f9c/framework/src/net/sf/click/service/XmlConfigService.java",
                "raw_url": "https://github.com/apache/click/raw/151de39518eb50f157f004f75a7a0e8a6ca82f9c/framework/src/net/sf/click/service/XmlConfigService.java",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/service/XmlConfigService.java?ref=151de39518eb50f157f004f75a7a0e8a6ca82f9c",
                "patch": "@@ -855,13 +855,13 @@ private void loadLogService(Element rootElm) throws Exception {\n             logService = new ConsoleLogService();\r\n         }\r\n \r\n+        logService.onInit(getServletContext());\r\n+        \r\n         if (getLogService().isDebugEnabled()) {\r\n-            String msg = \"initializing LogService: \"\r\n+            String msg = \"initialized LogService: \"\r\n                 + logService.getClass().getName();\r\n             getLogService().debug(msg);\r\n         }\r\n-\r\n-        logService.onInit(getServletContext());\r\n     }\r\n \r\n     private void loadTemplateService(Element rootElm) throws Exception {\r",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "click",
        "message": "mock fix, application reloading fix and NPE handling\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@717015 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/64cb712646c4863e7da310918ad10c229b28b32b",
        "parent": "https://github.com/apache/click/commit/231740fe9b35d6d6342948159908678aa4686e30",
        "bug_id": "click_4",
        "file": [
            {
                "sha": "a26d5549ba06ec64eb5e928bb572005af61846a9",
                "filename": "framework/src/net/sf/click/ClickConfigListener.java",
                "blob_url": "https://github.com/apache/click/blob/64cb712646c4863e7da310918ad10c229b28b32b/framework/src/net/sf/click/ClickConfigListener.java",
                "raw_url": "https://github.com/apache/click/raw/64cb712646c4863e7da310918ad10c229b28b32b/framework/src/net/sf/click/ClickConfigListener.java",
                "status": "modified",
                "changes": 8,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/ClickConfigListener.java?ref=64cb712646c4863e7da310918ad10c229b28b32b",
                "patch": "@@ -64,6 +64,12 @@ public void contextInitialized(ServletContextEvent event) {\n             configService.onInit(servletContext);\r\n \r\n         } catch (Exception e) {\r\n+            // In mock mode this exception can occur if click.xml is not\r\n+            // available.\r\n+            if (servletContext.getAttribute(ClickServlet.MOCK_MODE_ENABLED) != null) {\r\n+                return;\r\n+            }\r\n+\r\n             e.printStackTrace();\r\n \r\n             if (e instanceof RuntimeException) {\r\n@@ -75,7 +81,7 @@ public void contextInitialized(ServletContextEvent event) {\n     }\r\n \r\n     /**\r\n-     * Destory the Click application <tt>ConfigService</tt> instance and remove\r\n+     * Destroy the Click application <tt>ConfigService</tt> instance and remove\r\n      * it as an attribute from the ServletContext.\r\n      *\r\n      * {@link ServletContextListener#contextDestroyed(ServletContextEvent)\r",
                "deletions": 1
            },
            {
                "sha": "93aa6484ff0f32f7fb307cb8c56281e8a5472b8a",
                "filename": "framework/src/net/sf/click/ClickServlet.java",
                "blob_url": "https://github.com/apache/click/blob/64cb712646c4863e7da310918ad10c229b28b32b/framework/src/net/sf/click/ClickServlet.java",
                "raw_url": "https://github.com/apache/click/raw/64cb712646c4863e7da310918ad10c229b28b32b/framework/src/net/sf/click/ClickServlet.java",
                "status": "modified",
                "changes": 15,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/ClickServlet.java?ref=64cb712646c4863e7da310918ad10c229b28b32b",
                "patch": "@@ -27,6 +27,7 @@\n import java.util.TreeMap;\n \n import javax.servlet.RequestDispatcher;\n+import javax.servlet.ServletContextEvent;\n import javax.servlet.ServletException;\n import javax.servlet.UnavailableException;\n import javax.servlet.http.HttpServlet;\n@@ -234,8 +235,11 @@ public void init() throws ServletException {\n         try {\n             // Dereference any allocated objects\n             if (configService != null) {\n-                configService.onDestroy();\n-                configService = null;\n+                // TODO Profile and check for leaks\n+                // Instantiate listener generate initialize context event\n+                ClickConfigListener configListener = new ClickConfigListener();\n+                ServletContextEvent event = new ServletContextEvent(getServletContext());\n+                configListener.contextInitialized(event);\n             }\n \n             // Determine whether the click application is reloadable\n@@ -1370,7 +1374,7 @@ protected void ensureAppInitialized() throws UnavailableException {\n      */\n     protected boolean ifAuthorizedReloadRequest(HttpServletRequest request) {\n         if (reloadable && request.isUserInRole(\"click-admin\")) {\n-            String path = ClickUtils.getResourcePath(request);\n+        String path = ClickUtils.getResourcePath(request);\n \n             return \"/click/reload-app.htm\".equals(path);\n \n@@ -1390,6 +1394,11 @@ protected boolean ifAuthorizedReloadRequest(HttpServletRequest request) {\n     protected void reloadClickApp(HttpServletRequest request,\n             HttpServletResponse response) throws ServletException, IOException {\n \n+        // Instantiate listener generate destroy context event\n+        ClickConfigListener configListener = new ClickConfigListener();\n+        ServletContextEvent event = new ServletContextEvent(getServletContext());\n+        configListener.contextDestroyed(event);\n+\n         init();\n \n         final String msg =",
                "deletions": 3
            },
            {
                "sha": "83c6f455de6b75f615c25fdee03a1fde8d83188d",
                "filename": "framework/src/net/sf/click/service/VelocityTemplateService.java",
                "blob_url": "https://github.com/apache/click/blob/64cb712646c4863e7da310918ad10c229b28b32b/framework/src/net/sf/click/service/VelocityTemplateService.java",
                "raw_url": "https://github.com/apache/click/raw/64cb712646c4863e7da310918ad10c229b28b32b/framework/src/net/sf/click/service/VelocityTemplateService.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/service/VelocityTemplateService.java?ref=64cb712646c4863e7da310918ad10c229b28b32b",
                "patch": "@@ -47,7 +47,7 @@\n  * Provides a <a target=\"_blank\" href=\"http://velocity.apache.org//\">Velocity</a> TemplateService class.\r\n  *\r\n  * <h3>Configuration</h3>\r\n- * The VelocityTemplateService is the default tempating service used by Click,\r\n+ * The VelocityTemplateService is the default template service used by Click,\r\n  * so it does not require any specific configuration.\r\n  * <p/>\r\n  * However if you wanted to configure this service specifically in your\r",
                "deletions": 1
            },
            {
                "sha": "34c160e5d78b5cb3880d274837ac1d70a3507011",
                "filename": "framework/src/net/sf/click/service/XmlConfigService.java",
                "blob_url": "https://github.com/apache/click/blob/64cb712646c4863e7da310918ad10c229b28b32b/framework/src/net/sf/click/service/XmlConfigService.java",
                "raw_url": "https://github.com/apache/click/raw/64cb712646c4863e7da310918ad10c229b28b32b/framework/src/net/sf/click/service/XmlConfigService.java",
                "status": "modified",
                "changes": 12,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/service/XmlConfigService.java?ref=64cb712646c4863e7da310918ad10c229b28b32b",
                "patch": "@@ -181,6 +181,9 @@ public void onInit(ServletContext servletContext) throws Exception {\n \r\n         this.servletContext = servletContext;\r\n \r\n+        // Set default logService early to log errors when services fail.\r\n+        logService = new ConsoleLogService();\r\n+\r\n         InputStream inputStream = ClickUtils.getClickConfig(servletContext);\r\n \r\n         try {\r\n@@ -233,8 +236,13 @@ public void onInit(ServletContext servletContext) throws Exception {\n      * @see ConfigService#onDestroy()\r\n      */\r\n     public void onDestroy() {\r\n-        getFileUploadService().onDestroy();\r\n-        getTemplateService().onDestroy();\r\n+        if (getFileUploadService() != null) {\r\n+            getFileUploadService().onDestroy();\r\n+        }\r\n+\r\n+        if (getTemplateService() != null) {\r\n+            getTemplateService().onDestroy();\r\n+        }        \r\n     }\r\n \r\n     // --------------------------------------------------------- Public Methods\r",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "click",
        "message": "fixed NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@716374 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/83aaa6511a1dfff5098eccfb45ec546ac234b4d3",
        "parent": "https://github.com/apache/click/commit/6425d92a4015c8c9e4375cb244d749bc813e1085",
        "bug_id": "click_5",
        "file": [
            {
                "sha": "4f3ed920ff5c6a1a6994348e2285406bb98dbd48",
                "filename": "framework/src/net/sf/click/control/Table.java",
                "blob_url": "https://github.com/apache/click/blob/83aaa6511a1dfff5098eccfb45ec546ac234b4d3/framework/src/net/sf/click/control/Table.java",
                "raw_url": "https://github.com/apache/click/raw/83aaa6511a1dfff5098eccfb45ec546ac234b4d3/framework/src/net/sf/click/control/Table.java",
                "status": "modified",
                "changes": 5,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/control/Table.java?ref=83aaa6511a1dfff5098eccfb45ec546ac234b4d3",
                "patch": "@@ -669,7 +669,7 @@ public void setRowCount(int rowCount) {\n      */\n     public List getRowList() {\n         if (rowList == null) {\n-            rowList = new ArrayList();\n+            rowList = new ArrayList(0);\n         }\n \n         return rowList;\n@@ -895,8 +895,7 @@ public boolean onProcess() {\n      * @see net.sf.click.Control#onDestroy()\n      */\n     public void onDestroy() {\n-        rowList.clear();\n-        rowList = null;\n+        getRowList().clear();\n         sorted = false;\n \n         for (int i = 0, size = getControls().size(); i < size; i++) {",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "click",
        "message": "fixed NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@716078 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/a1c5d996e6d5f95a81af253e510e1cd8a0322989",
        "parent": "https://github.com/apache/click/commit/b883bca5081f4dffb437de8be2cfaaec8ef2dbfa",
        "bug_id": "click_6",
        "file": [
            {
                "sha": "0ad1c6e5c7b2fe9934736195c19ec3f2657646b5",
                "filename": "extras/src/net/sf/click/extras/control/Menu.java",
                "blob_url": "https://github.com/apache/click/blob/a1c5d996e6d5f95a81af253e510e1cd8a0322989/extras/src/net/sf/click/extras/control/Menu.java",
                "raw_url": "https://github.com/apache/click/raw/a1c5d996e6d5f95a81af253e510e1cd8a0322989/extras/src/net/sf/click/extras/control/Menu.java",
                "status": "modified",
                "changes": 8,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/click/contents/extras/src/net/sf/click/extras/control/Menu.java?ref=a1c5d996e6d5f95a81af253e510e1cd8a0322989",
                "patch": "@@ -661,11 +661,11 @@ public String getHtmlImports() {\n      * @return the menu anchor HREF attribute\n      */\n     public String getHref() {\n-        if (isExternal() || path.equals(\"#\")) {\n-            return path;\n+        if (isExternal() || \"#\".equals(getPath())) {\n+            return getPath();\n \n         } else {\n-            return getContext().getRequest().getContextPath() + \"/\" + path;\n+            return getContext().getRequest().getContextPath() + \"/\" + getPath();\n         }\n     }\n \n@@ -780,7 +780,7 @@ public String toString() {\n             String href = getHref();\n             buffer.appendAttribute(\"href\", href);\n \n-            if (href.equals(\"#\")) {\n+            if (\"#\".equals(href)) {\n                 //If hyperlink does not return false here, clicking on it will scroll\n                 //to the top of the page.\n                 buffer.appendAttribute(\"onclick\", \"return false;\");",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "click",
        "message": "Fixed NPE introduced in 1.2-dev\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@715844 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/1129fef1406168de51a1df192c8a184f4dec335f",
        "parent": "https://github.com/apache/click/commit/3da22e808eafee05eefde91acc8ee6414bf0e8e4",
        "bug_id": "click_7",
        "file": [
            {
                "sha": "e8054fdb8dd149801026075c2a3cb5c62526877a",
                "filename": "framework/src/net/sf/click/ClickServlet.java",
                "blob_url": "https://github.com/apache/click/blob/1129fef1406168de51a1df192c8a184f4dec335f/framework/src/net/sf/click/ClickServlet.java",
                "raw_url": "https://github.com/apache/click/raw/1129fef1406168de51a1df192c8a184f4dec335f/framework/src/net/sf/click/ClickServlet.java",
                "status": "modified",
                "changes": 22,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/ClickServlet.java?ref=1129fef1406168de51a1df192c8a184f4dec335f",
                "patch": "@@ -814,6 +814,7 @@ public void processField(String fieldName, Object fieldValue) {\n             return newPage;\n \n         } catch (Exception e) {\n+e.printStackTrace();\n             throw new RuntimeException(e);\n         }\n     }\n@@ -1280,20 +1281,21 @@ protected Map getRequestParameters(HttpServletRequest request) {\n     protected void processPageFields(Page page, FieldCallback callback) {\n \n         Field[] fields = clickApp.getPageFieldArray(page.getClass());\n+        \n+        if (fields != null) {\n+            for (int i = 0; i < fields.length; i++) {\n+                Field field = fields[i];\n \n-        //Field[] fields = page.getClass().getFields();\n-        for (int i = 0; i < fields.length; i++) {\n-            Field field = fields[i];\n+                try {\n+                    Object fieldValue = field.get(page);\n \n-            try {\n-                Object fieldValue = field.get(page);\n+                    if (fieldValue != null) {\n+                        callback.processField(field.getName(), fieldValue);\n+                    }\n \n-                if (fieldValue != null) {\n-                    callback.processField(field.getName(), fieldValue);\n+                } catch (Exception e) {\n+                    throw new RuntimeException(e);\n                 }\n-\n-            } catch (Exception e) {\n-                throw new RuntimeException(e);\n             }\n         }\n     }",
                "deletions": 10
            }
        ]
    },
    {
        "repo": "click",
        "message": "Fixed NPE when sortedColumn is blank\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@715641 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/c8a1d00c6d1f4afade2ece5e4589064850eba55a",
        "parent": "https://github.com/apache/click/commit/a4316497eff50170ac641fb8c2a4955c9a314d31",
        "bug_id": "click_8",
        "file": [
            {
                "sha": "52db8f7bb448b980a42d963899a0b041cbfa2596",
                "filename": "framework/src/net/sf/click/control/Table.java",
                "blob_url": "https://github.com/apache/click/blob/c8a1d00c6d1f4afade2ece5e4589064850eba55a/framework/src/net/sf/click/control/Table.java",
                "raw_url": "https://github.com/apache/click/raw/c8a1d00c6d1f4afade2ece5e4589064850eba55a/framework/src/net/sf/click/control/Table.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/control/Table.java?ref=c8a1d00c6d1f4afade2ece5e4589064850eba55a",
                "patch": "@@ -1264,7 +1264,7 @@ protected void renderPagingControls(HtmlStringBuffer buffer) {\n      * on the selected column if the row list is not already sorted.\n      */\n     protected void sortRowList() {\n-        if (!isSorted() && getSortedColumn() != null) {\n+        if (!isSorted() && StringUtils.isNotBlank(getSortedColumn())) {\n \n             final Column column = (Column) getColumns().get(getSortedColumn());\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "click",
        "message": "fixed NPE validation error\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@715343 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/eadbf8168b7782a6054f5b11ec74a1468570047c",
        "parent": "https://github.com/apache/click/commit/a4ad324cc4bc2513a42520e36da2c5b245af9ed2",
        "bug_id": "click_9",
        "file": [
            {
                "sha": "de3f58c951126451c6294d674129eb943a6c83cb",
                "filename": "extras/src/net/sf/click/extras/control/CreditCardField.java",
                "blob_url": "https://github.com/apache/click/blob/eadbf8168b7782a6054f5b11ec74a1468570047c/extras/src/net/sf/click/extras/control/CreditCardField.java",
                "raw_url": "https://github.com/apache/click/raw/eadbf8168b7782a6054f5b11ec74a1468570047c/extras/src/net/sf/click/extras/control/CreditCardField.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/click/contents/extras/src/net/sf/click/extras/control/CreditCardField.java?ref=eadbf8168b7782a6054f5b11ec74a1468570047c",
                "patch": "@@ -126,7 +126,7 @@\n     protected static final List CARD_OPTIONS = new ArrayList();\n \n     /** The card type Select name. */\n-    protected static final String SELECT_NAME = \"cardtype\";\n+    protected static final String SELECT_NAME = \"cardType\";\n \n     static {\n         // TODO: localize labels\n@@ -322,7 +322,7 @@ public void validate() {\n                 return;\n             }\n \n-            if (cardType != null) {\n+            if (cardType == null) {\n                 throw new IllegalArgumentException(\"cardType is null\");\n             }\n             final char firstdig = value.charAt(0);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "click",
        "message": "fixed NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@715339 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/073fef462b86f6b90d0361ed26219b498d066a1e",
        "parent": "https://github.com/apache/click/commit/0d815761483645a2fa0cb12ce295537d5e35c672",
        "bug_id": "click_10",
        "file": [
            {
                "sha": "6a7ffb7f0dd00e3015a52648eb758982192ffa54",
                "filename": "framework/src/net/sf/click/control/Table.java",
                "blob_url": "https://github.com/apache/click/blob/073fef462b86f6b90d0361ed26219b498d066a1e/framework/src/net/sf/click/control/Table.java",
                "raw_url": "https://github.com/apache/click/raw/073fef462b86f6b90d0361ed26219b498d066a1e/framework/src/net/sf/click/control/Table.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/control/Table.java?ref=073fef462b86f6b90d0361ed26219b498d066a1e",
                "patch": "@@ -428,7 +428,7 @@ public void addControl(Control control) {\n         if (control == null) {\n             throw new IllegalArgumentException(\"Null control parameter\");\n         }\n-        controlList.add(control);\n+        getControls().add(control);\n     }\n \n     /**",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "click",
        "message": "fix NPE in unit test\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@714813 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/10a3056dc448ea260c8554b27d53d3f69eed54c9",
        "parent": "https://github.com/apache/click/commit/0a493d001862e1a27c001b40615a6744c1973f5f",
        "bug_id": "click_11",
        "file": [
            {
                "sha": "967083603d9b1a56becba433fcd2ee96535b08bc",
                "filename": "extras/src/net/sf/click/extras/control/DateField.java",
                "blob_url": "https://github.com/apache/click/blob/10a3056dc448ea260c8554b27d53d3f69eed54c9/extras/src/net/sf/click/extras/control/DateField.java",
                "raw_url": "https://github.com/apache/click/raw/10a3056dc448ea260c8554b27d53d3f69eed54c9/extras/src/net/sf/click/extras/control/DateField.java",
                "status": "modified",
                "changes": 9,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/click/contents/extras/src/net/sf/click/extras/control/DateField.java?ref=10a3056dc448ea260c8554b27d53d3f69eed54c9",
                "patch": "@@ -24,6 +24,7 @@\n import java.util.Calendar;\n import java.util.Date;\n import java.util.GregorianCalendar;\n+import java.util.Locale;\n \n import javax.servlet.ServletContext;\n import net.sf.click.control.TextField;\n@@ -232,7 +233,13 @@ public void setDate(Date date) {\n      */\n     public SimpleDateFormat getDateFormat() {\n         if (dateFormat == null) {\n-            dateFormat = new SimpleDateFormat(formatPattern, getContext().getLocale());\n+            if (getContext() != null) {\n+                Locale locale = getContext().getLocale();\n+                dateFormat = new SimpleDateFormat(formatPattern, locale);\n+\n+            } else {\n+                dateFormat = new SimpleDateFormat(formatPattern);\n+            }\n         }\n         return dateFormat;\n     }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "click",
        "message": "fix NPE in ClickSerlvet error handling\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@714783 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/75c32d1183434fe39f16fc13364c042bce33ad32",
        "parent": "https://github.com/apache/click/commit/02a226d1383531de6259950cc47f20fe88ca3b0f",
        "bug_id": "click_12",
        "file": [
            {
                "sha": "afc196a1553f9e87077117e4c65b82c153635a6f",
                "filename": "framework/src/net/sf/click/ClickServlet.java",
                "blob_url": "https://github.com/apache/click/blob/75c32d1183434fe39f16fc13364c042bce33ad32/framework/src/net/sf/click/ClickServlet.java",
                "raw_url": "https://github.com/apache/click/raw/75c32d1183434fe39f16fc13364c042bce33ad32/framework/src/net/sf/click/ClickServlet.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/ClickServlet.java?ref=75c32d1183434fe39f16fc13364c042bce33ad32",
                "patch": "@@ -355,7 +355,7 @@ protected void handleRequest(HttpServletRequest request,\n                 page.onDestroy();\n             }\n \n-            if (!clickApp.isProductionMode()) {\n+            if (!clickApp.isProductionMode() && page != null) {\n                 logger.info(\"handleRequest:  \" + page.getPath() + \" - \"\n                             + (System.currentTimeMillis() - startTime) + \" ms\");\n             }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "click",
        "message": "fixed NPE bug\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@714551 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/bf1092e657928af175cb9e4cb865aeeb034509b3",
        "parent": "https://github.com/apache/click/commit/3b1f34c1c698137af79d2f8c82b62be30f863383",
        "bug_id": "click_13",
        "file": [
            {
                "sha": "e85205c3869d2f85cdb1a48819e69bc105ab6128",
                "filename": "framework/src/net/sf/click/util/ErrorReport.java",
                "blob_url": "https://github.com/apache/click/blob/bf1092e657928af175cb9e4cb865aeeb034509b3/framework/src/net/sf/click/util/ErrorReport.java",
                "raw_url": "https://github.com/apache/click/raw/bf1092e657928af175cb9e4cb865aeeb034509b3/framework/src/net/sf/click/util/ErrorReport.java",
                "status": "modified",
                "changes": 12,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/util/ErrorReport.java?ref=bf1092e657928af175cb9e4cb865aeeb034509b3",
                "patch": "@@ -602,11 +602,15 @@ protected String getStackTrace() {\n      */\n     protected void writeMap(Map map, StringBuffer buffer) {\n         for (Iterator i = map.keySet().iterator(); i.hasNext(); ) {\n-            String name = i.next().toString();\n-            String value = map.get(name).toString();\n-            buffer.append(name);\n+            Object key = i.next();\n+            buffer.append(key);\n             buffer.append(\"=\");\n-            buffer.append(StringEscapeUtils.escapeHtml(value));\n+            Object value = map.get(key);\n+            if (value != null) {\n+                buffer.append(StringEscapeUtils.escapeHtml(value.toString()));\n+            } else {\n+                buffer.append(\"null\");\n+            }\n             buffer.append(\"</br>\");\n         }\n         if (map.isEmpty()) {",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "click",
        "message": "fix NPE - ErrorPage should not be constructed with null request\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@717325 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/3e26512a44647871bb5c1fc499bf3ff68ef00596",
        "parent": "https://github.com/apache/click/commit/67fd5f3d5a09dfa55998c26d8ff850cee24c2d3f",
        "bug_id": "click_14",
        "file": [
            {
                "sha": "71dac9fdc28a0a0e19ae302c06e46e347562a9c7",
                "filename": "framework/src/net/sf/click/Context.java",
                "blob_url": "https://github.com/apache/click/blob/3e26512a44647871bb5c1fc499bf3ff68ef00596/framework/src/net/sf/click/Context.java",
                "raw_url": "https://github.com/apache/click/raw/3e26512a44647871bb5c1fc499bf3ff68ef00596/framework/src/net/sf/click/Context.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/Context.java?ref=3e26512a44647871bb5c1fc499bf3ff68ef00596",
                "patch": "@@ -761,7 +761,8 @@ public String renderTemplate(String templatePath, Map model) {\n             clickServlet.getConfigService().getTemplateService();\n \n         try {\n-            templateService.renderTemplate(templatePath, model, stringWriter);\n+            templateService.renderTemplate(templatePath, model, stringWriter,\n+                this);\n \n         } catch (Exception e) {\n             String msg = \"Error occured rendering template: \"",
                "deletions": 1
            },
            {
                "sha": "415d9e1a6916f6f44d1cc17e68208d2eea67563c",
                "filename": "framework/src/net/sf/click/service/TemplateService.java",
                "blob_url": "https://github.com/apache/click/blob/3e26512a44647871bb5c1fc499bf3ff68ef00596/framework/src/net/sf/click/service/TemplateService.java",
                "raw_url": "https://github.com/apache/click/raw/3e26512a44647871bb5c1fc499bf3ff68ef00596/framework/src/net/sf/click/service/TemplateService.java",
                "status": "modified",
                "changes": 6,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/service/TemplateService.java?ref=3e26512a44647871bb5c1fc499bf3ff68ef00596",
                "patch": "@@ -20,6 +20,7 @@\n \r\n import javax.servlet.ServletContext;\r\n \r\n+import net.sf.click.Context;\r\n import net.sf.click.Page;\r\n \r\n /**\r\n@@ -80,9 +81,10 @@\n      * @param templatePath the path of the template to render\r\n      * @param model the model to merge with the template and render\r\n      * @param writer the writer to send the merged template and model data to\r\n+     * @param context the request context\r\n      * @throws Exception if an error occurs\r\n      */\r\n-    public void renderTemplate(String templatePath, Map model, Writer writer)\r\n-        throws Exception;\r\n+    public void renderTemplate(String templatePath, Map model, Writer writer,\r\n+        Context context) throws Exception;\r\n \r\n }\r",
                "deletions": 2
            },
            {
                "sha": "d484f58c52afd570972724fad2a52b44f2938b36",
                "filename": "framework/src/net/sf/click/service/VelocityTemplateService.java",
                "blob_url": "https://github.com/apache/click/blob/3e26512a44647871bb5c1fc499bf3ff68ef00596/framework/src/net/sf/click/service/VelocityTemplateService.java",
                "raw_url": "https://github.com/apache/click/raw/3e26512a44647871bb5c1fc499bf3ff68ef00596/framework/src/net/sf/click/service/VelocityTemplateService.java",
                "status": "modified",
                "changes": 13,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/service/VelocityTemplateService.java?ref=3e26512a44647871bb5c1fc499bf3ff68ef00596",
                "patch": "@@ -27,6 +27,7 @@\n \r\n import javax.servlet.ServletContext;\r\n \r\n+import net.sf.click.Context;\r\n import net.sf.click.Page;\r\n import net.sf.click.util.ClickUtils;\r\n import net.sf.click.util.ErrorReport;\r\n@@ -227,7 +228,7 @@\n     /**\r\n      * @see TemplateService#onInit(ServletContext)\r\n      *\r\n-     * @param servletContext the application servlet context\r\n+     * @param servletContext the application servlet velocityContext\r\n      * @throws Exception if an error occurs initializing the Template Service\r\n      */\r\n     public void onInit(ServletContext servletContext) throws Exception {\r\n@@ -358,10 +359,10 @@ public void renderTemplate(Page page, Map model, Writer writer) throws Exception\n      * @param writer the writer to send the merged template and model data to\r\n      * @throws Exception if an error occurs\r\n      */\r\n-    public void renderTemplate(String templatePath, Map model, Writer writer)\r\n-        throws Exception {\r\n+    public void renderTemplate(String templatePath, Map model, Writer writer,\r\n+        Context context) throws Exception {\r\n \r\n-        final VelocityContext context = new VelocityContext(model);\r\n+        final VelocityContext velocityContext = new VelocityContext(model);\r\n \r\n         // May throw parsing error if template could not be obtained\r\n         Template template = null;\r\n@@ -386,7 +387,7 @@ public void renderTemplate(String templatePath, Map model, Writer writer)\n                 velocityWriter.recycle(writer);\r\n             }\r\n \r\n-            template.merge(context, velocityWriter);\r\n+            template.merge(velocityContext, velocityWriter);\r\n \r\n         } catch (Exception error) {\r\n             // Exception occured merging template and model. It is possible\r\n@@ -396,7 +397,7 @@ public void renderTemplate(String templatePath, Map model, Writer writer)\n                 new ErrorReport(error,\r\n                                 null,\r\n                                 configService.isProductionMode(),\r\n-                                null,\r\n+                                context.getRequest(),\r\n                                 configService.getServletContext());\r\n \r\n             if (velocityWriter == null) {\r",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "click",
        "message": "fix NPE that occurs if new style and old styles are null\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/click/trunk/click@716579 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/click/commit/4ec685cbef54fe64517af8039893135e382caa69",
        "parent": "https://github.com/apache/click/commit/c3068e427afd228eb67a0128d5e3e9d63e8f2420",
        "bug_id": "click_15",
        "file": [
            {
                "sha": "1ea71d35041f1e35e6bfa0bdfec8ba543254c14f",
                "filename": "framework/src/net/sf/click/control/AbstractControl.java",
                "blob_url": "https://github.com/apache/click/blob/4ec685cbef54fe64517af8039893135e382caa69/framework/src/net/sf/click/control/AbstractControl.java",
                "raw_url": "https://github.com/apache/click/raw/4ec685cbef54fe64517af8039893135e382caa69/framework/src/net/sf/click/control/AbstractControl.java",
                "status": "modified",
                "changes": 14,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/click/contents/framework/src/net/sf/click/control/AbstractControl.java?ref=4ec685cbef54fe64517af8039893135e382caa69",
                "patch": "@@ -366,10 +366,16 @@ public void setStyle(String name, String value) {\n \r\n         String oldStyles = getAttribute(\"style\");\r\n \r\n-        //If existing style and value is not null, just append the new style\r\n-        if (oldStyles == null && value != null) {\r\n-            getAttributes().put(\"style\", name + \":\" + value + \";\");\r\n-            return;\r\n+        if (oldStyles == null) {\r\n+\r\n+            if (value == null) {\r\n+                //Exit early\r\n+                return;\r\n+            } else {\r\n+                //If value is not null, append the new style and return\r\n+                getAttributes().put(\"style\", name + \":\" + value + \";\");\r\n+                return;\r\n+            }\r\n         }\r\n \r\n         //Create buffer and estimate the new size\r",
                "deletions": 4
            }
        ]
    }
]