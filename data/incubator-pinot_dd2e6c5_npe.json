[
    {
        "repo": "incubator-pinot",
        "commit": "https://github.com/apache/incubator-pinot/commit/dd2e6c5f55cfe03b2378103258c239ac8d6ccb27",
        "bug_id": "incubator-pinot_dd2e6c5",
        "message": "fixing shema NPE\n\nRB=491262\nR=xiafu,mshrivas\nA=mshrivas",
        "parent": "https://github.com/apache/incubator-pinot/commit/4d7029b25563d718461445e7bed98e0f1ebd8a49",
        "patched_files": [
            "Schema.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 4,
                "raw_url": "https://github.com/apache/incubator-pinot/raw/dd2e6c5f55cfe03b2378103258c239ac8d6ccb27/pinot-common/src/main/java/com/linkedin/pinot/common/data/Schema.java",
                "contents_url": "https://api.github.com/repos/apache/incubator-pinot/contents/pinot-common/src/main/java/com/linkedin/pinot/common/data/Schema.java?ref=dd2e6c5f55cfe03b2378103258c239ac8d6ccb27",
                "filename": "pinot-common/src/main/java/com/linkedin/pinot/common/data/Schema.java",
                "deletions": 0,
                "sha": "0bf566e391f7855ac0704f7fa503e0683c53a7b3",
                "blob_url": "https://github.com/apache/incubator-pinot/blob/dd2e6c5f55cfe03b2378103258c239ac8d6ccb27/pinot-common/src/main/java/com/linkedin/pinot/common/data/Schema.java",
                "patch": "@@ -192,7 +192,11 @@ public void setSchemaName(String schemaName) {\n \n   @JsonIgnore\n   public long getSchemaVersion() {\n+    if (schemaVersion == null) {\n+      return -1;\n+    }\n     return schemaVersion;\n+\n   }\n \n   public void setSchemaVersion(long schemaVersion) {",
                "changes": 4
            },
            {
                "status": "modified",
                "additions": 2,
                "raw_url": "https://github.com/apache/incubator-pinot/raw/dd2e6c5f55cfe03b2378103258c239ac8d6ccb27/pinot-common/src/main/java/com/linkedin/pinot/common/metadata/ZKMetadataProvider.java",
                "contents_url": "https://api.github.com/repos/apache/incubator-pinot/contents/pinot-common/src/main/java/com/linkedin/pinot/common/metadata/ZKMetadataProvider.java?ref=dd2e6c5f55cfe03b2378103258c239ac8d6ccb27",
                "filename": "pinot-common/src/main/java/com/linkedin/pinot/common/metadata/ZKMetadataProvider.java",
                "deletions": 2,
                "sha": "801350a4d47c13aedb5d28262d8f9137f7452bfc",
                "blob_url": "https://github.com/apache/incubator-pinot/blob/dd2e6c5f55cfe03b2378103258c239ac8d6ccb27/pinot-common/src/main/java/com/linkedin/pinot/common/metadata/ZKMetadataProvider.java",
                "patch": "@@ -189,10 +189,10 @@ public static Boolean getClusterTenantIsolationEnabled(ZkHelixPropertyStore<ZNRe\n       if (znRecord.getSimpleFields().keySet().contains(CLUSTER_TENANT_ISOLATION_ENABLED_KEY)) {\n         return znRecord.getBooleanField(CLUSTER_TENANT_ISOLATION_ENABLED_KEY, true);\n       } else {\n-        return null;\n+        return true;\n       }\n     } else {\n-      return null;\n+      return true;\n     }\n   }\n }",
                "changes": 4
            }
        ],
        "unit_tests": [
            "TestSchema.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "pinot-common/src/test/java/com/linkedin/pinot/common/TestSchema.java",
        "buggy_files": [
            "pinot-common/src/main/java/com/linkedin/pinot/common/data/Schema.java"
        ],
        "fixed": true
    }
]