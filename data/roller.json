{
    "roller_3c4fd21": {
        "bug_id": "roller_3c4fd21",
        "commit": "https://github.com/apache/roller/commit/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed",
        "file": [
            {
                "additions": 20,
                "blob_url": "https://github.com/apache/roller/blob/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed/src/org/roller/presentation/velocity/PageModel.java",
                "changes": 34,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/presentation/velocity/PageModel.java?ref=3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed",
                "deletions": 14,
                "filename": "src/org/roller/presentation/velocity/PageModel.java",
                "patch": "@@ -115,16 +115,18 @@ public void init(RollerRequest rreq) {\n     \n     /** Encapsulates folder.getBookmarks() & sorting */\n     public Collection getBookmarks(FolderDataWrapper folder) {\n-        mLogger.debug(\"Getting bookmarks for folder : \"+folder.getName());\n-        \n-        // since we already have a wrapped pojo we know the output\n-        // will be wrapped as well :)\n-        Collection bookmarks = folder.getBookmarks();\n-        \n-        // TODO: need to setup new BookmarkWrapperComparator\n-        //List mBookmarks = new ArrayList(bookmarks);\n-        //Collections.sort( mBookmarks, new BookmarkComparator() );\n-        \n+        Collection bookmarks = null;\n+        if (folder != null) {\n+            mLogger.debug(\"Getting bookmarks for folder : \"+folder.getName());\n+\n+            // since we already have a wrapped pojo we know the output\n+            // will be wrapped as well :)\n+            bookmarks = folder.getBookmarks();\n+\n+            // TODO: need to setup new BookmarkWrapperComparator\n+            //List mBookmarks = new ArrayList(bookmarks);\n+            //Collections.sort( mBookmarks, new BookmarkComparator() );\n+        }\n         return bookmarks;\n     }\n     \n@@ -742,9 +744,13 @@ public List getRecentComments(int maxCount) {\n     }\n     \n     public boolean getEmailComments() {\n-        WebsiteData website = mRollerReq.getWebsite();\n-        boolean emailComments = RollerRuntimeConfig.getBooleanProperty(\"users.comments.emailnotify\");\n-        \n-        return (website.getEmailComments().booleanValue() && emailComments);\n+        if (mRollerReq != null) {\n+            WebsiteData website = mRollerReq.getWebsite();\n+            if (website != null) {\n+                boolean emailComments = RollerRuntimeConfig.getBooleanProperty(\"users.comments.emailnotify\");        \n+                return (website.getEmailComments().booleanValue() && emailComments);\n+            }\n+        }\n+        return false;\n     }\n }",
                "raw_url": "https://github.com/apache/roller/raw/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed/src/org/roller/presentation/velocity/PageModel.java",
                "sha": "8e9ff6ecfbf4a49bcd4ac5762f0f6602db703550",
                "status": "modified"
            },
            {
                "additions": 13,
                "blob_url": "https://github.com/apache/roller/blob/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed/src/org/roller/util/Utilities.java",
                "changes": 23,
                "contents_url": "https://api.github.com/repos/apache/roller/contents/src/org/roller/util/Utilities.java?ref=3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed",
                "deletions": 10,
                "filename": "src/org/roller/util/Utilities.java",
                "patch": "@@ -1057,17 +1057,20 @@ public static final String charToCDATA(char ch)\n         }\n     }\n     \n-    public static final String encode(String s) \n+    public static final String encode(String s)\n     {\n-        try \n-        {\n-            return URLEncoder.encode(s, \"utf-8\");\n-        } \n-        catch (UnsupportedEncodingException e) \n-        {\n-            return s;\n-        }\n-    }\n+       try\n+       {\n+           if (s != null)\n+               return URLEncoder.encode(s, \"utf-8\");\n+           else\n+               return s;\n+       }\n+       catch (UnsupportedEncodingException e)\n+       {\n+           return s;\n+       }\n+   }\n \n     /**\n      * @param string",
                "raw_url": "https://github.com/apache/roller/raw/3c4fd213c1e23cabe046a1647d9a10caf3f3f8ed/src/org/roller/util/Utilities.java",
                "sha": "fd012eeedccc3f86cadc353e05283c8c3aceea1a",
                "status": "modified"
            }
        ],
        "message": "NPE checks from Matt Schmidt\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/roller/trunk@367184 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/roller/commit/056de538ebbef0dbd8947284ef1db2326d66824d",
        "repo": "roller",
        "unit_tests": [
            "UtilitiesTest.java"
        ]
    }
}