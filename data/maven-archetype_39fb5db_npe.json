[
    {
        "repo": "maven-archetype",
        "commit": "https://github.com/apache/maven-archetype/commit/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541",
        "bug_id": "maven-archetype_39fb5db",
        "message": "[ARCHETYPE-117] correct NPE introduced by previous change\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/archetype/trunk@627872 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/maven-archetype/commit/4a0751b5dff7a5f875f0b704a9048fe63dc4a61e",
        "patched_files": [
            "DefaultArchetypeGenerationConfigurator.java",
            "DefaultArchetypeFactory.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 4,
                "raw_url": "https://github.com/apache/maven-archetype/raw/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeFactory.java",
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeFactory.java?ref=39fb5dba2669c8fa8e7e884cd2b03c87d17e3541",
                "filename": "archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeFactory.java",
                "deletions": 1,
                "sha": "dd0f486d489e1dbd43b82e8ab9239be35101420d",
                "blob_url": "https://github.com/apache/maven-archetype/blob/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeFactory.java",
                "patch": "@@ -145,7 +145,10 @@ public ArchetypeConfiguration createArchetypeConfiguration(\n                 )\r\n             );\r\n         }\r\n-        configuration.setDefaultProperty( Constants.PACKAGE, configuration.getProperty( Constants.GROUP_ID ) );\r\n+        if ( configuration.getProperty( Constants.GROUP_ID ) != null )\r\n+        {\r\n+            configuration.setDefaultProperty( Constants.PACKAGE, configuration.getProperty( Constants.GROUP_ID ) );\r\n+        }\r\n \r\n         return configuration;\r\n     }\r",
                "changes": 5
            },
            {
                "status": "modified",
                "additions": 5,
                "raw_url": "https://github.com/apache/maven-archetype/raw/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfigurator.java",
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfigurator.java?ref=39fb5dba2669c8fa8e7e884cd2b03c87d17e3541",
                "filename": "archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfigurator.java",
                "deletions": 2,
                "sha": "fd4a2ab2bca697a223fe25146fcfb3c12a32aa72",
                "blob_url": "https://github.com/apache/maven-archetype/blob/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfigurator.java",
                "patch": "@@ -196,8 +196,11 @@ else if ( !archetypeGenerationQueryer.confirmConfiguration( archetypeConfigurati\n \n                     if ( !archetypeConfiguration.isConfigured( requiredProperty ) )\n                     {\n-                        archetypeConfiguration.setProperty( requiredProperty, archetypeConfiguration.getDefaultValue(\n-                            requiredProperty ) );\n+                        if ( archetypeConfiguration.getDefaultValue( requiredProperty ) != null )\n+                        {\n+                            archetypeConfiguration.setProperty( requiredProperty, archetypeConfiguration.getDefaultValue(\n+                                requiredProperty ) );\n+                        }\n                     }\n                 }\n ",
                "changes": 7
            },
            {
                "status": "modified",
                "additions": 23,
                "raw_url": "https://github.com/apache/maven-archetype/raw/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/test/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfiguratorTest.java",
                "contents_url": "https://api.github.com/repos/apache/maven-archetype/contents/archetype-plugin/src/test/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfiguratorTest.java?ref=39fb5dba2669c8fa8e7e884cd2b03c87d17e3541",
                "filename": "archetype-plugin/src/test/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfiguratorTest.java",
                "deletions": 0,
                "sha": "b21878e98c1b4fb9d19fa9329624cc28ed26b7a6",
                "blob_url": "https://github.com/apache/maven-archetype/blob/39fb5dba2669c8fa8e7e884cd2b03c87d17e3541/archetype-plugin/src/test/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfiguratorTest.java",
                "patch": "@@ -108,4 +108,27 @@ public void testOldArchetypeGeneratedFieldsDefaultsBatchMode()\n         assertEquals( \"1.0-SNAPSHOT\", request.getVersion() );\n         assertEquals( \"preset-groupId\", request.getPackage() );\n     }\n+\n+    // TODO: should test this in interactive mode to check for prompting\n+    public void testOldArchetypeGeneratedFieldsDefaultsMissingGroupId()\n+        throws PrompterException, IOException, UnknownGroup, ArchetypeSelectionFailure, UnknownArchetype,\n+        ArchetypeNotDefined, ArchetypeGenerationConfigurationFailure\n+    {\n+        ArchetypeGenerationRequest request = new ArchetypeGenerationRequest();\n+        request.setArchetypeGroupId( \"archetypeGroupId\" );\n+        request.setArchetypeArtifactId( \"archetypeArtifactId\" );\n+        request.setArchetypeVersion( \"archetypeVersion\" );\n+        Properties properties = new Properties();\n+        properties.setProperty( \"artifactId\", \"preset-artifactId\" );\n+\n+        try\n+        {\n+            configurator.configureArchetype( request, Boolean.FALSE, properties );\n+            fail( \"Archetype was not fully configured - fail\" );\n+        }\n+        catch ( ArchetypeNotConfigured archetypeNotDefined )\n+        {\n+            assertTrue( true );\n+        }\n+    }\n }\n\\ No newline at end of file",
                "changes": 23
            }
        ],
        "unit_tests": [
            "DefaultArchetypeGenerationConfiguratorTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "archetype-plugin/src/test/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfiguratorTest.java",
        "buggy_files": [
            "archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeGenerationConfigurator.java",
            "archetype-plugin/src/main/java/org/apache/maven/archetype/ui/DefaultArchetypeFactory.java"
        ],
        "fixed": true
    }
]