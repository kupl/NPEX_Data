[
    {
        "repo": "openwebbeans",
        "commit": "https://github.com/apache/openwebbeans/commit/8683219416647e69ff55c703a5e559493a982aef",
        "bug_id": "openwebbeans_8683219",
        "message": "avoid NPE in InstanceImpl\n\ngit-svn-id: https://svn.apache.org/repos/asf/openwebbeans/trunk@1631174 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/openwebbeans/commit/472e160a8d0b5594493ee3686d859d8bc7046249",
        "patched_files": [
            "InstanceImpl.java",
            "OwbCDI.java",
            "OwbCDIProvider.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 0,
                "raw_url": "https://github.com/apache/openwebbeans/raw/8683219416647e69ff55c703a5e559493a982aef/webbeans-impl/src/main/java/org/apache/webbeans/container/OwbCDI.java",
                "contents_url": "https://api.github.com/repos/apache/openwebbeans/contents/webbeans-impl/src/main/java/org/apache/webbeans/container/OwbCDI.java?ref=8683219416647e69ff55c703a5e559493a982aef",
                "filename": "webbeans-impl/src/main/java/org/apache/webbeans/container/OwbCDI.java",
                "deletions": 7,
                "sha": "4d60b17f395f93b697cb8bd83742d3f88f8f39f5",
                "blob_url": "https://github.com/apache/openwebbeans/blob/8683219416647e69ff55c703a5e559493a982aef/webbeans-impl/src/main/java/org/apache/webbeans/container/OwbCDI.java",
                "patch": "@@ -26,17 +26,12 @@\n import javax.enterprise.inject.Instance;\n import javax.enterprise.inject.spi.BeanManager;\n import javax.enterprise.inject.spi.CDI;\n-import javax.enterprise.inject.spi.InjectionPoint;\n import javax.enterprise.util.TypeLiteral;\n-import javax.inject.Inject;\n import java.lang.annotation.Annotation;\n import java.util.Iterator;\n \n public class OwbCDI extends CDI<Object>\n {\n-    @Inject\n-    private Instance<Object> injectionPoint;\n-\n     private WebBeansContext getWebBeansContext()\n     {\n         return WebBeansContext.currentInstance();\n@@ -47,8 +42,6 @@ private WebBeansContext getWebBeansContext()\n         final WebBeansContext webBeansContext = getWebBeansContext();\n         final BeanManagerImpl bm = webBeansContext.getBeanManagerImpl();\n         final CreationalContextImpl<Instance<Object>> creationalContext = bm.createCreationalContext(null);\n-        final InjectionPoint injectionPoint1 = bm.createInjectionTarget(bm.createAnnotatedType(OwbCDI.class)).getInjectionPoints().iterator().next();\n-        creationalContext.putInjectionPoint(injectionPoint1);\n         return new InstanceBean<Object>(webBeansContext).create(creationalContext);\n     }\n ",
                "changes": 7
            },
            {
                "status": "modified",
                "additions": 1,
                "raw_url": "https://github.com/apache/openwebbeans/raw/8683219416647e69ff55c703a5e559493a982aef/webbeans-impl/src/main/java/org/apache/webbeans/inject/instance/InstanceImpl.java",
                "contents_url": "https://api.github.com/repos/apache/openwebbeans/contents/webbeans-impl/src/main/java/org/apache/webbeans/inject/instance/InstanceImpl.java?ref=8683219416647e69ff55c703a5e559493a982aef",
                "filename": "webbeans-impl/src/main/java/org/apache/webbeans/inject/instance/InstanceImpl.java",
                "deletions": 1,
                "sha": "c881207c0ca9984927afe2b6e44477a02e1430d8",
                "blob_url": "https://github.com/apache/openwebbeans/blob/8683219416647e69ff55c703a5e559493a982aef/webbeans-impl/src/main/java/org/apache/webbeans/inject/instance/InstanceImpl.java",
                "patch": "@@ -163,7 +163,7 @@ public T get()\n \n         InjectionResolver injectionResolver = webBeansContext.getBeanManagerImpl().getInjectionResolver();\n \n-        Bean<?> injectionPointBean = injectionPoint.getBean();\n+        Bean<?> injectionPointBean = injectionPoint != null ? injectionPoint.getBean() : null;\n         Class<?> injectionPointClass = null;\n         if (injectionPointBean != null)\n         {",
                "changes": 2
            },
            {
                "status": "modified",
                "additions": 2,
                "raw_url": "https://github.com/apache/openwebbeans/raw/8683219416647e69ff55c703a5e559493a982aef/webbeans-impl/src/test/java/org/apache/webbeans/container/OwbCDIProviderTest.java",
                "contents_url": "https://api.github.com/repos/apache/openwebbeans/contents/webbeans-impl/src/test/java/org/apache/webbeans/container/OwbCDIProviderTest.java?ref=8683219416647e69ff55c703a5e559493a982aef",
                "filename": "webbeans-impl/src/test/java/org/apache/webbeans/container/OwbCDIProviderTest.java",
                "deletions": 1,
                "sha": "4996812a86949af714ab940f14961d304c8e25f4",
                "blob_url": "https://github.com/apache/openwebbeans/blob/8683219416647e69ff55c703a5e559493a982aef/webbeans-impl/src/test/java/org/apache/webbeans/container/OwbCDIProviderTest.java",
                "patch": "@@ -36,6 +36,7 @@ public void run()\n         assertNotNull(CDI.current());\n         assertNotNull(CDI.current().getBeanManager());\n         assertFalse(CDI.current().isUnsatisfied());\n-        assertTrue(CDI.current().isAmbiguous());\n+        assertFalse(CDI.current().isAmbiguous());\n+        assertNotNull(CDI.current().get());\n     }\n }",
                "changes": 3
            }
        ],
        "unit_tests": [
            "OwbCDIProviderTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "webbeans-impl/src/test/java/org/apache/webbeans/container/OwbCDIProviderTest.java",
        "buggy_files": [
            "webbeans-impl/src/main/java/org/apache/webbeans/inject/instance/InstanceImpl.java",
            "webbeans-impl/src/main/java/org/apache/webbeans/container/OwbCDI.java",
            "webbeans-impl/src/main/java/org/apache/webbeans/container/OwbCDIProvider.java"
        ],
        "fixed": true
    }
]