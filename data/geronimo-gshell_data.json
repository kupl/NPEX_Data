[
    {
        "repo": "geronimo-gshell",
        "message": "SMX4-123: Fix possible NPE on AIX\n\ngit-svn-id: https://svn.apache.org/repos/asf/geronimo/gshell/trunk@707439 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/geronimo-gshell/commit/08c3a6a83cbf81c1d336d88c10be56e3357a820d",
        "parent": "https://github.com/apache/geronimo-gshell/commit/14da1c070c31350422ab8a673a64d9f5594f3bbe",
        "bug_id": "geronimo-gshell_1",
        "file": [
            {
                "sha": "326245db3cedac17075c8462785c2b82bc84ddc3",
                "filename": "gshell-support/gshell-clp/src/main/java/org/apache/geronimo/gshell/clp/Descriptor.java",
                "blob_url": "https://github.com/apache/geronimo-gshell/blob/08c3a6a83cbf81c1d336d88c10be56e3357a820d/gshell-support/gshell-clp/src/main/java/org/apache/geronimo/gshell/clp/Descriptor.java",
                "raw_url": "https://github.com/apache/geronimo-gshell/raw/08c3a6a83cbf81c1d336d88c10be56e3357a820d/gshell-support/gshell-clp/src/main/java/org/apache/geronimo/gshell/clp/Descriptor.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/geronimo-gshell/contents/gshell-support/gshell-clp/src/main/java/org/apache/geronimo/gshell/clp/Descriptor.java?ref=08c3a6a83cbf81c1d336d88c10be56e3357a820d",
                "patch": "@@ -61,7 +61,8 @@ protected Descriptor(final String id, final String description, final String tok\n         }\n         \n         this.required = required;\n-        this.handler = handler;\n+        // On IBM JDK, the value passed is null instead of the default value, so fix it in case\n+        this.handler = handler != null ? handler : Handler.class;\n         this.multiValued = multiValued;\n     }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "geronimo-gshell",
        "message": "Make accessors NPE safe\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/geronimo/gshell/trunk@662175 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/geronimo-gshell/commit/0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1",
        "parent": "https://github.com/apache/geronimo-gshell/commit/d0a258790dba956b11503efc9ffea360d2dc7052",
        "bug_id": "geronimo-gshell_2",
        "file": [
            {
                "sha": "ab4dc680f0e67f3bc812fccd55cfd300ac97049c",
                "filename": "gshell-model/src/main/java/org/apache/geronimo/gshell/model/command/Command.java",
                "blob_url": "https://github.com/apache/geronimo-gshell/blob/0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1/gshell-model/src/main/java/org/apache/geronimo/gshell/model/command/Command.java",
                "raw_url": "https://github.com/apache/geronimo-gshell/raw/0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1/gshell-model/src/main/java/org/apache/geronimo/gshell/model/command/Command.java",
                "status": "modified",
                "changes": 10,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/geronimo-gshell/contents/gshell-model/src/main/java/org/apache/geronimo/gshell/model/command/Command.java?ref=0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1",
                "patch": "@@ -46,10 +46,6 @@\n \n     private String version;\n \n-    //\n-    // FIXME: Make collection accessors null-safe\n-    //\n-    \n     private List<Parameter> parameters;\n \n     private List<Requirement> requirements;\n@@ -95,6 +91,9 @@ public void setVersion(final String version) {\n     }\n \n     public List<Parameter> getParameters() {\n+        if (parameters == null) {\n+            parameters = new ArrayList<Parameter>();\n+        }\n         return parameters;\n     }\n \n@@ -117,6 +116,9 @@ public boolean hasParameters() {\n     }\n \n     public List<Requirement> getRequirements() {\n+        if (requirements == null) {\n+            requirements = new ArrayList<Requirement>();\n+        }\n         return requirements;\n     }\n ",
                "deletions": 4
            },
            {
                "sha": "9cc389713b71abf66557cea7d750d8e463268826",
                "filename": "gshell-model/src/main/java/org/apache/geronimo/gshell/model/command/CommandSet.java",
                "blob_url": "https://github.com/apache/geronimo-gshell/blob/0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1/gshell-model/src/main/java/org/apache/geronimo/gshell/model/command/CommandSet.java",
                "raw_url": "https://github.com/apache/geronimo-gshell/raw/0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1/gshell-model/src/main/java/org/apache/geronimo/gshell/model/command/CommandSet.java",
                "status": "modified",
                "changes": 7,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/geronimo-gshell/contents/gshell-model/src/main/java/org/apache/geronimo/gshell/model/command/CommandSet.java?ref=0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1",
                "patch": "@@ -41,10 +41,6 @@\n \n     private String description;\n \n-    //\n-    // FIXME: Make collection accessors null-safe\n-    //\n-\n     private List<Command> commands;\n \n     public CommandSet() {}\n@@ -74,6 +70,9 @@ public void setDescription(final String description) {\n     }\n \n     public List<Command> getCommands() {\n+        if (commands == null) {\n+            commands = new ArrayList<Command>();\n+        }\n         return commands;\n     }\n ",
                "deletions": 4
            },
            {
                "sha": "2199414b2530fa441f442fbac0ada45a4d880977",
                "filename": "gshell-model/src/main/java/org/apache/geronimo/gshell/model/plugin/Plugin.java",
                "blob_url": "https://github.com/apache/geronimo-gshell/blob/0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1/gshell-model/src/main/java/org/apache/geronimo/gshell/model/plugin/Plugin.java",
                "raw_url": "https://github.com/apache/geronimo-gshell/raw/0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1/gshell-model/src/main/java/org/apache/geronimo/gshell/model/plugin/Plugin.java",
                "status": "modified",
                "changes": 4,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/geronimo-gshell/contents/gshell-model/src/main/java/org/apache/geronimo/gshell/model/plugin/Plugin.java?ref=0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1",
                "patch": "@@ -46,10 +46,6 @@\n \n     private List<DependencyGroup> dependencyGroups;\n \n-    //\n-    // FIXME: Make collection accessors null-safe\n-    //\n-\n     private List<Command> commands;\n \n     private Layout layout;",
                "deletions": 4
            },
            {
                "sha": "c143a0be40c20aca754848d75ca94ffba01aa5cd",
                "filename": "gshell-plugin/src/main/java/org/apache/geronimo/gshell/application/DefaultApplicationManager.java",
                "blob_url": "https://github.com/apache/geronimo-gshell/blob/0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1/gshell-plugin/src/main/java/org/apache/geronimo/gshell/application/DefaultApplicationManager.java",
                "raw_url": "https://github.com/apache/geronimo-gshell/raw/0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1/gshell-plugin/src/main/java/org/apache/geronimo/gshell/application/DefaultApplicationManager.java",
                "status": "modified",
                "changes": 1,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/geronimo-gshell/contents/gshell-plugin/src/main/java/org/apache/geronimo/gshell/application/DefaultApplicationManager.java?ref=0f4de296767e8cca4f6b1ebb4fbb27b26ec382c1",
                "patch": "@@ -181,7 +181,6 @@ private void configureArtifactManager(final Application application) throws Exce\n         LocalRepository localRepository = application.getLocalRepository();\n \n         if (localRepository != null) {\n-            // FIXME: Need to root the local repo's directory to user.home if its relative for now util ${user.home} expansion is supported\n             artifactManager.getRepositoryManager().setLocalRepository(localRepository.getDirectoryFile());\n         }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "geronimo-gshell",
        "message": "Use getAction() to allow state to work as desired, this fixed NPE when using links\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/geronimo/gshell/trunk@699826 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/geronimo-gshell/commit/afac0c4a51338cec370216854074af4cfca181c0",
        "parent": "https://github.com/apache/geronimo-gshell/commit/e5fb7d469e6acabf944e1751b3acf6b1cbc31bce",
        "bug_id": "geronimo-gshell_3",
        "file": [
            {
                "sha": "ceb02e46091cb08a5b3081e60e3acaec3aed39d2",
                "filename": "gshell-wisdom/gshell-wisdom-core/src/main/java/org/apache/geronimo/gshell/wisdom/command/CommandSupport.java",
                "blob_url": "https://github.com/apache/geronimo-gshell/blob/afac0c4a51338cec370216854074af4cfca181c0/gshell-wisdom/gshell-wisdom-core/src/main/java/org/apache/geronimo/gshell/wisdom/command/CommandSupport.java",
                "raw_url": "https://github.com/apache/geronimo-gshell/raw/afac0c4a51338cec370216854074af4cfca181c0/gshell-wisdom/gshell-wisdom-core/src/main/java/org/apache/geronimo/gshell/wisdom/command/CommandSupport.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/geronimo-gshell/contents/gshell-wisdom/gshell-wisdom-core/src/main/java/org/apache/geronimo/gshell/wisdom/command/CommandSupport.java?ref=afac0c4a51338cec370216854074af4cfca181c0",
                "patch": "@@ -285,6 +285,8 @@ public Command getCommand() {\n         CommandResult result;\n \n         try {\n+            CommandAction action = getAction();\n+            \n             log.trace(\"Executing action: {}\", action);\n \n             Object value = action.execute(ctx);",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "geronimo-gshell",
        "message": "Prevent NPE when RM closes and processes registrations which are not active.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/geronimo/gshell/trunk@662994 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/geronimo-gshell/commit/8dc1908eb7c68f9db1def88ba3a66dffe9410495",
        "parent": "https://github.com/apache/geronimo-gshell/commit/c514f4f6aeaf0bb73ab0527ac0b588b011fc7eee",
        "bug_id": "geronimo-gshell_4",
        "file": [
            {
                "sha": "5313d9ebf577b05b34559bb5157b5ab231ad9634",
                "filename": "gshell-remote/gshell-whisper/src/main/java/org/apache/geronimo/gshell/whisper/request/RequestManager.java",
                "blob_url": "https://github.com/apache/geronimo-gshell/blob/8dc1908eb7c68f9db1def88ba3a66dffe9410495/gshell-remote/gshell-whisper/src/main/java/org/apache/geronimo/gshell/whisper/request/RequestManager.java",
                "raw_url": "https://github.com/apache/geronimo-gshell/raw/8dc1908eb7c68f9db1def88ba3a66dffe9410495/gshell-remote/gshell-whisper/src/main/java/org/apache/geronimo/gshell/whisper/request/RequestManager.java",
                "status": "modified",
                "changes": 23,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/geronimo-gshell/contents/gshell-remote/gshell-whisper/src/main/java/org/apache/geronimo/gshell/whisper/request/RequestManager.java?ref=8dc1908eb7c68f9db1def88ba3a66dffe9410495",
                "patch": "@@ -302,18 +302,23 @@ else if (timeoutFuture.cancel(false)) {\n         }\n \n         public void timeout() {\n-            Message.ID id = request.getId();\n-\n-            if (timeoutFuture.isCancelled()) {\n-                throw new TimeoutAbortedException(\"Timeout has been canceled: \" + id);\n-            }\n-            else if (request.isSignaled()) {\n-                throw new TimeoutAbortedException(\"Request has been singled: \" + id);\n+            if (state != RegistrationState.ACTIVE) {\n+                log.debug(\"Can not timeout; state is not ACTIVE, found: {}\", state);\n             }\n             else {\n-                request.timeout();\n+                Message.ID id = request.getId();\n \n-                state = RegistrationState.TIMEDOUT;\n+                if (timeoutFuture.isCancelled()) {\n+                    throw new TimeoutAbortedException(\"Timeout has been canceled: \" + id);\n+                }\n+                else if (request.isSignaled()) {\n+                    throw new TimeoutAbortedException(\"Request has been singled: \" + id);\n+                }\n+                else {\n+                    request.timeout();\n+\n+                    state = RegistrationState.TIMEDOUT;\n+                }\n             }\n         }\n ",
                "deletions": 9
            }
        ]
    }
]