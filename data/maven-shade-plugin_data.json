[
    {
        "repo": "maven-shade-plugin",
        "message": "[MSHADE-253] NullPointerException if minimizeJar == true && packaging == pom\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1788939 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shade-plugin/commit/f8e47e43113266aedf2adffdbc4f4f87c27eefa5",
        "parent": "https://github.com/apache/maven-shade-plugin/commit/9ec5c38475c87178e3955bac9935fc7d456ba91a",
        "bug_id": "maven-shade-plugin_1",
        "file": [
            {
                "sha": "21fb24d8b7101abb2327520ba77adb7fc20ff43c",
                "filename": "src/main/java/org/apache/maven/plugins/shade/filter/MinijarFilter.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/f8e47e43113266aedf2adffdbc4f4f87c27eefa5/src/main/java/org/apache/maven/plugins/shade/filter/MinijarFilter.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/f8e47e43113266aedf2adffdbc4f4f87c27eefa5/src/main/java/org/apache/maven/plugins/shade/filter/MinijarFilter.java",
                "status": "modified",
                "changes": 33,
                "additions": 18,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/main/java/org/apache/maven/plugins/shade/filter/MinijarFilter.java?ref=f8e47e43113266aedf2adffdbc4f4f87c27eefa5",
                "patch": "@@ -86,25 +86,28 @@ public MinijarFilter( MavenProject project, Log log )\n     public MinijarFilter( MavenProject project, Log log, List<SimpleFilter> simpleFilters )\n         throws IOException\n     {\n+      this.log = log;\n \n-        this.log = log;\n+      File artifactFile = project.getArtifact().getFile();\n \n-        Clazzpath cp = new Clazzpath();\n+        if ( artifactFile != null )\n+        {\n+          Clazzpath cp = new Clazzpath();\n \n-        ClazzpathUnit artifactUnit =\n-            cp.addClazzpathUnit( new FileInputStream( project.getArtifact().getFile() ), project.toString() );\n+          ClazzpathUnit artifactUnit = cp.addClazzpathUnit( new FileInputStream( artifactFile ), project.toString() );\n \n-        for ( Artifact dependency : project.getArtifacts() )\n-        {\n-            addDependencyToClasspath( cp, dependency );\n-        }\n+            for ( Artifact dependency : project.getArtifacts() )\n+            {\n+                addDependencyToClasspath( cp, dependency );\n+            }\n \n-        removable = cp.getClazzes();\n-        removePackages( artifactUnit );\n-        removable.removeAll( artifactUnit.getClazzes() );\n-        removable.removeAll( artifactUnit.getTransitiveDependencies() );\n-        removeSpecificallyIncludedClasses( project, simpleFilters == null ? Collections.<SimpleFilter>emptyList()\n-                        : simpleFilters );\n+            removable = cp.getClazzes();\n+            removePackages( artifactUnit );\n+            removable.removeAll( artifactUnit.getClazzes() );\n+            removable.removeAll( artifactUnit.getTransitiveDependencies() );\n+            removeSpecificallyIncludedClasses( project,\n+                simpleFilters == null ? Collections.<SimpleFilter>emptyList() : simpleFilters );\n+        }\n     }\n \n     private ClazzpathUnit addDependencyToClasspath( Clazzpath cp, Artifact dependency )\n@@ -214,7 +217,7 @@ public boolean isFiltered( String classFile )\n         String className = classFile.replace( '/', '.' ).replaceFirst( \"\\\\.class$\", \"\" );\n         Clazz clazz = new Clazz( className );\n \n-        if ( removable.contains( clazz ) )\n+        if ( removable != null && removable.contains( clazz ) )\n         {\n             log.debug( \"Removing \" + className );\n             classesRemoved += 1;",
                "deletions": 15
            }
        ]
    },
    {
        "repo": "maven-shade-plugin",
        "message": "[MSHADE-247] NullpointerException when createSourcesJar = true and source jar cannot be found\nSubmitted by: Anders Smestad\n\nApplied after adding an IT.\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1797263 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shade-plugin/commit/6383165a671407aab80509925f0c1c0572591380",
        "parent": "https://github.com/apache/maven-shade-plugin/commit/49e922776c9545fa971685d7b897094f3285de02",
        "bug_id": "maven-shade-plugin_2",
        "file": [
            {
                "sha": "290042cbebe81bdabc1fcd9adaae07329c5ed142",
                "filename": "src/it/MSHADE-247/pom.xml",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/pom.xml",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/pom.xml",
                "status": "added",
                "changes": 78,
                "additions": 78,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/it/MSHADE-247/pom.xml?ref=6383165a671407aab80509925f0c1c0572591380",
                "patch": "@@ -0,0 +1,78 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n+\r\n+<!--\r\n+Licensed to the Apache Software Foundation (ASF) under one\r\n+or more contributor license agreements.  See the NOTICE file\r\n+distributed with this work for additional information\r\n+regarding copyright ownership.  The ASF licenses this file\r\n+to you under the Apache License, Version 2.0 (the\r\n+\"License\"); you may not use this file except in compliance\r\n+with the License.  You may obtain a copy of the License at\r\n+\r\n+  http://www.apache.org/licenses/LICENSE-2.0\r\n+\r\n+Unless required by applicable law or agreed to in writing,\r\n+software distributed under the License is distributed on an\r\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+KIND, either express or implied.  See the License for the\r\n+specific language governing permissions and limitations\r\n+under the License.\r\n+-->\r\n+\r\n+<project>\r\n+  <modelVersion>4.0.0</modelVersion>\r\n+  <groupId>org.apache.maven.its.shade.csj</groupId>\r\n+  <artifactId>mshade-247</artifactId>\r\n+  <version>1.0</version>\r\n+  <url>https://issues.apache.org/jira/browse/MSHADE-247</url>\r\n+  <description>\r\n+    Test that setting createSourcesJar to true does not fail the build when no sources Jar is available.\r\n+  </description>\r\n+  <repositories>\r\n+    <repository>\r\n+      <id>shade-it</id>\r\n+      <url>file:///${basedir}/repo</url>\r\n+      <releases>\r\n+        <checksumPolicy>ignore</checksumPolicy>\r\n+      </releases>\r\n+      <snapshots>\r\n+        <enabled>false</enabled>\r\n+      </snapshots>\r\n+    </repository>\r\n+  </repositories>\r\n+\r\n+  <dependencies>\r\n+    <dependency>\r\n+      <groupId>org.apache.maven.its.shade.csj</groupId>\r\n+      <artifactId>mshade-247-one</artifactId>\r\n+      <version>0.1</version>\r\n+    </dependency>\r\n+    <dependency>\r\n+      <groupId>org.apache.maven.its.shade.csj</groupId>\r\n+      <artifactId>mshade-247-two</artifactId>\r\n+      <version>0.1</version>\r\n+    </dependency>\r\n+  </dependencies>\r\n+\r\n+  <build>\r\n+    <plugins>\r\n+      <plugin>\r\n+        <groupId>org.apache.maven.plugins</groupId>\r\n+        <artifactId>maven-shade-plugin</artifactId>\r\n+        <version>@project.version@</version>\r\n+        <executions>\r\n+          <execution>\r\n+            <id>shade</id>\r\n+            <phase>package</phase>\r\n+            <goals>\r\n+              <goal>shade</goal>\r\n+            </goals>\r\n+            <configuration>\r\n+              <createSourcesJar>true</createSourcesJar>\r\n+            </configuration>\r\n+          </execution>\r\n+        </executions>\r\n+      </plugin>\r\n+    </plugins>\r\n+  </build>\r\n+</project>\r",
                "deletions": 0
            },
            {
                "sha": "7f6913027fe62b1fb6791d1234df381ef7ff1ba5",
                "filename": "src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1-sources.jar",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1-sources.jar",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1-sources.jar",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1-sources.jar?ref=6383165a671407aab80509925f0c1c0572591380",
                "deletions": 0
            },
            {
                "sha": "4c0c121aa98e707bba363b2cda9934b938fa7c0e",
                "filename": "src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.jar",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.jar",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.jar",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.jar?ref=6383165a671407aab80509925f0c1c0572591380",
                "deletions": 0
            },
            {
                "sha": "d27927b4a3ade265ec7c88406828bc9540fb3401",
                "filename": "src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.pom",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.pom",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.pom",
                "status": "added",
                "changes": 33,
                "additions": 33,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.pom?ref=6383165a671407aab80509925f0c1c0572591380",
                "patch": "@@ -0,0 +1,33 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n+\r\n+<!--\r\n+Licensed to the Apache Software Foundation (ASF) under one\r\n+or more contributor license agreements.  See the NOTICE file\r\n+distributed with this work for additional information\r\n+regarding copyright ownership.  The ASF licenses this file\r\n+to you under the Apache License, Version 2.0 (the\r\n+\"License\"); you may not use this file except in compliance\r\n+with the License.  You may obtain a copy of the License at\r\n+\r\n+  http://www.apache.org/licenses/LICENSE-2.0\r\n+\r\n+Unless required by applicable law or agreed to in writing,\r\n+software distributed under the License is distributed on an\r\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+KIND, either express or implied.  See the License for the\r\n+specific language governing permissions and limitations\r\n+under the License.\r\n+-->\r\n+\r\n+<project>\r\n+  <modelVersion>4.0.0</modelVersion>\r\n+  <groupId>org.apache.maven.its.shade.csj</groupId>\r\n+  <artifactId>mshade-247-one</artifactId>\r\n+  <version>0.1</version>\r\n+  <distributionManagement>\r\n+    <repository>\r\n+      <id>maven-core-it</id>\r\n+      <url>file:///${basedir}/repo</url>\r\n+    </repository>\r\n+  </distributionManagement>\r\n+</project>\r",
                "deletions": 0
            },
            {
                "sha": "f3ffed7d6f0089869bf62929f537419c9dd12e95",
                "filename": "src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.jar",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.jar",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.jar",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.jar?ref=6383165a671407aab80509925f0c1c0572591380",
                "deletions": 0
            },
            {
                "sha": "fbe5e3a18255aa47fb431b8f11e628d0389b644d",
                "filename": "src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.pom",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.pom",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/6383165a671407aab80509925f0c1c0572591380/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.pom",
                "status": "added",
                "changes": 33,
                "additions": 33,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.pom?ref=6383165a671407aab80509925f0c1c0572591380",
                "patch": "@@ -0,0 +1,33 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n+\r\n+<!--\r\n+Licensed to the Apache Software Foundation (ASF) under one\r\n+or more contributor license agreements.  See the NOTICE file\r\n+distributed with this work for additional information\r\n+regarding copyright ownership.  The ASF licenses this file\r\n+to you under the Apache License, Version 2.0 (the\r\n+\"License\"); you may not use this file except in compliance\r\n+with the License.  You may obtain a copy of the License at\r\n+\r\n+  http://www.apache.org/licenses/LICENSE-2.0\r\n+\r\n+Unless required by applicable law or agreed to in writing,\r\n+software distributed under the License is distributed on an\r\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+KIND, either express or implied.  See the License for the\r\n+specific language governing permissions and limitations\r\n+under the License.\r\n+-->\r\n+\r\n+<project>\r\n+  <modelVersion>4.0.0</modelVersion>\r\n+  <groupId>org.apache.maven.its.shade.csj</groupId>\r\n+  <artifactId>mshade-247-two</artifactId>\r\n+  <version>0.1</version>\r\n+  <distributionManagement>\r\n+    <repository>\r\n+      <id>maven-core-it</id>\r\n+      <url>file:///${basedir}/repo</url>\r\n+    </repository>\r\n+  </distributionManagement>\r\n+</project>\r",
                "deletions": 0
            },
            {
                "sha": "89b8f9b6054c0ae8391049ba9fe3195640a67412",
                "filename": "src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/6383165a671407aab80509925f0c1c0572591380/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/6383165a671407aab80509925f0c1c0572591380/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java?ref=6383165a671407aab80509925f0c1c0572591380",
                "patch": "@@ -716,7 +716,7 @@ private File resolveArtifactSources( Artifact artifact )\n         coordinate.setExtension( \"jar\" );\n         coordinate.setClassifier( \"sources\" );\n         \n-        Artifact resolvedArtifact = null;\n+        Artifact resolvedArtifact;\n         try\n         {\n             resolvedArtifact =\n@@ -725,6 +725,7 @@ private File resolveArtifactSources( Artifact artifact )\n         catch ( ArtifactResolverException e )\n         {\n             getLog().warn( \"Could not get sources for \" + artifact );\n+            return null;\n         }\n \n         if ( resolvedArtifact.isResolved() )",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "maven-shade-plugin",
        "message": "[MSHADE-94] NullPointerException on empty relocation pattern (default package)\nSubmitted by Robert Burrell Donkin.\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1300099 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shade-plugin/commit/bcece7bd4d72f2f980abfd575e5b1afafba7af4c",
        "parent": "https://github.com/apache/maven-shade-plugin/commit/088fa83a9fc3dbedf4aa126bed01de79a73079f4",
        "bug_id": "maven-shade-plugin_3",
        "file": [
            {
                "sha": "14322f366ea02715c4d0019d3926918d4089d993",
                "filename": "src/it/empty-relocation-pattern/pom.xml",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/it/empty-relocation-pattern/pom.xml",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/it/empty-relocation-pattern/pom.xml",
                "status": "added",
                "changes": 66,
                "additions": 66,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/it/empty-relocation-pattern/pom.xml?ref=bcece7bd4d72f2f980abfd575e5b1afafba7af4c",
                "patch": "@@ -0,0 +1,66 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<project\n+  xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <groupId>org.apache.maven.its.shade.eant</groupId>\n+  <artifactId>empty-relocation-pattern</artifactId>\n+  <version>0.1</version>\n+  <packaging>jar</packaging>\n+  \n+  <name>MSHADE-94</name>\n+  <description>\n+    Test that NullPointerException is not thrown when pattern parameter is unset.\n+  </description>\n+  \n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-shade-plugin</artifactId>\n+        <version>@project.version@</version>\n+        <executions>\n+          <execution>\n+            <phase>package</phase>\n+            <goals>\n+              <goal>shade</goal>\n+            </goals>\n+  \n+            <configuration>\n+              <relocations>\n+                <relocation>\n+                  <pattern />\n+                  <shadedPattern>org.example</shadedPattern>\n+                </relocation>\n+              </relocations>              \n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+    </plugins>\n+  </build>\n+\n+</project>",
                "deletions": 0
            },
            {
                "sha": "14a618260748822d881bc88344c1a3eb7bee0bf6",
                "filename": "src/it/empty-relocation-shaded-pattern/pom.xml",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/it/empty-relocation-shaded-pattern/pom.xml",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/it/empty-relocation-shaded-pattern/pom.xml",
                "status": "added",
                "changes": 65,
                "additions": 65,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/it/empty-relocation-shaded-pattern/pom.xml?ref=bcece7bd4d72f2f980abfd575e5b1afafba7af4c",
                "patch": "@@ -0,0 +1,65 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<project\n+  xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <groupId>org.apache.maven.its.shade.eant</groupId>\n+  <artifactId>empty-relocation-shaded-pattern</artifactId>\n+  <version>0.1</version>\n+  <packaging>jar</packaging>\n+  \n+  <name>MSHADE-94</name>\n+  <description>\n+    Test that NullPointerException is not thrown when shadedPattern parameter is unset.\n+  </description>\n+  \n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-shade-plugin</artifactId>\n+        <version>@project.version@</version>\n+        <executions>\n+          <execution>\n+            <phase>package</phase>\n+            <goals>\n+              <goal>shade</goal>\n+            </goals>\n+  \n+            <configuration>\n+              <relocations>\n+                <relocation>\n+                  <pattern>org.example</pattern>\n+                  <shadedPattern/>\n+                </relocation>\n+              </relocations>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+    </plugins>\n+  </build>\n+\n+</project>",
                "deletions": 0
            },
            {
                "sha": "198eeedb9082dbb9eb9635590df8b80155a6d0eb",
                "filename": "src/main/java/org/apache/maven/plugins/shade/relocation/SimpleRelocator.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/main/java/org/apache/maven/plugins/shade/relocation/SimpleRelocator.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/main/java/org/apache/maven/plugins/shade/relocation/SimpleRelocator.java",
                "status": "modified",
                "changes": 24,
                "additions": 16,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/main/java/org/apache/maven/plugins/shade/relocation/SimpleRelocator.java?ref=bcece7bd4d72f2f980abfd575e5b1afafba7af4c",
                "patch": "@@ -19,15 +19,15 @@\n  * under the License.\n  */\n \n+import org.codehaus.plexus.util.SelectorUtils;\n+\n import java.util.Collection;\n import java.util.Iterator;\n import java.util.LinkedHashSet;\n import java.util.List;\n import java.util.Set;\n import java.util.regex.Pattern;\n \n-import org.codehaus.plexus.util.SelectorUtils;\n-\n /**\n  * @author Jason van Zyl\n  * @author Mauro Talevi\n@@ -47,18 +47,18 @@\n     private final Set includes;\n \n     private final Set excludes;\n-    \n+\n     private final boolean rawString;\n \n     public SimpleRelocator( String patt, String shadedPattern, List includes, List excludes )\n     {\n         this( patt, shadedPattern, includes, excludes, false );\n     }\n-    \n+\n     public SimpleRelocator( String patt, String shadedPattern, List includes, List excludes, boolean rawString )\n     {\n         this.rawString = rawString;\n-        \n+\n         if ( rawString )\n         {\n             this.pathPattern = patt;\n@@ -69,8 +69,16 @@ public SimpleRelocator( String patt, String shadedPattern, List includes, List e\n         }\n         else\n         {\n-            this.pattern = patt.replace( '/', '.' );\n-            this.pathPattern = patt.replace( '.', '/' );\n+            if ( patt == null )\n+            {\n+                this.pattern = \"\";\n+                this.pathPattern = \"\";\n+            }\n+            else\n+            {\n+                this.pattern = patt.replace( '/', '.' );\n+                this.pathPattern = patt.replace( '.', '/' );\n+            }\n \n             if ( shadedPattern != null )\n             {\n@@ -156,7 +164,7 @@ public boolean canRelocatePath( String path )\n         {\n             return Pattern.compile( pathPattern ).matcher( path ).find();\n         }\n-        \n+\n         if ( path.endsWith( \".class\" ) )\n         {\n             path = path.substring( 0, path.length() - 6 );",
                "deletions": 8
            },
            {
                "sha": "e4e4fb33caa89a5da6503b9d0d18eb37da92e380",
                "filename": "src/test/java/org/apache/maven/plugins/shade/relocation/SimpleRelocatorParameterTest.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/test/java/org/apache/maven/plugins/shade/relocation/SimpleRelocatorParameterTest.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/test/java/org/apache/maven/plugins/shade/relocation/SimpleRelocatorParameterTest.java",
                "status": "added",
                "changes": 49,
                "additions": 49,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/test/java/org/apache/maven/plugins/shade/relocation/SimpleRelocatorParameterTest.java?ref=bcece7bd4d72f2f980abfd575e5b1afafba7af4c",
                "patch": "@@ -0,0 +1,49 @@\n+package org.apache.maven.plugins.shade.relocation;\n+\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+import java.util.Collections;\n+\n+import junit.framework.TestCase;\n+\n+public class SimpleRelocatorParameterTest extends TestCase {\n+\n+\t\n+\tprotected void setUp() throws Exception {\n+\t\tsuper.setUp();\n+\t}\n+\n+\tpublic void testThatNullPatternInConstructorShouldNotThrowNullPointerException() {\n+\t\tconstructThenFailOnNullPointerException(null, \"\");\n+\t}\n+\n+\tpublic void testThatNullShadedPatternInConstructorShouldNotThrowNullPointerException() {\n+\t\tconstructThenFailOnNullPointerException(\"\", null);\n+\t}\n+\t\n+\tprivate void constructThenFailOnNullPointerException(\n+\t\t\tString pattern, String shadedPattern) {\n+\t\ttry {\n+\t\t\tnew SimpleRelocator(pattern, shadedPattern, Collections.EMPTY_LIST, Collections.EMPTY_LIST);\n+\t\t} catch (NullPointerException e) {\n+\t\t\tfail(\"Constructor should not throw null pointer exceptions\");\n+\t\t}\n+\t}\n+}",
                "deletions": 0
            },
            {
                "sha": "b6c16a256fd0cfa941502f7bf138291d9190c470",
                "filename": "src/test/java/org/apache/maven/plugins/shade/relocation/SimpleRelocatorTest.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/test/java/org/apache/maven/plugins/shade/relocation/SimpleRelocatorTest.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/bcece7bd4d72f2f980abfd575e5b1afafba7af4c/src/test/java/org/apache/maven/plugins/shade/relocation/SimpleRelocatorTest.java",
                "status": "modified",
                "changes": 18,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/test/java/org/apache/maven/plugins/shade/relocation/SimpleRelocatorTest.java?ref=bcece7bd4d72f2f980abfd575e5b1afafba7af4c",
                "patch": "@@ -1,12 +1,12 @@\n package org.apache.maven.plugins.shade.relocation;\n \n-import java.util.Arrays;\n-\n import junit.framework.TestCase;\n \n+import java.util.Arrays;\n+\n /**\n  * Test for {@link SimpleRelocator}.\n- * \n+ *\n  * @author Benjamin Bentmann\n  * @version $Id$\n  */\n@@ -28,9 +28,8 @@ public void testCanRelocatePath()\n         assertEquals( false, relocator.canRelocatePath( \"org/Foo/Class\" ) );\n         assertEquals( false, relocator.canRelocatePath( \"org/Foo/Class.class\" ) );\n \n-        relocator =\n-            new SimpleRelocator( \"org.foo\", null, null, Arrays.asList( new String[] { \"org.foo.Excluded\", \"org.foo.public.*\",\n-                \"org.foo.Public*Stuff\" } ) );\n+        relocator = new SimpleRelocator( \"org.foo\", null, null, Arrays.asList(\n+            new String[]{ \"org.foo.Excluded\", \"org.foo.public.*\", \"org.foo.Public*Stuff\" } ) );\n         assertEquals( true, relocator.canRelocatePath( \"org/foo/Class\" ) );\n         assertEquals( true, relocator.canRelocatePath( \"org/foo/Class.class\" ) );\n         assertEquals( true, relocator.canRelocatePath( \"org/foo/excluded\" ) );\n@@ -58,9 +57,8 @@ public void testCanRelocateClass()\n         assertEquals( false, relocator.canRelocateClass( \"com.foo.bar.Class\" ) );\n         assertEquals( false, relocator.canRelocateClass( \"org.Foo.Class\" ) );\n \n-        relocator =\n-            new SimpleRelocator( \"org.foo\", null, null, Arrays.asList( new String[] { \"org.foo.Excluded\", \"org.foo.public.*\",\n-                \"org.foo.Public*Stuff\" } ) );\n+        relocator = new SimpleRelocator( \"org.foo\", null, null, Arrays.asList(\n+            new String[]{ \"org.foo.Excluded\", \"org.foo.public.*\", \"org.foo.Public*Stuff\" } ) );\n         assertEquals( true, relocator.canRelocateClass( \"org.foo.Class\" ) );\n         assertEquals( true, relocator.canRelocateClass( \"org.foo.excluded\" ) );\n         assertEquals( false, relocator.canRelocateClass( \"org.foo.Excluded\" ) );\n@@ -71,7 +69,7 @@ public void testCanRelocateClass()\n         assertEquals( false, relocator.canRelocateClass( \"org.foo.PublicStuff\" ) );\n         assertEquals( false, relocator.canRelocateClass( \"org.foo.PublicUtilStuff\" ) );\n     }\n-    \n+\n     public void testCanRelocateRawString()\n     {\n         SimpleRelocator relocator;",
                "deletions": 10
            }
        ]
    },
    {
        "repo": "maven-shade-plugin",
        "message": "[MSHADE-101] ApacheNoticeResourceTransformer NullPointerException for some licenses when no parameters set.\nSubmitted by Robert Robert Burrell Donkin\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1142204 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shade-plugin/commit/88f188da5f0d352518d8c1441bac1ee25befcad4",
        "parent": "https://github.com/apache/maven-shade-plugin/commit/5217a53bb2bd6569ab8fc23c0e70bc956bfcfc18",
        "bug_id": "maven-shade-plugin_4",
        "file": [
            {
                "sha": "fa4239370c9c15bda9b831069d7d5c345f5a9863",
                "filename": "src/it/empty-apache-notice-transform/pom.xml",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/88f188da5f0d352518d8c1441bac1ee25befcad4/src/it/empty-apache-notice-transform/pom.xml",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/88f188da5f0d352518d8c1441bac1ee25befcad4/src/it/empty-apache-notice-transform/pom.xml",
                "status": "added",
                "changes": 79,
                "additions": 79,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/it/empty-apache-notice-transform/pom.xml?ref=88f188da5f0d352518d8c1441bac1ee25befcad4",
                "patch": "@@ -0,0 +1,79 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<project\n+  xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <groupId>org.apache.maven.its.shade.eant</groupId>\n+  <artifactId>empty-apache-notice-transform</artifactId>\n+  <version>0.1</version>\n+  <packaging>jar</packaging>\n+  \n+  <name>MSHADE-101</name>\n+  <description>\n+    Test that NullPointerException is not thrown when projectName parameter is unset.\n+  </description>\n+  \n+\n+  <dependencies>\n+    <dependency>\n+        <groupId>org.apache.velocity</groupId>\n+        <artifactId>velocity</artifactId>\n+        <version>1.7</version>\n+    </dependency>\n+  \n+    <dependency>\n+      <groupId>junit</groupId>\n+      <artifactId>junit</artifactId>\n+      <version>3.8.1</version>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-shade-plugin</artifactId>\n+        <version>@project.version@</version>\n+        <executions>\n+          <execution>\n+            <phase>package</phase>\n+            <goals>\n+              <goal>shade</goal>\n+            </goals>\n+  \n+            <configuration>\n+               <transformers>\n+                <transformer implementation=\"org.apache.maven.plugins.shade.resource.ApacheNoticeResourceTransformer\">\n+                </transformer>\n+              </transformers>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+    </plugins>\n+  </build>\n+\n+</project>",
                "deletions": 0
            },
            {
                "sha": "79e72a2576afbb7410b13c670729d7a91078b3d2",
                "filename": "src/main/java/org/apache/maven/plugins/shade/resource/ApacheNoticeResourceTransformer.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/88f188da5f0d352518d8c1441bac1ee25befcad4/src/main/java/org/apache/maven/plugins/shade/resource/ApacheNoticeResourceTransformer.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/88f188da5f0d352518d8c1441bac1ee25befcad4/src/main/java/org/apache/maven/plugins/shade/resource/ApacheNoticeResourceTransformer.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/main/java/org/apache/maven/plugins/shade/resource/ApacheNoticeResourceTransformer.java?ref=88f188da5f0d352518d8c1441bac1ee25befcad4",
                "patch": "@@ -49,7 +49,7 @@\n     Set entries = new LinkedHashSet();\n     Map organizationEntries = new LinkedHashMap();\n \n-    String projectName;\n+    String projectName = \"\"; // MSHADE-101 :: NullPointerException when projectName is missing\n     boolean addHeader = true;\n \n     String preamble1 =",
                "deletions": 1
            },
            {
                "sha": "0a114f6a9b06f49474ff7e6c66e4334d0017b106",
                "filename": "src/test/java/org/apache/maven/plugins/shade/resource/ApacheNoticeResourceTransformerParameterTests.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/88f188da5f0d352518d8c1441bac1ee25befcad4/src/test/java/org/apache/maven/plugins/shade/resource/ApacheNoticeResourceTransformerParameterTests.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/88f188da5f0d352518d8c1441bac1ee25befcad4/src/test/java/org/apache/maven/plugins/shade/resource/ApacheNoticeResourceTransformerParameterTests.java",
                "status": "added",
                "changes": 82,
                "additions": 82,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/test/java/org/apache/maven/plugins/shade/resource/ApacheNoticeResourceTransformerParameterTests.java?ref=88f188da5f0d352518d8c1441bac1ee25befcad4",
                "patch": "@@ -0,0 +1,82 @@\n+package org.apache.maven.plugins.shade.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import junit.framework.TestCase;\n+\n+\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+/**\n+ * Tests {@link ApacheLicenseResourceTransformer} parameters.\n+ */\n+public class ApacheNoticeResourceTransformerParameterTests extends TestCase {\n+\t\n+\tprivate static final String NOTICE_RESOURCE = \"META-INF/NOTICE\";\n+\tprivate ApacheNoticeResourceTransformer subject;\n+\n+\tprotected void setUp() throws Exception {\n+\t\tsuper.setUp();\n+\t\tsubject = new ApacheNoticeResourceTransformer();\n+\t}\n+\n+\t\n+\tpublic void testNoParametersShouldNotThrowNullPointerWhenNoInput() throws IOException {\n+\t\tprocessAndFailOnNullPointer(\"\");\n+\t}\n+\t\n+\tpublic void testNoParametersShouldNotThrowNullPointerWhenNoLinesOfInput() throws IOException {\n+\t\tprocessAndFailOnNullPointer(\"Some notice text\");\n+\t}\n+\n+\tpublic void testNoParametersShouldNotThrowNullPointerWhenOneLineOfInput() throws IOException {\n+\t\tprocessAndFailOnNullPointer(\"Some notice text\\n\");\n+\t}\n+\n+\tpublic void testNoParametersShouldNotThrowNullPointerWhenTwoLinesOfInput() throws IOException {\n+\t\tprocessAndFailOnNullPointer(\"Some notice text\\nSome notice text\\n\");\n+\t}\n+\n+\tpublic void testNoParametersShouldNotThrowNullPointerWhenLineStartsWithSlashSlash() throws IOException {\n+\t\tprocessAndFailOnNullPointer(\"Some notice text\\n//Some notice text\\n\");\n+\t}\n+\n+\tpublic void testNoParametersShouldNotThrowNullPointerWhenLineIsSlashSlash() throws IOException {\n+\t\tprocessAndFailOnNullPointer(\"//\\n\");\n+\t}\n+\n+\tpublic void testNoParametersShouldNotThrowNullPointerWhenLineIsEmpty() throws IOException {\n+\t\tprocessAndFailOnNullPointer(\"\\n\");\n+\t}\n+\t\n+\tprivate void processAndFailOnNullPointer(final String noticeText)\n+\t\t\tthrows IOException {\n+\t\ttry {\n+\t\t\tfinal ByteArrayInputStream noticeInputStream = new ByteArrayInputStream(noticeText.getBytes());\n+\t\t\tfinal List emptyList = Collections.EMPTY_LIST;\n+\t\t\tsubject.processResource(NOTICE_RESOURCE, noticeInputStream, emptyList);\n+\t\t} catch (NullPointerException e) {\n+\t\t\tfail(\"Null pointer should not be thrown when no parameters are set.\");\n+\t\t}\n+\t}\n+}",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "maven-shade-plugin",
        "message": "[MSHADE-127] Fixed npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1482543 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shade-plugin/commit/4c37e805c6ec46c69baee645848bd2b66495e51e",
        "parent": "https://github.com/apache/maven-shade-plugin/commit/ba6951729a5dc4e47e6a3bf96784012b20a9876b",
        "bug_id": "maven-shade-plugin_5",
        "file": [
            {
                "sha": "05aecd3ec31b95194091a23aa82d063beeca32fb",
                "filename": "src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/4c37e805c6ec46c69baee645848bd2b66495e51e/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/4c37e805c6ec46c69baee645848bd2b66495e51e/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java",
                "status": "modified",
                "changes": 38,
                "additions": 18,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java?ref=4c37e805c6ec46c69baee645848bd2b66495e51e",
                "patch": "@@ -193,6 +193,7 @@\n      * </pre>\n      * <em>Note:</em> Support for includes exists only since version 1.4.\n      */\n+    @SuppressWarnings( \"MismatchedReadAndWriteOfArray\" )\n     @Parameter\n     private PackageRelocation[] relocations;\n \n@@ -224,6 +225,7 @@\n      * &lt;/filters&gt;\n      * </pre>\n      */\n+    @SuppressWarnings( \"MismatchedReadAndWriteOfArray\" )\n     @Parameter\n     private ArchiveFilter[] filters;\n \n@@ -539,20 +541,23 @@ else if ( !renamed )\n                 {\n                     getLog().info( \"Replacing original artifact with shaded artifact.\" );\n                     File originalArtifact = project.getArtifact().getFile();\n-                    replaceFile( originalArtifact, outputJar );\n-\n-                    if ( createSourcesJar )\n+                    if (originalArtifact != null)\n                     {\n-                        File shadedSources = shadedSourcesArtifactFile();\n+                        replaceFile( originalArtifact, outputJar );\n \n-                        replaceFile( shadedSources, sourcesJar );\n+                        if ( createSourcesJar )\n+                        {\n+                            File shadedSources = shadedSourcesArtifactFile();\n \n-                        projectHelper.attachArtifact( project, \"jar\", \"sources\", shadedSources );\n-                    }\n+                            replaceFile( shadedSources, sourcesJar );\n \n-                    if ( createDependencyReducedPom )\n-                    {\n-                        createDependencyReducedPom( artifactIds );\n+                            projectHelper.attachArtifact( project, \"jar\", \"sources\", shadedSources );\n+                        }\n+\n+                        if ( createDependencyReducedPom )\n+                        {\n+                            createDependencyReducedPom( artifactIds );\n+                        }\n                     }\n                 }\n             }\n@@ -671,10 +676,8 @@ private File resolveArtifactSources( Artifact artifact )\n             return relocators;\n         }\n \n-        for ( int i = 0; i < relocations.length; i++ )\n+        for ( PackageRelocation r : relocations )\n         {\n-            PackageRelocation r = relocations[i];\n-\n             relocators.add( new SimpleRelocator( r.getPattern(), r.getShadedPattern(), r.getIncludes(), r.getExcludes(),\n                                                  r.isRawString() ) );\n         }\n@@ -901,24 +904,19 @@ private void createDependencyReducedPom( Set<String> artifactsToRemove )\n \n                 if ( f.exists() )\n                 {\n+                    //noinspection ResultOfMethodCallIgnored\n                     f.delete();\n                 }\n \n                 Writer w = WriterFactory.newXmlWriter( f );\n \n-                String origRelativePath = null;\n                 String replaceRelativePath = null;\n                 if ( model.getParent() != null )\n                 {\n-                    origRelativePath = model.getParent().getRelativePath();\n+                    replaceRelativePath = model.getParent().getRelativePath();\n \n                 }\n-                replaceRelativePath = origRelativePath;\n \n-                if ( origRelativePath == null )\n-                {\n-                    origRelativePath = \"../pom.xml\";\n-                }\n \n                 if ( model.getParent() != null )\n                 {",
                "deletions": 20
            }
        ]
    },
    {
        "repo": "maven-shade-plugin",
        "message": "backward comp and take care of NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1300049 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shade-plugin/commit/855bc3f766daf8c5254be66c6e6c90f4ef6b9645",
        "parent": "https://github.com/apache/maven-shade-plugin/commit/3307c7b183b745ce449ab48b716e7f210c246b84",
        "bug_id": "maven-shade-plugin_6",
        "file": [
            {
                "sha": "3042ccf155557c4a714117f9e1b03e2dcc95dfe2",
                "filename": "src/main/java/org/apache/maven/plugins/shade/filter/MinijarFilter.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/855bc3f766daf8c5254be66c6e6c90f4ef6b9645/src/main/java/org/apache/maven/plugins/shade/filter/MinijarFilter.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/855bc3f766daf8c5254be66c6e6c90f4ef6b9645/src/main/java/org/apache/maven/plugins/shade/filter/MinijarFilter.java",
                "status": "modified",
                "changes": 15,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/main/java/org/apache/maven/plugins/shade/filter/MinijarFilter.java?ref=855bc3f766daf8c5254be66c6e6c90f4ef6b9645",
                "patch": "@@ -31,6 +31,7 @@\n import java.io.FileInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.util.Collections;\n import java.util.HashSet;\n import java.util.Iterator;\n import java.util.List;\n@@ -53,6 +54,16 @@\n \n     private int classesRemoved;\n \n+    public MinijarFilter( MavenProject project, Log log )\n+        throws IOException\n+    {\n+        this( project, log, Collections.<SimpleFilter>emptyList() );\n+    }\n+\n+    /**\n+     *\n+     * @since 1.6\n+     */\n     public MinijarFilter( MavenProject project, Log log, List<SimpleFilter> simpleFilters )\n         throws IOException\n     {\n@@ -84,7 +95,9 @@ public MinijarFilter( MavenProject project, Log log, List<SimpleFilter> simpleFi\n         removePackages( artifactUnit );\n         removable.removeAll( artifactUnit.getClazzes() );\n         removable.removeAll( artifactUnit.getTransitiveDependencies() );\n-        removeSpecificallyIncludedClasses( project, simpleFilters );\n+        removeSpecificallyIncludedClasses( project, simpleFilters == null\n+            ? Collections.<SimpleFilter>emptyList()\n+            : simpleFilters );\n     }\n \n     private void removePackages( ClazzpathUnit artifactUnit )",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "maven-shade-plugin",
        "message": "[MSHADE-21] NPE when calling mvn shade:shade\n\no Made the goal fail gracefully with a user-friendly error message\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@644068 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-shade-plugin/commit/0f7f6c6d968282815183dcf4149f9aef8d2a060d",
        "parent": "https://github.com/apache/maven-shade-plugin/commit/ce88137e50661a9755f8788b36235191c33ad663",
        "bug_id": "maven-shade-plugin_7",
        "file": [
            {
                "sha": "48f40286321e571bfbf399eb38bc1466b6f40b1c",
                "filename": "src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java",
                "blob_url": "https://github.com/apache/maven-shade-plugin/blob/0f7f6c6d968282815183dcf4149f9aef8d2a060d/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java",
                "raw_url": "https://github.com/apache/maven-shade-plugin/raw/0f7f6c6d968282815183dcf4149f9aef8d2a060d/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java",
                "status": "modified",
                "changes": 13,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/maven-shade-plugin/contents/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java?ref=0f7f6c6d968282815183dcf4149f9aef8d2a060d",
                "patch": "@@ -239,6 +239,19 @@ public void execute()\n         Set artifactIds = new LinkedHashSet();\n         Set sourceArtifacts = new LinkedHashSet();\n \n+        if ( project.getArtifact().getFile() == null )\n+        {\n+            getLog().error( \"The project main artifact does not exist. This could have the following\" );\n+            getLog().error( \"reasons:\" );\n+            getLog().error( \"- You have invoked the goal directly from the command line. This is not\" );\n+            getLog().error( \"  supported. Please add the goal to the default lifecycle via an\" );\n+            getLog().error( \"  <execution> element in your POM and use \\\"mvn package\\\" to have it run.\" );\n+            getLog().error( \"- You have bound the goal to a lifecycle phase before \\\"package\\\". Please\" );\n+            getLog().error( \"  remove this binding from your POM such that the goal will be run in\" );\n+            getLog().error( \"  the proper phase.\" );\n+            throw new MojoExecutionException( \"Failed to create shaded artifact.\",\n+                                              new IllegalStateException( \"Project main artifact does not exist.\" ) );\n+        }\n         artifacts.add( project.getArtifact().getFile() );\n \n         if ( createSourcesJar )",
                "deletions": 0
            }
        ]
    }
]