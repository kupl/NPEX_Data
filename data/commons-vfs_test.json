{
    "commons-vfs_0e681a7": {
        "bug_id": "commons-vfs_0e681a7",
        "commit": "https://github.com/apache/commons-vfs/commit/0e681a785066d2bbecaed0deb9366586d156ca49",
        "file": [
            {
                "additions": 14,
                "blob_url": "https://github.com/apache/commons-vfs/blob/0e681a785066d2bbecaed0deb9366586d156ca49/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpFileContentInfoFactory.java",
                "changes": 17,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpFileContentInfoFactory.java?ref=0e681a785066d2bbecaed0deb9366586d156ca49",
                "deletions": 3,
                "filename": "core/src/main/java/org/apache/commons/vfs2/provider/http/HttpFileContentInfoFactory.java",
                "patch": "@@ -16,8 +16,11 @@\n  */\n package org.apache.commons.vfs2.provider.http;\n \n+import java.io.IOException;\n+\n import org.apache.commons.httpclient.Header;\n import org.apache.commons.httpclient.HeaderElement;\n+import org.apache.commons.httpclient.methods.HeadMethod;\n import org.apache.commons.vfs2.FileContent;\n import org.apache.commons.vfs2.FileContentInfo;\n import org.apache.commons.vfs2.FileContentInfoFactory;\n@@ -26,7 +29,7 @@\n import org.apache.commons.vfs2.util.FileObjectUtils;\n \n /**\n- * Creates the FileContentInfo.\n+ * Creates FileContentInfo instances for HTTP.\n  */\n public class HttpFileContentInfoFactory implements FileContentInfoFactory\n {\n@@ -38,7 +41,15 @@ public FileContentInfo create(FileContent fileContent) throws FileSystemExceptio\n         String contentType = null;\n         String contentEncoding = null;\n \n-        Header header = httpFile.getHeadMethod().getResponseHeader(\"content-type\");\n+        HeadMethod headMethod;\n+        try\n+        {\n+            headMethod = httpFile.getHeadMethod();\n+        } catch (IOException e)\n+        {\n+            throw new FileSystemException(e);\n+        }\n+        Header header = headMethod.getResponseHeader(\"content-type\");\n         if (header != null)\n         {\n             HeaderElement[] element = header.getElements();\n@@ -48,7 +59,7 @@ public FileContentInfo create(FileContent fileContent) throws FileSystemExceptio\n             }\n         }\n \n-        contentEncoding = httpFile.getHeadMethod().getResponseCharSet();\n+        contentEncoding = headMethod.getResponseCharSet();\n \n         return new DefaultFileContentInfo(contentType, contentEncoding);\n     }",
                "raw_url": "https://github.com/apache/commons-vfs/raw/0e681a785066d2bbecaed0deb9366586d156ca49/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpFileContentInfoFactory.java",
                "sha": "3c6cfcfdfc18563fbecd3b8f8d27105e616d6b15",
                "status": "modified"
            },
            {
                "additions": 10,
                "blob_url": "https://github.com/apache/commons-vfs/blob/0e681a785066d2bbecaed0deb9366586d156ca49/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpFileObject.java",
                "changes": 16,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpFileObject.java?ref=0e681a785066d2bbecaed0deb9366586d156ca49",
                "deletions": 6,
                "filename": "core/src/main/java/org/apache/commons/vfs2/provider/http/HttpFileObject.java",
                "patch": "@@ -74,11 +74,7 @@ protected void doDetach() throws Exception\n     protected FileType doGetType() throws Exception\n     {\n         // Use the HEAD method to probe the file.\n-        method = new HeadMethod();\n-        setupMethod(method);\n-        final HttpClient client = fileSystem.getClient();\n-        final int status = client.executeMethod(method);\n-        method.releaseConnection();\n+        final int status = this.getHeadMethod().getStatusCode();\n         if (status == HttpURLConnection.HTTP_OK)\n         {\n             return FileType.FILE;\n@@ -216,8 +212,16 @@ protected FileContentInfoFactory getFileContentInfoFactory()\n         return new HttpFileContentInfoFactory();\n     }\n \n-    HeadMethod getHeadMethod()\n+    HeadMethod getHeadMethod() throws IOException\n     {\n+        if (method != null) {\n+            return method;\n+        }\n+        method = new HeadMethod();\n+        setupMethod(method);\n+        final HttpClient client = fileSystem.getClient();\n+        client.executeMethod(method);\n+        method.releaseConnection();\n         return method;\n     }\n ",
                "raw_url": "https://github.com/apache/commons-vfs/raw/0e681a785066d2bbecaed0deb9366586d156ca49/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpFileObject.java",
                "sha": "c8b044bb5fdd7d2a6bd74b03a8f95f345328cb85",
                "status": "modified"
            },
            {
                "additions": 35,
                "blob_url": "https://github.com/apache/commons-vfs/blob/0e681a785066d2bbecaed0deb9366586d156ca49/core/src/test/java/org/apache/commons/vfs2/provider/http/test/GetContentInfoFunctionalTest.java",
                "changes": 35,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/core/src/test/java/org/apache/commons/vfs2/provider/http/test/GetContentInfoFunctionalTest.java?ref=0e681a785066d2bbecaed0deb9366586d156ca49",
                "deletions": 0,
                "filename": "core/src/test/java/org/apache/commons/vfs2/provider/http/test/GetContentInfoFunctionalTest.java",
                "patch": "@@ -0,0 +1,35 @@\n+package org.apache.commons.vfs2.provider.http.test;\n+\n+import org.apache.commons.vfs2.FileContent;\n+import org.apache.commons.vfs2.FileObject;\n+import org.apache.commons.vfs2.FileSystemException;\n+import org.apache.commons.vfs2.FileSystemManager;\n+import org.apache.commons.vfs2.VFS;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+/**\n+ * Tests VFS-427 NPE on HttpFileObject.getContent().getContentInfo()\n+ * \n+ * @since 2.1\n+ */\n+public class GetContentInfoFunctionalTest\n+{\n+\n+    /**\n+     * Tests VFS-427 NPE on HttpFileObject.getContent().getContentInfo().\n+     * \n+     * @throws FileSystemException\n+     *             thrown when the getContentInfo API fails.\n+     */\n+    @Test\n+    public void testGoogle() throws FileSystemException\n+    {\n+        final FileSystemManager fsManager = VFS.getManager();\n+        final FileObject fo = fsManager.resolveFile(\"http://www.google.com/images/logos/ps_logo2.png\");\n+        final FileContent content = fo.getContent();\n+        Assert.assertNotNull(content);\n+        // Used to NPE before fix:\n+        content.getContentInfo();\n+    }\n+}",
                "raw_url": "https://github.com/apache/commons-vfs/raw/0e681a785066d2bbecaed0deb9366586d156ca49/core/src/test/java/org/apache/commons/vfs2/provider/http/test/GetContentInfoFunctionalTest.java",
                "sha": "7c1c4c5d91c9905baa4c90ec0417de5a78d9100f",
                "status": "added"
            },
            {
                "additions": 35,
                "blob_url": "https://github.com/apache/commons-vfs/blob/0e681a785066d2bbecaed0deb9366586d156ca49/core/src/test/java/org/apache/commons/vfs2/provider/https/test/GetContentInfoFunctionalTest.java",
                "changes": 35,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/core/src/test/java/org/apache/commons/vfs2/provider/https/test/GetContentInfoFunctionalTest.java?ref=0e681a785066d2bbecaed0deb9366586d156ca49",
                "deletions": 0,
                "filename": "core/src/test/java/org/apache/commons/vfs2/provider/https/test/GetContentInfoFunctionalTest.java",
                "patch": "@@ -0,0 +1,35 @@\n+package org.apache.commons.vfs2.provider.https.test;\n+\n+import org.apache.commons.vfs2.FileContent;\n+import org.apache.commons.vfs2.FileObject;\n+import org.apache.commons.vfs2.FileSystemException;\n+import org.apache.commons.vfs2.FileSystemManager;\n+import org.apache.commons.vfs2.VFS;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+/**\n+ * Tests VFS-427 NPE on HttpFileObject.getContent().getContentInfo()\n+ * \n+ * @since 2.1\n+ */\n+public class GetContentInfoFunctionalTest\n+{\n+\n+    /**\n+     * Tests VFS-427 NPE on HttpFileObject.getContent().getContentInfo().\n+     * \n+     * @throws FileSystemException\n+     *             thrown when the getContentInfo API fails.\n+     */\n+    @Test\n+    public void testGoogle() throws FileSystemException\n+    {\n+        final FileSystemManager fsManager = VFS.getManager();\n+        final FileObject fo = fsManager.resolveFile(\"https://www.google.com/images/logos/ps_logo2.png\");\n+        final FileContent content = fo.getContent();\n+        Assert.assertNotNull(content);\n+        // Used to NPE before fix:\n+        content.getContentInfo();\n+    }\n+}",
                "raw_url": "https://github.com/apache/commons-vfs/raw/0e681a785066d2bbecaed0deb9366586d156ca49/core/src/test/java/org/apache/commons/vfs2/provider/https/test/GetContentInfoFunctionalTest.java",
                "sha": "5b9ca1388be1231b1917cfadad52c8e9989819ba",
                "status": "added"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/commons-vfs/blob/0e681a785066d2bbecaed0deb9366586d156ca49/src/changes/changes.xml",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/src/changes/changes.xml?ref=0e681a785066d2bbecaed0deb9366586d156ca49",
                "deletions": 1,
                "filename": "src/changes/changes.xml",
                "patch": "@@ -23,6 +23,9 @@\n \n   <body>\n     <release version=\"2.1\" date=\"TBD\" description=\"New features and bug fix release.\">\n+      <action issue=\"VFS-427\" dev=\"ggregory\" type=\"add\" due-to=\"awelynant\">\n+        [HTTP] NPE on HttpFileObject.getContent().getContentInfo().\n+      </action>\n       <action issue=\"VFS-405\" dev=\"ggregory\" type=\"add\" due-to=\"dwaszak\">\n         Get/set the file permissions.\n       </action>\n@@ -108,7 +111,7 @@\n         [RAM] Reading a RAM FileSystem file fails because it never returns EOF -1.\n       </action>\n       <action issue=\"VFS-404\" dev=\"ggregory\" type=\"update\">\n-        [FTP][FTPS] Update Apache Commons Net to 3.1 from 3.0.1\n+        [FTP][FTPS] Update Apache Commons Net to 3.1 from 3.0.1.\n       </action>\n       <action issue=\"VFS-402\" dev=\"ggregory\" type=\"update\">\n         [WebDAV] Update Apache Jackrabbit 1.5.2 to 1.6.5.",
                "raw_url": "https://github.com/apache/commons-vfs/raw/0e681a785066d2bbecaed0deb9366586d156ca49/src/changes/changes.xml",
                "sha": "4effa43c6956f27c2f2ebd1c756fef9ba8ecccc8",
                "status": "modified"
            }
        ],
        "message": "[VFS-427][HTTP] NPE on HttpFileObject.getContent().getContentInfo().\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/vfs/trunk@1362235 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-vfs/commit/4b9ef61dfe2b904af86a09be6d5dbe77482ba32c",
        "patched_files": [
            "HttpFileObject.java",
            "HttpFileContentInfoFactory.java",
            "changes.java"
        ],
        "repo": "commons-vfs",
        "unit_tests": [
            "GetContentInfoFunctionalTest.java"
        ]
    },
    "commons-vfs_3286bf4": {
        "bug_id": "commons-vfs_3286bf4",
        "commit": "https://github.com/apache/commons-vfs/commit/3286bf48497f3f831f5034569c8d37da1ed6e76f",
        "file": [
            {
                "additions": 16,
                "blob_url": "https://github.com/apache/commons-vfs/blob/3286bf48497f3f831f5034569c8d37da1ed6e76f/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/StandardFileSystemManager.java",
                "changes": 23,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/StandardFileSystemManager.java?ref=3286bf48497f3f831f5034569c8d37da1ed6e76f",
                "deletions": 7,
                "filename": "commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/StandardFileSystemManager.java",
                "patch": "@@ -22,6 +22,7 @@\n import java.net.URL;\n import java.util.ArrayList;\n import java.util.Enumeration;\n+import java.util.Objects;\n \n import javax.xml.parsers.DocumentBuilder;\n import javax.xml.parsers.DocumentBuilderFactory;\n@@ -138,13 +139,11 @@ private ClassLoader findClassLoader() {\n         if (classLoader != null) {\n             return classLoader;\n         }\n-\n         ClassLoader cl = Thread.currentThread().getContextClassLoader();\n-        if (cl == null) {\n-            cl = getClass().getClassLoader();\n+        if (cl != null) {\n+            return cl;\n         }\n-\n-        return cl;\n+        return getValidClassLoader(getClass());\n     }\n \n     protected DefaultFileReplicator createDefaultFileReplicator() {\n@@ -404,6 +403,15 @@ private boolean findClass(final String className) {\n         return schemas.toArray(new String[schemas.size()]);\n     }\n \n+    private ClassLoader getValidClassLoader(final Class<?> clazz) {\n+        return validateClassLoader(clazz.getClassLoader(), clazz);\n+    }\n+\n+    private ClassLoader validateClassLoader(final ClassLoader clazzLoader, final Class<?> clazz) {\n+        return Objects.requireNonNull(clazzLoader, \"The class loader for \" + clazz\n+                + \" is null; some Java implementions use null for the bootstrap class loader.\");\n+    }\n+\n     /**\n      * Creates a provider.\n      */\n@@ -426,7 +434,7 @@ private Object createInstance(final String className) throws FileSystemException\n         try {\n             return findClassLoader().loadClass(className);\n         } catch (final ClassNotFoundException e) {\n-            return getClass().getClassLoader().loadClass(className);\n+            return getValidClassLoader(getClass()).loadClass(className);\n         }\n     }\n \n@@ -439,8 +447,9 @@ private Object createInstance(final String className) throws FileSystemException\n     private Enumeration<URL> loadResources(final String name) throws IOException {\n         Enumeration<URL> res = findClassLoader().getResources(name);\n         if (res == null || !res.hasMoreElements()) {\n-            res = getClass().getClassLoader().getResources(name);\n+            res = getValidClassLoader(getClass()).getResources(name);\n         }\n         return res;\n     }\n+    \n }",
                "raw_url": "https://github.com/apache/commons-vfs/raw/3286bf48497f3f831f5034569c8d37da1ed6e76f/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/StandardFileSystemManager.java",
                "sha": "06ecf39def4165c7002d5826903816c783bac5cd",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/commons-vfs/blob/3286bf48497f3f831f5034569c8d37da1ed6e76f/src/changes/changes.xml",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/src/changes/changes.xml?ref=3286bf48497f3f831f5034569c8d37da1ed6e76f",
                "deletions": 0,
                "filename": "src/changes/changes.xml",
                "patch": "@@ -80,6 +80,9 @@ The <action> type attribute can be add,update,fix,remove.\n       <action issue=\"VFS-667\" dev=\"ggregory\" type=\"fix\">\n         org.apache.commons.vfs2.provider.res.ResourceFileProvider.findFile(FileObject, String, FileSystemOptions) should throw a org.apache.commons.vfs2.FileSystemException instead of a NPE when the class loader is null.\n       </action>\n+      <action issue=\"VFS-668\" dev=\"ggregory\" type=\"update\">\n+        Throw a NPE with a better message when a class loader is null.\n+      </action>\n     </release>\n     <release version=\"2.2\" date=\"2017-10-06\" description=\"New features and bug fix release.\">\n       <action issue=\"VFS-642\" dev=\"pschumacher\" type=\"update\" due-to=\"ilangoldfeld\">",
                "raw_url": "https://github.com/apache/commons-vfs/raw/3286bf48497f3f831f5034569c8d37da1ed6e76f/src/changes/changes.xml",
                "sha": "cac2865d3b2f4001af1efe1e9dbc8e380270db58",
                "status": "modified"
            }
        ],
        "message": "[VFS-668] Throw a NPE with a better message when a class loader is null.\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/vfs/trunk@1836502 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-vfs/commit/516f44080f6f8ae0c013c1cd33dbdbf25f8c7911",
        "patched_files": [
            "StandardFileSystemManager.java"
        ],
        "repo": "commons-vfs",
        "unit_tests": [
            "StandardFileSystemManagerTest.java"
        ]
    },
    "commons-vfs_4bbfc97": {
        "bug_id": "commons-vfs_4bbfc97",
        "commit": "https://github.com/apache/commons-vfs/commit/4bbfc975e0664aba9c5339988ee512fe8eef0569",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/commons-vfs/blob/4bbfc975e0664aba9c5339988ee512fe8eef0569/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/DefaultFileSystemManager.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/DefaultFileSystemManager.java?ref=4bbfc975e0664aba9c5339988ee512fe8eef0569",
                "deletions": 1,
                "filename": "commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/DefaultFileSystemManager.java",
                "patch": "@@ -762,7 +762,10 @@ public FileName resolveName(final FileName root, final String path) throws FileS\n     public FileName resolveName(final FileName base, final String name, final NameScope scope)\n             throws FileSystemException {\n         if (base == null) {\n-            throw new FileSystemException(\"Invalid base filename.\");\n+            throw new FileSystemException(\"Invalid base FileName.\");\n+        }\n+        if (name == null) {\n+            throw new FileSystemException(\"Invalid name String.\");\n         }\n         final FileName realBase;\n         if (VFS.isUriStyle() && base.isFile()) {",
                "raw_url": "https://github.com/apache/commons-vfs/raw/4bbfc975e0664aba9c5339988ee512fe8eef0569/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/DefaultFileSystemManager.java",
                "sha": "91a9d2fdf1eb174443910120dff342a435c25698",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/commons-vfs/blob/4bbfc975e0664aba9c5339988ee512fe8eef0569/src/changes/changes.xml",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/src/changes/changes.xml?ref=4bbfc975e0664aba9c5339988ee512fe8eef0569",
                "deletions": 0,
                "filename": "src/changes/changes.xml",
                "patch": "@@ -104,6 +104,9 @@ The <action> type attribute can be add,update,fix,remove.\n       <action issue=\"VFS-674\" dev=\"ggregory\" type=\"fix\" due-to=\"Boris Petrov, Gary Gregory\">\n         Cannot close an FTP input stream without an exception.\n       </action>\n+      <action issue=\"VFS-682\" dev=\"ggregory\" type=\"update\">\n+        Throw a org.apache.commons.vfs2.FileSystemException instead of a NullPointerException in org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveName(FileName, String, NameScope).\n+      </action>\n     </release>\n     <release version=\"2.2\" date=\"2017-10-06\" description=\"New features and bug fix release.\">\n       <action issue=\"VFS-642\" dev=\"pschumacher\" type=\"update\" due-to=\"ilangoldfeld\">",
                "raw_url": "https://github.com/apache/commons-vfs/raw/4bbfc975e0664aba9c5339988ee512fe8eef0569/src/changes/changes.xml",
                "sha": "a5a16b604f42b50b4f990b5e86c5a91646c01c6f",
                "status": "modified"
            }
        ],
        "message": "[VFS-682] Throw a org.apache.commons.vfs2.FileSystemException instead of a NullPointerException in org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveName(FileName, String, NameScope).\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/vfs/trunk@1847024 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-vfs/commit/7fc4d909c72e273dc9ce17ed871fd5214d36a6a9",
        "patched_files": [
            "DefaultFileSystemManager.java"
        ],
        "repo": "commons-vfs",
        "unit_tests": [
            "DefaultFileSystemManagerTest.java"
        ]
    },
    "commons-vfs_add1a77": {
        "bug_id": "commons-vfs_add1a77",
        "commit": "https://github.com/apache/commons-vfs/commit/add1a771a73c830378eca440f0e7a249c3638faf",
        "file": [
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/commons-vfs/blob/add1a771a73c830378eca440f0e7a249c3638faf/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/local/LocalFileNameParser.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/local/LocalFileNameParser.java?ref=add1a771a73c830378eca440f0e7a249c3638faf",
                "deletions": 1,
                "filename": "commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/local/LocalFileNameParser.java",
                "patch": "@@ -16,8 +16,11 @@\n  */\n package org.apache.commons.vfs2.provider.local;\n \n+import java.net.URI;\n+\n import org.apache.commons.vfs2.FileName;\n import org.apache.commons.vfs2.FileSystemException;\n+import org.apache.commons.vfs2.FileSystemManager;\n import org.apache.commons.vfs2.FileType;\n import org.apache.commons.vfs2.VFS;\n import org.apache.commons.vfs2.provider.AbstractFileNameParser;\n@@ -63,7 +66,7 @@ public FileName parseUri(final VfsComponentContext context, final FileName base,\n         final StringBuilder name = new StringBuilder();\n \n         // Extract the scheme\n-        String scheme = UriParser.extractScheme(context.getFileSystemManager().getSchemes(), uri, name);\n+        String scheme = UriParser.extractScheme(getSchemes(context, base, uri), uri, name);\n         if (scheme == null && base != null) {\n             scheme = base.getScheme();\n         }\n@@ -87,6 +90,13 @@ public FileName parseUri(final VfsComponentContext context, final FileName base,\n         return createFileName(scheme, rootFile, path, fileType);\n     }\n \n+    private String[] getSchemes(final VfsComponentContext context, FileName base, String uri) {\n+        if (context == null) {\n+            return new String[] { base != null ? base.getScheme() : URI.create(uri).getScheme() };\n+        }\n+        return context.getFileSystemManager().getSchemes();\n+    }\n+\n     protected abstract FileName createFileName(String scheme, final String rootFile, final String path,\n             final FileType type);\n }",
                "raw_url": "https://github.com/apache/commons-vfs/raw/add1a771a73c830378eca440f0e7a249c3638faf/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/local/LocalFileNameParser.java",
                "sha": "90abfeb71d918ab0bd28aa6ace1933e3fbb137e4",
                "status": "modified"
            },
            {
                "additions": 38,
                "blob_url": "https://github.com/apache/commons-vfs/blob/add1a771a73c830378eca440f0e7a249c3638faf/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/url/UrlFileNameParserTest.java",
                "changes": 38,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/url/UrlFileNameParserTest.java?ref=add1a771a73c830378eca440f0e7a249c3638faf",
                "deletions": 0,
                "filename": "commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/url/UrlFileNameParserTest.java",
                "patch": "@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.commons.vfs2.provider.url;\n+\n+import java.net.URI;\n+\n+import org.apache.commons.vfs2.FileName;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+public class UrlFileNameParserTest {\n+\n+    @Test\n+    public void testJira739() throws Exception {\n+        final String uriStr = \"maprfs:///\";\n+        // Check that we have a valid URI\n+        final URI uri = new URI(uriStr);\n+        // VFS-739 shows that parseUri throws an NPE:\n+        final FileName fileName = new UrlFileNameParser().parseUri(null, null, uriStr);\n+        Assert.assertEquals(uriStr, fileName.getURI());\n+        Assert.assertEquals(uri.getScheme(), fileName.getScheme());\n+    }\n+}",
                "raw_url": "https://github.com/apache/commons-vfs/raw/add1a771a73c830378eca440f0e7a249c3638faf/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/url/UrlFileNameParserTest.java",
                "sha": "6baadda4a8c6e3263e6d9a3fb75529e0129e8f8a",
                "status": "added"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/commons-vfs/blob/add1a771a73c830378eca440f0e7a249c3638faf/src/changes/changes.xml",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/src/changes/changes.xml?ref=add1a771a73c830378eca440f0e7a249c3638faf",
                "deletions": 0,
                "filename": "src/changes/changes.xml",
                "patch": "@@ -95,6 +95,9 @@ The <action> type attribute can be add,update,fix,remove.\n       <action issue=\"VFS-738\" dev=\"ggregory\" type=\"add\" due-to=\"Gary Gregory\">\r\n         Deprecate org.apache.commons.vfs2.FileChangeEvent.getFile() in favor of getFileObject().\r\n       </action>\r\n+      <action issue=\"VFS-739\" dev=\"ggregory\" type=\"fix\" due-to=\"xia0c, Gary Gregory\">\r\n+        Changes to parseUri breaks backward compatibility by throwing NullPointerException in some cases.\r\n+      </action>\r\n     </release>\r\n     <release version=\"2.4.1\" date=\"2019-08-10\" description=\"Bug fix release.\">\r\n       <action issue=\"VFS-725\" dev=\"ggregory\" type=\"fix\" due-to=\"Gary Gregory\">\r",
                "raw_url": "https://github.com/apache/commons-vfs/raw/add1a771a73c830378eca440f0e7a249c3638faf/src/changes/changes.xml",
                "sha": "8b39b814c5b430f7ae2313179c19926c80a2c737",
                "status": "modified"
            }
        ],
        "message": "[VFS-739] Changes to parseUri breaks backward compatibility by throwing\nNullPointerException in some cases.",
        "parent": "https://github.com/apache/commons-vfs/commit/efbffc78807a17f0050f8e623ddef7b0be681f95",
        "patched_files": [
            "LocalFileNameParser.java",
            "UrlFileNameParser.java",
            "changes.java"
        ],
        "repo": "commons-vfs",
        "unit_tests": [
            "UrlFileNameParserTest.java"
        ]
    },
    "commons-vfs_cd37b90": {
        "bug_id": "commons-vfs_cd37b90",
        "commit": "https://github.com/apache/commons-vfs/commit/cd37b90bc7220c5edebce1edebd36433ee454909",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/commons-vfs/blob/cd37b90bc7220c5edebce1edebd36433ee454909/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/StandardFileSystemManager.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/StandardFileSystemManager.java?ref=cd37b90bc7220c5edebce1edebd36433ee454909",
                "deletions": 0,
                "filename": "commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/StandardFileSystemManager.java",
                "patch": "@@ -129,6 +129,11 @@ protected void configurePlugins() throws FileSystemException {\n         }\n     }\n \n+    /**\n+     * Returns a class loader or null since some Java implementation is null for the bootstrap class loader.\n+     * \n+     * @return A class loader or null since some Java implementation is null for the bootstrap class loader.\n+     */\n     private ClassLoader findClassLoader() {\n         if (classLoader != null) {\n             return classLoader;",
                "raw_url": "https://github.com/apache/commons-vfs/raw/cd37b90bc7220c5edebce1edebd36433ee454909/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/StandardFileSystemManager.java",
                "sha": "def3fd2d6fd0509118a8146de4390106c9a559f3",
                "status": "modified"
            }
        ],
        "message": "Internal Javadoc related to same issue as [VFS-667]: org.apache.commons.vfs2.provider.res.ResourceFileProvider.findFile(FileObject, String, FileSystemOptions) should throw a org.apache.commons.vfs2.FileSystemException instead of a NPE when the class loader is null.\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/vfs/trunk@1836499 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-vfs/commit/14285f15b092abb2f063dd3c3ff51de7039f5c33",
        "patched_files": [
            "StandardFileSystemManager.java"
        ],
        "repo": "commons-vfs",
        "unit_tests": [
            "StandardFileSystemManagerTest.java"
        ]
    },
    "commons-vfs_f070d7c": {
        "bug_id": "commons-vfs_f070d7c",
        "commit": "https://github.com/apache/commons-vfs/commit/f070d7c0174e3588c5f1f1347a7baa839c97262c",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/commons-vfs/blob/f070d7c0174e3588c5f1f1347a7baa839c97262c/core/src/test/java/org/apache/commons/vfs2/provider/hdfs/test/HdfsFileProviderTest.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/commons-vfs/contents/core/src/test/java/org/apache/commons/vfs2/provider/hdfs/test/HdfsFileProviderTest.java?ref=f070d7c0174e3588c5f1f1347a7baa839c97262c",
                "deletions": 2,
                "filename": "core/src/test/java/org/apache/commons/vfs2/provider/hdfs/test/HdfsFileProviderTest.java",
                "patch": "@@ -75,7 +75,6 @@\n     private static FileSystem hdfs;\n \n     protected static Configuration conf;\n-    protected static DefaultFileSystemManager vfs;\n     protected static MiniDFSCluster cluster;\n \n     @BeforeClass\n@@ -134,7 +133,7 @@ public static void setUmask(Configuration conf2)\n             // Need to set permission to 777 xor umask\n             // leading zero makes java interpret as base 8\n             final int newPermission = 0777 ^ umask;\n-            conf.set(\"dfs.datanode.data.dir.perm\", String.format(\"%03o\", newPermission));\n+            conf2.set(\"dfs.datanode.data.dir.perm\", String.format(\"%03o\", newPermission));\n         }\n         catch (final Exception e)\n         {",
                "raw_url": "https://github.com/apache/commons-vfs/raw/f070d7c0174e3588c5f1f1347a7baa839c97262c/core/src/test/java/org/apache/commons/vfs2/provider/hdfs/test/HdfsFileProviderTest.java",
                "sha": "24eb2f5282901803e5fb62bd05655aeeecc8ebfb",
                "status": "modified"
            }
        ],
        "message": "[tests][hdfs] fix NullPointerException in tests on linux\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/vfs/trunk@1650852 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-vfs/commit/75f54c482430c99e107aeb3ef8b6742007fd0544",
        "patched_files": [
            "HdfsFileProvider.java"
        ],
        "repo": "commons-vfs",
        "unit_tests": [
            "HdfsFileProviderTest.java"
        ]
    }
}