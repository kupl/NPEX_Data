{
    "hadoop-mapreduce_11131d7": {
        "bug_id": "hadoop-mapreduce_11131d7",
        "commit": "https://github.com/apache/hadoop-mapreduce/commit/11131d72040c250f897a8d1c130b83ce1b065050",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/hadoop-mapreduce/blob/11131d72040c250f897a8d1c130b83ce1b065050/CHANGES.txt",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/hadoop-mapreduce/contents/CHANGES.txt?ref=11131d72040c250f897a8d1c130b83ce1b065050",
                "deletions": 0,
                "filename": "CHANGES.txt",
                "patch": "@@ -2198,3 +2198,5 @@ Release 0.21.0 - 2010-08-13\n \n     MAPREDUCE-1856. Extract a subset of tests for smoke (DOA) validation (cos)\n \n+    MAPREDUCE-2317. Fix a NPE in HadoopArchives.  (Devaraj K via szetszwo)\n+",
                "raw_url": "https://github.com/apache/hadoop-mapreduce/raw/11131d72040c250f897a8d1c130b83ce1b065050/CHANGES.txt",
                "sha": "9f26015d60ab79f23ebb727a7c2cdc543fbbf831",
                "status": "modified"
            },
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/hadoop-mapreduce/blob/11131d72040c250f897a8d1c130b83ce1b065050/src/tools/org/apache/hadoop/tools/HadoopArchives.java",
                "changes": 20,
                "contents_url": "https://api.github.com/repos/apache/hadoop-mapreduce/contents/src/tools/org/apache/hadoop/tools/HadoopArchives.java?ref=11131d72040c250f897a8d1c130b83ce1b065050",
                "deletions": 9,
                "filename": "src/tools/org/apache/hadoop/tools/HadoopArchives.java",
                "patch": "@@ -367,16 +367,18 @@ private void writeTopLevelDirs(SequenceFile.Writer srcWriter,\n         }\n         else {\n           Path parent = p.getParent();\n-          if (allpaths.containsKey(parent.toString())) {\n-            HashSet<String> children = allpaths.get(parent.toString());\n-            children.add(p.getName());\n-          }\n-          else {\n-            HashSet<String> children = new HashSet<String>();\n-            children.add(p.getName());\n-            allpaths.put(parent.toString(), children);\n+          if (null != parent) {\n+            if (allpaths.containsKey(parent.toString())) {\n+              HashSet<String> children = allpaths.get(parent.toString());\n+              children.add(p.getName());\n+            } \n+            else {\n+              HashSet<String> children = new HashSet<String>();\n+              children.add(p.getName());\n+              allpaths.put(parent.toString(), children);\n+            }\n+            parents.add(parent);\n           }\n-          parents.add(parent);\n         }\n       }\n       justDirs = parents;",
                "raw_url": "https://github.com/apache/hadoop-mapreduce/raw/11131d72040c250f897a8d1c130b83ce1b065050/src/tools/org/apache/hadoop/tools/HadoopArchives.java",
                "sha": "41d149ea952f98e877d56de2deb3c5ba482ae120",
                "status": "modified"
            }
        ],
        "message": "MAPREDUCE-2317. Fix a NPE in HadoopArchives.  Contributed by Devaraj K\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/mapreduce/trunk@1096022 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/hadoop-mapreduce/commit/ac3445f84c3699f5032374587c3c80087b598e0f",
        "repo": "hadoop-mapreduce",
        "unit_tests": [
            "TestHadoopArchives.java"
        ]
    },
    "hadoop-mapreduce_1bd18c3": {
        "bug_id": "hadoop-mapreduce_1bd18c3",
        "commit": "https://github.com/apache/hadoop-mapreduce/commit/1bd18c32a5309ab58f971eaee74dc935b59ae9c3",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/hadoop-mapreduce/blob/1bd18c32a5309ab58f971eaee74dc935b59ae9c3/CHANGES.txt",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/hadoop-mapreduce/contents/CHANGES.txt?ref=1bd18c32a5309ab58f971eaee74dc935b59ae9c3",
                "deletions": 0,
                "filename": "CHANGES.txt",
                "patch": "@@ -37,6 +37,9 @@ Trunk (unreleased changes)\n \n   BUG FIXES\n \n+    MAPREDUCE-1089. Fix NPE in fair scheduler preemption when tasks are\n+    scheduled but not running. (Todd Lipcon via matei)\n+\n     MAPREDUCE-1014. Fix the libraries for common and hdfs. (omalley)\n \n     MAPREDUCE-1111. JT Jetty UI not working if we run mumak.sh ",
                "raw_url": "https://github.com/apache/hadoop-mapreduce/raw/1bd18c32a5309ab58f971eaee74dc935b59ae9c3/CHANGES.txt",
                "sha": "0571389832cb58552b200f56fa0479f7524b073d",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/hadoop-mapreduce/blob/1bd18c32a5309ab58f971eaee74dc935b59ae9c3/src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/FairScheduler.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/hadoop-mapreduce/contents/src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/FairScheduler.java?ref=1bd18c32a5309ab58f971eaee74dc935b59ae9c3",
                "deletions": 1,
                "filename": "src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/FairScheduler.java",
                "patch": "@@ -831,7 +831,11 @@ protected int tasksToPreempt(PoolSchedulable sched, long curTime) {\n     List<TaskStatus> statuses = new ArrayList<TaskStatus>();\n     for (TaskInProgress tip: tips) {\n       for (TaskAttemptID id: tip.getActiveTasks().keySet()) {\n-        statuses.add(tip.getTaskStatus(id));\n+        TaskStatus stat = tip.getTaskStatus(id);\n+        // status is null when the task has been scheduled but not yet running\n+        if (stat != null) {\n+          statuses.add(stat);\n+        }\n       }\n     }\n     return statuses;",
                "raw_url": "https://github.com/apache/hadoop-mapreduce/raw/1bd18c32a5309ab58f971eaee74dc935b59ae9c3/src/contrib/fairscheduler/src/java/org/apache/hadoop/mapred/FairScheduler.java",
                "sha": "ae0930c46581cef366f6fcd59d3ca7408b5383e3",
                "status": "modified"
            }
        ],
        "message": "MAPREDUCE-1089. Fix NPE in fair scheduler preemption when tasks are  \nscheduled but not running. Contributed by Todd Lipcon.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/mapreduce/trunk@830821 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/hadoop-mapreduce/commit/a98327008f5b124724f3577bde06f2b4ddec6a18",
        "repo": "hadoop-mapreduce",
        "unit_tests": [
            "TestFairScheduler.java"
        ]
    }
}