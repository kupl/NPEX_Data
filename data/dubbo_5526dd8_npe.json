[
    {
        "repo": "dubbo",
        "commit": "https://github.com/apache/dubbo/commit/5526dd8d2e80741e311e5466fc24392b2421eb00",
        "bug_id": "dubbo_5526dd8",
        "message": "pull request#131: \u4fee\u590d\u5f53value == null &&\u3000entry.getValue() \uff1d= null \u65f6\u8bed\u53e5if(value == null && entry.getValue() != null || !value.equals(entry.getValue())) \u62a5NullPointerException",
        "parent": "https://github.com/apache/dubbo/commit/c5c017dcba089d8b4c7e7e42b51cd2664194c138",
        "patched_files": [
            "URL.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 10,
                "raw_url": "https://github.com/apache/dubbo/raw/5526dd8d2e80741e311e5466fc24392b2421eb00/dubbo-common/src/main/java/com/alibaba/dubbo/common/URL.java",
                "contents_url": "https://api.github.com/repos/apache/dubbo/contents/dubbo-common/src/main/java/com/alibaba/dubbo/common/URL.java?ref=5526dd8d2e80741e311e5466fc24392b2421eb00",
                "filename": "dubbo-common/src/main/java/com/alibaba/dubbo/common/URL.java",
                "deletions": 3,
                "sha": "d89f5735d58ebb6a5fb5bf48c622f3720078ad01",
                "blob_url": "https://github.com/apache/dubbo/blob/5526dd8d2e80741e311e5466fc24392b2421eb00/dubbo-common/src/main/java/com/alibaba/dubbo/common/URL.java",
                "patch": "@@ -966,9 +966,16 @@ public URL addParameters(Map<String, String> parameters) {\n         boolean hasAndEqual = true;\r\n         for (Map.Entry<String, String> entry : parameters.entrySet()) {\r\n             String value = getParameters().get(entry.getKey());\r\n-            if (value == null && entry.getValue() != null || !value.equals(entry.getValue())) {\r\n-                hasAndEqual = false;\r\n-                break;\r\n+            if (value == null) {\r\n+                if (entry.getValue() != null) {\r\n+                    hasAndEqual = false;\r\n+                    break;\r\n+                }\r\n+            } else {\r\n+                if (!value.equals(entry.getValue())) {\r\n+                    hasAndEqual = false;\r\n+                    break;\r\n+                }\r\n             }\r\n         }\r\n         // \u5982\u679c\u6ca1\u6709\u4fee\u6539\uff0c\u76f4\u63a5\u8fd4\u56de\u3002\r",
                "changes": 13
            },
            {
                "status": "modified",
                "additions": 7,
                "raw_url": "https://github.com/apache/dubbo/raw/5526dd8d2e80741e311e5466fc24392b2421eb00/dubbo-common/src/test/java/com/alibaba/dubbo/common/URLTest.java",
                "contents_url": "https://api.github.com/repos/apache/dubbo/contents/dubbo-common/src/test/java/com/alibaba/dubbo/common/URLTest.java?ref=5526dd8d2e80741e311e5466fc24392b2421eb00",
                "filename": "dubbo-common/src/test/java/com/alibaba/dubbo/common/URLTest.java",
                "deletions": 1,
                "sha": "ddd21f55a708786a50e41961ee94ad204c7d592d",
                "blob_url": "https://github.com/apache/dubbo/blob/5526dd8d2e80741e311e5466fc24392b2421eb00/dubbo-common/src/test/java/com/alibaba/dubbo/common/URLTest.java",
                "patch": "@@ -16,7 +16,6 @@\n package com.alibaba.dubbo.common;\r\n \r\n import com.alibaba.dubbo.common.utils.CollectionUtils;\r\n-\r\n import org.junit.Test;\r\n \r\n import java.io.File;\r\n@@ -633,4 +632,11 @@ public void test_Path() throws Exception {\n         assertEquals(\"path\", url.getPath());\r\n     }\r\n \r\n+    @Test\r\n+    public void testAddParameters() throws Exception {\r\n+        URL url = URL.valueOf(\"dubbo://127.0.0.1:20880\");\r\n+        Map<String, String> parameters = new HashMap<String, String>();\r\n+        parameters.put(\"version\", null);\r\n+        url.addParameters(parameters);\r\n+    }\r\n }\n\\ No newline at end of file",
                "changes": 8
            }
        ],
        "unit_tests": [
            "URLTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "dubbo-common/src/test/java/com/alibaba/dubbo/common/URLTest.java",
        "buggy_files": [
            "dubbo-common/src/main/java/com/alibaba/dubbo/common/URL.java"
        ],
        "fixed": true
    }
]