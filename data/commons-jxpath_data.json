[
    {
        "repo": "commons-jxpath",
        "message": "[JXPATH-142] avoid NullPointerExceptions in DynamicPointer w/ null name\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/jxpath/trunk@1133160 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/commons-jxpath/commit/74c38b4e3c6eb051c03fb9994be33e2b65499c01",
        "parent": "https://github.com/apache/commons-jxpath/commit/515ed3d91e9e8ed1c1e8538a2ecbfc1f08ea473b",
        "bug_id": "commons-jxpath_1",
        "file": [
            {
                "sha": "6be2c62a66b762f31b008ab1bf03acb3b28aa5c9",
                "filename": "src/java/org/apache/commons/jxpath/ri/model/dynamic/DynamicPointer.java",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/74c38b4e3c6eb051c03fb9994be33e2b65499c01/src/java/org/apache/commons/jxpath/ri/model/dynamic/DynamicPointer.java",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/74c38b4e3c6eb051c03fb9994be33e2b65499c01/src/java/org/apache/commons/jxpath/ri/model/dynamic/DynamicPointer.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/java/org/apache/commons/jxpath/ri/model/dynamic/DynamicPointer.java?ref=74c38b4e3c6eb051c03fb9994be33e2b65499c01",
                "patch": "@@ -123,7 +123,7 @@ public String asPath() {\n     }\n \n     public int hashCode() {\n-        return System.identityHashCode(bean) + name.hashCode();\n+        return System.identityHashCode(bean) + (name == null ? 0 : name.hashCode());\n     }\n \n     public boolean equals(Object object) {\n@@ -136,6 +136,9 @@ public boolean equals(Object object) {\n         }\n \n         DynamicPointer other = (DynamicPointer) object;\n-        return bean == other.bean && name.equals(other.name);\n+        if (bean != other.bean) {\n+            return false;\n+        }\n+        return name == other.name || name != null && name.equals(other.name);\n     }\n }",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "commons-jxpath",
        "message": "JXPATH-113: NullPointerException in ChildContext when document only contains an empty root node. Thanks to Michele Vivoda. This also fixes #1 from github.\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/jxpath/trunk@1716226 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/commons-jxpath/commit/96c4ad9cf88d0237e22175b65c260db222acaefb",
        "parent": "https://github.com/apache/commons-jxpath/commit/3cbf86865bb4ef79aef30187c9a9d0b354638997",
        "bug_id": "commons-jxpath_2",
        "file": [
            {
                "sha": "b208e0ebe37e0c0da8bd0d3db780a8ccf8895e7a",
                "filename": "src/changes/changes.xml",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/96c4ad9cf88d0237e22175b65c260db222acaefb/src/changes/changes.xml",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/96c4ad9cf88d0237e22175b65c260db222acaefb/src/changes/changes.xml",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/changes/changes.xml?ref=96c4ad9cf88d0237e22175b65c260db222acaefb",
                "patch": "@@ -47,6 +47,9 @@ The <action> type attribute can be add,update,fix,remove.\n   <body>\n     <!-- The release date is the date RC is cut -->\n     <release version=\"1.4\" date=\"2014-??-??\" description=\"New features and bug fixes.\">\n+      <action issue=\"JXPATH-113\" dev=\"britter\" type=\"fix\" due-to=\"Michele Vivoda\">\n+        NullPointerException in ChildContext when document only contains an empty root node\n+      </action>\n       <action issue=\"JXPATH-160\" dev=\"britter\" type=\"fix\" due-to=\"Stefan Albrecht, Michele Vivoda, Uwe Barthel\">\n         ValueUtils.getValue throws exception with set and index above size\n       </action>",
                "deletions": 0
            },
            {
                "sha": "f4853f22c370a98ee32e2152ab3a96cee35d9188",
                "filename": "src/main/java/org/apache/commons/jxpath/ri/axes/ChildContext.java",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/96c4ad9cf88d0237e22175b65c260db222acaefb/src/main/java/org/apache/commons/jxpath/ri/axes/ChildContext.java",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/96c4ad9cf88d0237e22175b65c260db222acaefb/src/main/java/org/apache/commons/jxpath/ri/axes/ChildContext.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/main/java/org/apache/commons/jxpath/ri/axes/ChildContext.java?ref=96c4ad9cf88d0237e22175b65c260db222acaefb",
                "patch": "@@ -110,7 +110,7 @@ private void prepare() {\n             return;\n         }\n         NodePointer useParent = startFromParentLocation ? parent.getParent() : parent;\n-        iterator = useParent.childIterator(nodeTest, reverse,\n+        iterator = useParent == null ? null : useParent.childIterator(nodeTest, reverse,\n                 startFromParentLocation ? parent : null);\n     }\n }",
                "deletions": 1
            },
            {
                "sha": "24550546bf863d43835960c27728731197968792",
                "filename": "src/test/java/org/apache/commons/jxpath/issues/JXPath113Test.java",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/96c4ad9cf88d0237e22175b65c260db222acaefb/src/test/java/org/apache/commons/jxpath/issues/JXPath113Test.java",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/96c4ad9cf88d0237e22175b65c260db222acaefb/src/test/java/org/apache/commons/jxpath/issues/JXPath113Test.java",
                "status": "added",
                "changes": 73,
                "additions": 73,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/test/java/org/apache/commons/jxpath/issues/JXPath113Test.java?ref=96c4ad9cf88d0237e22175b65c260db222acaefb",
                "patch": "@@ -0,0 +1,73 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.commons.jxpath.issues;\n+\n+import java.io.StringReader;\n+\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+\n+import org.apache.commons.jxpath.JXPathContext;\n+import org.apache.commons.jxpath.JXPathTestCase;\n+import org.w3c.dom.Document;\n+import org.xml.sax.InputSource;\n+\n+public class JXPath113Test extends JXPathTestCase\n+{\n+\n+    public void testIssue113() throws Exception\n+    {\n+        Document doc = JAXP.getDocument(\"<xml/>\");\n+        JXPathContext context = JXPathContext.newContext(doc);\n+        context.selectNodes(\"//following-sibling::node()\");\n+    }\n+\n+    static class JAXP\n+    {\n+\n+        public static Document getDocument(String xml) throws Exception\n+        {\n+            return getDocument(new InputSource(new StringReader(xml)));\n+        }\n+\n+        public static Document getDocument(InputSource is) throws Exception\n+        {\n+\n+            final DocumentBuilder builder = getDocumentBuilder();\n+            return builder.parse(is);\n+        }\n+\n+        private static DocumentBuilder getDocumentBuilder()\n+        {\n+            try\n+            {\n+                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n+                factory.setValidating(false);\n+                factory.setNamespaceAware(true);\n+                factory.setExpandEntityReferences(false);\n+                return factory.newDocumentBuilder();\n+            }\n+            catch (ParserConfigurationException e)\n+            {\n+                throw new Error(\"JAXP config error:\" + e.getMessage(), e);\n+            }\n+\n+        }\n+    }\n+\n+}",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "commons-jxpath",
        "message": "guard against npes on exception path\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/jxpath/trunk@1190145 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/commons-jxpath/commit/fe0e938c5259df43f8320165f4d32cf0818c89e6",
        "parent": "https://github.com/apache/commons-jxpath/commit/28cb61aa109eaf99de0840fe65d829db6f3899a5",
        "bug_id": "commons-jxpath_3",
        "file": [
            {
                "sha": "d9be871fef0e7ba0fdc0f4109ec08db4f16a5ff3",
                "filename": "src/java/org/apache/commons/jxpath/JXPathBasicBeanInfo.java",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/fe0e938c5259df43f8320165f4d32cf0818c89e6/src/java/org/apache/commons/jxpath/JXPathBasicBeanInfo.java",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/fe0e938c5259df43f8320165f4d32cf0818c89e6/src/java/org/apache/commons/jxpath/JXPathBasicBeanInfo.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/java/org/apache/commons/jxpath/JXPathBasicBeanInfo.java?ref=fe0e938c5259df43f8320165f4d32cf0818c89e6",
                "patch": "@@ -120,6 +120,7 @@ public boolean isDynamic() {\n                 }\n                 catch (IntrospectionException ex) {\n                     ex.printStackTrace();\n+                    return new PropertyDescriptor[0];\n                 }\n             }\n         }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "commons-jxpath",
        "message": "potential NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/jxpath/trunk@670728 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/commons-jxpath/commit/3c89806054e96241c4fc46b16d50336ef28df77b",
        "parent": "https://github.com/apache/commons-jxpath/commit/d783b219111b2f92b048a5588f6de3d4e8040c2b",
        "bug_id": "commons-jxpath_4",
        "file": [
            {
                "sha": "7b288a650a95760009b62a40d1843a432978988a",
                "filename": "src/java/org/apache/commons/jxpath/util/ValueUtils.java",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/3c89806054e96241c4fc46b16d50336ef28df77b/src/java/org/apache/commons/jxpath/util/ValueUtils.java",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/3c89806054e96241c4fc46b16d50336ef28df77b/src/java/org/apache/commons/jxpath/util/ValueUtils.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/java/org/apache/commons/jxpath/util/ValueUtils.java?ref=3c89806054e96241c4fc46b16d50336ef28df77b",
                "patch": "@@ -50,10 +50,10 @@\n      * @return boolean\n      */\n     public static boolean isCollection(Object value) {\n+        value = getValue(value);\n         if (value == null) {\n             return false;\n         }\n-        value = getValue(value);\n         if (value.getClass().isArray()) {\n             return true;\n         }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "commons-jxpath",
        "message": "[JXPATH-113] avoid NPE in ChildContext\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/jxpath/trunk@617893 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/commons-jxpath/commit/1b6c698cf83b389c2d973a17a2bdf58710cccfbb",
        "parent": "https://github.com/apache/commons-jxpath/commit/57c3a7226ff9a5c36ab86e5e32233871b499994f",
        "bug_id": "commons-jxpath_5",
        "file": [
            {
                "sha": "5a750c1272d7682e438fa07234e090f2a5881c81",
                "filename": "src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/1b6c698cf83b389c2d973a17a2bdf58710cccfbb/src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/1b6c698cf83b389c2d973a17a2bdf58710cccfbb/src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java?ref=1b6c698cf83b389c2d973a17a2bdf58710cccfbb",
                "patch": "@@ -127,7 +127,8 @@ private void prepare() {\n         if (parent == null) {\n             return;\n         }\n-        iterator = (startFromParentLocation ? parent.getParent() : parent).childIterator(nodeTest,\n+        NodePointer useParent = startFromParentLocation ? parent.getParent() : parent;\n+        iterator = parent == null ? null : useParent.childIterator(nodeTest,\n                 reverse, startFromParentLocation ? parent : null);\n     }\n }\n\\ No newline at end of file",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "commons-jxpath",
        "message": "NPE when file is missing is now fixed\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/jxpath/trunk@136717 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/commons-jxpath/commit/16d9bce98acc7ddb7257228ce790725cacadd144",
        "parent": "https://github.com/apache/commons-jxpath/commit/20788974c6526a914382c06641048949cbb43d72",
        "bug_id": "commons-jxpath_6",
        "file": [
            {
                "sha": "08467ea9f8db36ddef3f88c33c2f7fdeb40cfff4",
                "filename": "src/java/org/apache/commons/jxpath/XMLDocumentContainer.java",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/16d9bce98acc7ddb7257228ce790725cacadd144/src/java/org/apache/commons/jxpath/XMLDocumentContainer.java",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/16d9bce98acc7ddb7257228ce790725cacadd144/src/java/org/apache/commons/jxpath/XMLDocumentContainer.java",
                "status": "modified",
                "changes": 17,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/java/org/apache/commons/jxpath/XMLDocumentContainer.java?ref=16d9bce98acc7ddb7257228ce790725cacadd144",
                "patch": "@@ -1,7 +1,7 @@\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/XMLDocumentContainer.java,v 1.1 2001/09/03 01:22:30 dmitri Exp $\n- * $Revision: 1.1 $\n- * $Date: 2001/09/03 01:22:30 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/XMLDocumentContainer.java,v 1.2 2002/04/11 03:00:11 dmitri Exp $\n+ * $Revision: 1.2 $\n+ * $Date: 2002/04/11 03:00:11 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n@@ -82,7 +82,7 @@\n  * read at all.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.1 $ $Date: 2001/09/03 01:22:30 $\n+ * @version $Revision: 1.2 $ $Date: 2002/04/11 03:00:11 $\n  */\n public class XMLDocumentContainer implements Container {\n \n@@ -92,10 +92,16 @@\n \n     public XMLDocumentContainer(URL xmlURL){\n         this.xmlURL = xmlURL;\n+        if (xmlURL == null){\n+            throw new RuntimeException(\"Source is null\");\n+        }\n     }\n \n     public XMLDocumentContainer(Source source){\n         this.source = source;\n+        if (source == null){\n+            throw new RuntimeException(\"Source is null\");\n+        }\n     }\n \n     public Object getValue(){\n@@ -120,7 +126,8 @@ public Object getValue(){\n             }\n             catch (Exception ex){\n                 throw new RuntimeException(\"Cannot read XML from: \" +\n-                    (xmlURL != null ? xmlURL.toString() : source.getSystemId()) + \"\\n\" + ex);\n+                    (xmlURL != null ? xmlURL.toString() :\n+                        (source != null ? source.getSystemId() : \"<<undefined source>>\")) + \"\\n\" + ex);\n             }\n         }\n         return document;",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "commons-jxpath",
        "message": "[JXPATH-38] ClassFunctions throws NPE searching for a function in null ns\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/jxpath/trunk@494925 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/commons-jxpath/commit/5eb29ba7901ab88e8388095a8696c4ae13a2c163",
        "parent": "https://github.com/apache/commons-jxpath/commit/d3ba8ea8a502a0fe8bce7d29dc29e1a7159992de",
        "bug_id": "commons-jxpath_7",
        "file": [
            {
                "sha": "5ef7927af87ca6890e5efd018b40a0f10a0b014b",
                "filename": "src/java/org/apache/commons/jxpath/ClassFunctions.java",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/5eb29ba7901ab88e8388095a8696c4ae13a2c163/src/java/org/apache/commons/jxpath/ClassFunctions.java",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/5eb29ba7901ab88e8388095a8696c4ae13a2c163/src/java/org/apache/commons/jxpath/ClassFunctions.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/java/org/apache/commons/jxpath/ClassFunctions.java?ref=5eb29ba7901ab88e8388095a8696c4ae13a2c163",
                "patch": "@@ -86,7 +86,11 @@ public Function getFunction(\n         String name,\n         Object[] parameters) \n     {\n-        if (!namespace.equals(this.namespace)) {\n+        if (namespace == null) {\n+            if (this.namespace != null) {\n+                return null;\n+            }\n+        } else if (!namespace.equals(this.namespace)) {\n             return null;\n         }\n \n@@ -117,4 +121,4 @@ public Function getFunction(\n \n         return null;\n     }\n-}\n\\ No newline at end of file\n+}",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "commons-jxpath",
        "message": "Fixed an NPE when there is no proper child\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/jxpath/trunk@136787 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/commons-jxpath/commit/571b8d452b48a5bf2d3a4769de2480b74895f501",
        "parent": "https://github.com/apache/commons-jxpath/commit/508b814837fdca522c17838e9a750812c5cdcc8c",
        "bug_id": "commons-jxpath_8",
        "file": [
            {
                "sha": "36da6c960522f0cc89c1d729235711ee9535132a",
                "filename": "src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java",
                "blob_url": "https://github.com/apache/commons-jxpath/blob/571b8d452b48a5bf2d3a4769de2480b74895f501/src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java",
                "raw_url": "https://github.com/apache/commons-jxpath/raw/571b8d452b48a5bf2d3a4769de2480b74895f501/src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java",
                "status": "modified",
                "changes": 9,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/commons-jxpath/contents/src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java?ref=571b8d452b48a5bf2d3a4769de2480b74895f501",
                "patch": "@@ -1,7 +1,7 @@\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java,v 1.9 2002/05/14 23:08:26 dmitri Exp $\n- * $Revision: 1.9 $\n- * $Date: 2002/05/14 23:08:26 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/axes/ChildContext.java,v 1.10 2002/08/10 01:31:37 dmitri Exp $\n+ * $Revision: 1.10 $\n+ * $Date: 2002/08/10 01:31:37 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n@@ -72,7 +72,7 @@\n  * \"preceding-sibling::\" axes.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.9 $ $Date: 2002/05/14 23:08:26 $\n+ * @version $Revision: 1.10 $ $Date: 2002/08/10 01:31:37 $\n  */\n public class ChildContext extends EvalContext {\n     private NodeTest nodeTest;\n@@ -121,6 +121,7 @@ public Pointer getSingleNodePointer(){\n                     return pointer;\n                 }\n             }\n+            return null;\n         }\n         return getCurrentNodePointer();\n     }",
                "deletions": 4
            }
        ]
    }
]