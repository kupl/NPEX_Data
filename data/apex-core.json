{
    "apex-core_0ce507e": {
        "bug_id": "apex-core_0ce507e",
        "commit": "https://github.com/apache/apex-core/commit/0ce507e2b00df95e4394bb452439c57849eec62b",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/apex-core/blob/0ce507e2b00df95e4394bb452439c57849eec62b/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/apex-core/contents/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java?ref=0ce507e2b00df95e4394bb452439c57849eec62b",
                "deletions": 4,
                "filename": "engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "patch": "@@ -1006,7 +1006,7 @@ public ContainerHeartbeatResponse processHeartbeat(ContainerHeartbeat heartbeat)\n       PTOperator oper = this.plan.getAllOperators().get(shb.getNodeId());\n \n       if (oper == null) {\n-        LOG.error(\"Heartbeat for unknown operator {} (container {})\", shb.getNodeId(), heartbeat.getContainerId());\n+        LOG.info(\"Heartbeat for unknown operator {} (container {})\", shb.getNodeId(), heartbeat.getContainerId());\n         sca.undeployOpers.add(shb.nodeId);\n         continue;\n       }\n@@ -1817,9 +1817,11 @@ private LogicalOperatorInfo fillLogicalOperatorInfo(OperatorMeta operator)\n         loi.status.put(physicalOperator.getState().toString(), count);\n       }\n       count.increment();\n-      long recoveryWindowId = toWsWindowId(physicalOperator.getRecoveryCheckpoint().windowId);\n-      if (loi.recoveryWindowId == 0 || loi.recoveryWindowId > recoveryWindowId) {\n-        loi.recoveryWindowId = recoveryWindowId;\n+      if (physicalOperator.getRecoveryCheckpoint() != null) {\n+        long recoveryWindowId = toWsWindowId(physicalOperator.getRecoveryCheckpoint().windowId);\n+        if (loi.recoveryWindowId == 0 || loi.recoveryWindowId > recoveryWindowId) {\n+          loi.recoveryWindowId = recoveryWindowId;\n+        }\n       }\n       PTContainer container = physicalOperator.getContainer();\n       if (container != null) {",
                "raw_url": "https://github.com/apache/apex-core/raw/0ce507e2b00df95e4394bb452439c57849eec62b/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "sha": "68bfd47c5923f4d336d2b1028163fd5bc97644ae",
                "status": "modified"
            }
        ],
        "message": "SPOI-3288: fixed npe in fillLogicalPlanInfo",
        "parent": "https://github.com/apache/apex-core/commit/a2137e6c7c323e79ec019b67d9701cc1132d23ea",
        "repo": "apex-core",
        "unit_tests": [
            "StreamingContainerManagerTest.java"
        ]
    },
    "apex-core_2028959": {
        "bug_id": "apex-core_2028959",
        "commit": "https://github.com/apache/apex-core/commit/202895914e927eff8bfa46236d7fd818ed9e7f1a",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/apex-core/blob/202895914e927eff8bfa46236d7fd818ed9e7f1a/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/apex-core/contents/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java?ref=202895914e927eff8bfa46236d7fd818ed9e7f1a",
                "deletions": 4,
                "filename": "engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "patch": "@@ -60,6 +60,7 @@\n import com.datatorrent.stram.plan.logical.LogicalPlan.OperatorMeta;\n import com.datatorrent.stram.plan.logical.LogicalPlanConfiguration;\n import com.datatorrent.stram.plan.logical.Operators;\n+import com.datatorrent.stram.plan.logical.Operators.PortContextPair;\n import com.datatorrent.stram.plan.logical.requests.LogicalPlanRequest;\n import com.datatorrent.stram.plan.physical.*;\n import com.datatorrent.stram.plan.physical.OperatorStatus.PortStatus;\n@@ -2182,16 +2183,16 @@ public void setLoggersLevel(Map<String, String> changedLoggers)\n \n     Operators.PortMappingDescriptor portMap = new Operators.PortMappingDescriptor();\n     Operators.describe(logicalOperator.getOperator(), portMap);\n-    InputPort<?> inputPort = portMap.inputPorts.get(portName).component;\n+    PortContextPair<InputPort<?>> inputPort = portMap.inputPorts.get(portName);\n     if (inputPort != null) {\n-      return logicalOperator.getMeta(inputPort).getAttributes().clone();\n+      return logicalOperator.getMeta(inputPort.component).getAttributes().clone();\n     }\n     else {\n-      OutputPort<?> outputPort = portMap.outputPorts.get(portName).component;\n+      PortContextPair<OutputPort<?>> outputPort = portMap.outputPorts.get(portName);\n       if (outputPort == null) {\n         throw new IllegalArgumentException(\"Invalid port name \" + portName);\n       }\n-      return logicalOperator.getMeta(outputPort).getAttributes().clone();\n+      return logicalOperator.getMeta(outputPort.component).getAttributes().clone();\n     }\n   }\n ",
                "raw_url": "https://github.com/apache/apex-core/raw/202895914e927eff8bfa46236d7fd818ed9e7f1a/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "sha": "3538abb6075f044f911ffb2931049712ff2a5289",
                "status": "modified"
            }
        ],
        "message": "Fixed NPE for getting port attributes",
        "parent": "https://github.com/apache/apex-core/commit/08c6e68fa04b043fc941ce0f869de3e8dba9b673",
        "repo": "apex-core",
        "unit_tests": [
            "StreamingContainerManagerTest.java"
        ]
    },
    "apex-core_73c6701": {
        "bug_id": "apex-core_73c6701",
        "commit": "https://github.com/apache/apex-core/commit/73c6701b664b748dfe066b8ed9220cf60ad88412",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/apex-core/blob/73c6701b664b748dfe066b8ed9220cf60ad88412/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/apex-core/contents/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java?ref=73c6701b664b748dfe066b8ed9220cf60ad88412",
                "deletions": 1,
                "filename": "engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "patch": "@@ -1212,7 +1212,9 @@ public void deploy(Set<PTContainer> releaseContainers, Collection<PTOperator> un\n   @Override\n   public void recordEventAsync(StramEvent ev)\n   {\n-    eventBus.publishAsync(ev);\n+    if (eventBus != null) {\n+      eventBus.publishAsync(ev);\n+    }\n   }\n \n   @Override",
                "raw_url": "https://github.com/apache/apex-core/raw/73c6701b664b748dfe066b8ed9220cf60ad88412/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "sha": "1619ec9b7896619d04f6469d8d6a6da6a9b12a1b",
                "status": "modified"
            }
        ],
        "message": "fix NPE",
        "parent": "https://github.com/apache/apex-core/commit/ae9f3195eb7202257cdb8c7f3e184a914357afd7",
        "repo": "apex-core",
        "unit_tests": [
            "StreamingContainerManagerTest.java"
        ]
    },
    "apex-core_7bbb4cf": {
        "bug_id": "apex-core_7bbb4cf",
        "commit": "https://github.com/apache/apex-core/commit/7bbb4cfd2af6d5c5c99c58222c44a848bc6534b2",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/apex-core/blob/7bbb4cfd2af6d5c5c99c58222c44a848bc6534b2/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/apex-core/contents/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java?ref=7bbb4cfd2af6d5c5c99c58222c44a848bc6534b2",
                "deletions": 2,
                "filename": "engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "patch": "@@ -1700,8 +1700,12 @@ public void run()\n           if (stats.windowId > currentEndWindowStatsWindowId) {\n             Map<Integer, EndWindowStats> endWindowStatsMap = endWindowStatsOperatorMap.get(stats.windowId);\n             if (endWindowStatsMap == null) {\n-              endWindowStatsOperatorMap.putIfAbsent(stats.windowId, new ConcurrentSkipListMap<Integer, EndWindowStats>());\n-              endWindowStatsMap = endWindowStatsOperatorMap.get(stats.windowId);\n+              endWindowStatsMap = new ConcurrentSkipListMap<Integer, EndWindowStats>();\n+              Map<Integer, EndWindowStats> endWindowStatsMapPrevious =\n+                  endWindowStatsOperatorMap.putIfAbsent(stats.windowId, endWindowStatsMap);\n+              if (endWindowStatsMapPrevious != null) {\n+                endWindowStatsMap = endWindowStatsMapPrevious;\n+              }\n             }\n             endWindowStatsMap.put(shb.getNodeId(), endWindowStats);\n ",
                "raw_url": "https://github.com/apache/apex-core/raw/7bbb4cfd2af6d5c5c99c58222c44a848bc6534b2/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "sha": "aa79243c1db5f3e54ae6c1fb7d7d6b32362aeecd",
                "status": "modified"
            }
        ],
        "message": "APEXCORE-362 - NPE in StreamingContainerManager. Fixed race condition between the thread that insert into endWindowStatsOperatorMap and the thread that removes entries when  endWindowStatsOperatorMap exceeds 1000 entries.",
        "parent": "https://github.com/apache/apex-core/commit/00939d54b32541766319a105badbb611a6843111",
        "repo": "apex-core",
        "unit_tests": [
            "StreamingContainerManagerTest.java"
        ]
    },
    "apex-core_9df827d": {
        "bug_id": "apex-core_9df827d",
        "commit": "https://github.com/apache/apex-core/commit/9df827df9fe4005d166d4e8223f64e0d5c474e3f",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/apex-core/blob/9df827df9fe4005d166d4e8223f64e0d5c474e3f/engine/src/main/java/com/datatorrent/stram/webapp/StramWebServices.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/apex-core/contents/engine/src/main/java/com/datatorrent/stram/webapp/StramWebServices.java?ref=9df827df9fe4005d166d4e8223f64e0d5c474e3f",
                "deletions": 5,
                "filename": "engine/src/main/java/com/datatorrent/stram/webapp/StramWebServices.java",
                "patch": "@@ -210,11 +210,13 @@ public JSONObject getOperatorClasses(@QueryParam(\"parent\") String parent)\n     JSONObject result = new JSONObject();\n     JSONArray classNames = new JSONArray();\n \n-    if (parent.equals(\"chart\")) {\n-      parent = \"com.datatorrent.lib.chart.ChartOperator\";\n-    }\n-    else if (parent.equals(\"filter\")) {\n-      parent = \"com.datatorrent.lib.util.SimpleFilterOperator\";\n+    if (parent != null) {\n+      if (parent.equals(\"chart\")) {\n+        parent = \"com.datatorrent.lib.chart.ChartOperator\";\n+      }\n+      else if (parent.equals(\"filter\")) {\n+        parent = \"com.datatorrent.lib.util.SimpleFilterOperator\";\n+      }\n     }\n \n     try {",
                "raw_url": "https://github.com/apache/apex-core/raw/9df827df9fe4005d166d4e8223f64e0d5c474e3f/engine/src/main/java/com/datatorrent/stram/webapp/StramWebServices.java",
                "sha": "082a005b98abb58cfaf405ca498524e01539321a",
                "status": "modified"
            }
        ],
        "message": "fixed NPE in operatorClasses call",
        "parent": "https://github.com/apache/apex-core/commit/5a6e1b1030aa315cb8f503a9beba40d8855a7a6a",
        "repo": "apex-core",
        "unit_tests": [
            "StramWebServicesTest.java"
        ]
    },
    "apex-core_c6b3a92": {
        "bug_id": "apex-core_c6b3a92",
        "commit": "https://github.com/apache/apex-core/commit/c6b3a925a408e767796230ff54055fd2d9f19480",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/apex-core/blob/c6b3a925a408e767796230ff54055fd2d9f19480/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/apex-core/contents/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java?ref=c6b3a925a408e767796230ff54055fd2d9f19480",
                "deletions": 0,
                "filename": "engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "patch": "@@ -1570,6 +1570,10 @@ public void run()\n           entry.getValue().recordingId = null;\n         }\n         for (ContainerStats.OperatorStats stats : statsList) {\n+          if (stats == null) {\n+            LOG.warn(\"Operator {} statistics list contains null element\", shb.getNodeId());\n+            continue;\n+          }\n \n           /* report checkpoint-ed WindowId status of the operator */\n           if (stats.checkpoint instanceof Checkpoint) {",
                "raw_url": "https://github.com/apache/apex-core/raw/c6b3a925a408e767796230ff54055fd2d9f19480/engine/src/main/java/com/datatorrent/stram/StreamingContainerManager.java",
                "sha": "ae7972821adf77a2ad1c8f1b620b1dd3b7b00b17",
                "status": "modified"
            }
        ],
        "message": "APEXCORE-363 - NPE in StreamingContainerManager. Skip null in the statistics list in case it was inserted as a result of incorrect CircularBuffer usage in the OperatorContext.",
        "parent": "https://github.com/apache/apex-core/commit/c2eb06c686e93419764140a0e07b046a73d172be",
        "repo": "apex-core",
        "unit_tests": [
            "StreamingContainerManagerTest.java"
        ]
    }
}