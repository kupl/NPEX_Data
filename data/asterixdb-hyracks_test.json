{
    "asterixdb-hyracks_84ddcb9": {
        "repo": "asterixdb-hyracks",
        "message": "Fix for ASTERIXDB-1200\n\nFixes an issue where in the Hyracks integration tests,\nif the result size is 0, a NPE is thrown instead of\nan assert passing or failing.\n\nChange-Id: Ib519882b9cbca941addcd66232c176a2eaeecc4b\nReviewed-on: https://asterix-gerrit.ics.uci.edu/524\nTested-by: Jenkins <jenkins@fulliautomatix.ics.uci.edu>\nReviewed-by: Till Westmann <tillw@apache.org>",
        "commit": "https://github.com/apache/asterixdb-hyracks/commit/84ddcb998e908cf4f8f27275aa6855063c14b3f0",
        "parent": "https://github.com/apache/asterixdb-hyracks/commit/c10677f36fd1de1ce1a984419e29718a1cd82f55",
        "bug_id": "asterixdb-hyracks_84ddcb9",
        "file": [
            {
                "sha": "7a339b774c393ab10d8df1f01b11c56961d45d13",
                "filename": "hyracks/hyracks-examples/hyracks-integration-tests/src/test/java/org/apache/hyracks/tests/integration/AbstractIntegrationTest.java",
                "blob_url": "https://github.com/apache/asterixdb-hyracks/blob/84ddcb998e908cf4f8f27275aa6855063c14b3f0/hyracks/hyracks-examples/hyracks-integration-tests/src/test/java/org/apache/hyracks/tests/integration/AbstractIntegrationTest.java",
                "raw_url": "https://github.com/apache/asterixdb-hyracks/raw/84ddcb998e908cf4f8f27275aa6855063c14b3f0/hyracks/hyracks-examples/hyracks-integration-tests/src/test/java/org/apache/hyracks/tests/integration/AbstractIntegrationTest.java",
                "status": "modified",
                "changes": 10,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/asterixdb-hyracks/contents/hyracks/hyracks-examples/hyracks-integration-tests/src/test/java/org/apache/hyracks/tests/integration/AbstractIntegrationTest.java?ref=84ddcb998e908cf4f8f27275aa6855063c14b3f0",
                "patch": "@@ -145,7 +145,6 @@ protected void runTest(JobSpecification spec) throws Exception {\n         hcc.waitForCompletion(jobId);\n     }\n \n-\n     protected List<String> readResults(JobSpecification spec, JobId jobId, ResultSetId resultSetId) throws Exception {\n         int nReaders = 1;\n \n@@ -190,13 +189,18 @@ protected boolean runTestAndCompareResults(JobSpecification spec, String[] expec\n             results = readResults(spec, jobId, spec.getResultSetIds().get(i));\n             BufferedReader expectedFile = new BufferedReader(new FileReader(expectedFileNames[i]));\n \n+            //We're expecting some sort of result.\n+            Assert.assertTrue(results != null);\n+            Assert.assertTrue(results.size() > 0);\n+\n             String expectedLine, actualLine;\n             int j = 0;\n             while ((expectedLine = expectedFile.readLine()) != null) {\n                 actualLine = results.get(j).trim();\n                 Assert.assertEquals(expectedLine, actualLine);\n                 j++;\n             }\n+            //We also expect the same amount of results.\n             Assert.assertEquals(j, results.size());\n             expectedFile.close();\n         }\n@@ -212,7 +216,7 @@ protected void runTestAndStoreResult(JobSpecification spec, File file) throws Ex\n         List<String> results;\n         for (int i = 0; i < spec.getResultSetIds().size(); i++) {\n             results = readResults(spec, jobId, spec.getResultSetIds().get(i));\n-            for(String str : results) {\n+            for (String str : results) {\n                 output.write(str);\n             }\n         }\n@@ -229,4 +233,4 @@ protected File createTempFile() throws IOException {\n         outputFiles.add(tempFile);\n         return tempFile;\n     }\n-}\n\\ No newline at end of file\n+}",
                "deletions": 3
            }
        ],
        "patched_files": [],
        "unit_tests": [
            "AbstractIntegrationTest.java"
        ]
    }
}