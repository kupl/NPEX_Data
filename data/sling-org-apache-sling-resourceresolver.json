{
    "sling-org-apache-sling-resourceresolver_3e29310": {
        "bug_id": "sling-org-apache-sling-resourceresolver_3e29310",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/3e2931050672b095f37a1074245c7526e8e26138",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/3e2931050672b095f37a1074245c7526e8e26138/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderStorage.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderStorage.java?ref=3e2931050672b095f37a1074245c7526e8e26138",
                "deletions": 1,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderStorage.java",
                "patch": "@@ -23,6 +23,7 @@\n \n import org.apache.sling.api.resource.runtime.dto.AuthType;\n import org.apache.sling.resourceresolver.impl.providers.tree.PathTree;\n+import org.apache.sling.spi.resource.provider.ResourceProvider;\n \n /**\n  * The resource provider storage contains all available handlers\n@@ -60,7 +61,8 @@ public ResourceProviderStorage(List<ResourceProviderHandler> handlers) {\n             if (info.isAttributable()) {\n                 this.attributableHandlers.add(h);\n             }\n-            if (h.getResourceProvider().getQueryLanguageProvider() != null) {\n+            final ResourceProvider<Object> rp = h.getResourceProvider();\n+            if (rp != null && rp.getQueryLanguageProvider() != null) {\n                 this.languageQueryableHandlers.add(h);\n             }\n         }",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/3e2931050672b095f37a1074245c7526e8e26138/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderStorage.java",
                "sha": "dac3616d3f4298ba29cc8ed298ce6e7bad8b3dc8",
                "status": "modified"
            },
            {
                "additions": 15,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/3e2931050672b095f37a1074245c7526e8e26138/src/main/java/org/apache/sling/resourceresolver/impl/providers/stateful/ProviderManager.java",
                "changes": 25,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/providers/stateful/ProviderManager.java?ref=3e2931050672b095f37a1074245c7526e8e26138",
                "deletions": 10,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/providers/stateful/ProviderManager.java",
                "patch": "@@ -81,17 +81,22 @@ public ProviderManager(@Nonnull final ResourceResolver resolver, @Nonnull final\n     throws LoginException {\n         AuthenticatedResourceProvider provider = this.contextMap.get(handler);\n         if (provider == null) {\n-            try {\n-                provider = authenticate(handler, control);\n-                this.contextMap.put(handler, provider);\n-                if ( handler.getInfo().getAuthType() == AuthType.lazy || handler.getInfo().getAuthType() == AuthType.required ) {\n-                    control.registerAuthenticatedProvider(handler, provider.getResolveContext().getProviderState());\n+            final ResourceProvider<Object> resourceProvider = handler.getResourceProvider();\n+            if ( resourceProvider != null ) {\n+                try {\n+                    provider = authenticate(handler, resourceProvider, control);\n+                    this.contextMap.put(handler, provider);\n+                    if ( handler.getInfo().getAuthType() == AuthType.lazy || handler.getInfo().getAuthType() == AuthType.required ) {\n+                        control.registerAuthenticatedProvider(handler, provider.getResolveContext().getProviderState());\n+                    }\n+                } catch ( final LoginException le) {\n+                    logger.debug(\"Authentication to resource provider \" + resourceProvider + \" failed: \" + le.getMessage(), le);\n+                    this.contextMap.put(handler, AuthenticatedResourceProvider.UNAUTHENTICATED_PROVIDER);\n+\n+                    throw le;\n                 }\n-            } catch ( final LoginException le) {\n-                logger.debug(\"Authentication to resource provider \" + handler.getResourceProvider() + \" failed: \" + le.getMessage(), le);\n+            } else {\n                 this.contextMap.put(handler, AuthenticatedResourceProvider.UNAUTHENTICATED_PROVIDER);\n-\n-                throw le;\n             }\n         }\n \n@@ -147,8 +152,8 @@ public void authenticateAll(@Nonnull final List<ResourceProviderHandler> handler\n      * @throws LoginException If authentication fails\n      */\n     private @Nonnull AuthenticatedResourceProvider authenticate(@Nonnull final ResourceProviderHandler handler,\n+            @Nonnull final ResourceProvider<Object> provider,\n             @Nonnull final ResourceResolverControl control) throws LoginException {\n-        final ResourceProvider<Object> provider = handler.getResourceProvider();\n         boolean isAuthenticated = false;\n         Object contextData = null;\n         if ( (handler.getInfo().getAuthType() == AuthType.required || handler.getInfo().getAuthType() == AuthType.lazy) ) {",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/3e2931050672b095f37a1074245c7526e8e26138/src/main/java/org/apache/sling/resourceresolver/impl/providers/stateful/ProviderManager.java",
                "sha": "8509892cdd68b43c71fd6c9654fbc39ac1120901",
                "status": "modified"
            }
        ],
        "message": "SLING-5525 : Potential NPE / race condition with unregistered resource providers\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1730794 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/70de28d2626c4aefda8158b128140a40a2f9b360",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "ResourceProviderStorageTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_51a7660": {
        "bug_id": "sling-org-apache-sling-resourceresolver_51a7660",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/51a766032ea4e0d69943411cb7249cac3e8ccf45",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/51a766032ea4e0d69943411cb7249cac3e8ccf45/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderTracker.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderTracker.java?ref=51a766032ea4e0d69943411cb7249cac3e8ccf45",
                "deletions": 1,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderTracker.java",
                "patch": "@@ -406,7 +406,7 @@ public void run() {\n                 for(final ProviderEvent e : events) {\n                     postOSGiEvent(e);\n                     postResourceProviderChange(e);\n-                    if ( e.pid != null ) {\n+                    if ( e.pid != null && listener != null ) {\n                         listener.providerChanged(e.pid);\n                     }\n                 }",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/51a766032ea4e0d69943411cb7249cac3e8ccf45/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderTracker.java",
                "sha": "d10fde9c26c9912a4e613dde47161ef2c3d164eb",
                "status": "modified"
            }
        ],
        "message": "SLING-5545 Potential NPE in ResourceProviderTracker.postEvents during shutdown\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1731760 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/5e48237ac9401f0e4f202cf8238f5953d194be24",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "ResourceProviderTrackerTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_52d2df7": {
        "bug_id": "sling-org-apache-sling-resourceresolver_52d2df7",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/52d2df7c2bb790c40e967235bbc0efe0b6812784",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/52d2df7c2bb790c40e967235bbc0efe0b6812784/src/main/java/org/apache/sling/resourceresolver/impl/observation/ResourceChangeListenerInfo.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/observation/ResourceChangeListenerInfo.java?ref=52d2df7c2bb790c40e967235bbc0efe0b6812784",
                "deletions": 5,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/observation/ResourceChangeListenerInfo.java",
                "patch": "@@ -117,17 +117,17 @@ public ResourceChangeListenerInfo(final ServiceReference<ResourceChangeListener>\n         if (ref.getProperty(CHANGES) != null ) {\n             final Set<ChangeType> rts = new HashSet<ChangeType>();\n             final Set<ChangeType> pts = new HashSet<ChangeType>();\n-            for (final String changeName : toStringArray(ref.getProperty(CHANGES))) {\n-                try {\n+            try {\n+                for (final String changeName : toStringArray(ref.getProperty(CHANGES))) {\n                     final ChangeType ct = ChangeType.valueOf(changeName);\n-                    if ( ct.ordinal() < ChangeType.PROVIDER_ADDED.ordinal()) {\n+                    if (ct.ordinal() < ChangeType.PROVIDER_ADDED.ordinal()) {\n                         rts.add(ct);\n                     } else {\n                         pts.add(ct);\n                     }\n-                } catch ( final IllegalArgumentException iae) {\n-                    configValid = false;\n                 }\n+            } catch (final Exception e) {\n+                configValid = false;\n             }\n             if ( rts.isEmpty() ) {\n                 this.resourceChangeTypes = Collections.emptySet();",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/52d2df7c2bb790c40e967235bbc0efe0b6812784/src/main/java/org/apache/sling/resourceresolver/impl/observation/ResourceChangeListenerInfo.java",
                "sha": "0d9eadb4340a5824efc34f3124be7f95a3b9013e",
                "status": "modified"
            }
        ],
        "message": "SLING-7009 NPE in ResourceChangeListenerInfo when resource.change.types is not String or String array\n\ncatch NPE also and mark config invalid when not String or String array\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1802897 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/59ed07e467160ee73be638a9358e56d527cf61ad",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "ResourceChangeListenerInfoTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_5e48237": {
        "bug_id": "sling-org-apache-sling-resourceresolver_5e48237",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/5e48237ac9401f0e4f202cf8238f5953d194be24",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/5e48237ac9401f0e4f202cf8238f5953d194be24/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java?ref=5e48237ac9401f0e4f202cf8238f5953d194be24",
                "deletions": 2,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java",
                "patch": "@@ -32,6 +32,7 @@\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n+import javax.annotation.CheckForNull;\n import javax.jcr.NamespaceException;\n import javax.jcr.RepositoryException;\n import javax.jcr.Session;\n@@ -61,7 +62,6 @@\n import org.apache.sling.resourceresolver.impl.mapping.MapEntry;\n import org.apache.sling.resourceresolver.impl.params.ParsedParameters;\n import org.apache.sling.resourceresolver.impl.providers.ResourceProviderStorageProvider;\n-import org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n@@ -1039,7 +1039,12 @@ private Resource getChildInternal(final Resource parent, final String childName)\n     /**\n      * Creates a resource with the given path if existing\n      */\n-    private Resource getAbsoluteResourceInternal(final Resource parent, final String path, final Map<String, String> parameters, final boolean isResolve) {\n+    private Resource getAbsoluteResourceInternal(@CheckForNull final Resource parent, @CheckForNull final String path, final Map<String, String> parameters, final boolean isResolve) {\n+        if (path == null || path.length() == 0 || path.charAt(0) != '/') {\n+            logger.debug(\"getResourceInternal: Path must be absolute {}\", path);\n+            return null; // path must be absolute\n+        }\n+\n         final Resource parentToUse;\n         if (parent != null && path.startsWith(parent.getPath())) {\n             parentToUse = parent;",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/5e48237ac9401f0e4f202cf8238f5953d194be24/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java",
                "sha": "7e5a672e241a714b71cc70d24470aa2126b25759",
                "status": "modified"
            }
        ],
        "message": "SLING-5532 : resolver.map(../messaging.html) results in NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1731017 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/3e2931050672b095f37a1074245c7526e8e26138",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "ResourceResolverImplTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_67c278a": {
        "bug_id": "sling-org-apache-sling-resourceresolver_67c278a",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/67c278a1093b1f67a84e4838afda537fffd9fe8a",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/67c278a1093b1f67a84e4838afda537fffd9fe8a/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java?ref=67c278a1093b1f67a84e4838afda537fffd9fe8a",
                "deletions": 1,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java",
                "patch": "@@ -481,7 +481,7 @@ private boolean doUpdateAlias(final Resource resource) {\n             final String containingResourceName = containingResource.getName();\n             final String parentPath = ResourceUtil.getParent(containingResource.getPath());\n \n-            final Map<String, String> aliasMapEntry = aliasMap.get(parentPath);\n+            final Map<String, String> aliasMapEntry = parentPath == null ? null : aliasMap.get(parentPath);\n             if (aliasMapEntry != null) {\n                 for (Iterator<Map.Entry<String, String>> iterator = aliasMapEntry.entrySet().iterator(); iterator.hasNext(); ) {\n                     final Map.Entry<String, String> entry = iterator.next();",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/67c278a1093b1f67a84e4838afda537fffd9fe8a/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java",
                "sha": "4fcadca1fffb5f375eb44efdd5d26fb164e74c09",
                "status": "modified"
            }
        ],
        "message": "SLING-6441 : NPE while processing mapping events\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1777542 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/5b055a8da116626070b27ce4dec65ce255a981fe",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "MapEntriesTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_c1f9345": {
        "bug_id": "sling-org-apache-sling-resourceresolver_c1f9345",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/c1f9345570466402c5f63f689ccab2e49ad0594b",
        "file": [
            {
                "additions": 22,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/c1f9345570466402c5f63f689ccab2e49ad0594b/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java",
                "changes": 43,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java?ref=c1f9345570466402c5f63f689ccab2e49ad0594b",
                "deletions": 21,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java",
                "patch": "@@ -563,31 +563,32 @@ public String map(final HttpServletRequest request, final String resourcePath) {\n     public Resource getResource(String path) {\n         checkClosed();\n \n-        // if the path is absolute, normalize . and .. segements and get res\n-        if (path.startsWith(\"/\")) {\n-            path = ResourceUtil.normalize(path);\n-            Resource result = (path != null) ? getResourceInternal(path) : null;\n-            if (result != null) {\n-                result = this.factory.getResourceDecoratorTracker().decorate(result);\n-                return result;\n-            }\n-            return null;\n-        }\n+        Resource result = null;\n+        if ( path != null ) {\n+            // if the path is absolute, normalize . and .. segments and get res\n+            if (path.startsWith(\"/\")) {\n+                path = ResourceUtil.normalize(path);\n+                result = (path != null) ? getResourceInternal(path) : null;\n+                if (result != null) {\n+                    result = this.factory.getResourceDecoratorTracker().decorate(result);\n+                }\n+            } else {\n \n-        // otherwise we have to apply the search path\n-        // (don't use this.getSearchPath() to save a few cycle for not cloning)\n-        final String[] paths = factory.getSearchPath();\n-        if (paths != null) {\n-            for (final String prefix : factory.getSearchPath()) {\n-                final Resource res = getResource(prefix + path);\n-                if (res != null) {\n-                    return res;\n+                // otherwise we have to apply the search path\n+                // (don't use this.getSearchPath() to save a few cycle for not cloning)\n+                final String[] paths = factory.getSearchPath();\n+                if (paths != null) {\n+                    for (final String prefix : factory.getSearchPath()) {\n+                        result = getResource(prefix + path);\n+                        if (result != null) {\n+                            break;\n+                        }\n+                    }\n                 }\n             }\n         }\n \n-        // no resource found, if we get here\n-        return null;\n+        return result;\n     }\n \n     /**\n@@ -597,7 +598,7 @@ public Resource getResource(String path) {\n     public Resource getResource(final Resource base, String path) {\n         checkClosed();\n \n-        if (!path.startsWith(\"/\") && base != null) {\n+        if (path != null && !path.startsWith(\"/\") && base != null) {\n             path = base.getPath() + \"/\" + path;\n         }\n ",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/c1f9345570466402c5f63f689ccab2e49ad0594b/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java",
                "sha": "9eddf6b99b77814a02563495882def8af6b77bae",
                "status": "modified"
            },
            {
                "additions": 22,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/c1f9345570466402c5f63f689ccab2e49ad0594b/src/test/java/org/apache/sling/resourceresolver/impl/ResourceResolverImplTest.java",
                "changes": 35,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/test/java/org/apache/sling/resourceresolver/impl/ResourceResolverImplTest.java?ref=c1f9345570466402c5f63f689ccab2e49ad0594b",
                "deletions": 13,
                "filename": "src/test/java/org/apache/sling/resourceresolver/impl/ResourceResolverImplTest.java",
                "patch": "@@ -176,26 +176,26 @@\n         final Resource res00 = resResolver.resolve((String) null);\n         assertNotNull(res00);\n         assertTrue(\"Resource must be NonExistingResource\",\n-                        res00 instanceof NonExistingResource);\n+                res00 instanceof NonExistingResource);\n         assertEquals(\"Null path is expected to return root\", \"/\",\n-            res00.getPath());\n+                res00.getPath());\n \n         // relative paths are treated as if absolute\n         final String path01 = \"relPath/relPath\";\n         final Resource res01 = resResolver.resolve(path01);\n         assertNotNull(res01);\n         assertEquals(\"Expecting absolute path for relative path\", \"/\" + path01,\n-            res01.getPath());\n+                res01.getPath());\n         assertTrue(\"Resource must be NonExistingResource\",\n-            res01 instanceof NonExistingResource);\n+                res01 instanceof NonExistingResource);\n \n         final String no_resource_path = \"/no_resource/at/this/location\";\n         final Resource res02 = resResolver.resolve(no_resource_path);\n         assertNotNull(res02);\n         assertEquals(\"Expecting absolute path for relative path\",\n-            no_resource_path, res02.getPath());\n+                no_resource_path, res02.getPath());\n         assertTrue(\"Resource must be NonExistingResource\",\n-            res01 instanceof NonExistingResource);\n+                res01 instanceof NonExistingResource);\n \n         try {\n             resResolver.resolve((HttpServletRequest) null);\n@@ -207,25 +207,34 @@\n         final Resource res0 = resResolver.resolve(null, no_resource_path);\n         assertNotNull(\"Expecting resource if resolution fails\", res0);\n         assertTrue(\"Resource must be NonExistingResource\",\n-            res0 instanceof NonExistingResource);\n+                res0 instanceof NonExistingResource);\n         assertEquals(\"Path must be the original path\", no_resource_path,\n-            res0.getPath());\n+                res0.getPath());\n \n         final HttpServletRequest req1 = new ResourceResolverTestRequest(\n-            no_resource_path);\n+                no_resource_path);\n         final Resource res1 = resResolver.resolve(req1);\n         assertNotNull(\"Expecting resource if resolution fails\", res1);\n         assertTrue(\"Resource must be NonExistingResource\",\n-            res1 instanceof NonExistingResource);\n+                res1 instanceof NonExistingResource);\n         assertEquals(\"Path must be the original path\", no_resource_path,\n-            res1.getPath());\n+                res1.getPath());\n \n         final HttpServletRequest req2 = new ResourceResolverTestRequest(null);\n         final Resource res2 = resResolver.resolve(req2);\n         assertNotNull(\"Expecting resource if resolution fails\", res2);\n         assertTrue(\"Resource must be NonExistingResource\",\n-            res2 instanceof NonExistingResource);\n+                res2 instanceof NonExistingResource);\n         assertEquals(\"Path must be the the root path\", \"/\", res2.getPath());\n+\n+        final Resource res3 = resResolver.getResource(null);\n+        assertNull(\"Expected null resource for null path\", res3);\n+\n+        final Resource res4 = resResolver.getResource(null, null);\n+        assertNull(\"Expected null resource for null path\", res4);\n+\n+        final Resource res5 = resResolver.getResource(res01, null);\n+        assertNull(\"Expected null resource for null path\", res5);\n     }\n \n     @Test public void test_clone_based_on_anonymous() throws Exception {\n@@ -297,7 +306,7 @@\n         assertTrue(validNames.remove(names.next()));\n         assertFalse(\"Expect no more names\", names.hasNext());\n         assertTrue(\"Expect validNames set to be empty now\",\n-            validNames.isEmpty());\n+                validNames.isEmpty());\n \n         rr.close();\n     }",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/c1f9345570466402c5f63f689ccab2e49ad0594b/src/test/java/org/apache/sling/resourceresolver/impl/ResourceResolverImplTest.java",
                "sha": "860e70fdd135c6bf7b59326c3785fa41c57058ba",
                "status": "modified"
            }
        ],
        "message": "SLING-2626 :  NPE in ResourceResolverImpl.getResource. Apply slightly modifed version of patch from Radu Cotescu\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1400860 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/d7a7ef86377bbfd69d75b239bccbc83af1cafce2",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "ResourceResolverImplTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_e10e25b": {
        "bug_id": "sling-org-apache-sling-resourceresolver_e10e25b",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/e10e25b882c774c6ba8491db76a2e019d239c102",
        "file": [
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/e10e25b882c774c6ba8491db76a2e019d239c102/src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java",
                "changes": 15,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java?ref=e10e25b882c774c6ba8491db76a2e019d239c102",
                "deletions": 4,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java",
                "patch": "@@ -24,6 +24,7 @@\n \n import org.apache.sling.resourceresolver.impl.legacy.LegacyResourceProviderWhiteboard;\n import org.apache.sling.resourceresolver.impl.providers.ResourceProviderHandler;\n+import org.apache.sling.resourceresolver.impl.providers.ResourceProviderInfo;\n import org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker;\n import org.osgi.framework.BundleContext;\n import org.osgi.framework.Constants;\n@@ -56,7 +57,7 @@ public void activate(final BundleContext bc,\n         synchronized ( this ) {\n             this.tracker = tracker;\n \n-            final List<RequiredProvider> rps = new ArrayList<RequiredProvider>();\n+            final List<RequiredProvider> rps = new ArrayList<>();\n             if ( legycyConfiguration != null ) {\n                 final Logger logger = LoggerFactory.getLogger(getClass());\n                 for(final String value : legycyConfiguration) {\n@@ -103,17 +104,23 @@ public boolean checkPreconditions(final String unavailableName, final String una\n                 for (final RequiredProvider rp : localRequiredProviders) {\n                     canRegister = false;\n                     for (final ResourceProviderHandler h : localTracker.getResourceProviderStorage().getAllHandlers()) {\n-                        final ServiceReference ref = h.getInfo().getServiceReference();\n+                        final ResourceProviderInfo info = h.getInfo();\n+                        if ( info == null ) {\n+                            // provider has been deactivated in the meantime\n+                            // ignore and continue\n+                            continue;\n+                        }\n+                        final ServiceReference ref = info.getServiceReference();\n                         final Object servicePid = ref.getProperty(Constants.SERVICE_PID);\n                         if ( unavailableServicePid != null && unavailableServicePid.equals(servicePid) ) {\n                             // ignore this service\n                             continue;\n                         }\n-                        if ( unavailableName != null && unavailableName.equals(h.getInfo().getName()) ) {\n+                        if ( unavailableName != null && unavailableName.equals(info.getName()) ) {\n                             // ignore this service\n                             continue;\n                         }\n-                        if ( rp.name != null && rp.name.equals(h.getInfo().getName()) ) {\n+                        if ( rp.name != null && rp.name.equals(info.getName()) ) {\n                             canRegister = true;\n                             break;\n                         } else if (rp.filter != null && rp.filter.match(ref)) {",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/e10e25b882c774c6ba8491db76a2e019d239c102/src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java",
                "sha": "3262805d26d3f2f9569ef95f056cc5ddfdc56702",
                "status": "modified"
            }
        ],
        "message": "SLING-7266 : NPE in resource resolver activator",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/688b62265001397d15fade9a1bbf8bedf1eddd06",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "FactoryPreconditionsTest.java"
        ]
    }
}