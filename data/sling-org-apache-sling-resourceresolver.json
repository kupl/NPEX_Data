{
    "sling-org-apache-sling-resourceresolver_51a7660": {
        "bug_id": "sling-org-apache-sling-resourceresolver_51a7660",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/51a766032ea4e0d69943411cb7249cac3e8ccf45",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/51a766032ea4e0d69943411cb7249cac3e8ccf45/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderTracker.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderTracker.java?ref=51a766032ea4e0d69943411cb7249cac3e8ccf45",
                "deletions": 1,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderTracker.java",
                "patch": "@@ -406,7 +406,7 @@ public void run() {\n                 for(final ProviderEvent e : events) {\n                     postOSGiEvent(e);\n                     postResourceProviderChange(e);\n-                    if ( e.pid != null ) {\n+                    if ( e.pid != null && listener != null ) {\n                         listener.providerChanged(e.pid);\n                     }\n                 }",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/51a766032ea4e0d69943411cb7249cac3e8ccf45/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderTracker.java",
                "sha": "d10fde9c26c9912a4e613dde47161ef2c3d164eb",
                "status": "modified"
            }
        ],
        "message": "SLING-5545 Potential NPE in ResourceProviderTracker.postEvents during shutdown\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1731760 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/5e48237ac9401f0e4f202cf8238f5953d194be24",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "ResourceProviderTrackerTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_52d2df7": {
        "bug_id": "sling-org-apache-sling-resourceresolver_52d2df7",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/52d2df7c2bb790c40e967235bbc0efe0b6812784",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/52d2df7c2bb790c40e967235bbc0efe0b6812784/src/main/java/org/apache/sling/resourceresolver/impl/observation/ResourceChangeListenerInfo.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/observation/ResourceChangeListenerInfo.java?ref=52d2df7c2bb790c40e967235bbc0efe0b6812784",
                "deletions": 5,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/observation/ResourceChangeListenerInfo.java",
                "patch": "@@ -117,17 +117,17 @@ public ResourceChangeListenerInfo(final ServiceReference<ResourceChangeListener>\n         if (ref.getProperty(CHANGES) != null ) {\n             final Set<ChangeType> rts = new HashSet<ChangeType>();\n             final Set<ChangeType> pts = new HashSet<ChangeType>();\n-            for (final String changeName : toStringArray(ref.getProperty(CHANGES))) {\n-                try {\n+            try {\n+                for (final String changeName : toStringArray(ref.getProperty(CHANGES))) {\n                     final ChangeType ct = ChangeType.valueOf(changeName);\n-                    if ( ct.ordinal() < ChangeType.PROVIDER_ADDED.ordinal()) {\n+                    if (ct.ordinal() < ChangeType.PROVIDER_ADDED.ordinal()) {\n                         rts.add(ct);\n                     } else {\n                         pts.add(ct);\n                     }\n-                } catch ( final IllegalArgumentException iae) {\n-                    configValid = false;\n                 }\n+            } catch (final Exception e) {\n+                configValid = false;\n             }\n             if ( rts.isEmpty() ) {\n                 this.resourceChangeTypes = Collections.emptySet();",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/52d2df7c2bb790c40e967235bbc0efe0b6812784/src/main/java/org/apache/sling/resourceresolver/impl/observation/ResourceChangeListenerInfo.java",
                "sha": "0d9eadb4340a5824efc34f3124be7f95a3b9013e",
                "status": "modified"
            }
        ],
        "message": "SLING-7009 NPE in ResourceChangeListenerInfo when resource.change.types is not String or String array\n\ncatch NPE also and mark config invalid when not String or String array\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1802897 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/59ed07e467160ee73be638a9358e56d527cf61ad",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "ResourceChangeListenerInfoTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_5e48237": {
        "bug_id": "sling-org-apache-sling-resourceresolver_5e48237",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/5e48237ac9401f0e4f202cf8238f5953d194be24",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/5e48237ac9401f0e4f202cf8238f5953d194be24/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java?ref=5e48237ac9401f0e4f202cf8238f5953d194be24",
                "deletions": 2,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java",
                "patch": "@@ -32,6 +32,7 @@\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n+import javax.annotation.CheckForNull;\n import javax.jcr.NamespaceException;\n import javax.jcr.RepositoryException;\n import javax.jcr.Session;\n@@ -61,7 +62,6 @@\n import org.apache.sling.resourceresolver.impl.mapping.MapEntry;\n import org.apache.sling.resourceresolver.impl.params.ParsedParameters;\n import org.apache.sling.resourceresolver.impl.providers.ResourceProviderStorageProvider;\n-import org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n@@ -1039,7 +1039,12 @@ private Resource getChildInternal(final Resource parent, final String childName)\n     /**\n      * Creates a resource with the given path if existing\n      */\n-    private Resource getAbsoluteResourceInternal(final Resource parent, final String path, final Map<String, String> parameters, final boolean isResolve) {\n+    private Resource getAbsoluteResourceInternal(@CheckForNull final Resource parent, @CheckForNull final String path, final Map<String, String> parameters, final boolean isResolve) {\n+        if (path == null || path.length() == 0 || path.charAt(0) != '/') {\n+            logger.debug(\"getResourceInternal: Path must be absolute {}\", path);\n+            return null; // path must be absolute\n+        }\n+\n         final Resource parentToUse;\n         if (parent != null && path.startsWith(parent.getPath())) {\n             parentToUse = parent;",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/5e48237ac9401f0e4f202cf8238f5953d194be24/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java",
                "sha": "7e5a672e241a714b71cc70d24470aa2126b25759",
                "status": "modified"
            }
        ],
        "message": "SLING-5532 : resolver.map(../messaging.html) results in NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1731017 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/3e2931050672b095f37a1074245c7526e8e26138",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "ResourceResolverImplTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_67c278a": {
        "bug_id": "sling-org-apache-sling-resourceresolver_67c278a",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/67c278a1093b1f67a84e4838afda537fffd9fe8a",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/67c278a1093b1f67a84e4838afda537fffd9fe8a/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java?ref=67c278a1093b1f67a84e4838afda537fffd9fe8a",
                "deletions": 1,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java",
                "patch": "@@ -481,7 +481,7 @@ private boolean doUpdateAlias(final Resource resource) {\n             final String containingResourceName = containingResource.getName();\n             final String parentPath = ResourceUtil.getParent(containingResource.getPath());\n \n-            final Map<String, String> aliasMapEntry = aliasMap.get(parentPath);\n+            final Map<String, String> aliasMapEntry = parentPath == null ? null : aliasMap.get(parentPath);\n             if (aliasMapEntry != null) {\n                 for (Iterator<Map.Entry<String, String>> iterator = aliasMapEntry.entrySet().iterator(); iterator.hasNext(); ) {\n                     final Map.Entry<String, String> entry = iterator.next();",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/67c278a1093b1f67a84e4838afda537fffd9fe8a/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java",
                "sha": "4fcadca1fffb5f375eb44efdd5d26fb164e74c09",
                "status": "modified"
            }
        ],
        "message": "SLING-6441 : NPE while processing mapping events\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1777542 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/5b055a8da116626070b27ce4dec65ce255a981fe",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "MapEntriesTest.java"
        ]
    },
    "sling-org-apache-sling-resourceresolver_e10e25b": {
        "bug_id": "sling-org-apache-sling-resourceresolver_e10e25b",
        "commit": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/e10e25b882c774c6ba8491db76a2e019d239c102",
        "file": [
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/e10e25b882c774c6ba8491db76a2e019d239c102/src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java",
                "changes": 15,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-resourceresolver/contents/src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java?ref=e10e25b882c774c6ba8491db76a2e019d239c102",
                "deletions": 4,
                "filename": "src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java",
                "patch": "@@ -24,6 +24,7 @@\n \n import org.apache.sling.resourceresolver.impl.legacy.LegacyResourceProviderWhiteboard;\n import org.apache.sling.resourceresolver.impl.providers.ResourceProviderHandler;\n+import org.apache.sling.resourceresolver.impl.providers.ResourceProviderInfo;\n import org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker;\n import org.osgi.framework.BundleContext;\n import org.osgi.framework.Constants;\n@@ -56,7 +57,7 @@ public void activate(final BundleContext bc,\n         synchronized ( this ) {\n             this.tracker = tracker;\n \n-            final List<RequiredProvider> rps = new ArrayList<RequiredProvider>();\n+            final List<RequiredProvider> rps = new ArrayList<>();\n             if ( legycyConfiguration != null ) {\n                 final Logger logger = LoggerFactory.getLogger(getClass());\n                 for(final String value : legycyConfiguration) {\n@@ -103,17 +104,23 @@ public boolean checkPreconditions(final String unavailableName, final String una\n                 for (final RequiredProvider rp : localRequiredProviders) {\n                     canRegister = false;\n                     for (final ResourceProviderHandler h : localTracker.getResourceProviderStorage().getAllHandlers()) {\n-                        final ServiceReference ref = h.getInfo().getServiceReference();\n+                        final ResourceProviderInfo info = h.getInfo();\n+                        if ( info == null ) {\n+                            // provider has been deactivated in the meantime\n+                            // ignore and continue\n+                            continue;\n+                        }\n+                        final ServiceReference ref = info.getServiceReference();\n                         final Object servicePid = ref.getProperty(Constants.SERVICE_PID);\n                         if ( unavailableServicePid != null && unavailableServicePid.equals(servicePid) ) {\n                             // ignore this service\n                             continue;\n                         }\n-                        if ( unavailableName != null && unavailableName.equals(h.getInfo().getName()) ) {\n+                        if ( unavailableName != null && unavailableName.equals(info.getName()) ) {\n                             // ignore this service\n                             continue;\n                         }\n-                        if ( rp.name != null && rp.name.equals(h.getInfo().getName()) ) {\n+                        if ( rp.name != null && rp.name.equals(info.getName()) ) {\n                             canRegister = true;\n                             break;\n                         } else if (rp.filter != null && rp.filter.match(ref)) {",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-resourceresolver/raw/e10e25b882c774c6ba8491db76a2e019d239c102/src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java",
                "sha": "3262805d26d3f2f9569ef95f056cc5ddfdc56702",
                "status": "modified"
            }
        ],
        "message": "SLING-7266 : NPE in resource resolver activator",
        "parent": "https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/688b62265001397d15fade9a1bbf8bedf1eddd06",
        "repo": "sling-org-apache-sling-resourceresolver",
        "unit_tests": [
            "FactoryPreconditionsTest.java"
        ]
    }
}