[{"commit": "https://github.com/apache/incubator-dlab/commit/9cf4814566a0dc901c18555ba4382ae1211f7932", "parent": "https://github.com/apache/incubator-dlab/commit/2584abc1fb97569e874cfe7d81533c56468943ab", "message": "Fixed NPE threats", "bug_id": "incubator-dlab_1", "file": [{"additions": 2, "raw_url": "https://github.com/apache/incubator-dlab/raw/9cf4814566a0dc901c18555ba4382ae1211f7932/integration-tests/src/main/java/com/epam/dlab/automation/cloud/gcp/GcpHelper.java", "blob_url": "https://github.com/apache/incubator-dlab/blob/9cf4814566a0dc901c18555ba4382ae1211f7932/integration-tests/src/main/java/com/epam/dlab/automation/cloud/gcp/GcpHelper.java", "sha": "4b6e5fb567ca38a445bd27161d4cd631d0922031", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/incubator-dlab/contents/integration-tests/src/main/java/com/epam/dlab/automation/cloud/gcp/GcpHelper.java?ref=9cf4814566a0dc901c18555ba4382ae1211f7932", "patch": "@@ -81,8 +81,8 @@ private static Compute createComputeService() throws IOException, GeneralSecurit\n \t}\n \n \tpublic static List<String> getInstancePrivateIps(Instance instance) {\n-\t\treturn instance.getNetworkInterfaces().stream()\n-\t\t\t\t.map(NetworkInterface::getNetworkIP)\n+\t\treturn instance.getNetworkInterfaces().stream().filter(Objects::nonNull)\n+\t\t\t\t.map(NetworkInterface::getNetworkIP).filter(Objects::nonNull)\n \t\t\t\t.collect(Collectors.toList());\n \t}\n ", "filename": "integration-tests/src/main/java/com/epam/dlab/automation/cloud/gcp/GcpHelper.java"}], "repo": "incubator-dlab"}, {"commit": "https://github.com/apache/incubator-dlab/commit/92cfb32d88be185729fe6f5fb688577b07cfb13a", "parent": "https://github.com/apache/incubator-dlab/commit/ed633b00c32b2a919db3739235240d3d65f4b239", "message": "EPMCDLAB-1366 added checking for null to prevent NPE during status update", "bug_id": "incubator-dlab_2", "file": [{"additions": 10, "raw_url": "https://github.com/apache/incubator-dlab/raw/92cfb32d88be185729fe6f5fb688577b07cfb13a/services/self-service/src/main/java/com/epam/dlab/backendapi/dao/EnvStatusDAO.java", "blob_url": "https://github.com/apache/incubator-dlab/blob/92cfb32d88be185729fe6f5fb688577b07cfb13a/services/self-service/src/main/java/com/epam/dlab/backendapi/dao/EnvStatusDAO.java", "sha": "ba76176b3eedbfa66d1a0cb999a51b4ffff984aa", "changes": 16, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/incubator-dlab/contents/services/self-service/src/main/java/com/epam/dlab/backendapi/dao/EnvStatusDAO.java?ref=92cfb32d88be185729fe6f5fb688577b07cfb13a", "patch": "@@ -103,9 +103,10 @@ public EnvResourceList findEnvResources(String user) {\n \t\t\t\t\t((List<Document>) exp.getOrDefault(COMPUTATIONAL_RESOURCES, Collections.emptyList()))\n \t\t\t\t\t\t\t.forEach(comp -> {\n \t\t\t\t\t\t\t\tfinal List<EnvResource> resourceList = DataEngineType.CLOUD_SERVICE ==\n-\t\t\t\t\t\t\t\t\t\tDataEngineType.fromDockerImageName(comp.getString(IMAGE)) ? clusterList : hostList;\n-\t\t\t\t\t\taddResource(resourceList, comp, STATUS);\n-\t\t\t\t\t});\n+\t\t\t\t\t\t\t\t\t\tDataEngineType.fromDockerImageName(comp.getString(IMAGE)) ? clusterList :\n+\t\t\t\t\t\t\t\t\t\thostList;\n+\t\t\t\t\t\t\t\taddResource(resourceList, comp, STATUS);\n+\t\t\t\t\t\t\t});\n \t\t\t\t});\n \n \t\treturn new EnvResourceList()\n@@ -212,9 +213,12 @@ private boolean instanceIdPresent(Document d) {\n \t * @param id   the id of instance or cluster.\n \t */\n \tprivate Optional<EnvResource> getEnvResourceAndRemove(List<EnvResource> list, String id) {\n-\t\treturn IntStream.range(0, list.size())\n-\t\t\t\t.filter(i -> list.get(i).getId().equals(id))\n-\t\t\t\t.mapToObj(i -> getAndRemove(list, i)).findAny();\n+\t\tif (list != null) {\n+\t\t\treturn IntStream.range(0, list.size())\n+\t\t\t\t\t.filter(i -> list.get(i).getId().equals(id))\n+\t\t\t\t\t.mapToObj(i -> getAndRemove(list, i)).findAny();\n+\t\t}\n+\t\treturn Optional.empty();\n \t}\n \n \tprivate EnvResource getAndRemove(List<EnvResource> list, int i) {", "filename": "services/self-service/src/main/java/com/epam/dlab/backendapi/dao/EnvStatusDAO.java"}], "repo": "incubator-dlab"}]
