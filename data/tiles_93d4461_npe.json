[
    {
        "repo": "tiles",
        "commit": "https://github.com/apache/tiles/commit/93d446173367bee1056bbd14d2139a23b30bc65d",
        "bug_id": "tiles_93d4461",
        "message": "TREQ-10 - NPE while reading the session scope when no session has been created\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/tiles/framework/trunk@1199216 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/tiles/commit/ded340ef750f648690bc5aff9170bf8457be9ec0",
        "patched_files": [
            "SessionScopeExtractor.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 2,
                "raw_url": "https://github.com/apache/tiles/raw/93d446173367bee1056bbd14d2139a23b30bc65d/tiles-request/tiles-request-servlet/src/main/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractor.java",
                "contents_url": "https://api.github.com/repos/apache/tiles/contents/tiles-request/tiles-request-servlet/src/main/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractor.java?ref=93d446173367bee1056bbd14d2139a23b30bc65d",
                "filename": "tiles-request/tiles-request-servlet/src/main/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractor.java",
                "deletions": 1,
                "sha": "6d4974328a0c0bfb100b48b0db25b8bdd8e791bf",
                "blob_url": "https://github.com/apache/tiles/blob/93d446173367bee1056bbd14d2139a23b30bc65d/tiles-request/tiles-request-servlet/src/main/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractor.java",
                "patch": "@@ -21,6 +21,7 @@\n package org.apache.tiles.request.servlet.extractor;\n \n import java.util.Enumeration;\n+import java.util.Collections;\n \n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpSession;\n@@ -68,7 +69,7 @@ public void removeValue(String name) {\n         if (session != null) {\n             return session.getAttributeNames();\n         }\n-        return null;\n+        return Collections.enumeration(Collections.<String>emptySet());\n     }\n \n     @Override",
                "changes": 3
            },
            {
                "status": "modified",
                "additions": 3,
                "raw_url": "https://github.com/apache/tiles/raw/93d446173367bee1056bbd14d2139a23b30bc65d/tiles-request/tiles-request-servlet/src/test/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractorTest.java",
                "contents_url": "https://api.github.com/repos/apache/tiles/contents/tiles-request/tiles-request-servlet/src/test/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractorTest.java?ref=93d446173367bee1056bbd14d2139a23b30bc65d",
                "filename": "tiles-request/tiles-request-servlet/src/test/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractorTest.java",
                "deletions": 1,
                "sha": "8be27b4bea0c2167056ccf8627133a657fddf081",
                "blob_url": "https://github.com/apache/tiles/blob/93d446173367bee1056bbd14d2139a23b30bc65d/tiles-request/tiles-request-servlet/src/test/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractorTest.java",
                "patch": "@@ -114,7 +114,9 @@ public void testGetKeysNoSession() {\n         expect(request.getSession(false)).andReturn(null);\n \n         replay(request, session);\n-        assertNull(extractor.getKeys());\n+        Enumeration<String> keys = extractor.getKeys();\n+        assertNotNull(keys);\n+        assertFalse(keys.hasMoreElements());\n         verify(request, session);\n     }\n ",
                "changes": 4
            }
        ],
        "unit_tests": [
            "SessionScopeExtractorTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "tiles-request/tiles-request-portlet/src/test/java/org/apache/tiles/request/portlet/extractor/SessionScopeExtractorTest.java",
        "buggy_files": [
            "tiles-request/tiles-request-portlet/src/main/java/org/apache/tiles/request/portlet/extractor/SessionScopeExtractor.java",
            "tiles-request/tiles-request-jsp/src/main/java/org/apache/tiles/request/jsp/extractor/SessionScopeExtractor.java",
            "tiles-request/tiles-request-servlet/src/main/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractor.java"
        ],
        "fixed": true
    }
]