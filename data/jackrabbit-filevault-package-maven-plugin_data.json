[{"commit": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/commit/9c29af3c4296d47687c23cb6add66e50ec6b413b", "parent": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/commit/ae285f71066e13a30fdf3098d898bb57b1fea88d", "message": "JCRVLT-256 Package Maven Plugin: NPE when dependency has no manifest\n\ngit-svn-id: https://svn.apache.org/repos/asf/jackrabbit/commons/filevault-package-maven-plugin/trunk@1839406 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "jackrabbit-filevault-package-maven-plugin_1", "file": [{"additions": 1, "raw_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/raw/9c29af3c4296d47687c23cb6add66e50ec6b413b/src/main/java/org/apache/jackrabbit/filevault/maven/packaging/impl/ImportPackageBuilder.java", "blob_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/blob/9c29af3c4296d47687c23cb6add66e50ec6b413b/src/main/java/org/apache/jackrabbit/filevault/maven/packaging/impl/ImportPackageBuilder.java", "sha": "657b33ca5f9e8be8f92fa4332f3e70dbce10ae10", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/jackrabbit-filevault-package-maven-plugin/contents/src/main/java/org/apache/jackrabbit/filevault/maven/packaging/impl/ImportPackageBuilder.java?ref=9c29af3c4296d47687c23cb6add66e50ec6b413b", "patch": "@@ -476,7 +476,7 @@ private BundleInfo(Artifact artifact) throws IOException {\n             id = artifact.getId();\n             JarFile jar = new JarFile(artifact.getFile());\n             Manifest manifest = jar.getManifest();\n-            String exportPackages = manifest.getMainAttributes().getValue(Constants.EXPORT_PACKAGE);\n+            String exportPackages = manifest == null ? null : manifest.getMainAttributes().getValue(Constants.EXPORT_PACKAGE);\n             if (exportPackages != null) {\n                 for (Map.Entry<String, Attrs> entry : new Parameters(exportPackages).entrySet()) {\n                     Attrs options = entry.getValue();", "filename": "src/main/java/org/apache/jackrabbit/filevault/maven/packaging/impl/ImportPackageBuilder.java"}, {"additions": 8, "raw_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/raw/9c29af3c4296d47687c23cb6add66e50ec6b413b/src/test/resources/test-projects/manifest-generation/with-bundles/pom.xml", "blob_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/blob/9c29af3c4296d47687c23cb6add66e50ec6b413b/src/test/resources/test-projects/manifest-generation/with-bundles/pom.xml", "sha": "54fef531ff46fbe0571e63c40ef4601b502796ed", "changes": 9, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/jackrabbit-filevault-package-maven-plugin/contents/src/test/resources/test-projects/manifest-generation/with-bundles/pom.xml?ref=9c29af3c4296d47687c23cb6add66e50ec6b413b", "patch": "@@ -33,7 +33,7 @@\n                     <group>my/test/group</group>\n                     <importUnusedPackages>true</importUnusedPackages>\n                     <importPackage>\n-                        -aQute*, <!-- example of removing a package -->\n+                        -aQute*,-javax.inject*, <!-- example of removing a package -->\n                         -org.osgi.framework.*, <!-- should keep the org.osgi.framework but remove subpackages-->\n                         javax.jcr*;version=\"[1.0.0,3.0.0)\", <!-- example of altering existing packages -->\n                         org.apache.foo  <!-- example of adding a new package -->\n@@ -74,5 +74,12 @@\n             <version>5.0.0</version>\n             <scope>provided</scope>\n         </dependency>\n+        <dependency>\n+            <!-- unused dependency without manifest -->\n+            <groupId>javax.inject</groupId>\n+            <artifactId>javax.inject</artifactId>\n+            <version>1</version>\n+            <scope>provided</scope>\n+        </dependency>\n     </dependencies>\n </project>", "filename": "src/test/resources/test-projects/manifest-generation/with-bundles/pom.xml"}], "repo": "jackrabbit-filevault-package-maven-plugin"}]
