[
    {
        "repo": "jackrabbit-filevault-package-maven-plugin",
        "message": "JCRVLT-405 prevent NPE for unknown package dependencies\n\ngit-svn-id: https://svn.apache.org/repos/asf/jackrabbit/commons/filevault-package-maven-plugin/trunk@1873208 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/commit/089cae77032ed406762bb5e8d7f46e1121442bd5",
        "parent": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/commit/4a61c32d6538640b07be19aaf3aafd9a805748af",
        "bug_id": "jackrabbit-filevault-package-maven-plugin_1",
        "file": [
            {
                "sha": "f9b0d0608831acd46cee6fc364a23a824fc5f4f2",
                "filename": "src/main/java/org/apache/jackrabbit/filevault/maven/packaging/GenerateMetadataMojo.java",
                "blob_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/blob/089cae77032ed406762bb5e8d7f46e1121442bd5/src/main/java/org/apache/jackrabbit/filevault/maven/packaging/GenerateMetadataMojo.java",
                "raw_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/raw/089cae77032ed406762bb5e8d7f46e1121442bd5/src/main/java/org/apache/jackrabbit/filevault/maven/packaging/GenerateMetadataMojo.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/jackrabbit-filevault-package-maven-plugin/contents/src/main/java/org/apache/jackrabbit/filevault/maven/packaging/GenerateMetadataMojo.java?ref=089cae77032ed406762bb5e8d7f46e1121442bd5",
                "patch": "@@ -754,7 +754,7 @@ private String computeDependenciesLocations() throws IOException {\n         if (!dependencies.isEmpty()) {\n             MavenBasedPackageDependency.resolve(project, getLog(), dependencies);\n             // pid = uri\n-            dependenciesLocations = dependencies.stream().map(a -> a.getInfo().getId().toString() + \"=\" + a.getLocation()).collect(Collectors.joining(\",\"));\n+            dependenciesLocations = dependencies.stream().filter(a -> a.getInfo() != null).map(a -> a.getInfo().getId().toString() + \"=\" + a.getLocation()).collect(Collectors.joining(\",\"));\n         }\n         return dependenciesLocations;\n     }",
                "deletions": 1
            },
            {
                "sha": "0eb0aed5acf232b20c4887b7ea93fa0b0d25f1ee",
                "filename": "src/test/java/org/apache/jackrabbit/filevault/maven/packaging/it/DependencyCheckIT.java",
                "blob_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/blob/089cae77032ed406762bb5e8d7f46e1121442bd5/src/test/java/org/apache/jackrabbit/filevault/maven/packaging/it/DependencyCheckIT.java",
                "raw_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/raw/089cae77032ed406762bb5e8d7f46e1121442bd5/src/test/java/org/apache/jackrabbit/filevault/maven/packaging/it/DependencyCheckIT.java",
                "status": "modified",
                "changes": 5,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/jackrabbit-filevault-package-maven-plugin/contents/src/test/java/org/apache/jackrabbit/filevault/maven/packaging/it/DependencyCheckIT.java?ref=089cae77032ed406762bb5e8d7f46e1121442bd5",
                "patch": "@@ -27,7 +27,7 @@\n @RunWith(Parameterized.class)\n public class DependencyCheckIT {\n \n-    @Parameterized.Parameters\n+    @Parameterized.Parameters(name=\"{index}: project {0}\")\n     public static Collection<Object[]> data() {\n         return Arrays.asList(new Object[][]{\n                 {\"fail-missing-deps\", true},\n@@ -39,7 +39,8 @@\n                 {\"no-errors\", false},\n                 {\"repo-structure-pkg\", false},\n                 {\"no-error-cleanup\", false},\n-                {\"no-error-cleanup-filter\", false}\n+                {\"no-error-cleanup-filter\", false},\n+                {\"no-error-unknown-dependency\", false}\n         });\n     }\n ",
                "deletions": 2
            },
            {
                "sha": "b54d8df3b1b03271842d4aa1d72baa4ec0e6aec5",
                "filename": "src/test/resources/test-projects/validate-deps-projects/no-error-unknown-dependency/pom.xml",
                "blob_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/blob/089cae77032ed406762bb5e8d7f46e1121442bd5/src/test/resources/test-projects/validate-deps-projects/no-error-unknown-dependency/pom.xml",
                "raw_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/raw/089cae77032ed406762bb5e8d7f46e1121442bd5/src/test/resources/test-projects/validate-deps-projects/no-error-unknown-dependency/pom.xml",
                "status": "added",
                "changes": 52,
                "additions": 52,
                "contents_url": "https://api.github.com/repos/apache/jackrabbit-filevault-package-maven-plugin/contents/src/test/resources/test-projects/validate-deps-projects/no-error-unknown-dependency/pom.xml?ref=089cae77032ed406762bb5e8d7f46e1121442bd5",
                "patch": "@@ -0,0 +1,52 @@\n+<!--\n+    Licensed to the Apache Software Foundation (ASF) under one or more\n+    contributor license agreements. See the NOTICE file distributed with\n+    this work for additional information regarding copyright ownership.\n+    The ASF licenses this file to You under the Apache License, Version 2.0\n+    (the \"License\"); you may not use this file except in compliance with\n+    the License. You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing, software\n+    distributed under the License is distributed on an \"AS IS\" BASIS,\n+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+    See the License for the specific language governing permissions and\n+    limitations under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+    <groupId>org.apache.jackrabbit.filevault</groupId>\n+    <artifactId>package-plugin-test-pkg</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+    <packaging>content-package</packaging>\n+    <name>Packaging test</name>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.jackrabbit</groupId>\n+                <artifactId>filevault-package-maven-plugin</artifactId>\n+                <version>${plugin.version}</version>\n+                <extensions>true</extensions>\n+                <configuration>\n+                    <packageType>application</packageType>\n+                    <failOnDependencyErrors>true</failOnDependencyErrors>\n+                    <filters>\n+                        <filter>\n+                            <root>/tmp/foo</root>\n+                        </filter>\n+                    </filters>\n+                    <dependencies>\n+                        <dependency>\n+                            <group>some/unknown/group</group>\n+                            <name>somename</name>\n+                            <version>[2.0,)</version>\n+                        </dependency>\n+                    </dependencies>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+</project>",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "jackrabbit-filevault-package-maven-plugin",
        "message": "JCRVLT-256 Package Maven Plugin: NPE when dependency has no manifest\n\ngit-svn-id: https://svn.apache.org/repos/asf/jackrabbit/commons/filevault-package-maven-plugin/trunk@1839406 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/commit/9c29af3c4296d47687c23cb6add66e50ec6b413b",
        "parent": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/commit/ae285f71066e13a30fdf3098d898bb57b1fea88d",
        "bug_id": "jackrabbit-filevault-package-maven-plugin_2",
        "file": [
            {
                "sha": "657b33ca5f9e8be8f92fa4332f3e70dbce10ae10",
                "filename": "src/main/java/org/apache/jackrabbit/filevault/maven/packaging/impl/ImportPackageBuilder.java",
                "blob_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/blob/9c29af3c4296d47687c23cb6add66e50ec6b413b/src/main/java/org/apache/jackrabbit/filevault/maven/packaging/impl/ImportPackageBuilder.java",
                "raw_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/raw/9c29af3c4296d47687c23cb6add66e50ec6b413b/src/main/java/org/apache/jackrabbit/filevault/maven/packaging/impl/ImportPackageBuilder.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/jackrabbit-filevault-package-maven-plugin/contents/src/main/java/org/apache/jackrabbit/filevault/maven/packaging/impl/ImportPackageBuilder.java?ref=9c29af3c4296d47687c23cb6add66e50ec6b413b",
                "patch": "@@ -476,7 +476,7 @@ private BundleInfo(Artifact artifact) throws IOException {\n             id = artifact.getId();\n             JarFile jar = new JarFile(artifact.getFile());\n             Manifest manifest = jar.getManifest();\n-            String exportPackages = manifest.getMainAttributes().getValue(Constants.EXPORT_PACKAGE);\n+            String exportPackages = manifest == null ? null : manifest.getMainAttributes().getValue(Constants.EXPORT_PACKAGE);\n             if (exportPackages != null) {\n                 for (Map.Entry<String, Attrs> entry : new Parameters(exportPackages).entrySet()) {\n                     Attrs options = entry.getValue();",
                "deletions": 1
            },
            {
                "sha": "54fef531ff46fbe0571e63c40ef4601b502796ed",
                "filename": "src/test/resources/test-projects/manifest-generation/with-bundles/pom.xml",
                "blob_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/blob/9c29af3c4296d47687c23cb6add66e50ec6b413b/src/test/resources/test-projects/manifest-generation/with-bundles/pom.xml",
                "raw_url": "https://github.com/apache/jackrabbit-filevault-package-maven-plugin/raw/9c29af3c4296d47687c23cb6add66e50ec6b413b/src/test/resources/test-projects/manifest-generation/with-bundles/pom.xml",
                "status": "modified",
                "changes": 9,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/jackrabbit-filevault-package-maven-plugin/contents/src/test/resources/test-projects/manifest-generation/with-bundles/pom.xml?ref=9c29af3c4296d47687c23cb6add66e50ec6b413b",
                "patch": "@@ -33,7 +33,7 @@\n                     <group>my/test/group</group>\n                     <importUnusedPackages>true</importUnusedPackages>\n                     <importPackage>\n-                        -aQute*, <!-- example of removing a package -->\n+                        -aQute*,-javax.inject*, <!-- example of removing a package -->\n                         -org.osgi.framework.*, <!-- should keep the org.osgi.framework but remove subpackages-->\n                         javax.jcr*;version=\"[1.0.0,3.0.0)\", <!-- example of altering existing packages -->\n                         org.apache.foo  <!-- example of adding a new package -->\n@@ -74,5 +74,12 @@\n             <version>5.0.0</version>\n             <scope>provided</scope>\n         </dependency>\n+        <dependency>\n+            <!-- unused dependency without manifest -->\n+            <groupId>javax.inject</groupId>\n+            <artifactId>javax.inject</artifactId>\n+            <version>1</version>\n+            <scope>provided</scope>\n+        </dependency>\n     </dependencies>\n </project>",
                "deletions": 1
            }
        ]
    }
]