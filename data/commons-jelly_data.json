[{"commit": "https://github.com/apache/commons-jelly/commit/c9ada756d30797fbf63fde2d5c750c0bbda6d129", "parent": "https://github.com/apache/commons-jelly/commit/6989fec8d203e5299d5f7ded221b0717d7df16fd", "message": "fix regression from JELLY-213 -- NPE and CCE\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/jelly/trunk@239434 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "commons-jelly_1", "file": [{"additions": 11, "raw_url": "https://github.com/apache/commons-jelly/raw/c9ada756d30797fbf63fde2d5c750c0bbda6d129/src/java/org/apache/commons/jelly/impl/StaticTagScript.java", "blob_url": "https://github.com/apache/commons-jelly/blob/c9ada756d30797fbf63fde2d5c750c0bbda6d129/src/java/org/apache/commons/jelly/impl/StaticTagScript.java", "sha": "4bd8ef68e5613da722a8f28785bcf7819907c501", "changes": 18, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/commons-jelly/contents/src/java/org/apache/commons/jelly/impl/StaticTagScript.java?ref=c9ada756d30797fbf63fde2d5c750c0bbda6d129", "patch": "@@ -15,10 +15,6 @@\n  */\n package org.apache.commons.jelly.impl;\n \n-import java.net.URL;\n-import java.util.Iterator;\n-import java.util.Map;\n-\n import org.apache.commons.jelly.DynaTag;\n import org.apache.commons.jelly.JellyContext;\n import org.apache.commons.jelly.JellyException;\n@@ -29,6 +25,10 @@\n import org.apache.commons.jelly.expression.Expression;\n import org.xml.sax.SAXException;\n \n+import java.net.URL;\n+import java.util.Iterator;\n+import java.util.Map;\n+\n /**\n  * <p><code>StaticTagScript</code> is a script that evaluates a StaticTag, a piece of static XML\n  * though its attributes or element content may contain dynamic expressions.\n@@ -57,7 +57,7 @@ public void run(JellyContext context, XMLOutput output) throws JellyTagException\n             throw new JellyTagException(\"could not start namespace prefixes\",e);\n         }\n \n-        Tag tag = null;\n+        Tag tag;\n         try {\n             tag = getTag(context);\n \n@@ -91,18 +91,22 @@ public void run(JellyContext context, XMLOutput output) throws JellyTagException\n                 ExpressionAttribute expat = (ExpressionAttribute) entry.getValue();\n                 Expression expression = expat.exp;\n \n-                Object value = null;\n+                Object value;\n \n                 if ( Expression.class.isAssignableFrom( dynaTag.getAttributeType(name) ) ) {\n                     value = expression;\n                 } else {\n                     value = expression.evaluate(context);\n                 }\n \n-                if(expat.prefix!=null || expat.prefix.length()>0 && tag instanceof StaticTag)\n+                if( expat.prefix != null && expat.prefix.length() > 0 && tag instanceof StaticTag )\n+                {\n                     ((StaticTag) dynaTag).setAttribute(name,expat.prefix, expat.nsURI,value);\n+                }\n                 else\n+                {\n                     dynaTag.setAttribute(name, value);\n+                }\n             }\n \n             tag.doTag(output);", "filename": "src/java/org/apache/commons/jelly/impl/StaticTagScript.java"}], "repo": "commons-jelly"}, {"commit": "https://github.com/apache/commons-jelly/commit/b2600276c611915bfcfdd24ac7a996cf7d874faa", "parent": "https://github.com/apache/commons-jelly/commit/c079296bf2a505b381573c919093c7d2fed9b650", "message": "Why, oh why, is fillInStackTrace() throwing an NPE?\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/jelly/trunk@135074 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "commons-jelly_2", "file": [{"additions": 0, "raw_url": "https://github.com/apache/commons-jelly/raw/b2600276c611915bfcfdd24ac7a996cf7d874faa/src/java/org/apache/commons/jelly/tags/define/BeanTag.java", "blob_url": "https://github.com/apache/commons-jelly/blob/b2600276c611915bfcfdd24ac7a996cf7d874faa/src/java/org/apache/commons/jelly/tags/define/BeanTag.java", "sha": "a8f089077e622676c4b4524b4228abb4988cf6cf", "changes": 2, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/commons-jelly/contents/src/java/org/apache/commons/jelly/tags/define/BeanTag.java?ref=b2600276c611915bfcfdd24ac7a996cf7d874faa", "patch": "@@ -141,8 +141,6 @@ public void doTag(XMLOutput output) throws Exception {\n \n                 Throwable inner = e.getTargetException();\n \n-                inner.fillInStackTrace();\n-\n                 if ( inner instanceof Exception )\n                 {\n                     throw (Exception) inner;", "filename": "src/java/org/apache/commons/jelly/tags/define/BeanTag.java"}], "repo": "commons-jelly"}, {"commit": "https://github.com/apache/commons-jelly/commit/ff563fed30913f57d2137543690affb0cd447c2f", "parent": "https://github.com/apache/commons-jelly/commit/2eedbe9ae8187f02e12b6a017c12fed56d145237", "message": "Fix badly documented bug fix. Stefan's NPE is in 1.2, not 1.1\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/jelly/trunk@136400 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "commons-jelly_3", "file": [{"additions": 1, "raw_url": "https://github.com/apache/commons-jelly/raw/ff563fed30913f57d2137543690affb0cd447c2f/jelly-tags/util/project.xml", "blob_url": "https://github.com/apache/commons-jelly/blob/ff563fed30913f57d2137543690affb0cd447c2f/jelly-tags/util/project.xml", "sha": "89bb38a4693c5b144d76f7d8e8d8ae2962437bac", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/commons-jelly/contents/jelly-tags/util/project.xml?ref=ff563fed30913f57d2137543690affb0cd447c2f", "patch": "@@ -18,7 +18,7 @@\n   <extend>${basedir}/../tag-project.xml</extend>\n   <id>commons-jelly-tags-util</id>\n   <name>commons-jelly-tags-util</name>\n-  <currentVersion>1.1-SNAPSHOT</currentVersion>\n+  <currentVersion>1.2-SNAPSHOT</currentVersion>\n \n   <package>org.apache.commons.jelly.tags.util</package>\n ", "filename": "jelly-tags/util/project.xml"}, {"additions": 3, "raw_url": "https://github.com/apache/commons-jelly/raw/ff563fed30913f57d2137543690affb0cd447c2f/jelly-tags/util/xdocs/changes.xml", "blob_url": "https://github.com/apache/commons-jelly/blob/ff563fed30913f57d2137543690affb0cd447c2f/jelly-tags/util/xdocs/changes.xml", "sha": "d69fe1dc3982ac6d18c7998fc43b16eb8d4e3a3a", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/commons-jelly/contents/jelly-tags/util/xdocs/changes.xml?ref=ff563fed30913f57d2137543690affb0cd447c2f", "patch": "@@ -24,8 +24,10 @@\n     <author email=\"dion@apache.org\">dIon Gillard</author>\n   </properties>\n   <body>\n-    <release version=\"1.1\" date=\"2004-10-27\">\n+    <release version=\"1.2\" date=\"in CVS\">\n       <action dev=\"dion\" type=\"fix\" due-to=\"Stefan Bodewig\">Handle null encoding in loadText tag</action>\n+    </release>\n+    <release version=\"1.1\" date=\"2004-10-27\">\n       <action dev=\"dion\" type=\"add\" issue=\"JELLY-157\">Add util:sort to sort lists, including sorting by bean properties</action>\n       <action dev=\"dion\" type=\"update\" issue=\"JELLY-57\" due-to=\"Bill Keese\">support encoding parameter for util:loadText</action>\n     </release>", "filename": "jelly-tags/util/xdocs/changes.xml"}], "repo": "commons-jelly"}, {"commit": "https://github.com/apache/commons-jelly/commit/6f4231f9113b02e5a0e38396b827ca34ee07ffee", "parent": "https://github.com/apache/commons-jelly/commit/b7fbe8c21fcf7da6405b63670633060e70b93dcd", "message": "Maven exposed issue where a map has a null value and putAll was failing with an NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/jelly/trunk@135870 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "commons-jelly_4", "file": [{"additions": 8, "raw_url": "https://github.com/apache/commons-jelly/raw/6f4231f9113b02e5a0e38396b827ca34ee07ffee/src/java/org/apache/commons/jelly/JellyContext.java", "blob_url": "https://github.com/apache/commons-jelly/blob/6f4231f9113b02e5a0e38396b827ca34ee07ffee/src/java/org/apache/commons/jelly/JellyContext.java", "sha": "8b008c6d863e359d4e016a387960f96743f13dc1", "changes": 10, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/commons-jelly/contents/src/java/org/apache/commons/jelly/JellyContext.java?ref=6f4231f9113b02e5a0e38396b827ca34ee07ffee", "patch": "@@ -322,9 +322,15 @@ public Map getVariables() {\n      * Sets the Map of variables to use\n      */\n     public void setVariables(Map variables) {\n-        // FIXME: I have seen this fail when the passed Map contains a key, value \n+        // I have seen this fail when the passed Map contains a key, value \n         // pair where the value is null\n-        this.variables.putAll( variables );\n+        for (Iterator iter = variables.entrySet().iterator(); iter.hasNext();) {\n+            Map.Entry element = (Map.Entry) iter.next();\n+            if (element.getValue() != null) {\n+                this.variables.put(element.getKey(), element.getValue());\n+            }\n+        }\n+        //this.variables.putAll( variables );\n     }\n \n     /**", "filename": "src/java/org/apache/commons/jelly/JellyContext.java"}], "repo": "commons-jelly"}]
