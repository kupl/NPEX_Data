[
    {
        "repo": "hive",
        "commit": "https://github.com/apache/hive/commit/ec4673bbc61b2555ef2d992266055a331443b4d6",
        "bug_id": "hive_ec4673b",
        "message": "HIVE-14658 : UDF abs throws NPE when input arg type is string (Niklaus Xiao via Ashutosh Chauhan)\n\nSigned-off-by: Ashutosh Chauhan <hashutosh@apache.org>",
        "parent": "https://github.com/apache/hive/commit/20824f27b1649ae8c2670a177463dae0f188183c",
        "patched_files": [
            "GenericUDFAbs.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 3,
                "raw_url": "https://github.com/apache/hive/raw/ec4673bbc61b2555ef2d992266055a331443b4d6/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAbs.java",
                "contents_url": "https://api.github.com/repos/apache/hive/contents/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAbs.java?ref=ec4673bbc61b2555ef2d992266055a331443b4d6",
                "filename": "ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAbs.java",
                "deletions": 0,
                "sha": "a8e278683a0b6c6b79b392535bc668cd27f32c1d",
                "blob_url": "https://github.com/apache/hive/blob/ec4673bbc61b2555ef2d992266055a331443b4d6/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAbs.java",
                "patch": "@@ -130,6 +130,9 @@ public Object evaluate(DeferredObject[] arguments) throws HiveException {\n     case STRING:\n     case DOUBLE:\n       valObject = inputConverter.convert(valObject);\n+      if (valObject == null) {\n+        return null;\n+      }\n       resultDouble.set(Math.abs(((DoubleWritable) valObject).get()));\n       return resultDouble;\n     case DECIMAL:",
                "changes": 3
            },
            {
                "status": "modified",
                "additions": 6,
                "raw_url": "https://github.com/apache/hive/raw/ec4673bbc61b2555ef2d992266055a331443b4d6/ql/src/test/org/apache/hadoop/hive/ql/udf/generic/TestGenericUDFAbs.java",
                "contents_url": "https://api.github.com/repos/apache/hive/contents/ql/src/test/org/apache/hadoop/hive/ql/udf/generic/TestGenericUDFAbs.java?ref=ec4673bbc61b2555ef2d992266055a331443b4d6",
                "filename": "ql/src/test/org/apache/hadoop/hive/ql/udf/generic/TestGenericUDFAbs.java",
                "deletions": 0,
                "sha": "6dbb33f9feaff8d06a88b8db603dd207ac0ab5d7",
                "blob_url": "https://github.com/apache/hive/blob/ec4673bbc61b2555ef2d992266055a331443b4d6/ql/src/test/org/apache/hadoop/hive/ql/udf/generic/TestGenericUDFAbs.java",
                "patch": "@@ -133,6 +133,12 @@ public void testText() throws HiveException {\n     output = (DoubleWritable) udf.evaluate(args);\n \n     assertEquals(\"abs() test for String failed \", \"123.45\", output.toString());\n+\n+    valueObj = new DeferredJavaObject(new Text(\"foo\"));\n+    args[0] = valueObj;\n+    output = (DoubleWritable) udf.evaluate(args);\n+\n+    assertEquals(\"abs() test for String failed \", null, output);\n   }\n \n   public void testHiveDecimal() throws HiveException {",
                "changes": 6
            }
        ],
        "unit_tests": [
            "TestGenericUDFAbs.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "ql/src/test/org/apache/hadoop/hive/ql/udf/generic/TestGenericUDFAbs.java",
        "buggy_files": [
            "ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAbs.java"
        ],
        "fixed": true
    }
]