[
    {
        "repo": "commons-lang",
        "commit": "https://github.com/apache/commons-lang/commit/13cd4e0ac3ab76a4dc091eda457f9a111727cba2",
        "bug_id": "commons-lang_13cd4e0",
        "message": "LANG-1190: TypeUtils.isAssignable throws NullPointerException when fromType has type variables and toType generic superclass specifies type variable (closes #158)",
        "parent": "https://github.com/apache/commons-lang/commit/7e85d1cf54b1e467607a0019b56f91577ebe2e4f",
        "patched_files": [
            "TypeUtils.java",
            "changes.xml"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 1,
                "raw_url": "https://github.com/apache/commons-lang/raw/13cd4e0ac3ab76a4dc091eda457f9a111727cba2/src/changes/changes.xml",
                "contents_url": "https://api.github.com/repos/apache/commons-lang/contents/src/changes/changes.xml?ref=13cd4e0ac3ab76a4dc091eda457f9a111727cba2",
                "filename": "src/changes/changes.xml",
                "deletions": 0,
                "sha": "712fd7e2d13e9b59941f13e775aec13635795fe8",
                "blob_url": "https://github.com/apache/commons-lang/blob/13cd4e0ac3ab76a4dc091eda457f9a111727cba2/src/changes/changes.xml",
                "patch": "@@ -46,6 +46,7 @@ The <action> type attribute can be add,update,fix,remove.\n   <body>\n \n   <release version=\"3.5\" date=\"tba\" description=\"tba\">\n+    <action issue=\"LANG-1190\" type=\"fix\" dev=\"pschumacher\" due-to=\"pschumacher\">TypeUtils.isAssignable throws NullPointerException when fromType has type variables and toType generic superclass specifies type variable</action>\n     <action issue=\"LANG-1226\" type=\"fix\" dev=\"pschumacher\" due-to=\"pschumacher\">StringUtils#normalizeSpace does not trim the string anymore</action>\n     <action issue=\"LANG-1251\" type=\"fix\" dev=\"pschumacher\" due-to=\"Takuya Ueshin\">SerializationUtils.ClassLoaderAwareObjectInputStream should use static initializer to initialize primitiveTypes map</action>\n     <action issue=\"LANG-1253\" type=\"add\" dev=\"ggregory\" due-to=\"adilek\">[GitHub issue #170] Add RandomUtils#nextBoolean() method</action>",
                "changes": 1
            },
            {
                "status": "modified",
                "additions": 4,
                "raw_url": "https://github.com/apache/commons-lang/raw/13cd4e0ac3ab76a4dc091eda457f9a111727cba2/src/main/java/org/apache/commons/lang3/reflect/TypeUtils.java",
                "contents_url": "https://api.github.com/repos/apache/commons-lang/contents/src/main/java/org/apache/commons/lang3/reflect/TypeUtils.java?ref=13cd4e0ac3ab76a4dc091eda457f9a111727cba2",
                "filename": "src/main/java/org/apache/commons/lang3/reflect/TypeUtils.java",
                "deletions": 0,
                "sha": "30e9940ba22d074e18ca0d20e775b0bbaa130f02",
                "blob_url": "https://github.com/apache/commons-lang/blob/13cd4e0ac3ab76a4dc091eda457f9a111727cba2/src/main/java/org/apache/commons/lang3/reflect/TypeUtils.java",
                "patch": "@@ -464,6 +464,10 @@ private static boolean isAssignable(final Type type, final ParameterizedType toP\n             final Type toTypeArg = unrollVariableAssignments(var, toTypeVarAssigns);\n             final Type fromTypeArg = unrollVariableAssignments(var, fromTypeVarAssigns);\n \n+            if (toTypeArg == null && fromTypeArg instanceof Class) {\n+                continue;\n+            }\n+\n             // parameters must either be absent from the subject type, within\n             // the bounds of the wildcard type, or be an exact match to the\n             // parameters of the target type.",
                "changes": 4
            },
            {
                "status": "modified",
                "additions": 17,
                "raw_url": "https://github.com/apache/commons-lang/raw/13cd4e0ac3ab76a4dc091eda457f9a111727cba2/src/test/java/org/apache/commons/lang3/reflect/TypeUtilsTest.java",
                "contents_url": "https://api.github.com/repos/apache/commons-lang/contents/src/test/java/org/apache/commons/lang3/reflect/TypeUtilsTest.java?ref=13cd4e0ac3ab76a4dc091eda457f9a111727cba2",
                "filename": "src/test/java/org/apache/commons/lang3/reflect/TypeUtilsTest.java",
                "deletions": 0,
                "sha": "66477ea20ba00749cf83f5a5c5d22342e0882f9f",
                "blob_url": "https://github.com/apache/commons-lang/blob/13cd4e0ac3ab76a4dc091eda457f9a111727cba2/src/test/java/org/apache/commons/lang3/reflect/TypeUtilsTest.java",
                "patch": "@@ -25,6 +25,7 @@\n import java.lang.reflect.TypeVariable;\n import java.lang.reflect.WildcardType;\n import java.net.URI;\n+import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.Collection;\n import java.util.HashMap;\n@@ -755,6 +756,22 @@ public void testWrap() {\n         Assert.assertEquals(String.class, TypeUtils.wrap(String.class).getType());\n     }\n \n+    public static class ClassWithSuperClassWithGenericType extends ArrayList<Object> {\n+        private static final long serialVersionUID = 1L;\n+\n+        public static <U> Iterable<U> methodWithGenericReturnType() {\n+            return null;\n+        }\n+    }\n+\n+    @Test\n+    public void testLANG1190() throws Exception {\n+        Type fromType = ClassWithSuperClassWithGenericType.class.getDeclaredMethod(\"methodWithGenericReturnType\").getGenericReturnType();\n+        Type failingToType = TypeUtils.wildcardType().withLowerBounds(ClassWithSuperClassWithGenericType.class).build();\n+\n+        Assert.assertTrue(TypeUtils.isAssignable(fromType, failingToType));\n+    }\n+\n     public Iterable<? extends Map<Integer, ? extends Collection<?>>> iterable;\n \n     public static <G extends Comparable<G>> G stub() {",
                "changes": 17
            }
        ],
        "unit_tests": [
            "TypeUtilsTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "src/test/java/org/apache/commons/lang3/reflect/TypeUtilsTest.java",
        "buggy_files": [
            "src/main/java/org/apache/commons/lang3/reflect/TypeUtils.java",
            "src/changes/changes.xml"
        ],
        "fixed": true
    }
]