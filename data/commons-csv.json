{
    "commons-csv_2b14b16": {
        "bug_id": "commons-csv_2b14b16",
        "commit": "https://github.com/apache/commons-csv/commit/2b14b16d4b79c84cf67728b51e4dc222fef57880",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/commons-csv/blob/2b14b16d4b79c84cf67728b51e4dc222fef57880/src/main/java/org/apache/commons/csv/CSVPrinter.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/commons-csv/contents/src/main/java/org/apache/commons/csv/CSVPrinter.java?ref=2b14b16d4b79c84cf67728b51e4dc222fef57880",
                "deletions": 1,
                "filename": "src/main/java/org/apache/commons/csv/CSVPrinter.java",
                "patch": "@@ -58,7 +58,7 @@\n     public CSVPrinter(final Appendable out, final CSVFormat format) {\n         this.out = out;\n         this.format = format == null ? CSVFormat.DEFAULT : format;\n-        format.validate();\n+        this.format.validate();\n     }\n \n     // ======================================================",
                "raw_url": "https://github.com/apache/commons-csv/raw/2b14b16d4b79c84cf67728b51e4dc222fef57880/src/main/java/org/apache/commons/csv/CSVPrinter.java",
                "sha": "431cd4eb988337423662f4b5dbbac2ffab4d9634",
                "status": "modified"
            }
        ],
        "message": "Fix NPE when format is null.\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/csv/trunk@1508938 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-csv/commit/a0624779468261996e7e6e5c7a63ba1ce1a3a553",
        "repo": "commons-csv",
        "unit_tests": [
            "CSVPrinterTest.java"
        ]
    },
    "commons-csv_d8d5de6": {
        "bug_id": "commons-csv_d8d5de6",
        "commit": "https://github.com/apache/commons-csv/commit/d8d5de6476ac411593bd34ca89492e74905372ab",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/commons-csv/blob/d8d5de6476ac411593bd34ca89492e74905372ab/src/main/java/org/apache/commons/csv/CSVParser.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/commons-csv/contents/src/main/java/org/apache/commons/csv/CSVParser.java?ref=d8d5de6476ac411593bd34ca89492e74905372ab",
                "deletions": 5,
                "filename": "src/main/java/org/apache/commons/csv/CSVParser.java",
                "patch": "@@ -466,7 +466,7 @@ public long getRecordNumber() {\n         if (formatHeader != null) {\n             hdrMap = this.format.getIgnoreHeaderCase() ?\n                     new TreeMap<>(String.CASE_INSENSITIVE_ORDER) :\n-                    new LinkedHashMap<>();\n+                    new TreeMap<>();\n \n             String[] headerRecord = null;\n             if (formatHeader.length == 0) {\n@@ -486,13 +486,15 @@ public long getRecordNumber() {\n             if (headerRecord != null) {\n                 for (int i = 0; i < headerRecord.length; i++) {\n                     final String header = headerRecord[i];\n-                    final boolean containsHeader = hdrMap.containsKey(header);\n+                    final boolean containsHeader = header == null ? false : hdrMap.containsKey(header);\n                     final boolean emptyHeader = header == null || header.trim().isEmpty();\n                     if (containsHeader && (!emptyHeader || !this.format.getAllowMissingColumnNames())) {\n-                        throw new IllegalArgumentException(\"The header contains a duplicate name: \\\"\" + header +\n-                                \"\\\" in \" + Arrays.toString(headerRecord));\n+                        throw new IllegalArgumentException(\"The header contains a duplicate name: \\\"\" + header\n+                                + \"\\\" in \" + Arrays.toString(headerRecord));\n+                    }\n+                    if (header != null) {\n+                        hdrMap.put(header, Integer.valueOf(i));\n                     }\n-                    hdrMap.put(header, Integer.valueOf(i));\n                 }\n             }\n         }",
                "raw_url": "https://github.com/apache/commons-csv/raw/d8d5de6476ac411593bd34ca89492e74905372ab/src/main/java/org/apache/commons/csv/CSVParser.java",
                "sha": "a3decdff3d601ea84a44b247f1f3d7ac61f5cdf7",
                "status": "modified"
            }
        ],
        "message": "[CSV-239] Cannot get headers in column order from CSVRecord.\n\nSome NPE-proofing.",
        "parent": "https://github.com/apache/commons-csv/commit/8a5efdeb7e085ec77acff147493216e8fd0bcd02",
        "repo": "commons-csv",
        "unit_tests": [
            "CSVParserTest.java"
        ]
    }
}