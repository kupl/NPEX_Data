[
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Possible NPE in StringUtil#strToMap\n(OFBIZ-11281)\n\nStringUtil#strToMap(String, String, boolean, String) throws Nullpointer for StringUtil.strToMap(\"\", false).\n\nThanks to Ulrich Heidfeld for this fix",
        "commit": "https://github.com/apache/ofbiz-framework/commit/935ffe86ca991ae0a1ed3e4f45c7f37006ca4a05",
        "parent": "https://github.com/apache/ofbiz-framework/commit/18d84ac162fdff9d7b7d6b71d1079ae049e0b98d",
        "bug_id": "ofbiz-framework_1",
        "file": [
            {
                "sha": "e7b97a5d9de27c51a48c9d927eadd3654718cae5",
                "filename": "framework/base/src/main/java/org/apache/ofbiz/base/util/StringUtil.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/935ffe86ca991ae0a1ed3e4f45c7f37006ca4a05/framework/base/src/main/java/org/apache/ofbiz/base/util/StringUtil.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/935ffe86ca991ae0a1ed3e4f45c7f37006ca4a05/framework/base/src/main/java/org/apache/ofbiz/base/util/StringUtil.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/main/java/org/apache/ofbiz/base/util/StringUtil.java?ref=935ffe86ca991ae0a1ed3e4f45c7f37006ca4a05",
                "patch": "@@ -158,7 +158,7 @@ public static String join(Collection<?> col, CharSequence delim) {\n      * @return a Map of name/value pairs\n      */\n     private static Map<String, String> strToMap(String str, String delim, boolean trim, String pairsSeparator) {\n-        if (str == null) {\n+        if (UtilValidate.isEmpty(str)) {\n             return null;\n         }\n         Map<String, String> decodedMap = new HashMap<>();",
                "deletions": 1
            },
            {
                "sha": "48c1d2c86119d9d1b560c72be85027daa61960c4",
                "filename": "framework/base/src/test/java/org/apache/ofbiz/base/util/StringUtilTests.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/935ffe86ca991ae0a1ed3e4f45c7f37006ca4a05/framework/base/src/test/java/org/apache/ofbiz/base/util/StringUtilTests.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/935ffe86ca991ae0a1ed3e4f45c7f37006ca4a05/framework/base/src/test/java/org/apache/ofbiz/base/util/StringUtilTests.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/test/java/org/apache/ofbiz/base/util/StringUtilTests.java?ref=935ffe86ca991ae0a1ed3e4f45c7f37006ca4a05",
                "patch": "@@ -73,6 +73,7 @@ public void testSplit() {\n     @Test\n     public void testStrToMap() {\n         assertNull(\"null-string\", StringUtil.strToMap(null, false));\n+        assertNull(\"empty\", StringUtil.strToMap(\"\", false));\n         assertEquals(\"missing =\", Collections.emptyMap(), StringUtil.strToMap(\"1\", false));\n         assertEquals(\"single\", UtilMisc.toMap(\"1\", \"one\"), StringUtil.strToMap(\"1=one\"));\n         assertEquals(\"double\", UtilMisc.toMap(\"2\", \"two\", \"1\", \"one\"), StringUtil.strToMap(\"1=one|2=two\"));",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Issue in function getVariantSelectionFeatures of ProductWorker.java\n(OFBIZ-11029)\nCheck should be isVirtual instead of productId. Also handled a NullPointerException for variantProduct.\nThanks Denglong Zhou for reporting the issue, Pawan Verma for the patch and Suraj Khurana & Jacques Le Roux for the review\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1859255 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/95a3b82c58a7c8e3ea80a45bdb4da83df59eea6c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3acf261b7fd1f411e7c0d26c2d1f6854930f3f27",
        "bug_id": "ofbiz-framework_2",
        "file": [
            {
                "sha": "ed6569fa7e5aaabffe1f61d995c016fd78d0ac3d",
                "filename": "applications/product/src/main/java/org/apache/ofbiz/product/product/ProductWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/95a3b82c58a7c8e3ea80a45bdb4da83df59eea6c/applications/product/src/main/java/org/apache/ofbiz/product/product/ProductWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/95a3b82c58a7c8e3ea80a45bdb4da83df59eea6c/applications/product/src/main/java/org/apache/ofbiz/product/product/ProductWorker.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/main/java/org/apache/ofbiz/product/product/ProductWorker.java?ref=95a3b82c58a7c8e3ea80a45bdb4da83df59eea6c",
                "patch": "@@ -483,11 +483,11 @@ public static String getProductVirtualVariantMethod(Delegator delegator, String\n      * @return a List of ProductFeature GenericValues\n      */\n     public static List<GenericValue> getVariantSelectionFeatures(GenericValue variantProduct) {\n-        if (!\"Y\".equals(variantProduct.getString(\"isVariant\"))) {\n+        if (variantProduct == null || !\"Y\".equals(variantProduct.getString(\"isVariant\"))) {\n             return null;\n         }\n         GenericValue virtualProduct = ProductWorker.getParentProduct(variantProduct.getString(\"productId\"), variantProduct.getDelegator());\n-        if (virtualProduct == null || !\"Y\".equals(virtualProduct.getString(\"productId\"))) {\n+        if (virtualProduct == null || !\"Y\".equals(virtualProduct.getString(\"isVirtual\"))) {\n             return null;\n         }\n         // The selectable features from the virtual product",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Improved: Refactor UelFunctions.java to remove error management via Exception \n(OFBIZ-11213)\n\nThis refactoring was initiated since using UelFunction::getSize throws \nClassCastException and log a consequent unneeded stack trace to test \nObject class type. The log is unnecessary, because it is the result of \neach supported class cast trial.\n\nThis issue show up that lot of possible NPE were not checked against,\nbut catched by 'Exception'.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1867635 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/42c208ee0c5801d34d09f9fe3096a0c0f103d82c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/39f5dda302c105be38dd2a073e8f467c4b795250",
        "bug_id": "ofbiz-framework_3",
        "file": [
            {
                "sha": "4fa5ef32aea87a615dc1ad34c9bc9d9f2de29855",
                "filename": "framework/base/src/main/java/org/apache/ofbiz/base/util/string/UelFunctions.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/42c208ee0c5801d34d09f9fe3096a0c0f103d82c/framework/base/src/main/java/org/apache/ofbiz/base/util/string/UelFunctions.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/42c208ee0c5801d34d09f9fe3096a0c0f103d82c/framework/base/src/main/java/org/apache/ofbiz/base/util/string/UelFunctions.java",
                "status": "modified",
                "changes": 173,
                "additions": 41,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/main/java/org/apache/ofbiz/base/util/string/UelFunctions.java?ref=42c208ee0c5801d34d09f9fe3096a0c0f103d82c",
                "patch": "@@ -312,199 +312,108 @@ public static String timeString(Timestamp stamp, TimeZone timeZone, Locale local\n         return dateFormat.format(stamp);\n     }\n \n-    @SuppressWarnings(\"rawtypes\")\n     public static int getSize(Object obj) {\n-        try {\n-            Map map = (Map) obj;\n-            return map.size();\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n+        if (null == obj) return 0;\n+        if (obj instanceof Map) {\n+            return ((Map) obj).size();\n         }\n-\n-        try {\n-            Collection coll = (Collection) obj;\n-            return coll.size();\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n+        if (obj instanceof Collection) {\n+            return ((Collection) obj).size();\n         }\n-\n-        try {\n-            String str = (String) obj;\n-            return str.length();\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n+        if (obj instanceof String) {\n+            return ((String) obj).length();\n         }\n-\n         return -1;\n     }\n \n     public static boolean endsWith(String str1, String str2) {\n-        try {\n-            return str1.endsWith(str2);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return false;\n+        if (null == str1) return false;\n+        return str1.endsWith(str2);\n     }\n \n     public static int indexOf(String str1, String str2) {\n-        try {\n-            return str1.indexOf(str2);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return -1;\n+        if (null == str1) return -1;\n+        return str1.indexOf(str2);\n     }\n \n     public static int lastIndexOf(String str1, String str2) {\n-        try {\n-            return str1.lastIndexOf(str2);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return -1;\n+        if (null == str1) return -1;\n+        return str1.lastIndexOf(str2);\n     }\n \n     public static int length(String str1) {\n-        try {\n-            return str1.length();\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return -1;\n+        if (null == str1) return 0;\n+        return str1.length();\n     }\n \n     public static String replace(String str1, String str2, String str3) {\n-        try {\n-            return str1.replace(str2, str3);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str1) return null;\n+        return str1.replace(str2, str3);\n     }\n \n     public static String replaceAll(String str1, String str2, String str3) {\n-        try {\n-            return str1.replaceAll(str2, str3);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str1) return null;\n+        return str1.replaceAll(str2, str3);\n     }\n \n     public static String replaceFirst(String str1, String str2, String str3) {\n-        try {\n-            return str1.replaceFirst(str2, str3);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str1) return null;\n+        return str1.replaceFirst(str2, str3);\n     }\n \n     public static boolean startsWith(String str1, String str2) {\n-        try {\n-            return str1.startsWith(str2);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return false;\n+        if (null == str1) return false;\n+        return str1.startsWith(str2);\n     }\n \n     public static String endString(String str, int index) {\n-        try {\n-            return str.substring(index);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str) return null;\n+        return str.substring(index);\n     }\n \n     public static String subString(String str, int beginIndex, int endIndex) {\n-        try {\n-            return str.substring(beginIndex, endIndex);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str) return null;\n+        return str.substring(beginIndex, endIndex);\n     }\n \n     public static String trim(String str) {\n-        try {\n-            return str.trim();\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str) return null;\n+        return str.trim();\n     }\n \n     public static String toLowerCase(String str) {\n-        try {\n-            return str.toLowerCase(Locale.getDefault());\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str) return null;\n+        return str.toLowerCase(Locale.getDefault());\n     }\n \n     public static String toUpperCase(String str) {\n-        try {\n-            return str.toUpperCase(Locale.getDefault());\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str) return null;\n+        return str.toUpperCase(Locale.getDefault());\n     }\n \n     public static String toString(Object obj) {\n+        if (null == obj) return null;\n         return obj.toString();\n     }\n \n     public static String sysGetEnv(String str) {\n-        try {\n-            return System.getenv(str);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str) return null;\n+        return System.getenv(str);\n     }\n \n     public static String sysGetProp(String str) {\n-        try {\n-            return System.getProperty(str);\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n-        }\n-\n-        return null;\n+        if (null == str) return null;\n+        return System.getProperty(str);\n     }\n \n     public static String label(String ressource, String label, Locale locale) {\n         if (locale == null) {\n             locale = Locale.getDefault();\n         }\n-        try {\n-            String resolveLabel = UtilProperties.getMessage(ressource, label, locale);\n-            if (resolveLabel != null) {\n-                return resolveLabel;\n-            }\n-        } catch (Exception e) {\n-            Debug.logError(e, module);\n+        String resolveLabel = UtilProperties.getMessage(ressource, label, locale);\n+        if (resolveLabel != null) {\n+            return resolveLabel;\n         }\n-\n         return label;\n     }\n ",
                "deletions": 132
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Escape potential NPE when call by DataEvents.serverImage by mocked request\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1857456 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3300682de593239c4872f86db7c070fa5608f688",
        "parent": "https://github.com/apache/ofbiz-framework/commit/d505634c3183b4ce67b01ba18a2b7337da7ae71f",
        "bug_id": "ofbiz-framework_4",
        "file": [
            {
                "sha": "5750463ddef0f82a08297805f3fcc8b20dd420fb",
                "filename": "applications/content/src/main/java/org/apache/ofbiz/content/data/DataEvents.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3300682de593239c4872f86db7c070fa5608f688/applications/content/src/main/java/org/apache/ofbiz/content/data/DataEvents.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3300682de593239c4872f86db7c070fa5608f688/applications/content/src/main/java/org/apache/ofbiz/content/data/DataEvents.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/main/java/org/apache/ofbiz/content/data/DataEvents.java?ref=3300682de593239c4872f86db7c070fa5608f688",
                "patch": "@@ -276,7 +276,7 @@ public static String serveImage(HttpServletRequest request, HttpServletResponse\n \n             // hack for IE and mime types\n             String userAgent = request.getHeader(\"User-Agent\");\n-            if (userAgent.indexOf(\"MSIE\") > -1) {\n+            if (userAgent != null && userAgent.indexOf(\"MSIE\") > -1) {\n                 Debug.logInfo(\"Found MSIE changing mime type from - \" + mimeType, module);\n                 mimeType = \"application/octet-stream\";\n             }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Sebastian Leitner \"ContentManagementServices throws NullPointerException\" https://issues.apache.org/jira/browse/OFBIZ-4751\n\nFixes a NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1303764 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8cfaf4aaf6e291943dcbd2647f8eba0ffbc7d71e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/4bc25aede95e2938b5105b6c2d7da31b04ed5235",
        "bug_id": "ofbiz-framework_5",
        "file": [
            {
                "sha": "3b224bf0129e7feb0a1479f775895111ed35b1ae",
                "filename": "applications/content/src/org/ofbiz/content/ContentManagementServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8cfaf4aaf6e291943dcbd2647f8eba0ffbc7d71e/applications/content/src/org/ofbiz/content/ContentManagementServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8cfaf4aaf6e291943dcbd2647f8eba0ffbc7d71e/applications/content/src/org/ofbiz/content/ContentManagementServices.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/ContentManagementServices.java?ref=8cfaf4aaf6e291943dcbd2647f8eba0ffbc7d71e",
                "patch": "@@ -1591,8 +1591,11 @@ public static String updateTypeAndFile(GenericValue dataResource, Map<String, Ob\n             Debug.logError(msg, module);\n             return ServiceUtil.returnError(msg);\n         }\n-        Long useTime = (Long)productContent.get(\"useTime\");\n-        Integer newUseTime = Integer.valueOf(useTime.intValue() * qty.intValue());\n+        Long useTime = (Long) productContent.get(\"useTime\");\n+        Integer newUseTime = null;\n+        if (UtilValidate.isNotEmpty(useTime)) {\n+            newUseTime = Integer.valueOf(useTime.intValue() * qty.intValue());\n+        }\n         context.put(\"useTime\", newUseTime);\n         context.put(\"useTimeUomId\", productContent.get(\"useTimeUomId\"));\n         context.put(\"useRoleTypeId\", productContent.get(\"useRoleTypeId\"));",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Prevent possible NullPointerException.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1828233 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/af53b0ce46a468ab87888d83c965305b5660b878",
        "parent": "https://github.com/apache/ofbiz-framework/commit/9e41a4a174517103fee6f98beee67064a44be00e",
        "bug_id": "ofbiz-framework_6",
        "file": [
            {
                "sha": "f8980d55b9425275c14b06990a71b95c326ee33b",
                "filename": "applications/accounting/src/main/java/org/apache/ofbiz/accounting/finaccount/FinAccountServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/af53b0ce46a468ab87888d83c965305b5660b878/applications/accounting/src/main/java/org/apache/ofbiz/accounting/finaccount/FinAccountServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/af53b0ce46a468ab87888d83c965305b5660b878/applications/accounting/src/main/java/org/apache/ofbiz/accounting/finaccount/FinAccountServices.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/main/java/org/apache/ofbiz/accounting/finaccount/FinAccountServices.java?ref=af53b0ce46a468ab87888d83c965305b5660b878",
                "patch": "@@ -210,8 +210,11 @@\n             Timestamp now = UtilDateTime.nowTimestamp();\n \n             // now use our values\n-            String finAccountCode = FinAccountHelper.getNewFinAccountCode(accountCodeLength.intValue(), delegator);\n-            inContext.put(\"finAccountCode\", finAccountCode);\n+            String finAccountCode = null;\n+            if (UtilValidate.isNotEmpty(accountCodeLength)) {\n+                finAccountCode = FinAccountHelper.getNewFinAccountCode(accountCodeLength.intValue(), delegator);\n+                inContext.put(\"finAccountCode\", finAccountCode);\n+            }\n \n             // with pin codes, the account code becomes the ID and the pin becomes the code\n             if (\"Y\".equalsIgnoreCase(requirePinCode)) {",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Correct behaviour of Autologin cookies\n(OFBIZ-10635)\n\nAs reported by Deepak Nigam on dev ML there was a risk of NPE with userLogin w/\nmy last commit at r1851074  \n\nThanks Deepak for the report and proposed fix\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1851350 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/950fb21881a020820b7b3205bae737597391b7b8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/8a139ca8069b4bdb42edc1c7198b0dbc3a0ce3c9",
        "bug_id": "ofbiz-framework_7",
        "file": [
            {
                "sha": "dc6229093bb955be94073ed0fdb808c87a5b5490",
                "filename": "framework/webapp/src/main/java/org/apache/ofbiz/webapp/control/LoginWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/950fb21881a020820b7b3205bae737597391b7b8/framework/webapp/src/main/java/org/apache/ofbiz/webapp/control/LoginWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/950fb21881a020820b7b3205bae737597391b7b8/framework/webapp/src/main/java/org/apache/ofbiz/webapp/control/LoginWorker.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/main/java/org/apache/ofbiz/webapp/control/LoginWorker.java?ref=950fb21881a020820b7b3205bae737597391b7b8",
                "patch": "@@ -927,8 +927,8 @@ public static String autoLoginSet(HttpServletRequest request, HttpServletRespons\n         WebappInfo webappInfo = ComponentConfig.getWebappInfo((String) context.getAttribute(\"_serverId\"), applicationName);\n                 \n         if (userLogin != null && \n-                (webappInfo != null && webappInfo.isAutologinCookieUsed())\n-                || webappInfo == null) { // When using an empty mounpoint, ie using root as mounpoint. Beware: works only for 1 webapp!\n+                ((webappInfo != null && webappInfo.isAutologinCookieUsed())\n+                || webappInfo == null)) { // When using an empty mountpoint, ie using root as mountpoint. Beware: works only for 1 webapp!\n             Cookie autoLoginCookie = new Cookie(getAutoLoginCookieName(request), userLogin.getString(\"userLoginId\"));\n             autoLoginCookie.setMaxAge(60 * 60 * 24 * 365);\n             autoLoginCookie.setDomain(EntityUtilProperties.getPropertyValue(\"url\", \"cookie.domain\", delegator));",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Mike (mz4wheeler) \"Product NOTFOUND causes java.lang.NullPointerException, ugly screen, and excessive logging\" https://issues.apache.org/jira/browse/OFBIZ-4599\n\nFixes a possible NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1296597 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/72fcba2ab0e36c73449c9b08cfd5fe8854a91ae9",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a523706f2d74dfac29e059b445c92a0b2dd7e303",
        "bug_id": "ofbiz-framework_8",
        "file": [
            {
                "sha": "9458ee786109582ebef4088c17192561fa845cb6",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/Product.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/72fcba2ab0e36c73449c9b08cfd5fe8854a91ae9/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/Product.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/72fcba2ab0e36c73449c9b08cfd5fe8854a91ae9/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/Product.groovy",
                "status": "modified",
                "changes": 17,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/Product.groovy?ref=72fcba2ab0e36c73449c9b08cfd5fe8854a91ae9",
                "patch": "@@ -43,14 +43,15 @@ metaKeywords = null;\n // get the product entity\n if (productId) {\n     product = delegator.findByPrimaryKeyCache(\"Product\", [productId : productId]);\n-\n-    // first make sure this isn't a virtual-variant that has an associated virtual product, if it does show that instead of the variant\n-    if(\"Y\".equals(product.isVirtual) && \"Y\".equals(product.isVariant)){\n-        virtualVariantProductAssocs = delegator.findByAndCache(\"ProductAssoc\", [\"productId\": productId, \"productAssocTypeId\": \"ALTERNATIVE_PACKAGE\"], [\"-fromDate\"]);\n-        virtualVariantProductAssocs = EntityUtil.filterByDate(virtualVariantProductAssocs);\n-        if (virtualVariantProductAssocs) {\n-            productAssoc = EntityUtil.getFirst(virtualVariantProductAssocs);\n-            product = productAssoc.getRelatedOneCache(\"AssocProduct\");\n+    if (product) {\n+        // first make sure this isn't a virtual-variant that has an associated virtual product, if it does show that instead of the variant\n+        if(\"Y\".equals(product.isVirtual) && \"Y\".equals(product.isVariant)){\n+            virtualVariantProductAssocs = delegator.findByAndCache(\"ProductAssoc\", [\"productId\": productId, \"productAssocTypeId\": \"ALTERNATIVE_PACKAGE\"], [\"-fromDate\"]);\n+            virtualVariantProductAssocs = EntityUtil.filterByDate(virtualVariantProductAssocs);\n+            if (virtualVariantProductAssocs) {\n+                productAssoc = EntityUtil.getFirst(virtualVariantProductAssocs);\n+                product = productAssoc.getRelatedOneCache(\"AssocProduct\");\n+            }\n         }\n     }\n     ",
                "deletions": 8
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: EmailServices.sendMail causes a NPE, when sendFrom is missing\n(OFBIZ-10706)\n\nI tried to find the history for why the service does not take the \ndefaultFromEmailAddress property from general.properties and I found that It was \nlast modified in revision r418498 on 02/07/2006, I think it was always broken.\n\nThis uses defaultFromEmailAddress property in sendMail if sendFrom is missing\n\nThanks: Benjanmin Jugl reported, Pawan Verma fixed and others for discussion\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1856667 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/9f36abe2c55ea91f4549f27fbf1216bafed450a8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/95979acf0ea8f71552cdcfcd60a1d6e44ca710b1",
        "bug_id": "ofbiz-framework_9",
        "file": [
            {
                "sha": "7839551652d5e346d3bebefb9ce8a5a01105e324",
                "filename": "framework/common/src/main/java/org/apache/ofbiz/common/email/EmailServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/9f36abe2c55ea91f4549f27fbf1216bafed450a8/framework/common/src/main/java/org/apache/ofbiz/common/email/EmailServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/9f36abe2c55ea91f4549f27fbf1216bafed450a8/framework/common/src/main/java/org/apache/ofbiz/common/email/EmailServices.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/src/main/java/org/apache/ofbiz/common/email/EmailServices.java?ref=9f36abe2c55ea91f4549f27fbf1216bafed450a8",
                "patch": "@@ -160,6 +160,9 @@\n         }\n \n         String sendFrom = (String) context.get(\"sendFrom\");\n+        if (UtilValidate.isEmpty(sendFrom)) {\n+            sendFrom = EntityUtilProperties.getPropertyValue(\"general\", \"defaultFromEmailAddress\", delegator);\n+        }\n         String sendType = (String) context.get(\"sendType\");\n         String port = (String) context.get(\"port\");\n         String socketFactoryClass = (String) context.get(\"socketFactoryClass\");",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: NullPointerException when calling EntityQuery#getFieldList\n(OFBIZ-9624)\n\nWhen performing EntityQuery#getFieldList without specifying distinct a \nNullPointerException is thrown, because of the condition if (this.distinct). \nIt implicitly calls this.distinct.booleanValue() which throws the exception if \ndistinct is null.\n\nThanks: Tobias Laufk\u00f6tter\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1806220 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/29a3f4d2f185acf010502171b32f4d53464fa980",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1cc65c1d2bc8d95beafad5a8e6af42abbaee0870",
        "bug_id": "ofbiz-framework_10",
        "file": [
            {
                "sha": "3154ec99861843b4a9f8576d7ab16827472cecf2",
                "filename": "framework/entity/src/main/java/org/apache/ofbiz/entity/util/EntityQuery.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/29a3f4d2f185acf010502171b32f4d53464fa980/framework/entity/src/main/java/org/apache/ofbiz/entity/util/EntityQuery.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/29a3f4d2f185acf010502171b32f4d53464fa980/framework/entity/src/main/java/org/apache/ofbiz/entity/util/EntityQuery.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/main/java/org/apache/ofbiz/entity/util/EntityQuery.java?ref=29a3f4d2f185acf010502171b32f4d53464fa980",
                "patch": "@@ -521,7 +521,7 @@ private EntityCondition makeDateCondition() {\n \n     public <T> List<T> getFieldList(final String fieldName) throws GenericEntityException {select(fieldName);\n         try (EntityListIterator genericValueEli = queryIterator()) {\n-            if (this.distinct) {\n+            if (Boolean.TRUE.equals(this.distinct)) {\n                 Set<T> distinctSet = new HashSet<T>();\n                 GenericValue value = null;\n                 while ((value = genericValueEli.next()) != null) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Bharat Soni \"TAdd New Address popup of Manage Address page throwing NPE.\" (https://issues.apache.org/jira/browse/OFBIZ-2931) - OFBIZ-2931\nAdd New Address popup of Manage Address page in View profile throwing NullPointerException. (JLR : I suppose it's in the one page checkout, not the profile page from the main title bar see Jira issue for more)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@814168 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6aa251f2e3d4d93e1a9a256168642236429584a6",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1a40a74ff10b94cb5532093a3216f3c2518d3670",
        "bug_id": "ofbiz-framework_11",
        "file": [
            {
                "sha": "80d457dc7f505125106146d3bf5742b75a52674a",
                "filename": "specialpurpose/ecommerce/webapp/ecommerce/customer/profile/ManageAddress.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6aa251f2e3d4d93e1a9a256168642236429584a6/specialpurpose/ecommerce/webapp/ecommerce/customer/profile/ManageAddress.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6aa251f2e3d4d93e1a9a256168642236429584a6/specialpurpose/ecommerce/webapp/ecommerce/customer/profile/ManageAddress.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/ecommerce/webapp/ecommerce/customer/profile/ManageAddress.ftl?ref=6aa251f2e3d4d93e1a9a256168642236429584a6",
                "patch": "@@ -28,7 +28,7 @@ under the License.\n     <a class=\"button\" id=\"addAddress\" href=\"javascript:void(0)\">${uiLabelMap.EcommerceAddNewAddress}</a>\n     <div id=\"displayCreateAddressForm\" class=\"popup\" style=\"display: none;\">\n       <div id=\"serverError\" class=\"errorMessage\"></div>\n-      <form id=\"createPostalAddressForm\" method=\"post\" action=\"<@ofbizUrl></@ofbizUrl>\">\n+      <form id=\"createPostalAddressForm\" method=\"post\" action=\"\">\n         <fieldset>\n           <input type=\"hidden\" name=\"roleTypeId\" value=\"CUSTOMER\" />\n           <input type=\"hidden\" name=\"productStoreId\" value=\"${productStoreId?if_exists}\" />",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Escape NullPointerException with test ProductPromo.testProductShipCharge\n(OFBIZ-10370)\nIn previous commit r1831783, I excluded this line correction but it necessary to ensure all test pass.\nThis didn't solve the origin problem, why the worker ShoppingCart.getAdjustmentPromoIndex() parse some non promotion adjustment\nbut just escape potential null pointer that ProductPromo.testProductShipCharge test have been raised.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1832141 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3c54a7c7612e59291b29b8597889cdffe3470a6f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1840297cacb8ea37a2762506ffe8a3f84cda3a6f",
        "bug_id": "ofbiz-framework_12",
        "file": [
            {
                "sha": "9ec95b029ae2d6680ba7c618115c986382b34929",
                "filename": "applications/order/src/main/java/org/apache/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3c54a7c7612e59291b29b8597889cdffe3470a6f/applications/order/src/main/java/org/apache/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3c54a7c7612e59291b29b8597889cdffe3470a6f/applications/order/src/main/java/org/apache/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/main/java/org/apache/ofbiz/order/shoppingcart/ShoppingCart.java?ref=3c54a7c7612e59291b29b8597889cdffe3470a6f",
                "patch": "@@ -2874,11 +2874,14 @@ public String removeContactMech(String contactMechPurposeTypeId) {\n     }\n \n     public int getAdjustmentPromoIndex(String productPromoId) {\n+        if (UtilValidate.isEmpty(productPromoId)) {\n+            return -1;\n+        }\n         int index = adjustments.size();\n         while (index > 0) {\n             index--;\n-            if (adjustments.get(index).getString(\"productPromoId\").equals(productPromoId)) {\n-                return(index);\n+            if (productPromoId.equals(adjustments.get(index).getString(\"productPromoId\"))) {\n+                return (index);\n             }\n         }\n         return -1;",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Service Log screen is broken\n(OFBIZ-10342)\n\nSteps to regenerate\n\n    Navigate to Logging menu under webtools\n    https://demo-trunk.ofbiz.apache.org/webtools/control/LogView\n\n    Select Service Log menu, see NPE error\n\nThanks: Swapnil M Mane for report and Swapnil and Rishi Solanki for reviews\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1842372 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/48a774fbe423d4ec5d5fcf2e22d6bd7ca601de8c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/54ad6c68fab944774c161a680c3a2362254764a8",
        "bug_id": "ofbiz-framework_13",
        "file": [
            {
                "sha": "5a9d126d050311d200fd1811e768cc7acf3dca7b",
                "filename": "framework/service/src/main/java/org/apache/ofbiz/service/ServiceDispatcher.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/48a774fbe423d4ec5d5fcf2e22d6bd7ca601de8c/framework/service/src/main/java/org/apache/ofbiz/service/ServiceDispatcher.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/48a774fbe423d4ec5d5fcf2e22d6bd7ca601de8c/framework/service/src/main/java/org/apache/ofbiz/service/ServiceDispatcher.java",
                "status": "modified",
                "changes": 7,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/service/src/main/java/org/apache/ofbiz/service/ServiceDispatcher.java?ref=48a774fbe423d4ec5d5fcf2e22d6bd7ca601de8c",
                "patch": "@@ -301,6 +301,7 @@ public void runSyncIgnore(String localName, ModelService service, Map<String, ?\n                     if (modelService.requireNewTransaction) {\n                         parentTransaction = TransactionUtil.suspend();\n                         if (TransactionUtil.isTransactionInPlace()) {\n+                            rs.setEndStamp();\n                             throw new GenericTransactionException(\"In service \" + modelService.name + \" transaction is still in place after suspend, status is \" + TransactionUtil.getStatusString());\n                         }\n                         // now start a new transaction\n@@ -358,6 +359,7 @@ public void runSyncIgnore(String localName, ModelService service, Map<String, ?\n                     GenericValue userLogin = (GenericValue) context.get(\"userLogin\");\n \n                     if (modelService.auth && userLogin == null) {\n+                        rs.setEndStamp();\n                         throw new ServiceAuthException(\"User authorization is required for this service: \" + modelService.name + modelService.debugInfo());\n                     }\n \n@@ -381,6 +383,7 @@ public void runSyncIgnore(String localName, ModelService service, Map<String, ?\n                             modelService.validate(context, ModelService.IN_PARAM, locale);\n                         } catch (ServiceValidationException e) {\n                             Debug.logError(e, \"Incoming context (in runSync : \" + modelService.name + \") does not match expected requirements\", module);\n+                            rs.setEndStamp();\n                             throw e;\n                         }\n                     }\n@@ -489,6 +492,7 @@ public void runSyncIgnore(String localName, ModelService service, Map<String, ?\n                     try {\n                         modelService.validate(result, ModelService.OUT_PARAM, locale);\n                     } catch (ServiceValidationException e) {\n+                        rs.setEndStamp();\n                         throw new GenericServiceException(\"Outgoing result (in runSync : \" + modelService.name + \") does not match expected requirements\", e);\n                     }\n                 }\n@@ -555,6 +559,7 @@ public void runSyncIgnore(String localName, ModelService service, Map<String, ?\n                         if (e.getMessage() != null) {\n                             errMsg = errMsg + \": \" + e.getMessage();\n                         }\n+                        rs.setEndStamp();\n                         throw new GenericServiceException(errMsg);\n                     }\n                 }\n@@ -567,6 +572,7 @@ public void runSyncIgnore(String localName, ModelService service, Map<String, ?\n             }\n         } catch (GenericTransactionException te) {\n             Debug.logError(te, \"Problems with the transaction\", module);\n+            rs.setEndStamp();\n             throw new GenericServiceException(\"Problems with the transaction.\", te.getNested());\n         } finally {\n             if (lock != null) {\n@@ -584,6 +590,7 @@ public void runSyncIgnore(String localName, ModelService service, Map<String, ?\n                     TransactionUtil.resume(parentTransaction);\n                 } catch (GenericTransactionException ite) {\n                     Debug.logWarning(ite, \"Transaction error, not resumed\", module);\n+                    rs.setEndStamp();\n                     throw new GenericServiceException(\"Resume transaction exception, see logs\");\n                 }\n             }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Avoid a NullPointerException\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@897280 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a408cd8fb6ce3ee38bc4eea298f7d7703f4b16b8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/fd85e089338f1c877291eb5364a2b5059dec6222",
        "bug_id": "ofbiz-framework_14",
        "file": [
            {
                "sha": "8b7659b1e6132bd9a428f71cc9125b984bd4ffda",
                "filename": "applications/accounting/src/org/ofbiz/accounting/payment/PaymentGatewayServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a408cd8fb6ce3ee38bc4eea298f7d7703f4b16b8/applications/accounting/src/org/ofbiz/accounting/payment/PaymentGatewayServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a408cd8fb6ce3ee38bc4eea298f7d7703f4b16b8/applications/accounting/src/org/ofbiz/accounting/payment/PaymentGatewayServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/payment/PaymentGatewayServices.java?ref=a408cd8fb6ce3ee38bc4eea298f7d7703f4b16b8",
                "patch": "@@ -2835,7 +2835,7 @@ private static void savePgr(DispatchContext dctx, GenericValue pgr) {\n         GenericValue pgr = (GenericValue) context.get(\"paymentGatewayResponse\");\n         if (\"PaymentGatewayResponse\".equals(pgr.getEntityName())) {\n             String message = pgr.getString(\"gatewayMessage\");\n-            if (message.length() > 255) {\n+            if (UtilValidate.isNotEmpty(message) && message.length() > 255) {\n                 pgr.set(\"gatewayMessage\", message.substring(0, 255));\n             }\n         }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Minor change to overcome from NullPointerException.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@780276 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5ff148c09196662de7c2c7436d776946fbcd5f7e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/dd6828ddc86ffeb1cab93e69dcf994d4d9556ea6",
        "bug_id": "ofbiz-framework_15",
        "file": [
            {
                "sha": "de9475c0284b80593fd50f4c71783e9ef74b71ac",
                "filename": "specialpurpose/googlecheckout/src/org/ofbiz/googlecheckout/GoogleCheckoutHelper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5ff148c09196662de7c2c7436d776946fbcd5f7e/specialpurpose/googlecheckout/src/org/ofbiz/googlecheckout/GoogleCheckoutHelper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5ff148c09196662de7c2c7436d776946fbcd5f7e/specialpurpose/googlecheckout/src/org/ofbiz/googlecheckout/GoogleCheckoutHelper.java",
                "status": "modified",
                "changes": 13,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/googlecheckout/src/org/ofbiz/googlecheckout/GoogleCheckoutHelper.java?ref=5ff148c09196662de7c2c7436d776946fbcd5f7e",
                "patch": "@@ -230,12 +230,13 @@ public void createOrder(NewOrderNotification info, String productStoreId, String\n \n         // handle the adjustments\n         OrderAdjustment adjustment = info.getOrderAdjustment();\n-        addAdjustments(cart, adjustment); \n-\n-        // ship group info\n-        Shipping shipping = info.getOrderAdjustment().getShipping();\n-        addShipInfo(cart, shipping, partyInfo[1]);\n-\n+        if (adjustment != null){\n+            addAdjustments(cart, adjustment);\n+            // ship group info\n+            Shipping shipping = info.getOrderAdjustment().getShipping();\n+            addShipInfo(cart, shipping, partyInfo[1]);\n+        }\n+        \n         // set the cart payment method\n         cart.addPaymentAmount(PAYMENT_METHOD, cart.getGrandTotal());\n ",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Screen rendering error on ViewForumMessage page. Handled NPE. (OFBIZ-9362)\nApplied slightly modified patch. Thanks Priya Sharma for your contribution.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1802657 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ae958b34158ac5721d8cc2ba1d0fa8e2ac18769e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1623fadf0031e85a8045940012e77fa97a215665",
        "bug_id": "ofbiz-framework_16",
        "file": [
            {
                "sha": "0c1711a606de12ba25f1c83bc946123a7242ea6b",
                "filename": "applications/content/src/main/java/org/apache/ofbiz/content/webapp/ftl/RenderSubContentCacheTransform.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ae958b34158ac5721d8cc2ba1d0fa8e2ac18769e/applications/content/src/main/java/org/apache/ofbiz/content/webapp/ftl/RenderSubContentCacheTransform.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ae958b34158ac5721d8cc2ba1d0fa8e2ac18769e/applications/content/src/main/java/org/apache/ofbiz/content/webapp/ftl/RenderSubContentCacheTransform.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/main/java/org/apache/ofbiz/content/webapp/ftl/RenderSubContentCacheTransform.java?ref=ae958b34158ac5721d8cc2ba1d0fa8e2ac18769e",
                "patch": "@@ -93,7 +93,8 @@ public Writer getWriter(final Writer out, Map args) {\n         }\n         // This order is taken so that the dataResourceType can be overridden in the transform arguments.\n         String subDataResourceTypeId = (String)templateRoot.get(\"subDataResourceTypeId\");\n-        if (UtilValidate.isEmpty(subDataResourceTypeId)) {\n+\n+        if (UtilValidate.isEmpty(subDataResourceTypeId) && view != null ) {\n             try {\n                 subDataResourceTypeId = (String) view.get(\"drDataResourceTypeId\");\n             } catch (IllegalArgumentException e) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Improved: Inconsistent String Comparisons, Applied framework groovy patch from jira issue. (OFBIZ-9254)\n\nI found an inconsistency in the code for string comparison statusId.equals(\"PRUN_COMPLETED\") whereas it should be written as \"PRUN_COMPLETED\".equals(statusId) cause the former can throw NullPointerException if the variable found to be NULL.\n\nThanks Devanshu Vyas for your contribution.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1795342 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/7bacf44bd4c8428e1df197b7908c6187ead6fb13",
        "parent": "https://github.com/apache/ofbiz-framework/commit/d5bcaaedf8d64e17ad4d477d927417330104d286",
        "bug_id": "ofbiz-framework_17",
        "file": [
            {
                "sha": "9c1a18c198d0fdb5e0882b6e2c4abebf4d6edb15",
                "filename": "framework/common/groovyScripts/SetLocaleFromBrowser.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7bacf44bd4c8428e1df197b7908c6187ead6fb13/framework/common/groovyScripts/SetLocaleFromBrowser.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7bacf44bd4c8428e1df197b7908c6187ead6fb13/framework/common/groovyScripts/SetLocaleFromBrowser.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/groovyScripts/SetLocaleFromBrowser.groovy?ref=7bacf44bd4c8428e1df197b7908c6187ead6fb13",
                "patch": "@@ -25,7 +25,7 @@ public Map setLocaleFromBrowser() {\n     Map results = ServiceUtil.returnSuccess()\n     userLogin = EntityQuery.use(delegator).from(\"UserLogin\").where(\"userLoginId\", parameters.userLogin.userLoginId).queryFirst();\n     if (userLogin) {\n-        if (!userLogin.lastTimeZone || userLogin.lastTimeZone.equals(\"null\")) {\n+        if (!userLogin.lastTimeZone || \"null\".equals(userLogin.lastTimeZone)) {\n             userLogin.lastTimeZone = parameters.localeName\n             userLogin.store()\n         }",
                "deletions": 1
            },
            {
                "sha": "b0c8b15b0091f3f2f945196295e46d62fd75a83a",
                "filename": "framework/webtools/groovyScripts/entity/ViewGeneric.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7bacf44bd4c8428e1df197b7908c6187ead6fb13/framework/webtools/groovyScripts/entity/ViewGeneric.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7bacf44bd4c8428e1df197b7908c6187ead6fb13/framework/webtools/groovyScripts/entity/ViewGeneric.groovy",
                "status": "modified",
                "changes": 26,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/groovyScripts/entity/ViewGeneric.groovy?ref=7bacf44bd4c8428e1df197b7908c6187ead6fb13",
                "patch": "@@ -99,13 +99,13 @@ if (value != null) {\n         ModelFieldType type = delegator.getEntityFieldType(entity, field.getType())\n \n         String fieldValue = \"\"\n-        if (type.getJavaType().equals(\"Timestamp\") || type.getJavaType().equals(\"java.sql.Timestamp\")) {\n+        if (\"Timestamp\".equals(type.getJavaType()) || \"java.sql.Timestamp\".equals(type.getJavaType())) {\n             Timestamp dtVal = value.getTimestamp(field.getName())\n             fieldValue = (dtVal == null) ? \"\" : dtVal.toString()\n-        } else if (type.getJavaType().equals(\"Date\") || type.getJavaType().equals(\"java.sql.Date\")) {\n+        } else if (\"Date\".equals(type.getJavaType()) || \"java.sql.Date\".equals(type.getJavaType())) {\n             Date dateVal = value.getDate(field.getName())\n             fieldValue = (dateVal == null) ? \"\" : dateVal.toString()\n-        } else if (type.getJavaType().equals(\"Time\") || type.getJavaType().equals(\"java.sql.Time\")) {\n+        } else if (\"Time\".equals(type.getJavaType()) || \"java.sql.Time\".equals(type.getJavaType())) {\n             Time timeVal = value.getTime(field.getName())\n             fieldValue = (timeVal == null) ? \"\" : timeVal.toString()\n         } else if (type.getJavaType().indexOf(\"Integer\") >= 0) {\n@@ -138,7 +138,7 @@ context.put(\"pkNotFound\", pkNotFound)\n \n String lastUpdateMode = parameters.get(\"UPDATE_MODE\")\n if ((session.getAttribute(\"_ERROR_MESSAGE_\") != null || request.getAttribute(\"_ERROR_MESSAGE_\") != null) &&\n-    lastUpdateMode != null && !lastUpdateMode.equals(\"DELETE\")) {\n+    lastUpdateMode != null && !\"DELETE\".equals(lastUpdateMode)) {\n     //if we are updating and there is an error, do not use the entity data for the fields, use parameters to get the old value\n     useValue = false\n }\n@@ -155,7 +155,7 @@ while (pkIterator.hasNext()) {\n     String fieldValue = \"\"\n     String fieldType = \"\"\n     String stringLength = \"\"\n-    if (type.getJavaType().equals(\"Timestamp\") || type.getJavaType().equals(\"java.sql.Timestamp\")) {\n+    if (\"Timestamp\".equals(type.getJavaType()) || \"java.sql.Timestamp\".equals(type.getJavaType())) {\n         String dateTimeString = null\n         if (findByPK != null && useValue) {\n             Timestamp dtVal = findByPK.getTimestamp(field.getName())\n@@ -167,7 +167,7 @@ while (pkIterator.hasNext()) {\n         }\n         fieldValue = UtilFormatOut.checkNull(dateTimeString)\n         fieldType = \"DateTime\"\n-    } else if (type.getJavaType().equals(\"Date\") || type.getJavaType().equals(\"java.sql.Date\")) {\n+    } else if (\"Date\".equals(type.getJavaType()) || \"java.sql.Date\".equals(type.getJavaType())) {\n         String dateString = null\n         if (findByPK != null && useValue) {\n             Date dateVal = findByPK.getDate(field.getName())\n@@ -177,7 +177,7 @@ while (pkIterator.hasNext()) {\n         }\n         fieldValue = UtilFormatOut.checkNull(dateString)\n         fieldType = \"Date\"\n-    } else if (type.getJavaType().equals(\"Time\") || type.getJavaType().equals(\"java.sql.Time\")) {\n+    } else if (\"Time\".equals(type.getJavaType()) || \"java.sql.Time\".equals(type.getJavaType())) {\n         String timeString = null\n         if (findByPK != null && useValue) {\n             Time timeVal = findByPK.getTime(field.getName())\n@@ -232,7 +232,7 @@ while (noPkIterator.hasNext()) {\n     String fieldValue = \"\"\n     String fieldType = \"\"\n     String stringLength = \"\"\n-    if (type.getJavaType().equals(\"Timestamp\") || type.getJavaType().equals(\"java.sql.Timestamp\")) {\n+    if (\"Timestamp\".equals(type.getJavaType()) || \"java.sql.Timestamp\".equals(type.getJavaType())) {\n         String dateTimeString = null\n         if (value != null && useValue) {\n             Timestamp dtVal = value.getTimestamp(field.getName())\n@@ -244,7 +244,7 @@ while (noPkIterator.hasNext()) {\n         }\n         fieldValue = UtilFormatOut.checkNull(dateTimeString)\n         fieldType = \"DateTime\"\n-    } else if (type.getJavaType().equals(\"Date\") || type.getJavaType().equals(\"java.sql.Date\")) {\n+    } else if (\"Date\".equals(type.getJavaType()) || \"java.sql.Date\".equals(type.getJavaType())) {\n         String dateString = null\n         if (value != null && useValue) {\n             Date dateVal = value.getDate(field.getName())\n@@ -254,7 +254,7 @@ while (noPkIterator.hasNext()) {\n         }\n         fieldValue = UtilFormatOut.checkNull(dateString)\n         fieldType = \"Date\"\n-    } else if (type.getJavaType().equals(\"Time\") || type.getJavaType().equals(\"java.sql.Time\")) {\n+    } else if (\"Time\".equals(type.getJavaType()) || \"java.sql.Time\".equals(type.getJavaType())) {\n         String timeString = null\n         if (value != null && useValue) {\n             Time timeVal = value.getTime(field.getName())\n@@ -338,21 +338,21 @@ for (int relIndex = 0; relIndex < entity.getRelationsSize(); relIndex++) {\n \n                     String fieldValue = \"\"\n                     String fieldType = \"\"\n-                    if (type.getJavaType().equals(\"Timestamp\") || type.getJavaType().equals(\"java.sql.Timestamp\")) {\n+                    if (\"Timestamp\".equals(type.getJavaType()) || \"java.sql.Timestamp\".equals(type.getJavaType())) {\n                         Timestamp dtVal = null\n                         if (valueRelated != null) {\n                             dtVal = valueRelated.getTimestamp(field.getName())\n                         }\n                         fieldValue = (dtVal == null) ? \"\" : dtVal.toString()\n                         fieldType = \"DateTime\"\n-                    } else if (type.getJavaType().equals(\"Date\") || type.getJavaType().equals(\"java.sql.Date\")) {\n+                    } else if (\"Date\".equals(type.getJavaType()) || \"java.sql.Date\".equals(type.getJavaType())) {\n                         Date dateVal = null\n                         if (valueRelated != null) {\n                             dateVal = valueRelated.getDate(field.getName())\n                         }\n                         fieldValue = (dateVal == null) ? \"\" : dateVal.toString()\n                         fieldType = \"Date\"\n-                    } else if (type.getJavaType().equals(\"Time\") || type.getJavaType().equals(\"java.sql.Time\")) {\n+                    } else if (\"Time\".equals(type.getJavaType()) || \"java.sql.Time\".equals(type.getJavaType())) {\n                         Time timeVal = null\n                         if (valueRelated != null) {\n                             timeVal = valueRelated.getTime(field.getName())",
                "deletions": 13
            },
            {
                "sha": "0e63c98e7e672b90aceaf02ca8585799e05712cf",
                "filename": "framework/webtools/groovyScripts/service/AvailableServices.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7bacf44bd4c8428e1df197b7908c6187ead6fb13/framework/webtools/groovyScripts/service/AvailableServices.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7bacf44bd4c8428e1df197b7908c6187ead6fb13/framework/webtools/groovyScripts/service/AvailableServices.groovy",
                "status": "modified",
                "changes": 22,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/groovyScripts/service/AvailableServices.groovy?ref=7bacf44bd4c8428e1df197b7908c6187ead6fb13",
                "patch": "@@ -381,7 +381,7 @@ if (selectedService) {\n         curServiceMap.export = export\n         curServiceMap.exportBool = exportBool\n \n-        if (permissionGroups && !permissionGroups.equals(\"NA\")) {\n+        if (permissionGroups && !\"NA\".equals(permissionGroups)) {\n             permList = new ArrayList(permissionGroups.size())\n             permissionGroups.each { curPerm ->  //This is a ModelPermGroup\n                 curPerm.permissions.each { curPermObj ->\n@@ -475,7 +475,7 @@ if (selectedService) {\n \n     showWsdl = parameters.show_wsdl\n \n-    if (showWsdl?.equals(\"true\")) {\n+    if (\"true\".equals(showWsdl)) {\n         try {\n             wsdl = curServiceModel.toWSDL(\"http://${request.getServerName()}:${EntityUtilProperties.getPropertyValue(\"url\", \"port.http\", \"80\", delegator)}${parameters._CONTROL_PATH_}/SOAPService\")\n             curServiceMap.wsdl = UtilXml.writeXmlDocument(wsdl)\n@@ -517,34 +517,34 @@ if (!selectedService) {\n             constraintName = consArr[0]\n             constraintVal = consArr[1]\n \n-            if (constraintName.equals(\"engine_name\")) {\n+            if (\"engine_name\".equals(constraintName)) {\n                 canIncludeService = curServiceModel.engineName.equals(constraintVal)\n-                if (constraintVal.equals(\"NA\")) {\n+                if (\"NA\".equals(constraintVal)) {\n                     canIncludeService = curServiceModel.engineName ? false : true\n                 }\n             }\n \n-            if (canIncludeService && constraintName.equals(\"default_entity_name\")) {\n+            if (canIncludeService && \"default_entity_name\".equals(constraintName)) {\n                 canIncludeService = curServiceModel.defaultEntityName.equals(constraintVal)\n-                if (constraintVal.equals(\"NA\")) {\n+                if (\"NA\".equals(constraintVal)) {\n                     canIncludeService = curServiceModel.defaultEntityName ? false : true\n                 }\n             }\n \n-            if (canIncludeService && constraintName.equals(\"location\")) {\n+            if (canIncludeService && \"location\".equals(constraintName)) {\n                 canIncludeService = curServiceModel.location.equals(constraintVal)\n-                if (constraintVal.equals(\"NA\")) {\n+                if (\"NA\".equals(constraintVal)) {\n                     canIncludeService = curServiceModel.location ? false : true\n                 }\n             }\n \n-            if (canIncludeService && constraintName.equals(\"definitionLocation\")) {\n+            if (canIncludeService && \"definitionLocation\".equals(constraintName)) {\n                 canIncludeService = curServiceModel.definitionLocation.equals(constraintVal)\n             }\n \n-            if (canIncludeService && constraintName.equals(\"alpha\")) {\n+            if (canIncludeService && \"alpha\".equals(constraintName)) {\n                 canIncludeService = (serviceName[0]).equals(constraintVal)\n-                if (constraintVal.equals(\"NA\")) {\n+                if (\"NA\".equals(constraintVal)) {\n                     canIncludeService = true\n                 }\n             }",
                "deletions": 11
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Improved: Inconsistent String Comparisons, Applied application groovy patch from jira issue. (OFBIZ-9254)\n\nI found an inconsistency in the code for string comparison statusId.equals(\"PRUN_COMPLETED\") whereas it should be written as \"PRUN_COMPLETED\".equals(statusId) cause the former can throw NullPointerException if the variable found to be NULL.\n\nThanks Devanshu Vyas for your contribution.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1795341 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d5bcaaedf8d64e17ad4d477d927417330104d286",
        "parent": "https://github.com/apache/ofbiz-framework/commit/590573f9f28012b55dca6df121e14b3bc32a71d5",
        "bug_id": "ofbiz-framework_18",
        "file": [
            {
                "sha": "ad90b9a5b01632727c99235c12ddf422e68b2aea",
                "filename": "applications/accounting/groovyScripts/order/BillingAccountOrders.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/accounting/groovyScripts/order/BillingAccountOrders.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/accounting/groovyScripts/order/BillingAccountOrders.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/groovyScripts/order/BillingAccountOrders.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -25,7 +25,7 @@ if (billingAccountId) {\n             orderId = orderHeader.orderId\n             orderBillingAcc = from(\"OrderHeaderAndPaymentPref\").where(\"orderId\", orderId).queryFirst()\n             orderBillingAccMap = [:]\n-            if (orderBillingAcc.paymentMethodTypeId.equals(\"EXT_BILLACT\") && orderBillingAcc.paymentStatusId.equals(\"PAYMENT_NOT_RECEIVED\")) {\n+            if (\"EXT_BILLACT\".equals(orderBillingAcc.paymentMethodTypeId) && \"PAYMENT_NOT_RECEIVED\".equals(orderBillingAcc.paymentStatusId)) {\n                 orderBillingAccMap.putAll(orderBillingAcc)\n                 orderId = orderBillingAcc.orderId\n                 orderBillingAccMap.orderId = orderId",
                "deletions": 1
            },
            {
                "sha": "414c47627165043831464ccf5bb99124d2bf0beb",
                "filename": "applications/manufacturing/groovyScripts/jobshopmgt/ProductionRunDeclaration.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/manufacturing/groovyScripts/jobshopmgt/ProductionRunDeclaration.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/manufacturing/groovyScripts/jobshopmgt/ProductionRunDeclaration.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/groovyScripts/jobshopmgt/ProductionRunDeclaration.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -97,7 +97,7 @@ if (productionRunId) {\n         //---------------\n         // routingTask update sub-screen\n         routingTaskId = parameters.routingTaskId\n-        if (routingTaskId && (actionForm.equals(\"UpdateRoutingTask\") || actionForm.equals(\"EditRoutingTask\"))) {\n+        if (routingTaskId && (\"UpdateRoutingTask\".equals(actionForm) || \"EditRoutingTask\".equals(actionForm))) {\n             routingTask = from(\"WorkEffort\").where(\"workEffortId\", routingTaskId).queryOne()\n             Map routingTaskData = routingTask.getAllFields()\n             routingTaskData.estimatedSetupMillis = routingTask.getDouble(\"estimatedSetupMillis\")",
                "deletions": 1
            },
            {
                "sha": "79ca0fce6de470646f8fab4635f348135226123d",
                "filename": "applications/order/groovyScripts/entry/AdditionalPartyListing.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/entry/AdditionalPartyListing.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/entry/AdditionalPartyListing.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/entry/AdditionalPartyListing.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -35,7 +35,7 @@ additionalPartyRole.each { roleTypeId, partyList ->\n         partyMap = [:]\n         partyMap.partyId = partyId\n         party = from(\"Party\").where(\"partyId\", partyId).cache(true).queryOne()\n-        if (party.partyTypeId.equals(\"PERSON\")) {\n+        if (\"PERSON\".equals(party.partyTypeId)) {\n             party = party.getRelatedOne(\"Person\", true)\n             partyMap.type = \"person\"\n             partyMap.firstName = party.firstName",
                "deletions": 1
            },
            {
                "sha": "3a5680b59e6da0b6b6243b4a094f964f65a8b159",
                "filename": "applications/order/groovyScripts/entry/BillSettings.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/entry/BillSettings.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/entry/BillSettings.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/entry/BillSettings.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -40,7 +40,7 @@ if (newPaymentMethodId) {\n     context.checkOutPaymentId = newPaymentMethodId\n }\n \n-if (orderPartyId && !orderPartyId.equals(\"_NA_\")) {\n+if (orderPartyId && !\"_NA_\".equals(orderPartyId)) {\n     orderParty = from(\"Party\").where(\"partyId\", orderPartyId).queryOne()\n     orderPerson = orderParty.getRelatedOne(\"Person\", false)\n     context.orderParty = orderParty",
                "deletions": 1
            },
            {
                "sha": "ce8ae47e10db8d747535fbfd2ab6d7f7d225612c",
                "filename": "applications/order/groovyScripts/entry/SetCheckOutTabBar.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/entry/SetCheckOutTabBar.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/entry/SetCheckOutTabBar.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/entry/SetCheckOutTabBar.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -51,7 +51,7 @@ isLastStep = \"N\"\n enabled = \"Y\"\n checkoutSteps.eachWithIndex { checkoutStep, i ->\n     checkoutStep.put(\"enabled\", enabled)\n-    if (enabled.equals(\"Y\")) {\n+    if (\"Y\".equals(enabled)) {\n         if (i == (checkoutSteps.size() - 1)) {\n             isLastStep = \"Y\"\n         }",
                "deletions": 1
            },
            {
                "sha": "6f28b58b60cfc75aea4e12228541a8586122acdd",
                "filename": "applications/order/groovyScripts/order/CompanyHeader.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/order/CompanyHeader.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/order/CompanyHeader.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/order/CompanyHeader.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -88,7 +88,7 @@ if (orderHeader) {\n             partyId = orh.getBillFromParty().partyId\n         } else {\n             productStore = orderHeader.getRelatedOne(\"ProductStore\", false)\n-            if (orderHeader.orderTypeId.equals(\"SALES_ORDER\") && productStore?.payToPartyId) {\n+            if (\"SALES_ORDER\".equals(orderHeader.orderTypeId) && productStore?.payToPartyId) {\n                 partyId = productStore.payToPartyId\n             }\n         }",
                "deletions": 1
            },
            {
                "sha": "ac6873ffeae8c95f2a2e3483afc7a452c35d7795",
                "filename": "applications/order/groovyScripts/order/OrderView.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/order/OrderView.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/order/OrderView.groovy",
                "status": "modified",
                "changes": 12,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/order/OrderView.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -294,13 +294,13 @@ if (orderHeader) {\n             supplierContactMechValueMaps.each { supplierContactMechValueMap ->\n                 contactMechPurposes = supplierContactMechValueMap.partyContactMechPurposes\n                 contactMechPurposes.each { contactMechPurpose ->\n-                    if (contactMechPurpose.contactMechPurposeTypeId.equals(\"GENERAL_LOCATION\")) {\n+                    if (\"GENERAL_LOCATION\".equals(contactMechPurpose.contactMechPurposeTypeId)) {\n                         context.supplierGeneralContactMechValueMap = supplierContactMechValueMap\n-                    } else if (contactMechPurpose.contactMechPurposeTypeId.equals(\"SHIPPING_LOCATION\")) {\n+                    } else if (\"SHIPPING_LOCATION\".equals(contactMechPurpose.contactMechPurposeTypeId)) {\n                         context.supplierShippingContactMechValueMap = supplierContactMechValueMap\n-                    } else if (contactMechPurpose.contactMechPurposeTypeId.equals(\"BILLING_LOCATION\")) {\n+                    } else if (\"BILLING_LOCATION\".equals(contactMechPurpose.contactMechPurposeTypeId)) {\n                         context.supplierBillingContactMechValueMap = supplierContactMechValueMap\n-                    } else if (contactMechPurpose.contactMechPurposeTypeId.equals(\"PAYMENT_LOCATION\")) {\n+                    } else if (\"PAYMENT_LOCATION\".equals(contactMechPurpose.contactMechPurposeTypeId)) {\n                         context.supplierPaymentContactMechValueMap = supplierContactMechValueMap\n                     }\n                 }\n@@ -493,7 +493,7 @@ if (workEffortId && assignPartyId && assignRoleTypeId && fromDate) {\n         workEffortStatus = workEffort.currentStatusId\n         if (workEffortStatus) {\n             context.workEffortStatus = workEffortStatus\n-            if (workEffortStatus.equals(\"WF_RUNNING\") || workEffortStatus.equals(\"WF_SUSPENDED\"))\n+            if (\"WF_RUNNING\".equals(workEffortStatus) || \"WF_SUSPENDED\".equals(workEffortStatus))\n                 context.inProcess = true\n         }\n \n@@ -550,7 +550,7 @@ if (shipments) {\n // get orderAdjustmentId for SHIPPING_CHARGES\n orderAdjustmentId = null\n orderAdjustments.each { orderAdjustment ->\n-    if(orderAdjustment.orderAdjustmentTypeId.equals(\"SHIPPING_CHARGES\")) {\n+    if(\"SHIPPING_CHARGES\".equals(orderAdjustment.orderAdjustmentTypeId)) {\n         orderAdjustmentId = orderAdjustment.orderAdjustmentId\n     }\n }",
                "deletions": 6
            },
            {
                "sha": "e49e331437d651f3786ff612e3b93629d58690f1",
                "filename": "applications/order/groovyScripts/reports/OpenOrderItemsReport.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/reports/OpenOrderItemsReport.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/reports/OpenOrderItemsReport.groovy",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/reports/OpenOrderItemsReport.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -104,11 +104,11 @@ listIt.each { listValue ->\n     listPrice = 0.0\n \n     productPrices.each { productPriceMap ->\n-        if (productPriceMap.productPriceTypeId.equals(\"AVERAGE_COST\")) {\n+        if (\"AVERAGE_COST\".equals(productPriceMap.productPriceTypeId)) {\n             costPrice = productPriceMap.price\n-        } else if (productPriceMap.productPriceTypeId.equals(\"DEFAULT_PRICE\")) {\n+        } else if (\"DEFAULT_PRICE\".equals(productPriceMap.productPriceTypeId)) {\n             retailPrice = productPriceMap.price\n-        } else if (productPriceMap.productPriceTypeId.equals(\"LIST_PRICE\")) {\n+        } else if (\"LIST_PRICE\".equals(productPriceMap.productPriceTypeId)) {\n             listPrice = productPriceMap.price\n         }\n     }",
                "deletions": 3
            },
            {
                "sha": "ca9c0e7a324e1ff92b5b526b175873554476d5ae",
                "filename": "applications/order/groovyScripts/request/RequestItemNotes.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/request/RequestItemNotes.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/request/RequestItemNotes.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/request/RequestItemNotes.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -26,7 +26,7 @@ showAll = parameters.showAll ?: \"false\"\n context.showAll = showAll\n \n fields = [custRequestId : custRequestId]\n-if (showAll.equals(\"false\")) {\n+if (\"false\".equals(showAll)) {\n     fields.custRequestItemSeqId = custRequestItemSeqId\n }\n notes = from(\"CustRequestItemNoteView\").where(fields).orderBy(\"-noteDateTime\").queryList()",
                "deletions": 1
            },
            {
                "sha": "277794624e032e86b2001486a8706e3f27c628db",
                "filename": "applications/order/groovyScripts/task/OrderTaskList.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/task/OrderTaskList.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/order/groovyScripts/task/OrderTaskList.groovy",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/task/OrderTaskList.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -29,10 +29,10 @@ context.userLogin = userLogin\n sort = parameters.sort\n sortOrder = [\"currentStatusId\", \"-priority\", \"orderDate\"]\n if (sort) {\n-    if (sort.equals(\"name\")) {\n+    if (\"name\".equals(sort)) {\n         sortOrder.add(0, \"firstName\")\n         sortOrder.add(0, \"lastName\")\n-    } else if (sort.equals(\"grandTotal\")) {\n+    } else if (\"grandTotal\".equals(sort)) {\n         sortOrder.add(0, \"-grandTotal\")\n     } else {\n         sortOrder.add(0, sort)\n@@ -60,7 +60,7 @@ partyRoles = from(\"PartyRole\").where(\"partyId\", userLogin.partyId).queryList()\n // build the role list\n pRolesList = []\n partyRoles.each { partyRole ->\n-    if (!partyRole.roleTypeId.equals(\"_NA_\"))\n+    if (!\"_NA_\".equals(partyRole.roleTypeId))\n         pRolesList.add(EntityCondition.makeCondition(\"roleTypeId\", EntityOperator.EQUALS, partyRole.roleTypeId))\n }\n ",
                "deletions": 3
            },
            {
                "sha": "1e9c176aed1e3023e5e218c80d930602657433b6",
                "filename": "applications/product/groovyScripts/catalog/imagemanagement/CheckRejected.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/catalog/imagemanagement/CheckRejected.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/catalog/imagemanagement/CheckRejected.groovy",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/groovyScripts/catalog/imagemanagement/CheckRejected.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -28,7 +28,7 @@ if (rowCount > 1) {\n         if(paramMap.get(\"checkStatusId\" +thisSuffix)){\n             def temp = paramMap.get(\"checkStatusId\" +thisSuffix)\n             def splitTemp = temp.split(\"/\")\n-            if(splitTemp[0].equals(\"IM_REJECTED\")){\n+            if(\"IM_REJECTED\".equals(splitTemp[0])){\n                 rejected = true\n             }\n         }\n@@ -37,7 +37,7 @@ if (rowCount > 1) {\n else {\n     def temp = paramMap.get(\"checkStatusId_o_0\")\n     def splitTemp = temp.split(\"/\")\n-    if(splitTemp[0].equals(\"IM_REJECTED\")){\n+    if(\"IM_REJECTED\".equals(splitTemp[0])){\n         rejected = true\n     }\n }",
                "deletions": 2
            },
            {
                "sha": "91223dfa2d2c8185d256fc7f4473dc3c51711a0f",
                "filename": "applications/product/groovyScripts/catalog/imagemanagement/ImageUpload.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/catalog/imagemanagement/ImageUpload.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/catalog/imagemanagement/ImageUpload.groovy",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/groovyScripts/catalog/imagemanagement/ImageUpload.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -129,11 +129,11 @@ if (fileType) {\n             product.set(fileType + \"ImageUrl\", imageUrl)\n \n             // call scaleImageInAllSize\n-            if (fileType.equals(\"original\")) {\n+            if (\"original\".equals(fileType)) {\n                 context.delegator = delegator\n                 result = ScaleImage.scaleImageInAllSize(context, filenameToUse, \"main\", \"0\")\n \n-                if (result.containsKey(\"responseMessage\") && result.get(\"responseMessage\").equals(\"success\")) {\n+                if (result.containsKey(\"responseMessage\") && \"success\".equals(result.get(\"responseMessage\"))) {\n                     imgMap = result.get(\"imageUrlMap\")\n                     imgMap.each() { key, value ->\n                         product.set(key + \"ImageUrl\", value)",
                "deletions": 2
            },
            {
                "sha": "b4e26d1c795806f4d8969ba058ce32a1ae089f9d",
                "filename": "applications/product/groovyScripts/catalog/imagemanagement/SetDefaultImage.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/catalog/imagemanagement/SetDefaultImage.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/catalog/imagemanagement/SetDefaultImage.groovy",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/groovyScripts/catalog/imagemanagement/SetDefaultImage.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -167,11 +167,11 @@ if (fileType) {\n             product.set(fileType + \"ImageUrl\", imageUrl)\n \n             // call scaleImageInAllSize\n-            if (fileType.equals(\"original\")) {\n+            if (\"original\".equals(fileType)) {\n                 context.delegator = delegator\n                 result = ScaleImage.scaleImageInAllSize(context, filenameToUse, \"main\", \"0\")\n \n-                if (result.containsKey(\"responseMessage\") && result.get(\"responseMessage\").equals(\"success\")) {\n+                if (result.containsKey(\"responseMessage\") && \"success\".equals(result.get(\"responseMessage\"))) {\n                     imgMap = result.get(\"imageUrlMap\")\n                     imgMap.each() { key, value ->\n                         product.set(key + \"ImageUrl\", value)",
                "deletions": 2
            },
            {
                "sha": "9371a1a0f6e360449c8abaea045a63efa622160b",
                "filename": "applications/product/groovyScripts/catalog/product/EditProductContent.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/catalog/product/EditProductContent.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/catalog/product/EditProductContent.groovy",
                "status": "modified",
                "changes": 8,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/groovyScripts/catalog/product/EditProductContent.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -120,9 +120,9 @@ if (fileType) {\n                 if (!filenameToUse.startsWith(productId + \".\")) {\n                     File[] files = targetDir.listFiles()\n                     for(File file : files) {\n-                        if (file.isFile() && file.getName().contains(filenameToUse.substring(0, filenameToUse.indexOf(\".\")+1)) && !fileType.equals(\"original\")) {\n+                        if (file.isFile() && file.getName().contains(filenameToUse.substring(0, filenameToUse.indexOf(\".\")+1)) && !\"original\".equals(fileType)) {\n                             file.delete()\n-                        } else if(file.isFile() && fileType.equals(\"original\") && !file.getName().equals(defaultFileName)) {\n+                        } else if(file.isFile() && \"original\".equals(fileType) && !file.getName().equals(defaultFileName)) {\n                             file.delete()\n                         }\n                     } \n@@ -146,11 +146,11 @@ if (fileType) {\n             product.set(fileType + \"ImageUrl\", imageUrl)\n \n             // call scaleImageInAllSize\n-            if (fileType.equals(\"original\")) {\n+            if (\"original\".equals(fileType)) {\n                 context.delegator = delegator\n                 result = ScaleImage.scaleImageInAllSize(context, filenameToUse, \"main\", \"0\")\n \n-                if (result.containsKey(\"responseMessage\") && result.get(\"responseMessage\").equals(\"success\")) {\n+                if (result.containsKey(\"responseMessage\") && \"success\".equals(result.get(\"responseMessage\"))) {\n                     imgMap = result.get(\"imageUrlMap\")\n                     imgMap.each() { key, value ->\n                         product.set(key + \"ImageUrl\", value)",
                "deletions": 4
            },
            {
                "sha": "134e5752a169867b05660fb71ca23294d607c768",
                "filename": "applications/product/groovyScripts/facility/inventory/ReceiveInventory.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/facility/inventory/ReceiveInventory.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d5bcaaedf8d64e17ad4d477d927417330104d286/applications/product/groovyScripts/facility/inventory/ReceiveInventory.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/groovyScripts/facility/inventory/ReceiveInventory.groovy?ref=d5bcaaedf8d64e17ad4d477d927417330104d286",
                "patch": "@@ -92,7 +92,7 @@ if (purchaseOrder && !shipmentId) {\n }\n \n shipment = null\n-if (shipmentId && !shipmentId.equals(\"_NA_\")) {\n+if (shipmentId && !\"_NA_\".equals(shipmentId)) {\n     shipment = from(\"Shipment\").where(\"shipmentId\", shipmentId).queryOne()\n }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Refactor ContentWorkerInterface methods signatures\n(OFBIZ-9164)\n\nIf you go at: catalog/control/main then open the lookup on the left for category\n id, click the first category (20111) and then click on search, you will be \nprompted with this:\njava.lang.IllegalArgumentException: Error running script at location \n[component://product/groovyScripts/catalog/find/KeywordSearch.groovy]: \njava.lang.NullPointerException\n\nThis is the result of the changes I made for this issue 1.5 years ago.\n\nI missed the case where a null is passed instead of a dispatcher in\ngetProductCategoryContentAsText()\nwhich is then used inside of getProductCategoryContentAsText:\nContentWorker.renderContentAsText()\nThe problem is, that the method renderContentAsText as a result of my changes \nuses the dispatcher to get the delegator.\nBecause the dispatcher is a given a null value at this point, this results in a \nnull pointer.\n\nThe solution was to introduce and abstract prettyPrintConstraint method with a \nLocalDispatcher as argument and to implement it in CategoryConstraint class. \n\nOther implementations don't use getProductCategoryContentAsText so can simply \nreturn null. They will not be used anywhere anyway.\n\nCatalogConstraint.prettyPrintConstraint with a delegator is now not\nused OOTB but I prefer to keep its implementation for custom projects which \nmight use it in other circumstances. I though put a TODO to possibly simply\nreturn null.\n\nAlso while at it remove a unused requestParams variable in ProductSearchSession\n\nThanks: Dennis Balkir for the detailed reporting\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1835891 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d9e74e316cb35258559a1b4d1360cb5842e17a5a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/66b783ca75b49da6b08a3cc9e09184f78117829d",
        "bug_id": "ofbiz-framework_19",
        "file": [
            {
                "sha": "4ec17127b767df5be2fe6b329ef9be0a1139c24b",
                "filename": "applications/product/src/main/java/org/apache/ofbiz/product/product/ProductSearch.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d9e74e316cb35258559a1b4d1360cb5842e17a5a/applications/product/src/main/java/org/apache/ofbiz/product/product/ProductSearch.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d9e74e316cb35258559a1b4d1360cb5842e17a5a/applications/product/src/main/java/org/apache/ofbiz/product/product/ProductSearch.java",
                "status": "modified",
                "changes": 146,
                "additions": 146,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/main/java/org/apache/ofbiz/product/product/ProductSearch.java?ref=d9e74e316cb35258559a1b4d1360cb5842e17a5a",
                "patch": "@@ -38,6 +38,7 @@\n import org.apache.ofbiz.base.util.UtilValidate;\n import org.apache.ofbiz.common.KeywordSearchUtil;\n import org.apache.ofbiz.entity.Delegator;\n+import org.apache.ofbiz.entity.GenericDelegator;\n import org.apache.ofbiz.entity.GenericEntityException;\n import org.apache.ofbiz.entity.GenericValue;\n import org.apache.ofbiz.entity.condition.EntityComparisonOperator;\n@@ -58,6 +59,7 @@\n import org.apache.ofbiz.entity.util.EntityUtil;\n import org.apache.ofbiz.party.party.PartyHelper;\n import org.apache.ofbiz.product.category.CategoryContentWrapper;\n+import org.apache.ofbiz.service.LocalDispatcher;\n \n \n /**\n@@ -827,6 +829,7 @@ public ProductSearchConstraint() { }\n         public abstract void addConstraint(ProductSearchContext productSearchContext);\n         /** pretty print for log messages and even UI stuff */\n         public abstract String prettyPrintConstraint(Delegator delegator, boolean detailed, Locale locale);\n+        public abstract String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale);\n     }\n \n \n@@ -921,6 +924,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -967,6 +978,7 @@ public void addConstraint(ProductSearchContext productSearchContext) {\n         }\n \n         /** pretty print for log messages and even UI stuff */\n+        // TODO This is not used OOTB since OFBIZ-9164 and could simply return null, kept for custom projects\n         @Override\n         public String prettyPrintConstraint(Delegator delegator, boolean detailed, Locale locale) {\n             GenericValue productCategory = null;\n@@ -995,6 +1007,36 @@ public String prettyPrintConstraint(Delegator delegator, boolean detailed, Local\n             return ppBuf.toString();\n         }\n \n+        /** pretty print for log messages and even UI stuff */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            GenericValue productCategory = null;\n+            GenericDelegator delegator = (GenericDelegator) dispatcher.getDelegator();\n+            try {\n+                productCategory = EntityQuery.use(delegator).from(\"ProductCategory\").where(\"productCategoryId\", productCategoryId).cache().queryOne();\n+            } catch (GenericEntityException e) {\n+                Debug.logError(e, \"Error finding ProductCategory information for constraint pretty print\", module);\n+            }\n+            StringBuilder ppBuf = new StringBuilder();\n+            ppBuf.append(UtilProperties.getMessage(resource, \"ProductCategory\", locale)).append(\": \");\n+            if (productCategory != null) {\n+                String catInfo = CategoryContentWrapper.getProductCategoryContentAsText(productCategory, \"CATEGORY_NAME\", locale, dispatcher, \"html\");\n+                if (UtilValidate.isEmpty(catInfo)) {\n+                    catInfo = CategoryContentWrapper.getProductCategoryContentAsText(productCategory, \"DESCRIPTION\", locale, dispatcher, \"html\");\n+                }\n+                ppBuf.append(catInfo);\n+            }\n+            if (productCategory == null || detailed) {\n+                ppBuf.append(\" [\");\n+                ppBuf.append(productCategoryId);\n+                ppBuf.append(\"]\");\n+            }\n+            if (includeSubCategories) {\n+                ppBuf.append(\" (\").append(UtilProperties.getMessage(resource, \"ProductIncludeAllSubCategories\", locale)).append(\")\");\n+            }\n+            return ppBuf.toString();\n+        }\n+\n         @Override\n         public int hashCode() {\n             final int prime = 31;\n@@ -1138,6 +1180,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n \n@@ -1239,6 +1289,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -1338,6 +1396,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n \n@@ -1452,6 +1518,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -1588,6 +1662,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -1651,6 +1733,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -1745,6 +1835,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -1870,6 +1968,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -1932,6 +2038,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -1976,6 +2090,14 @@ public boolean equals(Object obj) {\n             }\n             return true;\n         }\n+\n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -2020,6 +2142,14 @@ public boolean equals(Object obj) {\n             }\n             return true;\n         }\n+\n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -2126,6 +2256,14 @@ public boolean equals(Object obj) {\n             }\n             return true;\n         }\n+\n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n     }\n \n     @SuppressWarnings(\"serial\")\n@@ -2189,6 +2327,14 @@ public boolean equals(Object obj) {\n             return true;\n         }\n \n+        /* (non-Javadoc)\n+         * @see org.apache.ofbiz.product.product.ProductSearch.ProductSearchConstraint#prettyPrintConstraint(org.apache.ofbiz.service.LocalDispatcher, boolean, java.util.Locale)\n+         */\n+        @Override\n+        public String prettyPrintConstraint(LocalDispatcher dispatcher, boolean detailed, Locale locale) {\n+            return null;\n+        }\n+\n     }\n \n     // ======================================================================",
                "deletions": 0
            },
            {
                "sha": "d4c08a7ca2b75d324e961b77f9af166eccc47f5d",
                "filename": "applications/product/src/main/java/org/apache/ofbiz/product/product/ProductSearchSession.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d9e74e316cb35258559a1b4d1360cb5842e17a5a/applications/product/src/main/java/org/apache/ofbiz/product/product/ProductSearchSession.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d9e74e316cb35258559a1b4d1360cb5842e17a5a/applications/product/src/main/java/org/apache/ofbiz/product/product/ProductSearchSession.java",
                "status": "modified",
                "changes": 24,
                "additions": 22,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/main/java/org/apache/ofbiz/product/product/ProductSearchSession.java?ref=d9e74e316cb35258559a1b4d1360cb5842e17a5a",
                "patch": "@@ -64,6 +64,7 @@\n import org.apache.ofbiz.product.product.ProductSearch.ResultSortOrder;\n import org.apache.ofbiz.product.product.ProductSearch.SortKeywordRelevancy;\n import org.apache.ofbiz.product.store.ProductStoreWorker;\n+import org.apache.ofbiz.service.LocalDispatcher;\n import org.apache.ofbiz.webapp.control.RequestHandler;\n import org.apache.ofbiz.webapp.stats.VisitHandler;\n \n@@ -297,6 +298,25 @@ public void setTopProductCategoryId(String topProductCategoryId) {\n             }\n             return constraintStrings;\n         }\n+        public List<String> searchGetConstraintStrings(boolean detailed, LocalDispatcher dispatcher, Locale locale) {\n+            List<ProductSearchConstraint> productSearchConstraintList = this.getConstraintList();\n+            List<String> constraintStrings = new LinkedList<>();\n+            if (productSearchConstraintList == null) {\n+                return constraintStrings;\n+            }\n+            for (ProductSearchConstraint productSearchConstraint: productSearchConstraintList) {\n+                if (productSearchConstraint == null) {\n+                    continue;\n+                }                \n+                String constraintString = productSearchConstraint.prettyPrintConstraint(dispatcher, detailed, locale);\n+                if (UtilValidate.isNotEmpty(constraintString)) {\n+                    constraintStrings.add(constraintString);\n+                } else {\n+                    constraintStrings.add(\"Description not available\");\n+                }\n+            }\n+            return constraintStrings;\n+        }\n     }\n \n     public static ProductSearchOptions getProductSearchOptions(HttpSession session) {\n@@ -379,7 +399,6 @@ public static String setCurrentSearchFromHistory(HttpServletRequest request, Htt\n     public static final String checkDoKeywordOverride(HttpServletRequest request, HttpServletResponse response) {\n         HttpSession session = request.getSession();\n         Delegator delegator = (Delegator) request.getAttribute(\"delegator\");\n-        Map<String, Object> requestParams = UtilHttp.getParameterMap(request);\n \n         // get the current productStoreId\n         String productStoreId = ProductStoreWorker.getProductStoreId(request);\n@@ -470,7 +489,8 @@ public static void searchClear(HttpSession session) {\n     public static List<String> searchGetConstraintStrings(boolean detailed, HttpSession session, Delegator delegator) {\n         Locale locale = UtilHttp.getLocale(session);\n         ProductSearchOptions productSearchOptions = getProductSearchOptions(session);\n-        return productSearchOptions.searchGetConstraintStrings(detailed, delegator, locale);\n+        LocalDispatcher dispatcher = (LocalDispatcher) session.getAttribute(\"dispatcher\");\n+        return productSearchOptions.searchGetConstraintStrings(detailed, dispatcher, locale);\n     }\n \n     public static String searchGetSortOrderString(boolean detailed, HttpServletRequest request) {",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Uploading images at catalog/control/addImageForProduct does not work\n(OFBIZ-9259)\n\nDelegator was fetched from the context instead of the DispatchContext and thus \nwas throwing NPE while running the EntityUtilProperties.getPropertyValue().\n\nThanks: Devanshu Vyas \n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1801742 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c9cac1eca1f881ff84350d0f522c224dbc4c08ba",
        "parent": "https://github.com/apache/ofbiz-framework/commit/5c158ea08366cf00612d192b7be1fbd8fe29c303",
        "bug_id": "ofbiz-framework_20",
        "file": [
            {
                "sha": "01ac13e76dc3818da261a7b2a3b0f1537629e1ce",
                "filename": "applications/product/src/main/java/org/apache/ofbiz/product/imagemanagement/ImageManagementServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c9cac1eca1f881ff84350d0f522c224dbc4c08ba/applications/product/src/main/java/org/apache/ofbiz/product/imagemanagement/ImageManagementServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c9cac1eca1f881ff84350d0f522c224dbc4c08ba/applications/product/src/main/java/org/apache/ofbiz/product/imagemanagement/ImageManagementServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/main/java/org/apache/ofbiz/product/imagemanagement/ImageManagementServices.java?ref=c9cac1eca1f881ff84350d0f522c224dbc4c08ba",
                "patch": "@@ -337,8 +337,8 @@\n         index = filenameToUse.lastIndexOf(\".\");\n         String imgExtension = filenameToUse.substring(index + 1);\n         // paths\n-        String imageServerPath = FlexibleStringExpander.expandString(EntityUtilProperties.getPropertyValue(\"catalog\", \"image.management.path\", (Delegator) context.get(\"delegator\")), context);\n-        String imageServerUrl = FlexibleStringExpander.expandString(EntityUtilProperties.getPropertyValue(\"catalog\", \"image.management.url\", (Delegator) context.get(\"delegator\")), context);\n+        String imageServerPath = FlexibleStringExpander.expandString(EntityUtilProperties.getPropertyValue(\"catalog\", \"image.management.path\", dctx.getDelegator()), context);\n+        String imageServerUrl = FlexibleStringExpander.expandString(EntityUtilProperties.getPropertyValue(\"catalog\", \"image.management.url\", dctx.getDelegator()), context);\n         \n         \n         /* get original BUFFERED IMAGE */",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: Entity ECA rules throws NPE in case of remove operation.\n(OFBIZ-8001)\n\nThanks: Suraj Khurana for contribution.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1765048 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/83a0ed643c579c91f6fd6c6a6c72960fd65e1d2d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/769aa89ea8eb6276bddef597fd62734084823cf1",
        "bug_id": "ofbiz-framework_21",
        "file": [
            {
                "sha": "d32a37f3eb42b6599766e40ed058d8a45194adce",
                "filename": "framework/entityext/src/main/java/org/apache/ofbiz/entityext/eca/EntityEcaRule.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/83a0ed643c579c91f6fd6c6a6c72960fd65e1d2d/framework/entityext/src/main/java/org/apache/ofbiz/entityext/eca/EntityEcaRule.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/83a0ed643c579c91f6fd6c6a6c72960fd65e1d2d/framework/entityext/src/main/java/org/apache/ofbiz/entityext/eca/EntityEcaRule.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entityext/src/main/java/org/apache/ofbiz/entityext/eca/EntityEcaRule.java?ref=83a0ed643c579c91f6fd6c6a6c72960fd65e1d2d",
                "patch": "@@ -26,6 +26,7 @@\n import java.util.Set;\n \n import org.apache.ofbiz.base.util.Debug;\n+import org.apache.ofbiz.base.util.UtilValidate;\n import org.apache.ofbiz.base.util.UtilXml;\n import org.apache.ofbiz.entity.Delegator;\n import org.apache.ofbiz.entity.GenericEntity;\n@@ -134,8 +135,10 @@ public void eval(String currentOperation, DispatchContext dctx, GenericEntity va\n         if( !fieldsToLoad.isEmpty()) {\n             Delegator delegator = dctx.getDelegator();\n             GenericValue oldValue =  delegator.findOne(entityName, value.getPrimaryKey(), false);\n-            for( String fieldName : fieldsToLoad) {\n-                value.put(fieldName, oldValue.get(fieldName));\n+            if(UtilValidate.isNotEmpty(oldValue)) {\n+                for (String fieldName : fieldsToLoad) {\n+                    value.put(fieldName, oldValue.get(fieldName));\n+                }\n             }\n         }\n ",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Martin Kreidenweis \"NullPointerException in GenericDelegator during testMode rollback\" https://issues.apache.org/jira/browse/OFBIZ-4284\n\nTest mode rollback doesn't work right in GenericDelegator for calls to removeByPrimary() key and removeByValue() when the row to be deleted didn't exist in the first place. It creates a TestOperation with a null value and subsequently fails to create that during rollback.\n\nFirst, the TestOperation shouldn't be created at all. Second, if null is passed to GenericDelegator.create() it tries to handle this, but fails with a NullPointerException.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1104423 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/0bc35e7275431c7317ea803ed573869c799112a6",
        "parent": "https://github.com/apache/ofbiz-framework/commit/baea7adaec4a7b868612b0850075dbc55cfdb830",
        "bug_id": "ofbiz-framework_22",
        "file": [
            {
                "sha": "7f95c0085d3c07c86572919b6f6da1f7ccce52fd",
                "filename": "framework/entity/src/org/ofbiz/entity/GenericDelegator.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0bc35e7275431c7317ea803ed573869c799112a6/framework/entity/src/org/ofbiz/entity/GenericDelegator.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0bc35e7275431c7317ea803ed573869c799112a6/framework/entity/src/org/ofbiz/entity/GenericDelegator.java",
                "status": "modified",
                "changes": 10,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/GenericDelegator.java?ref=0bc35e7275431c7317ea803ed573869c799112a6",
                "patch": "@@ -861,7 +861,7 @@ public GenericValue create(GenericValue value, boolean doCacheClear) throws Gene\n \n             return value;\n         } catch (GenericEntityException e) {\n-            String errMsg = \"Failure in create operation for entity [\" + value.getEntityName() + \"]: \" + e.toString() + \". Rolling back transaction.\";\n+            String errMsg = \"Failure in create operation for entity [\" + (value != null ? value.getEntityName() : \"null\")  + \"]: \" + e.toString() + \". Rolling back transaction.\";\n             Debug.logError(errMsg, module);\n             try {\n                 // only rollback the transaction if we started one...\n@@ -995,7 +995,9 @@ public int removeByPrimaryKey(GenericPK primaryKey, boolean doCacheClear) throws\n             this.saveEntitySyncRemoveInfo(primaryKey);\n \n             if (testMode) {\n-                storeForTestRollback(new TestOperation(OperationType.DELETE, removedEntity));\n+                if (removedEntity != null) {\n+                    storeForTestRollback(new TestOperation(OperationType.DELETE, removedEntity));\n+                }\n             }\n \n             ecaRunner.evalRules(EntityEcaHandler.EV_RETURN, EntityEcaHandler.OP_REMOVE, primaryKey, false);\n@@ -1061,7 +1063,9 @@ public int removeValue(GenericValue value, boolean doCacheClear) throws GenericE\n             int num = helper.removeByPrimaryKey(value.getPrimaryKey());\n \n             if (testMode) {\n-                storeForTestRollback(new TestOperation(OperationType.DELETE, removedValue));\n+                if (removedValue != null) {\n+                    storeForTestRollback(new TestOperation(OperationType.DELETE, removedValue));\n+                }\n             }\n \n             this.saveEntitySyncRemoveInfo(value.getPrimaryKey());",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Avoid potential NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1400574 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/206d159601b1167dcb8c0776f417ad10feee49ba",
        "parent": "https://github.com/apache/ofbiz-framework/commit/675c06a04a3e1693ca2106b09494d5ab397cd4ef",
        "bug_id": "ofbiz-framework_23",
        "file": [
            {
                "sha": "89966e56847fa17b77c2dab2e7e89e9f717c93e9",
                "filename": "framework/entityext/src/org/ofbiz/entityext/permission/EntityPermissionChecker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/206d159601b1167dcb8c0776f417ad10feee49ba/framework/entityext/src/org/ofbiz/entityext/permission/EntityPermissionChecker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/206d159601b1167dcb8c0776f417ad10feee49ba/framework/entityext/src/org/ofbiz/entityext/permission/EntityPermissionChecker.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entityext/src/org/ofbiz/entityext/permission/EntityPermissionChecker.java?ref=206d159601b1167dcb8c0776f417ad10feee49ba",
                "patch": "@@ -801,9 +801,9 @@ public static boolean hasMatch(GenericValue entity, PermissionConditionGetter pe\n      */\n     public static List<String> getUserRoles(GenericValue entity, GenericValue userLogin, Delegator delegator) throws GenericEntityException {\n \n-        String entityName = entity.getEntityName();\n         List<String> roles = FastList.newInstance();\n         if (entity == null) return roles;\n+        String entityName = entity.getEntityName();\n             // TODO: Need to use ContentManagementWorker.getAuthorContent first\n \n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Bug Fix: Added check to avoid NPE if result-to-result is true.\nIf we set result-to-result true then for some cases actionResult may be empty so it throws an NPE action while executing eca action. Thanks Deepak.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1455407 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8c62ee7787e2feb95d2377bfc5a22888c538077f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/56323a459bc4b116872709329f21813f97eb9205",
        "bug_id": "ofbiz-framework_24",
        "file": [
            {
                "sha": "a0b1004639922699e33e9ad9fabd371f30c2ea21",
                "filename": "framework/service/src/org/ofbiz/service/eca/ServiceEcaAction.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8c62ee7787e2feb95d2377bfc5a22888c538077f/framework/service/src/org/ofbiz/service/eca/ServiceEcaAction.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8c62ee7787e2feb95d2377bfc5a22888c538077f/framework/service/src/org/ofbiz/service/eca/ServiceEcaAction.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/service/src/org/ofbiz/service/eca/ServiceEcaAction.java?ref=8c62ee7787e2feb95d2377bfc5a22888c538077f",
                "patch": "@@ -191,7 +191,7 @@ public boolean runAction(String selfService, DispatchContext dctx, Map<String, O\n         }\n \n         // copy/combine error messages on error/failure (!success) or on resultToResult to combine any error info coming out, regardless of success status\n-        if (!success || resultToResult) {\n+        if ((!success || resultToResult) && UtilValidate.isNotEmpty(actionResult)) {\n             String errorMessage = (String) actionResult.get(ModelService.ERROR_MESSAGE);\n             String failMessage = (String) actionResult.get(\"failMessage\");\n             List<? extends Object> errorMessageList = UtilGenerics.checkList(actionResult.get(ModelService.ERROR_MESSAGE_LIST));",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Prevent potential NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@982117 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/9584101183f8734792738a1243248bdbe80df9b2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2ea51771c245bb6ee26d0c4fb39cfb9c24b5ef85",
        "bug_id": "ofbiz-framework_25",
        "file": [
            {
                "sha": "5fbcc46c76bedbc61dae4df971b8e266f7b601ff",
                "filename": "applications/party/src/org/ofbiz/party/party/PartyWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/9584101183f8734792738a1243248bdbe80df9b2/applications/party/src/org/ofbiz/party/party/PartyWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/9584101183f8734792738a1243248bdbe80df9b2/applications/party/src/org/ofbiz/party/party/PartyWorker.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/src/org/ofbiz/party/party/PartyWorker.java?ref=9584101183f8734792738a1243248bdbe80df9b2",
                "patch": "@@ -97,7 +97,7 @@ public static String createClubId(Delegator delegator, String prefix, int length\n \n         // generate the sequenced number and pad\n         Long seq = delegator.getNextSeqIdLong(clubSeqName);\n-        clubId = clubId + UtilFormatOut.formatPaddedNumber(seq.longValue(), (length - prefix.length() - 1));\n+        clubId = clubId + UtilFormatOut.formatPaddedNumber(seq.longValue(), (length - clubId.length() - 1));\n \n         // get the check digit\n         int check = UtilValidate.getLuhnCheckDigit(clubId);",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix possible NPEs\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@890050 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/88a1d75b8181bd6c2e4baf3c269726b1d4d7b24e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c391d93d0f56a2388774b00c6fb96931d077e5b4",
        "bug_id": "ofbiz-framework_26",
        "file": [
            {
                "sha": "0b57fafa5cb0c93421a9013b867bfc3a9cce31f5",
                "filename": "specialpurpose/pos/src/org/ofbiz/pos/PosTransaction.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/88a1d75b8181bd6c2e4baf3c269726b1d4d7b24e/specialpurpose/pos/src/org/ofbiz/pos/PosTransaction.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/88a1d75b8181bd6c2e4baf3c269726b1d4d7b24e/specialpurpose/pos/src/org/ofbiz/pos/PosTransaction.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/pos/src/org/ofbiz/pos/PosTransaction.java?ref=88a1d75b8181bd6c2e4baf3c269726b1d4d7b24e",
                "patch": "@@ -433,7 +433,7 @@ public boolean isAggregatedItem(String productId) {\n             Delegator delegator = cart.getDelegator();\n             GenericValue product = null;\n             product = delegator.findByPrimaryKeyCache(\"Product\", UtilMisc.toMap(\"productId\", productId));\n-            if (\"AGGREGATED\".equals(product.getString(\"productTypeId\"))) {\n+            if (UtilValidate.isNotEmpty(product) && \"AGGREGATED\".equals(product.getString(\"productTypeId\"))) {\n                 return true;\n             }\n         } catch (GenericEntityException e) {\n@@ -492,7 +492,7 @@ public void addItem(String productId, BigDecimal quantity) throws CartItemModify\n             GenericValue product = null;\n             ProductConfigWrapper pcw = null;\n             product = delegator.findByPrimaryKeyCache(\"Product\", UtilMisc.toMap(\"productId\", productId));\n-            if (\"AGGREGATED\".equals(product.getString(\"productTypeId\"))) {\n+            if (UtilValidate.isNotEmpty(product) && \"AGGREGATED\".equals(product.getString(\"productTypeId\"))) {\n                 // if it's an aggregated item, load the configwrapper and set to defaults\n                 pcw = new ProductConfigWrapper(delegator, session.getDispatcher(), productId, null, null, null, null, null, null);\n                 pcw.setDefaultConfig();",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@807955 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c49e567b1d43e6978045d4eab4f0aff4c1342fdf",
        "parent": "https://github.com/apache/ofbiz-framework/commit/d343f704b4e8043f51142da0fc221605fbf6ec19",
        "bug_id": "ofbiz-framework_27",
        "file": [
            {
                "sha": "b4d97d9466fbe51324a0d3ee3841c83181b77130",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c49e567b1d43e6978045d4eab4f0aff4c1342fdf/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c49e567b1d43e6978045d4eab4f0aff4c1342fdf/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "status": "modified",
                "changes": 20,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java?ref=c49e567b1d43e6978045d4eab4f0aff4c1342fdf",
                "patch": "@@ -953,12 +953,14 @@ public static Map createProductionRunTaskCosts(DispatchContext ctx, Map context)\n             double actualTotalMilliSeconds = 0.0;\n             Double actualSetupMillis = workEffort.getDouble(\"actualSetupMillis\");\n             Double actualMilliSeconds = workEffort.getDouble(\"actualMilliSeconds\");\n-            if (actualSetupMillis != null) {\n-                actualTotalMilliSeconds += actualSetupMillis.doubleValue();\n+            if (actualSetupMillis == null) {\n+                actualSetupMillis = new Double(0.0);\n             }\n-            if (actualMilliSeconds != null) {\n-                actualTotalMilliSeconds += actualMilliSeconds.doubleValue();\n+            if (actualMilliSeconds == null) {\n+                actualMilliSeconds = new Double(0.0);\n             }\n+            actualTotalMilliSeconds += actualSetupMillis.doubleValue();\n+            actualTotalMilliSeconds += actualMilliSeconds.doubleValue();\n             // Get the template (aka routing task) of the work effort\n             GenericValue routingTaskAssoc = EntityUtil.getFirst(EntityUtil.filterByDate(delegator.findByAnd(\"WorkEffortAssoc\",\n                                                             UtilMisc.toMap(\"workEffortIdTo\", productionRunTaskId,\n@@ -1027,7 +1029,15 @@ public static Map createProductionRunTaskCosts(DispatchContext ctx, Map context)\n                 GenericValue usageCost = EntityUtil.getFirst(EntityUtil.filterByDate(usageCosts));\n                 if (UtilValidate.isNotEmpty(setupCost) || UtilValidate.isNotEmpty(usageCost)) {\n                     String currencyUomId = (setupCost != null? setupCost.getString(\"amountUomId\"): usageCost.getString(\"amountUomId\"));\n-                    BigDecimal fixedAssetCost = (setupCost.getBigDecimal(\"amount\").multiply(BigDecimal.valueOf(actualSetupMillis.doubleValue()))).add(usageCost.getBigDecimal(\"amount\").multiply(BigDecimal.valueOf(actualMilliSeconds.doubleValue()))).setScale(decimals, rounding);\n+                    BigDecimal setupCostAmount = ZERO;\n+                    if (setupCost != null) {\n+                        setupCostAmount = setupCost.getBigDecimal(\"amount\").multiply(BigDecimal.valueOf(actualSetupMillis.doubleValue()));\n+                    }\n+                    BigDecimal usageCostAmount = ZERO;\n+                    if (usageCost != null) {\n+                        usageCostAmount = usageCost.getBigDecimal(\"amount\").multiply(BigDecimal.valueOf(actualMilliSeconds.doubleValue()));\n+                    }\n+                    BigDecimal fixedAssetCost = setupCostAmount.add(usageCostAmount).setScale(decimals, rounding);\n                     fixedAssetCost = fixedAssetCost.divide(BigDecimal.valueOf(3600000), decimals, rounding);\n                     // store the cost\n                     Map inMap = UtilMisc.toMap(\"userLogin\", userLogin, \"workEffortId\", productionRunTaskId);",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@802346 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/226256c0d762154ae4b23ca3e56e5cfd3d7bba80",
        "parent": "https://github.com/apache/ofbiz-framework/commit/79a0acba3e4dee29603bf8b7c0dfeaaac649644f",
        "bug_id": "ofbiz-framework_28",
        "file": [
            {
                "sha": "af23510f3efc2194f8c1da9ffc9b9ffe528d4ab8",
                "filename": "applications/product/webapp/catalog/store/EditProductStoreSurveys.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/226256c0d762154ae4b23ca3e56e5cfd3d7bba80/applications/product/webapp/catalog/store/EditProductStoreSurveys.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/226256c0d762154ae4b23ca3e56e5cfd3d7bba80/applications/product/webapp/catalog/store/EditProductStoreSurveys.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/catalog/store/EditProductStoreSurveys.ftl?ref=226256c0d762154ae4b23ca3e56e5cfd3d7bba80",
                "patch": "@@ -42,7 +42,7 @@ under the License.\n                 <td><a href=\"/content/control/EditSurvey?surveyId=${storeSurvey.surveyId}\" class=\"buttontext\">${survey.description?default(\"[\" + survey.surveyId + \"]\")}</a>\n                 <td>${storeSurvey.productId?default(\"${uiLabelMap.CommonNA}\")}</td>\n                 <td>${storeSurvey.productCategoryId?default(\"${uiLabelMap.CommonNA}\")}</td>\n-                <td>${storeSurvey.fromDate?string}</td>\n+                <td>${storeSurvey.fromDate?if_exists?string}</td>\n                 <td>${storeSurvey.sequenceNum?if_exists}</td>\n                 <td>\n                   <form name=\"deleteProductStoreSurveyAppl_${storeSurvey_index}\" method=\"post\" action=\"<@ofbizUrl>deleteProductStoreSurveyAppl</@ofbizUrl>\">",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@790133 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/bd798d8cfd70565463f1e6df664d0db6b6751d21",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c6a16491077e92b77c310d13126333988b4d855c",
        "bug_id": "ofbiz-framework_29",
        "file": [
            {
                "sha": "c7a291783285b6832b7a6f9ba5a3133ff98623e8",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/bd798d8cfd70565463f1e6df664d0db6b6751d21/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/bd798d8cfd70565463f1e6df664d0db6b6751d21/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java?ref=bd798d8cfd70565463f1e6df664d0db6b6751d21",
                "patch": "@@ -3458,7 +3458,9 @@ public List makeOrderItems(boolean explodeItems, boolean replaceAggregatedId, Lo\n                 orderItem.set(\"shipAfterDate\", item.getShipAfterDate());\n                 orderItem.set(\"estimatedShipDate\", item.getEstimatedShipDate());\n                 orderItem.set(\"cancelBackOrderDate\", item.getCancelBackOrderDate());\n-                orderItem.set(\"changeByUserLoginId\", this.getUserLogin().get(\"userLoginId\"));\n+                if (this.getUserLogin() != null) {\n+                    orderItem.set(\"changeByUserLoginId\", this.getUserLogin().get(\"userLoginId\"));\n+                }\n \n                 String fromInventoryItemId = (String) item.getAttribute(\"fromInventoryItemId\");\n                 if (fromInventoryItemId != null) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@784563 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/196b6a1c91e72f54b316449dc4550383e5fa521b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a128dc94d1f00c4c53a425650f0595bfe287b53b",
        "bug_id": "ofbiz-framework_30",
        "file": [
            {
                "sha": "e6afde09752930a1ae875ac2312ad7bb2f044355",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/mrp/MrpServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/196b6a1c91e72f54b316449dc4550383e5fa521b/applications/manufacturing/src/org/ofbiz/manufacturing/mrp/MrpServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/196b6a1c91e72f54b316449dc4550383e5fa521b/applications/manufacturing/src/org/ofbiz/manufacturing/mrp/MrpServices.java",
                "status": "modified",
                "changes": 46,
                "additions": 24,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/mrp/MrpServices.java?ref=196b6a1c91e72f54b316449dc4550383e5fa521b",
                "patch": "@@ -461,30 +461,32 @@ public static Map initMrpEvents(DispatchContext ctx, Map context) {\n             } catch (GenericEntityException e) {\n                 return ServiceUtil.returnError(\"Problem, we can not find CustomTimePeriod, for more detail look at the log\");\n             }\n-            if (customTimePeriod.getDate(\"thruDate\") != null && customTimePeriod.getDate(\"thruDate\").before(UtilDateTime.nowDate())) {\n-                continue;\n-            } else {\n-                List salesForecastDetails = null;\n-                Iterator sfdIter = null;\n-                try {\n-                    salesForecastDetails = delegator.findByAnd(\"SalesForecastDetail\", UtilMisc.toMap(\"salesForecastId\", genericResult.getString(\"salesForecastId\")));\n-                } catch (GenericEntityException e) {\n-                    return ServiceUtil.returnError(\"Problem, we can not find SalesForecastDetails, for more detail look at the log\");\n-                }\n-                sfdIter = salesForecastDetails.iterator();\n-                while (sfdIter.hasNext()) {\n-                    genericResult = (GenericValue) sfdIter.next();\n-                    String productId =  genericResult.getString(\"productId\");\n-                    BigDecimal eventQuantityTmp = genericResult.getBigDecimal(\"quantity\");\n-                    if (productId == null || eventQuantityTmp == null) {\n-                        continue;\n-                    }\n-                    eventQuantityTmp = eventQuantityTmp.negate();\n-                    parameters = UtilMisc.toMap(\"mrpId\", mrpId, \"productId\", productId, \"eventDate\", customTimePeriod.getDate(\"fromDate\"), \"mrpEventTypeId\", \"SALES_FORECAST\");\n+            if (customTimePeriod != null) {\n+                if (customTimePeriod.getDate(\"thruDate\") != null && customTimePeriod.getDate(\"thruDate\").before(UtilDateTime.nowDate())) {\n+                    continue;\n+                } else {\n+                    List salesForecastDetails = null;\n+                    Iterator sfdIter = null;\n                     try {\n-                        InventoryEventPlannedServices.createOrUpdateMrpEvent(parameters, eventQuantityTmp, null, genericResult.getString(\"salesForecastDetailId\"), false, delegator);\n+                        salesForecastDetails = delegator.findByAnd(\"SalesForecastDetail\", UtilMisc.toMap(\"salesForecastId\", genericResult.getString(\"salesForecastId\")));\n                     } catch (GenericEntityException e) {\n-                        return ServiceUtil.returnError(\"Problem initializing the MrpEvent entity (SalesForecastDetail)\");\n+                        return ServiceUtil.returnError(\"Problem, we can not find SalesForecastDetails, for more detail look at the log\");\n+                    }\n+                    sfdIter = salesForecastDetails.iterator();\n+                    while (sfdIter.hasNext()) {\n+                        genericResult = (GenericValue) sfdIter.next();\n+                        String productId =  genericResult.getString(\"productId\");\n+                        BigDecimal eventQuantityTmp = genericResult.getBigDecimal(\"quantity\");\n+                        if (productId == null || eventQuantityTmp == null) {\n+                            continue;\n+                        }\n+                        eventQuantityTmp = eventQuantityTmp.negate();\n+                        parameters = UtilMisc.toMap(\"mrpId\", mrpId, \"productId\", productId, \"eventDate\", customTimePeriod.getDate(\"fromDate\"), \"mrpEventTypeId\", \"SALES_FORECAST\");\n+                        try {\n+                            InventoryEventPlannedServices.createOrUpdateMrpEvent(parameters, eventQuantityTmp, null, genericResult.getString(\"salesForecastDetailId\"), false, delegator);\n+                        } catch (GenericEntityException e) {\n+                            return ServiceUtil.returnError(\"Problem initializing the MrpEvent entity (SalesForecastDetail)\");\n+                        }\n                     }\n                 }\n             }",
                "deletions": 22
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@784557 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3f693d0e89a7a0176a24225a31a38b25971ed35f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/688d0599800eecf80f607113f4a10a15658f928e",
        "bug_id": "ofbiz-framework_31",
        "file": [
            {
                "sha": "3d3018e70906adb6e714c51c9e61917a7f949713",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/mrp/MrpServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3f693d0e89a7a0176a24225a31a38b25971ed35f/applications/manufacturing/src/org/ofbiz/manufacturing/mrp/MrpServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3f693d0e89a7a0176a24225a31a38b25971ed35f/applications/manufacturing/src/org/ofbiz/manufacturing/mrp/MrpServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/mrp/MrpServices.java?ref=3f693d0e89a7a0176a24225a31a38b25971ed35f",
                "patch": "@@ -461,7 +461,7 @@ public static Map initMrpEvents(DispatchContext ctx, Map context) {\n             } catch (GenericEntityException e) {\n                 return ServiceUtil.returnError(\"Problem, we can not find CustomTimePeriod, for more detail look at the log\");\n             }\n-            if (customTimePeriod.getDate(\"thruDate\").before(UtilDateTime.nowDate())) {\n+            if (customTimePeriod.getDate(\"thruDate\") != null && customTimePeriod.getDate(\"thruDate\").before(UtilDateTime.nowDate())) {\n                 continue;\n             } else {\n                 List salesForecastDetails = null;",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "NPE fix\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@688296 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/eb425ac4478c2f804fdb3319cc2689005b1c423c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/61db4e6370c080f8a1c662360801be4035915768",
        "bug_id": "ofbiz-framework_32",
        "file": [
            {
                "sha": "fa8f3ee3c1b1c47625f66516c26257fa1fc4b463",
                "filename": "framework/base/src/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/eb425ac4478c2f804fdb3319cc2689005b1c423c/framework/base/src/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/eb425ac4478c2f804fdb3319cc2689005b1c423c/framework/base/src/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "status": "modified",
                "changes": 16,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/org/ofbiz/base/util/string/FlexibleStringExpander.java?ref=eb425ac4478c2f804fdb3319cc2689005b1c423c",
                "patch": "@@ -120,18 +120,22 @@ public String expandString(Map<String, ? extends Object> context, TimeZone timeZ\n             return this.orig == null ? \"\" : this.orig;\n         }\n         if (locale == null) {\n-            locale = (Locale) context.get(\"locale\");\n-            if (locale == null && context.containsKey(\"autoUserLogin\")) {\n-                locale = UtilMisc.ensureLocale(((Map) context.get(\"autoUserLogin\")).get(\"lastLocale\"));\n+            if (context != null) {\n+                locale = (Locale) context.get(\"locale\");\n+                if (locale == null && context.containsKey(\"autoUserLogin\")) {\n+                    locale = UtilMisc.ensureLocale(((Map) context.get(\"autoUserLogin\")).get(\"lastLocale\"));\n+                }\n             }\n             if (locale == null) {\n                 locale = Locale.getDefault();\n             }\n         }\n         if (timeZone == null) {\n-            timeZone = (TimeZone) context.get(\"timeZone\");\n-            if (timeZone == null && context.containsKey(\"autoUserLogin\")) {\n-                timeZone = UtilDateTime.toTimeZone((String)((Map) context.get(\"autoUserLogin\")).get(\"lastTimeZone\"));\n+            if (context != null) {\n+                timeZone = (TimeZone) context.get(\"timeZone\");\n+                if (timeZone == null && context.containsKey(\"autoUserLogin\")) {\n+                    timeZone = UtilDateTime.toTimeZone((String)((Map) context.get(\"autoUserLogin\")).get(\"lastTimeZone\"));\n+                }\n             }\n             if (timeZone == null) {\n                 timeZone = TimeZone.getDefault();",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@663508 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/71844a5c033ca4e8a1f714d3d17edddcca37bf3f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/31f94919b777e5c11b90ea85e40d5a968f4e0d20",
        "bug_id": "ofbiz-framework_33",
        "file": [
            {
                "sha": "d66f7c9fdb7e9ba56553ffc47ce4ba0469eec5fb",
                "filename": "applications/order/webapp/ordermgr/return/returnReportBody.fo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/71844a5c033ca4e8a1f714d3d17edddcca37bf3f/applications/order/webapp/ordermgr/return/returnReportBody.fo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/71844a5c033ca4e8a1f714d3d17edddcca37bf3f/applications/order/webapp/ordermgr/return/returnReportBody.fo.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/return/returnReportBody.fo.ftl?ref=71844a5c033ca4e8a1f714d3d17edddcca37bf3f",
                "patch": "@@ -67,7 +67,7 @@ under the License.\n                     <#if returnItem.orderItemSeqId?exists>${returnItem.getRelatedOne(\"OrderItem\").getString(\"productId\")}</#if>\n                   </fo:block>\n                 </fo:table-cell>\n-                <fo:table-cell padding=\"1mm\"><fo:block wrap-option=\"wrap\">${returnItem.description}</fo:block></fo:table-cell>\n+                <fo:table-cell padding=\"1mm\"><fo:block wrap-option=\"wrap\">${returnItem.description?if_exists}</fo:block></fo:table-cell>\n                 <fo:table-cell padding=\"1mm\" text-align=\"right\"><fo:block>${returnItem.returnQuantity}</fo:block></fo:table-cell>\n                 <fo:table-cell padding=\"1mm\" text-align=\"right\"><fo:block><@ofbizCurrency amount=returnItem.returnPrice isoCode=returnHeader.currencyUomId/></fo:block></fo:table-cell>\n                 <fo:table-cell padding=\"1mm\" text-align=\"right\"><fo:block><@ofbizCurrency amount=(returnItem.returnPrice * returnItem.returnQuantity) isoCode=returnHeader.currencyUomId/></fo:block></fo:table-cell>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@653787 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/1250513a380aaf0df8538ca3d4107627cea8dea2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/bcb3c41d8ec2dc356af72ae4e370589a0f1f0e21",
        "bug_id": "ofbiz-framework_34",
        "file": [
            {
                "sha": "33c10ea9ee663ff7d27d8d42e3d581b0d7f0507c",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartHelper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1250513a380aaf0df8538ca3d4107627cea8dea2/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartHelper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1250513a380aaf0df8538ca3d4107627cea8dea2/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartHelper.java",
                "status": "modified",
                "changes": 22,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartHelper.java?ref=1250513a380aaf0df8538ca3d4107627cea8dea2",
                "patch": "@@ -950,18 +950,20 @@ public Map selectAgreement(String agreementId) {\n             // set the agreement id in the cart\n             cart.setAgreementId(agreementId);\n             try {\n-                 // set the currency based on the pricing agreement\n-                 List agreementItems = agreement.getRelated(\"AgreementItem\", UtilMisc.toMap(\"agreementItemTypeId\", \"AGREEMENT_PRICING_PR\"), null);\n-                 if (agreementItems.size() > 0) {\n-                       GenericValue agreementItem = (GenericValue) agreementItems.get(0);\n-                       String currencyUomId = (String) agreementItem.get(\"currencyUomId\");\n-                       try {\n+                // set the currency based on the pricing agreement\n+                List agreementItems = agreement.getRelated(\"AgreementItem\", UtilMisc.toMap(\"agreementItemTypeId\", \"AGREEMENT_PRICING_PR\"), null);\n+                if (agreementItems.size() > 0) {\n+                    GenericValue agreementItem = (GenericValue) agreementItems.get(0);\n+                    String currencyUomId = (String) agreementItem.get(\"currencyUomId\");\n+                    if (UtilValidate.isNotEmpty(currencyUomId)) {\n+                        try {\n                             cart.setCurrency(dispatcher,currencyUomId);\n-                       } catch (CartItemModifyException ex) {\n-                           result = ServiceUtil.returnError(UtilProperties.getMessage(resource_error,\"OrderSetCurrencyError\",this.cart.getLocale()) + ex.getMessage());\n+                        } catch (CartItemModifyException ex) {\n+                            result = ServiceUtil.returnError(UtilProperties.getMessage(resource_error,\"OrderSetCurrencyError\",this.cart.getLocale()) + ex.getMessage());\n                             return result;\n-                       }\n-                 }\n+                        }\n+                    }\n+                }\n             } catch (GenericEntityException e) {\n                 Debug.logWarning(e.toString(), module);\n                 result = ServiceUtil.returnError(UtilProperties.getMessage(resource_error,\"OrderCouldNotGetAgreementItemsThrough\",UtilMisc.toMap(\"agreementId\",agreementId),this.cart.getLocale()) + UtilProperties.getMessage(resource_error,\"OrderError\",this.cart.getLocale()) + e.getMessage());",
                "deletions": 10
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@585907 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d351c67cb3ec9af87e46521da3a2492fc99830fd",
        "parent": "https://github.com/apache/ofbiz-framework/commit/989624f0f59f5c90589c8173fa8b647bc2b0a451",
        "bug_id": "ofbiz-framework_35",
        "file": [
            {
                "sha": "5b7bbdfa3fc4c8a5ebf5d0c1504abd31cb83f4fb",
                "filename": "applications/accounting/src/org/ofbiz/accounting/payment/BillingAccountWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d351c67cb3ec9af87e46521da3a2492fc99830fd/applications/accounting/src/org/ofbiz/accounting/payment/BillingAccountWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d351c67cb3ec9af87e46521da3a2492fc99830fd/applications/accounting/src/org/ofbiz/accounting/payment/BillingAccountWorker.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/payment/BillingAccountWorker.java?ref=d351c67cb3ec9af87e46521da3a2492fc99830fd",
                "patch": "@@ -157,7 +157,8 @@ public static BigDecimal getBillingAccountBalance(GenericValue billingAccount) t\n         if (orderPaymentPreferenceSums != null) {\n             for (Iterator oppsi = orderPaymentPreferenceSums.iterator(); oppsi.hasNext(); ) {\n                 GenericValue orderPaymentPreferenceSum = (GenericValue) oppsi.next();\n-                balance = balance.subtract(orderPaymentPreferenceSum.getBigDecimal(\"maxAmount\"));\n+                BigDecimal maxAmount = orderPaymentPreferenceSum.getBigDecimal(\"maxAmount\");\n+                balance = maxAmount != null ? balance.subtract(maxAmount) : balance;\n             }\n         }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@539730 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e3e24ee8b2c5a29d8b722ff47c5ec845b6af61a9",
        "parent": "https://github.com/apache/ofbiz-framework/commit/5f4c38377ada26bbd76ad75eb35a399d2f4fef71",
        "bug_id": "ofbiz-framework_36",
        "file": [
            {
                "sha": "f8a7dd6ad75174055abac7e3f799ce636ba0eca4",
                "filename": "applications/product/src/org/ofbiz/shipment/shipment/ShipmentServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e3e24ee8b2c5a29d8b722ff47c5ec845b6af61a9/applications/product/src/org/ofbiz/shipment/shipment/ShipmentServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e3e24ee8b2c5a29d8b722ff47c5ec845b6af61a9/applications/product/src/org/ofbiz/shipment/shipment/ShipmentServices.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/shipment/shipment/ShipmentServices.java?ref=e3e24ee8b2c5a29d8b722ff47c5ec845b6af61a9",
                "patch": "@@ -214,6 +214,9 @@ public static Map calcShipmentCostEstimate(DispatchContext dctx, Map context) {\n         if (shippableWeight == null) {\n             shippableWeight = new Double(0.00);\n         }\n+        if (initialEstimateAmt == null) {\n+            initialEstimateAmt = new Double(0.00);\n+        }\n \n         // get the ShipmentCostEstimate(s)\n         Map estFields = UtilMisc.toMap(\"productStoreId\", productStoreId, \"shipmentMethodTypeId\", shipmentMethodTypeId,\n@@ -227,7 +230,7 @@ public static Map calcShipmentCostEstimate(DispatchContext dctx, Map context) {\n             return ServiceUtil.returnError(\"Unable to locate estimates from database\");\n         }\n         if (estimates == null || estimates.size() < 1) {\n-            if (initialEstimateAmt == null || initialEstimateAmt.doubleValue() == 0.00) {\n+            if (initialEstimateAmt.doubleValue() == 0.00) {\n                 Debug.logWarning(\"Using the passed context : \" + context, module);\n                 Debug.logWarning(\"No shipping estimates found; the shipping amount returned is 0!\", module);\n             }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@527075 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/4b74390ad1328caecaac1e633adab1992adafb62",
        "parent": "https://github.com/apache/ofbiz-framework/commit/7783507c10206db7aff7383dfdb0bab84aa09191",
        "bug_id": "ofbiz-framework_37",
        "file": [
            {
                "sha": "eb062e7045c593cc5152d2cd028cb529ab370298",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/4b74390ad1328caecaac1e633adab1992adafb62/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/4b74390ad1328caecaac1e633adab1992adafb62/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java?ref=4b74390ad1328caecaac1e633adab1992adafb62",
                "patch": "@@ -510,14 +510,14 @@ public static Map changeProductionRunStatus(DispatchContext ctx, Map context) {\n         }\n         String currentStatusId = productionRun.getGenericValue().getString(\"currentStatusId\");\n         \n-        if (statusId != null && currentStatusId.equals(statusId)) {\n+        if (currentStatusId.equals(statusId)) {\n             result.put(\"newStatusId\", currentStatusId);\n             result.put(ModelService.SUCCESS_MESSAGE, UtilProperties.getMessage(resource, \"ManufacturingProductionRunStatusChanged\",UtilMisc.toMap(\"newStatusId\", currentStatusId), locale));\n             return result;\n         }\n \n         // PRUN_CREATED --> PRUN_SCHEDULED\n-        if (currentStatusId.equals(\"PRUN_CREATED\") && statusId.equals(\"PRUN_SCHEDULED\")) {\n+        if (currentStatusId.equals(\"PRUN_CREATED\") && (statusId != null && statusId.equals(\"PRUN_SCHEDULED\"))) {\n             // change the production run status to PRUN_SCHEDULED\n             Map serviceContext = new HashMap();\n             serviceContext.clear();",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@510827 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/bcb1d6efe7553475ec21bf95da3b1f70e592a2d9",
        "parent": "https://github.com/apache/ofbiz-framework/commit/11cf00dafaf2e2e872ad0fbc1ce9d8fab09f9cbc",
        "bug_id": "ofbiz-framework_38",
        "file": [
            {
                "sha": "723800dbcb9f01d71e9f6be024fc6df29b06532a",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/requirement/ApprovedProductRequirements.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/bcb1d6efe7553475ec21bf95da3b1f70e592a2d9/applications/order/webapp/ordermgr/WEB-INF/actions/requirement/ApprovedProductRequirements.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/bcb1d6efe7553475ec21bf95da3b1f70e592a2d9/applications/order/webapp/ordermgr/WEB-INF/actions/requirement/ApprovedProductRequirements.bsh",
                "status": "modified",
                "changes": 8,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/requirement/ApprovedProductRequirements.bsh?ref=bcb1d6efe7553475ec21bf95da3b1f70e592a2d9",
                "patch": "@@ -20,6 +20,8 @@\n import org.ofbiz.base.util.UtilMisc;\n \n prepare = dispatcher.runSync(\"prepareFind\", UtilMisc.toMap(\"inputFields\", parameters, \"entityName\", \"Requirement\"));\n-results = dispatcher.runSync(\"getRequirementsForSupplier\", UtilMisc.toMap(\"requirementConditions\", prepare.get(\"entityConditionList\"), \"partyId\", parameters.get(\"partyId\")));\n-context.put(\"requirementsForSupplier\", results.get(\"requirementsForSupplier\"));\n-context.put(\"quantityReport\", UtilMisc.toMap(\"distinctProductCount\", results.get(\"distinctProductCount\"), \"quantityTotal\", results.get(\"quantityTotal\")));\n+if (prepare.get(\"entityConditionList\") != null) {\n+\tresults = dispatcher.runSync(\"getRequirementsForSupplier\", UtilMisc.toMap(\"requirementConditions\", prepare.get(\"entityConditionList\"), \"partyId\", parameters.get(\"partyId\")));\n+\tcontext.put(\"requirementsForSupplier\", results.get(\"requirementsForSupplier\"));\n+\tcontext.put(\"quantityReport\", UtilMisc.toMap(\"distinctProductCount\", results.get(\"distinctProductCount\"), \"quantityTotal\", results.get(\"quantityTotal\")));\n+}",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@469867 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e4e6b86f51b0838b31dc0a5d60d693f24c9e64a2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1c81b724ef20f3d152bfdbb237bb67089132ea31",
        "bug_id": "ofbiz-framework_39",
        "file": [
            {
                "sha": "a7995a5ddc71428ac654dea0603c0f4dbde78e9d",
                "filename": "applications/order/webapp/ordermgr/return/returnItems.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e4e6b86f51b0838b31dc0a5d60d693f24c9e64a2/applications/order/webapp/ordermgr/return/returnItems.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e4e6b86f51b0838b31dc0a5d60d693f24c9e64a2/applications/order/webapp/ordermgr/return/returnItems.ftl",
                "status": "modified",
                "changes": 6,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/return/returnItems.ftl?ref=e4e6b86f51b0838b31dc0a5d60d693f24c9e64a2",
                "patch": "@@ -185,7 +185,11 @@ under the License.\n             </div></td>\n         <td><div class=\"tabletext\">\n           <#if readOnly>\n-              ${status.get(\"description\",locale)?default(\"N/A\")}\n+              <#if status?has_content>\n+              ${status.get(\"description\",locale)}\n+              <#else>\n+              N/A\n+              </#if>\n           <#else>\n               <select name=\"expectedItemStatus_o_${rowCount}\"  class='selectBox'>\n                   <#if (status?has_content)>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE in widget model toString() method.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1662119 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/eb7283f61d937cefd21305b484872367d8c4cecf",
        "parent": "https://github.com/apache/ofbiz-framework/commit/ade55003217f514cffbdd910c02f269a68f7741b",
        "bug_id": "ofbiz-framework_40",
        "file": [
            {
                "sha": "f534c32b46b3904156a8b8410788fd92f80cb7c4",
                "filename": "framework/widget/src/org/ofbiz/widget/model/XmlWidgetFieldVisitor.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/eb7283f61d937cefd21305b484872367d8c4cecf/framework/widget/src/org/ofbiz/widget/model/XmlWidgetFieldVisitor.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/eb7283f61d937cefd21305b484872367d8c4cecf/framework/widget/src/org/ofbiz/widget/model/XmlWidgetFieldVisitor.java",
                "status": "modified",
                "changes": 74,
                "additions": 38,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/model/XmlWidgetFieldVisitor.java?ref=eb7283f61d937cefd21305b484872367d8c4cecf",
                "patch": "@@ -335,42 +335,44 @@ private void visitFieldInfoWithOptions(FieldInfoWithOptions fieldInfo) throws Ex\n     }\r\n \r\n     private void visitModelField(ModelFormField modelField) throws Exception {\r\n-        writer.append(\"<field\");\r\n-        visitAttribute(\"name\", modelField.getName());\r\n-        visitAttribute(\"action\", modelField.getAction());\r\n-        visitAttribute(\"attribute-name\", modelField.getAttributeName());\r\n-        visitAttribute(\"encode-output\", modelField.getEncodeOutput());\r\n-        visitAttribute(\"entity-name\", modelField.getEntityName());\r\n-        visitAttribute(\"entry-name\", modelField.getEntryName());\r\n-        visitAttribute(\"event\", modelField.getEvent());\r\n-        visitAttribute(\"field-name\", modelField.getFieldName());\r\n-        visitAttribute(\"header-link\", modelField.getHeaderLink());\r\n-        visitAttribute(\"header-link-style\", modelField.getHeaderLinkStyle());\r\n-        visitAttribute(\"id-name\", modelField.getIdName());\r\n-        visitAttribute(\"map-name\", modelField.getMapName());\r\n-        visitAttribute(\"parameter-name\", modelField.getParameterName());\r\n-        visitAttribute(\"position\", modelField.getPosition());\r\n-        visitAttribute(\"red-when\", modelField.getRedWhen());\r\n-        visitAttribute(\"required-field\", modelField.getRequiredField());\r\n-        visitAttribute(\"required-field-style\", modelField.getRequiredFieldStyle());\r\n-        visitAttribute(\"separate-column\", modelField.getSeparateColumn());\r\n-        visitAttribute(\"service-name\", modelField.getServiceName());\r\n-        visitAttribute(\"sort-field\", modelField.getSortField());\r\n-        visitAttribute(\"sort-field-asc-style\", modelField.getSortFieldAscStyle());\r\n-        visitAttribute(\"sort-field-desc-style\", modelField.getSortFieldDescStyle());\r\n-        visitAttribute(\"sort-field-help-text\", modelField.getSortFieldHelpText());\r\n-        visitAttribute(\"sort-field-style\", modelField.getSortFieldStyle());\r\n-        visitAttribute(\"title\", modelField.getTitle());\r\n-        visitAttribute(\"title-area-style\", modelField.getTitleAreaStyle());\r\n-        visitAttribute(\"title-style\", modelField.getTitleStyle());\r\n-        visitAttribute(\"tooltip\", modelField.getTooltip());\r\n-        visitAttribute(\"tooltip-style\", modelField.getTooltipStyle());\r\n-        visitAttribute(\"use-when\", modelField.getUseWhen());\r\n-        visitAttribute(\"widget-area-style\", modelField.getWidgetAreaStyle());\r\n-        visitAttribute(\"widget-style\", modelField.getWidgetStyle());\r\n-        writer.append(\">\");\r\n-        visitUpdateAreas(modelField.getOnChangeUpdateAreas());\r\n-        visitUpdateAreas(modelField.getOnClickUpdateAreas());\r\n+        if (modelField != null) {\r\n+            writer.append(\"<field\");\r\n+            visitAttribute(\"name\", modelField.getName());\r\n+            visitAttribute(\"action\", modelField.getAction());\r\n+            visitAttribute(\"attribute-name\", modelField.getAttributeName());\r\n+            visitAttribute(\"encode-output\", modelField.getEncodeOutput());\r\n+            visitAttribute(\"entity-name\", modelField.getEntityName());\r\n+            visitAttribute(\"entry-name\", modelField.getEntryName());\r\n+            visitAttribute(\"event\", modelField.getEvent());\r\n+            visitAttribute(\"field-name\", modelField.getFieldName());\r\n+            visitAttribute(\"header-link\", modelField.getHeaderLink());\r\n+            visitAttribute(\"header-link-style\", modelField.getHeaderLinkStyle());\r\n+            visitAttribute(\"id-name\", modelField.getIdName());\r\n+            visitAttribute(\"map-name\", modelField.getMapName());\r\n+            visitAttribute(\"parameter-name\", modelField.getParameterName());\r\n+            visitAttribute(\"position\", modelField.getPosition());\r\n+            visitAttribute(\"red-when\", modelField.getRedWhen());\r\n+            visitAttribute(\"required-field\", modelField.getRequiredField());\r\n+            visitAttribute(\"required-field-style\", modelField.getRequiredFieldStyle());\r\n+            visitAttribute(\"separate-column\", modelField.getSeparateColumn());\r\n+            visitAttribute(\"service-name\", modelField.getServiceName());\r\n+            visitAttribute(\"sort-field\", modelField.getSortField());\r\n+            visitAttribute(\"sort-field-asc-style\", modelField.getSortFieldAscStyle());\r\n+            visitAttribute(\"sort-field-desc-style\", modelField.getSortFieldDescStyle());\r\n+            visitAttribute(\"sort-field-help-text\", modelField.getSortFieldHelpText());\r\n+            visitAttribute(\"sort-field-style\", modelField.getSortFieldStyle());\r\n+            visitAttribute(\"title\", modelField.getTitle());\r\n+            visitAttribute(\"title-area-style\", modelField.getTitleAreaStyle());\r\n+            visitAttribute(\"title-style\", modelField.getTitleStyle());\r\n+            visitAttribute(\"tooltip\", modelField.getTooltip());\r\n+            visitAttribute(\"tooltip-style\", modelField.getTooltipStyle());\r\n+            visitAttribute(\"use-when\", modelField.getUseWhen());\r\n+            visitAttribute(\"widget-area-style\", modelField.getWidgetAreaStyle());\r\n+            visitAttribute(\"widget-style\", modelField.getWidgetStyle());\r\n+            writer.append(\">\");\r\n+            visitUpdateAreas(modelField.getOnChangeUpdateAreas());\r\n+            visitUpdateAreas(modelField.getOnClickUpdateAreas());\r\n+        }\r\n     }\r\n \r\n     private void visitSubHyperlink(SubHyperlink hyperlink) throws Exception {\r",
                "deletions": 36
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Sascha Rodekamp \"NPE in Control Event listener when visits are disabled\" (https://issues.apache.org/jira/browse/OFBIZ-3998) - OFBIZ-3998\n\nWhen the visits are disabled the ControlEventListener throws a NPE. \n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1030597 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/1a5cc0bffaf9884a843b5f2c937e58751e787691",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2b16db64fd26e62520687f34e66558adce82d7cf",
        "bug_id": "ofbiz-framework_41",
        "file": [
            {
                "sha": "97d9cf329b4107c9ffa35dd6e29e3dad5e8b2904",
                "filename": "framework/webapp/src/org/ofbiz/webapp/control/ControlEventListener.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1a5cc0bffaf9884a843b5f2c937e58751e787691/framework/webapp/src/org/ofbiz/webapp/control/ControlEventListener.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1a5cc0bffaf9884a843b5f2c937e58751e787691/framework/webapp/src/org/ofbiz/webapp/control/ControlEventListener.java",
                "status": "modified",
                "changes": 26,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/control/ControlEventListener.java?ref=1a5cc0bffaf9884a843b5f2c937e58751e787691",
                "patch": "@@ -133,18 +133,20 @@ public void logStats(HttpSession session, GenericValue visit) {\n             Debug.log(\"Total Passive  : \" + ControlEventListener.getTotalPassiveSessions(),  module);\n             Debug.log(\"** note : this session has been counted as destroyed.\", module);\n             Debug.log(\"--------------------------------------------------------------------\", module);\n-            Debug.log(\"Visit ID       : \" + visit.getString(\"visitId\"), module);\n-            Debug.log(\"Party ID       : \" + visit.getString(\"partyId\"), module);\n-            Debug.log(\"Client IP      : \" + visit.getString(\"clientIpAddress\"), module);\n-            Debug.log(\"Client Host    : \" + visit.getString(\"clientHostName\"), module);\n-            Debug.log(\"Client User    : \" + visit.getString(\"clientUser\"), module);\n-            Debug.log(\"WebApp         : \" + visit.getString(\"webappName\"), module);\n-            Debug.log(\"Locale         : \" + visit.getString(\"initialLocale\"), module);\n-            Debug.log(\"UserAgent      : \" + visit.getString(\"initialUserAgent\"), module);\n-            Debug.log(\"Referrer       : \" + visit.getString(\"initialReferrer\"), module);\n-            Debug.log(\"Initial Req    : \" + visit.getString(\"initialRequest\"), module);\n-            Debug.log(\"Visit From     : \" + visit.getString(\"fromDate\"), module);\n-            Debug.log(\"Visit Thru     : \" + visit.getString(\"thruDate\"), module);\n+            if (visit != null) {\n+                Debug.log(\"Visit ID       : \" + visit.getString(\"visitId\"), module);\n+                Debug.log(\"Party ID       : \" + visit.getString(\"partyId\"), module);\n+                Debug.log(\"Client IP      : \" + visit.getString(\"clientIpAddress\"), module);\n+                Debug.log(\"Client Host    : \" + visit.getString(\"clientHostName\"), module);\n+                Debug.log(\"Client User    : \" + visit.getString(\"clientUser\"), module);\n+                Debug.log(\"WebApp         : \" + visit.getString(\"webappName\"), module);\n+                Debug.log(\"Locale         : \" + visit.getString(\"initialLocale\"), module);\n+                Debug.log(\"UserAgent      : \" + visit.getString(\"initialUserAgent\"), module);\n+                Debug.log(\"Referrer       : \" + visit.getString(\"initialReferrer\"), module);\n+                Debug.log(\"Initial Req    : \" + visit.getString(\"initialRequest\"), module);\n+                Debug.log(\"Visit From     : \" + visit.getString(\"fromDate\"), module);\n+                Debug.log(\"Visit Thru     : \" + visit.getString(\"thruDate\"), module);\n+            }\n             Debug.log(\"--------------------------------------------------------------------\", module);\n             Debug.log(\"--- Start Session Attributes: ---\", module);\n             Enumeration<String> sesNames = null;",
                "deletions": 12
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A simple fix to avoid NPE in grovvy scripts, from Jeremy Wickersheimer at \"Possible NPE in security check\" (https://issues.apache.org/jira/browse/OFBIZ-3160) - OFBIZ-3160\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@835161 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a3b3d8623f59f3e377b53d87d1779003957863b3",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3fe7e1f03e75a614a5852dc081ae8e01d658b6d3",
        "bug_id": "ofbiz-framework_42",
        "file": [
            {
                "sha": "577b39931cea5b9f9c872761b8e0a8f4d7f1db4d",
                "filename": "framework/security/src/org/ofbiz/security/OFBizSecurity.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a3b3d8623f59f3e377b53d87d1779003957863b3/framework/security/src/org/ofbiz/security/OFBizSecurity.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a3b3d8623f59f3e377b53d87d1779003957863b3/framework/security/src/org/ofbiz/security/OFBizSecurity.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/security/src/org/ofbiz/security/OFBizSecurity.java?ref=a3b3d8623f59f3e377b53d87d1779003957863b3",
                "patch": "@@ -130,9 +130,13 @@ public boolean hasPermission(String permission, GenericValue userLogin) {\n      * @see org.ofbiz.security.Security#hasEntityPermission(java.lang.String, java.lang.String, javax.servlet.http.HttpSession)\n      */\n     public boolean hasEntityPermission(String entity, String action, HttpSession session) {\n+        if (session == null) { \n+            return false;\n+        }\n         GenericValue userLogin = (GenericValue) session.getAttribute(\"userLogin\");\n-\n-        if (userLogin == null) return false;\n+        if (userLogin == null) {\n+            return false;\n+        }\n         return hasEntityPermission(entity, action, userLogin);\n     }\n ",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE introduced with rev. 1644015\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1644088 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/011cf444b9443a60323960ab324a65895136a0a1",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6d398e3a6298266c4daf63a59f0adcd54ae4e18d",
        "bug_id": "ofbiz-framework_43",
        "file": [
            {
                "sha": "7666b8e53c841dcbc235fcb0b79c76d384eddd64",
                "filename": "framework/common/src/org/ofbiz/common/login/LoginServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/011cf444b9443a60323960ab324a65895136a0a1/framework/common/src/org/ofbiz/common/login/LoginServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/011cf444b9443a60323960ab324a65895136a0a1/framework/common/src/org/ofbiz/common/login/LoginServices.java",
                "status": "modified",
                "changes": 3,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/src/org/ofbiz/common/login/LoginServices.java?ref=011cf444b9443a60323960ab324a65895136a0a1",
                "patch": "@@ -516,9 +516,8 @@ public static void createUserLoginPasswordHistory(Delegator delegator,String use\n             }\n         }\n \n-        checkNewPassword(null, null, currentPassword, currentPasswordVerify, passwordHint, errorMessageList, true, locale);\n-\n         GenericValue userLoginToCreate = delegator.makeValue(\"UserLogin\", UtilMisc.toMap(\"userLoginId\", userLoginId));\n+        checkNewPassword(userLoginToCreate, null, currentPassword, currentPasswordVerify, passwordHint, errorMessageList, true, locale);\n         userLoginToCreate.set(\"externalAuthId\", externalAuthId);\n         userLoginToCreate.set(\"passwordHint\", passwordHint);\n         userLoginToCreate.set(\"enabled\", enabled);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixes a wrong NPE check\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1608491 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e1caa558a95f9eae62d0850982f953b198f04b7e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3c10fa1a0f0fb7fd73fc5d0c02a293f3e75324ce",
        "bug_id": "ofbiz-framework_44",
        "file": [
            {
                "sha": "78ff9012b9330ae170d85ad050b193b996a541d3",
                "filename": "applications/product/src/org/ofbiz/shipment/packing/PackingSession.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e1caa558a95f9eae62d0850982f953b198f04b7e/applications/product/src/org/ofbiz/shipment/packing/PackingSession.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e1caa558a95f9eae62d0850982f953b198f04b7e/applications/product/src/org/ofbiz/shipment/packing/PackingSession.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/shipment/packing/PackingSession.java?ref=e1caa558a95f9eae62d0850982f953b198f04b7e",
                "patch": "@@ -934,7 +934,7 @@ public BigDecimal getShipmentCostEstimate(String shippingContactMechId, String s\n             Debug.logError(e, module);\n         }\n \n-        if (! UtilValidate.isEmpty(serviceResult.get(\"shippingEstimateAmount\"))) {\n+        if (!UtilValidate.isEmpty(serviceResult)) {\n             shipmentCostEstimate = (BigDecimal) serviceResult.get(\"shippingEstimateAmount\");\n         }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "(OFBIZ-5918) Fixed NPE for ecommerce/products url, If user enter invalid url ecommerce/products then redirect it to main.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1735773 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/efe24efac9f6211bfd2488ded3c52848e1da6b4d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/bc2f7f2bbd4336a34d8265b3c2be98f45b38adf4",
        "bug_id": "ofbiz-framework_45",
        "file": [
            {
                "sha": "b187c19754d7e758fabb8026455f679b3a71644d",
                "filename": "applications/product/src/org/ofbiz/product/category/CatalogUrlServlet.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/efe24efac9f6211bfd2488ded3c52848e1da6b4d/applications/product/src/org/ofbiz/product/category/CatalogUrlServlet.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/efe24efac9f6211bfd2488ded3c52848e1da6b4d/applications/product/src/org/ofbiz/product/category/CatalogUrlServlet.java",
                "status": "modified",
                "changes": 6,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/category/CatalogUrlServlet.java?ref=efe24efac9f6211bfd2488ded3c52848e1da6b4d",
                "patch": "@@ -82,6 +82,11 @@ public void doGet(HttpServletRequest request, HttpServletResponse response) thro\n \n         String productId = null;\n         String categoryId = null;\n+\n+        if (pathElements == null) {\n+            RequestDispatcher rd = request.getRequestDispatcher(\"/\" + CONTROL_MOUNT_POINT + \"/main\");\n+            rd.forward(request, response);\n+        } else {\n         try {\n             String lastPathElement = pathElements.get(pathElements.size() - 1);\n             if (lastPathElement.startsWith(\"p_\")) {\n@@ -146,6 +151,7 @@ public void doGet(HttpServletRequest request, HttpServletResponse response) thro\n \n         RequestDispatcher rd = request.getRequestDispatcher(\"/\" + CONTROL_MOUNT_POINT + \"/\" + (productId != null ? PRODUCT_REQUEST : CATEGORY_REQUEST));\n         rd.forward(request, response);\n+        }\n     }\n \n     /**",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE in Content component.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1400421 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8f23ccfa30a25d18bdd95db61f009a6310c9004c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/5192aeea133901be8fdf1679d367df23355f2e16",
        "bug_id": "ofbiz-framework_46",
        "file": [
            {
                "sha": "1af25baf94b5e5151466d0fb0114086260943216",
                "filename": "applications/content/src/org/ofbiz/content/data/DataResourceWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8f23ccfa30a25d18bdd95db61f009a6310c9004c/applications/content/src/org/ofbiz/content/data/DataResourceWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8f23ccfa30a25d18bdd95db61f009a6310c9004c/applications/content/src/org/ofbiz/content/data/DataResourceWorker.java",
                "status": "modified",
                "changes": 6,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/data/DataResourceWorker.java?ref=8f23ccfa30a25d18bdd95db61f009a6310c9004c",
                "patch": "@@ -818,8 +818,10 @@ public static void writeDataResourceText(GenericValue dataResource, String mimeT\n             writeText(dataResource, text, templateContext, mimeTypeId, locale, out);\n         } else if (\"ELECTRONIC_TEXT\".equals(dataResourceTypeId)) {\n             GenericValue electronicText = delegator.findOne(\"ElectronicText\", UtilMisc.toMap(\"dataResourceId\", dataResourceId), cache);\n-            String text = electronicText.getString(\"textData\");\n-            writeText(dataResource, text, templateContext, mimeTypeId, locale, out);\n+            if (electronicText != null) {\n+                String text = electronicText.getString(\"textData\");\n+                writeText(dataResource, text, templateContext, mimeTypeId, locale, out);\n+            }\n \n         // object types\n         } else if (dataResourceTypeId.endsWith(\"_OBJECT\")) {",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix potential (but unlikely) NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1331741 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c76f9420634a57e4aeba8345bc74da8c315786d0",
        "parent": "https://github.com/apache/ofbiz-framework/commit/beb24b23455ac641a95be0363c41c3ca0b5acf3f",
        "bug_id": "ofbiz-framework_47",
        "file": [
            {
                "sha": "db209d80b605af3904530787e94afe977cd0a688",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/CheckOutEvents.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c76f9420634a57e4aeba8345bc74da8c315786d0/applications/order/src/org/ofbiz/order/shoppingcart/CheckOutEvents.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c76f9420634a57e4aeba8345bc74da8c315786d0/applications/order/src/org/ofbiz/order/shoppingcart/CheckOutEvents.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/CheckOutEvents.java?ref=c76f9420634a57e4aeba8345bc74da8c315786d0",
                "patch": "@@ -509,11 +509,11 @@ public static String checkShipmentNeeded(HttpServletRequest request, HttpServlet\n         GenericValue productStore = null;\n         try {\n             productStore = delegator.findByPrimaryKeyCache(\"ProductStore\", UtilMisc.toMap(\"productStoreId\", cart.getProductStoreId()));\n+            Debug.logInfo(\"checkShipmentNeeded: reqShipAddrForDigItems=\" + productStore.getString(\"reqShipAddrForDigItems\"), module);\n         } catch (GenericEntityException e) {\n             Debug.logError(e, \"Error getting ProductStore: \" + e.toString(), module);\n         }\n \n-        Debug.logInfo(\"checkShipmentNeeded: reqShipAddrForDigItems=\" + productStore.getString(\"reqShipAddrForDigItems\"), module);\n         if (productStore != null && \"N\".equals(productStore.getString(\"reqShipAddrForDigItems\"))) {\n             Debug.logInfo(\"checkShipmentNeeded: cart.containOnlyDigitalGoods()=\" + cart.containOnlyDigitalGoods(), module);\n             // don't require shipping for all digital items",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixes a NPE introduced at r1328122\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1328226 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/567080a8e3c312d79751ca3c7582fda78a9935b2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/500a2b4ec4f5bc41dcbc579436777e0774dc28c8",
        "bug_id": "ofbiz-framework_48",
        "file": [
            {
                "sha": "39b11863ab5c84b9bf02677f1c55fd00bd22ebc2",
                "filename": "framework/common/src/org/ofbiz/common/email/EmailServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/567080a8e3c312d79751ca3c7582fda78a9935b2/framework/common/src/org/ofbiz/common/email/EmailServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/567080a8e3c312d79751ca3c7582fda78a9935b2/framework/common/src/org/ofbiz/common/email/EmailServices.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/src/org/ofbiz/common/email/EmailServices.java?ref=567080a8e3c312d79751ca3c7582fda78a9935b2",
                "patch": "@@ -586,6 +586,7 @@\n         Map<String, Object> result = ServiceUtil.returnSuccess();\n         Map<String, Object> sendMailResult;\n         Boolean hideInLog = (Boolean) serviceContext.get(\"hideInLog\");\n+        hideInLog = hideInLog == null ? false : hideInLog;\n         try {\n             if (!hideInLog) {\n                 if (isMultiPart) {",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Prevent a possible NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1169683 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/441e3c6cf50d091958bb6083ee30d92302aa827e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/821b57413310c9f63e90204ccc59ab6b233c1751",
        "bug_id": "ofbiz-framework_49",
        "file": [
            {
                "sha": "16decaa73ccb42c81fc441ae8e5c563dd1b1da15",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/441e3c6cf50d091958bb6083ee30d92302aa827e/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/441e3c6cf50d091958bb6083ee30d92302aa827e/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java?ref=441e3c6cf50d091958bb6083ee30d92302aa827e",
                "patch": "@@ -2536,8 +2536,8 @@ public static BigDecimal calcOrderPromoAdjustmentsBd(List<GenericValue> allOrder\n         BigDecimal promoAdjTotal = ZERO;\n \n         List<GenericValue> promoAdjustments = EntityUtil.filterByAnd(allOrderAdjustments, UtilMisc.toMap(\"orderAdjustmentTypeId\", \"PROMOTION_ADJUSTMENT\"));\n-\n-        if (!promoAdjustments.isEmpty()) {\n+        \n+        if (UtilValidate.isNotEmpty(promoAdjustments)) {\n             Iterator<GenericValue> promoAdjIter = promoAdjustments.iterator();\n             while (promoAdjIter.hasNext()) {\n                 GenericValue promoAdjustment = promoAdjIter.next();",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Inverting tests to prevent NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1157366 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3815575d0ec6f33bc4e489554f3e4ac2f520590c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/e227fca4cf7055a0fff1e62d555426464759edc4",
        "bug_id": "ofbiz-framework_50",
        "file": [
            {
                "sha": "c025abaf2f84867b688467bb5882f53fcbfc29c2",
                "filename": "applications/workeffort/widget/WorkEffortForms.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3815575d0ec6f33bc4e489554f3e4ac2f520590c/applications/workeffort/widget/WorkEffortForms.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3815575d0ec6f33bc4e489554f3e4ac2f520590c/applications/workeffort/widget/WorkEffortForms.xml",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/workeffort/widget/WorkEffortForms.xml?ref=3815575d0ec6f33bc4e489554f3e4ac2f520590c",
                "patch": "@@ -925,14 +925,14 @@ under the License.\n         </field>\n         <field name=\"noteInfo\" title=\"${uiLabelMap.CommonNote}\"><display/></field>\n         <field name=\"noteParty\" title=\"${uiLabelMap.CommonBy}\"><display description=\"${bsh:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, noteParty, true)} at ${noteDateTime}\"/></field>\n-        <field name=\"internalNote\" title=\"${uiLabelMap.WorkEffortPrivatePublic}\" widget-style=\"buttontext\" use-when=\"internalNote.equals(&quot;N&quot;)\">\n+        <field name=\"internalNote\" title=\"${uiLabelMap.WorkEffortPrivatePublic}\" widget-style=\"buttontext\" use-when=\"&quot;N&quot;.equals(internalNote)\">\n             <hyperlink target=\"updateWorkEffortNote\" description=\"${uiLabelMap.OrderNotesPrivate}\">\n                 <parameter param-name=\"workEffortId\"/>\n                 <parameter param-name=\"noteId\"/>\n                 <parameter param-name=\"internalNote\" value=\"Y\"/>\n             </hyperlink>\n         </field>\n-        <field name=\"internalNote\" title=\"${uiLabelMap.WorkEffortPrivatePublic}\" widget-style=\"buttontext\" use-when=\"internalNote.equals(&quot;Y&quot;)\">\n+        <field name=\"internalNote\" title=\"${uiLabelMap.WorkEffortPrivatePublic}\" widget-style=\"buttontext\" use-when=\"&quot;Y&quot;.equals(internalNote)\">\n             <hyperlink target=\"updateWorkEffortNote\" description=\"${uiLabelMap.OrderNotesPublic}\">\n                 <parameter param-name=\"workEffortId\"/>\n                 <parameter param-name=\"noteId\"/>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "FIX: Fix NPE in ModelAliasAll.iterator(), when\nfieldsToExclude is null.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1139871 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c693076ab6f3b7d1aeebd60c19f4d91c06b5c036",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a4fbfd05ec6e4879b63d292269d606ee6640bf52",
        "bug_id": "ofbiz-framework_51",
        "file": [
            {
                "sha": "b8cdcdca455e73bb536b1fb35e92aef005ad01eb",
                "filename": "framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c693076ab6f3b7d1aeebd60c19f4d91c06b5c036/framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c693076ab6f3b7d1aeebd60c19f4d91c06b5c036/framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java",
                "status": "modified",
                "changes": 7,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java?ref=c693076ab6f3b7d1aeebd60c19f4d91c06b5c036",
                "patch": "@@ -21,6 +21,7 @@\n import java.io.Serializable;\n import java.util.Arrays;\n import java.util.Collection;\n+import java.util.Collections;\n import java.util.HashSet;\n import java.util.Iterator;\n import java.util.LinkedList;\n@@ -792,7 +793,11 @@ public boolean shouldExclude(String fieldName) {\n         }\n \n         public Iterator<String> iterator() {\n-            return fieldsToExclude.iterator();\n+            if (this.fieldsToExclude == null) {\n+                return Collections.<String>emptySet().iterator();\n+            } else {\n+                return fieldsToExclude.iterator();\n+            }\n         }\n     }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE in getWorkEffortEventsByPeriod service.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1129345 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/45ece6e110f8485dc8f1528dd74a974650359da7",
        "parent": "https://github.com/apache/ofbiz-framework/commit/de2b4a3d0d5c7251726a12a25b46515f83eb1b85",
        "bug_id": "ofbiz-framework_52",
        "file": [
            {
                "sha": "e3ee89b55412d1f5cbf7411203ff3d24265d7c43",
                "filename": "applications/workeffort/src/org/ofbiz/workeffort/workeffort/WorkEffortServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/45ece6e110f8485dc8f1528dd74a974650359da7/applications/workeffort/src/org/ofbiz/workeffort/workeffort/WorkEffortServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/45ece6e110f8485dc8f1528dd74a974650359da7/applications/workeffort/src/org/ofbiz/workeffort/workeffort/WorkEffortServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/workeffort/src/org/ofbiz/workeffort/workeffort/WorkEffortServices.java?ref=45ece6e110f8485dc8f1528dd74a974650359da7",
                "patch": "@@ -669,7 +669,7 @@ Now you have a confirmed production run (starting tomorrow) happening in facilit\n                 for (GenericValue workEffort : validWorkEfforts) {\n                     if (UtilValidate.isNotEmpty(workEffort.getString(\"tempExprId\"))) {\n                         // check if either the workeffort is public or the requested party is a member\n-                        if (UtilValidate.isNotEmpty(partyIdsToUse) && !workEffort.getString(\"scopeEnumId\").equals(\"WES_PUBLIC\") && !partyIdsToUse.contains(workEffort.getString(\"partyId\"))) {\n+                        if (UtilValidate.isNotEmpty(partyIdsToUse) && !\"WES_PUBLIC\".equals(workEffort.getString(\"scopeEnumId\")) && !partyIdsToUse.contains(workEffort.getString(\"partyId\"))) {\n                             continue;\n                         }\n                         TemporalExpression tempExpr = TemporalExpressionWorker.getTemporalExpression(delegator, workEffort.getString(\"tempExprId\"));",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Remove a warning about a possible NPE in VerifySeleniumSetups (OFBIZ-4102)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1078295 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/10420a38ababaaf730a3256f13f05de3744aa36c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/54408637a8c2de557dc0e911a4eb1bc73d0649bb",
        "bug_id": "ofbiz-framework_53",
        "file": [
            {
                "sha": "9d7f6b76b40b014c2708e296c8b3a925555c9f5e",
                "filename": "framework/testtools/src/org/ofbiz/testtools/VerifySeleniumSetups.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/10420a38ababaaf730a3256f13f05de3744aa36c/framework/testtools/src/org/ofbiz/testtools/VerifySeleniumSetups.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/10420a38ababaaf730a3256f13f05de3744aa36c/framework/testtools/src/org/ofbiz/testtools/VerifySeleniumSetups.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/testtools/src/org/ofbiz/testtools/VerifySeleniumSetups.java?ref=10420a38ababaaf730a3256f13f05de3744aa36c",
                "patch": "@@ -94,7 +94,7 @@ public static String verifyConfig(HttpServletRequest request, HttpServletRespons\n             if (urlProps == null) {\n                 urlProps = new Properties();\n                 if (urlProp == null) {\n-                    String errMsg = \"variable with name \" + urlProp.toString() + \" is not set, cannot resolve location.\";\n+                    String errMsg = \"Cannot resolve location from url.properties.\";\n                     throw new MalformedURLException(errMsg);\n                 }\n                 urlProps = UtilProperties.getProperties(urlProp);",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixing NPE. Thanks Pranay!\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1033953 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/84fd700af5aa292988d7adc790614260e44d242c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/40bdee1bbe257b5c7b207807cbd9116a81434c85",
        "bug_id": "ofbiz-framework_54",
        "file": [
            {
                "sha": "9ebd61d8de981549b448935903b50135d8657da7",
                "filename": "applications/product/script/org/ofbiz/product/inventory/InventoryServices.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/84fd700af5aa292988d7adc790614260e44d242c/applications/product/script/org/ofbiz/product/inventory/InventoryServices.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/84fd700af5aa292988d7adc790614260e44d242c/applications/product/script/org/ofbiz/product/inventory/InventoryServices.xml",
                "status": "modified",
                "changes": 16,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/script/org/ofbiz/product/inventory/InventoryServices.xml?ref=84fd700af5aa292988d7adc790614260e44d242c",
                "patch": "@@ -418,12 +418,16 @@ under the License.\n                 <set field=\"getAssoc.productIdTo\" from-field=\"product.productId\"/>\n                 <set field=\"getAssoc.productAssocTypeId\" value=\"PRODUCT_VARIANT\"/>\n                 <find-by-and entity-name=\"ProductAssoc\" map=\"getAssoc\" list=\"assocs\"/>\n-                <filter-list-by-date list=\"assocs\" to-list=\"assocsDate\"/>\n-                <first-from-list entry=\"assoc\" list=\"assocsDate\"/>\n-                <get-related-one value-field=\"assoc\" relation-name=\"MainProduct\" to-value-field=\"virtProduct\"/>\n-                <if-empty field=\"product.salesDiscWhenNotAvail\">\n-                    <set field=\"product.salesDiscWhenNotAvail\" from-field=\"virtProduct.salesDiscWhenNotAvail\"/>\n-                </if-empty>\n+                <if-not-empty field=\"assocs\">\n+                    <filter-list-by-date list=\"assocs\" to-list=\"assocsDate\"/>\n+                    <first-from-list entry=\"assoc\" list=\"assocsDate\"/>\n+                    <if-not-empty field=\"assoc\">\n+                        <get-related-one value-field=\"assoc\" relation-name=\"MainProduct\" to-value-field=\"virtProduct\"/>\n+                        <if-empty field=\"product.salesDiscWhenNotAvail\">\n+                            <set field=\"product.salesDiscWhenNotAvail\" from-field=\"virtProduct.salesDiscWhenNotAvail\"/>\n+                        </if-empty>\n+                    </if-not-empty>\n+                </if-not-empty>    \n             </if-compare>\n         </if-not-empty>\n ",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixing NPE. Thanks Pranay!\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1033928 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/40bdee1bbe257b5c7b207807cbd9116a81434c85",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b48983d2309a598f9c929c2fa37ec0b508603fa2",
        "bug_id": "ofbiz-framework_55",
        "file": [
            {
                "sha": "b5a623e686ca27a28eef2dfa68e497960dc2123e",
                "filename": "applications/product/src/org/ofbiz/product/product/KeywordIndex.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/40bdee1bbe257b5c7b207807cbd9116a81434c85/applications/product/src/org/ofbiz/product/product/KeywordIndex.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/40bdee1bbe257b5c7b207807cbd9116a81434c85/applications/product/src/org/ofbiz/product/product/KeywordIndex.java",
                "status": "modified",
                "changes": 10,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/product/KeywordIndex.java?ref=40bdee1bbe257b5c7b207807cbd9116a81434c85",
                "patch": "@@ -32,6 +32,7 @@\n import org.ofbiz.base.util.UtilDateTime;\n import org.ofbiz.base.util.UtilMisc;\n import org.ofbiz.base.util.UtilProperties;\n+import org.ofbiz.base.util.UtilValidate;\n import org.ofbiz.common.KeywordSearchUtil;\n import org.ofbiz.content.data.DataResourceWorker;\n import org.ofbiz.entity.Delegator;\n@@ -182,10 +183,11 @@ public static void indexKeywords(GenericValue product, boolean doAll) throws Gen\n                 }\n             }\n         }\n-\n-        for (String str: strings) {\n-            // call process keywords method here\n-            KeywordSearchUtil.processKeywordsForIndex(str, keywords, separators, stopWordBagAnd, stopWordBagOr, removeStems, stemSet);\n+        if (UtilValidate.isNotEmpty(strings)) {\n+            for (String str: strings) {\n+                // call process keywords method here\n+                KeywordSearchUtil.processKeywordsForIndex(str, keywords, separators, stopWordBagAnd, stopWordBagOr, removeStems, stemSet);\n+            }\n         }\n \n         List<GenericValue> toBeStored = FastList.newInstance();",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Continue with the next iteration on exception, prevents potential NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@990333 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/7956d456d69d63f1e750ce0c0d40906203ee7135",
        "parent": "https://github.com/apache/ofbiz-framework/commit/fcfa1386e5231af3824a0efe5b2a311d0b0bdcb9",
        "bug_id": "ofbiz-framework_56",
        "file": [
            {
                "sha": "00d0164b2ea464735ab1c0625de1187ad9121c4e",
                "filename": "applications/party/src/org/ofbiz/party/contact/ContactMechWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7956d456d69d63f1e750ce0c0d40906203ee7135/applications/party/src/org/ofbiz/party/contact/ContactMechWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7956d456d69d63f1e750ce0c0d40906203ee7135/applications/party/src/org/ofbiz/party/contact/ContactMechWorker.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/src/org/ofbiz/party/contact/ContactMechWorker.java?ref=7956d456d69d63f1e750ce0c0d40906203ee7135",
                "patch": "@@ -487,6 +487,7 @@ public static GenericValue getFacilityContactMechByPurpose(Delegator delegator,\n                 facilityContactMechPurposes = EntityUtil.filterByDate(facilityContactMechPurposes);\n             } catch (GenericEntityException e) {\n                 Debug.logWarning(e, module);\n+                continue;\n             }\n             for (GenericValue facilityContactMechPurpose: facilityContactMechPurposes) {\n                 String contactMechId = facilityContactMechPurpose.getString(\"contactMechId\");",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE, improved handling\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@966130 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/9900ae2f76da78be686f82bd3927533168cb0953",
        "parent": "https://github.com/apache/ofbiz-framework/commit/5835ddaa77d1c528468fcd7d2b03c5673ced0874",
        "bug_id": "ofbiz-framework_57",
        "file": [
            {
                "sha": "da03844e3d642df52ae673cc1bd76db90198cf67",
                "filename": "framework/widget/src/org/ofbiz/widget/WidgetWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/9900ae2f76da78be686f82bd3927533168cb0953/framework/widget/src/org/ofbiz/widget/WidgetWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/9900ae2f76da78be686f82bd3927533168cb0953/framework/widget/src/org/ofbiz/widget/WidgetWorker.java",
                "status": "modified",
                "changes": 12,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/WidgetWorker.java?ref=9900ae2f76da78be686f82bd3927533168cb0953",
                "patch": "@@ -100,19 +100,23 @@ public static void buildHyperlinkUrl(Appendable externalWriter, String target, S\n \n             for (Map.Entry<String, String> parameter: parameterMap.entrySet()) {\n                 String parameterValue = null;\n-                if (!(parameter.getValue() instanceof String)) {\n-                    // it's probably a String[], just get the first value\n+                if (parameter.getValue() instanceof String) {\n+                    parameterValue = parameter.getValue();\n+                } else {\n                     Object parameterObject = parameter.getValue();\n+                    \n+                    // skip null values\n+                    if (parameterObject == null) continue;\n+                    \n                     if (parameterObject instanceof String[]) {\n+                        // it's probably a String[], just get the first value\n                         String[] parameterArray = (String[]) parameterObject;\n                         parameterValue = parameterArray[0];\n                         Debug.logInfo(\"Found String array value for parameter [\" + parameter.getKey() + \"], using first value: \" + parameterValue, module);\n                     } else {\n                         // not a String, and not a String[], just use toString\n                         parameterValue = parameterObject.toString();\n                     }\n-                } else {\n-                    parameterValue = parameter.getValue();\n                 }\n                 \n                 if (needsAmp) {",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix to prevent a NPE if the CreditCard record is missing.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@941788 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/810bfdccc0d9f4f8c04e70a5d339b91810d50d14",
        "parent": "https://github.com/apache/ofbiz-framework/commit/d8f89793a3599a0ff2cbbf2c9b3c6993c94cc79d",
        "bug_id": "ofbiz-framework_58",
        "file": [
            {
                "sha": "d3ef0b0f713a7b249c84d0415a1c20c7260f22a7",
                "filename": "applications/party/webapp/partymgr/party/profileblocks/PaymentMethods.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/810bfdccc0d9f4f8c04e70a5d339b91810d50d14/applications/party/webapp/partymgr/party/profileblocks/PaymentMethods.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/810bfdccc0d9f4f8c04e70a5d339b91810d50d14/applications/party/webapp/partymgr/party/profileblocks/PaymentMethods.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/webapp/partymgr/party/profileblocks/PaymentMethods.ftl?ref=810bfdccc0d9f4f8c04e70a5d339b91810d50d14",
                "patch": "@@ -52,7 +52,7 @@ under the License.\n           <#list paymentMethodValueMaps as paymentMethodValueMap>\n             <#assign paymentMethod = paymentMethodValueMap.paymentMethod/>\n             <tr>\n-              <#if \"CREDIT_CARD\" == paymentMethod.paymentMethodTypeId>\n+              <#if \"CREDIT_CARD\" == paymentMethod.paymentMethodTypeId && paymentMethodValueMap.creditCard?has_content>\n                 <#assign creditCard = paymentMethodValueMap.creditCard/>\n                 <td class=\"label\">\n                   ${uiLabelMap.AccountingCreditCard}",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix a non visible NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@940849 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/be5dce281e6694b90103da5c9933fe59a86b1095",
        "parent": "https://github.com/apache/ofbiz-framework/commit/28bb8e6684d376e59c22e5dea9eac201bd9fd237",
        "bug_id": "ofbiz-framework_59",
        "file": [
            {
                "sha": "ea345fa0df570286329b78b915ae34f2de58169a",
                "filename": "framework/common/webcommon/WEB-INF/actions/includes/FindAutocompleteOptions.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/be5dce281e6694b90103da5c9933fe59a86b1095/framework/common/webcommon/WEB-INF/actions/includes/FindAutocompleteOptions.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/be5dce281e6694b90103da5c9933fe59a86b1095/framework/common/webcommon/WEB-INF/actions/includes/FindAutocompleteOptions.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/webcommon/WEB-INF/actions/includes/FindAutocompleteOptions.groovy?ref=be5dce281e6694b90103da5c9933fe59a86b1095",
                "patch": "@@ -31,7 +31,7 @@ entityName = context.entityName;\n searchFields = context.searchFields;\n displayFields = context.displayFields ?: searchFields;\n searchValueFieldName = parameters.searchValueField;\n-fieldValue = parameters.get(searchValueFieldName);\n+if (searchValueFieldName) fieldValue = parameters.get(searchValueFieldName);\n searchType = context.searchType;\n \n if (searchFields && fieldValue) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Avoiding NPE.\nThanks Deepak for the contribution.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@937284 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/88040c9f6731c6275dbc483e39538baabbb079d6",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a76c5884295d3aef0365acb247f2bc4f0072c0cb",
        "bug_id": "ofbiz-framework_60",
        "file": [
            {
                "sha": "63758772eba8a3a8f8febfb6c84baa7af9d67375",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/88040c9f6731c6275dbc483e39538baabbb079d6/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/88040c9f6731c6275dbc483e39538baabbb079d6/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java?ref=88040c9f6731c6275dbc483e39538baabbb079d6",
                "patch": "@@ -4984,7 +4984,7 @@ public static BigDecimal getMinimumOrderQuantity (Delegator delegator, BigDecima\n         if(UtilValidate.isNotEmpty(minimumOrderPriceList)) {\n             minimumOrderPrice = EntityUtil.getFirst(minimumOrderPriceList).getBigDecimal(\"price\");\n         }\n-        if(minimumOrderPrice.compareTo(itemBasePrice) > 0) {\n+        if(itemBasePrice != null && minimumOrderPrice.compareTo(itemBasePrice) > 0) {\n             minQuantity = minimumOrderPrice.divide(itemBasePrice, 0, BigDecimal.ROUND_UP);\n         }\n         return minQuantity;",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed a potential NPE since ProductStore.storeName is an optional field.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@930507 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/81c73e21de68af5eb01c7af1deb34be8eecd16ca",
        "parent": "https://github.com/apache/ofbiz-framework/commit/51220b31018cd597b1d60fc0248a6d44e2fc87e0",
        "bug_id": "ofbiz-framework_61",
        "file": [
            {
                "sha": "7c6d2c3d362385e12f1a146366c555c6090ff4e8",
                "filename": "applications/accounting/webapp/accounting/payment/manualTx.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/81c73e21de68af5eb01c7af1deb34be8eecd16ca/applications/accounting/webapp/accounting/payment/manualTx.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/81c73e21de68af5eb01c7af1deb34be8eecd16ca/applications/accounting/webapp/accounting/payment/manualTx.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/webapp/accounting/payment/manualTx.ftl?ref=81c73e21de68af5eb01c7af1deb34be8eecd16ca",
                "patch": "@@ -47,12 +47,12 @@ under the License.\n         <td width=\"5\">&nbsp;</td>\n         <td width='74%'>\n           <#if currentStore?has_content>\n-            <div>${currentStore.storeName}</div>\n+            <div><#if currentStore.storeName?exists>${currentStore.storeName}<#else>${currentStore.productStoreId}</#if></div>\n             <input type=\"hidden\" name=\"productStoreId\" value=\"${currentStore.productStoreId}\">\n           <#else>\n             <select name=\"productStoreId\">\n               <#list productStores as productStore>\n-                <option value=\"${productStore.productStoreId}\">${productStore.storeName}</option>\n+                <option value=\"${productStore.productStoreId}\"><#if productStore.storeName?exists>${productStore.storeName}<#else>${productStore.productStoreId}</#if></option>\n               </#list>\n             </select>\n           </#if>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixing a NPE introduced at rev.929173\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@929576 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/68c6130cf143847474d03616e804d3bb300fc358",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3dd53a86f12cafd42997517c8b68f28d64459bc6",
        "bug_id": "ofbiz-framework_62",
        "file": [
            {
                "sha": "b6f9b95745d93e11ccb59b773ec308e1364fd932",
                "filename": "framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/68c6130cf143847474d03616e804d3bb300fc358/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/68c6130cf143847474d03616e804d3bb300fc358/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java?ref=68c6130cf143847474d03616e804d3bb300fc358",
                "patch": "@@ -2691,7 +2691,9 @@ public void renderSortField(Appendable writer, Map<String, Object> context, Mode\n         String urlPath = UtilHttp.removeQueryStringFromTarget(targetService);\n         String prepLinkText = UtilHttp.getQueryStringFromTarget(targetService);\n \n-        queryString = UtilHttp.encodeAmpersands(queryString);\n+        if (UtilValidate.isNotEmpty(queryString)) {\n+            queryString = UtilHttp.encodeAmpersands(queryString);\n+        }\n \n         if (prepLinkText == null) {\n             prepLinkText = \"\";",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Correcting a NPE introduced at rev 929157 when using sub-hyperlink\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@929449 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e185d50179db3615e296de72b150263375aac397",
        "parent": "https://github.com/apache/ofbiz-framework/commit/eb3cfad398bfe91c003c960e3b941b17a7a0688f",
        "bug_id": "ofbiz-framework_63",
        "file": [
            {
                "sha": "f6bea96baefbc9c964f273de0c0ad4c69ad3be1e",
                "filename": "framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e185d50179db3615e296de72b150263375aac397/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e185d50179db3615e296de72b150263375aac397/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java?ref=e185d50179db3615e296de72b150263375aac397",
                "patch": "@@ -2874,8 +2874,12 @@ public void makeHyperlinkString(Appendable writer, String linkStyle, String targ\n             if (UtilValidate.isNotEmpty(request.getAttribute(\"image\"))) {\n                 imgSrc = request.getAttribute(\"image\").toString();\n             }\n-            alt = request.getAttribute(\"alternate\").toString();\n-            imgTitle = request.getAttribute(\"imageTitle\").toString();\n+            if (UtilValidate.isNotEmpty(request.getAttribute(\"alternate\"))) {\n+                alt = request.getAttribute(\"alternate\").toString();\n+            }\n+            if (UtilValidate.isNotEmpty(request.getAttribute(\"imageTitle\"))) {\n+                imgTitle = request.getAttribute(\"imageTitle\").toString();\n+            }\n             if(UtilValidate.isEmpty(imgTitle)){\n                 imgTitle = modelFormField.getTitle(context);\n             }",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Corrected a NPE error in ListLeaveApprovals\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@915271 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/522b06d9e84d9da3f714e41ca2bfa55a17405f14",
        "parent": "https://github.com/apache/ofbiz-framework/commit/9a060b67d1937b19d52a832f85bc37e64790f69d",
        "bug_id": "ofbiz-framework_64",
        "file": [
            {
                "sha": "a119c7255c6d4d2405cc8a3b2cac3fe539ca9e7e",
                "filename": "applications/humanres/widget/forms/EmplLeaveForms.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/522b06d9e84d9da3f714e41ca2bfa55a17405f14/applications/humanres/widget/forms/EmplLeaveForms.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/522b06d9e84d9da3f714e41ca2bfa55a17405f14/applications/humanres/widget/forms/EmplLeaveForms.xml",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/humanres/widget/forms/EmplLeaveForms.xml?ref=522b06d9e84d9da3f714e41ca2bfa55a17405f14",
                "patch": "@@ -144,8 +144,8 @@\n                 </sub-hyperlink>\n             </display-entity>\n         </field>\n-        <field name=\"approverPartyId\" field-name=\"partyId\">\n-            <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\">\n+        <field name=\"approverPartyId\" field-name=\"approverPartyId\">\n+            <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\" key-field-name=\"partyId\">\n                 <sub-hyperlink target=\"/partymgr/control/viewprofile\" target-type=\"inter-app\" description=\"${approverPartyId}\" link-style=\"buttontext\">\n                     <parameter param-name=\"approverPartyId\" from-field=\"approverPartyId\"/>\n                 </sub-hyperlink>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Avoid NPE.\nPatch from Vivek.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@902752 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e0dd93533664397573d217b7ddddf1284145286d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/619f375a4699f12124bce88baf73644a3b101d43",
        "bug_id": "ofbiz-framework_65",
        "file": [
            {
                "sha": "5d58eef30e9dc94e921316795f17d97d74752266",
                "filename": "applications/content/src/org/ofbiz/content/view/SimpleContentViewHandler.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e0dd93533664397573d217b7ddddf1284145286d/applications/content/src/org/ofbiz/content/view/SimpleContentViewHandler.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e0dd93533664397573d217b7ddddf1284145286d/applications/content/src/org/ofbiz/content/view/SimpleContentViewHandler.java",
                "status": "modified",
                "changes": 60,
                "additions": 32,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/view/SimpleContentViewHandler.java?ref=e0dd93533664397573d217b7ddddf1284145286d",
                "patch": "@@ -89,8 +89,10 @@ public void render(String name, String page, String info, String contentType, St\n             if (UtilValidate.isEmpty(dataResourceId)) {\n                 if (UtilValidate.isEmpty(contentRevisionSeqId)) {\n                     if (UtilValidate.isEmpty(mapKey) && UtilValidate.isEmpty(contentAssocTypeId)) {\n-                        GenericValue content = delegator.findByPrimaryKeyCache(\"Content\", UtilMisc.toMap(\"contentId\", contentId));\n-                        dataResourceId = content.getString(\"dataResourceId\");\n+                        if (UtilValidate.isNotEmpty(contentId)) {\n+                            GenericValue content = delegator.findByPrimaryKeyCache(\"Content\", UtilMisc.toMap(\"contentId\", contentId));\n+                            dataResourceId = content.getString(\"dataResourceId\");\n+                        }\n                         if (Debug.verboseOn()) Debug.logVerbose(\"SCVH(0b)- dataResourceId:\" + dataResourceId, module);\n                     } else {\n                         Timestamp fromDate = null;\n@@ -121,33 +123,35 @@ public void render(String name, String page, String info, String contentType, St\n                     if (Debug.verboseOn()) Debug.logVerbose(\"SCVH(3)- dataResourceId:\" + dataResourceId, module);\n                 }\n             }\n-            GenericValue dataResource = delegator.findByPrimaryKeyCache(\"DataResource\", UtilMisc.toMap(\"dataResourceId\", dataResourceId));\n-            // DEJ20080717: why are we rendering the DataResource directly instead of rendering the content?\n-            ByteBuffer byteBuffer = DataResourceWorker.getContentAsByteBuffer(delegator, dataResourceId, https, webSiteId, locale, rootDir);\n-            ByteArrayInputStream bais = new ByteArrayInputStream(byteBuffer.array());\n-            // hack for IE and mime types\n-            //String userAgent = request.getHeader(\"User-Agent\");\n-            //if (userAgent.indexOf(\"MSIE\") > -1) {\n-            //    Debug.log(\"Found MSIE changing mime type from - \" + mimeTypeId, module);\n-            //    mimeTypeId = \"application/octet-stream\";\n-            //}\n-            // setup chararcter encoding and content type\n-            String charset = dataResource.getString(\"characterSetId\");\n-            mimeTypeId = dataResource.getString(\"mimeTypeId\");\n-            if (UtilValidate.isEmpty(charset)) {\n-                charset = servletContext.getInitParameter(\"charset\");\n-            }\n-            if (UtilValidate.isEmpty(charset)) {\n-                charset = \"UTF-8\";\n-            }\n-\n-            // setup content type\n-            String contentType2 = UtilValidate.isNotEmpty(mimeTypeId) ? mimeTypeId + \"; charset=\" +charset : contentType;\n-            String fileName = null;\n-            if (!UtilValidate.isEmpty(dataResource.getString(\"dataResourceName\"))) {\n-                fileName = dataResource.getString(\"dataResourceName\").replace(\" \", \"_\"); // spaces in filenames can be a problem\n+            if (UtilValidate.isNotEmpty(dataResourceId)) {\n+                GenericValue dataResource = delegator.findByPrimaryKeyCache(\"DataResource\", UtilMisc.toMap(\"dataResourceId\", dataResourceId));\n+                // DEJ20080717: why are we rendering the DataResource directly instead of rendering the content?\n+                ByteBuffer byteBuffer = DataResourceWorker.getContentAsByteBuffer(delegator, dataResourceId, https, webSiteId, locale, rootDir);\n+                ByteArrayInputStream bais = new ByteArrayInputStream(byteBuffer.array());\n+                // hack for IE and mime types\n+                //String userAgent = request.getHeader(\"User-Agent\");\n+                //if (userAgent.indexOf(\"MSIE\") > -1) {\n+                //    Debug.log(\"Found MSIE changing mime type from - \" + mimeTypeId, module);\n+                //    mimeTypeId = \"application/octet-stream\";\n+                //}\n+                // setup chararcter encoding and content type\n+                String charset = dataResource.getString(\"characterSetId\");\n+                mimeTypeId = dataResource.getString(\"mimeTypeId\");\n+                if (UtilValidate.isEmpty(charset)) {\n+                    charset = servletContext.getInitParameter(\"charset\");\n+                }\n+                if (UtilValidate.isEmpty(charset)) {\n+                    charset = \"UTF-8\";\n+                }\n+    \n+                // setup content type\n+                String contentType2 = UtilValidate.isNotEmpty(mimeTypeId) ? mimeTypeId + \"; charset=\" +charset : contentType;\n+                String fileName = null;\n+                if (!UtilValidate.isEmpty(dataResource.getString(\"dataResourceName\"))) {\n+                    fileName = dataResource.getString(\"dataResourceName\").replace(\" \", \"_\"); // spaces in filenames can be a problem\n+                }\n+                UtilHttp.streamContentToBrowser(response, bais, byteBuffer.limit(), contentType2, fileName);\n             }\n-            UtilHttp.streamContentToBrowser(response, bais, byteBuffer.limit(), contentType2, fileName);\n         } catch (GenericEntityException e) {\n             throw new ViewHandlerException(e.getMessage());\n         } catch (IOException e) {",
                "deletions": 28
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix a NPE reported in user list by Scott\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@901347 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f636860838954ae9c78559dfab6710ce9e375b01",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c58797b5290307fbd166a39861a7a396060dd049",
        "bug_id": "ofbiz-framework_66",
        "file": [
            {
                "sha": "1e2bfa78a8712f383c781c5128ea58e58560696d",
                "filename": "applications/order/webapp/ordermgr/order/orderitems.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f636860838954ae9c78559dfab6710ce9e375b01/applications/order/webapp/ordermgr/order/orderitems.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f636860838954ae9c78559dfab6710ce9e375b01/applications/order/webapp/ordermgr/order/orderitems.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/order/orderitems.ftl?ref=f636860838954ae9c78559dfab6710ce9e375b01",
                "patch": "@@ -125,7 +125,7 @@ under the License.\n                     <#list orderItemStatuses as orderItemStatus>\n                       <#assign loopStatusItem = orderItemStatus.getRelatedOne(\"StatusItem\")>\n                       <div>\n-                        ${orderItemStatus.statusDatetime.toString()}&nbsp;&nbsp;${loopStatusItem.get(\"description\",locale)?default(orderItemStatus.statusId)}\n+                        ${(orderItemStatus.statusDatetime.toString())?if_exists}&nbsp;&nbsp;${loopStatusItem.get(\"description\",locale)?default(orderItemStatus.statusId)}\n                       </div>\n                     </#list>\n                     <#assign returns = orderItem.getRelated(\"ReturnItem\")?if_exists>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE in updatePartyGroup service, when statusId is not passed in. \n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@900328 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/dd5f38fc62833a21a27eacfed710b26fa6d8aa14",
        "parent": "https://github.com/apache/ofbiz-framework/commit/565cc8fe8270ef1f0e35f02c81e30bacc66a469b",
        "bug_id": "ofbiz-framework_67",
        "file": [
            {
                "sha": "aac7f36c8c4bda73c5df729d90a5c4aa8b22cdcd",
                "filename": "applications/party/src/org/ofbiz/party/party/PartyServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/dd5f38fc62833a21a27eacfed710b26fa6d8aa14/applications/party/src/org/ofbiz/party/party/PartyServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/dd5f38fc62833a21a27eacfed710b26fa6d8aa14/applications/party/src/org/ofbiz/party/party/PartyServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/src/org/ofbiz/party/party/PartyServices.java?ref=dd5f38fc62833a21a27eacfed710b26fa6d8aa14",
                "patch": "@@ -481,7 +481,7 @@\n             return ServiceUtil.returnError(errMsg);\n         }\n \n-        if (!context.get(\"statusId\").equals(oldStatusId)) {\n+        if (UtilValidate.isNotEmpty(context.get(\"statusId\")) && !context.get(\"statusId\").equals(oldStatusId)) {\n             try {\n                 dispatcher.runSync(\"setPartyStatus\", UtilMisc.toMap(\"partyId\", partyId, \"statusId\", context.get(\"statusId\"), \"userLogin\", context.get(\"userLogin\")));\n             } catch (GenericServiceException e) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "fix test to avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@898721 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/cbdb5a1097bd186cc2b6c23c4577b1266e07737b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/cbe1eb696406ba291e9b32bfbd7d2bb3176f562f",
        "bug_id": "ofbiz-framework_68",
        "file": [
            {
                "sha": "151daf4ea49aef6f606b2d744a1fd76f4435c3e9",
                "filename": "framework/common/src/org/ofbiz/common/preferences/PreferenceServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/cbdb5a1097bd186cc2b6c23c4577b1266e07737b/framework/common/src/org/ofbiz/common/preferences/PreferenceServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/cbdb5a1097bd186cc2b6c23c4577b1266e07737b/framework/common/src/org/ofbiz/common/preferences/PreferenceServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/src/org/ofbiz/common/preferences/PreferenceServices.java?ref=cbdb5a1097bd186cc2b6c23c4577b1266e07737b",
                "patch": "@@ -144,7 +144,7 @@\n         Map generalProperties = UtilProperties.getProperties(\"general\");\n         while (it.hasNext()) {\n             Map.Entry pairs = (Map.Entry) it.next();\n-            if (pairs.getValue().equals(\"DEFAULT\")) {\n+            if (\"DEFAULT\".equals(pairs.getValue())) {\n                 if (UtilValidate.isNotEmpty(generalProperties.get(pairs.getKey()))) {\n                     userPrefMap.put((String) pairs.getKey(), generalProperties.get(pairs.getKey()));\n                 }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Avoid NPE - Patch from Akash Jain (Thanks!)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@896420 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/62ba20b14b12c51cdfce0f78ff63a413b382c282",
        "parent": "https://github.com/apache/ofbiz-framework/commit/618740ee1f817044e78748487f2c1b520c0fee18",
        "bug_id": "ofbiz-framework_69",
        "file": [
            {
                "sha": "10f41c6b6a83bf82f8c594ada6a48c20256746bd",
                "filename": "applications/product/src/org/ofbiz/product/category/CategoryServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/62ba20b14b12c51cdfce0f78ff63a413b382c282/applications/product/src/org/ofbiz/product/category/CategoryServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/62ba20b14b12c51cdfce0f78ff63a413b382c282/applications/product/src/org/ofbiz/product/category/CategoryServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/category/CategoryServices.java?ref=62ba20b14b12c51cdfce0f78ff63a413b382c282",
                "patch": "@@ -270,7 +270,9 @@ private static String getCategoryFindEntityName(Delegator delegator, List<String\n \n                     // get only between low and high indexes\n                     if (limitView) {\n-                        productCategoryMembers = productCategoryMembers.subList(lowIndex-1, highIndex);\n+                        if (UtilValidate.isNotEmpty(productCategoryMembers)) {\n+                            productCategoryMembers = productCategoryMembers.subList(lowIndex-1, highIndex);\n+                        }\n                     } else {\n                         lowIndex = 1;\n                         highIndex = listSize;",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Correct NPE fix (amends r893656, thanks to Scott)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@893669 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c03977914b8fa64f648957cf917b282967aded01",
        "parent": "https://github.com/apache/ofbiz-framework/commit/e556c70ca1bf850e0b66a4f1b5f7538c9922b016",
        "bug_id": "ofbiz-framework_70",
        "file": [
            {
                "sha": "7403d16671ac038c929d2567822eb16dd39e2c62",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c03977914b8fa64f648957cf917b282967aded01/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c03977914b8fa64f648957cf917b282967aded01/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "status": "modified",
                "changes": 10,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java?ref=c03977914b8fa64f648957cf917b282967aded01",
                "patch": "@@ -716,16 +716,16 @@ protected ShoppingCartItem(GenericValue product, Map additionalProductFeatureAnd\n         if (parentProduct != null)\n             this.parentProductId = _parentProduct.getString(\"productId\");\n         if (UtilValidate.isEmpty(itemType)) {\n-            if (UtilValidate.isNotEmpty(_product)) {\n-                if (_product.getString(\"productTypeId\").equals(\"ASSET_USAGE\")) {\n+            if (UtilValidate.isNotEmpty(_product.getString(\"productTypeId\"))) {\n+                if (\"ASSET_USAGE\".equals(_product.getString(\"productTypeId\"))) {\n                     this.itemType = \"RENTAL_ORDER_ITEM\";  // will create additional workeffort/asset usage records\n                 } else {\n                     this.itemType = \"PRODUCT_ORDER_ITEM\";\n                 }\n             } else {\n-        \tDebug.logError(\"Error calling ShoppingCartItem (trying to creates new ShoppingCartItem object).\" +\n-        \t\t\t\" Check that there is a type for this product \", module);\n-        \treturn;\n+                Debug.logError(\"Error calling ShoppingCartItem (trying to creates new ShoppingCartItem object).\" +\n+                                \" Check that there is a type for this product \", module);\n+                return;\n             }\n         } else {\n             this.itemType = itemType;",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Improved code to avoid NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@884003 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/9086c575238f771c13e61a56a267928ffb58e7db",
        "parent": "https://github.com/apache/ofbiz-framework/commit/88465680062885beb541b5ee8aa710dfebe47546",
        "bug_id": "ofbiz-framework_71",
        "file": [
            {
                "sha": "e995558e7a613eb43187749b2544cec264660ab0",
                "filename": "specialpurpose/ebay/src/org/ofbiz/ebay/EbayOrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/9086c575238f771c13e61a56a267928ffb58e7db/specialpurpose/ebay/src/org/ofbiz/ebay/EbayOrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/9086c575238f771c13e61a56a267928ffb58e7db/specialpurpose/ebay/src/org/ofbiz/ebay/EbayOrderServices.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/ebay/src/org/ofbiz/ebay/EbayOrderServices.java?ref=9086c575238f771c13e61a56a267928ffb58e7db",
                "patch": "@@ -1151,7 +1151,10 @@\n                 // create new party's contact information\n                 if (UtilValidate.isEmpty(contactMechId)) {\n                     Map buyerCtx = (Map) context.get(\"buyerCtx\");\n-                    String eiasTokenBuyer = (String) buyerCtx.get(\"eiasTokenBuyer\");\n+                    String eiasTokenBuyer = null;\n+                    if (UtilValidate.isNotEmpty(buyerCtx)) {\n+                        eiasTokenBuyer = (String) buyerCtx.get(\"eiasTokenBuyer\");\n+                    }    \n                     Debug.logInfo(\"Creating new postal address for party: \" + partyId, module);\n                     contactMechId = EbayHelper.createAddress(dispatcher, partyId, userLogin, \"SHIPPING_LOCATION\", shippingAddressCtx);\n                     if (UtilValidate.isEmpty(contactMechId)) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Secure r830458 (avoid NPE)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@830477 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a686aa38a0e6ef8de16ebaacd2d701c4eff8d06a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/7c8b20c6ee10857ef40dd65cd399d9ab517285de",
        "bug_id": "ofbiz-framework_72",
        "file": [
            {
                "sha": "5a38a0f453442046c7adcad00804500d6584612f",
                "filename": "specialpurpose/pos/src/org/ofbiz/pos/screen/ClientProfile.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a686aa38a0e6ef8de16ebaacd2d701c4eff8d06a/specialpurpose/pos/src/org/ofbiz/pos/screen/ClientProfile.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a686aa38a0e6ef8de16ebaacd2d701c4eff8d06a/specialpurpose/pos/src/org/ofbiz/pos/screen/ClientProfile.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/pos/src/org/ofbiz/pos/screen/ClientProfile.java?ref=a686aa38a0e6ef8de16ebaacd2d701c4eff8d06a",
                "patch": "@@ -310,7 +310,7 @@ public void actionPerformed(ActionEvent e) {\n             String email = clientInfos.length > 1 ? clientInfos[1] : \"\";\r\n             String phone = clientInfos.length > 2 ? clientInfos[2] : \"\";\r\n             String card = clientInfos.length > 3 ? clientInfos[3] : \"\";\r\n-            if (SWIP_WITH_CARD &&  card.startsWith(START_SENTINEL) && card.endsWith(END_SENTINEL)) {\r\n+            if (UtilValidate.isNotEmpty(card) && SWIP_WITH_CARD &&  card.startsWith(START_SENTINEL) && card.endsWith(END_SENTINEL)) {\r\n                 card = card.substring(1, card.length() - 1);\r\n             }                    \r\n             m_nameEdit.setText(name);\r",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Another NPE, UserLogin may not have an associated party.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@820787 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2275d32ecc0a3f4f36bbdd9af21bf8780a6db7a1",
        "parent": "https://github.com/apache/ofbiz-framework/commit/304503d6a1d61b8fcc3971caada14374a7de7983",
        "bug_id": "ofbiz-framework_73",
        "file": [
            {
                "sha": "38ecb2761559ab0c9ea6f27760b1836756951abc",
                "filename": "applications/order/webapp/ordermgr/order/ordernotes.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2275d32ecc0a3f4f36bbdd9af21bf8780a6db7a1/applications/order/webapp/ordermgr/order/ordernotes.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2275d32ecc0a3f4f36bbdd9af21bf8780a6db7a1/applications/order/webapp/ordermgr/order/ordernotes.ftl",
                "status": "modified",
                "changes": 6,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/order/ordernotes.ftl?ref=2275d32ecc0a3f4f36bbdd9af21bf8780a6db7a1",
                "patch": "@@ -38,7 +38,9 @@ under the License.\n               <#list orderNotes as note>\n                 <tr>\n                   <td valign=\"top\" width=\"35%\">\n-                    <div>&nbsp;<span class=\"label\">${uiLabelMap.CommonBy}</span>&nbsp;${Static[\"org.ofbiz.party.party.PartyHelper\"].getPartyName(delegator, note.noteParty, true)}</div>\n+                    <#if note.noteParty?has_content>\n+                      <div>&nbsp;<span class=\"label\">${uiLabelMap.CommonBy}</span>&nbsp;${Static[\"org.ofbiz.party.party.PartyHelper\"].getPartyName(delegator, note.noteParty, true)}</div>\n+                    </#if>\n                     <div>&nbsp;<span class=\"label\">${uiLabelMap.CommonAt}</span>&nbsp;${note.noteDateTime?string?if_exists}</div>\n                   </td>\n                   <td valign=\"top\" width=\"50%\">\n@@ -78,4 +80,4 @@ under the License.\n       </table>\n     </div>\n </div>\n-</#if>\n\\ No newline at end of file\n+</#if>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix to prevent NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@812120 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/0b0e5143d79d71ff0934c082035bc635241d0f51",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3b055daffc9d677a103e0d4bef7a92a10479ae07",
        "bug_id": "ofbiz-framework_74",
        "file": [
            {
                "sha": "9f29c10d768811b976066d7ec31d0eac276ee2c3",
                "filename": "framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0b0e5143d79d71ff0934c082035bc635241d0f51/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0b0e5143d79d71ff0934c082035bc635241d0f51/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java?ref=0b0e5143d79d71ff0934c082035bc635241d0f51",
                "patch": "@@ -2289,7 +2289,9 @@ public void renderImageField(Appendable writer, Map<String, Object> context, Ima\n             width = Integer.toString(imageField.getWidth());\n         }\n \n-        height = Integer.toString(imageField.getHeight());\n+        if (imageField.getHeight() != null) {\n+            height = Integer.toString(imageField.getHeight());\n+        }\n \n         String event = modelFormField.getEvent();\n         String action = modelFormField.getAction(context);",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixes to prevent NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@810404 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b8b082237a51daf3ae264846a7a64ddf9098b3c6",
        "parent": "https://github.com/apache/ofbiz-framework/commit/796107bdc247fb610eab7ede2bb2a4288614bd9b",
        "bug_id": "ofbiz-framework_75",
        "file": [
            {
                "sha": "0dd402c6e293358ec8d92d126d2204bc5e9c5df6",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b8b082237a51daf3ae264846a7a64ddf9098b3c6/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b8b082237a51daf3ae264846a7a64ddf9098b3c6/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java?ref=b8b082237a51daf3ae264846a7a64ddf9098b3c6",
                "patch": "@@ -775,7 +775,9 @@ public BigDecimal getQuantityMultiplier() {\n      *\n      */\n     public void setQuantityMultiplier(BigDecimal quantityMultiplier) {\n-        this.quantityMultiplier = quantityMultiplier;\n+        if (quantityMultiplier != null) {\n+            this.quantityMultiplier = quantityMultiplier;\n+        }\n     }\n \n     /** Getter for property ruleApplied.\n@@ -807,7 +809,9 @@ public BigDecimal getScrapFactor() {\n      *\n      */\n     public void setScrapFactor(BigDecimal scrapFactor) {\n-        this.scrapFactor = scrapFactor;\n+        if (scrapFactor != null) {\n+            this.scrapFactor = scrapFactor;\n+        }\n     }\n \n     /** Getter for property childrenNodes.",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "correction in testing for empty...could cause a NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@810019 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/fe0c90452e4c295661b7cc26f1180918e0e316a2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/7a28b8b75a2b97d3ef054c8bd1419b6dcd580542",
        "bug_id": "ofbiz-framework_76",
        "file": [
            {
                "sha": "b12190c677fdd70f2b7035d44c8f5e6794aa094d",
                "filename": "framework/widget/src/org/ofbiz/widget/screen/ModelScreenWidget.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/fe0c90452e4c295661b7cc26f1180918e0e316a2/framework/widget/src/org/ofbiz/widget/screen/ModelScreenWidget.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/fe0c90452e4c295661b7cc26f1180918e0e316a2/framework/widget/src/org/ofbiz/widget/screen/ModelScreenWidget.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/screen/ModelScreenWidget.java?ref=fe0c90452e4c295661b7cc26f1180918e0e316a2",
                "patch": "@@ -1109,7 +1109,7 @@ public void renderWidgetString(Appendable writer, Map<String, Object> context, S\n                 if (dataResource != null) {\n                     mimeTypeId = dataResource.getString(\"mimeTypeId\");\n                 }\n-                if (UtilValidate.isNotEmpty(content.get(\"mimeTypeId\"))) {\n+                if (UtilValidate.isNotEmpty(content)) {\n                     mimeTypeId = content.getString(\"mimeTypeId\");\n                 }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Adding check to avoid NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@801882 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/951d74cc23c9a3ebf51f63685f1e00ac25eac6df",
        "parent": "https://github.com/apache/ofbiz-framework/commit/0a18b78a725cb5b36fd06ece8b216e1e4247bae8",
        "bug_id": "ofbiz-framework_77",
        "file": [
            {
                "sha": "e6ea15f69e33f86fdec015e4c3d5618b5d78d62e",
                "filename": "applications/accounting/webapp/accounting/WEB-INF/actions/payment/ListNotAppliedInvoices.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/951d74cc23c9a3ebf51f63685f1e00ac25eac6df/applications/accounting/webapp/accounting/WEB-INF/actions/payment/ListNotAppliedInvoices.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/951d74cc23c9a3ebf51f63685f1e00ac25eac6df/applications/accounting/webapp/accounting/WEB-INF/actions/payment/ListNotAppliedInvoices.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/webapp/accounting/WEB-INF/actions/payment/ListNotAppliedInvoices.groovy?ref=951d74cc23c9a3ebf51f63685f1e00ac25eac6df",
                "patch": "@@ -65,7 +65,7 @@ List getInvoices(List invoices, boolean actual) {\n         invoicesList = [];  // to pass back to the screeen list of unapplied invoices\n         paymentApplied = PaymentWorker.getPaymentApplied(payment);\n         paymentToApply = payment.getBigDecimal(\"amount\").setScale(decimals,rounding).subtract(paymentApplied);\n-        if (actual) {\n+        if (actual && payment.actualCurrencyAmount) {\n             paymentToApply = payment.getBigDecimal(\"actualCurrencyAmount\").setScale(decimals,rounding).subtract(paymentApplied);\n         }\n         invoices.each { invoice ->",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Initialize variable so avoid NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@797552 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/7c046a7805a39b088a8a4350717249d99d79b5a5",
        "parent": "https://github.com/apache/ofbiz-framework/commit/05b4cb624cc7a29cb7c877c4dfb3d2bae7efe19c",
        "bug_id": "ofbiz-framework_78",
        "file": [
            {
                "sha": "e2409f82fdec6e6edddd7d146c6cb4757f9002e8",
                "filename": "applications/accounting/webapp/accounting/WEB-INF/actions/reports/GlAccountTrialBalance.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7c046a7805a39b088a8a4350717249d99d79b5a5/applications/accounting/webapp/accounting/WEB-INF/actions/reports/GlAccountTrialBalance.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7c046a7805a39b088a8a4350717249d99d79b5a5/applications/accounting/webapp/accounting/WEB-INF/actions/reports/GlAccountTrialBalance.groovy",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/webapp/accounting/WEB-INF/actions/reports/GlAccountTrialBalance.groovy?ref=7c046a7805a39b088a8a4350717249d99d79b5a5",
                "patch": "@@ -55,9 +55,11 @@ if (organizationPartyId) {\n         if (UtilValidate.isNotEmpty(previousTimePeriod)) {\n             glAccountHistory = delegator.findOne(\"GlAccountHistory\", \n                     [customTimePeriodId : previousTimePeriod.customTimePeriodId, glAccountId : parameters.glAccountId, organizationPartyId : organizationPartyId], false);\n-            if (glAccountHistory) {\n+            if (glAccountHistory && glAccountHistory.endingBalance != null) {\n                 context.openingBalance = glAccountHistory.endingBalance;\n                 balanceOfTheAcctgForYear = glAccountHistory.endingBalance;\n+            } else {\n+                context.openingBalance = BigDecimal.ZERO;\n             }\n         }\n     }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixes for NPE happening when condValue is not set.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@795787 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6a9f5ee8ddf7320419ed31fadaf487ac3ca3f722",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c3f11225ea25f9feb48ff5c88356394a0aba2445",
        "bug_id": "ofbiz-framework_79",
        "file": [
            {
                "sha": "395804733ef85affce0ccbb9a6d61904f0c31c4d",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/product/ProductPromoWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a9f5ee8ddf7320419ed31fadaf487ac3ca3f722/applications/order/src/org/ofbiz/order/shoppingcart/product/ProductPromoWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a9f5ee8ddf7320419ed31fadaf487ac3ca3f722/applications/order/src/org/ofbiz/order/shoppingcart/product/ProductPromoWorker.java",
                "status": "modified",
                "changes": 122,
                "additions": 66,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/product/ProductPromoWorker.java?ref=6a9f5ee8ddf7320419ed31fadaf487ac3ca3f722",
                "patch": "@@ -837,32 +837,34 @@ protected static boolean checkCondition(GenericValue productPromoCond, ShoppingC\n             }\n         } else if (\"PPIP_PRODUCT_TOTAL\".equals(inputParamEnumId)) {\n             // this type of condition allows items involved to be involved in other quantity consuming cond/action, and does pro-rate the price\n-            BigDecimal amountNeeded = new BigDecimal(condValue);\n-            BigDecimal amountAvailable = BigDecimal.ZERO;\n-\n-            // Debug.logInfo(\"Doing Amount Not Counted Cond with Value: \" + amountNeeded, module);\n-\n-            Set productIds = ProductPromoWorker.getPromoRuleCondProductIds(productPromoCond, delegator, nowTimestamp);\n-\n-            List lineOrderedByBasePriceList = cart.getLineListOrderedByBasePrice(false);\n-            Iterator lineOrderedByBasePriceIter = lineOrderedByBasePriceList.iterator();\n-            while (lineOrderedByBasePriceIter.hasNext()) {\n-                ShoppingCartItem cartItem = (ShoppingCartItem) lineOrderedByBasePriceIter.next();\n-                // only include if it is in the productId Set for this check and if it is not a Promo (GWP) item\n-                GenericValue product = cartItem.getProduct();\n-                String parentProductId = cartItem.getParentProductId();\n-                if (!cartItem.getIsPromo() &&\n-                        (productIds.contains(cartItem.getProductId()) || (parentProductId != null && productIds.contains(parentProductId))) &&\n-                        (product == null || !\"N\".equals(product.getString(\"includeInPromotions\")))) {\n-\n-                    // just count the entire sub-total of the item\n-                    amountAvailable = amountAvailable.add(cartItem.getItemSubTotal());\n+            if (UtilValidate.isNotEmpty(condValue)) {\n+                BigDecimal amountNeeded = new BigDecimal(condValue);\n+                BigDecimal amountAvailable = BigDecimal.ZERO;\n+    \n+                // Debug.logInfo(\"Doing Amount Not Counted Cond with Value: \" + amountNeeded, module);\n+    \n+                Set productIds = ProductPromoWorker.getPromoRuleCondProductIds(productPromoCond, delegator, nowTimestamp);\n+    \n+                List lineOrderedByBasePriceList = cart.getLineListOrderedByBasePrice(false);\n+                Iterator lineOrderedByBasePriceIter = lineOrderedByBasePriceList.iterator();\n+                while (lineOrderedByBasePriceIter.hasNext()) {\n+                    ShoppingCartItem cartItem = (ShoppingCartItem) lineOrderedByBasePriceIter.next();\n+                    // only include if it is in the productId Set for this check and if it is not a Promo (GWP) item\n+                    GenericValue product = cartItem.getProduct();\n+                    String parentProductId = cartItem.getParentProductId();\n+                    if (!cartItem.getIsPromo() &&\n+                            (productIds.contains(cartItem.getProductId()) || (parentProductId != null && productIds.contains(parentProductId))) &&\n+                            (product == null || !\"N\".equals(product.getString(\"includeInPromotions\")))) {\n+    \n+                        // just count the entire sub-total of the item\n+                        amountAvailable = amountAvailable.add(cartItem.getItemSubTotal());\n+                    }\n                 }\n+    \n+                // Debug.logInfo(\"Doing Amount Not Counted Cond with Value after finding applicable cart lines: \" + amountNeeded, module);\n+    \n+                compareBase = Integer.valueOf(amountAvailable.compareTo(amountNeeded));\n             }\n-\n-            // Debug.logInfo(\"Doing Amount Not Counted Cond with Value after finding applicable cart lines: \" + amountNeeded, module);\n-\n-            compareBase = Integer.valueOf(amountAvailable.compareTo(amountNeeded));\n         } else if (\"PPIP_PRODUCT_QUANT\".equals(inputParamEnumId)) {\n             // for this type of promo force the operatorEnumId = PPC_EQ, effectively ignore that setting because the comparison is implied in the code\n             operatorEnumId = \"PPC_EQ\";\n@@ -958,20 +960,22 @@ protected static boolean checkCondition(GenericValue productPromoCond, ShoppingC\n             }\n         */\n         } else if (\"PPIP_NEW_ACCT\".equals(inputParamEnumId)) {\n-            BigDecimal acctDays = cart.getPartyDaysSinceCreated(nowTimestamp);\n-            if (acctDays == null) {\n-                // condition always fails if we don't know how many days since account created\n-                return false;\n+            if (UtilValidate.isNotEmpty(condValue)) {\n+                BigDecimal acctDays = cart.getPartyDaysSinceCreated(nowTimestamp);\n+                if (acctDays == null) {\n+                    // condition always fails if we don't know how many days since account created\n+                    return false;\n+                }\n+                compareBase = acctDays.compareTo(new BigDecimal(condValue));\n             }\n-            compareBase = acctDays.compareTo(new BigDecimal(condValue));\n         } else if (\"PPIP_PARTY_ID\".equals(inputParamEnumId)) {\n-            if (partyId != null) {\n+            if (partyId != null && UtilValidate.isNotEmpty(condValue)) {\n                 compareBase = Integer.valueOf(partyId.compareTo(condValue));\n             } else {\n                 compareBase = Integer.valueOf(1);\n             }\n         } else if (\"PPIP_PARTY_GRP_MEM\".equals(inputParamEnumId)) {\n-            if (UtilValidate.isEmpty(partyId)) {\n+            if (UtilValidate.isEmpty(partyId) || UtilValidate.isEmpty(condValue)) {\n                 compareBase = Integer.valueOf(1);\n             } else {\n                 String groupPartyId = condValue;\n@@ -991,7 +995,7 @@ protected static boolean checkCondition(GenericValue productPromoCond, ShoppingC\n                 }\n             }\n         } else if (\"PPIP_PARTY_CLASS\".equals(inputParamEnumId)) {\n-            if (UtilValidate.isEmpty(partyId)) {\n+            if (UtilValidate.isEmpty(partyId) || UtilValidate.isEmpty(condValue)) {\n                 compareBase = Integer.valueOf(1);\n             } else {\n                 String partyClassificationGroupId = condValue;\n@@ -1007,7 +1011,7 @@ protected static boolean checkCondition(GenericValue productPromoCond, ShoppingC\n                 }\n             }\n         } else if (\"PPIP_ROLE_TYPE\".equals(inputParamEnumId)) {\n-            if (partyId != null) {\n+            if (partyId != null && UtilValidate.isNotEmpty(condValue)) {\n                 // if a PartyRole exists for this partyId and the specified roleTypeId\n                 GenericValue partyRole = delegator.findByPrimaryKeyCache(\"PartyRole\",\n                         UtilMisc.toMap(\"partyId\", partyId, \"roleTypeId\", condValue));\n@@ -1022,12 +1026,14 @@ protected static boolean checkCondition(GenericValue productPromoCond, ShoppingC\n                 compareBase = Integer.valueOf(1);\n             }\n         } else if (\"PPIP_ORDER_TOTAL\".equals(inputParamEnumId)) {\n-            BigDecimal orderSubTotal = cart.getSubTotalForPromotions();\n-            if (Debug.verboseOn()) Debug.logVerbose(\"Doing order total compare: orderSubTotal=\" + orderSubTotal, module);\n-            compareBase = Integer.valueOf(orderSubTotal.compareTo(new BigDecimal(condValue)));\n+            if (UtilValidate.isNotEmpty(condValue)) {\n+                BigDecimal orderSubTotal = cart.getSubTotalForPromotions();\n+                if (Debug.verboseOn()) Debug.logVerbose(\"Doing order total compare: orderSubTotal=\" + orderSubTotal, module);\n+                compareBase = Integer.valueOf(orderSubTotal.compareTo(new BigDecimal(condValue)));\n+            }\n         } else if (\"PPIP_ORST_HIST\".equals(inputParamEnumId)) {\n             // description=\"Order sub-total X in last Y Months\"\n-            if (partyId != null && userLogin != null) {\n+            if (partyId != null && userLogin != null && UtilValidate.isNotEmpty(condValue)) {\n                 // call the getOrderedSummaryInformation service to get the sub-total\n                 int monthsToInclude = 12;\n                 if (otherValue != null) {\n@@ -1053,7 +1059,7 @@ protected static boolean checkCondition(GenericValue productPromoCond, ShoppingC\n             }\n         } else if (\"PPIP_ORST_YEAR\".equals(inputParamEnumId)) {\n             // description=\"Order sub-total X since beginning of current year\"\n-            if (partyId != null && userLogin != null) {\n+            if (partyId != null && userLogin != null && UtilValidate.isNotEmpty(condValue)) {\n                 // call the getOrderedSummaryInformation service to get the sub-total\n                 Calendar calendar = Calendar.getInstance();\n                 calendar.setTime(nowTimestamp);\n@@ -1081,7 +1087,7 @@ protected static boolean checkCondition(GenericValue productPromoCond, ShoppingC\n             }\n         } else if (\"PPIP_ORST_LAST_YEAR\".equals(inputParamEnumId)) {\n             // description=\"Order sub-total X since beginning of last year\"\n-            if (partyId != null && userLogin != null) {\n+            if (partyId != null && userLogin != null && UtilValidate.isNotEmpty(condValue)) {\n                 // call the getOrderedSummaryInformation service to get the sub-total\n \n                 Calendar calendar = Calendar.getInstance();\n@@ -1118,27 +1124,31 @@ protected static boolean checkCondition(GenericValue productPromoCond, ShoppingC\n                 return false;\n             }\n         } else if (\"PPIP_RECURRENCE\".equals(inputParamEnumId)) {\n-            compareBase = Integer.valueOf(1);\n-            GenericValue recurrenceInfo = delegator.findByPrimaryKeyCache(\"RecurrenceInfo\", UtilMisc.toMap(\"recurrenceInfoId\", condValue));\n-            if (recurrenceInfo != null) {\n-                RecurrenceInfo recurrence = null;\n-                try {\n-                    recurrence = new RecurrenceInfo(recurrenceInfo);\n-                } catch (RecurrenceInfoException e) {\n-                    Debug.logError(e, module);\n-                }\n-\n-                // check the current recurrence\n-                if (recurrence != null) {\n-                    if (recurrence.isValidCurrent()) {\n-                        compareBase = Integer.valueOf(0);\n+            if (UtilValidate.isNotEmpty(condValue)) {\n+                compareBase = Integer.valueOf(1);\n+                GenericValue recurrenceInfo = delegator.findByPrimaryKeyCache(\"RecurrenceInfo\", UtilMisc.toMap(\"recurrenceInfoId\", condValue));\n+                if (recurrenceInfo != null) {\n+                    RecurrenceInfo recurrence = null;\n+                    try {\n+                        recurrence = new RecurrenceInfo(recurrenceInfo);\n+                    } catch (RecurrenceInfoException e) {\n+                        Debug.logError(e, module);\n+                    }\n+    \n+                    // check the current recurrence\n+                    if (recurrence != null) {\n+                        if (recurrence.isValidCurrent()) {\n+                            compareBase = Integer.valueOf(0);\n+                        }\n                     }\n                 }\n             }\n         } else if (\"PPIP_ORDER_SHIPTOTAL\".equals(inputParamEnumId) && shippingMethod.equals(cart.getShipmentMethodTypeId())) {\n-            BigDecimal orderTotalShipping = cart.getTotalShipping();\n-            if (Debug.verboseOn()) { Debug.logVerbose(\"Doing order total Shipping compare: ordertotalShipping=\" + orderTotalShipping, module); }\n-            compareBase = new Integer(orderTotalShipping.compareTo(new BigDecimal(condValue)));\n+            if (UtilValidate.isNotEmpty(condValue)) {\n+                BigDecimal orderTotalShipping = cart.getTotalShipping();\n+                if (Debug.verboseOn()) { Debug.logVerbose(\"Doing order total Shipping compare: ordertotalShipping=\" + orderTotalShipping, module); }\n+                compareBase = new Integer(orderTotalShipping.compareTo(new BigDecimal(condValue)));\n+            }\n         } else {\n             Debug.logWarning(UtilProperties.getMessage(resource_error,\"OrderAnUnSupportedProductPromoCondInputParameterLhs\", UtilMisc.toMap(\"inputParamEnumId\",productPromoCond.getString(\"inputParamEnumId\")), cart.getLocale()), module);\n             return false;",
                "deletions": 56
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE if statusId is not passed to service.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@782530 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f329bb33aa702aa96d44bd9403322fc28b1d786f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6432ba5a1f94b0edf45de3c38cba180488add243",
        "bug_id": "ofbiz-framework_80",
        "file": [
            {
                "sha": "3eba7ac1f9877cf7d4fe0989a0f1c82608693ac8",
                "filename": "applications/party/src/org/ofbiz/party/party/PartyServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f329bb33aa702aa96d44bd9403322fc28b1d786f/applications/party/src/org/ofbiz/party/party/PartyServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f329bb33aa702aa96d44bd9403322fc28b1d786f/applications/party/src/org/ofbiz/party/party/PartyServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/src/org/ofbiz/party/party/PartyServices.java?ref=f329bb33aa702aa96d44bd9403322fc28b1d786f",
                "patch": "@@ -306,7 +306,7 @@\n             return ServiceUtil.returnError(UtilProperties.getMessage(resource, \"person.update.write_failure\", new Object[] { e.getMessage() }, locale));\n         }\n         \n-        if (!context.get(\"statusId\").equals(oldStatusId)) {\n+        if (UtilValidate.isNotEmpty(context.get(\"statusId\")) && !context.get(\"statusId\").equals(oldStatusId)) {\n             try {\n                 dispatcher.runSync(\"setPartyStatus\", UtilMisc.toMap(\"partyId\", partyId, \"statusId\", context.get(\"statusId\"), \"userLogin\", context.get(\"userLogin\")));\n             } catch (GenericServiceException e) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "fixed NPE reported by Hans\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@781802 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2ff8e61f70d2bd8335f601788f51061bdef12ade",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2dd1225911b8e90d136981e8c09a8124c54e4566",
        "bug_id": "ofbiz-framework_81",
        "file": [
            {
                "sha": "0dc29010622407e8b73c1dfbdab6c279bdb7c2fe",
                "filename": "applications/party/src/org/ofbiz/party/communication/CommunicationEventServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2ff8e61f70d2bd8335f601788f51061bdef12ade/applications/party/src/org/ofbiz/party/communication/CommunicationEventServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2ff8e61f70d2bd8335f601788f51061bdef12ade/applications/party/src/org/ofbiz/party/communication/CommunicationEventServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/src/org/ofbiz/party/communication/CommunicationEventServices.java?ref=2ff8e61f70d2bd8335f601788f51061bdef12ade",
                "patch": "@@ -1220,7 +1220,7 @@ public static String markCommunicationAsRead(HttpServletRequest request, HttpSer\n         } else {\n             pathInfo = null;\n         }\n-        if (pathInfo != null & pathInfo.indexOf(\"/\") > -1) {\n+        if (pathInfo != null && pathInfo.indexOf(\"/\") > -1) {\n             pathParsed = pathInfo.split(\"/\");\n             communicationEventId = pathParsed[0];            \n         }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Misc. improvements to avoid NPE. Patch from Pranay Pandey\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@781018 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c32d886e8dba6e1439a97f122567931ff68d0e12",
        "parent": "https://github.com/apache/ofbiz-framework/commit/7619c0ad5a89d1437cdf7cf50fe40e6a08a0e515",
        "bug_id": "ofbiz-framework_82",
        "file": [
            {
                "sha": "88a61ca7a5126d738bf5deb03a4c142a84ba3d32",
                "filename": "applications/product/src/org/ofbiz/shipment/thirdparty/ups/UpsServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c32d886e8dba6e1439a97f122567931ff68d0e12/applications/product/src/org/ofbiz/shipment/thirdparty/ups/UpsServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c32d886e8dba6e1439a97f122567931ff68d0e12/applications/product/src/org/ofbiz/shipment/thirdparty/ups/UpsServices.java",
                "status": "modified",
                "changes": 17,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/shipment/thirdparty/ups/UpsServices.java?ref=c32d886e8dba6e1439a97f122567931ff68d0e12",
                "patch": "@@ -2371,8 +2371,8 @@ public static String sendUpsRequest(String upsService, String xmlString) throws\n \n             // Child of Shipment: Shipper\n             Element shipperElement = UtilXml.addChildElement(shipmentElement, \"Shipper\", shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipperElement, \"Name\", originPostalAddress.getString(\"toName\"), shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipperElement, \"AttentionName\", originPostalAddress.getString(\"attnName\"), shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipperElement, \"Name\", UtilValidate.isNotEmpty(originPostalAddress.getString(\"toName\")) ? originPostalAddress.getString(\"toName\"): \"\", shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipperElement, \"AttentionName\", UtilValidate.isNotEmpty(originPostalAddress.getString(\"attnName\")) ? originPostalAddress.getString(\"attnName\") : \"\", shipmentConfirmRequestDoc);\n             UtilXml.addChildElementValue(shipperElement, \"PhoneNumber\", originPhoneNumber, shipmentConfirmRequestDoc);\n             UtilXml.addChildElementValue(shipperElement, \"ShipperNumber\", UtilProperties.getPropertyValue(\"shipment\", \"shipment.ups.shipper.number\"), shipmentConfirmRequestDoc);\n \n@@ -2388,8 +2388,8 @@ public static String sendUpsRequest(String upsService, String xmlString) throws\n \n             // Child of Shipment: ShipTo\n             Element shipToElement = UtilXml.addChildElement(shipmentElement, \"ShipTo\", shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipToElement, \"CompanyName\", destPostalAddress.getString(\"toName\"), shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipToElement, \"AttentionName\", destPostalAddress.getString(\"attnName\"), shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipToElement, \"CompanyName\", UtilValidate.isNotEmpty(destPostalAddress.getString(\"toName\")) ? destPostalAddress.getString(\"toName\") : \"\", shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipToElement, \"AttentionName\", UtilValidate.isNotEmpty(destPostalAddress.getString(\"attnName\")) ? destPostalAddress.getString(\"attnName\") : \"\", shipmentConfirmRequestDoc);\n             if (UtilValidate.isNotEmpty(destPhoneNumber)) {\n                 UtilXml.addChildElementValue(shipToElement, \"PhoneNumber\", destPhoneNumber, shipmentConfirmRequestDoc);\n             }\n@@ -2408,8 +2408,8 @@ public static String sendUpsRequest(String upsService, String xmlString) throws\n \n             // Child of Shipment: ShipFrom\n             Element shipFromElement = UtilXml.addChildElement(shipmentElement, \"ShipFrom\", shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipFromElement, \"CompanyName\", originPostalAddress.getString(\"toName\"), shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipFromElement, \"AttentionName\", originPostalAddress.getString(\"attnName\"), shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipFromElement, \"CompanyName\", UtilValidate.isNotEmpty(originPostalAddress.getString(\"toName\")) ? originPostalAddress.getString(\"toName\") : \"\", shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipFromElement, \"AttentionName\", UtilValidate.isNotEmpty(originPostalAddress.getString(\"attnName\")) ? originPostalAddress.getString(\"attnName\") : \"\", shipmentConfirmRequestDoc);\n             UtilXml.addChildElementValue(shipFromElement, \"PhoneNumber\", originPhoneNumber, shipmentConfirmRequestDoc);\n             Element shipFromAddressElement = UtilXml.addChildElement(shipFromElement, \"Address\", shipmentConfirmRequestDoc);\n             UtilXml.addChildElementValue(shipFromAddressElement, \"AddressLine1\", originPostalAddress.getString(\"address1\"), shipmentConfirmRequestDoc);\n@@ -2510,6 +2510,11 @@ public static String sendUpsRequest(String upsService, String xmlString) throws\n                 return ServiceUtil.returnError(excErrMsg);\n             }\n \n+            Map resultMap = handleUpsShipmentConfirmResponse(shipmentConfirmResponseDocument, shipmentRouteSegment);\n+            if (\"error\".equals(resultMap.get(\"responseMessage\"))){\n+                List errorMessageList = (List) resultMap.get(\"errorMessageList\");\n+                return ServiceUtil.returnError(errorMessageList);\n+            }\n             //Shipment Accept Request follows\n             if (!\"UPS\".equals(shipmentRouteSegment.getString(\"carrierPartyId\"))) {\n                 return ServiceUtil.returnError(\"ERROR: The Carrier for ShipmentRouteSegment \" + shipmentRouteSegmentId + \" of Shipment \" + shipmentId + \", is not UPS.\");",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "instead of a NPE show an error message\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@778984 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/59830ab104eead4979da38af4ec64023ff7b3648",
        "parent": "https://github.com/apache/ofbiz-framework/commit/96df37185434304127640a2afffa7b9d70deb4e3",
        "bug_id": "ofbiz-framework_83",
        "file": [
            {
                "sha": "f9bd4df77055fd84d0fbc7ada1cf51bef6ea621c",
                "filename": "framework/entity/src/org/ofbiz/entity/finder/EntityFinderUtil.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/59830ab104eead4979da38af4ec64023ff7b3648/framework/entity/src/org/ofbiz/entity/finder/EntityFinderUtil.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/59830ab104eead4979da38af4ec64023ff7b3648/framework/entity/src/org/ofbiz/entity/finder/EntityFinderUtil.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/finder/EntityFinderUtil.java?ref=59830ab104eead4979da38af4ec64023ff7b3648",
                "patch": "@@ -219,6 +219,10 @@ public EntityCondition createCondition(Map<String, ? extends Object> context, St\n                     value = StringUtil.split((String)value, delim);\n                 }\n             }\n+            \n+            if(modelEntity.getField(fieldName) == null) {\n+                throw new IllegalArgumentException(\"Error in Entity Find: could not find field [\" + fieldName + \"] in entity with name [\" + entityName + \"]\");\n+            }\n \n             // don't convert the field to the desired type if this is an IN or BETWEEN operator and we have a Collection\n             if (!((operator == EntityOperator.IN || operator == EntityOperator.BETWEEN)",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE reported by Hans Bakker in OFBIZ-2345\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@767860 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b9e73fbfbd304d9a85fed9da923e6dfb7f5f64e7",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b0d60ef2d01ced2ec2c2aa186b48f53a3d55be77",
        "bug_id": "ofbiz-framework_84",
        "file": [
            {
                "sha": "1aaece7eec559c3dc3d3fffa3936f370d29cb44d",
                "filename": "framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b9e73fbfbd304d9a85fed9da923e6dfb7f5f64e7/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b9e73fbfbd304d9a85fed9da923e6dfb7f5f64e7/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/MacroFormRenderer.java?ref=b9e73fbfbd304d9a85fed9da923e6dfb7f5f64e7",
                "patch": "@@ -768,7 +768,7 @@ public void renderCheckField(Appendable writer, Map<String, Object> context, Che\n         sr.append(\"\\\" alert=\\\"\");\n         sr.append(alert);\n         sr.append(\"\\\" allChecked=\");\n-        sr.append(Boolean.toString(allChecked));\n+        sr.append((allChecked != null? Boolean.toString(allChecked): \"\\\"\\\"\"));\n         sr.append(\" currentValue=\\\"\");\n         sr.append(currentValue);\n         sr.append(\"\\\" name=\\\"\");",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "give error message instead of NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@761178 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f1a117cced093bab7c128e9d25a4b5801f5df9eb",
        "parent": "https://github.com/apache/ofbiz-framework/commit/42a3130c65e716b4ede2ce36c487821c4ccd664b",
        "bug_id": "ofbiz-framework_85",
        "file": [
            {
                "sha": "88b9cff2bbb80c959071aa70def3abc70be7899e",
                "filename": "framework/widget/src/org/ofbiz/widget/form/FormFactory.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f1a117cced093bab7c128e9d25a4b5801f5df9eb/framework/widget/src/org/ofbiz/widget/form/FormFactory.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f1a117cced093bab7c128e9d25a4b5801f5df9eb/framework/widget/src/org/ofbiz/widget/form/FormFactory.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/FormFactory.java?ref=f1a117cced093bab7c128e9d25a4b5801f5df9eb",
                "patch": "@@ -79,6 +79,9 @@ public static ModelForm getFormFromLocation(String resourceName, String formName\n                     */\n                     URL formFileUrl = FlexibleLocation.resolveLocation(resourceName); //, loader);\n                     Document formFileDoc = UtilXml.readXmlDocument(formFileUrl, true);\n+                    if (formFileDoc == null) {\n+                        throw new IllegalArgumentException(\"Could not find resource [\" + resourceName + \"]\");\n+                    }\n                     modelForm = createModelForm(formFileDoc, entityModelReader, dispatchContext, resourceName, formName);\n                     formLocationCache.put(cacheKey, modelForm);\n                 }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "fix NPE error reported by BJ Freeman in the mailing list\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@743998 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8c3bf300e49b0abd996a02874bcac818ce712095",
        "parent": "https://github.com/apache/ofbiz-framework/commit/17bdfd7cf204f769f0e42ab1d6a7d261099cc661",
        "bug_id": "ofbiz-framework_86",
        "file": [
            {
                "sha": "a86663927bd67dbc2e3f4b2848b87489fa04e518",
                "filename": "framework/common/webcommon/WEB-INF/actions/includes/ShowPortalPage.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8c3bf300e49b0abd996a02874bcac818ce712095/framework/common/webcommon/WEB-INF/actions/includes/ShowPortalPage.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8c3bf300e49b0abd996a02874bcac818ce712095/framework/common/webcommon/WEB-INF/actions/includes/ShowPortalPage.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/webcommon/WEB-INF/actions/includes/ShowPortalPage.groovy?ref=8c3bf300e49b0abd996a02874bcac818ce712095",
                "patch": "@@ -29,7 +29,7 @@ if(!portalPageId){\n \n if (portalPageId) {\n     portalPage = delegator.findByPrimaryKey(\"PortalPage\", [portalPageId : portalPageId]);\n-    if (portalPage.parentPortalPageId && !parameters.parentPortalPageId) {\n+    if (portalPage && portalPage.parentPortalPageId && !parameters.parentPortalPageId) {\n     parameters.parentPortalPageId = portalPage.parentPortalPageId;\n     }\n }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix a NPE found by chance\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@742565 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ee37c6132748117f2e90f3b49b12b155af4a4dea",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6075d207859ec71e7a9338130d3d823c95a06620",
        "bug_id": "ofbiz-framework_87",
        "file": [
            {
                "sha": "e896a1a18b949b06b3d7fb772b7ae47779514c4c",
                "filename": "applications/product/webapp/catalog/WEB-INF/actions/product/EditProductContentContent.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ee37c6132748117f2e90f3b49b12b155af4a4dea/applications/product/webapp/catalog/WEB-INF/actions/product/EditProductContentContent.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ee37c6132748117f2e90f3b49b12b155af4a4dea/applications/product/webapp/catalog/WEB-INF/actions/product/EditProductContentContent.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/catalog/WEB-INF/actions/product/EditProductContentContent.groovy?ref=ee37c6132748117f2e90f3b49b12b155af4a4dea",
                "patch": "@@ -119,7 +119,7 @@ if (\"FULFILLMENT_EMAIL\".equals(productContentTypeId)) {\n     context.downloadData = downloadData;\n } else if (\"FULFILLMENT_EXTERNAL\".equals(productContentTypeId)) {\n     context.contentFormName = \"EditProductContentExternal\";\n-} else if (productContentTypeId.indexOf(\"ADDITIONAL_IMAGE\") > -1) {\n+} else if (productContentTypeId && productContentTypeId.indexOf(\"ADDITIONAL_IMAGE\") > -1) {\n     context.contentFormName = \"EditProductAdditionalImageContent\";\n } else {\n     //Assume it is a generic simple text content",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE reported by Sneha Chaturvedi on the user mailing list\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@741974 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/078a08692bef22964127711f76e7485384b0cfab",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3c8e2cdda30e6f182450396be5d29897b70a3cf8",
        "bug_id": "ofbiz-framework_88",
        "file": [
            {
                "sha": "da0e71ea905fa87b01cc6a054b7bea5fc2a67fa5",
                "filename": "framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/078a08692bef22964127711f76e7485384b0cfab/framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/078a08692bef22964127711f76e7485384b0cfab/framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java?ref=078a08692bef22964127711f76e7485384b0cfab",
                "patch": "@@ -815,7 +815,10 @@ public String makeLink(HttpServletRequest request, HttpServletResponse response,\n         String controlPath = (String) request.getAttribute(\"_CONTROL_PATH_\");\n \n         String requestUri = RequestHandler.getRequestUri(url);\n-        ConfigXMLReader.RequestMap requestMap = controllerConfig.requestMapMap.get(requestUri);\n+        ConfigXMLReader.RequestMap requestMap = null;\n+        if (requestUri != null) {\n+            requestMap = controllerConfig.requestMapMap.get(requestUri);\n+        }\n         \n         StringBuilder newURL = new StringBuilder();\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Cleaned up code to avoid NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@738050 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/349cdfeba8af520c3b8cc1232a04bcabe1309f59",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6a5f00ff364668aae11b73df12a6cadcf083e847",
        "bug_id": "ofbiz-framework_89",
        "file": [
            {
                "sha": "8e55c5c993f8bc6b1caa0aef996d119b565dfa46",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/349cdfeba8af520c3b8cc1232a04bcabe1309f59/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/349cdfeba8af520c3b8cc1232a04bcabe1309f59/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java?ref=349cdfeba8af520c3b8cc1232a04bcabe1309f59",
                "patch": "@@ -552,7 +552,7 @@\n         // create the cart\n         ShoppingCart cart = new ShoppingCart(delegator, productStoreId, locale, currency);\n         // set shopping cart type\n-        if (quote.getString(\"quoteTypeId\").equals(\"PURCHASE_QUOTE\")){\n+        if (\"PURCHASE_QUOTE\".equals(quote.getString(\"quoteTypeId\"))){\n             cart.setOrderType(\"PURCHASE_ORDER\");\n             cart.setBillFromVendorPartyId(quote.getString(\"partyId\"));\n         }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "check for null to avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@729904 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/fb7012e68dc13b1ac9ebd9e623d2901e8172a03d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/4cbfb5de831cf900242d1cd2d3cab97a60af5657",
        "bug_id": "ofbiz-framework_90",
        "file": [
            {
                "sha": "18c1d382fc13a1d8a3f9686fd5d90816fc810ee9",
                "filename": "specialpurpose/projectmgr/webapp/projectmgr/WEB-INF/actions/GanttChart.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/fb7012e68dc13b1ac9ebd9e623d2901e8172a03d/specialpurpose/projectmgr/webapp/projectmgr/WEB-INF/actions/GanttChart.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/fb7012e68dc13b1ac9ebd9e623d2901e8172a03d/specialpurpose/projectmgr/webapp/projectmgr/WEB-INF/actions/GanttChart.groovy",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/projectmgr/webapp/projectmgr/WEB-INF/actions/GanttChart.groovy?ref=fb7012e68dc13b1ac9ebd9e623d2901e8172a03d",
                "patch": "@@ -75,11 +75,11 @@ if (phases){\n                     taskInfo.resource = taskInfo.actualHours + \" Hrs\";\n                 }\n                 double duration = resultTaskInfo.plannedHours;\n-                if (taskInfo.currentStatusId == \"PTS_COMPLETED\") {\n+                if (taskInfo.currentStatusId.equals(\"PTS_COMPLETED\")) {\n                     taskInfo.completion = 100;\n                 } else {\n-                \tif (taskInfo.actualHours) {\n-                \t\ttaskInfo.completion = new BigDecimal(taskInfo.actualHours*100/taskInfo.plannedHours).setScale(0, BigDecimal.ROUND_UP);\n+                \tif (taskInfo.actualHours && taskInfo.plannedHours) {\n+                \t\ttaskInfo.completion = new BigDecimal(taskInfo.actualHours * 100 / taskInfo.plannedHours).setScale(0, BigDecimal.ROUND_UP);\n                 \t} else {\n                 \t\ttaskInfo.completion = 0;\n                 \t}",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed what looks like a potential NPE source\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@677164 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5e54a8a82fb958bbcd0b3a055eae8f6813b9897a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/731d2b6df9b59f4adfb5673d9dd2b80542b29791",
        "bug_id": "ofbiz-framework_91",
        "file": [
            {
                "sha": "895fe925bc47629e9f9166cdb11ab0eaeeb03424",
                "filename": "applications/content/src/org/ofbiz/content/ContentManagementServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5e54a8a82fb958bbcd0b3a055eae8f6813b9897a/applications/content/src/org/ofbiz/content/ContentManagementServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5e54a8a82fb958bbcd0b3a055eae8f6813b9897a/applications/content/src/org/ofbiz/content/ContentManagementServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/ContentManagementServices.java?ref=5e54a8a82fb958bbcd0b3a055eae8f6813b9897a",
                "patch": "@@ -1561,7 +1561,7 @@ public static Map updateContentSubscriptionByProduct(DispatchContext dctx, Map c\n             List listThrusOnly = EntityUtil.filterOutByCondition(listOrdered, EntityCondition.makeCondition(\"purchaseThruDate\", EntityOperator.EQUALS, null));\n             if (listThrusOnly.size() > 0) {\n                 productContent = (GenericValue) listThrusOnly.get(0);   \n-            } else {\n+            } else if (listOrdered.size() > 0) {\n                 productContent = (GenericValue) listOrdered.get(0);   \n             }\n         } catch(GenericEntityException e) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix an NPE, some typos and a label\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@670108 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b08bfae6e32227f9a4367d057a41b0910ef0bb4d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/9f5f3c9fe7c276838f3ee20b9003aa0eea84c69b",
        "bug_id": "ofbiz-framework_92",
        "file": [
            {
                "sha": "3c2e6519e8a8328a369ba30aba884371fffcb39e",
                "filename": "applications/accounting/widget/BillingAccountForms.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b08bfae6e32227f9a4367d057a41b0910ef0bb4d/applications/accounting/widget/BillingAccountForms.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b08bfae6e32227f9a4367d057a41b0910ef0bb4d/applications/accounting/widget/BillingAccountForms.xml",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/widget/BillingAccountForms.xml?ref=b08bfae6e32227f9a4367d057a41b0910ef0bb4d",
                "patch": "@@ -46,7 +46,7 @@ under the License.\n         <field name=\"fromDate\"><display/></field>\n         <field name=\"thruDate\"><display/></field>\n         <field name=\"partyId\"><display/></field>\n-        <field name=\"roleTypeId\"><display-entity entity-name=\"RoleType\"/></field>\n+        <field name=\"roleTypeId\" title=\"${uiLabelMap.AccountingRoleType}\"><display-entity entity-name=\"RoleType\"/></field>\n     </form>\n \n     <form name=\"ListBillingAccountInvoices\" type=\"list\" list-name=\"billingAccountInvoices\" paginate-target=\"BillingAccountInvoices\" default-entity-name=\"Invoice\"\n@@ -100,7 +100,7 @@ under the License.\n     <form name=\"EditBillingAccount\" type=\"single\" target=\"updateBillingAccount\" title=\"\"\n         header-row-style=\"header-row\" default-table-style=\"basic-table\">\n         <actions>\n-            <set field=\"availableBalance\" value=\"${bsh:org.ofbiz.accounting.payment.BillingAccountWorker.getBillingAccountBalance(billingAccount)}\" type=\"BigDecimal\"/>\n+            <set field=\"availableBalance\" value=\"${bsh:billingAccount != null ? org.ofbiz.accounting.payment.BillingAccountWorker.getBillingAccountBalance(billingAccount) : 0}\" type=\"BigDecimal\"/>\n         </actions>\n         <alt-target use-when=\"billingAccount==null\" target=\"createBillingAccount\"/>\n         <auto-fields-service service-name=\"updateBillingAccount\" map-name=\"billingAccount\"/>",
                "deletions": 2
            },
            {
                "sha": "547f4f67e52cb2b66438e5263c1f7f48417d25cf",
                "filename": "framework/base/src/base/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b08bfae6e32227f9a4367d057a41b0910ef0bb4d/framework/base/src/base/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b08bfae6e32227f9a4367d057a41b0910ef0bb4d/framework/base/src/base/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "status": "modified",
                "changes": 10,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/base/org/ofbiz/base/util/string/FlexibleStringExpander.java?ref=b08bfae6e32227f9a4367d057a41b0910ef0bb4d",
                "patch": "@@ -290,10 +290,10 @@ public void appendElement(StringBuilder buffer, Map<String, ? extends Object> co\n                         buffer.append(scriptResult);\n                     }\n                 } else {\n-                    Debug.logWarning(\"BSH scriplet evaluated to null [\" + scriptlet + \"], got no return so inserting nothing.\", module);\n+                    Debug.logWarning(\"BSH scriptlet evaluated to null [\" + scriptlet + \"], got no return so inserting nothing.\", module);\n                 }\n             } catch (EvalError e) {\n-                Debug.logWarning(e, \"Error evaluating BSH scriplet [\" + scriptlet + \"], inserting nothing; error was: \" + e.toString(), module);\n+                Debug.logWarning(e, \"Error evaluating BSH scriptlet [\" + scriptlet + \"], inserting nothing; error was: \" + e.toString(), module);\n             }\n         }\n     }\n@@ -407,7 +407,7 @@ public void handleVariable(String original, int start, int end) {\n         }\n \n         public void handleBsh(String original, int start, int end) {\n-            //run the scriplet and append the result\n+            //run the scriptlet and append the result\n             String scriptlet = original.substring(start, end);\n             try {\n                 Object scriptResult = BshUtil.eval(scriptlet, UtilMisc.makeMapWritable(context));\n@@ -418,10 +418,10 @@ public void handleBsh(String original, int start, int end) {\n                         targetBuffer.append(scriptResult);\n                     }\n                 } else {\n-                    Debug.logWarning(\"BSH scriplet evaluated to null [\" + scriptlet + \"], got no return so inserting nothing.\", module);\n+                    Debug.logWarning(\"BSH scriptlet evaluated to null [\" + scriptlet + \"], got no return so inserting nothing.\", module);\n                 }\n             } catch (EvalError e) {\n-                Debug.logWarning(e, \"Error evaluating BSH scriplet [\" + scriptlet + \"], inserting nothing; error was: \" + e.toString(), module);\n+                Debug.logWarning(e, \"Error evaluating BSH scriptlet [\" + scriptlet + \"], inserting nothing; error was: \" + e.toString(), module);\n             }\n         }\n     }",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE reported by Jacopo on the dev mailing list.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@662825 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8074d39e801a41deb46b2f7f851fceaebd4900f3",
        "parent": "https://github.com/apache/ofbiz-framework/commit/fc6e672d817d02c0ae432769b8ce485989dbe8b9",
        "bug_id": "ofbiz-framework_93",
        "file": [
            {
                "sha": "39a2814f4c3799aac01bf537c1674b75d8ec9bd2",
                "filename": "framework/base/src/base/org/ofbiz/base/util/ObjectType.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8074d39e801a41deb46b2f7f851fceaebd4900f3/framework/base/src/base/org/ofbiz/base/util/ObjectType.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8074d39e801a41deb46b2f7f851fceaebd4900f3/framework/base/src/base/org/ofbiz/base/util/ObjectType.java",
                "status": "modified",
                "changes": 54,
                "additions": 31,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/base/org/ofbiz/base/util/ObjectType.java?ref=8074d39e801a41deb46b2f7f851fceaebd4900f3",
                "patch": "@@ -426,7 +426,7 @@ public static boolean instanceOf(Class<?> objectClass, Class<?> typeClass) {\n     }\n \n     public static Object simpleTypeConvert(Object obj, String type, String format, Locale locale, boolean noTypeFail) throws GeneralException {\n-        return simpleTypeConvert(obj, type, format, UtilDateTime.getDefaultTimeZone(), locale, noTypeFail);\n+        return simpleTypeConvert(obj, type, format, null, locale, noTypeFail);\n     }\n \n     /** \n@@ -457,6 +457,14 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             return obj;\n         }\n \n+        if (timeZone == null) {\n+            timeZone = TimeZone.getDefault();\n+        }\n+\n+        if (locale == null) {\n+            locale = Locale.getDefault();\n+        }\n+\n         String fromType = null;\n \n         if ((type.equals(\"List\") || type.equals(\"java.util.List\")) && obj.getClass().isArray()) {\n@@ -496,7 +504,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             } else if (\"BigDecimal\".equals(type) || \"java.math.BigDecimal\".equals(type)) {\n                 str = StringUtil.removeSpaces(str);\n                 try {\n-                    NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                    NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                     Number tempNum = nf.parse(str);\n                     return new BigDecimal(tempNum.toString());\n                 } catch (ParseException e) {\n@@ -505,7 +513,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             } else if (\"Double\".equals(type) || \"java.lang.Double\".equals(type)) {\n                 str = StringUtil.removeSpaces(str);\n                 try {\n-                    NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                    NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                     Number tempNum = nf.parse(str);\n \n                     return Double.valueOf(tempNum.doubleValue());\n@@ -515,7 +523,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             } else if (\"Float\".equals(type) || \"java.lang.Float\".equals(type)) {\n                 str = StringUtil.removeSpaces(str);\n                 try {\n-                    NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                    NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                     Number tempNum = nf.parse(str);\n \n                     return Float.valueOf(tempNum.floatValue());\n@@ -525,7 +533,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             } else if (\"Long\".equals(type) || \"java.lang.Long\".equals(type)) {\n                 str = StringUtil.removeSpaces(str);\n                 try {\n-                    NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                    NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                     nf.setMaximumFractionDigits(0);\n                     Number tempNum = nf.parse(str);\n \n@@ -536,7 +544,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             } else if (\"Integer\".equals(type) || \"java.lang.Integer\".equals(type)) {\n                 str = StringUtil.removeSpaces(str);\n                 try {\n-                    NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                    NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                     nf.setMaximumFractionDigits(0);\n                     Number tempNum = nf.parse(str);\n \n@@ -547,9 +555,9 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             } else if (\"Date\".equals(type) || \"java.sql.Date\".equals(type)) {\n                 DateFormat df = null;\n                 if (format == null || format.length() == 0) {\n-                    df = UtilDateTime.toDateFormat(UtilDateTime.DATE_FORMAT, timeZone, null);\n+                    df = UtilDateTime.toDateFormat(UtilDateTime.DATE_FORMAT, timeZone, locale);\n                 } else {\n-                    df = UtilDateTime.toDateFormat(format, timeZone, null);\n+                    df = UtilDateTime.toDateFormat(format, timeZone, locale);\n                 }\n                 try {\n                     Date fieldDate = df.parse(str);\n@@ -560,9 +568,9 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             } else if (\"Time\".equals(type) || \"java.sql.Time\".equals(type)) {\n                 DateFormat df = null;\n                 if (format == null || format.length() == 0) {\n-                    df = UtilDateTime.toTimeFormat(UtilDateTime.TIME_FORMAT, timeZone, null);\n+                    df = UtilDateTime.toTimeFormat(UtilDateTime.TIME_FORMAT, timeZone, locale);\n                 } else {\n-                    df = UtilDateTime.toTimeFormat(format, timeZone, null);\n+                    df = UtilDateTime.toTimeFormat(format, timeZone, locale);\n                 }\n                 try {\n                     Date fieldDate = df.parse(str);\n@@ -573,7 +581,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             } else if (\"Timestamp\".equals(type) || \"java.sql.Timestamp\".equals(type)) {\n                 DateFormat df = null;\n                 if (format == null || format.length() == 0) {\n-                    df = UtilDateTime.toDateTimeFormat(UtilDateTime.DATE_TIME_FORMAT, timeZone, null);\n+                    df = UtilDateTime.toDateTimeFormat(UtilDateTime.DATE_TIME_FORMAT, timeZone, locale);\n                     // if time is missing add zeros\n                     if (str.length() > 0 && !str.contains(\":\")) {\n                     \tstr = str + \" 00:00:00.00\";\n@@ -591,7 +599,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n                         }\n                     }\n                 } else {\n-                    df = UtilDateTime.toDateTimeFormat(format, timeZone, null);\n+                    df = UtilDateTime.toDateTimeFormat(format, timeZone, locale);\n                 }\n                 try {\n                     Date fieldDate = df.parse(str);\n@@ -626,7 +634,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             Double dbl = (Double) obj;\n \n             if (\"String\".equals(type) || \"java.lang.String\".equals(type)) {\n-                NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                 return nf.format(dbl.doubleValue());\n             } else if (\"BigDecimal\".equals(type) || \"java.math.BigDecimal\".equals(type)) {\n                 return new BigDecimal(dbl.doubleValue());\n@@ -654,7 +662,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             Float flt = (Float) obj;\n \n             if (\"String\".equals(type)) {\n-                NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                 return nf.format(flt.doubleValue());\n             } else if (\"BigDecimal\".equals(type) || \"java.math.BigDecimal\".equals(type)) {\n                 return new BigDecimal(flt.doubleValue());\n@@ -682,7 +690,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             Long lng = (Long) obj;\n \n             if (\"String\".equals(type) || \"java.lang.String\".equals(type)) {\n-                NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                 return nf.format(lng.longValue());\n             } else if (\"BigDecimal\".equals(type) || \"java.math.BigDecimal\".equals(type)) {\n                 return BigDecimal.valueOf(lng.longValue());\n@@ -709,7 +717,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             fromType = \"Integer\";\n             Integer intgr = (Integer) obj;\n             if (\"String\".equals(type) || \"java.lang.String\".equals(type)) {\n-                NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                 return nf.format(intgr.longValue());\n             } else if (\"BigDecimal\".equals(type) || \"java.math.BigDecimal\".equals(type)) {\n                 return BigDecimal.valueOf(intgr.longValue());\n@@ -736,7 +744,7 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             fromType = \"BigDecimal\";\n             BigDecimal bigDec = (BigDecimal) obj;\n             if (\"String\".equals(type) || \"java.lang.String\".equals(type)) {\n-                NumberFormat nf = locale == null ? NumberFormat.getNumberInstance() : NumberFormat.getNumberInstance(locale);\n+                NumberFormat nf = NumberFormat.getNumberInstance(locale);\n                 return nf.format(bigDec.doubleValue());\n             } else if (\"BigDecimal\".equals(type) || \"java.math.BigDecimal\".equals(type)) {\n                 return obj;\n@@ -765,9 +773,9 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             if (\"String\".equals(type) || \"java.lang.String\".equals(type)) {\n                 DateFormat df = null;\n                 if (format == null || format.length() == 0) {\n-                    df = UtilDateTime.toDateFormat(UtilDateTime.DATE_FORMAT, timeZone, null);\n+                    df = UtilDateTime.toDateFormat(UtilDateTime.DATE_FORMAT, timeZone, locale);\n                 } else {\n-                    df = UtilDateTime.toDateFormat(format, timeZone, null);\n+                    df = UtilDateTime.toDateFormat(format, timeZone, locale);\n                 }\n                 return df.format(new java.util.Date(dte.getTime()));\n             } else if (\"Date\".equals(type) || \"java.sql.Date\".equals(type)) {\n@@ -794,9 +802,9 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             if (\"String\".equals(type) || \"java.lang.String\".equals(type)) {\n                 DateFormat df = null;\n                 if (format == null || format.length() == 0) {\n-                    df = UtilDateTime.toTimeFormat(UtilDateTime.TIME_FORMAT, timeZone, null);\n+                    df = UtilDateTime.toTimeFormat(UtilDateTime.TIME_FORMAT, timeZone, locale);\n                 } else {\n-                    df = UtilDateTime.toTimeFormat(format, timeZone, null);\n+                    df = UtilDateTime.toTimeFormat(format, timeZone, locale);\n                 }\n                 return df.format(new java.util.Date(tme.getTime()));\n             } else if (\"Date\".equals(type) || \"java.sql.Date\".equals(type)) {\n@@ -823,9 +831,9 @@ public static Object simpleTypeConvert(Object obj, String type, String format, T\n             if (\"String\".equals(type) || \"java.lang.String\".equals(type)) {\n                 DateFormat df = null;\n                 if (format == null || format.length() == 0) {\n-                    df = UtilDateTime.toDateTimeFormat(UtilDateTime.DATE_TIME_FORMAT, timeZone, null);\n+                    df = UtilDateTime.toDateTimeFormat(UtilDateTime.DATE_TIME_FORMAT, timeZone, locale);\n                 } else {\n-                    df = UtilDateTime.toDateTimeFormat(format, timeZone, null);\n+                    df = UtilDateTime.toDateTimeFormat(format, timeZone, locale);\n                 }\n                 return df.format(new java.util.Date(tme.getTime()));\n             } else if (\"Date\".equals(type) || \"java.sql.Date\".equals(type)) {",
                "deletions": 23
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE under some circumstances.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@662035 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6aad4b7b366da66a0d3f8e76c09d20aa7107b55d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/674077d6c2ccef5259aab2f5384a824c435f5a79",
        "bug_id": "ofbiz-framework_94",
        "file": [
            {
                "sha": "6e15314d1f78b597c68f3c1853d83b62d42470cd",
                "filename": "applications/ecommerce/webapp/ecommerce/customer/newmsg.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6aad4b7b366da66a0d3f8e76c09d20aa7107b55d/applications/ecommerce/webapp/ecommerce/customer/newmsg.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6aad4b7b366da66a0d3f8e76c09d20aa7107b55d/applications/ecommerce/webapp/ecommerce/customer/newmsg.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/webapp/ecommerce/customer/newmsg.ftl?ref=6aad4b7b366da66a0d3f8e76c09d20aa7107b55d",
                "patch": "@@ -48,7 +48,7 @@ under the License.\n           <tr>\n             <td width=\"5\">&nbsp;</td>\n             <td align=\"right\"><div class=\"tableheadtext\">${uiLabelMap.CommonFrom}:</div></td>\n-            <td><div class=\"tabletext\">&nbsp;${sessionAttributes.autoName} [${userLogin.partyId}] (${uiLabelMap.CommonNotYou}?&nbsp;<a href=\"<@ofbizUrl>autoLogout</@ofbizUrl>\" class=\"buttontext\">${uiLabelMap.CommonClickHere}</a>)</div></td>\n+            <td><div class=\"tabletext\">&nbsp;${sessionAttributes.autoName?if_exists} [${userLogin.partyId}] (${uiLabelMap.CommonNotYou}?&nbsp;<a href=\"<@ofbizUrl>autoLogout</@ofbizUrl>\" class=\"buttontext\">${uiLabelMap.CommonClickHere}</a>)</div></td>\n           </tr>\n           <#if partyIdTo?has_content>\n             <#assign partyToName = Static[\"org.ofbiz.party.party.PartyHelper\"].getPartyName(delegator, partyIdTo, true)>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE happening under some circumstances.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@660376 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/245f714e2f4d694b9fe8ec2d8c525f4bfd6e9432",
        "parent": "https://github.com/apache/ofbiz-framework/commit/16b0b853c32f9eae332efe9fbf30b250b7d7678e",
        "bug_id": "ofbiz-framework_95",
        "file": [
            {
                "sha": "54d7036661c98c085f44c6f936b43ff84eeba5cb",
                "filename": "applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/245f714e2f4d694b9fe8ec2d8c525f4bfd6e9432/applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/245f714e2f4d694b9fe8ec2d8c525f4bfd6e9432/applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl?ref=245f714e2f4d694b9fe8ec2d8c525f4bfd6e9432",
                "patch": "@@ -416,14 +416,14 @@ under the License.\n               <#assign mimeType = content.getRelatedOneCache(\"MimeType\")?if_exists>\n               <#assign status = content.getRelatedOneCache(\"StatusItem\")>\n               <tr>\n-                <td><a href=\"<@ofbizUrl>img/${content.contentName?if_exists}?imgId=${content.dataResourceId}</@ofbizUrl>\" class=\"buttontext\">${content.contentId}</a>\n+                <td><a href=\"<@ofbizUrl>img/${content.contentName?if_exists}?imgId=${content.dataResourceId?if_exists}</@ofbizUrl>\" class=\"buttontext\">${content.contentId}</a>\n                 <td><div class=\"tabletext\">${content.contentName?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${(contentType.get(\"description\",locale))?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${mimeType?if_exists.description?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${(status.get(\"description\",locale))?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${contentRole.fromDate?if_exists}</div></td>\n                 <td align=\"right\">\n-                  <a href=\"<@ofbizUrl>img/${content.contentName?if_exists}?imgId=${content.dataResourceId}</@ofbizUrl>\" class=\"buttontext\">${uiLabelMap.CommonView}</a>\n+                  <a href=\"<@ofbizUrl>img/${content.contentName?if_exists}?imgId=${content.dataResourceId?if_exists}</@ofbizUrl>\" class=\"buttontext\">${uiLabelMap.CommonView}</a>\n                   <a href=\"<@ofbizUrl>removePartyAsset?contentId=${contentRole.contentId}&partyId=${contentRole.partyId}&roleTypeId=${contentRole.roleTypeId}</@ofbizUrl>\" class=\"buttontext\">${uiLabelMap.CommonRemove}</a>\n                 </td>\n               </tr>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix a NPE on maySplit and a potential one on isGift\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@659995 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f188073d73674d188cfe8b9c7bf1ddc621b0dd7b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/093d20ea49df449565b016873f00de2bf2b5ff2f",
        "bug_id": "ofbiz-framework_96",
        "file": [
            {
                "sha": "7218b423a1a3b9bf30d415b2d08232fe3830edfa",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f188073d73674d188cfe8b9c7bf1ddc621b0dd7b/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f188073d73674d188cfe8b9c7bf1ddc621b0dd7b/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 14,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java?ref=f188073d73674d188cfe8b9c7bf1ddc621b0dd7b",
                "patch": "@@ -2235,7 +2235,9 @@ public String getShippingInstructions() {\n \n     public void setMaySplit(int idx, Boolean maySplit) {\n         CartShipInfo csi = this.getShipInfo(idx);\n-        csi.maySplit = maySplit.booleanValue() ? \"Y\" : \"N\";\n+        if (UtilValidate.isNotEmpty(maySplit)) {\n+            csi.maySplit = maySplit.booleanValue() ? \"Y\" : \"N\";\n+        }\n     }\n \n     public void setMaySplit(Boolean maySplit) {\n@@ -2272,7 +2274,9 @@ public String getGiftMessage() {\n \n     public void setIsGift(int idx, Boolean isGift) {\n         CartShipInfo csi = this.getShipInfo(idx);\n-        csi.isGift = isGift.booleanValue() ? \"Y\" : \"N\";\n+        if (UtilValidate.isNotEmpty(isGift)) {\n+            csi.isGift = isGift.booleanValue() ? \"Y\" : \"N\";\n+        }\n     }\n \n     public void setIsGift(Boolean isGift) {\n@@ -3914,7 +3918,7 @@ public Map getShipGroupsBySupplier(String supplierPartyId) {\n             CartShipInfo csi = (CartShipInfo) shipInfo.get(i);\n             if ((csi.supplierPartyId == null && supplierPartyId == null) ||\n                 (UtilValidate.isNotEmpty(csi.supplierPartyId) && csi.supplierPartyId.equals(supplierPartyId))) {\n-                shipGroups.put(new Integer(i), csi);\n+                    shipGroups.put(new Integer(i), csi);\n             }\n         }\n         return shipGroups;\n@@ -3951,7 +3955,9 @@ public void createDropShipGroups(LocalDispatcher dispatcher) throws CartItemModi\n             \n             // Ignore ship groups that are already drop shipped\n             String shipGroupSupplierPartyId = shipInfo.getSupplierPartyId();\n-            if (UtilValidate.isNotEmpty(shipGroupSupplierPartyId)) continue;\n+            if (UtilValidate.isNotEmpty(shipGroupSupplierPartyId)) { \n+                continue;\n+            }\n \n             // Ignore empty ship groups\n             Set shipItems = shipInfo.getShipItems();",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE introduced in a recent commit, reported by BJ Freeman\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@658420 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/fd0c04be7ac4344577cb55da8f127aa5677125b9",
        "parent": "https://github.com/apache/ofbiz-framework/commit/11acdcacc2cd76331398486f3f2dc6808e5f9e69",
        "bug_id": "ofbiz-framework_97",
        "file": [
            {
                "sha": "ce9b30ea15c6ed8c20378bfb52f6e5aafa9ef825",
                "filename": "framework/base/src/base/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/fd0c04be7ac4344577cb55da8f127aa5677125b9/framework/base/src/base/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/fd0c04be7ac4344577cb55da8f127aa5677125b9/framework/base/src/base/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/base/org/ofbiz/base/util/string/FlexibleStringExpander.java?ref=fd0c04be7ac4344577cb55da8f127aa5677125b9",
                "patch": "@@ -84,7 +84,7 @@ public String getOriginal() {\n      * @return The original String expanded by replacing varaible place holders.\n      */    \n     public String expandString(Map<String, ? extends Object> context) {\n-        return this.expandString(context, (Locale) context.get(\"locale\"));\n+        return this.expandString(context, context != null ? (Locale) context.get(\"locale\") : null);\n     }\n     \n     /** ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE reported by Giorgio Tomaselli\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@658231 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/91fac58472c103f0329333e970af0aa6fa703dec",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6c07b000764404be4462fdf60af161b672a7467e",
        "bug_id": "ofbiz-framework_98",
        "file": [
            {
                "sha": "5fd53fcc2e2388f75867e8e7a8e68ca908516fa8",
                "filename": "applications/order/webapp/ordermgr/return/returnItemInc.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/91fac58472c103f0329333e970af0aa6fa703dec/applications/order/webapp/ordermgr/return/returnItemInc.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/91fac58472c103f0329333e970af0aa6fa703dec/applications/order/webapp/ordermgr/return/returnItemInc.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/return/returnItemInc.ftl?ref=91fac58472c103f0329333e970af0aa6fa703dec",
                "patch": "@@ -109,7 +109,7 @@ under the License.\n                     ${orderItem.productId}&nbsp;\n                     <input type=\"hidden\" name=\"productId_o_${rowCount}\" value=\"${orderItem.productId}\">\n                   </#if>\n-                  ${orderItem.itemDescription}\n+                  ${orderItem.itemDescription?if_exists}\n                 </div>\n               </td>\n               <td align='center'>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "prevent NPE if order item has no item description\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@610083 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b4510dec92f39432d33cd70108dde787556ab9b7",
        "parent": "https://github.com/apache/ofbiz-framework/commit/8050c9b4591c4e5513cb4b7b44c3015897e2937b",
        "bug_id": "ofbiz-framework_99",
        "file": [
            {
                "sha": "d8c2b1d2c39fd52c4a2c64ee2c72c1c0e79bfc15",
                "filename": "applications/ecommerce/webapp/ecommerce/order/orderitems.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b4510dec92f39432d33cd70108dde787556ab9b7/applications/ecommerce/webapp/ecommerce/order/orderitems.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b4510dec92f39432d33cd70108dde787556ab9b7/applications/ecommerce/webapp/ecommerce/order/orderitems.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/webapp/ecommerce/order/orderitems.ftl?ref=b4510dec92f39432d33cd70108dde787556ab9b7",
                "patch": "@@ -78,13 +78,13 @@ under the License.\n             <tr>\n               <#if !orderItem.productId?exists || orderItem.productId == \"_?_\">\n                 <td valign=\"top\">\n-                  <b><div class=\"tabletext\"> &gt;&gt; ${orderItem.itemDescription}</div></b>\n+                  <b><div class=\"tabletext\"> &gt;&gt; ${orderItem.itemDescription?default(\"\")}</div></b>\n                 </td>\n               <#else>\n                 <#assign product = orderItem.getRelatedOneCache(\"Product\")?if_exists/> <#-- should always exist because of FK constraint, but just in case -->\n                 <td valign=\"top\">\n                   <div class=\"tabletext\">\n-                    <a href=\"<@ofbizUrl>product?product_id=${orderItem.productId}</@ofbizUrl>\" class=\"linktext\">${orderItem.productId} - ${orderItem.itemDescription}</a>\n+                    <a href=\"<@ofbizUrl>product?product_id=${orderItem.productId}</@ofbizUrl>\" class=\"linktext\">${orderItem.productId} - ${orderItem.itemDescription?default(\"\")}</a>\n                   </div>\n                   <div class=\"tabletext\" style=\"font-size: xx-small;\">\n                     <#if product?has_content>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE in Product Associations screen.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@606899 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c34024208fa8c2c2007792d450d0b11ed8592177",
        "parent": "https://github.com/apache/ofbiz-framework/commit/4a319355e46053a55e7fc8f281816985490cf530",
        "bug_id": "ofbiz-framework_100",
        "file": [
            {
                "sha": "daad1fea7476e13d0b4ea9a6222623336b8007d0",
                "filename": "applications/product/webapp/catalog/WEB-INF/actions/product/EditProductAssoc.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c34024208fa8c2c2007792d450d0b11ed8592177/applications/product/webapp/catalog/WEB-INF/actions/product/EditProductAssoc.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c34024208fa8c2c2007792d450d0b11ed8592177/applications/product/webapp/catalog/WEB-INF/actions/product/EditProductAssoc.bsh",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/catalog/WEB-INF/actions/product/EditProductAssoc.bsh?ref=c34024208fa8c2c2007792d450d0b11ed8592177",
                "patch": "@@ -46,7 +46,7 @@ if (productAssocTypeId != null) context.put(\"productAssocTypeId\", productAssocTy\n fromDateStr = request.getParameter(\"FROM_DATE\");\n \n Timestamp fromDate = null;\n-if (UtilValidate.isNotEmpty(fromDateStr.length())) fromDate = Timestamp.valueOf(fromDateStr);\n+if (UtilValidate.isNotEmpty(fromDateStr)) fromDate = Timestamp.valueOf(fromDateStr);\n if (fromDate == null) fromDate = (Timestamp)request.getAttribute(\"ProductAssocCreateFromDate\");\n if (fromDate != null) context.put(\"fromDate\", fromDate);\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE in Quote PDF if city is left blank\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@600699 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/da2fa3fda0718c6610f81e65c5b7557dbd32eb07",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1367a573496f4c68ba39190ac24da781b8f34f7d",
        "bug_id": "ofbiz-framework_101",
        "file": [
            {
                "sha": "7482a2b7b5154730387199806bb4d09682443fba",
                "filename": "applications/order/webapp/ordermgr/quote/quoteReportContactMechs.fo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/da2fa3fda0718c6610f81e65c5b7557dbd32eb07/applications/order/webapp/ordermgr/quote/quoteReportContactMechs.fo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/da2fa3fda0718c6610f81e65c5b7557dbd32eb07/applications/order/webapp/ordermgr/quote/quoteReportContactMechs.fo.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/quote/quoteReportContactMechs.fo.ftl?ref=da2fa3fda0718c6610f81e65c5b7557dbd32eb07",
                "patch": "@@ -41,7 +41,7 @@ under the License.\n                             <#if toPostalAddress?exists>\n                             <fo:block>${toPostalAddress.address1?if_exists}</fo:block>\n                             <fo:block>${toPostalAddress.address2?if_exists}</fo:block>\n-                            <fo:block>${toPostalAddress.city}<#if toPostalAddress.stateProvinceGeoId?has_content>, ${toPostalAddress.stateProvinceGeoId}</#if> ${toPostalAddress.postalCode?if_exists}</fo:block>\n+                            <fo:block>${toPostalAddress.city?if_exists}<#if toPostalAddress.stateProvinceGeoId?has_content>, ${toPostalAddress.stateProvinceGeoId}</#if> ${toPostalAddress.postalCode?if_exists}</fo:block>\n                             </#if>\n                         </fo:block>\n                     </fo:table-cell>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "prevent potential NPE from a null ReturnAdjustment.amount in getReturnAdjustmentTotal\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@594430 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ead5d85462706968b219da06c36a34e6c46d11c9",
        "parent": "https://github.com/apache/ofbiz-framework/commit/fd6979ef36830986f6d8881b9882ab2b917ce798",
        "bug_id": "ofbiz-framework_102",
        "file": [
            {
                "sha": "3feb83cf566315d896487774a68d5c09f7275e84",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderReturnServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ead5d85462706968b219da06c36a34e6c46d11c9/applications/order/src/org/ofbiz/order/order/OrderReturnServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ead5d85462706968b219da06c36a34e6c46d11c9/applications/order/src/org/ofbiz/order/order/OrderReturnServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderReturnServices.java?ref=ead5d85462706968b219da06c36a34e6c46d11c9",
                "patch": "@@ -2229,7 +2229,9 @@ public static double getReturnAdjustmentTotal(GenericDelegator delegator, Map co\n                 Iterator adjustmentIterator = adjustments.iterator();\n                 while (adjustmentIterator.hasNext()) {\n                     GenericValue returnAdjustment = (GenericValue) adjustmentIterator.next();\n-                    total += returnAdjustment.getDouble(\"amount\").doubleValue();\n+                    if ((returnAdjustment != null) && (returnAdjustment.get(\"amount\") != null)) {\n+                       total += returnAdjustment.getDouble(\"amount\").doubleValue();\n+                    }\n                 }\n             }\n         } catch (org.ofbiz.entity.GenericEntityException e) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Catch NPE in ResourceBundleMapWrapper.containsKey(Object)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@581979 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/4efd1f35543983124f9cb690944b8ab5460b8f86",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2e467fac30cf5fb5a5e6e62100a388ea6548e8a5",
        "bug_id": "ofbiz-framework_103",
        "file": [
            {
                "sha": "613be75927350fc38f2215b171ac8d4a0cdaf28c",
                "filename": "framework/base/src/base/org/ofbiz/base/util/collections/ResourceBundleMapWrapper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/4efd1f35543983124f9cb690944b8ab5460b8f86/framework/base/src/base/org/ofbiz/base/util/collections/ResourceBundleMapWrapper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/4efd1f35543983124f9cb690944b8ab5460b8f86/framework/base/src/base/org/ofbiz/base/util/collections/ResourceBundleMapWrapper.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/base/org/ofbiz/base/util/collections/ResourceBundleMapWrapper.java?ref=4efd1f35543983124f9cb690944b8ab5460b8f86",
                "patch": "@@ -181,6 +181,8 @@ public boolean containsKey(Object arg0) {\n                     if (this.resourceBundle.getObject((String) arg0) != null) {\n                         return true;\n                     }\n+                } catch (NullPointerException e) {\n+                    // happens when arg0 is null\n                 } catch (MissingResourceException e) {\n                     // nope, not found... nothing, will automatically return false below\n                 }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "fixes possible NPE (from Anil Patel)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@579088 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2efbbe6ccaac67d893c69583e2a0f3e8e6f412b5",
        "parent": "https://github.com/apache/ofbiz-framework/commit/d41b683cf4837d6cddb5bac8e92fdd4051509eb2",
        "bug_id": "ofbiz-framework_104",
        "file": [
            {
                "sha": "2b8e78635a55de5ff5fb03515f1a44cc6d0d7c06",
                "filename": "framework/common/src/org/ofbiz/common/login/LoginServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2efbbe6ccaac67d893c69583e2a0f3e8e6f412b5/framework/common/src/org/ofbiz/common/login/LoginServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2efbbe6ccaac67d893c69583e2a0f3e8e6f412b5/framework/common/src/org/ofbiz/common/login/LoginServices.java",
                "status": "modified",
                "changes": 7,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/src/org/ofbiz/common/login/LoginServices.java?ref=2efbbe6ccaac67d893c69583e2a0f3e8e6f412b5",
                "patch": "@@ -789,9 +789,10 @@ public static void checkNewPassword(GenericValue userLogin, String currentPasswo\n             //No valid value is found so don't bother to save any password history\n             passwordChangeHistoryLimit = 0;\n         }\n-        Debug.logInfo(\" checkNewPassword passwordChangeHistoryLimitpasswordChangeHistoryLimitpasswordChangeHistoryLimit\" + passwordChangeHistoryLimit, module);\n-        if(passwordChangeHistoryLimit > 0 ){\n-            Debug.logInfo(\" checkNewPassword Checking of user is tyring to use old password \" + passwordChangeHistoryLimit, module);\n+        Debug.logInfo(\" password.change.history.limit is set to \" + passwordChangeHistoryLimit, module);\n+        Debug.logInfo(\" userLogin is set to \" + userLogin, module);\n+        if(passwordChangeHistoryLimit > 0 && userLogin != null ){\n+            Debug.logInfo(\" checkNewPassword Checking if user is tyring to use old password \" + passwordChangeHistoryLimit, module);\n             GenericDelegator delegator = userLogin.getDelegator();\n             String newPasswordHash = newPassword;\n             if (useEncryption) {",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix some potential NPEs from Oleg Andreyev OFBIZ-1244\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@578874 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c396b92ff49e118b51c97fe49f39658f7feb19c9",
        "parent": "https://github.com/apache/ofbiz-framework/commit/dc47de5212ca06f7c434102d3d41443296f2b5ea",
        "bug_id": "ofbiz-framework_105",
        "file": [
            {
                "sha": "47ce04746d4e6602b9a6446656b237e6126d84c8",
                "filename": "framework/entity/src/org/ofbiz/entity/util/EntityUtil.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c396b92ff49e118b51c97fe49f39658f7feb19c9/framework/entity/src/org/ofbiz/entity/util/EntityUtil.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c396b92ff49e118b51c97fe49f39658f7feb19c9/framework/entity/src/org/ofbiz/entity/util/EntityUtil.java",
                "status": "modified",
                "changes": 24,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/util/EntityUtil.java?ref=c396b92ff49e118b51c97fe49f39658f7feb19c9",
                "patch": "@@ -469,13 +469,15 @@ public static List getFieldListFromEntityList(List genericValueList, String fiel\n         while (genericValueIter.hasNext()) {\n             GenericValue value = (GenericValue) genericValueIter.next();\n             Object fieldValue = value.get(fieldName);\n-            if (distinct) {\n-                if (!distinctSet.contains(fieldValue)) {\n+            if (fieldValue != null) {\n+                if (distinct) {\n+                    if (!distinctSet.contains(fieldValue)) {\n+                        fieldList.add(fieldValue);\n+                        distinctSet.add(fieldValue);\n+                    }\n+                } else {\n                     fieldList.add(fieldValue);\n-                    distinctSet.add(fieldValue);\n                 }\n-            } else {\n-                fieldList.add(fieldValue);\n             }\n         }\n         \n@@ -495,13 +497,15 @@ public static List getFieldListFromEntityListIterator(EntityListIterator generic\n         GenericValue value = null;\n         while ((value = (GenericValue) genericValueEli.next()) != null) {\n             Object fieldValue = value.get(fieldName);\n-            if (distinct) {\n-                if (!distinctSet.contains(fieldValue)) {\n+            if (fieldValue != null) {\n+                if (distinct) {\n+                    if (!distinctSet.contains(fieldValue)) {\n+                        fieldList.add(fieldValue);\n+                        distinctSet.add(fieldValue);\n+                    }\n+                } else {\n                     fieldList.add(fieldValue);\n-                    distinctSet.add(fieldValue);\n                 }\n-            } else {\n-                fieldList.add(fieldValue);\n             }\n         }\n         ",
                "deletions": 10
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied fix for NPE by Bilgin Ibryam.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@574538 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/160d96cd026a95e35a631165d07c92da4a6f880e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/882124675efe35dcc211d6694c4199f747b2e6ea",
        "bug_id": "ofbiz-framework_106",
        "file": [
            {
                "sha": "ef4dcce0d28b499be697c7373dac455af4adfc3b",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/entry/checkoutoptions.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/160d96cd026a95e35a631165d07c92da4a6f880e/applications/order/webapp/ordermgr/WEB-INF/actions/entry/checkoutoptions.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/160d96cd026a95e35a631165d07c92da4a6f880e/applications/order/webapp/ordermgr/WEB-INF/actions/entry/checkoutoptions.bsh",
                "status": "modified",
                "changes": 10,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/entry/checkoutoptions.bsh?ref=160d96cd026a95e35a631165d07c92da4a6f880e",
                "patch": "@@ -90,10 +90,12 @@ if (!cartParties.contains(shoppingCart.getSupplierAgentPartyId())) {\n     cartParties.add(shoppingCart.getSupplierAgentPartyId());\n }\n List salesReprs = (List)shoppingCart.getAdditionalPartyRoleMap().get(\"SALES_REP\");\n-for (int i = 0; i < salesReprs.size(); i++) {\n-    String salesRep = (String)salesReprs.get(i);\n-    if (!cartParties.contains(salesRep)) {\n-        cartParties.add(salesRep);\n+if (salesReprs != null) {\n+    for (int i = 0; i < salesReprs.size(); i++) {\n+        String salesRep = (String)salesReprs.get(i);\n+        if (!cartParties.contains(salesRep)) {\n+            cartParties.add(salesRep);\n+        }\n     }\n }\n context.put(\"cartParties\", cartParties);",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "avoid having NPE in verbose message\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@571020 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c004fc0430d833cef4a2f118bee942c4c316c988",
        "parent": "https://github.com/apache/ofbiz-framework/commit/fa3061276c3b1f133eb3b2a6466a1e7a5662f393",
        "bug_id": "ofbiz-framework_107",
        "file": [
            {
                "sha": "6f76bb512d4c144765769105e5eb5e8b7f638a47",
                "filename": "framework/webapp/src/org/ofbiz/webapp/ftl/OfbizCurrencyTransform.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c004fc0430d833cef4a2f118bee942c4c316c988/framework/webapp/src/org/ofbiz/webapp/ftl/OfbizCurrencyTransform.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c004fc0430d833cef4a2f118bee942c4c316c988/framework/webapp/src/org/ofbiz/webapp/ftl/OfbizCurrencyTransform.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/ftl/OfbizCurrencyTransform.java?ref=c004fc0430d833cef4a2f118bee942c4c316c988",
                "patch": "@@ -66,12 +66,12 @@ private static String getArg(Map args, String key) {\n     private static Double getAmount(Map args, String key) {\n         if (args.containsKey(key)) {\n             Object o = args.get(key);\n-            if (Debug.verboseOn()) Debug.logVerbose(\"Amount Object : \" + o.getClass().getName(), module);\n \n             // handle nulls better\n             if (o == null) {\n                 o = 0.00;\n             }\n+            if (Debug.verboseOn()) Debug.logVerbose(\"Amount Object : \" + o.getClass().getName(), module);\n \n             if (o instanceof NumberModel) {\n                 NumberModel s = (NumberModel) o;",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "NPE protection in the recalcShippingTotal service\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@562521 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/74ff8a8e1291c0aeb11edfbbaf8f084d27072859",
        "parent": "https://github.com/apache/ofbiz-framework/commit/66c22986f254d029e75e8a0c98257a23b90773ec",
        "bug_id": "ofbiz-framework_108",
        "file": [
            {
                "sha": "735839e858c90f3231f0cdf0f338a9f82fed24f1",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/74ff8a8e1291c0aeb11edfbbaf8f084d27072859/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/74ff8a8e1291c0aeb11edfbbaf8f084d27072859/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderServices.java?ref=74ff8a8e1291c0aeb11edfbbaf8f084d27072859",
                "patch": "@@ -1497,7 +1497,7 @@ public static Map recalcOrderShipping(DispatchContext ctx, Map context) {\n                     shippingTotal = ZERO;\n                     Debug.log(\"No valid order items found - \" + shippingTotal, module);\n                 } else {\n-                    shippingTotal = new BigDecimal(((Double) shippingEstMap.get(\"shippingTotal\")).doubleValue());\n+                    shippingTotal = UtilValidate.isEmpty(shippingEstMap.get(\"shippingTotal\")) ? ZERO : new BigDecimal(((Double) shippingEstMap.get(\"shippingTotal\")).doubleValue());\n                     shippingTotal = shippingTotal.setScale(orderDecimals, orderRounding);\n                     Debug.log(\"Got new shipping estimate - \" + shippingTotal, module);\n                 }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "fixed a few possible NPE; stopped post-proc from looping\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@541931 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/84480216700b26a02dd1ed826cf771c27f75bd5c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b6ee74c3ed90f28551ffc59ba90f042e3861bf99",
        "bug_id": "ofbiz-framework_109",
        "file": [
            {
                "sha": "2355733d92052de4d72185b961a9ec9d9636c9b0",
                "filename": "framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/84480216700b26a02dd1ed826cf771c27f75bd5c/framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/84480216700b26a02dd1ed826cf771c27f75bd5c/framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java",
                "status": "modified",
                "changes": 28,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java?ref=84480216700b26a02dd1ed826cf771c27f75bd5c",
                "patch": "@@ -327,22 +327,20 @@ public void doRequest(HttpServletRequest request, HttpServletResponse response,\n \n         // restore previous redirected request's attribute, so redirected page can display previous request's error msg etc.\n         String preReqAttStr = (String) request.getSession().getAttribute(\"_REQ_ATTR_MAP_\");\n-        Map preRequestMap;\n         if (preReqAttStr != null) {\n             request.getSession().removeAttribute(\"_REQ_ATTR_MAP_\");\n-            byte [] reqAttrMapBytes = StringUtil.fromHexString(preReqAttStr);\n-            preRequestMap = (java.util.Map)org.ofbiz.base.util.UtilObject.getObject(reqAttrMapBytes);\n-            java.util.Iterator keys= preRequestMap.keySet().iterator();\n-            while(keys.hasNext()){\n-                String key = (String) keys.next();\n-                if(\"_ERROR_MESSAGE_LIST_\".equals(key) ||\n-                        \"_ERROR_MESSAGE_MAP_\".equals(key) ||\n-                        \"_ERROR_MESSAGE_\".equals(key) ||\n-                        \"_EVENT_MESSAGE_LIST_\".equals(key) ||\n-                        \"_EVENT_MESSAGE_\".equals(key)){\n-                    Object value = preRequestMap.get(key);\n-                    request.setAttribute(key, value);\n-               }\n+            byte[] reqAttrMapBytes = StringUtil.fromHexString(preReqAttStr);\n+            Map preRequestMap = (Map) UtilObject.getObject(reqAttrMapBytes);\n+            if (preRequestMap != null && preRequestMap.size() > 0) {\n+                Iterator keys = preRequestMap.keySet().iterator();\n+                while (keys.hasNext()){\n+                    String key = (String) keys.next();\n+                    if(\"_ERROR_MESSAGE_LIST_\".equals(key) || \"_ERROR_MESSAGE_MAP_\".equals(key) || \"_ERROR_MESSAGE_\".equals(key) ||\n+                            \"_EVENT_MESSAGE_LIST_\".equals(key) || \"_EVENT_MESSAGE_\".equals(key)) {\n+                        Object value = preRequestMap.get(key);\n+                        request.setAttribute(key, value);\n+                   }\n+                }\n             }\n         }\n \n@@ -384,7 +382,7 @@ public void doRequest(HttpServletRequest request, HttpServletResponse response,\n         } else { // handle views\n             // first invoke the post-processor events.\n             Collection postProcEvents = requestManager.getPostProcessor();\n-            if (postProcEvents != null) {\n+            if (chain == null && postProcEvents != null) { // don't run post-proc events on chained requests\n                 Iterator i = postProcEvents.iterator();\n \n                 while (i.hasNext()) {",
                "deletions": 15
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed possible NPEs in convenience methods\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@539976 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/0d9c01debcfb9ce4e5388c4955be223084637c77",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6cdf0ee6b4ce37e54a6c09d37ea83072888f5e1b",
        "bug_id": "ofbiz-framework_110",
        "file": [
            {
                "sha": "e4219a5b46bacebf305bb1297f7698c2e8005229",
                "filename": "applications/party/src/org/ofbiz/party/party/PartyWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0d9c01debcfb9ce4e5388c4955be223084637c77/applications/party/src/org/ofbiz/party/party/PartyWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0d9c01debcfb9ce4e5388c4955be223084637c77/applications/party/src/org/ofbiz/party/party/PartyWorker.java",
                "status": "modified",
                "changes": 24,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/src/org/ofbiz/party/party/PartyWorker.java?ref=0d9c01debcfb9ce4e5388c4955be223084637c77",
                "patch": "@@ -129,22 +129,26 @@ public static GenericValue findPartyLatestContactMech(String partyId, String con\n \n     public static GenericValue findPartyLatestPostalAddress(String partyId, GenericDelegator delegator) {\n         GenericValue pcm = findPartyLatestContactMech(partyId, \"POSTAL_ADDRESS\", delegator);\n-        try {\n-            return pcm.getRelatedOne(\"PostalAddress\");\n-        } catch (GenericEntityException e) {\n-            Debug.logError(e, \"Error while finding latest PostalAddress for party with ID [\" + partyId + \"]: \" + e.toString(), module);\n-            return null;\n+        if (pcm != null) {\n+            try {\n+                return pcm.getRelatedOne(\"PostalAddress\");\n+            } catch (GenericEntityException e) {\n+                Debug.logError(e, \"Error while finding latest PostalAddress for party with ID [\" + partyId + \"]: \" + e.toString(), module);\n+            }\n         }\n+        return null;\n     }\n \n     public static GenericValue findPartyLatestTelecomNumber(String partyId, GenericDelegator delegator) {\n         GenericValue pcm = findPartyLatestContactMech(partyId, \"TELECOM_NUMBER\", delegator);\n-        try {\n-            return pcm.getRelatedOne(\"TelecomNumber\");\n-        } catch (GenericEntityException e) {\n-            Debug.logError(e, \"Error while finding latest TelecomNumber for party with ID [\" + partyId + \"]: \" + e.toString(), module);\n-            return null;\n+        if (pcm != null) {\n+            try {\n+                return pcm.getRelatedOne(\"TelecomNumber\");\n+            } catch (GenericEntityException e) {\n+                Debug.logError(e, \"Error while finding latest TelecomNumber for party with ID [\" + partyId + \"]: \" + e.toString(), module);\n+            }\n         }\n+        return null;\n     }\n \n     public static GenericValue findPartyLatestUserLogin(String partyId, GenericDelegator delegator) {",
                "deletions": 10
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "fixed NPE in collector thread\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@536431 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f17843d7c0c902e88110c717809606f716e9abe8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/31b1cee987d2a1e44e1230a8d2cdd7f9156e361b",
        "bug_id": "ofbiz-framework_111",
        "file": [
            {
                "sha": "c482c5c6bc9b16e5f1f6ac0297bf7b2a909f2514",
                "filename": "framework/entity/lib/ofbiz-minerva.jar",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f17843d7c0c902e88110c717809606f716e9abe8/framework/entity/lib/ofbiz-minerva.jar",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f17843d7c0c902e88110c717809606f716e9abe8/framework/entity/lib/ofbiz-minerva.jar",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/lib/ofbiz-minerva.jar?ref=f17843d7c0c902e88110c717809606f716e9abe8",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed npe for non-product items.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@533388 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/655d05c0a91bc2f1a4482678539eb322a7c08506",
        "parent": "https://github.com/apache/ofbiz-framework/commit/7de946952c6046160aac6ac3cef52f9da56439b8",
        "bug_id": "ofbiz-framework_112",
        "file": [
            {
                "sha": "0946f2c556a9489dadb5ab875aff9e3d0f14981b",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderReturnServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/655d05c0a91bc2f1a4482678539eb322a7c08506/applications/order/src/org/ofbiz/order/order/OrderReturnServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/655d05c0a91bc2f1a4482678539eb322a7c08506/applications/order/src/org/ofbiz/order/order/OrderReturnServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderReturnServices.java?ref=655d05c0a91bc2f1a4482678539eb322a7c08506",
                "patch": "@@ -403,7 +403,7 @@ public static Map getReturnableItems(DispatchContext dctx, Map context) {\n                 ), EntityOperator.AND); \n             EntityConditionList havingConditions = new EntityConditionList(UtilMisc.toList(\n                     new EntityExpr(\"quantityIssued\", EntityOperator.GREATER_THAN, new Double(0))\n-                ), EntityOperator.AND); \n+                ), EntityOperator.AND);\n             List orderItemQuantitiesIssued = null;\n             try {\n                 orderItemQuantitiesIssued = delegator.findByCondition(\"OrderItemQuantityReportGroupByItem\", whereConditions, havingConditions, UtilMisc.toList(\"orderId\", \"orderItemSeqId\"), UtilMisc.toList(\"orderItemSeqId\"), null);\n@@ -455,7 +455,7 @@ public static Map getReturnableItems(DispatchContext dctx, Map context) {\n                         }\n                         if (product != null) {\n                             itemTypeKey = product.getString(\"productTypeId\");\n-                        } else if (item != null) {\n+                        } else if (item != null && item.getString(\"orderItemTypeId\") != null) {\n                             itemTypeKey = item.getString(\"orderItemTypeId\");\n                         }\n                         returnInfo.put(\"itemTypeKey\", itemTypeKey);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Misc fixes for npe for non product items.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@533361 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/7de946952c6046160aac6ac3cef52f9da56439b8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6fd34276e7a6d96208c26baef0623caad970612a",
        "bug_id": "ofbiz-framework_113",
        "file": [
            {
                "sha": "532f1d8d86b7a5285f003a026fbcc7f1772a4b46",
                "filename": "applications/order/webapp/ordermgr/entry/order/orderitems.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7de946952c6046160aac6ac3cef52f9da56439b8/applications/order/webapp/ordermgr/entry/order/orderitems.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7de946952c6046160aac6ac3cef52f9da56439b8/applications/order/webapp/ordermgr/entry/order/orderitems.ftl",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/entry/order/orderitems.ftl?ref=7de946952c6046160aac6ac3cef52f9da56439b8",
                "patch": "@@ -37,7 +37,7 @@ under the License.\n             <td width=\"10%\" align=\"right\"><span class=\"tableheadtext\"><b>${uiLabelMap.OrderSubTotal}</b></span></td>\n           </tr>\n           <#list orderItems?if_exists as orderItem>\n-            <#assign itemType = orderItem.getRelatedOne(\"OrderItemType\")>\n+            <#assign itemType = orderItem.getRelatedOne(\"OrderItemType\")?if_exists>\n             <tr><td colspan=\"6\"><hr class=\"sepbar\"/></td></tr>\n             <tr>     \n               <#if orderItem.productId?exists && orderItem.productId == \"_?_\">           \n@@ -50,7 +50,7 @@ under the License.\n                     <#if orderItem.productId?exists>                       \n                       <a href=\"<@ofbizUrl>product?product_id=${orderItem.productId}</@ofbizUrl>\" class=\"buttontext\">${orderItem.productId} - ${orderItem.itemDescription}</a>\n                     <#else>                                                    \n-                      <b>${itemType.description}</b> : ${orderItem.itemDescription?if_exists}\n+                      <b>${itemType?if_exists.description?if_exists}</b> : ${orderItem.itemDescription?if_exists}\n                     </#if>\n                   </div>\n                   \n@@ -75,7 +75,7 @@ under the License.\n               </#if>\n             </tr>\n             <#-- show info from workeffort if it was a rental item -->\n-            <#if orderItem.orderItemTypeId == \"RENTAL_ORDER_ITEM\">\n+            <#if orderItem.orderItemTypeId?exists && orderItem.orderItemTypeId == \"RENTAL_ORDER_ITEM\">\n                 <#assign WorkOrderItemFulfillments = orderItem.getRelated(\"WorkOrderItemFulfillment\")?if_exists>\n                 <#if WorkOrderItemFulfillments?has_content>\n                     <#list WorkOrderItemFulfillments as WorkOrderItemFulfillment>",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Small change to prevent NPE under some circumstances.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@533357 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d31ca58ed734ee2796ce041fe53e3b9769234a8a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c5d1e0ac348ab0a698121a78a29e3bb795e40903",
        "bug_id": "ofbiz-framework_114",
        "file": [
            {
                "sha": "bbc5ba6758beb18b11453420a0873532a035cd01",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d31ca58ed734ee2796ce041fe53e3b9769234a8a/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d31ca58ed734ee2796ce041fe53e3b9769234a8a/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java?ref=d31ca58ed734ee2796ce041fe53e3b9769234a8a",
                "patch": "@@ -2579,7 +2579,7 @@ public static BigDecimal getOrderItemSubTotalBd(GenericValue orderItem, List adj\n             if (Debug.verboseOn()) Debug.logVerbose(\"Unit Price : \" + unitPrice + \" / \" + \"Quantity : \" + quantity, module);\n             result = unitPrice.multiply(quantity);\n \n-            if (orderItem.getString(\"orderItemTypeId\").compareTo(\"RENTAL_ORDER_ITEM\") == 0)    { // retrieve related work effort when required.\n+            if (\"RENTAL_ORDER_ITEM\".equals(orderItem.getString(\"orderItemTypeId\")))    { // retrieve related work effort when required.\n                 List WorkOrderItemFulfillments = null;\n                 try {\n                     WorkOrderItemFulfillments = orderItem.getRelatedCache(\"WorkOrderItemFulfillment\");",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "fixed NPE in digitial fulfillment\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@532919 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/124ab913e0c916ec7bb948d6c2f8837a240ce4fa",
        "parent": "https://github.com/apache/ofbiz-framework/commit/fcce325265c23b659c004970d61a8c3c2f42761d",
        "bug_id": "ofbiz-framework_115",
        "file": [
            {
                "sha": "3f711c231f4d51807db3da1521c9dbf58a001e14",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/124ab913e0c916ec7bb948d6c2f8837a240ce4fa/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/124ab913e0c916ec7bb948d6c2f8837a240ce4fa/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "status": "modified",
                "changes": 7,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderServices.java?ref=124ab913e0c916ec7bb948d6c2f8837a240ce4fa",
                "patch": "@@ -2827,7 +2827,12 @@ public static Map fulfillDigitalItems(DispatchContext ctx, Map context) {\n                     // try looking up the parent product if the product has no content and is a variant\n                     if (((allProductContent == null) || allProductContent.size() == 0) && (\"Y\".equals(product.getString(\"isVariant\")))) {\n                         GenericValue parentProduct = ProductWorker.getParentProduct(product.getString(\"productId\"), delegator);\n-                        allProductContent.addAll(parentProduct.getRelated(\"ProductContent\"));\n+                        if (allProductContent == null) {\n+                            allProductContent = FastList.newInstance();\n+                        }\n+                        if (parentProduct != null) {\n+                            allProductContent.addAll(parentProduct.getRelated(\"ProductContent\"));\n+                        }\n                     }\n                     \n                     if (allProductContent != null && allProductContent.size() > 0) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "NPE protection in PackingSession.setPackageWeight()\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@514747 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a543e645bac9eab65f016309e1a146bd6894a826",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b053274b5d22933d2f33e9cfbfb449c088a2d0b3",
        "bug_id": "ofbiz-framework_116",
        "file": [
            {
                "sha": "4e675c41fd0c932fcd28e857134770ccd4871028",
                "filename": "applications/product/src/org/ofbiz/shipment/packing/PackingSession.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a543e645bac9eab65f016309e1a146bd6894a826/applications/product/src/org/ofbiz/shipment/packing/PackingSession.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a543e645bac9eab65f016309e1a146bd6894a826/applications/product/src/org/ofbiz/shipment/packing/PackingSession.java",
                "status": "modified",
                "changes": 6,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/shipment/packing/PackingSession.java?ref=a543e645bac9eab65f016309e1a146bd6894a826",
                "patch": "@@ -893,7 +893,11 @@ public List getPackageSeqIds() {\n     }\n     \n     public void setPackageWeight(int packageSeqId, Double packageWeight) {\n-        packageWeights.put(new Integer(packageSeqId), packageWeight);\n+        if (UtilValidate.isEmpty(packageWeight)) {\n+            packageWeights.remove(new Integer(packageSeqId));\n+        } else {\n+            packageWeights.put(new Integer(packageSeqId), packageWeight);\n+        }\n     }\n     \n     public Double getPackageWeight(int packageSeqId) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "fixed possible NPE; change to implement new interface\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@485874 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/7254a9793163791de8c69ac64fe501dc5af198af",
        "parent": "https://github.com/apache/ofbiz-framework/commit/728a2d09e5975f8b0bc71dab84271172b5e32094",
        "bug_id": "ofbiz-framework_117",
        "file": [
            {
                "sha": "2162f100ee02953af3cfa43ab2e0141fbdc630c8",
                "filename": "applications/product/src/org/ofbiz/product/category/CategoryContentWrapper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7254a9793163791de8c69ac64fe501dc5af198af/applications/product/src/org/ofbiz/product/category/CategoryContentWrapper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7254a9793163791de8c69ac64fe501dc5af198af/applications/product/src/org/ofbiz/product/category/CategoryContentWrapper.java",
                "status": "modified",
                "changes": 9,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/category/CategoryContentWrapper.java?ref=7254a9793163791de8c69ac64fe501dc5af198af",
                "patch": "@@ -31,7 +31,9 @@\n import org.ofbiz.base.util.UtilHttp;\n import org.ofbiz.base.util.UtilMisc;\n import org.ofbiz.base.util.UtilValidate;\n+import org.ofbiz.base.util.GeneralRuntimeException;\n import org.ofbiz.content.content.ContentWorker;\n+import org.ofbiz.content.content.ContentWrapper;\n import org.ofbiz.entity.GenericDelegator;\n import org.ofbiz.entity.GenericValue;\n import org.ofbiz.entity.model.ModelEntity;\n@@ -41,7 +43,7 @@\n /**\n  * Category Content Worker: gets category content to display\n  */\n-public class CategoryContentWrapper {\n+public class CategoryContentWrapper implements ContentWrapper {\n     \n     public static final String module = CategoryContentWrapper.class.getName();\n     \n@@ -109,9 +111,12 @@ public static void getProductCategoryContentAsText(String productCategoryId, Gen\n         if (UtilValidate.isEmpty(mimeTypeId)) {\n             mimeTypeId = \"text/html\";\n         }\n+\n+        if (delegator == null) {\n+            throw new GeneralRuntimeException(\"Unable to find a delegator to use!\");\n+        }\n         \n         String candidateFieldName = ModelUtil.dbNameToVarName(prodCatContentTypeId);\n-//        Debug.logInfo(\"candidateFieldName=\" + candidateFieldName, module);\n         ModelEntity categoryModel = delegator.getModelEntity(\"ProductCategory\");\n         if (categoryModel.isField(candidateFieldName)) {\n             if (productCategory == null) {",
                "deletions": 2
            },
            {
                "sha": "274b4f197cd4a250b57e78deae036c67792d5958",
                "filename": "applications/product/src/org/ofbiz/product/product/ProductContentWrapper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7254a9793163791de8c69ac64fe501dc5af198af/applications/product/src/org/ofbiz/product/product/ProductContentWrapper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7254a9793163791de8c69ac64fe501dc5af198af/applications/product/src/org/ofbiz/product/product/ProductContentWrapper.java",
                "status": "modified",
                "changes": 11,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/product/ProductContentWrapper.java?ref=7254a9793163791de8c69ac64fe501dc5af198af",
                "patch": "@@ -31,8 +31,10 @@\n import org.ofbiz.base.util.UtilHttp;\n import org.ofbiz.base.util.UtilMisc;\n import org.ofbiz.base.util.UtilValidate;\n+import org.ofbiz.base.util.GeneralRuntimeException;\n import org.ofbiz.base.util.cache.UtilCache;\n import org.ofbiz.content.content.ContentWorker;\n+import org.ofbiz.content.content.ContentWrapper;\n import org.ofbiz.entity.GenericDelegator;\n import org.ofbiz.entity.GenericValue;\n import org.ofbiz.entity.model.ModelEntity;\n@@ -42,7 +44,7 @@\n /**\n  * Product Content Worker: gets product content to display\n  */\n-public class ProductContentWrapper {\n+public class ProductContentWrapper implements ContentWrapper {\n     \n     public static final String module = ProductContentWrapper.class.getName();\n     public static final String SEPARATOR = \"::\";    // cache key separator\n@@ -131,9 +133,12 @@ public static void getProductContentAsText(String productId, GenericValue produc\n         if (UtilValidate.isEmpty(mimeTypeId)) {\n             mimeTypeId = \"text/html\";\n         }\n+\n+        if (delegator == null) {\n+            throw new GeneralRuntimeException(\"Unable to find a delegator to use!\");\n+        }\n         \n-        String candidateFieldName = ModelUtil.dbNameToVarName(productContentTypeId);\n-        //Debug.logInfo(\"candidateFieldName=\" + candidateFieldName, module);\n+        String candidateFieldName = ModelUtil.dbNameToVarName(productContentTypeId);        \n         ModelEntity productModel = delegator.getModelEntity(\"Product\");\n         if (productModel.isField(candidateFieldName)) {\n             if (product == null) {",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied patch from Scott Gray to fix npe (OFBIZ-17).\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@466028 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/13d922e40bcf926a9fbcf3c78c818b38f890216c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3761b9c0858ca7c3765c6bb501e04115b7f531df",
        "bug_id": "ofbiz-framework_118",
        "file": [
            {
                "sha": "cac9d0c98118b409e84cbf06855ef9f2d9bd357e",
                "filename": "applications/content/widget/cms/CMSScreens.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/13d922e40bcf926a9fbcf3c78c818b38f890216c/applications/content/widget/cms/CMSScreens.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/13d922e40bcf926a9fbcf3c78c818b38f890216c/applications/content/widget/cms/CMSScreens.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/widget/cms/CMSScreens.xml?ref=13d922e40bcf926a9fbcf3c78c818b38f890216c",
                "patch": "@@ -239,6 +239,7 @@ under the License.\n \t\t        <set field=\"forumId\" from-field=\"parameters.contentId\"/>\n \t\t        <set field=\"defaultSiteId\" value=\"WebStoreFORUM\"/>\n \t\t        <script location=\"component://content/widget/cms/userpermprep.bsh\"/>\n+                        <script location=\"component://content/widget/cms/mostrecentprep.bsh\"/>\n \t\t    </actions>\n \t\t    <widgets>\n \t\t        <decorator-screen name=\"commonCmsDecorator\" location=\"${parameters.mainDecoratorLocation}\">",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Possiblz NPE fix, thanks to Jacopo.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@465505 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/177ff8b4b84061921fb7fa3d0aa17ffbaf63db70",
        "parent": "https://github.com/apache/ofbiz-framework/commit/df224785642d7f52f2c633872e861f7a5169d46e",
        "bug_id": "ofbiz-framework_119",
        "file": [
            {
                "sha": "dd61877505ba353c3493f88fc96383b7aa1c49fd",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/177ff8b4b84061921fb7fa3d0aa17ffbaf63db70/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/177ff8b4b84061921fb7fa3d0aa17ffbaf63db70/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java?ref=177ff8b4b84061921fb7fa3d0aa17ffbaf63db70",
                "patch": "@@ -1393,7 +1393,7 @@ public boolean getRejectedOrderItems() {\n                 while (recIter.hasNext()) {\n                     GenericValue rec = (GenericValue) recIter.next();\n                     Double rejected = rec.getDouble(\"quantityRejected\");\n-                    if (rejected.doubleValue() > 0) {\n+                    if (rejected != null && rejected.doubleValue() > 0) {\n                 \treturn true;\n                     }\n                 }            ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed possible NPE reported by Scott Gray in OFBIZ-165.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@432535 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2a5ff29ea93f14f3d2d275f38609686213e2f36c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/be89e826d411937545b6f74277ea4ffa004a83ed",
        "bug_id": "ofbiz-framework_120",
        "file": [
            {
                "sha": "b6300a3c64fefd19cbe52cd444e23d7d476d7c8b",
                "filename": "applications/manufacturing/webapp/manufacturing/WEB-INF/actions/jobshopmgt/ProductionRunDeclaration.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2a5ff29ea93f14f3d2d275f38609686213e2f36c/applications/manufacturing/webapp/manufacturing/WEB-INF/actions/jobshopmgt/ProductionRunDeclaration.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2a5ff29ea93f14f3d2d275f38609686213e2f36c/applications/manufacturing/webapp/manufacturing/WEB-INF/actions/jobshopmgt/ProductionRunDeclaration.bsh",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/webapp/manufacturing/WEB-INF/actions/jobshopmgt/ProductionRunDeclaration.bsh?ref=2a5ff29ea93f14f3d2d275f38609686213e2f36c",
                "patch": "@@ -129,8 +129,8 @@ if (!UtilValidate.isEmpty(productionRunId)) {\n         if (routingTaskId != null  && (actionForm.equals(\"UpdateRoutingTask\") || actionForm.equals(\"EditRoutingTask\"))){\n             GenericValue routingTask = delegator.findByPrimaryKey(\"WorkEffort\", UtilMisc.toMap(\"workEffortId\", routingTaskId));\n             Map routingTaskData = routingTask.getAllFields();\n-            routingTaskData.put(\"estimatedSetupMillis\",routingTask.getDouble(\"estimatedSetupMillis\").toString());\n-            routingTaskData.put(\"estimatedMilliSeconds\",routingTask.getDouble(\"estimatedMilliSeconds\").toString());\n+            routingTaskData.put(\"estimatedSetupMillis\", routingTask.getDouble(\"estimatedSetupMillis\"));\n+            routingTaskData.put(\"estimatedMilliSeconds\", routingTask.getDouble(\"estimatedMilliSeconds\"));\n             HtmlFormWrapper editPrRoutingTaskWrapper = new HtmlFormWrapper(\"/jobshopmgt/ProductionRunForms.xml\", \"EditProductionRunDeclRoutingTask\", request, response);\n             editPrRoutingTaskWrapper.putInContext(\"routingTaskData\", routingTaskData);\n             editPrRoutingTaskWrapper.putInContext(\"actionForm\", \"UpdateRoutingTask\");",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Olivier Heintz for \"My Portal Preferences error\" https://issues.apache.org/jira/browse/OFBIZ-5073\n\nSelect My Portal > Preferences, displays bellow error.\norg.ofbiz.widget.screen.ScreenRenderException: Error rendering screen [component://common/widget/CommonScreens.xml#GlobalDecorator]: java.lang.NullPointerException (null)\n\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1426734 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/9422708785eacd862eb1500ccecd932faa078e62",
        "parent": "https://github.com/apache/ofbiz-framework/commit/f62933059d836696d6fa077d523404191f345844",
        "bug_id": "ofbiz-framework_121",
        "file": [
            {
                "sha": "bacdbae9435395b41437f9621fc0eace8b2c8d88",
                "filename": "framework/widget/src/org/ofbiz/widget/WidgetWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/9422708785eacd862eb1500ccecd932faa078e62/framework/widget/src/org/ofbiz/widget/WidgetWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/9422708785eacd862eb1500ccecd932faa078e62/framework/widget/src/org/ofbiz/widget/WidgetWorker.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/WidgetWorker.java?ref=9422708785eacd862eb1500ccecd932faa078e62",
                "patch": "@@ -289,7 +289,7 @@ public static void makeHiddenFormLinkForm(Appendable writer, String target, Stri\n                 writer.append(key);\n                 writer.append(\"\\\" value=\\\"\");\n \n-                String valueFromContext = context.containsKey(key) ?\n+                String valueFromContext = context.containsKey(key) && context.get(key)!= null ?\n                         context.get(key).toString() : parameter.getValue();\n                 writer.append(valueFromContext);\n                 writer.append(\"\\\" type=\\\"hidden\\\"/>\");",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed the code to handle NPE on adding config products to cart. Need to verify further process after this fix.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1686642 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/56739c69ed6ab42f81eabbe404d34931dce9d33c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/756535ab00132038da8a883e6aa458a366186880",
        "bug_id": "ofbiz-framework_122",
        "file": [
            {
                "sha": "25f6367371e29b8c9e37ed9560de91e09690d824",
                "filename": "applications/product/src/org/ofbiz/product/config/ProductConfigWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/56739c69ed6ab42f81eabbe404d34931dce9d33c/applications/product/src/org/ofbiz/product/config/ProductConfigWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/56739c69ed6ab42f81eabbe404d34931dce9d33c/applications/product/src/org/ofbiz/product/config/ProductConfigWorker.java",
                "status": "modified",
                "changes": 5,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/config/ProductConfigWorker.java?ref=56739c69ed6ab42f81eabbe404d34931dce9d33c",
                "patch": "@@ -329,6 +329,7 @@ public static void storeProductConfigWrapper(ProductConfigWrapper configWrapper,\n                 configItemId = ci.getConfigItemAssoc().getString(\"configItemId\");\n                 sequenceNum = ci.getConfigItemAssoc().getLong(\"sequenceNum\");\n                 for (ConfigOption oneOption: selectedOptions) {\n+                    Map<String, String>  componentOptions = oneOption.componentOptions;\n                     List<GenericValue> toBeStored = new LinkedList<GenericValue>();\n                     String configOptionId = oneOption.configOption.getString(\"configOptionId\");\n                     String description = oneOption.getComments();\n@@ -343,8 +344,8 @@ public static void storeProductConfigWrapper(ProductConfigWrapper configWrapper,\n                     if (oneOption.hasVirtualComponent()) {\n                         List<GenericValue> components = oneOption.getComponents();\n                         for (GenericValue component: components) {\n-                            if (oneOption.isVirtualComponent(component)) {\n-                                String componentOption = oneOption.componentOptions.get(component.getString(\"productId\"));\n+                            if (oneOption.isVirtualComponent(component) && UtilValidate.isNotEmpty(componentOptions)) {\n+                            \tString  componentOption = componentOptions.get(component.getString(\"productId\"));\n                                 GenericValue configOptionProductOption = delegator.makeValue(\"ConfigOptionProductOption\");\n                                 configOptionProductOption.put(\"configId\", configId);\n                                 configOptionProductOption.put(\"configItemId\", configItemId);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Leon for \"slight update to ShoppingCartEvents.loadCartFromQuote to avoid NPE exception\" https://issues.apache.org/jira/browse/OFBIZ-5068\n\nThere's a quote within that one product has been released and no valid price set. If try to create order from this quote, NPE exception raised.\n\n=> Check the result return from runSync(\"loadCartFromQuote\")\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1406727 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3717bc137b78da00f26a4b47ac60ca477d0553f2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a0ff02ece10ea25ea74c636b0c98a318b617ccee",
        "bug_id": "ofbiz-framework_123",
        "file": [
            {
                "sha": "4202e3ceec7647474bd40a9f32d3a9335decad8c",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3717bc137b78da00f26a4b47ac60ca477d0553f2/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3717bc137b78da00f26a4b47ac60ca477d0553f2/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java?ref=3717bc137b78da00f26a4b47ac60ca477d0553f2",
                "patch": "@@ -1349,6 +1349,10 @@ public static String loadCartFromQuote(HttpServletRequest request, HttpServletRe\n                     UtilMisc.<String, Object>toMap(\"quoteId\", quoteId,\n                             \"applyQuoteAdjustments\", \"true\",\n                             \"userLogin\", userLogin));\n+            if (!ServiceUtil.isSuccess(outMap)) {\n+                request.setAttribute(\"_ERROR_MESSAGE_\", ServiceUtil.getErrorMessage(outMap));\n+                return \"error\";\n+            }\n             cart = (ShoppingCart) outMap.get(\"shoppingCart\");\n         } catch (GenericServiceException exc) {\n             request.setAttribute(\"_ERROR_MESSAGE_\", exc.getMessage());",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: add item to order cause exception\n(OFBIZ-9167)\n\n-go to https://localhost:8443/ordermgr/control/orderentry\n-create order for DemoCustomer\n-add an item\n\nconsole output...\njava.lang.NullPointerException\n        at org.apache.ofbiz.content.content.ContentWorker.\nrenderContentAsText(ContentWorker.java:368) ~[ofbiz.jar:?]\n[...]\n\nWhile at it I also found issues with cartLine.getName() in ftl files. It was\nalso missing the dispatcher. \n\nThis was broken by OFBIZ-9164\n\nThanks: Wai\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1778889 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f0ae93810a7393568a14c0f339a668a00a390179",
        "parent": "https://github.com/apache/ofbiz-framework/commit/ef146d52aff0474293fe3f5730892173cb700463",
        "bug_id": "ofbiz-framework_124",
        "file": [
            {
                "sha": "50658a05199ef6b6027833002b7ac9f2e44c829b",
                "filename": "applications/order/groovyScripts/entry/CheckoutReview.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/groovyScripts/entry/CheckoutReview.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/groovyScripts/entry/CheckoutReview.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/entry/CheckoutReview.groovy?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -38,7 +38,7 @@ context.productStore = ProductStoreWorker.getProductStore(request)\n // nuke the event messages\n request.removeAttribute(\"_EVENT_MESSAGE_\")\n \n-orderItems = cart.makeOrderItems()\n+orderItems = cart.makeOrderItems(dispatcher)\n context.orderItems = orderItems\n \n orderAdjustments = cart.makeAllAdjustments()",
                "deletions": 1
            },
            {
                "sha": "9a02e5ddc13f709ca340630216f926dd14adbaab",
                "filename": "applications/order/groovyScripts/entry/ShowCart.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/groovyScripts/entry/ShowCart.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/groovyScripts/entry/ShowCart.groovy",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/groovyScripts/entry/ShowCart.groovy?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -53,7 +53,7 @@ context.shoppingCart = shoppingCart\n context.currencyUomId = shoppingCart.getCurrency()\n context.orderType = shoppingCart.getOrderType()\n \n-orderItems = shoppingCart.makeOrderItems()\n+orderItems = shoppingCart.makeOrderItems(dispatcher)\n orderAdjustments = shoppingCart.makeAllAdjustments()\n orderItemShipGroupInfo = shoppingCart.makeAllShipGroupInfos()\n if (orderItemShipGroupInfo) {\n@@ -114,7 +114,7 @@ if (productStore) {\n     productStoreFacilityId = productStore.inventoryFacilityId\n }\n context.facilityId = productStoreFacilityId\n-inventorySummary = runService('getProductInventorySummaryForItems', [orderItems : shoppingCart.makeOrderItems(), facilityId : productStoreFacilityId])\n+inventorySummary = runService('getProductInventorySummaryForItems', [orderItems : shoppingCart.makeOrderItems(dispatcher), facilityId : productStoreFacilityId])\n context.availableToPromiseMap = inventorySummary.availableToPromiseMap\n context.quantityOnHandMap = inventorySummary.quantityOnHandMap\n context.mktgPkgATPMap = inventorySummary.mktgPkgATPMap",
                "deletions": 2
            },
            {
                "sha": "c115ecb1a18d2b029848dc97777936297b868b09",
                "filename": "applications/order/src/main/java/org/apache/ofbiz/order/order/OrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/src/main/java/org/apache/ofbiz/order/order/OrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/src/main/java/org/apache/ofbiz/order/order/OrderServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/main/java/org/apache/ofbiz/order/order/OrderServices.java?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -4212,7 +4212,7 @@ private static void saveUpdatedCartToOrder(LocalDispatcher dispatcher, Delegator\n             }\n         }\n \n-        toStore.addAll(cart.makeOrderItems());\n+        toStore.addAll(cart.makeOrderItems(dispatcher));\n         toStore.addAll(cart.makeAllAdjustments());\n \n         long groupIndex = cart.getShipInfoSize();",
                "deletions": 1
            },
            {
                "sha": "9f7886ef75817bd13f91098d53419ef18119d31a",
                "filename": "applications/order/src/main/java/org/apache/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/src/main/java/org/apache/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/src/main/java/org/apache/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/main/java/org/apache/ofbiz/order/shoppingcart/ShoppingCart.java?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -3606,8 +3606,8 @@ public void explodeItems(List<ShoppingCartItem> shoppingCartItems, LocalDispatch\n         }\n     }\n \n-    public List<GenericValue> makeOrderItems() {\n-        return makeOrderItems(false, false, null);\n+    public List<GenericValue> makeOrderItems(LocalDispatcher dispatcher) {\n+        return makeOrderItems(false, false, dispatcher);\n     }\n \n     public List<GenericValue> makeOrderItems(boolean explodeItems, boolean replaceAggregatedId, LocalDispatcher dispatcher) {",
                "deletions": 2
            },
            {
                "sha": "05d6a6648408e371f991ced4d25011e99d8ab659",
                "filename": "applications/order/template/entry/SetItemShipGroups.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/template/entry/SetItemShipGroups.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/template/entry/SetItemShipGroups.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/template/entry/SetItemShipGroups.ftl?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -65,7 +65,7 @@ under the License.\n                 <input type=\"hidden\" name=\"fromGroupIndex_o_${rowCount}\" value=\"${shipGroupIndex}\"/>\n                 <tr>\n                   <td>\n-                    <div>[${shoppingCartItem.getProductId()}] ${shoppingCartItem.getName()!}: ${shoppingCartItem.getDescription()!}</div>\n+                    <div>[${shoppingCartItem.getProductId()}] ${shoppingCartItem.getName()!}: ${shoppingCartItem.getDescription(dispatcher)!}</div>\n                   </td>\n                   <td>\n                     <div>${shipGroupItemQuantity}</div>",
                "deletions": 1
            },
            {
                "sha": "e0c926d5f8b56d451a0f6913b6e53bc418364b3a",
                "filename": "applications/order/template/entry/SplitShip.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/template/entry/SplitShip.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/template/entry/SplitShip.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/template/entry/SplitShip.ftl?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -185,7 +185,7 @@ function submitForm(form, mode, value) {\n                       </#if>\n                       <#-- end code to display a small image of the product -->\n                       <a href=\"<@ofbizUrl>product?product_id=${cartLine.getProductId()}</@ofbizUrl>\" class=\"buttontext\">${cartLine.getProductId()} -\n-                      ${cartLine.getName()!}</a> : ${cartLine.getDescription()!}\n+                      ${cartLine.getName(dispatcher)!}</a> : ${cartLine.getDescription(dispatcher)!}\n \n                       <#-- display the registered ship groups and quantity -->\n                       <#assign itemShipGroups = cart.getShipGroups(cartLine)>\n@@ -205,7 +205,7 @@ function submitForm(form, mode, value) {\n \n                     <#else>\n                       <#-- this is a non-product item -->\n-                      <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName()!}\n+                      <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName(dispatcher)!}\n                     </#if>\n                   </div>\n ",
                "deletions": 2
            },
            {
                "sha": "0dba05690de604bcb64fce623276de40989ec545",
                "filename": "applications/order/template/entry/cart/MiniCart.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/template/entry/cart/MiniCart.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/template/entry/cart/MiniCart.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/template/entry/cart/MiniCart.ftl?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -60,9 +60,9 @@ under the License.\n                 <td>\n                   <#if cartLine.getProductId()??>\n                       <#if cartLine.getParentProductId()??>\n-                          <a href=\"<@ofbizCatalogAltUrl productId=cartLine.getParentProductId()/>\" class=\"linktext\">${cartLine.getName()}</a>\n+                          <a href=\"<@ofbizCatalogAltUrl productId=cartLine.getParentProductId()/>\" class=\"linktext\">${cartLine.getName(dispatcher)}</a>\n                       <#else>\n-                          <a href=\"<@ofbizCatalogAltUrl productId=cartLine.getProductId()/>\" class=\"linktext\">${cartLine.getName()}</a>\n+                          <a href=\"<@ofbizCatalogAltUrl productId=cartLine.getProductId()/>\" class=\"linktext\">${cartLine.getName(dispatcher)}</a>\n                       </#if>\n                   <#else>\n                     <strong>${cartLine.getItemTypeDescription()!}</strong>",
                "deletions": 2
            },
            {
                "sha": "07e863902293b30bce70ad3a66b2273e23bed646",
                "filename": "applications/order/template/entry/cart/ShowCartItems.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/template/entry/cart/ShowCartItems.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/applications/order/template/entry/cart/ShowCartItems.ftl",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/template/entry/cart/ShowCartItems.ftl?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -80,8 +80,8 @@ under the License.\n                   <#if cartLine.getProductId()??>\n                     <#-- product item -->\n                     <a href=\"<@ofbizUrl>product?product_id=${cartLine.getProductId()}</@ofbizUrl>\" class=\"buttontext\">${cartLine.getProductId()}</a> -\n-                    <input size=\"60\" type=\"text\" name=\"description_${cartLineIndex}\" value=\"${cartLine.getName()?default(\"\")}\"/><br />\n-                    <i>${cartLine.getDescription()!}</i>\n+                    <input size=\"60\" type=\"text\" name=\"description_${cartLineIndex}\" value=\"${cartLine.getName(dispatcher)?default(\"\")}\"/><br />\n+                    <i>${cartLine.getDescription(dispatcher)!}</i>\n                     <#if shoppingCart.getOrderType() != \"PURCHASE_ORDER\">\n                       <#-- only applies to sales orders, not purchase orders -->\n                       <#-- if inventory is not required check to see if it is out of stock and needs to have a message shown about that... -->\n@@ -93,7 +93,7 @@ under the License.\n                     </#if>\n                   <#else>\n                     <#-- this is a non-product item -->\n-                    <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName()!}\n+                    <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName(dispatcher)!}\n                   </#if>\n                     <#-- display the item's features -->\n                    <#assign features = \"\">",
                "deletions": 3
            },
            {
                "sha": "b6d3b1f8485013cb75827baa7ba77ec7744b1c61",
                "filename": "plugins/ecommerce/groovyScripts/order/CheckoutReview.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/plugins/ecommerce/groovyScripts/order/CheckoutReview.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/plugins/ecommerce/groovyScripts/order/CheckoutReview.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/ecommerce/groovyScripts/order/CheckoutReview.groovy?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -30,7 +30,7 @@ import org.apache.ofbiz.webapp.website.WebSiteWorker\n cart = session.getAttribute(\"shoppingCart\")\n context.cart = cart\n \n-orderItems = cart.makeOrderItems()\n+orderItems = cart.makeOrderItems(dispatcher)\n context.orderItems = orderItems\n \n orderAdjustments = cart.makeAllAdjustments()",
                "deletions": 1
            },
            {
                "sha": "c00f93ce470f390f8e6abe6c52fd80b8da68b244",
                "filename": "plugins/ecommerce/template/cart/ShowCart.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/plugins/ecommerce/template/cart/ShowCart.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/plugins/ecommerce/template/cart/ShowCart.ftl",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/ecommerce/template/cart/ShowCart.ftl?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -265,8 +265,8 @@ under the License.\n                       <#-- ${cartLineIndex} - -->\n                       <a href=\"<@ofbizCatalogAltUrl productId=parentProductId/>\"\n                           class=\"linktext\">${cartLine.getProductId()} -\n-                        ${cartLine.getName()!}\n-                      </a> : ${cartLine.getDescription()!}\n+                        ${cartLine.getName(dispatcher)!}\n+                      </a> : ${cartLine.getDescription(dispatcher)!}\n                       <#-- For configurable products, the selected options are shown -->\n                       <#if cartLine.getConfigWrapper()??>\n                         <#assign selectedOptions = cartLine.getConfigWrapper().getSelectedOptions()! />\n@@ -293,7 +293,7 @@ under the License.\n \n                     <#else>\n                       <#-- this is a non-product item -->\n-                      ${cartLine.getItemTypeDescription()!}: ${cartLine.getName()!}\n+                      ${cartLine.getItemTypeDescription()!}: ${cartLine.getName(dispatcher)!}\n                     </#if>\n \n                     <#assign attrs = cartLine.getOrderItemAttributes()/>",
                "deletions": 3
            },
            {
                "sha": "0152e3d78730b568bb0a3debc6cc5b91230305a9",
                "filename": "plugins/ecommerce/template/cart/UpdateCart.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/plugins/ecommerce/template/cart/UpdateCart.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/plugins/ecommerce/template/cart/UpdateCart.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/ecommerce/template/cart/UpdateCart.ftl?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -87,7 +87,7 @@ under the License.\n             <td headers=\"orderItem\">\n               <img src=\"<@ofbizContentUrl>${requestAttributes.contentPathPrefix!}${smallImageUrl}</@ofbizContentUrl>\"\n                   alt = \"Product Image\" /></td>\n-            <td headers=\"description\">${cartLine.getName()!}</td>\n+            <td headers=\"description\">${cartLine.getName(dispatcher)!}</td>\n             <td headers=\"unitPrice\">${cartLine.getDisplayPrice()}</td>\n             <td headers=\"quantity\">\n               <span id=\"completedCartItemQty_${cartLine_index}\">${cartLine.getQuantity()?string.number}</span>\n@@ -182,7 +182,7 @@ under the License.\n                     </#if>\n                   </#if>\n                 </td>\n-                <td headers=\"editDescription\">${cartLine.getName()!}</td>\n+                <td headers=\"editDescription\">${cartLine.getName(dispatcher)!}</td>\n                 <td headers=\"editUnitPrice\" id=\"itemUnitPrice_${cartLine_index}\">\n                   <@ofbizCurrency amount=cartLine.getDisplayPrice() isoCode=shoppingCart.getCurrency() />\n                 </td>",
                "deletions": 2
            },
            {
                "sha": "b7f3eb5cd906bcf001c1ed4d052245b12a0fcb67",
                "filename": "plugins/ecommerce/template/order/SplitShip.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/plugins/ecommerce/template/order/SplitShip.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/plugins/ecommerce/template/order/SplitShip.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/ecommerce/template/order/SplitShip.ftl?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -185,7 +185,7 @@ function submitForm(form, mode, value) {\n                       </#if>\n                       <#-- end code to display a small image of the product -->\n                       <a href=\"<@ofbizUrl>product?product_id=${cartLine.getProductId()}</@ofbizUrl>\" class=\"buttontext\">${cartLine.getProductId()} -\n-                      ${cartLine.getName()!}</a> : ${cartLine.getDescription()!}\n+                      ${cartLine.getName(dispatcher)!}</a> : ${cartLine.getDescription()!}\n \n                       <#-- display the registered ship groups and quantity -->\n                       <#assign itemShipGroups = cart.getShipGroups(cartLine)>\n@@ -205,7 +205,7 @@ function submitForm(form, mode, value) {\n \n                     <#else>\n                       <#-- this is a non-product item -->\n-                      <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName()!}\n+                      <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName(dispatcher)!}\n                     </#if>\n                   </div>\n ",
                "deletions": 2
            },
            {
                "sha": "5b98352155114d7623ca7795521ba97cff1658e7",
                "filename": "plugins/webpos/template/cart/ShowCart.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/plugins/webpos/template/cart/ShowCart.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/plugins/webpos/template/cart/ShowCart.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/webpos/template/cart/ShowCart.ftl?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -110,10 +110,10 @@ under the License.\n                   <img src=\"<@ofbizContentUrl>${requestAttributes.contentPathPrefix!}${smallImageUrl}</@ofbizContentUrl>\" align=\"left\" class=\"cssImgSmall\" />\n                 </#if>\n                 <#-- end code to display a small image of the product -->\n-                ${cartLine.getProductId()} - ${cartLine.getName()!} : ${cartLine.getDescription()!}\n+                ${cartLine.getProductId()} - ${cartLine.getName(dispatcher)!} : ${cartLine.getDescription(dispatcher)!}\n               <#else>\n                 <#-- this is a non-product item -->\n-                <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName()!}\n+                <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName(dispatcher)!}\n               </#if>\n             </div>\n           </td>",
                "deletions": 2
            },
            {
                "sha": "27e265065273f8f3aefe016fef42af08af750f28",
                "filename": "plugins/webpos/template/cart/ShowCartItemSelected.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f0ae93810a7393568a14c0f339a668a00a390179/plugins/webpos/template/cart/ShowCartItemSelected.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f0ae93810a7393568a14c0f339a668a00a390179/plugins/webpos/template/cart/ShowCartItemSelected.ftl",
                "status": "modified",
                "changes": 10,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/webpos/template/cart/ShowCartItemSelected.ftl?ref=f0ae93810a7393568a14c0f339a668a00a390179",
                "patch": "@@ -39,17 +39,17 @@ under the License.\n             ${cartLine.getProductId()}\n             <br/>\n           </#if>\n-          <#if cartLine.getName()?has_content>\n-            ${cartLine.getName()}\n+          <#if cartLine.getName(dispatcher)?has_content>\n+            ${cartLine.getName(dispatcher)}\n           <#else>\n-            <#if cartLine.getDescription()?has_content>\n-            ${cartLine.getDescription()}\n+            <#if cartLine.getDescription(dispatcher)?has_content>\n+            ${cartLine.getDescription(dispatcher)}\n             </#if>\n           </#if>\n       <#else>\n         <div id=\"CartItemSelectedRight\">\n           <#-- this is a non-product item -->\n-          <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName()!}\n+          <b>${cartLine.getItemTypeDescription()!}</b> : ${cartLine.getName(dispatcher)!}\n       </#if>\n       <br/>\n       <b>${uiLabelMap.CommonQuantity}</b>&nbsp;",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "OFBIZ-6077: Added check on quote report body fo ftl to avoid NPE. \n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1672856 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6ae1f1cf063b43dd16c33615c20d176bd63d6669",
        "parent": "https://github.com/apache/ofbiz-framework/commit/15be736b7a1606c61a93e540b96cbc2aea4a9cae",
        "bug_id": "ofbiz-framework_125",
        "file": [
            {
                "sha": "c2e5a40c55ec0fb1e349116505128eb082363f02",
                "filename": "applications/order/webapp/ordermgr/quote/quoteReportBody.fo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6ae1f1cf063b43dd16c33615c20d176bd63d6669/applications/order/webapp/ordermgr/quote/quoteReportBody.fo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6ae1f1cf063b43dd16c33615c20d176bd63d6669/applications/order/webapp/ordermgr/quote/quoteReportBody.fo.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/quote/quoteReportBody.fo.ftl?ref=6ae1f1cf063b43dd16c33615c20d176bd63d6669",
                "patch": "@@ -40,6 +40,7 @@ under the License.\n                 <fo:table-body>\n                     <#assign rowColor = \"white\">\n                     <#assign totalQuoteAmount = 0.0>\n+                    <#if quoteItems?has_content>\n                     <#list quoteItems as quoteItem>\n                         <#if quoteItem.productId??>\n                             <#assign product = quoteItem.getRelatedOne(\"Product\", false)>\n@@ -105,6 +106,7 @@ under the License.\n                             <#assign rowColor = \"white\">\n                         </#if>\n                     </#list>\n+                    </#if>\n                 </fo:table-body>\n             </fo:table>\n ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied bug fix from jira issue - OFBIZ-5632 - Changing Visual theme in Order manager results in error message. \n===========================================================\nThe reported issue has been observed in the order manager application. It happens when there's no shopping cart in the session.\n\nSteps to test -\n1. Try changing visual theme in the order manager application.\n\nObservations -\n1. Returns ERROR MESSAGE - org.ofbiz.widget.screen.ScreenRenderException: Error rendering screen component://order/widget/ordermgr/OrderEntryOrderScreens.xml#quickFinalizeOrder: java.lang.IllegalArgumentException: Error running script at location [component://order/webapp/ordermgr/WEB-INF/actions/entry/CheckoutPayment.groovy]: java.lang.NullPointerException: Cannot invoke method getRelated() on null object (Error running script at location [component://order/webapp/ordermgr/WEB-INF/actions/entry/CheckoutPayment.groovy]: java.lang.NullPointerException: Cannot invoke method getRelated() on null object)\n\nThanks.\n===========================================================\n\nThanks Vyom for reporting the issue and Thanks Pranay for providing the patch for the same. \n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1632733 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/78497d4497e875ada2ce8b8465e8f10385c01b79",
        "parent": "https://github.com/apache/ofbiz-framework/commit/05376298b46c7c8eb3da3980a20a79c7fc2fa1e8",
        "bug_id": "ofbiz-framework_126",
        "file": [
            {
                "sha": "cd4b5eba64f45b486f953f50c15bd3733765beda",
                "filename": "framework/common/webcommon/WEB-INF/common-controller.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/78497d4497e875ada2ce8b8465e8f10385c01b79/framework/common/webcommon/WEB-INF/common-controller.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/78497d4497e875ada2ce8b8465e8f10385c01b79/framework/common/webcommon/WEB-INF/common-controller.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/webcommon/WEB-INF/common-controller.xml?ref=78497d4497e875ada2ce8b8465e8f10385c01b79",
                "patch": "@@ -129,7 +129,7 @@ under the License.\n     <!-- Visual theme mapping -->\n     <request-map uri=\"ListVisualThemes\">\n         <security https=\"true\" auth=\"true\"/>\n-        <response name=\"success\" type=\"view\" value=\"ListVisualThemes\"/>\n+        <response name=\"success\" type=\"view\" value=\"ListVisualThemes\" save-last-view=\"true\"/>\n     </request-map>\n \n     <request-map uri=\"main\">",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Felice Romano \"NPE when calling org.ofbiz.entity.model.ModelEntity.getTableName(null)\" (https://issues.apache.org/jira/browse/OFBIZ-4040) - OFBIZ-4040\n\nWhen \"table name\" is required to a \"model entity\" object, it throws a NPE if \"datasource info\" object is null. \n\nJLR: I'm not quite sure in which occasions this fix is needed OOTB, but anyway it's safer indeed.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1040890 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/9b75d04f7eaa820773279c51a905ce7d4011ae3a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b0cd0dfbd46fba705b148c032b698b4cf48a6b95",
        "bug_id": "ofbiz-framework_127",
        "file": [
            {
                "sha": "00e75b7e3983ddf3a68199316af42a2ae34cde60",
                "filename": "framework/entity/src/org/ofbiz/entity/model/ModelEntity.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/9b75d04f7eaa820773279c51a905ce7d4011ae3a/framework/entity/src/org/ofbiz/entity/model/ModelEntity.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/9b75d04f7eaa820773279c51a905ce7d4011ae3a/framework/entity/src/org/ofbiz/entity/model/ModelEntity.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/model/ModelEntity.java?ref=9b75d04f7eaa820773279c51a905ce7d4011ae3a",
                "patch": "@@ -368,7 +368,7 @@ public String getTableName(String helperName) {\n \n     /** The table-name of the Entity including a Schema name if specified in the datasource config */\n     public String getTableName(DatasourceInfo datasourceInfo) {\n-        if (UtilValidate.isNotEmpty(datasourceInfo.schemaName)) {\n+        if (datasourceInfo!=null && UtilValidate.isNotEmpty(datasourceInfo.schemaName)) {\n             return datasourceInfo.schemaName + \".\" + this.tableName;\n         } else {\n             return this.tableName;",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Few improvements in the code avoid NullPointerException and For international orders required code is made conditional based on the international UPS service codes.\n\nThanks to Pranay Pandey for the contribution.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@784382 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/4c41c4f8c779e4b384c0c09c6fb7ad94303db054",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3b5201b4e162b8cf4cfb9937d199e30f0c095c06",
        "bug_id": "ofbiz-framework_128",
        "file": [
            {
                "sha": "7ce74c8f5f958af8f8573564326d9ff9163bae6e",
                "filename": "applications/product/src/org/ofbiz/shipment/thirdparty/ups/UpsServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/4c41c4f8c779e4b384c0c09c6fb7ad94303db054/applications/product/src/org/ofbiz/shipment/thirdparty/ups/UpsServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/4c41c4f8c779e4b384c0c09c6fb7ad94303db054/applications/product/src/org/ofbiz/shipment/thirdparty/ups/UpsServices.java",
                "status": "modified",
                "changes": 67,
                "additions": 35,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/shipment/thirdparty/ups/UpsServices.java?ref=4c41c4f8c779e4b384c0c09c6fb7ad94303db054",
                "patch": "@@ -317,8 +317,8 @@\n \n             // Child of Shipment: Shipper\n             Element shipperElement = UtilXml.addChildElement(shipmentElement, \"Shipper\", shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipperElement, \"Name\", originPostalAddress.getString(\"toName\"), shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipperElement, \"AttentionName\", originPostalAddress.getString(\"attnName\"), shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipperElement, \"Name\", UtilValidate.isNotEmpty(originPostalAddress.getString(\"toName\")) ? originPostalAddress.getString(\"toName\") : \"\", shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipperElement, \"AttentionName\", UtilValidate.isNotEmpty(originPostalAddress.getString(\"attnName\")) ? originPostalAddress.getString(\"attnName\") : \"\", shipmentConfirmRequestDoc);\n             UtilXml.addChildElementValue(shipperElement, \"PhoneNumber\", originPhoneNumber, shipmentConfirmRequestDoc);\n             UtilXml.addChildElementValue(shipperElement, \"ShipperNumber\", UtilProperties.getPropertyValue(\"shipment\", \"shipment.ups.shipper.number\"), shipmentConfirmRequestDoc);\n \n@@ -334,11 +334,10 @@\n             UtilXml.addChildElementValue(shipperAddressElement, \"CountryCode\", originCountryGeo.getString(\"geoCode\"), shipmentConfirmRequestDoc);\n             // How to determine this? Add to data model...? UtilXml.addChildElement(shipperAddressElement, \"ResidentialAddress\", shipmentConfirmRequestDoc);\n \n-\n             // Child of Shipment: ShipTo\n             Element shipToElement = UtilXml.addChildElement(shipmentElement, \"ShipTo\", shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipToElement, \"CompanyName\", destPostalAddress.getString(\"toName\"), shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(shipToElement, \"AttentionName\", destPostalAddress.getString(\"attnName\"), shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipToElement, \"CompanyName\", UtilValidate.isNotEmpty(destPostalAddress.getString(\"toName\")) ? destPostalAddress.getString(\"toName\") : \"\", shipmentConfirmRequestDoc);\n+            UtilXml.addChildElementValue(shipToElement, \"AttentionName\", UtilValidate.isNotEmpty(destPostalAddress.getString(\"attnName\")) ? destPostalAddress.getString(\"attnName\") : \"\", shipmentConfirmRequestDoc);\n             if (UtilValidate.isNotEmpty(destPhoneNumber)) {\n                 UtilXml.addChildElementValue(shipToElement, \"PhoneNumber\", destPhoneNumber, shipmentConfirmRequestDoc);\n             }\n@@ -427,30 +426,34 @@\n \n             // Child of Shipment: Service\n             Element serviceElement = UtilXml.addChildElement(shipmentElement, \"Service\", shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(serviceElement, \"Code\", carrierShipmentMethod.getString(\"carrierServiceCode\"), shipmentConfirmRequestDoc);\n+            String carrierServiceCode = carrierShipmentMethod.getString(\"carrierServiceCode\");\n+            UtilXml.addChildElementValue(serviceElement, \"Code\", carrierServiceCode, shipmentConfirmRequestDoc);\n \n             // Child of Shipment: ShipmentServiceOptions\n-            Element shipmentServiceOptionsElement = UtilXml.addChildElement(shipmentElement, \"ShipmentServiceOptions\", shipmentConfirmRequestDoc);\n-            Element internationalFormsElement = UtilXml.addChildElement(shipmentServiceOptionsElement, \"InternationalForms\", shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(internationalFormsElement, \"FormType\", \"01\", shipmentConfirmRequestDoc);\n-            List<GenericValue> shipmentItems = shipment.getRelated(\"ShipmentItem\");\n-            for (GenericValue shipmentItem :shipmentItems) {\n-                Element productElement = UtilXml.addChildElement(internationalFormsElement, \"Product\", shipmentConfirmRequestDoc);\n-                UtilXml.addChildElementValue(productElement, \"Description\", \"Product Description\", shipmentConfirmRequestDoc);\n-                Element unitElement = UtilXml.addChildElement(productElement, \"Unit\", shipmentConfirmRequestDoc);\n-                BigDecimal productQuantity = shipmentItem.getBigDecimal(\"quantity\").setScale(decimals, rounding);\n-                UtilXml.addChildElementValue(unitElement, \"Number\", String.valueOf(productQuantity.intValue()), shipmentConfirmRequestDoc);\n-                List<GenericValue> shipmentItemIssuances = shipmentItem.getRelated(\"ItemIssuance\");\n-                GenericValue orderItem = EntityUtil.getFirst(shipmentItemIssuances).getRelatedOne(\"OrderItem\");\n-                UtilXml.addChildElementValue(unitElement, \"Value\", orderItem.getBigDecimal(\"unitPrice\").toString(), shipmentConfirmRequestDoc);\n-                Element unitOfMeasurElement = UtilXml.addChildElement(unitElement, \"UnitOfMeasurement\", shipmentConfirmRequestDoc);\n-                UtilXml.addChildElementValue(unitOfMeasurElement, \"Code\", \"EA\", shipmentConfirmRequestDoc);\n-                UtilXml.addChildElementValue(productElement, \"OriginCountryCode\", \"US\", shipmentConfirmRequestDoc);\n-            }\n-            String invoiceDate = RecurrenceUtil.formatDate((Date) shipment.getTimestamp(\"createdDate\"));\n-            UtilXml.addChildElementValue(internationalFormsElement, \"InvoiceDate\", invoiceDate, shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(internationalFormsElement, \"ReasonForExport\",\"SALE\", shipmentConfirmRequestDoc);\n-            UtilXml.addChildElementValue(internationalFormsElement, \"CurrencyCode\", currencyCode, shipmentConfirmRequestDoc);\n+            List internationalServiceCodes = UtilMisc.toList(\"07\", \"08\", \"54\", \"65\");\n+            if (internationalServiceCodes.contains(carrierServiceCode)) {\n+                Element shipmentServiceOptionsElement = UtilXml.addChildElement(shipmentElement, \"ShipmentServiceOptions\", shipmentConfirmRequestDoc);\n+                Element internationalFormsElement = UtilXml.addChildElement(shipmentServiceOptionsElement, \"InternationalForms\", shipmentConfirmRequestDoc);\n+                UtilXml.addChildElementValue(internationalFormsElement, \"FormType\", \"01\", shipmentConfirmRequestDoc);\n+                List<GenericValue> shipmentItems = shipment.getRelated(\"ShipmentItem\");\n+                for (GenericValue shipmentItem :shipmentItems) {\n+                    Element productElement = UtilXml.addChildElement(internationalFormsElement, \"Product\", shipmentConfirmRequestDoc);\n+                    UtilXml.addChildElementValue(productElement, \"Description\", \"Product Description\", shipmentConfirmRequestDoc);\n+                    Element unitElement = UtilXml.addChildElement(productElement, \"Unit\", shipmentConfirmRequestDoc);\n+                    BigDecimal productQuantity = shipmentItem.getBigDecimal(\"quantity\").setScale(decimals, rounding);\n+                    UtilXml.addChildElementValue(unitElement, \"Number\", String.valueOf(productQuantity.intValue()), shipmentConfirmRequestDoc);\n+                    List<GenericValue> shipmentItemIssuances = shipmentItem.getRelated(\"ItemIssuance\");\n+                    GenericValue orderItem = EntityUtil.getFirst(shipmentItemIssuances).getRelatedOne(\"OrderItem\");\n+                    UtilXml.addChildElementValue(unitElement, \"Value\", orderItem.getBigDecimal(\"unitPrice\").toString(), shipmentConfirmRequestDoc);\n+                    Element unitOfMeasurElement = UtilXml.addChildElement(unitElement, \"UnitOfMeasurement\", shipmentConfirmRequestDoc);\n+                    UtilXml.addChildElementValue(unitOfMeasurElement, \"Code\", \"EA\", shipmentConfirmRequestDoc);\n+                    UtilXml.addChildElementValue(productElement, \"OriginCountryCode\", \"US\", shipmentConfirmRequestDoc);\n+                }\n+                String invoiceDate = RecurrenceUtil.formatDate((Date) shipment.getTimestamp(\"createdDate\"));\n+                UtilXml.addChildElementValue(internationalFormsElement, \"InvoiceDate\", invoiceDate, shipmentConfirmRequestDoc);\n+                UtilXml.addChildElementValue(internationalFormsElement, \"ReasonForExport\",\"SALE\", shipmentConfirmRequestDoc);\n+                UtilXml.addChildElementValue(internationalFormsElement, \"CurrencyCode\", currencyCode, shipmentConfirmRequestDoc);\n+            }\n \n             // Child of Shipment: Package\n             ListIterator<GenericValue> shipmentPackageRouteSegIter = shipmentPackageRouteSegs.listIterator();\n@@ -520,11 +523,11 @@\n                 BigDecimal boxWeight = shipmentPackage.getBigDecimal(\"weight\");\n                 UtilXml.addChildElementValue(packageWeightElement, \"Weight\", UtilValidate.isNotEmpty(boxWeight) ? \"\"+boxWeight.intValue() : \"\", shipmentConfirmRequestDoc);\n                 // Commenting as not accepted in case of international order\n-                /*\n-                Element referenceNumberElement = UtilXml.addChildElement(packageElement, \"ReferenceNumber\", shipmentConfirmRequestDoc);\n-                UtilXml.addChildElementValue(referenceNumberElement, \"Code\", \"MK\", shipmentConfirmRequestDoc);\n-                UtilXml.addChildElementValue(referenceNumberElement, \"Value\", shipmentPackage.getString(\"shipmentPackageSeqId\"), shipmentConfirmRequestDoc);\n-                */\n+                if (!internationalServiceCodes.contains(carrierServiceCode)) {\n+                    Element referenceNumberElement = UtilXml.addChildElement(packageElement, \"ReferenceNumber\", shipmentConfirmRequestDoc);\n+                    UtilXml.addChildElementValue(referenceNumberElement, \"Code\", \"MK\", shipmentConfirmRequestDoc);\n+                    UtilXml.addChildElementValue(referenceNumberElement, \"Value\", shipmentPackage.getString(\"shipmentPackageSeqId\"), shipmentConfirmRequestDoc);\n+                }    \n                 if (carrierShipmentBoxType != null && carrierShipmentBoxType.get(\"oversizeCode\") != null) {\n                     UtilXml.addChildElementValue(packageElement, \"OversizePackage\", carrierShipmentBoxType.getString(\"oversizeCode\"), shipmentConfirmRequestDoc);\n                 }",
                "deletions": 32
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Sascha Rodekamp \"NPE in Financial Account Services\" (https://issues.apache.org/jira/browse/OFBIZ-3873) - OFBIZ-3873\n\nNPE in the financial account services when creating a financial account for a store. The error occurred when the accountValidDays is empty. The thru date can not be set.\nThis patch covers this issue by checking if accountValidDays is empty or not.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@967098 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6ab823c94c8a3098688247200d8e60faf54b2631",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c39c604127c5ffa099c11ae90b2dde8366953db6",
        "bug_id": "ofbiz-framework_129",
        "file": [
            {
                "sha": "96f5862eb42048173e2bf19dd99473c17ac448c3",
                "filename": "applications/accounting/src/org/ofbiz/accounting/finaccount/FinAccountServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6ab823c94c8a3098688247200d8e60faf54b2631/applications/accounting/src/org/ofbiz/accounting/finaccount/FinAccountServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6ab823c94c8a3098688247200d8e60faf54b2631/applications/accounting/src/org/ofbiz/accounting/finaccount/FinAccountServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/finaccount/FinAccountServices.java?ref=6ab823c94c8a3098688247200d8e60faf54b2631",
                "patch": "@@ -208,7 +208,9 @@\n             }\n \n             // set the dates/userlogin\n-            inContext.put(\"thruDate\", UtilDateTime.getDayEnd(now, accountValidDays));\n+            if (UtilValidate.isNotEmpty(accountValidDays)){\n+                inContext.put(\"thruDate\", UtilDateTime.getDayEnd(now, accountValidDays));\n+            }\n             inContext.put(\"fromDate\", now);\n             inContext.put(\"userLogin\", userLogin);\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed a bug reported by me in OFBIZ-1400 \"NullPointerException in Shipment Plan screen\".\r\nThe bug is fixed by adding a hidden \"Ship Group Seq Id\" field as suggested by Jacopo.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@603765 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ff25e010ad46d289d17aa121d2ff9dd61bbad802",
        "parent": "https://github.com/apache/ofbiz-framework/commit/df4981ef3bcefc326fdd2277c3276e0ea63223df",
        "bug_id": "ofbiz-framework_130",
        "file": [
            {
                "sha": "5f13ca70a7746567e60b82b9371d8588e07ee98a",
                "filename": "applications/product/webapp/facility/WEB-INF/actions/shipment/EditShipmentPlan.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ff25e010ad46d289d17aa121d2ff9dd61bbad802/applications/product/webapp/facility/WEB-INF/actions/shipment/EditShipmentPlan.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ff25e010ad46d289d17aa121d2ff9dd61bbad802/applications/product/webapp/facility/WEB-INF/actions/shipment/EditShipmentPlan.bsh",
                "status": "modified",
                "changes": 39,
                "additions": 24,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/WEB-INF/actions/shipment/EditShipmentPlan.bsh?ref=ff25e010ad46d289d17aa121d2ff9dd61bbad802",
                "patch": "@@ -26,6 +26,7 @@ delegator = request.getAttribute(\"delegator\");\n \n shipmentId = request.getParameter(\"shipmentId\");\n orderId = request.getParameter(\"orderId\");\n+shipGroupSeqId = request.getParameter(\"shipGroupSeqId\");\n \n if (UtilValidate.isEmpty(shipmentId)) {\n     shipmentId = context.get(\"shipmentId\");\n@@ -39,16 +40,20 @@ if (UtilValidate.isNotEmpty(shipmentId)) {\n \n \n // **************************************\n-// Order Items are searched and put in orderItems\n+// Order Items are searched also by shipGroupSeqId and put in orderItemShipGroupAssocs\n // **************************************\n-orderItems = null;\n+orderItemShipGroupAssocs = null;\n // **************************************\n // Search method: search by productId\n // **************************************\n if (UtilValidate.isNotEmpty(action) && UtilValidate.isNotEmpty(orderId)) {\n     orderHeader = delegator.findByPrimaryKey(\"OrderHeader\", UtilMisc.toMap(\"orderId\", orderId));\n     if (orderHeader != null && orderHeader.getString(\"orderTypeId\").equals(\"SALES_ORDER\")) {\n-        orderItems = delegator.findByAnd(\"OrderItem\", UtilMisc.toMap(\"orderId\", orderId));\n+        if (UtilValidate.isNotEmpty(shipGroupSeqId)) {\n+            orderItemShipGroupAssocs = delegator.findByAnd(\"OrderItemShipGroupAssoc\", UtilMisc.toMap(\"orderId\", orderId, \"shipGroupSeqId\", shipGroupSeqId));\n+        } else {\n+            orderItemShipGroupAssocs = delegator.findByAnd(\"OrderItemShipGroupAssoc\", UtilMisc.toMap(\"orderId\", orderId));\n+        }\n     }\n }\n \n@@ -188,21 +193,22 @@ listShipmentPlanForm.putInContext(\"shipmentPlan\", rows);\n // ShipmentPlan add form\n // **************************************\n addRows = new ArrayList();\n-if (orderItems != null) {\n-    orderItemsIt = orderItems.iterator();\n-    while (orderItemsIt.hasNext()) {\n-        oneOrderItem = orderItemsIt.next();\n+if (orderItemShipGroupAssocs != null) {\n+    orderItemShipGroupAssocIt = orderItemShipGroupAssocs.iterator();\n+    while (orderItemShipGroupAssocIt.hasNext()) {\n+        orderItemShipGroupAssoc = orderItemShipGroupAssocIt.next();\n+        orderItem = orderItemShipGroupAssoc.getRelatedOne(\"OrderItem\");\n         oneRow = new HashMap();\n         oneRow.put(\"shipmentId\", shipmentId);\n-        oneRow.put(\"orderId\", oneOrderItem.getString(\"orderId\"));\n-        oneRow.put(\"orderItemSeqId\", oneOrderItem.getString(\"orderItemSeqId\"));\n-        oneRow.put(\"productId\", oneOrderItem.getString(\"productId\"));\n-        orderedQuantity = oneOrderItem.getDouble(\"quantity\");\n-        oneRow.put(\"orderedQuantity\", oneOrderItem.getString(\"quantity\"));\n+        oneRow.put(\"orderId\", orderItem.getString(\"orderId\"));\n+        oneRow.put(\"orderItemSeqId\", orderItem.getString(\"orderItemSeqId\"));\n+        oneRow.put(\"productId\", orderItem.getString(\"productId\"));\n+        orderedQuantity = orderItem.getDouble(\"quantity\");\n+        oneRow.put(\"orderedQuantity\", orderItem.getString(\"quantity\"));\n         // Total quantity issued\n         issuedQuantity = 0.0;\n         qtyIssuedInShipment = new HashMap();\n-        issuances = oneOrderItem.getRelated(\"ItemIssuance\");\n+        issuances = orderItem.getRelated(\"ItemIssuance\");\n         issuancesIt = issuances.iterator();\n         while (issuancesIt.hasNext()) {\n             issuance = issuancesIt.next();\n@@ -220,7 +226,7 @@ if (orderItems != null) {\n         oneRow.put(\"issuedQuantity\", issuedQuantity);\n         // Total quantity planned not issued\n         plannedQuantity = 0.0;\n-        plans = delegator.findByAnd(\"OrderShipment\", UtilMisc.toMap(\"orderId\", oneOrderItem.getString(\"orderId\"), \"orderItemSeqId\", oneOrderItem.getString(\"orderItemSeqId\")));\n+        plans = delegator.findByAnd(\"OrderShipment\", UtilMisc.toMap(\"orderId\", orderItem.getString(\"orderId\"), \"orderItemSeqId\", orderItem.getString(\"orderItemSeqId\")));\n         plansIt = plans.iterator();\n         while (plansIt.hasNext()) {\n             plan = plansIt.next();\n@@ -235,7 +241,7 @@ if (orderItems != null) {\n         oneRow.put(\"quantity\", planQuantity);\n         // Planned (unitary) Weight and Volume\n         weight = new Double(0);\n-        product = oneOrderItem.getRelatedOne(\"Product\");\n+        product = orderItem.getRelatedOne(\"Product\");\n         if (product.getDouble(\"weight\") != null) {\n             weight = product.getDouble(\"weight\");\n         }\n@@ -278,6 +284,9 @@ HtmlFormWrapper findOrderItemsForm = new HtmlFormWrapper(\"component://product/we\n findOrderItemsForm.putInContext(\"shipmentId\", shipmentId);\n if (shipment != null && shipment.get(\"primaryOrderId\") != null) {\n     findOrderItemsForm.putInContext(\"orderId\", shipment.getString(\"primaryOrderId\"));\n+    if (UtilValidate.isNotEmpty(shipment.get(\"primaryShipGroupSeqId\"))) {\n+        findOrderItemsForm.putInContext(\"shipGroupSeqId\", shipment.getString(\"primaryShipGroupSeqId\"));\n+    }\n }\n \n HtmlFormWrapper shipmentPlanToOrderItemsForm = new HtmlFormWrapper(\"component://product/webapp/facility/shipment/ShipmentForms.xml\", \"shipmentPlanToOrderItems\", request, response);",
                "deletions": 15
            },
            {
                "sha": "b9f58b78e4d21017a57fdc74570566419e42082c",
                "filename": "applications/product/webapp/facility/shipment/ShipmentForms.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ff25e010ad46d289d17aa121d2ff9dd61bbad802/applications/product/webapp/facility/shipment/ShipmentForms.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ff25e010ad46d289d17aa121d2ff9dd61bbad802/applications/product/webapp/facility/shipment/ShipmentForms.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/shipment/ShipmentForms.xml?ref=ff25e010ad46d289d17aa121d2ff9dd61bbad802",
                "patch": "@@ -180,6 +180,7 @@ under the License.\n     <form name=\"findOrderItems\" type=\"single\" target=\"EditShipmentPlan\" title=\"\">\n         <field name=\"action\"><hidden value=\"search\"/></field>\n         <field name=\"shipmentId\"><hidden/></field>\n+        <field name=\"shipGroupSeqId\"><hidden/></field>\n         <field name=\"orderId\" title=\"${uiLabelMap.ProductOrderId}\">\n             <lookup target-form-name=\"LookupOrderHeaderAndShipInfo\"/>\n         </field>",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added null check to avoid intermittent NPE - https://issues.apache.org/jira/browse/OFBIZ-5879.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1662084 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f6d334704be47b3c8f5fb1cfe9f4752eb4e0f0b5",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a228dea8c5dce0f0e8581208d18a038aff511e2e",
        "bug_id": "ofbiz-framework_131",
        "file": [
            {
                "sha": "e04350918a1df49a090a5b7a00eac958b0220de7",
                "filename": "framework/service/src/org/ofbiz/service/group/ServiceGroupReader.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f6d334704be47b3c8f5fb1cfe9f4752eb4e0f0b5/framework/service/src/org/ofbiz/service/group/ServiceGroupReader.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f6d334704be47b3c8f5fb1cfe9f4752eb4e0f0b5/framework/service/src/org/ofbiz/service/group/ServiceGroupReader.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/service/src/org/ofbiz/service/group/ServiceGroupReader.java?ref=f6d334704be47b3c8f5fb1cfe9f4752eb4e0f0b5",
                "patch": "@@ -75,6 +75,10 @@ public static void addGroupDefinitions(ResourceHandler handler) {\n \n         for (Element group: UtilXml.childElementList(rootElement, \"group\")) {\n             String groupName = group.getAttribute(\"name\");\n+            if (groupName == null || groupName.isEmpty()) {\n+                Debug.logError(\"XML Parsing error: <group> element 'name' attribute null or empty\", module);\n+                continue;\n+            }\n             groupsCache.put(groupName, new GroupModel(group));\n             numDefs++;\n         }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed a NPE bug in ModelViewEntity, reported by Christian Carlow on the user mailing list.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1655795 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/1a595f70abdb8e6f4846d5fbb212cf9bb8d7af9d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3d70574a2441013e64199090c8d93baa6855ac60",
        "bug_id": "ofbiz-framework_132",
        "file": [
            {
                "sha": "86e83cd4385fb961c6e443f284c2435ca0f1fef3",
                "filename": "framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1a595f70abdb8e6f4846d5fbb212cf9bb8d7af9d/framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1a595f70abdb8e6f4846d5fbb212cf9bb8d7af9d/framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java?ref=1a595f70abdb8e6f4846d5fbb212cf9bb8d7af9d",
                "patch": "@@ -1337,7 +1337,7 @@ public ViewConditionExpr(ViewEntityCondition viewEntityCondition, Element condit\n             try {\n                 this.operator = EntityOperator.lookupComparison(operator);\n             } catch (IllegalArgumentException e) {\n-                throw new IllegalArgumentException(\"[\" + this.viewEntityCondition.modelViewEntity.getEntityName() + \"]: Could not find an entity operator for the name: \" + this.operator);\n+                throw new IllegalArgumentException(\"[\" + this.viewEntityCondition.modelViewEntity.getEntityName() + \"]: Could not find an entity operator for the name: \" + operator);\n             }\n             String relEntityAlias = conditionExprElement.getAttribute(\"rel-entity-alias\");\n             String relFieldNameStr = conditionExprElement.getAttribute(\"rel-field-name\");",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed a NPE I introduced in rev 1647606. Reported by Pierre Smits on dev mailing list.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1648139 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5f231ec0051cff40a635e2b943d60c550e828033",
        "parent": "https://github.com/apache/ofbiz-framework/commit/cd3ed9f83dcf433e3c2cc077a2863e26e89502b5",
        "bug_id": "ofbiz-framework_133",
        "file": [
            {
                "sha": "96fe317aeca1806e05e6e06b57f05f072dc5fe1c",
                "filename": "framework/base/src/org/ofbiz/base/util/UtilDateTime.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5f231ec0051cff40a635e2b943d60c550e828033/framework/base/src/org/ofbiz/base/util/UtilDateTime.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5f231ec0051cff40a635e2b943d60c550e828033/framework/base/src/org/ofbiz/base/util/UtilDateTime.java",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/org/ofbiz/base/util/UtilDateTime.java?ref=5f231ec0051cff40a635e2b943d60c550e828033",
                "patch": "@@ -972,7 +972,7 @@ public static DateFormat toDateFormat(String dateFormat, TimeZone tz, Locale loc\n         if (UtilValidate.isEmpty(dateFormat)) {\n             df = DateFormat.getDateInstance(DateFormat.SHORT, locale);\n         } else {\n-            df = new SimpleDateFormat(dateFormat, locale);\n+            df = new SimpleDateFormat(dateFormat, locale == null ? Locale.getDefault() : locale);\n         }\n         df.setTimeZone(tz);\n         return df;\n@@ -990,7 +990,7 @@ public static DateFormat toDateTimeFormat(String dateTimeFormat, TimeZone tz, Lo\n         if (UtilValidate.isEmpty(dateTimeFormat)) {\n             df = DateFormat.getDateTimeInstance(DateFormat.SHORT, DateFormat.MEDIUM, locale);\n         } else {\n-            df = new SimpleDateFormat(dateTimeFormat, locale);\n+            df = new SimpleDateFormat(dateTimeFormat, locale == null ? Locale.getDefault() : locale);\n         }\n         df.setTimeZone(tz);\n         return df;\n@@ -1008,7 +1008,7 @@ public static DateFormat toTimeFormat(String timeFormat, TimeZone tz, Locale loc\n         if (UtilValidate.isEmpty(timeFormat)) {\n             df = DateFormat.getTimeInstance(DateFormat.MEDIUM, locale);\n         } else {\n-            df = new SimpleDateFormat(timeFormat, locale);\n+            df = new SimpleDateFormat(timeFormat, locale == null ? Locale.getDefault() : locale);\n         }\n         df.setTimeZone(tz);\n         return df;",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixes a possible NPE introduced in ShoppingCart.loadCartFromOrder() with OFBIZ-5761. Found while working on OFBIZ-5430\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1643340 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e536447954f51b451159f5f161a48777f4aba5ec",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1f802e5e77485386f53e8b89f570f9c3c9dabf5d",
        "bug_id": "ofbiz-framework_134",
        "file": [
            {
                "sha": "554910203ea989acc5ebe415962f786c0594485b",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e536447954f51b451159f5f161a48777f4aba5ec/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e536447954f51b451159f5f161a48777f4aba5ec/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java?ref=e536447954f51b451159f5f161a48777f4aba5ec",
                "patch": "@@ -960,6 +960,7 @@ public int size() {\n     }\n \n     /** Returns an iterator of cart items. */\n+    @Override\n     public Iterator<ShoppingCartItem> iterator() {\n         return cartLines.iterator();\n     }\n@@ -2212,8 +2213,8 @@ public void cleanUpShipGroups() {\n     public int getShipInfoIndex (String shipGroupSeqId) {\n         int idx = -1;\n         for (int i=0; i<shipInfo.size(); i++) {\n-            CartShipInfo csi = (CartShipInfo) shipInfo.get(i);\n-            if (csi.shipGroupSeqId.equals(shipGroupSeqId)) {\n+            CartShipInfo csi = shipInfo.get(i);\n+            if (shipGroupSeqId.equals(csi.shipGroupSeqId)) {\n                 idx = i;\n                 break;\n             }\n@@ -4327,6 +4328,7 @@ public void createDropShipGroups(LocalDispatcher dispatcher) throws CartItemModi\n             this.ascending = ascending;\n         }\n \n+        @Override\n         public int compare(java.lang.Object obj, java.lang.Object obj1) {\n             ShoppingCartItem cartItem = (ShoppingCartItem) obj;\n             ShoppingCartItem cartItem1 = (ShoppingCartItem) obj1;\n@@ -4456,6 +4458,7 @@ public BigDecimal getUsageWeight() {\n             }\n         }\n \n+        @Override\n         public int compareTo(ProductPromoUseInfo other) {\n             return other.getUsageWeight().compareTo(getUsageWeight());\n         }\n@@ -4978,6 +4981,7 @@ public GenericValue getBillingAddress(Delegator delegator) {\n             return values;\n         }\n \n+        @Override\n         public int compareTo(Object o) {\n             CartPaymentInfo that = (CartPaymentInfo) o;\n             Debug.logInfo(\"Compare [\" + this.toString() + \"] to [\" + that.toString() + \"]\", module);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Throw an exception rather than failing with a NPE if delegatorInfo is null: this can happen for example when the entityconfig.xml file is missing.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1759372 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8150cf2e2dd385cc193b68276e26374c85478a25",
        "parent": "https://github.com/apache/ofbiz-framework/commit/4cbedfc51870e90fbdc2d0935c3b485b97a76e72",
        "bug_id": "ofbiz-framework_135",
        "file": [
            {
                "sha": "5c1f30c1c6a7a8a60625d80d4d2405c583993661",
                "filename": "framework/entity/src/main/java/org/apache/ofbiz/entity/GenericDelegator.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8150cf2e2dd385cc193b68276e26374c85478a25/framework/entity/src/main/java/org/apache/ofbiz/entity/GenericDelegator.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8150cf2e2dd385cc193b68276e26374c85478a25/framework/entity/src/main/java/org/apache/ofbiz/entity/GenericDelegator.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/main/java/org/apache/ofbiz/entity/GenericDelegator.java?ref=8150cf2e2dd385cc193b68276e26374c85478a25",
                "patch": "@@ -194,6 +194,10 @@ protected GenericDelegator(String delegatorFullName) throws GenericEntityExcepti\n         this.setDelegatorNames(delegatorFullName);\n         this.delegatorInfo = EntityConfig.getInstance().getDelegator(delegatorBaseName);\n \n+        if (this.delegatorInfo == null) {\n+            throw new GenericEntityException(\"No configuration found for delegator [\" + delegatorFullName + \"]\");\n+        }\n+\n         String kekText;\n         // before continuing, if there is a tenantId use the base delegator to see if it is valid\n         if (UtilValidate.isNotEmpty(this.delegatorTenantId)) {",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE caused by recent widget refactoring - https://issues.apache.org/jira/browse/OFBIZ-5875.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1639551 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/fd4ea93d140054ba75efd3ed83c2d78a6d2c307e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/35a4d4f4a8372c065dcbb7d2141f411b16c61964",
        "bug_id": "ofbiz-framework_136",
        "file": [
            {
                "sha": "8158a8d48074f031ffef2f344d0145f4a95ceabb",
                "filename": "framework/widget/src/org/ofbiz/widget/menu/ModelMenuItem.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/fd4ea93d140054ba75efd3ed83c2d78a6d2c307e/framework/widget/src/org/ofbiz/widget/menu/ModelMenuItem.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/fd4ea93d140054ba75efd3ed83c2d78a6d2c307e/framework/widget/src/org/ofbiz/widget/menu/ModelMenuItem.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/menu/ModelMenuItem.java?ref=fd4ea93d140054ba75efd3ed83c2d78a6d2c307e",
                "patch": "@@ -310,6 +310,7 @@ public void renderMenuItemString(Appendable writer, Map<String, Object> context,\n                                 localItem.link.setTarget(\"showPortalPage\");\n                             }\n                             localItem.link.setText((String)portalPage.get(\"portalPageName\", locale));\n+                            localItem.modelMenu = this.getModelMenu();\n                             menuStringRenderer.renderMenuItem(writer, context, localItem);\n                         }\n                     }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE when filtering by date without having specified a where EntityCondition.  Thanks to Arun Patidar for the report.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1633218 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c638cf936b7657eec4dbda2ae14669ce477ce477",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6b34697a86c1ac471a8aaf18ee1b425df7e2aabc",
        "bug_id": "ofbiz-framework_137",
        "file": [
            {
                "sha": "14992a35a44644bc42cad26e048c3cbb1f7ab184",
                "filename": "framework/entity/src/org/ofbiz/entity/util/EntityQuery.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c638cf936b7657eec4dbda2ae14669ce477ce477/framework/entity/src/org/ofbiz/entity/util/EntityQuery.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c638cf936b7657eec4dbda2ae14669ce477ce477/framework/entity/src/org/ofbiz/entity/util/EntityQuery.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/util/EntityQuery.java?ref=c638cf936b7657eec4dbda2ae14669ce477ce477",
                "patch": "@@ -446,7 +446,11 @@ private EntityFindOptions makeEntityFindOptions() {\n     private EntityCondition makeWhereCondition(boolean usingCache) {\n         // we don't use the useCache field here because not all queries will actually use the cache, e.g. findCountByCondition never uses the cache\n         if (filterByDate && !usingCache) {\n+            if (whereEntityCondition != null) {\n                 return EntityCondition.makeCondition(whereEntityCondition, this.makeDateCondition());\n+            } else {\n+                return this.makeDateCondition();\n+            }\n         }\n         return whereEntityCondition;\n     }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied patch from jira issue - OFBIZ-5769. \nweb.xml: empty allowPaths init param causes NPE\nThanks Deepak Dixit for the contribution. \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1626384 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c8cd3615e4b62153cadbce926422ff90c3917442",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c656003bb3e66d6e75c1930f4ea28f5ec82f39bc",
        "bug_id": "ofbiz-framework_138",
        "file": [
            {
                "sha": "fa2eafda43ada6e4dc4f45eb0dadaf7ba67ceccf",
                "filename": "framework/webapp/src/org/ofbiz/webapp/control/ContextFilter.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c8cd3615e4b62153cadbce926422ff90c3917442/framework/webapp/src/org/ofbiz/webapp/control/ContextFilter.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c8cd3615e4b62153cadbce926422ff90c3917442/framework/webapp/src/org/ofbiz/webapp/control/ContextFilter.java",
                "status": "modified",
                "changes": 18,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/control/ContextFilter.java?ref=c8cd3615e4b62153cadbce926422ff90c3917442",
                "patch": "@@ -169,9 +169,11 @@ public void doFilter(ServletRequest request, ServletResponse response, FilterCha\n             String redirectPath = config.getInitParameter(\"redirectPath\");\n             String errorCode = config.getInitParameter(\"errorCode\");\n \n-            List<String> allowList = StringUtil.split(allowedPath, \":\");\n-            allowList.add(\"/\");  // No path is allowed.\n-            allowList.add(\"\");   // No path is allowed.\n+            List<String> allowList = null;\n+            if ((allowList = StringUtil.split(allowedPath, \":\")) != null) {\n+                allowList.add(\"/\");  // No path is allowed.\n+                allowList.add(\"\");   // No path is allowed.\n+            }\n \n             if (debug) Debug.logInfo(\"[Domain]: \" + httpRequest.getServerName() + \" [Request]: \" + httpRequest.getRequestURI(), module);\n \n@@ -205,16 +207,20 @@ public void doFilter(ServletRequest request, ServletResponse response, FilterCha\n \n             // Verbose Debugging\n             if (Debug.verboseOn()) {\n-                for (String allow: allowList) {\n-                    Debug.logVerbose(\"[Allow]: \" + allow, module);\n+                if (allowList != null) {\n+                    for (String allow: allowList) {\n+                        Debug.logVerbose(\"[Allow]: \" + allow, module);\n+                    }\n                 }\n                 Debug.logVerbose(\"[Request path]: \" + requestPath, module);\n                 Debug.logVerbose(\"[Request info]: \" + requestInfo, module);\n                 Debug.logVerbose(\"[Servlet path]: \" + httpRequest.getServletPath(), module);\n             }\n \n             // check to make sure the requested url is allowed\n-            if (!allowList.contains(requestPath) && !allowList.contains(requestInfo) && !allowList.contains(httpRequest.getServletPath())) {\n+            if (allowList != null &&\n+                (!allowList.contains(requestPath) && !allowList.contains(requestInfo) && !allowList.contains(httpRequest.getServletPath()))\n+                ) {\n                 String filterMessage = \"[Filtered request]: \" + contextUri;\n                 \n                 if (redirectPath == null) {",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Improved: Check there are no white spaces around the name of a form field when \nupdating a form\n(OFBIZ-9306)\n\nSometimes ago, I lost an hour because of a space at the end of a field's name in \na form. In creation it does not pass (the field lacks) but when updating the \nform it passes and it's hard to find from where comes the problem.\n\nThanks: Michael for review and spotting a possible NPE in my 1st patch\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/ofbiz-framework/trunk@1805141 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3cc575b6dea8ab42b434a36a0df6e3b7c305ca76",
        "parent": "https://github.com/apache/ofbiz-framework/commit/0b235c737f8c3d815fe974d531c78ea656b53820",
        "bug_id": "ofbiz-framework_139",
        "file": [
            {
                "sha": "fe725d4b77e6cc95cb068ebe77eaa4683eefa0ed",
                "filename": "framework/widget/src/main/java/org/apache/ofbiz/widget/model/ModelFormField.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3cc575b6dea8ab42b434a36a0df6e3b7c305ca76/framework/widget/src/main/java/org/apache/ofbiz/widget/model/ModelFormField.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3cc575b6dea8ab42b434a36a0df6e3b7c305ca76/framework/widget/src/main/java/org/apache/ofbiz/widget/model/ModelFormField.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/main/java/org/apache/ofbiz/widget/model/ModelFormField.java?ref=3cc575b6dea8ab42b434a36a0df6e3b7c305ca76",
                "patch": "@@ -381,6 +381,10 @@ public String getEntry(Map<String, ? extends Object> context, String defaultValu\n             if (simpleEncoder != null)\n                 returnValue = simpleEncoder.encode(returnValue);\n         }\n+\n+        if (returnValue != null) {\n+            returnValue = returnValue.trim();\n+        }\n         return returnValue;\n     }\n ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Order view NPE bug fix. Don't assume a product store has a related facility.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1560048 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/13589721342ce5165055316491dddaee4670a577",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1159f7cfa50891158ee5c82e7f3f761aeca033a3",
        "bug_id": "ofbiz-framework_140",
        "file": [
            {
                "sha": "3e40191f39a0c3273cf3e3550995e142b890e259",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/13589721342ce5165055316491dddaee4670a577/applications/order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/13589721342ce5165055316491dddaee4670a577/applications/order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy",
                "status": "modified",
                "changes": 10,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy?ref=13589721342ce5165055316491dddaee4670a577",
                "patch": "@@ -273,10 +273,12 @@ if (orderHeader) {\n     context.productStore = productStore;\n     if (productStore) {\n         facility = productStore.getRelatedOne(\"Facility\", false);\n-        inventorySummaryByFacility = dispatcher.runSync(\"getProductInventorySummaryForItems\", [orderItems : orderItems, facilityId : facility.facilityId]);\n-        context.availableToPromiseByFacilityMap = inventorySummaryByFacility.availableToPromiseMap;\n-        context.quantityOnHandByFacilityMap = inventorySummaryByFacility.quantityOnHandMap;\n-        context.facility = facility;\n+        if (facility) {\n+            inventorySummaryByFacility = dispatcher.runSync(\"getProductInventorySummaryForItems\", [orderItems : orderItems, facilityId : facility.facilityId]);\n+            context.availableToPromiseByFacilityMap = inventorySummaryByFacility.availableToPromiseMap;\n+            context.quantityOnHandByFacilityMap = inventorySummaryByFacility.quantityOnHandMap;\n+            context.facility = facility;\n+        }\n     }\n \n     // Get a list of facilities for purchase orders to receive against.",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Noted this in trunk demo log\n\n2012-05-04 23:43:12,687 (Finalizer) [       SQLProcessor.java:836:ERROR]\n---- runtime exception report --------------------------------------------------\nError closing the result, connection, etc in finalize SQLProcessor\nException: java.lang.NullPointerException\nMessage: null\n---- stack trace ---------------------------------------------------------------\njava.lang.NullPointerException\norg.apache.commons.dbcp.managed.ManagedConnection.close(ManagedConnection.java:147)\norg.ofbiz.entity.jdbc.SQLProcessor.close(SQLProcessor.java:225)\norg.ofbiz.entity.jdbc.SQLProcessor.finalize(SQLProcessor.java:834)\njava.lang.ref.Finalizer.invokeFinalizeMethod(Native Method)\njava.lang.ref.Finalizer.runFinalizer(Finalizer.java:83)\njava.lang.ref.Finalizer.access$100(Finalizer.java:14)\njava.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:160)\n--------------------------------------------------------------------------------\n\n2012-05-04 23:43:12,687 (Finalizer) [ EntityListIterator.java:543:ERROR]\n====================================================================\n EntityListIterator Not Closed for Entity [WorkEffortAndPartyAssign], caught in Finalize\n ====================================================================\n\nThis commit will fix it\n\nI have \"organize import\" set when saving. So you might notice no commented changes here and then\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1337502 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e11c9cecb3148acc1fef6c96d9b04df357485f48",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1f12dec9be19bc80c1c9f82a7b7320316fca5dcf",
        "bug_id": "ofbiz-framework_141",
        "file": [
            {
                "sha": "172cccdf81a1a1f596ddb1c3b368b0f2c56465c3",
                "filename": "applications/workeffort/src/org/ofbiz/workeffort/workeffort/WorkEffortServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e11c9cecb3148acc1fef6c96d9b04df357485f48/applications/workeffort/src/org/ofbiz/workeffort/workeffort/WorkEffortServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e11c9cecb3148acc1fef6c96d9b04df357485f48/applications/workeffort/src/org/ofbiz/workeffort/workeffort/WorkEffortServices.java",
                "status": "modified",
                "changes": 11,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/workeffort/src/org/ofbiz/workeffort/workeffort/WorkEffortServices.java?ref=e11c9cecb3148acc1fef6c96d9b04df357485f48",
                "patch": "@@ -20,7 +20,6 @@\n package org.ofbiz.workeffort.workeffort;\n \n import java.sql.Timestamp;\n-import com.ibm.icu.util.Calendar;\n import java.util.Collection;\n import java.util.Date;\n import java.util.List;\n@@ -62,6 +61,8 @@\n import org.ofbiz.service.calendar.TemporalExpression;\n import org.ofbiz.service.calendar.TemporalExpressionWorker;\n \n+import com.ibm.icu.util.Calendar;\n+\n /**\n  * WorkEffortServices - WorkEffort related Services\n  */\n@@ -1146,6 +1147,14 @@ protected static void processEventReminder(DispatchContext ctx, GenericValue rem\n                 eli.close();\n             } catch (Exception e) {\n                 Debug.logError(e, \"Error while closing EntityListIterator: \", module);\n+            } finally {\n+                if (eli != null) {\n+                    try {\n+                        eli.close();\n+                    } catch (GenericEntityException e) {\n+                        Debug.logWarning(e, module);\n+                    }\n+                }\n             }\n         } else {\n             List<GenericValue> workEfforts = UtilGenerics.checkList(context.get(\"workEfforts\"));",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE introduced in rev 1494057, reported by Ankit Jain on the dev mailing list.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1494668 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b23cbb323ede90e267ab1c002314b3f3f7e2abf3",
        "parent": "https://github.com/apache/ofbiz-framework/commit/19ff1cb3937acda94357e8e6fee2ad038981156b",
        "bug_id": "ofbiz-framework_142",
        "file": [
            {
                "sha": "5a8ddf4a8be35002c1da084c67fd12f74ad0a2b3",
                "filename": "framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b23cbb323ede90e267ab1c002314b3f3f7e2abf3/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b23cbb323ede90e267ab1c002314b3f3f7e2abf3/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java?ref=b23cbb323ede90e267ab1c002314b3f3f7e2abf3",
                "patch": "@@ -114,7 +114,7 @@\n     protected boolean separateColumn = false;\n     protected Boolean requiredField = null;\n     protected Boolean sortField = null;\n-    protected String sortFieldHelpText;\n+    protected String sortFieldHelpText = \"\";\n     protected String headerLink;\n     protected String headerLinkStyle;\n \n@@ -124,7 +124,7 @@\n     protected List<UpdateArea> onClickUpdateAreas;\n \n     // ===== CONSTRUCTORS =====\n-    /** Copy Constructor */\n+    /** Default Constructor */\n     public ModelFormField(ModelForm modelForm) {\n         this.modelForm = modelForm;\n     }\n@@ -244,7 +244,7 @@ public void mergeOverrideModelFormField(ModelFormField overrideFormField) {\n         if (UtilValidate.isNotEmpty(overrideFormField.tooltip)) this.tooltip = overrideFormField.tooltip;\n         if (overrideFormField.requiredField != null) this.requiredField = overrideFormField.requiredField;\n         if (overrideFormField.sortField != null) this.sortField = overrideFormField.sortField;\n-        if (!overrideFormField.sortFieldHelpText.isEmpty()) this.sortFieldHelpText = overrideFormField.sortFieldHelpText;\n+        if (UtilValidate.isNotEmpty(overrideFormField.sortFieldHelpText)) this.sortFieldHelpText = overrideFormField.sortFieldHelpText;\n         if (UtilValidate.isNotEmpty(overrideFormField.titleAreaStyle)) this.titleAreaStyle = overrideFormField.titleAreaStyle;\n         if (UtilValidate.isNotEmpty(overrideFormField.widgetAreaStyle)) this.widgetAreaStyle = overrideFormField.widgetAreaStyle;\n         if (UtilValidate.isNotEmpty(overrideFormField.titleStyle)) this.titleStyle = overrideFormField.titleStyle;",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added check to fix a NPE error preventing the purchase order creation for orders with non product items.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1309724 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ef748ee49d17acb4b73078196ee024218e541c4e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/622a23469424710aea384ad68e8318db60dc6f58",
        "bug_id": "ofbiz-framework_143",
        "file": [
            {
                "sha": "7b7bc10fdd9d0e4c115810cdd31382e72f8b8953",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ef748ee49d17acb4b73078196ee024218e541c4e/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ef748ee49d17acb4b73078196ee024218e541c4e/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderServices.java?ref=ef748ee49d17acb4b73078196ee024218e541c4e",
                "patch": "@@ -1080,7 +1080,7 @@ private static boolean hasPermission(String orderTypeId, String partyId, Generic\n                     String productId = (String) orderItem.get(\"productId\");\n                     GenericValue product = delegator.getRelatedOne(\"Product\", orderItem);\n                     \n-                    if(\"SERVICE_PRODUCT\".equals(product.get(\"productTypeId\")) || \"AGGREGATEDSERV_CONF\".equals(product.get(\"productTypeId\"))){\n+                    if (product!= null && (\"SERVICE_PRODUCT\".equals(product.get(\"productTypeId\")) || \"AGGREGATEDSERV_CONF\".equals(product.get(\"productTypeId\")))) {\n                         String inventoryFacilityId = null;\n                         if (\"Y\".equals(productStore.getString(\"oneInventoryFacility\"))) {\n                             inventoryFacilityId = productStore.getString(\"inventoryFacilityId\");",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Prevent NPE error if a bulk item is added to the cart.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1309716 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/622a23469424710aea384ad68e8318db60dc6f58",
        "parent": "https://github.com/apache/ofbiz-framework/commit/565598999750c4db2c9904fe17a0db27050218a0",
        "bug_id": "ofbiz-framework_144",
        "file": [
            {
                "sha": "a9d69a70d5d7bffea5f04e9f66c434e76fb4d2c0",
                "filename": "applications/order/webapp/ordermgr/entry/cart/showcartitems.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/622a23469424710aea384ad68e8318db60dc6f58/applications/order/webapp/ordermgr/entry/cart/showcartitems.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/622a23469424710aea384ad68e8318db60dc6f58/applications/order/webapp/ordermgr/entry/cart/showcartitems.ftl",
                "status": "modified",
                "changes": 6,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/entry/cart/showcartitems.ftl?ref=622a23469424710aea384ad68e8318db60dc6f58",
                "patch": "@@ -211,8 +211,10 @@ under the License.\n             </tr>\n \n             <#-- Show Associated Products (not for Variants) -->\n-            <#assign itemProductAssocList = cartLine.getProduct().getRelated(\"MainProductAssoc\",\n-                Static[\"org.ofbiz.base.util.UtilMisc\"].toList(\"productAssocTypeId\", \"sequenceNum\"))?if_exists/>\n+            <#if cartLine.getProductId()?exists>\n+              <#assign itemProductAssocList = cartLine.getProduct().getRelated(\"MainProductAssoc\",\n+                  Static[\"org.ofbiz.base.util.UtilMisc\"].toList(\"productAssocTypeId\", \"sequenceNum\"))?if_exists/>\n+            </#if>\n             <#if itemProductAssocList?exists && itemProductAssocList?has_content>\n               <tr><td colspan=\"8\"><hr /></td></tr>\n               <tr>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE I introduced in my previous commit. Reported by Chatree Srichart.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1165233 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/642c6383e59f40f4c00c407acda8b16426312f6c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/98385f75d2d1ce249bf6e7adf79d2306c7c61acc",
        "bug_id": "ofbiz-framework_145",
        "file": [
            {
                "sha": "1d61d6d29ee6766fba132c93121eb1f1a688ebf5",
                "filename": "framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/642c6383e59f40f4c00c407acda8b16426312f6c/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/642c6383e59f40f4c00c407acda8b16426312f6c/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java?ref=642c6383e59f40f4c00c407acda8b16426312f6c",
                "patch": "@@ -2127,7 +2127,7 @@ public String getImageLocation(Map<String, Object> context){\n \n         public String getDescription(Map<String, Object> context) {\n             String retVal = null;\n-            if (!this.description.isEmpty()) {\n+            if (this.description != null && !this.description.isEmpty()) {\n                 retVal = this.description.expandString(context);\n             } else {\n                 retVal = this.modelFormField.getEntry(context);\n@@ -2213,7 +2213,7 @@ public String getDescription(Map<String, Object> context) {\n                     throw new IllegalArgumentException(errMsg);\n                 }\n             }\n-            if (!this.description.isEmpty() && retVal != null && this.getModelFormField().getEncodeOutput()) {\n+            if (this.description != null && !this.description.isEmpty() && retVal != null && this.getModelFormField().getEncodeOutput()) {\n                 StringUtil.SimpleEncoder simpleEncoder = (StringUtil.SimpleEncoder) context.get(\"simpleEncoder\");\n                 if (simpleEncoder != null) {\n                     retVal = simpleEncoder.encode(retVal);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Daniel Riquelme \"ignore-if-empty in entity-options throw NPE when env-name is in fact empty\" https://issues.apache.org/jira/browse/OFBIZ-4843\n\nWhen specifying the ignore-if-empty attribute inside an entity-constraint in an entity-options a NPE will be thrown whenever the env-name of this entity-constraint is empty.\n\nThe error occurs because a null condition is created for the entity-constraint.\nWhen validateSql get called in\n\norg.ofbiz.entity.condition.EntityJoinOperator.validateSql(EntityJoinOperator.java:178)\n\nthere is no null checking so when\n\ncondition.checkCondition(modelEntity);\n\ngets called an NPE is thrown.\n\nThe patch modifies the code in\n\nframework/widget/src/org/ofbiz/widget/form/ModelFormField.java\n\nto avoid the inclusion of a null condition to the entity-options.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1340826 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ab865939f0b7293d674811a6f9a4acd3d67f0876",
        "parent": "https://github.com/apache/ofbiz-framework/commit/4395b7967d3083d2a883f4a55f6262dccfbd1904",
        "bug_id": "ofbiz-framework_146",
        "file": [
            {
                "sha": "8c06027c8a573f1ded0ce755932919bb60c099b7",
                "filename": "framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ab865939f0b7293d674811a6f9a4acd3d67f0876/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ab865939f0b7293d674811a6f9a4acd3d67f0876/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java?ref=ab865939f0b7293d674811a6f9a4acd3d67f0876",
                "patch": "@@ -1587,7 +1587,10 @@ public void addOptionValues(List<OptionValue> optionValues, Map<String, Object>\n                     if (modelEntity == null) {\n                         throw new IllegalArgumentException(\"Error in entity-options: could not find entity [\" + this.entityName + \"]\");\n                     }\n-                    expandedConditionList.add(condition.createCondition(context, modelEntity, delegator.getModelFieldTypeReader(modelEntity)));\n+                    EntityCondition createdCondition = condition.createCondition(context, modelEntity, delegator.getModelFieldTypeReader(modelEntity));\n+                    if (createdCondition!=null) {\n+                        expandedConditionList.add(createdCondition);\n+                    }\n                 }\n                 findCondition = EntityCondition.makeCondition(expandedConditionList);\n             }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "FIX: Fix NPE when converting a view to xml that was originally created as\na dynamic-view.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1139880 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/0d8288eb1a6f6f201f5be28add99458aba4bf215",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6b73f3e3ac1c56b850ff85545b6d98b949adae47",
        "bug_id": "ofbiz-framework_147",
        "file": [
            {
                "sha": "091cef69fa9f6f44d072306ba28eb235f8cee92b",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderLookupServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0d8288eb1a6f6f201f5be28add99458aba4bf215/applications/order/src/org/ofbiz/order/order/OrderLookupServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0d8288eb1a6f6f201f5be28add99458aba4bf215/applications/order/src/org/ofbiz/order/order/OrderLookupServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderLookupServices.java?ref=0d8288eb1a6f6f201f5be28add99458aba4bf215",
                "patch": "@@ -101,7 +101,7 @@ Licensed to the Apache Software Foundation (ASF) under one\n         // dynamic view entity\n         DynamicViewEntity dve = new DynamicViewEntity();\n         dve.addMemberEntity(\"OH\", \"OrderHeader\");\n-        dve.addAliasAll(\"OH\", \"\"); // no prefix\n+        dve.addAliasAll(\"OH\", \"\", null); // no prefix\n         dve.addRelation(\"one-nofk\", \"\", \"OrderType\", UtilMisc.toList(new ModelKeyMap(\"orderTypeId\", \"orderTypeId\")));\n         dve.addRelation(\"one-nofk\", \"\", \"StatusItem\", UtilMisc.toList(new ModelKeyMap(\"statusId\", \"statusId\")));\n ",
                "deletions": 1
            },
            {
                "sha": "0b024c55968794be7b357f523151f48f1a54b473",
                "filename": "applications/product/webapp/facility/WEB-INF/actions/facility/FindInventoryItemsByLabels.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0d8288eb1a6f6f201f5be28add99458aba4bf215/applications/product/webapp/facility/WEB-INF/actions/facility/FindInventoryItemsByLabels.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0d8288eb1a6f6f201f5be28add99458aba4bf215/applications/product/webapp/facility/WEB-INF/actions/facility/FindInventoryItemsByLabels.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/WEB-INF/actions/facility/FindInventoryItemsByLabels.groovy?ref=0d8288eb1a6f6f201f5be28add99458aba4bf215",
                "patch": "@@ -37,7 +37,7 @@ try {\n \n inventoryItemAndLabelsView = new DynamicViewEntity();\n inventoryItemAndLabelsView.addMemberEntity(\"II\", \"InventoryItem\");\n-inventoryItemAndLabelsView.addAliasAll(\"II\", null);\n+inventoryItemAndLabelsView.addAliasAll(\"II\", null, null);\n for (int i = 1; i <= numberOfFields; i++) {\n     inventoryItemLabelId = parameters.get(\"inventoryItemLabelId_\" + i);\n     if (inventoryItemLabelId) {",
                "deletions": 1
            },
            {
                "sha": "4d87f928d8a9f37e98dd271aa0931386d77ddb5b",
                "filename": "applications/product/webapp/facility/WEB-INF/actions/facility/ViewFacilityInventoryByProduct.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0d8288eb1a6f6f201f5be28add99458aba4bf215/applications/product/webapp/facility/WEB-INF/actions/facility/ViewFacilityInventoryByProduct.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0d8288eb1a6f6f201f5be28add99458aba4bf215/applications/product/webapp/facility/WEB-INF/actions/facility/ViewFacilityInventoryByProduct.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/WEB-INF/actions/facility/ViewFacilityInventoryByProduct.groovy?ref=0d8288eb1a6f6f201f5be28add99458aba4bf215",
                "patch": "@@ -63,7 +63,7 @@ if (action) {\n     }\n \n     prodView.addMemberEntity(\"PRFA\", \"ProductFacility\");\n-    prodView.addAliasAll(\"PRFA\", null);\n+    prodView.addAliasAll(\"PRFA\", null, null);\n \n     prodView.addMemberEntity(\"PROD\", \"Product\");\n     prodView.addViewLink(\"PROD\", \"PRFA\", Boolean.FALSE, ModelKeyMap.makeKeyMapList(\"productId\"));",
                "deletions": 1
            },
            {
                "sha": "338ffb3f34be3fc6b6a41b944b037abad94fef7f",
                "filename": "framework/entity/src/org/ofbiz/entity/model/DynamicViewEntity.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0d8288eb1a6f6f201f5be28add99458aba4bf215/framework/entity/src/org/ofbiz/entity/model/DynamicViewEntity.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0d8288eb1a6f6f201f5be28add99458aba4bf215/framework/entity/src/org/ofbiz/entity/model/DynamicViewEntity.java",
                "status": "modified",
                "changes": 11,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/model/DynamicViewEntity.java?ref=0d8288eb1a6f6f201f5be28add99458aba4bf215",
                "patch": "@@ -20,6 +20,7 @@\n \n import java.io.IOException;\n import java.util.ArrayList;\n+import java.util.Collection;\n import java.util.HashMap;\n import java.util.Iterator;\n import java.util.List;\n@@ -228,8 +229,16 @@ public void addMemberEntity(String entityAlias, String entityName) {\n         return this.memberModelMemberEntities.entrySet().iterator();\n     }\n \n+    /**\n+     * @deprecated use {@link #addAliasAll(String, String, Collection<String>)}\n+     */\n+    @Deprecated\n     public void addAliasAll(String entityAlias, String prefix) {\n-        ModelAliasAll aliasAll = new ModelAliasAll(entityAlias, prefix, false, null, null);\n+        addAliasAll(entityAlias, prefix, null);\n+    }\n+\n+    public void addAliasAll(String entityAlias, String prefix, Collection<String> excludes) {\n+        ModelAliasAll aliasAll = new ModelAliasAll(entityAlias, prefix, false, null, excludes);\n         this.aliasAlls.add(aliasAll);\n     }\n ",
                "deletions": 1
            },
            {
                "sha": "98a3c48e4995fae811c4d9084cd8bd4edb101910",
                "filename": "framework/entity/src/org/ofbiz/entity/sql/EntityPlanner.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0d8288eb1a6f6f201f5be28add99458aba4bf215/framework/entity/src/org/ofbiz/entity/sql/EntityPlanner.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0d8288eb1a6f6f201f5be28add99458aba4bf215/framework/entity/src/org/ofbiz/entity/sql/EntityPlanner.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/sql/EntityPlanner.java?ref=0d8288eb1a6f6f201f5be28add99458aba4bf215",
                "patch": "@@ -82,7 +82,8 @@ public EntitySelectPlan planSelect(SQLSelect selectStatement) {\n         addMember(dve, table.getTableName());\n         addJoined(dve, table.getTableName().getAlias(), table.getJoined());\n         for (FieldAll fieldAll: selectGroup.getFieldAlls()) {\n-            dve.addAliasAll(fieldAll.getAlias(), null);\n+            // FIXME: handle excludes\n+            dve.addAliasAll(fieldAll.getAlias(), null, null);\n         }\n         for (Relation relation: selectStatement.getRelations().values()) {\n             dve.addRelation(relation.getType(), relation.getTitle(), relation.getEntityName(), buildKeyMaps(relation));",
                "deletions": 1
            },
            {
                "sha": "565f1595e6a5c3c0be7f010fd18777099fe9e5f0",
                "filename": "specialpurpose/shark/src/org/ofbiz/shark/expression/BaseEntityCondExprBldr.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0d8288eb1a6f6f201f5be28add99458aba4bf215/specialpurpose/shark/src/org/ofbiz/shark/expression/BaseEntityCondExprBldr.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0d8288eb1a6f6f201f5be28add99458aba4bf215/specialpurpose/shark/src/org/ofbiz/shark/expression/BaseEntityCondExprBldr.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/shark/src/org/ofbiz/shark/expression/BaseEntityCondExprBldr.java?ref=0d8288eb1a6f6f201f5be28add99458aba4bf215",
                "patch": "@@ -164,7 +164,7 @@ private DynamicViewEntity makeView() {\n         Iterator aai = autoFields.iterator();\n         while (aai.hasNext()) {\n             String alias = (String) aai.next();\n-            view.addAliasAll(alias, \"\");\n+            view.addAliasAll(alias, \"\", null);\n         }\n \n         // create the other field aliases",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE in tax calculation when no ProducePrice record matches the tax calc constraints\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1042884 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d60edd5bb4e61db1ec1154a50a88258176fdec6b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/5eb7d80579af4dc13d2fad4d1eab6db75303c2d1",
        "bug_id": "ofbiz-framework_148",
        "file": [
            {
                "sha": "70f0ccbd48b9dbb7a610516304685eec22025b1d",
                "filename": "applications/accounting/src/org/ofbiz/accounting/tax/TaxAuthorityServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d60edd5bb4e61db1ec1154a50a88258176fdec6b/applications/accounting/src/org/ofbiz/accounting/tax/TaxAuthorityServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d60edd5bb4e61db1ec1154a50a88258176fdec6b/applications/accounting/src/org/ofbiz/accounting/tax/TaxAuthorityServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/tax/TaxAuthorityServices.java?ref=d60edd5bb4e61db1ec1154a50a88258176fdec6b",
                "patch": "@@ -407,7 +407,7 @@ private static List getTaxAdjustments(Delegator delegator, GenericValue product,\n \n                 GenericValue taxAdjValue = delegator.makeValue(\"OrderAdjustment\");\n \n-                if (\"Y\".equals(productPrice.getString(\"taxInPrice\"))) {\n+                if (productPrice != null && \"Y\".equals(productPrice.getString(\"taxInPrice\"))) {\n                     // tax is in the price already, so we want the adjustment to be a VAT_TAX adjustment to be subtracted instead of a SALES_TAX adjustment to be added\n                     taxAdjValue.set(\"orderAdjustmentTypeId\", \"VAT_TAX\");\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "The poster of a review(UserLogin) may not have a party attached, so\nprotect against a NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1040797 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b42218b540ca099ade80bd86e28eca9393a74c28",
        "parent": "https://github.com/apache/ofbiz-framework/commit/4b9c6d3fcae63e2daa263f5ae0ba341bdbaf8b61",
        "bug_id": "ofbiz-framework_149",
        "file": [
            {
                "sha": "2d7971340512253ab07fa391165f509f043d3f82",
                "filename": "applications/product/webapp/catalog/reviews/pendingReviews.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b42218b540ca099ade80bd86e28eca9393a74c28/applications/product/webapp/catalog/reviews/pendingReviews.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b42218b540ca099ade80bd86e28eca9393a74c28/applications/product/webapp/catalog/reviews/pendingReviews.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/catalog/reviews/pendingReviews.ftl?ref=b42218b540ca099ade80bd86e28eca9393a74c28",
                "patch": "@@ -58,13 +58,15 @@ under the License.\n                 <#list pendingReviews as review>\n                 <#if review.userLoginId?has_content>\n                 <#assign postedUserLogin = review.getRelatedOne(\"UserLogin\")>\n+                <#if postedUserLogin.partyId?has_content>\n                 <#assign party = postedUserLogin.getRelatedOne(\"Party\")>\n                 <#assign partyTypeId = party.get(\"partyTypeId\")>\n                 <#if partyTypeId == \"PERSON\">\n                     <#assign postedPerson = postedUserLogin.getRelatedOne(\"Person\")>\n                 <#else>\n                     <#assign postedPerson = postedUserLogin.getRelatedOne(\"PartyGroup\")>\n                 </#if>\n+                </#if>\n                 </#if>\n                   <tr id=\"review_tableRow_${rowCount}\" valign=\"middle\"<#if rowClass == \"1\"> class=\"alternate-row\"</#if>>\n                       <td>",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Another fix for an NPE seen in the wild when there is no CartShipItemInfo object available for an order item\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1025871 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/097e5d9d4b410b4f0a0f259f80c910119b9cae31",
        "parent": "https://github.com/apache/ofbiz-framework/commit/cbee2407ff988fa75921cf411d035d61842852a3",
        "bug_id": "ofbiz-framework_150",
        "file": [
            {
                "sha": "622807f7f6b2fd473e898669c23b5b2425727526",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/097e5d9d4b410b4f0a0f259f80c910119b9cae31/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/097e5d9d4b410b4f0a0f259f80c910119b9cae31/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "status": "modified",
                "changes": 16,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java?ref=097e5d9d4b410b4f0a0f259f80c910119b9cae31",
                "patch": "@@ -46,6 +46,7 @@\n import org.ofbiz.entity.util.EntityUtil;\n import org.ofbiz.order.order.OrderReadHelper;\n import org.ofbiz.order.shoppingcart.ShoppingCart.CartShipInfo;\n+import org.ofbiz.order.shoppingcart.ShoppingCart.CartShipInfo.CartShipItemInfo;\n import org.ofbiz.product.config.ProductConfigWorker;\n import org.ofbiz.product.config.ProductConfigWrapper;\n import org.ofbiz.service.DispatchContext;\n@@ -577,11 +578,16 @@\n                         if (cartItem == null) {\n                             Debug.logWarning(\"In loadCartFromOrder could not find cart item for itemIndex=\" + itemIndex + \", for orderId=\" + orderId, module);\n                         } else {\n-                            List itemTaxAdj = csi.getShipItemInfo(cartItem).itemTaxAdj;\n-                            for(GenericValue shipGroupItemAdjustment : shipGroupItemAdjustments) {\n-                                if (\"SALES_TAX\".equals(shipGroupItemAdjustment.get(\"orderAdjustmentTypeId\"))) {\n-                                    itemTaxAdj.add(shipGroupItemAdjustment);\n-                                    continue;\n+                            CartShipItemInfo cartShipItemInfo = csi.getShipItemInfo(cartItem);\n+                            if (cartShipItemInfo == null) {\n+                                Debug.logWarning(\"In loadCartFromOrder could not find CartShipItemInfo for itemIndex=\" + itemIndex + \", for orderId=\" + orderId, module);\n+                            } else {\n+                                List itemTaxAdj = cartShipItemInfo.itemTaxAdj;\n+                                for(GenericValue shipGroupItemAdjustment : shipGroupItemAdjustments) {\n+                                    if (\"SALES_TAX\".equals(shipGroupItemAdjustment.get(\"orderAdjustmentTypeId\"))) {\n+                                        itemTaxAdj.add(shipGroupItemAdjustment);\n+                                        continue;\n+                                    }\n                                 }\n                             }\n                         }",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed an occasional NPE, seems to happen when promo items are being added/removed\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1024553 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6755352678cceef0b212c1ede833ba002f6862aa",
        "parent": "https://github.com/apache/ofbiz-framework/commit/fc67cd973a13d4e57a5005cdc24d508d75bceab6",
        "bug_id": "ofbiz-framework_151",
        "file": [
            {
                "sha": "7329b72f68e2ea07aa67bb4bf93f33e9472d260f",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6755352678cceef0b212c1ede833ba002f6862aa/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6755352678cceef0b212c1ede833ba002f6862aa/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "status": "modified",
                "changes": 16,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java?ref=6755352678cceef0b212c1ede833ba002f6862aa",
                "patch": "@@ -551,7 +551,6 @@\n             if (UtilValidate.isNotEmpty(orderItems)) {\n                 int itemIndex = 0;\n                 for (GenericValue item : orderItems) {\n-\n                     List<GenericValue> orderItemAdjustments = orh.getOrderItemAdjustments(item);\n                     // set the item's ship group info\n                     List<GenericValue> shipGroupAssocs = orh.getOrderItemShipGroupAssocs(item);\n@@ -574,11 +573,16 @@\n \n                         List<GenericValue> shipGroupItemAdjustments = EntityUtil.filterByAnd(orderItemAdjustments, UtilMisc.toMap(\"shipGroupSeqId\", cartShipGroupIndexStr));\n                         ShoppingCart.CartShipInfo csi = cart.getShipInfo(cartShipGroupIndex);\n-                        List itemTaxAdj = csi.getShipItemInfo(cart.findCartItem(itemIndex)).itemTaxAdj;\n-                        for(GenericValue shipGroupItemAdjustment : shipGroupItemAdjustments) {\n-                            if (\"SALES_TAX\".equals(shipGroupItemAdjustment.get(\"orderAdjustmentTypeId\"))) {\n-                                itemTaxAdj.add(shipGroupItemAdjustment);\n-                                continue;\n+                        ShoppingCartItem cartItem = cart.findCartItem(itemIndex);\n+                        if (cartItem == null) {\n+                            Debug.logWarning(\"In loadCartFromOrder could not find cart item for itemIndex=\" + itemIndex + \", for orderId=\" + orderId, module);\n+                        } else {\n+                            List itemTaxAdj = csi.getShipItemInfo(cartItem).itemTaxAdj;\n+                            for(GenericValue shipGroupItemAdjustment : shipGroupItemAdjustments) {\n+                                if (\"SALES_TAX\".equals(shipGroupItemAdjustment.get(\"orderAdjustmentTypeId\"))) {\n+                                    itemTaxAdj.add(shipGroupItemAdjustment);\n+                                    continue;\n+                                }\n                             }\n                         }\n                     }",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added error message for when entity name is wrong instead of an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1004343 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8c6f5defdfabd91403ed19730c1b14feac313cb7",
        "parent": "https://github.com/apache/ofbiz-framework/commit/d5c20ce0bb60700a969c6daa461a70bcfc61d18d",
        "bug_id": "ofbiz-framework_152",
        "file": [
            {
                "sha": "57dfc67b126cf3aceb556fc8fcb8bf6ca945677f",
                "filename": "framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8c6f5defdfabd91403ed19730c1b14feac313cb7/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8c6f5defdfabd91403ed19730c1b14feac313cb7/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java?ref=8c6f5defdfabd91403ed19730c1b14feac313cb7",
                "patch": "@@ -1735,6 +1735,9 @@ public void addOptionValues(List<OptionValue> optionValues, Map<String, Object>\n                 List<EntityCondition> expandedConditionList = new LinkedList<EntityCondition>();\n                 for (EntityFinderUtil.Condition condition: constraintList) {\n                     ModelEntity modelEntity = delegator.getModelEntity(this.entityName);\n+                    if (modelEntity == null) {\n+                        throw new IllegalArgumentException(\"Error in entity-options: could not find entity [\" + this.entityName + \"]\");\n+                    }\n                     expandedConditionList.add(condition.createCondition(context, modelEntity, delegator.getModelFieldTypeReader(modelEntity)));\n                 }\n                 findCondition = EntityCondition.makeCondition(expandedConditionList);",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE when a form field use-when attribute evaluates to null\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1001325 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/1461401e7104f87538a895abd5cbad9d906cae85",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c8ab3e7e19f48ef67524bba6661ecc0ffe15f4a2",
        "bug_id": "ofbiz-framework_153",
        "file": [
            {
                "sha": "1338dd9feb5f016eb9a97789ec6e234b43dc72bd",
                "filename": "framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1461401e7104f87538a895abd5cbad9d906cae85/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1461401e7104f87538a895abd5cbad9d906cae85/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java?ref=1461401e7104f87538a895abd5cbad9d906cae85",
                "patch": "@@ -1156,7 +1156,7 @@ public boolean shouldUse(Map<String, Object> context) {\n                     condTrue = boolVal.booleanValue();\n                 } else {\n                     throw new IllegalArgumentException(\"Return value from use-when condition eval was not a Boolean: \"\n-                            + retVal.getClass().getName() + \" [\" + retVal + \"] on the field \" + this.name + \" of form \" + this.modelForm.getName());\n+                            + (retVal != null ? retVal.getClass().getName() : \"null\") + \" [\" + retVal + \"] on the field \" + this.name + \" of form \" + this.modelForm.getName());\n                 }\n \n                 return condTrue;",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE in thrown exception reporting an invalid orderHeader when\norderHeader is null in the constructor.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@965915 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/0a5b117b8fe3783885575a01f5e6f5a77d5866b6",
        "parent": "https://github.com/apache/ofbiz-framework/commit/695cc497f258302f8afd07caf2722fbaabcfc67c",
        "bug_id": "ofbiz-framework_154",
        "file": [
            {
                "sha": "cfe87a9802d9df7a1ab73d5f105d2221dfd72008",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0a5b117b8fe3783885575a01f5e6f5a77d5866b6/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0a5b117b8fe3783885575a01f5e6f5a77d5866b6/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "status": "modified",
                "changes": 6,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java?ref=0a5b117b8fe3783885575a01f5e6f5a77d5866b6",
                "patch": "@@ -110,7 +110,11 @@ public OrderReadHelper(GenericValue orderHeader, List<GenericValue> adjustments,\n             }\n         }\n         if (this.orderHeader == null) {\n-            throw new IllegalArgumentException(\"Order header passed in is not valid for orderId [\" + orderHeader.getString(\"orderId\") + \"]\");\n+            if (orderHeader == null) {\n+                throw new IllegalArgumentException(\"Order header passed is null, or is otherwise invalid\");\n+            } else {\n+                throw new IllegalArgumentException(\"Order header passed in is not valid for orderId [\" + orderHeader.getString(\"orderId\") + \"]\");\n+            }\n         }\n     }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "creation of new purchase order from existing order resulted in a NPE because the productstore is missing: fixed\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@945000 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/58deb9850d2d7daf12f01432bf56a01849efa8e5",
        "parent": "https://github.com/apache/ofbiz-framework/commit/e9c4e5c9c5f01d10b5f7c76af127abc07cfd0450",
        "bug_id": "ofbiz-framework_155",
        "file": [
            {
                "sha": "b08189ec79b60823934ed3056a0e0521f9285ddc",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/58deb9850d2d7daf12f01432bf56a01849efa8e5/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/58deb9850d2d7daf12f01432bf56a01849efa8e5/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java?ref=58deb9850d2d7daf12f01432bf56a01849efa8e5",
                "patch": "@@ -4758,12 +4758,15 @@ public List makeOrderPaymentInfos(Delegator delegator, ShoppingCart cart) {\n                 }\n \n                 GenericValue productStore = null;\n+                String splitPayPrefPerShpGrp = null;\n                 try {\n                     productStore = delegator.findByPrimaryKey(\"ProductStore\", UtilMisc.toMap(\"productStoreId\", cart.getProductStoreId()));\n                 } catch (GenericEntityException e) {\n                     Debug.logError(e.toString(), module);\n                 }\n-                String splitPayPrefPerShpGrp = productStore.getString(\"splitPayPrefPerShpGrp\");\n+                if (productStore != null) {\n+                    splitPayPrefPerShpGrp = productStore.getString(\"splitPayPrefPerShpGrp\");\n+                }\n                 if (splitPayPrefPerShpGrp == null) {\n                     splitPayPrefPerShpGrp = \"N\";\n                 }",
                "deletions": 1
            },
            {
                "sha": "d487993fea3e012464557c7a361967605df567b8",
                "filename": "applications/order/webapp/ordermgr/order/findOrders.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/58deb9850d2d7daf12f01432bf56a01849efa8e5/applications/order/webapp/ordermgr/order/findOrders.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/58deb9850d2d7daf12f01432bf56a01849efa8e5/applications/order/webapp/ordermgr/order/findOrders.ftl",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/order/findOrders.ftl?ref=58deb9850d2d7daf12f01432bf56a01849efa8e5",
                "patch": "@@ -445,7 +445,8 @@ function toggleOrderIdList() {\n                         <option value=\"${countryGeoId}\">${geo.geoName?if_exists}</option>\n                         <option value=\"${countryGeoId}\">---</option>\n                     </#if>\n-                    ${screens.render(\"component://common/widget/CommonScreens.xml#countries\")}\n+                    <option value=\"\">---</option>\n+S                    ${screens.render(\"component://common/widget/CommonScreens.xml#countries\")}\n                   </select>\n                   <select name=\"includeCountry\">\n                     <#if requestParameters.includeCountry?has_content>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Small fix to prevent a NPE if the store is not set in an order header.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@941785 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d8f89793a3599a0ff2cbbf2c9b3c6993c94cc79d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3f1efe9eb61c572adf967636fd07fbaec6558488",
        "bug_id": "ofbiz-framework_156",
        "file": [
            {
                "sha": "838c46322ef6a4517435ddc39cb8a82e144d98bf",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d8f89793a3599a0ff2cbbf2c9b3c6993c94cc79d/applications/order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d8f89793a3599a0ff2cbbf2c9b3c6993c94cc79d/applications/order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy",
                "status": "modified",
                "changes": 12,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy?ref=d8f89793a3599a0ff2cbbf2c9b3c6993c94cc79d",
                "patch": "@@ -309,11 +309,13 @@ if (orderHeader) {\n         context.returnHeaderTypeId = \"CUSTOMER_RETURN\";\n         // also set the product store facility Id for sales orders\n         productStore = orderHeader.getRelatedOne(\"ProductStore\");\n-        context.storeFacilityId = productStore.inventoryFacilityId;\n-        if (productStore.reqReturnInventoryReceive) {\n-            context.needsInventoryReceive = productStore.reqReturnInventoryReceive;\n-        } else {\n-            context.needsInventoryReceive = \"Y\";\n+        if (productStore) {\n+            context.storeFacilityId = productStore.inventoryFacilityId;\n+            if (productStore.reqReturnInventoryReceive) {\n+                context.needsInventoryReceive = productStore.reqReturnInventoryReceive;\n+            } else {\n+                context.needsInventoryReceive = \"Y\";\n+            }\n         }\n     } else {\n         context.returnHeaderTypeId = \"VENDOR_RETURN\";",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Check for bad entity name and return a better error message than an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@941284 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/1b2bbe40c5c4edb3bf8045879a7857e9420f95b2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c2ecf31559b44b7d0757c00a16e2fa32d82800a5",
        "bug_id": "ofbiz-framework_157",
        "file": [
            {
                "sha": "be7b0143f59f600dfe95fead2b222e0b262df03e",
                "filename": "framework/entity/src/org/ofbiz/entity/finder/PrimaryKeyFinder.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1b2bbe40c5c4edb3bf8045879a7857e9420f95b2/framework/entity/src/org/ofbiz/entity/finder/PrimaryKeyFinder.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1b2bbe40c5c4edb3bf8045879a7857e9420f95b2/framework/entity/src/org/ofbiz/entity/finder/PrimaryKeyFinder.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/finder/PrimaryKeyFinder.java?ref=1b2bbe40c5c4edb3bf8045879a7857e9420f95b2",
                "patch": "@@ -79,6 +79,10 @@ public void runFind(Map<String, Object> context, Delegator delegator) throws Gen\n         boolean autoFieldMapBool = !\"false\".equals(autoFieldMapString);\n \n         ModelEntity modelEntity = delegator.getModelEntity(entityName);\n+        if (modelEntity == null) {\n+            throw new IllegalArgumentException(\"No entity definition found for entity name [\" + entityName + \"]\");\n+        }\n+        \n         GenericValue valueOut = runFind(modelEntity, context, delegator, useCacheBool, autoFieldMapBool, this.fieldMap, this.selectFieldExpanderList);\n \n         //Debug.logInfo(\"PrimaryKeyFinder: valueOut=\" + valueOut, module);",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Corrected OFBIZ-3488 NPE in humanres when searching for leaves (https://issues.apache.org/jira/browse/OFBIZ-3488)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@915045 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/35457c18019ac53d536f671ed67f9d5e5f554c73",
        "parent": "https://github.com/apache/ofbiz-framework/commit/de2a2f0abb0e5c1d4b7d3c391fdb641f03ab4314",
        "bug_id": "ofbiz-framework_158",
        "file": [
            {
                "sha": "9b6b0e327b6c7b55e693bee7c09ce8740db63081",
                "filename": "applications/humanres/widget/forms/EmplLeaveForms.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/35457c18019ac53d536f671ed67f9d5e5f554c73/applications/humanres/widget/forms/EmplLeaveForms.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/35457c18019ac53d536f671ed67f9d5e5f554c73/applications/humanres/widget/forms/EmplLeaveForms.xml",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/humanres/widget/forms/EmplLeaveForms.xml?ref=35457c18019ac53d536f671ed67f9d5e5f554c73",
                "patch": "@@ -59,15 +59,15 @@\n             </service>\n         </actions>\n         <auto-fields-entity entity-name=\"EmplLeave\" default-field-type=\"display\"/>\n-        <field name=\"partyId\" field-name=\"partyId\">\n+        <field name=\"partyId\">\n             <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\">\n                 <sub-hyperlink target=\"/partymgr/control/viewprofile\" target-type=\"inter-app\" description=\"${partyId}\" link-style=\"buttontext\">\n                     <parameter param-name=\"partyId\" from-field=\"partyId\"/>\n                 </sub-hyperlink>\n             </display-entity>\n         </field>\n-        <field name=\"approverPartyId\" field-name=\"partyId\">\n-            <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\">\n+        <field name=\"approverPartyId\">\n+            <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\" key-field-name=\"partyId\">\n                 <sub-hyperlink target=\"/partymgr/control/viewprofile\" target-type=\"inter-app\" description=\"${approverPartyId}\" link-style=\"buttontext\">\n                     <parameter param-name=\"approverPartyId\" from-field=\"approverPartyId\"/>\n                 </sub-hyperlink>",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE in Fixed asset geo location screen.\nCommented out not used code and removed unnecessary isEmpty checks.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@911328 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c7c5d8831b2569e71a0750ffae04d8ca56414e22",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2302c33259d14e0dd9259571e8f20392cd1ef4ec",
        "bug_id": "ofbiz-framework_159",
        "file": [
            {
                "sha": "2c54f00655c16826730b1e528e1b631b9666da29",
                "filename": "applications/accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c7c5d8831b2569e71a0750ffae04d8ca56414e22/applications/accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c7c5d8831b2569e71a0750ffae04d8ca56414e22/applications/accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy",
                "status": "modified",
                "changes": 34,
                "additions": 17,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy?ref=c7c5d8831b2569e71a0750ffae04d8ca56414e22",
                "patch": "@@ -21,25 +21,25 @@ import org.ofbiz.base.util.*;\n import org.ofbiz.common.geo.*;\r\n import org.ofbiz.entity.*;\r\n \r\n-fixedAssetId = parameters.fixedAssetId;\r\n-fa = delegator.findByPrimaryKey(\"FixedAsset\", UtilMisc.toMap(\"fixedAssetId\", fixedAssetId));\r\n uiLabelMap = UtilProperties.getResourceBundleMap(\"AccountingUiLabels\", locale);\r\n \r\n-if (fixedAssetId) {\r\n+if (fixedAsset) {\r\n     latestGeoPoint = GeoWorker.findLatestGeoPoint(delegator, \"FixedAssetAndGeoPoint\", \"fixedAssetId\", fixedAssetId, null, null);\r\n-    context.latestGeoPoint = latestGeoPoint;\r\n-\r\n-    List geoCenter = UtilMisc.toList(UtilMisc.toMap(\"lat\", latestGeoPoint.latitude, \"lon\", latestGeoPoint.longitude, \"zoom\", \"13\"));\r\n-\r\n-    if (UtilValidate.isNotEmpty(latestGeoPoint) && latestGeoPoint.containsKey(\"latitude\") && latestGeoPoint.containsKey(\"longitude\")) {\r\n-        List geoPoints = UtilMisc.toList(UtilMisc.toMap(\"lat\", latestGeoPoint.latitude, \"lon\", latestGeoPoint.longitude, \"fixedAssetId\", fixedAssetId,\r\n-                \"link\", UtilMisc.toMap(\"url\", \"EditFixedAsset?fixedAssetId=\"+ fixedAssetId, \"label\", uiLabelMap.AccountingFixedAsset + \" \" + fa.fixedAssetName)));\r\n-\r\n-        Map geoChart = UtilMisc.toMap(\"width\", \"500\", \"height\", \"450\", \"controlUI\" , \"small\", \"dataSourceId\", latestGeoPoint.dataSourceId, \"points\", geoPoints);\r\n-        context.geoChart = geoChart;\r\n-    }\r\n-    if (latestGeoPoint && latestGeoPoint.elevationUomId) {\r\n-        elevationUom = delegator.findOne(\"Uom\", [uomId : latestGeoPoint.elevationUomId], false);\r\n-        context.elevationUomAbbr = elevationUom.abbreviation;\r\n+    if (latestGeoPoint) {\r\n+        context.latestGeoPoint = latestGeoPoint;\r\n+        \r\n+        //List geoCenter = UtilMisc.toList(UtilMisc.toMap(\"lat\", latestGeoPoint.latitude, \"lon\", latestGeoPoint.longitude, \"zoom\", \"13\"));\r\n+        \r\n+        if (latestGeoPoint.containsKey(\"latitude\") && latestGeoPoint.containsKey(\"longitude\")) {\r\n+            List geoPoints = UtilMisc.toList(UtilMisc.toMap(\"lat\", latestGeoPoint.latitude, \"lon\", latestGeoPoint.longitude, \"fixedAssetId\", fixedAssetId,\r\n+                            \"link\", UtilMisc.toMap(\"url\", \"EditFixedAsset?fixedAssetId=\"+ fixedAssetId, \"label\", uiLabelMap.AccountingFixedAsset + \" \" + fixedAsset.fixedAssetName)));\r\n+            \r\n+            Map geoChart = UtilMisc.toMap(\"width\", \"500\", \"height\", \"450\", \"controlUI\" , \"small\", \"dataSourceId\", latestGeoPoint.dataSourceId, \"points\", geoPoints);\r\n+            context.geoChart = geoChart;\r\n+        }\r\n+        if (latestGeoPoint.elevationUomId) {\r\n+            elevationUom = delegator.findOne(\"Uom\", [uomId : latestGeoPoint.elevationUomId], false);\r\n+            context.elevationUomAbbr = elevationUom.abbreviation;\r\n+        }\r\n     }\r\n }\n\\ No newline at end of file",
                "deletions": 17
            },
            {
                "sha": "dca7693236e38c207942f49756b930c772133a8d",
                "filename": "applications/accounting/widget/FixedAssetScreens.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c7c5d8831b2569e71a0750ffae04d8ca56414e22/applications/accounting/widget/FixedAssetScreens.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c7c5d8831b2569e71a0750ffae04d8ca56414e22/applications/accounting/widget/FixedAssetScreens.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/widget/FixedAssetScreens.xml?ref=c7c5d8831b2569e71a0750ffae04d8ca56414e22",
                "patch": "@@ -577,6 +577,7 @@ under the License.\n             <actions>\n                 <set field=\"titleProperty\" value=\"PageTitleFixedAssetGeoLocation\"/>\n                 <set field=\"tabButtonItem\" value=\"FixedAssetGeoLocation\"/>\n+                <set field=\"fixedAssetId\" from-field=\"parameters.fixedAssetId\"/>\n                 <entity-one value-field=\"fixedAsset\" entity-name=\"FixedAsset\"/>\n                 <script location=\"component://accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy\"/>\n             </actions>",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix from Ruth Hoffman (OFBIZ-3376), prevent NPEs when invoking the RomeEventHandler\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@899855 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ce43168d21a0b4af441ac088adf3d1acb77d1f43",
        "parent": "https://github.com/apache/ofbiz-framework/commit/f8bf4ce6871edcf313d3ec80ed4569aa4e9113ec",
        "bug_id": "ofbiz-framework_160",
        "file": [
            {
                "sha": "cbcb094ee5e617c37e6b10658764ccb6ff99258b",
                "filename": "framework/webapp/src/org/ofbiz/webapp/event/RomeEventHandler.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ce43168d21a0b4af441ac088adf3d1acb77d1f43/framework/webapp/src/org/ofbiz/webapp/event/RomeEventHandler.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ce43168d21a0b4af441ac088adf3d1acb77d1f43/framework/webapp/src/org/ofbiz/webapp/event/RomeEventHandler.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/event/RomeEventHandler.java?ref=ce43168d21a0b4af441ac088adf3d1acb77d1f43",
                "patch": "@@ -80,7 +80,7 @@ public String invoke(Event event, RequestMap requestMap, HttpServletRequest requ\n         }\n \n         // invoke the feed generator service (implements rssFeedInterface)\n-        String respCode = service.invoke(null, requestMap, request, response);\n+        String respCode = service.invoke(event, requestMap, request, response);\n \n         // pull out the RSS feed from the request attributes\n         WireFeed wireFeed = (WireFeed) request.getAttribute(\"wireFeed\");",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Check for an NPE in case the partyId is not a valid partyId\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@895742 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b1727893a229eeade5a6a7a867b9aada7cb9bb6a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/f78ec10ac6ea6479d2f7098da59e37d9f9f6ab82",
        "bug_id": "ofbiz-framework_161",
        "file": [
            {
                "sha": "1f96bd05b28449f29dd36340c35a0d76215d6c12",
                "filename": "applications/party/src/org/ofbiz/party/party/PartyTypeHelper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b1727893a229eeade5a6a7a867b9aada7cb9bb6a/applications/party/src/org/ofbiz/party/party/PartyTypeHelper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b1727893a229eeade5a6a7a867b9aada7cb9bb6a/applications/party/src/org/ofbiz/party/party/PartyTypeHelper.java",
                "status": "modified",
                "changes": 12,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/src/org/ofbiz/party/party/PartyTypeHelper.java?ref=b1727893a229eeade5a6a7a867b9aada7cb9bb6a",
                "patch": "@@ -21,6 +21,7 @@\n \n import org.ofbiz.base.util.Debug;\n import org.ofbiz.base.util.UtilMisc;\n+import org.ofbiz.base.util.UtilValidate;\n import org.ofbiz.entity.Delegator;\n import org.ofbiz.entity.GenericEntityException;\n import org.ofbiz.entity.GenericValue;\n@@ -45,11 +46,14 @@ public static Boolean checkPartyType(Delegator delegator, String partyId, String\n         GenericValue checkedTypeOfParty = null; \n         try {\n             party = delegator.findOne(\"Party\", UtilMisc.toMap(\"partyId\", partyId), false);\n-            partyType = party.getRelatedOneCache(\"PartyType\");\n-            checkedTypeOfParty = delegator.findOne(\"PartyType\", UtilMisc.toMap(\"partyTypeId\", checkedPartyType), true);\n+            if (UtilValidate.isNotEmpty(party)) {\n+                partyType = party.getRelatedOneCache(\"PartyType\");\n+                checkedTypeOfParty = delegator.findOne(\"PartyType\", UtilMisc.toMap(\"partyTypeId\", checkedPartyType), true);\n+            } else {\n+                return false;\n+            }\n         } catch (GenericEntityException e) {\n-            Debug.logWarning(e, module);\n-            return false;\n+            Debug.logWarning(e, module);            \n         }    \n         return EntityTypeUtil.isType(partyType, checkedTypeOfParty);\n     }    ",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added CRUD services for GeoPoint and FixedAssetGeoPoint entity. Additional changes are done to avoid possible NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@891248 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6a135c5dbf3e46d438285445042bb43ab206f231",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a2982cef6da6b7bad7b8d5c5ee4b9a731384df57",
        "bug_id": "ofbiz-framework_162",
        "file": [
            {
                "sha": "8aa0174852b7e11fe793db0e53aad2524e1e0e80",
                "filename": "applications/accounting/servicedef/services_fixedasset.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/applications/accounting/servicedef/services_fixedasset.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/applications/accounting/servicedef/services_fixedasset.xml",
                "status": "modified",
                "changes": 22,
                "additions": 21,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/servicedef/services_fixedasset.xml?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -278,4 +278,24 @@ under the License.\n         <attribute name=\"assetDepreciationTillDate\" type=\"List\" mode=\"OUT\" optional=\"false\"/>\n         <attribute name=\"assetNBVAfterDepreciation\" type=\"List\" mode=\"OUT\" optional=\"false\"/>\n     </service>\n-</services>\n+\n+    <!-- FixedAssetGeoPoint services -->\n+    <service name=\"createFixedAssetGeoPoint\" default-entity-name=\"FixedAssetGeoPoint\" engine=\"entity-auto\" invoke=\"create\" auth=\"true\">\n+        <description>Create a FixedAssetGeoPoint</description>\n+        <permission-service service-name=\"fixedAssetPermissionCheck\" main-action=\"CREATE\"/>\n+        <auto-attributes include=\"pk\" mode=\"IN\" optional=\"false\"/>\n+        <auto-attributes include=\"nonpk\" mode=\"IN\" optional=\"true\"/>\n+        <override name=\"fromDate\" optional=\"true\"/>\n+    </service>\n+    <service name=\"updateFixedAssetGeoPoint\" default-entity-name=\"FixedAssetGeoPoint\" engine=\"entity-auto\" invoke=\"update\" auth=\"true\">\n+        <description>Update a FixedAssetGeoPoint</description>\n+        <permission-service service-name=\"fixedAssetPermissionCheck\" main-action=\"UPDATE\"/>\n+        <auto-attributes include=\"pk\" mode=\"IN\" optional=\"false\"/>\n+        <auto-attributes include=\"nonpk\" mode=\"IN\" optional=\"true\"/>\n+    </service>\n+    <service name=\"deleteFixedAssetGeoPoint\" default-entity-name=\"FixedAssetGeoPoint\" engine=\"entity-auto\" invoke=\"delete\" auth=\"true\">\n+        <description>Delete a FixedAssetGeoPoint</description>\n+        <permission-service service-name=\"fixedAssetPermissionCheck\" main-action=\"DELETE\"/>\n+        <auto-attributes include=\"pk\" mode=\"IN\" optional=\"false\"/>\n+    </service>\n+</services>\n\\ No newline at end of file",
                "deletions": 1
            },
            {
                "sha": "793eac23996585fa5a8db08c73bb1d162f8973ce",
                "filename": "applications/accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/applications/accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/applications/accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -26,8 +26,8 @@ if (fixedAssetId) {\n     context.latestGeoPoint = latestGeoPoint;\r\n     context.fixedAssetId = fixedAssetId;\r\n \r\n-    if (latestGeoPoint) {\r\n+    if (latestGeoPoint && latestGeoPoint.elevationUomId) {\r\n         elevationUom = delegator.findOne(\"Uom\", [uomId : latestGeoPoint.elevationUomId], false);\r\n         context.elevationUomAbbr = elevationUom.abbreviation;\r\n     }\r\n-}\r\n+}\n\\ No newline at end of file",
                "deletions": 2
            },
            {
                "sha": "44c809d860f36456d33f9cbb805935cc5bc9ec8f",
                "filename": "applications/accounting/webapp/accounting/fixedasset/FixedAssetGeoLocation.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/applications/accounting/webapp/accounting/fixedasset/FixedAssetGeoLocation.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/applications/accounting/webapp/accounting/fixedasset/FixedAssetGeoLocation.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/webapp/accounting/fixedasset/FixedAssetGeoLocation.ftl?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -21,7 +21,7 @@ under the License.\n     <br>${uiLabelMap.CommonLatitude}${latestGeoPoint.latitude}\r\n     <br>${uiLabelMap.CommonLongitude}${latestGeoPoint.longitude}\r\n     <#if latestGeoPoint.elevation?has_content>\r\n-      <br>${uiLabelMap.CommonElevation}${latestGeoPoint.elevation} ${elevationUomAbbr}\r\n+      <br>${uiLabelMap.CommonElevation}${latestGeoPoint.elevation} ${elevationUomAbbr?if_exists}\r\n     </#if>\r\n     <#if latestGeoPoint.dataSourceId?has_content>\r\n       <#if latestGeoPoint.dataSourceId == \"GEOPT_GOOGLE\">\r",
                "deletions": 1
            },
            {
                "sha": "88091d844f0b351e5c0f71ea3a91742177527acc",
                "filename": "applications/party/webapp/partymgr/WEB-INF/actions/party/PartyGeoLocation.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/applications/party/webapp/partymgr/WEB-INF/actions/party/PartyGeoLocation.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/applications/party/webapp/partymgr/WEB-INF/actions/party/PartyGeoLocation.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/webapp/partymgr/WEB-INF/actions/party/PartyGeoLocation.groovy?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -33,7 +33,7 @@ context.partyId = partyId;\n latestGeoPoint = GeoWorker.findLatestGeoPoint(delegator, \"PartyAndGeoPoint\", \"partyId\", partyId, null, null);\r\n context.latestGeoPoint = latestGeoPoint;\r\n \r\n-if (latestGeoPoint) {\r\n+if (latestGeoPoint && latestGeoPoint.elevationUomId) {\r\n     elevationUom = delegator.findOne(\"Uom\", [uomId : latestGeoPoint.elevationUomId], false);\r\n     context.elevationUomAbbr = elevationUom.abbreviation;\r\n }\r",
                "deletions": 1
            },
            {
                "sha": "b6a675fb4ade04598f7526a9c89e4fccb0262e87",
                "filename": "applications/party/webapp/partymgr/party/partygeolocation.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/applications/party/webapp/partymgr/party/partygeolocation.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/applications/party/webapp/partymgr/party/partygeolocation.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/webapp/partymgr/party/partygeolocation.ftl?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -21,7 +21,7 @@ under the License.\n     ${uiLabelMap.CommonLatitude}${latestGeoPoint.latitude}<br>\r\n     ${uiLabelMap.CommonLongitude}${latestGeoPoint.longitude}\r\n     <#if latestGeoPoint.elevation?has_content>\r\n-      <br>${uiLabelMap.CommonElevation}${latestGeoPoint.elevation} ${elevationUomAbbr}\r\n+      <br>${uiLabelMap.CommonElevation}${latestGeoPoint.elevation} ${elevationUomAbbr?if_exists}\r\n     </#if>\r\n     <#if latestGeoPoint.dataSourceId?has_content>\r\n       <#if latestGeoPoint.dataSourceId == \"GEOPT_GOOGLE\">\r",
                "deletions": 1
            },
            {
                "sha": "bc8096974b1bf787dc50f6a6329ad206e6ba4f44",
                "filename": "applications/product/webapp/facility/WEB-INF/actions/facility/FacilityLocationGeoLocation.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/applications/product/webapp/facility/WEB-INF/actions/facility/FacilityLocationGeoLocation.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/applications/product/webapp/facility/WEB-INF/actions/facility/FacilityLocationGeoLocation.groovy",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/WEB-INF/actions/facility/FacilityLocationGeoLocation.groovy?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -28,8 +28,8 @@ if (facilityId && locationSeqId) {\n     context.facilityId = facilityId\r\n     context.locationSeqId = locationSeqId\r\n \r\n-    if (latestGeoPoint) {\r\n+    if (latestGeoPoint && latestGeoPoint.elevationUomId) {\r\n         elevationUom = delegator.findOne(\"Uom\", [uomId : latestGeoPoint.elevationUomId], false)\r\n         context.elevationUomAbbr = elevationUom.abbreviation\r\n     }\r\n-}\r\n+}\n\\ No newline at end of file",
                "deletions": 2
            },
            {
                "sha": "e601033db62ee8730c97bffca3936a1acd586ca8",
                "filename": "applications/product/webapp/facility/facility/FacilityLocationGeoLocation.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/applications/product/webapp/facility/facility/FacilityLocationGeoLocation.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/applications/product/webapp/facility/facility/FacilityLocationGeoLocation.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/facility/FacilityLocationGeoLocation.ftl?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -21,7 +21,7 @@ under the License.\n     ${uiLabelMap.CommonLatitude}${latestGeoPoint.latitude}<br>\r\n     ${uiLabelMap.CommonLongitude}${latestGeoPoint.longitude}\r\n     <#if latestGeoPoint.elevation?has_content>\r\n-      <br>${uiLabelMap.CommonElevation}${latestGeoPoint.elevation} ${elevationUomAbbr}\r\n+      <br>${uiLabelMap.CommonElevation}${latestGeoPoint.elevation} ${elevationUomAbbr?if_exists}\r\n     </#if>\r\n     <#if latestGeoPoint.dataSourceId?has_content>\r\n       <#if latestGeoPoint.dataSourceId == \"GEOPT_GOOGLE\">\r",
                "deletions": 1
            },
            {
                "sha": "b6a0a71423978d521cc9881745e64d72bdb4161d",
                "filename": "framework/common/servicedef/services.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/framework/common/servicedef/services.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/framework/common/servicedef/services.xml",
                "status": "modified",
                "changes": 27,
                "additions": 26,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/servicedef/services.xml?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -665,4 +665,29 @@ under the License.\n         <attribute name=\"portletSeqId\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n         <attribute name=\"attributeMap\" type=\"Map\" mode=\"OUT\" optional=\"true\"/>\n     </service>\n-</services>\n+\n+    <!-- GeoPoint services -->\n+    <service name=\"createGeoPoint\" default-entity-name=\"GeoPoint\" engine=\"entity-auto\" invoke=\"create\" auth=\"true\">\n+        <description>Create a GeoPoint</description>\n+        <permission-service service-name=\"commonGenericPermission\" main-action=\"CREATE\"/>\n+        <auto-attributes include=\"pk\" mode=\"OUT\" optional=\"false\"/>\n+        <auto-attributes include=\"nonpk\" mode=\"IN\" optional=\"true\"/>\n+        <override name=\"dataSourceId\" optional=\"false\"/>\n+        <override name=\"latitude\" optional=\"false\"/>\n+        <override name=\"longitude\" optional=\"false\"/>\n+    </service>\n+    <service name=\"updateGeoPoint\" default-entity-name=\"GeoPoint\" engine=\"entity-auto\" invoke=\"update\" auth=\"true\">\n+        <description>Update a GeoPoint</description>\n+        <permission-service service-name=\"commonGenericPermission\" main-action=\"UPDATE\"/>\n+        <auto-attributes include=\"pk\" mode=\"IN\" optional=\"false\"/>\n+        <auto-attributes include=\"nonpk\" mode=\"IN\" optional=\"true\"/>\n+        <override name=\"dataSourceId\" optional=\"false\"/>\n+        <override name=\"latitude\" optional=\"false\"/>\n+        <override name=\"longitude\" optional=\"false\"/>\n+    </service>\n+    <service name=\"deleteGeoPoint\" default-entity-name=\"GeoPoint\" engine=\"entity-auto\" invoke=\"delete\" auth=\"true\">\n+        <description>Delete a GeoPoint</description>\n+        <permission-service service-name=\"commonGenericPermission\" main-action=\"DELETE\"/>\n+        <auto-attributes include=\"pk\" mode=\"IN\" optional=\"false\"/>\n+    </service>\n+</services>\n\\ No newline at end of file",
                "deletions": 1
            },
            {
                "sha": "c27982f569fcc42ce942baff03a1eaa798560119",
                "filename": "framework/common/webcommon/WEB-INF/actions/includes/GeoLocation.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/framework/common/webcommon/WEB-INF/actions/includes/GeoLocation.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/framework/common/webcommon/WEB-INF/actions/includes/GeoLocation.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/webcommon/WEB-INF/actions/includes/GeoLocation.groovy?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -17,7 +17,7 @@\n  * under the License.\r\n  */\r\n \r\n-if (geoPoint) {\r\n+if (geoPoint && geoPoint.elevationUomId) {\r\n     elevationUom = delegator.findOne(\"Uom\", [uomId : geoPoint.elevationUomId], false);\r\n     context.elevationUomAbbr = elevationUom.abbreviation;\r\n }\r",
                "deletions": 1
            },
            {
                "sha": "441207d25733e70199b80132c63d6ede5ee8af0c",
                "filename": "framework/common/webcommon/WEB-INF/geolocation.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6a135c5dbf3e46d438285445042bb43ab206f231/framework/common/webcommon/WEB-INF/geolocation.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6a135c5dbf3e46d438285445042bb43ab206f231/framework/common/webcommon/WEB-INF/geolocation.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/webcommon/WEB-INF/geolocation.ftl?ref=6a135c5dbf3e46d438285445042bb43ab206f231",
                "patch": "@@ -21,7 +21,7 @@ under the License.\n     ${uiLabelMap.CommonLatitude}${geoPoint.latitude}<br>\r\n     ${uiLabelMap.CommonLongitude}${geoPoint.longitude}\r\n     <#if geoPoint.elevation?has_content>\r\n-      <br>${uiLabelMap.CommonElevation}${geoPoint.elevation} ${elevationUomAbbr}\r\n+      <br>${uiLabelMap.CommonElevation}${geoPoint.elevation} ${elevationUomAbbr?if_exists}\r\n     </#if>\r\n     <#if geoPoint.dataSourceId?has_content>\r\n       <#if geoPoint.dataSourceId == \"GEOPT_GOOGLE\">\r",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Hidden the \"Description\" label if the invoice description is empty; also fixed a NPE check.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@833918 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f54e9985d1d157f98d38ee8964f44d3851b35192",
        "parent": "https://github.com/apache/ofbiz-framework/commit/d3d84f0d2fd9109eb446514bd611e433482fbbf1",
        "bug_id": "ofbiz-framework_163",
        "file": [
            {
                "sha": "57f971e9e7e8a8b837eaeac2949cdaf105080743",
                "filename": "applications/accounting/webapp/accounting/invoice/invoiceReportHeaderInfo.fo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f54e9985d1d157f98d38ee8964f44d3851b35192/applications/accounting/webapp/accounting/invoice/invoiceReportHeaderInfo.fo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f54e9985d1d157f98d38ee8964f44d3851b35192/applications/accounting/webapp/accounting/invoice/invoiceReportHeaderInfo.fo.ftl",
                "status": "modified",
                "changes": 12,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/webapp/accounting/invoice/invoiceReportHeaderInfo.fo.ftl?ref=f54e9985d1d157f98d38ee8964f44d3851b35192",
                "patch": "@@ -34,7 +34,7 @@ under the License.\n \r\n <fo:table-row>\r\n   <fo:table-cell><fo:block>${uiLabelMap.AccountingCustNr}:</fo:block></fo:table-cell>\r\n-  <fo:table-cell><fo:block><#if invoice?has_content>${billingParty.partyId}</#if></fo:block></fo:table-cell>\r\n+  <fo:table-cell><fo:block><#if billingParty?has_content>${billingParty.partyId}</#if></fo:block></fo:table-cell>\r\n </fo:table-row>\r\n \r\n <#if billingPartyTaxId?has_content>\r\n@@ -48,10 +48,12 @@ under the License.\n   <fo:table-cell><fo:block>${uiLabelMap.AccountingInvNr}:</fo:block></fo:table-cell>\r\n   <fo:table-cell><fo:block><#if invoice?has_content>${invoice.invoiceId}</#if></fo:block></fo:table-cell>\r\n </fo:table-row>\r\n-<fo:table-row>\r\n-  <fo:table-cell><fo:block>${uiLabelMap.AccountingDescr}:</fo:block></fo:table-cell>\r\n-  <fo:table-cell><fo:block><#if invoice?has_content>${invoice.description?if_exists}</#if></fo:block></fo:table-cell>\r\n-</fo:table-row>\r\n+<#if invoice?has_content && invoice.description?has_content>\r\n+  <fo:table-row>\r\n+    <fo:table-cell><fo:block>${uiLabelMap.AccountingDescr}:</fo:block></fo:table-cell>\r\n+    <fo:table-cell><fo:block>${invoice.description}</fo:block></fo:table-cell>\r\n+  </fo:table-row>\r\n+</#if>\r\n \r\n <!--fo:table-row>\r\n   <fo:table-cell><fo:block>${uiLabelMap.CommonStatus}</fo:block></fo:table-cell>\r",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Quick fixes to prevent NPE (but the code should be reviewed/improved here).\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@815656 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/1e45ca65f6d12fc1cfb8600b3237860dce021660",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1c7a046dccc52e42b9428de8ca7c010b2c40348c",
        "bug_id": "ofbiz-framework_164",
        "file": [
            {
                "sha": "e8943a29ec8530d27a1218669f4d11fd68977ae3",
                "filename": "applications/order/webapp/ordermgr/return/returnLinks.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1e45ca65f6d12fc1cfb8600b3237860dce021660/applications/order/webapp/ordermgr/return/returnLinks.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1e45ca65f6d12fc1cfb8600b3237860dce021660/applications/order/webapp/ordermgr/return/returnLinks.ftl",
                "status": "modified",
                "changes": 24,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/return/returnLinks.ftl?ref=1e45ca65f6d12fc1cfb8600b3237860dce021660",
                "patch": "@@ -42,15 +42,21 @@ under the License.\n             <#assign orderId = (Static[\"org.ofbiz.entity.util.EntityUtil\"].getFirst(returnItems)).getString(\"orderId\")/>\n             <#assign shipGroupAssoc = Static[\"org.ofbiz.entity.util.EntityUtil\"].getFirst(delegator.findByAnd(\"OrderItemShipGroupAssoc\", {\"orderId\" : orderId}))/>\n             <#assign shipGroup = delegator.findOne(\"OrderItemShipGroup\", {\"orderId\" : orderId, \"shipGroupSeqId\" : shipGroupAssoc.shipGroupSeqId}, false)>\n-            <#assign shipGroupShipment = Static[\"org.ofbiz.entity.util.EntityUtil\"].getFirst(delegator.findByAnd(\"Shipment\", {\"primaryOrderId\" : shipGroup.orderId, \"primaryShipGroupSeqId\" : shipGroup.shipGroupSeqId}))/>\n-            <#assign shipmentRouteSegment = Static[\"org.ofbiz.entity.util.EntityUtil\"].getFirst(delegator.findByAnd(\"ShipmentRouteSegment\", {\"shipmentId\" : shipGroupShipment.shipmentId}))>\n-            <#if \"UPS\" == shipmentRouteSegment.carrierPartyId>\n-              <a href=\"javascript:document.upsEmailReturnLabel.submit();\" class=\"buttontext\">${uiLabelMap.ProductEmailReturnShippingLabelUPS}</a>\n-              <form name=\"upsEmailReturnLabel\" method=\"post\" action=\"<@ofbizUrl>upsEmailReturnLabelReturn</@ofbizUrl>\">\n-                <input type=\"hidden\" name=\"returnId\" value=\"${returnId}\"/>\n-                <input type=\"hidden\" name=\"shipmentId\" value=\"${shipGroupShipment.shipmentId}\"/>\n-                <input type=\"hidden\" name=\"shipmentRouteSegmentId\" value=${shipmentRouteSegment.shipmentRouteSegmentId}>\n-              </form>\n+            <#if shipGroup?exists>\n+              <#assign shipGroupShipment = Static[\"org.ofbiz.entity.util.EntityUtil\"].getFirst(delegator.findByAnd(\"Shipment\", {\"primaryOrderId\" : shipGroup.orderId, \"primaryShipGroupSeqId\" : shipGroup.shipGroupSeqId}))/>\n+              <#if shipGroupShipment?exists>\n+                <#assign shipmentRouteSegment = Static[\"org.ofbiz.entity.util.EntityUtil\"].getFirst(delegator.findByAnd(\"ShipmentRouteSegment\", {\"shipmentId\" : shipGroupShipment.shipmentId}))>\n+                <#if shipmentRouteSegment?exists>\n+                  <#if \"UPS\" == shipmentRouteSegment.carrierPartyId>\n+                    <a href=\"javascript:document.upsEmailReturnLabel.submit();\" class=\"buttontext\">${uiLabelMap.ProductEmailReturnShippingLabelUPS}</a>\n+                    <form name=\"upsEmailReturnLabel\" method=\"post\" action=\"<@ofbizUrl>upsEmailReturnLabelReturn</@ofbizUrl>\">\n+                      <input type=\"hidden\" name=\"returnId\" value=\"${returnId}\"/>\n+                      <input type=\"hidden\" name=\"shipmentId\" value=\"${shipGroupShipment.shipmentId}\"/>\n+                      <input type=\"hidden\" name=\"shipmentRouteSegmentId\" value=${shipmentRouteSegment.shipmentRouteSegmentId}>\n+                    </form>\n+                  </#if>\n+                </#if>\n+              </#if>\n             </#if>\n           </#if>\n         </#if>",
                "deletions": 9
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE happening when an invalid product id is passed to the page.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@806155 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a62c16e98c9f7cef143c1152f8c55f1eff13d21f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/bc0c9ef5195784c0112a5b790faa4e7f0b0a0656",
        "bug_id": "ofbiz-framework_165",
        "file": [
            {
                "sha": "798109b31c1dbb708c55c02d896b1b29b3df4d67",
                "filename": "applications/product/webapp/catalog/WEB-INF/actions/product/EditProductInventoryItems.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a62c16e98c9f7cef143c1152f8c55f1eff13d21f/applications/product/webapp/catalog/WEB-INF/actions/product/EditProductInventoryItems.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a62c16e98c9f7cef143c1152f8c55f1eff13d21f/applications/product/webapp/catalog/WEB-INF/actions/product/EditProductInventoryItems.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/catalog/WEB-INF/actions/product/EditProductInventoryItems.groovy?ref=a62c16e98c9f7cef143c1152f8c55f1eff13d21f",
                "patch": "@@ -20,6 +20,7 @@\n import org.ofbiz.entity.condition.*\n import org.ofbiz.product.inventory.InventoryWorker\n \n+if (product) {\n //If product is virtual gather summary data from variants\n if (product.isVirtual && \"Y\".equals(product.isVirtual)) {\n     //Get the virtual product feature types\n@@ -158,4 +159,5 @@ if (product.isVirtual && \"Y\".equals(product.isVirtual)) {\n     context.manufacturingOutQuantitySummaryByFacility = manufacturingOutQuantitySummaryByFacility;\n     context.showEmpty = showEmpty;\n     context.purchaseOrders = purchaseOrders;\n+}\n }\n\\ No newline at end of file",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE when emailAddress is not entered exporting products to eBay; thanks to Marco Risaliti for the patch.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@803133 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5f2f6f3115372ad7d38bb08b31f3fe66a2b98f91",
        "parent": "https://github.com/apache/ofbiz-framework/commit/7301693cef03f35d36eb432d109195c1c783eee2",
        "bug_id": "ofbiz-framework_166",
        "file": [
            {
                "sha": "15e2cff3acc186ba1508fee7a9d3d71ee76e15b8",
                "filename": "specialpurpose/ebay/src/org/ofbiz/ebay/ProductsExportToEbay.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5f2f6f3115372ad7d38bb08b31f3fe66a2b98f91/specialpurpose/ebay/src/org/ofbiz/ebay/ProductsExportToEbay.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5f2f6f3115372ad7d38bb08b31f3fe66a2b98f91/specialpurpose/ebay/src/org/ofbiz/ebay/ProductsExportToEbay.java",
                "status": "modified",
                "changes": 6,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/ebay/src/org/ofbiz/ebay/ProductsExportToEbay.java?ref=5f2f6f3115372ad7d38bb08b31f3fe66a2b98f91",
                "patch": "@@ -319,6 +319,7 @@ private static Map buildAddTransactionConfirmationItemRequest(Map context, Strin\n \n     private static void setPaymentMethodAccepted(Document itemDocument, Element itemElem, Map context) {\n         String payPal = (String)context.get(\"paymentPayPal\");\n+        String payPalEmail = (String)context.get(\"payPalEmail\");\n         String visaMC = (String)context.get(\"paymentVisaMC\");\n         String amEx = (String)context.get(\"paymentAmEx\");\n         String discover = (String)context.get(\"paymentDiscover\");\n@@ -334,7 +335,10 @@ private static void setPaymentMethodAccepted(Document itemDocument, Element item\n         // PayPal\n         if (UtilValidate.isNotEmpty(payPal) && \"on\".equals(payPal)) {\n             UtilXml.addChildElementValue(itemElem, \"PaymentMethods\", \"PayPal\", itemDocument);\n-            UtilXml.addChildElementValue(itemElem, \"PayPalEmailAddress\", (String)context.get(\"payPalEmail\"), itemDocument);\n+            // PayPal email\n+            if (UtilValidate.isNotEmpty(payPalEmail)) {\n+                UtilXml.addChildElementValue(itemElem, \"PayPalEmailAddress\", payPalEmail, itemDocument);\n+            }\n         }\n         // Visa/Master Card\n         if (UtilValidate.isNotEmpty(visaMC) && \"on\".equals(visaMC)) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "productStore NPE fix when adding an item to the cart during PO entry (not using bulk add form)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@796823 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/0536ff3a7438a4cfee09c84e6fc20e8acc09580b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3a3bbb891941bc80c5ba72f6fa41ab01a4d74b01",
        "bug_id": "ofbiz-framework_167",
        "file": [
            {
                "sha": "a515f6879edb08696c92b12ec075b952fdd026b6",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0536ff3a7438a4cfee09c84e6fc20e8acc09580b/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0536ff3a7438a4cfee09c84e6fc20e8acc09580b/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java?ref=0536ff3a7438a4cfee09c84e6fc20e8acc09580b",
                "patch": "@@ -486,6 +486,7 @@ public static String addToCart(HttpServletRequest request, HttpServletResponse r\n         }\n \n         GenericValue productStore = ProductStoreWorker.getProductStore(request);\n+        if (productStore != null) {\n         String addToCartRemoveIncompat = productStore.getString(\"addToCartRemoveIncompat\");\n         String addToCartReplaceUpsell = productStore.getString(\"addToCartReplaceUpsell\");\n         try {\n@@ -544,6 +545,7 @@ public static String addToCart(HttpServletRequest request, HttpServletResponse r\n         } catch (GenericEntityException e) {\n             Debug.logError(e.getMessage(), module);\n         }\n+        }\n \n         // Translate the parameters and add to the cart\n         result = cartHelper.addToCart(catalogId, shoppingListId, shoppingListItemSeqId, productId, productCategoryId,",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE; not sure why this suddenly showed up but was showing an error in checkout in ecommerce\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@758511 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/14d75e48bbbf4e5588cb1833c6921e36ccef40cb",
        "parent": "https://github.com/apache/ofbiz-framework/commit/cbc7022dee5be336c78a7607c268a4e33ddedfe7",
        "bug_id": "ofbiz-framework_168",
        "file": [
            {
                "sha": "1b9a031f99a54e56f1b5fbfe6b55d5091480fd83",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/shipping/ShippingEvents.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/14d75e48bbbf4e5588cb1833c6921e36ccef40cb/applications/order/src/org/ofbiz/order/shoppingcart/shipping/ShippingEvents.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/14d75e48bbbf4e5588cb1833c6921e36ccef40cb/applications/order/src/org/ofbiz/order/shoppingcart/shipping/ShippingEvents.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/shipping/ShippingEvents.java?ref=14d75e48bbbf4e5588cb1833c6921e36ccef40cb",
                "patch": "@@ -152,8 +152,8 @@ public static Map getShipGroupEstimate(LocalDispatcher dispatcher, GenericDelega\n         String standardMessage = \"A problem occurred calculating shipping. Fees will be calculated offline.\";\n         List errorMessageList = new ArrayList();\n \n-        if (shipmentMethodTypeId.equals(\"NO_SHIPPING\")) {\n-                return ServiceUtil.returnSuccess();\n+        if (\"NO_SHIPPING\".equals(shipmentMethodTypeId)) {\n+            return ServiceUtil.returnSuccess();\n         }\n \n         if (shipmentMethodTypeId == null || carrierPartyId == null) {",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE when a request doesn't have an event that was causing the ArtifactInfo stuff to not successfully load\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@742996 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5dd06ae9425f112110a2761dd7477b549cad6d24",
        "parent": "https://github.com/apache/ofbiz-framework/commit/276dbd183bc1b364f603cb6582ddcbb821fbaac1",
        "bug_id": "ofbiz-framework_169",
        "file": [
            {
                "sha": "0bf65d1acc831fa9d9acaa75f0fee307b86ad282",
                "filename": "framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerRequestArtifactInfo.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5dd06ae9425f112110a2761dd7477b549cad6d24/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerRequestArtifactInfo.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5dd06ae9425f112110a2761dd7477b549cad6d24/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerRequestArtifactInfo.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerRequestArtifactInfo.java?ref=5dd06ae9425f112110a2761dd7477b549cad6d24",
                "patch": "@@ -67,7 +67,7 @@ public ControllerRequestArtifactInfo(URL controllerXmlUrl, String requestUri, Ar\n     public void populateAll() throws GeneralException {\n         // populate serviceCalledByRequestEvent, requestsThatAreResponsesToThisRequest, viewsThatAreResponsesToThisRequest and related reverse maps\n         \n-        if (\"service\".equals(this.requestInfoMap.event.type)) {\n+        if (this.requestInfoMap.event != null && \"service\".equals(this.requestInfoMap.event.type)) {\n             String serviceName = (String) this.requestInfoMap.event.invoke;\n             try {\n                 this.serviceCalledByRequestEvent = this.aif.getServiceArtifactInfo(serviceName);\n@@ -82,7 +82,7 @@ public void populateAll() throws GeneralException {\n         \n         Map<String, ConfigXMLReader.RequestResponse> requestResponseMap = UtilGenerics.checkMap(this.requestInfoMap.requestResponseMap);\n         for (ConfigXMLReader.RequestResponse response: requestResponseMap.values()) {\n-            if (response.type.equals(\"view\")) {\n+            if (\"view\".equals(response.type)) {\n                 String viewUri = response.value;\n                 if (viewUri.startsWith(\"/\")) {\n                     viewUri = viewUri.substring(1);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "give an error message instead of NPE when a field is not found\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@739188 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/741e725f95edd9638ed099a946b35b589b11131d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/21fd0a68b0c9a0a1d2f55f8086b82b3e73d968bc",
        "bug_id": "ofbiz-framework_170",
        "file": [
            {
                "sha": "abd779bf1d8da1be32522bc24ba52d6f4ffb3b39",
                "filename": "framework/entity/src/org/ofbiz/entity/condition/EntityExpr.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/741e725f95edd9638ed099a946b35b589b11131d/framework/entity/src/org/ofbiz/entity/condition/EntityExpr.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/741e725f95edd9638ed099a946b35b589b11131d/framework/entity/src/org/ofbiz/entity/condition/EntityExpr.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/condition/EntityExpr.java?ref=741e725f95edd9638ed099a946b35b589b11131d",
                "patch": "@@ -27,6 +27,7 @@\n \n import org.ofbiz.base.util.Debug;\n import org.ofbiz.base.util.ObjectType;\n+import org.ofbiz.base.util.UtilValidate;\n import org.ofbiz.entity.EntityCryptoException;\n import org.ofbiz.entity.GenericDelegator;\n import org.ofbiz.entity.GenericEntity;\n@@ -250,6 +251,9 @@ public void checkRhsType(ModelEntity modelEntity, GenericDelegator delegator) {\n         }\n         \n         ModelField curField = modelEntity.getField(fieldName);\n+        if (UtilValidate.isEmpty(curField)) {\n+            throw new IllegalArgumentException(\"FieldName \" + fieldName + \" not found for entity: \" + modelEntity.getEntityName());\n+        }\n         ModelFieldType type = null;\n         try {\n             type = delegator.getEntityFieldType(modelEntity, curField.getType());",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE in configurable product screen reported by Amit in user list.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@737671 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f9ea459a674a2accaa287de73b2c0d30d9680e48",
        "parent": "https://github.com/apache/ofbiz-framework/commit/0760d81c6d8f8078f04536fdb866003bc8f871cf",
        "bug_id": "ofbiz-framework_171",
        "file": [
            {
                "sha": "bb80d36af5d9f8d3d4659c9998eb733d6e90930b",
                "filename": "applications/ecommerce/webapp/ecommerce/catalog/configproductdetail.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f9ea459a674a2accaa287de73b2c0d30d9680e48/applications/ecommerce/webapp/ecommerce/catalog/configproductdetail.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f9ea459a674a2accaa287de73b2c0d30d9680e48/applications/ecommerce/webapp/ecommerce/catalog/configproductdetail.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/webapp/ecommerce/catalog/configproductdetail.ftl?ref=f9ea459a674a2accaa287de73b2c0d30d9680e48",
                "patch": "@@ -366,7 +366,7 @@ function getConfigDetails(event) {\n         <form name=\"addToShoppingList\" method=\"post\" action=\"<@ofbizUrl>addItemToShoppingList<#if requestAttributes._CURRENT_VIEW_?exists>/${requestAttributes._CURRENT_VIEW_}</#if></@ofbizUrl>\">\n           <input type=\"hidden\" name=\"productId\" value=\"${product.productId}\">\n           <input type=\"hidden\" name=\"product_id\" value=\"${product.productId}\">\n-          <input type=\"hidden\" name=\"configId\" value=\"${configId}\">\n+          <input type=\"hidden\" name=\"configId\" value=\"${configId?if_exists}\">\n           <select name=\"shoppingListId\">\n             <#if shoppingLists?has_content>\n               <#list shoppingLists as shoppingList>",
                "deletions": 1
            },
            {
                "sha": "ed7edefd26e1d657dfa90152ab7d0bf2dfa27012",
                "filename": "applications/order/webapp/ordermgr/entry/catalog/configproductdetail.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f9ea459a674a2accaa287de73b2c0d30d9680e48/applications/order/webapp/ordermgr/entry/catalog/configproductdetail.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f9ea459a674a2accaa287de73b2c0d30d9680e48/applications/order/webapp/ordermgr/entry/catalog/configproductdetail.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/entry/catalog/configproductdetail.ftl?ref=f9ea459a674a2accaa287de73b2c0d30d9680e48",
                "patch": "@@ -366,7 +366,7 @@ function getConfigDetails(event) {\n         <form name=\"addToShoppingList\" method=\"post\" action=\"<@ofbizUrl>addItemToShoppingList<#if requestAttributes._CURRENT_VIEW_?exists>/${requestAttributes._CURRENT_VIEW_}</#if></@ofbizUrl>\">\n           <input type=\"hidden\" name=\"productId\" value=\"${product.productId}\">\n           <input type=\"hidden\" name=\"product_id\" value=\"${product.productId}\">\n-          <input type=\"hidden\" name=\"configId\" value=\"${configId}\">\n+          <input type=\"hidden\" name=\"configId\" value=\"${configId?if_exists}\">\n           <select name=\"shoppingListId\">\n             <#if shoppingLists?has_content>\n               <#list shoppingLists as shoppingList>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE happening for service implemented in Java in the service detail screen of the Artifact Info menu.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@688631 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6bbb26c243fc61a091dcb1328da23b2ff66fa5f9",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b0a9ad29dec56ba07dc0f8c2aa302da5f7a0faec",
        "bug_id": "ofbiz-framework_172",
        "file": [
            {
                "sha": "9f5cd037ea6418e6868f8a8064a88cfa14f6f59b",
                "filename": "framework/webtools/webapp/webtools/artifactinfo/ArtifactInfo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6bbb26c243fc61a091dcb1328da23b2ff66fa5f9/framework/webtools/webapp/webtools/artifactinfo/ArtifactInfo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6bbb26c243fc61a091dcb1328da23b2ff66fa5f9/framework/webtools/webapp/webtools/artifactinfo/ArtifactInfo.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/webapp/webtools/artifactinfo/ArtifactInfo.ftl?ref=6bbb26c243fc61a091dcb1328da23b2ff66fa5f9",
                "patch": "@@ -119,7 +119,7 @@ under the License.\n         <h2>Service Info</h2>\n         <div>&nbsp;Description: ${artifactInfo.modelService.description}</div>\n         <div>&nbsp;Run (${artifactInfo.modelService.engineName}): ${artifactInfo.modelService.location} :: ${artifactInfo.modelService.invoke}</div>\n-        <div>&nbsp;Impl Location: <a href=\"${artifactInfo.getImplementationLocationURL()}\">${artifactInfo.getImplementationLocationURL()}</a></div>\n+        <div>&nbsp;Impl Location: <a href=\"${artifactInfo.getImplementationLocationURL()?if_exists}\">${artifactInfo.getImplementationLocationURL()?if_exists}</a></div>\n         <h2>Service Parameters</h2>\n         <table>\n             <tr><td>Name</td><td>Type</td><td>Optional</td><td>Mode</td></tr>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for OFBIZ-1813 reported by Jacapo Cappellato,  NPE when rendering PDF attached to the order confirmation email\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@661931 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8830da20fbb4b8c9074de77c4efd6767b3e76de6",
        "parent": "https://github.com/apache/ofbiz-framework/commit/dce755337a0bfceb286369f3400bd845c2d3b27c",
        "bug_id": "ofbiz-framework_173",
        "file": [
            {
                "sha": "eb91d684b4b13e5bda441e591633cf7a4b57f302",
                "filename": "applications/content/src/org/ofbiz/content/email/EmailServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8830da20fbb4b8c9074de77c4efd6767b3e76de6/applications/content/src/org/ofbiz/content/email/EmailServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8830da20fbb4b8c9074de77c4efd6767b3e76de6/applications/content/src/org/ofbiz/content/email/EmailServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/email/EmailServices.java?ref=8830da20fbb4b8c9074de77c4efd6767b3e76de6",
                "patch": "@@ -39,6 +39,7 @@\n import org.ofbiz.service.ServiceUtil;\n import org.ofbiz.service.mail.MimeMessageWrapper;\n import org.ofbiz.webapp.view.ApacheFopWorker;\n+import org.ofbiz.widget.fo.FoScreenRenderer;\n import org.ofbiz.widget.html.HtmlScreenRenderer;\n import org.ofbiz.widget.screen.ScreenRenderer;\n import org.xml.sax.SAXException;\n@@ -69,6 +70,7 @@\n     public final static String module = EmailServices.class.getName();\n \n     protected static final HtmlScreenRenderer htmlScreenRenderer = new HtmlScreenRenderer();\n+    protected static final FoScreenRenderer foScreenRenderer = new FoScreenRenderer();\n \n     /**\n      * Basic JavaMail Service\n@@ -374,7 +376,7 @@ public static Map sendMailFromScreen(DispatchContext dctx, Map serviceContext) {\n                 Writer writer = new StringWriter();\n                 MapStack screenContextAtt = MapStack.create();\n                 // substitute the freemarker variables...\n-                ScreenRenderer screensAtt = new ScreenRenderer(writer, screenContext, htmlScreenRenderer);\n+                ScreenRenderer screensAtt = new ScreenRenderer(writer, screenContext, foScreenRenderer);\n                 screensAtt.populateContextForService(dctx, bodyParameters);\n                 screenContextAtt.putAll(bodyParameters);\n                 screensAtt.render(xslfoAttachScreenLocation);",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE reported by Giorgio Tomaselli happening when a purchase order has no terms.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@644318 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2184425a3eb5ab8d0b11e0b458a26850170af5ae",
        "parent": "https://github.com/apache/ofbiz-framework/commit/d6398f8deb6e7007d86b9ad511924a8fb2ec7036",
        "bug_id": "ofbiz-framework_174",
        "file": [
            {
                "sha": "9cdd401db3bd6e360e9a82f3cb391885b846142c",
                "filename": "applications/order/webapp/ordermgr/order/orderReportContactMechs.fo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2184425a3eb5ab8d0b11e0b458a26850170af5ae/applications/order/webapp/ordermgr/order/orderReportContactMechs.fo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2184425a3eb5ab8d0b11e0b458a26850170af5ae/applications/order/webapp/ordermgr/order/orderReportContactMechs.fo.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/order/orderReportContactMechs.fo.ftl?ref=2184425a3eb5ab8d0b11e0b458a26850170af5ae",
                "patch": "@@ -124,7 +124,7 @@ under the License.\n              </fo:table-row>\n            </#if>\n        <#-- order terms information -->\n-             <#if orderTerms?has_content>\n+             <#if orderTerms?exists?has_content>\n              <fo:table-row>\n                <fo:table-cell><fo:block font-weight=\"bold\">${uiLabelMap.OrderOrderTerms}: </fo:block></fo:table-cell>\n                <fo:table-cell white-space-collapse=\"false\"><#list orderTerms as orderTerm><fo:block>${orderTerm.getRelatedOne(\"TermType\").get(\"description\",locale)} ${orderTerm.termValue?default(\"\")} ${orderTerm.termDays?default(\"\")} ${orderTerm.textValue?default(\"\")}",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix for NPE reported by Giorgio Tomaselli when the PDF report for a purchase order without terms was rendered.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@644311 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d6398f8deb6e7007d86b9ad511924a8fb2ec7036",
        "parent": "https://github.com/apache/ofbiz-framework/commit/034175a4f4abbacc400c3f994b85836df0aac85f",
        "bug_id": "ofbiz-framework_175",
        "file": [
            {
                "sha": "4d9e53d7f5184a7ac3227584ff8d346aa2bbd06a",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/order/orderview.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d6398f8deb6e7007d86b9ad511924a8fb2ec7036/applications/order/webapp/ordermgr/WEB-INF/actions/order/orderview.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d6398f8deb6e7007d86b9ad511924a8fb2ec7036/applications/order/webapp/ordermgr/WEB-INF/actions/order/orderview.bsh",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/order/orderview.bsh?ref=d6398f8deb6e7007d86b9ad511924a8fb2ec7036",
                "patch": "@@ -31,6 +31,8 @@ import org.ofbiz.product.inventory.InventoryWorker;\n import org.ofbiz.product.catalog.CatalogWorker;\n import org.ofbiz.accounting.payment.*;\n \n+import javolution.util.FastList;\n+\n orderId = parameters.get(\"orderId\");\n context.put(\"orderId\", orderId);\n \n@@ -73,7 +75,7 @@ if (orderHeader != null) {\n     context.put(\"orderHeaderAdjustments\", orderHeaderAdjustments);\n     context.put(\"orderSubTotal\", orderSubTotal);\n     context.put(\"currencyUomId\", orderReadHelper.getCurrency());\n-    context.put(\"orderTerms\",orderTerms);\n+    context.put(\"orderTerms\", orderTerms);\n \n     // get the order type\n     orderType = orderHeader.getString(\"orderTypeId\");",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "set actual start date when time is registered, remove NPE from bsh, add subhyperlink on timesheet\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@606662 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/efff8897874cd77ee0d8cf51d97a1fb7f3f2160d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/5d0781acbcf3233fa2e50b9f19cad59ba5c36377",
        "bug_id": "ofbiz-framework_176",
        "file": [
            {
                "sha": "86445063478debc0e8e997fe9c88e574f0f18fca",
                "filename": "specialpurpose/projectmgr/script/org/ofbiz/project/ProjectServices.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/efff8897874cd77ee0d8cf51d97a1fb7f3f2160d/specialpurpose/projectmgr/script/org/ofbiz/project/ProjectServices.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/efff8897874cd77ee0d8cf51d97a1fb7f3f2160d/specialpurpose/projectmgr/script/org/ofbiz/project/ProjectServices.xml",
                "status": "modified",
                "changes": 9,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/projectmgr/script/org/ofbiz/project/ProjectServices.xml?ref=efff8897874cd77ee0d8cf51d97a1fb7f3f2160d",
                "patch": "@@ -21,6 +21,8 @@\n <simple-methods xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n     xsi:noNamespaceSchemaLocation=\"http://ofbiz.apache.org/dtds/simple-methods.xsd\">\n     \n+    <simple-method method-name=\"\" short-description=\"\"></simple-method>\n+    \n     <simple-method method-name=\"scheduleProject\" short-description=\"Project Scheduler sets the planningdates according task requirements and available resources\">\n         <!-- \n                 theory behind the program\n@@ -164,6 +166,13 @@\n             <call-service service-name=\"assignPartyToWorkEffort\" in-map-name=\"addAssign\"/>\n         </if-empty>\n         \n+        <!-- check if the actual start date is set, when not set it to todays date -->\n+        <if-empty field-name=\"project.actualStartDate\">\n+            <now-date-to-env env-name=\"updTask.actualStartDate\"/>\n+            <set field=\"updTask.workEffortId\" from-field=\"parameters.workEffortId\"/>\n+            <call-service service-name=\"updateWorkEffort\" in-map-name=\"updTask\"/>\n+        </if-empty>\n+        \n         <get-related value-name=\"timesheet\" relation-name=\"TimeEntry\" list-name=\"timeEntries\"/>\n         \n         <!-- update existing entries -->",
                "deletions": 0
            },
            {
                "sha": "a1476f0334ab46d1eab01bd95ae8eb893600f977",
                "filename": "specialpurpose/projectmgr/webapp/projectmgr/WEB-INF/actions/EditWeekTimesheet.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/efff8897874cd77ee0d8cf51d97a1fb7f3f2160d/specialpurpose/projectmgr/webapp/projectmgr/WEB-INF/actions/EditWeekTimesheet.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/efff8897874cd77ee0d8cf51d97a1fb7f3f2160d/specialpurpose/projectmgr/webapp/projectmgr/WEB-INF/actions/EditWeekTimesheet.bsh",
                "status": "modified",
                "changes": 21,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/projectmgr/webapp/projectmgr/WEB-INF/actions/EditWeekTimesheet.bsh?ref=efff8897874cd77ee0d8cf51d97a1fb7f3f2160d",
                "patch": "@@ -72,16 +72,19 @@ while(te.hasNext()) {\n     if (lastWorkEffortId != null && !lastWorkEffortId.equals(timeEntry.getString(\"workEffortId\"))) {\n         entry.put(\"total\", taskTotal);\n         // get the planned number of hours\n-        plannedHours = timeEntry.getRelatedOne(\"WorkEffort\").getRelated(\"WorkEffortSkillStandard\");\n-        ph = plannedHours.iterator();\n-        pHours = 0.00;\n-        while(ph.hasNext()) {\n-            plannedHour = ph.next();\n-            if (plannedHour.get(\"estimatedDuration\") != null) {\n-                pHours += plannedHour.get(\"estimatedDuration\");\n-            }\n+        entryWorkEffort = timeEntry.getRelatedOne(\"WorkEffort\");\n+        if (entryWorkEffort != null) {\n+        \tplannedHours = entryWorkEffort.getRelated(\"WorkEffortSkillStandard\");\n+\t        ph = plannedHours.iterator();\n+\t        pHours = 0.00;\n+\t        while(ph.hasNext()) {\n+\t            plannedHour = ph.next();\n+\t            if (plannedHour.get(\"estimatedDuration\") != null) {\n+\t                pHours += plannedHour.get(\"estimatedDuration\");\n+\t            }\n+\t        }\n+\t        entry.put(\"plannedHours\", pHours);\n         }\n-        entry.put(\"plannedHours\", pHours);\n         entries.add(entry);\n         taskTotal = 0.00;\n         entry = UtilMisc.toMap(\"timesheetId\", timesheet.get(\"timesheetId\"));",
                "deletions": 9
            },
            {
                "sha": "9a9fb7445299f17948faa2ae2b8cdbad242709d2",
                "filename": "specialpurpose/projectmgr/widget/forms/TimeSheetForms.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/efff8897874cd77ee0d8cf51d97a1fb7f3f2160d/specialpurpose/projectmgr/widget/forms/TimeSheetForms.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/efff8897874cd77ee0d8cf51d97a1fb7f3f2160d/specialpurpose/projectmgr/widget/forms/TimeSheetForms.xml",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/projectmgr/widget/forms/TimeSheetForms.xml?ref=efff8897874cd77ee0d8cf51d97a1fb7f3f2160d",
                "patch": "@@ -29,7 +29,8 @@\n                     <entity-order-by field-name=\"projectName\"/>\n                     <entity-order-by field-name=\"phaseName\"/>\n                     <entity-order-by field-name=\"workEffortName\"/>\n-                </entity-options>\n+                </entity-options>\r\n+                <sub-hyperlink target=\"taskView?workEffortId=${workEffortId}\" link-style=\"buttontext\" description=\"${workEffortId}\"/>\r\n             </drop-down>\n         </field>\n         <field name=\"0\" parameter-name=\"hoursDay0\" title=\"Sun\"><text size=\"5\"/></field>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "To avoid NPEs in Webtools/Minerva Connection Info (did not look further to check if it works fine)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@598288 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/aafab5d951c0892c3bec423e6474572b523764e3",
        "parent": "https://github.com/apache/ofbiz-framework/commit/97f25673f42c20630f07917a8682563c27b7de12",
        "bug_id": "ofbiz-framework_177",
        "file": [
            {
                "sha": "b3f347d4ab0515147d50482ebbb77398ab91b4df",
                "filename": "framework/entity/src/org/ofbiz/entity/connection/MinervaConnectionFactory.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/aafab5d951c0892c3bec423e6474572b523764e3/framework/entity/src/org/ofbiz/entity/connection/MinervaConnectionFactory.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/aafab5d951c0892c3bec423e6474572b523764e3/framework/entity/src/org/ofbiz/entity/connection/MinervaConnectionFactory.java",
                "status": "modified",
                "changes": 10,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/connection/MinervaConnectionFactory.java?ref=aafab5d951c0892c3bec423e6474572b523764e3",
                "patch": "@@ -20,6 +20,7 @@\n \n import java.sql.Connection;\n import java.sql.SQLException;\n+import java.util.HashSet;\n import java.util.Iterator;\n import java.util.Map;\n import java.util.Set;\n@@ -125,15 +126,18 @@ public void closeAll() {\n     public static Set getPooledData(String helperName) throws GenericEntityException {\n         XAPoolDataSource pds = dsCache.get(helperName);\n         if (pds == null) {\n-            throw new GenericEntityException(\"No pool found for helper name [\" + helperName + \"]\");\n+            Debug.logError(\"No pool found for helper name [\" + helperName + \"]\", module);\n+            return new HashSet();\n+        } else {\n+            return pds.getPooledObjectRecords(0); // 0 to return all (in use and waiting)\n         }\n-        return pds.getPooledObjectRecords(0); // 0 to return all (in use and waiting)\n     }\n \n     public static String getPoolName(String helperName) throws GenericEntityException {\n         XAPoolDataSource pds = dsCache.get(helperName);\n         if (pds == null) {\n-            throw new GenericEntityException(\"No pool found for helper name [\" + helperName + \"]\");\n+            Debug.logError(\"No pool found for helper name [\" + helperName + \"]\", module);\n+            return null;\n         }\n         return pds.getPoolDataString();\n     }",
                "deletions": 3
            },
            {
                "sha": "f464c0dc2a9e0bf6aa075b074c84e48914c197ee",
                "filename": "framework/webtools/webapp/webtools/entity/minervaObjects.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/aafab5d951c0892c3bec423e6474572b523764e3/framework/webtools/webapp/webtools/entity/minervaObjects.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/aafab5d951c0892c3bec423e6474572b523764e3/framework/webtools/webapp/webtools/entity/minervaObjects.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/webapp/webtools/entity/minervaObjects.ftl?ref=aafab5d951c0892c3bec423e6474572b523764e3",
                "patch": "@@ -41,8 +41,8 @@ under the License.\n         <#list groups as group>\n             <#assign helper = delegator.getGroupHelperName(group)?if_exists/>\n             <#if (helper?has_content)>\n-                <#assign pooledObjs = Static[\"org.ofbiz.entity.transaction.MinervaConnectionFactory\"].getPooledData(helper)?if_exists/>\n-                <#assign pool = Static[\"org.ofbiz.entity.transaction.MinervaConnectionFactory\"].getPoolName(helper)?if_exists/>\n+                <#assign pooledObjs = Static[\"org.ofbiz.entity.connection.MinervaConnectionFactory\"].getPooledData(helper)?if_exists/>\n+                <#assign pool = Static[\"org.ofbiz.entity.connection.MinervaConnectionFactory\"].getPoolName(helper)?if_exists/>\n                 <#if (pooledObjs?has_content)>\n                     <#list pooledObjs as obj>\n                         <#assign isTx = (obj.getCurrentXid()?has_content)/>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Small change to not add null values to lists, will always throw an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@589967 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/eb773c62c06b7d1b47dd56a6ae4d3e33f9e681db",
        "parent": "https://github.com/apache/ofbiz-framework/commit/425a271552adf3975f945cb7b5c61c93208375fa",
        "bug_id": "ofbiz-framework_178",
        "file": [
            {
                "sha": "a105053883c1d9799c2dc76d3e00d6ca00ff046b",
                "filename": "framework/base/src/base/org/ofbiz/base/util/collections/FlexibleMapAccessor.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/eb773c62c06b7d1b47dd56a6ae4d3e33f9e681db/framework/base/src/base/org/ofbiz/base/util/collections/FlexibleMapAccessor.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/eb773c62c06b7d1b47dd56a6ae4d3e33f9e681db/framework/base/src/base/org/ofbiz/base/util/collections/FlexibleMapAccessor.java",
                "status": "modified",
                "changes": 17,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/base/org/ofbiz/base/util/collections/FlexibleMapAccessor.java?ref=eb773c62c06b7d1b47dd56a6ae4d3e33f9e681db",
                "patch": "@@ -214,14 +214,17 @@ public void put(Map base, Object value) {\n                 lst = FastList.newInstance();\n                 base.put(this.extName, lst);\n             }\n-            //if brackets are empty, append to list\n-            if (this.isAddAtEnd) {\n-                lst.add(value);\n-            } else {\n-                if (this.isAddAtIndex) {\n-                    lst.add(this.listIndex, value);\n+            //if brackets are empty, append to list, but only if it's not null (avoid NPEs with FastList)\n+            if (value != null) {\n+            \t// note that we are checking for null AFTER checking/creating the list itself, so that it will exist after referenced the first time\n+                if (this.isAddAtEnd) {\n+                    lst.add(value);\n                 } else {\n-                    lst.set(this.listIndex, value);\n+                    if (this.isAddAtIndex) {\n+                        lst.add(this.listIndex, value);\n+                    } else {\n+                        lst.set(this.listIndex, value);\n+                    }\n                 }\n             }\n         } else {",
                "deletions": 7
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Add internString(), which protects against NPE.  Closes\n https://issues.apache.org/jira/browse/OFBIZ-1307.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@585578 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3a0a201c34dc3cad8c001d030c80e57f5b605da1",
        "parent": "https://github.com/apache/ofbiz-framework/commit/ddbcbed6d17d1e214646c9691c8c9ee667ed995f",
        "bug_id": "ofbiz-framework_179",
        "file": [
            {
                "sha": "c00d4390074337fe079960f6cc4deebef8c2d984",
                "filename": "framework/base/src/base/org/ofbiz/base/util/StringUtil.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3a0a201c34dc3cad8c001d030c80e57f5b605da1/framework/base/src/base/org/ofbiz/base/util/StringUtil.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3a0a201c34dc3cad8c001d030c80e57f5b605da1/framework/base/src/base/org/ofbiz/base/util/StringUtil.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/base/org/ofbiz/base/util/StringUtil.java?ref=3a0a201c34dc3cad8c001d030c80e57f5b605da1",
                "patch": "@@ -41,6 +41,10 @@\n     \n     public static final String module = StringUtil.class.getName();\n \n+    public static String internString(String value) {\n+        return value != null ? value.intern() : null;\n+    }\n+\n     /** \n      * Replaces all occurances of oldString in mainString with newString\n      * @param mainString The original string",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix to prevent NPE if a BOM substitute node is not available.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@580282 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/98c7ce2953717852b5af48196aa6ce2074b90577",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2617990051d047e9c201a2d0a2ba50e95112b155",
        "bug_id": "ofbiz-framework_180",
        "file": [
            {
                "sha": "fb7a609710a7853ee1783b93a2357e45cdc4335b",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/98c7ce2953717852b5af48196aa6ce2074b90577/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/98c7ce2953717852b5af48196aa6ce2074b90577/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java?ref=98c7ce2953717852b5af48196aa6ce2074b90577",
                "patch": "@@ -616,7 +616,9 @@ public boolean isWarehouseManaged() {\n             if (UtilValidate.isNotEmpty(pfs)) {\n                 isWarehouseManaged = true;\n             } else {\n-                pfs = getSubstitutedNode().getProduct().getRelatedCache(\"ProductFacility\");\n+                if (getSubstitutedNode() != null && getSubstitutedNode().getProduct() != null) {\n+                    pfs = getSubstitutedNode().getProduct().getRelatedCache(\"ProductFacility\");\n+                }\n                 if (UtilValidate.isNotEmpty(pfs)) {\n                     isWarehouseManaged = true;\n                 }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "added checks to prevent NPE when results are not sent for AVS and CVV2\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@577496 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e90e4a419418ec2a894b3cc509bfb2a912e5cf96",
        "parent": "https://github.com/apache/ofbiz-framework/commit/236b7a794b3c42d8b8f5c03b642bc267a7e4e7b2",
        "bug_id": "ofbiz-framework_181",
        "file": [
            {
                "sha": "0a88dc795ae38e2a59626361dc2c02eef6a68cc3",
                "filename": "applications/accounting/src/org/ofbiz/accounting/thirdparty/verisign/PayflowPro.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e90e4a419418ec2a894b3cc509bfb2a912e5cf96/applications/accounting/src/org/ofbiz/accounting/thirdparty/verisign/PayflowPro.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e90e4a419418ec2a894b3cc509bfb2a912e5cf96/applications/accounting/src/org/ofbiz/accounting/thirdparty/verisign/PayflowPro.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/thirdparty/verisign/PayflowPro.java?ref=e90e4a419418ec2a894b3cc509bfb2a912e5cf96",
                "patch": "@@ -369,7 +369,7 @@ private static void parseAuthResponse(String resp, Map result, String resource,\n                 String addAvs = (String) parameters.get(\"AVSADDR\");\n                 String zipAvs = (String) parameters.get(\"AVSZIP\");\n                 avsCode = addAvs + zipAvs;\n-                if (\"N\".equals(addAvs) || \"N\".equals(zipAvs)) {\n+                if (addAvs == null || \"N\".equals(addAvs) || zipAvs == null || \"N\".equals(zipAvs)) {\n                     avsCheckOkay = false;\n                 }\n             }\n@@ -382,7 +382,7 @@ private static void parseAuthResponse(String resp, Map result, String resource,\n             boolean checkCvv2 = UtilProperties.propertyValueEqualsIgnoreCase(resource, \"payment.verisign.checkAvs\", \"Y\");\n             if (checkCvv2 && !isSale) {\n                 cvvCode = (String) parameters.get(\"CVV2MATCH\");\n-                if (\"N\".equals(cvvCode)) {\n+                if (cvvCode == null || \"N\".equals(cvvCode)) {\n                     cvv2CheckOkay = false;\n                 }\n             }",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Updated log4j jar to latest release: this fixes the annoying NPE at startup.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@575675 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/fc8336c7a71e7b5c2458d34a765e6d8429f3413a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/bc0192e610cd7cd5c955fe604e95505cce3b5a26",
        "bug_id": "ofbiz-framework_182",
        "file": [
            {
                "sha": "79758edf0b4bcd321dd5c35182f376d63cb85763",
                "filename": "LICENSE",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/fc8336c7a71e7b5c2458d34a765e6d8429f3413a/LICENSE",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/fc8336c7a71e7b5c2458d34a765e6d8429f3413a/LICENSE",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/LICENSE?ref=fc8336c7a71e7b5c2458d34a765e6d8429f3413a",
                "patch": "@@ -16,7 +16,7 @@ ofbiz/trunk/framework/base/lib/ant-1.7.0.jar\n ofbiz/trunk/framework/base/lib/avalon-framework-4.2.0.jar\n ofbiz/trunk/framework/base/lib/avalon-util-exception-1.0.0.jar\n ofbiz/trunk/framework/base/lib/jakarta-regexp-1.5.jar\n-ofbiz/trunk/framework/base/lib/log4j-1.2.14.jar\n+ofbiz/trunk/framework/base/lib/log4j-1.2.15.jar\n ofbiz/trunk/framework/base/lib/mx4j-3.0.1.jar\n ofbiz/trunk/framework/base/lib/mx4j-remote-3.0.1.jar\n ofbiz/trunk/framework/base/lib/resolver.jar",
                "deletions": 1
            },
            {
                "sha": "625130719013f195869881a36dcb8d2b14d64d1e",
                "filename": "framework/base/lib/log4j-1.2.14.jar",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/bc0192e610cd7cd5c955fe604e95505cce3b5a26/framework/base/lib/log4j-1.2.14.jar",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/bc0192e610cd7cd5c955fe604e95505cce3b5a26/framework/base/lib/log4j-1.2.14.jar",
                "status": "removed",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/lib/log4j-1.2.14.jar?ref=bc0192e610cd7cd5c955fe604e95505cce3b5a26",
                "deletions": 0
            },
            {
                "sha": "c930a6ab4d4b73c1a6feb9e929091205664bb340",
                "filename": "framework/base/lib/log4j-1.2.15.jar",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/fc8336c7a71e7b5c2458d34a765e6d8429f3413a/framework/base/lib/log4j-1.2.15.jar",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/fc8336c7a71e7b5c2458d34a765e6d8429f3413a/framework/base/lib/log4j-1.2.15.jar",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/lib/log4j-1.2.15.jar?ref=fc8336c7a71e7b5c2458d34a765e6d8429f3413a",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE when there are no CONFIRMMSG elements, now returns error instead\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@575479 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d544f4342b2d5f65c531e28f99679b9bd717ab4b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/ac78436b111d431e84f52e8d2cbabe2e896f8496",
        "bug_id": "ofbiz-framework_183",
        "file": [
            {
                "sha": "8e1937b37b8430d0cd7d310f5029eab8c05c3005",
                "filename": "specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d544f4342b2d5f65c531e28f99679b9bd717ab4b/specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d544f4342b2d5f65c531e28f99679b9bd717ab4b/specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java",
                "status": "modified",
                "changes": 79,
                "additions": 42,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java?ref=d544f4342b2d5f65c531e28f99679b9bd717ab4b",
                "patch": "@@ -322,55 +322,60 @@ public static Map oagisReceiveConfirmBod(DispatchContext ctx, Map context) {\n             */\n \n             List dataAreaConfirmMsgList = UtilXml.childElementList(dataAreaConfirmElement, \"ns:CONFIRMMSG\");\n+            if (UtilValidate.isEmpty(dataAreaConfirmMsgList)) {\n+                String errMsg = \"No CONFIRMMSG elements found in Confirm BOD message: \" + omiPkMap;\n+                Debug.logWarning(errMsg, module);\n+                errorMapList.add(UtilMisc.toMap(\"description\", errMsg, \"reasonCode\", \"NoCONFIRMMSGElements\"));\n+            } else {\n+                Map originalOmiPkMap = UtilMisc.toMap(\"logicalId\", dataAreaLogicalId, \"component\", dataAreaComponent, \"task\", dataAreaTask, \"referenceId\", dataAreaReferenceId);\n+                GenericValue originalOagisMsgInfo = delegator.findByPrimaryKey(\"OagisMessageInfo\", originalOmiPkMap);\n+                if (originalOagisMsgInfo != null) {\n+                    Iterator dataAreaConfirmMsgListItr = dataAreaConfirmMsgList.iterator();\n+                    while (dataAreaConfirmMsgListItr.hasNext()) {\n+                        Element dataAreaConfirmMsgElement = (Element) dataAreaConfirmMsgListItr.next();\n+                        String description = UtilXml.childElementValue(dataAreaConfirmMsgElement, \"of:DESCRIPTN\");\n+                        String reasonCode = UtilXml.childElementValue(dataAreaConfirmMsgElement, \"of:REASONCODE\");\n+                        \n+                        Map createOagisMessageErrorInfoForOriginal = FastMap.newInstance();\n+                        createOagisMessageErrorInfoForOriginal.putAll(originalOmiPkMap);\n+                        createOagisMessageErrorInfoForOriginal.put(\"reasonCode\", reasonCode);\n+                        createOagisMessageErrorInfoForOriginal.put(\"description\", description);\n+                        createOagisMessageErrorInfoForOriginal.put(\"userLogin\", userLogin);\n+                    \n+                        // this will run in the same transaction\n+                        Map oagisMsgErrorInfoResult = dispatcher.runSync(\"createOagisMessageErrorInfo\", createOagisMessageErrorInfoForOriginal);\n+                        if (ServiceUtil.isError(oagisMsgErrorInfoResult)) {\n+                            String errMsg = \"Error creating OagisMessageErrorInfo: \" + ServiceUtil.getErrorMessage(oagisMsgErrorInfoResult);\n+                            errorMapList.add(UtilMisc.toMap(\"description\", errMsg, \"reasonCode\", \"CreateOagisMessageErrorInfoServiceError\"));\n+                            Debug.logError(errMsg, module);\n+                        }\n+                    }\n+                } else {\n+                    String errMsg = \"No such message with an error was found; Not creating OagisMessageErrorInfo record(s) for original message, but saving info for this message anyway; ID info: \" + omiPkMap;\n+                    Debug.logWarning(errMsg, module);\n+                    errorMapList.add(UtilMisc.toMap(\"description\", errMsg, \"reasonCode\", \"OriginalOagisMessageInfoNotFoundError\"));\n+                }\n \n-            Map originalOmiPkMap = UtilMisc.toMap(\"logicalId\", dataAreaLogicalId, \"component\", dataAreaComponent, \"task\", dataAreaTask, \"referenceId\", dataAreaReferenceId);\n-            GenericValue originalOagisMsgInfo = delegator.findByPrimaryKey(\"OagisMessageInfo\", originalOmiPkMap);\n-            if (originalOagisMsgInfo != null) {\n+                // now attach all of the messages to the CBOD OagisMessageInfo record\n                 Iterator dataAreaConfirmMsgListItr = dataAreaConfirmMsgList.iterator();\n                 while (dataAreaConfirmMsgListItr.hasNext()) {\n                     Element dataAreaConfirmMsgElement = (Element) dataAreaConfirmMsgListItr.next();\n                     String description = UtilXml.childElementValue(dataAreaConfirmMsgElement, \"of:DESCRIPTN\");\n                     String reasonCode = UtilXml.childElementValue(dataAreaConfirmMsgElement, \"of:REASONCODE\");\n                     \n-                    Map createOagisMessageErrorInfoForOriginal = FastMap.newInstance();\n-                    createOagisMessageErrorInfoForOriginal.putAll(originalOmiPkMap);\n-                    createOagisMessageErrorInfoForOriginal.put(\"reasonCode\", reasonCode);\n-                    createOagisMessageErrorInfoForOriginal.put(\"description\", description);\n-                    createOagisMessageErrorInfoForOriginal.put(\"userLogin\", userLogin);\n-                \n-                    // this will run in the same transaction\n-                    Map oagisMsgErrorInfoResult = dispatcher.runSync(\"createOagisMessageErrorInfo\", createOagisMessageErrorInfoForOriginal);\n+                    Map createOagisMessageErrorInfoForCbod = FastMap.newInstance();\n+                    createOagisMessageErrorInfoForCbod.putAll(omiPkMap);\n+                    createOagisMessageErrorInfoForCbod.put(\"reasonCode\", reasonCode);\n+                    createOagisMessageErrorInfoForCbod.put(\"description\", description);\n+                    createOagisMessageErrorInfoForCbod.put(\"userLogin\", userLogin);\n+\n+                    // this one will also go in another transaction as the create service for the base record did too\n+                    Map oagisMsgErrorInfoResult = dispatcher.runSync(\"createOagisMessageErrorInfo\", createOagisMessageErrorInfoForCbod, 60, true);\n                     if (ServiceUtil.isError(oagisMsgErrorInfoResult)) {\n                         String errMsg = \"Error creating OagisMessageErrorInfo: \" + ServiceUtil.getErrorMessage(oagisMsgErrorInfoResult);\n-                        errorMapList.add(UtilMisc.toMap(\"description\", errMsg, \"reasonCode\", \"CreateOagisMessageErrorInfoServiceError\"));\n                         Debug.logError(errMsg, module);\n                     }\n                 }\n-            } else {\n-                String errMsg = \"No such message with an error was found; Not creating OagisMessageErrorInfo record(s) for original message, but saving info for this message anyway; ID info: \" + omiPkMap;\n-                Debug.logWarning(errMsg, module);\n-                errorMapList.add(UtilMisc.toMap(\"description\", errMsg, \"reasonCode\", \"OriginalOagisMessageInfoNotFoundError\"));\n-            }\n-\n-            // now attach all of the messages to the CBOD OagisMessageInfo record\n-            Iterator dataAreaConfirmMsgListItr = dataAreaConfirmMsgList.iterator();\n-            while (dataAreaConfirmMsgListItr.hasNext()) {\n-                Element dataAreaConfirmMsgElement = (Element) dataAreaConfirmMsgListItr.next();\n-                String description = UtilXml.childElementValue(dataAreaConfirmMsgElement, \"of:DESCRIPTN\");\n-                String reasonCode = UtilXml.childElementValue(dataAreaConfirmMsgElement, \"of:REASONCODE\");\n-                \n-                Map createOagisMessageErrorInfoForCbod = FastMap.newInstance();\n-                createOagisMessageErrorInfoForCbod.putAll(omiPkMap);\n-                createOagisMessageErrorInfoForCbod.put(\"reasonCode\", reasonCode);\n-                createOagisMessageErrorInfoForCbod.put(\"description\", description);\n-                createOagisMessageErrorInfoForCbod.put(\"userLogin\", userLogin);\n-\n-                // this one will also go in another transaction as the create service for the base record did too\n-                Map oagisMsgErrorInfoResult = dispatcher.runSync(\"createOagisMessageErrorInfo\", createOagisMessageErrorInfoForCbod, 60, true);\n-                if (ServiceUtil.isError(oagisMsgErrorInfoResult)) {\n-                    String errMsg = \"Error creating OagisMessageErrorInfo: \" + ServiceUtil.getErrorMessage(oagisMsgErrorInfoResult);\n-                    Debug.logError(errMsg, module);\n-                }\n             }\n         } catch (Throwable t) {\n             String errMsg = \"System Error processing Confirm BOD message: \" + t.toString();",
                "deletions": 37
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Small format change only in TransactionUtil; in EntityDataAssert fixed a couple of NPE cases and improved to make much more robust\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@572413 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/136b14faf5e83abf2474bd2aee8dc96ca3aa9f4b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/e0504ef18dcfe6a4830456abc5319b9481c3ab41",
        "bug_id": "ofbiz-framework_184",
        "file": [
            {
                "sha": "5701a82303d699ddb78fb1b0a4dae0635137f7a0",
                "filename": "framework/entity/src/org/ofbiz/entity/transaction/TransactionUtil.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/136b14faf5e83abf2474bd2aee8dc96ca3aa9f4b/framework/entity/src/org/ofbiz/entity/transaction/TransactionUtil.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/136b14faf5e83abf2474bd2aee8dc96ca3aa9f4b/framework/entity/src/org/ofbiz/entity/transaction/TransactionUtil.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/transaction/TransactionUtil.java?ref=136b14faf5e83abf2474bd2aee8dc96ca3aa9f4b",
                "patch": "@@ -313,7 +313,7 @@ public static Transaction suspend() throws GenericTransactionException {\n         try {\n             if (TransactionUtil.getStatus() == TransactionUtil.STATUS_ACTIVE) {\n                 TransactionManager txMgr = TransactionFactory.getTransactionManager();\n-                if (txMgr != null ) {\n+                if (txMgr != null) {\n                     pushTransactionBeginStackSave(clearTransactionBeginStack());\n                     pushSetRollbackOnlyCauseSave(clearSetRollbackOnlyCause());\n                     Transaction trans = txMgr.suspend();",
                "deletions": 1
            },
            {
                "sha": "e1a88bf3226f7b26ea78a27da3712bf1df9a81e9",
                "filename": "framework/entity/src/org/ofbiz/entity/util/EntityDataAssert.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/136b14faf5e83abf2474bd2aee8dc96ca3aa9f4b/framework/entity/src/org/ofbiz/entity/util/EntityDataAssert.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/136b14faf5e83abf2474bd2aee8dc96ca3aa9f4b/framework/entity/src/org/ofbiz/entity/util/EntityDataAssert.java",
                "status": "modified",
                "changes": 62,
                "additions": 41,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/util/EntityDataAssert.java?ref=136b14faf5e83abf2474bd2aee8dc96ca3aa9f4b",
                "patch": "@@ -82,31 +82,51 @@ public static void checkValueList(List valueList, GenericDelegator delegator, Li\n     }\n     \n     public static void checkSingleValue(GenericValue checkValue, GenericDelegator delegator, List errorMessages) throws GenericEntityException {\n-        // to check get the PK, find by that, compare all fields\n-        GenericPK checkPK = checkValue.getPrimaryKey();\n-        GenericValue currentValue = delegator.findByPrimaryKey(checkPK);\n-        if (currentValue == null) {\n-            errorMessages.add(\"Entity [\" + checkPK.getEntityName() + \"] record not found for pk: \" + checkPK);\n+        if (checkValue == null) {\n+            errorMessages.add(\"Got a value to check was null\");\n+            return;\n         }\n-\n-        ModelEntity modelEntity = currentValue.getModelEntity();\n-        List nonpkFieldNameList = modelEntity.getNoPkFieldNames();\n-        Iterator nonpkFieldNameIter = nonpkFieldNameList.iterator();\n-        while (nonpkFieldNameIter.hasNext()) {\n-            String nonpkFieldName = (String) nonpkFieldNameIter.next();\n-            // skip the fields the entity engine maintains\n-            if (ModelEntity.CREATE_STAMP_FIELD.equals(nonpkFieldName) || ModelEntity.CREATE_STAMP_TX_FIELD.equals(nonpkFieldName) ||\n-                    ModelEntity.STAMP_FIELD.equals(nonpkFieldName) || ModelEntity.STAMP_TX_FIELD.equals(nonpkFieldName)) {\n-                continue;\n+        // to check get the PK, find by that, compare all fields\n+        GenericPK checkPK = null;\n+        \n+        try {\n+            checkPK = checkValue.getPrimaryKey();\n+            GenericValue currentValue = delegator.findByPrimaryKey(checkPK);\n+            if (currentValue == null) {\n+                errorMessages.add(\"Entity [\" + checkPK.getEntityName() + \"] record not found for pk: \" + checkPK);\n+                return;\n             }\n-            \n-            Object checkField = checkValue.get(nonpkFieldName);\n-            Object currentField = currentValue.get(nonpkFieldName);\n \n-            if (checkField != null && !checkField.equals(currentField)) {\n-                errorMessages.add(\"Field [\" + modelEntity.getEntityName() + \".\" + nonpkFieldName + \n-                        \"] did not match; file value [\" + checkField + \"], db value [\" + currentField + \"] pk [\" + checkPK + \"]\");\n+            ModelEntity modelEntity = checkValue.getModelEntity();\n+            List nonpkFieldNameList = modelEntity.getNoPkFieldNames();\n+            Iterator nonpkFieldNameIter = nonpkFieldNameList.iterator();\n+            while (nonpkFieldNameIter.hasNext()) {\n+                String nonpkFieldName = (String) nonpkFieldNameIter.next();\n+                // skip the fields the entity engine maintains\n+                if (ModelEntity.CREATE_STAMP_FIELD.equals(nonpkFieldName) || ModelEntity.CREATE_STAMP_TX_FIELD.equals(nonpkFieldName) ||\n+                        ModelEntity.STAMP_FIELD.equals(nonpkFieldName) || ModelEntity.STAMP_TX_FIELD.equals(nonpkFieldName)) {\n+                    continue;\n+                }\n+                \n+                Object checkField = checkValue.get(nonpkFieldName);\n+                Object currentField = currentValue.get(nonpkFieldName);\n+\n+                if (checkField != null && !checkField.equals(currentField)) {\n+                    errorMessages.add(\"Field [\" + modelEntity.getEntityName() + \".\" + nonpkFieldName + \n+                            \"] did not match; file value [\" + checkField + \"], db value [\" + currentField + \"] pk [\" + checkPK + \"]\");\n+                }\n             }\n+        } catch (GenericEntityException e) {\n+            throw e;\n+        } catch (Throwable t) {\n+            String errMsg;\n+            if (checkPK == null) {\n+                errMsg = \"Error checking value [\" + checkValue + \"]: \" + t.toString();\n+            } else {\n+                errMsg = \"Error checking entity [\" + checkPK.getEntityName() + \"] with pk [\" + checkPK.getAllFields() + \"]: \" + t.toString();\n+            }\n+            errorMessages.add(errMsg);\n+            Debug.logError(t, errMsg, module);\n         }\n     }\n }",
                "deletions": 21
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE caused by passing in a null context, now creates an empty one for use throughout the call\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@572275 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/eba6f60b7bcb7760642affd754c0f77efaec9b9b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2b9eb0d1c15269659075c7ace38fdfa61dfeb07e",
        "bug_id": "ofbiz-framework_185",
        "file": [
            {
                "sha": "9aeb42083ed892d14903e950d76e0908e39f9883",
                "filename": "framework/service/src/org/ofbiz/service/ServiceDispatcher.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/eba6f60b7bcb7760642affd754c0f77efaec9b9b/framework/service/src/org/ofbiz/service/ServiceDispatcher.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/eba6f60b7bcb7760642affd754c0f77efaec9b9b/framework/service/src/org/ofbiz/service/ServiceDispatcher.java",
                "status": "modified",
                "changes": 8,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/service/src/org/ofbiz/service/ServiceDispatcher.java?ref=eba6f60b7bcb7760642affd754c0f77efaec9b9b",
                "patch": "@@ -242,6 +242,10 @@ public Map runSync(String localName, ModelService modelService, Map context, boo\n                 \"/\" + modelService.invoke + \"] (\" + modelService.engineName + \")\", module);\n         }\n \n+        if (context == null) {\n+            context = FastMap.newInstance();\n+        }\n+\n         // setup the result map\n         Map result = FastMap.newInstance();\n         boolean isFailure = false;\n@@ -483,6 +487,10 @@ public void runAsync(String localName, ModelService service, Map context, Generi\n             Debug.logVerbose(\"[ServiceDispatcher.runAsync] : prepareing service \" + service.name + \" [\" + service.location + \"/\" + service.invoke +\n                 \"] (\" + service.engineName + \")\", module);\n         }\n+        \n+        if (context == null) {\n+            context = FastMap.newInstance();\n+        }\n \n         // setup the result map\n         Map result = FastMap.newInstance();",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added more debug messages and fixes for NPE to the service used to import orders from eBay.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@566099 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5d5f97dacabcfb60b28076d608ce5c5af0aa737b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/5fd1bd0eebb86d5fc64ed56e8c769743908988f6",
        "bug_id": "ofbiz-framework_186",
        "file": [
            {
                "sha": "4ea3d0302edd0a61d1f291ed244a27bca113348b",
                "filename": "applications/order/src/org/ofbiz/order/order/ImportOrdersFromEbay.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5d5f97dacabcfb60b28076d608ce5c5af0aa737b/applications/order/src/org/ofbiz/order/order/ImportOrdersFromEbay.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5d5f97dacabcfb60b28076d608ce5c5af0aa737b/applications/order/src/org/ofbiz/order/order/ImportOrdersFromEbay.java",
                "status": "modified",
                "changes": 61,
                "additions": 44,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/ImportOrdersFromEbay.java?ref=5d5f97dacabcfb60b28076d608ce5c5af0aa737b",
                "patch": "@@ -808,6 +808,7 @@ private static Map createShoppingCart(GenericDelegator delegator, LocalDispatche\n             \n             // order has to be created ?\n             if (create) {\n+                Debug.logInfo(\"Importing new order from eBay\", module);\n                 // set partyId to\n                 String partyId = null;\n                 String contactMechId = \"\";\n@@ -821,6 +822,7 @@ private static Map createShoppingCart(GenericDelegator delegator, LocalDispatche\n                 // if we get a party, check its contact information.\n                 if (UtilValidate.isNotEmpty(partyAttribute)) {\n                     partyId = (String) partyAttribute.get(\"partyId\");\n+                    Debug.logInfo(\"Found existing party associated to the eBay buyer: \" + partyId, module);\n                     GenericValue party = delegator.findByPrimaryKey(\"Party\", UtilMisc.toMap(\"partyId\", partyId));\n                     \n                     contactMechId = setShippingAddressContactMech(dispatcher, delegator, party, userLogin, parameters);\n@@ -833,48 +835,68 @@ private static Map createShoppingCart(GenericDelegator delegator, LocalDispatche\n                 \n                 // create party if none exists already\n                 if (UtilValidate.isEmpty(partyId)) {\n+                    Debug.logInfo(\"Creating new party for the eBay buyer.\", module);\n                     partyId = createCustomerParty(dispatcher, (String) parameters.get(\"buyerName\"), userLogin);          \n                     if (UtilValidate.isEmpty(partyId)) {\n+                        Debug.logWarning(\"Using admin party for the eBay buyer.\", module);\n                         partyId = \"admin\";\n                     }    \n                 }   \n                            \n                 // create new party's contact information\n                 if (UtilValidate.isEmpty(contactMechId)) {\n+                    Debug.logInfo(\"Creating new postal address for party: \" + partyId, module);\n                     contactMechId = createAddress(dispatcher, partyId, userLogin, \"SHIPPING_LOCATION\", parameters);\n+                    if (UtilValidate.isEmpty(contactMechId)) {\n+                        return ServiceUtil.returnFailure(\"Unable to create postalAddress with input map: \" + parameters);\n+                    }\n+                    Debug.logInfo(\"Created postal address: \" + contactMechId, module);\n+                    Debug.logInfo(\"Creating new phone number for party: \" + partyId, module);\n                     createPartyPhone(dispatcher, partyId, (String) parameters.get(\"shippingAddressPhone\"), userLogin);\n+                    Debug.logInfo(\"Creating association to eBay buyer for party: \" + partyId, module);\n                     createEbayCustomer(dispatcher, partyId, (String) parameters.get(\"ebayUserIdBuyer\"), (String) parameters.get(\"eiasTokenBuyer\"), userLogin);\n                     String emailBuyer = (String) parameters.get(\"emailBuyer\");\n-                    if (!(emailBuyer.equals(\"\") || emailBuyer.equalsIgnoreCase(\"Invalid Request\"))) {\n+                    if (UtilValidate.isNotEmpty(emailBuyer) && !emailBuyer.equalsIgnoreCase(\"Invalid Request\")) {\n+                        Debug.logInfo(\"Creating new email for party: \" + partyId, module);\n                         createPartyEmail(dispatcher, partyId, emailBuyer, userLogin);\n-                    }       \n+                    }                        \n                 } \n \n+                Debug.logInfo(\"Setting cart roles for party: \" + partyId, module);\n                 cart.setBillToCustomerPartyId(partyId);\n                 cart.setPlacingCustomerPartyId(partyId);\n                 cart.setShipToCustomerPartyId(partyId);\n                 cart.setEndUserCustomerPartyId(partyId);\n                 \n+                Debug.logInfo(\"Setting contact mech in cart: \" + contactMechId, module);\n                 cart.setShippingContactMechId(contactMechId);\n                 cart.setMaySplit(Boolean.FALSE);\n                 \n+                Debug.logInfo(\"Setting shipment method: \" + (String) parameters.get(\"shippingService\"), module);\n                 setShipmentMethodType(cart, (String) parameters.get(\"shippingService\"));\n                 \n                 cart.makeAllShipGroupInfos();\n \n                 // create the order\n+                Debug.logInfo(\"Creating CheckOutHelper.\", module);\n                 CheckOutHelper checkout = new CheckOutHelper(dispatcher, delegator, cart);\n+                Debug.logInfo(\"Creating order.\", module);\n                 Map orderCreate = checkout.createOrder(userLogin);\n                 \n                 String orderId = (String)orderCreate.get(\"orderId\");\n+                Debug.logInfo(\"Created order with id: \" + orderId, module);\n                 \n                 // approve the order\n                 if (UtilValidate.isNotEmpty(orderId)) {\n+                    Debug.logInfo(\"Approving order with id: \" + orderId, module);\n                     boolean approved = OrderChangeHelper.approveOrder(dispatcher, userLogin, orderId);\n+                    Debug.logInfo(\"Order approved with result: \" + approved, module);\n                     \n                     // create the payment from the preference\n                     if (approved) {\n+                        Debug.logInfo(\"Creating payment for approved order.\", module);\n                         createPaymentFromPaymentPreferences(delegator, dispatcher, userLogin, orderId, externalId, cart.getOrderDate(), partyId);\n+                        Debug.logInfo(\"Payment created.\", module);\n                     }\n                 }\n             }\n@@ -996,6 +1018,7 @@ private static String createCustomerParty(LocalDispatcher dispatcher, String nam\n     \n     private static String createAddress(LocalDispatcher dispatcher, String partyId, GenericValue userLogin, \n                                        String contactMechPurposeTypeId, Map address) {\n+        Debug.logInfo(\"Creating postal address with input map: \" + address, module);\n         String contactMechId = null;\n         try {\n             Map context = FastMap.newInstance();\n@@ -1005,8 +1028,8 @@ private static String createAddress(LocalDispatcher dispatcher, String partyId,\n             context.put(\"userLogin\", userLogin);\n             context.put(\"contactMechPurposeTypeId\", contactMechPurposeTypeId);       \n             \n-            String country = ((String)address.get(\"shippingAddressCountry\")).toUpperCase();\n-            String state = ((String)address.get(\"shippingAddressStateOrProvince\")).toUpperCase();\n+            String country = (String)address.get(\"shippingAddressCountry\");\n+            String state = (String)address.get(\"shippingAddressStateOrProvince\");\n             String city = (String)address.get(\"shippingAddressCityName\");\n             correctCityStateCountry(dispatcher, context, city, state, country);\n \n@@ -1021,18 +1044,25 @@ private static String createAddress(LocalDispatcher dispatcher, String partyId,\n     private static void correctCityStateCountry(LocalDispatcher dispatcher, Map map, String city, String state, String country) {\n         try { \n             Debug.logInfo(\"correctCityStateCountry params: \" + city + \", \" + state + \", \" + country, module);\n-            String geoId = \"USA\";\n-            if (country.indexOf(\"UNITED STATES\") > -1 || country.indexOf(\"USA\") > -1)\n+            if (UtilValidate.isEmpty(country)) {\n                 country = \"US\";\n+            }\n+            country = country.toUpperCase();\n+            if (country.indexOf(\"UNITED STATES\") > -1 || country.indexOf(\"USA\") > -1) {\n+                country = \"US\";\n+            }\n             Debug.logInfo(\"GeoCode: \" + country, module);\n             Map outMap = getCountryGeoId(dispatcher.getDelegator(), country);\n-            geoId = (String)outMap.get(\"geoId\");\n+            String geoId = (String)outMap.get(\"geoId\");\n+            if (UtilValidate.isEmpty(geoId)) {\n+                geoId = \"USA\";\n+            }\n             map.put(\"countryGeoId\", geoId);\n             Debug.logInfo(\"Country geoid: \" + geoId, module);\n             if (geoId.equals(\"USA\") || geoId.equals(\"CAN\")) {\n-                if (state.length() > 0) {\n-                    map.put(\"stateProvinceGeoId\", state);\n-                }   \n+                if (UtilValidate.isNotEmpty(state)) {\n+                    map.put(\"stateProvinceGeoId\", state.toUpperCase());\n+                }\n                 map.put(\"city\", city);\n             } else {\n                 map.put(\"city\", city + \", \" + state);\n@@ -1122,12 +1152,9 @@ private static Map getCountryGeoId(GenericDelegator delegator, String geoCode) {\n         try {\n             Debug.logInfo(\"geocode: \" + geoCode, module);\n             \n-            List geoEntities = delegator.findByAnd(\"Geo\", UtilMisc.toMap(\"geoCode\", geoCode.toUpperCase(), \"geoTypeId\", \"COUNTRY\"));\n-            if (geoEntities != null && geoEntities.size() > 0) {\n-                geo = (GenericValue)geoEntities.get(0);\n-                Debug.logInfo(\"Found a geo entity \" + geo, module);\n-            }\n-            else {\n+            geo = EntityUtil.getFirst(delegator.findByAnd(\"Geo\", UtilMisc.toMap(\"geoCode\", geoCode.toUpperCase(), \"geoTypeId\", \"COUNTRY\")));\n+            Debug.logInfo(\"Found a geo entity \" + geo, module);\n+            if (UtilValidate.isEmpty(geo)) {\n                 geo = delegator.makeValue(\"Geo\", null);\n                 geo.set(\"geoId\", geoCode + \"_IMPORTED\");\n                 geo.set(\"geoTypeId\", \"COUNTRY\");\n@@ -1146,7 +1173,7 @@ private static Map getCountryGeoId(GenericDelegator delegator, String geoCode) {\n         Map result = ServiceUtil.returnSuccess();\n         result.put(\"geoId\", (String)geo.get(\"geoId\"));\n         return result;\n-    }   \n+    }\n     \n     private static GenericValue externalOrderExists(GenericDelegator delegator, String externalId, String transactionId) throws GenericEntityException {\n         Debug.logInfo(\"Checking for existing externalId: \" + externalId +\" and transactionId: \" + transactionId, module);",
                "deletions": 17
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added code to handle bad shipmentIds coming in and return an error message instead of an NPE for the Show Shipment incoming message\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@562591 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/687504ed3ecf594f10b88c24428963ba5c7955a3",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b15d66c7743a362327fcc77e43bc588c1a68e9f0",
        "bug_id": "ofbiz-framework_187",
        "file": [
            {
                "sha": "61a3f7e236079a44757eeb87755a4a4b6e875a85",
                "filename": "specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/687504ed3ecf594f10b88c24428963ba5c7955a3/specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/687504ed3ecf594f10b88c24428963ba5c7955a3/specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java",
                "status": "modified",
                "changes": 19,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java?ref=687504ed3ecf594f10b88c24428963ba5c7955a3",
                "patch": "@@ -115,7 +115,7 @@ public static Map showShipment(DispatchContext ctx, Map context) {\n         String confirmation = UtilXml.childElementValue(senderElement, \"of:CONFIRMATION\"); // of\n         String authId = UtilXml.childElementValue(senderElement, \"of:AUTHID\"); // of\n \n-        Map result = new HashMap();\n+        Map result = FastMap.newInstance();\n         result.put(\"logicalId\", logicalId);\n         result.put(\"component\", component);\n         result.put(\"task\", task);\n@@ -163,13 +163,22 @@ public static Map showShipment(DispatchContext ctx, Map context) {\n         try {\n             shipment = delegator.findByPrimaryKey(\"Shipment\", UtilMisc.toMap(\"shipmentId\", shipmentId));\n         } catch (GenericEntityException e) {\n-            String errMsg = \"Error Shipment from database: \"+ e.toString();\n+            String errMsg = \"Error getting Shipment from database: \"+ e.toString();\n+            Debug.logInfo(e, errMsg, module);\n             errorMapList.add(UtilMisc.toMap(\"description\", errMsg, \"reasonCode\", \"GenericEntityException\"));\n-            Debug.logInfo(e, module);\n-            result.putAll(ServiceUtil.returnError(errMsg));\n+        }\n+        \n+        if (shipment == null) {\n+            String errMsg = \"Could not find Shipment id ID [\" + shipmentId + \"]\";\n+            errorMapList.add(UtilMisc.toMap(\"description\", errMsg, \"reasonCode\", \"ShipmentIdNotValid\"));\n+        }\n+        \n+        if (errorMapList.size() > 0) {\n+            result.putAll(ServiceUtil.returnError(\"Errors found getting shipment information for incoming Show Shipment message\"));\n             result.put(\"errorMapList\", errorMapList);\n             return result;\n-        }                    \n+        }\n+\n         String shipGroupSeqId = shipment.getString(\"primaryShipGroupSeqId\");                \n         String originFacilityId = shipment.getString(\"originFacilityId\");                              \n           ",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Changed this to fix an NPE when the post() method with no arguments is called\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@551411 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6f31121a2b5f90db4fe674c4dc9a6430e34c9de8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6cd01708ad0d1e81a4aa90213dd1a353c4e67b74",
        "bug_id": "ofbiz-framework_188",
        "file": [
            {
                "sha": "f04c8b9936e1c6db7cc12a6d151ae317a69873ff",
                "filename": "framework/base/src/base/org/ofbiz/base/util/HttpClient.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6f31121a2b5f90db4fe674c4dc9a6430e34c9de8/framework/base/src/base/org/ofbiz/base/util/HttpClient.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6f31121a2b5f90db4fe674c4dc9a6430e34c9de8/framework/base/src/base/org/ofbiz/base/util/HttpClient.java",
                "status": "modified",
                "changes": 6,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/base/org/ofbiz/base/util/HttpClient.java?ref=6f31121a2b5f90db4fe674c4dc9a6430e34c9de8",
                "patch": "@@ -451,8 +451,10 @@ private InputStream sendHttpRequestStream(String method, boolean overrideTrust)\n                 DataOutputStream out = new DataOutputStream(con.getOutputStream());\n                 if (Debug.verboseOn() || debug) Debug.log(\"Opened output stream\", module);\n \n-                out.writeBytes(arguments);\n-                if (Debug.verboseOn() || debug) Debug.log(\"Wrote arguements (parameters) : \" + arguments, module);\n+                if (arguments != null) {\n+                    out.writeBytes(arguments);\n+                    if (Debug.verboseOn() || debug) Debug.log(\"Wrote arguements (parameters) : \" + arguments, module);\n+                }\n \n                 out.flush();\n                 out.close();",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied patch from Stefan Huehner OFBIZ-730 to fix some very bad conditions that could cause NPE.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@550233 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f9ccd146700e831963f7f2622f0b24bfc100261f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3b35e6b47b2406a8267a3269d6e31464791d5568",
        "bug_id": "ofbiz-framework_189",
        "file": [
            {
                "sha": "398db721c907a03827c01c6d029deef966fea0c1",
                "filename": "applications/accounting/src/org/ofbiz/accounting/thirdparty/authorizedotnet/AIMPaymentServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f9ccd146700e831963f7f2622f0b24bfc100261f/applications/accounting/src/org/ofbiz/accounting/thirdparty/authorizedotnet/AIMPaymentServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f9ccd146700e831963f7f2622f0b24bfc100261f/applications/accounting/src/org/ofbiz/accounting/thirdparty/authorizedotnet/AIMPaymentServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/thirdparty/authorizedotnet/AIMPaymentServices.java?ref=f9ccd146700e831963f7f2622f0b24bfc100261f",
                "patch": "@@ -300,7 +300,7 @@ private static Properties buildAIMProperties(Map context) {\n         }\n \n         if (ver.equals(\"3.1\")) {\n-            if (tranKey == null && tranKey.length() <= 0) {\n+            if (tranKey == null || tranKey.length() <= 0) {\n                 Debug.logInfo(\"Trankey property required for version 3.1 reverting to 3.0\",module);\n                 ver = \"3.0\";\n             }",
                "deletions": 1
            },
            {
                "sha": "8322dc96e09e2dd06d875f54f5c1e8e915fe203d",
                "filename": "applications/content/src/org/ofbiz/content/content/ContentWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f9ccd146700e831963f7f2622f0b24bfc100261f/applications/content/src/org/ofbiz/content/content/ContentWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f9ccd146700e831963f7f2622f0b24bfc100261f/applications/content/src/org/ofbiz/content/content/ContentWorker.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/content/ContentWorker.java?ref=f9ccd146700e831963f7f2622f0b24bfc100261f",
                "patch": "@@ -487,7 +487,7 @@ public static boolean traverseSubContent(Map ctx) {\n                     break;\n                 } else {\n                     Boolean isFollow = (Boolean)currentNode.get(\"isFollow\");\n-                    if (isFollow != null || isFollow.booleanValue()) {\n+                    if (isFollow != null && isFollow.booleanValue()) {\n                         nodeTrail.add(currentNode);\n                         boolean foundPick = traverseSubContent(ctx);\n                         if (foundPick) {",
                "deletions": 1
            },
            {
                "sha": "7cde255fc1d780e6a2dfda7c68dda0adca914a71",
                "filename": "applications/order/src/org/ofbiz/order/shoppinglist/ShoppingListEvents.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f9ccd146700e831963f7f2622f0b24bfc100261f/applications/order/src/org/ofbiz/order/shoppinglist/ShoppingListEvents.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f9ccd146700e831963f7f2622f0b24bfc100261f/applications/order/src/org/ofbiz/order/shoppinglist/ShoppingListEvents.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppinglist/ShoppingListEvents.java?ref=f9ccd146700e831963f7f2622f0b24bfc100261f",
                "patch": "@@ -552,7 +552,7 @@ public static List getItemSurveyInfo(GenericValue item) {\n             Debug.logError(e, module);\n         }\n \n-        if (surveyResp != null || surveyResp.size() > 0) {\n+        if (surveyResp != null && surveyResp.size() > 0) {\n             Iterator respIt = surveyResp.iterator();\n             while (respIt.hasNext()) {\n                 GenericValue resp = (GenericValue) respIt.next();",
                "deletions": 1
            },
            {
                "sha": "834b033dbc0230aa652f7eba01d8beea8da07263",
                "filename": "framework/common/src/org/ofbiz/common/login/LoginServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f9ccd146700e831963f7f2622f0b24bfc100261f/framework/common/src/org/ofbiz/common/login/LoginServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f9ccd146700e831963f7f2622f0b24bfc100261f/framework/common/src/org/ofbiz/common/login/LoginServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/src/org/ofbiz/common/login/LoginServices.java?ref=f9ccd146700e831963f7f2622f0b24bfc100261f",
                "patch": "@@ -548,7 +548,7 @@ public static Map updateUserLoginId(DispatchContext ctx, Map context) {\n \n         // security: don't create a user login if the specified partyId (if not empty) already exists\n         // unless the logged in user has permission to do so (same partyId or PARTYMGR_CREATE)\n-        if (partyId != null || partyId.length() > 0) {\n+        if (partyId != null && partyId.length() > 0) {\n             //GenericValue party = null;\n             //try {\n             //    party = delegator.findByPrimaryKey(\"Party\", UtilMisc.toMap(\"partyId\", partyId));",
                "deletions": 1
            },
            {
                "sha": "6e8abbd98166f4de5b74acabea31253797198f20",
                "filename": "framework/entity/src/org/ofbiz/entity/condition/EntityJoinOperator.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f9ccd146700e831963f7f2622f0b24bfc100261f/framework/entity/src/org/ofbiz/entity/condition/EntityJoinOperator.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f9ccd146700e831963f7f2622f0b24bfc100261f/framework/entity/src/org/ofbiz/entity/condition/EntityJoinOperator.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/condition/EntityJoinOperator.java?ref=f9ccd146700e831963f7f2622f0b24bfc100261f",
                "patch": "@@ -156,7 +156,7 @@ public void validateSql(ModelEntity modelEntity, EntityCondition lhs, EntityCond\n     }\n \n     public void validateSql(ModelEntity modelEntity, List conditionList) throws GenericModelException {\n-        if (conditionList == null && conditionList.size() == 0)\n+        if (conditionList == null || conditionList.size() == 0)\n             throw new GenericModelException(\"Empty list for joining\");\n         for (int i = 0; i < conditionList.size(); i++) {\n             Object condObj = conditionList.get(i);",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE reported by Michael Imhof, based on patch in Jira #OFBIZ-742\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@539790 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/4f6984e8809606f5acc9c3394a2fbec3f173dbb4",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c7bbd712bf54aef4fcf1427766b960a38b71305d",
        "bug_id": "ofbiz-framework_190",
        "file": [
            {
                "sha": "4f573b6cde950f6d2a96a30e190a752c720454e5",
                "filename": "framework/entity/src/org/ofbiz/entity/jdbc/SqlJdbcUtil.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/4f6984e8809606f5acc9c3394a2fbec3f173dbb4/framework/entity/src/org/ofbiz/entity/jdbc/SqlJdbcUtil.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/4f6984e8809606f5acc9c3394a2fbec3f173dbb4/framework/entity/src/org/ofbiz/entity/jdbc/SqlJdbcUtil.java",
                "status": "modified",
                "changes": 6,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/jdbc/SqlJdbcUtil.java?ref=4f6984e8809606f5acc9c3394a2fbec3f173dbb4",
                "patch": "@@ -756,7 +756,11 @@ public static void setValue(SQLProcessor sqlP, ModelField modelField, String ent\n                 break;\n \n             case 14:\n-                sqlP.setValue(new java.sql.Date(((java.util.Date) fieldValue).getTime()));\n+                if (fieldValue != null) {\n+                    sqlP.setValue(new java.sql.Date(((java.util.Date) fieldValue).getTime()));\n+                } else {\n+                    sqlP.setValue((java.sql.Date) null);\n+                }\n                 break;\n \n             case 15:",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "If a entity to extend does not exist: NPE replaced with exception and message\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@539691 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/7b47d7de44ef8b33fca88df2b4385dd6116d4478",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a348356400499f23c0ef2c29bb3f046bee23cecf",
        "bug_id": "ofbiz-framework_191",
        "file": [
            {
                "sha": "30c0e5da1eb27ca074413717c8ada5737dbea6a6",
                "filename": "framework/entity/src/org/ofbiz/entity/model/ModelReader.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7b47d7de44ef8b33fca88df2b4385dd6116d4478/framework/entity/src/org/ofbiz/entity/model/ModelReader.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7b47d7de44ef8b33fca88df2b4385dd6116d4478/framework/entity/src/org/ofbiz/entity/model/ModelReader.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/model/ModelReader.java?ref=7b47d7de44ef8b33fca88df2b4385dd6116d4478",
                "patch": "@@ -256,6 +256,7 @@ public Map getEntityCache() throws GenericEntityException {\n                         Element extendEntityElement = (Element) tempExtendEntityElementIter.next();\n                         String entityName = UtilXml.checkEmpty(extendEntityElement.getAttribute(\"entity-name\"));\n                         ModelEntity modelEntity = (ModelEntity) entityCache.get(entityName);\n+                        if (modelEntity == null) throw new GenericEntityConfException(\"Entity to extend does not exist: \" + entityName);\n                         modelEntity.addExtendEntity(this, extendEntityElement);\n                     }\n ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Quick fixes for NPE (but the code needs probably a deeper review) reported by Arno Peters in OFBIZ-922\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@538110 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3841ac940dea4120f28f8973f847e7a554619d75",
        "parent": "https://github.com/apache/ofbiz-framework/commit/78a402197378bfe6cbced56cdae2dd71803a7af1",
        "bug_id": "ofbiz-framework_192",
        "file": [
            {
                "sha": "542100e5955bf946580dc960f0fca1f1e281ddc7",
                "filename": "applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3841ac940dea4120f28f8973f847e7a554619d75/applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3841ac940dea4120f28f8973f847e7a554619d75/applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl?ref=3841ac940dea4120f28f8973f847e7a554619d75",
                "patch": "@@ -416,14 +416,14 @@ under the License.\n               <#assign mimeType = content.getRelatedOneCache(\"MimeType\")?if_exists>\n               <#assign status = content.getRelatedOneCache(\"StatusItem\")>\n               <tr>\n-                <td><a href=\"<@ofbizUrl>img/${content.contentName}?imgId=${content.dataResourceId}</@ofbizUrl>\" class=\"buttontext\">${content.contentId}</a>\n+                <td><a href=\"<@ofbizUrl>img/${content.contentName?if_exists}?imgId=${content.dataResourceId}</@ofbizUrl>\" class=\"buttontext\">${content.contentId}</a>\n                 <td><div class=\"tabletext\">${content.contentName?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${(contentType.get(\"description\",locale))?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${mimeType?if_exists.description?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${(status.get(\"description\",locale))?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${contentRole.fromDate?if_exists}</div></td>\n                 <td align=\"right\">\n-                  <a href=\"<@ofbizUrl>img/${content.contentName}?imgId=${content.dataResourceId}</@ofbizUrl>\" class=\"buttontext\">${uiLabelMap.CommonView}</a>\n+                  <a href=\"<@ofbizUrl>img/${content.contentName?if_exists}?imgId=${content.dataResourceId}</@ofbizUrl>\" class=\"buttontext\">${uiLabelMap.CommonView}</a>\n                   <a href=\"<@ofbizUrl>removePartyAsset?contentId=${contentRole.contentId}&partyId=${contentRole.partyId}&roleTypeId=${contentRole.roleTypeId}</@ofbizUrl>\" class=\"buttontext\">${uiLabelMap.CommonRemove}</a>\n                 </td>\n               </tr>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE in new finAccountId checking; now we can complete a checkout again\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@533447 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/12334d1113164642d4a994e58bae2a68707a5c85",
        "parent": "https://github.com/apache/ofbiz-framework/commit/9d3e9e8b2c280dfddb8fc9d9c8573a8d05744bb6",
        "bug_id": "ofbiz-framework_193",
        "file": [
            {
                "sha": "4e9312af93bc64329a032267b1e4d584bf47bd0e",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/12334d1113164642d4a994e58bae2a68707a5c85/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/12334d1113164642d4a994e58bae2a68707a5c85/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 10,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java?ref=12334d1113164642d4a994e58bae2a68707a5c85",
                "patch": "@@ -4319,9 +4319,15 @@ public List makeOrderPaymentInfos(GenericDelegator delegator) {\n         public int compareTo(Object o) {\n             CartPaymentInfo that = (CartPaymentInfo) o;\n             Debug.logInfo(\"Compare [\" + this.toString() + \"] to [\" + that.toString() + \"]\", module);\n-            if (!this.finAccountId.equals(that.finAccountId)) {\n-                return -1;    \n+\n+            if (this.finAccountId == null) {\n+                if (that.finAccountId != null) {\n+                    return -1;\n+                }\n+            } else if (!this.finAccountId.equals(that.finAccountId)) {\n+                return -1;\n             }\n+            \n             if (this.paymentMethodId != null) {\n                 if (that.paymentMethodId == null) {\n                     return 1;",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed npe when in the cart there is a non product item.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@533356 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c5d1e0ac348ab0a698121a78a29e3bb795e40903",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b991c8db300bde58588b9747b9a5f6a454a6805f",
        "bug_id": "ofbiz-framework_194",
        "file": [
            {
                "sha": "49c2f69abce68e45446677acdc65b874e541f7f8",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c5d1e0ac348ab0a698121a78a29e3bb795e40903/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c5d1e0ac348ab0a698121a78a29e3bb795e40903/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java?ref=c5d1e0ac348ab0a698121a78a29e3bb795e40903",
                "patch": "@@ -3728,6 +3728,9 @@ public void createDropShipGroups(LocalDispatcher dispatcher) throws CartItemModi\n                 double dropShipQuantity = 0;\n \n                 GenericValue product = cartItem.getProduct();\n+                if (product == null) {\n+                    continue;\n+                }\n                 String productId = product.getString(\"productId\");\n                 String requirementMethodEnumId = product.getString(\"requirementMethodEnumId\");\n ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "This should hopefully fix the npe reported in OFBIZ-922 by Arno Peters\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@533302 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ba62e0d495a5f5d5657322f1ad1b19d0f9cd4ec5",
        "parent": "https://github.com/apache/ofbiz-framework/commit/7676f731e7f3c1859c71b96730157e99cc1bf019",
        "bug_id": "ofbiz-framework_195",
        "file": [
            {
                "sha": "9afb5354f93f1041f212e376936fb431abd0b261",
                "filename": "applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ba62e0d495a5f5d5657322f1ad1b19d0f9cd4ec5/applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ba62e0d495a5f5d5657322f1ad1b19d0f9cd4ec5/applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/webapp/ecommerce/customer/viewprofile.ftl?ref=ba62e0d495a5f5d5657322f1ad1b19d0f9cd4ec5",
                "patch": "@@ -413,13 +413,13 @@ under the License.\n             <#list partyContent as contentRole>\n               <#assign content = contentRole.getRelatedOne(\"Content\")>\n               <#assign contentType = content.getRelatedOneCache(\"ContentType\")>\n-              <#assign mimeType = content.getRelatedOneCache(\"MimeType\")>\n+              <#assign mimeType = content.getRelatedOneCache(\"MimeType\")?if_exists>\n               <#assign status = content.getRelatedOneCache(\"StatusItem\")>\n               <tr>\n                 <td><a href=\"<@ofbizUrl>img/${content.contentName}?imgId=${content.dataResourceId}</@ofbizUrl>\" class=\"buttontext\">${content.contentId}</a>\n                 <td><div class=\"tabletext\">${content.contentName?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${(contentType.get(\"description\",locale))?if_exists}</div></td>\n-                <td><div class=\"tabletext\">${(mimeType.description)?if_exists}</div></td>\n+                <td><div class=\"tabletext\">${mimeType?if_exists.description?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${(status.get(\"description\",locale))?if_exists}</div></td>\n                 <td><div class=\"tabletext\">${contentRole.fromDate?if_exists}</div></td>\n                 <td align=\"right\">",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied patch from Guido Amarilla (OFBIZ-912) with checks to prevent NPE for null arrays of CC and BCC addresses.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@530980 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/77230925968d4130daafea872754ec644c15bc94",
        "parent": "https://github.com/apache/ofbiz-framework/commit/37ab8cfb6e8c0d97b60d47713c0e5fb1791f7f7e",
        "bug_id": "ofbiz-framework_196",
        "file": [
            {
                "sha": "991c87c595f0ebef5bb173d283299bf0d2e93572",
                "filename": "applications/content/src/org/ofbiz/content/email/EmailServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/77230925968d4130daafea872754ec644c15bc94/applications/content/src/org/ofbiz/content/email/EmailServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/77230925968d4130daafea872754ec644c15bc94/applications/content/src/org/ofbiz/content/email/EmailServices.java",
                "status": "modified",
                "changes": 12,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/email/EmailServices.java?ref=77230925968d4130daafea872754ec644c15bc94",
                "patch": "@@ -832,11 +832,15 @@ public static Map storeIncomingEmail(DispatchContext dctx, Map context) {\n             for (int x = 0 ; x < addressesTo.length ; x++) {\n                 emailAddressesTo.add(((InternetAddress) addressesTo[x]).getAddress());\n             }\n-            for (int x = 0 ; x < addressesCC.length ; x++) {\n-                emailAddressesCC.add(((InternetAddress) addressesCC[x]).getAddress());\n+            if (addressesCC != null) {\n+                for (int x = 0 ; x < addressesCC.length ; x++) {\n+                    emailAddressesCC.add(((InternetAddress) addressesCC[x]).getAddress());\n+                }\n             }\n-            for (int x = 0 ; x < addressesBCC.length ; x++) {\n-                emailAddressesBCC.add(((InternetAddress) addressesBCC[x]).getAddress());\n+            if (addressesBCC != null) {\n+                for (int x = 0 ; x < addressesBCC.length ; x++) {\n+                    emailAddressesBCC.add(((InternetAddress) addressesBCC[x]).getAddress());\n+                }\n             }\n             String fromString = StringUtil.join(UtilMisc.toList(emailAddressesFrom), \",\");\n             String toString = StringUtil.join(UtilMisc.toList(emailAddressesTo), \",\");",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied slightly (different patch) from Stefan Huehner to fix wrong npe check. OFBIZ-776\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@519589 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a3d44a07db86ae0ddbe56f0909ff3124ab1dd6ce",
        "parent": "https://github.com/apache/ofbiz-framework/commit/cc4e08c7dbbf07562b7295ef4f9bdfd19fc29ef0",
        "bug_id": "ofbiz-framework_197",
        "file": [
            {
                "sha": "0e7635e61d31fa39c3b6e8f28d5f12c5d1fb2d17",
                "filename": "framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a3d44a07db86ae0ddbe56f0909ff3124ab1dd6ce/framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a3d44a07db86ae0ddbe56f0909ff3124ab1dd6ce/framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/model/ModelViewEntity.java?ref=a3d44a07db86ae0ddbe56f0909ff3124ab1dd6ce",
                "patch": "@@ -317,8 +317,8 @@ public ModelEntity getAliasedEntity(String entityAlias, ModelReader modelReader)\n     \n     public ModelField getAliasedField(ModelEntity aliasedEntity, String field, ModelReader modelReader) {\n         ModelField aliasedField = aliasedEntity.getField(field);\n-        if (aliasedEntity == null) {\n-            Debug.logError(\"[ModelViewEntity.populateFields] ERROR: could not find ModelEntity for entity name: \" + aliasedEntity.getEntityName(), module);\n+        if (aliasedField == null) {\n+            Debug.logError(\"[ModelViewEntity.populateFields] ERROR: could not find ModelField for entity name: \" + aliasedEntity.getEntityName() + \" and field: \" + field, module);\n             return null;\n         }\n         return aliasedField;",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "if no quantity provided on the requirement service had an NPE, now quantity of 1 assumed\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@510846 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d593173d5265c9288894d458e3ea2a93da5a24af",
        "parent": "https://github.com/apache/ofbiz-framework/commit/30b4aaea341a70a5c30e48b203f350232fb59bc7",
        "bug_id": "ofbiz-framework_198",
        "file": [
            {
                "sha": "32bbbf5d8e47eb7ba0c6708f299e5f684977f43b",
                "filename": "applications/order/src/org/ofbiz/order/requirement/RequirementServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d593173d5265c9288894d458e3ea2a93da5a24af/applications/order/src/org/ofbiz/order/requirement/RequirementServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d593173d5265c9288894d458e3ea2a93da5a24af/applications/order/src/org/ofbiz/order/requirement/RequirementServices.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/requirement/RequirementServices.java?ref=d593173d5265c9288894d458e3ea2a93da5a24af",
                "patch": "@@ -156,6 +156,7 @@ public static final Map getRequirementsForSupplier(DispatchContext ctx, Map cont\n                 }\n \n                 // keep a running total of distinct products and quantity to order\n+                if (requirement.getDouble(\"quantity\") == null) requirement.put(\"quantity\", new Double(\"1\")); // default quantity = 1\n                 quantity += requirement.getDouble(\"quantity\").doubleValue();\n                 products.add(productId);\n ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added checks to avoid NPE: this should fix the bug reported in anonymous checkout by Rohit Sureka in OFBIZ-561.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@489992 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d1039ca8396c9d18ee4f7e585ba626d3af76cf97",
        "parent": "https://github.com/apache/ofbiz-framework/commit/ad8d6c0674dcb0bcce88f74654fbc9f5de620b0d",
        "bug_id": "ofbiz-framework_199",
        "file": [
            {
                "sha": "b6ed7eb2a1b7c98e445188da2fd583a1278ec8e6",
                "filename": "applications/ecommerce/script/org/ofbiz/ecommerce/customer/CustomerEvents.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d1039ca8396c9d18ee4f7e585ba626d3af76cf97/applications/ecommerce/script/org/ofbiz/ecommerce/customer/CustomerEvents.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d1039ca8396c9d18ee4f7e585ba626d3af76cf97/applications/ecommerce/script/org/ofbiz/ecommerce/customer/CustomerEvents.xml",
                "status": "modified",
                "changes": 16,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/script/org/ofbiz/ecommerce/customer/CustomerEvents.xml?ref=d1039ca8396c9d18ee4f7e585ba626d3af76cf97",
                "patch": "@@ -804,9 +804,11 @@ under the License.\n            </call-object-method>\n \n            <set field=\"maySplit\" from-field=\"parameters.may_split\" type=\"Boolean\"/>\n-           <call-object-method obj-field-name=\"cart\" method-name=\"setMaySplit\">\n-               <field field-name=\"maySplit\" type=\"Boolean\"/>\n-           </call-object-method>\n+           <if-not-empty field-name=\"maySplit\">\n+               <call-object-method obj-field-name=\"cart\" method-name=\"setMaySplit\">\n+                   <field field-name=\"maySplit\" type=\"Boolean\"/>\n+               </call-object-method>\n+           </if-not-empty>\n \n            <set field=\"shippingInstruction\" from-field=\"parameters.shipping_instructions\" type=\"String\"/>\n            <if-not-empty field-name=\"shippingInstruction\">\n@@ -818,9 +820,11 @@ under the License.\n            <set field=\"correspondingPoId\" from-field=\"parameters.corresponding_po_id\"/>\n \n            <set field=\"isGift\" from-field=\"parameters.is_gift\" type=\"Boolean\"/>\n-           <call-object-method obj-field-name=\"cart\" method-name=\"setIsGift\">\n-               <field field-name=\"isGift\" type=\"Boolean\"/>\n-           </call-object-method>\n+           <if-not-empty field-name=\"isGift\">\n+               <call-object-method obj-field-name=\"cart\" method-name=\"setIsGift\">\n+                   <field field-name=\"isGift\" type=\"Boolean\"/>\n+               </call-object-method>\n+           </if-not-empty>\n \n            <set field=\"giftMessage\" from-field=\"parameters.gift_message\" type=\"String\"/>\n            <if-not-empty field-name=\"giftMessage\">",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "various improvements for processing incoming email to avoid NPE at bad content of emails.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@477480 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/794d4ee7c03ba2b0ef3d548f09036e85b7be825a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/bdb32342dd5089f0dc830fe979723ce5ea4cd89b",
        "bug_id": "ofbiz-framework_200",
        "file": [
            {
                "sha": "98b6de9fe5638f72222905515b26dc9c636275a2",
                "filename": "applications/content/src/org/ofbiz/content/email/EmailServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/794d4ee7c03ba2b0ef3d548f09036e85b7be825a/applications/content/src/org/ofbiz/content/email/EmailServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/794d4ee7c03ba2b0ef3d548f09036e85b7be825a/applications/content/src/org/ofbiz/content/email/EmailServices.java",
                "status": "modified",
                "changes": 14,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/email/EmailServices.java?ref=794d4ee7c03ba2b0ef3d548f09036e85b7be825a",
                "patch": "@@ -612,17 +612,15 @@ private static List buildListOfPartyInfoFromEmailAddresses(Address [] addresses,\n                     emailAddress = (InternetAddress)addr;\n                     \n                     if (!UtilValidate.isEmpty(emailAddress)) {\n-                        map = new HashMap();\n-                        map.put(\"address\", emailAddress.getAddress());\n-                        map.put(\"userLogin\", userLogin);\n-                        result = dispatcher.runSync(\"findPartyFromEmailAddress\", map);\n-                        \n-                        tempResults.add(result);\n+                        result = dispatcher.runSync(\"findPartyFromEmailAddress\", \n+                        \t\tUtilMisc.toMap(\"address\", emailAddress.getAddress(), \"userLogin\", userLogin));\n+                        if (result.get(\"partyId\") != null) {\n+                        \ttempResults.add(result);\n+                        }\n                     }\n                 }    \n             }\n         }\n-        \n         return tempResults;\n     }   \n     \n@@ -707,7 +705,7 @@ public static Map storeIncomingEmail(DispatchContext dctx, Map context) {\n             String spamHeaderName = UtilProperties.getPropertyValue(\"general.properties\", \"mail.spam.name\", \"N\");\n             String configHeaderValue = UtilProperties.getPropertyValue(\"general.properties\", \"mail.spam.value\");\n             //          only execute when config file has been set && header variable found\n-            if (!spamHeaderName.equals(\"N\") && message.getHeader(spamHeaderName) != null) { \n+            if (!spamHeaderName.equals(\"N\") && message.getHeader(spamHeaderName) != null && message.getHeader(spamHeaderName).length > 0) { \n                 String msgHeaderValue = message.getHeader(spamHeaderName)[0];\n                 if(msgHeaderValue != null && msgHeaderValue.startsWith(configHeaderValue)) {\n                     Debug.logInfo(\"Incoming Email message ignored, was detected by external spam checker\", module);",
                "deletions": 8
            },
            {
                "sha": "80ef4f41644e2cbb48b5ee49e19dcfd09db3b186",
                "filename": "applications/content/src/org/ofbiz/content/email/EmailWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/794d4ee7c03ba2b0ef3d548f09036e85b7be825a/applications/content/src/org/ofbiz/content/email/EmailWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/794d4ee7c03ba2b0ef3d548f09036e85b7be825a/applications/content/src/org/ofbiz/content/email/EmailWorker.java",
                "status": "modified",
                "changes": 12,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/email/EmailWorker.java?ref=794d4ee7c03ba2b0ef3d548f09036e85b7be825a",
                "patch": "@@ -52,7 +52,9 @@ public static int addAttachmentsToCommEvent(MimeMessage message, String communic\n \t\tcommEventMap.put(\"mimeTypeId\", \"text/html\");\n \t\tcommEventMap.put(\"userLogin\", userLogin);\n \t\tString subject = message.getSubject();\n-    \tMap result = null;\n+\t\tif (subject != null && subject.length() > 80) { \n+\t\t\tsubject = subject.substring(0,80); // make sure not too big for database field. (20 characters for filename)\n+\t\t}\n \t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\n     \t\n \t\tMultipart multipart = (Multipart)message.getContent();\n@@ -71,7 +73,11 @@ public static int addAttachmentsToCommEvent(MimeMessage message, String communic\n \t\t\t\t\t && (disposition.equals(Part.ATTACHMENT) || disposition.equals(Part.INLINE))\n \t\t\t\t     && (i != bodyContentIndex)) )\n \t\t    {\n-\t\t\t\tcommEventMap.put(\"contentName\", subject + \"-\" + i + \" \" + part.getFileName());\n+\t\t\t\tString attFileName = part.getFileName();\n+\t\t\t\tif (attFileName != null && attFileName.length() > 17) {\n+\t\t\t\t\tattFileName = attFileName.substring(0,17);\n+\t\t\t\t}\n+\t\t\t\tcommEventMap.put(\"contentName\", subject + \"-\" + i + \" \" + attFileName);\n         \t\tcommEventMap.put(\"drMimeTypeId\", thisContentType);\n         \t\tif (thisContentType.startsWith(\"text\")) {\n         \t\t\tString content = (String)part.getContent();\n@@ -93,7 +99,7 @@ public static int addAttachmentsToCommEvent(MimeMessage message, String communic\n     \t\t\t\tcommEventMap.put(\"drDataResourceTypeId\", \"IMAGE_OBJECT\");\n             \t\tcommEventMap.put(\"_imageData_contentType\", thisContentType);\n         \t\t}\n-        \t\tresult = dispatcher.runSync(\"createCommContentDataResource\", commEventMap);\n+        \t\tdispatcher.runSync(\"createCommContentDataResource\", commEventMap);\n     \t\t\tattachmentCount++;\n \t\t    }\n \t\t}",
                "deletions": 3
            },
            {
                "sha": "9b8f231e29a026ee186563a75d6b61d977ade04d",
                "filename": "applications/party/servicedef/services.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/794d4ee7c03ba2b0ef3d548f09036e85b7be825a/applications/party/servicedef/services.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/794d4ee7c03ba2b0ef3d548f09036e85b7be825a/applications/party/servicedef/services.xml",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/servicedef/services.xml?ref=794d4ee7c03ba2b0ef3d548f09036e85b7be825a",
                "patch": "@@ -343,9 +343,9 @@ under the License.\n     <!-- Party ContachMech reverse find -->\n     <service name=\"findPartyFromEmailAddress\" engine=\"simple\"\n             location=\"org/ofbiz/party/contact/PartyContactMechServices.xml\" invoke=\"findPartyFromEmailAddress\" auth=\"true\">\n-        <description>Create a Postal Address</description>\n+        <description>Find the partyId/contactMechId for a specific email address, if not found do not return a value</description>\n         <attribute name=\"address\" type=\"String\" mode=\"IN\" optional=\"false\"/>\n-        <attribute name=\"personal\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n+        <attribute name=\"personal\" type=\"String\" mode=\"IN\" optional=\"true\"/><!-- field not used -->\n         <attribute name=\"fromDate\" type=\"Timestamp\" mode=\"IN\" optional=\"true\"/>\n         <attribute name=\"partyId\" type=\"String\" mode=\"OUT\" optional=\"true\"/>\n         <attribute name=\"contactMechId\" type=\"String\" mode=\"OUT\" optional=\"true\"/>",
                "deletions": 2
            },
            {
                "sha": "8bdedddcc51ce0e4ecb10018ef84efc4ca7e9c31",
                "filename": "framework/common/config/general.properties",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/794d4ee7c03ba2b0ef3d548f09036e85b7be825a/framework/common/config/general.properties",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/794d4ee7c03ba2b0ef3d548f09036e85b7be825a/framework/common/config/general.properties",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/config/general.properties?ref=794d4ee7c03ba2b0ef3d548f09036e85b7be825a",
                "patch": "@@ -52,5 +52,5 @@ mail.smtp.relay.host=localhost\n http.upload.max.size=-1\n \n # -- spam header name and value to block incoming spam detected by external spam checker, configured for spam assin \n-mail.spam.name = X-Spam-Flag\n-mail.spam.value = YES\n\\ No newline at end of file\n+mail.spam.name=X-Spam-Flag\n+mail.spam.value=YES",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE that could happen for offline credit card authorisations (at least from POS).\nPatch from Iain Fogg OFBIZ-477.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@476790 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/322cca18cf04cabcc11ef59de2ac5488b749636a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2846e559732fb8c6dd6c8b335945f95ed3844354",
        "bug_id": "ofbiz-framework_201",
        "file": [
            {
                "sha": "cd6c230f36b4ad1993f4a341b7cf506fb36a2ddc",
                "filename": "applications/accounting/src/org/ofbiz/accounting/payment/PaymentGatewayServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/322cca18cf04cabcc11ef59de2ac5488b749636a/applications/accounting/src/org/ofbiz/accounting/payment/PaymentGatewayServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/322cca18cf04cabcc11ef59de2ac5488b749636a/applications/accounting/src/org/ofbiz/accounting/payment/PaymentGatewayServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/payment/PaymentGatewayServices.java?ref=322cca18cf04cabcc11ef59de2ac5488b749636a",
                "patch": "@@ -1551,7 +1551,7 @@ public static Map processAuthResult(DispatchContext dctx, Map context) {\n             String paymentMethodId = orderPaymentPreference.getString(\"paymentMethodId\");\n             GenericValue paymentMethod = delegator.findByPrimaryKey(\"PaymentMethod\", UtilMisc.toMap(\"paymentMethodId\", paymentMethodId));\n             GenericValue creditCard = null;\n-            if (\"CREDIT_CARD\".equals(paymentMethod.getString(\"paymentMethodTypeId\"))) {\n+            if (paymentMethod != null && \"CREDIT_CARD\".equals(paymentMethod.getString(\"paymentMethodTypeId\"))) {\n                 creditCard = paymentMethod.getRelatedOne(\"CreditCard\");\n             }\n ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Slight improvement to order agreements to avoid highly improbable NPE if cart.getOrderType comes back null\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@476685 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2846e559732fb8c6dd6c8b335945f95ed3844354",
        "parent": "https://github.com/apache/ofbiz-framework/commit/df3a8dd604b5d9ea72fa7882321c632a55fd6684",
        "bug_id": "ofbiz-framework_202",
        "file": [
            {
                "sha": "d53b9e7968e8d34d95bead3eff123875a3adc930",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/entry/orderagreements.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2846e559732fb8c6dd6c8b335945f95ed3844354/applications/order/webapp/ordermgr/WEB-INF/actions/entry/orderagreements.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2846e559732fb8c6dd6c8b335945f95ed3844354/applications/order/webapp/ordermgr/WEB-INF/actions/entry/orderagreements.bsh",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/entry/orderagreements.bsh?ref=2846e559732fb8c6dd6c8b335945f95ed3844354",
                "patch": "@@ -49,7 +49,7 @@ if (UtilValidate.isNotEmpty(productStoreId)) {\n         partyId = shoppingCart.getOrderPartyId();\n         \n         // get applicable agreements for order entry\n-        if (shoppingCart.getOrderType().equals(\"PURCHASE_ORDER\")) {\n+        if (\"PURCHASE_ORDER\".equals(shoppingCart.getOrderType())) {\n             // the agreement for a PO is from customer to payToParty (ie, us)\n             agreements = delegator.findByAndCache(\"Agreement\", UtilMisc.toMap(\"partyIdTo\", partyId, \"partyIdFrom\", payToPartyId));\n         } else {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE when a wrong service name was used in the schedule job screen.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@467712 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a1449f7789781510edb540e12073f638a09b7fdb",
        "parent": "https://github.com/apache/ofbiz-framework/commit/354e1ac4016a208d8a8a6483ba0f66dfbfddcd4e",
        "bug_id": "ofbiz-framework_203",
        "file": [
            {
                "sha": "244950840360697a4afd369c0186d66388fffc81",
                "filename": "framework/webtools/webapp/webtools/WEB-INF/actions/service/scheduleJob.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a1449f7789781510edb540e12073f638a09b7fdb/framework/webtools/webapp/webtools/WEB-INF/actions/service/scheduleJob.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a1449f7789781510edb540e12073f638a09b7fdb/framework/webtools/webapp/webtools/WEB-INF/actions/service/scheduleJob.bsh",
                "status": "modified",
                "changes": 21,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/webapp/webtools/WEB-INF/actions/service/scheduleJob.bsh?ref=a1449f7789781510edb540e12073f638a09b7fdb",
                "patch": "@@ -47,14 +47,21 @@ context.put(\"scheduleOptions\", scheduleOptions);\n \n if (UtilValidate.isNotEmpty(serviceName)) {\n     DispatchContext dctx = dispatcher.getDispatchContext();\n-    ModelService model = dctx.getModelService(serviceName);\n-    Iterator params = model.getInParamNames().iterator();\n-    while (params.hasNext()) {\n-        ModelParam par = model.getParam((String)params.next());\n-        if (par.internal) {\n-            continue;\n+    ModelService model = null;\n+    try {\n+        model = dctx.getModelService(serviceName);\n+    } catch(Exception exc) {\n+        context.put(\"errorMessageList\", UtilMisc.toList(exc.getMessage()));\n+    }\n+    if (model != null) {\n+        Iterator params = model.getInParamNames().iterator();\n+        while (params.hasNext()) {\n+            ModelParam par = model.getParam((String)params.next());\n+            if (par.internal) {\n+                continue;\n+            }\n+            serviceParameters.add(UtilMisc.toMap(\"name\", par.name, \"type\", par.type, \"optional\", (par.optional? \"Y\": \"N\")));\n         }\n-        serviceParameters.add(UtilMisc.toMap(\"name\", par.name, \"type\", par.type, \"optional\", (par.optional? \"Y\": \"N\")));\n     }\n }\n context.put(\"serviceParameters\", serviceParameters);",
                "deletions": 7
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE when no po id and no product id were passed: thanks to Anil K Patel for the patch (OFBIZ-358).\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@452782 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b3ad387673847aef4e1260786f5e8546cc08ebea",
        "parent": "https://github.com/apache/ofbiz-framework/commit/00caf9ca0cd250a52449ea56c5dbc4f4cee8d547",
        "bug_id": "ofbiz-framework_204",
        "file": [
            {
                "sha": "211b95ff3a458de2b3fdc0de875c7a48782db3e0",
                "filename": "applications/product/webapp/facility/inventory/receiveInventory.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b3ad387673847aef4e1260786f5e8546cc08ebea/applications/product/webapp/facility/inventory/receiveInventory.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b3ad387673847aef4e1260786f5e8546cc08ebea/applications/product/webapp/facility/inventory/receiveInventory.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/inventory/receiveInventory.ftl?ref=b3ad387673847aef4e1260786f5e8546cc08ebea",
                "patch": "@@ -242,7 +242,7 @@ under the License.\n           <div class=\"head3\">${uiLabelMap.ProductSelectShipmentReceive}</div>\n         </td>\n       </tr>\n-      <#list shipments as shipment>\n+      <#list shipments?if_exists as shipment>\n         <#assign originFacility = shipment.getRelatedOneCache(\"OriginFacility\")?if_exists/>\n         <#assign destinationFacility = shipment.getRelatedOneCache(\"DestinationFacility\")?if_exists/>\n         <#assign statusItem = shipment.getRelatedOneCache(\"StatusItem\")/>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Avoid possible NPE during order black list checking if order has no payment methods\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@448428 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/22609ecb903224301446c51d9fd2191925d833ca",
        "parent": "https://github.com/apache/ofbiz-framework/commit/30a7152bf487110fcdc361b477f1badf7e33e98c",
        "bug_id": "ofbiz-framework_205",
        "file": [
            {
                "sha": "6897233efd2366817dc679725bb62422caba1544",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/CheckOutHelper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/22609ecb903224301446c51d9fd2191925d833ca/applications/order/src/org/ofbiz/order/shoppingcart/CheckOutHelper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/22609ecb903224301446c51d9fd2191925d833ca/applications/order/src/org/ofbiz/order/shoppingcart/CheckOutHelper.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/CheckOutHelper.java?ref=22609ecb903224301446c51d9fd2191925d833ca",
                "patch": "@@ -1112,7 +1112,7 @@ public Map checkOrderBlacklist(GenericValue userLogin) {\n         Iterator i = paymentMethods.iterator();\n         while (i.hasNext()) {\n             GenericValue paymentMethod = (GenericValue) i.next();\n-            if (paymentMethod.getString(\"paymentMethodTypeId\").equals(\"CREDIT_CARD\")) {\n+            if ((paymentMethod != null) && (\"CREDIT_CARD\".equals(paymentMethod.getString(\"paymentMethodTypeId\")))) {\n                 GenericValue creditCard = null;\n                 GenericValue billingAddress = null;\n                 try {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added exception if no delegator passed in to JobManager, better than NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@430999 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2a1c33cc592974f3e2f383c34978db4d0b6b2d47",
        "parent": "https://github.com/apache/ofbiz-framework/commit/4c3ba191944be30e2e3ae785c98afc1b6ead034a",
        "bug_id": "ofbiz-framework_206",
        "file": [
            {
                "sha": "a81d405e4bb3733ac86c480b028f8f962eb85482",
                "filename": "framework/service/src/org/ofbiz/service/job/JobManager.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2a1c33cc592974f3e2f383c34978db4d0b6b2d47/framework/service/src/org/ofbiz/service/job/JobManager.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2a1c33cc592974f3e2f383c34978db4d0b6b2d47/framework/service/src/org/ofbiz/service/job/JobManager.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/service/src/org/ofbiz/service/job/JobManager.java?ref=2a1c33cc592974f3e2f383c34978db4d0b6b2d47",
                "patch": "@@ -71,6 +71,9 @@\n \n     /** Creates a new JobManager object. */\n     public JobManager(GenericDelegator delegator) {\n+        if (delegator == null) {\n+            throw new GeneralRuntimeException(\"ERROR: null delegator passed, cannot create JobManager\");\n+        }\n         if (JobManager.registeredManagers.get(delegator.getDelegatorName()) != null) {\n             throw new GeneralRuntimeException(\"JobManager for [\" + delegator.getDelegatorName() + \"] already running\");\n         }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added check to prevent a NPE as suggested by Chris Howe in Apache OFBIZ-67.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@424532 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ca8ed04c6002f510eeb54481a232460a2ebecf99",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2f99934ec1f4b4d61cea5a90f10665718eac0564",
        "bug_id": "ofbiz-framework_207",
        "file": [
            {
                "sha": "ed62a4d859be499b1087ab03d0554820138698f3",
                "filename": "applications/ecommerce/webapp/ecommerce/includes/header.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ca8ed04c6002f510eeb54481a232460a2ebecf99/applications/ecommerce/webapp/ecommerce/includes/header.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ca8ed04c6002f510eeb54481a232460a2ebecf99/applications/ecommerce/webapp/ecommerce/includes/header.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/webapp/ecommerce/includes/header.ftl?ref=ca8ed04c6002f510eeb54481a232460a2ebecf99",
                "patch": "@@ -24,7 +24,7 @@ under the License.\n     <script language=\"javascript\" src=\"<@ofbizContentUrl>/images/calendar1.js</@ofbizContentUrl>\" type=\"text/javascript\"></script>\n     <script language=\"javascript\" src=\"<@ofbizContentUrl>/images/fieldlookup.js</@ofbizContentUrl>\" type=\"text/javascript\"></script>\n     <link rel=\"stylesheet\" href=\"<@ofbizContentUrl>${(productStore.styleSheet)?default(\"/images/ecommain.css\")}</@ofbizContentUrl>\" type=\"text/css\"/>\n-    ${layoutSettings.extraHead?if_exists}\n+    ${layoutSettings?if_exists.extraHead?if_exists}\n \n     <#-- Append CSS for catalog -->\n     <#if catalogStyleSheet?exists>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added check to prevent a NPE as suggested by Chris Howe in Apache OFBIZ-69.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@424531 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2f99934ec1f4b4d61cea5a90f10665718eac0564",
        "parent": "https://github.com/apache/ofbiz-framework/commit/e416461983427ddd97ed7a268bca32240b8f5460",
        "bug_id": "ofbiz-framework_208",
        "file": [
            {
                "sha": "fece2642d9850fac97c41c058966e3bfee9d9b94",
                "filename": "applications/ecommerce/webapp/ecommerce/customer/customertaxinfo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2f99934ec1f4b4d61cea5a90f10665718eac0564/applications/ecommerce/webapp/ecommerce/customer/customertaxinfo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2f99934ec1f4b4d61cea5a90f10665718eac0564/applications/ecommerce/webapp/ecommerce/customer/customertaxinfo.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/webapp/ecommerce/customer/customertaxinfo.ftl?ref=2f99934ec1f4b4d61cea5a90f10665718eac0564",
                "patch": "@@ -18,7 +18,7 @@ under the License.\n     <#list partyTaxAuthInfoAndDetailList as partyTaxAuthInfoAndDetail>\n         <div class=\"tabletext\">\n             <a href=\"<@ofbizUrl>deleteCustomerTaxAuthInfo?partyId=${partyId}&amp;taxAuthPartyId=${partyTaxAuthInfoAndDetail.taxAuthPartyId}&amp;taxAuthGeoId=${partyTaxAuthInfoAndDetail.taxAuthGeoId}&amp;fromDate=${partyTaxAuthInfoAndDetail.fromDate}</@ofbizUrl>\" class=\"buttontext\">X</a>\n-            [${partyTaxAuthInfoAndDetail.geoCode}] ${partyTaxAuthInfoAndDetail.geoName} (${partyTaxAuthInfoAndDetail.groupName}): ${uiLabelMap.PartyTaxId} [${partyTaxAuthInfoAndDetail.partyTaxId?default(\"N/A\")}], ${uiLabelMap.PartyTaxIsExempt} [${partyTaxAuthInfoAndDetail.isExempt?default(\"N\")}]\n+            [${partyTaxAuthInfoAndDetail.geoCode}] ${partyTaxAuthInfoAndDetail.geoName} (${partyTaxAuthInfoAndDetail.groupName?if_exists}): ${uiLabelMap.PartyTaxId} [${partyTaxAuthInfoAndDetail.partyTaxId?default(\"N/A\")}], ${uiLabelMap.PartyTaxIsExempt} [${partyTaxAuthInfoAndDetail.isExempt?default(\"N\")}]\n         </div>\n     </#list>\n     <div>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix possible NPE on the order header page if the order name of the shopping cart comes back null\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@421770 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/152438d9cf7a02ed6589243c83cb7344ceaab9c9",
        "parent": "https://github.com/apache/ofbiz-framework/commit/24e6c604bc3b01d273b35aa65f2094c32cdbbb3c",
        "bug_id": "ofbiz-framework_209",
        "file": [
            {
                "sha": "d5c62190eab696eb28901fb1e96dd25a147fc9a1",
                "filename": "applications/order/webapp/ordermgr/entry/orderHeaderInfo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/152438d9cf7a02ed6589243c83cb7344ceaab9c9/applications/order/webapp/ordermgr/entry/orderHeaderInfo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/152438d9cf7a02ed6589243c83cb7344ceaab9c9/applications/order/webapp/ordermgr/entry/orderHeaderInfo.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/entry/orderHeaderInfo.ftl?ref=152438d9cf7a02ed6589243c83cb7344ceaab9c9",
                "patch": "@@ -57,7 +57,7 @@\n                 <td class=\"tabletext\"><b>${uiLabelMap.OrderOrderName}</b>:</td> \n                 <td class=\"tabletext\">\n                   <form method=\"post\" action=\"setOrderName\" name=\"setCartOrderNameForm\">\n-                    <input type=\"text\" name=\"orderName\" class=\"inputBox\" size=\"15\" maxlength=\"200\" value=\"${shoppingCart.getOrderName()}\"/>\n+                    <input type=\"text\" name=\"orderName\" class=\"inputBox\" size=\"15\" maxlength=\"200\" value='${shoppingCart.getOrderName()?default(\"\")}'/>\n                     <input type=\"submit\" value=\"${uiLabelMap.CommonSet}\" class=\"smallSubmit\"/>\n                   </form>\n                 </td>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix a potential NPE in the picklist when there are no picklist bin info\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@421749 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/24e6c604bc3b01d273b35aa65f2094c32cdbbb3c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6d70af3282f034d7217f44d172ab9bed440b1611",
        "bug_id": "ofbiz-framework_210",
        "file": [
            {
                "sha": "b0b1ab57ed22c40a9b764be3716a842c58fd66b7",
                "filename": "applications/product/webapp/facility/facility/Picklist.fo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/24e6c604bc3b01d273b35aa65f2094c32cdbbb3c/applications/product/webapp/facility/facility/Picklist.fo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/24e6c604bc3b01d273b35aa65f2094c32cdbbb3c/applications/product/webapp/facility/facility/Picklist.fo.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/facility/Picklist.fo.ftl?ref=24e6c604bc3b01d273b35aa65f2094c32cdbbb3c",
                "patch": "@@ -199,7 +199,7 @@\n     <#list picklistInfo.picklistBinInfoList as picklistBinInfo>\n         <#assign rowColor = \"white\">\n         <#assign picklistBin = picklistBinInfo.picklistBin>\n-        <#assign picklistItemInfoList = picklistBinInfo.picklistItemInfoList>\n+        <#assign picklistItemInfoList = picklistBinInfo.picklistItemInfoList?if_exists>\n         <fo:page-sequence master-reference=\"main\">\n         <fo:flow flow-name=\"xsl-region-body\" font-family=\"Helvetica\">\n             <fo:block text-align=\"right\">",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Leon for \"NPE thrown out while rendering disabled menu item\" https://issues.apache.org/jira/browse/OFBIZ-5451\n\nThe method \"renderLink\" of new class MacroMenuRenderer calls the WidgetWorker.determineAutoLinkType. When menuItem.getDisabled() is true, the link target will be set to null and NPE occurs.\n\njleroux: This was related with r1517353 and r1537833. The Leon's patch fixes r1517353 and this commits also reverts r1537833\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1553887 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ede19944659dffbd0a2ec6603006da2ad04d4da5",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2d81f9049e0937f5a7e82898dbb5d5268062f309",
        "bug_id": "ofbiz-framework_211",
        "file": [
            {
                "sha": "55eab94226c021bdd34019b31ea1e30729723915",
                "filename": "applications/order/widget/ordermgr/OrderMenus.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ede19944659dffbd0a2ec6603006da2ad04d4da5/applications/order/widget/ordermgr/OrderMenus.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ede19944659dffbd0a2ec6603006da2ad04d4da5/applications/order/widget/ordermgr/OrderMenus.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/widget/ordermgr/OrderMenus.xml?ref=ede19944659dffbd0a2ec6603006da2ad04d4da5",
                "patch": "@@ -262,7 +262,7 @@ under the License.\n             <link target=\"EditQuote\"/>\n         </menu-item>\n         <menu-item name=\"createOrder\" title=\"${uiLabelMap.OrderCreateOrder}\">\n-            <condition>\n+            <condition disabled-style=\"disabled\">\n                 <and>\n                     <not><if-empty field=\"quote\"/></not>\n                     <if-compare operator=\"equals\" value=\"QUO_APPROVED\" field=\"quote.statusId\"/>",
                "deletions": 1
            },
            {
                "sha": "53435e4331ec8f6fab309d2b52fb005bd68204de",
                "filename": "framework/widget/src/org/ofbiz/widget/menu/MacroMenuRenderer.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ede19944659dffbd0a2ec6603006da2ad04d4da5/framework/widget/src/org/ofbiz/widget/menu/MacroMenuRenderer.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ede19944659dffbd0a2ec6603006da2ad04d4da5/framework/widget/src/org/ofbiz/widget/menu/MacroMenuRenderer.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/menu/MacroMenuRenderer.java?ref=ede19944659dffbd0a2ec6603006da2ad04d4da5",
                "patch": "@@ -203,7 +203,10 @@ public void renderLink(Appendable writer, Map<String, Object> context, Link link\n         parameters.put(\"targetWindow\", link.getTargetWindow(context));\r\n         String uniqueItemName = menuItem.getModelMenu().getName() + \"_\" + menuItem.getName() + \"_LF_\" + UtilMisc.<String> addToBigDecimalInMap(context, \"menuUniqueItemIndex\", BigDecimal.ONE);\r\n         parameters.put(\"uniqueItemName\", uniqueItemName);\r\n-        String linkType = WidgetWorker.determineAutoLinkType(link.getLinkType(), target, link.getUrlMode(), request);\r\n+        String linkType = \"\";\r\n+        if (UtilValidate.isNotEmpty(target)) {\r\n+            linkType = WidgetWorker.determineAutoLinkType(link.getLinkType(), target, link.getUrlMode(), request);\r\n+        }\r\n         parameters.put(\"linkType\", linkType);\r\n         String linkUrl = \"\";\r\n         String actionUrl = \"\";\r",
                "deletions": 1
            },
            {
                "sha": "af191116e940ae79346bd524551941f325853f7f",
                "filename": "framework/widget/templates/htmlMenuMacroLibrary.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ede19944659dffbd0a2ec6603006da2ad04d4da5/framework/widget/templates/htmlMenuMacroLibrary.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ede19944659dffbd0a2ec6603006da2ad04d4da5/framework/widget/templates/htmlMenuMacroLibrary.ftl",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/templates/htmlMenuMacroLibrary.ftl?ref=ede19944659dffbd0a2ec6603006da2ad04d4da5",
                "patch": "@@ -47,14 +47,18 @@ under the License.\n </#macro>\r\n \r\n <#macro renderLink linkUrl parameterList targetWindow uniqueItemName actionUrl linkType=\"\" id=\"\" style=\"\" name=\"\" height=\"\" width=\"\" text=\"\" imgStr=\"\">\r\n-  <#if \"hidden-form\" == linkType>\r\n+  <#if linkType?has_content && \"hidden-form\" == linkType>\r\n <form method=\"post\" action=\"${actionUrl}\"<#if targetWindow?has_content> target=\"${targetWindow}\"</#if> onsubmit=\"javascript:submitFormDisableSubmits(this)\" name=\"${uniqueItemName}\"><#rt/>\r\n     <#list parameterList as parameter>\r\n <input name=\"${parameter.name}\" value=\"${parameter.value}\" type=\"hidden\"/><#rt/>\r\n     </#list>\r\n </form><#rt/>\r\n   </#if>\r\n-<a<#if id?has_content> id=\"${id}\"</#if><#if style?has_content> class=\"${style}\"</#if><#if name?has_content> name=\"${name}\"</#if><#if targetWindow?has_content> target=\"${targetWindow}\"</#if> href=\"<#if \"hidden-form\"==linkType>javascript:document.${uniqueItemName}.submit()<#else>${linkUrl}</#if>\"><#if imgStr?has_content>${imgStr}</#if><#if text?has_content>${text}</#if></a><#rt/>\r\n+<#if linkType?has_content>\r\n+<a<#if id?has_content> id=\"${id}\"</#if><#if style?has_content> class=\"${style}\"</#if><#if name?has_content> name=\"${name}\"</#if><#if targetWindow?has_content> target=\"${targetWindow}\"</#if> href=\"<#if \"hidden-form\"==linkType>javascript:document.${uniqueItemName}.submit()<#else>${linkUrl}</#if>\"><#rt/>\r\n+</#if>\r\n+<#if imgStr?has_content>${imgStr}</#if><#if text?has_content>${text}</#if><#rt/>\r\n+<#if linkType?has_content></a><#rt/></#if>\r\n </#macro>\r\n \r\n <#macro renderMenuItemBegin style toolTip linkStr containsNestedMenus>\r",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Prevents a possible \"NPE\", found in trunk demo logs (it's a treasure I will continue to dig in...)\n\nfreemarker.core.InvalidReferenceException: The following has evaluated to null or missing:\n==> lastContent.description  [in template \"component://ecommerce/webapp/ecommerce/content/viewcontent.ftl\" at line 38, column 38]\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1721067 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/df4d1350efb458283fa5808849abc6c685d5052b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/5d9f3898c6daa00c7c2ba97f3c8a9073892f7520",
        "bug_id": "ofbiz-framework_212",
        "file": [
            {
                "sha": "64d1627169a7beeadf52be2d4d7b3a7e416808bf",
                "filename": "specialpurpose/ecommerce/webapp/ecommerce/content/viewcontent.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/df4d1350efb458283fa5808849abc6c685d5052b/specialpurpose/ecommerce/webapp/ecommerce/content/viewcontent.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/df4d1350efb458283fa5808849abc6c685d5052b/specialpurpose/ecommerce/webapp/ecommerce/content/viewcontent.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/ecommerce/webapp/ecommerce/content/viewcontent.ftl?ref=df4d1350efb458283fa5808849abc6c685d5052b",
                "patch": "@@ -35,7 +35,7 @@ under the License.\n </#if>\n \n <#if lastContent?has_content>\n-    <h1>[${lastContent.contentId}] ${lastContent.description}</h1>\n+    <h1>[${lastContent.contentId}] ${lastContent.description!}</h1>\n </#if>\n <#--\n <#assign globalNodeTrail=[]/>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A fix suggested by Jeremy Wickersheimer \"updateGiftCard service NPE when card number not given\"\n\nThe updateGiftCard service has the cardNumber parameter optional but will have an NPE if the card number is not given.\n\nI'd suggest to make this parameter non optional, I'am not sure if a gift card without number makes much sense anyway...\n\nJLR: I checked the code, it's the better solution IMO\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1060933 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/fd52efd49e5ada9954c16fa489ac7c2543806709",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c9c512948a8a8c8e1e0cd1ace401c57f7cf4c8de",
        "bug_id": "ofbiz-framework_213",
        "file": [
            {
                "sha": "f7683f6747235181bc90861d76b87e1a85b273dd",
                "filename": "applications/accounting/servicedef/services_paymentmethod.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/fd52efd49e5ada9954c16fa489ac7c2543806709/applications/accounting/servicedef/services_paymentmethod.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/fd52efd49e5ada9954c16fa489ac7c2543806709/applications/accounting/servicedef/services_paymentmethod.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/servicedef/services_paymentmethod.xml?ref=fd52efd49e5ada9954c16fa489ac7c2543806709",
                "patch": "@@ -114,7 +114,7 @@ under the License.\n         <attribute name=\"thruDate\" type=\"Timestamp\" mode=\"IN\" optional=\"true\"/>\n         <attribute name=\"description\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n         <attribute name=\"paymentMethodId\" type=\"String\" mode=\"INOUT\" optional=\"false\"/>\n-        <attribute name=\"cardNumber\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n+        <attribute name=\"cardNumber\" type=\"String\" mode=\"IN\" optional=\"false\"/>\n         <attribute name=\"pinNumber\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n         <attribute name=\"expireDate\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n         <attribute name=\"expMonth\" type=\"String\" mode=\"IN\" optional=\"true\"/>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Patrick Antivackis \"NPE when calling a page like http://localhost:8080/cmssite/cms\" (https://issues.apache.org/jira/browse/OFBIZ-3096) - OFBIZ-3096\nA Null Pointer Exception is generated by RequestHandler.trackVIsit and trackStat if a page is called without view and without trailing slash after the controller.\nThis may be not a problem for non cms site, but it is for cms site. Calling http://localhost:8080/cmssite/cms will generate a NPE; WIth the included pacth, calling the same page will display the default page.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@830366 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/048506f318c86d97d8a6b6a8bcbc55e60bac1176",
        "parent": "https://github.com/apache/ofbiz-framework/commit/d4d72a0ca88823ca1b17962f861da94655726e57",
        "bug_id": "ofbiz-framework_214",
        "file": [
            {
                "sha": "be9851e78aa63711196b23904896c688e4472933",
                "filename": "framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/048506f318c86d97d8a6b6a8bcbc55e60bac1176/framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/048506f318c86d97d8a6b6a8bcbc55e60bac1176/framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java",
                "status": "modified",
                "changes": 10,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/control/RequestHandler.java?ref=048506f318c86d97d8a6b6a8bcbc55e60bac1176",
                "patch": "@@ -580,7 +580,7 @@ public void doRequest(HttpServletRequest request, HttpServletResponse response,\n                 }\n                 renderView(viewName, requestMap.securityExternalView, request, response, null);\n             } else if (\"view-last-noparam\".equals(nextRequestResponse.type)) {\n-            \t if (Debug.verboseOn()) Debug.logVerbose(\"[RequestHandler.doRequest]: Response is a view.\" + \" sessionId=\" + UtilHttp.getSessionId(request), module);\n+                 if (Debug.verboseOn()) Debug.logVerbose(\"[RequestHandler.doRequest]: Response is a view.\" + \" sessionId=\" + UtilHttp.getSessionId(request), module);\n \n                  // check for an override view, only used if \"success\" = eventReturn\n                  String viewName = (UtilValidate.isNotEmpty(overrideViewUri) && (eventReturn == null || \"success\".equals(eventReturn))) ? overrideViewUri : nextRequestResponse.value;\n@@ -596,7 +596,7 @@ public void doRequest(HttpServletRequest request, HttpServletResponse response,\n                      viewName = nextRequestResponse.value;\n                  }\n                  renderView(viewName, requestMap.securityExternalView, request, response, null);\n-\t\t\t} else if (\"view-home\".equals(nextRequestResponse.type)) {\n+            } else if (\"view-home\".equals(nextRequestResponse.type)) {\n                 if (Debug.verboseOn()) Debug.logVerbose(\"[RequestHandler.doRequest]: Response is a view.\" + \" sessionId=\" + UtilHttp.getSessionId(request), module);\n \n                 // check for an override view, only used if \"success\" = eventReturn\n@@ -1112,6 +1112,9 @@ public void runBeforeLogoutEvents(HttpServletRequest request, HttpServletRespons\n     public boolean trackStats(HttpServletRequest request) {\n         if (!\"false\".equalsIgnoreCase(context.getInitParameter(\"track-serverhit\"))) {\n             String uriString = RequestHandler.getRequestUri(request.getPathInfo());\n+            if (uriString == null) {\n+                uriString=\"\";\n+            }\n             ConfigXMLReader.RequestMap requestMap = getControllerConfig().requestMapMap.get(uriString);\n             if (requestMap == null) return false;\n             return requestMap.trackServerHit;\n@@ -1123,6 +1126,9 @@ public boolean trackStats(HttpServletRequest request) {\n     public boolean trackVisit(HttpServletRequest request) {\n         if (!\"false\".equalsIgnoreCase(context.getInitParameter(\"track-visit\"))) {\n             String uriString = RequestHandler.getRequestUri(request.getPathInfo());\n+            if (uriString == null) {\n+                uriString=\"\";\n+            }\n             ConfigXMLReader.RequestMap requestMap = getControllerConfig().requestMapMap.get(uriString);\n             if (requestMap == null) return false;\n             return requestMap.trackVisit;",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed NPE while rendering content using screen widget, if content.dataResouceId is null then ModelScreenWidget throwing NPW. \nApplied patch from jira issue OFBIZ-6219\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1669588 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/6f30b5de013577cadb82911e1c08710b8c0342e8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/f315f0d5be4cc149a8ec9b5525e1f3a910a9de9c",
        "bug_id": "ofbiz-framework_215",
        "file": [
            {
                "sha": "0a4b6080246949e50e15c15dfba0c2e234ec2a2e",
                "filename": "framework/widget/src/org/ofbiz/widget/model/ModelScreenWidget.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/6f30b5de013577cadb82911e1c08710b8c0342e8/framework/widget/src/org/ofbiz/widget/model/ModelScreenWidget.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/6f30b5de013577cadb82911e1c08710b8c0342e8/framework/widget/src/org/ofbiz/widget/model/ModelScreenWidget.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/model/ModelScreenWidget.java?ref=6f30b5de013577cadb82911e1c08710b8c0342e8",
                "patch": "@@ -1387,7 +1387,7 @@ public void renderWidgetString(Appendable writer, Map<String, Object> context, S\n                         return;\r\n                     }\r\n                     if (content != null) {\r\n-                        expandedDataResourceId = content.getString(\"dataResourceId\");\r\n+                        if (content.get(\"dataResourceId\") != null) expandedDataResourceId = content.getString(\"dataResourceId\");\r\n                     } else {\r\n                         String errMsg = \"Could not find content with contentId [\" + expandedContentId + \"] \";\r\n                         Debug.logError(errMsg, module);\r",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed a bug in Mini-Language where a NPE could be thrown while using Verbose logging: https://issues.apache.org/jira/browse/OFBIZ-5689.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1612205 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e4ba71404abcce33d4c56347ac61808e084b45e8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/e3fc7fd4128b31818f1fe4dc4f028a923fbecd80",
        "bug_id": "ofbiz-framework_216",
        "file": [
            {
                "sha": "062f5c447f2fa7b206e92a655f208fa5f710f687",
                "filename": "framework/minilang/src/org/ofbiz/minilang/method/envops/Iterate.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e4ba71404abcce33d4c56347ac61808e084b45e8/framework/minilang/src/org/ofbiz/minilang/method/envops/Iterate.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e4ba71404abcce33d4c56347ac61808e084b45e8/framework/minilang/src/org/ofbiz/minilang/method/envops/Iterate.java",
                "status": "modified",
                "changes": 6,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/minilang/src/org/ofbiz/minilang/method/envops/Iterate.java?ref=e4ba71404abcce33d4c56347ac61808e084b45e8",
                "patch": "@@ -155,8 +155,10 @@ public boolean exec(MethodContext methodContext) throws MiniLangException {\n                 }\n             }\n         } else {\n-            if (Debug.verboseOn())\n-                Debug.logVerbose(\"Cannot iterate over a \" + objList.getClass().getName() + \", doing nothing: \" + this, module);\n+            if (Debug.verboseOn()) {\n+                Debug.logVerbose(\"Cannot iterate over a \" + objList == null ? \"null object\" : objList.getClass().getName()\n+                        + \", doing nothing: \" + this, module);\n+            }\n             return true;\n         }\n         entryFma.put(methodContext.getEnvMap(), oldEntryValue);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixes a typo introduced at r1553887 for \"NPE thrown out while rendering disabled menu item\" https://issues.apache.org/jira/browse/OFBIZ-5451\nSpotted by Olivier\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1557185 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/344a93d20aedf15b9624d13013734704b3dc66eb",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6aef8ce9c351d42633f62e1dc9589aac6489cf0e",
        "bug_id": "ofbiz-framework_217",
        "file": [
            {
                "sha": "8c4204a6186281c39a597a15a2e998e8431380f5",
                "filename": "framework/widget/templates/htmlMenuMacroLibrary.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/344a93d20aedf15b9624d13013734704b3dc66eb/framework/widget/templates/htmlMenuMacroLibrary.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/344a93d20aedf15b9624d13013734704b3dc66eb/framework/widget/templates/htmlMenuMacroLibrary.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/templates/htmlMenuMacroLibrary.ftl?ref=344a93d20aedf15b9624d13013734704b3dc66eb",
                "patch": "@@ -54,7 +54,7 @@ under the License.\n     </#list>\r\n </form><#rt/>\r\n   </#if>\r\n-<#if linkType?has_content>\r\n+<#if linkUrl?has_content>\r\n <a<#if id?has_content> id=\"${id}\"</#if><#if style?has_content> class=\"${style}\"</#if><#if name?has_content> name=\"${name}\"</#if><#if targetWindow?has_content> target=\"${targetWindow}\"</#if> href=\"<#if \"hidden-form\"==linkType>javascript:document.${uniqueItemName}.submit()<#else>${linkUrl}</#if>\"><#rt/>\r\n </#if>\r\n <#if imgStr?has_content>${imgStr}</#if><#if text?has_content>${text}</#if><#rt/>\r",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A temporary workaround which removes \"disabled-style=\"disabled\" in the createOrder menu item condition (in ViewQuote)\nThe only effect is to remove the disabled item\n\nThis is due to r1517353 which introduced a NPE in MacroMenuRenderer.java\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1537833 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/9f59f8f0ccf7b48ed7da0997f3ab7edf7d8050d8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/0b22680991b6e5ed1a15efa2af8035c07b3256f4",
        "bug_id": "ofbiz-framework_218",
        "file": [
            {
                "sha": "dd870a034c4c46dd83ff6028a9d4cea414dec4f9",
                "filename": "applications/order/widget/ordermgr/OrderMenus.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/9f59f8f0ccf7b48ed7da0997f3ab7edf7d8050d8/applications/order/widget/ordermgr/OrderMenus.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/9f59f8f0ccf7b48ed7da0997f3ab7edf7d8050d8/applications/order/widget/ordermgr/OrderMenus.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/widget/ordermgr/OrderMenus.xml?ref=9f59f8f0ccf7b48ed7da0997f3ab7edf7d8050d8",
                "patch": "@@ -262,7 +262,7 @@ under the License.\n             <link target=\"EditQuote\"/>\n         </menu-item>\n         <menu-item name=\"createOrder\" title=\"${uiLabelMap.OrderCreateOrder}\">\n-            <condition disabled-style=\"disabled\">\n+            <condition>\n                 <and>\n                     <not><if-empty field=\"quote\"/></not>\n                     <if-compare operator=\"equals\" value=\"QUO_APPROVED\" field=\"quote.statusId\"/>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Closes \"Login out on a cluster handled by DeltaManager causes a NPE\" https://issues.apache.org/jira/browse/OFBIZ-4289\nRemoves all changes related to this issue. We will see later if ever it proves to be a real issue.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1353135 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2cf0faf52c9b1b8f16d7bd13145204c0dd6f1dad",
        "parent": "https://github.com/apache/ofbiz-framework/commit/15fe32312886df05647cd696abdd396c413c9e17",
        "bug_id": "ofbiz-framework_219",
        "file": [
            {
                "sha": "7cc4322b4b3dfc353991ce364aa428f2cf52a86f",
                "filename": "framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2cf0faf52c9b1b8f16d7bd13145204c0dd6f1dad/framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2cf0faf52c9b1b8f16d7bd13145204c0dd6f1dad/framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java",
                "status": "modified",
                "changes": 73,
                "additions": 21,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java?ref=2cf0faf52c9b1b8f16d7bd13145204c0dd6f1dad",
                "patch": "@@ -39,18 +39,16 @@\n import javolution.util.FastMap;\n \n import org.ofbiz.base.component.ComponentConfig;\n-import org.ofbiz.base.container.ContainerConfig;\n-import org.ofbiz.base.container.ContainerException;\n import org.ofbiz.base.util.Debug;\n import org.ofbiz.base.util.GeneralException;\n import org.ofbiz.base.util.KeyStoreUtil;\n import org.ofbiz.base.util.StringUtil;\n+import org.ofbiz.base.util.StringUtil.StringWrapper;\n import org.ofbiz.base.util.UtilFormatOut;\n import org.ofbiz.base.util.UtilHttp;\n import org.ofbiz.base.util.UtilMisc;\n import org.ofbiz.base.util.UtilProperties;\n import org.ofbiz.base.util.UtilValidate;\n-import org.ofbiz.base.util.StringUtil.StringWrapper;\n import org.ofbiz.entity.Delegator;\n import org.ofbiz.entity.DelegatorFactory;\n import org.ofbiz.entity.GenericEntityException;\n@@ -447,7 +445,7 @@ public static String login(HttpServletRequest request, HttpServletResponse respo\n \n             if (setupNewDelegatorEtc) {\n                 // now set the delegator and dispatcher in a bunch of places just in case they were changed\n-                setWebContextObjects(request, response, delegator, dispatcher, true);\n+                setWebContextObjects(request, response, delegator, dispatcher);\n             }\n \n             // check to see if a password change is required for the user\n@@ -476,47 +474,33 @@ public static String login(HttpServletRequest request, HttpServletResponse respo\n             return \"error\";\n         }\n     }\n-\n-    /*         persistSerialized is set at false in the context of a cluster when using (at least) DeltaManager.\n-            Because we have no easy ways to set DeltaManager.pathname to null from OFBiz\n-           So persistSerialized is set to true when login out. This prevent a NPE due to non serialized objects put in session*/\n-    private static void setWebContextObjects(HttpServletRequest request, HttpServletResponse response, Delegator delegator, LocalDispatcher dispatcher, Boolean persistSerialized) {\n+    private static void setWebContextObjects(HttpServletRequest request, HttpServletResponse response, Delegator delegator, LocalDispatcher dispatcher) {\n         HttpSession session = request.getSession();\n \n         // NOTE: we do NOT want to set this in the servletContet, only in the request and session\n         session.setAttribute(\"delegatorName\", delegator.getDelegatorName());\n \n         request.setAttribute(\"delegator\", delegator);\n-        if (!persistSerialized) {\n-            session.setAttribute(\"delegator\", null);\n-        } else {\n-            session.setAttribute(\"delegator\", delegator);\n-        }\n+        session.setAttribute(\"delegator\", delegator);\n \n         request.setAttribute(\"dispatcher\", dispatcher);\n-        if (!persistSerialized) {\n-            session.setAttribute(\"dispatcher\", null);\n-        } else {\n-            session.setAttribute(\"dispatcher\", dispatcher);\n+        session.setAttribute(\"dispatcher\", dispatcher);\n+        \n+        // we also need to setup the security and authz objects since they are dependent on the delegator\n+        try {\n+            Security security = SecurityFactory.getInstance(delegator);\n+            request.setAttribute(\"security\", security);\n+            session.setAttribute(\"security\", security);\n+        } catch (SecurityConfigurationException e) {\n+            Debug.logError(e, module);\n         }\n \n-        if (persistSerialized) {\n-            // we also need to setup the security and authz objects since they are dependent on the delegator\n-            try {\n-                Security security = SecurityFactory.getInstance(delegator);\n-                request.setAttribute(\"security\", security);\n-                session.setAttribute(\"security\", security);\n-            } catch (SecurityConfigurationException e) {\n-                Debug.logError(e, module);\n-            }\n-\n-            try {\n-                Authorization authz = AuthorizationFactory.getInstance(delegator);\n-                request.setAttribute(\"authz\", authz);\n-                session.setAttribute(\"authz\", authz);\n-            } catch (SecurityConfigurationException e) {\n-                Debug.logError(e, module);\n-            }\n+        try {\n+            Authorization authz = AuthorizationFactory.getInstance(delegator);\n+            request.setAttribute(\"authz\", authz);\n+            session.setAttribute(\"authz\", authz);\n+        } catch (SecurityConfigurationException e) {\n+            Debug.logError(e, module);\n         }\n \n         // get rid of the visit info since it was pointing to the previous database, and get a new one\n@@ -652,22 +636,7 @@ public static void doBasicLogout(GenericValue userLogin, HttpServletRequest requ\n \n             delegator = DelegatorFactory.getDelegator(delegatorName);\n             LocalDispatcher dispatcher = ContextFilter.makeWebappDispatcher(session.getServletContext(), delegator);\n-            // get the container configuration\n-            String ofbizHome = System.getProperty(\"ofbiz.home\");\n-            String configFile = ofbizHome + \"/framework/base/config/ofbiz-containers.xml\";\n-            ContainerConfig.Container cc = null;\n-            String mgrClassName = null;\n-            try {\n-                cc = ContainerConfig.getContainer(\"catalina-container\", configFile);\n-                mgrClassName = ContainerConfig.getPropertyValue(cc, \"manager-class\", \"\");\n-            } catch (ContainerException e) {\n-                Debug.logError(e, \"No catalina-container configuration found in container config!\");\n-            }\n-            if (\"org.apache.catalina.ha.session.DeltaManager\".equals(mgrClassName)) {\n-                setWebContextObjects(request, response, delegator, dispatcher, false);\n-            } else {\n-                setWebContextObjects(request, response, delegator, dispatcher, true);\n-            }\n+            setWebContextObjects(request, response, delegator, dispatcher);\n         }\n \n         // DON'T save the cart, causes too many problems: if (shoppingCart != null) session.setAttribute(\"shoppingCart\", new WebShoppingCart(shoppingCart, session));\n@@ -981,7 +950,7 @@ public static String checkExternalLoginKey(HttpServletRequest request, HttpServl\n             if (!oldDelegatorName.equals(userLogin.getDelegator().getDelegatorName())) {\n                 delegator = DelegatorFactory.getDelegator(userLogin.getDelegator().getDelegatorName());\n                 dispatcher = ContextFilter.makeWebappDispatcher(servletContext, delegator);\n-                setWebContextObjects(request, response, delegator, dispatcher, true);\n+                setWebContextObjects(request, response, delegator, dispatcher);\n             }\n             // found userLogin, do the external login...\n ",
                "deletions": 52
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Improved code that manages the cache:\n* replaced putIfAbsent + get with putIfAbsentAndGet to avoid the risk of a NPE if the cache entry is removed (or expired) between the two calls\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1343287 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/247c205188eda92c3409d80396f357bd73b026fd",
        "parent": "https://github.com/apache/ofbiz-framework/commit/074c282c0c6fb72951d9ceb60ca7b41672d9e931",
        "bug_id": "ofbiz-framework_220",
        "file": [
            {
                "sha": "fb5db33bb676f71b78e0f488afc680d9488c0b2e",
                "filename": "framework/entity/src/org/ofbiz/entity/model/ModelFieldTypeReader.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/247c205188eda92c3409d80396f357bd73b026fd/framework/entity/src/org/ofbiz/entity/model/ModelFieldTypeReader.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/247c205188eda92c3409d80396f357bd73b026fd/framework/entity/src/org/ofbiz/entity/model/ModelFieldTypeReader.java",
                "status": "modified",
                "changes": 4,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/model/ModelFieldTypeReader.java?ref=247c205188eda92c3409d80396f357bd73b026fd",
                "patch": "@@ -89,10 +89,8 @@ public static ModelFieldTypeReader getModelFieldTypeReader(String helperName) {\n                 throw new IllegalStateException(\"Error loading field type file \" + fieldTypeResourceHandler.getLocation());\n             }\n             Map<String, ModelFieldType> fieldTypeMap = createFieldTypeCache(document.getDocumentElement(), fieldTypeResourceHandler.getLocation());\n-            reader = new ModelFieldTypeReader(fieldTypeMap);\n-            readers.putIfAbsent(tempModelName, reader);\n+            reader = readers.putIfAbsentAndGet(tempModelName, new ModelFieldTypeReader(fieldTypeMap));\n             utilTimer.timerString(\"[ModelFieldTypeReader.getModelFieldTypeReader] Read \" + fieldTypeMap.size() + \" field types\");\n-            reader = readers.get(tempModelName);\n         }\n         return reader;\n     }",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Improved implementation of concurrent access to the cache of parsed Groovy scripts to avoid the risk of a NPE in the unlucky event that, between the execution of the cache.putIfAbsent and cache.get methods, the cache entry was removed (e.g. cache cleared/expired).\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1337789 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/53d6c971e9752e0cc76e823c6ed4abdbb73bb67c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2b3fdc9379c8dd1ee79ecd6e58bd787dc4c59c7d",
        "bug_id": "ofbiz-framework_221",
        "file": [
            {
                "sha": "be235ec8315355c37bdeb01619a5cc2f9a00efa5",
                "filename": "framework/base/src/org/ofbiz/base/util/GroovyUtil.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/53d6c971e9752e0cc76e823c6ed4abdbb73bb67c/framework/base/src/org/ofbiz/base/util/GroovyUtil.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/53d6c971e9752e0cc76e823c6ed4abdbb73bb67c/framework/base/src/org/ofbiz/base/util/GroovyUtil.java",
                "status": "modified",
                "changes": 27,
                "additions": 17,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/org/ofbiz/base/util/GroovyUtil.java?ref=53d6c971e9752e0cc76e823c6ed4abdbb73bb67c",
                "patch": "@@ -116,8 +116,7 @@ public static Binding getBinding(Map<String, Object> context) {\n     }\n     public static Class<?> getScriptClassFromLocation(String location, GroovyClassLoader groovyClassLoader) throws GeneralException {\n         try {\n-            Class<?> scriptClass = null;\n-            scriptClass = parsedScripts.get(location);\n+            Class<?> scriptClass = parsedScripts.get(location);\n             if (scriptClass == null) {\n                 URL scriptUrl = FlexibleLocation.resolveLocation(location);\n                 if (scriptUrl == null) {\n@@ -128,11 +127,15 @@ public static Binding getBinding(Map<String, Object> context) {\n                 } else {\n                     scriptClass = parseClass(scriptUrl.openStream(), location);\n                 }\n-                scriptClass = parsedScripts.putIfAbsent(location, scriptClass);\n-                if (scriptClass == null && Debug.verboseOn()) { // putIfAbsent returns null if the class is added\n-                    Debug.logVerbose(\"Cached Groovy script at: \" + location, module);\n+                Class<?> scriptClassCached = parsedScripts.putIfAbsent(location, scriptClass);\n+                if (scriptClassCached == null) { // putIfAbsent returns null if the class is added to the cache\n+                    if (Debug.verboseOn()) {\n+                        Debug.logVerbose(\"Cached Groovy script at: \" + location, module);\n+                    }\n+                } else {\n+                    // the newly parsed script is discarded and the one found in the cache (that has been created by a concurrent thread in the meantime) is used\n+                    scriptClass = scriptClassCached;\n                 }\n-                scriptClass = parsedScripts.get(location);\n             }\n             return scriptClass;\n         } catch (Exception e) {\n@@ -179,11 +182,15 @@ public static Object runScriptFromClasspath(String script, Map<String,Object> co\n             Class<?> scriptClass = parsedScripts.get(script);\n             if (scriptClass == null) {\n                 scriptClass = loadClass(script);\n-                scriptClass = parsedScripts.putIfAbsent(script, scriptClass);\n-                if (scriptClass == null && Debug.verboseOn()) { // putIfAbsent returns null if the class is added\n-                    Debug.logVerbose(\"Cached Groovy script at: \" + script, module);\n+                Class<?> cachedScriptClass = parsedScripts.putIfAbsent(script, scriptClass);\n+                if (cachedScriptClass == null) { // putIfAbsent returns null if the class is added\n+                    if (Debug.verboseOn()) {\n+                        Debug.logVerbose(\"Cached Groovy script at: \" + script, module);\n+                    }\n+                } else {\n+                    // the newly parsed script is discarded and the one found in the cache (that has been created by a concurrent thread in the meantime) is used\n+                    scriptClass = cachedScriptClass;\n                 }\n-                scriptClass = parsedScripts.get(script);\n             }\n             return InvokerHelper.createScript(scriptClass, getBinding(context)).run();\n         } catch (CompilationFailedException e) {",
                "deletions": 10
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "FIX: When decrypting a value from the database, throw a useful exception\nif the key couldn't be found; previously, an NPE would be thrown.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1334215 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/486f43495bee782d0a4ae45d515e8987cdd3661a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2a05c1a04e1667266b4a898cda79375bbdc7aeed",
        "bug_id": "ofbiz-framework_222",
        "file": [
            {
                "sha": "8df5ee918482d59c99a04571abb6bdbdaa6a3594",
                "filename": "framework/entity/src/org/ofbiz/entity/util/EntityCrypto.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/486f43495bee782d0a4ae45d515e8987cdd3661a/framework/entity/src/org/ofbiz/entity/util/EntityCrypto.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/486f43495bee782d0a4ae45d515e8987cdd3661a/framework/entity/src/org/ofbiz/entity/util/EntityCrypto.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/util/EntityCrypto.java?ref=486f43495bee782d0a4ae45d515e8987cdd3661a",
                "patch": "@@ -108,6 +108,9 @@ public Object decrypt(String keyName, String encryptedString) throws EntityCrypt\n \n     protected Object doDecrypt(String keyName, byte[] encryptedBytes, boolean useOldFunnyKeyHash) throws GeneralException {\n         SecretKey key = this.findKey(keyName, false);\n+        if (key == null) {\n+            throw new EntityCryptoException(\"key(\" + keyName + \") not found in database\");\n+        }\n         byte[] decryptedBytes = DesCrypt.decrypt(key, encryptedBytes);\n         return UtilObject.getObject(decryptedBytes);\n     }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "OFBIZ-4323 fix NPE bug reported by Javier Orrantia, screen xml documents rendered retrieved via the DataResourceWorker weren't using the correct UtilXml method that populates the xml documents userData.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1139504 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/89f4d19219cf5e9049fd2359977570058e87a5d9",
        "parent": "https://github.com/apache/ofbiz-framework/commit/920ed263269bfde2ae28b43731bcd71783b84a30",
        "bug_id": "ofbiz-framework_223",
        "file": [
            {
                "sha": "242f65037ce5ff6fd9167df9e15a1f87dc70358f",
                "filename": "applications/content/src/org/ofbiz/content/data/DataResourceWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/89f4d19219cf5e9049fd2359977570058e87a5d9/applications/content/src/org/ofbiz/content/data/DataResourceWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/89f4d19219cf5e9049fd2359977570058e87a5d9/applications/content/src/org/ofbiz/content/data/DataResourceWorker.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/data/DataResourceWorker.java?ref=89f4d19219cf5e9049fd2359977570058e87a5d9",
                "patch": "@@ -722,7 +722,7 @@ public static void renderDataResourceAsText(Delegator delegator, String dataReso\n                     if (\"URL_RESOURCE\".equals(dataResource.getString(\"dataResourceTypeId\")) && UtilValidate.isNotEmpty(combinedName) && combinedName.startsWith(\"component://\")) {\n                         modelScreen = ScreenFactory.getScreenFromLocation(combinedName);\n                     } else { // stored in  a single file, long or short text\n-                        Document screenXml = UtilXml.readXmlDocument(getDataResourceText(dataResource, targetMimeTypeId, locale, templateContext, delegator, cache), true);\n+                        Document screenXml = UtilXml.readXmlDocument(getDataResourceText(dataResource, targetMimeTypeId, locale, templateContext, delegator, cache), true, true);\n                         Map<String, ModelScreen> modelScreenMap = ScreenFactory.readScreenDocument(screenXml, \"DataResourceId: \" + dataResource.getString(\"dataResourceId\"));\n                         if (UtilValidate.isNotEmpty(modelScreenMap)) {\n                             Map.Entry<String, ModelScreen> entry = modelScreenMap.entrySet().iterator().next(); // get first entry, only one screen allowed per file",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "[OFBIZ-4273] Change FastSet back to HashSet since a FastSet throws an NPE when attempting to add null to the collection.  Fixes bug reported by Sam Hamilton, attempting to use the quickCreateVirtualWithVariants service returns an error\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1101373 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3a5c871e18ddaae5970ea6df9893cbe17fac690a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a2f73b3fd879588c961cfbc502d811a575894dbe",
        "bug_id": "ofbiz-framework_224",
        "file": [
            {
                "sha": "b3003e72add31fd1813b7e75d50c8719e40de3ad",
                "filename": "applications/product/src/org/ofbiz/product/product/ProductServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3a5c871e18ddaae5970ea6df9893cbe17fac690a/applications/product/src/org/ofbiz/product/product/ProductServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3a5c871e18ddaae5970ea6df9893cbe17fac690a/applications/product/src/org/ofbiz/product/product/ProductServices.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/product/ProductServices.java?ref=3a5c871e18ddaae5970ea6df9893cbe17fac690a",
                "patch": "@@ -28,6 +28,7 @@\n import java.nio.ByteBuffer;\n import java.sql.Timestamp;\n import java.util.Arrays;\n+import java.util.HashSet;\n import java.util.LinkedHashMap;\n import java.util.LinkedHashSet;\n import java.util.List;\n@@ -870,7 +871,7 @@\n             Set<String> featureProductIds = FastSet.newInstance();\n             featureProductIds.add(productId);\n             featureProductIds.addAll(variantProductsById.keySet());\n-            Set<String> productFeatureIds = FastSet.newInstance();\n+            Set<String> productFeatureIds = new HashSet<String>();\n             productFeatureIds.add(productFeatureIdOne);\n             productFeatureIds.add(productFeatureIdTwo);\n             productFeatureIds.add(productFeatureIdThree);",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixes a NPE in GenericDispatcher.java. It's related to tenants changes. It appears when you set a jms-service: you have no delegator when you try to create a GenericMessageListener in JmsListenerFactory, but was hidden there\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1090964 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5c3977b73c8e9d8b96b1fc4eee3c0f4893b296c2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/f966ed6518d93ae0be5f770c49d9de8ebdf0adeb",
        "bug_id": "ofbiz-framework_225",
        "file": [
            {
                "sha": "4d0341c023f6d7b9e4adb85241f35383fad9f892",
                "filename": "framework/service/src/org/ofbiz/service/GenericDispatcher.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5c3977b73c8e9d8b96b1fc4eee3c0f4893b296c2/framework/service/src/org/ofbiz/service/GenericDispatcher.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5c3977b73c8e9d8b96b1fc4eee3c0f4893b296c2/framework/service/src/org/ofbiz/service/GenericDispatcher.java",
                "status": "modified",
                "changes": 10,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/service/src/org/ofbiz/service/GenericDispatcher.java?ref=5c3977b73c8e9d8b96b1fc4eee3c0f4893b296c2",
                "patch": "@@ -52,11 +52,13 @@ public static LocalDispatcher getLocalDispatcher(String dispatcherName, Delegato\n             dispatcherName = delegator.getDelegatorName();\n             Debug.logWarning(\"Got a getGenericDispatcher call with a null dispatcherName, assuming default for the name.\", module);\n         }\n-        \n-        if (UtilValidate.isNotEmpty(delegator.getDelegatorTenantId())) {\n-            dispatcherName += \"#\" + delegator.getDelegatorTenantId();\n+\n+        if (UtilValidate.isNotEmpty(delegator)) {\n+            if (UtilValidate.isNotEmpty(delegator.getDelegatorTenantId())) {\n+                dispatcherName += \"#\" + delegator.getDelegatorTenantId();\n+            }\n         }\n-        \n+\n         LocalDispatcher dispatcher = dispatcherCache.get(dispatcherName);\n \n         if (dispatcher == null) {",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix possible NPEs in Content Component reported by Dimitri Valax on dev ML, close https://issues.apache.org/jira/browse/OFBIZ-4198 - OFBIZ-4198 \n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1076115 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/32c0dc6bcec0c1aed6514ada032be157fa9229e1",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c9ec4ae824ae5858adc3ec082ebc65d5900713e3",
        "bug_id": "ofbiz-framework_226",
        "file": [
            {
                "sha": "9a1f51823c51a9dde084a522b329445946529eb7",
                "filename": "applications/content/src/org/ofbiz/content/content/ContentPermissionServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/32c0dc6bcec0c1aed6514ada032be157fa9229e1/applications/content/src/org/ofbiz/content/content/ContentPermissionServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/32c0dc6bcec0c1aed6514ada032be157fa9229e1/applications/content/src/org/ofbiz/content/content/ContentPermissionServices.java",
                "status": "modified",
                "changes": 78,
                "additions": 36,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/content/ContentPermissionServices.java?ref=32c0dc6bcec0c1aed6514ada032be157fa9229e1",
                "patch": "@@ -292,52 +292,46 @@ public ContentPermissionServices() {}\n         // boolean isMatchTo = false;\n         // boolean isMatchFrom = false;\n         Map<String, Object> permResults = FastMap.newInstance();\n-        String skipPermissionCheck = null;\n \n-        if (UtilValidate.isEmpty(skipPermissionCheck)\n-            || (!skipPermissionCheck.equalsIgnoreCase(\"true\") && !skipPermissionCheck.equalsIgnoreCase(\"granted\"))) {\n-            // Use the purposes from the from entity for both cases.\n-            List<String> relatedPurposes = EntityPermissionChecker.getRelatedPurposes(contentFrom, null);\n-            List<String> relatedPurposesTo = EntityPermissionChecker.getRelatedPurposes(contentTo, relatedPurposes);\n-            Map<String, Object> serviceInMap = FastMap.newInstance();\n-            serviceInMap.put(\"userLogin\", userLogin);\n-            serviceInMap.put(\"targetOperationList\", UtilMisc.toList(\"CONTENT_LINK_TO\"));\n-            serviceInMap.put(\"contentPurposeList\", relatedPurposesTo);\n-            serviceInMap.put(\"currentContent\", contentTo);\n-            serviceInMap.put(\"displayFailCond\", bDisplayFailCond);\n+        // Use the purposes from the from entity for both cases.\n+        List<String> relatedPurposes = EntityPermissionChecker.getRelatedPurposes(contentFrom, null);\n+        List<String> relatedPurposesTo = EntityPermissionChecker.getRelatedPurposes(contentTo, relatedPurposes);\n+        Map<String, Object> serviceInMap = FastMap.newInstance();\n+        serviceInMap.put(\"userLogin\", userLogin);\n+        serviceInMap.put(\"targetOperationList\", UtilMisc.toList(\"CONTENT_LINK_TO\"));\n+        serviceInMap.put(\"contentPurposeList\", relatedPurposesTo);\n+        serviceInMap.put(\"currentContent\", contentTo);\n+        serviceInMap.put(\"displayFailCond\", bDisplayFailCond);\n \n-            try {\n-                permResults = dispatcher.runSync(\"checkContentPermission\", serviceInMap);\n-            } catch (GenericServiceException e) {\n-                Debug.logError(e, \"Problem checking permissions\", \"ContentServices\");\n-            }\n-            permissionStatus = (String)permResults.get(\"permissionStatus\");\n-            if (permissionStatus == null || !permissionStatus.equals(\"granted\")) {\n-                if (bDisplayFailCond != null && bDisplayFailCond.booleanValue()) {\n-                    String errMsg = (String)permResults.get(ModelService.ERROR_MESSAGE);\n-                    results.put(ModelService.ERROR_MESSAGE, errMsg);\n-                }\n-                return results;\n-            }\n-            serviceInMap.put(\"currentContent\", contentFrom);\n-            serviceInMap.put(\"targetOperationList\", UtilMisc.toList(\"CONTENT_LINK_FROM\"));\n-            serviceInMap.put(\"contentPurposeList\", relatedPurposes);\n-            try {\n-                permResults = dispatcher.runSync(\"checkContentPermission\", serviceInMap);\n-            } catch (GenericServiceException e) {\n-                Debug.logError(e, \"Problem checking permissions\", \"ContentServices\");\n-            }\n-            permissionStatus = (String)permResults.get(\"permissionStatus\");\n-            if (permissionStatus != null && permissionStatus.equals(\"granted\")) {\n-                results.put(\"permissionStatus\", \"granted\");\n-            } else {\n-                if (bDisplayFailCond != null && bDisplayFailCond.booleanValue()) {\n-                    String errMsg = (String)permResults.get(ModelService.ERROR_MESSAGE);\n-                    results.put(ModelService.ERROR_MESSAGE, errMsg);\n-                }\n+        try {\n+            permResults = dispatcher.runSync(\"checkContentPermission\", serviceInMap);\n+        } catch (GenericServiceException e) {\n+            Debug.logError(e, \"Problem checking permissions\", \"ContentServices\");\n+        }\n+        permissionStatus = (String)permResults.get(\"permissionStatus\");\n+        if (permissionStatus == null || !permissionStatus.equals(\"granted\")) {\n+            if (bDisplayFailCond != null && bDisplayFailCond.booleanValue()) {\n+                String errMsg = (String)permResults.get(ModelService.ERROR_MESSAGE);\n+                results.put(ModelService.ERROR_MESSAGE, errMsg);\n             }\n-        } else {\n+            return results;\n+        }\n+        serviceInMap.put(\"currentContent\", contentFrom);\n+        serviceInMap.put(\"targetOperationList\", UtilMisc.toList(\"CONTENT_LINK_FROM\"));\n+        serviceInMap.put(\"contentPurposeList\", relatedPurposes);\n+        try {\n+            permResults = dispatcher.runSync(\"checkContentPermission\", serviceInMap);\n+        } catch (GenericServiceException e) {\n+            Debug.logError(e, \"Problem checking permissions\", \"ContentServices\");\n+        }\n+        permissionStatus = (String)permResults.get(\"permissionStatus\");\n+        if (permissionStatus != null && permissionStatus.equals(\"granted\")) {\n             results.put(\"permissionStatus\", \"granted\");\n+        } else {\n+            if (bDisplayFailCond != null && bDisplayFailCond.booleanValue()) {\n+                String errMsg = (String)permResults.get(ModelService.ERROR_MESSAGE);\n+                results.put(ModelService.ERROR_MESSAGE, errMsg);\n+            }\n         }\n         return results;\n     }",
                "deletions": 42
            },
            {
                "sha": "c6e8d20a37bd4c99e7775a121364df45a71a1dde",
                "filename": "applications/content/src/org/ofbiz/content/content/ContentWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/32c0dc6bcec0c1aed6514ada032be157fa9229e1/applications/content/src/org/ofbiz/content/content/ContentWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/32c0dc6bcec0c1aed6514ada032be157fa9229e1/applications/content/src/org/ofbiz/content/content/ContentWorker.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/content/ContentWorker.java?ref=32c0dc6bcec0c1aed6514ada032be157fa9229e1",
                "patch": "@@ -1052,8 +1052,8 @@ public static String callContentPermissionCheck(Delegator delegator, LocalDispat\n         Map<String, Object> permResults = FastMap.newInstance();\n         String skipPermissionCheck = (String) context.get(\"skipPermissionCheck\");\n \n-        if (UtilValidate.isEmpty(skipPermissionCheck)\n-            || (!skipPermissionCheck.equalsIgnoreCase(\"true\") && !skipPermissionCheck.equalsIgnoreCase(\"granted\"))) {\n+        if (UtilValidate.isEmpty(skipPermissionCheck) \n+                || (!\"true\".equalsIgnoreCase(skipPermissionCheck) && !\"granted\".equalsIgnoreCase(skipPermissionCheck))) {\n             GenericValue userLogin = (GenericValue) context.get(\"userLogin\");\n             Map<String, Object> serviceInMap = FastMap.newInstance();\n             serviceInMap.put(\"userLogin\", userLogin);",
                "deletions": 2
            },
            {
                "sha": "9ac0db5609f4112c27f44126e263d0b6146129f4",
                "filename": "applications/content/src/org/ofbiz/content/data/DataResourceWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/32c0dc6bcec0c1aed6514ada032be157fa9229e1/applications/content/src/org/ofbiz/content/data/DataResourceWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/32c0dc6bcec0c1aed6514ada032be157fa9229e1/applications/content/src/org/ofbiz/content/data/DataResourceWorker.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/data/DataResourceWorker.java?ref=32c0dc6bcec0c1aed6514ada032be157fa9229e1",
                "patch": "@@ -292,8 +292,8 @@ public static String callDataResourcePermissionCheck(Delegator delegator, LocalD\n         String skipPermissionCheck = (String) context.get(\"skipPermissionCheck\");\n             if (Debug.infoOn()) Debug.logInfo(\"in callDataResourcePermissionCheckResult, skipPermissionCheck:\" + skipPermissionCheck,\"\");\n \n-        if (UtilValidate.isEmpty(skipPermissionCheck)\n-            || (!skipPermissionCheck.equalsIgnoreCase(\"true\") && !skipPermissionCheck.equalsIgnoreCase(\"granted\"))) {\n+        if (UtilValidate.isEmpty(skipPermissionCheck) \n+                || (!\"true\".equalsIgnoreCase(skipPermissionCheck) && !\"granted\".equalsIgnoreCase(skipPermissionCheck))) {\n             GenericValue userLogin = (GenericValue) context.get(\"userLogin\");\n             Map<String, Object> serviceInMap = FastMap.newInstance();\n             serviceInMap.put(\"userLogin\", userLogin);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed an issue (NPE) that was preventing the cost and qoh calculation in the scalar explosion; slightly improved layout of scalar explosion; added weight information.\n  \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@990097 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/0f4c0e143ef97523103f4630db867f6cfaab9c29",
        "parent": "https://github.com/apache/ofbiz-framework/commit/e7c2988ede4d30acc514625866ce2082401c2b9b",
        "bug_id": "ofbiz-framework_227",
        "file": [
            {
                "sha": "0973671cc20f6ecc9727bb5dd2177b337b4ca220",
                "filename": "applications/manufacturing/webapp/manufacturing/WEB-INF/actions/bom/BomSimulation.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0f4c0e143ef97523103f4630db867f6cfaab9c29/applications/manufacturing/webapp/manufacturing/WEB-INF/actions/bom/BomSimulation.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0f4c0e143ef97523103f4630db867f6cfaab9c29/applications/manufacturing/webapp/manufacturing/WEB-INF/actions/bom/BomSimulation.groovy",
                "status": "modified",
                "changes": 8,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/webapp/manufacturing/WEB-INF/actions/bom/BomSimulation.groovy?ref=0f4c0e143ef97523103f4630db867f6cfaab9c29",
                "patch": "@@ -17,7 +17,7 @@\n  * under the License.\n  */\n \n-import java.util.Iterator;\n+import org.ofbiz.base.util.Debug;\n import org.ofbiz.manufacturing.bom.BOMNode;\n \n tree = request.getAttribute(\"tree\");\n@@ -34,7 +34,7 @@ if (tree) {\n     context.tree = treeArray;\n     Iterator treeQtyIt = treeQty.values().iterator();\n     productsData = [];\n-    grandTotalCost = null;\n+    grandTotalCost = 0.0;\n     while (treeQtyIt) {\n         BOMNode node = (BOMNode)treeQtyIt.next();\n         unitCost = null;\n@@ -58,7 +58,9 @@ if (tree) {\n                                                                                               userLogin : userLogin]);\n                 qoh = outMap.quantityOnHandTotal;\n             }\n-        } catch (Exception e) {}\n+        } catch (Exception e) {\n+            Debug.logError(\"Error retrieving bom simulation data: \" + e.getMessage(), \"BomSimulation\");\n+        }\n         productsData.add([node : node, unitCost : unitCost, totalCost : totalCost, qoh : qoh]);\n     }\n     context.productsData = productsData;",
                "deletions": 3
            },
            {
                "sha": "8413a62041773748318a75aca2bd2539c943167d",
                "filename": "applications/manufacturing/webapp/manufacturing/bom/BomSimulation.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/0f4c0e143ef97523103f4630db867f6cfaab9c29/applications/manufacturing/webapp/manufacturing/bom/BomSimulation.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/0f4c0e143ef97523103f4630db867f6cfaab9c29/applications/manufacturing/webapp/manufacturing/bom/BomSimulation.ftl",
                "status": "modified",
                "changes": 14,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/webapp/manufacturing/bom/BomSimulation.ftl?ref=0f4c0e143ef97523103f4630db867f6cfaab9c29",
                "patch": "@@ -97,12 +97,13 @@ under the License.\n       <br />\n       <table class=\"basic-table\" cellspacing=\"0\">\n         <tr class=\"header-row\">\n-          <td width=\"18%\">${uiLabelMap.ProductProductId}</td>\n+          <td width=\"20%\">${uiLabelMap.ProductProductId}</td>\n           <td width=\"50%\">${uiLabelMap.ProductProductName}</td>\n-          <td width=\"8%\" align=\"right\">${uiLabelMap.CommonQuantity}</td>\n-          <td width=\"8%\" align=\"right\">${uiLabelMap.ProductQoh}</td>\n-          <td width=\"8%\" align=\"right\">${uiLabelMap.FormFieldTitle_cost}</td>\n-          <td width=\"8%\" align=\"right\">${uiLabelMap.CommonTotalCost}</td>\n+          <td width=\"6%\" align=\"right\">${uiLabelMap.CommonQuantity}</td>\n+          <td width=\"6%\" align=\"right\">${uiLabelMap.ProductQoh}</td>\n+          <td width=\"6%\" align=\"right\">${uiLabelMap.ProductWeight}</td>\n+          <td width=\"6%\" align=\"right\">${uiLabelMap.FormFieldTitle_cost}</td>\n+          <td width=\"6%\" align=\"right\">${uiLabelMap.CommonTotalCost}</td>\n         </tr>\n         <#if productsData?has_content>\n           <#assign alt_row = false>\n@@ -113,10 +114,11 @@ under the License.\n               <td>${node.product.internalName?default(\"&nbsp;\")}</td>\n               <td align=\"right\">${node.quantity}</td>\n               <td align=\"right\">${productData.qoh?if_exists}</td>\n+              <td align=\"right\">${node.product.productWeight?if_exists}</td>\n               <#if productData.unitCost?exists && (productData.unitCost > 0)>\n               <td align=\"right\">${productData.unitCost?if_exists}</td>\n               <#else>\n-              <td align=\"center\"><a href=\"/catalog/control/EditProductCosts?productId=${node.product.productId}&amp;externalLoginKey=${externalLoginKey}\" class=\"buttontext\">NA</a></td>\n+              <td align=\"right\"><a href=\"/catalog/control/EditProductCosts?productId=${node.product.productId}&amp;externalLoginKey=${externalLoginKey}\" class=\"buttontext\">NA</a></td>\n               </#if>\n               <td align=\"right\">${productData.totalCost?if_exists}</td>\n             </tr>",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Put the null check a little higher so that it actually does the check before an NPE can occur. Giving up on this transform, I hate the content component.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@941139 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/94bc3f63cad9bb1ca02f5e97afdb6d5c4c4123e8",
        "parent": "https://github.com/apache/ofbiz-framework/commit/9a39192005e31bc619f0f264de0040a156096165",
        "bug_id": "ofbiz-framework_228",
        "file": [
            {
                "sha": "4a351630f2910cd118c5f2737fada764d63b5a48",
                "filename": "framework/widget/src/org/ofbiz/widget/menu/MenuWrapTransform.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/94bc3f63cad9bb1ca02f5e97afdb6d5c4c4123e8/framework/widget/src/org/ofbiz/widget/menu/MenuWrapTransform.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/94bc3f63cad9bb1ca02f5e97afdb6d5c4c4123e8/framework/widget/src/org/ofbiz/widget/menu/MenuWrapTransform.java",
                "status": "modified",
                "changes": 8,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/menu/MenuWrapTransform.java?ref=94bc3f63cad9bb1ca02f5e97afdb6d5c4c4123e8",
                "patch": "@@ -182,13 +182,15 @@ public void renderMenu() throws IOException {\n                 String menuName = (String)templateCtx.get(\"menuName\");\n                 String menuWrapperClassName = (String)templateCtx.get(\"menuWrapperClassName\");\n                 HtmlMenuWrapper menuWrapper = HtmlMenuWrapper.getMenuWrapper(request, response, session, menuDefFile, menuName, menuWrapperClassName);\n-                String associatedContentId = (String)templateCtx.get(\"associatedContentId\");\n-                menuWrapper.putInContext(\"defaultAssociatedContentId\", associatedContentId);\n-                menuWrapper.putInContext(\"currentValue\", view);\n \n                 if (menuWrapper == null) {\n                     throw new IOException(\"HtmlMenuWrapper with def file:\" + menuDefFile + \" menuName:\" + menuName + \" and HtmlMenuWrapper class:\" + menuWrapperClassName + \" could not be instantiated.\");\n                 }\n+\n+                String associatedContentId = (String)templateCtx.get(\"associatedContentId\");\n+                menuWrapper.putInContext(\"defaultAssociatedContentId\", associatedContentId);\n+                menuWrapper.putInContext(\"currentValue\", view);\n+\n                 String menuStr = menuWrapper.renderMenuString();\n                 out.write(menuStr);\n             }",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix a NPE I got on actualCurrencyAmount while working with R9.04. \nSince the files are identical I commit in trunk and will backport\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@927870 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ad2a20a5207b3017f625b1a5bb0327587887c9ae",
        "parent": "https://github.com/apache/ofbiz-framework/commit/73bfcba7961fb0ea64510169f7009f12fddb3501",
        "bug_id": "ofbiz-framework_229",
        "file": [
            {
                "sha": "400cada9700b5cb93efd18e9c55344ce3436d3fb",
                "filename": "applications/accounting/webapp/accounting/WEB-INF/actions/invoice/ListNotAppliedPayments.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ad2a20a5207b3017f625b1a5bb0327587887c9ae/applications/accounting/webapp/accounting/WEB-INF/actions/invoice/ListNotAppliedPayments.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ad2a20a5207b3017f625b1a5bb0327587887c9ae/applications/accounting/webapp/accounting/WEB-INF/actions/invoice/ListNotAppliedPayments.groovy",
                "status": "modified",
                "changes": 12,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/webapp/accounting/WEB-INF/actions/invoice/ListNotAppliedPayments.groovy?ref=ad2a20a5207b3017f625b1a5bb0327587887c9ae",
                "patch": "@@ -68,13 +68,19 @@ List getPayments(List payments, boolean actual) {\n             if (actual) {\n                 paymentMap.amount = payment.actualCurrencyAmount;\n                 paymentMap.currencyUomId = payment.actualCurrencyUomId;\n-                paymentToApply = payment.getBigDecimal(\"actualCurrencyAmount\").setScale(decimals,rounding).subtract(paymentApplied);\n+                paymentToApply = payment.getBigDecimal(\"actualCurrencyAmount\");\n+                if (paymentToApply) {\n+                    paymentToApply = paymentToApply.setScale(decimals,rounding).subtract(paymentApplied);\n+                }\n             } else {\n                 paymentMap.amount = payment.amount;\n                 paymentMap.currencyUomId = payment.currencyUomId;\n-                paymentToApply = payment.getBigDecimal(\"amount\").setScale(decimals,rounding).subtract(paymentApplied);\n+                paymentToApply = payment.getBigDecimal(\"amount\");\n+                if (paymentToApply) {\n+                    paymentToApply = paymentToApply.setScale(decimals,rounding).subtract(paymentApplied);\n+                }\n             }\n-            if (paymentToApply.signum() == 1) {\n+            if (paymentToApply && paymentToApply.signum() == 1) {\n                 paymentMap.paymentId = payment.paymentId;\n                 paymentMap.effectiveDate = payment.effectiveDate;\n                 if (paymentToApply.compareTo(invoiceToApply) < 0 ) {",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied patch from jira issue - OFBIZ-3487 - Improvement on CMS component.\n1.  Adding sequenceNum field on ContentPurpose entity.\n2. Adding ContentAssocAndContentPurpose view entity.\n3. Fixed NPE issue on WebSiteCMSContent.ftl file.\n4. Created ContentPurposeType data for \"LANDING_PAGE_IMAGE\".\n\nThanks Amit & Vivek for the contribution\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@911774 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/62a47436c3ae2674afc539700aa948068bafbf5b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/5d3af78219d5b7fd28c01c77e7ad10421cb9fd32",
        "bug_id": "ofbiz-framework_230",
        "file": [
            {
                "sha": "2e3118be365af755ed1a612fa0068fc47cb4bb32",
                "filename": "applications/content/data/ContentOperationData.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/data/ContentOperationData.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/data/ContentOperationData.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/data/ContentOperationData.xml?ref=62a47436c3ae2674afc539700aa948068bafbf5b",
                "patch": "@@ -68,6 +68,7 @@ under the License.\n     <ContentPurposeType contentPurposeTypeId=\"USER\" description=\"User\"/>\n     <ContentPurposeType contentPurposeTypeId=\"FAQ\" description=\"FAQ\"/>\n     <ContentPurposeType contentPurposeTypeId=\"SOURCE\" description=\"General Source\"/>\n+    <ContentPurposeType contentPurposeTypeId=\"LANDING_PAGE_IMAGE\" description=\"Landing Page Image\"/>\n \n     <ContentPurposeOperation contentPurposeTypeId=\"ARTICLE\" contentOperationId=\"CONTENT_CREATE\" roleTypeId=\"CONTENT_AUTHOR\" statusId=\"CTNT_PUBLISHED\" privilegeEnumId=\"CNT_PRV_NA_\"/>\n     <ContentPurposeOperation contentPurposeTypeId=\"ARTICLE\" contentOperationId=\"CONTENT_CREATE\" roleTypeId=\"CONTENT_AUTHOR\" statusId=\"_NA_\" privilegeEnumId=\"CNT_PRV_NA_\"/>",
                "deletions": 0
            },
            {
                "sha": "9c2432de99482e88a650241d9041965094be37d8",
                "filename": "applications/content/entitydef/entitymodel.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/entitydef/entitymodel.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/entitydef/entitymodel.xml",
                "status": "modified",
                "changes": 12,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/entitydef/entitymodel.xml?ref=62a47436c3ae2674afc539700aa948068bafbf5b",
                "patch": "@@ -540,6 +540,7 @@ under the License.\n             title=\"Content Purpose Entity\">\n       <field name=\"contentId\" type=\"id-ne\"></field>\n       <field name=\"contentPurposeTypeId\" type=\"id-ne\"></field>\n+      <field name=\"sequenceNum\" type=\"numeric\"></field>\n       <prim-key field=\"contentId\"/>\n       <prim-key field=\"contentPurposeTypeId\"/>\n       <relation type=\"one\" fk-name=\"CONTENT_PRP\" rel-entity-name=\"Content\">\n@@ -1618,4 +1619,15 @@ under the License.\n             <key-map field-name=\"webSiteId\"/>\n         </relation>\n     </entity>\n+    <view-entity entity-name=\"ContentAssocAndContentPurpose\"\n+            package-name=\"org.ofbiz.content.compdoc\"\n+            title=\"ContentAssoc and ContentPurpose View Entity\">\n+        <member-entity entity-alias=\"CNTA\" entity-name=\"ContentAssoc\"/>\n+        <member-entity entity-alias=\"CNTP\" entity-name=\"ContentPurpose\"/>\n+        <alias-all entity-alias=\"CNTA\"/>\n+        <alias-all entity-alias=\"CNTP\"/>\n+        <view-link entity-alias=\"CNTA\" rel-entity-alias=\"CNTP\">\n+            <key-map field-name=\"contentIdTo\" rel-field-name=\"contentId\"/>\n+        </view-link>\n+    </view-entity>\n </entitymodel>",
                "deletions": 0
            },
            {
                "sha": "ee8679d2793f03e1ef4d35ba0a0154ac46a7ad5e",
                "filename": "applications/content/servicedef/services_content.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/servicedef/services_content.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/servicedef/services_content.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/servicedef/services_content.xml?ref=62a47436c3ae2674afc539700aa948068bafbf5b",
                "patch": "@@ -46,8 +46,8 @@\n         <attribute name=\"mapKey\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n         <attribute name=\"contentId\" type=\"String\" mode=\"INOUT\" optional=\"true\"/>\n         <attribute name=\"fromDate\" type=\"Timestamp\" mode=\"IN\" optional=\"true\"/>\n+        <attribute name=\"sequenceNum\" type=\"Long\" mode=\"IN\" optional=\"true\"/>\n         <override name=\"contentTypeId\" default-value=\"DOCUMENT\"/>\n-\n     </service>\n \n     <service name=\"createTextAndUploadedContent\" engine=\"simple\" auth=\"true\"",
                "deletions": 1
            },
            {
                "sha": "54bad603a95c9d86fdd2f53823f6ca7e7daaefc3",
                "filename": "applications/content/webapp/content/website/WebSiteCMSContent.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/webapp/content/website/WebSiteCMSContent.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/webapp/content/website/WebSiteCMSContent.ftl",
                "status": "modified",
                "changes": 15,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/webapp/content/website/WebSiteCMSContent.ftl?ref=62a47436c3ae2674afc539700aa948068bafbf5b",
                "patch": "@@ -127,6 +127,9 @@\n     <#if (!contentRoot?has_content)>\n         <#assign contentRoot = parameters.contentRoot/>\n     </#if>\n+    <#if (currentPurposes?has_content)>\n+        <#assign currentPurpose = Static[\"org.ofbiz.entity.util.EntityUtil\"].getFirst(currentPurposes) />\n+    </#if>\n     <#if (content?has_content)>\n         <#assign actionPrefix = \"/update\"/>\n     <#else>\n@@ -191,8 +194,8 @@\n             <td class=\"label\">${uiLabelMap.CommonPurpose}</td>\n             <td>\n                 <select name=\"contentPurposeTypeId\">\n-                    <#if (currentPurposes?has_content)>\n-                        <#assign purpose = currentPurposes[0].getRelatedOne(\"ContentPurposeType\")/>\n+                    <#if (currentPurpose?has_content)>\n+                        <#assign purpose = currentPurpose.getRelatedOne(\"ContentPurposeType\")/>\n                         <option value=\"${purpose.contentPurposeTypeId}\">${purpose.description?default(purpose.contentPurposeTypeId)}</option>\n                         <option value=\"${purpose.contentPurposeTypeId}\">----</option>\n                     <#else>\n@@ -205,6 +208,12 @@\n                 </select>\n             </td>\n           </tr>\n+          <tr>\n+            <td class=\"label\">${uiLabelMap.CommonSequenceNum}</td>\n+            <td>\n+              <input type=\"text\" name=\"sequenceNum\" value=\"${(currentPurpose.sequenceNum)?if_exists}\" size=\"5\" />\n+            </td>\n+          </tr>\n           <tr>\n             <td class=\"label\">${uiLabelMap.ContentDataType}</td>\n             <td>\n@@ -247,7 +256,7 @@\n                     <#if (content?has_content)>\n                         <#if (content.templateDataResourceId?has_content && content.templateDataResourceId != \"NONE\")>\n                             <#assign template = content.getRelatedOne(\"TemplateDataResource\")/>\n-                            <option value=\"${template.dataResourceId}\">${template.dataResourceName}</option>\n+                            <option value=\"${template.dataResourceId}\">${template.dataResourceName?if_exists}</option>\n                             <option value=\"${template.dataResourceId}\">----</option>\n                         </#if>\n                     </#if>",
                "deletions": 3
            },
            {
                "sha": "ec0d60647e0a0f9e35114f1cb4a217f02c1749d3",
                "filename": "applications/content/widget/WebSiteScreens.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/widget/WebSiteScreens.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/62a47436c3ae2674afc539700aa948068bafbf5b/applications/content/widget/WebSiteScreens.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/widget/WebSiteScreens.xml?ref=62a47436c3ae2674afc539700aa948068bafbf5b",
                "patch": "@@ -221,6 +221,7 @@ under the License.\n                 <entity-one entity-name=\"ElectronicText\" value-field=\"dataText\">\n                     <field-map field-name=\"dataResourceId\" from-field=\"content.dataResourceId\"/>\n                 </entity-one>\n+                <set field=\"parameters.fromDate\" type=\"Timestamp\" from-field=\"parameters.fromDate\"/>\n                 <entity-one entity-name=\"ContentAssoc\" value-field=\"assoc\">\n                     <field-map field-name=\"contentId\" from-field=\"parameters.contentIdFrom\"/>\n                     <field-map field-name=\"contentIdTo\" from-field=\"parameters.contentId\"/>",
                "deletions": 0
            },
            {
                "sha": "fa6c8ec4ec0057b0ae326649a9672fef399e5d34",
                "filename": "applications/product/data/ProductTypeData.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/62a47436c3ae2674afc539700aa948068bafbf5b/applications/product/data/ProductTypeData.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/62a47436c3ae2674afc539700aa948068bafbf5b/applications/product/data/ProductTypeData.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/data/ProductTypeData.xml?ref=62a47436c3ae2674afc539700aa948068bafbf5b",
                "patch": "@@ -422,6 +422,7 @@ under the License.\n     <ProductPriceType description=\"Competitive Price\" productPriceTypeId=\"COMPETITIVE_PRICE\"/>\n     <ProductPriceType description=\"Wholesale Price\" productPriceTypeId=\"WHOLESALE_PRICE\"/>\n     <ProductPriceType description=\"Special Promo Price\" productPriceTypeId=\"SPECIAL_PROMO_PRICE\"/>\n+    <ProductPriceType description=\"Box Price\" productPriceTypeId=\"BOX_PRICE\"/>\n \n     <ProductPricePurpose description=\"Purchase/Initial\" productPricePurposeId=\"PURCHASE\"/>\n     <ProductPricePurpose description=\"Recurring Charge\" productPricePurposeId=\"RECURRING_CHARGE\"/>",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix a possible NPE (in POS but I guess not only) when a Product have been created without a ProductType associated (from import data).\nThe reason of this informative log is to facilitate the search then...\nCan't hurt anyway\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@893656 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/ba42abab449edd1787895941af1d146c81fa93e0",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6819b007e03bf5f1c4c18c5c35ba762ef01eed28",
        "bug_id": "ofbiz-framework_231",
        "file": [
            {
                "sha": "34c6a55a869765c5733ab72ca8e6316e87b4641c",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/ba42abab449edd1787895941af1d146c81fa93e0/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/ba42abab449edd1787895941af1d146c81fa93e0/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "status": "modified",
                "changes": 12,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java?ref=ba42abab449edd1787895941af1d146c81fa93e0",
                "patch": "@@ -716,10 +716,16 @@ protected ShoppingCartItem(GenericValue product, Map additionalProductFeatureAnd\n         if (parentProduct != null)\n             this.parentProductId = _parentProduct.getString(\"productId\");\n         if (UtilValidate.isEmpty(itemType)) {\n-            if (_product.getString(\"productTypeId\").equals(\"ASSET_USAGE\")) {\n-                this.itemType = \"RENTAL_ORDER_ITEM\";  // will create additional workeffort/asset usage records\n+            if (UtilValidate.isNotEmpty(_product)) {\n+                if (_product.getString(\"productTypeId\").equals(\"ASSET_USAGE\")) {\n+                    this.itemType = \"RENTAL_ORDER_ITEM\";  // will create additional workeffort/asset usage records\n+                } else {\n+                    this.itemType = \"PRODUCT_ORDER_ITEM\";\n+                }\n             } else {\n-                this.itemType = \"PRODUCT_ORDER_ITEM\";\n+        \tDebug.logError(\"Error calling ShoppingCartItem (trying to creates new ShoppingCartItem object).\" +\n+        \t\t\t\" Check that there is a type for this product \", module);\n+        \treturn;\n             }\n         } else {\n             this.itemType = itemType;",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "In case of variant product it returns NPE while calculating purchase price and base price is not been set or we can say data is not prepared for it.\n\nThanks Amit for your help.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@882644 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3b245ade905100969cd8ac45788f972953465c4f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/9ae56f1ef17e13d60936c51d41a30e6368933caa",
        "bug_id": "ofbiz-framework_232",
        "file": [
            {
                "sha": "0e39cbd8d88564c91c5e782b6c044b3607456d3c",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductDetail.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3b245ade905100969cd8ac45788f972953465c4f/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductDetail.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3b245ade905100969cd8ac45788f972953465c4f/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductDetail.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductDetail.groovy?ref=3b245ade905100969cd8ac45788f972953465c4f",
                "patch": "@@ -383,7 +383,7 @@ if (product) {\n                                 variantPriceMap = dispatcher.runSync(\"calculatePurchasePrice\", priceContext);\n                             }\n                             amt.append(\" if (sku == \\\"\" + variant.productId + \"\\\") return \\\"\" + (variant.requireAmount ?: \"N\") + \"\\\"; \");\n-                            if (variantPriceMap) {\n+                            if (variantPriceMap && variantPriceMap.basePrice) {\n                                 variantPriceJS.append(\"  if (sku == \\\"\" + variant.productId + \"\\\") return \\\"\" + numberFormat.format(variantPriceMap.basePrice) + \"\\\"; \");\n                             }\n                         }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Prevent an NPE when a primaryOrderId hasn't been supplied, also set partyIdFrom using the facility.ownerPartyId in this situation.\n(This bug was exposed using the unit tests)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@826206 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2963c58a36de09169753becb58cc39f39e9d4dd0",
        "parent": "https://github.com/apache/ofbiz-framework/commit/40a72014a102c8aa6ca7b97f77b02ead168e567e",
        "bug_id": "ofbiz-framework_233",
        "file": [
            {
                "sha": "5e613493c8aa876a5aad06a8413b0288d4b45f44",
                "filename": "applications/product/src/org/ofbiz/shipment/packing/PackingSession.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2963c58a36de09169753becb58cc39f39e9d4dd0/applications/product/src/org/ofbiz/shipment/packing/PackingSession.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2963c58a36de09169753becb58cc39f39e9d4dd0/applications/product/src/org/ofbiz/shipment/packing/PackingSession.java",
                "status": "modified",
                "changes": 38,
                "additions": 23,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/shipment/packing/PackingSession.java?ref=2963c58a36de09169753becb58cc39f39e9d4dd0",
                "patch": "@@ -725,25 +725,33 @@ protected void createShipment() throws GeneralException {\n         if (UtilValidate.isNotEmpty(orderRoleShipTo)) {\n             newShipment.put(\"partyIdTo\", orderRoleShipTo.getString(\"partyId\"));\n         }\n-        String partyIdFrom = null; \n-        GenericValue orderItemShipGroup = EntityUtil.getFirst(delegator.findByAnd(\"OrderItemShipGroup\", UtilMisc.toMap(\"orderId\", primaryOrderId, \"shipGroupSeqId\", primaryShipGrp)));\n-        if (UtilValidate.isNotEmpty(orderItemShipGroup.getString(\"vendorPartyId\"))) {\n-            partyIdFrom = orderItemShipGroup.getString(\"vendorPartyId\");\n-        } else if (UtilValidate.isNotEmpty(orderItemShipGroup.getString(\"facilityId\"))) {\n-            GenericValue facility = delegator.findOne(\"Facility\", UtilMisc.toMap(\"facilityId\", orderItemShipGroup.getString(\"facilityId\")), false);\n+        String partyIdFrom = null;\n+        if (primaryOrderId != null) {\n+            GenericValue orderItemShipGroup = EntityUtil.getFirst(delegator.findByAnd(\"OrderItemShipGroup\", UtilMisc.toMap(\"orderId\", primaryOrderId, \"shipGroupSeqId\", primaryShipGrp)));\n+            if (UtilValidate.isNotEmpty(orderItemShipGroup.getString(\"vendorPartyId\"))) {\n+                partyIdFrom = orderItemShipGroup.getString(\"vendorPartyId\");\n+            } else if (UtilValidate.isNotEmpty(orderItemShipGroup.getString(\"facilityId\"))) {\n+                GenericValue facility = delegator.findOne(\"Facility\", UtilMisc.toMap(\"facilityId\", orderItemShipGroup.getString(\"facilityId\")), false);\n+                if (UtilValidate.isNotEmpty(facility.getString(\"ownerPartyId\"))) {\n+                    partyIdFrom = facility.getString(\"ownerPartyId\");\n+                }\n+            }\n+            if (UtilValidate.isEmpty(partyIdFrom)) {\n+                GenericValue orderRoleShipFrom = EntityUtil.getFirst(delegator.findByAnd(\"OrderRole\", UtilMisc.toMap(\"orderId\", primaryOrderId, \"roleTypeId\", \"SHIP_FROM_VENDOR\")));\n+                if (UtilValidate.isNotEmpty(orderRoleShipFrom)) {\n+                    partyIdFrom = orderRoleShipFrom.getString(\"partyId\");\n+                } else {\n+                    orderRoleShipFrom = EntityUtil.getFirst(delegator.findByAnd(\"OrderRole\", UtilMisc.toMap(\"orderId\", primaryOrderId, \"roleTypeId\", \"BILL_FROM_VENDOR\")));\n+                    partyIdFrom = orderRoleShipFrom.getString(\"partyId\");\n+                }\n+            }\n+        } else if (this.facilityId != null) {\n+            GenericValue facility = delegator.findOne(\"Facility\", UtilMisc.toMap(\"facilityId\", this.facilityId), false);\n             if (UtilValidate.isNotEmpty(facility.getString(\"ownerPartyId\"))) {\n                 partyIdFrom = facility.getString(\"ownerPartyId\");\n             }\n         }\n-        if (UtilValidate.isEmpty(partyIdFrom)) {\n-            GenericValue orderRoleShipFrom = EntityUtil.getFirst(delegator.findByAnd(\"OrderRole\", UtilMisc.toMap(\"orderId\", primaryOrderId, \"roleTypeId\", \"SHIP_FROM_VENDOR\")));\n-            if (UtilValidate.isNotEmpty(orderRoleShipFrom)) {\n-                partyIdFrom = orderRoleShipFrom.getString(\"partyId\");\n-            } else {\n-                orderRoleShipFrom = EntityUtil.getFirst(delegator.findByAnd(\"OrderRole\", UtilMisc.toMap(\"orderId\", primaryOrderId, \"roleTypeId\", \"BILL_FROM_VENDOR\")));\n-                partyIdFrom = orderRoleShipFrom.getString(\"partyId\");\n-            }\n-        }\n+\n         newShipment.put(\"partyIdFrom\", partyIdFrom);\n         Debug.log(\"Creating new shipment with context: \" + newShipment, module);\n         Map<String, Object> newShipResp = this.getDispatcher().runSync(\"createShipment\", newShipment);",
                "deletions": 15
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix: NPE occurred while printing pick sheet from Order Detail Page when the order is created using offline payment method.\nApplied patch from Chirag Manocha, as reported by Ratnesh Upadhyay in jira OFBIZ-2563 (https://issues.apache.org/jira/browse/OFBIZ-2563) \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@781685 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b7316bab7c76ecd7da6bd994c0461cc8a80548c5",
        "parent": "https://github.com/apache/ofbiz-framework/commit/022c16920e0578b69406f018730bf1d078360201",
        "bug_id": "ofbiz-framework_234",
        "file": [
            {
                "sha": "06c109146037600186c26887089c8fd66f07ca65",
                "filename": "applications/product/webapp/facility/WEB-INF/actions/shipment/PrintPickSheets.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b7316bab7c76ecd7da6bd994c0461cc8a80548c5/applications/product/webapp/facility/WEB-INF/actions/shipment/PrintPickSheets.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b7316bab7c76ecd7da6bd994c0461cc8a80548c5/applications/product/webapp/facility/WEB-INF/actions/shipment/PrintPickSheets.groovy",
                "status": "modified",
                "changes": 12,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/WEB-INF/actions/shipment/PrintPickSheets.groovy?ref=b7316bab7c76ecd7da6bd994c0461cc8a80548c5",
                "patch": "@@ -58,8 +58,12 @@ if (toPrintOrders) {\n                     orderId = orderHeader.orderId;\n                     orderMap.orderId = orderId;\n                     orderMap.orderDate = orderHeader.orderDate;\n-                    billingContactMechId = EntityUtil.getFirst(delegator.findByAnd(\"OrderContactMech\", [orderId : orderId, contactMechPurposeTypeId : \"BILLING_LOCATION\"])).contactMechId;\n-                    billingAddress = delegator.findOne(\"PostalAddress\", [contactMechId : billingContactMechId], false);\n+                    billingOrderContactMechs = [];\n+                    billingOrderContactMechs = delegator.findByAnd(\"OrderContactMech\", [orderId : orderId, contactMechPurposeTypeId : \"BILLING_LOCATION\"]);\n+                    if (billingOrderContactMechs.size() > 0) {\n+                        billingContactMechId = EntityUtil.getFirst(billingOrderContactMechs).contactMechId;\n+                        billingAddress = delegator.findOne(\"PostalAddress\", [contactMechId : billingContactMechId], false);\n+                    }\n                     shippingContactMechId = EntityUtil.getFirst(delegator.findByAnd(\"OrderContactMech\", [orderId : orderId, contactMechPurposeTypeId : \"SHIPPING_LOCATION\"])).contactMechId;\n                     shippingAddress = delegator.findOne(\"PostalAddress\", [contactMechId : shippingContactMechId], false);\n                     orderItemShipGroups.each { orderItemShipGroup ->\n@@ -70,7 +74,9 @@ if (toPrintOrders) {\n                             orderMap.carrierPartyId = orderItemShipGroup.carrierPartyId;\n                         }\n                         orderMap.shippingAddress = shippingAddress;\n-                        orderMap.billingAddress = billingAddress;\n+                        if (billingOrderContactMechs.size() > 0) {\n+                            orderMap.billingAddress = billingAddress;\n+                        }\n                         orderInfoMap = [:];\n                         orderInfoMap.(orderHeader.orderId) = orderMap;\n                     }",
                "deletions": 3
            },
            {
                "sha": "5943ffa6ee2c3726d99d84bb4a5f33cf425e6543",
                "filename": "applications/product/webapp/facility/facility/PrintPickSheets.fo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b7316bab7c76ecd7da6bd994c0461cc8a80548c5/applications/product/webapp/facility/facility/PrintPickSheets.fo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b7316bab7c76ecd7da6bd994c0461cc8a80548c5/applications/product/webapp/facility/facility/PrintPickSheets.fo.ftl",
                "status": "modified",
                "changes": 20,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/facility/PrintPickSheets.fo.ftl?ref=b7316bab7c76ecd7da6bd994c0461cc8a80548c5",
                "patch": "@@ -37,7 +37,9 @@ under the License.\n                         <#if orderInfo.get(\"${orderId}\")?exists>\n                             <#assign orderDetail = orderInfo.get(\"${orderId}\")>\n                             <#assign orderDate = orderDetail.orderDate>\n-                            <#assign billAddress = orderDetail.billingAddress>\n+                            <#if orderDetail.billingAddress?exists>\n+                                <#assign billAddress = orderDetail.billingAddress>\n+                            </#if>\n                             <#assign shipAddress = orderDetail.shippingAddress>\n                             <#assign shipmentMethodType = orderDetail.shipmentMethodType>\n                             <#assign carrierPartyId = orderDetail.carrierPartyId>\n@@ -84,13 +86,15 @@ under the License.\n                                                                  <fo:table-body>\n                                                                      <fo:table-row>\n                                                                          <fo:table-cell>\n-                                                                             <fo:block font-weight=\"bold\">${uiLabelMap.OrderOrderBillToParty}:</fo:block>\n-                                                                             <fo:block> ${billAddress.toName?if_exists}</fo:block>\n-                                                                             <fo:block> ${billAddress.address1?if_exists}</fo:block>\n-                                                                             <fo:block> ${billAddress.city?if_exists}</fo:block>\n-                                                                             <fo:block> ${billAddress.countryGeoId?if_exists}</fo:block>\n-                                                                             <fo:block> ${billAddress.postalCode?if_exists}</fo:block>\n-                                                                             <fo:block> ${billAddress.stateProvinceGeoId?if_exists}</fo:block>\n+                                                                             <#if billAddress?has_content>\n+                                                                                 <fo:block font-weight=\"bold\">${uiLabelMap.OrderOrderBillToParty}:</fo:block>\n+                                                                                 <fo:block> ${billAddress.toName?if_exists}</fo:block>\n+                                                                                 <fo:block> ${billAddress.address1?if_exists}</fo:block>\n+                                                                                 <fo:block> ${billAddress.city?if_exists}</fo:block>\n+                                                                                 <fo:block> ${billAddress.countryGeoId?if_exists}</fo:block>\n+                                                                                 <fo:block> ${billAddress.postalCode?if_exists}</fo:block>\n+                                                                                 <fo:block> ${billAddress.stateProvinceGeoId?if_exists}</fo:block>\n+                                                                             </#if>\n                                                                          </fo:table-cell>\n                                                                      </fo:table-row>\n                                                                  </fo:table-body>",
                "deletions": 8
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Sumit Porwal \"Showing NPE when click on add to cart in configurable products.\" (https://issues.apache.org/jira/browse/OFBIZ-2191) - OFBIZ-2191\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@744833 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/7b2122487eac5e0e941fd8e484be64a4c652da5b",
        "parent": "https://github.com/apache/ofbiz-framework/commit/aff39bec18db9a59771e903e98796c9186924e7e",
        "bug_id": "ofbiz-framework_235",
        "file": [
            {
                "sha": "6db580847f24eb75e1beb62018fb9a7c473eb05e",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7b2122487eac5e0e941fd8e484be64a4c652da5b/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7b2122487eac5e0e941fd8e484be64a4c652da5b/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java?ref=7b2122487eac5e0e941fd8e484be64a4c652da5b",
                "patch": "@@ -1178,7 +1178,7 @@ public void updatePrice(LocalDispatcher dispatcher, ShoppingCart cart) throws Ca\n                         this.setBasePrice(configWrapper.getTotalPrice());\n                         // Check if price display with taxes\n                         GenericValue productStore = ProductStoreWorker.getProductStore(cart.getProductStoreId(), delegator);\n-                        if (UtilValidate.isNotEmpty(productStore) && productStore.get(\"showPricesWithVatTax\").equals(\"Y\")){\n+                        if (UtilValidate.isNotEmpty(productStore) && \"Y\".equals(productStore.get(\"showPricesWithVatTax\"))){\n                             BigDecimal totalPrice = configWrapper.getTotalPrice();\n                             // Get Taxes\n                             Map totalPriceWithTaxMap = dispatcher.runSync(\"calcTaxForDisplay\", UtilMisc.toMap(\"basePrice\", totalPrice, \"productId\", this.productId, \"productStoreId\", cart.getProductStoreId()));",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix NPE. Applied patch from OFBIZ-2134 (https://issues.apache.org/jira/browse/OFBIZ-2134)\nThanks Mridul Pathak for patch and Pranay Pandey for testing.  \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@736297 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5949f9f0713f7cb3390427077caa308bfda7c34f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/312db5de21fa56e23ad3050ddae94e4a343483be",
        "bug_id": "ofbiz-framework_236",
        "file": [
            {
                "sha": "10fb1834e579293f1869cb7a60dfd2786617b6e4",
                "filename": "applications/product/src/org/ofbiz/product/product/ProductServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5949f9f0713f7cb3390427077caa308bfda7c34f/applications/product/src/org/ofbiz/product/product/ProductServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5949f9f0713f7cb3390427077caa308bfda7c34f/applications/product/src/org/ofbiz/product/product/ProductServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/product/ProductServices.java?ref=5949f9f0713f7cb3390427077caa308bfda7c34f",
                "patch": "@@ -998,7 +998,7 @@\n                                 ServiceUtil.returnError(e.getMessage());\n                             }\n                         } else {\n-                            dataResourceCtx.put(\"dataResourceTypeId\", \"URL_RESOURCE\");\n+                            dataResourceCtx.put(\"dataResourceTypeId\", \"SHORT_TEXT\");\n                             Map<String, Object> dataResourceResult = FastMap.newInstance();\n                             try {\n                                 dataResourceResult = dispatcher.runSync(\"createDataResource\", dataResourceCtx);\n@@ -1028,7 +1028,7 @@\n                         }\n                     }\n                 } else {\n-                    dataResourceCtx.put(\"dataResourceTypeId\", \"URL_RESOURCE\");\n+                    dataResourceCtx.put(\"dataResourceTypeId\", \"SHORT_TEXT\");\n                     Map<String, Object> dataResourceResult = FastMap.newInstance();\n                     try {\n                         dataResourceResult = dispatcher.runSync(\"createDataResource\", dataResourceCtx);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied patch from JIRA issue no.(https://issues.apache.org/jira/browse/OFBIZ-1989) -: Give NPE in rendering the Survey page.  \n\nThanks Sumit Pandit for your contribution.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@702740 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/d84e03e32711b2bebce400131cfa3b7b601adee4",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b35e3b862afdbcc441dbccf6425eadf45b39e967",
        "bug_id": "ofbiz-framework_237",
        "file": [
            {
                "sha": "8c538e17d17d7409a89effa5ed335f3214ed4d76",
                "filename": "applications/content/src/org/ofbiz/content/survey/SurveyWrapper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/d84e03e32711b2bebce400131cfa3b7b601adee4/applications/content/src/org/ofbiz/content/survey/SurveyWrapper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/d84e03e32711b2bebce400131cfa3b7b601adee4/applications/content/src/org/ofbiz/content/survey/SurveyWrapper.java",
                "status": "modified",
                "changes": 12,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/survey/SurveyWrapper.java?ref=d84e03e32711b2bebce400131cfa3b7b601adee4",
                "patch": "@@ -592,15 +592,21 @@ public Map getResultInfo(GenericValue question) throws SurveyWrapperException {\n                     switch (type) {\n                         case 1:\n                             Long n = value.getLong(\"numericResponse\");\n-                            result[1] += n.longValue();\n+                            if (UtilValidate.isNotEmpty(n)) {\n+                                result[1] += n.longValue();\n+                            }\n                             break;\n                         case 2:\n                             Double c = value.getDouble(\"currencyResponse\");\n-                            result[1] += (((double) Math.round((c.doubleValue() - c.doubleValue()) * 100)) / 100);\n+                            if (UtilValidate.isNotEmpty(c)) {\n+                                result[1] += (((double) Math.round((c.doubleValue() - c.doubleValue()) * 100)) / 100);\n+                            }\n                             break;\n                         case 3:\n                             Double f = value.getDouble(\"floatResponse\");\n-                            result[1] += f.doubleValue();\n+                            if (UtilValidate.isNotEmpty(f)) {\n+                                result[1] += f.doubleValue();\n+                            }\n                             break;\n                     }\n                     result[0]++; // increment the count",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Simplified Scott's FlexibleStringExpander NPE fix and updated the JavaDocs.\n\nMany thanks to Scott for catching that, and many thanks to David Jones for his suggestions on the refactor.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@688348 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/eff5f89d3907edb6cd0294c6ae393319a6b07aa1",
        "parent": "https://github.com/apache/ofbiz-framework/commit/a9fc92fcc4917e4ef3ab465462512496c5f26008",
        "bug_id": "ofbiz-framework_238",
        "file": [
            {
                "sha": "55f85d20d9d997ff8048893263e9c863f621f978",
                "filename": "framework/base/src/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/eff5f89d3907edb6cd0294c6ae393319a6b07aa1/framework/base/src/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/eff5f89d3907edb6cd0294c6ae393319a6b07aa1/framework/base/src/org/ofbiz/base/util/string/FlexibleStringExpander.java",
                "status": "modified",
                "changes": 84,
                "additions": 22,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/org/ofbiz/base/util/string/FlexibleStringExpander.java?ref=eff5f89d3907edb6cd0294c6ae393319a6b07aa1",
                "patch": "@@ -77,25 +77,17 @@ public String getOriginal() {\n         return this.orig;\n     }\n \n-    /** \n-     * This expands the pre-parsed String given the context passed in. Note that\n-     * pre-parsing can only parse the top-level place-holders and if there are \n-     * nested expansions they will be done on the fly instead of pre-parsed because\n-     * they are dependent on the context which isn't known until expansion time.\n-     * \n+    /** This expands the pre-parsed String given the context passed in. A\n+     * null context argument will return the original String.\n      * @param context A context Map containing the variable values\n      * @return The original String expanded by replacing varaible place holders.\n      */    \n     public String expandString(Map<String, ? extends Object> context) {\n         return this.expandString(context, null, null);\n     }\n     \n-    /** \n-     * This expands the pre-parsed String given the context passed in. Note that\n-     * pre-parsing can only parse the top-level place-holders and if there are \n-     * nested expansions they will be done on the fly instead of pre-parsed because\n-     * they are dependent on the context which isn't known until expansion time.\n-     * \n+    /** This expands the pre-parsed String given the context passed in. A\n+     * null context argument will return the original String.\n      * @param context A context Map containing the variable values\n      * @param locale the current set locale\n      * @return The original String expanded by replacing varaible place holders.\n@@ -104,38 +96,30 @@ public String expandString(Map<String, ? extends Object> context, Locale locale)\n         return this.expandString(context, null, locale);\n     }\n     \n-    /** \n-     * This expands the pre-parsed String given the context passed in. Note that\n-     * pre-parsing can only parse the top-level place-holders and if there are \n-     * nested expansions they will be done on the fly instead of pre-parsed because\n-     * they are dependent on the context which isn't known until expansion time.\n-     * \n+    /** This expands the pre-parsed String given the context passed in. A\n+     * null context argument will return the original String.\n      * @param context A context Map containing the variable values\n      * @param timeZone the current set time zone\n      * @param locale the current set locale\n      * @return The original String expanded by replacing varaible place holders.\n      */    \n     public String expandString(Map<String, ? extends Object> context, TimeZone timeZone, Locale locale) {\n-        if (this.strElems == null) {\n+        if (this.strElems == null || context == null) {\n             return this.orig == null ? \"\" : this.orig;\n         }\n         if (locale == null) {\n-            if (context != null) {\n-                locale = (Locale) context.get(\"locale\");\n-                if (locale == null && context.containsKey(\"autoUserLogin\")) {\n-                    locale = UtilMisc.ensureLocale(((Map) context.get(\"autoUserLogin\")).get(\"lastLocale\"));\n-                }\n+            locale = (Locale) context.get(\"locale\");\n+            if (locale == null && context.containsKey(\"autoUserLogin\")) {\n+                locale = UtilMisc.ensureLocale(((Map) context.get(\"autoUserLogin\")).get(\"lastLocale\"));\n             }\n             if (locale == null) {\n                 locale = Locale.getDefault();\n             }\n         }\n         if (timeZone == null) {\n-            if (context != null) {\n-                timeZone = (TimeZone) context.get(\"timeZone\");\n-                if (timeZone == null && context.containsKey(\"autoUserLogin\")) {\n-                    timeZone = UtilDateTime.toTimeZone((String)((Map) context.get(\"autoUserLogin\")).get(\"lastTimeZone\"));\n-                }\n+            timeZone = (TimeZone) context.get(\"timeZone\");\n+            if (timeZone == null && context.containsKey(\"autoUserLogin\")) {\n+                timeZone = UtilDateTime.toTimeZone((String)((Map) context.get(\"autoUserLogin\")).get(\"lastTimeZone\"));\n             }\n             if (timeZone == null) {\n                 timeZone = TimeZone.getDefault();\n@@ -178,17 +162,9 @@ public static FlexibleStringExpander getInstance(String original) {\n         return fse;\n     }\n     \n-    /**\n-     * Does on-the-fly parsing and expansion of the original String using\n-     * varaible values from the passed context. Variables are denoted with\n-     * the \"${}\" syntax and the variable name inside the curly-braces can use\n-     * the \".\" (dot) syntax to access sub-Map entries and the \"[]\" square-brace\n-     * syntax to access List elements.\n-     * It Also supports the execution of bsh files by using the 'bsh:' prefix.\n-     * Further it is possible to control the output by specifying the suffix \n-     *     '?currency(XXX)' to format the output according the current locale\n-     *     and specified (XXX) currency\n-     * \n+    /** Does on-the-fly parsing and expansion of the original String using\n+     * variable values from the passed context. A null context argument will\n+     * return the original String.\n      * @param original The original String that will be expanded\n      * @param context A context Map containing the variable values\n      * @return The original String expanded by replacing varaible place holders.\n@@ -197,17 +173,9 @@ public static String expandString(String original, Map<String, ? extends Object>\n         return expandString(original, context, null, null);\n     }\n     \n-    /**\n-     * Does on-the-fly parsing and expansion of the original String using\n-     * varaible values from the passed context. Variables are denoted with\n-     * the \"${}\" syntax and the variable name inside the curly-braces can use\n-     * the \".\" (dot) syntax to access sub-Map entries and the \"[]\" square-brace\n-     * syntax to access List elements.\n-     * It Also supports the execution of bsh files by using the 'bsh:' prefix.\n-     * Further it is possible to control the output by specifying the suffix \n-     *     '?currency(XXX)' to format the output according the current locale\n-     *     and specified (XXX) currency\n-     * \n+    /** Does on-the-fly parsing and expansion of the original String using\n+     * variable values from the passed context. A null context argument will\n+     * return the original String.\n      * @param original The original String that will be expanded\n      * @param context A context Map containing the variable values\n      * @return The original String expanded by replacing varaible place holders.\n@@ -216,17 +184,9 @@ public static String expandString(String original, Map<String, ? extends Object>\n         return expandString(original, context, null, locale);\n     }\n     \n-    /**\n-     * Does on-the-fly parsing and expansion of the original String using\n-     * varaible values from the passed context. Variables are denoted with\n-     * the \"${}\" syntax and the variable name inside the curly-braces can use\n-     * the \".\" (dot) syntax to access sub-Map entries and the \"[]\" square-brace\n-     * syntax to access List elements.\n-     * It Also supports the execution of bsh files by using the 'bsh:' prefix.\n-     * Further it is possible to control the output by specifying the suffix \n-     *     '?currency(XXX)' to format the output according the current locale\n-     *     and specified (XXX) currency\n-     * \n+    /** Does on-the-fly parsing and expansion of the original String using\n+     * variable values from the passed context. A null context argument will\n+     * return the original String.\n      * @param original The original String that will be expanded\n      * @param context A context Map containing the variable values\n      * @return The original String expanded by replacing varaible place holders.",
                "deletions": 62
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Minilang set-calendar improvement - supply default local and time zone when they aren't available.\n\nThere was a problem with the set-calendar operation when it was called from the job scheduler - a NPE was thrown. This commit fixes that.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@683414 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/aff5df07e3ea5408c3ee6918bc8456f020dc2499",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b2ec6f2549c6e6838ad44b365231477aee801f9c",
        "bug_id": "ofbiz-framework_239",
        "file": [
            {
                "sha": "4a89981c7dd05482109b682874d538bb18def88d",
                "filename": "framework/minilang/src/org/ofbiz/minilang/method/envops/SetCalendar.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/aff5df07e3ea5408c3ee6918bc8456f020dc2499/framework/minilang/src/org/ofbiz/minilang/method/envops/SetCalendar.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/aff5df07e3ea5408c3ee6918bc8456f020dc2499/framework/minilang/src/org/ofbiz/minilang/method/envops/SetCalendar.java",
                "status": "modified",
                "changes": 6,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/minilang/src/org/ofbiz/minilang/method/envops/SetCalendar.java?ref=aff5df07e3ea5408c3ee6918bc8456f020dc2499",
                "patch": "@@ -121,9 +121,15 @@ public boolean exec(MethodContext methodContext) {\n             if (locale == null) {\n                 locale = methodContext.getLocale();\n             }\n+            if (locale == null) {\n+                locale = Locale.getDefault();\n+            }\n             if (timeZone == null) {\n                 timeZone = methodContext.getTimeZone();\n             }\n+            if (timeZone == null) {\n+                timeZone = TimeZone.getDefault();\n+            }\n             fromStamp = (Timestamp) ObjectType.simpleTypeConvert(newValue, \"Timestamp\", UtilDateTime.DATE_TIME_FORMAT, timeZone, locale, true);\n         } catch (Exception e) {\n             // Catching all exceptions - even potential ClassCastException",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Small fix to prevent NPE under certain circumstances; still the code should be improved, but for now I am trying to change as less code as possible.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@679056 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a21b39dc1c1e1c0a55cf7c2c95e4124f84f95d21",
        "parent": "https://github.com/apache/ofbiz-framework/commit/26d94fc5b0adfa460139e9c6e94c7b520fdcbe7a",
        "bug_id": "ofbiz-framework_240",
        "file": [
            {
                "sha": "940e82b6cf841749ae7891f46b36e49afda996a5",
                "filename": "framework/widget/src/org/ofbiz/widget/tree/ModelTree.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a21b39dc1c1e1c0a55cf7c2c95e4124f84f95d21/framework/widget/src/org/ofbiz/widget/tree/ModelTree.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a21b39dc1c1e1c0a55cf7c2c95e4124f84f95d21/framework/widget/src/org/ofbiz/widget/tree/ModelTree.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/tree/ModelTree.java?ref=a21b39dc1c1e1c0a55cf7c2c95e4124f84f95d21",
                "patch": "@@ -536,8 +536,8 @@ public boolean hasChildren(Map<String, Object> context) {\n                 \t\t GenericValue entity = delegator.findOne(entName, UtilMisc.toMap(pkName, id), false);\n                          if (modelEntity.isField(\"childBranchCount\")) {\n                     \t\t entity.put(\"childBranchCount\", nodeCount);\n+                             entity.store();\n                          }\n-                \t\t entity.store();\n                 \t }\n                  } catch(GenericEntityException e) {\n                      Debug.logError(e, module); ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Small change to fix NPE by checking for null instead of checking to see if there is an entry as it could be null\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@661338 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/64399e2f2ea5af19415e90946030c12d7973c04c",
        "parent": "https://github.com/apache/ofbiz-framework/commit/1339c1d545d16a39fe37499330e8a1077d624a4c",
        "bug_id": "ofbiz-framework_241",
        "file": [
            {
                "sha": "c1bea68bb7809b08026a893d4ab2a2306f25bb42",
                "filename": "framework/service/src/org/ofbiz/service/engine/GenericAsyncEngine.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/64399e2f2ea5af19415e90946030c12d7973c04c/framework/service/src/org/ofbiz/service/engine/GenericAsyncEngine.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/64399e2f2ea5af19415e90946030c12d7973c04c/framework/service/src/org/ofbiz/service/engine/GenericAsyncEngine.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/service/src/org/ofbiz/service/engine/GenericAsyncEngine.java?ref=64399e2f2ea5af19415e90946030c12d7973c04c",
                "patch": "@@ -98,8 +98,8 @@ public void runAsync(String localName, ModelService modelService, Map<String, Ob\n \n                 // Get the userLoginId out of the context\n                 String authUserLoginId = null;\n-                if (context.containsKey(\"userLogin\")) {\n-                    GenericValue userLogin = (GenericValue)context.get(\"userLogin\");\n+                if (context.get(\"userLogin\") != null) {\n+                    GenericValue userLogin = (GenericValue) context.get(\"userLogin\");\n                     authUserLoginId = userLogin.getString(\"userLoginId\");\n                 }\n ",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A few cleanups, fixed NPE and circular reference problems; filled in a little bit of info gathering; had added messages like Jacopo's,info gathering; merged my warnings with Jacopos\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@638707 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/1bee9ad908ad8e27b57bb0723c4c83cc03b82403",
        "parent": "https://github.com/apache/ofbiz-framework/commit/b94c1f8923459a26fa8e5afdc96d187500c2a7be",
        "bug_id": "ofbiz-framework_242",
        "file": [
            {
                "sha": "499f2e6f78881ad078b24147abc22ab83cd12aa1",
                "filename": "framework/webtools/src/org/ofbiz/webtools/artifactinfo/ArtifactInfoBase.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ArtifactInfoBase.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ArtifactInfoBase.java",
                "status": "modified",
                "changes": 12,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ArtifactInfoBase.java?ref=1bee9ad908ad8e27b57bb0723c4c83cc03b82403",
                "patch": "@@ -19,10 +19,11 @@\n package org.ofbiz.webtools.artifactinfo;\n \n \n+\n /**\n  *\n  */\n-public abstract class ArtifactInfoBase {\n+public abstract class ArtifactInfoBase implements Comparable<ArtifactInfoBase> {\n     protected ArtifactInfoFactory aif;\n     \n     public ArtifactInfoBase(ArtifactInfoFactory aif) {\n@@ -37,8 +38,17 @@ public boolean equals(Object obj) {\n         }\n     }\n     \n+    public int compareTo(ArtifactInfoBase aib) {\n+        if (aib == null) return -1;\n+        return this.getDisplayName().compareTo(aib.getDisplayName());\n+    }\n+    \n     abstract public String getDisplayName();\n     abstract public String getDisplayType();\n     abstract public String getType();\n     abstract public String getUniqueId();\n+    \n+    //public static List<ArtifactInfoBase> sortArtifactInfoSetByDisplayName(Set<ArtifactInfoBase> artifactInfoSet) {\n+        //SortedMap<String, ArtifactInfoBase> sortedMap = FastMap.newInstance();\n+    //}\n }",
                "deletions": 1
            },
            {
                "sha": "31c93193f62f5220ef2f9d16701c7508810c65fb",
                "filename": "framework/webtools/src/org/ofbiz/webtools/artifactinfo/ArtifactInfoFactory.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ArtifactInfoFactory.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ArtifactInfoFactory.java",
                "status": "modified",
                "changes": 21,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ArtifactInfoFactory.java?ref=1bee9ad908ad8e27b57bb0723c4c83cc03b82403",
                "patch": "@@ -96,15 +96,19 @@\n     public Map<String, Set<ServiceArtifactInfo>> allServiceInfosReferringToServiceName = FastMap.newInstance();\n     public Map<String, Set<FormWidgetArtifactInfo>> allFormInfosReferringToServiceName = FastMap.newInstance();\n     public Map<String, Set<ScreenWidgetArtifactInfo>> allScreenInfosReferringToServiceName = FastMap.newInstance();\n+    public Map<String, Set<ControllerRequestArtifactInfo>> allRequestInfosReferringToServiceName = FastMap.newInstance(); \n     \n     public Map<String, Set<ServiceArtifactInfo>> allServiceInfosReferringToEntityName = FastMap.newInstance();\n     public Map<String, Set<FormWidgetArtifactInfo>> allFormInfosReferringToEntityName = FastMap.newInstance();\n     public Map<String, Set<ScreenWidgetArtifactInfo>> allScreenInfosReferringToEntityName = FastMap.newInstance();\n \n     public Map<ServiceEcaRule, Set<ServiceArtifactInfo>> allServiceInfosReferringToServiceEcaRule = FastMap.newInstance();\n     \n-    public Map<String, Set<ControllerViewArtifactInfo>> allViewInfosReferringToScreen = FastMap.newInstance(); \n-    public Map<String, Set<ControllerRequestArtifactInfo>> allRequestInfosReferringToView = FastMap.newInstance(); \n+    public Map<String, Set<ScreenWidgetArtifactInfo>> allScreenInfosReferringToScreen = FastMap.newInstance();\n+    public Map<String, Set<ControllerViewArtifactInfo>> allViewInfosReferringToScreen = FastMap.newInstance();\n+    \n+    public Map<String, Set<ControllerRequestArtifactInfo>> allRequestInfosReferringToView = FastMap.newInstance();\n+    \n     public Map<String, Set<ControllerRequestArtifactInfo>> allRequestInfosReferringToRequest = FastMap.newInstance(); \n     \n     public static ArtifactInfoFactory getArtifactInfoFactory(String delegatorName) throws GeneralException {\n@@ -313,6 +317,7 @@ public ControllerRequestArtifactInfo getControllerRequestArtifactInfo(URL contro\n         if (curInfo == null) {\n             curInfo = new ControllerRequestArtifactInfo(controllerXmlUrl, requestUri, this);\n             this.allControllerRequestInfos.put(curInfo.getUniqueId(), curInfo);\n+            curInfo.populateAll();\n         }\n         return curInfo;\n     }\n@@ -366,34 +371,34 @@ public ArtifactInfoBase getArtifactInfoByNameAndType(String artifactName, String\n         }\n         \n         for (Map.Entry<String, EntityArtifactInfo> curEntry: allEntityInfos.entrySet()) {\n-            if (curEntry.getKey().contains(artifactNamePartial)) {\n+            if (curEntry.getKey().toUpperCase().contains(artifactNamePartial.toUpperCase())) {\n                 aiBaseSet.add(curEntry.getValue());\n             }\n         }\n         for (Map.Entry<String, ServiceArtifactInfo> curEntry: allServiceInfos.entrySet()) {\n-            if (curEntry.getKey().contains(artifactNamePartial)) {\n+            if (curEntry.getKey().toUpperCase().contains(artifactNamePartial.toUpperCase())) {\n                 aiBaseSet.add(curEntry.getValue());\n             }\n         }\n         \n         for (Map.Entry<String, FormWidgetArtifactInfo> curEntry: allFormInfos.entrySet()) {\n-            if (curEntry.getKey().contains(artifactNamePartial)) {\n+            if (curEntry.getKey().toUpperCase().contains(artifactNamePartial.toUpperCase())) {\n                 aiBaseSet.add(curEntry.getValue());\n             }\n         }\n         for (Map.Entry<String, ScreenWidgetArtifactInfo> curEntry: allScreenInfos.entrySet()) {\n-            if (curEntry.getKey().contains(artifactNamePartial)) {\n+            if (curEntry.getKey().toUpperCase().contains(artifactNamePartial.toUpperCase())) {\n                 aiBaseSet.add(curEntry.getValue());\n             }\n         }\n         \n         for (Map.Entry<String, ControllerRequestArtifactInfo> curEntry: allControllerRequestInfos.entrySet()) {\n-            if (curEntry.getKey().contains(artifactNamePartial)) {\n+            if (curEntry.getKey().toUpperCase().contains(artifactNamePartial.toUpperCase())) {\n                 aiBaseSet.add(curEntry.getValue());\n             }\n         }\n         for (Map.Entry<String, ControllerViewArtifactInfo> curEntry: allControllerViewInfos.entrySet()) {\n-            if (curEntry.getKey().contains(artifactNamePartial)) {\n+            if (curEntry.getKey().toUpperCase().contains(artifactNamePartial.toUpperCase())) {\n                 aiBaseSet.add(curEntry.getValue());\n             }\n         }",
                "deletions": 8
            },
            {
                "sha": "bb779826064c3f3c8a398f1021ee28150120cbd9",
                "filename": "framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerRequestArtifactInfo.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerRequestArtifactInfo.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerRequestArtifactInfo.java",
                "status": "modified",
                "changes": 46,
                "additions": 37,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerRequestArtifactInfo.java?ref=1bee9ad908ad8e27b57bb0723c4c83cc03b82403",
                "patch": "@@ -34,7 +34,6 @@\n  *\n  */\n public class ControllerRequestArtifactInfo extends ArtifactInfoBase {\n-    \n     public static final String module = ControllerRequestArtifactInfo.class.getName();\n \n     protected URL controllerXmlUrl;\n@@ -57,26 +56,55 @@ public ControllerRequestArtifactInfo(URL controllerXmlUrl, String requestUri, Ar\n             throw new GeneralException(\"Controller request with name [\" + requestUri + \"] is not defined in controller file [\" + controllerXmlUrl + \"].\");\n         }\n \n+        if (this.requestInfoMap == null) {\n+            throw new GeneralException(\"Could not find Controller Request [\" + requestUri + \"] at URL [\" + controllerXmlUrl.toExternalForm() + \"]\");\n+        }\n+    }\n+    \n+    /** note this is mean to be called after the object is created and added to the ArtifactInfoFactory.allControllerRequestInfos in ArtifactInfoFactory.getControllerRequestArtifactInfo */\n+    public void populateAll() throws GeneralException {\n         // populate serviceCalledByRequestEvent, requestsThatAreResponsesToThisRequest, viewsThatAreResponsesToThisRequest and related reverse maps\n         \n         if (\"service\".equals(this.requestInfoMap.get(ConfigXMLReader.EVENT_TYPE))) {\n             String serviceName = (String) this.requestInfoMap.get(ConfigXMLReader.EVENT_METHOD);\n-            this.serviceCalledByRequestEvent = this.aif.getServiceArtifactInfo(serviceName);\n+            try {\n+                this.serviceCalledByRequestEvent = this.aif.getServiceArtifactInfo(serviceName);\n+                if (this.serviceCalledByRequestEvent != null) {\n+                    // add the reverse association\n+                    UtilMisc.addToSetInMap(this, aif.allRequestInfosReferringToServiceName, this.serviceCalledByRequestEvent.getUniqueId());\n+                }\n+            } catch (GeneralException e) {\n+                Debug.logWarning(e.toString(), module);\n+            }\n         }\n         \n         Map<String, String> responseMap = (Map<String, String>) this.requestInfoMap.get(ConfigXMLReader.RESPONSE_MAP);\n         for (String responseValue: responseMap.values()) {\n             if (responseValue.startsWith(\"view:\")) {\n                 String viewUri = responseValue.substring(5);\n-                ControllerViewArtifactInfo artInfo = this.aif.getControllerViewArtifactInfo(controllerXmlUrl, viewUri);\n-                this.viewsThatAreResponsesToThisRequest.add(artInfo);\n-                // add the reverse association\n-                UtilMisc.addToSetInMap(this, this.aif.allRequestInfosReferringToView, artInfo.getUniqueId());\n+                if (viewUri.startsWith(\"/\")) {\n+                    viewUri = viewUri.substring(1);\n+                }\n+                try {\n+                    ControllerViewArtifactInfo artInfo = this.aif.getControllerViewArtifactInfo(controllerXmlUrl, viewUri);\n+                    this.viewsThatAreResponsesToThisRequest.add(artInfo);\n+                    // add the reverse association\n+                    UtilMisc.addToSetInMap(this, this.aif.allRequestInfosReferringToView, artInfo.getUniqueId());\n+                } catch (GeneralException e) {\n+                    Debug.logWarning(e.toString(), module);\n+                }\n             } else if (responseValue.startsWith(\"request:\")) {\n                 String otherRequestUri = responseValue.substring(8);\n-                ControllerRequestArtifactInfo artInfo = this.aif.getControllerRequestArtifactInfo(controllerXmlUrl, otherRequestUri);\n-                this.requestsThatAreResponsesToThisRequest.add(artInfo);\n-                UtilMisc.addToSetInMap(this, this.aif.allRequestInfosReferringToRequest, artInfo.getUniqueId());\n+                if (otherRequestUri.startsWith(\"/\")) {\n+                    otherRequestUri = otherRequestUri.substring(1);\n+                }\n+                try {\n+                    ControllerRequestArtifactInfo artInfo = this.aif.getControllerRequestArtifactInfo(controllerXmlUrl, otherRequestUri);\n+                    this.requestsThatAreResponsesToThisRequest.add(artInfo);\n+                    UtilMisc.addToSetInMap(this, this.aif.allRequestInfosReferringToRequest, artInfo.getUniqueId());\n+                } catch (GeneralException e) {\n+                    Debug.logWarning(e.toString(), module);\n+                }\n             } else if (responseValue.startsWith(\"request-redirect:\")) {\n                 String otherRequestUri = responseValue.substring(17);\n                 ControllerRequestArtifactInfo artInfo = this.aif.getControllerRequestArtifactInfo(controllerXmlUrl, otherRequestUri);",
                "deletions": 9
            },
            {
                "sha": "ab8fea7520fee94ab9aa42f731cd518f245ceb90",
                "filename": "framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerViewArtifactInfo.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerViewArtifactInfo.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerViewArtifactInfo.java",
                "status": "modified",
                "changes": 19,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ControllerViewArtifactInfo.java?ref=1bee9ad908ad8e27b57bb0723c4c83cc03b82403",
                "patch": "@@ -33,7 +33,6 @@\n  *\n  */\n public class ControllerViewArtifactInfo extends ArtifactInfoBase {\n-\n     public static final String module = ControllerViewArtifactInfo.class.getName();\n \n     protected URL controllerXmlUrl;\n@@ -49,6 +48,10 @@ public ControllerViewArtifactInfo(URL controllerXmlUrl, String viewUri, Artifact\n         this.viewUri = viewUri;\n         \n         this.viewInfoMap = aif.getControllerViewInfoMap(controllerXmlUrl, viewUri);\n+        \n+        if (this.viewInfoMap == null) {\n+            throw new GeneralException(\"Could not find Controller View [\" + viewUri + \"] at URL [\" + controllerXmlUrl.toExternalForm() + \"]\");\n+        }\n \n         if (this.viewInfoMap == null) {\n             throw new GeneralException(\"Controller view with name [\" + viewUri + \"] is not defined in controller file [\" + controllerXmlUrl + \"].\");\n@@ -58,12 +61,14 @@ public ControllerViewArtifactInfo(URL controllerXmlUrl, String viewUri, Artifact\n             String fullScreenName = this.viewInfoMap.get(ConfigXMLReader.VIEW_PAGE);\n             if (UtilValidate.isNotEmpty(fullScreenName)) {\n                 int poundIndex = fullScreenName.indexOf('#');\n-                this.screenCalledByThisView = this.aif.getScreenWidgetArtifactInfo(fullScreenName.substring(poundIndex+1), fullScreenName.substring(0, poundIndex));\n-                // add the reverse association\n-                if (this.screenCalledByThisView != null) {\n-                    UtilMisc.addToSetInMap(this, aif.allViewInfosReferringToScreen, this.screenCalledByThisView.getUniqueId());\n-                } else {\n-                    Debug.logWarning(\"The controller view [\" + this.viewUri + \"] in resource [\" + controllerXmlUrl + \"] is pointing to a screen [\" + fullScreenName.substring(poundIndex+1) + \"] in resource [\" + fullScreenName.substring(0, poundIndex) + \"] that doesn't exists\", module);\n+                try {\n+                    this.screenCalledByThisView = this.aif.getScreenWidgetArtifactInfo(fullScreenName.substring(poundIndex+1), fullScreenName.substring(0, poundIndex));\n+                    if (this.screenCalledByThisView != null) {\n+                        // add the reverse association\n+                        UtilMisc.addToSetInMap(this, aif.allViewInfosReferringToScreen, this.screenCalledByThisView.getUniqueId());\n+                    }\n+                } catch (GeneralException e) {\n+                    Debug.logWarning(e.toString(), module);\n                 }\n             }\n         }",
                "deletions": 7
            },
            {
                "sha": "d68fd10960bc2fbc52041493487911e70ebd9ac1",
                "filename": "framework/webtools/src/org/ofbiz/webtools/artifactinfo/ScreenWidgetArtifactInfo.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ScreenWidgetArtifactInfo.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ScreenWidgetArtifactInfo.java",
                "status": "modified",
                "changes": 35,
                "additions": 33,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ScreenWidgetArtifactInfo.java?ref=1bee9ad908ad8e27b57bb0723c4c83cc03b82403",
                "patch": "@@ -19,9 +19,12 @@\n package org.ofbiz.webtools.artifactinfo;\n \n import java.io.IOException;\n+import java.util.Set;\n \n import javax.xml.parsers.ParserConfigurationException;\n \n+import javolution.util.FastSet;\n+\n import org.ofbiz.base.util.GeneralException;\n import org.ofbiz.widget.screen.ModelScreen;\n import org.xml.sax.SAXException;\n@@ -42,14 +45,14 @@ public ScreenWidgetArtifactInfo(String screenName, String screenLocation, Artifa\n         this.screenLocation = screenLocation;\n         try {\n             this.modelScreen = aif.getModelScreen(screenName, screenLocation);\n+        } catch (IllegalArgumentException e) {\n+            throw new GeneralException(e);\n         } catch (ParserConfigurationException e) {\n             throw new GeneralException(e);\n         } catch (SAXException e) {\n             throw new GeneralException(e);\n         } catch (IOException e) {\n             throw new GeneralException(e);\n-        } catch (IllegalArgumentException e) {\n-            throw new GeneralException(e);\n         }\n         \n     }\n@@ -78,4 +81,32 @@ public boolean equals(Object obj) {\n             return false;\n         }\n     }\n+    \n+    public Set<ControllerViewArtifactInfo> getViewsReferringToScreen() {\n+        return this.aif.allViewInfosReferringToScreen.get(this.getUniqueId());\n+    }\n+    \n+    public Set<EntityArtifactInfo> getEntitiesUsedInScreen() {\n+        // TODO: implement this\n+        return FastSet.newInstance();\n+    }\n+    \n+    public Set<ServiceArtifactInfo> getServicesUsedInScreen() {\n+        // TODO: implement this\n+        return FastSet.newInstance();\n+    }\n+    \n+    public Set<FormWidgetArtifactInfo> getFormsIncludedInScreen() {\n+        // TODO: implement this\n+        return FastSet.newInstance();\n+    }\n+    \n+    public Set<ScreenWidgetArtifactInfo> getScreensIncludedInScreen() {\n+        // TODO: implement this\n+        return FastSet.newInstance();\n+    }\n+    \n+    public Set<ScreenWidgetArtifactInfo> getScreensIncludingThisScreen() {\n+        return this.aif.allScreenInfosReferringToScreen.get(this.getUniqueId());\n+    }\n }",
                "deletions": 2
            },
            {
                "sha": "1eb6a376431860495e5c59ca92f16d7cc3286335",
                "filename": "framework/webtools/src/org/ofbiz/webtools/artifactinfo/ServiceArtifactInfo.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ServiceArtifactInfo.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ServiceArtifactInfo.java",
                "status": "modified",
                "changes": 6,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/src/org/ofbiz/webtools/artifactinfo/ServiceArtifactInfo.java?ref=1bee9ad908ad8e27b57bb0723c4c83cc03b82403",
                "patch": "@@ -295,10 +295,8 @@ public String getUniqueId() {\n         return screenSet;\n     }\n     \n-    public Set getRequestsWithEventCallingService() {\n-        Set requestSet = FastSet.newInstance();\n-        // TODO: implement this\n-        return requestSet;\n+    public Set<ControllerRequestArtifactInfo> getRequestsWithEventCallingService() {\n+        return this.aif.allRequestInfosReferringToServiceName.get(this.modelService.name);\n     }\n     \n     public void writeServiceCallGraphEoModel(String eomodeldFullPath) throws GeneralException, FileNotFoundException, UnsupportedEncodingException {",
                "deletions": 4
            },
            {
                "sha": "fe1856aefc6be8b6ef0db1b83167c6cea4f73808",
                "filename": "framework/webtools/webapp/webtools/artifactinfo/ArtifactInfo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/webapp/webtools/artifactinfo/ArtifactInfo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/1bee9ad908ad8e27b57bb0723c4c83cc03b82403/framework/webtools/webapp/webtools/artifactinfo/ArtifactInfo.ftl",
                "status": "modified",
                "changes": 20,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webtools/webapp/webtools/artifactinfo/ArtifactInfo.ftl?ref=1bee9ad908ad8e27b57bb0723c4c83cc03b82403",
                "patch": "@@ -82,17 +82,25 @@ under the License.\n     <#-- add form here to specify artifact info name. -->\n     <div class=\"screenlet-body\">\n       <form name=\"ArtifactInfoByName\" method=\"post\" action=\"<@ofbizUrl>ArtifactInfo</@ofbizUrl>\" class=\"basic-form\">\n-        Artifact Name: <input type=\"text\" name=\"name\" value=\"${parameters.name?if_exists}\" size=\"60\"/>\n-        <select name=\"type\">\n-            <option value=\"\">Any Type</option>\n+        Search Names/Locations: <input type=\"text\" name=\"name\" value=\"${parameters.name?if_exists}\" size=\"40\"/>\n+        <input type=\"submit\" name=\"submitButton\" value=\"Find\"/>\n+      </form>\n+    </div>\n+    <div class=\"screenlet-body\">\n+      <form name=\"ArtifactInfoByNameAndType\" method=\"post\" action=\"<@ofbizUrl>ArtifactInfo</@ofbizUrl>\" class=\"basic-form\">\n+        <div>Name: <input type=\"text\" name=\"name\" value=\"${parameters.name?if_exists}\" size=\"40\"/></div>\n+        <div>Location: <input type=\"text\" name=\"location\" value=\"${parameters.location?if_exists}\" size=\"60\"/></div>\n+        <div>\n+          <select name=\"type\">\n             <option>entity</option>\n             <option>service</option>\n             <option>form</option>\n             <option>screen</option>\n             <option>request</option>\n             <option>view</option>\n-        </select>\n-        <input type=\"submit\" name=\"submitButton\" value=\"Lookup\"/>\n+          </select>\n+          <input type=\"submit\" name=\"submitButton\" value=\"Lookup\"/>\n+        </div>\n       </form>\n     </div>\n     \n@@ -148,5 +156,5 @@ under the License.\n </#macro>\n \n <#macro displayArtifactInfoLink artifactInfo>\n-<a href=\"<@ofbizUrl>ArtifactInfo?type=${artifactInfo.getType()}&amp;uniqueId=${artifactInfo.getUniqueId()?html}</@ofbizUrl>\">${artifactInfo.getDisplayName()}</a>\n+<a href=\"<@ofbizUrl>ArtifactInfo?type=${artifactInfo.getType()}&amp;uniqueId=${artifactInfo.getUniqueId()?url('ISO-8859-1')}</@ofbizUrl>\">${artifactInfo.getDisplayName()}</a>\n </#macro>",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Rashko Rejmer \"Prevent NPEs while authorizing GC\" (https://issues.apache.org/jira/browse/OFBIZ-1589) - OFBIZ-1589\nCommited in CTR mode (reviewed but not tested, only compiled) as this patch makes sense and can't be harmful\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@614072 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/caf67fd65266e4a5f6efcbb7ee75e4cea8b1c86e",
        "parent": "https://github.com/apache/ofbiz-framework/commit/26c56222517f35b132dfdd00308b406a30dddcec",
        "bug_id": "ofbiz-framework_243",
        "file": [
            {
                "sha": "fb72784ab05eb87d84daa33718877b237b97e11e",
                "filename": "applications/accounting/src/org/ofbiz/accounting/payment/GiftCertificateServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/caf67fd65266e4a5f6efcbb7ee75e4cea8b1c86e/applications/accounting/src/org/ofbiz/accounting/payment/GiftCertificateServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/caf67fd65266e4a5f6efcbb7ee75e4cea8b1c86e/applications/accounting/src/org/ofbiz/accounting/payment/GiftCertificateServices.java",
                "status": "modified",
                "changes": 27,
                "additions": 16,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/payment/GiftCertificateServices.java?ref=caf67fd65266e4a5f6efcbb7ee75e4cea8b1c86e",
                "patch": "@@ -447,18 +447,23 @@ public static Map giftCertificateAuthorize(DispatchContext dctx, Map context) {\n             GenericValue giftCertSettings = delegator.findByPrimaryKeyCache(\"ProductStoreFinActSetting\", UtilMisc.toMap(\"productStoreId\", productStoreId, \"finAccountTypeId\", FinAccountHelper.giftCertFinAccountTypeId));\n             GenericValue finAccount = null;\n             String finAccountId = null;\n-            if (\"Y\".equals(giftCertSettings.getString(\"requirePinCode\"))) {\n-                if (validatePin(delegator, giftCard.getString(\"cardNumber\"), giftCard.getString(\"pinNumber\"))) {\n-                    finAccountId = giftCard.getString(\"cardNumber\");\n-                    finAccount = delegator.findByPrimaryKey(\"FinAccount\", UtilMisc.toMap(\"finAccountId\", finAccountId));\n-                } \n+            if (UtilValidate.isNotEmpty(giftCertSettings)) {\n+                if (\"Y\".equals(giftCertSettings.getString(\"requirePinCode\"))) {\n+                    if (validatePin(delegator, giftCard.getString(\"cardNumber\"), giftCard.getString(\"pinNumber\"))) {\n+                        finAccountId = giftCard.getString(\"cardNumber\");\n+                        finAccount = delegator.findByPrimaryKey(\"FinAccount\", UtilMisc.toMap(\"finAccountId\", finAccountId));\n+                    } \n+                } else {\n+                        finAccount = FinAccountHelper.getFinAccountFromCode(giftCard.getString(\"cardNumber\"), delegator);\n+                        if (finAccount == null) {\n+                            return ServiceUtil.returnError(\"Gift certificate not found\");\n+                        }\n+                        finAccountId = finAccount.getString(\"finAccountId\");\n+                }\n             } else {\n-                    finAccount = FinAccountHelper.getFinAccountFromCode(giftCard.getString(\"cardNumber\"), delegator);\n-                    if (finAccount == null) {\n-                        return ServiceUtil.returnError(\"Gift certificate not found\");\n-                    }\n-                    finAccountId = finAccount.getString(\"finAccountId\");\n+                return ServiceUtil.returnError(\"No product store financial account settings available\");\n             }\n+            \n             if (finAccountId == null) {\n                 return ServiceUtil.returnError(\"Gift certificate pin number is invalid\");\n             }\n@@ -478,7 +483,7 @@ public static Map giftCertificateAuthorize(DispatchContext dctx, Map context) {\n             BigDecimal amountBd = (new BigDecimal(amount.doubleValue())).setScale(FinAccountHelper.decimals, FinAccountHelper.rounding);\n \n             // if availableBalance equal to or greater than amount, then auth\n-            if (availableBalance.compareTo(amountBd) > -1) {\n+            if (UtilValidate.isNotEmpty(availableBalance) && availableBalance.compareTo(amountBd) > -1) {\n                 Timestamp thruDate = null;\n                 if (giftCertSettings.getLong(\"authValidDays\") != null) {\n                     thruDate = UtilDateTime.getDayEnd(UtilDateTime.nowTimestamp(), giftCertSettings.getLong(\"authValidDays\"));",
                "deletions": 11
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A little better handling of the rare case where the userLoginId is missing or bad; avoid an NPE and give a better error message\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@564344 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/4479906b3ab9345ee996dfc3252f5cd57275b3ec",
        "parent": "https://github.com/apache/ofbiz-framework/commit/951970eb2532067e44c8e5cddbb0e5baa23b91ad",
        "bug_id": "ofbiz-framework_244",
        "file": [
            {
                "sha": "7fc914c2a349071651271ff4a88f1f78a08f955d",
                "filename": "framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/4479906b3ab9345ee996dfc3252f5cd57275b3ec/framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/4479906b3ab9345ee996dfc3252f5cd57275b3ec/framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java",
                "status": "modified",
                "changes": 12,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java?ref=4479906b3ab9345ee996dfc3252f5cd57275b3ec",
                "patch": "@@ -142,6 +142,10 @@ public static void cleanupExternalLoginKey(HttpSession session) {\n     }\n \n     public static void setLoggedOut(String userLoginId, GenericDelegator delegator) {\n+        if (UtilValidate.isEmpty(userLoginId)) {\n+            Debug.logWarning(\"Called setLogged out with empty userLoginId\", module);\n+        }\n+        \n         Transaction parentTx = null;\n         boolean beganTransaction = false;\n \n@@ -156,8 +160,12 @@ public static void setLoggedOut(String userLoginId, GenericDelegator delegator)\n                 beganTransaction = TransactionUtil.begin();\n \n                 GenericValue userLogin = delegator.findByPrimaryKey(\"UserLogin\", UtilMisc.toMap(\"userLoginId\", userLoginId));\n-                userLogin.set(\"hasLoggedOut\", \"Y\");\n-                userLogin.store();\n+                if (userLogin == null) {\n+                    Debug.logError(\"Could not find UserLogin record for setLoggedOut with userLoginId [\" + userLoginId + \"]\", module);\n+                } else {\n+                    userLogin.set(\"hasLoggedOut\", \"Y\");\n+                    userLogin.store();\n+                }\n             } catch (GenericEntityException e) {\n                 String errMsg = \"Unable to set logged out flag on UserLogin\";\n                 Debug.logError(e, errMsg, module);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Added temporary log message to show incoming message text, just in case it blows up somewhere (quite a few bugs in processing so far); also added check for empty verb/noun to avoid NPEs\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@562836 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/465b3dce08d1296fea1d8a48a82edb074afbbbc0",
        "parent": "https://github.com/apache/ofbiz-framework/commit/2fe7742b71398df06593b29ff37adfe5cd686f5e",
        "bug_id": "ofbiz-framework_245",
        "file": [
            {
                "sha": "127e5460b1f4fb33be43c84110c871d792466773",
                "filename": "specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/465b3dce08d1296fea1d8a48a82edb074afbbbc0/specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/465b3dce08d1296fea1d8a48a82edb074afbbbc0/specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java",
                "status": "modified",
                "changes": 7,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java?ref=465b3dce08d1296fea1d8a48a82edb074afbbbc0",
                "patch": "@@ -342,6 +342,9 @@ public static Map oagisMessageHandler(DispatchContext ctx, Map context) {\n                 xmlTextBuf.append('\\n');\n             }\n             xmlText = xmlTextBuf.toString();\n+            \n+            // DEJ20070804 adding this temporarily for debugging, should be changed to verbose at some point in the future\n+            Debug.logInfo(\"Received OAGIS XML message, here is the text: \\n\" + xmlText, module);\n \n             ByteArrayInputStream bis = new ByteArrayInputStream(xmlText.getBytes(\"UTF-8\"));\n             doc = UtilXml.readXmlDocument(bis, true, \"OagisMessage\");\n@@ -370,6 +373,10 @@ public static Map oagisMessageHandler(DispatchContext ctx, Map context) {\n         String bsrVerb = UtilXml.childElementValue(bsrElement, \"of:VERB\");\n         String bsrNoun = UtilXml.childElementValue(bsrElement, \"of:NOUN\");\n         \n+        if (UtilValidate.isEmpty(bsrVerb) || UtilValidate.isEmpty(bsrNoun)) {\n+            return ServiceUtil.returnError(\"Was able to receive and parse the XML message, but BSR->NOUN [\" + bsrNoun + \"] and/or BSR->VERB [\" + bsrVerb + \"] are empty\");\n+        }\n+        \n         // TODO: before dispatching the message, make sure the combined ID (primary of OagisMessageInfo entity) is not in the database, ie hasn't been received already\n         \n         Map subServiceResult = FastMap.newInstance();",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Changed to actually use settings from oagis.properties, and if it doesn't find an output mode then to return an error instead of the funny NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@562298 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5c86898c6d3106a38f3a3852734a7c85dca45c21",
        "parent": "https://github.com/apache/ofbiz-framework/commit/14aaea0f58397555727cfb75bd1508590b2b6b1c",
        "bug_id": "ofbiz-framework_246",
        "file": [
            {
                "sha": "5d58ebfd0bfb46c1008f4b520d0c40b0eba42fbe",
                "filename": "specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5c86898c6d3106a38f3a3852734a7c85dca45c21/specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5c86898c6d3106a38f3a3852734a7c85dca45c21/specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java",
                "status": "modified",
                "changes": 6,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/oagis/src/org/ofbiz/oagis/OagisServices.java?ref=5c86898c6d3106a38f3a3852734a7c85dca45c21",
                "patch": "@@ -81,6 +81,10 @@ public static Map oagisSendConfirmBod(DispatchContext ctx, Map context) {\n         LocalDispatcher dispatcher = ctx.getDispatcher();\n \n         String sendToUrl = (String) context.get(\"sendToUrl\");\n+        if (UtilValidate.isEmpty(sendToUrl)) {\n+            sendToUrl = UtilProperties.getPropertyValue(\"oagis.properties\", \"url.send.confirmBod\");\n+        }\n+\n         String saveToFilename = (String) context.get(\"saveToFilename\");\n         String saveToDirectory = (String) context.get(\"saveToDirectory\");\n         OutputStream out = (OutputStream) context.get(\"outputStream\");\n@@ -132,6 +136,8 @@ public static Map oagisSendConfirmBod(DispatchContext ctx, Map context) {\n             }\n         } else if (UtilValidate.isNotEmpty(sendToUrl)) {\n             writer = new StringWriter();\n+        } else {\n+            return ServiceUtil.returnError(\"No send to information pass (url, file, or out stream)\");\n         }\n \n         ScreenRenderer screens = new ScreenRenderer(writer, bodyParameters, new HtmlScreenRenderer());",
                "deletions": 0
            },
            {
                "sha": "a7e3d53885a22c263cee919c81832ceadbcf9061",
                "filename": "specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5c86898c6d3106a38f3a3852734a7c85dca45c21/specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5c86898c6d3106a38f3a3852734a7c85dca45c21/specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java",
                "status": "modified",
                "changes": 12,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java?ref=5c86898c6d3106a38f3a3852734a7c85dca45c21",
                "patch": "@@ -301,6 +301,10 @@ public static Map oagisProcessShipment(DispatchContext ctx, Map context) {\n         String shipmentId = (String) context.get(\"shipmentId\");\n         \n         String sendToUrl = (String) context.get(\"sendToUrl\");\n+        if (UtilValidate.isEmpty(sendToUrl)) {\n+            sendToUrl = UtilProperties.getPropertyValue(\"oagis.properties\", \"url.send.processShipment\");\n+        }\n+        \n         String saveToFilename = (String) context.get(\"saveToFilename\");\n         String saveToDirectory = (String) context.get(\"saveToDirectory\");\n         OutputStream out = (OutputStream) context.get(\"outputStream\");\n@@ -473,6 +477,8 @@ public static Map oagisProcessShipment(DispatchContext ctx, Map context) {\n                     }\n                 } else if (UtilValidate.isNotEmpty(sendToUrl)) {\n                     writer = new StringWriter();\n+                } else {\n+                    return ServiceUtil.returnError(\"No send to information pass (url, file, or out stream)\");\n                 }\n \n                 ScreenRenderer screens = new ScreenRenderer(writer, bodyParameters, new HtmlScreenRenderer());\n@@ -548,6 +554,10 @@ public static Map oagisReceiveDelivery(DispatchContext dctx, Map context) {\n         GenericValue userLogin = (GenericValue) context.get(\"userLogin\");\n         \n         String sendToUrl = (String) context.get(\"sendToUrl\");\n+        if (UtilValidate.isEmpty(sendToUrl)) {\n+            sendToUrl = UtilProperties.getPropertyValue(\"oagis.properties\", \"url.send.receiveDelivery\");\n+        }\n+\n         String saveToFilename = (String) context.get(\"saveToFilename\");\n         String saveToDirectory = (String) context.get(\"saveToDirectory\");\n         OutputStream out = (OutputStream) context.get(\"outputStream\");\n@@ -658,6 +668,8 @@ public static Map oagisReceiveDelivery(DispatchContext dctx, Map context) {\n                     }\n                 } else if (UtilValidate.isNotEmpty(sendToUrl)) {\n                     writer = new StringWriter();\n+                } else {\n+                    return ServiceUtil.returnError(\"No send to information pass (url, file, or out stream)\");\n                 }\n \n                 ScreenRenderer screens = new ScreenRenderer(writer, bodyParameters, new HtmlScreenRenderer());",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A number of changes and cleanup to simplify the data preparation, fixed a few NPEs found while running, and made it possible to run the export again for an order with an existing Shipment (will just use that Shipment instead of creating a new one)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@558237 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/7afe36e114f7a13e153ab60b56d36274eeb89471",
        "parent": "https://github.com/apache/ofbiz-framework/commit/963100f454f39720b77924ee1cf0139d65bab0a3",
        "bug_id": "ofbiz-framework_247",
        "file": [
            {
                "sha": "ca469a657fd392f2ab37666a6bc861bbdf8dcf19",
                "filename": "specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7afe36e114f7a13e153ab60b56d36274eeb89471/specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7afe36e114f7a13e153ab60b56d36274eeb89471/specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java",
                "status": "modified",
                "changes": 146,
                "additions": 71,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/oagis/src/org/ofbiz/oagis/OagisShipmentServices.java?ref=7afe36e114f7a13e153ab60b56d36274eeb89471",
                "patch": "@@ -265,19 +265,34 @@ public static Map oagisProcessShipment(DispatchContext ctx, Map context) {\n             Debug.logError(e, module);\n             return ServiceUtil.returnError(e.getMessage());\n         }\n-        GenericValue shipment =null;\n+\n         if (orderHeader != null) {\n             String orderStatusId = orderHeader.getString(\"statusId\");\n             if (orderStatusId.equals(\"ORDER_APPROVED\")) {\n                 try {\n-                    Map  cospResult= dispatcher.runSync(\"createOrderShipmentPlan\", UtilMisc.toMap(\"orderId\", orderId, \"userLogin\", userLogin));\n-                    shipmentId = (String) cospResult.get(\"shipmentId\");\n-                } catch (GenericServiceException e) {\n-                    Debug.logError(e, module);\n-                    return ServiceUtil.returnError(e.getMessage());\n-                }\n-                try {\n-                    shipment = delegator.findByPrimaryKey(\"Shipment\", UtilMisc.toMap(\"shipmentId\", shipmentId));\n+                    \n+                    // check to see if there is already a Shipment for this order\n+                    EntityCondition findShipmentCondition = new EntityConditionList(UtilMisc.toList(\n+                            new EntityExpr(\"primaryOrderId\", EntityOperator.EQUALS, orderId),\n+                            new EntityExpr(\"statusId\", EntityOperator.NOT_EQUAL, \"SHIPMENT_CANCELLED\")\n+                            ), EntityOperator.AND);\n+                    List shipmentList = delegator.findByCondition(\"Shipment\", findShipmentCondition, null, null);\n+                    GenericValue shipment = EntityUtil.getFirst(shipmentList);\n+                    \n+                    if (shipment != null) {\n+                        // if picked, packed, shipped, delivered then complain, no reason to process the shipment!\n+                        String statusId = shipment.getString(\"statusId\");\n+                        if (\"SHIPMENT_PICKED\".equals(statusId) || \"SHIPMENT_PACKED\".equals(statusId) || \"SHIPMENT_SHIPPED\".equals(statusId) || \"SHIPMENT_DELIVERED\".equals(statusId)) {\n+                            return ServiceUtil.returnError(\"Not sending Process Shipment message because found Shipment that is already being processed, is in status [\" + statusId + \"]\");\n+                        }\n+                        shipmentId = shipment.getString(\"shipmentId\");\n+                    } else {\n+                        Map cospResult= dispatcher.runSync(\"createOrderShipmentPlan\", UtilMisc.toMap(\"orderId\", orderId, \"userLogin\", userLogin));\n+                        shipmentId = (String) cospResult.get(\"shipmentId\");\n+\n+                        shipment = delegator.findByPrimaryKey(\"Shipment\", UtilMisc.toMap(\"shipmentId\", shipmentId));\n+                    }\n+                    \n                     bodyParameters.put(\"shipment\", shipment);\n                     OrderReadHelper orderReadHelper = new OrderReadHelper(orderHeader);\n                     if(orderReadHelper.hasShippingAddress()) {\n@@ -296,60 +311,61 @@ public static Map oagisProcessShipment(DispatchContext ctx, Map context) {\n                     \n                     orderItemShipGroup = EntityUtil.getFirst(delegator.findByAnd(\"OrderItemShipGroup\", UtilMisc.toMap(\"orderId\", orderId)));\n                     bodyParameters.put(\"orderItemShipGroup\", orderItemShipGroup);\n-                } catch (GenericEntityException e) {\n-                    Debug.logError(e, module);\n-                }\n-                \n-                Set correspondingPoIdSet = FastSet.newInstance();\n-                try {\n-                    List orderItems = delegator.findByAnd(\"OrderItem\", UtilMisc.toMap(\"orderId\", shipment.getString(\"primaryOrderId\")));\n+\n+                    Set correspondingPoIdSet = FastSet.newInstance();\n+                    List orderItems = delegator.findByAnd(\"OrderItem\", UtilMisc.toMap(\"orderId\", orderId));\n                     Iterator oiIter = orderItems.iterator();\n                     while (oiIter.hasNext()) {\n                         GenericValue orderItem = (GenericValue) oiIter.next();\n                         String correspondingPoId = orderItem.getString(\"correspondingPoId\");\n                         if (correspondingPoId != null) {\n-\t                        correspondingPoIdSet.add(correspondingPoId);\n+                            correspondingPoIdSet.add(correspondingPoId);\n                         }\n                     }\n-                } catch (GenericEntityException e) {\n-                    Debug.logError(e, module);\n-                }\n-                bodyParameters.put(\"correspondingPoIdSet\", correspondingPoIdSet);\n+                    bodyParameters.put(\"correspondingPoIdSet\", correspondingPoIdSet);\n \n-                Set externalIdSet = FastSet.newInstance();\n-                try {\n-                    GenericValue primaryOrderHeader = delegator.findByPrimaryKey(\"OrderHeader\", UtilMisc.toMap(\"orderId\", shipment.getString(\"primaryOrderId\")));\n-                    externalIdSet.add(primaryOrderHeader.getString(\"externalId\"));\n-                } catch (GenericEntityException e) {\n-                    Debug.logError(e, module);\n-                }\n-                bodyParameters.put(\"externalIdSet\", externalIdSet);\n-                \n-                // Check if order was a return replacement order (associated with return)\n-                List returnItemResponses =  null;\n-                List returnItemRespExprs = UtilMisc.toList(new EntityExpr(\"replacementOrderId\", EntityOperator.NOT_EQUAL, null));\n-                EntityCondition returnItemRespCond = new EntityConditionList(returnItemRespExprs, EntityOperator.AND);\n-                // list of fields to select (initial list)\n-                List fieldsToSelect = FastList.newInstance();\n-                fieldsToSelect.add(\"replacementOrderId\");\n-                try {\n-                    returnItemResponses = delegator.findByCondition(\"ReturnItemResponse\", returnItemRespCond, fieldsToSelect, null);\n-                    Iterator rirIter = returnItemResponses.iterator();\n-                    while (rirIter.hasNext()) {\n-                        GenericValue returnItemResponse = (GenericValue) rirIter.next();\n-                        String replacementOrderId = returnItemResponse.getString(\"replacementOrderId\");\n-                        if (replacementOrderId.equals(shipment.getString(\"primaryOrderId\"))) {\n-                            bodyParameters.put(\"shipnotes\", \"RETURNLABEL\");\n-                            \n-                            // Get the associated return Id (replaceReturnId)\n-                            String returnItemResponseId = returnItemResponse.getString(\"returnItemResponseId\");\n-                            GenericValue returnItem = EntityUtil.getFirst(delegator.findByAnd(\"ReturnItem\", UtilMisc.toMap(\"returnItemResponseId\", returnItemResponseId)));\n-                            bodyParameters.put(\"replacementReturnId\", returnItem.getString(\"returnId\"));\n+                    if (orderHeader.get(\"externalId\") != null) {\n+                        Set externalIdSet = FastSet.newInstance();\n+                        externalIdSet.add(orderHeader.getString(\"externalId\"));\n+                        bodyParameters.put(\"externalIdSet\", externalIdSet);\n+                    }\n+\n+                    // Check if order was a return replacement order (associated with return)\n+                    GenericValue returnItemResponse = EntityUtil.getFirst(delegator.findByAnd(\"ReturnItemResponse\", UtilMisc.toMap(\"replacementOrderId\", orderId)));\n+                    if (returnItemResponse != null) {\n+                        bodyParameters.put(\"shipnotes\", \"RETURNLABEL\");\n+                        \n+                        // Get the associated return Id (replaceReturnId)\n+                        String returnItemResponseId = returnItemResponse.getString(\"returnItemResponseId\");\n+                        GenericValue returnItem = EntityUtil.getFirst(delegator.findByAnd(\"ReturnItem\", UtilMisc.toMap(\"returnItemResponseId\", returnItemResponseId)));\n+                        bodyParameters.put(\"replacementReturnId\", returnItem.getString(\"returnId\"));\n+                    }\n+\n+                    // tracking shipper account\n+                    String partyId = shipment.getString(\"partyIdTo\");\n+                    List partyCarrierAccounts = delegator.findByAnd(\"PartyCarrierAccount\", UtilMisc.toMap(\"partyId\", partyId));\n+                    partyCarrierAccounts = EntityUtil.filterByDate(partyCarrierAccounts);\n+                    if (partyCarrierAccounts != null) {\n+                        Iterator pcaIter = partyCarrierAccounts.iterator();\n+                        while (pcaIter.hasNext()) {\n+                            GenericValue partyCarrierAccount = (GenericValue) pcaIter.next();\n+                            String carrierPartyId = partyCarrierAccount.getString(\"carrierPartyId\");\n+                            if (carrierPartyId.equals(orderItemShipGroup.getString(\"carrierPartyId\"))) {\n+                                String accountNumber = partyCarrierAccount.getString(\"accountNumber\");\n+                                bodyParameters.put(\"shipperId\", accountNumber);\n+                            }\n                         }\n                     }\n+                } catch (GenericServiceException e) {\n+                    String errMsg = \"Error preparing data for OAGIS Process Shipment message: \" + e.toString();\n+                    Debug.logError(e, errMsg, module);\n+                    return ServiceUtil.returnError(errMsg);\n                 } catch (GenericEntityException e) {\n-                    Debug.logError(e, module);\n+                    String errMsg = \"Error preparing data for OAGIS Process Shipment message: \" + e.toString();\n+                    Debug.logError(e, errMsg, module);\n+                    return ServiceUtil.returnError(errMsg);\n                 }\n+                \n                 String logicalId = UtilProperties.getPropertyValue(\"oagis.properties\", \"CNTROLAREA.SENDER.LOGICALID\");\n                 bodyParameters.put(\"logicalId\", logicalId);\n                 result.put(\"logicalId\", logicalId);\n@@ -368,26 +384,6 @@ public static Map oagisProcessShipment(DispatchContext ctx, Map context) {\n                 bodyParameters.put(\"sentDate\", sentDate);\n                 result.put(\"sentDate\", timestamp);\n                \n-                // tracking shipper account\n-                String partyId = shipment.getString(\"partyIdTo\");\n-                List partyCarrierAccounts = new ArrayList();\n-                try {\n-                    partyCarrierAccounts = delegator.findByAnd(\"PartyCarrierAccount\", UtilMisc.toMap(\"partyId\", partyId));\n-                    partyCarrierAccounts = EntityUtil.filterByDate(partyCarrierAccounts);\n-                    if (partyCarrierAccounts != null) {\n-                        Iterator pcaIter = partyCarrierAccounts.iterator();\n-                        while (pcaIter.hasNext()) {\n-                            GenericValue partyCarrierAccount = (GenericValue) pcaIter.next();\n-                            String carrierPartyId = partyCarrierAccount.getString(\"carrierPartyId\");\n-                            if (carrierPartyId.equals(orderItemShipGroup.getString(\"carrierPartyId\"))) {\n-                                String accountNumber = partyCarrierAccount.getString(\"accountNumber\");\n-                                bodyParameters.put(\"shipperId\", accountNumber);\n-                            }\n-                        }\n-                    }\n-                } catch (GenericEntityException e) {\n-                    Debug.logError(e, module);\n-                }\n                 bodyParameters.put(\"shipmentId\", shipmentId);\n                 bodyParameters.put(\"orderId\", orderId);\n                 bodyParameters.put(\"userLogin\", userLogin);\n@@ -397,17 +393,17 @@ public static Map oagisProcessShipment(DispatchContext ctx, Map context) {\n                 if (out != null) {\n                     writer = new OutputStreamWriter(out);\n                 } else if (UtilValidate.isNotEmpty(saveToFilename)) {\n-                \ttry {\n+                    try {\n                         File outdir = new File(saveToDirectory);\n                         if (!outdir.exists()) {\n                             outdir.mkdir();\n                         }\n                         writer = new PrintWriter(new BufferedWriter(new OutputStreamWriter(new FileOutputStream(new File(outdir, saveToFilename)), \"UTF-8\")));\n-                \t} catch (Exception e) {\n-                \t\tString errMsg = \"Error opening file to save message to [\" + saveToFilename + \"]: \" + e.toString();\n+                    } catch (Exception e) {\n+                        String errMsg = \"Error opening file to save message to [\" + saveToFilename + \"]: \" + e.toString();\n                         Debug.logError(e, errMsg, module);\n                         return ServiceUtil.returnError(errMsg);\n-                \t}\n+                    }\n                 } else if (UtilValidate.isNotEmpty(sendToUrl)) {\n                 \twriter = new StringWriter();\n                 }",
                "deletions": 75
            },
            {
                "sha": "e28ccb569abe221fd4db2463695dd767042157eb",
                "filename": "specialpurpose/oagis/webapp/oagis/message/ProcessShipment.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7afe36e114f7a13e153ab60b56d36274eeb89471/specialpurpose/oagis/webapp/oagis/message/ProcessShipment.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7afe36e114f7a13e153ab60b56d36274eeb89471/specialpurpose/oagis/webapp/oagis/message/ProcessShipment.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/oagis/webapp/oagis/message/ProcessShipment.ftl?ref=7afe36e114f7a13e153ab60b56d36274eeb89471",
                "patch": "@@ -83,8 +83,8 @@\n             </os:CONTACT>\r\n           </#if>\r\n         </os:PARTNER>\r\n+        <#list shipmentItems as shipmentItem>\r\n         <n:SHIPITEM>\r\n-          <#list shipmentItems as shipmentItem>\r\n             <os:QUANTITY>\r\n               <of:VALUE>${shipmentItem.quantity?if_exists}</of:VALUE>\r\n               <of:NUMOFDEC>0</of:NUMOFDEC>\r\n@@ -98,8 +98,8 @@\n               <of:DOCUMENTID>${shipment.shipmentId?if_exists}</of:DOCUMENTID>\r\n               <of:LINENUM>${shipmentItem.shipmentItemSeqId?if_exists}</of:LINENUM>\r\n             </n:DOCUMNTREF>\r\n-          </#list> \r\n         </n:SHIPITEM>\r\n+        </#list> \r\n         <#list externalIdSet?if_exists as externalId>\r\n         <n:DOCUMNTREF>\r\n           <of:DOCTYPE>PARTNER_SO</of:DOCTYPE>\r",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Prevent NPE when order item's item issuance does not have a ship group seqid, such as from a POS order.  Based on suggestion from Vikrant Rathorpe\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@544324 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/bc1ea7fbf02a5dc5d5bd93dc5da03cd2cb497d3d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/0accad964c1f8edc6e76c08d2b441813fc00ecd4",
        "bug_id": "ofbiz-framework_248",
        "file": [
            {
                "sha": "92acd9e58db9909aa8dac7c6e3bd69c2be14ee1e",
                "filename": "applications/order/webapp/ordermgr/order/orderitems.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/bc1ea7fbf02a5dc5d5bd93dc5da03cd2cb497d3d/applications/order/webapp/ordermgr/order/orderitems.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/bc1ea7fbf02a5dc5d5bd93dc5da03cd2cb497d3d/applications/order/webapp/ordermgr/order/orderitems.ftl",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/order/orderitems.ftl?ref=bc1ea7fbf02a5dc5d5bd93dc5da03cd2cb497d3d",
                "patch": "@@ -506,7 +506,7 @@ under the License.\n                           <#assign inventoryItem = itemIssuance.getRelatedOne(\"InventoryItem\")/>\n                           <b><i>${uiLabelMap.FacilityInventory}</i>:</b>\n                             <a href=\"/facility/control/EditInventoryItem?inventoryItemId=${itemIssuance.inventoryItemId}&amp;externalLoginKey=${externalLoginKey}\" class=\"buttontext\" style=\"font-size: xx-small;\">${itemIssuance.inventoryItemId}</a>\n-                            <b><i>${uiLabelMap.OrderShipGroup}</i>:</b> ${itemIssuance.shipGroupSeqId}\n+                            <b><i>${uiLabelMap.OrderShipGroup}</i>:</b> ${itemIssuance.shipGroupSeqId?if_exists}\n                             <#if (inventoryItem.serialNumber?has_content)><br><b><i>${uiLabelMap.ProductSerialNumber}</li>:</b> ${inventoryItem.serialNumber}&nbsp;</#if>                                                      \n \n                         </#if>",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed bug with orderHeader being used when it might not exist, making a huge error message for bad variable, NPE equivalent, rather than showing order not found message\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@525164 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c6a07a62f71cbead3ca54c766362144cf7d5e101",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6fcee3f4f0187192a85caa12d05afe4f61ef2ab3",
        "bug_id": "ofbiz-framework_249",
        "file": [
            {
                "sha": "e377bbb05ce61a2b9011335e4f7d1776dafcc002",
                "filename": "applications/ecommerce/webapp/ecommerce/WEB-INF/actions/order/orderstatus.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c6a07a62f71cbead3ca54c766362144cf7d5e101/applications/ecommerce/webapp/ecommerce/WEB-INF/actions/order/orderstatus.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c6a07a62f71cbead3ca54c766362144cf7d5e101/applications/ecommerce/webapp/ecommerce/WEB-INF/actions/order/orderstatus.bsh",
                "status": "modified",
                "changes": 5,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/ecommerce/webapp/ecommerce/WEB-INF/actions/order/orderstatus.bsh?ref=c6a07a62f71cbead3ca54c766362144cf7d5e101",
                "patch": "@@ -45,8 +45,6 @@ orderHeader = null;\n boolean isDemoStore = true;\n if (orderId != null && orderId.length() > 0) {\n     orderHeader = delegator.findByPrimaryKey(\"OrderHeader\", UtilMisc.toMap(\"orderId\", orderId));\n-    productStore = orderHeader.getRelatedOneCache(\"ProductStore\");\n-    if (productStore != null) isDemoStore = !\"N\".equals(productStore.getString(\"isDemoStore\"));\n     \n     // check OrderRole to make sure the user can view this order.  This check must be done for any order which is not anonymously placed and\n     // any anonymous order when the allowAnonymousView security flag (see above) is not set to Y, to prevent peeking\n@@ -62,6 +60,9 @@ if (orderId != null && orderId.length() > 0) {\n }\n \n if (orderHeader != null) {\n+    productStore = orderHeader.getRelatedOneCache(\"ProductStore\");\n+    if (productStore != null) isDemoStore = !\"N\".equals(productStore.getString(\"isDemoStore\"));\n+\n     orderReadHelper = new OrderReadHelper(orderHeader);\n     orderItems = orderReadHelper.getOrderItems();\n     orderAdjustments = orderReadHelper.getAdjustments();",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Small improvements to the permission-service code to show service name in exception messages, and to throw a descriptive exception instead of an NPE with no hasPermission field is returned from a permission-service\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@507808 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8304484c8628f1faaffac00e0739d79b430eab8a",
        "parent": "https://github.com/apache/ofbiz-framework/commit/be3547cd18dbfcf00d38095ffa71cee51b178ca1",
        "bug_id": "ofbiz-framework_250",
        "file": [
            {
                "sha": "b3622581e8bee2e9cd6c957511501e75cc92f1c8",
                "filename": "framework/service/src/org/ofbiz/service/ServiceDispatcher.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8304484c8628f1faaffac00e0739d79b430eab8a/framework/service/src/org/ofbiz/service/ServiceDispatcher.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8304484c8628f1faaffac00e0739d79b430eab8a/framework/service/src/org/ofbiz/service/ServiceDispatcher.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/service/src/org/ofbiz/service/ServiceDispatcher.java?ref=8304484c8628f1faaffac00e0739d79b430eab8a",
                "patch": "@@ -763,19 +763,22 @@ private Map checkAuth(String localName, Map context, ModelService origService) t\n         if (UtilValidate.isNotEmpty(origService.permissionServiceName)) {\n             Map permResp = origService.evalPermission(dctx, context);            \n             Boolean hasPermission = (Boolean) permResp.get(\"hasPermission\");\n+            if (hasPermission == null) {\n+                throw new ServiceAuthException(\"ERROR: the permission-service did not return a result. Not running the service [\" + origService.name + \"]\");\n+            }\n             if (hasPermission.booleanValue()) {\n                 context.putAll(permResp);\n                 context = origService.makeValid(context, ModelService.IN_PARAM);\n             } else {\n                 String message = (String) permResp.get(\"failMessage\");\n                 if (UtilValidate.isEmpty(message)) {\n-                    message = \"You do not have permission to invoke this service\";\n+                    message = \"You do not have permission to invoke the service [\" + origService.name + \"]\";\n                 }\n                 throw new ServiceAuthException(message);\n             }\n         } else {\n             if (!origService.evalPermissions(dctx, context)) {\n-                throw new ServiceAuthException(\"You do not have permission to invoke this service\");\n+                throw new ServiceAuthException(\"You do not have permission to invoke the service [\" + origService.name + \"]\");\n             }\n         }\n ",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed problems with recalc shipping service where lack of a shipment estimate would cause an NPE or return a service error, making it impossible to cancel purchase order items\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@463729 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/25609d90fd5ff54693071e76388a3720de5e67c2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/f6b6e2ae8cf329ea185b34fe4c3c955a4c08a2ef",
        "bug_id": "ofbiz-framework_251",
        "file": [
            {
                "sha": "d47c0eff2d5d02c6f0ac637bd6b2489455176dcc",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/25609d90fd5ff54693071e76388a3720de5e67c2/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/25609d90fd5ff54693071e76388a3720de5e67c2/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "status": "modified",
                "changes": 5,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderServices.java?ref=25609d90fd5ff54693071e76388a3720de5e67c2",
                "patch": "@@ -1437,10 +1437,11 @@ public static Map recalcOrderShipping(DispatchContext ctx, Map context) {\n \n                 List errorMessageList = (List) shippingEstMap.get(ModelService.ERROR_MESSAGE_LIST);\n                 if (errorMessageList != null) {\n-                    return ServiceUtil.returnError(errorMessageList);\n+                    Debug.logWarning(\"Problem finding shipping estimates for [\" + orderId + \"/ \" + shipGroupSeqId + \"] = \" + errorMessageList, module);\n+                    continue;\n                 }\n \n-                if (shippingTotal.doubleValue() != currentShipping) {\n+                if ((shippingTotal != null) && (shippingTotal.doubleValue() != currentShipping)) {\n                     // place the difference as a new shipping adjustment\n                     Double adjustmentAmount = new Double(shippingTotal.doubleValue() - currentShipping);\n                     String adjSeqId = delegator.getNextSeqId(\"OrderAdjustment\").toString();",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Small change to make sure that the \"attributes\" is always initialized even if empty.\nThis will resolve some NPE such as the one reported by Eriks Dobelis in OFBIZ-176.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@433904 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/25ed0ba0dad770ed0c77c93e34616eab4a8cfcf7",
        "parent": "https://github.com/apache/ofbiz-framework/commit/9ebf60f9718c2433dd271a756af76df7c236d36b",
        "bug_id": "ofbiz-framework_252",
        "file": [
            {
                "sha": "e3535c27afba39f5b16074fc5338fe94c438458f",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/25ed0ba0dad770ed0c77c93e34616eab4a8cfcf7/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/25ed0ba0dad770ed0c77c93e34616eab4a8cfcf7/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java",
                "status": "modified",
                "changes": 20,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartItem.java?ref=25ed0ba0dad770ed0c77c93e34616eab4a8cfcf7",
                "patch": "@@ -549,7 +549,7 @@ public ShoppingCartItem(ShoppingCartItem item) {\n         this.orderItemSeqId = item.getOrderItemSeqId();\n         this.additionalProductFeatureAndAppls = item.getAdditionalProductFeatureAndAppls() == null ?\n                 null : new HashMap(item.getAdditionalProductFeatureAndAppls());\n-        this.attributes = item.getAttributes() == null ? null : new HashMap(item.getAttributes());\n+        this.attributes = item.getAttributes() == null ? new HashMap() : new HashMap(item.getAttributes());\n         this.contactMechIdsMap = item.getOrderItemContactMechIds() == null ? null : new HashMap(item.getOrderItemContactMechIds());\n         this.orderItemPriceInfos = item.getOrderItemPriceInfos() == null ? null : new LinkedList(item.getOrderItemPriceInfos());\n         this.itemAdjustments = item.getAdjustments() == null ? null : new LinkedList(item.getAdjustments());\n@@ -600,7 +600,7 @@ protected ShoppingCartItem(GenericValue product, Map additionalProductFeatureAnd\n         }\n         this.itemGroup = itemGroup;\n         this.prodCatalogId = prodCatalogId;\n-        this.attributes = attributes;\n+        this.attributes = (attributes == null? FastMap.newInstance(): attributes);\n         this.delegator = _product.getDelegator();\n         this.delegatorName = _product.getDelegator().getDelegatorName();\n         this.addAllProductFeatureAndAppls(additionalProductFeatureAndAppls);\n@@ -619,7 +619,7 @@ protected ShoppingCartItem(GenericDelegator delegator, String itemTypeId, String\n             this.setBasePrice(basePrice.doubleValue());\n             this.setDisplayPrice(basePrice.doubleValue());\n         }\n-        this.attributes = attributes;\n+        this.attributes = (attributes == null? FastMap.newInstance(): attributes);\n         this.prodCatalogId = prodCatalogId;\n         this.delegatorName = delegator.getDelegatorName();\n         this.locale = locale;\n@@ -1230,15 +1230,11 @@ public void setShoppingList(String shoppingListId, String itemSeqId) {\n     }\n \n     public String getShoppingListId() {\n-        if (attributes != null && attributes.containsKey(\"shoppingListId\"))\n-            return (String) attributes.get(\"shoppingListId\");\n-        return null;\n+        return (String) attributes.get(\"shoppingListId\");\n     }\n \n     public String getShoppingListItemSeqId() {\n-        if (attributes != null && attributes.containsKey(\"shoppingListItemSeqId\"))\n-            return (String) attributes.get(\"shoppingListItemSeqId\");\n-        return null;\n+        return (String) attributes.get(\"shoppingListItemSeqId\");\n     }\n \n     /** Sets the requirementId. */\n@@ -1715,20 +1711,16 @@ public Map getFeatureIdQtyMap(double quantity) {\n \n     /** Removes an item attribute. */\n     public void removeAttribute(String name) {\n-        if (attributes != null) {\n-            attributes.remove(name);\n-        }\n+        attributes.remove(name);\n     }\n \n     /** Sets an item attribute. */\n     public void setAttribute(String name, Object value) {\n-        if (attributes == null) attributes = FastMap.newInstance();\n         attributes.put(name, value);\n     }\n \n     /** Return a specific attribute. */\n     public Object getAttribute(String name) {\n-        if (attributes == null) return null;\n         return attributes.get(name);\n     }\n ",
                "deletions": 14
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed npe while paginating on a result list after an unconstrained search (productId null).\nThanks to Jacques Le Roux of the bug report OFBIZ-130.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ofbiz/trunk@429114 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/73221b112f9ea6e9d49535b5f2e8d4f16d829aa0",
        "parent": "https://github.com/apache/ofbiz-framework/commit/7ccc3a2b4e477cb15a03a401cd47745c8abec6f6",
        "bug_id": "ofbiz-framework_253",
        "file": [
            {
                "sha": "a31923ddd8f677082685a81d398a981d74626053",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/entry/cart/LookupBulkAddProducts.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/73221b112f9ea6e9d49535b5f2e8d4f16d829aa0/applications/order/webapp/ordermgr/WEB-INF/actions/entry/cart/LookupBulkAddProducts.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/73221b112f9ea6e9d49535b5f2e8d4f16d829aa0/applications/order/webapp/ordermgr/WEB-INF/actions/entry/cart/LookupBulkAddProducts.bsh",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/entry/cart/LookupBulkAddProducts.bsh?ref=73221b112f9ea6e9d49535b5f2e8d4f16d829aa0",
                "patch": "@@ -23,6 +23,9 @@ import org.ofbiz.entity.condition.EntityConditionList;\n import org.ofbiz.base.util.UtilMisc;\n \n productId = request.getParameter(\"productId\");\n+if (productId == null) {\n+    productId = \"\";\n+}\n \n conditionList = new LinkedList();\n orConditionList = new LinkedList();",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Nicolas Malin \"getImageLocation generates NullPointer\" https://issues.apache.org/jira/browse/OFBIZ-4262\n\nWhen you use auto-field-entity on a form , you get a nullPointer :\n\njava.lang.NullPointerException\norg.ofbiz.widget.form.ModelFormField$DisplayField.getImageLocation(ModelFormField.java:2122)\norg.ofbiz.widget.form.MacroFormRenderer.renderDisplayField(MacroFormRenderer.java:193)\norg.ofbiz.widget.form.ModelFormField$DisplayField.renderFieldString(ModelFormField.java:2104)\norg.ofbiz.widget.form.ModelFormField.renderFieldString(ModelFormField.java:600)\norg.ofbiz.widget.form.ModelForm.renderItemRow(ModelForm.java:1707)\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1096140 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5bb2f3a42000076c4f5aba33b98d6a453420d769",
        "parent": "https://github.com/apache/ofbiz-framework/commit/3210eea16016e3984e301285cb8a8bc91b69fdb7",
        "bug_id": "ofbiz-framework_254",
        "file": [
            {
                "sha": "51902f12e931404408ec846dfe0017af43971b99",
                "filename": "framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5bb2f3a42000076c4f5aba33b98d6a453420d769/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5bb2f3a42000076c4f5aba33b98d6a453420d769/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "status": "modified",
                "changes": 6,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java?ref=5bb2f3a42000076c4f5aba33b98d6a453420d769",
                "patch": "@@ -2119,7 +2119,11 @@ public String setSize(String size){\n         }\n \n         public String getImageLocation(Map<String, Object> context){\n-            return this.imageLocation.expandString(context);\n+            if (this.imageLocation != null) {\n+                return this.imageLocation.expandString(context);\n+            } else {\n+                return \"\";\n+            }\n         }\n \n         public String getDescription(Map<String, Object> context) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "No functional changes, simple code refactoring around UtilValidate.is(Not)Empty()\n\nChanges implementation of UtilValidate.isEmpty() for Collection and Map by using isEmpty() instead of c.size() == 0). It's more clear and as efficient. Removes also useless parentheses there.\n\nMakes use of UtilValidate.is(Not)Empty() everywhere it makes senses. This for 2 reasons:\n* Make the code more readable by replacing the (!)null/isEmpty pattern.\n* Avoid possible NPEs when only isEmpty() was used (after Entity.find... for instance). I found a lot of cases (242 today) where isEmpty() could perhaps be replaced in Framework. But I guess no NPE checks were missing there and anyway it was too much for me to check them all... So I only did the relevant changes in Applications...\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1169478 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/2b712efb98335adb2358305fadc6486142a574e2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/cfc301acdb791e543a23079f9f42a7f393fe8e89",
        "bug_id": "ofbiz-framework_255",
        "file": [
            {
                "sha": "e4af9da05089eb1179f4692c9872e08970bde194",
                "filename": "applications/content/src/org/ofbiz/content/content/ContentServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/content/src/org/ofbiz/content/content/ContentServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/content/src/org/ofbiz/content/content/ContentServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/content/ContentServices.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -91,7 +91,7 @@\n             return ServiceUtil.returnError(UtilProperties.getMessage(resource, \"ContentAssocRetrievingError\", UtilMisc.toMap(\"errorString\", e.toString()), locale));\n         }\n \n-        if (targetOperations == null || targetOperations.isEmpty()) {\n+        if (UtilValidate.isEmpty(targetOperations)) {\n             results.put(\"contentList\", contentList);\n             return results;\n         }",
                "deletions": 1
            },
            {
                "sha": "37fac263e10ef5a6561906e346050fcb83e28d6e",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -3063,7 +3063,7 @@ private static void cloneWorkEffortCostCalcs(DispatchContext dctx, GenericValue\n                                  \"userLogin\", userLogin);\n             resultService = dispatcher.runSync(\"getManufacturingComponents\", serviceContext);\n             List<Map<String, Object>> components = UtilGenerics.checkList(resultService.get(\"componentsMap\"));\n-            if (components == null || components.isEmpty()) {\n+            if (UtilValidate.isEmpty(components)) {\n                 return ServiceUtil.returnError(UtilProperties.getMessage(resource, \"ManufacturingProductionRunCannotDecomposingInventoryItemNoComponentsFound\", UtilMisc.toMap(\"productId\", inventoryItem.getString(\"productId\")), locale));\n             }\n             Iterator<Map<String, Object>> componentsIt = components.iterator();",
                "deletions": 1
            },
            {
                "sha": "8f7b72f9ef24ff8ac4f0c9faad9f17b8bfc02bfb",
                "filename": "applications/marketing/src/org/ofbiz/sfa/vcard/VCard.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/marketing/src/org/ofbiz/sfa/vcard/VCard.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/marketing/src/org/ofbiz/sfa/vcard/VCard.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/marketing/src/org/ofbiz/sfa/vcard/VCard.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -122,7 +122,7 @@\n                                                         EntityCondition.makeCondition(\"geoTypeId\", EntityOperator.EQUALS, \"COUNTRY\"),\n                                                         EntityCondition.makeCondition(\"geoName\", EntityOperator.LIKE, workAddress.getCountry())), EntityOperator.AND);\n                     countryGeoList = delegator.findList(\"Geo\", cond, null, null, null, true);\n-                    if (!countryGeoList.isEmpty()) {\n+                    if (UtilValidate.isNotEmpty(countryGeoList)) {\n                         GenericValue countryGeo = EntityUtil.getFirst(countryGeoList);\n                         serviceCtx.put(\"countryGeoId\", countryGeo.get(\"geoId\"));\n                     }\n@@ -131,7 +131,7 @@\n                             EntityCondition.makeCondition(\"geoTypeId\", EntityOperator.EQUALS, \"STATE\"),\n                             EntityCondition.makeCondition(\"geoName\", EntityOperator.LIKE, workAddress.getRegion())), EntityOperator.AND);\n                     stateGeoList = delegator.findList(\"Geo\", condition, null, null, null, true);\n-                    if (!stateGeoList.isEmpty()) {\n+                    if (UtilValidate.isNotEmpty(stateGeoList)) {\n                         GenericValue stateGeo = EntityUtil.getFirst(stateGeoList);\n                         serviceCtx.put(\"stateProvinceGeoId\", stateGeo.get(\"geoId\"));\n                     }",
                "deletions": 2
            },
            {
                "sha": "d25a3e0cede6c5d3fd84f952f2662d93cbe0ad7e",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderReadHelper.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -2537,7 +2537,7 @@ public static BigDecimal calcOrderPromoAdjustmentsBd(List<GenericValue> allOrder\n \n         List<GenericValue> promoAdjustments = EntityUtil.filterByAnd(allOrderAdjustments, UtilMisc.toMap(\"orderAdjustmentTypeId\", \"PROMOTION_ADJUSTMENT\"));\n \n-        if (!promoAdjustments.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(promoAdjustments)) {\n \n             Iterator<GenericValue> promoAdjIter = promoAdjustments.iterator();\n             while (promoAdjIter.hasNext()) {",
                "deletions": 1
            },
            {
                "sha": "7a5b5cb329794080f54ec6f402c19349c44b8a2e",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -2791,7 +2791,7 @@ public int addOrderTerm(String termTypeId, String orderItemSeqId,BigDecimal term\n         GenericValue orderTerm = this.getDelegator().makeValue(\"OrderTerm\");\n         orderTerm.put(\"termTypeId\", termTypeId);\n         if (UtilValidate.isEmpty(orderItemSeqId)) {\n-        \torderItemSeqId = \"_NA_\";\n+                orderItemSeqId = \"_NA_\";\n         }\n         orderTerm.put(\"orderItemSeqId\", orderItemSeqId);\n         orderTerm.put(\"termValue\", termValue);",
                "deletions": 1
            },
            {
                "sha": "271ba75930cb127022a4656f9b99ebcc54159a3b",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartServices.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -633,7 +633,7 @@\n \n         List<GenericValue> adjustments = orh.getOrderHeaderAdjustments();\n         // If applyQuoteAdjustments is set to false then standard cart adjustments are used.\n-        if (!adjustments.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(adjustments)) {\n             // The cart adjustments are added to the cart\n             cart.getAdjustments().addAll(adjustments);\n         }",
                "deletions": 1
            },
            {
                "sha": "e5001ef39465e09056d94976a0e0160f38ca7af2",
                "filename": "applications/order/src/org/ofbiz/order/shoppinglist/ShoppingListEvents.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/order/src/org/ofbiz/order/shoppinglist/ShoppingListEvents.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/order/src/org/ofbiz/order/shoppinglist/ShoppingListEvents.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppinglist/ShoppingListEvents.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -377,7 +377,7 @@ public static String getAutoSaveListId(Delegator delegator, LocalDispatcher disp\n             List<GenericValue> existingLists = delegator.findByAnd(\"ShoppingList\", findMap);\n             Debug.logInfo(\"Finding existing auto-save shopping list with:  \\nfindMap: \" + findMap + \"\\nlists: \" + existingLists, module);\n     \n-            if (existingLists != null && !existingLists.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(existingLists)) {\n                 list = EntityUtil.getFirst(existingLists);\n                 autoSaveListId = list.getString(\"shoppingListId\");\n             }",
                "deletions": 1
            },
            {
                "sha": "b073970b3258d96d522ff6e3a896ff03b3ac601d",
                "filename": "applications/party/src/org/ofbiz/party/communication/CommunicationEventServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/party/src/org/ofbiz/party/communication/CommunicationEventServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/party/src/org/ofbiz/party/communication/CommunicationEventServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/src/org/ofbiz/party/communication/CommunicationEventServices.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -744,7 +744,7 @@\n                 Debug.logError(e, module);\n                 return ServiceUtil.returnError(e.getMessage());\n             }\n-            if (!commEvents.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(commEvents)) {\n                 Debug.logInfo(\"Ignoring Duplicate Email: \" + aboutThisEmail, module);\n                 return ServiceUtil.returnSuccess(UtilProperties.getMessage(resource, \n                         \"PartyCommEventMessageIgnoredDuplicateMessageId\", locale));\n@@ -756,7 +756,7 @@\n             List<Map<String, Object>> bccParties = buildListOfPartyInfoFromEmailAddresses(addressesBCC, userLogin, dispatcher);\n \n             //Get the first address from the list - this is the partyIdTo field of the CommunicationEvent\n-            if (!toParties.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(toParties)) {\n                 Iterator<Map<String, Object>> itr = toParties.iterator();\n                 Map<String, Object> firstAddressTo = itr.next();\n                 partyIdTo = (String)firstAddressTo.get(\"partyId\");",
                "deletions": 2
            },
            {
                "sha": "a1ee51f52cd865a2433370870c332023fd2c4ae1",
                "filename": "applications/product/src/org/ofbiz/product/category/CategoryServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/product/src/org/ofbiz/product/category/CategoryServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/product/src/org/ofbiz/product/category/CategoryServices.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/category/CategoryServices.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -123,7 +123,7 @@\n             EntityCondition condition = EntityCondition.makeCondition(EntityCondition.makeCondition(\"releaseDate\", EntityOperator.EQUALS, null), EntityOperator.OR, EntityCondition.makeCondition(\"releaseDate\", EntityOperator.LESS_THAN_EQUAL_TO, releaseDateLimit));\n             filterConditions.add(condition);\n         }\n-        if (!filterConditions.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(filterConditions)) {\n             productCategoryMembers = EntityUtil.filterByCondition(productCategoryMembers, EntityCondition.makeCondition(filterConditions, EntityOperator.AND));\n         }\n \n@@ -290,7 +290,7 @@ private static String getCategoryFindEntityName(Delegator delegator, List<String\n                         EntityCondition condition = EntityCondition.makeCondition(EntityCondition.makeCondition(\"releaseDate\", EntityOperator.EQUALS, null), EntityOperator.OR, EntityCondition.makeCondition(\"releaseDate\", EntityOperator.LESS_THAN_EQUAL_TO, releaseDateLimit));\n                         filterConditions.add(condition);\n                     }\n-                    if (!filterConditions.isEmpty()) {\n+                    if (UtilValidate.isNotEmpty(filterConditions)) {\n                         productCategoryMembers = EntityUtil.filterByCondition(productCategoryMembers, EntityCondition.makeCondition(filterConditions, EntityOperator.AND));\n                     }\n ",
                "deletions": 2
            },
            {
                "sha": "01f14bd87a18fdd479a36cdc8c07e50de0a151ce",
                "filename": "applications/product/src/org/ofbiz/product/category/CategoryWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/applications/product/src/org/ofbiz/product/category/CategoryWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/applications/product/src/org/ofbiz/product/category/CategoryWorker.java",
                "status": "modified",
                "changes": 6,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/category/CategoryWorker.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -87,8 +87,7 @@ public static void getCategoriesWithNoParent(ServletRequest request, String attr\n             for (GenericValue curCat: allCategories) {\n                 Collection<GenericValue> parentCats = curCat.getRelatedCache(\"CurrentProductCategoryRollup\");\n \n-                if (parentCats.isEmpty())\n-                    results.add(curCat);\n+                if (parentCats.isEmpty()) results.add(curCat);\n             }\n         } catch (GenericEntityException e) {\n             Debug.logWarning(e, module);\n@@ -116,8 +115,7 @@ public static void getRelatedCategories(ServletRequest request, String attribute\n     public static void getRelatedCategories(ServletRequest request, String attributeName, String parentId, boolean limitView, boolean excludeEmpty) {\n         List<GenericValue> categories = getRelatedCategoriesRet(request, attributeName, parentId, limitView, excludeEmpty);\n \n-        if (!categories.isEmpty())\n-            request.setAttribute(attributeName, categories);\n+        if (!categories.isEmpty())  request.setAttribute(attributeName, categories);\n     }\n \n     public static List<GenericValue> getRelatedCategoriesRet(ServletRequest request, String attributeName, String parentId, boolean limitView) {",
                "deletions": 4
            },
            {
                "sha": "53cd27973f727e8a1c4faefcd91d6790d04b7f2a",
                "filename": "framework/base/src/org/ofbiz/base/util/UtilValidate.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/base/src/org/ofbiz/base/util/UtilValidate.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/base/src/org/ofbiz/base/util/UtilValidate.java",
                "status": "modified",
                "changes": 12,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/org/ofbiz/base/util/UtilValidate.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -206,32 +206,32 @@ public static boolean isNotEmpty(IsEmpty o) {\n \n     /** Check whether string s is empty. */\n     public static boolean isEmpty(String s) {\n-        return ((s == null) || (s.length() == 0));\n+        return (s == null) || s.length() == 0;\n     }\n \n     /** Check whether collection c is empty. */\n     public static <E> boolean isEmpty(Collection<E> c) {\n-        return ((c == null) || (c.size() == 0));\n+        return (c == null) || c.isEmpty();\n     }\n \n     /** Check whether map m is empty. */\n     public static <K,E> boolean isEmpty(Map<K,E> m) {\n-        return ((m == null) || (m.size() == 0));\n+        return (m == null) || m.isEmpty();\n     }\n \n     /** Check whether charsequence c is empty. */\n     public static <E> boolean isEmpty(CharSequence c) {\n-        return ((c == null) || (c.length() == 0));\n+        return (c == null) || (c.length() == 0);\n     }\n \n     /** Check whether string s is NOT empty. */\n     public static boolean isNotEmpty(String s) {\n-        return ((s != null) && (s.length() > 0));\n+        return (s != null) && (s.length() > 0);\n     }\n \n     /** Check whether collection c is NOT empty. */\n     public static <E> boolean isNotEmpty(Collection<E> c) {\n-        return ((c != null) && (c.size() > 0));\n+        return (c != null) && !c.isEmpty();\n     }\n \n     /** Check whether charsequence c is NOT empty. */",
                "deletions": 6
            },
            {
                "sha": "68fcc5ffdfaa085f094c9191e859c6fec9e477e9",
                "filename": "framework/base/src/org/ofbiz/base/util/collections/FlexibleMapAccessor.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/base/src/org/ofbiz/base/util/collections/FlexibleMapAccessor.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/base/src/org/ofbiz/base/util/collections/FlexibleMapAccessor.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/org/ofbiz/base/util/collections/FlexibleMapAccessor.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -121,7 +121,7 @@ public T get(Map<String, ? extends Object> base) {\n      * @return the found value\n      */\n     public T get(Map<String, ? extends Object> base, Locale locale) {\n-        if (base == null || this.isEmpty()) {\n+        if (UtilValidate.isEmpty(base)) {\n             return null;\n         }\n         if (!base.containsKey(UelUtil.localizedMapLocaleKey) && locale != null) {",
                "deletions": 1
            },
            {
                "sha": "c8d4eff04dd351786b31510a210f174c07c848a1",
                "filename": "framework/base/src/org/ofbiz/base/util/template/FreeMarkerWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/base/src/org/ofbiz/base/util/template/FreeMarkerWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/base/src/org/ofbiz/base/util/template/FreeMarkerWorker.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/org/ofbiz/base/util/template/FreeMarkerWorker.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -108,7 +108,7 @@ public static Configuration makeConfiguration(BeansWrapper wrapper) {\n             URL propertyURL = resources.nextElement();\n             Debug.logInfo(\"loading properties: \" + propertyURL, module);\n             Properties props = UtilProperties.getProperties(propertyURL);\n-            if (props == null || props.isEmpty()) {\n+            if (UtilValidate.isEmpty(props)) {\n                 Debug.logError(\"Unable to locate properties file \" + propertyURL, module);\n             } else {\n                 loadTransforms(loader, props, newConfig);",
                "deletions": 1
            },
            {
                "sha": "7e7d237471a838904bd9b0d57327831d3fc8ce8c",
                "filename": "framework/birt/src/org/ofbiz/birt/report/service/OFBizBirtViewerReportService.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/birt/src/org/ofbiz/birt/report/service/OFBizBirtViewerReportService.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/birt/src/org/ofbiz/birt/report/service/OFBizBirtViewerReportService.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/birt/src/org/ofbiz/birt/report/service/OFBizBirtViewerReportService.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -48,6 +48,7 @@\n import org.eclipse.birt.report.utility.ParameterAccessor;\n import org.ofbiz.base.util.Debug;\n import org.ofbiz.base.util.UtilGenerics;\n+import org.ofbiz.base.util.UtilValidate;\n import org.ofbiz.birt.container.BirtContainer;\n \n @SuppressWarnings(\"deprecation\")\n@@ -106,7 +107,7 @@ public String runReport(IViewerReportDesignHandle design, String outputDocName,\n                 Debug.logError(e, module);\n             }\n             List<Exception> errors = this.runReport(request, runnable, outputDocName, locale, timeZone, parsedParams, displayTextMap, maxRows);\n-            if (errors != null && !errors.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(errors)) {\n                 errorList.addAll(errors);\n             }\n         } catch ( RemoteException e ) {",
                "deletions": 1
            },
            {
                "sha": "260fd956b8228fdf414e0baef27eb2f2be905b5b",
                "filename": "framework/entity/src/org/ofbiz/entity/datasource/GenericDAO.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/entity/src/org/ofbiz/entity/datasource/GenericDAO.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/entity/src/org/ofbiz/entity/datasource/GenericDAO.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/datasource/GenericDAO.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -814,11 +814,11 @@ protected StringBuilder makeConditionWhereString(StringBuilder whereString, Stri\n         }\n \n         List<EntityCondition> conditions = FastList.newInstance();\n-        if (whereEntityCondition != null && !whereEntityCondition.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(whereEntityCondition)) {\n             conditions.add(whereEntityCondition);\n         }\n \n-        if (modelViewEntity != null && !viewWhereConditions.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(modelViewEntity)) {\n             EntityCondition viewWhereEntityCondition = EntityCondition.makeCondition(viewWhereConditions);\n             if (!viewWhereEntityCondition.isEmpty()) {\n                 conditions.add(viewWhereEntityCondition);",
                "deletions": 2
            },
            {
                "sha": "6705b49b2dc6a325634fbdf93006171cd7d19aa0",
                "filename": "framework/entity/src/org/ofbiz/entity/transaction/TransactionUtil.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/entity/src/org/ofbiz/entity/transaction/TransactionUtil.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/entity/src/org/ofbiz/entity/transaction/TransactionUtil.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/entity/src/org/ofbiz/entity/transaction/TransactionUtil.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -154,7 +154,7 @@ public static boolean begin(int timeout) throws GenericTransactionException {\n \n                     RollbackOnlyCause roc = getSetRollbackOnlyCause();\n                     // do we have a cause? if so, throw special exception\n-                    if (roc != null && !roc.isEmpty()) {\n+                    if (UtilValidate.isNotEmpty(roc)) {\n                         throw new GenericTransactionException(\"The current transaction is marked for rollback, not beginning a new transaction and aborting current operation; the rollbackOnly was caused by: \" + roc.getCauseMessage(), roc.getCauseThrowable());\n                     } else {\n                         return false;",
                "deletions": 1
            },
            {
                "sha": "5354dd81170483bdf39d5e15c778f8c3b90a9257",
                "filename": "framework/jetty/src/org/ofbiz/jetty/container/JettyContainer.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/jetty/src/org/ofbiz/jetty/container/JettyContainer.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/jetty/src/org/ofbiz/jetty/container/JettyContainer.java",
                "status": "modified",
                "changes": 5,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/jetty/src/org/ofbiz/jetty/container/JettyContainer.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -42,6 +42,7 @@\n import org.ofbiz.base.container.ContainerException;\n import org.ofbiz.base.util.Debug;\n import org.ofbiz.base.util.SSLUtil;\n+import org.ofbiz.base.util.UtilValidate;\n \n \n /**\n@@ -116,12 +117,12 @@ private void initJetty() throws ContainerException {\n                         context.setSessionHandler(new SessionHandler(sm));\n \n                         // set the virtual hosts\n-                        if (virtualHosts != null && !virtualHosts.isEmpty()) {\n+                        if (UtilValidate.isNotEmpty(virtualHosts)) {\n                             context.setVirtualHosts((String[]) virtualHosts.toArray());\n                         }\n \n                         // set the init parameters\n-                        if (initParameters != null && !initParameters.isEmpty()) {\n+                        if (UtilValidate.isNotEmpty(initParameters)) {\n                             context.setInitParams(initParameters);\n                         }\n ",
                "deletions": 2
            },
            {
                "sha": "afa18d19470f1ab898de7761314abf8519e29678",
                "filename": "framework/sql/src/org/ofbiz/sql/SQLInsert.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/sql/src/org/ofbiz/sql/SQLInsert.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/sql/src/org/ofbiz/sql/SQLInsert.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/sql/src/org/ofbiz/sql/SQLInsert.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -22,6 +22,7 @@\n import java.util.List;\n \n import org.ofbiz.base.util.StringUtil;\n+import org.ofbiz.base.util.UtilValidate;\n \n public final class SQLInsert extends SQLStatement<SQLInsert> {\n     private final TableName tableName;\n@@ -64,7 +65,7 @@ public boolean equals(Object o) {\n     public StringBuilder appendTo(StringBuilder sb) {\n         sb.append(\"INSERT INTO \");\n         tableName.appendTo(sb);\n-        if (columns != null && !columns.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(columns)) {\n             sb.append(\" (\");\n             StringUtil.append(sb, columns, null, null, \", \");\n             sb.append(')');",
                "deletions": 1
            },
            {
                "sha": "37fb08fa66eb695d09f1fec7e10a4fc3115c853d",
                "filename": "framework/testtools/src/org/ofbiz/testtools/seleniumxml/RemoteRequest.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/testtools/src/org/ofbiz/testtools/seleniumxml/RemoteRequest.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/testtools/src/org/ofbiz/testtools/seleniumxml/RemoteRequest.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/testtools/src/org/ofbiz/testtools/seleniumxml/RemoteRequest.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -58,6 +58,8 @@\n import org.apache.http.protocol.BasicHttpContext;\n import org.jdom.Element;\n \n+import org.ofbiz.base.util.UtilValidate;\n+\n \n public class RemoteRequest {\n \n@@ -114,7 +116,7 @@\n     public RemoteRequest(SeleniumXml parent, List<Element> children, List<Element> loginAs, String requestUrl, String hostString, String responseHandlerMode) {\n \n         this(parent, children, requestUrl, hostString, responseHandlerMode);\n-        if(loginAs != null && !loginAs.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(loginAs)) {\n             Element elem = loginAs.get(0);\n \n             this.loginAsUserParam = elem.getAttributeValue(\"username-param\");",
                "deletions": 1
            },
            {
                "sha": "7d88f77ddfb862a5512470127c89d0a54e9d409e",
                "filename": "framework/widget/src/org/ofbiz/widget/form/ModelForm.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/widget/src/org/ofbiz/widget/form/ModelForm.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/widget/src/org/ofbiz/widget/form/ModelForm.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/ModelForm.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -2492,7 +2492,7 @@ public boolean getSeparateColumns() {\n     }\n \n     public boolean getPaginate(Map<String, Object> context) {\n-        if (this.paginate != null && !this.paginate.isEmpty() && UtilValidate.isNotEmpty(this.paginate.expandString(context))) {\n+        if (UtilValidate.isNotEmpty(this.paginate) && UtilValidate.isNotEmpty(this.paginate.expandString(context))) {\n             return Boolean.valueOf(this.paginate.expandString(context)).booleanValue();\n         } else {\n             return true;",
                "deletions": 1
            },
            {
                "sha": "88fc476cfc22f8ddded4e8c917393c16ec39ffd2",
                "filename": "framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java",
                "status": "modified",
                "changes": 46,
                "additions": 23,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/form/ModelFormField.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -266,25 +266,25 @@ public void mergeOverrideModelFormField(ModelFormField overrideFormField) {\n         // incorporate updates for values that are not empty in the overrideFormField\n         if (UtilValidate.isNotEmpty(overrideFormField.name))\n             this.name = overrideFormField.name;\n-        if (overrideFormField.mapAcsr != null && !overrideFormField.mapAcsr.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(overrideFormField.mapAcsr)) {\n             //Debug.logInfo(\"overriding mapAcsr, old=\" + (this.mapAcsr==null?\"null\":this.mapAcsr.getOriginalName()) + \", new=\" + overrideFormField.mapAcsr.getOriginalName(), module);\n             this.mapAcsr = overrideFormField.mapAcsr;\n         }\n         if (UtilValidate.isNotEmpty(overrideFormField.entityName))\n             this.entityName = overrideFormField.entityName;\n         if (UtilValidate.isNotEmpty(overrideFormField.serviceName))\n             this.serviceName = overrideFormField.serviceName;\n-        if (overrideFormField.entryAcsr != null && !overrideFormField.entryAcsr.isEmpty())\n+        if (UtilValidate.isNotEmpty(overrideFormField.entryAcsr))\n             this.entryAcsr = overrideFormField.entryAcsr;\n         if (UtilValidate.isNotEmpty(overrideFormField.parameterName))\n             this.parameterName = overrideFormField.parameterName;\n         if (UtilValidate.isNotEmpty(overrideFormField.fieldName))\n             this.fieldName = overrideFormField.fieldName;\n         if (UtilValidate.isNotEmpty(overrideFormField.attributeName))\n             this.attributeName = overrideFormField.attributeName;\n-        if (overrideFormField.title != null && !overrideFormField.title.isEmpty()) // title=\"\" can be used to override the original value\n+        if (UtilValidate.isNotEmpty(overrideFormField.title)) // title=\"\" can be used to override the original value\n             this.title = overrideFormField.title;\n-        if (overrideFormField.tooltip != null && !overrideFormField.tooltip.isEmpty())\n+        if (UtilValidate.isNotEmpty(overrideFormField.tooltip))\n             this.tooltip = overrideFormField.tooltip;\n         if (overrideFormField.requiredField != null)\n             this.requiredField = overrideFormField.requiredField;\n@@ -304,9 +304,9 @@ public void mergeOverrideModelFormField(ModelFormField overrideFormField) {\n             this.redWhen = overrideFormField.redWhen;\n         if (UtilValidate.isNotEmpty(overrideFormField.event))\n             this.event = overrideFormField.event;\n-        if (overrideFormField.action != null && !overrideFormField.action.isEmpty())\n+        if (UtilValidate.isNotEmpty(overrideFormField.action))\n             this.action = overrideFormField.action;\n-        if (overrideFormField.useWhen != null && !overrideFormField.useWhen.isEmpty())\n+        if (UtilValidate.isNotEmpty(overrideFormField.useWhen))\n             this.useWhen = overrideFormField.useWhen;\n         if (overrideFormField.fieldInfo != null) {\n             this.setFieldInfo(overrideFormField.fieldInfo);\n@@ -654,7 +654,7 @@ public String getEntityName() {\n     }\n \n     public String getEntryName() {\n-        if (this.entryAcsr != null && !this.entryAcsr.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(this.entryAcsr)) {\n             return this.entryAcsr.getOriginalName();\n         } else {\n             return this.name;\n@@ -713,7 +713,7 @@ public String getEntry(Map<String, ? extends Object> context , String defaultVal\n                 dataMapIsContext = true;\n             }\n             Object retVal = null;\n-            if (this.entryAcsr != null && !this.entryAcsr.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(this.entryAcsr)) {\n                 //Debug.logInfo(\"Getting entry, using entryAcsr for field \" + this.getName() + \" of form \" + this.modelForm.getName(), module);\n                 if (dataMap instanceof GenericEntity) {\n                     GenericEntity genEnt = (GenericEntity) dataMap;\n@@ -735,7 +735,7 @@ public String getEntry(Map<String, ? extends Object> context , String defaultVal\n             if (dataMapIsContext && retVal == null && !Boolean.FALSE.equals(useRequestParameters)) {\n                 Map<String, ? extends Object> parameters = UtilGenerics.checkMap(context.get(\"parameters\"));\n                 if (parameters != null) {\n-                    if (this.entryAcsr != null && !this.entryAcsr.isEmpty()) {\n+                    if (UtilValidate.isNotEmpty(this.entryAcsr)) {\n                         retVal = this.entryAcsr.get(parameters);\n                     } else {\n                         retVal = parameters.get(this.name);\n@@ -779,7 +779,7 @@ public String getEntry(Map<String, ? extends Object> context , String defaultVal\n     }\n \n     public Map<String, ? extends Object> getMap(Map<String, ? extends Object> context) {\n-        if (this.mapAcsr == null || this.mapAcsr.isEmpty()) {\n+        if (UtilValidate.isEmpty(this.mapAcsr)) {\n             //Debug.logInfo(\"Getting Map from default of the form because of no mapAcsr for field \" + this.getName(), module);\n             return this.modelForm.getDefaultMap(context);\n         } else {\n@@ -820,7 +820,7 @@ public String getFieldName() {\n      * @return returns the name of the Map in the form context that contains the entry\n      */\n     public String getMapName() {\n-        if (this.mapAcsr != null && !this.mapAcsr.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(this.mapAcsr)) {\n             return this.mapAcsr.getOriginalName();\n         } else {\n             return this.modelForm.getDefaultMapName();\n@@ -871,7 +871,7 @@ public String getEvent() {\n     }\n \n     public String getAction(Map<String, ? extends Object> context) {\n-        if (this.action != null && !this.action.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(this.action)) {\n             return action.expandString(context);\n         } else {\n             return null;\n@@ -1002,7 +1002,7 @@ public String getServiceName() {\n     }\n \n     public String getTitle(Map<String, Object> context) {\n-        if (this.title != null && !this.title.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(this.title)) {\n             return title.expandString(context);\n         } else {\n             // create a title from the name of this field; expecting a Java method/field style name, ie productName or productCategoryId\n@@ -1088,15 +1088,15 @@ public String getSortFieldStyleDesc() {\n     }\n \n     public String getTooltip(Map<String, Object> context) {\n-        if (tooltip != null && !tooltip.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(tooltip)) {\n             return tooltip.expandString(context);\n         } else {\n             return \"\";\n         }\n     }\n \n     public String getUseWhen(Map<String, Object> context) {\n-        if (this.useWhen != null && !this.useWhen.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(this.useWhen)) {\n             return this.useWhen.expandString(context);\n         } else {\n             return \"\";\n@@ -2127,7 +2127,7 @@ public String getImageLocation(Map<String, Object> context){\n \n         public String getDescription(Map<String, Object> context) {\n             String retVal = null;\n-            if (this.description != null && !this.description.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(this.description)) {\n                 retVal = this.description.expandString(context);\n             } else {\n                 retVal = this.modelFormField.getEntry(context);\n@@ -2139,7 +2139,7 @@ public String getDescription(Map<String, Object> context) {\n                 Locale locale = (Locale) context.get(\"locale\");\n                 if (locale == null) locale = Locale.getDefault();\n                 String isoCode = null;\n-                if (this.currency != null && !this.currency.isEmpty()) {\n+                if (UtilValidate.isNotEmpty(this.currency)) {\n                     isoCode = this.currency.expandString(context);\n                 }\n \n@@ -2308,7 +2308,7 @@ public DisplayEntityField(Element element, ModelFormField modelFormField) {\n             this.cache = !\"false\".equals(element.getAttribute(\"cache\"));\n             this.size = element.getAttribute(\"size\");\n \n-            if (this.description == null || this.description.isEmpty()) {\n+            if (UtilValidate.isEmpty(this.description)) {\n                 this.setDescription(\"${description}\");\n             }\n \n@@ -3201,7 +3201,7 @@ public void setClock(String str) {\n          * @return Default value string for date-time\n          */\n         public String getDefaultDateTimeString(Map<String, Object> context) {\n-            if (this.defaultValue != null && !this.defaultValue.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(this.defaultValue)) {\n                 return this.getDefaultValue(context);\n             }\n \n@@ -3566,7 +3566,7 @@ public void renderFieldString(Appendable writer, Map<String, Object> context, Fo\n         }\n \n         public String getValue(Map<String, Object> context) {\n-            if (this.value != null && !this.value.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(this.value)) {\n                 String valueEnc = this.value.expandString(context);\n                 StringUtil.SimpleEncoder simpleEncoder = (StringUtil.SimpleEncoder) context.get(\"simpleEncoder\");\n                 if (simpleEncoder != null) {\n@@ -3961,7 +3961,7 @@ public String getDefaultValue(Map<String, Object> context) {\n         }\n \n         public String getValue(Map<String, Object> context) {\n-            if (this.value != null && !this.value.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(this.value)) {\n                 return this.value.expandString(context);\n             } else {\n                 return modelFormField.getEntry(context);\n@@ -3973,7 +3973,7 @@ public void setValue(String string) {\n         }\n \n         public String getDescription(Map<String, Object> context) {\n-            if (this.description != null && !this.description.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(this.description)) {\n                 return this.description.expandString(context);\n             } else {\n                 return \"\";\n@@ -3985,7 +3985,7 @@ public void setDescription(String description) {\n         }\n \n         public String getAlternate(Map<String, Object> context) {\n-            if (this.alternate != null && !this.alternate.isEmpty()) {\n+            if (UtilValidate.isNotEmpty(this.alternate)) {\n                 return this.alternate.expandString(context);\n             } else {\n                 return \"\";",
                "deletions": 23
            },
            {
                "sha": "a2b8e14793834fa55a3514b7a90ec86870d03971",
                "filename": "framework/widget/src/org/ofbiz/widget/menu/ModelMenuItem.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/framework/widget/src/org/ofbiz/widget/menu/ModelMenuItem.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/framework/widget/src/org/ofbiz/widget/menu/ModelMenuItem.java",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/src/org/ofbiz/widget/menu/ModelMenuItem.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -240,9 +240,9 @@ public void mergeOverrideModelMenuItem(ModelMenuItem overrideMenuItem) {\n             this.entityName = overrideMenuItem.entityName;\n         if (UtilValidate.isNotEmpty(overrideMenuItem.parentPortalPageId))\n             this.parentPortalPageId = overrideMenuItem.parentPortalPageId;\n-        if (overrideMenuItem.title != null && !overrideMenuItem.title.isEmpty())\n+        if (UtilValidate.isNotEmpty(overrideMenuItem.title))\n             this.title = overrideMenuItem.title;\n-        if (overrideMenuItem.tooltip != null && !overrideMenuItem.tooltip.isEmpty())\n+        if (UtilValidate.isNotEmpty(overrideMenuItem.tooltip))\n             this.tooltip = overrideMenuItem.tooltip;\n         if (UtilValidate.isNotEmpty(overrideMenuItem.titleStyle))\n             this.titleStyle = overrideMenuItem.titleStyle;\n@@ -388,7 +388,7 @@ public String getSelectedStyle() {\n     }\n \n     public String getTooltip(Map<String, Object> context) {\n-        if (tooltip != null && !tooltip.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(tooltip)) {\n             return tooltip.expandString(context);\n         } else {\n             return \"\";",
                "deletions": 3
            },
            {
                "sha": "7d0d22dbbe189aa4e5b79245fee894d98e34dc1a",
                "filename": "specialpurpose/pos/src/org/ofbiz/pos/PosTransaction.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/specialpurpose/pos/src/org/ofbiz/pos/PosTransaction.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/specialpurpose/pos/src/org/ofbiz/pos/PosTransaction.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/pos/src/org/ofbiz/pos/PosTransaction.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -1188,7 +1188,7 @@ public static synchronized PosTransaction getCurrentTx(XuiSession session) {\n     public void loadSale(PosScreen pos) {\n         trace(\"Load a sale\");\n         List<GenericValue> shoppingLists = createShoppingLists();\n-        if (!shoppingLists.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(shoppingLists)) {\n             Map<String, String> salesMap = createSalesMap(shoppingLists);\n             if (!salesMap.isEmpty()) {\n                 LoadSale loadSale = new LoadSale(salesMap, this, pos);\n@@ -1204,7 +1204,7 @@ public void loadSale(PosScreen pos) {\n \n     public void loadOrder(PosScreen pos) {\n         List<GenericValue> orders = findOrders();\n-        if (!orders.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(orders)) {\n             LoadSale loadSale = new LoadSale(createOrderHash(orders), this, pos);\n             loadSale.openDlg();\n         } else {",
                "deletions": 2
            },
            {
                "sha": "dd031d06206355ec4eecc187218f698c9cbcf767",
                "filename": "specialpurpose/pos/src/org/ofbiz/pos/component/Journal.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/specialpurpose/pos/src/org/ofbiz/pos/component/Journal.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/specialpurpose/pos/src/org/ofbiz/pos/component/Journal.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/pos/src/org/ofbiz/pos/component/Journal.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -32,6 +32,7 @@\n \n import org.ofbiz.base.util.Debug;\n import org.ofbiz.base.util.UtilProperties;\n+import org.ofbiz.base.util.UtilValidate;\n import org.ofbiz.pos.PosTransaction;\n import org.ofbiz.pos.screen.PosScreen;\n \n@@ -135,7 +136,7 @@ public synchronized void refresh(PosScreen pos) {\n \n         PosTransaction tx = PosTransaction.getCurrentTx(pos.getSession());\n         XModel jmodel = this.createModel();\n-        if (tx != null && !tx.isEmpty()) {\n+        if (UtilValidate.isNotEmpty(tx)) {\n             tx.appendItemDataModel(jmodel);\n             this.appendEmpty(jmodel);\n             tx.appendTotalDataModel(jmodel);",
                "deletions": 1
            },
            {
                "sha": "07d6adb54aa1deba216927c225373712df9b4eb5",
                "filename": "specialpurpose/workflow/src/org/ofbiz/workflow/WfApplicationServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/2b712efb98335adb2358305fadc6486142a574e2/specialpurpose/workflow/src/org/ofbiz/workflow/WfApplicationServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/2b712efb98335adb2358305fadc6486142a574e2/specialpurpose/workflow/src/org/ofbiz/workflow/WfApplicationServices.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/workflow/src/org/ofbiz/workflow/WfApplicationServices.java?ref=2b712efb98335adb2358305fadc6486142a574e2",
                "patch": "@@ -32,6 +32,7 @@\n import org.ofbiz.base.util.ObjectType;\n import org.ofbiz.base.util.UtilGenerics;\n import org.ofbiz.base.util.UtilMisc;\n+import org.ofbiz.base.util.UtilValidate;\n import org.ofbiz.entity.Delegator;\n import org.ofbiz.entity.GenericEntityException;\n import org.ofbiz.entity.GenericValue;\n@@ -310,7 +311,7 @@ private static GenericValue getWorkEffortPartyAssigment(Delegator delegator, Str\n \n         try {\n             final List<GenericValue> assigments = delegator.findByAnd(\"WorkEffortPartyAssignment\", expresions, orderBy);\n-            if (assigments.isEmpty()) {\n+            if (UtilValidate.isEmpty(assigments)) {\n                 Debug.logError(\"No accepted activities found for the workEffortId=\" + workEffortId, module);\n                 throw new GenericServiceException(\"Can not find WorkEffortPartyAssignment for the Workflow service. WorkEffortId=\" + workEffortId);\n             }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Norbert Rieger \"NPE in EbayOrderServices.createShoppingCar\" (https://issues.apache.org/jira/browse/OFBIZ-3926) - OFBIZ-3926\n\nDue to missing property \"stateProvinceGeoId\" in shippingAddressCtx the following call raises an NPE (EbayOrderServices.createShoppingCart, line 1118ff):\n\nList<GenericValue> shipInfo = PartyWorker.findMatchingPersonPostalAddresses(delegator, shippingAddressCtx.get(\"shippingAddressStreet1\").toString(),\n(UtilValidate.isEmpty(shippingAddressCtx.get(\"shippingAddressStreet2\")) ? null : shippingAddressCtx.get(\"shippingAddressStreet2\").toString()), shippingAddressCtx.get(\"city\").toString(),\nshippingAddressCtx.get(\"stateProvinceGeoId\").toString(), shippingAddressCtx.get(\"shippingAddressPostalCode\").toString(), null, shippingAddressCtx.get(\"countryGeoId\").toString(), firstName, null, lastName);\n\nChecking whether the property is set (not empty) will solve this.\n\nJLR: Norbert did the same for shippingAddressStreet2. I did not check if others were missing, hopefully there are none...\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1062762 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/3d6ba59f37894f3767d9ad7526629e306787cd11",
        "parent": "https://github.com/apache/ofbiz-framework/commit/0272662adeb73d03b3f8bfd4c75966250ff90048",
        "bug_id": "ofbiz-framework_256",
        "file": [
            {
                "sha": "e64ac305cef03e4bb771cc786dda489d8c1a1149",
                "filename": "specialpurpose/ebay/src/org/ofbiz/ebay/EbayOrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/3d6ba59f37894f3767d9ad7526629e306787cd11/specialpurpose/ebay/src/org/ofbiz/ebay/EbayOrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/3d6ba59f37894f3767d9ad7526629e306787cd11/specialpurpose/ebay/src/org/ofbiz/ebay/EbayOrderServices.java",
                "status": "modified",
                "changes": 16,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/ebay/src/org/ofbiz/ebay/EbayOrderServices.java?ref=3d6ba59f37894f3767d9ad7526629e306787cd11",
                "patch": "@@ -1115,9 +1115,19 @@\n                     String city = (String) shippingAddressCtx.get(\"shippingAddressCityName\");\n                     EbayHelper.correctCityStateCountry(dispatcher, shippingAddressCtx, city, state, country);\n \n-                    List<GenericValue> shipInfo = PartyWorker.findMatchingPersonPostalAddresses(delegator, shippingAddressCtx.get(\"shippingAddressStreet1\").toString(),\n-                            (UtilValidate.isEmpty(shippingAddressCtx.get(\"shippingAddressStreet2\")) ? null : shippingAddressCtx.get(\"shippingAddressStreet2\").toString()), shippingAddressCtx.get(\"city\").toString(), shippingAddressCtx.get(\"stateProvinceGeoId\").toString(),\n-                            shippingAddressCtx.get(\"shippingAddressPostalCode\").toString(), null, shippingAddressCtx.get(\"countryGeoId\").toString(), firstName, null, lastName);\n+                    List<GenericValue> shipInfo = \n+                    \tPartyWorker.findMatchingPersonPostalAddresses\n+                    \t\t(delegator, \n+                    \t\t shippingAddressCtx.get(\"shippingAddressStreet1\").toString(),\n+                            (UtilValidate.isEmpty(shippingAddressCtx.get(\"shippingAddressStreet2\")) ? null : shippingAddressCtx.get(\"shippingAddressStreet2\").toString()), \n+                             shippingAddressCtx.get(\"city\").toString(), \n+                            (UtilValidate.isEmpty(shippingAddressCtx.get(\"stateProvinceGeoId\")) ? null : shippingAddressCtx.get(\"stateProvinceGeoId\").toString()),\n+                             shippingAddressCtx.get(\"shippingAddressPostalCode\").toString(), \n+                             null, \n+                             shippingAddressCtx.get(\"countryGeoId\").toString(), \n+                             firstName, \n+                             null, \n+                             lastName);\n                     if (UtilValidate.isNotEmpty(shipInfo)) {\n                         GenericValue first = EntityUtil.getFirst(shipInfo);\n                         partyId = first.getString(\"partyId\");",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied patch from jira issue OFBIZ-3208 - On order view page when clicking on \"Create As New Order\", the adjustments Shipping and Handling and Sales Tax are duplicated.\n\nPatch will resolve the following Issues\n\n1) Shipping and Handling Charges are added twice in new order amount.\n2) Sales Tax are added twice in new order amount.\n3) Add extra tax on shipping and handling charges for new order.\n4) When click on \"Create as New Order\" Link, it is Giving NPE on some Promotion (Happy Hour\nPromotion 9020).\n5) Click on \"Edit Items\" Link and then \"Update\" Link it is it is Giving NPE on some Promotion (Happy\nHour Promotion 9020).\n\nThanks Arpit for the contribution.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@882454 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e474a6eca204a94c17332ba77f1244abd3a9c901",
        "parent": "https://github.com/apache/ofbiz-framework/commit/96ca14f622e5e15d9b1083f9d146aba48a8faa2b",
        "bug_id": "ofbiz-framework_257",
        "file": [
            {
                "sha": "8d8350063387eeb5e5e840ed1a845824a24bfa64",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e474a6eca204a94c17332ba77f1244abd3a9c901/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e474a6eca204a94c17332ba77f1244abd3a9c901/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java",
                "status": "modified",
                "changes": 27,
                "additions": 17,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCart.java?ref=e474a6eca204a94c17332ba77f1244abd3a9c901",
                "patch": "@@ -829,6 +829,7 @@ public ShoppingCartItem findCartItem(int index) {\n             return null;\n         }\n         return (ShoppingCartItem) cartLines.get(index);\n+        \n     }\n \n     public ShoppingCartItem findCartItem(String orderItemSeqId) {\n@@ -2010,7 +2011,10 @@ public BigDecimal getItemShipGroupEstimate(int idx) {\n     }\n \n     public void setItemShipGroupQty(int itemIndex, BigDecimal quantity, int idx) {\n-        this.setItemShipGroupQty(this.findCartItem(itemIndex), itemIndex, quantity, idx);\n+        ShoppingCartItem itemIdx = this.findCartItem(itemIndex);\n+        if(itemIdx != null) {\n+            this.setItemShipGroupQty(itemIdx, itemIndex, quantity, idx);\n+        }\n     }\n \n     public void setItemShipGroupQty(ShoppingCartItem item, BigDecimal quantity, int idx) {\n@@ -2027,16 +2031,19 @@ public void setItemShipGroupQty(ShoppingCartItem item, int itemIndex, BigDecimal\n             }\n \n             // never set more than quantity ordered\n-            if (quantity.compareTo(item.getQuantity()) > 0) {\n-                quantity = item.getQuantity();\n-            }\n-\n-            // re-set the ship group's before and after dates based on the item's\n-            csi.resetShipBeforeDateIfAfter(item.getShipBeforeDate());\n-            csi.resetShipAfterDateIfBefore(item.getShipAfterDate());\n+            if (item != null) {\n+                if (quantity.compareTo(item.getQuantity()) > 0) {\n+                    quantity = item.getQuantity();\n+                }\n+            \n \n-            CartShipInfo.CartShipItemInfo csii = csi.setItemInfo(item, quantity);\n-            this.checkShipItemInfo(csi, csii);\n+                // re-set the ship group's before and after dates based on the item's\n+                csi.resetShipBeforeDateIfAfter(item.getShipBeforeDate());\n+                csi.resetShipAfterDateIfBefore(item.getShipAfterDate());\n+    \n+                CartShipInfo.CartShipItemInfo csii = csi.setItemInfo(item, quantity);\n+                this.checkShipItemInfo(csi, csii);\n+            } \n         }\n     }\n ",
                "deletions": 10
            },
            {
                "sha": "602e6ce17335fc8a4110e9bc3160df327626d6dc",
                "filename": "applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e474a6eca204a94c17332ba77f1244abd3a9c901/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e474a6eca204a94c17332ba77f1244abd3a9c901/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java",
                "status": "modified",
                "changes": 50,
                "additions": 47,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/shoppingcart/ShoppingCartEvents.java?ref=e474a6eca204a94c17332ba77f1244abd3a9c901",
                "patch": "@@ -20,20 +20,21 @@\n \n import java.math.BigDecimal;\n import java.math.MathContext;\n+import java.sql.Timestamp;\n import java.text.NumberFormat;\n+import java.util.ArrayList;\n import java.util.Iterator;\n import java.util.LinkedList;\n import java.util.List;\n import java.util.Locale;\n import java.util.Map;\n-import javolution.util.FastMap;\n-import java.sql.Timestamp;\n \n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n import javax.servlet.http.HttpSession;\n \n import javolution.util.FastList;\n+import javolution.util.FastMap;\n \n import org.ofbiz.base.util.Debug;\n import org.ofbiz.base.util.UtilDateTime;\n@@ -1307,6 +1308,7 @@ public static String loadCartFromOrder(HttpServletRequest request, HttpServletRe\n         LocalDispatcher dispatcher = (LocalDispatcher) request.getAttribute(\"dispatcher\");\n         HttpSession session = request.getSession();\n         GenericValue userLogin = (GenericValue)session.getAttribute(\"userLogin\");\n+        Delegator delegator = (Delegator) request.getAttribute(\"delegator\");\n \n         String orderId = request.getParameter(\"orderId\");\n \n@@ -1322,7 +1324,49 @@ public static String loadCartFromOrder(HttpServletRequest request, HttpServletRe\n              }\n \n             cart = (ShoppingCart) outMap.get(\"shoppingCart\");\n-            \n+\n+            cart.removeAdjustmentByType(\"SALES_TAX\");\n+            cart.removeAdjustmentByType(\"PROMOTION_ADJUSTMENT\");\n+            String shipGroupSeqId = null;\n+            long groupIndex = cart.getShipInfoSize();\n+            List orderAdjustmentList = new ArrayList();\n+            List orderAdjustments = new ArrayList();\n+            orderAdjustments = cart.getAdjustments();\n+            try {\n+                orderAdjustmentList = delegator.findList(\"OrderAdjustment\", EntityCondition.makeCondition(\"orderId\", EntityOperator.EQUALS, orderId), null, null, null, false);\n+            } catch (Exception e) {\n+                Debug.logError(e, module);\n+            }\n+            for (long itr = 1; itr <= groupIndex; itr++) {\n+                shipGroupSeqId = UtilFormatOut.formatPaddedNumber(1, 5);\n+                List<GenericValue> duplicateAdjustmentList = new ArrayList<GenericValue>();\n+                for (GenericValue adjustment: (List<GenericValue>)orderAdjustmentList) {\n+                    if (\"PROMOTION_ADJUSTMENT\".equals(adjustment.get(\"orderAdjustmentTypeId\"))) { \n+                        cart.addAdjustment(adjustment);\n+                    }\n+                    if (\"SALES_TAX\".equals(adjustment.get(\"orderAdjustmentTypeId\"))) {\n+                        if (adjustment.get(\"description\") != null \n+                                    && ((String)adjustment.get(\"description\")).startsWith(\"Tax adjustment due\")) {\n+                                cart.addAdjustment(adjustment);\n+                            }\n+                        if ( adjustment.get(\"comments\") != null \n+                                && ((String)adjustment.get(\"comments\")).startsWith(\"Added manually by\")) {\n+                            cart.addAdjustment(adjustment);\n+                        }\n+                    }\n+                }\n+                for (GenericValue orderAdjustment: (List<GenericValue>)orderAdjustments) {\n+                    if (\"OrderAdjustment\".equals(orderAdjustment.getEntityName())) {\n+                        if ((\"SHIPPING_CHARGES\".equals(orderAdjustment.get(\"orderAdjustmentTypeId\"))) &&\n+                                orderAdjustment.get(\"orderId\").equals(orderId) &&\n+                                orderAdjustment.get(\"shipGroupSeqId\").equals(shipGroupSeqId) && orderAdjustment.get(\"comments\") == null) {\n+                            // Removing objects from list for old Shipping and Handling Charges Adjustment and Sales Tax Adjustment.\n+                            duplicateAdjustmentList.add(orderAdjustment);\n+                        }\n+                    }\n+                }\n+                orderAdjustments.removeAll(duplicateAdjustmentList);\n+            }\n         } catch (GenericServiceException exc) {\n             request.setAttribute(\"_ERROR_MESSAGE_\", exc.getMessage());\n             return \"error\";",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "The updateApprovedOrderItems defines the itemAttributesMap, itemEstimatedDeliveryDateMap and itemEstimatedShipDateMap IN parameters as optional. But if you use this service (updateOrderItems) out of an event context then you cross NPEs. This is because in the context of an event the missing parameters are initialised as empty. This hid the issue so far because updateApprovedOrderItems is only used once, called by an event.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1616940 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/03aa3e84803d7fed620144cefba22a3c0a555a63",
        "parent": "https://github.com/apache/ofbiz-framework/commit/e35bb8ec7ea7d4eff3ddae8fb7a74d95fb1f3dd2",
        "bug_id": "ofbiz-framework_258",
        "file": [
            {
                "sha": "66b4aea5e622fe4b70829cfbc9258be7c00759b9",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/03aa3e84803d7fed620144cefba22a3c0a555a63/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/03aa3e84803d7fed620144cefba22a3c0a555a63/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "status": "modified",
                "changes": 157,
                "additions": 81,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderServices.java?ref=03aa3e84803d7fed620144cefba22a3c0a555a63",
                "patch": "@@ -3633,40 +3633,32 @@ public static String determineSingleFacilityFromOrder(GenericValue orderHeader)\n                     \"OrderShoppingCartEmpty\", locale));\n         }\n \n-        // go through the item attributes map once to get a list of key names\n-        Set<String> attributeNames =FastSet.newInstance();\n-        Set<String> keys  = itemAttributesMap.keySet();\n-        for (String key : keys) {\n-            String[] attributeInfo = key.split(\":\");\n-            attributeNames.add(attributeInfo[0]);\n-        }\n-\n         // go through the item map and obtain the totals per item\n         Map<String, BigDecimal> itemTotals = new HashMap<String, BigDecimal>();\n-        for (String key : itemQtyMap.keySet()) {\n-            String quantityStr = itemQtyMap.get(key);\n-            BigDecimal groupQty = BigDecimal.ZERO;\n-            try {\n-                groupQty = (BigDecimal) ObjectType.simpleTypeConvert(quantityStr, \"BigDecimal\", null, locale);\n-            } catch (GeneralException e) {\n-                Debug.logError(e, module);\n-                return ServiceUtil.returnError(e.getMessage());\n-            }\n-\n-            if (groupQty.compareTo(BigDecimal.ONE) < 0) {\n-                return ServiceUtil.returnError(UtilProperties.getMessage(resource,\n-                        \"OrderItemQtyMustBePositive\", locale));\n-            }\n-\n-            String[] itemInfo = key.split(\":\");\n-            BigDecimal tally = itemTotals.get(itemInfo[0]);\n-            if (tally == null) {\n-                tally = groupQty;\n-            } else {\n-                tally = tally.add(groupQty);\n+            for (String key : itemQtyMap.keySet()) {\n+                String quantityStr = itemQtyMap.get(key);\n+                BigDecimal groupQty = BigDecimal.ZERO;\n+                try {\n+                    groupQty = (BigDecimal) ObjectType.simpleTypeConvert(quantityStr, \"BigDecimal\", null, locale);\n+                } catch (GeneralException e) {\n+                    Debug.logError(e, module);\n+                    return ServiceUtil.returnError(e.getMessage());\n+                }\n+    \n+                if (groupQty.compareTo(BigDecimal.ONE) < 0) {\n+                    return ServiceUtil.returnError(UtilProperties.getMessage(resource,\n+                            \"OrderItemQtyMustBePositive\", locale));\n+                }\n+    \n+                String[] itemInfo = key.split(\":\");\n+                BigDecimal tally = itemTotals.get(itemInfo[0]);\n+                if (tally == null) {\n+                    tally = groupQty;\n+                } else {\n+                    tally = tally.add(groupQty);\n+                }\n+                itemTotals.put(itemInfo[0], tally);\n             }\n-            itemTotals.put(itemInfo[0], tally);\n-        }\n \n         // set the items amount/price\n         for (String itemSeqId : itemTotals.keySet()) {\n@@ -3720,6 +3712,14 @@ public static String determineSingleFacilityFromOrder(GenericValue orderHeader)\n \n                 // update the order item attributes\n                 if (itemAttributesMap != null) {\n+                    // go through the item attributes map once to get a list of key names\n+                    Set<String> attributeNames =FastSet.newInstance();\n+                    Set<String> keys  = itemAttributesMap.keySet();\n+                    for (String key : keys) {\n+                        String[] attributeInfo = key.split(\":\");\n+                        attributeNames.add(attributeInfo[0]);\n+                    }\n+                    \n                     String attrValue = null;\n                     for (String attrName : attributeNames) {\n                         attrValue = itemAttributesMap.get(attrName + \":\" + itemSeqId);\n@@ -3735,64 +3735,69 @@ public static String determineSingleFacilityFromOrder(GenericValue orderHeader)\n             }\n         }\n         // Create Estimated Delivery dates\n-        for (Map.Entry<String, String> entry : itemEstimatedDeliveryDateMap.entrySet()) {\n-            String itemSeqId =  entry.getKey();\n-\n-            // ignore internationalised variant of dates\n-            if (!itemSeqId.endsWith(\"_i18n\")) {\n-                String estimatedDeliveryDate = entry.getValue();\n-                if (UtilValidate.isNotEmpty(estimatedDeliveryDate)) {\n-                    Timestamp deliveryDate = Timestamp.valueOf(estimatedDeliveryDate);\n-                    ShoppingCartItem cartItem = cart.findCartItem(itemSeqId);\n-                    cartItem.setDesiredDeliveryDate(deliveryDate);\n+        if (null != itemEstimatedDeliveryDateMap) {\n+            for (Map.Entry<String, String> entry : itemEstimatedDeliveryDateMap.entrySet()) {\n+                String itemSeqId =  entry.getKey();\n+\n+                // ignore internationalised variant of dates\n+                if (!itemSeqId.endsWith(\"_i18n\")) {\n+                    String estimatedDeliveryDate = entry.getValue();\n+                    if (UtilValidate.isNotEmpty(estimatedDeliveryDate)) {\n+                        Timestamp deliveryDate = Timestamp.valueOf(estimatedDeliveryDate);\n+                        ShoppingCartItem cartItem = cart.findCartItem(itemSeqId);\n+                        cartItem.setDesiredDeliveryDate(deliveryDate);\n+                    }\n                 }\n             }\n         }\n \n         // Create Estimated ship dates\n-        for (Map.Entry<String, String> entry : itemEstimatedShipDateMap.entrySet()) {\n-            String itemSeqId =  entry.getKey();\n-\n-            // ignore internationalised variant of dates\n-            if (!itemSeqId.endsWith(\"_i18n\")) {\n-                String estimatedShipDate = entry.getValue();\n-                if (UtilValidate.isNotEmpty(estimatedShipDate)) {\n-                    Timestamp shipDate = Timestamp.valueOf(estimatedShipDate);\n-                    ShoppingCartItem cartItem = cart.findCartItem(itemSeqId);\n-                    cartItem.setEstimatedShipDate(shipDate);\n+        if (null != itemEstimatedShipDateMap) {\n+            for (Map.Entry<String, String> entry : itemEstimatedShipDateMap.entrySet()) {\n+                String itemSeqId =  entry.getKey();\n+\n+                // ignore internationalised variant of dates\n+                if (!itemSeqId.endsWith(\"_i18n\")) {\n+                    String estimatedShipDate = entry.getValue();\n+                    if (UtilValidate.isNotEmpty(estimatedShipDate)) {\n+                        Timestamp shipDate = Timestamp.valueOf(estimatedShipDate);\n+                        ShoppingCartItem cartItem = cart.findCartItem(itemSeqId);\n+                        cartItem.setEstimatedShipDate(shipDate);\n+                    }\n                 }\n             }\n         }\n \n         // update the group amounts\n-        for (String key : itemQtyMap.keySet()) {\n-            String quantityStr = itemQtyMap.get(key);\n-            BigDecimal groupQty = BigDecimal.ZERO;\n-            try {\n-                groupQty = (BigDecimal) ObjectType.simpleTypeConvert(quantityStr, \"BigDecimal\", null, locale);\n-            } catch (GeneralException e) {\n-                Debug.logError(e, module);\n-                return ServiceUtil.returnError(e.getMessage());\n-            }\n+            for (String key : itemQtyMap.keySet()) {\n+                String quantityStr = itemQtyMap.get(key);\n+                BigDecimal groupQty = BigDecimal.ZERO;\n+                try {\n+                    groupQty = (BigDecimal) ObjectType.simpleTypeConvert(quantityStr, \"BigDecimal\", null, locale);\n+                } catch (GeneralException e) {\n+                    Debug.logError(e, module);\n+                    return ServiceUtil.returnError(e.getMessage());\n+                }\n \n-            String[] itemInfo = key.split(\":\");\n-            int groupIdx = -1;\n-            try {\n-                groupIdx = Integer.parseInt(itemInfo[1]);\n-            } catch (NumberFormatException e) {\n-                Debug.logError(e, module);\n-                return ServiceUtil.returnError(e.getMessage());\n-            }\n+                String[] itemInfo = key.split(\":\");\n+                @SuppressWarnings(\"unused\")\n+                int groupIdx = -1;\n+                try {\n+                    groupIdx = Integer.parseInt(itemInfo[1]);\n+                } catch (NumberFormatException e) {\n+                    Debug.logError(e, module);\n+                    return ServiceUtil.returnError(e.getMessage());\n+                }\n \n-            // set the group qty\n-            ShoppingCartItem cartItem = cart.findCartItem(itemInfo[0]);\n-            if (cartItem != null) {\n+                // set the group qty\n+                ShoppingCartItem cartItem = cart.findCartItem(itemInfo[0]);\n+                if (cartItem != null) {\n                 Debug.logInfo(\"Shipping info (before) for group #\" + (groupIdx-1) + \" [\" + cart.getShipmentMethodTypeId(groupIdx-1) + \" / \" + cart.getCarrierPartyId(groupIdx-1) + \"]\", module);\n                 cart.setItemShipGroupQty(cartItem, groupQty, groupIdx - 1);\n                 Debug.logInfo(\"Set ship group qty: [\" + itemInfo[0] + \" / \" + itemInfo[1] + \" (\" + (groupIdx-1) + \")] \" + groupQty, module);\n                 Debug.logInfo(\"Shipping info (after) for group #\" + (groupIdx-1) + \" [\" + cart.getShipmentMethodTypeId(groupIdx-1) + \" / \" + cart.getCarrierPartyId(groupIdx-1) + \"]\", module);\n+                }\n             }\n-        }\n \n         // save all the updated information\n         try {\n@@ -4053,7 +4058,7 @@ private static void saveUpdatedCartToOrder(LocalDispatcher dispatcher, Delegator\n             cart.setItemShipGroupEstimate(shippingTotal, gi);\n         }\n \n-        // calc the sales tax        \n+        // calc the sales tax\n         CheckOutHelper coh = new CheckOutHelper(dispatcher, delegator, cart);\n         if (calcTax) {\n             try {\n@@ -4103,7 +4108,7 @@ private static void saveUpdatedCartToOrder(LocalDispatcher dispatcher, Delegator\n                 for (GenericValue stored: toStore) {\n                     if (\"OrderAdjustment\".equals(stored.getEntityName())) {\n                         if ((\"SHIPPING_CHARGES\".equals(stored.get(\"orderAdjustmentTypeId\")) ||\n-                                \"SALES_TAX\".equals(stored.get(\"orderAdjustmentTypeId\"))) &&\n+                               \"SALES_TAX\".equals(stored.get(\"orderAdjustmentTypeId\"))) &&\n                                 stored.get(\"orderId\").equals(orderId) &&\n                                 stored.get(\"shipGroupSeqId\").equals(shipGroupSeqId)) {\n                             // Removing objects from toStore list for old Shipping and Handling Charges Adjustment and Sales Tax Adjustment.\n@@ -4159,10 +4164,10 @@ private static void saveUpdatedCartToOrder(LocalDispatcher dispatcher, Delegator\n \n         // get the promo uses and codes\n         for (String promoCodeEntered : cart.getProductPromoCodesEntered()) {\n-            GenericValue orderProductPromoCode = delegator.makeValue(\"OrderProductPromoCode\");                                   \n+            GenericValue orderProductPromoCode = delegator.makeValue(\"OrderProductPromoCode\");\n             orderProductPromoCode.set(\"orderId\", orderId);\n             orderProductPromoCode.set(\"productPromoCodeId\", promoCodeEntered);\n-            toStore.add(orderProductPromoCode);                                    \n+            toStore.add(orderProductPromoCode);\n         }\n         for (GenericValue promoUse : cart.makeProductPromoUses()) {\n             promoUse.set(\"orderId\", orderId);",
                "deletions": 76
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A completing patch from Olivier for \"NPE thrown out while rendering disabled menu item\" https://issues.apache.org/jira/browse/OFBIZ-5451\n\nLast typo correction was'nt complete.\n\njleroux: this incidentally and fortunately fixes also \"The Orders sub-menus don't work in Catalog and Party Profile\" https://issues.apache.org/jira/browse/OFBIZ-5477\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1559328 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/92b42b5aef92ca790b628087fa154431d3a502fd",
        "parent": "https://github.com/apache/ofbiz-framework/commit/23a736d5dd08f76e8f959d917a2b9e5395ce1748",
        "bug_id": "ofbiz-framework_259",
        "file": [
            {
                "sha": "3534a39c60bef8f207d8a9b3d6ac4721bd3d3333",
                "filename": "framework/widget/templates/htmlMenuMacroLibrary.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/92b42b5aef92ca790b628087fa154431d3a502fd/framework/widget/templates/htmlMenuMacroLibrary.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/92b42b5aef92ca790b628087fa154431d3a502fd/framework/widget/templates/htmlMenuMacroLibrary.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/widget/templates/htmlMenuMacroLibrary.ftl?ref=92b42b5aef92ca790b628087fa154431d3a502fd",
                "patch": "@@ -54,11 +54,11 @@ under the License.\n     </#list>\r\n </form><#rt/>\r\n   </#if>\r\n-<#if linkUrl?has_content>\r\n+<#if (linkType?has_content && \"hidden-form\" == linkType) || linkUrl?has_content>\r\n <a<#if id?has_content> id=\"${id}\"</#if><#if style?has_content> class=\"${style}\"</#if><#if name?has_content> name=\"${name}\"</#if><#if targetWindow?has_content> target=\"${targetWindow}\"</#if> href=\"<#if \"hidden-form\"==linkType>javascript:document.${uniqueItemName}.submit()<#else>${linkUrl}</#if>\"><#rt/>\r\n </#if>\r\n <#if imgStr?has_content>${imgStr}</#if><#if text?has_content>${text}</#if><#rt/>\r\n-<#if linkType?has_content></a><#rt/></#if>\r\n+<#if (linkType?has_content && \"hidden-form\" == linkType) || linkUrl?has_content></a><#rt/></#if>\r\n </#macro>\r\n \r\n <#macro renderMenuItemBegin style toolTip linkStr containsNestedMenus>\r",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixes https://issues.apache.org/jira/browse/OFBIZ-4719 \"Error \"org.ofbiz.webapp.event.EventHandlerException: Service invocation error (null)\"\n\nTook me a moment to decide to commit this changes. But after many researches and tries I could not find a better solution. \n\nSo simply avoid possible NPE there if a wrong paymentId is entered in createPaymentApplication screen.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1296697 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/21fe6fb550eaa36e01eea13a0c524b65e52b6835",
        "parent": "https://github.com/apache/ofbiz-framework/commit/72fcba2ab0e36c73449c9b08cfd5fe8854a91ae9",
        "bug_id": "ofbiz-framework_260",
        "file": [
            {
                "sha": "08c5370199b65188c44529a76476745609e927a3",
                "filename": "applications/accounting/src/org/ofbiz/accounting/payment/PaymentWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/21fe6fb550eaa36e01eea13a0c524b65e52b6835/applications/accounting/src/org/ofbiz/accounting/payment/PaymentWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/21fe6fb550eaa36e01eea13a0c524b65e52b6835/applications/accounting/src/org/ofbiz/accounting/payment/PaymentWorker.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/payment/PaymentWorker.java?ref=21fe6fb550eaa36e01eea13a0c524b65e52b6835",
                "patch": "@@ -263,7 +263,7 @@ public static BigDecimal getPaymentApplied(GenericValue payment) {\n     }\n \n     /**\n-     * Method to return the total amount of an payment which is applied to a payment\n+     * Method to return the total amount of a payment which is applied to a payment\n      * @param payment GenericValue object of the Payment\n      * @param actual false for currency of the payment, true for the actual currency\n      * @return the applied total as BigDecimal in the currency of the payment\n@@ -298,7 +298,10 @@ public static BigDecimal getPaymentApplied(GenericValue payment, Boolean actual)\n     }\n \n     public static BigDecimal getPaymentNotApplied(GenericValue payment) {\n-        return payment.getBigDecimal(\"amount\").subtract(getPaymentApplied(payment)).setScale(decimals,rounding);\n+        if (payment != null) { \n+            return payment.getBigDecimal(\"amount\").subtract(getPaymentApplied(payment)).setScale(decimals,rounding);\n+        } \n+        return BigDecimal.ZERO;\n     }\n \n     public static BigDecimal getPaymentNotApplied(GenericValue payment, Boolean actual) {",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Dimitri Unruh \"Some dead variable assignments \" https://issues.apache.org/jira/browse/OFBIZ-4426\n\nSome value assignments to local variables without reading or using it.\n\njleroux: indeed I don't see any reasons to set the size of a byte array before feeding it with String.getBytes(), since NPE is handled above. I have even simplified it more using function composition style.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1172015 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/00afa0c283a6e655d5655236dd1ba5f17378598d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/aa575abcebbc3e7691038f4cef3ef87a81440f92",
        "bug_id": "ofbiz-framework_261",
        "file": [
            {
                "sha": "ffba436f5e77527e6ba0335285996a715f310d18",
                "filename": "applications/accounting/src/org/ofbiz/accounting/invoice/InvoiceServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/00afa0c283a6e655d5655236dd1ba5f17378598d/applications/accounting/src/org/ofbiz/accounting/invoice/InvoiceServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/00afa0c283a6e655d5655236dd1ba5f17378598d/applications/accounting/src/org/ofbiz/accounting/invoice/InvoiceServices.java",
                "status": "modified",
                "changes": 1,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/invoice/InvoiceServices.java?ref=00afa0c283a6e655d5655236dd1ba5f17378598d",
                "patch": "@@ -2377,7 +2377,6 @@ private static void createInvoiceTerms(Delegator delegator, LocalDispatcher disp\n         if (amountApplied != null) {\n             context.put(\"amountApplied\", amountApplied);\n         } else {\n-            amountApplied = ZERO;\n             context.put(\"amountApplied\", ZERO);\n         }\n ",
                "deletions": 1
            },
            {
                "sha": "c886b1c16d611f59b5ec525a11e4221580a8b494",
                "filename": "applications/accounting/src/org/ofbiz/accounting/thirdparty/valuelink/ValueLinkServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/00afa0c283a6e655d5655236dd1ba5f17378598d/applications/accounting/src/org/ofbiz/accounting/thirdparty/valuelink/ValueLinkServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/00afa0c283a6e655d5655236dd1ba5f17378598d/applications/accounting/src/org/ofbiz/accounting/thirdparty/valuelink/ValueLinkServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/thirdparty/valuelink/ValueLinkServices.java?ref=00afa0c283a6e655d5655236dd1ba5f17378598d",
                "patch": "@@ -95,7 +95,7 @@\n         byte[] testBytes = StringUtil.fromHexString(testString);\n \n         // place holder\n-        byte[] testEncryption = new byte[0];\n+        byte[] testEncryption = null;\n         String desc = \"\";\n \n         if (mode.intValue() == 1) {",
                "deletions": 1
            },
            {
                "sha": "08aa81f7dcb89e1f26cadb2dd6ac87a9d435eb21",
                "filename": "framework/base/src/org/ofbiz/base/util/Base64.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/00afa0c283a6e655d5655236dd1ba5f17378598d/framework/base/src/org/ofbiz/base/util/Base64.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/00afa0c283a6e655d5655236dd1ba5f17378598d/framework/base/src/org/ofbiz/base/util/Base64.java",
                "status": "modified",
                "changes": 10,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/org/ofbiz/base/util/Base64.java?ref=00afa0c283a6e655d5655236dd1ba5f17378598d",
                "patch": "@@ -150,13 +150,9 @@\n      * @return the decoded str.\n      */\n     public final static String base64Decode(String str) {\n-        if (str == null) {\n-            return null;\n-        }\n-\n-        byte data[] = new byte[str.length()];\n-        data = str.getBytes();\n-        return new String(base64Decode(data));\n+        if (str == null) return null;\n+        \n+        return new String(base64Decode(str.getBytes()));\n     }\n \n     /**",
                "deletions": 7
            },
            {
                "sha": "0a5501d0b280362391f9b4729587486ed00a992b",
                "filename": "framework/common/src/org/ofbiz/common/CommonEvents.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/00afa0c283a6e655d5655236dd1ba5f17378598d/framework/common/src/org/ofbiz/common/CommonEvents.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/00afa0c283a6e655d5655236dd1ba5f17378598d/framework/common/src/org/ofbiz/common/CommonEvents.java",
                "status": "modified",
                "changes": 2,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/src/org/ofbiz/common/CommonEvents.java?ref=00afa0c283a6e655d5655236dd1ba5f17378598d",
                "patch": "@@ -297,7 +297,6 @@ public static String getJSONuiLabelArray(HttpServletRequest request, HttpServlet\n \n         JSONObject uiLabelObject = null;\n         if (UtilValidate.isNotEmpty(requiredLabels)) {\n-            uiLabelObject = new JSONObject();\n             // Transform JSON String to Object\n             uiLabelObject = (JSONObject) JSONSerializer.toJSON(requiredLabels);\n         }\n@@ -336,7 +335,6 @@ public static String getJSONuiLabel(HttpServletRequest request, HttpServletRespo\n \n         JSONObject uiLabelObject = null;\n         if (UtilValidate.isNotEmpty(requiredLabels)) {\n-            uiLabelObject = new JSONObject();\n             // Transform JSON String to Object\n             uiLabelObject = (JSONObject) JSONSerializer.toJSON(requiredLabels);\n         }",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A modified patch from  Deepak Dixit \"Incorrect markup for Production Run Costs page.\" https://issues.apache.org/jira/browse/OFBIZ-4395\n\n\nIn ProductionRunCosts.ftl there is unclosed div for screenlet-body, due to this unclosed page not render properly. You can view this behavior properly in Tomahawk theme. \n\njleroux: I added also some checks to prevent unlikely NPEs\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1167501 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/f657282358e673d9b5315a91f8cca8e70d24bd5f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/76168a4d8ae19036a0ed800926bbcd54e36c8648",
        "bug_id": "ofbiz-framework_262",
        "file": [
            {
                "sha": "1efbee1863b339bad457c1381f1c31a6b2604644",
                "filename": "applications/manufacturing/webapp/manufacturing/jobshopmgt/ProductionRunCosts.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/f657282358e673d9b5315a91f8cca8e70d24bd5f/applications/manufacturing/webapp/manufacturing/jobshopmgt/ProductionRunCosts.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/f657282358e673d9b5315a91f8cca8e70d24bd5f/applications/manufacturing/webapp/manufacturing/jobshopmgt/ProductionRunCosts.ftl",
                "status": "modified",
                "changes": 17,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/webapp/manufacturing/jobshopmgt/ProductionRunCosts.ftl?ref=f657282358e673d9b5315a91f8cca8e70d24bd5f",
                "patch": "@@ -18,13 +18,14 @@ under the License.\n -->\n \n <#list taskCosts as taskCost>\n-<div class=\"screenlet\">\n-  <div class=\"screenlet-title-bar\">\n-    <#assign task = taskCost.task>\n-    <#assign costsForm = taskCost.costsForm>\n-    <h3>${uiLabelMap.ManufacturingActualCosts} ${task.workEffortName?if_exists} [${task.workEffortId}]</h3>\n-    ${costsForm.renderFormString(context)}\n+  <div class=\"screenlet\">\n+    <div class=\"screenlet-title-bar\">\n+      <#assign task = taskCost.task!>\n+      <h3>${uiLabelMap.ManufacturingActualCosts} ${task.workEffortName?if_exists} [${task.workEffortId?if_exists}]</h3>\n+    </div>\n+    <div class=\"screenlet-body\">\n+      <#assign costsForm = taskCost.costsForm>\n+      ${costsForm.renderFormString(context)}\n+    </div>\n   </div>\n-  <div class=\"screenlet-body\">\n-</div>\n </#list>\n\\ No newline at end of file",
                "deletions": 8
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Akash Jain \"NPE appears on create customer from order entry screens.\" (https://issues.apache.org/jira/browse/OFBIZ-3079) - OFBIZ-3079\nThere is a session issue, actually there is getting ShoppingCart object from session when session is expired then ShoppingCart object will be null and there is no check for this ShoppingCart object and call method of ShoppingCart.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@829412 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/7b15a9879cc22249733e95343a89a789cc4814e6",
        "parent": "https://github.com/apache/ofbiz-framework/commit/410d3155c7c8ba41028c2876f36182a1a8b9f4ea",
        "bug_id": "ofbiz-framework_263",
        "file": [
            {
                "sha": "d29d0b8d5991594582c2c5a7561b1c79b074862a",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/entry/ShipSettings.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/7b15a9879cc22249733e95343a89a789cc4814e6/applications/order/webapp/ordermgr/WEB-INF/actions/entry/ShipSettings.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/7b15a9879cc22249733e95343a89a789cc4814e6/applications/order/webapp/ordermgr/WEB-INF/actions/entry/ShipSettings.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/entry/ShipSettings.groovy?ref=7b15a9879cc22249733e95343a89a789cc4814e6",
                "patch": "@@ -28,6 +28,7 @@ import javolution.util.FastList;\n \n cart = session.getAttribute(\"shoppingCart\");\n \n+if (cart) {\n createNewShipGroup = request.getParameter(\"createNewShipGroup\");\n if (\"Y\".equals(createNewShipGroup)) {\n     cart.addShipInfo();\n@@ -92,3 +93,4 @@ if (\"SALES_ORDER\".equals(cart.getOrderType())) {\n         context.facilityMaps = facilityMaps;\n     }\n }\n+}",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "The google base code was broken.\nIn the previous code the namespace specific tag support was not present in UtilXml so google base server was not accepting the request coming in the form <item_type>. The correct tag will be <g:item_type>.\nAlso did minor modification in code to avoid NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@807959 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/71b953e08f9f267989962038ed87fac881c7d139",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c49e567b1d43e6978045d4eab4f0aff4c1342fdf",
        "bug_id": "ofbiz-framework_264",
        "file": [
            {
                "sha": "a5129b8611d99869155033c8da7d647fc12acecb",
                "filename": "specialpurpose/googlebase/src/org/ofbiz/googlebase/ProductsExportToGoogle.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/71b953e08f9f267989962038ed87fac881c7d139/specialpurpose/googlebase/src/org/ofbiz/googlebase/ProductsExportToGoogle.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/71b953e08f9f267989962038ed87fac881c7d139/specialpurpose/googlebase/src/org/ofbiz/googlebase/ProductsExportToGoogle.java",
                "status": "modified",
                "changes": 24,
                "additions": 16,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/googlebase/src/org/ofbiz/googlebase/ProductsExportToGoogle.java?ref=71b953e08f9f267989962038ed87fac881c7d139",
                "patch": "@@ -59,6 +59,7 @@\n \n     private static final String resource = \"GoogleBaseUiLabels\";\n     private static final String module = ProductsExportToGoogle.class.getName();\n+    private static final String googleBaseNSUrl = \"http://base.google.com/ns/1.0\";\n \n     public static Map exportToGoogle(DispatchContext dctx, Map context) {\n         Locale locale = (Locale) context.get(\"locale\");\n@@ -362,6 +363,7 @@ private static Map buildDataItemsXml(DispatchContext dctx, Map context, StringBu\n             feedElem.setAttribute(\"xmlns\", \"http://www.w3.org/2005/Atom\");\n             feedElem.setAttribute(\"xmlns:openSearch\", \"http://a9.com/-/spec/opensearchrss/1.0/\");\n             feedElem.setAttribute(\"xmlns:g\", \"http://base.google.com/ns/1.0\");\n+            feedElem.setAttribute(\"xmlns:gm\", \"http://base.google.com/ns-metadata/1.0\");\n             feedElem.setAttribute(\"xmlns:batch\", \"http://schemas.google.com/gdata/batch\");\n             feedElem.setAttribute(\"xmlns:app\", \"http://purl.org/atom/app#\");\n \n@@ -381,7 +383,13 @@ private static Map buildDataItemsXml(DispatchContext dctx, Map context, StringBu\n                 // TODO: improve this (i.e. get the relative path from the properies file)\n                 String link = webSiteUrl + \"/\"+webSiteMountPoint+\"/control/product/~product_id=\" + prod.getString(\"productId\") + trackingCodeId;\n                 String title = UtilFormatOut.encodeXmlValue(prod.getString(\"productName\"));\n+                if (UtilValidate.isEmpty(title)) {\n+                    title = UtilFormatOut.encodeXmlValue(prod.getString(\"internalName\"));\n+                }\n                 String description = UtilFormatOut.encodeXmlValue(prod.getString(\"description\"));\n+                if (UtilValidate.isEmpty(description)) {\n+                    description = UtilFormatOut.encodeXmlValue(prod.getString(\"internalName\"));\n+                }\n                 String imageLink = \"\";\n                 if (UtilValidate.isNotEmpty(prod.getString(\"largeImageUrl\"))) {\n                     imageLink = webSiteUrl + prod.getString(\"largeImageUrl\");\n@@ -426,27 +434,27 @@ private static Map buildDataItemsXml(DispatchContext dctx, Map context, StringBu\n                 contentElem.setAttribute(\"type\", \"xhtml\");\n \n                 if (UtilValidate.isNotEmpty(googleProductId)) {\n-                    UtilXml.addChildElementValue(entryElem, \"id\", googleProductId, feedDocument);\n+                    UtilXml.addChildElementNSValue(entryElem, \"g:id\", googleProductId, feedDocument, googleBaseNSUrl);\n                 } else {\n-                    UtilXml.addChildElementValue(entryElem, \"id\", link, feedDocument);\n+                    UtilXml.addChildElementNSValue(entryElem, \"g:id\", link, feedDocument, googleBaseNSUrl);\n                 }\n \n                 Element linkElem = UtilXml.addChildElement(entryElem, \"link\", feedDocument);\n                 linkElem.setAttribute(\"rel\", \"alternate\");\n                 linkElem.setAttribute(\"type\", \"text/html\");\n                 linkElem.setAttribute(\"href\", link);\n \n-                UtilXml.addChildElementValue(entryElem, \"g:item_type\", \"products\", feedDocument);\n-                UtilXml.addChildElementValue(entryElem, \"g:price\", price, feedDocument);\n+                UtilXml.addChildElementNSValue(entryElem, \"g:item_type\", \"products\", feedDocument, googleBaseNSUrl);\n+                UtilXml.addChildElementNSValue(entryElem, \"g:price\", price, feedDocument, googleBaseNSUrl);\n \n                 // Might be nicer to load this from the product but for now we'll set it based on the country destination\n                 UtilXml.addChildElementValue(entryElem, \"g:currency\", productCurrency, feedDocument);\n \n                 // Ensure the load goes to the correct country location either US dollar, GB sterling or DE euro\n                 UtilXml.addChildElementValue(entryElem, \"g:target_country\", countryCode, feedDocument);\n-\n-                UtilXml.addChildElementValue(entryElem, \"g:brand\", prod.getString(\"brandName\"), feedDocument);\n-\n+                if (UtilValidate.isNotEmpty(prod.getString(\"brandName\"))) { \n+                    UtilXml.addChildElementValue(entryElem, \"g:brand\", prod.getString(\"brandName\"), feedDocument);\n+                }\n                 try {\n                     googleProduct = delegator.findByPrimaryKey(\"GoodIdentification\", UtilMisc.toMap(\"productId\", prod.getString(\"productId\"), \"goodIdentificationTypeId\", \"SKU\"));\n                     if (UtilValidate.isNotEmpty(googleProduct)) {\n@@ -456,7 +464,7 @@ private static Map buildDataItemsXml(DispatchContext dctx, Map context, StringBu\n                     Debug.logInfo(\"Unable to get the SKU for product [\" + prod.getString(\"productId\") + \"]: \" + gee.getMessage(), module);\n                 }\n \n-                UtilXml.addChildElementValue(entryElem, \"g:condition\", \"new\", feedDocument);\n+                UtilXml.addChildElementNSValue(entryElem, \"g:condition\", \"new\", feedDocument, googleBaseNSUrl);\n                 // This is a US specific requirement for product feeds\n                 //                     UtilXml.addChildElementValue(entryElem, \"g:mpn\", \"\", feedDocument);\n ",
                "deletions": 8
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Chagned ofbizContentUrl to not NPE when there is no request in the context; now tries to do its best with the standard content prefix from url.properties; this was happening in the Order PDF with an image URL which should probably not use ofbizContentUrl in the first place, but now will at least work\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@517731 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/939fca39622705e70407733f34c320a1528c8149",
        "parent": "https://github.com/apache/ofbiz-framework/commit/65e8d7ef6be6b57b90046566efc26c8a623e48a9",
        "bug_id": "ofbiz-framework_265",
        "file": [
            {
                "sha": "46b8d3075e23c871888073f84feb4edf9cb3b48b",
                "filename": "framework/webapp/src/org/ofbiz/webapp/ftl/OfbizContentTransform.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/939fca39622705e70407733f34c320a1528c8149/framework/webapp/src/org/ofbiz/webapp/ftl/OfbizContentTransform.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/939fca39622705e70407733f34c320a1528c8149/framework/webapp/src/org/ofbiz/webapp/ftl/OfbizContentTransform.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/ftl/OfbizContentTransform.java?ref=939fca39622705e70407733f34c320a1528c8149",
                "patch": "@@ -51,7 +51,7 @@ public void close() throws IOException {\n                     try {                              \n                         Environment env = Environment.getCurrentEnvironment();\n                         BeanModel req = (BeanModel)env.getVariable(\"request\");\n-                        HttpServletRequest request = (HttpServletRequest) req.getWrappedObject();\n+                        HttpServletRequest request = req == null ? null : (HttpServletRequest) req.getWrappedObject();\n                         \n                         // make the link\n                         StringBuffer newURL = new StringBuffer();",
                "deletions": 1
            },
            {
                "sha": "c987b5369f3045a18b68b5262d63573781f00eac",
                "filename": "framework/webapp/src/org/ofbiz/webapp/taglib/ContentUrlTag.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/939fca39622705e70407733f34c320a1528c8149/framework/webapp/src/org/ofbiz/webapp/taglib/ContentUrlTag.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/939fca39622705e70407733f34c320a1528c8149/framework/webapp/src/org/ofbiz/webapp/taglib/ContentUrlTag.java",
                "status": "modified",
                "changes": 8,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/taglib/ContentUrlTag.java?ref=939fca39622705e70407733f34c320a1528c8149",
                "patch": "@@ -39,6 +39,14 @@\n     public static final String module = UrlTag.class.getName();\n \n     public static void appendContentPrefix(HttpServletRequest request, StringBuffer urlBuffer) {\n+        if (request == null) {\n+            Debug.logWarning(\"WARNING: request was null in appendContentPrefix; this probably means this was used where it shouldn't be, like using ofbizContentUrl in a screen rendered through a service; using best-bet behavior: standard prefix from url.properties (no WebSite or security setting known)\", module);\n+            String prefix = UtilProperties.getPropertyValue(\"url\", \"content.url.prefix.standard\");\n+            if (prefix != null) {\n+                urlBuffer.append(prefix.trim());\n+            }\n+            return;\n+        }\n         GenericValue webSite = WebSiteWorker.getWebSite(request);\n         if (request.isSecure()) {\n             if (webSite != null && UtilValidate.isNotEmpty(webSite.getString(\"secureContentPrefix\"))) {",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Removing some code which must have been committed accidentally as part of some NPE fixes.  These always truncated the file name of attachments down to the first 17 characters, when in fact the field can take up to 100.  Let me know if this code was actually intentional\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@499122 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5384a8c18f23dbd5ec4020b6243af7b7cd3f77f5",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6fe22843dfd4685b61150035fd582f4b60834231",
        "bug_id": "ofbiz-framework_266",
        "file": [
            {
                "sha": "2e54caf8557a45c3b1bfdc293e1ded494598d7d1",
                "filename": "applications/content/src/org/ofbiz/content/email/EmailWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5384a8c18f23dbd5ec4020b6243af7b7cd3f77f5/applications/content/src/org/ofbiz/content/email/EmailWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5384a8c18f23dbd5ec4020b6243af7b7cd3f77f5/applications/content/src/org/ofbiz/content/email/EmailWorker.java",
                "status": "modified",
                "changes": 3,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/src/org/ofbiz/content/email/EmailWorker.java?ref=5384a8c18f23dbd5ec4020b6243af7b7cd3f77f5",
                "patch": "@@ -91,9 +91,6 @@ private static int addMultipartAttachementToComm(Multipart multipart, Map commEv\n     \t\t\t\t\t\t\t) )\n     \t\t\t{\n     \t\t\t\tString attFileName = part.getFileName();\n-    \t\t\t\tif (attFileName != null && attFileName.length() > 17) {\n-    \t\t\t\t\tattFileName = attFileName.substring(0,17);\n-    \t\t\t\t}\n     \t\t\t\tcommEventMap.put(\"contentName\", attFileName);\n     \t\t\t\tcommEventMap.put(\"drMimeTypeId\", thisContentType);\n     \t\t\t\tif (thisContentType.startsWith(\"text\")) {",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Ritu Raj Lakhera  for \"Authorize.net payment services are not handling  run time exceptions correctly\" https://issues.apache.org/jira/browse/OFBIZ-5617\n\nSystem is creating the order in CREATED status before processing the payment. But if payment processing encounters a run time exception then system throws the error and does not change the order status to REJECTED. Because Authorize.net payment services are not handling these exceptions correctly.\n\nEx: If authorize.net payment gateway call get interrupt then method processCard of AIMPaymentServices.java is returning the result map without the 'authResult' kay.\nAnd subsequent method (processAuthTransResult) is trying to access this and thus service is throwing NullPointerException.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1588733 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a482e3c463b0c8448de1566f533790d7f0e52454",
        "parent": "https://github.com/apache/ofbiz-framework/commit/8e28dd5ec4b74cd1e3bcd43ba1dc2234c1b6022e",
        "bug_id": "ofbiz-framework_267",
        "file": [
            {
                "sha": "643289116d69fd3053363f0d9ac66095c844f028",
                "filename": "applications/accounting/src/org/ofbiz/accounting/thirdparty/authorizedotnet/AIMPaymentServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a482e3c463b0c8448de1566f533790d7f0e52454/applications/accounting/src/org/ofbiz/accounting/thirdparty/authorizedotnet/AIMPaymentServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a482e3c463b0c8448de1566f533790d7f0e52454/applications/accounting/src/org/ofbiz/accounting/thirdparty/authorizedotnet/AIMPaymentServices.java",
                "status": "modified",
                "changes": 123,
                "additions": 76,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/accounting/src/org/ofbiz/accounting/thirdparty/authorizedotnet/AIMPaymentServices.java?ref=a482e3c463b0c8448de1566f533790d7f0e52454",
                "patch": "@@ -642,21 +642,28 @@ private static void buildVoidTransaction(Map<String, Object> params, Properties\n \n     private static void processAuthTransResult(Map<String, Object> request, Map<String, Object> reply, Map<String, Object> results) {\n         AuthorizeResponse ar = (AuthorizeResponse) reply.get(\"authorizeResponse\");\n-        Boolean authResult = (Boolean) reply.get(\"authResult\");\n-        results.put(\"authResult\", new Boolean(authResult.booleanValue()));\n-        results.put(\"authFlag\", ar.getReasonCode());\n-        results.put(\"authMessage\", ar.getReasonText());\n-        if (authResult.booleanValue()) { //passed\n-            results.put(\"authCode\", ar.getAuthorizationCode());\n-            results.put(\"authRefNum\", ar.getTransactionId());\n-            results.put(\"cvCode\", ar.getCvResult());\n-            results.put(\"avsCode\", ar.getAvsResult());\n-            if (BigDecimal.ZERO.compareTo(ar.getAmount()) == 0) {\n-                results.put(\"processAmount\", getXAmount(request));\n+        try {\n+            Boolean authResult = (Boolean) reply.get(\"authResult\");\n+            results.put(\"authResult\", new Boolean(authResult.booleanValue()));\n+            results.put(\"authFlag\", ar.getReasonCode());\n+            results.put(\"authMessage\", ar.getReasonText());\n+            if (authResult.booleanValue()) { //passed\n+                results.put(\"authCode\", ar.getAuthorizationCode());\n+                results.put(\"authRefNum\", ar.getTransactionId());\n+                results.put(\"cvCode\", ar.getCvResult());\n+                results.put(\"avsCode\", ar.getAvsResult());\n+                if (BigDecimal.ZERO.compareTo(ar.getAmount()) == 0) {\n+                    results.put(\"processAmount\", getXAmount(request));\n+                } else {\n+                    results.put(\"processAmount\", ar.getAmount());\n+                }\n             } else {\n-                results.put(\"processAmount\", ar.getAmount());\n+                results.put(\"authCode\", ar.getResponseCode());\n+                results.put(\"processAmount\", BigDecimal.ZERO);\n+                results.put(\"authRefNum\", AuthorizeResponse.ERROR);\n             }\n-        } else {\n+        } catch (Exception ex) {\n+            Debug.logError(ex, module);\n             results.put(\"authCode\", ar.getResponseCode());\n             results.put(\"processAmount\", BigDecimal.ZERO);\n             results.put(\"authRefNum\", AuthorizeResponse.ERROR);\n@@ -666,40 +673,50 @@ private static void processAuthTransResult(Map<String, Object> request, Map<Stri\n \n     private static void processCaptureTransResult(Map<String, Object> request, Map<String, Object> reply, Map<String, Object> results) {\n         AuthorizeResponse ar = (AuthorizeResponse) reply.get(\"authorizeResponse\");\n-        Boolean captureResult = (Boolean) reply.get(\"authResult\");\n-        results.put(\"captureResult\", new Boolean(captureResult.booleanValue()));\n-        results.put(\"captureFlag\", ar.getReasonCode());\n-        results.put(\"captureMessage\", ar.getReasonText());\n-        results.put(\"captureRefNum\", ar.getTransactionId());\n-        if (captureResult.booleanValue()) { //passed\n-            results.put(\"captureCode\", ar.getAuthorizationCode());\n-            if (BigDecimal.ZERO.compareTo(ar.getAmount()) == 0) {\n-                results.put(\"captureAmount\", getXAmount(request));\n+        try {\n+            Boolean captureResult = (Boolean) reply.get(\"authResult\");\n+            results.put(\"captureResult\", new Boolean(captureResult.booleanValue()));\n+            results.put(\"captureFlag\", ar.getReasonCode());\n+            results.put(\"captureMessage\", ar.getReasonText());\n+            results.put(\"captureRefNum\", ar.getTransactionId());\n+            if (captureResult.booleanValue()) { //passed\n+                results.put(\"captureCode\", ar.getAuthorizationCode());\n+                if (BigDecimal.ZERO.compareTo(ar.getAmount()) == 0) {\n+                    results.put(\"captureAmount\", getXAmount(request));\n+                } else {\n+                    results.put(\"captureAmount\", ar.getAmount());\n+                }\n             } else {\n-                results.put(\"captureAmount\", ar.getAmount());\n+                results.put(\"captureAmount\", BigDecimal.ZERO);\n             }\n-        } else {\n+        } catch (Exception ex) {\n+            Debug.logError(ex, module);\n             results.put(\"captureAmount\", BigDecimal.ZERO);\n         }\n-        Debug.logInfo(\"processCaptureTransResult: \" + results.toString(),module);\n+        Debug.logInfo(\"captureRefNum: \" + results.toString(),module);\n     }\n \n     private static Map<String, Object> processRefundTransResult(Map<String, Object> request, Map<String, Object> reply) {\n         Map<String, Object> results = FastMap.newInstance();\n         AuthorizeResponse ar = (AuthorizeResponse) reply.get(\"authorizeResponse\");\n-        Boolean captureResult = (Boolean) reply.get(\"authResult\");\n-        results.put(\"refundResult\", new Boolean(captureResult.booleanValue()));\n-        results.put(\"refundFlag\", ar.getReasonCode());\n-        results.put(\"refundMessage\", ar.getReasonText());\n-        results.put(\"refundRefNum\", ar.getTransactionId());\n-        if (captureResult.booleanValue()) { //passed\n-            results.put(\"refundCode\", ar.getAuthorizationCode());\n-            if (BigDecimal.ZERO.compareTo(ar.getAmount()) == 0) {\n-                results.put(\"refundAmount\", getXAmount(request));\n+        try {\n+            Boolean captureResult = (Boolean) reply.get(\"authResult\");\n+            results.put(\"refundResult\", new Boolean(captureResult.booleanValue()));\n+            results.put(\"refundFlag\", ar.getReasonCode());\n+            results.put(\"refundMessage\", ar.getReasonText());\n+            results.put(\"refundRefNum\", ar.getTransactionId());\n+            if (captureResult.booleanValue()) { //passed\n+                results.put(\"refundCode\", ar.getAuthorizationCode());\n+                if (BigDecimal.ZERO.compareTo(ar.getAmount()) == 0) {\n+                    results.put(\"refundAmount\", getXAmount(request));\n+                } else {\n+                    results.put(\"refundAmount\", ar.getAmount());\n+                }\n             } else {\n-                results.put(\"refundAmount\", ar.getAmount());\n+                results.put(\"refundAmount\", BigDecimal.ZERO);\n             }\n-        } else {\n+        } catch (Exception ex) {\n+            Debug.logError(ex, module);\n             results.put(\"refundAmount\", BigDecimal.ZERO);\n         }\n         Debug.logInfo(\"processRefundTransResult: \" + results.toString(),module);\n@@ -709,19 +726,24 @@ private static void processCaptureTransResult(Map<String, Object> request, Map<S\n     private static Map<String, Object> processReleaseTransResult(Map<String, Object> request, Map<String, Object> reply) {\n         Map<String, Object> results = FastMap.newInstance();\n         AuthorizeResponse ar = (AuthorizeResponse) reply.get(\"authorizeResponse\");\n-        Boolean captureResult = (Boolean) reply.get(\"authResult\");\n-        results.put(\"releaseResult\", new Boolean(captureResult.booleanValue()));\n-        results.put(\"releaseFlag\", ar.getReasonCode());\n-        results.put(\"releaseMessage\", ar.getReasonText());\n-        results.put(\"releaseRefNum\", ar.getTransactionId());\n-        if (captureResult.booleanValue()) { //passed\n-            results.put(\"releaseCode\", ar.getAuthorizationCode());\n-            if (BigDecimal.ZERO.compareTo(ar.getAmount()) == 0) {\n-                results.put(\"releaseAmount\", getXAmount(request));\n+        try {\n+            Boolean captureResult = (Boolean) reply.get(\"authResult\");\n+            results.put(\"releaseResult\", new Boolean(captureResult.booleanValue()));\n+            results.put(\"releaseFlag\", ar.getReasonCode());\n+            results.put(\"releaseMessage\", ar.getReasonText());\n+            results.put(\"releaseRefNum\", ar.getTransactionId());\n+            if (captureResult.booleanValue()) { //passed\n+                results.put(\"releaseCode\", ar.getAuthorizationCode());\n+                if (BigDecimal.ZERO.compareTo(ar.getAmount()) == 0) {\n+                    results.put(\"releaseAmount\", getXAmount(request));\n+                } else {\n+                    results.put(\"releaseAmount\", ar.getAmount());\n+                }\n             } else {\n-                results.put(\"releaseAmount\", ar.getAmount());\n+                results.put(\"releaseAmount\", BigDecimal.ZERO);\n             }\n-        } else {\n+        } catch (Exception ex) {\n+            Debug.logError(ex, module);\n             results.put(\"releaseAmount\", BigDecimal.ZERO);\n         }\n         Debug.logInfo(\"processReleaseTransResult: \" + results.toString(),module);\n@@ -730,6 +752,7 @@ private static void processCaptureTransResult(Map<String, Object> request, Map<S\n \n     private static void processAuthCaptureTransResult(Map<String, Object> request, Map<String, Object> reply, Map<String, Object> results) {\n         AuthorizeResponse ar = (AuthorizeResponse) reply.get(\"authorizeResponse\");\n+        try {\n         Boolean authResult = (Boolean) reply.get(\"authResult\");\n         results.put(\"authResult\", new Boolean(authResult.booleanValue()));\n         results.put(\"authFlag\", ar.getReasonCode());\n@@ -753,6 +776,12 @@ private static void processAuthCaptureTransResult(Map<String, Object> request, M\n             results.put(\"processAmount\", BigDecimal.ZERO);\n             results.put(\"authRefNum\", AuthorizeResponse.ERROR);\n         }\n+        } catch (Exception ex) {\n+            Debug.logError(ex, module);\n+            results.put(\"authCode\", ar.getResponseCode());\n+            results.put(\"processAmount\", BigDecimal.ZERO);\n+            results.put(\"authRefNum\", AuthorizeResponse.ERROR);\n+        }\n         Debug.logInfo(\"processAuthTransResult: \" + results.toString(),module);\n     }\n ",
                "deletions": 47
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed: After creating a new Flexible Birt report, before visualising it you need\n to do other actions\n(OFBIZ-9194)\n\nYou need to add the data set fields with the Birt Report Designer \nand publish the report. This will be documented with OFBIZ-9188\n\nI thought about graying the button but it was a delicate matter because it uses\na <content element in screen and directly call a view handled from a Groovy \nevent.\n\nIt was easier to fix the PrepareBirtCall Groovy event. But to be totally sure\nI also handled the possible NPE in the BirtViewHandler\n\nI also fixed viewLast error in controller \n\nBecause the files were not committed with the svn:eol-style native property\nyou will see false changes in this commit. Some files have their svn:eol-style \nnative property set. I'll soon commit missing so in new Birt Java files.\n\nI'll also commit a lot of svn:eol-style native property changes for XML and \nGroovy files which have been neglected so far. I'm sorry for that because \nwhen we do so we loose the annotations history. I will then definitely put in \nplace what I suggested in http://markmail.org/message/ffmyw773p65fndey\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1781218 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/500f214d5e60c7050a54c37b170ad14c4277978f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/507c2dd9c57f65d063b369e4f1a113ac232fde9e",
        "bug_id": "ofbiz-framework_268",
        "file": [
            {
                "sha": "58498a9155c8d5bf121a40e77e059dafef00d4e3",
                "filename": "plugins/birt/config/BirtErrorUiLabels.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/500f214d5e60c7050a54c37b170ad14c4277978f/plugins/birt/config/BirtErrorUiLabels.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/500f214d5e60c7050a54c37b170ad14c4277978f/plugins/birt/config/BirtErrorUiLabels.xml",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/birt/config/BirtErrorUiLabels.xml?ref=500f214d5e60c7050a54c37b170ad14c4277978f",
                "patch": "@@ -65,6 +65,10 @@\n         <value xml:lang=\"en\">No report to delete</value>\n         <value xml:lang=\"fr\">Aucun rapport \u00e0 supprimer</value>\n     </property>\n+    <property key=\"BirtErrorNotPublishedReport\">\n+        <value xml:lang=\"en\">After creating a new Flexible Birt report, before visualising it, you need to add the data set fields with the Birt Report Designer and publish the report</value>\n+        <value xml:lang=\"fr\">Apr\u00e8s avoir cr\u00e9\u00e9 un nouveau rapport Birt Flexible, avant de le visualiser, vous devez ajouter les champs du jeu de donn\u00e9es (data set fields) avec le Concepteur de rapports Birt (Birt Report Designer) et publier le rapport</value>\n+    </property>\n     <property key=\"BirtErrorRetrievingTurnOver\">\n         <value xml:lang=\"en\">Error while retrieving turnover informations</value>\n         <value xml:lang=\"fr\">Erreur lors de l'acc\u00e8s aux informations li\u00e9es au chiffre d'affaire</value>",
                "deletions": 0
            },
            {
                "sha": "aba1d4c7e51e6067a1e81ebb890cb3079f3188d1",
                "filename": "plugins/birt/groovyScripts/report/PrepareBirtCall.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/500f214d5e60c7050a54c37b170ad14c4277978f/plugins/birt/groovyScripts/report/PrepareBirtCall.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/500f214d5e60c7050a54c37b170ad14c4277978f/plugins/birt/groovyScripts/report/PrepareBirtCall.groovy",
                "status": "modified",
                "changes": 6,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/birt/groovyScripts/report/PrepareBirtCall.groovy?ref=500f214d5e60c7050a54c37b170ad14c4277978f",
                "patch": "@@ -17,12 +17,18 @@\n  * under the License.\n  */\n \n+import org.apache.ofbiz.base.util.UtilProperties\n+\n def birtParameters = [:]\n \n birtParameters.parameters = parameters\n birtParameters.modelElementName = parameters.modelElementName\n birtParameters.userLogin = context.userLogin\n birtParameters.locale = locale\n \n+if(!birtParameters.rptDesignFile) {\n+    request.setAttribute(\"_ERROR_MESSAGE_\", UtilProperties.getMessage(\"BirtErrorUiLabels\", \"BirtErrorNotPublishedReport\", locale))\n+    return \"error\"\n+}\n request.setAttribute(\"birtParameters\", birtParameters)\n return \"success\"",
                "deletions": 0
            },
            {
                "sha": "6040c88dbcff01d938b8e445c51aae9e9f20808d",
                "filename": "plugins/birt/src/main/java/org/apache/ofbiz/birt/webapp/view/BirtViewHandler.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/500f214d5e60c7050a54c37b170ad14c4277978f/plugins/birt/src/main/java/org/apache/ofbiz/birt/webapp/view/BirtViewHandler.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/500f214d5e60c7050a54c37b170ad14c4277978f/plugins/birt/src/main/java/org/apache/ofbiz/birt/webapp/view/BirtViewHandler.java",
                "status": "modified",
                "changes": 15,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/birt/src/main/java/org/apache/ofbiz/birt/webapp/view/BirtViewHandler.java?ref=500f214d5e60c7050a54c37b170ad14c4277978f",
                "patch": "@@ -30,13 +30,11 @@\n import javax.servlet.http.HttpServletResponse;\n import javax.xml.parsers.ParserConfigurationException;\n \n-import org.eclipse.birt.core.exception.BirtException;\n-import org.eclipse.birt.report.engine.api.IReportEngine;\n-import org.eclipse.birt.report.engine.api.IReportRunnable;\n import org.apache.ofbiz.base.util.Debug;\n import org.apache.ofbiz.base.util.GeneralException;\n import org.apache.ofbiz.base.util.UtilGenerics;\n import org.apache.ofbiz.base.util.UtilHttp;\n+import org.apache.ofbiz.base.util.UtilProperties;\n import org.apache.ofbiz.base.util.UtilValidate;\n import org.apache.ofbiz.birt.BirtFactory;\n import org.apache.ofbiz.birt.BirtWorker;\n@@ -46,11 +44,15 @@\n import org.apache.ofbiz.entity.util.EntityUtilProperties;\n import org.apache.ofbiz.webapp.view.ViewHandler;\n import org.apache.ofbiz.webapp.view.ViewHandlerException;\n+import org.eclipse.birt.core.exception.BirtException;\n+import org.eclipse.birt.report.engine.api.IReportEngine;\n+import org.eclipse.birt.report.engine.api.IReportRunnable;\n import org.xml.sax.SAXException;\n \n public class BirtViewHandler implements ViewHandler {\n \n     public static final String module = BirtViewHandler.class.getName();\n+    public static final String resource_error = \"BirtErrorUiLabels\";\n \n     protected ServletContext servletContext = null;\n \n@@ -81,7 +83,10 @@ public void render(String name, String page, String info,\n             if (UtilValidate.isEmpty(page) || page.equals(\"ExecuteFlexibleReport\")) {\n                 page = (String) request.getParameter(\"rptDesignFile\");\n             }\n-\n+            if (UtilValidate.isEmpty(page)) {\n+                Locale locale = (Locale) request.getLocale();\n+                throw new ViewHandlerException(UtilProperties.getMessage(resource_error, \"BirtErrorNotPublishedReport\", locale));\n+            }\n             if (page.startsWith(\"component://\")) {\n                 InputStream reportInputStream = BirtFactory.getReportInputStreamFromLocation(page);\n                 design = engine.openReportDesign(reportInputStream);\n@@ -101,7 +106,7 @@ public void render(String name, String page, String info,\n                 context.put(BirtWorker.getBirtParameters(), UtilHttp.getParameterMap(request));\n             }\n             // set locale from request\n-            Locale locale = (Locale)request.getAttribute(BirtWorker.getBirtLocale());\n+            Locale locale = (Locale) request.getAttribute(BirtWorker.getBirtLocale());\n             if (locale == null) {\n                 locale = UtilHttp.getLocale(request);\n             }",
                "deletions": 5
            },
            {
                "sha": "1072b8b9003ce5e5586573effdc2baca1cde0b70",
                "filename": "plugins/birt/webapp/birt/WEB-INF/controller.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/500f214d5e60c7050a54c37b170ad14c4277978f/plugins/birt/webapp/birt/WEB-INF/controller.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/500f214d5e60c7050a54c37b170ad14c4277978f/plugins/birt/webapp/birt/WEB-INF/controller.xml",
                "status": "modified",
                "changes": 356,
                "additions": 178,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/plugins/birt/webapp/birt/WEB-INF/controller.xml?ref=500f214d5e60c7050a54c37b170ad14c4277978f",
                "patch": "@@ -1,178 +1,178 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n-<!--\r\n-Licensed to the Apache Software Foundation (ASF) under one\r\n-or more contributor license agreements.  See the NOTICE file\r\n-distributed with this work for additional information\r\n-regarding copyright ownership.  The ASF licenses this file\r\n-to you under the Apache License, Version 2.0 (the\r\n-\"License\"); you may not use this file except in compliance\r\n-with the License.  You may obtain a copy of the License at\r\n-\r\n-http://www.apache.org/licenses/LICENSE-2.0\r\n-\r\n-Unless required by applicable law or agreed to in writing,\r\n-software distributed under the License is distributed on an\r\n-\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n-KIND, either express or implied.  See the License for the\r\n-specific language governing permissions and limitations\r\n-under the License.\r\n--->\r\n-\r\n-<site-conf xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \r\n-        xmlns=\"http://ofbiz.apache.org/Site-Conf\" xsi:schemaLocation=\"http://ofbiz.apache.org/Site-Conf http://ofbiz.apache.org/dtds/site-conf.xsd\">\r\n-    <!-- The controller elements that are common to all OFBiz components\r\n-         can be found in the following xml file. A component can override the\r\n-         elements found in the common-controller.xml file. -->\r\n-    <include location=\"component://common/webcommon/WEB-INF/common-controller.xml\"/>\r\n-    \r\n-    <description>BIRT Component Site Configuration File</description>\r\n-\r\n-    <handler name=\"birt\" type=\"view\" class=\"org.apache.ofbiz.birt.webapp.view.BirtViewHandler\"/>\r\n-    <handler name=\"simplecontent\" type=\"view\" class=\"org.apache.ofbiz.content.view.SimpleContentViewHandler\"/>\r\n-\r\n-    <!-- Events to run on every request before security (chains exempt) -->\r\n-    <!--\r\n-    <preprocessor>\r\n-    </preprocessor>\r\n-    -->\r\n-    <!-- Events to run on every request after all other processing (chains exempt) -->\r\n-    <!--\r\n-    <postprocessor>\r\n-        <event type=\"java\" path=\"org.apache.ofbiz.webapp.event.TestEvent\" invoke=\"test\"/>\r\n-    </postprocessor>\r\n-    -->\r\n-\r\n-    <!-- Request Mappings -->\r\n-    <request-map uri=\"main\">\r\n-        <security https=\"true\" auth=\"true\"/>\r\n-        <response name=\"success\" type=\"view\" value=\"main\"/>\r\n-    </request-map>\r\n-    <request-map uri=\"Report\">\r\n-        <security https=\"true\" auth=\"true\"/>\r\n-        <response name=\"success\" type=\"view\" value=\"Report\"/>\r\n-    </request-map>\r\n-    <request-map uri=\"Mail\">\r\n-        <security https=\"true\" auth=\"true\"/>\r\n-        <response name=\"success\" type=\"view\" value=\"Mail\"/>\r\n-    </request-map>\r\n-    <request-map uri=\"sendBirtMail\">\r\n-        <security https=\"true\" auth=\"true\"/>\r\n-        <event type=\"service\" invoke=\"sendBirtMail\"/>\r\n-        <response name=\"success\" type=\"view\" value=\"Mail\"/>\r\n-        <response name=\"error\" type=\"view\" value=\"Mail\"/>\r\n-    </request-map>\r\n-    <request-map uri=\"ViewHandler\">\r\n-        <security https=\"true\" auth=\"true\"/>\r\n-        <response name=\"success\" type=\"view\" value=\"ViewHandler\"/>\r\n-    </request-map>\r\n-\r\n-    <!-- BIRT example Requests -->\r\n-    <request-map uri=\"BirtMain\">\r\n-        <security https=\"true\" auth=\"true\"/>\r\n-        <response name=\"success\" type=\"view\" value=\"BirtMain\"/>\r\n-    </request-map>\r\n-\r\n-    <request-map uri=\"chartReport\">\r\n-        <security https=\"true\" auth=\"true\"/>\r\n-        <response name=\"success\" type=\"view\" value=\"chartReport\"/>\r\n-    </request-map>\r\n-    <request-map uri=\"chartViewHandler\">\r\n-        <security https=\"true\" auth=\"true\"/>\r\n-        <response name=\"success\" type=\"view\" value=\"chartViewHandler\"/>\r\n-    </request-map>\r\n-\r\n-    <!--Flexible Report Request-->\r\n-    <request-map uri=\"UseFlexibleReport\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"UseFlexibleReport\"/></request-map>\r\n-    <request-map uri=\"ListFlexibleReport\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"ListFlexibleReport\" /></request-map>\r\n-    <request-map uri=\"SelectMasterFlexibleReport\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"CreateFlexibleReport\" /></request-map>\r\n-    <request-map uri=\"EditFlexibleReport\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"EditFlexibleReport\" /></request-map>\r\n-    <request-map uri=\"PreviewReportSearchForm\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"PreviewReportSearchForm\" /></request-map>\r\n-    <request-map uri=\"DisplayFlexibleReportSearchForm\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"DisplayFlexibleReportSearchForm\" /></request-map>\r\n-    <request-map uri=\"ViewBinaryDataResource\"><security auth=\"true\" https=\"true\" /><response name=\"success\" type=\"view\" value=\"ViewBinaryDataResource\" /></request-map>\r\n-\r\n-    <request-map uri=\"ExecuteFlexibleReport\">\r\n-        <security https=\"true\" auth=\"true\" />\r\n-        <event type=\"groovy\" path=\"component://birt/groovyScripts/report/PrepareBirtCall.groovy\" />\r\n-        <response name=\"success\" type=\"view\" value=\"ExecuteFlexibleReport\" />\r\n-        <response name=\"error\" type=\"request\" value=\"viewLast\" />\r\n-    </request-map>\r\n-    <request-map uri=\"CreateFlexibleReport\">\r\n-        <security https=\"true\" auth=\"true\" />\r\n-        <event type=\"service\" invoke=\"createFlexibleReportFromMaster\" />\r\n-        <response name=\"error\" type=\"view\" value=\"CreateFlexibleReport\" />\r\n-        <response name=\"success\" type=\"view\" value=\"EditFlexibleReport\" />\r\n-    </request-map>\r\n-    <request-map uri=\"EditFlexibleReportSearchForm\">\r\n-        <security https=\"true\" auth=\"true\" />\r\n-        <event type=\"service\" invoke=\"updateFlexibleReportSearchForm\" />\r\n-        <response name=\"error\" type=\"view\" value=\"DisplayFlexibleReportSearchForm\" />\r\n-        <response name=\"success\" type=\"view\" value=\"DisplayFlexibleReportSearchForm\" />\r\n-    </request-map>\r\n-\r\n-    <request-map uri=\"DeleteAllFlexibleReports\">\r\n-        <security https=\"true\" auth=\"true\" />\r\n-        <event type=\"service\" invoke=\"deleteAllFlexibleReports\" />\r\n-        <response name=\"success\" type=\"view\" value=\"main\" />\r\n-        <response name=\"error\" type=\"view\" value=\"main\" />\r\n-    </request-map>\r\n-    <request-map uri=\"DeleteFlexibleReport\">\r\n-        <security https=\"true\" auth=\"true\" />\r\n-        <event type=\"service\" invoke=\"deleteFlexibleReport\" />\r\n-        <response name=\"success\" type=\"view\" value=\"ListFlexibleReport\" />\r\n-        <response name=\"error\" type=\"view\" value=\"ListFlexibleReport\" />\r\n-    </request-map>\r\n-\r\n-    <request-map uri=\"UpdateFlexibleReport\">\r\n-        <security https=\"true\" auth=\"true\" />\r\n-        <event type=\"service\" invoke=\"updateContent\" />\r\n-        <response name=\"success\" type=\"view\" value=\"ListFlexibleReport\" />\r\n-        <response name=\"error\" type=\"view\" value=\"ListFlexibleReport\" />\r\n-    </request-map>\r\n-    <request-map uri=\"UploadRptDesign\">\r\n-        <security https=\"true\" auth=\"true\" />\r\n-        <event type=\"service\" invoke=\"uploadFlexibleReportRptDesign\" />\r\n-        <response name=\"success\" type=\"view\" value=\"EditFlexibleReport\" />\r\n-        <response name=\"error\" type=\"view\" value=\"EditFlexibleReport\" />\r\n-    </request-map>\r\n-    <!-- end of request mappings -->\r\n-\r\n-    <!-- ================ Entity Lookup Requests ================= -->\r\n-    <request-map uri=\"LookupProductCategory\"><security auth=\"true\" https=\"true\"/><response name=\"success\" type=\"view\" value=\"LookupProductCategory\"/></request-map>\r\n-    <request-map uri=\"LookupProductStore\"><security auth=\"true\" https=\"true\"/><response name=\"success\" type=\"view\" value=\"LookupProductStore\"/></request-map>\r\n-    \r\n-    <!-- View Mappings -->\r\n-    <view-map name=\"main\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#main\"/>\r\n-    <view-map name=\"Report\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#Report\"/>\r\n-    <view-map name=\"chartReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#chartReport\"/>\r\n-    <view-map name=\"Mail\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#EditMail\"/>\r\n-    \r\n-    <!-- Supported Content Types -->\r\n-    <!--\r\n-        text/html\r\n-        application/pdf\r\n-        application/postscript\r\n-        application/vnd.ms-excel\r\n-        application/vnd.ms-word\r\n-        application/vnd.ms-powerpoint\r\n-        application/vnd.oasis.opendocument.text\r\n-        application/vnd.oasis.opendocument.spreadsheet\r\n-        application/vnd.oasis.opendocument.presentation\r\n-        application/vnd.openxmlformats-officedocument.wordprocessingml.document\r\n-        application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\r\n-        application/vnd.openxmlformats-officedocument.presentationml.presentation\r\n-     -->\r\n-    <view-map name=\"ViewHandler\" type=\"birt\" page=\"component://birt/webapp/birt/report/example.rptdesign\" content-type=\"application/pdf\"/>\r\n-    <view-map name=\"chartViewHandler\" type=\"birt\" page=\"component://birt/webapp/birt/report/chart.rptdesign\" content-type=\"application/pdf\"/>\r\n-    <view-map name=\"UseFlexibleReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#UseFlexibleReport\"/>\r\n-    <view-map name=\"EditFlexibleReportSearchForm\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#EditFlexibleReportSearchForm\"/>\r\n-    <view-map name=\"CreateFlexibleReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#CreateFlexibleReport\"/>\r\n-    <view-map name=\"DisplayFlexibleReportSearchForm\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#DisplayFlexibleReportSearchForm\"/>\r\n-    <view-map name=\"ListFlexibleReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#ListFlexibleReport\"/>\r\n-    <view-map name=\"EditFlexibleReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#EditFlexibleReport\"/>\r\n-    <view-map name=\"PreviewReportSearchForm\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#PreviewReportSearchForm\"/>\r\n-    <view-map name=\"ExecuteFlexibleReport\" type=\"birt\" />\r\n-    <view-map name=\"ViewBinaryDataResource\" page=\"\" type=\"simplecontent\"/>\r\n-    \r\n-    <view-map name=\"LookupProductCategory\" type=\"screen\" page=\"component://product/widget/catalog/LookupScreens.xml#LookupProductCategory\"/>\r\n-    <view-map name=\"LookupProductStore\" type=\"screen\" page=\"component://product/widget/catalog/LookupScreens.xml#LookupProductStore\"/>\r\n-</site-conf>\r\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<site-conf xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n+        xmlns=\"http://ofbiz.apache.org/Site-Conf\" xsi:schemaLocation=\"http://ofbiz.apache.org/Site-Conf http://ofbiz.apache.org/dtds/site-conf.xsd\">\n+    <!-- The controller elements that are common to all OFBiz components\n+         can be found in the following xml file. A component can override the\n+         elements found in the common-controller.xml file. -->\n+    <include location=\"component://common/webcommon/WEB-INF/common-controller.xml\"/>\n+    \n+    <description>BIRT Component Site Configuration File</description>\n+\n+    <handler name=\"birt\" type=\"view\" class=\"org.apache.ofbiz.birt.webapp.view.BirtViewHandler\"/>\n+    <handler name=\"simplecontent\" type=\"view\" class=\"org.apache.ofbiz.content.view.SimpleContentViewHandler\"/>\n+\n+    <!-- Events to run on every request before security (chains exempt) -->\n+    <!--\n+    <preprocessor>\n+    </preprocessor>\n+    -->\n+    <!-- Events to run on every request after all other processing (chains exempt) -->\n+    <!--\n+    <postprocessor>\n+        <event type=\"java\" path=\"org.apache.ofbiz.webapp.event.TestEvent\" invoke=\"test\"/>\n+    </postprocessor>\n+    -->\n+\n+    <!-- Request Mappings -->\n+    <request-map uri=\"main\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <response name=\"success\" type=\"view\" value=\"main\"/>\n+    </request-map>\n+    <request-map uri=\"Report\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <response name=\"success\" type=\"view\" value=\"Report\"/>\n+    </request-map>\n+    <request-map uri=\"Mail\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <response name=\"success\" type=\"view\" value=\"Mail\"/>\n+    </request-map>\n+    <request-map uri=\"sendBirtMail\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <event type=\"service\" invoke=\"sendBirtMail\"/>\n+        <response name=\"success\" type=\"view\" value=\"Mail\"/>\n+        <response name=\"error\" type=\"view\" value=\"Mail\"/>\n+    </request-map>\n+    <request-map uri=\"ViewHandler\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <response name=\"success\" type=\"view\" value=\"ViewHandler\"/>\n+    </request-map>\n+\n+    <!-- BIRT example Requests -->\n+    <request-map uri=\"BirtMain\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <response name=\"success\" type=\"view\" value=\"BirtMain\"/>\n+    </request-map>\n+\n+    <request-map uri=\"chartReport\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <response name=\"success\" type=\"view\" value=\"chartReport\"/>\n+    </request-map>\n+    <request-map uri=\"chartViewHandler\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <response name=\"success\" type=\"view\" value=\"chartViewHandler\"/>\n+    </request-map>\n+\n+    <!--Flexible Report Request-->\n+    <request-map uri=\"UseFlexibleReport\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"UseFlexibleReport\"/></request-map>\n+    <request-map uri=\"ListFlexibleReport\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"ListFlexibleReport\" /></request-map>\n+    <request-map uri=\"SelectMasterFlexibleReport\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"CreateFlexibleReport\" /></request-map>\n+    <request-map uri=\"EditFlexibleReport\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"EditFlexibleReport\" /></request-map>\n+    <request-map uri=\"PreviewReportSearchForm\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"PreviewReportSearchForm\" /></request-map>\n+    <request-map uri=\"DisplayFlexibleReportSearchForm\"><security https=\"true\" auth=\"true\" /><response name=\"success\" type=\"view\" value=\"DisplayFlexibleReportSearchForm\" /></request-map>\n+    <request-map uri=\"ViewBinaryDataResource\"><security auth=\"true\" https=\"true\" /><response name=\"success\" type=\"view\" value=\"ViewBinaryDataResource\" /></request-map>\n+\n+    <request-map uri=\"ExecuteFlexibleReport\">\n+        <security https=\"true\" auth=\"true\" />\n+        <event type=\"groovy\" path=\"component://birt/groovyScripts/report/PrepareBirtCall.groovy\" />\n+        <response name=\"success\" type=\"view\" value=\"ExecuteFlexibleReport\" />\n+        <response name=\"error\" type=\"view-last\"/>\n+    </request-map>\n+    <request-map uri=\"CreateFlexibleReport\">\n+        <security https=\"true\" auth=\"true\" />\n+        <event type=\"service\" invoke=\"createFlexibleReportFromMaster\" />\n+        <response name=\"error\" type=\"view\" value=\"CreateFlexibleReport\" />\n+        <response name=\"success\" type=\"view\" value=\"EditFlexibleReport\" />\n+    </request-map>\n+    <request-map uri=\"EditFlexibleReportSearchForm\">\n+        <security https=\"true\" auth=\"true\" />\n+        <event type=\"service\" invoke=\"updateFlexibleReportSearchForm\" />\n+        <response name=\"error\" type=\"view\" value=\"DisplayFlexibleReportSearchForm\" />\n+        <response name=\"success\" type=\"view\" value=\"DisplayFlexibleReportSearchForm\" />\n+    </request-map>\n+\n+    <request-map uri=\"DeleteAllFlexibleReports\">\n+        <security https=\"true\" auth=\"true\" />\n+        <event type=\"service\" invoke=\"deleteAllFlexibleReports\" />\n+        <response name=\"success\" type=\"view\" value=\"main\" />\n+        <response name=\"error\" type=\"view\" value=\"main\" />\n+    </request-map>\n+    <request-map uri=\"DeleteFlexibleReport\">\n+        <security https=\"true\" auth=\"true\" />\n+        <event type=\"service\" invoke=\"deleteFlexibleReport\" />\n+        <response name=\"success\" type=\"view\" value=\"ListFlexibleReport\" />\n+        <response name=\"error\" type=\"view\" value=\"ListFlexibleReport\" />\n+    </request-map>\n+\n+    <request-map uri=\"UpdateFlexibleReport\">\n+        <security https=\"true\" auth=\"true\" />\n+        <event type=\"service\" invoke=\"updateContent\" />\n+        <response name=\"success\" type=\"view\" value=\"ListFlexibleReport\" />\n+        <response name=\"error\" type=\"view\" value=\"ListFlexibleReport\" />\n+    </request-map>\n+    <request-map uri=\"UploadRptDesign\">\n+        <security https=\"true\" auth=\"true\" />\n+        <event type=\"service\" invoke=\"uploadFlexibleReportRptDesign\" />\n+        <response name=\"success\" type=\"view\" value=\"EditFlexibleReport\" />\n+        <response name=\"error\" type=\"view\" value=\"EditFlexibleReport\" />\n+    </request-map>\n+    <!-- end of request mappings -->\n+\n+    <!-- ================ Entity Lookup Requests ================= -->\n+    <request-map uri=\"LookupProductCategory\"><security auth=\"true\" https=\"true\"/><response name=\"success\" type=\"view\" value=\"LookupProductCategory\"/></request-map>\n+    <request-map uri=\"LookupProductStore\"><security auth=\"true\" https=\"true\"/><response name=\"success\" type=\"view\" value=\"LookupProductStore\"/></request-map>\n+    \n+    <!-- View Mappings -->\n+    <view-map name=\"main\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#main\"/>\n+    <view-map name=\"Report\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#Report\"/>\n+    <view-map name=\"chartReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#chartReport\"/>\n+    <view-map name=\"Mail\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#EditMail\"/>\n+    \n+    <!-- Supported Content Types -->\n+    <!--\n+        text/html\n+        application/pdf\n+        application/postscript\n+        application/vnd.ms-excel\n+        application/vnd.ms-word\n+        application/vnd.ms-powerpoint\n+        application/vnd.oasis.opendocument.text\n+        application/vnd.oasis.opendocument.spreadsheet\n+        application/vnd.oasis.opendocument.presentation\n+        application/vnd.openxmlformats-officedocument.wordprocessingml.document\n+        application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n+        application/vnd.openxmlformats-officedocument.presentationml.presentation\n+     -->\n+    <view-map name=\"ViewHandler\" type=\"birt\" page=\"component://birt/webapp/birt/report/example.rptdesign\" content-type=\"application/pdf\"/>\n+    <view-map name=\"chartViewHandler\" type=\"birt\" page=\"component://birt/webapp/birt/report/chart.rptdesign\" content-type=\"application/pdf\"/>\n+    <view-map name=\"UseFlexibleReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#UseFlexibleReport\"/>\n+    <view-map name=\"EditFlexibleReportSearchForm\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#EditFlexibleReportSearchForm\"/>\n+    <view-map name=\"CreateFlexibleReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#CreateFlexibleReport\"/>\n+    <view-map name=\"DisplayFlexibleReportSearchForm\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#DisplayFlexibleReportSearchForm\"/>\n+    <view-map name=\"ListFlexibleReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#ListFlexibleReport\"/>\n+    <view-map name=\"EditFlexibleReport\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#EditFlexibleReport\"/>\n+    <view-map name=\"PreviewReportSearchForm\" type=\"screen\" page=\"component://birt/widget/birt/BirtScreens.xml#PreviewReportSearchForm\"/>\n+    <view-map name=\"ExecuteFlexibleReport\" type=\"birt\" />\n+    <view-map name=\"ViewBinaryDataResource\" page=\"\" type=\"simplecontent\"/>\n+    \n+    <view-map name=\"LookupProductCategory\" type=\"screen\" page=\"component://product/widget/catalog/LookupScreens.xml#LookupProductCategory\"/>\n+    <view-map name=\"LookupProductStore\" type=\"screen\" page=\"component://product/widget/catalog/LookupScreens.xml#LookupProductStore\"/>\n+</site-conf>",
                "deletions": 178
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "This fixes \n\"Addition of item to shopping list is not working\" https://issues.apache.org/jira/browse/OFBIZ-4903\n\"Problem when saving a product to a shopping list\" https://issues.apache.org/jira/browse/OFBIZ-4589\nI don't pretend it's glorious code. For instance I gave up on trying to have the groovy changes snippets consistent in both components and to reuse the way it's done in party. And the way I secured the indexes remember me when I was hacking in APL. For my defense, it was really a mess... and my time is limited...\nAnyway, at least it fixes all the issues I crossed in shopping list editing in both party and ecommerce components:\n* NPE on sessions ending\n* wrong and failing (NPE in ftl) pagination\n* error on pagination links after adding a product\n\nTested with both 2 and 20 size view on both sides\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1532342 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/e23c626113cdc75273de366afa913a46bd22b8c7",
        "parent": "https://github.com/apache/ofbiz-framework/commit/f32d6715846473558f8906fab00470392fe5cf55",
        "bug_id": "ofbiz-framework_269",
        "file": [
            {
                "sha": "e84a715daa1f291e9e45545d58f479f154c19ff0",
                "filename": "applications/party/webapp/partymgr/WEB-INF/actions/party/EditShoppingList.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e23c626113cdc75273de366afa913a46bd22b8c7/applications/party/webapp/partymgr/WEB-INF/actions/party/EditShoppingList.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e23c626113cdc75273de366afa913a46bd22b8c7/applications/party/webapp/partymgr/WEB-INF/actions/party/EditShoppingList.groovy",
                "status": "modified",
                "changes": 15,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/webapp/partymgr/WEB-INF/actions/party/EditShoppingList.groovy?ref=e23c626113cdc75273de366afa913a46bd22b8c7",
                "patch": "@@ -20,7 +20,9 @@\n import org.ofbiz.entity.util.EntityUtil;\n import org.ofbiz.base.util.UtilHttp;\n import org.ofbiz.product.catalog.CatalogWorker;\n-import org.ofbiz.webapp.website.WebSiteWorker\n+import org.ofbiz.webapp.website.WebSiteWorker;\n+import org.ofbiz.base.util.UtilProperties ;\n+\n \n prodCatalogId = CatalogWorker.getCurrentCatalogId(request);\n webSiteId = WebSiteWorker.getWebSiteId(request);\n@@ -104,16 +106,13 @@ if (shoppingListId) {\n             // pagination for the shopping list\n             viewIndex = Integer.valueOf(parameters.VIEW_INDEX  ?: 0);\n             viewSize = Integer.valueOf(parameters.VIEW_SIZE ?: UtilProperties.getPropertyValue(\"widget\", \"widget.form.defaultViewSize\", \"20\"));\n-            listSize = 0;\n-            if (shoppingListItemDatas)\n-                listSize = shoppingListItemDatas.size();\n+            listSize = shoppingListItemDatas ? shoppingListItemDatas.size() : 0;\n \n-            lowIndex = viewIndex * viewSize;\n+            lowIndex = (viewIndex * viewSize) + 1;\n             highIndex = (viewIndex + 1) * viewSize;\n+            highIndex = highIndex > listSize ? listSize : highIndex;\n+            lowIndex = lowIndex > highIndex ? highIndex : lowIndex; \n \n-            if (highIndex > listSize) {\n-                highIndex = listSize;\n-            }\n             context.viewIndex = viewIndex;\n             context.viewSize = viewSize;\n             context.listSize = listSize;",
                "deletions": 8
            },
            {
                "sha": "8646c9e27e4ce2ddd7da2abaa38ebb27b382152b",
                "filename": "applications/party/webapp/partymgr/party/editShoppingList.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e23c626113cdc75273de366afa913a46bd22b8c7/applications/party/webapp/partymgr/party/editShoppingList.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e23c626113cdc75273de366afa913a46bd22b8c7/applications/party/webapp/partymgr/party/editShoppingList.ftl",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/webapp/partymgr/party/editShoppingList.ftl?ref=e23c626113cdc75273de366afa913a46bd22b8c7",
                "patch": "@@ -196,7 +196,7 @@ under the License.\n           <td>&nbsp;</td>\n         </tr>\n         <#assign alt_row = false>\n-        <#list shoppingListItemDatas[lowIndex..highIndex-1] as shoppingListItemData>\n+        <#list shoppingListItemDatas[lowIndex-1..highIndex-1] as shoppingListItemData>\n           <#assign shoppingListItem = shoppingListItemData.shoppingListItem>\n           <#assign product = shoppingListItemData.product>\n           <#assign productContentWrapper = Static[\"org.ofbiz.product.product.ProductContentWrapper\"].makeProductContentWrapper(product, request)>\n@@ -251,7 +251,7 @@ under the License.\n     <br class=\"clear\"/>\n   </div>\n   <div class=\"screenlet-body\">\n-    <form name=\"addToShoppingList\" method=\"post\" action=\"<@ofbizUrl>addItemToShoppingList<#if requestAttributes._CURRENT_VIEW_?exists>/${requestAttributes._CURRENT_VIEW_}</#if></@ofbizUrl>\">\n+    <form name=\"addToShoppingList\" method=\"post\" action=\"<@ofbizUrl>addItemToShoppingList</@ofbizUrl>\">\n       <input type=\"hidden\" name=\"shoppingListId\" value=\"${shoppingList.shoppingListId}\" />\n       <input type=\"hidden\" name=\"partyId\" value=\"${shoppingList.partyId?if_exists}\" />\n       <input type=\"text\" name=\"productId\" value=\"\" />",
                "deletions": 2
            },
            {
                "sha": "6d54e08fcd96e13d417494e2a63726a7080b0b11",
                "filename": "specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/shoppinglist/EditShoppingList.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e23c626113cdc75273de366afa913a46bd22b8c7/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/shoppinglist/EditShoppingList.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e23c626113cdc75273de366afa913a46bd22b8c7/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/shoppinglist/EditShoppingList.groovy",
                "status": "modified",
                "changes": 22,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/shoppinglist/EditShoppingList.groovy?ref=e23c626113cdc75273de366afa913a46bd22b8c7",
                "patch": "@@ -31,7 +31,13 @@ import org.ofbiz.product.store.*;\n import org.ofbiz.service.calendar.*;\n import org.ofbiz.webapp.website.WebSiteWorker;\n \n-party = userLogin.getRelatedOne(\"Party\", false);\n+if (userLogin) \n+{\n+    party = userLogin.getRelatedOne(\"Party\", false);\n+}  else {\n+    return; // session ended, prevents a NPE\n+}\n+\n \n cart = ShoppingCartEvents.getCartObject(request);\n currencyUomId = cart.getCurrency();\n@@ -140,15 +146,13 @@ if (shoppingListId) {\n             // pagination for the shopping list\n             viewIndex = Integer.valueOf(parameters.VIEW_INDEX  ?: 1);\n             viewSize = Integer.valueOf(parameters.VIEW_SIZE ?: UtilProperties.getPropertyValue(\"widget\", \"widget.form.defaultViewSize\", \"20\"));\n-            listSize = 0;\n-            if (shoppingListItemDatas)\n-                listSize = shoppingListItemDatas.size();\n-            \n-            lowIndex = (((viewIndex - 1) * viewSize) + 1);\n+            listSize = shoppingListItemDatas ? shoppingListItemDatas.size() : 0;\n+\n+            lowIndex = ((viewIndex - 1) * viewSize) + 1;\n             highIndex = viewIndex * viewSize;\n-            if (highIndex > listSize) {\n-                highIndex = listSize;\n-            }\n+            highIndex = highIndex > listSize ? listSize : highIndex;\n+            lowIndex = lowIndex > highIndex ? highIndex : lowIndex; \n+\n             context.viewIndex = viewIndex;\n             context.viewSize = viewSize;\n             context.listSize = listSize;",
                "deletions": 9
            },
            {
                "sha": "9db305fa10774a652be5363bbab34ef7e9b92f31",
                "filename": "specialpurpose/ecommerce/webapp/ecommerce/shoppinglist/editShoppingList.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/e23c626113cdc75273de366afa913a46bd22b8c7/specialpurpose/ecommerce/webapp/ecommerce/shoppinglist/editShoppingList.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/e23c626113cdc75273de366afa913a46bd22b8c7/specialpurpose/ecommerce/webapp/ecommerce/shoppinglist/editShoppingList.ftl",
                "status": "modified",
                "changes": 17,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/ecommerce/webapp/ecommerce/shoppinglist/editShoppingList.ftl?ref=e23c626113cdc75273de366afa913a46bd22b8c7",
                "patch": "@@ -54,17 +54,20 @@ under the License.\n </script>\n <br />\n <#macro paginationControls>\n-    <#assign viewIndexMax = Static[\"java.lang.Math\"].ceil((listSize - 1)?double / viewSize?double)>\n-      <#if (viewIndexMax?int > 0)>\n+    <#assign viewIndexMax = Static[\"java.lang.Math\"].ceil((listSize)?double / viewSize?double)>\n+      <#if (viewIndexMax?int >= 1)>\n         <div class=\"product-prevnext\">\n             <#-- Start Page Select Drop-Down -->\n             <select name=\"pageSelect\" onchange=\"callDocumentByPaginate(this[this.selectedIndex].value);\">\n-                <option value=\"#\">${uiLabelMap.CommonPage} ${viewIndex?int} ${uiLabelMap.CommonOf} ${viewIndexMax + 1}</option>\n-                <#list 0..viewIndexMax as curViewNum>\n-                     <option value=\"${shoppingListId?if_exists}~${viewSize}~${curViewNum?int + 1}\">${uiLabelMap.CommonGotoPage} ${curViewNum + 1}</option>\n-                </#list>\n+                <option value=\"#\">${uiLabelMap.CommonPage} ${viewIndex?int} ${uiLabelMap.CommonOf} ${viewIndexMax}</option>\n+                <#if (viewIndex?int > 1)>\n+                    <#list 0..viewIndexMax as curViewNum>\n+                         <option value=\"${shoppingListId?if_exists}~${viewSize}~${curViewNum?int + 1}\">${uiLabelMap.CommonGotoPage} ${curViewNum + 1}</option>\n+                    </#list>\n+                </#if>\n             </select>\n             <#-- End Page Select Drop-Down -->\n+            \n             <#if (viewIndex?int > 1)>\n                 <a href=\"javascript: void(0);\" onclick=\"callDocumentByPaginate('${shoppingListId?if_exists}~${viewSize}~${viewIndex?int - 1}');\" class=\"buttontext\">${uiLabelMap.CommonPrevious}</a> |\n             </#if>\n@@ -586,7 +589,7 @@ under the License.\n         <div class=\"h3\">${uiLabelMap.CommonQuickAddList}</div>\n     </div>\n     <div class=\"screenlet-body\">\n-        <form name=\"addToShoppingList\" method=\"post\" action=\"<@ofbizUrl>addItemToShoppingList<#if requestAttributes._CURRENT_VIEW_?exists>/${requestAttributes._CURRENT_VIEW_}</#if></@ofbizUrl>\">\n+        <form name=\"addToShoppingList\" method=\"post\" action=\"<@ofbizUrl>addItemToShoppingList</@ofbizUrl>\">\n           <input type=\"hidden\" name=\"shoppingListId\" value=\"${shoppingList.shoppingListId}\"/>\n           <input type=\"text\" class=\"inputBox\" name=\"productId\" value=\"${requestParameters.add_product_id?if_exists}\"/>\n           <#if reservStart?exists></td><td>${uiLabelMap.EcommerceStartDate}</td><td><input type=\"text\" class=\"inputBox\" size=\"10\" name=\"reservStart\" value=\"${requestParameters.reservStart?default(\"\")}\" /></td><td> ${uiLabelMap.EcommerceLength}:</td><td><input type=\"text\" class=\"inputBox\" size=\"2\" name=\"reservLength\" value=\"${requestParameters.reservLength?default(\"\")}\" /></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>${uiLabelMap.OrderNbrPersons}:</td><td><input type=\"text\" class=\"inputBox\" size=\"3\" name=\"reservPersons\" value=\"${requestParameters.reservPersons?default(\"1\")}\" /></td><td nowrap=\"nowrap\"></#if> ${uiLabelMap.CommonQuantity} :</td><td><input type=\"text\" class=\"inputBox\" size=\"5\" name=\"quantity\" value=\"${requestParameters.quantity?default(\"1\")}\" /></td><td>",
                "deletions": 7
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied bug fix from jira issue - OFBIZ-4972 - NumberFormateException while update order items.\nIf order item price or quantity is greater then 999 then update order items service throw NumberFormateException.\nSteps to regenerate:\nCreate an order(SO/PO).\nEdit order items, set order price 1000 and update order items.\nAgain edit order items and try to update price from (1,000 to 1,002).\nSystem will throw NPE and if same will perform for quantity then it will throw NumberFormatException on console.\nThanks Deepak for the contribution. \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1385014 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/bcef92dd9fe180dece67ae0e1489969cfea793e2",
        "parent": "https://github.com/apache/ofbiz-framework/commit/bf3918e95a386d75b6551183dcca40f990afa923",
        "bug_id": "ofbiz-framework_270",
        "file": [
            {
                "sha": "b0295d7674363dcf5f8208b63bfb3d52bf34d9a5",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/bcef92dd9fe180dece67ae0e1489969cfea793e2/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/bcef92dd9fe180dece67ae0e1489969cfea793e2/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "status": "modified",
                "changes": 19,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderServices.java?ref=bcef92dd9fe180dece67ae0e1489969cfea793e2",
                "patch": "@@ -42,6 +42,7 @@\n import org.ofbiz.base.util.Debug;\n import org.ofbiz.base.util.GeneralException;\n import org.ofbiz.base.util.GeneralRuntimeException;\n+import org.ofbiz.base.util.ObjectType;\n import org.ofbiz.base.util.UtilDateTime;\n import org.ofbiz.base.util.UtilFormatOut;\n import org.ofbiz.base.util.UtilGenerics;\n@@ -3639,8 +3640,8 @@ public static String determineSingleFacilityFromOrder(GenericValue orderHeader)\n             String quantityStr = itemQtyMap.get(key);\n             BigDecimal groupQty = BigDecimal.ZERO;\n             try {\n-                groupQty = new BigDecimal(quantityStr);\n-            } catch (NumberFormatException e) {\n+                groupQty = (BigDecimal) ObjectType.simpleTypeConvert(quantityStr, \"BigDecimal\", null, locale);\n+            } catch (GeneralException e) {\n                 Debug.logError(e, module);\n                 return ServiceUtil.returnError(e.getMessage());\n             }\n@@ -3683,8 +3684,14 @@ public static String determineSingleFacilityFromOrder(GenericValue orderHeader)\n                 if (overridePriceMap.containsKey(itemSeqId)) {\n                     String priceStr = itemPriceMap.get(itemSeqId);\n                     if (UtilValidate.isNotEmpty(priceStr)) {\n-                        BigDecimal price = new BigDecimal(\"-1\");\n-                        price = new BigDecimal(priceStr).setScale(orderDecimals, orderRounding);\n+                        BigDecimal price = null;\n+                        try {\n+                            price = (BigDecimal) ObjectType.simpleTypeConvert(priceStr, \"BigDecimal\", null, locale);\n+                        } catch (GeneralException e) {\n+                            Debug.logError(e, module);\n+                            return ServiceUtil.returnError(e.getMessage());\n+                        }\n+                        price = price.setScale(orderDecimals, orderRounding);\n                         cartItem.setBasePrice(price);\n                         cartItem.setIsModifiedPrice(true);\n                         Debug.logInfo(\"Set item price: [\" + itemSeqId + \"] \" + price, module);\n@@ -3748,8 +3755,8 @@ public static String determineSingleFacilityFromOrder(GenericValue orderHeader)\n             String quantityStr = itemQtyMap.get(key);\n             BigDecimal groupQty = BigDecimal.ZERO;\n             try {\n-                groupQty = new BigDecimal(quantityStr);\n-            } catch (NumberFormatException e) {\n+                groupQty = (BigDecimal) ObjectType.simpleTypeConvert(quantityStr, \"BigDecimal\", null, locale);\n+            } catch (GeneralException e) {\n                 Debug.logError(e, module);\n                 return ServiceUtil.returnError(e.getMessage());\n             }",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A slightly modified patch from \tAnil Soni \"In Content Manager's CMS sub-module CMSContentFind page doesn't show the content list.\" (https://issues.apache.org/jira/browse/OFBIZ-2746) - OFBIZ-2746\n\nThis modified patch solves the find issue but not the create. I have simply kept \nif (dataResourceId) {\ninstead of \nif (!dataResourceId) {\nin CmsEditAddPrep.groovy\nbecause it's an obvious error (NPE the line after else). But it does not solve another error.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1060546 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/9aa97b692cdaa289a62ade625ec64dcc9a560c9d",
        "parent": "https://github.com/apache/ofbiz-framework/commit/029c8e0f35c7a205be437a5249ba44d582c9c39f",
        "bug_id": "ofbiz-framework_271",
        "file": [
            {
                "sha": "d478a84309e361daed115d1c1a3371bc622b93c8",
                "filename": "applications/content/webapp/content/WEB-INF/actions/cms/CmsEditAddPrep.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/9aa97b692cdaa289a62ade625ec64dcc9a560c9d/applications/content/webapp/content/WEB-INF/actions/cms/CmsEditAddPrep.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/9aa97b692cdaa289a62ade625ec64dcc9a560c9d/applications/content/webapp/content/WEB-INF/actions/cms/CmsEditAddPrep.groovy",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/webapp/content/WEB-INF/actions/cms/CmsEditAddPrep.groovy?ref=9aa97b692cdaa289a62ade625ec64dcc9a560c9d",
                "patch": "@@ -90,4 +90,4 @@ persistAction = context.persistAction;\n if (!persistAction) {\n     persistAction = \"persistContent\";\n }\n-context.persistAction = persistAction;\n+context.persistAction = persistAction;\n\\ No newline at end of file",
                "deletions": 1
            },
            {
                "sha": "27a22c0accbf9d2a4fc96601f1055c7feabf4fcf",
                "filename": "applications/content/webapp/content/cms/CMSForms.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/9aa97b692cdaa289a62ade625ec64dcc9a560c9d/applications/content/webapp/content/cms/CMSForms.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/9aa97b692cdaa289a62ade625ec64dcc9a560c9d/applications/content/webapp/content/cms/CMSForms.xml",
                "status": "modified",
                "changes": 8,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/content/webapp/content/cms/CMSForms.xml?ref=9aa97b692cdaa289a62ade625ec64dcc9a560c9d",
                "patch": "@@ -32,19 +32,20 @@ under the License.\n         <field name=\"submitButton\" title=\"${uiLabelMap.CommonFind}\" widget-style=\"smallSubmit\"><submit button-type=\"button\"/></field>\n     </form>\n \n-    <form name=\"listFindContent\" type=\"list\" target=\"\" paginate-target=\"/CMSContentFind\" view-size=\"20\"\n+    <form name=\"listFindContent\" type=\"list\" list-name=\"listIt\" target=\"\" paginate-target=\"/CMSContentFind\" view-size=\"20\"\n         odd-row-style=\"alternate-row\" default-table-style=\"basic-table hover-bar\">\n         <actions>\n             <service service-name=\"performFind\" result-map-list=\"listIt\">\n                 <field-map field-name=\"inputFields\" from-field=\"requestParameters\"/>\n                 <field-map field-name=\"entityName\" from-field=\"entityName\"/>\n+                <field-map field-name=\"noConditionFind\" value=\"Y\"/>\n                 <field-map field-name=\"viewIndex\" from-field=\"viewIndex\"/>\n                 <field-map field-name=\"viewSize\" from-field=\"viewSize\"/>\n             </service>\n         </actions>\n \n-        <field name=\"editContent\" title=\"${uiLabelMap.CommonEmptyHeader}\">\n-            <hyperlink also-hidden=\"false\" description=\"${uiLabelMap.CommonEdit}\" target=\"EditAddContent\">\n+        <field name=\"caContentIdTo\" title=\"${uiLabelMap.CommonEmptyHeader}\">\n+            <hyperlink also-hidden=\"false\" description=\"${caContentIdTo}\" target=\"EditAddContent\">\n                 <parameter param-name=\"MASTER_contentId\" from-field=\"contentId\"/>\n                 <parameter param-name=\"MASTER_drDataResourceId\" from-field=\"drDataResourceId\"/>\n                 <parameter param-name=\"MASTER_caContentIdTo\" from-field=\"caContentIdTo\"/>\n@@ -63,7 +64,6 @@ under the License.\n             </hyperlink>\n -->\n         </field>\n-        <field name=\"caContentIdTo\"><display/></field>\n         <field name=\"caMapKey\"><display/></field>\n         <field name=\"caFromDate\" title=\"${uiLabelMap.CommonFromDate}\"><display/></field>\n         <field name=\"contentId\"><display/></field>",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Misc fixes and improvements to the services related to production run creation:\n- better error handling\n- fixes for npe\n- better handling of production runs for products that can be manufactured or purchased: if a manual production run is issued, and we have enough information for the manufacturing process, ignore the supplier product info\n- fix for a complex date related issue happening when a production run for a product with WIP (Work In Process) components was issued: from a requirement: the start date of the requirement could be wrong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@563823 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/789fb40faf18f8f22f291f114f39507693a72222",
        "parent": "https://github.com/apache/ofbiz-framework/commit/501638d2e9884a27989ea48424f93be9f09df5af",
        "bug_id": "ofbiz-framework_272",
        "file": [
            {
                "sha": "098df145d6d28e60943fe58a7a3a218c121b4169",
                "filename": "applications/manufacturing/servicedef/services_production_run.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/789fb40faf18f8f22f291f114f39507693a72222/applications/manufacturing/servicedef/services_production_run.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/789fb40faf18f8f22f291f114f39507693a72222/applications/manufacturing/servicedef/services_production_run.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/servicedef/services_production_run.xml?ref=789fb40faf18f8f22f291f114f39507693a72222",
                "patch": "@@ -50,6 +50,7 @@ under the License.\n         <attribute name=\"workEffortName\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n         <attribute name=\"description\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n         <attribute name=\"productionRunId\" type=\"String\" mode=\"OUT\" optional=\"false\"/>\n+        <attribute name=\"estimatedCompletionDate\" type=\"java.sql.Timestamp\" mode=\"OUT\" optional=\"true\"/>\n     </service>\n     <service name=\"updateProductionRun\" engine=\"java\"\n             location=\"org.ofbiz.manufacturing.jobshopmgt.ProductionRunServices\" invoke=\"updateProductionRun\" auth=\"true\">",
                "deletions": 0
            },
            {
                "sha": "b5825b1afae39c0da77483421b1525988c59f1c5",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/789fb40faf18f8f22f291f114f39507693a72222/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/789fb40faf18f8f22f291f114f39507693a72222/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java",
                "status": "modified",
                "changes": 33,
                "additions": 26,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMNode.java?ref=789fb40faf18f8f22f291f114f39507693a72222",
                "patch": "@@ -499,15 +499,26 @@ public void sumQuantity(HashMap nodes) {\n         }\n     }\n \n-    public String createManufacturingOrder(String facilityId, Date date, String workEffortName, String description, String routingId, String orderId, String orderItemSeqId, String shipmentId, boolean useSubstitute) throws GenericEntityException {\n+    public Map createManufacturingOrder(String facilityId, Date date, String workEffortName, String description, String routingId, String orderId, String orderItemSeqId, String shipmentId, boolean useSubstitute, boolean ignoreSupplierProducts) throws GenericEntityException {\n         String productionRunId = null;\n-        if (isManufactured()) {\n+        Timestamp endDate = null;\n+        if (isManufactured(ignoreSupplierProducts)) {\n             BOMNode oneChildNode = null;\n             ArrayList childProductionRuns = new ArrayList();\n+            Timestamp maxEndDate = null;\n             for (int i = 0; i < childrenNodes.size(); i++) {\n                 oneChildNode = (BOMNode)childrenNodes.get(i);\n                 if (oneChildNode != null) {\n-                    String childProductionRunId = oneChildNode.createManufacturingOrder(facilityId, date, null, null, null, null, null, shipmentId, false);\n+                    Map tmpResult = oneChildNode.createManufacturingOrder(facilityId, date, null, null, null, null, null, shipmentId, false, false);\n+                    String childProductionRunId = (String)tmpResult.get(\"productionRunId\");\n+                    Timestamp childEndDate = (Timestamp)tmpResult.get(\"endDate\");\n+                    if (maxEndDate == null) {\n+                        maxEndDate = childEndDate;\n+                    }\n+                    if (childEndDate != null && maxEndDate.compareTo(childEndDate) < 0) {\n+                        maxEndDate = childEndDate;\n+                    }\n+\n                     if (childProductionRunId != null) {\n                         childProductionRuns.add(childProductionRunId);\n                     }\n@@ -540,12 +551,17 @@ public String createManufacturingOrder(String facilityId, Date date, String work\n             }\n             \n             serviceContext.put(\"pRQuantity\", new Double(getQuantity()));\n-            serviceContext.put(\"startDate\", startDate);\n+            if (UtilValidate.isNotEmpty(maxEndDate)) {\n+                serviceContext.put(\"startDate\", maxEndDate);\n+            } else {\n+                serviceContext.put(\"startDate\", startDate);\n+            }\n             serviceContext.put(\"userLogin\", userLogin);\n             Map resultService = null;\n             try {\n                 resultService = dispatcher.runSync(\"createProductionRun\", serviceContext);\n                 productionRunId = (String)resultService.get(\"productionRunId\");\n+                endDate = (Timestamp)resultService.get(\"estimatedCompletionDate\");\n             } catch (GenericServiceException e) {\n                 Debug.logError(\"Problem calling the createProductionRun service\", module);\n             }\n@@ -562,7 +578,7 @@ public String createManufacturingOrder(String facilityId, Date date, String work\n                 //Debug.logError(e, \"Problem calling the getManufacturingComponents service\", module);\n             }\n         }\n-        return productionRunId;\n+        return UtilMisc.toMap(\"productionRunId\", productionRunId, \"endDate\", endDate);\n     }\n \n     public Timestamp getStartDate(String facilityId, Timestamp requiredBydate, boolean allNodes) {\n@@ -620,15 +636,18 @@ public boolean isWarehouseManaged() {\n         return isWarehouseManaged;\n     }\n \n-    public boolean isManufactured() {\n+    public boolean isManufactured(boolean ignoreSupplierProducts) {\n         List supplierProducts = null;\n         try {\n             supplierProducts = product.getRelated(\"SupplierProduct\", UtilMisc.toMap(\"supplierPrefOrderId\", \"10_MAIN_SUPPL\"), UtilMisc.toList(\"minimumOrderQuantity\"));\n         } catch(GenericEntityException gee) {\n             Debug.logError(\"Problem in BOMNode.isManufactured()\", module);\n         }\n         supplierProducts = EntityUtil.filterByDate(supplierProducts, UtilDateTime.nowTimestamp(), \"availableFromDate\", \"availableThruDate\", true);\n-        return childrenNodes.size() > 0 && UtilValidate.isEmpty(supplierProducts);\n+        return childrenNodes.size() > 0 && (ignoreSupplierProducts || UtilValidate.isEmpty(supplierProducts));\n+    }\n+    public boolean isManufactured() {\n+        return isManufactured(false);\n     }\n     \n     public boolean isVirtual() {",
                "deletions": 7
            },
            {
                "sha": "8a7ad14eb1f48803fcd16011dfd8791fb5ab0b37",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMTree.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/789fb40faf18f8f22f291f114f39507693a72222/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMTree.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/789fb40faf18f8f22f291f114f39507693a72222/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMTree.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/bom/BOMTree.java?ref=789fb40faf18f8f22f291f114f39507693a72222",
                "patch": "@@ -23,6 +23,7 @@\n import java.util.Date;\n import java.util.HashMap;\n import java.util.List;\n+import java.util.Map;\n \n import org.ofbiz.base.util.UtilMisc;\n import org.ofbiz.base.util.UtilValidate;\n@@ -345,7 +346,8 @@ public String createManufacturingOrders(String facilityId, Date date, String wor\n                     facilityId = shipment.getString(\"originFacilityId\");\n                 }\n             }\n-            workEffortId = root.createManufacturingOrder(facilityId, date, workEffortName, description, routingId, orderId, orderItemSeqId, shipmentId, true);\n+            Map tmpMap = root.createManufacturingOrder(facilityId, date, workEffortName, description, routingId, orderId, orderItemSeqId, shipmentId, true, true);\n+            workEffortId = (String)tmpMap.get(\"productionRunId\");\n         }\n         return workEffortId;\n     }",
                "deletions": 1
            },
            {
                "sha": "df71b088b460e2df22cf0d68e8030f9ab4d23524",
                "filename": "applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/789fb40faf18f8f22f291f114f39507693a72222/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/789fb40faf18f8f22f291f114f39507693a72222/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java",
                "status": "modified",
                "changes": 13,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/manufacturing/src/org/ofbiz/manufacturing/jobshopmgt/ProductionRunServices.java?ref=789fb40faf18f8f22f291f114f39507693a72222",
                "patch": "@@ -432,6 +432,7 @@ public static Map createProductionRun(DispatchContext ctx, Map context) {\n             Debug.logError(e, \"Problem calling the updateWorkEffort service\", module);\n         }\n         result.put(\"productionRunId\", productionRunId);\n+        result.put(\"estimatedCompletionDate\", startDate);\n         result.put(ModelService.SUCCESS_MESSAGE, UtilProperties.getMessage(resource, \"ManufacturingProductionRunCreated\",UtilMisc.toMap(\"productionRunId\", productionRunId), locale));\n         return result;\n     }\n@@ -1848,8 +1849,12 @@ public static Map createProductionRunFromRequirement(DispatchContext ctx, Map co\n         try {\n             resultService = dispatcher.runSync(\"createProductionRunsForProductBom\", serviceContext);\n         } catch (GenericServiceException e) {\n-            return ServiceUtil.returnError(UtilProperties.getMessage(resource, \"ManufacturingProductionRunNotCreated\", locale));\n+            return ServiceUtil.returnError(UtilProperties.getMessage(resource, \"ManufacturingProductionRunNotCreated\", locale) + \": \" + e.getMessage());\n+        }\n+        if (ServiceUtil.isError(resultService)) {\n+            return ServiceUtil.returnError(ServiceUtil.getErrorMessage(resultService));\n         }\n+\n         String productionRunId = (String)resultService.get(\"productionRunId\");\n         result.put(\"productionRunId\", productionRunId);\n \n@@ -2149,6 +2154,9 @@ public static Map createProductionRunsForProductBom(DispatchContext dctx, Map co\n         String description = (String)context.get(\"description\");\n         String routingId = (String)context.get(\"routingId\");\n         String workEffortId = null;\n+        if (quantity == null) {\n+            quantity = new Double(1.0);\n+        }\n         try {\n             ArrayList components = new ArrayList();\n             BOMTree tree = new BOMTree(productId, \"MANUF_COMPONENT\", startDate, BOMTree.EXPLOSION_MANUFACTURING, delegator, dispatcher, userLogin);\n@@ -2159,6 +2167,9 @@ public static Map createProductionRunsForProductBom(DispatchContext dctx, Map co\n         } catch(GenericEntityException gee) {\n             return ServiceUtil.returnError(\"Error creating bill of materials tree: \" + gee.getMessage());\n         }\n+        if (workEffortId == null) {\n+            return ServiceUtil.returnError(\"No production run is required for product with id [\" + productId +\"] in date [\" + startDate + \"]; please verify the validity dates of the bill of materials and routing.\");\n+        }\n         ArrayList productionRuns = new ArrayList();\n         result.put(\"productionRuns\" , productionRuns);\n         result.put(\"productionRunId\" , workEffortId);",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Closes \"Login out on a cluster handled by DeltaManager causes a NPE\" https://issues.apache.org/jira/browse/OFBIZ-4289\n\nIt works locally but not on clusters. You simply get a NPE.\n\nProblem\n    When we logout we cross an issue due to Tomcat sessions persistence.\n    Because we set distributable to true, to allow sessions failover,\n    and use and DeltaManager for replication.\n    Delegator and other main Classes (notably Dispatcher) are not serialized in OFBiz. This is the origin of the problem\n\nTried solutions\nBy default DeltaManager save active sessions on disk. It uses a private String variable pathname for that (default to \"SESSIONS.ser\"). You can set it to null, to avoid session persistence, using a context.xml file in the WEB-INF folder with content like below. But I tried it in webtools app on staging qs001 (only) and it did not work (with distributable set to false). And we have no other means to set it from OFBiz (OOTB).\n\n<Context>\n     <Manager className=\"org.apache.catalina.session.DeltatManager\" pathname=\"\">\n     </Manager>\n</Context>\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1132749 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b4d7f50233f7d6644e38121ccf8a6270409d6bd0",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6b422780256f28016b07a672ef01fa034ff4b059",
        "bug_id": "ofbiz-framework_273",
        "file": [
            {
                "sha": "404f3bb2ccae490130febd65232da5860b264758",
                "filename": "framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b4d7f50233f7d6644e38121ccf8a6270409d6bd0/framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b4d7f50233f7d6644e38121ccf8a6270409d6bd0/framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java",
                "status": "modified",
                "changes": 70,
                "additions": 50,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/webapp/src/org/ofbiz/webapp/control/LoginWorker.java?ref=b4d7f50233f7d6644e38121ccf8a6270409d6bd0",
                "patch": "@@ -39,6 +39,8 @@\n import javolution.util.FastMap;\n \n import org.ofbiz.base.component.ComponentConfig;\n+import org.ofbiz.base.container.ContainerConfig;\n+import org.ofbiz.base.container.ContainerException;\n import org.ofbiz.base.util.Debug;\n import org.ofbiz.base.util.GeneralException;\n import org.ofbiz.base.util.KeyStoreUtil;\n@@ -435,7 +437,7 @@ public static String login(HttpServletRequest request, HttpServletResponse respo\n         if (ModelService.RESPOND_SUCCESS.equals(result.get(ModelService.RESPONSE_MESSAGE))) {\n             if (setupNewDelegatorEtc) {\n                 // now set the delegator and dispatcher in a bunch of places just in case they were changed\n-                setWebContextObjects(request, response, delegator, dispatcher);\n+                setWebContextObjects(request, response, delegator, dispatcher, true);\n             }\n             \n             // check to see if a password change is required for the user\n@@ -466,33 +468,46 @@ public static String login(HttpServletRequest request, HttpServletResponse respo\n         }\n     }\n     \n-    private static void setWebContextObjects(HttpServletRequest request, HttpServletResponse response, Delegator delegator, LocalDispatcher dispatcher) {\n+    /*         persistSerialized is set at false in the context of a cluster when using (at least) DeltaManager. \n+            Because we have no easy ways to set DeltaManager.pathname to null from OFBiz\n+           So persistSerialized is set to true when login out. This prevent a NPE due to non serialized objects put in session*/\n+    private static void setWebContextObjects(HttpServletRequest request, HttpServletResponse response, Delegator delegator, LocalDispatcher dispatcher, Boolean persistSerialized) {\n         HttpSession session = request.getSession();\n         \n         // NOTE: we do NOT want to set this in the servletContet, only in the request and session\n         session.setAttribute(\"delegatorName\", delegator.getDelegatorName());\n         \n         request.setAttribute(\"delegator\", delegator);\n-        session.setAttribute(\"delegator\", delegator);\n+        if (!persistSerialized) {\n+            session.setAttribute(\"delegator\", null);\n+        } else {\n+            session.setAttribute(\"delegator\", delegator);\n+        }\n         \n         request.setAttribute(\"dispatcher\", dispatcher);\n-        session.setAttribute(\"dispatcher\", dispatcher);\n-        \n-        // we also need to setup the security and authz objects since they are dependent on the delegator\n-        try {\n-            Security security = SecurityFactory.getInstance(delegator);\n-            request.setAttribute(\"security\", security);\n-            session.setAttribute(\"security\", security);\n-        } catch (SecurityConfigurationException e) {\n-            Debug.logError(e, module);\n+        if (!persistSerialized) {\n+            session.setAttribute(\"dispatcher\", null);\n+        } else {\n+            session.setAttribute(\"dispatcher\", dispatcher);\n         }\n         \n-        try {\n-            Authorization authz = AuthorizationFactory.getInstance(delegator);\n-            request.setAttribute(\"authz\", authz);\n-            session.setAttribute(\"authz\", authz);\n-        } catch (SecurityConfigurationException e) {\n-            Debug.logError(e, module);\n+        if (persistSerialized) {\n+            // we also need to setup the security and authz objects since they are dependent on the delegator\n+            try {\n+                Security security = SecurityFactory.getInstance(delegator);\n+                request.setAttribute(\"security\", security);\n+                session.setAttribute(\"security\", security);\n+            } catch (SecurityConfigurationException e) {\n+                Debug.logError(e, module);\n+            }\n+            \n+            try {\n+                Authorization authz = AuthorizationFactory.getInstance(delegator);\n+                request.setAttribute(\"authz\", authz);\n+                session.setAttribute(\"authz\", authz);\n+            } catch (SecurityConfigurationException e) {\n+                Debug.logError(e, module);\n+            }\n         }\n         \n         // get rid of the visit info since it was pointing to the previous database, and get a new one\n@@ -628,7 +643,22 @@ public static void doBasicLogout(GenericValue userLogin, HttpServletRequest requ\n \n             delegator = DelegatorFactory.getDelegator(delegatorName);\n             LocalDispatcher dispatcher = ContextFilter.makeWebappDispatcher(session.getServletContext(), delegator);\n-            setWebContextObjects(request, response, delegator, dispatcher);\n+            // get the container configuration           \n+            String ofbizHome = System.getProperty(\"ofbiz.home\");\n+            String configFile = ofbizHome + \"/framework/base/config/ofbiz-containers.xml\";\n+            ContainerConfig.Container cc = null;\n+            String mgrClassName = null;\n+            try {\n+                cc = ContainerConfig.getContainer(\"catalina-container\", configFile);\n+                mgrClassName = ContainerConfig.getPropertyValue(cc, \"manager-class\", \"org.apache.catalina.ha.session.DeltaManager\");\n+            } catch (ContainerException e) {\n+                Debug.logError(e, \"No catalina-container configuration found in container config!\");\n+            }\n+            if (\"org.apache.catalina.ha.session.DeltaManager\".equals(mgrClassName)) {\n+                setWebContextObjects(request, response, delegator, dispatcher, false);\n+            } else {\n+                setWebContextObjects(request, response, delegator, dispatcher, true);\n+            }\n         }\n         \n         // DON'T save the cart, causes too many problems: if (shoppingCart != null) session.setAttribute(\"shoppingCart\", new WebShoppingCart(shoppingCart, session));\n@@ -942,7 +972,7 @@ public static String checkExternalLoginKey(HttpServletRequest request, HttpServl\n             if (!oldDelegatorName.equals(userLogin.getDelegator().getDelegatorName())) {\n                 delegator = DelegatorFactory.getDelegator(userLogin.getDelegator().getDelegatorName());\n                 dispatcher = ContextFilter.makeWebappDispatcher(servletContext, delegator);\n-                setWebContextObjects(request, response, delegator, dispatcher);\n+                setWebContextObjects(request, response, delegator, dispatcher, true);\n             }\n             // found userLogin, do the external login...\n ",
                "deletions": 20
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fix a bug reported by Rong Nguyen \"Tracking code report in Marketing doesn't work\" https://issues.apache.org/jira/browse/OFBIZ-5556\n\nI did not use Rong's proposed patch\nThe problem was simple and due to an error I made in r703816. \nI then replaced\n-if (trackingCodeIdStr && !(trackingCodeIdStr.equals(\"\"))) {\nby\n+if (trackingCodeIdSt) {\nwhich was wrong\nThen trying to fix an error reported somewhere (not mentioned) Hans went in a wrong direction with r761539+761541\n\nSo I reverted r761539+761541 and fixed the issue above in a clean way by setting the field in the calling screen. This way there are no possible issues with i10n and NPEs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1576378 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/4ef7b01b567fe2173fbb05f25e3a13625ddef2ed",
        "parent": "https://github.com/apache/ofbiz-framework/commit/e762ad9e0e0ec1d895109847302219403877f7a3",
        "bug_id": "ofbiz-framework_274",
        "file": [
            {
                "sha": "a1cdd27a4c0d2549c4480bef4cad161da7c5ca44",
                "filename": "applications/marketing/webapp/marketing/WEB-INF/actions/reports/TrackingCodeReport.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/4ef7b01b567fe2173fbb05f25e3a13625ddef2ed/applications/marketing/webapp/marketing/WEB-INF/actions/reports/TrackingCodeReport.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/4ef7b01b567fe2173fbb05f25e3a13625ddef2ed/applications/marketing/webapp/marketing/WEB-INF/actions/reports/TrackingCodeReport.groovy",
                "status": "modified",
                "changes": 19,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/marketing/webapp/marketing/WEB-INF/actions/reports/TrackingCodeReport.groovy?ref=4ef7b01b567fe2173fbb05f25e3a13625ddef2ed",
                "patch": "@@ -24,23 +24,22 @@ import org.ofbiz.entity.condition.EntityCondition\n import org.ofbiz.entity.condition.EntityConditionList\n import org.ofbiz.marketing.report.ReportHelper\n \n-trackingCodeIdStr = request.getParameter(\"trackingCodeId\");\n // query for both number of visits and number of orders\n \n visitConditionList = [] as LinkedList;\n orderConditionList = [] as LinkedList;\n \n-if (parameters.fromDate) {\n-    visitConditionList.add(EntityCondition.makeCondition(\"fromDate\", EntityOperator.GREATER_THAN_EQUAL_TO, parameters.fromDate));\n-    orderConditionList.add(EntityCondition.makeCondition(\"orderDate\", EntityOperator.GREATER_THAN_EQUAL_TO, parameters.fromDate));\n+if (fromDate) {\n+    visitConditionList.add(EntityCondition.makeCondition(\"fromDate\", EntityOperator.GREATER_THAN_EQUAL_TO, fromDate));\n+    orderConditionList.add(EntityCondition.makeCondition(\"orderDate\", EntityOperator.GREATER_THAN_EQUAL_TO, fromDate));\n }\n-if (parameters.thruDate) {\n-     visitConditionList.add(EntityCondition.makeCondition(\"fromDate\", EntityOperator.LESS_THAN_EQUAL_TO, parameters.thruDate));\n-     orderConditionList.add(EntityCondition.makeCondition(\"orderDate\", EntityOperator.LESS_THAN_EQUAL_TO, parameters.thruDate));\n+if (thruDate) {\n+     visitConditionList.add(EntityCondition.makeCondition(\"fromDate\", EntityOperator.LESS_THAN_EQUAL_TO, thruDate));\n+     orderConditionList.add(EntityCondition.makeCondition(\"orderDate\", EntityOperator.LESS_THAN_EQUAL_TO, thruDate));\n }\n-if (parameters.trackingCodeId) {\n-     visitConditionList.add(EntityCondition.makeCondition(\"trackingCodeId\", EntityOperator.EQUALS, parameters.trackingCodeId));\n-     orderConditionList.add(EntityCondition.makeCondition(\"trackingCodeId\", EntityOperator.EQUALS, parameters.trackingCodeId));\n+if (trackingCodeId) {\n+     visitConditionList.add(EntityCondition.makeCondition(\"trackingCodeId\", EntityOperator.EQUALS, trackingCodeId));\n+     orderConditionList.add(EntityCondition.makeCondition(\"trackingCodeId\", EntityOperator.EQUALS, trackingCodeId));\n }\n \n visitConditions = EntityCondition.makeCondition(visitConditionList, EntityOperator.AND);",
                "deletions": 10
            },
            {
                "sha": "ce761af1d29bbafd4200465507dbe4cc513ee8a7",
                "filename": "applications/marketing/widget/MarketingReportScreens.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/4ef7b01b567fe2173fbb05f25e3a13625ddef2ed/applications/marketing/widget/MarketingReportScreens.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/4ef7b01b567fe2173fbb05f25e3a13625ddef2ed/applications/marketing/widget/MarketingReportScreens.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/marketing/widget/MarketingReportScreens.xml?ref=4ef7b01b567fe2173fbb05f25e3a13625ddef2ed",
                "patch": "@@ -86,6 +86,7 @@ under the License.\n                 <property-map resource=\"CommonUiLabels\" map-name=\"uiLabelMap\" global=\"true\"/>\n                 <set field=\"fromDate\" from-field=\"requestParameters.fromDate\" type=\"Timestamp\"/>\n                 <set field=\"thruDate\" from-field=\"requestParameters.thruDate\" type=\"Timestamp\"/>\n+                <set field=\"trackingCodeId\" from-field=\"requestParameters.trackingCodeId\"/>\n                 <script location=\"component://marketing/webapp/marketing/WEB-INF/actions/reports/TrackingCodeReport.groovy\"/>\n             </actions>\n             <widgets>",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "\"Login out on a cluster handled by DeltaManager causes a NPE\" https://issues.apache.org/jira/browse/OFBIZ-4289\n\nUses a HashMap instead of a FastMap here because else we get this kind of error when OFBiz is shut down:\n\n2012-06-12 10:35:29,921 (OFBiz_Shutdown_Hook) [ StandardSession.java:1567:WARN ] Cannot serialize session attribute LAST_VIEW_PARAMS for session 00C48D0D76821C98403482FAE8B77C24.jvm1\njava.io.NotSerializableException: net.sf.json.JSONObject\nat java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)\nat java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)\nat javolution.util.FastMap.writeObject(FastMap.java:1513)\n\nNote: to test the above you need to set apps-distributable to true and put some <distributable/> in the web.xml files of the applications to test\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1355660 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/8266a36101f0386aba28ee5b5c4f2b22ac36e0a0",
        "parent": "https://github.com/apache/ofbiz-framework/commit/c386b7fc9a8d61923efb9bbd2e472d1cac3d8a6f",
        "bug_id": "ofbiz-framework_275",
        "file": [
            {
                "sha": "5a50d497fb3f0bb16342c49f559f38b76c518f72",
                "filename": "framework/base/src/org/ofbiz/base/util/UtilHttp.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/8266a36101f0386aba28ee5b5c4f2b22ac36e0a0/framework/base/src/org/ofbiz/base/util/UtilHttp.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/8266a36101f0386aba28ee5b5c4f2b22ac36e0a0/framework/base/src/org/ofbiz/base/util/UtilHttp.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/base/src/org/ofbiz/base/util/UtilHttp.java?ref=8266a36101f0386aba28ee5b5c4f2b22ac36e0a0",
                "patch": "@@ -113,7 +113,7 @@\n      */\n     public static Map<String, Object> getParameterMap(HttpServletRequest request, Set<? extends String> nameSet, Boolean onlyIncludeOrSkip) {\n         boolean onlyIncludeOrSkipPrim = onlyIncludeOrSkip == null ? true : onlyIncludeOrSkip.booleanValue();\n-        Map<String, Object> paramMap = FastMap.newInstance();\n+        Map<String, Object> paramMap = new HashMap<String, Object>();\n \n         // add all the actual HTTP request parameters\n         Enumeration<String> e = UtilGenerics.cast(request.getParameterNames());",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Completing purchase orders:\n- Link from ReceiveInventoryAgainstPurchaseOrder and orderview (for approved purchase orders) screens calls completePurchaseOrder service group\n- Unreceived order item quantities are cancelled and product requirements generated for those quantities\n- Order item status set to completed (or cancelled, if total quantity was cancelled)\n- checkOrderItemStatus service is called to make sure that the order status correctly reflects the item statuses\n\nSmall fixes to ReceiveInventoryAgainstPurchaseOrder screen:\n- Adding a UPCA column\n- Cancelled quantity in a separate column\n- Using orderItem to calculate quantities instead of orderItemAndShipGroupAssoc, since the latter can have its quantity figure manipulated in some cases\n- Formatting fixes and fix to possible NPE when an orderId is not passed\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@520120 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
        "parent": "https://github.com/apache/ofbiz-framework/commit/222f72e2fd4e62d7a57a82deeb2a394cc3816953",
        "bug_id": "ofbiz-framework_276",
        "file": [
            {
                "sha": "72a40ff9c78726a3a44af831aff9966907f7adfc",
                "filename": "applications/order/config/OrderErrorUiLabels.properties",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/config/OrderErrorUiLabels.properties",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/config/OrderErrorUiLabels.properties",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/config/OrderErrorUiLabels.properties?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -104,6 +104,8 @@ OrderErrorNoOrderItemsFound=ERROR : No order items found.\n OrderErrorNoValidOrderHeaderFoundForOrderId=ERROR : No valid order header found for orderId : ${orderId}\n OrderErrorOrderItemAndOrOrderHeaderDontExist=ERROR : OrderItem and/or OrderHeader don't exist\n OrderErrorOrderItemCantBeModified=ERROR : OrderItem can't be modified\n+OrderErrorOrderIdNotFound=ERROR: Order with ID [${orderId}] not found\n+OrderErrorOrderNotPurchaseOrder=Order ${orderId} is not a Purchase Order\n OrderErrorOrderTypeLookupFailed=ERROR : OrderType lookup failed : \n OrderErrorProcessingOfflinePayments=<li>Error processing offline payments. \n OrderErrorTheProductStoreIdCanOnlyBeNullForPurchaseOrders=ERROR: The productStoreId can only be null for purchase orders",
                "deletions": 0
            },
            {
                "sha": "8ebad7c0c84f8da1ccf5ca0639f24f1a2f4f7c3e",
                "filename": "applications/order/config/OrderUiLabels.properties",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/config/OrderUiLabels.properties",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/config/OrderUiLabels.properties",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/config/OrderUiLabels.properties?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -215,6 +215,7 @@ OrderFindRequests=Find Requests\n OrderFindRequirements=Find Requirements\n OrderFindRequirementsForSupplier=Find Requirements For Supplier\n OrderFindReturn=Find Returns\n+OrderForceCompletePurchaseOrder=Force Complete Purchase Order\n OrderGift=Gift?\n OrderGiftCard=Gift Card\n OrderGiftMessage=Gift Message",
                "deletions": 0
            },
            {
                "sha": "c13de612f13b302029d7561af2d015ca8c48d23b",
                "filename": "applications/order/servicedef/services.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/servicedef/services.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/servicedef/services.xml",
                "status": "modified",
                "changes": 23,
                "additions": 23,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/servicedef/services.xml?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -600,4 +600,27 @@ under the License.\n         <attribute type=\"String\" mode=\"OUT\" name=\"orderPaymentPreferenceId\"/>\n     </service>\n     \n+    <service name=\"completePurchaseOrder\" engine=\"group\" auth=\"true\">\n+        <description>Completes a purchase order by cancelling remaining (unreceived) item quantities and generating new product requirements\n+            from those quantities</description>\n+        <group>\n+            <invoke name=\"cancelRemainingPurchaseOrderItems\" result-to-context=\"true\"/>\n+            <invoke name=\"generateReqsFromCancelledPOItems\" result-to-context=\"true\"/>\n+            <invoke name=\"checkOrderItemStatus\" result-to-context=\"true\"/>\n+        </group>\n+    </service>\n+\n+    <service name=\"cancelRemainingPurchaseOrderItems\" engine=\"java\"\n+            location=\"org.ofbiz.order.order.OrderServices\" invoke=\"cancelRemainingPurchaseOrderItems\" auth=\"true\">\n+        <description>Cancels remaining (unreceived) quantities for items of an order. Does not consider received-but-rejected quantities.</description>\n+        <attribute name=\"orderId\" type=\"String\" mode=\"IN\" optional=\"false\"/>\n+    </service>\n+\n+    <service name=\"generateReqsFromCancelledPOItems\" engine=\"java\"\n+            location=\"org.ofbiz.order.order.OrderServices\" invoke=\"generateReqsFromCancelledPOItems\" auth=\"true\">\n+        <description>Generates a product requirement for the total cancelled quantity over all order items for each product</description>\n+        <attribute name=\"orderId\" type=\"String\" mode=\"IN\" optional=\"false\"/>\n+        <attribute name=\"facilityId\" type=\"String\" mode=\"IN\" optional=\"false\"/>\n+    </service>\n+\n </services>",
                "deletions": 0
            },
            {
                "sha": "4ec8c438155b74306a614a9fef5bbb5811298008",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/src/org/ofbiz/order/order/OrderServices.java",
                "status": "modified",
                "changes": 155,
                "additions": 155,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderServices.java?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -3762,4 +3762,159 @@ public static Map updateOrderPaymentPreference(DispatchContext dctx, Map context\n         }\n     }\n \n+    /**\n+     * Generates a product requirement for the total cancelled quantity over all order items for each product\n+     * @param dctx\n+     * @param context\n+     * @return\n+     */\n+    public static Map generateReqsFromCancelledPOItems(DispatchContext dctx, Map context) {\n+        GenericDelegator delegator = dctx.getDelegator();\n+        LocalDispatcher dispatcher = dctx.getDispatcher();\n+        GenericValue userLogin = (GenericValue) context.get(\"userLogin\");\n+        Locale locale = (Locale) context.get(\"locale\");\n+        \n+        String orderId = (String) context.get(\"orderId\");\n+        String facilityId = (String) context.get(\"facilityId\");\n+\n+        try {\n+\n+            GenericValue orderHeader = delegator.findByPrimaryKey(\"OrderHeader\", UtilMisc.toMap(\"orderId\", orderId));\n+            \n+            if (UtilValidate.isEmpty(orderHeader)) {\n+                String errorMessage = UtilProperties.getMessage(resource_error, \"OrderErrorOrderIdNotFound\", UtilMisc.toMap(\"orderId\", orderId), locale);\n+                Debug.logError(errorMessage, module);\n+                return ServiceUtil.returnError(errorMessage);\n+            }\n+            \n+            if (! \"PURCHASE_ORDER\".equals(orderHeader.getString(\"orderTypeId\"))) {\n+                String errorMessage = UtilProperties.getMessage(resource_error, \"ProductErrorOrderNotPurchaseOrder\", UtilMisc.toMap(\"orderId\", orderId), locale);\n+                Debug.logError(errorMessage, module);\n+                return ServiceUtil.returnError(errorMessage);\n+            }\n+            \n+            // Build a map of productId -> quantity cancelled over all order items\n+            Map productRequirementQuantities = new HashMap();\n+            List orderItems = orderHeader.getRelated(\"OrderItem\");\n+            Iterator oiit = orderItems.iterator();\n+            while (oiit.hasNext()) {\n+                GenericValue orderItem = (GenericValue) oiit.next();\n+                if (! \"PRODUCT_ORDER_ITEM\".equals(orderItem.getString(\"orderItemTypeId\"))) continue;\n+                \n+                // Get the cancelled quantity for the item\n+                double orderItemCancelQuantity = 0;\n+                if (! UtilValidate.isEmpty(orderItem.get(\"cancelQuantity\")) ) {\n+                    orderItemCancelQuantity = orderItem.getDouble(\"cancelQuantity\").doubleValue();\n+                }\n+\n+                if (orderItemCancelQuantity <= 0) continue;\n+                \n+                String productId = orderItem.getString(\"productId\");\n+                if (productRequirementQuantities.containsKey(productId)) {\n+                    orderItemCancelQuantity += ((Double) productRequirementQuantities.get(productId)).doubleValue(); \n+                }\n+                productRequirementQuantities.put(productId, new Double(orderItemCancelQuantity));\n+                \n+            }\n+\n+            // Generate requirements for each of the product quantities\n+            Iterator cqit = productRequirementQuantities.keySet().iterator();\n+            while (cqit.hasNext()) {\n+                String productId = (String) cqit.next();\n+                Double requiredQuantity = (Double) productRequirementQuantities.get(productId);\n+                Map createRequirementResult = dispatcher.runSync(\"createRequirement\", UtilMisc.toMap(\"requirementTypeId\", \"PRODUCT_REQUIREMENT\", \"facilityId\", facilityId, \"productId\", productId, \"quantity\", requiredQuantity, \"userLogin\", userLogin));\n+                if (ServiceUtil.isError(createRequirementResult)) return createRequirementResult;                \n+            }\n+            \n+        } catch (GenericEntityException e) {\n+            Debug.logError(e, module);\n+            return ServiceUtil.returnError(e.getMessage());\n+        } catch (GenericServiceException se) {\n+            Debug.logError(se, module);\n+            return ServiceUtil.returnError(se.getMessage());\n+        }\n+\n+        return ServiceUtil.returnSuccess();\n+    }\n+\n+    /**\n+     * Cancels remaining (unreceived) quantities for items of an order. Does not consider received-but-rejected quantities.\n+     * @param dctx\n+     * @param context\n+     * @return\n+     */\n+    public static Map cancelRemainingPurchaseOrderItems(DispatchContext dctx, Map context) {\n+        GenericDelegator delegator = dctx.getDelegator();\n+        LocalDispatcher dispatcher = dctx.getDispatcher();\n+        GenericValue userLogin = (GenericValue) context.get(\"userLogin\");\n+        Locale locale = (Locale) context.get(\"locale\");\n+        \n+        String orderId = (String) context.get(\"orderId\");\n+\n+        try {\n+\n+            GenericValue orderHeader = delegator.findByPrimaryKey(\"OrderHeader\", UtilMisc.toMap(\"orderId\", orderId));\n+            \n+            if (UtilValidate.isEmpty(orderHeader)) {\n+                String errorMessage = UtilProperties.getMessage(resource_error, \"OrderErrorOrderIdNotFound\", UtilMisc.toMap(\"orderId\", orderId), locale);\n+                Debug.logError(errorMessage, module);\n+                return ServiceUtil.returnError(errorMessage);\n+            }\n+            \n+            if (! \"PURCHASE_ORDER\".equals(orderHeader.getString(\"orderTypeId\"))) {\n+                String errorMessage = UtilProperties.getMessage(resource_error, \"OrderErrorOrderNotPurchaseOrder\", UtilMisc.toMap(\"orderId\", orderId), locale);\n+                Debug.logError(errorMessage, module);\n+                return ServiceUtil.returnError(errorMessage);\n+            }\n+            \n+            List orderItems = orderHeader.getRelated(\"OrderItem\");\n+            Iterator oiit = orderItems.iterator();\n+            while (oiit.hasNext()) {\n+                GenericValue orderItem = (GenericValue) oiit.next();\n+                if (! \"PRODUCT_ORDER_ITEM\".equals(orderItem.getString(\"orderItemTypeId\"))) continue;\n+                \n+                // Get the ordered quantity for the item\n+                double orderItemQuantity = 0;\n+                if (! UtilValidate.isEmpty(orderItem.get(\"quantity\"))) {\n+                    orderItemQuantity = orderItem.getDouble(\"quantity\").doubleValue();\n+                }\n+                double orderItemCancelQuantity = 0;\n+                if (! UtilValidate.isEmpty(orderItem.get(\"cancelQuantity\")) ) {\n+                    orderItemCancelQuantity = orderItem.getDouble(\"cancelQuantity\").doubleValue();\n+                }\n+\n+                // Get the received quantity for the order item - ignore the quantityRejected, since rejected items should be reordered\n+                List shipmentReceipts = orderItem.getRelated(\"ShipmentReceipt\");\n+                double receivedQuantity = 0;\n+                Iterator srit = shipmentReceipts.iterator();\n+                while (srit.hasNext()) {\n+                    GenericValue shipmentReceipt = (GenericValue) srit.next();\n+                    if (! UtilValidate.isEmpty(shipmentReceipt.get(\"quantityAccepted\")) ) {\n+                        receivedQuantity += shipmentReceipt.getDouble(\"quantityAccepted\").doubleValue();\n+                    }\n+                }\n+                \n+                double quantityToCancel = orderItemQuantity - orderItemCancelQuantity - receivedQuantity;\n+                if (quantityToCancel <= 0) continue;\n+                \n+                Map cancelOrderItemResult = dispatcher.runSync(\"cancelOrderItem\", UtilMisc.toMap(\"orderId\", orderId, \"orderItemSeqId\", orderItem.get(\"orderItemSeqId\"), \"cancelQuantity\", new Double(quantityToCancel), \"userLogin\", userLogin));\n+                if (ServiceUtil.isError(cancelOrderItemResult)) return cancelOrderItemResult;       \n+                \n+                orderItem.refresh();\n+                if (\"ITEM_APPROVED\".equals(orderItem.getString(\"statusId\"))) {\n+                    Map changeOrderItemStatusResult = dispatcher.runSync(\"changeOrderItemStatus\", UtilMisc.toMap(\"orderId\", orderId, \"orderItemSeqId\", orderItem.get(\"orderItemSeqId\"), \"statusId\", \"ITEM_COMPLETED\", \"userLogin\", userLogin));\n+                    if (ServiceUtil.isError(changeOrderItemStatusResult)) return changeOrderItemStatusResult;       \n+                }\n+            }\n+\n+        } catch (GenericEntityException e) {\n+            Debug.logError(e, module);\n+            return ServiceUtil.returnError(e.getMessage());\n+        } catch (GenericServiceException se) {\n+            Debug.logError(se, module);\n+            return ServiceUtil.returnError(se.getMessage());\n+        }\n+\n+        return ServiceUtil.returnSuccess();\n+    }\n }",
                "deletions": 0
            },
            {
                "sha": "13ede6fb1c7f0d0a5b22c909bd3c26d8a213f22d",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/controller.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/webapp/ordermgr/WEB-INF/controller.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/webapp/ordermgr/WEB-INF/controller.xml",
                "status": "modified",
                "changes": 6,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/controller.xml?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -283,6 +283,12 @@ under the License.\n         <response name=\"success\" type=\"request-redirect\" value=\"orderview\"/>\n         <response name=\"error\" type=\"request-redirect\" value=\"orderview\"/>\n     </request-map>\n+    <request-map uri=\"completePurchaseOrder\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <event type=\"service\" path=\"\" invoke=\"completePurchaseOrder\"/>\n+        <response name=\"success\" type=\"view\" value=\"orderview\"/>\n+        <response name=\"error\" type=\"view\" value=\"orderview\"/>\n+    </request-map>\n     <request-map uri=\"editOrderItems\">\n         <security https=\"true\" auth=\"true\"/>\n         <response name=\"success\" type=\"view\" value=\"editorderitems\"/>",
                "deletions": 0
            },
            {
                "sha": "d304e7b2b1b141cfc3ec407c58f6a9daf9d299a3",
                "filename": "applications/order/webapp/ordermgr/order/ordershippinginfo.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/webapp/ordermgr/order/ordershippinginfo.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/order/webapp/ordermgr/order/ordershippinginfo.ftl",
                "status": "modified",
                "changes": 11,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/order/ordershippinginfo.ftl?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -296,6 +296,17 @@ under the License.\n                    </select>\n                    <input type=\"submit\" class=\"smallSubmit\" value=\"${uiLabelMap.OrderQuickReceivePurchaseOrder}\"/>\n                  </form>\n+                 <#if orderHeader.statusId != \"ORDER_COMPLETED\">\n+                   <form action=\"<@ofbizUrl>completePurchaseOrder?externalLoginKey=${externalLoginKey}</@ofbizUrl>\" method=\"POST\">\n+                     <input type=\"hidden\" name=\"orderId\" value=\"${orderId}\"/>\n+                     <select name=\"facilityId\" class=\"selectBox\">\n+                       <#list facilities as facility>\n+                         <option value=\"${facility.facilityId}\">${facility.facilityName}</option>\n+                       </#list>\n+                     </select>\n+                     <input type=\"submit\" class=\"smallSubmit\" value=\"${uiLabelMap.OrderForceCompletePurchaseOrder}\"/>\n+                   </form>\n+                 </#if>\n                  </#if>\n                </#if>\n              </div>",
                "deletions": 0
            },
            {
                "sha": "24dc79a70db29fc05cd74dd5cd97faf0a81f12af",
                "filename": "applications/product/webapp/facility/WEB-INF/actions/shipment/ReceiveInventoryAgainstPurchaseOrder.bsh",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/product/webapp/facility/WEB-INF/actions/shipment/ReceiveInventoryAgainstPurchaseOrder.bsh",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/product/webapp/facility/WEB-INF/actions/shipment/ReceiveInventoryAgainstPurchaseOrder.bsh",
                "status": "modified",
                "changes": 18,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/WEB-INF/actions/shipment/ReceiveInventoryAgainstPurchaseOrder.bsh?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -28,7 +28,6 @@ shipmentId = request.getParameter(\"shipmentId\");\n orderId = request.getParameter(\"purchaseOrderId\");\n shipGroupSeqId = request.getParameter(\"shipGroupSeqId\");\n context.put(\"shipmentId\", shipmentId);\n-context.put(\"orderId\", orderId);\n context.put(\"shipGroupSeqId\", shipGroupSeqId);\n \n // Retrieve the map resident in session which stores order item quantities to receive\n@@ -69,6 +68,7 @@ if (UtilValidate.isEmpty(orderId)) {\n if (UtilValidate.isEmpty(shipGroupSeqId)) {\n     shipGroupSeqId = shipment.get(\"primaryShipGroupSeqId\");\n }\n+context.put(\"orderId\", orderId);\n \n if (UtilValidate.isEmpty(orderId)) {\n     return;\n@@ -120,20 +120,23 @@ orderItemIter = orderItems.iterator();\n while (orderItemIter.hasNext()) {\n     orderItemAndShipGroupAssoc = orderItemIter.next();\n     product = orderItemAndShipGroupAssoc.getRelatedOne(\"Product\");\n+    \n+    // Get the order item, since the orderItemAndShipGroupAssoc's quantity field is manipulated in some cases\n+    orderItem = delegator.findByPrimaryKey(\"OrderItem\", UtilMisc.toMap(\"orderId\", orderId, \"orderItemSeqId\", orderItemAndShipGroupAssoc.get(\"orderItemSeqId\")));\n     orderItemData = new HashMap();\n \n     // Get the item's ordered quantity\n     totalOrdered = 0;\n-    ordered = orderItemAndShipGroupAssoc.getDouble(\"quantity\");\n+    ordered = orderItem.getDouble(\"quantity\");\n     if (ordered != null)\n         totalOrdered += ordered.doubleValue();\n-    cancelled = orderItemAndShipGroupAssoc.getDouble(\"cancelQuantity\");\n+    cancelled = orderItem.getDouble(\"cancelQuantity\");\n     if (cancelled != null)\n         totalOrdered -= cancelled.doubleValue();\n \n     // Get the item quantity received from all shipments via the ShipmentReciept entity\n     totalReceived = 0.0;\n-    receipts = delegator.findByAnd(\"ShipmentReceipt\", UtilMisc.toMap(\"orderId\", orderId, \"orderItemSeqId\", orderItemAndShipGroupAssoc.get(\"orderItemSeqId\")));\n+    receipts = delegator.findByAnd(\"ShipmentReceipt\", UtilMisc.toMap(\"orderId\", orderId, \"orderItemSeqId\", orderItem.get(\"orderItemSeqId\")));\n     if (receipts != null && receipts.size() > 0) {\n         recIter = receipts.iterator();\n         while (recIter.hasNext()) {\n@@ -152,7 +155,7 @@ while (orderItemIter.hasNext()) {\n         if (! UtilValidate.isEmpty(product)) {\n             result = dispatcher.runSync(\"getProductCost\", UtilMisc.toMap(\"productId\", product.get(\"productId\"), \"currencyUomId\", baseCurrencyUomId, \"costComponentTypePrefix\", \"EST_STD\", \"userLogin\", request.getAttribute(\"userLogin\")));\n             if (!ServiceUtil.isError(result)) {\n-                orderItemAndShipGroupAssoc.put(\"unitPrice\", result.get(\"productCost\"));\n+                orderItem.put(\"unitPrice\", result.get(\"productCost\"));\n             }\n         }\n     }\n@@ -174,9 +177,10 @@ while (orderItemIter.hasNext()) {\n     totalAvailableToReceive += availableToReceive;\n     orderItemData.put(\"availableToReceive\", availableToReceive);\n     orderItemData.put(\"totalQuantityReceived\", totalReceived);\n-    orderItemData.put(\"orderItemAndShipGroupAssoc\", orderItemAndShipGroupAssoc);\n+    orderItemData.put(\"shipGroupSeqId\", orderItemAndShipGroupAssoc.get(\"shipGroupSeqId\"));\n+    orderItemData.put(\"orderItem\", orderItem);\n     orderItemData.put(\"product\", product);\n-    orderItemDatas.put(orderItemAndShipGroupAssoc.getString(\"orderItemSeqId\"), orderItemData);\n+    orderItemDatas.put(orderItem.getString(\"orderItemSeqId\"), orderItemData);\n }\n context.put(\"orderItemDatas\", orderItemDatas.values());\n ",
                "deletions": 7
            },
            {
                "sha": "4282cef9b1c92f29777114d70eb781d9231b78f9",
                "filename": "applications/product/webapp/facility/WEB-INF/controller.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/product/webapp/facility/WEB-INF/controller.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/product/webapp/facility/WEB-INF/controller.xml",
                "status": "modified",
                "changes": 6,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/WEB-INF/controller.xml?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -1013,6 +1013,12 @@ under the License.\n         <response name=\"success\" type=\"view\" value=\"ReceiveInventoryAgainstPurchaseOrder\"/>\n         <response name=\"error\" type=\"view\" value=\"ReceiveInventoryAgainstPurchaseOrder\"/>\n     </request-map>\n+    <request-map uri=\"completePurchaseOrder\">\n+        <security https=\"true\" auth=\"true\"/>\n+        <event type=\"service\" path=\"\" invoke=\"completePurchaseOrder\"/>\n+        <response name=\"success\" type=\"view\" value=\"ReceiveInventoryAgainstPurchaseOrder\"/>\n+        <response name=\"error\" type=\"view\" value=\"ReceiveInventoryAgainstPurchaseOrder\"/>\n+    </request-map>\n     <!-- ================ Shipment Items From Order Requests ================= -->\n     <request-map uri=\"EditShipmentPlan\">\n         <security https=\"true\" auth=\"true\"/>",
                "deletions": 0
            },
            {
                "sha": "bd9a3c012ad9b7233892b934473e567a49878001",
                "filename": "applications/product/webapp/facility/shipment/ReceiveInventoryAgainstPurchaseOrder.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/product/webapp/facility/shipment/ReceiveInventoryAgainstPurchaseOrder.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/product/webapp/facility/shipment/ReceiveInventoryAgainstPurchaseOrder.ftl",
                "status": "modified",
                "changes": 50,
                "additions": 37,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/webapp/facility/shipment/ReceiveInventoryAgainstPurchaseOrder.ftl?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -85,30 +85,49 @@ under the License.\n                 <table width=\"100%\" cellpadding=\"2\" cellspacing=\"0\" border=\"1\">\n                     <tr>\n                         <td><div class=\"tableheadtext\">${uiLabelMap.ProductProduct}</div></td>\n+                        \n+                        <#-- Must use the uiLabelMap[\"\"] notation since the label key has . in it -->\n+                        <td><div class=\"tableheadtext\">${uiLabelMap[\"GoodIdentificationType.description.UPCA\"]}</div></td>\n                         <td><div class=\"tableheadtext\">${uiLabelMap.OrderOrder}</div></td>\n+                        <td><div class=\"tableheadtext\">${uiLabelMap.OrderCancelled}</div></td>\n                         <td><div class=\"tableheadtext\">${uiLabelMap.OrderBackOrdered}</div></td>\n                         <td><div class=\"tableheadtext\">${uiLabelMap.CommonReceived}</div></td>\n                         <td><div class=\"tableheadtext\">${uiLabelMap.ProductOpenQuantity}</div></td>\n-                        <td><div class=\"tableheadtext\">${uiLabelMap.CommonReceive}</div></td>\n-                        <td><div class=\"tableheadtext\">${uiLabelMap.ProductInventoryItemType}</div></td>\n                         <#if itemsAvailableToReceive>\n+                            <td><div class=\"tableheadtext\">${uiLabelMap.CommonReceive}</div></td>\n+                            <td><div class=\"tableheadtext\">${uiLabelMap.ProductInventoryItemType}</div></td>\n                             <td colspan=\"2\" align=\"right\">\n                                 <div class=\"tableheadtext\">${uiLabelMap.CommonAll}<input type=\"checkbox\" name=\"selectAll\" value=\"${uiLabelMap.CommonY}\" onclick=\"javascript:toggleAll(this, 'selectAllForm');\"></div>\n                             </td>\n                         </#if>\n                     </tr>\n                     <#list orderItemDatas?if_exists as orderItemData>\n-                        <#assign orderItemAndShipGroupAssoc = orderItemData.orderItemAndShipGroupAssoc>\n+                        <#assign orderItem = orderItemData.orderItem>\n                         <#assign product = orderItemData.product?if_exists>\n+                        <#assign itemShipGroupSeqId = orderItemData.shipGroupSeqId?if_exists>\n                         <#assign totalQuantityReceived = orderItemData.totalQuantityReceived?default(0)>\n                         <#assign availableToReceive = orderItemData.availableToReceive?default(0)>\n                         <#assign backOrderedQuantity = orderItemData.backOrderedQuantity?default(0)>\n                         \n                         <tr>\n-                            <td><div class=\"tabletext\">${(product.internalName)?if_exists} [${orderItemAndShipGroupAssoc.productId?default(\"N/A\")}]</div></td>\n+                            <td><div class=\"tabletext\">${(product.internalName)?if_exists} [${orderItem.productId?default(\"N/A\")}]</div></td>\n                             <td>\n                                 <div class=\"tabletext\">\n-                                    ${orderItemAndShipGroupAssoc.quantity - orderItemAndShipGroupAssoc.cancelQuantity?default(0)}\n+                                    <#assign upcaLookup = Static[\"org.ofbiz.base.util.UtilMisc\"].toMap(\"productId\", product.productId, \"goodIdentificationTypeId\", \"UPCA\")/>\n+                                    <#assign upca = delegator.findByPrimaryKeyCache(\"GoodIdentification\", upcaLookup)?if_exists/>\n+                                    <#if upca?has_content>\n+                                        ${upca.idValue?if_exists}\n+                                    </#if>\n+                                </div>\n+                            </td>\n+                            <td>\n+                                <div class=\"tabletext\">\n+                                    ${orderItem.quantity}\n+                                </div>\n+                            </td>\n+                            <td>\n+                                <div class=\"tabletext\">\n+                                    ${orderItem.cancelQuantity?default(0)}\n                                 </div>\n                             </td>\n                             <td>\n@@ -121,26 +140,26 @@ under the License.\n                             </td>\n                             <td>\n                                 <div class=\"tabletext\">\n-                                    ${orderItemAndShipGroupAssoc.quantity - totalQuantityReceived}\n+                                    ${orderItem.quantity - orderItem.cancelQuantity?default(0) - totalQuantityReceived}\n                                 </div>\n                             </td>\n                             <#if availableToReceive &gt; 0 >\n                                 <td>\n                                     <input type=\"hidden\" name=\"productId_o_${rowCount}\" value=\"${(product.productId)?if_exists}\"/>\n                                     <input type=\"hidden\" name=\"facilityId_o_${rowCount}\" value=\"${facilityId}\"/>\n                                     <input type=\"hidden\" name=\"shipmentId_o_${rowCount}\" value=\"${shipmentId}\"/>\n-                                    <input type=\"hidden\" name=\"orderId_o_${rowCount}\" value=\"${orderItemAndShipGroupAssoc.orderId}\"/>\n-                                    <input type=\"hidden\" name=\"shipGroupSeqId_o_${rowCount}\" value=\"${orderItemAndShipGroupAssoc.shipGroupSeqId}\"/>\n-                                    <input type=\"hidden\" name=\"orderItemSeqId_o_${rowCount}\" value=\"${orderItemAndShipGroupAssoc.orderItemSeqId}\"/>\n-                                    <input type=\"hidden\" name=\"unitCost_o_${rowCount}\" value=\"${orderItemAndShipGroupAssoc.unitPrice?default(0)}\"/>\n+                                    <input type=\"hidden\" name=\"orderId_o_${rowCount}\" value=\"${orderItem.orderId}\"/>\n+                                    <input type=\"hidden\" name=\"shipGroupSeqId_o_${rowCount}\" value=\"${itemShipGroupSeqId?if_exists}\"/>\n+                                    <input type=\"hidden\" name=\"orderItemSeqId_o_${rowCount}\" value=\"${orderItem.orderItemSeqId}\"/>\n+                                    <input type=\"hidden\" name=\"unitCost_o_${rowCount}\" value=\"${orderItem.unitPrice?default(0)}\"/>\n                                     <input type=\"hidden\" name=\"currencyUomId_o_${rowCount}\" value=\"${currencyUomId?default(\"\")}\"/>\n                                     <input type=\"hidden\" name=\"ownerPartyId_o_${rowCount}\" value=\"${(facility.ownerPartyId)?if_exists}\"/>\n                                     <input type=\"hidden\" name=\"datetimeReceived_o_${rowCount}\" value=\"${now}\"/>\n                                     <input type=\"hidden\" name=\"quantityRejected_o_${rowCount}\" value=\"0\"/>\n                                     <#-- quantity field required by the chained issueOrderItemToShipment service -->\n                                     <input type=\"hidden\" name=\"quantity_o_${rowCount}\" id=\"quantity_o_${rowCount}\" value=\"\"/>\n-                                    <#if itemQuantitiesToReceive?exists && itemQuantitiesToReceive.get(orderItemAndShipGroupAssoc.orderItemSeqId)?exists>\n-                                        <#assign quantityToReceive = itemQuantitiesToReceive.get(orderItemAndShipGroupAssoc.orderItemSeqId)>\n+                                    <#if itemQuantitiesToReceive?exists && itemQuantitiesToReceive.get(orderItem.orderItemSeqId)?exists>\n+                                        <#assign quantityToReceive = itemQuantitiesToReceive.get(orderItem.orderItemSeqId)>\n                                     <#else>\n                                         <#assign quantityToReceive = 0>\n                                     </#if>\n@@ -170,13 +189,18 @@ under the License.\n                     </#list>\n                     <#if itemsAvailableToReceive>\n                         <tr>\n-                            <td colspan=\"8\" align=\"right\">\n+                            <td colspan=\"10\" align=\"right\">\n                                 <a href=\"<@ofbizUrl>ReceiveInventoryAgainstPurchaseOrder?shipmentId=${shipmentId}&purchaseOrderId=${orderId}&clearAll=Y</@ofbizUrl>\" class=\"buttontext\">${uiLabelMap.CommonClearAll}</a>\n                             </td>\n                             <td align=\"right\">\n                                 <a class=\"smallSubmit\" href=\"javascript:populateQuantities(${rowCount - 1});document.selectAllForm.submit();\">${uiLabelMap.ProductReceiveItem}</a>\n                             </td>\n                         </tr>\n+                        <tr>\n+                            <td colspan=\"11\" align=\"right\">\n+                                <a class=\"smallSubmit\" href=\"<@ofbizUrl>completePurchaseOrder?orderId=${orderId}&facilityId=${facilityId}&shipmentId=${shipmentId}</@ofbizUrl>\">${uiLabelMap.OrderForceCompletePurchaseOrder}</a>\n+                            </td>\n+                        </tr>\n                     </#if>\n                 </table>\n                 <input type=\"hidden\" name=\"_rowCount\" value=\"${rowCount}\">",
                "deletions": 13
            },
            {
                "sha": "a5ec2ff04b23308830b265aad8d0fb82c702ad7d",
                "filename": "applications/product/widget/facility/ShipmentScreens.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/product/widget/facility/ShipmentScreens.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/a298a2bb2d20281cc7c3d198d715abcf9500d4cc/applications/product/widget/facility/ShipmentScreens.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/widget/facility/ShipmentScreens.xml?ref=a298a2bb2d20281cc7c3d198d715abcf9500d4cc",
                "patch": "@@ -323,6 +323,7 @@ under the License.\n     <screen name=\"ReceiveInventoryAgainstPurchaseOrder\">\n         <section>\n             <actions>\n+                <property-map resource=\"ProductEntityLabels\" map-name=\"uiLabelMap\" global=\"true\"/>\n                 <set field=\"titleProperty\" value=\"ProductReceiveInventoryAgainstPurchaseOrder\"/>\n                 <set field=\"headerItem\" value=\"shipment\"/>\n                 <set field=\"tabButtonItem\" value=\"ProductReceiveInventoryAgainstPO\"/>",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "A patch from Tom Burns \"Error is comming in HR's recruitment  Tab  \" https://issues.apache.org/jira/browse/OFBIZ-5056\n\nI am getting an error(null Pointer Exception) in HR module when i am testing some functionallities.\nI followed some steps in my testing.\nStep 1:-Cleck on Recruitment tab and also click on \"New job Requisition\".Fill the data and create the record.\nSteps 2:-click on sub tap \"Internal Job Posting\" and then click on \"New internal Job Posting\" Button on find Internal job posting page. Create the record from require data\nStep3:-Again click \"Internal Job Posting\" sub tab. and find the created Internal Job Posting record.\nYou find operastion give the Error Massage\n:ERROR MESSAGE:\norg.ofbiz.widget.screen.ScreenRenderException: Error rendering screen component://common/widget/CommonScreens.xml#FindScreenDecorator: java.lang.NullPointerException (null)\nYou also check Job Interview and Approve sub tab\nI have sent this mail to jacopo Le but Issue is not resolve till date\nPlease solve this issuse. I Am waiting for ur responce APAS\nThanks\nDhiraj Gupta\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1400393 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/5192aeea133901be8fdf1679d367df23355f2e16",
        "parent": "https://github.com/apache/ofbiz-framework/commit/f4167231b119f362e4db951d6f4f1578dcf333bb",
        "bug_id": "ofbiz-framework_277",
        "file": [
            {
                "sha": "1652a1dbda0ad903a5cf2152b66442b1dec6be55",
                "filename": "applications/humanres/widget/forms/EmplLeaveForms.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5192aeea133901be8fdf1679d367df23355f2e16/applications/humanres/widget/forms/EmplLeaveForms.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5192aeea133901be8fdf1679d367df23355f2e16/applications/humanres/widget/forms/EmplLeaveForms.xml",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/humanres/widget/forms/EmplLeaveForms.xml?ref=5192aeea133901be8fdf1679d367df23355f2e16",
                "patch": "@@ -71,7 +71,7 @@\n         <field name=\"approverPartyId\">\n             <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\" key-field-name=\"partyId\">\n                 <sub-hyperlink target=\"/partymgr/control/viewprofile\" target-type=\"inter-app\" description=\"${approverPartyId}\" link-style=\"buttontext\">\n-                    <parameter param-name=\"approverPartyId\" from-field=\"approverPartyId\"/>\n+                    <parameter param-name=\"partyId\" from-field=\"approverPartyId\"/>\n                 </sub-hyperlink>\n             </display-entity>\n         </field>\n@@ -151,7 +151,7 @@\n         <field name=\"approverPartyId\" field-name=\"approverPartyId\">\n             <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\" key-field-name=\"partyId\">\n                 <sub-hyperlink target=\"/partymgr/control/viewprofile\" target-type=\"inter-app\" description=\"${approverPartyId}\" link-style=\"buttontext\">\n-                    <parameter param-name=\"approverPartyId\" from-field=\"approverPartyId\"/>\n+                    <parameter param-name=\"partyId\" from-field=\"approverPartyId\"/>\n                 </sub-hyperlink>\n             </display-entity>\n         </field>",
                "deletions": 2
            },
            {
                "sha": "7e5be2cd19107b4df4d4303480453ae0d9c2ab8b",
                "filename": "applications/humanres/widget/forms/RecruitmentForms.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/5192aeea133901be8fdf1679d367df23355f2e16/applications/humanres/widget/forms/RecruitmentForms.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/5192aeea133901be8fdf1679d367df23355f2e16/applications/humanres/widget/forms/RecruitmentForms.xml",
                "status": "modified",
                "changes": 23,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/humanres/widget/forms/RecruitmentForms.xml?ref=5192aeea133901be8fdf1679d367df23355f2e16",
                "patch": "@@ -178,21 +178,24 @@ under the License.\n             <hyperlink target=\"EditInternalJobPosting\" description=\"${applicationId}\">\n                 <parameter param-name=\"applicationId\"/>\n             </hyperlink>\n-        </field>\n-        <field name=\"applyingPartyId\" field-name=\"partyId\">\n-            <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\">\n-                <sub-hyperlink target=\"/partymgr/control/viewprofile\" target-type=\"inter-app\" description=\"${applyingPartyId}\" link-style=\"buttontext\">\n-                    <parameter param-name=\"partyId\" from-field=\"applyingPartyId\"/>\n-                </sub-hyperlink>\n-            </display-entity>\n-        </field>\n-        <field name=\"approverPartyId\" field-name=\"partyId\">\n-            <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\">\n+        </field>        \n+\n+        <field name=\"approverPartyId\">\n+            <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\" key-field-name=\"partyId\">\n                 <sub-hyperlink target=\"/partymgr/control/viewprofile\" target-type=\"inter-app\" description=\"${approverPartyId}\" link-style=\"buttontext\">\n                     <parameter param-name=\"partyId\" from-field=\"approverPartyId\"/>\n                 </sub-hyperlink>\n             </display-entity>\n+        </field>      \n+\n+        <field name=\"applyingPartyId\">\n+            <display-entity entity-name=\"PartyNameView\" description=\"${firstName} ${lastName}\" key-field-name=\"partyId\">\n+                <sub-hyperlink target=\"/partymgr/control/viewprofile\" target-type=\"inter-app\" description=\"${applyingPartyId}\" link-style=\"buttontext\">\n+                    <parameter param-name=\"partyId\" from-field=\"applyingPartyId\"/>\n+                </sub-hyperlink>\n+            </display-entity>\n         </field>\n+\n         <field name=\"statusId\" title=\"${uiLabelMap.HumanResIJPStatus}\"><display/></field>\n         <field name=\"jobRequisitionId\" widget-style=\"buttontext\">\n             <hyperlink target=\"EditJobRequisition\" description=\"${jobRequisitionId}\">",
                "deletions": 10
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Applied patch from jira issue OFBIZ-3077 - Error for productStoreId when click on productId link from showcart of purchase order.\n\nSteps regenerate error:\n1) Hit url: https://localhost:8443/ordermgr/control/orderentry\n2) Select purchase order with supplier\n3) Add product for order\n4) Click on the productId from showcart page\n\nit will generate error as following\norg.ofbiz.widget.screen.ScreenRenderException: Error rendering screen component://order/widget/ordermgr/OrderEntryCatalogScreens.xml#productdetail: java.lang.NullPointerException: Cannot get property 'productStoreId' on null object (Cannot get property 'productStoreId' on null object)\n\nNotes from Mridul:\nAs Joe has already stated that we need to do few adjustments in the code based on presence of productStoreId. I would vote for:\n\n   1. Showing all reviews.\n   2. Skipping surveys.\n\nThe third section, which is the most important one and needs productStoreId is getProductVariantTree service invoked in ProductDetail.groovy (line 232). getProductVariantTree service needs productStoreId to get available inventory. In case of PO's we don't need to check for available inventory at all. Now for being able to use the same code to display product detail page in case of a PO, we will need to make modifications to getProductVariantTree service too, which can be done in two ways:\n\n   1. Add a boolean IN attribute checkInventory to service definition, if its true check the available inventory and if false do not.\n   2. A check on productStoreId in the implementation can serve our purpose too.\n\nI like #1 more as it won't eliminate importance of productStoreId in case of a sales order. Looking forward to suggestions from community to handle this situation.\n\nThanks Amit for the contribution. Mridul Thanks a lot for providing useful notes for the implementation.\nGuys, I appreciate your coordination on this!\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@882618 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/70548f0b98ca1758215d317ee9365d1cc227ca29",
        "parent": "https://github.com/apache/ofbiz-framework/commit/6a845bf5a4384a8228f27eefa0d9c1487915953d",
        "bug_id": "ofbiz-framework_278",
        "file": [
            {
                "sha": "d9d031f1e7f048c78bc8b348e56983a8a470a27c",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductDetail.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductDetail.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductDetail.groovy",
                "status": "modified",
                "changes": 70,
                "additions": 46,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductDetail.groovy?ref=70548f0b98ca1758215d317ee9365d1cc227ca29",
                "patch": "@@ -137,11 +137,15 @@ if (product) {\n         }\n     }\n \n-    // get the product store\n-    productStore = ProductStoreWorker.getProductStore(request);\n-    productStoreId = productStore.productStoreId;\n-    context.productStoreId = productStoreId;\n-\n+    // get the product store for only Sales Order not for Purchase Order.\n+    productStore = null;\n+    productStoreId = null;\n+    cart = ShoppingCartEvents.getCartObject(request);\n+    if (cart.isSalesOrder()) {\n+        productStore = ProductStoreWorker.getProductStore(request);\n+        productStoreId = productStore.productStoreId;\n+        context.productStoreId = productStoreId;\n+    }\n     // get a defined survey\n     productSurvey = ProductStoreWorker.getProductSurveys(delegator, productStoreId, productId, \"CART_ADD\");\n     if (productSurvey) {\n@@ -176,8 +180,13 @@ if (product) {\n         context.priceMap = priceMap;\n     }\n \n-    // get the product review(s)\n-    reviewByAnd = [statusId : \"PRR_APPROVED\", productStoreId : productStoreId];\n+    // get the product review(s) \n+    // get all product review in case of Purchase Order.\n+    reviewByAnd = [:];\n+    reviewByAnd.statusId = \"PRR_APPROVED\";\n+    if (cart.isSalesOrder()) {\n+        reviewByAnd.productStoreId = productStoreId;\n+    }\n     reviews = product.getRelatedCache(\"ProductReview\", reviewByAnd, [\"-postedDateTime\"]);\n     context.productReviews = reviews;\n     // get the average rating\n@@ -190,18 +199,20 @@ if (product) {\n     }\n \n     // get the days to ship\n-\n-    facilityId = productStore.inventoryFacilityId;\n-    /*\n-    productFacility = delegator.findByPrimaryKeyCache(\"ProductFacility\", [productId : productId, facilityId : facilityId);\n-    context.daysToShip = productFacility?.daysToShip\n-    */\n-\n-    resultOutput = dispatcher.runSync(\"getInventoryAvailableByFacility\", [productId : productId, facilityId : facilityId, useCache : false]);\n-    totalAvailableToPromise = resultOutput.availableToPromiseTotal;\n-    if (totalAvailableToPromise) {\n-        productFacility = delegator.findByPrimaryKeyCache(\"ProductFacility\", [productId : productId, facilityId : facilityId]);\n+    // if order is purchase then don't calculate available inventory for product. \n+    if (cart.isSalesOrder()) {\n+        facilityId = productStore.inventoryFacilityId;\n+        /*\n+        productFacility = delegator.findByPrimaryKeyCache(\"ProductFacility\", [productId : productId, facilityId : facilityId);\n         context.daysToShip = productFacility?.daysToShip\n+        */\n+\n+        resultOutput = dispatcher.runSync(\"getInventoryAvailableByFacility\", [productId : productId, facilityId : facilityId, useCache : false]);\n+        totalAvailableToPromise = resultOutput.availableToPromiseTotal;\n+        if (totalAvailableToPromise) {\n+            productFacility = delegator.findByPrimaryKeyCache(\"ProductFacility\", [productId : productId, facilityId : facilityId]);\n+            context.daysToShip = productFacility?.daysToShip\n+        }\n     } else {\n        supplierProducts = delegator.findByAndCache(\"SupplierProduct\", [productId : productId], [\"-availableFromDate\"]);\n        supplierProduct = EntityUtil.getFirst(supplierProducts);\n@@ -229,7 +240,12 @@ if (product) {\n             featureMap = dispatcher.runSync(\"getProductFeatureSet\", [productId : productId]);\n             featureSet = featureMap.featureSet;\n             if (featureSet) {\n-                variantTreeMap = dispatcher.runSync(\"getProductVariantTree\", [productId : productId, featureOrder : featureSet, productStoreId : productStoreId]);\n+                //if order is purchase then don't calculate available inventory for product.\n+                if (cart.isPurchaseOrder()) {\n+                    variantTreeMap = dispatcher.runSync(\"getProductVariantTree\", [productId : productId, featureOrder : featureSet, checkInventory: false]);\n+                } else {\n+                    variantTreeMap = dispatcher.runSync(\"getProductVariantTree\", [productId : productId, featureOrder : featureSet, productStoreId : productStoreId]);\n+                }\n                 variantTree = variantTreeMap.variantTree;\n                 imageMap = variantTreeMap.variantSample;\n                 virtualVariant = variantTreeMap.virtualVariant;\n@@ -349,21 +365,27 @@ if (product) {\n                         variantPriceJS = new StringBuffer();\n                         variantPriceJS.append(\"function getVariantPrice(sku) { \");\n                         // Format to apply the currency code to the variant price in the javascript\n-                        localeString = productStore.defaultLocaleString;\n-                        if (localeString) {\n-                            locale = UtilMisc.parseLocale(localeString);\n+                        if (productStore) {\n+                            localeString = productStore.defaultLocaleString;\n+                            if (localeString) {\n+                                locale = UtilMisc.parseLocale(localeString);\n+                            }\n                         }\n                         numberFormat = NumberFormat.getCurrencyInstance(locale);\n                         variants.each { variantAssoc ->\n                             variant = variantAssoc.getRelatedOne(\"AssocProduct\");\n                             // Get the price for each variant. Reuse the priceContext already setup for virtual product above and replace the product\n+                            priceContext.product = variant;\n                             if (cart.isSalesOrder()) {\n                                 // sales order: run the \"calculateProductPrice\" service\n-                                priceContext.product = variant;\n+                                variantPriceMap = dispatcher.runSync(\"calculateProductPrice\", priceContext);\n+                            } else {\n                                 variantPriceMap = dispatcher.runSync(\"calculateProductPrice\", priceContext);\n                             }\n                             amt.append(\" if (sku == \\\"\" + variant.productId + \"\\\") return \\\"\" + (variant.requireAmount ?: \"N\") + \"\\\"; \");\n-                            variantPriceJS.append(\"  if (sku == \\\"\" + variant.productId + \"\\\") return \\\"\" + numberFormat.format(variantPriceMap.basePrice) + \"\\\"; \");\n+                            if (variantPriceMap) {\n+                                variantPriceJS.append(\"  if (sku == \\\"\" + variant.productId + \"\\\") return \\\"\" + numberFormat.format(variantPriceMap.basePrice) + \"\\\"; \");\n+                            }\n                         }\n                         amt.append(\" } \");\n                         variantPriceJS.append(\" } \");",
                "deletions": 24
            },
            {
                "sha": "9b9abed0daf542ecdad775ba705f927bf52ce092",
                "filename": "applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductSummary.groovy",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductSummary.groovy",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductSummary.groovy",
                "status": "modified",
                "changes": 30,
                "additions": 19,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/WEB-INF/actions/entry/catalog/ProductSummary.groovy?ref=70548f0b98ca1758215d317ee9365d1cc227ca29",
                "patch": "@@ -40,12 +40,18 @@ productId = product?.productId ?: optProductId ?: request.getAttribute(\"productI\n \n webSiteId = CatalogWorker.getWebSiteId(request);\n catalogId = CatalogWorker.getCurrentCatalogId(request);\n-productStore = ProductStoreWorker.getProductStore(request);\n-facilityId = productStore.inventoryFacilityId;\n-productStoreId = productStore.productStoreId;\n+cart = ShoppingCartEvents.getCartObject(request);\n+productStore = null;\n+productStoreId = null;\n+facilityId = null;\n+if (cart.isSalesOrder()) {\n+    productStore = ProductStoreWorker.getProductStore(request);\n+    productStoreId = productStore.productStoreId;\n+    context.productStoreId = productStoreId;\n+    facilityId = productStore.inventoryFacilityId;\n+}\n autoUserLogin = session.getAttribute(\"autoUserLogin\");\n userLogin = session.getAttribute(\"userLogin\");\n-cart = ShoppingCartEvents.getCartObject(request);\n \n context.remove(\"daysToShip\");\n context.remove(\"averageRating\");\n@@ -57,12 +63,15 @@ if (!product && productId) {\n     product = delegator.findByPrimaryKeyCache(\"Product\", [productId : productId]);\n }\n if (product) {\n-    resultOutput = dispatcher.runSync(\"getInventoryAvailableByFacility\", [productId : product.productId, facilityId : facilityId, useCache : true]);\n-    totalAvailableToPromise = resultOutput.availableToPromiseTotal;\n-    if (totalAvailableToPromise && totalAvailableToPromise.doubleValue() > 0) {\n-        productFacility = delegator.findByPrimaryKeyCache(\"ProductFacility\", [productId : product.productId, facilityId : facilityId]);\n-        if (productFacility?.daysToShip != null) {\n-            context.daysToShip = productFacility.daysToShip;\n+    //if order is purchase then don't calculate available inventory for product.\n+    if (cart.isSalesOrder()) {\n+        resultOutput = dispatcher.runSync(\"getInventoryAvailableByFacility\", [productId : product.productId, facilityId : facilityId, useCache : true]);\n+        totalAvailableToPromise = resultOutput.availableToPromiseTotal;\n+        if (totalAvailableToPromise && totalAvailableToPromise.doubleValue() > 0) {\n+            productFacility = delegator.findByPrimaryKeyCache(\"ProductFacility\", [productId : product.productId, facilityId : facilityId]);\n+            if (productFacility?.daysToShip != null) {\n+                context.daysToShip = productFacility.daysToShip;\n+            }\n         }\n     } else {\n        supplierProducts = delegator.findByAndCache(\"SupplierProduct\", [productId : product.productId], [\"-availableFromDate\"]);\n@@ -140,7 +149,6 @@ if (reviews) {\n sizeProductFeatureAndAppls = delegator.findByAnd(\"ProductFeatureAndAppl\", [productId : productId, productFeatureTypeId : \"SIZE\"], [\"sequenceNum\", \"defaultSequenceNum\"]);\n \n context.product = product;\n-context.productStoreId = productStoreId;\n context.categoryId = categoryId;\n context.productReviews = reviews;\n context.sizeProductFeatureAndAppls = sizeProductFeatureAndAppls;",
                "deletions": 11
            },
            {
                "sha": "2346813b57913082079eb206e89ca63faadd3c46",
                "filename": "applications/order/webapp/ordermgr/entry/catalog/productdetail.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/order/webapp/ordermgr/entry/catalog/productdetail.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/order/webapp/ordermgr/entry/catalog/productdetail.ftl",
                "status": "modified",
                "changes": 20,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/webapp/ordermgr/entry/catalog/productdetail.ftl?ref=70548f0b98ca1758215d317ee9365d1cc227ca29",
                "patch": "@@ -470,14 +470,16 @@ ${virtualJavaScript?if_exists}\n         <#else>\n           <input type=\"hidden\" name=\"product_id\" value=\"${product.productId}\"/>\n           <input type=\"hidden\" name=\"add_product_id\" value=\"${product.productId}\"/>\n-          <#assign isStoreInventoryNotAvailable = !(Static[\"org.ofbiz.product.store.ProductStoreWorker\"].isStoreInventoryAvailable(request, product, 1.0?double))>\n-          <#assign isStoreInventoryRequired = Static[\"org.ofbiz.product.store.ProductStoreWorker\"].isStoreInventoryRequired(request, product)>\n-          <#if isStoreInventoryNotAvailable>\n-            <#if isStoreInventoryRequired>\n-              <div><b>${uiLabelMap.ProductItemOutOfStock}.</b></div>\n-              <#assign inStock = false>\n-            <#else>\n-              <div><b>${product.inventoryMessage?if_exists}</b></div>\n+          <#if productStoreId?exists>\n+            <#assign isStoreInventoryNotAvailable = !(Static[\"org.ofbiz.product.store.ProductStoreWorker\"].isStoreInventoryAvailable(request, product, 1.0?double))>\n+            <#assign isStoreInventoryRequired = Static[\"org.ofbiz.product.store.ProductStoreWorker\"].isStoreInventoryRequired(request, product)>\n+            <#if isStoreInventoryNotAvailable>\n+              <#if isStoreInventoryRequired>\n+                <div><b>${uiLabelMap.ProductItemOutOfStock}.</b></div>\n+                <#assign inStock = false>\n+              <#else>\n+                <div><b>${product.inventoryMessage?if_exists}</b></div>\n+              </#if>\n             </#if>\n           </#if>\n         </#if>\n@@ -526,7 +528,7 @@ ${virtualJavaScript?if_exists}\n         <form name=\"addToShoppingList\" method=\"post\" action=\"<@ofbizUrl>addItemToShoppingList<#if requestAttributes._CURRENT_VIEW_?exists>/${requestAttributes._CURRENT_VIEW_}</#if></@ofbizUrl>\">\n           <input type=\"hidden\" name=\"productId\" value=\"${product.productId}\"/>\n           <input type=\"hidden\" name=\"product_id\" value=\"${product.productId}\"/>\n-          <input type=\"hidden\" name=\"productStoreId\" value=\"${productStoreId}\"/>\n+          <input type=\"hidden\" name=\"productStoreId\" value=\"${productStoreId?if_exists}\"/>\n           <input type=\"hidden\" name=\"reservStart\" value= \"\"/>\n           <select name=\"shoppingListId\">\n             <#if shoppingLists?has_content>",
                "deletions": 9
            },
            {
                "sha": "bfa13fd93a682451edadb73c66235ea11afce897",
                "filename": "applications/product/servicedef/services_view.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/product/servicedef/services_view.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/product/servicedef/services_view.xml",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/servicedef/services_view.xml?ref=70548f0b98ca1758215d317ee9365d1cc227ca29",
                "patch": "@@ -50,7 +50,8 @@ under the License.\n         <description>Gets a tree of product variants based on a virtual product and a list of features.</description>\n         <attribute name=\"productId\" type=\"String\" mode=\"IN\"/>\n         <attribute name=\"featureOrder\" type=\"java.util.Collection\" mode=\"IN\"/>\n-        <attribute name=\"productStoreId\" type=\"String\" mode=\"IN\"/>\n+        <attribute name=\"productStoreId\" type=\"String\" mode=\"IN\" optional=\"true\"/>\n+        <attribute name=\"checkInventory\" type=\"Boolean\" mode=\"IN\" default-value=\"true\" optional=\"true\"/>\n         <attribute name=\"variantTree\" type=\"java.util.Map\" mode=\"OUT\" optional=\"true\"/>\n         <attribute name=\"variantSample\" type=\"java.util.Map\" mode=\"OUT\" optional=\"true\"/>\n         <attribute name=\"virtualVariant\" type=\"java.util.List\" mode=\"OUT\" optional=\"true\"/>",
                "deletions": 1
            },
            {
                "sha": "73d1951e45bdcfc2389e002949da459eee6fd745",
                "filename": "applications/product/src/org/ofbiz/product/product/ProductServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/product/src/org/ofbiz/product/product/ProductServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/70548f0b98ca1758215d317ee9365d1cc227ca29/applications/product/src/org/ofbiz/product/product/ProductServices.java",
                "status": "modified",
                "changes": 17,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/product/src/org/ofbiz/product/product/ProductServices.java?ref=70548f0b98ca1758215d317ee9365d1cc227ca29",
                "patch": "@@ -187,6 +187,7 @@\n     public static Map<String, Object> prodMakeFeatureTree(DispatchContext dctx, Map<String, ? extends Object> context) {\n         // * String productId      -- Parent (virtual) product ID\n         // * List featureOrder     -- Order of features\n+        // * Boolean checkInventory-- To calculate available inventory.\n         // * String productStoreId -- Product Store ID for Inventory\n         String productStoreId = (String) context.get(\"productStoreId\");\n         Locale locale = (Locale) context.get(\"locale\");\n@@ -251,11 +252,19 @@\n             }\n \n             // next check inventory for each item: if inventory is not required or is available\n+            Boolean checkInventory = (Boolean) context.get(\"checkInventory\");\n             try {\n-                Map<String, Object> invReqResult = dispatcher.runSync(\"isStoreInventoryAvailableOrNotRequired\", UtilMisc.<String, Object>toMap(\"productStoreId\", productStoreId, \"productId\", productIdTo, \"quantity\", BigDecimal.ONE));\n-                if (ServiceUtil.isError(invReqResult)) {\n-                    return ServiceUtil.returnError(\"Error calling the isStoreInventoryRequired when building the variant product tree.\", null, null, invReqResult);\n-                } else if (\"Y\".equals((String) invReqResult.get(\"availableOrNotRequired\"))) {\n+                if (checkInventory) {\n+                    Map<String, Object> invReqResult = dispatcher.runSync(\"isStoreInventoryAvailableOrNotRequired\", UtilMisc.<String, Object>toMap(\"productStoreId\", productStoreId, \"productId\", productIdTo, \"quantity\", BigDecimal.ONE));\n+                    if (ServiceUtil.isError(invReqResult)) {\n+                        return ServiceUtil.returnError(\"Error calling the isStoreInventoryRequired when building the variant product tree.\", null, null, invReqResult);\n+                    } else if (\"Y\".equals((String) invReqResult.get(\"availableOrNotRequired\"))) {\n+                        items.add(productIdTo);\n+                        if (productTo.getString(\"isVirtual\") != null && productTo.getString(\"isVirtual\").equals(\"Y\")) {\n+                            virtualVariant.add(productIdTo);\n+                        }\n+                    }\n+                } else {\n                     items.add(productIdTo);\n                     if (productTo.getString(\"isVirtual\") != null && productTo.getString(\"isVirtual\").equals(\"Y\")) {\n                         virtualVariant.add(productIdTo);",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "Fixed a bug in vendor return. The service getReturnableItems returns a map containing the returable quantity corresponding to an item along with\ncertain other things. Earlier this service was returning an empty map for a purchase order and a vendor return. On order detail page action \nblock there is a check on this map and if the map comes out to be empty the system does not show the options to create return for the \npurchase order. Similary if you create a vendor return directly from the Return Header screen and try to add items on the Return Item screen\nusing an order Id, this display a message \"No returnable items found for order\" \n\nAlso the method sendItemsShipped in the service sendGoogleShipRequest was throwing a NPE because the code try to pull a product through\nItemIssuance > OrderItem > Product\n\nIn the vendor return of type refund the items are issued to the return shipment and a purchase return invoice is generated and hence the process\nis not linked to any Order. Adding a condition on the ECA so that this service is not invoked.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@940851 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/b3fdbfb95c1173e72b52da6fc7d38db58cebf0a6",
        "parent": "https://github.com/apache/ofbiz-framework/commit/be5dce281e6694b90103da5c9933fe59a86b1095",
        "bug_id": "ofbiz-framework_279",
        "file": [
            {
                "sha": "0dba1b41513526b8690ebd93ed34b84d29043c44",
                "filename": "applications/order/src/org/ofbiz/order/order/OrderReturnServices.java",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b3fdbfb95c1173e72b52da6fc7d38db58cebf0a6/applications/order/src/org/ofbiz/order/order/OrderReturnServices.java",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b3fdbfb95c1173e72b52da6fc7d38db58cebf0a6/applications/order/src/org/ofbiz/order/order/OrderReturnServices.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/order/src/org/ofbiz/order/order/OrderReturnServices.java?ref=b3fdbfb95c1173e72b52da6fc7d38db58cebf0a6",
                "patch": "@@ -492,6 +492,7 @@ public static Map getReturnableItems(DispatchContext dctx, Map context) {\n                     }\n                     // items not issued/shipped are considered as returnable only if they are\n                     // not physical items\n+                    if (\"SALES_ORDER\".equals(orderHeader.getString(\"orderTypeId\"))) {\n                     BigDecimal quantityIssued = orderItemQuantityIssued.getBigDecimal(\"quantityIssued\");\n                     if (UtilValidate.isEmpty(quantityIssued) || quantityIssued.compareTo(BigDecimal.ZERO) == 0) {\n                         try {\n@@ -504,6 +505,7 @@ public static Map getReturnableItems(DispatchContext dctx, Map context) {\n                             return ServiceUtil.returnError(UtilProperties.getMessage(resource_error,\"OrderErrorUnableToGetTheItemReturnableProduct\", locale));\n                         }\n \n+                    }\n                     }\n                     Map serviceResult = null;\n                     try {",
                "deletions": 0
            },
            {
                "sha": "26ef42e85a78f112ef55121c7e2e55de910aabe2",
                "filename": "specialpurpose/googlecheckout/servicedef/secas.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/b3fdbfb95c1173e72b52da6fc7d38db58cebf0a6/specialpurpose/googlecheckout/servicedef/secas.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/b3fdbfb95c1173e72b52da6fc7d38db58cebf0a6/specialpurpose/googlecheckout/servicedef/secas.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/specialpurpose/googlecheckout/servicedef/secas.xml?ref=b3fdbfb95c1173e72b52da6fc7d38db58cebf0a6",
                "patch": "@@ -49,6 +49,7 @@ under the License.\n     <eca service=\"updateShipment\" event=\"commit\" run-on-failure=\"false\" run-on-error=\"false\">\n         <condition-field field-name=\"statusId\" operator=\"not-equals\" to-field-name=\"oldStatusId\"/>\n         <condition field-name=\"statusId\" operator=\"equals\" value=\"SHIPMENT_SHIPPED\"/>\n+        <condition field-name=\"shipmentTypeId\" operator=\"not-equals\" value=\"PURCHASE_RETURN\"/>\n         <action service=\"sendGoogleShipRequest\" mode=\"sync\"/>\n     </eca>\n     ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "ofbiz-framework",
        "message": "This fixes the geolocation in OFBiz, for both Google Maps and OpenLayers. It seems few changes, it took me more time than I thought. I hope this will last few years again, and it should be easier to maintain now.\n\nWhat I did:\nUpgraded from Google Maps API 2 to 3, which also means removing the keys in general.properties. They are no longer needed in API-3 (at least for our demo and local test uses), one worry less!\nRefactored Google Maps code in geolocation.ftl: put more things in common,  simplified code (the API-3 is better from this POV).\n\nFor OpenLayers, due to most browsers now rejecting mixed content (HTTP vs HTTPS), I had to follow their advice and put OpenLayers-2.13.1.js + images and theme(finally not used) in the framework. Not a big deal in term of size but again one more lib to worry about. Anyway geolocation is not vital for OFBiz. I have also added a zoom and navigation widget in maps. Note that IE warns about mixed content, but you can bypass it.\n\nWhile working on editGeoLocation (in Party) I noticed it does not update the elevation. I found it was possible http://www.daftlogic.com/sandbox-google-maps-find-altitude.htm but I did not implement it, lack of time...\nAlso I got once a NPE in CallSimpleMapProcessor (when using editGeoLocation) but was unable to reproduce (w/o changes before and after)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ofbiz/trunk@1554536 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/ofbiz-framework/commit/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
        "parent": "https://github.com/apache/ofbiz-framework/commit/bdf63b59336cb930f9ab658c39bc843bf63849a7",
        "bug_id": "ofbiz-framework_280",
        "file": [
            {
                "sha": "0146fe2e7ac03071dbb17587282f6f4d6edd187e",
                "filename": "applications/party/script/org/ofbiz/party/party/PartySimpleEvents.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/applications/party/script/org/ofbiz/party/party/PartySimpleEvents.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/applications/party/script/org/ofbiz/party/party/PartySimpleEvents.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/script/org/ofbiz/party/party/PartySimpleEvents.xml?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -134,7 +134,7 @@ under the License.\n                 <result-to-field result-name=\"geoPointId\" field=\"geoPointId\"/>\n             </call-service>\n \n-            <now-timestamp field=\"nowTimestamp\"/>\n+            <now field=\"nowTimestamp\"/>\n             <make-value value-field=\"partyGeoPoint\" entity-name=\"PartyGeoPoint\"/>\n             <set field=\"partyGeoPoint.partyId\" from-field=\"parameters.partyId\"/>\n             <set field=\"partyGeoPoint.geoPointId\" from-field=\"geoPointId\"/>",
                "deletions": 1
            },
            {
                "sha": "b4041025997338406af4e2442ba5e2f1376d8d98",
                "filename": "applications/party/webapp/partymgr/party/editGeoLocation.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/applications/party/webapp/partymgr/party/editGeoLocation.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/applications/party/webapp/partymgr/party/editGeoLocation.ftl",
                "status": "modified",
                "changes": 159,
                "additions": 85,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/applications/party/webapp/partymgr/party/editGeoLocation.ftl?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -17,95 +17,106 @@ specific language governing permissions and limitations\n under the License.\n -->\n \n-<#assign defaultUrl = \"https.\" + request.getServerName()>\n-<#assign defaultGogleMapKey = Static[\"org.ofbiz.base.util.UtilProperties\"].getPropertyValue(\"general.properties\", defaultUrl)>\n-<script src=\"http://maps.google.com/maps?file=api&amp;v=2&amp;key=${defaultGogleMapKey}\" type=\"text/javascript\"></script>\n+<script src=\"https://maps.googleapis.com/maps/api/js?sensor=false\" type=\"text/javascript\"></script>\n <script type=\"text/javascript\">\n     function load() {\n-        if (GBrowserIsCompatible()) {\n-            var map = new GMap2(document.getElementById(\"map\"));\n-            map.addControl(new GSmallMapControl());\n-            map.addControl(new GMapTypeControl());\n-            var center = new GLatLng(${latitude?if_exists}, ${longitude?if_exists});\n-            map.setCenter(center, 15);\n-            geocoder = new GClientGeocoder();\n-            var marker = new GMarker(center, {draggable: true});  \n+        var geocoder = new google.maps.Geocoder();\n+        var center = new google.maps.LatLng(${latitude!38}, ${longitude!15});\n+        var map = new google.maps.Map(document.getElementById(\"map\"),\n+          { center: center,\n+            zoom: 15, // 0=World, 19=max zoom in\n+            mapTypeId: google.maps.MapTypeId.ROADMAP\n+          });\n+\n+        var marker = new google.maps.Marker({\n+          position: center,\n+          map: map,\n+          draggable: true\n+        });\n+    \n+        document.getElementById(\"lat\").value = center.lat().toFixed(5);\n+        document.getElementById(\"lng\").value = center.lng().toFixed(5);\n+\n+        google.maps.event.addListener(marker, \"dragend\", function() {\n+          var point = marker.getPosition();\n+          map.panTo(point);\n+          document.getElementById(\"lat\").value = point.lat().toFixed(5);\n+          document.getElementById(\"lng\").value = point.lng().toFixed(5);\n+        });\n+    \n+    \n+        google.maps.event.addListener(map, \"moveend\", function() {\n+            map.clearOverlays();\n+            var center = map.getCenter();\n+            var marker = new GMarker(center, {draggable: true});\n             map.addOverlay(marker);\n             document.getElementById(\"lat\").value = center.lat().toFixed(5);\n             document.getElementById(\"lng\").value = center.lng().toFixed(5);\n-\n-            GEvent.addListener(marker, \"dragend\", function() {\n-                var point = marker.getPoint();\n-                map.panTo(point);\n-                document.getElementById(\"lat\").value = point.lat().toFixed(5);\n-                document.getElementById(\"lng\").value = point.lng().toFixed(5);\n-            });\n-\n-            GEvent.addListener(map, \"moveend\", function() {\n-                map.clearOverlays();\n-                var center = map.getCenter();\n-                var marker = new GMarker(center, {draggable: true});\n-                map.addOverlay(marker);\n-                document.getElementById(\"lat\").value = center.lat().toFixed(5);\n-                document.getElementById(\"lng\").value = center.lng().toFixed(5);\n+        });\n     \n-            GEvent.addListener(marker, \"dragend\", function() {\n-                var point =marker.getPoint();\n-                map.panTo(point);\n-                document.getElementById(\"lat\").value = point.lat().toFixed(5);\n-                document.getElementById(\"lng\").value = point.lng().toFixed(5);\n-            });\n-            });\n-        }\n+        google.maps.event.addListener(marker, \"dragend\", function() {\n+            var point = marker.getPoint();\n+            map.panTo(point);\n+            document.getElementById(\"lat\").value = point.lat().toFixed(5);\n+            document.getElementById(\"lng\").value = point.lng().toFixed(5);\n+        });\n     }\n \n     function showAddress(address) {\n-        var map = new GMap2(document.getElementById(\"map\"));\n-        map.addControl(new GSmallMapControl());\n-        map.addControl(new GMapTypeControl());\n+        var map = new google.maps.Map(document.getElementById(\"map\"),\n+          { center: new google.maps.LatLng(${latitude!38}, ${longitude!15}),\n+            zoom: 15, // 0=World, 19=max zoom in\n+            mapTypeId: google.maps.MapTypeId.ROADMAP\n+          });\n+        var geocoder = new google.maps.Geocoder();\n         if (geocoder) {\n-            geocoder.getLatLng(\n-            address,\n-            function(point) {\n-                if (!point) {\n-                    alert(address + \" not found\");\n-                } else {\n-                    document.getElementById(\"lat\").value = point.lat().toFixed(5);\n-                    document.getElementById(\"lng\").value = point.lng().toFixed(5);\n-                    map.clearOverlays()\n-                    map.setCenter(point, 14);\n-                    var marker = new GMarker(point, {draggable: true});  \n-                    map.addOverlay(marker);\n+            geocoder.geocode({'address': address}, function(result, status) {\n+              if (status != google.maps.GeocoderStatus.OK) {\n+                showErrorAlert(\"${uiLabelMap.CommonErrorMessage2}\",\"${uiLabelMap.CommonAddressNotFound}\");\n+            } else {\n+                var point = result[0].geometry.location; \n+                var lat = point.lat().toFixed(5);\n+                var lng = point.lng().toFixed(5);\n+                document.getElementById(\"lat\").value = lat; \n+                document.getElementById(\"lng\").value = lng;\n+                //map.clearOverlays()\n+                map.setCenter(point, 14);\n+        \n+                var marker = new google.maps.Marker({\n+                  position: new google.maps.LatLng(lat, lng),\n+                  map: map,\n+                  draggable: true\n+                });\n+                \n+                google.maps.event.addListener(marker, \"dragend\", function() {\n+                  var point = marker.getPosition();\n+                  map.panTo(point);\n+                  document.getElementById(\"lat\").value = point.lat().toFixed(5);\n+                  document.getElementById(\"lng\").value = point.lng().toFixed(5);\n+                });\n \n-                    GEvent.addListener(marker, \"dragend\", function() {\n-                        var pt = marker.getPoint();\n-                        map.panTo(pt);\n-                        document.getElementById(\"lat\").value = pt.lat().toFixed(5);\n-                        document.getElementById(\"lng\").value = pt.lng().toFixed(5);\n-                    });\n-\n-                    GEvent.addListener(map, \"moveend\", function() {\n-                        map.clearOverlays();\n-                        var center = map.getCenter();\n-                        var marker = new GMarker(center, {draggable: true});\n-                        map.addOverlay(marker);\n-                        document.getElementById(\"lat\").value = center.lat().toFixed(5);\n-                        document.getElementById(\"lng\").value = center.lng().toFixed(5);\n+                google.maps.event.addListener(map, \"moveend\", function() {\n+                    //map.clearOverlays();\n+                    var center = map.getCenter();\n+                    var marker = new google.maps.Marker(center, {draggable: true});\n+                    map.addOverlay(marker);\n+                    document.getElementById(\"lat\").value = center.lat().toFixed(5);\n+                    document.getElementById(\"lng\").value = center.lng().toFixed(5);\n+                });\n \n-                    GEvent.addListener(marker, \"dragend\", function() {\n-                        var pt = marker.getPoint();\n-                        map.panTo(pt);\n-                        document.getElementById(\"lat\").value = pt.lat().toFixed(5);\n-                        document.getElementById(\"lng\").value = pt.lng().toFixed(5);\n-                    });\n-                    });\n-                }\n-            });\n+                google.maps.event.addListener(marker, \"dragend\", function() {\n+                    var pt = marker.getPoint();\n+                    map.panTo(pt);\n+                    document.getElementById(\"lat\").value = pt.lat().toFixed(5);\n+                    document.getElementById(\"lng\").value = pt.lng().toFixed(5);\n+                });\n+            }\n+        });\n         }\n     }\n </script>\n \n-<body onload=\"load()\" onunload=\"GUnload()\" >\n+<body onload=\"load()\">\n     <center>\n         <div align=\"center\" id=\"map\" style=\"border:1px solid #979797; background-color:#e5e3df; width:500px; height:450px; margin:2em auto;\"><br/></div>\n         <form action=\"#\" onsubmit=\"showAddress(this.address.value); return false\">\n@@ -116,7 +127,7 @@ under the License.\n         <form id=\"updateMapForm\" method=\"post\" action=\"<@ofbizUrl>editGeoLocation</@ofbizUrl>\">\n             <input type=\"hidden\" name=\"partyId\" value=\"${partyId?if_exists}\"/>\n             <input type=\"hidden\" name=\"geoPointId\" value=\"${geoPointId?if_exists}\"/>\n-            <input type=\"hidden\"  name=\"lat\" id=\"lat\"/>\n+            <input type=\"hidden\" name=\"lat\" id=\"lat\"/>\n             <input type=\"hidden\" name=\"lng\" id=\"lng\"/>\n             <input type=\"submit\" id=\"createMapButton\" class=\"smallSubmit\" value=\"${uiLabelMap.CommonSubmit}\">\n         </form>",
                "deletions": 74
            },
            {
                "sha": "bb142440bd92e0b71e64156bd43ea521e73c4780",
                "filename": "framework/common/config/general.properties",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/common/config/general.properties",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/common/config/general.properties",
                "status": "modified",
                "changes": 7,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/config/general.properties?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -128,13 +128,6 @@ http.upload.max.size=-1\n mail.spam.name=X-Spam-Flag\n mail.spam.value=YES\n \n-# -- Google Map key (by domain, see http://code.google.com/intl/en/apis/maps/signup.html, note that it works for http://localhost)\n-https.demo-trunk.ofbiz.apache.org=ABQIAAAAtt0d8djaYFkk8N5LJVcDSBTl26GJHIFzHZYG8GNWSTKWDUTxchRLjgT9hY3-DDYk27lvZS84RH4aiQ\n-https.demo-stable.ofbiz.apache.org=ABQIAAAAtt0d8djaYFkk8N5LJVcDSBR8L_-1UdAfCE2bleqTaEvMtKARZxSrkTzKktKY2_Znm0TRq2DF4YhGPg\n-\n-https.localhost=ABQIAAAAtt0d8djaYFkk8N5LJVcDSBQN-clGH2vvMMwJjYtcwF78UzZgEBTN70S6uIgRoAtXRkADNoesbw5etg\n-http.localhost=ABQIAAAAtt0d8djaYFkk8N5LJVcDSBT2yXp_ZAY8_ufC3CFXhHIE1NvwkxR3euHYk9bpwvdF2Qg1EYO1LQitHA\n-\n # -- Y if you want to display the multi-tenant textbox in the login page and install specify components which related to each tenant\n multitenant=N\n ",
                "deletions": 7
            },
            {
                "sha": "4e0373b324d2bc90bdd6f61deb2571ea83ad804e",
                "filename": "framework/common/webcommon/includes/geolocation.ftl",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/common/webcommon/includes/geolocation.ftl",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/common/webcommon/includes/geolocation.ftl",
                "status": "modified",
                "changes": 166,
                "additions": 94,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/webcommon/includes/geolocation.ftl?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -17,102 +17,124 @@ specific language governing permissions and limitations\n under the License.\n -->\n <#if geoChart?has_content>\n+      <#-- ================================= Golbal Init ======================================-->\n+    <#if geoChart.id?has_content>\n+        <#assign id = geoChart.id>\n+    <#else>\n+        <#assign id = \"map_canvas\">\n+    </#if>\n+    \n+    <#if geoChart.center?has_content>\n+        <#assign center = geoChart.center>\n+        <#assign zoom = geoChart.center.zoom>\n+    <#elseif geoChart.points?has_content>\n+        <#assign center = geoChart.points[0]>\n+        <#assign zoom = 15> <#-- 0=World, 19=max zoom in -->\n+    <#else>\n+        <#-- hardcoded in GEOPT_ADDRESS_GOOGLE, simpler -->\n+    </#if>\n+    \n+      <#-- ================================= Google Maps Init ======================================-->\n     <#if geoChart.dataSourceId?has_content>\n-      <#if geoChart.dataSourceId == \"GEOPT_GOOGLE\">\n-        <div id=\"<#if geoChart.id?has_content>${geoChart.id}<#else>map_canvas</#if>\" style=\"border:1px solid #979797; background-color:#e5e3df; width:${geoChart.width}; height:${geoChart.height}; margin:2em auto;\">\n+      <#if geoChart.dataSourceId?substring(geoChart.dataSourceId?length-6 , geoChart.dataSourceId?length) == \"GOOGLE\">\n+        <div id=\"${id}\" style=\"border:1px solid #979797; background-color:#e5e3df; width:${geoChart.width}; height:${geoChart.height}; margin:2em auto;\">\n           <div style=\"padding:1em; color:gray;\">${uiLabelMap.CommonLoading}</div>\n         </div>\n-        <#assign defaultUrl = \"https.\" + request.getServerName()>\n-        <#assign defaultGogleMapKey = Static[\"org.ofbiz.base.util.UtilProperties\"].getPropertyValue(\"general.properties\", defaultUrl)>\n-        <script src=\"http://maps.google.com/maps?file=api&amp;v=2&amp;key=${defaultGogleMapKey}\" type=\"text/javascript\"></script>\n-        <script type=\"text/javascript\"><!--\n-          if (GBrowserIsCompatible()) {\n-            var map = new GMap2(document.getElementById(\"<#if geoChart.id?has_content>${geoChart.id}<#else>map_canvas</#if>\"));\n-            <#if geoChart.center?has_content>\n-              map.setCenter(new GLatLng(${geoChart.center.lat?c}, ${geoChart.center.lon?c}), ${geoChart.center.zoom});\n-            <#else>\n-              <#if geoChart.points?has_content>\n-                var latlng = [\n-                <#list geoChart.points as point>\n-                  new GLatLng(${point.lat?c}, ${point.lon?c})<#if point_has_next>,</#if>\n-                </#list>\n-                ];\n-                var latlngbounds = new GLatLngBounds();\n-                for (var i = 0; i < latlng.length; i++) {\n-                  latlngbounds.extend(latlng[i]);\n+        <script src=\"https://maps.googleapis.com/maps/api/js?sensor=false\" type=\"text/javascript\"></script>\n+      </#if>        \n+\n+      <#-- ================================= Here we go with different types of maps renderer ======================================-->\n+      <#if geoChart.dataSourceId == \"GEOPT_GOOGLE\">\n+        <script type=\"text/javascript\">\n+            function showAllMarkers(map, points) {\n+                if (points.length > 1) {\n+                    var latlngbounds = new google.maps.LatLngBounds();\n+                        for (var i = 0; i < latlngs.length; i++) {\n+                    latlngbounds.extend(latlngs[i]);\n+                    }\n+                    map.fitBounds(latlngbounds);\n                 }\n-                map.setCenter(latlngbounds.getCenter(), Math.min (15, map.getBoundsZoomLevel(latlngbounds)));//reduce bounds zoom level to see all markers\n-              <#else>\n-                map.setCenter(new GLatLng(0, 0), 1);\n-                map.setZoom(15); // 0=World, 19=max zoom in\n-              </#if>\n-            </#if>\n-            <#if geoChart.controlUI?has_content && geoChart.controlUI == \"small\">\n-              map.addControl(new GSmallMapControl());\n-            <#else>\n-              map.setUIToDefault();\n-            </#if>\n+            }\n+            \n+            var map = new google.maps.Map(document.getElementById(\"${id}\"),\n             <#if geoChart.points?has_content>\n+              { center: new google.maps.LatLng(${center.lat?c}, ${center.lon?c}),\n+                zoom: ${zoom},\n+                mapTypeId: google.maps.MapTypeId.ROADMAP\n+              });\n+              <#list geoChart.points as point>\n+                var marker_${point_index} = new google.maps.Marker({\n+                  position: new google.maps.LatLng(${point.lat?c}, ${point.lon?c}),\n+                  map: map\n+                });\n+                <#if point.link?has_content>\n+                  var infoWindow = new google.maps.InfoWindow();\n+                  google.maps.event.addListener(marker_${point_index}, \"click\", function() {\n+                    infoWindow.setContent((\"<div style=\\\"width:210px; padding-right:10px;\\\"><a href=${point.link.url}>${point.link.label}</a></div>\"));\n+                    infoWindow.setPosition(marker_${point_index}.getPosition());\n+                    infoWindow.open(map);\n+                  });\n+                </#if>\n+              </#list>\n+              var latlngs = [\n                 <#list geoChart.points as point>\n-                  var marker_${point_index} = new GMarker(new GLatLng(${point.lat?c}, ${point.lon?c}));\n-                  map.addOverlay(marker_${point_index});\n-                  //map.addOverlay(new GMarker(new GLatLng(${point.lat?c}, ${point.lon?c})));\n-                  <#if point.link?has_content>\n-                      GEvent.addListener(marker_${point_index}, \"click\", function() {\n-                          marker_${point_index}.openInfoWindowHtml(\"<div style=\\\"width:210px; padding-right:10px;\\\"><a href=${point.link.url}>${point.link.label}</a></div>\");\n-                      });\n-                  </#if>\n+                  new google.maps.LatLng(${point.lat?c}, ${point.lon?c})<#if point_has_next>,</#if>\n                 </#list>\n+              ];\n+              showAllMarkers(map, latlngs);\n             </#if>\n-          }\n-       --></script>\n+        </script>\n       <#elseif  geoChart.dataSourceId == \"GEOPT_YAHOO\">\n       <#elseif  geoChart.dataSourceId == \"GEOPT_MICROSOFT\">\n       <#elseif  geoChart.dataSourceId == \"GEOPT_MAPTP\">\n       <#elseif  geoChart.dataSourceId == \"GEOPT_ADDRESS_GOOGLE\">\n-        <div id=\"<#if geoChart.id?has_content>${geoChart.id}<#else>map_canvas</#if>\" style=\"border:1px solid #979797; background-color:#e5e3df; width:${geoChart.width}px; height:${geoChart.height}px; margin:2em auto;\">\n-          <div style=\"padding:1em; color:gray;\">${uiLabelMap.CommonLoading}</div>\n-        </div>\n-        <#assign defaultUrl = \"https.\" + request.getServerName()>\n-        <#assign defaultGogleMapKey = Static[\"org.ofbiz.base.util.UtilProperties\"].getPropertyValue(\"general.properties\", defaultUrl)>\n-        <script src=\"http://maps.google.com/maps?file=api&amp;v=2&amp;key=${defaultGogleMapKey}\" type=\"text/javascript\"></script>\n-        <script type=\"text/javascript\"><!--\n-          if (GBrowserIsCompatible()) {\n-            var geocoder = new GClientGeocoder();\n-            var map = new GMap2(document.getElementById(\"<#if geoChart.id?has_content>${geoChart.id}<#else>map_canvas</#if>\"));\n-            geocoder.getLatLng(\"${pointAddress}\", function(point) {\n-              if (!point) { showErrorAlert(\"${uiLabelMap.CommonErrorMessage2}\",\"${uiLabelMap.CommonAddressNotFound}\");}\n-              map.setUIToDefault();\n-              map.setCenter(point, 13);\n-              map.addOverlay(new GMarker(point));\n-              map.setZoom(15); // 0=World, 19=max zoom in\n+        <script type=\"text/javascript\">\n+            var geocoder = new google.maps.Geocoder();\n+            var map = new google.maps.Map(document.getElementById(\"${id}\"),\n+              { center: new google.maps.LatLng(38, 15),\n+                zoom: 15, // 0=World, 19=max zoom in\n+                mapTypeId: google.maps.MapTypeId.ROADMAP\n+              });\n+            geocoder.geocode({'address': \"${pointAddress}\"}, function(result, status) {\n+              if (status != google.maps.GeocoderStatus.OK) {\n+                showErrorAlert(\"${uiLabelMap.CommonErrorMessage2}\",\"${uiLabelMap.CommonAddressNotFound}\");\n+              } else {\n+                var position = result[0].geometry.location;\n+                map.setCenter(position);\n+                map.fitBounds(result[0].geometry.viewport);\n+                var marker = new google.maps.Marker({\n+                  position: position,\n+                  map: map\n+                });\n+              }\n             });\n-          }\n-        --></script>\n+        </script>\n       <#elseif geoChart.dataSourceId == \"GEOPT_OSM\">\n-        <div id=\"<#if geoChart.id?has_content>${geoChart.id}<#else>map_canvas</#if>\" style=\"border:1px solid #979797; background-color:#e5e3df; width:${geoChart.width}; height:${geoChart.height}; margin:2em auto;\">\n-        </div>\n-        <script src=\"http://www.openlayers.org/api/OpenLayers.js\"></script>\n-        <script>\n-          map = new OpenLayers.Map(\"<#if geoChart.id?has_content>${geoChart.id}<#else>map_canvas</#if>\");\n+        <div id=\"${id}\" style=\"border:1px solid #979797; background-color:#e5e3df; width:${geoChart.width}; height:${geoChart.height}; margin:2em auto;\"></div>\n+        <#-- due to https://github.com/openlayers/openlayers/issues/1025 rather use a local version loaded by framework/common/widget/CommonScreens.xml -->\n+        <#-- script src=\"//www.openlayers.org/api/OpenLayers.js\"></script-->\n+        <script type=\"text/javascript\">\n+          map = new OpenLayers.Map(\"${id}\");           \n           map.addLayer(new OpenLayers.Layer.OSM());\n-          <#if geoChart.center?has_content>\n-            var zoom = ${geoChart.center.zoom};\n-            var center= new OpenLayers.LonLat(${geoChart.center.lon?c},${geoChart.center.lat?c})\n+            var zoom = ${zoom};\n+            var center= new OpenLayers.LonLat(${center.lon?c},${center.lat?c})\n               .transform(new OpenLayers.Projection(\"EPSG:4326\"), // transform from WGS 1984\n-                         map.getProjectionObject() // to Spherical Mercator Projection\n-                         );\n-          </#if>\n-          var markers = new OpenLayers.Layer.Markers( \"Markers\" );\n+                    map.getProjectionObject() // to Spherical Mercator Projection\n+                );\n+          var markers = new OpenLayers.Layer.Markers(\"Markers\");\n           map.addLayer(markers);\n           <#if geoChart.points?has_content>\n             <#list geoChart.points as point>\n               markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(${point.lon?c} ,${point.lat?c}).transform(\n                 new OpenLayers.Projection(\"EPSG:4326\"), map.getProjectionObject())));\n             </#list>\n           </#if>\n+          map.addControl(new OpenLayers.Control.PanZoomBar());\n+          map.addControl(new OpenLayers.Control.NavToolbar());\n+                    \n           map.setCenter(center, zoom);\n-          map.setZoom(15); // 0=World, 19=max zoom in\n+          var newBound = markers.getDataExtent();\n+          map.zoomToExtent(newBound);\n         </script>\n       </#if>\n     </#if>",
                "deletions": 72
            },
            {
                "sha": "66851eed369c6a68ed0c211c3940add83ae0f73f",
                "filename": "framework/common/widget/CommonScreens.xml",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/common/widget/CommonScreens.xml",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/common/widget/CommonScreens.xml",
                "status": "modified",
                "changes": 5,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/common/widget/CommonScreens.xml?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -153,6 +153,8 @@ under the License.\n                 <set field=\"layoutSettings.javaScripts[+0]\" value=\"/images/jquery/jquery-1.8.2.min.js\" global=\"true\" />\n                 <!-- jQuery CSSs -->\n                 <set field=\"layoutSettings.styleSheets[+0]\" value=\"/images/jquery/plugins/asmselect/jquery.asmselect-1.0.4a-beta.css\" global=\"true\" />\n+                \n+                <set field=\"layoutSettings.javaScripts[]\" value=\"/images/OpenLayers-2.13.1.js\" global=\"true\" />\n                 <set field=\"layoutSettings.javaScripts[]\" value=\"/images/selectall.js\" global=\"true\" />\n                 <set field=\"layoutSettings.javaScripts[]\" value=\"/images/fieldlookup.js\" global=\"true\" />\n                 <set field=\"layoutSettings.javaScripts[]\" value=\"/images/GooglemapMarkers.js\" global=\"true\" />\n@@ -483,8 +485,7 @@ under the License.\n                     <!-- jQuery CSSs -->\n                 <set field=\"layoutSettings.styleSheets[+0]\" value=\"/images/jquery/plugins/asmselect/jquery.asmselect-1.0.4a-beta.css\" global=\"true\"/>\n \n-\n-\n+                <set field=\"layoutSettings.javaScripts[]\" value=\"/images/OpenLayers-2.13.1.js\" global=\"true\" />\n                 <set field=\"layoutSettings.javaScripts[]\" value=\"/images/selectall.js\" global=\"true\"/>\n                 <set field=\"layoutSettings.javaScripts[]\" value=\"/images/fieldlookup.js\" global=\"true\"/>\n                 <set field=\"layoutSettings.javaScripts[]\" value=\"/images/GooglemapSimple.js\" global=\"true\"/>",
                "deletions": 2
            },
            {
                "sha": "669778d902f0032d2169cf87b5cf57f37b7630f5",
                "filename": "framework/images/webapp/images/OpenLayers-2.13.1.js",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/OpenLayers-2.13.1.js",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/OpenLayers-2.13.1.js",
                "status": "added",
                "changes": 1443,
                "additions": 1443,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/OpenLayers-2.13.1.js?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "4bcc753a12e9854923af4b9b5b9a4b76f1bc53a6",
                "filename": "framework/images/webapp/images/img/blank.gif",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/blank.gif",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/blank.gif",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/blank.gif?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "c9fd4c411c041fb1efb2f288d509fd4c425fcfa1",
                "filename": "framework/images/webapp/images/img/cloud-popup-relative.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/cloud-popup-relative.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/cloud-popup-relative.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/cloud-popup-relative.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "382a81d9a1af6e7c2b822f8d1edb5684a55b14df",
                "filename": "framework/images/webapp/images/img/drag-rectangle-off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/drag-rectangle-off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/drag-rectangle-off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/drag-rectangle-off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "2ed2d5b088366d411a609fa43650f5bcc7a823f4",
                "filename": "framework/images/webapp/images/img/drag-rectangle-on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/drag-rectangle-on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/drag-rectangle-on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/drag-rectangle-on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "ecedc5ef9f2ea756eaebb78e187b543c221760b2",
                "filename": "framework/images/webapp/images/img/east-mini.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/east-mini.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/east-mini.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/east-mini.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "f346086b38eb98effa931eb7c50ab5a221cf06c0",
                "filename": "framework/images/webapp/images/img/layer-switcher-maximize.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/layer-switcher-maximize.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/layer-switcher-maximize.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/layer-switcher-maximize.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "b4aab0bf784076f86893d0c28a8cae36ec6c113e",
                "filename": "framework/images/webapp/images/img/layer-switcher-minimize.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/layer-switcher-minimize.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/layer-switcher-minimize.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/layer-switcher-minimize.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "f5b4efcfe120ebd4f7d96b22e1972b48d0cc6655",
                "filename": "framework/images/webapp/images/img/marker-blue.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/marker-blue.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/marker-blue.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/marker-blue.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "0b62f9618ace58d9dac39832a6fe506ab1cfbad8",
                "filename": "framework/images/webapp/images/img/marker-gold.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/marker-gold.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/marker-gold.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/marker-gold.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "c36b164b55b241b3f67a3323e4c8a3fa660371d3",
                "filename": "framework/images/webapp/images/img/marker-green.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/marker-green.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/marker-green.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/marker-green.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "ea3e59a560adcaea8b1610034f80b35a980c5c50",
                "filename": "framework/images/webapp/images/img/marker.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/marker.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/marker.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/marker.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "efbf63fb3084ef001da436fe4fa98265f0173257",
                "filename": "framework/images/webapp/images/img/measuring-stick-off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/measuring-stick-off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/measuring-stick-off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/measuring-stick-off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "2d41c84e817d1df8137182cc85e73da050732f8a",
                "filename": "framework/images/webapp/images/img/measuring-stick-on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/measuring-stick-on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/measuring-stick-on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/measuring-stick-on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "dfd7211ffc7bf3ec82c490c7e9f522a872eb5c2b",
                "filename": "framework/images/webapp/images/img/north-mini.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/north-mini.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/north-mini.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/north-mini.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "d1c593e1df5900ffc37e749d748065635e9d6e43",
                "filename": "framework/images/webapp/images/img/panning-hand-off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/panning-hand-off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/panning-hand-off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/panning-hand-off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "9b7e0646d74e76ebff18d2c2646bd5db1c79db68",
                "filename": "framework/images/webapp/images/img/panning-hand-on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/panning-hand-on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/panning-hand-on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/panning-hand-on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "e81f64cdf1f8b8c618f8c97a7c4b06d67955b2fe",
                "filename": "framework/images/webapp/images/img/readme.txt",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/readme.txt",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/readme.txt",
                "status": "added",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/readme.txt?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1,2 @@\n+Used by framework/images/webapp/images/OpenLayers.js\n+See framework/common/webcommon/includes/geolocation.ftl for more",
                "deletions": 0
            },
            {
                "sha": "433536422ead435c8e9e5b9dd1f209c7087994c3",
                "filename": "framework/images/webapp/images/img/slider.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/slider.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/slider.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/slider.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "2970875c4c2588c1345cc2c782cc40e7dfb667e3",
                "filename": "framework/images/webapp/images/img/south-mini.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/south-mini.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/south-mini.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/south-mini.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "363cd3d7b2e9aaa24625d57fb59293a063a55158",
                "filename": "framework/images/webapp/images/img/west-mini.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/west-mini.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/west-mini.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/west-mini.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "8f0d77fff1cc3f68b512dce21bd789d7f59f2f62",
                "filename": "framework/images/webapp/images/img/zoom-minus-mini.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/zoom-minus-mini.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/zoom-minus-mini.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/zoom-minus-mini.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "a73ab4e951b38fde6f1f39124efb1fa01fdc01b2",
                "filename": "framework/images/webapp/images/img/zoom-plus-mini.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/zoom-plus-mini.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/zoom-plus-mini.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/zoom-plus-mini.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "aebf22d95e8225bf127954281349c54f0b596f04",
                "filename": "framework/images/webapp/images/img/zoom-world-mini.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/zoom-world-mini.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/zoom-world-mini.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/zoom-world-mini.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "47110ab3e5a5e3e9d01a9f6ad1ae4aa08d4e3a28",
                "filename": "framework/images/webapp/images/img/zoombar.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/zoombar.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/img/zoombar.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/img/zoombar.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "1b748ef3e5905001e63682af6cc2e6efa8bcb893",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/google.css",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/google.css",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/google.css",
                "status": "added",
                "changes": 9,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/google.css?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1,9 @@\n+.olLayerGoogleCopyright {\n+    right: 3px;\n+    bottom: 2px;\n+    left: auto;  \n+}\n+.olLayerGooglePoweredBy {\n+    left: 2px;\n+    bottom: 2px;   \n+}",
                "deletions": 0
            },
            {
                "sha": "c0e07ace6cac1e2e983ad79962dd0eb326b31fe1",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/google.tidy.css",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/google.tidy.css",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/google.tidy.css",
                "status": "added",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/google.tidy.css?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1 @@\n+.olLayerGoogleCopyright{right:3px;bottom:2px;left:auto;}.olLayerGooglePoweredBy{left:2px;bottom:2px;}\n\\ No newline at end of file",
                "deletions": 0
            },
            {
                "sha": "a0fd7c63920dc3d088c99665009301aa1e92305e",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/ie6-style.css",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/ie6-style.css",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/ie6-style.css",
                "status": "added",
                "changes": 10,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/ie6-style.css?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1,10 @@\n+.olControlZoomPanel div {\n+    background-image: url(img/zoom-panel-NOALPHA.png);\n+}\n+.olControlPanPanel div {\n+    background-image: url(img/pan-panel-NOALPHA.png);\n+}\n+.olControlEditingToolbar {\n+    width: 200px;\n+}\n+",
                "deletions": 0
            },
            {
                "sha": "7a23bbc7806968802bc089446ef6877957506b60",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/ie6-style.tidy.css",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/ie6-style.tidy.css",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/ie6-style.tidy.css",
                "status": "added",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/ie6-style.tidy.css?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1 @@\n+.olControlZoomPanel div{background-image:url(img/zoom-panel-NOALPHA.png);}.olControlPanPanel div{background-image:url(img/pan-panel-NOALPHA.png);}.olControlEditingToolbar{width:200px;}\n\\ No newline at end of file",
                "deletions": 0
            },
            {
                "sha": "26c023309a83e6487e7d4893a0071384dcc13cdc",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/add_point_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/add_point_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/add_point_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/add_point_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "1294a2c160af789cf615576f8e23ac32c7c736d3",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/add_point_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/add_point_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/add_point_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/add_point_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "4bcc753a12e9854923af4b9b5b9a4b76f1bc53a6",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/blank.gif",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/blank.gif",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/blank.gif",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/blank.gif?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "a8958de9b429ae00f56bb282c4b133ecbaf334bd",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/close.gif",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/close.gif",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/close.gif",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/close.gif?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "382a81d9a1af6e7c2b822f8d1edb5684a55b14df",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/drag-rectangle-off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/drag-rectangle-off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/drag-rectangle-off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/drag-rectangle-off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "2ed2d5b088366d411a609fa43650f5bcc7a823f4",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/drag-rectangle-on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/drag-rectangle-on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/drag-rectangle-on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/drag-rectangle-on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "a4d67b3b97802b8a2ca281f82351da5d5ab98f81",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_line_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_line_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_line_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_line_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "90dcf3e35f963efb4a948bb618921bf25dde49df",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_line_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_line_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_line_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_line_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "56334072a886b0c32d35d33a1bf77e43567c8f25",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_point_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_point_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_point_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_point_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "fff50b7b0ed8f74272310a17a0e3910087a1e939",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_point_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_point_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_point_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_point_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "917af3597b67c353025191184572e460ec08754a",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_polygon_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_polygon_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_polygon_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_polygon_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "05a2cc5a8c5fe75aa0de1b99cef405dc6732d704",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_polygon_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_polygon_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_polygon_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/draw_polygon_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "5977856cf7cd3ee88f8c98fd4722a166636eba6d",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/editing_tool_bar.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/editing_tool_bar.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/editing_tool_bar.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/editing_tool_bar.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "ed4472dd8971c49f17a1f9bf972a04f0b9bca523",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/move_feature_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/move_feature_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/move_feature_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/move_feature_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "62226a2d71adbde8377b7ff7df08349e23f48546",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/move_feature_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/move_feature_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/move_feature_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/move_feature_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "84e3489852eba0359b7eb48e520798b442897b55",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/navigation_history.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/navigation_history.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/navigation_history.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/navigation_history.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "a82cf5fc54cc0064099720322d62e9bf4dde05c9",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/overview_replacement.gif",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/overview_replacement.gif",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/overview_replacement.gif",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/overview_replacement.gif?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "6987268840f5325b526364a929132c55c63e2f7c",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan-panel-NOALPHA.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan-panel-NOALPHA.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan-panel-NOALPHA.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan-panel-NOALPHA.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "dfe67481ca1b7e781ff179f1243396c93e459f38",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan-panel.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan-panel.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan-panel.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan-panel.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "30b2aed4d94eee3d9cd12469e71e35a6889db174",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "e3953a82488fb1363e074aad3dab3ef10665265d",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/pan_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "d1c593e1df5900ffc37e749d748065635e9d6e43",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/panning-hand-off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/panning-hand-off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/panning-hand-off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/panning-hand-off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "9b7e0646d74e76ebff18d2c2646bd5db1c79db68",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/panning-hand-on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/panning-hand-on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/panning-hand-on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/panning-hand-on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "76c8606f550c1d95cb9df2e8b8656447e8a9e58d",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/remove_point_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/remove_point_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/remove_point_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/remove_point_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "cc8d7b2c679d5b2588363020226523f455cb50e3",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/remove_point_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/remove_point_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/remove_point_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/remove_point_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "aa4883bcd458311d93861a9a9d7574a53b979e97",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/ruler.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/ruler.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/ruler.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/ruler.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "3d305b622a6afc555ef30e0cd140460c15031fdd",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/save_features_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/save_features_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/save_features_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/save_features_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "5640ae888ba2bee0e9758d24e2cf144db4cf685f",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/save_features_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/save_features_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/save_features_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/save_features_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "9149a24209a235c1681e032de44bcd2d0b340a90",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_next_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_next_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_next_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_next_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "e41fb7bddfa186b688e88991fe805c70c7158608",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_next_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_next_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_next_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_next_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "8a9ef2179068162b995102feba2a248d53136484",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_previous_off.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_previous_off.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_previous_off.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_previous_off.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "c009c255ef8f129ad1b562f1f699de02fcb3c2a5",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_previous_on.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_previous_on.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_previous_on.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/view_previous_on.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "cdde6fc7ee621e569bd7f0e62eabf756ed9b8367",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/zoom-panel-NOALPHA.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/zoom-panel-NOALPHA.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/zoom-panel-NOALPHA.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/zoom-panel-NOALPHA.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "c91a4ef3c935bd5540c8997341cdff48b3376cc4",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/zoom-panel.png",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/zoom-panel.png",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/zoom-panel.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/img/zoom-panel.png?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "deletions": 0
            },
            {
                "sha": "cbed84e8c4aee4b2b494a8ac591e92d6855f59fd",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.css",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.css",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.css",
                "status": "added",
                "changes": 516,
                "additions": 516,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.css?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1,516 @@\n+div.olMap {\n+    z-index: 0;\n+    padding: 0 !important;\n+    margin: 0 !important;\n+    cursor: default;\n+}\n+\n+div.olMapViewport {\n+    text-align: left;\n+    -ms-touch-action: none;\n+}\n+\n+div.olLayerDiv {\n+   -moz-user-select: none;\n+   -khtml-user-select: none;\n+}\n+\n+.olLayerGoogleCopyright {\n+    left: 2px;\n+    bottom: 2px;\n+}\n+.olLayerGoogleV3.olLayerGoogleCopyright {\n+    right: auto !important;\n+}\n+.olLayerGooglePoweredBy {\n+    left: 2px;\n+    bottom: 15px;\n+}\n+.olLayerGoogleV3.olLayerGooglePoweredBy {\n+    bottom: 15px !important;\n+}\n+/* GMaps should not set styles on its container */\n+.olForeignContainer {\n+    opacity: 1 !important;\n+}\n+.olControlAttribution {\n+    font-size: smaller;\n+    right: 3px;\n+    bottom: 4.5em;\n+    position: absolute;\n+    display: block;\n+}\n+.olControlScale {\n+    right: 3px;\n+    bottom: 3em;\n+    display: block;\n+    position: absolute;\n+    font-size: smaller;\n+}\n+.olControlScaleLine {\n+   display: block;\n+   position: absolute;\n+   left: 10px;\n+   bottom: 15px;\n+   font-size: xx-small;\n+}\n+.olControlScaleLineBottom {\n+   border: solid 2px black;\n+   border-bottom: none;\n+   margin-top:-2px;\n+   text-align: center;\n+}\n+.olControlScaleLineTop {\n+   border: solid 2px black;\n+   border-top: none;\n+   text-align: center;\n+}\n+\n+.olControlPermalink {\n+    right: 3px;\n+    bottom: 1.5em;\n+    display: block;\n+    position: absolute;\n+    font-size: smaller;\n+}\n+\n+div.olControlMousePosition {\n+    bottom: 0;\n+    right: 3px;\n+    display: block;\n+    position: absolute;\n+    font-family: Arial;\n+    font-size: smaller;\n+}\n+\n+.olControlOverviewMapContainer {\n+    position: absolute;\n+    bottom: 0;\n+    right: 0;\n+}\n+\n+.olControlOverviewMapElement {\n+    padding: 10px 18px 10px 10px;\n+    background-color: #00008B;\n+    -moz-border-radius: 1em 0 0 0;\n+}\n+\n+.olControlOverviewMapMinimizeButton,\n+.olControlOverviewMapMaximizeButton {\n+    height: 18px;\n+    width: 18px;\n+    right: 0;\n+    bottom: 80px;\n+    cursor: pointer;\n+}\n+\n+.olControlOverviewMapExtentRectangle {\n+    overflow: hidden;\n+    background-image: url(\"img/blank.gif\");\n+    cursor: move;\n+    border: 2px dotted red;\n+}\n+.olControlOverviewMapRectReplacement {\n+    overflow: hidden;\n+    cursor: move;\n+    background-image: url(\"img/overview_replacement.gif\");\n+    background-repeat: no-repeat;\n+    background-position: center;\n+}\n+\n+.olLayerGeoRSSDescription {\n+    float:left;\n+    width:100%;\n+    overflow:auto;\n+    font-size:1.0em;\n+}\n+.olLayerGeoRSSClose {\n+    float:right;\n+    color:gray;\n+    font-size:1.2em;\n+    margin-right:6px;\n+    font-family:sans-serif;\n+}\n+.olLayerGeoRSSTitle {\n+    float:left;font-size:1.2em;\n+}\n+\n+.olPopupContent {\n+    padding:5px;\n+    overflow: auto;\n+}\n+\n+.olControlNavigationHistory {\n+   background-image: url(\"img/navigation_history.png\");\n+   background-repeat: no-repeat;\n+   width:  24px;\n+   height: 24px;\n+\n+}\n+.olControlNavigationHistoryPreviousItemActive {\n+  background-position: 0 0;\n+}\n+.olControlNavigationHistoryPreviousItemInactive {\n+   background-position: 0 -24px;\n+}\n+.olControlNavigationHistoryNextItemActive {\n+   background-position: -24px 0;\n+}\n+.olControlNavigationHistoryNextItemInactive {\n+   background-position: -24px -24px;\n+}\n+\n+div.olControlSaveFeaturesItemActive {\n+    background-image: url(img/save_features_on.png);\n+    background-repeat: no-repeat;\n+    background-position: 0 1px;\n+}\n+div.olControlSaveFeaturesItemInactive {\n+    background-image: url(img/save_features_off.png);\n+    background-repeat: no-repeat;\n+    background-position: 0 1px;\n+}\n+\n+.olHandlerBoxZoomBox {\n+    border: 2px solid red;\n+    position: absolute;\n+    background-color: white;\n+    opacity: 0.50;\n+    font-size: 1px;\n+    filter: alpha(opacity=50);\n+}\n+.olHandlerBoxSelectFeature {\n+    border: 2px solid blue;\n+    position: absolute;\n+    background-color: white;\n+    opacity: 0.50;\n+    font-size: 1px;\n+    filter: alpha(opacity=50);\n+}\n+\n+.olControlPanPanel {\n+    top: 10px;\n+    left: 5px;\n+}\n+\n+.olControlPanPanel div {\n+    background-image: url(img/pan-panel.png);\n+    height: 18px;\n+    width: 18px;\n+    cursor: pointer;\n+    position: absolute;\n+}\n+\n+.olControlPanPanel .olControlPanNorthItemInactive {\n+    top: 0;\n+    left: 9px;\n+    background-position: 0 0;\n+}\n+.olControlPanPanel .olControlPanSouthItemInactive {\n+    top: 36px;\n+    left: 9px;\n+    background-position: 18px 0;\n+}\n+.olControlPanPanel .olControlPanWestItemInactive {\n+    position: absolute;\n+    top: 18px;\n+    left: 0;\n+    background-position: 0 18px;\n+}\n+.olControlPanPanel .olControlPanEastItemInactive {\n+    top: 18px;\n+    left: 18px;\n+    background-position: 18px 18px;\n+}\n+\n+.olControlZoomPanel {\n+    top: 71px;\n+    left: 14px;\n+}\n+\n+.olControlZoomPanel div {\n+    background-image: url(img/zoom-panel.png);\n+    position: absolute;\n+    height: 18px;\n+    width: 18px;\n+    cursor: pointer;\n+}\n+\n+.olControlZoomPanel .olControlZoomInItemInactive {\n+    top: 0;\n+    left: 0;\n+    background-position: 0 0;\n+}\n+\n+.olControlZoomPanel .olControlZoomToMaxExtentItemInactive {\n+    top: 18px;\n+    left: 0;\n+    background-position: 0 -18px;\n+}\n+\n+.olControlZoomPanel .olControlZoomOutItemInactive {\n+    top: 36px;\n+    left: 0;\n+    background-position: 0 18px;\n+}\n+\n+/*\n+ * When a potential text is bigger than the image it move the image\n+ * with some headers (closes #3154)\n+ */\n+.olControlPanZoomBar div {\n+    font-size: 1px;\n+}\n+\n+.olPopupCloseBox {\n+  background: url(\"img/close.gif\") no-repeat;\n+  cursor: pointer;\n+}\n+\n+.olFramedCloudPopupContent {\n+    padding: 5px;\n+    overflow: auto;\n+}\n+\n+.olControlNoSelect {\n+ -moz-user-select: none;\n+ -khtml-user-select: none;\n+}\n+\n+.olImageLoadError {\n+    background-color: pink;\n+    opacity: 0.5;\n+    filter: alpha(opacity=50); /* IE */\n+}\n+\n+/**\n+ * Cursor styles\n+ */\n+\n+.olCursorWait {\n+    cursor: wait;\n+}\n+.olDragDown {\n+    cursor: move;\n+}\n+.olDrawBox {\n+    cursor: crosshair;\n+}\n+.olControlDragFeatureOver {\n+    cursor: move;\n+}\n+.olControlDragFeatureActive.olControlDragFeatureOver.olDragDown {\n+    cursor: -moz-grabbing;\n+}\n+\n+/**\n+ * Layer switcher\n+ */\n+.olControlLayerSwitcher {\n+    position: absolute;\n+    top: 25px;\n+    right: 0;\n+    width: 20em;\n+    font-family: sans-serif;\n+    font-weight: bold;\n+    margin-top: 3px;\n+    margin-left: 3px;\n+    margin-bottom: 3px;\n+    font-size: smaller;\n+    color: white;\n+    background-color: transparent;\n+}\n+\n+.olControlLayerSwitcher .layersDiv {\n+    padding-top: 5px;\n+    padding-left: 10px;\n+    padding-bottom: 5px;\n+    padding-right: 10px;\n+    background-color: darkblue;\n+}\n+\n+.olControlLayerSwitcher .layersDiv .baseLbl,\n+.olControlLayerSwitcher .layersDiv .dataLbl {\n+    margin-top: 3px;\n+    margin-left: 3px;\n+    margin-bottom: 3px;\n+}\n+\n+.olControlLayerSwitcher .layersDiv .baseLayersDiv,\n+.olControlLayerSwitcher .layersDiv .dataLayersDiv {\n+    padding-left: 10px;\n+}\n+\n+.olControlLayerSwitcher .maximizeDiv,\n+.olControlLayerSwitcher .minimizeDiv {\n+    width: 18px;\n+    height: 18px;\n+    top: 5px;\n+    right: 0;\n+    cursor: pointer;\n+}\n+\n+.olBingAttribution {\n+    color: #DDD;\n+}\n+.olBingAttribution.road {\n+    color: #333;\n+}\n+\n+.olGoogleAttribution.hybrid, .olGoogleAttribution.satellite {\n+    color: #EEE;\n+}\n+.olGoogleAttribution {\n+    color: #333;\n+}\n+span.olGoogleAttribution a {\n+    color: #77C;\n+}\n+span.olGoogleAttribution.hybrid a, span.olGoogleAttribution.satellite a {\n+    color: #EEE;\n+}\n+\n+/**\n+ * Editing and navigation icons.\n+ * (using the editing_tool_bar.png sprint image)\n+ */\n+.olControlNavToolbar ,\n+.olControlEditingToolbar {\n+    margin: 5px 5px 0 0;\n+}\n+.olControlNavToolbar div,\n+.olControlEditingToolbar div {\n+    background-image: url(\"img/editing_tool_bar.png\");\n+    background-repeat: no-repeat;\n+    margin: 0 0 5px 5px;\n+    width: 24px;\n+    height: 22px;\n+    cursor: pointer\n+}\n+/* positions */\n+.olControlEditingToolbar {\n+    right: 0;\n+    top: 0;\n+}\n+.olControlNavToolbar {\n+    top: 295px;\n+    left: 9px;\n+}\n+/* layouts */\n+.olControlEditingToolbar div {\n+    float: right;\n+}\n+/* individual controls */\n+.olControlNavToolbar .olControlNavigationItemInactive,\n+.olControlEditingToolbar .olControlNavigationItemInactive {\n+    background-position: -103px -1px;\n+}\n+.olControlNavToolbar .olControlNavigationItemActive ,\n+.olControlEditingToolbar .olControlNavigationItemActive  {\n+    background-position: -103px -24px;\n+}\n+.olControlNavToolbar .olControlZoomBoxItemInactive {\n+    background-position: -128px -1px;\n+}\n+.olControlNavToolbar .olControlZoomBoxItemActive  {\n+    background-position: -128px -24px;\n+}\n+.olControlEditingToolbar .olControlDrawFeaturePointItemInactive {\n+    background-position: -77px -1px;\n+}\n+.olControlEditingToolbar .olControlDrawFeaturePointItemActive {\n+    background-position: -77px -24px;\n+}\n+.olControlEditingToolbar .olControlDrawFeaturePathItemInactive {\n+    background-position: -51px -1px;\n+}\n+.olControlEditingToolbar .olControlDrawFeaturePathItemActive {\n+    background-position: -51px -24px;\n+}\n+.olControlEditingToolbar .olControlDrawFeaturePolygonItemInactive{\n+    background-position: -26px -1px;\n+}\n+.olControlEditingToolbar .olControlDrawFeaturePolygonItemActive {\n+    background-position: -26px -24px;\n+}\n+\n+div.olControlZoom {\n+    position: absolute;\n+    top: 8px;\n+    left: 8px;\n+    background: rgba(255,255,255,0.4);\n+    border-radius: 4px;\n+    padding: 2px;\n+}\n+div.olControlZoom a {\n+    display: block;\n+    margin: 1px;\n+    padding: 0;\n+    color: white;\n+    font-size: 18px;\n+    font-family: 'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif;\n+    font-weight: bold;\n+    text-decoration: none;\n+    text-align: center;\n+    height: 22px;\n+    width:22px;\n+    line-height: 19px;\n+    background: #130085; /* fallback for IE - IE6 requires background shorthand*/\n+    background: rgba(0, 60, 136, 0.5);\n+    filter: alpha(opacity=80);\n+}\n+div.olControlZoom a:hover {\n+    background: #130085; /* fallback for IE */\n+    background: rgba(0, 60, 136, 0.7);\n+    filter: alpha(opacity=100);\n+}\n+@media only screen and (max-width: 600px) {\n+    div.olControlZoom a:hover {\n+        background: rgba(0, 60, 136, 0.5);\n+    }\n+}\n+a.olControlZoomIn {\n+    border-radius: 4px 4px 0 0;\n+}\n+a.olControlZoomOut {\n+    border-radius: 0 0 4px 4px;\n+}\n+\n+\n+/**\n+ * Animations\n+ */\n+\n+.olLayerGrid .olTileImage {\n+    -webkit-transition: opacity 0.2s linear;\n+    -moz-transition: opacity 0.2s linear;\n+    -o-transition: opacity 0.2s linear;\n+    transition: opacity 0.2s linear;\n+}\n+\n+/* Turn on GPU support where available */\n+.olTileImage {\n+    -webkit-transform: translateZ(0);\n+    -moz-transform: translateZ(0);\n+    -o-transform: translateZ(0);\n+    -ms-transform: translateZ(0);\n+    transform: translateZ(0);\n+    -webkit-backface-visibility: hidden;\n+    -moz-backface-visibility: hidden;\n+    -ms-backface-visibility: hidden;\n+    backface-visibility: hidden;\n+    -webkit-perspective: 1000;\n+    -moz-perspective: 1000;\n+    -ms-perspective: 1000;\n+    perspective: 1000;\n+}\n+\n+/* when replacing tiles, do not show tile and backbuffer at the same time */\n+.olTileReplacing {\n+    display: none;\n+}\n+\n+/* override any max-width image settings (e.g. bootstrap.css) */\n+img.olTileImage {\n+    max-width: none;\n+}",
                "deletions": 0
            },
            {
                "sha": "92e7d00d4ca4742096ace2c8a95a89a4c8025657",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.mobile.css",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.mobile.css",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.mobile.css",
                "status": "added",
                "changes": 70,
                "additions": 70,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.mobile.css?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1,70 @@\n+div.olControlZoom {\n+    position: absolute;\n+    top: 8px;\n+    left: 8px;\n+    background: rgba(255,255,255,0.4);\n+    border-radius: 4px;\n+    padding: 2px;\n+}\n+* {\n+    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n+}\n+div.olControlZoom a {\n+    display: block;\n+    margin: 1px;\n+    padding: 0;\n+    color: white;\n+    font-size: 28px;\n+    font-family: sans-serif;\n+    font-weight: bold;\n+    text-decoration: none;\n+    text-align: center;\n+    height: 32px;\n+    width: 32px;\n+    line-height: 28px;\n+    text-shadow: 0 0 3px rgba(0,0,0,0.8);\n+    background: #130085; /* fallback for IE - IE6 requires background shorthand*/\n+    background: rgba(0, 60, 136, 0.5);\n+    filter: alpha(opacity=80);\n+}\n+a.olControlZoomIn {\n+    border-radius: 4px 4px 0 0;\n+}\n+a.olControlZoomOut {\n+    border-radius: 0 0 4px 4px;\n+}\n+div.olControlZoom a:hover {\n+    background: #130085; /* fallback for IE */\n+    background: rgba(0, 60, 136, 0.7);\n+    filter: alpha(opacity=100);\n+}\n+@media only screen and (max-width: 600px) {\n+    div.olControlZoom a:hover {\n+        background: rgba(0, 60, 136, 0.5);\n+    }\n+}\n+div.olMapViewport {\n+    -ms-touch-action: none;\n+}\n+.olLayerGrid .olTileImage {\n+    -webkit-transition: opacity 0.2s linear;\n+    -moz-transition: opacity 0.2s linear;\n+    -o-transition: opacity 0.2s linear;\n+    transition: opacity 0.2s linear;\n+}\n+/* Turn on GPU support where available */\n+.olTileImage {\n+    -webkit-transform: translateZ(0);\n+    -moz-transform: translateZ(0);\n+    -o-transform: translateZ(0);\n+    -ms-transform: translateZ(0);\n+    transform: translateZ(0);\n+    -webkit-backface-visibility: hidden;\n+    -moz-backface-visibility: hidden;\n+    -ms-backface-visibility: hidden;\n+    backface-visibility: hidden;\n+    -webkit-perspective: 1000;\n+    -moz-perspective: 1000;\n+    -ms-perspective: 1000;\n+    perspective: 1000;\n+}",
                "deletions": 0
            },
            {
                "sha": "bf7eeaf3df6c528ea9f817b73df788609a7e77f9",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.mobile.tidy.css",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.mobile.tidy.css",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.mobile.tidy.css",
                "status": "added",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.mobile.tidy.css?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1 @@\n+div.olControlZoom{position:absolute;top:8px;left:8px;background:rgba(255,255,255,0.4);border-radius:4px;padding:2px;}*{-webkit-tap-highlight-color:rgba(0,0,0,0);}div.olControlZoom a{display:block;color:#FFF;font-size:28px;font-family:sans-serif;font-weight:700;text-decoration:none;text-align:center;height:32px;width:32px;line-height:28px;text-shadow:0 0 3px rgba(0,0,0,0.8);background:rgba(0,60,136,0.5);filter:alpha(opacity=80);margin:1px;padding:0;}a.olControlZoomIn{border-radius:4px 4px 0 0;}a.olControlZoomOut{border-radius:0 0 4px 4px;}div.olControlZoom a:hover{background:rgba(0,60,136,0.7);filter:alpha(opacity=100);}div.olMapViewport{-ms-touch-action:none;}.olLayerGrid .olTileImage{-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;-o-transition:opacity .2s linear;transition:opacity .2s linear;}.olTileImage{-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-o-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;-moz-perspective:1000;-ms-perspective:1000;perspective:1000;}@media only screen and max-width 600px{div.olControlZoom a:hover{background:rgba(0,60,136,0.5);}}\n\\ No newline at end of file",
                "deletions": 0
            },
            {
                "sha": "f973d450b96dab6cf5fc057094cd7612eb542229",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.tidy.css",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.tidy.css",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.tidy.css",
                "status": "added",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/default/style.tidy.css?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1 @@\n+div.olMap{z-index:0;cursor:default;margin:0!important;padding:0!important;}div.olMapViewport{text-align:left;-ms-touch-action:none;}.olLayerGoogleCopyright{left:2px;bottom:2px;}.olLayerGoogleV3.olLayerGoogleCopyright{right:auto!important;}.olLayerGooglePoweredBy{left:2px;bottom:15px;}.olLayerGoogleV3.olLayerGooglePoweredBy{bottom:15px!important;}.olForeignContainer{opacity:1!important;}.olControlAttribution{font-size:smaller;right:3px;bottom:4.5em;position:absolute;display:block;}.olControlScale{right:3px;bottom:3em;display:block;position:absolute;font-size:smaller;}.olControlScaleLine{display:block;position:absolute;left:10px;bottom:15px;font-size:xx-small;}.olControlScaleLineBottom{border:solid 2px #000;border-bottom:none;margin-top:-2px;text-align:center;}.olControlScaleLineTop{border:solid 2px #000;border-top:none;text-align:center;}.olControlPermalink{right:3px;bottom:1.5em;display:block;position:absolute;font-size:smaller;}div.olControlMousePosition{bottom:0;right:3px;display:block;position:absolute;font-family:Arial;font-size:smaller;}.olControlOverviewMapContainer{position:absolute;bottom:0;right:0;}.olControlOverviewMapElement{background-color:#00008B;-moz-border-radius:1em 0 0;padding:10px 18px 10px 10px;}.olControlOverviewMapMinimizeButton,.olControlOverviewMapMaximizeButton{height:18px;width:18px;right:0;bottom:80px;cursor:pointer;}.olControlOverviewMapExtentRectangle{overflow:hidden;background-image:url(img/blank.gif);cursor:move;border:2px dotted red;}.olControlOverviewMapRectReplacement{overflow:hidden;cursor:move;background-image:url(img/overview_replacement.gif);background-repeat:no-repeat;background-position:center;}.olLayerGeoRSSDescription{float:left;width:100%;overflow:auto;font-size:1em;}.olLayerGeoRSSClose{float:right;color:gray;font-size:1.2em;margin-right:6px;font-family:sans-serif;}.olLayerGeoRSSTitle{float:left;font-size:1.2em;}.olControlNavigationHistory{background-image:url(img/navigation_history.png);background-repeat:no-repeat;width:24px;height:24px;}.olControlNavigationHistoryPreviousItemActive{background-position:0 0;}.olControlNavigationHistoryPreviousItemInactive{background-position:0 -24px;}.olControlNavigationHistoryNextItemActive{background-position:-24px 0;}.olControlNavigationHistoryNextItemInactive{background-position:-24px -24px;}div.olControlSaveFeaturesItemActive{background-image:url(img/save_features_on.png);background-repeat:no-repeat;background-position:0 1px;}div.olControlSaveFeaturesItemInactive{background-image:url(img/save_features_off.png);background-repeat:no-repeat;background-position:0 1px;}.olHandlerBoxZoomBox{border:2px solid red;position:absolute;background-color:#FFF;opacity:.5;font-size:1px;filter:alpha(opacity=50);}.olHandlerBoxSelectFeature{border:2px solid blue;position:absolute;background-color:#FFF;opacity:.5;font-size:1px;filter:alpha(opacity=50);}.olControlPanPanel{top:10px;left:5px;}.olControlPanPanel div{background-image:url(img/pan-panel.png);height:18px;width:18px;cursor:pointer;position:absolute;}.olControlPanPanel .olControlPanNorthItemInactive{top:0;left:9px;background-position:0 0;}.olControlPanPanel .olControlPanSouthItemInactive{top:36px;left:9px;background-position:18px 0;}.olControlPanPanel .olControlPanWestItemInactive{position:absolute;top:18px;left:0;background-position:0 18px;}.olControlPanPanel .olControlPanEastItemInactive{top:18px;left:18px;background-position:18px 18px;}.olControlZoomPanel{top:71px;left:14px;}.olControlZoomPanel div{background-image:url(img/zoom-panel.png);position:absolute;height:18px;width:18px;cursor:pointer;}.olControlZoomPanel .olControlZoomInItemInactive{top:0;left:0;background-position:0 0;}.olControlZoomPanel .olControlZoomToMaxExtentItemInactive{top:18px;left:0;background-position:0 -18px;}.olControlZoomPanel .olControlZoomOutItemInactive{top:36px;left:0;background-position:0 18px;}.olControlPanZoomBar div{font-size:1px;}.olPopupCloseBox{background:url(img/close.gif) no-repeat;cursor:pointer;}.olImageLoadError{background-color:#FFC0CB;opacity:.5;filter:alpha(opacity=50);}.olCursorWait{cursor:wait;}.olDrawBox{cursor:crosshair;}.olControlDragFeatureActive.olControlDragFeatureOver.olDragDown{cursor:0;}.olControlLayerSwitcher{position:absolute;top:25px;right:0;width:20em;font-family:sans-serif;font-weight:700;margin-top:3px;margin-left:3px;margin-bottom:3px;font-size:smaller;color:#FFF;background-color:transparent;}.olControlLayerSwitcher .layersDiv{background-color:#00008B;padding:5px 10px;}.olControlLayerSwitcher .layersDiv .baseLbl,.olControlLayerSwitcher .layersDiv .dataLbl{margin-top:3px;margin-left:3px;margin-bottom:3px;}.olControlLayerSwitcher .layersDiv .baseLayersDiv,.olControlLayerSwitcher .layersDiv .dataLayersDiv{padding-left:10px;}.olControlLayerSwitcher .maximizeDiv,.olControlLayerSwitcher .minimizeDiv{width:18px;height:18px;top:5px;right:0;cursor:pointer;}.olBingAttribution{color:#DDD;}span.olGoogleAttribution a{color:#77C;}.olControlNavToolbar,.olControlEditingToolbar{margin:5px 5px 0 0;}.olControlNavToolbar div,.olControlEditingToolbar div{background-image:url(img/editing_tool_bar.png);background-repeat:no-repeat;width:24px;height:22px;cursor:pointer;margin:0 0 5px 5px;}.olControlEditingToolbar{right:0;top:0;}.olControlNavToolbar{top:295px;left:9px;}.olControlEditingToolbar div{float:right;}.olControlNavToolbar .olControlNavigationItemInactive,.olControlEditingToolbar .olControlNavigationItemInactive{background-position:-103px -1px;}.olControlNavToolbar .olControlNavigationItemActive,.olControlEditingToolbar .olControlNavigationItemActive{background-position:-103px -24px;}.olControlNavToolbar .olControlZoomBoxItemInactive{background-position:-128px -1px;}.olControlNavToolbar .olControlZoomBoxItemActive{background-position:-128px -24px;}.olControlEditingToolbar .olControlDrawFeaturePointItemInactive{background-position:-77px -1px;}.olControlEditingToolbar .olControlDrawFeaturePointItemActive{background-position:-77px -24px;}.olControlEditingToolbar .olControlDrawFeaturePathItemInactive{background-position:-51px -1px;}.olControlEditingToolbar .olControlDrawFeaturePathItemActive{background-position:-51px -24px;}.olControlEditingToolbar .olControlDrawFeaturePolygonItemInactive{background-position:-26px -1px;}.olControlEditingToolbar .olControlDrawFeaturePolygonItemActive{background-position:-26px -24px;}div.olControlZoom{position:absolute;top:8px;left:8px;background:rgba(255,255,255,0.4);border-radius:4px;padding:2px;}div.olControlZoom a{display:block;color:#FFF;font-size:18px;font-family:'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif;font-weight:700;text-decoration:none;text-align:center;height:22px;width:22px;line-height:19px;background:rgba(0,60,136,0.5);filter:alpha(opacity=80);margin:1px;padding:0;}div.olControlZoom a:hover{background:rgba(0,60,136,0.7);filter:alpha(opacity=100);}a.olControlZoomIn{border-radius:4px 4px 0 0;}a.olControlZoomOut{border-radius:0 0 4px 4px;}.olLayerGrid .olTileImage{-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;-o-transition:opacity .2s linear;transition:opacity .2s linear;}.olTileImage{-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-o-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;-moz-perspective:1000;-ms-perspective:1000;perspective:1000;}.olTileReplacing{display:none;}img.olTileImage{max-width:none;}div.olLayerDiv,.olControlNoSelect{-khtml-user-select:none;-moz-user-select:none;}.olPopupContent,.olFramedCloudPopupContent{overflow:auto;padding:5px;}.olDragDown,.olControlDragFeatureOver{cursor:move;}.olBingAttribution.road,.olGoogleAttribution{color:#333;}.olGoogleAttribution.hybrid,.olGoogleAttribution.satellite,span.olGoogleAttribution.hybrid a,span.olGoogleAttribution.satellite a{color:#EEE;}@media only screen and max-width 600px{div.olControlZoom a:hover{background:rgba(0,60,136,0.5);}}\n\\ No newline at end of file",
                "deletions": 0
            },
            {
                "sha": "4e080ef0139561365cfe844b8919b324cf9c1346",
                "filename": "framework/images/webapp/images/theme.openlayer.unused.ootb/readme.txt",
                "blob_url": "https://github.com/apache/ofbiz-framework/blob/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/readme.txt",
                "raw_url": "https://github.com/apache/ofbiz-framework/raw/c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f/framework/images/webapp/images/theme.openlayer.unused.ootb/readme.txt",
                "status": "added",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/ofbiz-framework/contents/framework/images/webapp/images/theme.openlayer.unused.ootb/readme.txt?ref=c28edba6d89d3ebf1c4c8b63aef72a19f6b6fd9f",
                "patch": "@@ -0,0 +1,3 @@\n+Used by framework/images/webapp/images/OpenLayers.js\n+See framework/common/webcommon/includes/geolocation.ftl for more\n+But actually not using it simply centers the map which is better!",
                "deletions": 0
            }
        ]
    }
]