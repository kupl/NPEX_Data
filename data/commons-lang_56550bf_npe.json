[
    {
        "repo": "commons-lang",
        "commit": "https://github.com/apache/commons-lang/commit/56550bf2779990da78d2bac1d8287c8a693c6e4b",
        "bug_id": "commons-lang_56550bf",
        "message": "Applying fix for LANG-552. StringUtils.replaceEach(String, String[], String[]) no longer NPEs when null appears in the last String[]\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/lang/trunk@890212 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-lang/commit/dafb8e85dcb76a299c6add11ecb62acf702d6c2a",
        "patched_files": [
            "StringUtils.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 3,
                "raw_url": "https://github.com/apache/commons-lang/raw/56550bf2779990da78d2bac1d8287c8a693c6e4b/src/java/org/apache/commons/lang3/StringUtils.java",
                "contents_url": "https://api.github.com/repos/apache/commons-lang/contents/src/java/org/apache/commons/lang3/StringUtils.java?ref=56550bf2779990da78d2bac1d8287c8a693c6e4b",
                "filename": "src/java/org/apache/commons/lang3/StringUtils.java",
                "deletions": 0,
                "sha": "f6cabeed86c3dd567cb4567b318e4f756054cdce",
                "blob_url": "https://github.com/apache/commons-lang/blob/56550bf2779990da78d2bac1d8287c8a693c6e4b/src/java/org/apache/commons/lang3/StringUtils.java",
                "patch": "@@ -3673,6 +3673,9 @@ private static String replaceEach(String text, String[] searchList, String[] rep\n \n         // count the replacement text elements that are larger than their corresponding text being replaced\n         for (int i = 0; i < searchList.length; i++) {\n+            if (searchList[i] == null || replacementList[i] == null) {\n+                continue;\n+            }\n             int greater = replacementList[i].length() - searchList[i].length();\n             if (greater > 0) {\n                 increase += 3 * greater; // assume 3 matches",
                "changes": 3
            },
            {
                "status": "modified",
                "additions": 4,
                "raw_url": "https://github.com/apache/commons-lang/raw/56550bf2779990da78d2bac1d8287c8a693c6e4b/src/test/org/apache/commons/lang3/StringUtilsTest.java",
                "contents_url": "https://api.github.com/repos/apache/commons-lang/contents/src/test/org/apache/commons/lang3/StringUtilsTest.java?ref=56550bf2779990da78d2bac1d8287c8a693c6e4b",
                "filename": "src/test/org/apache/commons/lang3/StringUtilsTest.java",
                "deletions": 0,
                "sha": "7a74598a69fdfdff0491e8d11e661480951b3c8f",
                "blob_url": "https://github.com/apache/commons-lang/blob/56550bf2779990da78d2bac1d8287c8a693c6e4b/src/test/org/apache/commons/lang3/StringUtilsTest.java",
                "patch": "@@ -1033,6 +1033,10 @@ public void testReplace_StringStringArrayStringArray() {\n                 \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"N\", \"O\", \"P\", \"Q\", \n                 \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \n                 \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"5\", \"6\", \"7\", \"8\", \"9\", \"1\", \"2\", \"3\", \"4\"}));\n+\n+        // Test null safety inside arrays - LANG-552\n+        assertEquals(StringUtils.replaceEach(\"aba\", new String[]{\"a\"}, new String[]{null}),\"aba\");\n+        assertEquals(StringUtils.replaceEach(\"aba\", new String[]{\"a\", \"b\"}, new String[]{\"c\", null}),\"cbc\");\n     }\n \n     /**",
                "changes": 4
            }
        ],
        "unit_tests": [
            "StringUtilsTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "src/test/org/apache/commons/lang3/StringUtilsTest.java",
        "buggy_files": [
            "src/java/org/apache/commons/lang3/StringUtils.java"
        ],
        "fixed": true
    }
]