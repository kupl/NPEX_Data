[
    {
        "repo": "commons-dbcp",
        "commit": "https://github.com/apache/commons-dbcp/commit/6bcbadcc35c5f78cc04d6916beab6c5e10a1a016",
        "bug_id": "commons-dbcp_6bcbadc",
        "message": "[DBCP-446] NullPointerException thrown when calling ManagedConnection.isClosed().\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/dbcp/trunk@1753636 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-dbcp/commit/0f656aa336092cfb1662560da39c07bf575b2ebe",
        "patched_files": [
            "changes.xml",
            "DelegatingConnection.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 3,
                "raw_url": "https://github.com/apache/commons-dbcp/raw/6bcbadcc35c5f78cc04d6916beab6c5e10a1a016/src/changes/changes.xml",
                "contents_url": "https://api.github.com/repos/apache/commons-dbcp/contents/src/changes/changes.xml?ref=6bcbadcc35c5f78cc04d6916beab6c5e10a1a016",
                "filename": "src/changes/changes.xml",
                "deletions": 0,
                "sha": "13f9f5c157e69a7e3b011c0fcf1bfe62cd4b0602",
                "blob_url": "https://github.com/apache/commons-dbcp/blob/6bcbadcc35c5f78cc04d6916beab6c5e10a1a016/src/changes/changes.xml",
                "patch": "@@ -67,6 +67,9 @@ The <action> type attribute can be add,update,fix,remove.\n         enables container-managed pools created from JNDI Resource\n         definitions to enable JMX by supplying a valid root JMX name.  \n       </action>\n+      <action dev=\"ggregory\" type=\"fix\" issue=\"DBCP-446\" due-to=\"Gary Gregory, feng yang, Euclides M, Phil Steitz\">\n+        NullPointerException thrown when calling ManagedConnection.isClosed().\n+      </action>\n       <action dev=\"psteitz\" type=\"fix\" issue=\"DBCP-444\">\n         InvalidateConnection can result in closed connection returned by getConnection.\n       </action>",
                "changes": 3
            },
            {
                "status": "modified",
                "additions": 1,
                "raw_url": "https://github.com/apache/commons-dbcp/raw/6bcbadcc35c5f78cc04d6916beab6c5e10a1a016/src/main/java/org/apache/commons/dbcp2/DelegatingConnection.java",
                "contents_url": "https://api.github.com/repos/apache/commons-dbcp/contents/src/main/java/org/apache/commons/dbcp2/DelegatingConnection.java?ref=6bcbadcc35c5f78cc04d6916beab6c5e10a1a016",
                "filename": "src/main/java/org/apache/commons/dbcp2/DelegatingConnection.java",
                "deletions": 2,
                "sha": "ac8320ed009cf304b37d3803cfd56f916bb49d9a",
                "blob_url": "https://github.com/apache/commons-dbcp/blob/6bcbadcc35c5f78cc04d6916beab6c5e10a1a016/src/main/java/org/apache/commons/dbcp2/DelegatingConnection.java",
                "patch": "@@ -591,10 +591,9 @@ public void setTypeMap(final Map<String,Class<?>> map) throws SQLException {\n         }\n     }\n \n-\n     @Override\n     public boolean isClosed() throws SQLException {\n-        return _closed || _conn.isClosed();\n+        return _closed || _conn == null || _conn.isClosed();\n     }\n \n     protected void checkOpen() throws SQLException {",
                "changes": 3
            },
            {
                "status": "modified",
                "additions": 8,
                "raw_url": "https://github.com/apache/commons-dbcp/raw/6bcbadcc35c5f78cc04d6916beab6c5e10a1a016/src/test/java/org/apache/commons/dbcp2/TestDelegatingConnection.java",
                "contents_url": "https://api.github.com/repos/apache/commons-dbcp/contents/src/test/java/org/apache/commons/dbcp2/TestDelegatingConnection.java?ref=6bcbadcc35c5f78cc04d6916beab6c5e10a1a016",
                "filename": "src/test/java/org/apache/commons/dbcp2/TestDelegatingConnection.java",
                "deletions": 0,
                "sha": "610daf468d400c9d63cdf2b73d7da58b7b9f9730",
                "blob_url": "https://github.com/apache/commons-dbcp/blob/6bcbadcc35c5f78cc04d6916beab6c5e10a1a016/src/test/java/org/apache/commons/dbcp2/TestDelegatingConnection.java",
                "patch": "@@ -139,4 +139,12 @@ public void testIsClosed() throws Exception {\n         assertTrue(conn.isClosed());\n     }\n \n+    @Test\n+    public void testIsClosedNullDelegate() throws Exception {\n+        conn.checkOpen();\n+        assertFalse(conn.isClosed());\n+        conn.setDelegate(null);\n+        assertTrue(conn.isClosed());\n+    }\n+\n }",
                "changes": 8
            }
        ],
        "unit_tests": [
            "TestDelegatingConnection.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "src/test/java/org/apache/commons/dbcp2/TestDelegatingConnection.java",
        "buggy_files": [
            "src/changes/changes.xml",
            "src/main/java/org/apache/commons/dbcp2/DelegatingConnection.java"
        ],
        "fixed": true
    }
]