{
    "maven-jxr_aae189e": {
        "repo": "maven-jxr",
        "message": "JXR-18: JXR Fails with NPE if the .java file is empty (class commented out)\n\no verify that jf.getClassType() is not null\no added a test case\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/jxr/trunk@498112 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-jxr/commit/aae189e47b87ca51ef048f851b0241f1dcd69587",
        "parent": "https://github.com/apache/maven-jxr/commit/d5b9c0771d276f9ea0517e211693aa34e896be4f",
        "bug_id": "maven-jxr_aae189e",
        "file": [
            {
                "sha": "4f902bcabaeaf544c384a5df92a861183b7cbd43",
                "filename": "src/main/java/org/apache/maven/jxr/JavaCodeTransform.java",
                "blob_url": "https://github.com/apache/maven-jxr/blob/aae189e47b87ca51ef048f851b0241f1dcd69587/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java",
                "raw_url": "https://github.com/apache/maven-jxr/raw/aae189e47b87ca51ef048f851b0241f1dcd69587/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java",
                "status": "modified",
                "changes": 23,
                "additions": 17,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java?ref=aae189e47b87ca51ef048f851b0241f1dcd69587",
                "patch": "@@ -282,20 +282,31 @@ public String getHeader()\n             .append( \"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\" xml:lang=\\\"\" ).append( locale )\n             .append( \"\\\" lang=\\\"\" ).append( locale ).append( \"\\\">\\n\" ).append( \"<head>\\n\" )\n             .append( \"<meta http-equiv=\\\"content-type\\\" content=\\\"text/html; charset=\" ).append( outputEncoding )\n-            .append( \"\\\" />\" );\n+            .append( \"\\\" />\\n\" );\n \n         // title (\"classname xref\")\n+        buffer.append( \"<title>\" );\n         try\n         {\n-            buffer.append( \"<title>\" ).append( fileManager.getFile( this.getCurrentFilename() )\n-                .getClassType().getName() ).append( \" xref</title>\\n\" );\n-\n+            JavaFile javaFile = fileManager.getFile( this.getCurrentFilename() );\n+            if ( javaFile.getClassType() != null )\n+            {\n+                buffer.append( javaFile.getClassType().getName() );\n+            }\n+            else\n+            {\n+                buffer.append( this.getCurrentFilename() );\n+            }\n+            buffer.append( \" \" );\n         }\n         catch ( IOException e )\n         {\n-            buffer.append( \"<title>xref</title>\\n\" );\n             e.printStackTrace();\n         }\n+        finally\n+        {\n+            buffer.append( \"xref</title>\\n\" );\n+        }\n \n         // stylesheet link\n         buffer.append( \"<link type=\\\"text/css\\\" rel=\\\"stylesheet\\\" href=\\\"\" ).append( this.getPackageRoot() )\n@@ -1096,7 +1107,7 @@ private final String getFileOverview()\n                 }\n                 else\n                 {\n-                    System.out.println( this.getCurrentFilename() );\n+                    return \"\";\n                 }\n                 javadocURI.append( \".html\" );\n ",
                "deletions": 6
            },
            {
                "sha": "4527ff1e660a6033d489ed3236a824003339be1b",
                "filename": "src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java",
                "blob_url": "https://github.com/apache/maven-jxr/blob/aae189e47b87ca51ef048f851b0241f1dcd69587/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java",
                "raw_url": "https://github.com/apache/maven-jxr/raw/aae189e47b87ca51ef048f851b0241f1dcd69587/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java",
                "status": "modified",
                "changes": 22,
                "additions": 16,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java?ref=aae189e47b87ca51ef048f851b0241f1dcd69587",
                "patch": "@@ -45,13 +45,23 @@ protected void setUp()\n     public void testTransform()\r\n         throws Exception\r\n     {\r\n-        File sourceFile = new File(\r\n-            System.getProperty( \"basedir\" ) + \"/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java\" );\r\n+        File sourceFile = new File( System.getProperty( \"user.dir\" )\r\n+            + \"/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java\" );\r\n         assertTrue( sourceFile.exists() );\r\n-        codeTransform.transform( sourceFile.getAbsolutePath(),\r\n-                                 System.getProperty( \"basedir\" ) + \"/target/JavaCodeTransformTest.html\", Locale.ENGLISH,\r\n-                                 \"ISO-8859-1\", \"ISO-8859-1\", \"\", \"\" );\r\n-        assertTrue( new File( System.getProperty( \"basedir\" ), \"/target/JavaCodeTransformTest.html\" ).exists() );\r\n+\r\n+        codeTransform.transform( sourceFile.getAbsolutePath(), System.getProperty( \"user.dir\" )\r\n+            + \"/target/JavaCodeTransformTest.html\", Locale.ENGLISH, \"ISO-8859-1\", \"ISO-8859-1\", \"\", \"\" );\r\n+        assertTrue( new File( System.getProperty( \"user.dir\" ), \"/target/JavaCodeTransformTest.html\" ).exists() );\r\n     }\r\n \r\n+    public void testTransformWithEmptyClassFile()\r\n+        throws Exception\r\n+    {\r\n+        File sourceFile = new File( System.getProperty( \"user.dir\" ) + \"/src/test/resources/EmptyClass.java\" );\r\n+        assertTrue( sourceFile.exists() );\r\n+\r\n+        codeTransform.transform( sourceFile.getAbsolutePath(), System.getProperty( \"user.dir\" )\r\n+            + \"/target/EmptyClass.html\", Locale.ENGLISH, \"ISO-8859-1\", \"ISO-8859-1\", \"\", \"\" );\r\n+        assertTrue( new File( System.getProperty( \"user.dir\" ), \"/target/EmptyClass.html\" ).exists() );\r\n+    }\r\n }\r",
                "deletions": 6
            },
            {
                "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
                "filename": "src/test/resources/EmptyClass.java",
                "blob_url": "https://github.com/apache/maven-jxr/blob/aae189e47b87ca51ef048f851b0241f1dcd69587/src/test/resources/EmptyClass.java",
                "raw_url": "https://github.com/apache/maven-jxr/raw/aae189e47b87ca51ef048f851b0241f1dcd69587/src/test/resources/EmptyClass.java",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/src/test/resources/EmptyClass.java?ref=aae189e47b87ca51ef048f851b0241f1dcd69587",
                "deletions": 0
            }
        ],
        "patched_files": [
            "JavaCodeTransform.java",
            "EmptyClass.java"
        ],
        "unit_tests": [
            "JavaCodeTransformTest.java"
        ]
    },
    "maven-jxr_49b4b00": {
        "repo": "maven-jxr",
        "message": "JXR-88: jxr:aggregate and jxr:test-aggregate\no add code, and test coverage, for test-aggregate\no repair NPE in test report; someone seemed to have left two copies of something in there, and one of the two\nlacked protection from an NPE case. I'm puzzled as to why this bit me, but the fix seems clear enough.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/jxr/trunk@1145180 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-jxr/commit/49b4b00f3033333644aaba6cc6b36317304ade31",
        "parent": "https://github.com/apache/maven-jxr/commit/47ceb81607619daf17273f95e8b2279334518c8c",
        "bug_id": "maven-jxr_49b4b00",
        "file": [
            {
                "sha": "bbc3edec4dc4796b7c04dc1c3f2b5df534917c08",
                "filename": "maven-jxr-plugin/pom.xml",
                "blob_url": "https://github.com/apache/maven-jxr/blob/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/pom.xml",
                "raw_url": "https://github.com/apache/maven-jxr/raw/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/pom.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/maven-jxr-plugin/pom.xml?ref=49b4b00f3033333644aaba6cc6b36317304ade31",
                "patch": "@@ -184,7 +184,7 @@ under the License.\n           <plugin>\n             <groupId>org.apache.maven.plugins</groupId>\n             <artifactId>maven-invoker-plugin</artifactId>\n-            <version>1.3</version>\n+            <version>1.5</version>\n             <configuration>\n               <projectsDirectory>src/it</projectsDirectory>\n               <cloneProjectsTo>${project.build.directory}/it</cloneProjectsTo>",
                "deletions": 1
            },
            {
                "sha": "e2b9ebf5e1edea84f116a8ad5024183cff9fa848",
                "filename": "maven-jxr-plugin/src/it/aggregate/p2/src/test/java/org/apache/maven/jxr/it2/AppTest.java",
                "blob_url": "https://github.com/apache/maven-jxr/blob/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/it/aggregate/p2/src/test/java/org/apache/maven/jxr/it2/AppTest.java",
                "raw_url": "https://github.com/apache/maven-jxr/raw/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/it/aggregate/p2/src/test/java/org/apache/maven/jxr/it2/AppTest.java",
                "status": "renamed",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/maven-jxr-plugin/src/it/aggregate/p2/src/test/java/org/apache/maven/jxr/it2/AppTest.java?ref=49b4b00f3033333644aaba6cc6b36317304ade31",
                "patch": "@@ -1,4 +1,4 @@\n-package org.apache.maven.jxr.it;\n+package org.apache.maven.jxr.it2;\n \n /*\n  * Licensed to the Apache Software Foundation (ASF) under one",
                "deletions": 1,
                "previous_filename": "maven-jxr-plugin/src/it/aggregate/p2/src/test/java/org/apache/maven/jxr/it/AppTest.java"
            },
            {
                "sha": "d96896f59d3268a2ca86d99a5f32e0149947e295",
                "filename": "maven-jxr-plugin/src/it/aggregate/pom.xml",
                "blob_url": "https://github.com/apache/maven-jxr/blob/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/it/aggregate/pom.xml",
                "raw_url": "https://github.com/apache/maven-jxr/raw/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/it/aggregate/pom.xml",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/maven-jxr-plugin/src/it/aggregate/pom.xml?ref=49b4b00f3033333644aaba6cc6b36317304ade31",
                "patch": "@@ -53,7 +53,7 @@ under the License.\n \t<executions>\n \t  <execution>\n \t    <id>aggregate</id>\n-\t    <goals><goal>aggregate</goal></goals>\n+\t    <goals><goal>aggregate</goal><goal>test-aggregate</goal></goals>\n \t    <phase>site</phase>\n \t  </execution>\n \t</executions>\n@@ -67,6 +67,7 @@ under the License.\n             <id>aggregate</id>\n             <goals>\n               <goal>aggregate</goal>\n+              <goal>test-aggregate</goal>\n             </goals>\n             <phase>site</phase>\n           </execution>",
                "deletions": 1
            },
            {
                "sha": "461a7c71ca6073812bc81bbeb5029c23fd66b730",
                "filename": "maven-jxr-plugin/src/it/aggregate/verify.groovy",
                "blob_url": "https://github.com/apache/maven-jxr/blob/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/it/aggregate/verify.groovy",
                "raw_url": "https://github.com/apache/maven-jxr/raw/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/it/aggregate/verify.groovy",
                "status": "added",
                "changes": 43,
                "additions": 43,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/maven-jxr-plugin/src/it/aggregate/verify.groovy?ref=49b4b00f3033333644aaba6cc6b36317304ade31",
                "patch": "@@ -0,0 +1,43 @@\n+\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+assert new File( basedir, 'target/site' ).exists();\n+\n+content = new File( basedir, 'target/site/project-reports.html' ).text;\n+\n+assert content.contains( 'xref/index.html' );\n+assert content.contains( 'xref-test/index.html' );\n+\n+assert new File( basedir, 'target/site/xref' ).exists();\n+assert new File( basedir, 'target/site/xref/index.html' ).exists();\n+assert new File( basedir, 'target/site/xref/org/apache/maven/jxr/it/App.html' ).exists();\n+assert new File( basedir, 'target/site/xref/org/apache/maven/jxr/it2/App.html' ).exists();\n+\n+assert new File( basedir, 'target/site/xref-test' ).exists();\n+assert new File( basedir, 'target/site/xref-test/index.html' ).exists();\n+assert new File( basedir, 'target/site/xref-test/org/apache/maven/jxr/it/AppTest.html' ).exists();\n+assert new File( basedir, 'target/site/xref-test/org/apache/maven/jxr/it2/AppTest.html' ).exists();\n+\n+content = new File( basedir, 'target/site/xref/org/apache/maven/jxr/it/App.html' ).text;\n+assert content.contains( 'App2.html' );\n+\n+content = new File( basedir, 'target/site/xref/org/apache/maven/jxr/it2/App.html' ).text;\n+assert content.contains( 'App2.html' );\n+\n+return true;\n\\ No newline at end of file",
                "deletions": 0
            },
            {
                "sha": "bf5492d6d9fd9c440c580d6b134b87a8b79e1acf",
                "filename": "maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/AggregatorJxrTestReport.java",
                "blob_url": "https://github.com/apache/maven-jxr/blob/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/AggregatorJxrTestReport.java",
                "raw_url": "https://github.com/apache/maven-jxr/raw/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/AggregatorJxrTestReport.java",
                "status": "added",
                "changes": 37,
                "additions": 37,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/AggregatorJxrTestReport.java?ref=49b4b00f3033333644aaba6cc6b36317304ade31",
                "patch": "@@ -0,0 +1,37 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.maven.plugin.jxr;\n+\n+/**\n+ * Generates a combined JXR report for test code in an aggregating project.\n+ * \n+ * @goal test-aggregate\n+ * @aggregator\n+ * @since 2.3\n+ *\n+ */\n+public class AggregatorJxrTestReport\n+    extends JxrTestReport\n+{\n+    protected boolean isAggregate()\n+    {\n+        return true;\n+    }\n+\n+}",
                "deletions": 0
            },
            {
                "sha": "2de209f0cc93ff982f3d540eeccb5f0cf1b6d89c",
                "filename": "maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/JxrReportUtil.java",
                "blob_url": "https://github.com/apache/maven-jxr/blob/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/JxrReportUtil.java",
                "raw_url": "https://github.com/apache/maven-jxr/raw/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/JxrReportUtil.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/JxrReportUtil.java?ref=49b4b00f3033333644aaba6cc6b36317304ade31",
                "patch": "@@ -57,6 +57,7 @@\n \n     /**\n      * Determine if javadoc is aggregated in this project, paying attention to both\n+     * TODO: take cognizance of javadoc versus test-javadoc\n      * the old parameter and the new mojo.\n      * @param project\n      * @return",
                "deletions": 0
            },
            {
                "sha": "1e8bd02fc131336f77efe8f8493c1736183b138c",
                "filename": "maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/JxrTestReport.java",
                "blob_url": "https://github.com/apache/maven-jxr/blob/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/JxrTestReport.java",
                "raw_url": "https://github.com/apache/maven-jxr/raw/49b4b00f3033333644aaba6cc6b36317304ade31/maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/JxrTestReport.java",
                "status": "modified",
                "changes": 5,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/maven-jxr/contents/maven-jxr-plugin/src/main/java/org/apache/maven/plugin/jxr/JxrTestReport.java?ref=49b4b00f3033333644aaba6cc6b36317304ade31",
                "patch": "@@ -91,11 +91,6 @@ protected List getSourceRoots( MavenProject project )\n     {\n         List l = new ArrayList();\n \n-        if ( !\"pom\".equals( project.getPackaging().toLowerCase() ) )\n-        {\n-            l.addAll( project.getExecutionProject().getTestCompileSourceRoots() );\n-        }\n-\n         if ( project.getExecutionProject() != null )\n         {\n             if ( !\"pom\".equals( project.getExecutionProject().getPackaging().toLowerCase() ) )",
                "deletions": 5
            }
        ],
        "patched_files": [
            "App.java",
            "AggregatorJxrTestReport.java",
            "JxrTestReport.java",
            "JxrReportUtil.java"
        ],
        "unit_tests": [
            "JxrTestReportTest.java",
            "AppTest.java"
        ]
    }
}