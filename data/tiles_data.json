[{"commit": "https://github.com/apache/tiles/commit/3a03bfd44c322113360298431fbd9a25900a6350", "parent": "https://github.com/apache/tiles/commit/7fbeaabb91693456a41ec2a47f97c7282e3e0627", "message": "TILES-437\nNow Definition.toString does not cause a NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/tiles/framework/trunk@790231 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "tiles_1", "file": [{"additions": 3, "raw_url": "https://github.com/apache/tiles/raw/3a03bfd44c322113360298431fbd9a25900a6350/tiles-api/src/main/java/org/apache/tiles/Definition.java", "blob_url": "https://github.com/apache/tiles/blob/3a03bfd44c322113360298431fbd9a25900a6350/tiles-api/src/main/java/org/apache/tiles/Definition.java", "sha": "a11ddd54bf73bde40f89da48503372d9c8e5fa08", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/tiles/contents/tiles-api/src/main/java/org/apache/tiles/Definition.java?ref=3a03bfd44c322113360298431fbd9a25900a6350", "patch": "@@ -299,13 +299,13 @@ public String toString() {\n         return \"{name=\"\n             + name\n             + \", template=\"\n-            + templateAttribute.getValue()\n+            + (templateAttribute != null ? templateAttribute.getValue() : \"<null>\")\n             + \", role=\"\n-            + templateAttribute.getRoles()\n+            + (templateAttribute != null ? templateAttribute.getRoles() : \"<null>\")\n             + \", preparerInstance=\"\n             + preparer\n             + \", attributes=\"\n             + attributes\n-            + \"}\\n\";\n+            + \"}\";\n     }\n }", "filename": "tiles-api/src/main/java/org/apache/tiles/Definition.java"}, {"additions": 20, "raw_url": "https://github.com/apache/tiles/raw/3a03bfd44c322113360298431fbd9a25900a6350/tiles-api/src/test/java/org/apache/tiles/TestDefinition.java", "blob_url": "https://github.com/apache/tiles/blob/3a03bfd44c322113360298431fbd9a25900a6350/tiles-api/src/test/java/org/apache/tiles/TestDefinition.java", "sha": "555a46607dd76445ed7dfb61cc206bd917501e83", "changes": 20, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/tiles/contents/tiles-api/src/test/java/org/apache/tiles/TestDefinition.java?ref=3a03bfd44c322113360298431fbd9a25900a6350", "patch": "@@ -157,4 +157,24 @@ public void testInherit() {\n                 \"localLanguage\", context.getTemplateAttribute()\n                         .getExpressionObject().getLanguage());\n     }\n+\n+    /**\n+     * Tests {@link Definition#toString()}.\n+     */\n+    public void testToString() {\n+        Definition definition = new Definition();\n+        definition.setName(\"myDefinitionName\");\n+        assertEquals(\n+                \"{name=myDefinitionName, template=<null>, role=<null>, preparerInstance=null, attributes=null}\",\n+                definition.toString());\n+        definition.setTemplateAttribute(Attribute.createTemplateAttribute(\"myTemplate\"));\n+        assertEquals(\n+                \"{name=myDefinitionName, template=myTemplate, role=null, preparerInstance=null, attributes=null}\",\n+                definition.toString());\n+        definition.putAttribute(\"myAttributeName\", new Attribute(\"myAttributeValue\"));\n+        assertEquals(\n+                \"{name=myDefinitionName, template=myTemplate, role=null, preparerInstance=null, \"\n+                        + \"attributes={myAttributeName=myAttributeValue}}\",\n+                definition.toString());\n+    }\n }", "filename": "tiles-api/src/test/java/org/apache/tiles/TestDefinition.java"}], "repo": "tiles"}, {"commit": "https://github.com/apache/tiles/commit/93d446173367bee1056bbd14d2139a23b30bc65d", "parent": "https://github.com/apache/tiles/commit/ded340ef750f648690bc5aff9170bf8457be9ec0", "message": "TREQ-10 - NPE while reading the session scope when no session has been created\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/tiles/framework/trunk@1199216 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "tiles_2", "file": [{"additions": 2, "raw_url": "https://github.com/apache/tiles/raw/93d446173367bee1056bbd14d2139a23b30bc65d/tiles-request/tiles-request-servlet/src/main/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractor.java", "blob_url": "https://github.com/apache/tiles/blob/93d446173367bee1056bbd14d2139a23b30bc65d/tiles-request/tiles-request-servlet/src/main/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractor.java", "sha": "6d4974328a0c0bfb100b48b0db25b8bdd8e791bf", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/tiles/contents/tiles-request/tiles-request-servlet/src/main/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractor.java?ref=93d446173367bee1056bbd14d2139a23b30bc65d", "patch": "@@ -21,6 +21,7 @@\n package org.apache.tiles.request.servlet.extractor;\n \n import java.util.Enumeration;\n+import java.util.Collections;\n \n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpSession;\n@@ -68,7 +69,7 @@ public void removeValue(String name) {\n         if (session != null) {\n             return session.getAttributeNames();\n         }\n-        return null;\n+        return Collections.enumeration(Collections.<String>emptySet());\n     }\n \n     @Override", "filename": "tiles-request/tiles-request-servlet/src/main/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractor.java"}, {"additions": 3, "raw_url": "https://github.com/apache/tiles/raw/93d446173367bee1056bbd14d2139a23b30bc65d/tiles-request/tiles-request-servlet/src/test/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractorTest.java", "blob_url": "https://github.com/apache/tiles/blob/93d446173367bee1056bbd14d2139a23b30bc65d/tiles-request/tiles-request-servlet/src/test/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractorTest.java", "sha": "8be27b4bea0c2167056ccf8627133a657fddf081", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/tiles/contents/tiles-request/tiles-request-servlet/src/test/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractorTest.java?ref=93d446173367bee1056bbd14d2139a23b30bc65d", "patch": "@@ -114,7 +114,9 @@ public void testGetKeysNoSession() {\n         expect(request.getSession(false)).andReturn(null);\n \n         replay(request, session);\n-        assertNull(extractor.getKeys());\n+        Enumeration<String> keys = extractor.getKeys();\n+        assertNotNull(keys);\n+        assertFalse(keys.hasMoreElements());\n         verify(request, session);\n     }\n ", "filename": "tiles-request/tiles-request-servlet/src/test/java/org/apache/tiles/request/servlet/extractor/SessionScopeExtractorTest.java"}], "repo": "tiles"}]
