[{"commit": "https://github.com/apache/maven-assembly-plugin/commit/d57f866618a8251b71b609b13b6697fe7735fafd", "parent": "https://github.com/apache/maven-assembly-plugin/commit/640b366049cf6adb31391aed127e973fcd61f4b7", "message": "rewrote the verify script as Groovy since the bsh version breaks with NPE on ASF Jenkins without any explanation\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@1743287 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-assembly-plugin_1", "file": [{"additions": 7, "raw_url": "https://github.com/apache/maven-assembly-plugin/raw/d57f866618a8251b71b609b13b6697fe7735fafd/src/it/projects/bugs/massembly-731/verify.groovy", "blob_url": "https://github.com/apache/maven-assembly-plugin/blob/d57f866618a8251b71b609b13b6697fe7735fafd/src/it/projects/bugs/massembly-731/verify.groovy", "previous_filename": "src/it/projects/bugs/massembly-731/verify.bsh", "sha": "f09fcb4931a3694b366b747e5116a9b571ecac2c", "changes": 39, "status": "renamed", "deletions": 32, "contents_url": "https://api.github.com/repos/apache/maven-assembly-plugin/contents/src/it/projects/bugs/massembly-731/verify.groovy?ref=d57f866618a8251b71b609b13b6697fe7735fafd", "patch": "@@ -22,40 +22,15 @@ import java.net.*;\n import org.apache.commons.compress.archivers.zip.ZipFile;\n import org.apache.commons.compress.archivers.zip.ZipArchiveEntry;\n \n-\n-\n-boolean result = true;\n-\n-try\n-{\n-    File zipFile = new File( basedir, \"target/project2-0.0.1-SNAPSHOT-deployable.zip\" );\n+File zipFile = new File( basedir, \"target/project2-0.0.1-SNAPSHOT-deployable.zip\" );\n     \n-    if ( !zipFile.exists() || zipFile.isDirectory() )\n-    {\n-        System.err.println( \"zip-file is missing or a directory.\" );\n-        result = false;\n-    }\n+assert zipFile.exists() && zipFile.isFile()\n     \n-    ZipFile zf = new ZipFile( zipFile );\n-\n-    ZipArchiveEntry ze = zf.getEntry( \"project2-0.0.1-SNAPSHOT/symlinks/src/symDir\" );\n-    if ( ze == null )\n-    {\n-        System.err.println( \"symDir is missing.\" );\n-        result = false;\n-    }\n+ZipFile zf = new ZipFile( zipFile );\n \n-    if (!ze.isUnixSymlink()) {\n-        System.err.println( \"symDir is not a symnlink.\" );\n-        result = false;\n-    }\n+ZipArchiveEntry ze = zf.getEntry( \"project2-0.0.1-SNAPSHOT/symlinks/src/symDir\" );\n+assert ze != null\n \n-    zf.close();\n-}\n-catch( IOException e )\n-{\n-    e.printStackTrace();\n-    result = false;\n-}\n+assert ze.isUnixSymlink()\n \n-return result;\n+zf.close();", "filename": "src/it/projects/bugs/massembly-731/verify.groovy"}], "repo": "maven-assembly-plugin"}, {"commit": "https://github.com/apache/maven-assembly-plugin/commit/88ba2aeec4c04c979bbbfda69839fd9b77ae0068", "parent": "https://github.com/apache/maven-assembly-plugin/commit/72e7ea02029c7f0bb208c75758c300d8dbe0f9df", "message": "[MASSEMBLY-306] Adding integration test to verify that NPE is fixed.\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@697230 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-assembly-plugin_2", "file": [{"additions": 1, "raw_url": "https://github.com/apache/maven-assembly-plugin/raw/88ba2aeec4c04c979bbbfda69839fd9b77ae0068/pom.xml", "blob_url": "https://github.com/apache/maven-assembly-plugin/blob/88ba2aeec4c04c979bbbfda69839fd9b77ae0068/pom.xml", "sha": "9e8969acc4c9535bf876024fa43fabab458acddb", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/maven-assembly-plugin/contents/pom.xml?ref=88ba2aeec4c04c979bbbfda69839fd9b77ae0068", "patch": "@@ -24,7 +24,7 @@\n   <parent>\n     <artifactId>maven-plugins</artifactId>\n     <groupId>org.apache.maven.plugins</groupId>\n-    <version>12-SNAPSHOT</version>\n+    <version>11</version>\n   </parent>\n \n   <artifactId>maven-assembly-plugin</artifactId>", "filename": "pom.xml"}, {"additions": 2, "raw_url": "https://github.com/apache/maven-assembly-plugin/raw/88ba2aeec4c04c979bbbfda69839fd9b77ae0068/src/it/projects/bugs/massembly-306/goals.txt", "blob_url": "https://github.com/apache/maven-assembly-plugin/blob/88ba2aeec4c04c979bbbfda69839fd9b77ae0068/src/it/projects/bugs/massembly-306/goals.txt", "sha": "b9fba2dd06904a4b30d076b74f640d73dbeccad6", "changes": 2, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-assembly-plugin/contents/src/it/projects/bugs/massembly-306/goals.txt?ref=88ba2aeec4c04c979bbbfda69839fd9b77ae0068", "patch": "@@ -0,0 +1,2 @@\n+clean\n+package\n\\ No newline at end of file", "filename": "src/it/projects/bugs/massembly-306/goals.txt"}, {"additions": 47, "raw_url": "https://github.com/apache/maven-assembly-plugin/raw/88ba2aeec4c04c979bbbfda69839fd9b77ae0068/src/it/projects/bugs/massembly-306/pom.xml", "blob_url": "https://github.com/apache/maven-assembly-plugin/blob/88ba2aeec4c04c979bbbfda69839fd9b77ae0068/src/it/projects/bugs/massembly-306/pom.xml", "sha": "efe479d2bfe5ecb46b38a5ba06df9e8ddd1bb98f", "changes": 47, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-assembly-plugin/contents/src/it/projects/bugs/massembly-306/pom.xml?ref=88ba2aeec4c04c979bbbfda69839fd9b77ae0068", "patch": "@@ -0,0 +1,47 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.maven.plugin.assembly.test</groupId>\n+    <artifactId>it-project-parent</artifactId>\n+    <version>1</version>\n+  </parent>\n+  \n+  <artifactId>massembly-306</artifactId>\n+  <packaging>jar</packaging>\n+  <name>massembly-306</name>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>log4j</groupId>\n+      <artifactId>log4j</artifactId>\n+      \n+      <!-- Both the range AND the scope are critical here, \n+           since this artifact will be EXCLUDED from the depSet. -->\n+      <version>[1.2.13]</version>\n+      <scope>provided</scope>\n+    </dependency>\n+  </dependencies>\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-assembly-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <id>make-assembly</id>\n+            <phase>package</phase>\n+            <goals>\n+              <goal>single</goal>\n+            </goals>\n+            <configuration>\n+              <descriptorRefs>\n+                <descriptorRef>jar-with-dependencies</descriptorRef>\n+              </descriptorRefs>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+    </plugins>\n+  </build>\n+</project>", "filename": "src/it/projects/bugs/massembly-306/pom.xml"}], "repo": "maven-assembly-plugin"}, {"commit": "https://github.com/apache/maven-assembly-plugin/commit/34a1fcb1c010d0c99430572042883f075eb110e2", "parent": "https://github.com/apache/maven-assembly-plugin/commit/9215b0578818264d9f1fe788af8a0412f2ab4d0d", "message": "[MASSEMBLY-277] Fixing potential NPE in AddFileSetsTask.\nSubmitted by: Sejal Patel\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@628942 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-assembly-plugin_3", "file": [{"additions": 2, "raw_url": "https://github.com/apache/maven-assembly-plugin/raw/34a1fcb1c010d0c99430572042883f075eb110e2/src/main/java/org/apache/maven/plugin/assembly/archive/task/AddFileSetsTask.java", "blob_url": "https://github.com/apache/maven-assembly-plugin/blob/34a1fcb1c010d0c99430572042883f075eb110e2/src/main/java/org/apache/maven/plugin/assembly/archive/task/AddFileSetsTask.java", "sha": "518f4c85340bf7764715eed21557011ed12f16f0", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/maven-assembly-plugin/contents/src/main/java/org/apache/maven/plugin/assembly/archive/task/AddFileSetsTask.java?ref=34a1fcb1c010d0c99430572042883f075eb110e2", "patch": "@@ -97,13 +97,13 @@ protected void addFileSet( FileSet fileSet, Archiver archiver, AssemblerConfigur\n \n         FileSetFormatter fileSetFormatter = new FileSetFormatter( configSource, logger );\n \n-        File basedir = project.getBasedir();\n-\n         if ( project == null )\n         {\n             project = configSource.getProject();\n         }\n \n+        File basedir = project.getBasedir();\n+\n         String destDirectory = fileSet.getOutputDirectory();\n \n         if ( destDirectory == null )", "filename": "src/main/java/org/apache/maven/plugin/assembly/archive/task/AddFileSetsTask.java"}], "repo": "maven-assembly-plugin"}, {"commit": "https://github.com/apache/maven-assembly-plugin/commit/7a368eb84eb64fdd467bb9c2bfba1927863358c1", "parent": "https://github.com/apache/maven-assembly-plugin/commit/e48579113c3dd58d690c40699e1f0ab4ed926c2f", "message": "MSITE-138: site:stage does not create xref\n\no replaced all annotations for outputdirectory in Mojo Reports: ${project.build.directory}/site =>  ${project.reporting.outputDirectory}\no setReportOutputDirectory() in all Mojo reports (if required).\no handle outputdirectory for external reports in SiteRunMojo and in DoxiaFilter\no handle NPE for dependencies when site:run is called (due to MPIR-55)\n\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@433277 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-assembly-plugin_4", "file": [{"additions": 1, "raw_url": "https://github.com/apache/maven-assembly-plugin/raw/7a368eb84eb64fdd467bb9c2bfba1927863358c1/src/main/java/org/apache/maven/plugin/assembly/mojos/AbstractAssemblyMojo.java", "blob_url": "https://github.com/apache/maven-assembly-plugin/blob/7a368eb84eb64fdd467bb9c2bfba1927863358c1/src/main/java/org/apache/maven/plugin/assembly/mojos/AbstractAssemblyMojo.java", "sha": "03b3885264cf054ad07ba032aa5d94c3883fb3c5", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/maven-assembly-plugin/contents/src/main/java/org/apache/maven/plugin/assembly/mojos/AbstractAssemblyMojo.java?ref=7a368eb84eb64fdd467bb9c2bfba1927863358c1", "patch": "@@ -186,7 +186,7 @@\n     /**\n      * Directory for site generated.\n      *\n-     * @parameter default-value=\"${project.build.directory}/site\"\n+     * @parameter default-value=\"${project.reporting.outputDirectory}\"\n      * @readonly\n      */\n     private File siteDirectory;", "filename": "src/main/java/org/apache/maven/plugin/assembly/mojos/AbstractAssemblyMojo.java"}], "repo": "maven-assembly-plugin"}]
