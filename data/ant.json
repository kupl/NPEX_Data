{
    "ant_02e32f7": {
        "bug_id": "ant_02e32f7",
        "commit": "https://github.com/apache/ant/commit/02e32f76ca0730eb46649d4e0c59c1945355221f",
        "file": [
            {
                "additions": 22,
                "blob_url": "https://github.com/apache/ant/blob/02e32f76ca0730eb46649d4e0c59c1945355221f/src/main/org/apache/tools/ant/helper/ProjectHelper2.java",
                "changes": 44,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/helper/ProjectHelper2.java?ref=02e32f76ca0730eb46649d4e0c59c1945355221f",
                "deletions": 22,
                "filename": "src/main/org/apache/tools/ant/helper/ProjectHelper2.java",
                "patch": "@@ -667,8 +667,8 @@ public void endPrefixMapping(String prefix) {\n         @Override\n         public AntHandler onStartChild(String uri, String name, String qname, Attributes attrs,\n                                        AntXMLContext context) throws SAXParseException {\n-            if (name.equals(\"project\")\n-                && (uri.equals(\"\") || uri.equals(ANT_CORE_URI))) {\n+            if (\"project\".equals(name)\n+                && (uri.isEmpty() || uri.equals(ANT_CORE_URI))) {\n                 return ProjectHelper2.projectHandler;\n             }\n             if (name.equals(qname)) {\n@@ -727,19 +727,19 @@ public void onStartElement(String uri, String tag, String qname, Attributes attr\n \n             for (int i = 0; i < attrs.getLength(); i++) {\n                 String attrUri = attrs.getURI(i);\n-                if (attrUri != null && !attrUri.equals(\"\") && !attrUri.equals(uri)) {\n+                if (attrUri != null && !attrUri.isEmpty() && !attrUri.equals(uri)) {\n                     continue; // Ignore attributes from unknown uris\n                 }\n                 String key = attrs.getLocalName(i);\n                 String value = attrs.getValue(i);\n \n-                if (key.equals(\"default\")) {\n-                    if (value != null && !value.equals(\"\")) {\n+                if (\"default\".equals(key)) {\n+                    if (value != null && !value.isEmpty()) {\n                         if (!context.isIgnoringProjectTag()) {\n                             project.setDefault(value);\n                         }\n                     }\n-                } else if (key.equals(\"name\")) {\n+                } else if (\"name\".equals(key)) {\n                     if (value != null) {\n                         context.setCurrentProjectName(value);\n                         nameAttributeSet = true;\n@@ -754,14 +754,14 @@ public void onStartElement(String uri, String tag, String qname, Attributes attr\n                             }\n                         }\n                     }\n-                } else if (key.equals(\"id\")) {\n+                } else if (\"id\".equals(key)) {\n                     if (value != null) {\n                         // What's the difference between id and name ?\n                         if (!context.isIgnoringProjectTag()) {\n                             project.addReference(value, project);\n                         }\n                     }\n-                } else if (key.equals(\"basedir\")) {\n+                } else if (\"basedir\".equals(key)) {\n                     if (!context.isIgnoringProjectTag()) {\n                         baseDir = value;\n                     }\n@@ -864,8 +864,8 @@ public void onStartElement(String uri, String tag, String qname, Attributes attr\n         @Override\n         public AntHandler onStartChild(String uri, String name, String qname, Attributes attrs,\n                                        AntXMLContext context) throws SAXParseException {\n-            return (name.equals(\"target\") || name.equals(\"extension-point\"))\n-                && (uri.equals(\"\") || uri.equals(ANT_CORE_URI))\n+            return (\"target\".equals(name) || \"extension-point\".equals(name))\n+                && (uri.isEmpty() || uri.equals(ANT_CORE_URI))\n                 ? ProjectHelper2.targetHandler : ProjectHelper2.elementHandler;\n         }\n     }\n@@ -912,32 +912,32 @@ public void onStartElement(String uri, String tag, String qname, Attributes attr\n \n             for (int i = 0; i < attrs.getLength(); i++) {\n                 String attrUri = attrs.getURI(i);\n-                if (attrUri != null && !attrUri.equals(\"\") && !attrUri.equals(uri)) {\n+                if (attrUri != null && !attrUri.isEmpty() && !attrUri.equals(uri)) {\n                     continue; // Ignore attributes from unknown uris\n                 }\n                 String key = attrs.getLocalName(i);\n                 String value = attrs.getValue(i);\n \n-                if (key.equals(\"name\")) {\n+                if (\"name\".equals(key)) {\n                     name = value;\n-                    if (\"\".equals(name)) {\n+                    if (name.isEmpty()) {\n                         throw new BuildException(\"name attribute must \" + \"not be empty\");\n                     }\n-                } else if (key.equals(\"depends\")) {\n+                } else if (\"depends\".equals(key)) {\n                     depends = value;\n-                } else if (key.equals(\"if\")) {\n+                } else if (\"if\".equals(key)) {\n                     target.setIf(value);\n-                } else if (key.equals(\"unless\")) {\n+                } else if (\"unless\".equals(key)) {\n                     target.setUnless(value);\n-                } else if (key.equals(\"id\")) {\n-                    if (value != null && !value.equals(\"\")) {\n+                } else if (\"id\".equals(key)) {\n+                    if (value != null && !value.isEmpty()) {\n                         context.getProject().addReference(value, target);\n                     }\n-                } else if (key.equals(\"description\")) {\n+                } else if (\"description\".equals(key)) {\n                     target.setDescription(value);\n-                } else if (key.equals(\"extensionOf\")) {\n+                } else if (\"extensionOf\".equals(key)) {\n                     extensionPoint = value;\n-                } else if (key.equals(\"onMissingExtensionPoint\")) {\n+                } else if (\"onMissingExtensionPoint\".equals(key)) {\n                     try {\n                         extensionPointMissing = OnMissingExtensionPoint.valueOf(value);\n                     } catch (IllegalArgumentException e) {\n@@ -1167,7 +1167,7 @@ public void onStartElement(String uri, String tag, String qname, Attributes attr\n             for (int i = 0; i < attrs.getLength(); i++) {\n                 String name = attrs.getLocalName(i);\n                 String attrUri = attrs.getURI(i);\n-                if (attrUri != null && !attrUri.equals(\"\") && !attrUri.equals(uri)) {\n+                if (attrUri != null && !attrUri.isEmpty() && !attrUri.equals(uri)) {\n                     name = attrUri + \":\" + attrs.getQName(i);\n                 }\n                 String value = attrs.getValue(i);",
                "raw_url": "https://github.com/apache/ant/raw/02e32f76ca0730eb46649d4e0c59c1945355221f/src/main/org/apache/tools/ant/helper/ProjectHelper2.java",
                "sha": "61a696cab9d26d42c8ea9bb8562f61e8b2cc9c2a",
                "status": "modified"
            },
            {
                "additions": 16,
                "blob_url": "https://github.com/apache/ant/blob/02e32f76ca0730eb46649d4e0c59c1945355221f/src/main/org/apache/tools/ant/helper/ProjectHelperImpl.java",
                "changes": 32,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/helper/ProjectHelperImpl.java?ref=02e32f76ca0730eb46649d4e0c59c1945355221f",
                "deletions": 16,
                "filename": "src/main/org/apache/tools/ant/helper/ProjectHelperImpl.java",
                "patch": "@@ -328,7 +328,7 @@ public InputSource resolveEntity(String publicId, String systemId) {\n          *                              <code>\"project\"</code>\n          */\n         public void startElement(String tag, AttributeList attrs) throws SAXParseException {\n-            if (tag.equals(\"project\")) {\n+            if (\"project\".equals(tag)) {\n                 new ProjectHandler(helperImpl, this).init(tag, attrs);\n             } else {\n                 throw new SAXParseException(\"Config file is not of expected \" + \"XML type\",\n@@ -389,13 +389,13 @@ public void init(String tag, AttributeList attrs) throws SAXParseException {\n                 String key = attrs.getName(i);\n                 String value = attrs.getValue(i);\n \n-                if (key.equals(\"default\")) {\n+                if (\"default\".equals(key)) {\n                     def = value;\n-                } else if (key.equals(\"name\")) {\n+                } else if (\"name\".equals(key)) {\n                     name = value;\n-                } else if (key.equals(\"id\")) {\n+                } else if (\"id\".equals(key)) {\n                     id = value;\n-                } else if (key.equals(\"basedir\")) {\n+                } else if (\"basedir\".equals(key)) {\n                     baseDir = value;\n                 } else {\n                     throw new SAXParseException(\n@@ -404,7 +404,7 @@ public void init(String tag, AttributeList attrs) throws SAXParseException {\n                 }\n             }\n \n-            if (def != null && !def.equals(\"\")) {\n+            if (def != null && !def.isEmpty()) {\n                 helperImpl.project.setDefault(def);\n             } else {\n                 throw new BuildException(\"The default attribute is required\");\n@@ -455,7 +455,7 @@ public void init(String tag, AttributeList attrs) throws SAXParseException {\n          *            or a data type definition\n          */\n         public void startElement(String name, AttributeList attrs) throws SAXParseException {\n-            if (name.equals(\"target\")) {\n+            if (\"target\".equals(name)) {\n                 handleTarget(name, attrs);\n             } else {\n                 handleElement(helperImpl, this, helperImpl.implicitTarget, name, attrs);\n@@ -525,21 +525,21 @@ public void init(String tag, AttributeList attrs) throws SAXParseException {\n                 String key = attrs.getName(i);\n                 String value = attrs.getValue(i);\n \n-                if (key.equals(\"name\")) {\n+                if (\"name\".equals(key)) {\n                     name = value;\n-                    if (name.equals(\"\")) {\n+                    if (name.isEmpty()) {\n                         throw new BuildException(\"name attribute must not\" + \" be empty\",\n                                 new Location(helperImpl.locator));\n                     }\n-                } else if (key.equals(\"depends\")) {\n+                } else if (\"depends\".equals(key)) {\n                     depends = value;\n-                } else if (key.equals(\"if\")) {\n+                } else if (\"if\".equals(key)) {\n                     ifCond = value;\n-                } else if (key.equals(\"unless\")) {\n+                } else if (\"unless\".equals(key)) {\n                     unlessCond = value;\n-                } else if (key.equals(\"id\")) {\n+                } else if (\"id\".equals(key)) {\n                     id = value;\n-                } else if (key.equals(\"description\")) {\n+                } else if (\"description\".equals(key)) {\n                     description = value;\n                 } else {\n                     throw new SAXParseException(\"Unexpected attribute \\\"\" + key + \"\\\"\",\n@@ -563,7 +563,7 @@ public void init(String tag, AttributeList attrs) throws SAXParseException {\n             target.setDescription(description);\n             helperImpl.project.addTarget(name, target);\n \n-            if (id != null && !id.equals(\"\")) {\n+            if (id != null && !id.isEmpty()) {\n                 helperImpl.project.addReference(id, target);\n             }\n \n@@ -600,7 +600,7 @@ public void startElement(String name, AttributeList attrs) throws SAXParseExcept\n      */\n     private static void handleElement(ProjectHelperImpl helperImpl, DocumentHandler parent,\n             Target target, String elementName, AttributeList attrs) throws SAXParseException {\n-        if (elementName.equals(\"description\")) {\n+        if (\"description\".equals(elementName)) {\n             // created for side effect\n             new DescriptionHandler(helperImpl, parent); //NOSONAR\n         } else if (helperImpl.project.getDataTypeDefinitions().get(elementName) != null) {",
                "raw_url": "https://github.com/apache/ant/raw/02e32f76ca0730eb46649d4e0c59c1945355221f/src/main/org/apache/tools/ant/helper/ProjectHelperImpl.java",
                "sha": "4b824babdf318b47ab0219908d31730518808479",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/ant/blob/02e32f76ca0730eb46649d4e0c59c1945355221f/src/main/org/apache/tools/ant/taskdefs/optional/ejb/JonasDeploymentTool.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/optional/ejb/JonasDeploymentTool.java?ref=02e32f76ca0730eb46649d4e0c59c1945355221f",
                "deletions": 2,
                "filename": "src/main/org/apache/tools/ant/taskdefs/optional/ejb/JonasDeploymentTool.java",
                "patch": "@@ -615,13 +615,13 @@ private void addGenICGeneratedFiles(\n         }\n \n         // javacopts\n-        if (javacopts != null && !javacopts.equals(\"\")) {\n+        if (javacopts != null && !javacopts.isEmpty()) {\n             genicTask.createArg().setValue(\"-javacopts\");\n             genicTask.createArg().setLine(javacopts);\n         }\n \n         // rmicopts\n-        if (rmicopts != null && !rmicopts.equals(\"\")) {\n+        if (rmicopts != null && !rmicopts.isEmpty()) {\n             genicTask.createArg().setValue(\"-rmicopts\");\n             genicTask.createArg().setLine(rmicopts);\n         }",
                "raw_url": "https://github.com/apache/ant/raw/02e32f76ca0730eb46649d4e0c59c1945355221f/src/main/org/apache/tools/ant/taskdefs/optional/ejb/JonasDeploymentTool.java",
                "sha": "4f983796c360e86fbbb0cfe1a6879e7f649de286",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/02e32f76ca0730eb46649d4e0c59c1945355221f/src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java?ref=02e32f76ca0730eb46649d4e0c59c1945355221f",
                "deletions": 4,
                "filename": "src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java",
                "patch": "@@ -506,7 +506,7 @@ protected void scandir(String dir, String vpath, boolean fast) {\n                     return;\n                 }\n                 String completePath = null;\n-                if (!vpath.equals(\"\")) {\n+                if (!vpath.isEmpty()) {\n                     completePath = rootPath + remoteFileSep\n                         + vpath.replace(File.separatorChar, remoteFileSep.charAt(0));\n                 } else {\n@@ -521,8 +521,8 @@ protected void scandir(String dir, String vpath, boolean fast) {\n                 for (int i = 0; i < newfiles.length; i++) {\n                     FTPFile file = newfiles[i];\n                     if (file != null\n-                        && !file.getName().equals(\".\")\n-                        && !file.getName().equals(\"..\")) {\n+                        && !\".\".equals(file.getName())\n+                        && !\"..\".equals(file.getName())) {\n                         String name = vpath + file.getName();\n                         scannedDirs.put(name, new FTPFileProxy(file));\n                         if (isFunctioningAsDirectory(ftp, dir, file)) {\n@@ -1536,7 +1536,7 @@ public void setRecentDateFormatConfig(String recentDateFormat) {\n      * @see org.apache.commons.net.ftp.FTPClientConfig\n      */\n     public void setServerLanguageCodeConfig(LanguageCode serverLanguageCode) {\n-        if (serverLanguageCode != null && !serverLanguageCode.getValue().equals(\"\")) {\n+        if (serverLanguageCode != null && !serverLanguageCode.getValue().isEmpty()) {\n             this.serverLanguageCodeConfig = serverLanguageCode;\n             configurationHasBeenSet();\n         }",
                "raw_url": "https://github.com/apache/ant/raw/02e32f76ca0730eb46649d4e0c59c1945355221f/src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java",
                "sha": "9aa1b491be11e275a4de22664a323e010eb2ffbf",
                "status": "modified"
            }
        ],
        "message": "Use equals method of a string literal to prevent NPE and isEmpty() method instead of comparing a String object with an empty string.",
        "parent": "https://github.com/apache/ant/commit/14bd7590fbc50f5b3146288584f9116e37ee38c1",
        "repo": "ant",
        "unit_tests": [
            "FTPTest.java"
        ]
    },
    "ant_051ba12": {
        "bug_id": "ant_051ba12",
        "commit": "https://github.com/apache/ant/commit/051ba1279d96c822e7708a348a4d7bc0393b89f9",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/ant/blob/051ba1279d96c822e7708a348a4d7bc0393b89f9/src/main/org/apache/tools/ant/taskdefs/Delete.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Delete.java?ref=051ba1279d96c822e7708a348a4d7bc0393b89f9",
                "deletions": 3,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Delete.java",
                "patch": "@@ -562,12 +562,16 @@ regular logging (backwards as that sounds).  In that\n                 fs = (FileSet) fs.clone();\n                 fs.setProject(getProject());\n             }\n-            if (!fs.getDir().isDirectory()) {\n-                handle(\"Directory does not exist:\" + fs.getDir());\n+            File fsDir = fs.getDir();\n+            if (fsDir == null) {\n+                throw new BuildException(\n+                        \"File or Resource without directory or file specified\");\n+            } else if (!fsDir.isDirectory()) {\n+                handle(\"Directory does not exist:\" + fsDir);\n             } else {\n                 resourcesToDelete.add(fs);\n                 if (includeEmpty) {\n-                    filesetDirs.add(new ReverseDirs(fs.getDir(), fs\n+                    filesetDirs.add(new ReverseDirs(fsDir, fs\n                             .getDirectoryScanner().getIncludedDirectories()));\n                 }\n             }",
                "raw_url": "https://github.com/apache/ant/raw/051ba1279d96c822e7708a348a4d7bc0393b89f9/src/main/org/apache/tools/ant/taskdefs/Delete.java",
                "sha": "c439d3e351e615e8a93b40abddf6a97f9aa1a19f",
                "status": "modified"
            }
        ],
        "message": "pr 42179: Delete cannot handle (NPE) fileset without file or directory specified.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@531575 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/ee2779b5b94b830a888590c16076952941290922",
        "repo": "ant",
        "unit_tests": [
            "DeleteTest.java"
        ]
    },
    "ant_05a7fe8": {
        "bug_id": "ant_05a7fe8",
        "commit": "https://github.com/apache/ant/commit/05a7fe852f774ed56eba0631c453e1688913dd51",
        "file": [
            {
                "additions": 66,
                "blob_url": "https://github.com/apache/ant/blob/05a7fe852f774ed56eba0631c453e1688913dd51/docs/manual/CoreTasks/uptodate.html",
                "changes": 92,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/docs/manual/CoreTasks/uptodate.html?ref=05a7fe852f774ed56eba0631c453e1688913dd51",
                "deletions": 26,
                "filename": "docs/manual/CoreTasks/uptodate.html",
                "patch": "@@ -9,19 +9,24 @@\n \n <h2><a name=\"uptodate\">Uptodate</a></h2>\n <h3>Description</h3>\n-<p>Sets a property if a target files are more up to date than a set of\n-Source files. Source files are specified by nested &lt;srcfiles&gt;\n-elements, these are <a href=\"../CoreTypes/fileset.html\">FileSet</a>s, while target\n-files are specified using a nested <a href=\"../CoreTypes/mapper.html\">mapper</a>\n-element.</p>\n-<p>The value part of the property being set is <i>true</i> if the\n-timestamp of the target files is more recent than the timestamp of\n-every corresponding source file.</p>\n-<p>The default behavior is to use a <a href=\"../CoreTypes/mapper.html#merge-mapper\">merge\n-mapper</a> with the <code>to</code> attribute set to the value of the\n-targetfile attribute.</p>\n-<p>Normally, this task is used to set properties that are useful to avoid target\n-execution depending on the relative age of the specified files.</p>\n+<p>Sets a property if a target file or set of target files is more up-to-date\n+than a source file or set of source files. A single source file is specified\n+using the <code>srcfile</code> attribute. A set of source files is specified\n+using the nested <code>&lt;srcfiles&gt;</code>\n+elements. These are <a href=\"../CoreTypes/fileset.html\">FileSet</a>s,\n+whereas multiple target files are specified using a nested\n+<a href=\"../CoreTypes/mapper.html\"><code>&lt;mapper&gt;</code></a> element.</p>\n+<p>By default, the value of the property is set to <code>true</code> if\n+the timestamp of the target file(s) is more recent than the timestamp of\n+the corresponding source file(s). You can set the value to something other\n+than the default by specifying the <code>value</code> attribute.</p>\n+<p>If a <code>&lt;srcfiles&gt;</code> element is used, without also specifying\n+a <code>&lt;mapper&gt;</code> element, the default behavior is to use a\n+<a href=\"../CoreTypes/mapper.html#merge-mapper\">merge mapper</a>, with the\n+<code>to</code> attribute set to the value of the\n+<code>targetfile</code> attribute.</p>\n+<p>Normally, this task is used to set properties that are useful to avoid\n+target execution depending on the relative age of the specified files.</p>\n <h3>Parameters</h3>\n <table border=\"1\" cellpadding=\"2\" cellspacing=\"0\">\n   <tr>\n@@ -31,36 +36,71 @@ <h3>Parameters</h3>\n   </tr>\n   <tr>\n     <td valign=\"top\">property</td>\n-    <td valign=\"top\">the name of the property to set.</td>\n+    <td valign=\"top\">The name of the property to set.</td>\n     <td valign=\"top\" align=\"center\">Yes</td>\n   </tr>\n   <tr>\n     <td valign=\"top\">value</td>\n-    <td valign=\"top\">the value to set the property to. Defaults to &quot;true&quot;.</td>\n-    <td valign=\"top\" align=\"center\">No</td>\n+    <td valign=\"top\">The value to set the property to.</td>\n+    <td valign=\"top\" align=\"center\">No; defaults to <code>true</code>.</td>\n+  </tr>\n+  <tr>\n+    <td valign=\"top\">srcfile</td>\n+    <td valign=\"top\">The file to check against the target file.</td>\n+    <td valign=\"top\" align=\"center\">Yes, unless a nested\n+      <code>&lt;srcfiles&gt;</code> element is present.</td>\n   </tr>\n   <tr>\n     <td valign=\"top\">targetfile</td>\n-    <td valign=\"top\">the file for which we want to determine the status.</td>\n-    <td valign=\"top\" align=\"center\">Yes, unless a nested mapper element is \n-      present.</td>\n+    <td valign=\"top\">The file for which we want to determine the status.</td>\n+    <td valign=\"top\" align=\"center\">Yes, unless a nested\n+      <code>&lt;mapper&gt;</code> element is present.</td>\n   </tr>\n </table>\n+\n+<h3>Parameters specified as nested elements</h3>\n+<h4><a name=\"srcfiles\">srcfiles</a></h4>\n+<p>The nested <code>&lt;srcfiles&gt;</code> element allows you to specify a\n+set of files to check against the target file(s).</p>\n+\n+<p><strong>Note:</strong> You can specify either the <code>srcfile</code>\n+attribute or nested <code>&lt;srcfiles&gt;</code> elements, but not both.\n+\n+<h4><a name=\"mapper\">mapper</a></h4>\n+<p>The nested <code>&lt;mapper&gt;</code> element allows you to specify\n+a set of target files to check for being up-to-date with respect to a\n+set of source files.</p>\n+\n+<p><strong>Note:</strong> The nested <code>&lt;mapper&gt;</code> element is\n+only valid when used with the <code>&lt;srcfiles&gt;</code> element.\n+\n <h3>Examples</h3>\n <pre>  &lt;uptodate property=&quot;xmlBuild.notRequired&quot; targetfile=&quot;${deploy}\\xmlClasses.jar&quot; &gt;\n     &lt;srcfiles dir= &quot;${src}/xml&quot; includes=&quot;**/*.dtd&quot;/&gt;\n   &lt;/uptodate&gt;</pre>\n-<p>sets the property <code><i>xmlBuild.notRequired</i></code> to the value &quot;true&quot;\n-if the <i>${deploy}/xmlClasses.jar</i> is more up to date than any of the DTD files in the <i>${src}/xml</i> directory.</p>\n-<p>This can be written as</p>\n-<pre>  &lt;uptodate property=&quot;xmlBuild.notRequired&quot;  &gt;\n+<p>sets the property <code>xmlBuild.notRequired</code> to <code>true</code>\n+if the <code>${deploy}/xmlClasses.jar</code> file is more up-to-date than\n+any of the DTD files in the <code>${src}/xml</code> directory.</p>\n+<p>This can be written as:</p>\n+<pre>  &lt;uptodate property=&quot;xmlBuild.notRequired&quot;&gt;\n     &lt;srcfiles dir= &quot;${src}/xml&quot; includes=&quot;**/*.dtd&quot;/&gt;\n     &lt;mapper type=&quot;merge&quot; to=&quot;${deploy}\\xmlClasses.jar&quot;/&gt;\n   &lt;/uptodate&gt;</pre>\n-<p>as well.</p>\n+as well.\n+</p>\n+\n+<pre>  &lt;uptodate property=&quot;isUpToDate&quot;\n+            srcfile=&quot;/usr/local/bin/testit&quot;\n+            targetfile=&quot;${build}/.flagfile&quot;/&gt;\n+</pre>\n+<p>sets the property <code>isUpToDate</code> to <code>true</code>\n+if <code>/usr/local/bin/testit</code> is newer than\n+<code>${build}/.flagfile</code>.</p>\n+</p>\n+\n <hr>\n-<p align=\"center\">Copyright &copy; 2001 Apache Software Foundation. All rights\n-Reserved.</p>\n+<p align=\"center\">Copyright &copy; 2001,2002 Apache Software Foundation.\n+All rights Reserved.</p>\n \n </body>\n </html>",
                "raw_url": "https://github.com/apache/ant/raw/05a7fe852f774ed56eba0631c453e1688913dd51/docs/manual/CoreTasks/uptodate.html",
                "sha": "d7ecd188a2f311d3ae4aaa8b2d68813d72a67dec",
                "status": "modified"
            },
            {
                "additions": 49,
                "blob_url": "https://github.com/apache/ant/blob/05a7fe852f774ed56eba0631c453e1688913dd51/src/main/org/apache/tools/ant/taskdefs/UpToDate.java",
                "changes": 68,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/UpToDate.java?ref=05a7fe852f774ed56eba0631c453e1688913dd51",
                "deletions": 19,
                "filename": "src/main/org/apache/tools/ant/taskdefs/UpToDate.java",
                "patch": "@@ -83,26 +83,27 @@\n \n     private String _property;\n     private String _value;\n+    private File _sourceFile;\n     private File _targetFile;\n     private Vector sourceFileSets = new Vector();\n \n     protected Mapper mapperElement = null;\n \n     /**\n-     * The property to set if the target file is more up to date than each of\n-     * the source files.\n+     * The property to set if the target file is more up-to-date than\n+     * (each of) the source file(s).\n      *\n-     * @param property the name of the property to set if Target is up to date.\n+     * @param property the name of the property to set if Target is up-to-date.\n      */\n     public void setProperty(String property) {\n         _property = property;\n     }\n \n     /**\n-     * The value to set the named property to if the target file is more up to\n-     * date than each of the source files. Defaults to 'true'.\n+     * The value to set the named property to if the target file is more\n+     * up-to-date than (each of) the source file(s). Defaults to 'true'.\n      *\n-     * @param value the value to set the property to if Target is up to date\n+     * @param value the value to set the property to if Target is up-to-date\n      */\n     public void setValue(String value) {\n         _value = value;\n@@ -116,15 +117,25 @@ private String getValue() {\n     } \n \n     /**\n-     * The file which must be more up to date than each of the source files\n+     * The file which must be more up-to-date than (each of) the source file(s)\n      * if the property is to be set.\n      *\n-     * @param file the file which we are checking against.\n+     * @param file the file we are checking against.\n      */\n     public void setTargetFile(File file) {\n         _targetFile = file;\n     }\n \n+    /**\n+     * The file that must be older than the target file\n+     * if the property is to be set.\n+     *\n+     * @param file the file we are checking against the target file.\n+     */\n+    public void setSrcfile(File file) {\n+        _sourceFile = file;\n+    }\n+\n     /**\n      * Nested &lt;srcfiles&gt; element.\n      */\n@@ -145,47 +156,66 @@ public Mapper createMapper() throws BuildException {\n     }\n \n     /**\n-     * Evaluate all target and source files, see if the targets are up-to-date.\n+     * Evaluate (all) target and source file(s) to\n+     * see if the target(s) is/are up-to-date.\n      */\n     public boolean eval() {\n-        if (sourceFileSets.size() == 0) {\n-          throw new BuildException(\"At least one <srcfiles> element must be set\");\n+        if (sourceFileSets.size() == 0 && _sourceFile == null) {\n+          throw new BuildException(\"At least one srcfile or a nested <srcfiles> element must be set.\");\n+        }\n+\n+        if (sourceFileSets.size() > 0 && _sourceFile != null) {\n+          throw new BuildException(\"Cannot specify both the srcfile attribute and a nested <srcfiles> element.\");\n         }\n \n         if (_targetFile == null && mapperElement == null) {\n-          throw new BuildException(\"The targetfile attribute or a nested mapper element must be set\");\n+          throw new BuildException(\"The targetfile attribute or a nested mapper element must be set.\");\n+        }\n+\n+        if (_sourceFile != null && mapperElement != null) {\n+          throw new BuildException(\"Cannot specify both the srcfile attribute and a nested mapper element.\");\n         }\n \n-        // if not there then it can't be up to date\n+        // if the target file is not there, then it can't be up-to-date\n         if (_targetFile != null && !_targetFile.exists()) {\n           return false;\n         } \n \n+        // if the source file isn't there, throw an exception\n+        if (_sourceFile != null && !_sourceFile.exists()) {\n+          throw new BuildException(_sourceFile.getAbsolutePath() + \" not found.\");\n+        } \n+\n         Enumeration enum = sourceFileSets.elements();\n         boolean upToDate = true;\n         while (upToDate && enum.hasMoreElements()) {\n             FileSet fs = (FileSet) enum.nextElement();\n             DirectoryScanner ds = fs.getDirectoryScanner(project);\n-            upToDate = upToDate && scanDir(fs.getDir(project), \n-                                           ds.getIncludedFiles());\n+                upToDate = upToDate && scanDir(fs.getDir(project), \n+                                               ds.getIncludedFiles());\n+        }\n+        if (_sourceFile != null) {\n+            File srcfile = new File(_sourceFile.getAbsolutePath());\n+            File tgtfile = new File(_targetFile.getAbsolutePath());\n+            upToDate = (tgtfile.lastModified() > srcfile.lastModified());\n         }\n         return upToDate;\n     }\n \n \n     /**\n-     * Sets property to true if target files have a more recent timestamp than\n-     * each of the corresponding source files.\n+     * Sets property to true if target file(s) have a more recent timestamp\n+     * than (each of) the corresponding source file(s).\n      */\n     public void execute() throws BuildException {\n         boolean upToDate = eval();\n         if (upToDate) {\n             this.project.setProperty(_property, this.getValue());\n             if (mapperElement == null) {\n-                log(\"File \\\"\" + _targetFile.getAbsolutePath() + \"\\\" is up to date.\",\n+                log(\"File \\\"\" + _targetFile.getAbsolutePath() + \"\\\" is up-to-date.\",\n                     Project.MSG_VERBOSE);\n             } else {\n-                log(\"All target files have been up to date.\",\n+                log(\"All target files are up-to-date.\",\n                     Project.MSG_VERBOSE);\n             }\n         }",
                "raw_url": "https://github.com/apache/ant/raw/05a7fe852f774ed56eba0631c453e1688913dd51/src/main/org/apache/tools/ant/taskdefs/UpToDate.java",
                "sha": "86985a0f58c6690df61233e24bb9a42d4b6a380c",
                "status": "modified"
            }
        ],
        "message": "Added a 'srcfile' attribute (PR 1681).\n(But also found a NPE bug in the mapper stuff :( -- will try\nto fix in a separate change.)\nPR:\nObtained from:\nSubmitted by:\nReviewed by:\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@272126 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/90c469486c78ffa5f2664784699488d076d512f0",
        "repo": "ant",
        "unit_tests": [
            "UpToDateTest.java"
        ]
    },
    "ant_0777fa8": {
        "bug_id": "ant_0777fa8",
        "commit": "https://github.com/apache/ant/commit/0777fa853af3a619d777adaead96e9c0d1aff291",
        "file": [
            {
                "additions": 9,
                "blob_url": "https://github.com/apache/ant/blob/0777fa853af3a619d777adaead96e9c0d1aff291/src/main/org/apache/tools/ant/DirectoryScanner.java",
                "changes": 17,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/DirectoryScanner.java?ref=0777fa853af3a619d777adaead96e9c0d1aff291",
                "deletions": 8,
                "filename": "src/main/org/apache/tools/ant/DirectoryScanner.java",
                "patch": "@@ -773,14 +773,15 @@ public void scan() throws IllegalStateException {\n \n                 if (basedir == null) {\n                     illegal = new IllegalStateException(\"No basedir set\");\n-                }\n-                if (!basedir.exists()) {\n-                    illegal = new IllegalStateException(\"basedir \" + basedir\n-                                                    + \" does not exist\");\n-                }\n-                if (!basedir.isDirectory()) {\n-                    illegal = new IllegalStateException(\"basedir \" + basedir\n-                                                    + \" is not a directory\");\n+                } else {\n+                    if (!basedir.exists()) {\n+                        illegal = new IllegalStateException(\"basedir \" + basedir\n+                                                        + \" does not exist\");\n+                    }\n+                    if (!basedir.isDirectory()) {\n+                        illegal = new IllegalStateException(\"basedir \" + basedir\n+                                                        + \" is not a directory\");\n+                    }\n                 }\n                 if (illegal != null) {\n                     throw illegal;",
                "raw_url": "https://github.com/apache/ant/raw/0777fa853af3a619d777adaead96e9c0d1aff291/src/main/org/apache/tools/ant/DirectoryScanner.java",
                "sha": "e68859492e2006558dc3af9a5d8497cf2205637e",
                "status": "modified"
            }
        ],
        "message": "Eliminate possible NPE; note that previous change\naddressed bug 33118 at least partially.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@277786 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/c5fc0e2e08e3567841368f443e1f5b5d1912f8c8",
        "repo": "ant",
        "unit_tests": [
            "DirectoryScannerTest.java"
        ]
    },
    "ant_0900e99": {
        "bug_id": "ant_0900e99",
        "commit": "https://github.com/apache/ant/commit/0900e997608a89f3e5937aab0e3f831dc7d8ed35",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/0900e997608a89f3e5937aab0e3f831dc7d8ed35/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=0900e997608a89f3e5937aab0e3f831dc7d8ed35",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -60,6 +60,9 @@ Changes that could break older environments:\n Fixed bugs:\n -----------\n \n+* Calling close twice on ReaderInputStream gave a nullpointer exception.\n+  Bugzilla Report 35544.\n+\n * Memory leak from IntrospectionHelper.getHelper(Class) in embedded\n   environments. Bugzilla Report 30162.\n ",
                "raw_url": "https://github.com/apache/ant/raw/0900e997608a89f3e5937aab0e3f831dc7d8ed35/WHATSNEW",
                "sha": "6a4f0e9de3255d17b1b8af21935c0f8ec0ad9552",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/ant/blob/0900e997608a89f3e5937aab0e3f831dc7d8ed35/src/main/org/apache/tools/ant/util/ReaderInputStream.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/util/ReaderInputStream.java?ref=0900e997608a89f3e5937aab0e3f831dc7d8ed35",
                "deletions": 4,
                "filename": "src/main/org/apache/tools/ant/util/ReaderInputStream.java",
                "patch": "@@ -1,5 +1,5 @@\n /*\n- * Copyright 2004 The Apache Software Foundation.\n+ * Copyright 2004-2005 The Apache Software Foundation.\n  *\n  *  Licensed under the Apache License, Version 2.0 (the \"License\");\n  *  you may not use this file except in compliance with the License.\n@@ -196,8 +196,10 @@ public synchronized void reset() throws IOException {\n      * @exception IOException if the original StringReader fails to be closed\n      */\n     public synchronized void close() throws IOException {\n-        in.close();\n-        slack = null;\n-        in = null;\n+        if (in != null) {\n+            in.close();\n+            slack = null;\n+            in = null;\n+        }\n     }\n }",
                "raw_url": "https://github.com/apache/ant/raw/0900e997608a89f3e5937aab0e3f831dc7d8ed35/src/main/org/apache/tools/ant/util/ReaderInputStream.java",
                "sha": "04f3df7b56354fdb5ef16e5a81dec8ee3cb4e44f",
                "status": "modified"
            }
        ],
        "message": "PR: 35544\n\nAvoid getting NPE on calling close() twice.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@278444 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/231d01856902f3729b8a0891fe3b124976012328",
        "repo": "ant",
        "unit_tests": [
            "ReaderInputStreamTest.java"
        ]
    },
    "ant_1113e19": {
        "bug_id": "ant_1113e19",
        "commit": "https://github.com/apache/ant/commit/1113e19f88b9d6340a8b6bb9c238d35ea6b86d6a",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/1113e19f88b9d6340a8b6bb9c238d35ea6b86d6a/WHATSNEW",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=1113e19f88b9d6340a8b6bb9c238d35ea6b86d6a",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -356,6 +356,10 @@ Fixed bugs:\n    when writing zips or jars.\n    Bugzilla Report 45548\n \n+ * <sync> could into a NullPointerException when faced with broken\n+   symbolic links.\n+   Bugzilla Report 46747.\n+\n Other changes:\n --------------\n  * A HostInfo task was added performing information on hosts, including info on ",
                "raw_url": "https://github.com/apache/ant/raw/1113e19f88b9d6340a8b6bb9c238d35ea6b86d6a/WHATSNEW",
                "sha": "210efd83f982174be5a0a13a0ff9d8dc27ff4f15",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/ant/blob/1113e19f88b9d6340a8b6bb9c238d35ea6b86d6a/src/main/org/apache/tools/ant/taskdefs/Sync.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Sync.java?ref=1113e19f88b9d6340a8b6bb9c238d35ea6b86d6a",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Sync.java",
                "patch": "@@ -235,7 +235,8 @@ private void logRemovedCount(int count, String prefix,\n         // delete them.\n         for (int i = dirs.length - 1; i >= 0; --i) {\n             File f = new File(toDir, dirs[i]);\n-            if (f.list().length < 1) {\n+            String[] children = f.list();\n+            if (children == null || children.length < 1) {\n                 log(\"Removing orphan directory: \" + f, Project.MSG_DEBUG);\n                 f.delete();\n                 ++removedCount[0];",
                "raw_url": "https://github.com/apache/ant/raw/1113e19f88b9d6340a8b6bb9c238d35ea6b86d6a/src/main/org/apache/tools/ant/taskdefs/Sync.java",
                "sha": "7111dd622401baac6abef9d56e0127b75077dcda",
                "status": "modified"
            }
        ],
        "message": "sync can cause NPE whith broken symlinks.  PR 46747.  Submitted by skoppehel at intersoft dot de\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@747004 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/545ff63ab763c8bb5b4a1b2f0aa98e8526518a07",
        "repo": "ant",
        "unit_tests": [
            "SyncTest.java"
        ]
    },
    "ant_14440ef": {
        "bug_id": "ant_14440ef",
        "commit": "https://github.com/apache/ant/commit/14440efdc9c9554d9aa53d6d08e78ea80d799215",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/14440efdc9c9554d9aa53d6d08e78ea80d799215/src/main/org/apache/tools/ant/taskdefs/UpToDate.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/UpToDate.java?ref=14440efdc9c9554d9aa53d6d08e78ea80d799215",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/UpToDate.java",
                "patch": "@@ -162,10 +162,10 @@ protected boolean scanDir(File srcDir, String files[]) {\n         if (mapperElement == null) {\n             MergingMapper mm = new MergingMapper();\n             mm.setTo(_targetFile.getAbsolutePath());\n+            mapper = mm;\n         } else {\n             mapper = mapperElement.getImplementation();\n         }\n-        \n         return sfs.restrict(files, srcDir, null, mapper).length == 0;\n     }\n }",
                "raw_url": "https://github.com/apache/ant/raw/14440efdc9c9554d9aa53d6d08e78ea80d799215/src/main/org/apache/tools/ant/taskdefs/UpToDate.java",
                "sha": "9574c9abbe9685823826cd30ca8e21468f7f9c2b",
                "status": "modified"
            }
        ],
        "message": "added patch by mariusz to fix NPE in UpToDate task\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@268373 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/3a3312cb529e779a359bffef7180f3334daa418d",
        "repo": "ant",
        "unit_tests": [
            "UpToDateTest.java"
        ]
    },
    "ant_14b1d18": {
        "bug_id": "ant_14b1d18",
        "commit": "https://github.com/apache/ant/commit/14b1d186211e884453211229f2d46fc34d9be0ac",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/14b1d186211e884453211229f2d46fc34d9be0ac/src/main/org/apache/tools/ant/taskdefs/Touch.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Touch.java?ref=14b1d186211e884453211229f2d46fc34d9be0ac",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Touch.java",
                "patch": "@@ -291,6 +291,9 @@ protected void touch() throws BuildException {\n             touch(new FileResource(file.getParentFile(), file.getName()),\n                   defaultTimestamp);\n         }\n+        if (resources == null) {\n+            return;\n+        }\n         // deal with the resource collections\n         Iterator iter = resources.iterator();\n         while (iter.hasNext()) {",
                "raw_url": "https://github.com/apache/ant/raw/14b1d186211e884453211229f2d46fc34d9be0ac/src/main/org/apache/tools/ant/taskdefs/Touch.java",
                "sha": "90f32c188581dc6e1c03930b0181d524d246a215",
                "status": "modified"
            }
        ],
        "message": "oops; introduced NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@592514 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/771dd677203f6aea1bd040f604f3dac9e90a198b",
        "repo": "ant",
        "unit_tests": [
            "TouchTest.java"
        ]
    },
    "ant_198880a": {
        "bug_id": "ant_198880a",
        "commit": "https://github.com/apache/ant/commit/198880a644437e0cfb31cb65ee56c3d2d1b2d858",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/ant/blob/198880a644437e0cfb31cb65ee56c3d2d1b2d858/src/main/org/apache/tools/ant/taskdefs/Execute.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Execute.java?ref=198880a644437e0cfb31cb65ee56c3d2d1b2d858",
                "deletions": 2,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Execute.java",
                "patch": "@@ -627,7 +627,7 @@ public Process exec(Project project, String[] cmd, String[] env) throws IOExcept\n         public Process exec(Project project, String[] cmd, String[] env, File workingDir) throws IOException\n         {\n             File commandDir = workingDir;\n-            if ( workingDir == null ) {\n+            if ( workingDir == null && project != null ) {\n                 commandDir = project.getBaseDir();\n             }\n \n@@ -712,7 +712,7 @@ public Process exec(Project project, String[] cmd, String[] env, File workingDir\n \n             // Build the command\n             File commandDir = workingDir;\n-            if ( workingDir == null ) {\n+            if ( workingDir == null && project != null ) {\n                 commandDir = project.getBaseDir();\n             }\n ",
                "raw_url": "https://github.com/apache/ant/raw/198880a644437e0cfb31cb65ee56c3d2d1b2d858/src/main/org/apache/tools/ant/taskdefs/Execute.java",
                "sha": "4129ce25d3a220035f93d0dd60075d98b1b4036c",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/198880a644437e0cfb31cb65ee56c3d2d1b2d858/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java?ref=198880a644437e0cfb31cb65ee56c3d2d1b2d858",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "patch": "@@ -488,9 +488,9 @@ private int executeAsForked(JUnitTest test, ExecuteWatchdog watchdog) throws Bui\n \n         Execute execute = new Execute(new LogStreamHandler(this, Project.MSG_INFO, Project.MSG_WARN), watchdog);\n         execute.setCommandline(cmd.getCommandline());\n+        execute.setAntRun(project);\n         if (dir != null) {\n             execute.setWorkingDirectory(dir);\n-            execute.setAntRun(project);\n         }\n \n         log(\"Executing: \"+cmd.toString(), Project.MSG_VERBOSE);",
                "raw_url": "https://github.com/apache/ant/raw/198880a644437e0cfb31cb65ee56c3d2d1b2d858/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "sha": "cb8ccf503fe9593bb2123254c1776ef574392df3",
                "status": "modified"
            }
        ],
        "message": "Avoid NPE's - seen when running JUnit on Win2K\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@269443 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/5f35fa88d364a6a96e0b8fe16a291a3c56924812",
        "repo": "ant",
        "unit_tests": [
            "JUnitTaskTest.java"
        ]
    },
    "ant_1b60864": {
        "bug_id": "ant_1b60864",
        "commit": "https://github.com/apache/ant/commit/1b60864bf1589c54f8ee5d72effc9edd7aced4e0",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/1b60864bf1589c54f8ee5d72effc9edd7aced4e0/src/main/org/apache/tools/ant/types/PatternSet.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/types/PatternSet.java?ref=1b60864bf1589c54f8ee5d72effc9edd7aced4e0",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/types/PatternSet.java",
                "patch": "@@ -123,7 +123,7 @@ private boolean valid(Project p) {\n         }\n \n         public String toString() {\n-            StringBuffer buf = new StringBuffer(name);\n+            StringBuffer buf = new StringBuffer(name != null ? name : \"\");\n             if ((ifCond != null) || (unlessCond != null)) {\n                 buf.append(\":\");\n                 String connector = \"\";",
                "raw_url": "https://github.com/apache/ant/raw/1b60864bf1589c54f8ee5d72effc9edd7aced4e0/src/main/org/apache/tools/ant/types/PatternSet.java",
                "sha": "6e75aef795ca29262257babd972f883a039321db",
                "status": "modified"
            }
        ],
        "message": "Fix npe if <include> does not have a \"name\" attribute\nPR: 25982\nObtained from: Dawid Weiss\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@275875 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/4f1313504aa0fb3f719893e4a178c144bcbcd2c1",
        "repo": "ant",
        "unit_tests": [
            "PatternSetTest.java"
        ]
    },
    "ant_2fbb2e6": {
        "bug_id": "ant_2fbb2e6",
        "commit": "https://github.com/apache/ant/commit/2fbb2e62ab0d3d323a75c6baf00a2e675c7fd6f5",
        "file": [
            {
                "additions": 9,
                "blob_url": "https://github.com/apache/ant/blob/2fbb2e62ab0d3d323a75c6baf00a2e675c7fd6f5/src/main/org/apache/tools/ant/DirectoryScanner.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/DirectoryScanner.java?ref=2fbb2e62ab0d3d323a75c6baf00a2e675c7fd6f5",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/DirectoryScanner.java",
                "patch": "@@ -956,6 +956,12 @@ protected void slowScan() {\n         try {\n             synchronized (this) {\n \n+                // set in/excludes to reasonable defaults if needed:\n+                boolean nullIncludes = (includes == null);\n+                includes = nullIncludes ? new String[] {\"**\"} : includes;\n+                boolean nullExcludes = (excludes == null);\n+                excludes = nullExcludes ? new String[0] : excludes;\n+\n                 String[] excl = new String[dirsExcluded.size()];\n                 dirsExcluded.copyInto(excl);\n         \n@@ -974,6 +980,9 @@ protected void slowScan() {\n                                 notIncl[i] + File.separator, false);\n                     }\n                 }\n+                clearCaches();\n+                includes = nullIncludes ? null : includes;\n+                excludes = nullExcludes ? null : excludes;\n             }\n         } finally {\n             synchronized (slowScanLock) {",
                "raw_url": "https://github.com/apache/ant/raw/2fbb2e62ab0d3d323a75c6baf00a2e675c7fd6f5/src/main/org/apache/tools/ant/DirectoryScanner.java",
                "sha": "a2534a1bbbc821e36ea75fe9bdb45a822188c6fb",
                "status": "modified"
            }
        ],
        "message": "Not 100% sure this fixes the entire bug, but it eliminates NPEs for me.\nPR: 34722\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@278219 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/529deb1cfd477b2c9b84923dd573c0191ad900c4",
        "repo": "ant",
        "unit_tests": [
            "DirectoryScannerTest.java"
        ]
    },
    "ant_3193a54": {
        "bug_id": "ant_3193a54",
        "commit": "https://github.com/apache/ant/commit/3193a54aacba612c7df0c0b1d9d2466e113e8556",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/3193a54aacba612c7df0c0b1d9d2466e113e8556/src/main/org/apache/tools/ant/taskdefs/Zip.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Zip.java?ref=3193a54aacba612c7df0c0b1d9d2466e113e8556",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Zip.java",
                "patch": "@@ -278,11 +278,13 @@ protected void addZipEntries(ZipFileSet fs, DirectoryScanner ds,\n         File zipSrc = fs.getSrc();\n \n         ZipEntry entry;\n+        java.util.zip.ZipEntry origEntry;\n         ZipInputStream in = null;\n         try {\n             in = new ZipInputStream(new FileInputStream(zipSrc));\n \n-            while ((entry = new ZipEntry(in.getNextEntry())) != null) {\n+            while ((origEntry = in.getNextEntry()) != null) {\n+                entry = new ZipEntry(origEntry);\n                 String vPath = entry.getName();\n                 if (zipScanner.match(vPath)) {\n                     addParentDirs(null, vPath, zOut, prefix);",
                "raw_url": "https://github.com/apache/ant/raw/3193a54aacba612c7df0c0b1d9d2466e113e8556/src/main/org/apache/tools/ant/taskdefs/Zip.java",
                "sha": "2d245dbad656f161365509e1b3b4392dd2ad6541",
                "status": "modified"
            }
        ],
        "message": "Fix stupid NPE introduced with my ZIP changes.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@268961 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/d040818b19cded24629e8f5cf6af6c2621ab4916",
        "repo": "ant",
        "unit_tests": [
            "ZipTest.java"
        ]
    },
    "ant_31d76fc": {
        "bug_id": "ant_31d76fc",
        "commit": "https://github.com/apache/ant/commit/31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2/src/main/org/apache/tools/ant/IntrospectionHelper.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/IntrospectionHelper.java?ref=31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2",
                "deletions": 5,
                "filename": "src/main/org/apache/tools/ant/IntrospectionHelper.java",
                "patch": "@@ -55,7 +55,6 @@\n package org.apache.tools.ant;\n \n import org.apache.tools.ant.types.Path;\n-import org.apache.tools.ant.types.DataType;\n import org.apache.tools.ant.types.EnumeratedAttribute;\n \n import java.lang.reflect.Method;\n@@ -328,8 +327,8 @@ public Object createElement(Project project, Object element, String elementName)\n         }\n         try {\n             Object nestedElement = nc.create(element);\n-            if (nestedElement instanceof DataType) {\n-                ((DataType)nestedElement).setProject(project);\n+            if (nestedElement instanceof ProjectComponent) {\n+                ((ProjectComponent) nestedElement).setProject(project);\n             }\n             return nestedElement;\n         } catch (IllegalAccessException ie) {\n@@ -575,8 +574,8 @@ public void set(Project p, Object parent,\n                             throws InvocationTargetException, IllegalAccessException, BuildException {\n                             try {\n                                 Object attribute = c.newInstance(new String[] {value});\n-                                if (attribute instanceof DataType) {\n-                                    ((DataType)attribute).setProject(p);\n+                                if (attribute instanceof ProjectComponent) {\n+                                    ((ProjectComponent) attribute).setProject(p);\n                                 }\n                                 m.invoke(parent, new Object[] {attribute});\n                             } catch (InstantiationException ie) {",
                "raw_url": "https://github.com/apache/ant/raw/31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2/src/main/org/apache/tools/ant/IntrospectionHelper.java",
                "sha": "61ffddce17240245b5692e37a5acf7e6496079e8",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2/src/main/org/apache/tools/ant/ProjectHelper.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/ProjectHelper.java?ref=31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2",
                "deletions": 2,
                "filename": "src/main/org/apache/tools/ant/ProjectHelper.java",
                "patch": "@@ -561,8 +561,10 @@ public void init(String propType, AttributeList attrs) throws SAXParseException\n             try {\n                 String elementName = propType.toLowerCase(Locale.US);\n                 if (parent instanceof UnknownElement) {\n-                    child = new UnknownElement(elementName);\n-                    ((UnknownElement) parent).addChild((UnknownElement) child);\n+                    UnknownElement uc = new UnknownElement(elementName);\n+                    uc.setProject(project);\n+                    ((UnknownElement) parent).addChild(uc);\n+                    child = uc;\n                 } else {\n                     child = ih.createElement(project, parent, elementName);\n                 }",
                "raw_url": "https://github.com/apache/ant/raw/31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2/src/main/org/apache/tools/ant/ProjectHelper.java",
                "sha": "c0e55cc67e653e885e8bd9b7d924294ca47c9831",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2/src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Ant.java?ref=31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "patch": "@@ -260,6 +260,7 @@ public void execute() throws BuildException {\n             Enumeration e = properties.elements();\n             while (e.hasMoreElements()) {\n                 Property p=(Property) e.nextElement();\n+                p.setProject(newProject);\n                 p.execute();\n             }\n             ",
                "raw_url": "https://github.com/apache/ant/raw/31d76fc5d0b52ebf0153a4eac5df668b6b0c90d2/src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "sha": "c0b2729936fc7139b8f64b9248c6c7fb48b4bd4a",
                "status": "modified"
            }
        ],
        "message": "spread the project instance a little further (this accounts for a\nnumber of NPEs when using <taskdef> that have been reported).\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@269854 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/aaed8c297a69c306987d364d432adcd83e2398c0",
        "repo": "ant",
        "unit_tests": [
            "AntTest.java"
        ]
    },
    "ant_337ae87": {
        "bug_id": "ant_337ae87",
        "commit": "https://github.com/apache/ant/commit/337ae879772b1fb950f851b7bafbc89b6293cc85",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/337ae879772b1fb950f851b7bafbc89b6293cc85/src/main/org/apache/tools/ant/taskdefs/UpToDate.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/UpToDate.java?ref=337ae879772b1fb950f851b7bafbc89b6293cc85",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/taskdefs/UpToDate.java",
                "patch": "@@ -223,6 +223,10 @@ public boolean eval() {\n      * than (each of) the corresponding source file(s).\n      */\n     public void execute() throws BuildException {\n+        if (_property == null) {\n+            throw new BuildException(\"property attribute is required.\", \n+                                     location);\n+        }\n         boolean upToDate = eval();\n         if (upToDate) {\n             this.project.setNewProperty(_property, getValue());",
                "raw_url": "https://github.com/apache/ant/raw/337ae879772b1fb950f851b7bafbc89b6293cc85/src/main/org/apache/tools/ant/taskdefs/UpToDate.java",
                "sha": "0afd8186049c804a25d9bc83ba01f0ef86263234",
                "status": "modified"
            }
        ],
        "message": "Avoid getting an NPE by making sure the property attr is set.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@272810 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/67581ea0d7e52dfe48094df3de94b36d715d2071",
        "repo": "ant",
        "unit_tests": [
            "UpToDateTest.java"
        ]
    },
    "ant_39734fd": {
        "bug_id": "ant_39734fd",
        "commit": "https://github.com/apache/ant/commit/39734fdcece949c4acffdb69416c2407b959ffaf",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/39734fdcece949c4acffdb69416c2407b959ffaf/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=39734fdcece949c4acffdb69416c2407b959ffaf",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -53,6 +53,9 @@ Fixed bugs:\n    exception.\n    Bugzilla Report 53964\n \n+ * <javadoc> caused a NullPointerException when no destdir was set.\n+   Bugzilla Report 55949\n+\n Other changes:\n --------------\n ",
                "raw_url": "https://github.com/apache/ant/raw/39734fdcece949c4acffdb69416c2407b959ffaf/WHATSNEW",
                "sha": "1acdb84e737295c53f5075bee450c89afec37b19",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/39734fdcece949c4acffdb69416c2407b959ffaf/src/main/org/apache/tools/ant/taskdefs/Javadoc.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Javadoc.java?ref=39734fdcece949c4acffdb69416c2407b959ffaf",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Javadoc.java",
                "patch": "@@ -2447,7 +2447,7 @@ private void postProcessGeneratedJavadocs() throws IOException {\n         if (!postProcessGeneratedJavadocs) {\n             return;\n         }\n-        if (!destDir.isDirectory()) {\n+        if (destDir != null && !destDir.isDirectory()) {\n             log(\"No javadoc created, no need to post-process anything\",\n                 Project.MSG_VERBOSE);\n             return;",
                "raw_url": "https://github.com/apache/ant/raw/39734fdcece949c4acffdb69416c2407b959ffaf/src/main/org/apache/tools/ant/taskdefs/Javadoc.java",
                "sha": "572720448968a391c7874dad90d52a5070f829c7",
                "status": "modified"
            }
        ],
        "message": "NPE in javadoc when no destdir is specified.  PR 55949\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@1555019 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/562c27936519fa3bb1636c91f874de5808d5b290",
        "repo": "ant",
        "unit_tests": [
            "JavadocTest.java"
        ]
    },
    "ant_3d867ee": {
        "bug_id": "ant_3d867ee",
        "commit": "https://github.com/apache/ant/commit/3d867eee2e54bed60ba1ef28af554501622d6c5b",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/ant/blob/3d867eee2e54bed60ba1ef28af554501622d6c5b/src/main/org/apache/tools/ant/types/Description.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/types/Description.java?ref=3d867eee2e54bed60ba1ef28af554501622d6c5b",
                "deletions": 3,
                "filename": "src/main/org/apache/tools/ant/types/Description.java",
                "patch": "@@ -1,5 +1,5 @@\n /*\n- * Copyright  2001-2004 The Apache Software Foundation\n+ * Copyright  2001-2005 The Apache Software Foundation\n  *\n  *  Licensed under the Apache License, Version 2.0 (the \"License\");\n  *  you may not use this file except in compliance with the License.\n@@ -65,16 +65,19 @@ public void addText(String text) {\n     }\n \n     /**\n-     * return the descriptions from all the targets of\n+     * Return the descriptions from all the targets of\n      * a project.\n      *\n      * @param project the project to get the descriptions for.\n      * @return a string containing the concatenated descriptions of\n      *         the targets.\n      */\n     public static String getDescription(Project project) {\n-        StringBuffer description = new StringBuffer();\n         Vector targets = (Vector) project.getReference(\"ant.targets\");\n+        if (targets == null) {\n+            return null;\n+        }\n+        StringBuffer description = new StringBuffer();\n         for (int i = 0; i < targets.size(); i++) {\n             Target t = (Target) targets.elementAt(i);\n             concatDescriptions(project, t, description);",
                "raw_url": "https://github.com/apache/ant/raw/3d867eee2e54bed60ba1ef28af554501622d6c5b/src/main/org/apache/tools/ant/types/Description.java",
                "sha": "b9a6d292054bcfd2a7ad209f57943f8ca0872528",
                "status": "modified"
            }
        ],
        "message": "Avoid NPE thrown when using oata.helper.ProjectHelperImpl .\nReported by: Mark D. Hansen\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@277282 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/d81308747b0601b3f82c5621b6cc218135243028",
        "repo": "ant",
        "unit_tests": [
            "DescriptionTest.java"
        ]
    },
    "ant_535fd73": {
        "bug_id": "ant_535fd73",
        "commit": "https://github.com/apache/ant/commit/535fd73ec6c7c178a1b25f9d8dedefe10bad4b36",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/535fd73ec6c7c178a1b25f9d8dedefe10bad4b36/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java?ref=535fd73ec6c7c178a1b25f9d8dedefe10bad4b36",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "patch": "@@ -682,7 +682,7 @@ private int executeAsForked(JUnitTest test, ExecuteWatchdog watchdog)\n         } catch (IOException e) {\n             throw new BuildException(\"Process fork failed.\", e, getLocation());\n         } finally {\n-            if (watchdog.killedProcess()) {\n+            if (watchdog != null && watchdog.killedProcess()) {\n                 logTimeout(feArray, test);\n             }\n ",
                "raw_url": "https://github.com/apache/ant/raw/535fd73ec6c7c178a1b25f9d8dedefe10bad4b36/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "sha": "4835eaf10cee06a61d4a6a07a8cf5236487abe56",
                "status": "modified"
            }
        ],
        "message": "fix NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@273503 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/991d9d68708265b3c6981411ddf4bdc2682d858d",
        "repo": "ant",
        "unit_tests": [
            "JUnitTaskTest.java"
        ]
    },
    "ant_561706f": {
        "bug_id": "ant_561706f",
        "commit": "https://github.com/apache/ant/commit/561706f38cb5df71cf79785f4c6e5607de4dafa7",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/ant/blob/561706f38cb5df71cf79785f4c6e5607de4dafa7/src/main/org/apache/tools/ant/UnknownElement.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/UnknownElement.java?ref=561706f38cb5df71cf79785f4c6e5607de4dafa7",
                "deletions": 3,
                "filename": "src/main/org/apache/tools/ant/UnknownElement.java",
                "patch": "@@ -288,11 +288,14 @@ public void execute() {\n                 ((Task) realThing).execute();\n             }\n         } finally {\n-            // Finished executing the task, null it to allow\n+            // Finished executing the task\n+            // null it (unless it has an ID) to allow\n             // GC do its job\n             // If this UE is used again, a new \"realthing\" will be made\n-            realThing = null;\n-            getWrapper().setProxy(null);\n+            if (getWrapper().getId() == null) {\n+                realThing = null;\n+                getWrapper().setProxy(null);\n+            }\n         }\n     }\n ",
                "raw_url": "https://github.com/apache/ant/raw/561706f38cb5df71cf79785f4c6e5607de4dafa7/src/main/org/apache/tools/ant/UnknownElement.java",
                "sha": "6aa9eb41c7a778c254d5c275cea36d88768e7e5d",
                "status": "modified"
            }
        ],
        "message": "Bugzilla 44689: NPE with multiple targets and id's in task\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@641903 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/811a4f50d8fdff2d5813df05c284404aca263654",
        "repo": "ant",
        "unit_tests": [
            "UnknownElementTest.java"
        ]
    },
    "ant_5a4fe63": {
        "bug_id": "ant_5a4fe63",
        "commit": "https://github.com/apache/ant/commit/5a4fe63383258162c3374aebd048dee87efb4fd6",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/5a4fe63383258162c3374aebd048dee87efb4fd6/src/main/org/apache/tools/ant/taskdefs/SignJar.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/SignJar.java?ref=5a4fe63383258162c3374aebd048dee87efb4fd6",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/SignJar.java",
                "patch": "@@ -447,7 +447,7 @@ private void addTimestampAuthorityCommands(final ExecTask cmd) {\n      * @return true if the signedjarFile is considered up to date\n      */\n     protected boolean isUpToDate(File jarFile, File signedjarFile) {\n-        if (null == jarFile && !jarFile.exists()) {\n+        if (null == jarFile || !jarFile.exists()) {\n             //these are pathological cases, but retained in case somebody\n             //subclassed us.\n             return false;",
                "raw_url": "https://github.com/apache/ant/raw/5a4fe63383258162c3374aebd048dee87efb4fd6/src/main/org/apache/tools/ant/taskdefs/SignJar.java",
                "sha": "220aed6b167e310e3632d80f898568e09e3bbdde",
                "status": "modified"
            }
        ],
        "message": "Fix comparison w/ exposed NPE\nPR: 36093\nObtained from: Dave Brosius\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@278513 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/aa83249a9156ead7ae2c5a7c591fd3e90ebf5d00",
        "repo": "ant",
        "unit_tests": [
            "SignJarTest.java"
        ]
    },
    "ant_6515402": {
        "bug_id": "ant_6515402",
        "commit": "https://github.com/apache/ant/commit/65154027217934ed9b35aaeb8a765b763b4c77c3",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/65154027217934ed9b35aaeb8a765b763b4c77c3/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=65154027217934ed9b35aaeb8a765b763b4c77c3",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -132,6 +132,9 @@ Fixed bugs:\n * Concat task instance could not be run twice.\n   Bugzilla report 31814.\n \n+* NPE using XmlLogger and antlib.\n+  Bugzilla report 31840.\n+\n Changes from Ant 1.6.1 to Ant 1.6.2\n ===================================\n ",
                "raw_url": "https://github.com/apache/ant/raw/65154027217934ed9b35aaeb8a765b763b4c77c3/WHATSNEW",
                "sha": "cda6efca192902720e03d7bce06cfaddad83c167",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/65154027217934ed9b35aaeb8a765b763b4c77c3/src/main/org/apache/tools/ant/XmlLogger.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/XmlLogger.java?ref=65154027217934ed9b35aaeb8a765b763b4c77c3",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/XmlLogger.java",
                "patch": "@@ -291,6 +291,9 @@ public void taskStarted(BuildEvent event) {\n \n         Task task = event.getTask();\n         String name = event.getTask().getTaskName();\n+        if (name == null) {\n+            name = \"\";\n+        }\n         taskElement.element.setAttribute(NAME_ATTR, name);\n         taskElement.element.setAttribute(LOCATION_ATTR,\n                 event.getTask().getLocation().toString());",
                "raw_url": "https://github.com/apache/ant/raw/65154027217934ed9b35aaeb8a765b763b4c77c3/src/main/org/apache/tools/ant/XmlLogger.java",
                "sha": "892c02d21dfed77b45c24a278d0397defff3b666",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/65154027217934ed9b35aaeb8a765b763b4c77c3/src/main/org/apache/tools/ant/taskdefs/Antlib.java",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Antlib.java?ref=65154027217934ed9b35aaeb8a765b763b4c77c3",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Antlib.java",
                "patch": "@@ -82,6 +82,7 @@ public static Antlib createAntlib(Project project, URL antlibUrl,\n             Antlib antlib = new Antlib();\n             antlib.setProject(project);\n             antlib.setLocation(ue.getLocation());\n+            antlib.setTaskName(\"antlib\");\n             antlib.init();\n             ue.configure(antlib);\n             return antlib;",
                "raw_url": "https://github.com/apache/ant/raw/65154027217934ed9b35aaeb8a765b763b4c77c3/src/main/org/apache/tools/ant/taskdefs/Antlib.java",
                "sha": "f0b3a4bde3664239403573775d6880f0640e3279",
                "status": "modified"
            }
        ],
        "message": "NPE using XmlLogger and antlib\ncheck if the value of the name attribute is not null\nset the taskname of the antlib task\nPR: 31840\nObtained from: Mariano Benitez\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@276965 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/39404a01944f1f80a52e8318e75b0dfc84e08894",
        "repo": "ant",
        "unit_tests": [
            "AntlibTest.java"
        ]
    },
    "ant_75e6e7f": {
        "bug_id": "ant_75e6e7f",
        "commit": "https://github.com/apache/ant/commit/75e6e7f764495e29e7d15f0c40c125f7654616ee",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/75e6e7f764495e29e7d15f0c40c125f7654616ee/CONTRIBUTORS",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/CONTRIBUTORS?ref=75e6e7f764495e29e7d15f0c40c125f7654616ee",
                "deletions": 0,
                "filename": "CONTRIBUTORS",
                "patch": "@@ -6,6 +6,7 @@ Alexey Solofnenko\n Andreas Ames\n Andreas Mross\n Andrew Everitt\n+Andrey Urazov\n Anil K. Vijendran\n Anli Shundi\n Anthony Goubard",
                "raw_url": "https://github.com/apache/ant/raw/75e6e7f764495e29e7d15f0c40c125f7654616ee/CONTRIBUTORS",
                "sha": "90f80f17375e622a7e513ba53cc2e2d648e73a68",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/75e6e7f764495e29e7d15f0c40c125f7654616ee/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=75e6e7f764495e29e7d15f0c40c125f7654616ee",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -17,6 +17,9 @@ Fixed bugs:\n   take comparison with another CompressedResouce into account.\n   Bugzilla 40949.\n \n+* possible NPE in Jar.java.\n+  Bugzilla 40847\n+\n Other changes:\n --------------\n ",
                "raw_url": "https://github.com/apache/ant/raw/75e6e7f764495e29e7d15f0c40c125f7654616ee/WHATSNEW",
                "sha": "3111ea6d8136bf7e3e67b8ce72f1d770f5a48846",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/75e6e7f764495e29e7d15f0c40c125f7654616ee/contributors.xml",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/contributors.xml?ref=75e6e7f764495e29e7d15f0c40c125f7654616ee",
                "deletions": 0,
                "filename": "contributors.xml",
                "patch": "@@ -34,6 +34,10 @@\n     <first>Andrew</first>\n     <last>Everitt</last>\n   </name>\n+  <name>\n+    <first>Andrey</first>\n+    <last>Urazov</last>\n+  </name>\n   <name>\n     <first>Anil</first>\n     <middle>K.</middle>",
                "raw_url": "https://github.com/apache/ant/raw/75e6e7f764495e29e7d15f0c40c125f7654616ee/contributors.xml",
                "sha": "f65dc24d05cf6c1cf95c1458a3ca6d07a110b93e",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/75e6e7f764495e29e7d15f0c40c125f7654616ee/src/main/org/apache/tools/ant/taskdefs/Jar.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Jar.java?ref=75e6e7f764495e29e7d15f0c40c125f7654616ee",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Jar.java",
                "patch": "@@ -526,7 +526,7 @@ private void createIndexList(ZipOutputStream zOut) throws IOException {\n             Manifest.Attribute classpath =\n                 mf.getMainSection().getAttribute(Manifest.ATTRIBUTE_CLASSPATH);\n             String[] cpEntries = null;\n-            if (classpath != null) {\n+            if (classpath != null && classpath.getValue() != null) {\n                 StringTokenizer tok = new StringTokenizer(classpath.getValue(),\n                                                           \" \");\n                 cpEntries = new String[tok.countTokens()];",
                "raw_url": "https://github.com/apache/ant/raw/75e6e7f764495e29e7d15f0c40c125f7654616ee/src/main/org/apache/tools/ant/taskdefs/Jar.java",
                "sha": "f58788634185c5eeaffb0136197ce627110a8084",
                "status": "modified"
            }
        ],
        "message": "Bugzilla 40847: possible NPE in Jar.java\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@474481 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/91a92f10340b639878efaee4d24776f277f9ac1d",
        "repo": "ant",
        "unit_tests": [
            "JarTest.java"
        ]
    },
    "ant_7b90e49": {
        "bug_id": "ant_7b90e49",
        "commit": "https://github.com/apache/ant/commit/7b90e493e8f5388bf88f0d951880d6667f9a8016",
        "file": [
            {
                "additions": 17,
                "blob_url": "https://github.com/apache/ant/blob/7b90e493e8f5388bf88f0d951880d6667f9a8016/src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "changes": 27,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Ant.java?ref=7b90e493e8f5388bf88f0d951880d6667f9a8016",
                "deletions": 10,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "patch": "@@ -365,9 +365,7 @@ public void execute() throws BuildException {\n                 .equals(getProject().getProperty(\"ant.file\"))\n                 && getOwningTarget() != null) {\n \n-                String owningTargetName = getOwningTarget().getName();\n-\n-                if (owningTargetName.equals(\"\")) {\n+                if (getOwningTarget().getName().equals(\"\")) {\n                     if (getTaskName().equals(\"antcall\")) {\n                         throw new BuildException(\"antcall must not be used at\"\n                                                  + \" the top level.\");\n@@ -376,7 +374,22 @@ public void execute() throws BuildException {\n                                                  + \" top level must not invoke\"\n                                                  + \" its own build file.\");\n                     }\n-                } else if (owningTargetName.equals(target)) {\n+                }\n+            }\n+\n+            ProjectHelper.configureProject(newProject, new File(antFile));\n+\n+            if (target == null) {\n+                target = newProject.getDefaultTarget();\n+            }\n+\n+            if (newProject.getProperty(\"ant.file\")\n+                .equals(getProject().getProperty(\"ant.file\"))\n+                && getOwningTarget() != null) {\n+\n+                String owningTargetName = getOwningTarget().getName();\n+\n+                if (owningTargetName.equals(target)) {\n                     throw new BuildException(getTaskName() + \" task calling \"\n                                              + \"its own parent target.\");\n                 } else {\n@@ -393,12 +406,6 @@ public void execute() throws BuildException {\n                 }\n             }\n \n-            ProjectHelper.configureProject(newProject, new File(antFile));\n-\n-            if (target == null) {\n-                target = newProject.getDefaultTarget();\n-            }\n-\n             addReferences();\n \n             if (target != null) {",
                "raw_url": "https://github.com/apache/ant/raw/7b90e493e8f5388bf88f0d951880d6667f9a8016/src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "sha": "bb631c0759d517f59ee167d7bbe1dfa785dffb70",
                "status": "modified"
            }
        ],
        "message": "It is legal to omit the target attribute in <ant>, don't die with a NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@275211 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/da7ebd07b866580dae3c60cd4c7e3aefd0f335f0",
        "repo": "ant",
        "unit_tests": [
            "AntTest.java"
        ]
    },
    "ant_8031b53": {
        "bug_id": "ant_8031b53",
        "commit": "https://github.com/apache/ant/commit/8031b5383949411e6f07a300834a9febf9ee1a1a",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/8031b5383949411e6f07a300834a9febf9ee1a1a/src/main/org/apache/tools/ant/UnknownElement.java",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/UnknownElement.java?ref=8031b5383949411e6f07a300834a9febf9ee1a1a",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/UnknownElement.java",
                "patch": "@@ -126,6 +126,7 @@ public void maybeConfigure() throws BuildException {\n         if (realThing instanceof Task) {\n             Task task=(Task)realThing;\n \n+            task.setProject(project);\n             task.setRuntimeConfigurableWrapper(getWrapper());\n             task.setLocation(this.getLocation());\n             // UnknownElement always has an associated target",
                "raw_url": "https://github.com/apache/ant/raw/8031b5383949411e6f07a300834a9febf9ee1a1a/src/main/org/apache/tools/ant/UnknownElement.java",
                "sha": "8a099d708bb28e387ffa5b45a5c96d44d2b0a76d",
                "status": "modified"
            }
        ],
        "message": "Weird. UE didn't seem to call setProject on the task. That seems to be\nthe cause of the NPE.\n\nPR:\nObtained from:\nSubmitted by:\nReviewed by:\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@273731 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/f4c8d96068a4cc2e0d1ef67dff8a628089f452ca",
        "repo": "ant",
        "unit_tests": [
            "UnknownElementTest.java"
        ]
    },
    "ant_83c26f5": {
        "bug_id": "ant_83c26f5",
        "commit": "https://github.com/apache/ant/commit/83c26f549b5ef21e9956ff3e88ccb18fc7d96065",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/83c26f549b5ef21e9956ff3e88ccb18fc7d96065/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=83c26f549b5ef21e9956ff3e88ccb18fc7d96065",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -328,6 +328,9 @@ Fixed bugs:\n * <zip> couldn't store files with size between 2GB and 4GB (the\n   upper limit set by the ZIP format itself).  Bugzilla Report 33310.\n \n+* NPE when when <presetdef> tries to configure a task that\n+  cannot be instantiated. Bugzilla Report 33689.\n+\n Changes from Ant 1.6.1 to Ant 1.6.2\n ===================================\n ",
                "raw_url": "https://github.com/apache/ant/raw/83c26f549b5ef21e9956ff3e88ccb18fc7d96065/WHATSNEW",
                "sha": "f0af8797ed6e6ef7d134c0eb57c8232995856e77",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/ant/blob/83c26f549b5ef21e9956ff3e88ccb18fc7d96065/src/main/org/apache/tools/ant/UnknownElement.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/UnknownElement.java?ref=83c26f549b5ef21e9956ff3e88ccb18fc7d96065",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/UnknownElement.java",
                "patch": "@@ -404,6 +404,11 @@ protected Object makeObject(UnknownElement ue, RuntimeConfigurable w) {\n         if (o instanceof PreSetDef.PreSetDefinition) {\n             PreSetDef.PreSetDefinition def = (PreSetDef.PreSetDefinition) o;\n             o = def.createObject(ue.getProject());\n+            if (o == null) {\n+                throw getNotFoundException(\n+                    \"preset \" + name,\n+                    def.getPreSets().getComponentName());\n+            }\n             ue.applyPreSet(def.getPreSets());\n             if (o instanceof Task) {\n                 Task task = (Task) o;",
                "raw_url": "https://github.com/apache/ant/raw/83c26f549b5ef21e9956ff3e88ccb18fc7d96065/src/main/org/apache/tools/ant/UnknownElement.java",
                "sha": "fd888f42e58fb6f52aba7b7c09a844f7e669cc9e",
                "status": "modified"
            }
        ],
        "message": " NPE when when <presetdef> tries to configure a task that\n  cannot be instantiated.\nPR:  33689\nReported by: Steve Loughran\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@277704 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/18994a02c97de68fbcae9b887df71671491157c1",
        "repo": "ant",
        "unit_tests": [
            "UnknownElementTest.java"
        ]
    },
    "ant_8522387": {
        "bug_id": "ant_8522387",
        "commit": "https://github.com/apache/ant/commit/8522387c40027238decd43f7e5028cca491bf26c",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/8522387c40027238decd43f7e5028cca491bf26c/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=8522387c40027238decd43f7e5028cca491bf26c",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -204,6 +204,9 @@ Fixed bugs:\n \n * DirectoryScanner.slowScan() was broken. Bugzilla report 34722.\n \n+* DirectoryScanner.scan() could throw a NullPointerException on\n+  case-insensitive filesystems (read Windows or MacOS X).\n+\n Other changes:\n --------------\n ",
                "raw_url": "https://github.com/apache/ant/raw/8522387c40027238decd43f7e5028cca491bf26c/WHATSNEW",
                "sha": "d7b21180425ba1e9055e89404b21f7bf08e7deb5",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/8522387c40027238decd43f7e5028cca491bf26c/src/main/org/apache/tools/ant/DirectoryScanner.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/DirectoryScanner.java?ref=8522387c40027238decd43f7e5028cca491bf26c",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/DirectoryScanner.java",
                "patch": "@@ -872,7 +872,7 @@ private void checkIncludePatterns() {\n                 }\n                 if ((myfile == null || !myfile.exists()) && !isCaseSensitive()) {\n                     File f = findFile(basedir, currentelement, false);\n-                    if (f.exists()) {\n+                    if (f != null && f.exists()) {\n                         // adapt currentelement to the case we've\n                         // actually found\n                         currentelement = FILE_UTILS.removeLeadingPath(basedir,",
                "raw_url": "https://github.com/apache/ant/raw/8522387c40027238decd43f7e5028cca491bf26c/src/main/org/apache/tools/ant/DirectoryScanner.java",
                "sha": "0bf8267adec2a21ea0930d966a4ec3d3009525e0",
                "status": "modified"
            }
        ],
        "message": "fix NPE reported by Curt Arnold\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@278239 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/fddcc94a0c3e2f1687b492627dc5c2e0b6e747c0",
        "repo": "ant",
        "unit_tests": [
            "DirectoryScannerTest.java"
        ]
    },
    "ant_873b850": {
        "bug_id": "ant_873b850",
        "commit": "https://github.com/apache/ant/commit/873b850f39a26e4911d612c157622751ac9582f9",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/873b850f39a26e4911d612c157622751ac9582f9/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=873b850f39a26e4911d612c157622751ac9582f9",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -16,6 +16,9 @@ Fixed bugs:\n * behavior change of DirectoryScanner/AbstractFileset when conditional include\n   patterns are used. Bugzilla 40722.\n \n+* <javac> fails with NPE when compiling with eclipse ecj 3.1.x.\n+  Bugzilla 40839.\n+  \n Other changes:\n --------------\n ",
                "raw_url": "https://github.com/apache/ant/raw/873b850f39a26e4911d612c157622751ac9582f9/WHATSNEW",
                "sha": "b73511beee2ac4abe14390927a89ffd11f79b117",
                "status": "modified"
            },
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/ant/blob/873b850f39a26e4911d612c157622751ac9582f9/src/main/org/apache/tools/ant/types/Path.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/types/Path.java?ref=873b850f39a26e4911d612c157622751ac9582f9",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/types/Path.java",
                "patch": "@@ -201,6 +201,9 @@ public PathElement createPathElement() throws BuildException {\n      * @throws BuildException on error\n      */\n     public void addFileset(FileSet fs) throws BuildException {\n+        if (fs.getProject() == null) {\n+            fs.setProject(getProject());\n+        }\n         add(fs);\n     }\n \n@@ -210,6 +213,9 @@ public void addFileset(FileSet fs) throws BuildException {\n      * @throws BuildException on error\n      */\n     public void addFilelist(FileList fl) throws BuildException {\n+        if (fl.getProject() == null) {\n+            fl.setProject(getProject());\n+        }\n         add(fl);\n     }\n \n@@ -219,6 +225,9 @@ public void addFilelist(FileList fl) throws BuildException {\n      * @throws BuildException on error\n      */\n     public void addDirset(DirSet dset) throws BuildException {\n+        if (dset.getProject() == null) {\n+            dset.setProject(getProject());\n+        }\n         add(dset);\n     }\n \n@@ -229,6 +238,9 @@ public void addDirset(DirSet dset) throws BuildException {\n      * @since Ant 1.6\n      */\n     public void add(Path path) throws BuildException {\n+        if (path.getProject() == null) {\n+            path.setProject(getProject());\n+        }\n         add((ResourceCollection) path);\n     }\n ",
                "raw_url": "https://github.com/apache/ant/raw/873b850f39a26e4911d612c157622751ac9582f9/src/main/org/apache/tools/ant/types/Path.java",
                "sha": "b5cc076d8468c5e2c35b05830238e3a5eb85dfd2",
                "status": "modified"
            }
        ],
        "message": "fix for \n<javac> fails with NPE when compiling with eclipse ecj 3.1.x\nBugzilla 40839.\nroot cause of the problem was in org.eclipse.jdt.core.JDTCompiler\nmethod addExtDirs. A FileSet was created without the Project attribute set,\nthen added to a Path.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@469050 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/de36c747cb45e86fb2d6a49bd9185f8d8b173ec1",
        "repo": "ant",
        "unit_tests": [
            "PathTest.java"
        ]
    },
    "ant_89ab116": {
        "bug_id": "ant_89ab116",
        "commit": "https://github.com/apache/ant/commit/89ab1168c984084b8d804744ea8a74f268cb1fe5",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/ant/blob/89ab1168c984084b8d804744ea8a74f268cb1fe5/src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Ant.java?ref=89ab1168c984084b8d804744ea8a74f268cb1fe5",
                "deletions": 3,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "patch": "@@ -321,11 +321,13 @@ public void execute() throws BuildException {\n                     + \" in build file \" +  antFile, Project.MSG_VERBOSE);\n             newProject.setUserProperty(\"ant.file\" , antFile);\n \n+            String thisAntFile = getProject().getProperty(\"ant.file\");\n             // Are we trying to call the target in which we are defined (or\n             // the build file if this is a top level task)?\n-            if (newProject.resolveFile(newProject.getProperty(\"ant.file\"))\n-                .equals(getProject().resolveFile(getProject()\n-                .getProperty(\"ant.file\"))) && getOwningTarget() != null) {\n+            if (thisAntFile != null\n+                && newProject.resolveFile(newProject.getProperty(\"ant.file\"))\n+                .equals(getProject().resolveFile(thisAntFile)) \n+                && getOwningTarget() != null) {\n \n                 if (getOwningTarget().getName().equals(\"\")) {\n                     if (getTaskName().equals(\"antcall\")) {",
                "raw_url": "https://github.com/apache/ant/raw/89ab1168c984084b8d804744ea8a74f268cb1fe5/src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "sha": "4d49898ebf51cee84a9cc93d2093cdd7d900ffae",
                "status": "modified"
            }
        ],
        "message": "Don't die if the ant.file property hasn't been set.\n\nJelly's Ant tag library currently doesn't set this property and each\n<ant> task used in Jelly will result in an NPE otherwise.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@276290 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/e33f1d105f6988df483bc075a630c6aa7a3b536a",
        "repo": "ant",
        "unit_tests": [
            "AntTest.java"
        ]
    },
    "ant_983f0db": {
        "bug_id": "ant_983f0db",
        "commit": "https://github.com/apache/ant/commit/983f0dbc16a4c8b93fae21bfc480b03138104a7a",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/983f0dbc16a4c8b93fae21bfc480b03138104a7a/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=983f0dbc16a4c8b93fae21bfc480b03138104a7a",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -73,6 +73,9 @@ Fixed bugs:\n    within messageLogged while a different thread also accessed one.\n    Bugzilla report 45194\n \n+ * Handle null result of system getProperty() in CommandlineJava.\n+   Similar to Bugzilla report 42334.\n+\n Other changes:\n --------------\n ",
                "raw_url": "https://github.com/apache/ant/raw/983f0dbc16a4c8b93fae21bfc480b03138104a7a/WHATSNEW",
                "sha": "f76fae1ebac50a158f959d4ccf6d1e24e344f959",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/983f0dbc16a4c8b93fae21bfc480b03138104a7a/src/main/org/apache/tools/ant/types/CommandlineJava.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/types/CommandlineJava.java?ref=983f0dbc16a4c8b93fae21bfc480b03138104a7a",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/types/CommandlineJava.java",
                "patch": "@@ -140,7 +140,10 @@ public void setSystem() throws BuildException {\n                 Properties p = new Properties();\n                 for (Enumeration e = sys.propertyNames(); e.hasMoreElements();) {\n                     String name = (String) e.nextElement();\n-                    p.put(name, sys.getProperty(name));\n+                    String value = sys.getProperty(name);\n+                    if (name != null && value != null) {\n+                        p.put(name, value);\n+                    }\n                 }\n                 p.putAll(mergePropertySets());\n                 for (Enumeration e = variables.elements(); e.hasMoreElements();) {",
                "raw_url": "https://github.com/apache/ant/raw/983f0dbc16a4c8b93fae21bfc480b03138104a7a/src/main/org/apache/tools/ant/types/CommandlineJava.java",
                "sha": "921eebd817db11873c59d64bbca67cde74381f13",
                "status": "modified"
            }
        ],
        "message": "fix NPE when running inside a container that puts non-String values inside the system properties\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@671018 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/d8ae5c5bdd298b9b99b5f9d6f82c4255c01036d2",
        "repo": "ant",
        "unit_tests": [
            "CommandlineJavaTest.java"
        ]
    },
    "ant_a679a5b": {
        "bug_id": "ant_a679a5b",
        "commit": "https://github.com/apache/ant/commit/a679a5bbce605a1e4326d56030baeecb3a1bf4b7",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/a679a5bbce605a1e4326d56030baeecb3a1bf4b7/src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java?ref=a679a5bbce605a1e4326d56030baeecb3a1bf4b7",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java",
                "patch": "@@ -561,6 +561,9 @@ private void clearCaches() {\n             return listFiles(directory, true);\n         }\n         private void checkRemoteSensitivity(FTPFile[] array, String directory) {\n+            if (array == null) {\n+                return;\n+            }\n             boolean candidateFound = false;\n             String target = null;\n             for (int icounter = 0; icounter < array.length; icounter++) {",
                "raw_url": "https://github.com/apache/ant/raw/a679a5bbce605a1e4326d56030baeecb3a1bf4b7/src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java",
                "sha": "2781499f82b8504cd66d102b5d609e674910b70f",
                "status": "modified"
            }
        ],
        "message": "Prevent NPE in method CheckRemoteSensitivity\nPR: 24440\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@275615 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/3838c6ba287baf4bb3566ed47b0c99840b7ebba8",
        "repo": "ant",
        "unit_tests": [
            "FTPTest.java"
        ]
    },
    "ant_a9592b8": {
        "bug_id": "ant_a9592b8",
        "commit": "https://github.com/apache/ant/commit/a9592b869e5648b3508ecd855bddf1dc182cb8f6",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/a9592b869e5648b3508ecd855bddf1dc182cb8f6/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=a9592b869e5648b3508ecd855bddf1dc182cb8f6",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -154,6 +154,9 @@ Fixed bugs:\n * War task failed with \"No WEB-INF/web.xml file was added\" when called\n   a second time. Bugzilla 43121.\n \n+* FilterMapper could throw an NPE.\n+  Bugzilla 43292.\n+\n Other changes:\n --------------\n * <script> now has basic support for JavaFX scripts",
                "raw_url": "https://github.com/apache/ant/raw/a9592b869e5648b3508ecd855bddf1dc182cb8f6/WHATSNEW",
                "sha": "f5c34f1343865ddfd0fe84c4bf03ed2f5b9170a7",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/a9592b869e5648b3508ecd855bddf1dc182cb8f6/src/main/org/apache/tools/ant/util/FileUtils.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/util/FileUtils.java?ref=a9592b869e5648b3508ecd855bddf1dc182cb8f6",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/util/FileUtils.java",
                "patch": "@@ -930,7 +930,7 @@ public static String readFully(Reader rdr, int bufferSize)\n                 textBuffer.append(new String(buffer, 0, bufferLength));\n             }\n         }\n-        return (textBuffer == null) ? null : textBuffer.toString();\n+        return (textBuffer == null) ? \"\" : textBuffer.toString();\n     }\n \n     /**",
                "raw_url": "https://github.com/apache/ant/raw/a9592b869e5648b3508ecd855bddf1dc182cb8f6/src/main/org/apache/tools/ant/util/FileUtils.java",
                "sha": "95e463972848cf99649feaf92122ef089a4a5dff",
                "status": "modified"
            }
        ],
        "message": "Bugzilla 43292: filtermapper could throw an NPE. - change FileUtils to return an empty string rather than null for zero-length files\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@572302 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/709b55e997f18733d16471926b27d2776cd27402",
        "repo": "ant",
        "unit_tests": [
            "FileUtilsTest.java"
        ]
    },
    "ant_ab3f805": {
        "bug_id": "ant_ab3f805",
        "commit": "https://github.com/apache/ant/commit/ab3f805895e7c27ca8a724d94c34fabbc9cf3233",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/ab3f805895e7c27ca8a724d94c34fabbc9cf3233/src/main/org/apache/tools/ant/taskdefs/Zip.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Zip.java?ref=ab3f805895e7c27ca8a724d94c34fabbc9cf3233",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Zip.java",
                "patch": "@@ -553,7 +553,9 @@ public void executeMain() throws BuildException {\n                     }\n                     addResources(oldFiles, r, zOut);\n                 }\n-                zOut.setComment(comment);\n+                if (zOut != null) {\n+                    zOut.setComment(comment);\n+                }\n                 finalizeZipOutputStream(zOut);\n \n                 // If we've been successful on an update, delete the",
                "raw_url": "https://github.com/apache/ant/raw/ab3f805895e7c27ca8a724d94c34fabbc9cf3233/src/main/org/apache/tools/ant/taskdefs/Zip.java",
                "sha": "739dc3379ee1defd3dde49789df5c5f36c312056",
                "status": "modified"
            }
        ],
        "message": "NPE when adding comment to zip file that is not there\nPR: 33779\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@277746 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/756f96fdf3b1e01b2a0ddd5d1051770dec2540f2",
        "repo": "ant",
        "unit_tests": [
            "ZipTest.java"
        ]
    },
    "ant_ac78dc1": {
        "bug_id": "ant_ac78dc1",
        "commit": "https://github.com/apache/ant/commit/ac78dc16022004312e74b42fbe14b9936341855e",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/ac78dc16022004312e74b42fbe14b9936341855e/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=ac78dc16022004312e74b42fbe14b9936341855e",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -18,6 +18,9 @@ Fixed bugs:\n \n * <javac> fails with NPE when compiling with eclipse ecj 3.1.x.\n   Bugzilla 40839.\n+\n+* JUnitTestRunner had a NPE when unable to create parser, the exception\n+  containing the error did not get reported. Bugzilla 36733.\n   \n Other changes:\n --------------",
                "raw_url": "https://github.com/apache/ant/raw/ac78dc16022004312e74b42fbe14b9936341855e/WHATSNEW",
                "sha": "1ee9995b343642248ca385d34705b4397a2e088c",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/ant/blob/ac78dc16022004312e74b42fbe14b9936341855e/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTestRunner.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTestRunner.java?ref=ac78dc16022004312e74b42fbe14b9936341855e",
                "deletions": 2,
                "filename": "src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTestRunner.java",
                "patch": "@@ -288,6 +288,7 @@ public void write(int b) {}\n \n         Test suite = null;\n         Throwable exception = null;\n+        boolean startTestSuiteSuccess = false;\n \n         try {\n \n@@ -368,6 +369,7 @@ public void write(int b) {}\n             long start = System.currentTimeMillis();\n \n             fireStartTestSuite();\n+            startTestSuiteSuccess = true;        \n             if (exception != null) { // had an exception constructing suite\n                 for (int i = 0; i < formatters.size(); i++) {\n                     ((TestListener) formatters.elementAt(i))\n@@ -405,8 +407,10 @@ public void write(int b) {}\n             systemError = null;\n             systemOut.close();\n             systemOut = null;\n-            sendOutAndErr(new String(outStrm.toByteArray()),\n-                          new String(errStrm.toByteArray()));\n+            if (startTestSuiteSuccess) {\n+                sendOutAndErr(new String(outStrm.toByteArray()),\n+                              new String(errStrm.toByteArray()));\n+            }\n         }\n         fireEndTestSuite();\n ",
                "raw_url": "https://github.com/apache/ant/raw/ac78dc16022004312e74b42fbe14b9936341855e/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTestRunner.java",
                "sha": "51d2f671b6cfc7dacdaa762cb183518ba0c995e9",
                "status": "modified"
            }
        ],
        "message": "Bugzilla 36733, NPE when failure in creating parser\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@469303 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/873b850f39a26e4911d612c157622751ac9582f9",
        "repo": "ant",
        "unit_tests": [
            "JUnitTestRunnerTest.java"
        ]
    },
    "ant_b0d9f8a": {
        "bug_id": "ant_b0d9f8a",
        "commit": "https://github.com/apache/ant/commit/b0d9f8aa0137890a06875525db92bf44decfa512",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/b0d9f8aa0137890a06875525db92bf44decfa512/WHATSNEW",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=b0d9f8aa0137890a06875525db92bf44decfa512",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -138,6 +138,10 @@ Fixed bugs:\n    from a resource or string explicitly.\n    Bugzilla Report 49587.\n \n+ * Project#setDefault threw an excpetion when null was passed in as\n+   argument, even though the javadoc says, null is a valid value.\n+   Bugzilla Report 49803.\n+\n Other changes:\n --------------\n ",
                "raw_url": "https://github.com/apache/ant/raw/b0d9f8aa0137890a06875525db92bf44decfa512/WHATSNEW",
                "sha": "d865037bfc2936c42fcf87ec34418284160d0f48",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/b0d9f8aa0137890a06875525db92bf44decfa512/src/main/org/apache/tools/ant/Project.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/Project.java?ref=b0d9f8aa0137890a06875525db92bf44decfa512",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/Project.java",
                "patch": "@@ -729,7 +729,9 @@ public String getDefaultTarget() {\n      *                      no default target.\n      */\n     public void setDefault(String defaultTarget) {\n-        setUserProperty(MagicNames.PROJECT_DEFAULT_TARGET, defaultTarget);\n+        if (defaultTarget != null) {\n+            setUserProperty(MagicNames.PROJECT_DEFAULT_TARGET, defaultTarget);\n+        }\n         this.defaultTarget = defaultTarget;\n     }\n ",
                "raw_url": "https://github.com/apache/ant/raw/b0d9f8aa0137890a06875525db92bf44decfa512/src/main/org/apache/tools/ant/Project.java",
                "sha": "27f5f3289a2da06653cdc4a2e4e174cb8033c296",
                "status": "modified"
            }
        ],
        "message": "NPE in Project.setDefault.  PR 49803\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@988095 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/7119b3f030ddaa3e88117fa37aeb17b65cdab485",
        "repo": "ant",
        "unit_tests": [
            "ProjectTest.java"
        ]
    },
    "ant_bb1f1c6": {
        "bug_id": "ant_bb1f1c6",
        "commit": "https://github.com/apache/ant/commit/bb1f1c678b69a5a0df6c94889146a0f1b95bfca0",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/ant/blob/bb1f1c678b69a5a0df6c94889146a0f1b95bfca0/src/main/org/apache/tools/ant/taskdefs/Input.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Input.java?ref=bb1f1c678b69a5a0df6c94889146a0f1b95bfca0",
                "deletions": 2,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Input.java",
                "patch": "@@ -133,7 +133,7 @@ public Input () {\n     }\n \n     /**\n-     * Actual test method executed by jakarta-ant.\n+     * Actual method executed by jakarta-ant.\n      * @exception BuildException\n      */\n     public void execute () throws BuildException {\n@@ -152,7 +152,7 @@ public void execute () throws BuildException {\n             && defaultvalue != null) {\n             value = defaultvalue;\n         }\n-        if (addproperty != null) {\n+        if (addproperty != null && value != null) {\n             getProject().setNewProperty(addproperty, value);\n         }\n     }",
                "raw_url": "https://github.com/apache/ant/raw/bb1f1c678b69a5a0df6c94889146a0f1b95bfca0/src/main/org/apache/tools/ant/taskdefs/Input.java",
                "sha": "752b3d7cf97497e210b0b4cba1c5bfc0a074d58c",
                "status": "modified"
            }
        ],
        "message": "Avoid NPE if input failed\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@274178 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/6528412d219b05ca763dc198bd3e7d75754e57c5",
        "repo": "ant",
        "unit_tests": [
            "InputTest.java"
        ]
    },
    "ant_bc27fce": {
        "bug_id": "ant_bc27fce",
        "commit": "https://github.com/apache/ant/commit/bc27fce2a42366b92093ad1f276b04d13bf9c372",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/bc27fce2a42366b92093ad1f276b04d13bf9c372/src/main/org/apache/tools/ant/taskdefs/Rmic.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Rmic.java?ref=bc27fce2a42366b92093ad1f276b04d13bf9c372",
                "deletions": 3,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Rmic.java",
                "patch": "@@ -366,6 +366,9 @@ public void execute() throws BuildException {\n \n         String compiler = project.getProperty(\"build.rmic\");\n         RmicAdapter adapter = RmicAdapterFactory.getRmic(compiler, this );\n+            \n+        // now we need to populate the compiler adapter\n+        adapter.setRmic( this );\n \n         Path classpath = adapter.getClasspath();\n         loader = new AntClassLoader(project, classpath);\n@@ -388,9 +391,6 @@ public void execute() throws BuildException {\n             log(\"RMI Compiling \" + fileCount +\n                 \" class\"+ (fileCount > 1 ? \"es\" : \"\")+\" to \" + baseDir, \n                 Project.MSG_INFO);\n-            \n-            // now we need to populate the compiler adapter\n-            adapter.setRmic( this );\n \n             // finally, lets execute the compiler!!\n             if (!adapter.execute()) {",
                "raw_url": "https://github.com/apache/ant/raw/bc27fce2a42366b92093ad1f276b04d13bf9c372/src/main/org/apache/tools/ant/taskdefs/Rmic.java",
                "sha": "2759e2aeb8f9893b04a0736709834fa45da6acbd",
                "status": "modified"
            }
        ],
        "message": "Fix for NPE when getClasspath is called before setRmic\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@268855 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/7fc63c89ac9ecc5e05dfc1240646e96d056e3b1c",
        "repo": "ant",
        "unit_tests": [
            "RmicTest.java"
        ]
    },
    "ant_bc28d31": {
        "bug_id": "ant_bc28d31",
        "commit": "https://github.com/apache/ant/commit/bc28d31407036126e05e4d64f2b138af69603c7a",
        "file": [
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/ant/blob/bc28d31407036126e05e4d64f2b138af69603c7a/src/main/org/apache/tools/ant/util/ResourceUtils.java",
                "changes": 15,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/util/ResourceUtils.java?ref=bc28d31407036126e05e4d64f2b138af69603c7a",
                "deletions": 4,
                "filename": "src/main/org/apache/tools/ant/util/ResourceUtils.java",
                "patch": "@@ -155,12 +155,19 @@ public static ResourceCollection selectOutOfDateSources(ProjectComponent logTo,\n         Union result = new Union();\n         for (Iterator iter = source.iterator(); iter.hasNext();) {\n             Resource sr = (Resource) iter.next();\n-            String[] targetnames = mapper.mapFileName(\n-                sr.getName().replace('/', File.separatorChar));\n+            String srName = sr.getName();\n+            srName = srName == null\n+                ? srName : srName.replace('/', File.separatorChar);\n \n+            String[] targetnames = null;\n+            try {\n+                targetnames = mapper.mapFileName(srName);\n+            } catch (Exception e) {\n+\t\tlogTo.log(\"Caught \" + e + \" mapping resource \" + sr,\n+                    Project.MSG_VERBOSE);\n+            }\n             if (targetnames == null || targetnames.length == 0) {\n-                logTo.log(sr.getName()\n-                      + \" skipped - don\\'t know how to handle it\",\n+                logTo.log(sr + \" skipped - don\\'t know how to handle it\",\n                       Project.MSG_VERBOSE);\n                 continue;\n             }",
                "raw_url": "https://github.com/apache/ant/raw/bc28d31407036126e05e4d64f2b138af69603c7a/src/main/org/apache/tools/ant/util/ResourceUtils.java",
                "sha": "9b681a596ed6b8a1b613223b1540af0918aba006",
                "status": "modified"
            }
        ],
        "message": "last minute; avoid NPE when attempting to map no-name resource. Bugzilla 39960.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@484850 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/efa433f65ff68b646d9b7232f0968a9b697c5cc2",
        "repo": "ant",
        "unit_tests": [
            "ResourceUtilsTest.java"
        ]
    },
    "ant_cc0e324": {
        "bug_id": "ant_cc0e324",
        "commit": "https://github.com/apache/ant/commit/cc0e324731a891e92e312509632da25581d89782",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/cc0e324731a891e92e312509632da25581d89782/src/main/org/apache/tools/ant/XmlLogger.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/XmlLogger.java?ref=cc0e324731a891e92e312509632da25581d89782",
                "deletions": 3,
                "filename": "src/main/org/apache/tools/ant/XmlLogger.java",
                "patch": "@@ -101,7 +101,7 @@ private static DocumentBuilder getDocumentBuilder() {\n     private final static String ERROR_ATTR = \"error\";\n     private final static String STACKTRACE_TAG = \"stacktrace\";\n \n-    private Document doc;\n+    private Document doc = builder.newDocument();\n     private Hashtable tasks = new Hashtable();\n     private Hashtable targets = new Hashtable();\n     private Hashtable threadStacks = new Hashtable();\n@@ -121,8 +121,6 @@ public XmlLogger() {\n     public void buildStarted(BuildEvent event) {\n         buildElement = new TimedElement();\n         buildElement.startTime = System.currentTimeMillis();\n-\n-        doc = builder.newDocument();\n         buildElement.element = doc.createElement(BUILD_TAG);\n     }\n ",
                "raw_url": "https://github.com/apache/ant/raw/cc0e324731a891e92e312509632da25581d89782/src/main/org/apache/tools/ant/XmlLogger.java",
                "sha": "8069926ffd26bde10eba0cbec4c58cee45435fdc",
                "status": "modified"
            }
        ],
        "message": "Instantiate the document in the constructor so that\nan event other than build started does not initiate a NPE.\nPR: 5538\nReported by: sh@blsun.com (Scott Halstead)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@270272 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/ad5e0dc61cb1a2855be8ae6ec6f3e1dd76d1824b",
        "repo": "ant",
        "unit_tests": [
            "XmlLoggerTest.java"
        ]
    },
    "ant_ce81059": {
        "bug_id": "ant_ce81059",
        "commit": "https://github.com/apache/ant/commit/ce81059049a47a2d9da23d84245af9763114cd3f",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/ce81059049a47a2d9da23d84245af9763114cd3f/CONTRIBUTORS",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/CONTRIBUTORS?ref=ce81059049a47a2d9da23d84245af9763114cd3f",
                "deletions": 0,
                "filename": "CONTRIBUTORS",
                "patch": "@@ -269,6 +269,7 @@ Philip Hourihane\n Phillip Wells\n Pierre Delisle\n Pierre Dittgen\n+riasol\n R Handerson\n Rami Ojares\n Randy Watler",
                "raw_url": "https://github.com/apache/ant/raw/ce81059049a47a2d9da23d84245af9763114cd3f/CONTRIBUTORS",
                "sha": "bd35ada85ffba0d178b51b500661c19aa8533173",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/ce81059049a47a2d9da23d84245af9763114cd3f/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=ce81059049a47a2d9da23d84245af9763114cd3f",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -192,6 +192,9 @@ Fixed bugs:\n    provided using non-fileset resource collections.\n    Bugzilla Issue 50115.\n \n+*  ftp chmod could throw a NPE.\n+   Bugzilla report 50217.\n+\n Other changes:\n --------------\n ",
                "raw_url": "https://github.com/apache/ant/raw/ce81059049a47a2d9da23d84245af9763114cd3f/WHATSNEW",
                "sha": "88f656d0524bef86860d714bd678648f1965bcc2",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/ce81059049a47a2d9da23d84245af9763114cd3f/contributors.xml",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/contributors.xml?ref=ce81059049a47a2d9da23d84245af9763114cd3f",
                "deletions": 0,
                "filename": "contributors.xml",
                "patch": "@@ -1468,4 +1468,8 @@\n     <first>Zdenek</first>\n     <last>Wagner</last>\n   </name>\n+  <name>\n+    <first/>\n+    <last>riasol</last>\n+  </name>\n </contributors>",
                "raw_url": "https://github.com/apache/ant/raw/ce81059049a47a2d9da23d84245af9763114cd3f/contributors.xml",
                "sha": "8f8879a07563fe7be6ce5611a612b533ce7c0053",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/ce81059049a47a2d9da23d84245af9763114cd3f/src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java?ref=ce81059049a47a2d9da23d84245af9763114cd3f",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java",
                "patch": "@@ -2102,7 +2102,7 @@ protected void doSiteCommand(FTPClient ftp, String theCMD)\n             myReply = ftp.getReplyStrings();\n \n             for (int x = 0; x < myReply.length; x++) {\n-                if (myReply[x].indexOf(\"200\") == -1) {\n+                if (myReply[x] != null && myReply[x].indexOf(\"200\") == -1) {\n                     log(myReply[x], Project.MSG_WARN);\n                 }\n             }",
                "raw_url": "https://github.com/apache/ant/raw/ce81059049a47a2d9da23d84245af9763114cd3f/src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java",
                "sha": "405bfa539a3f6b858dd98372e670fb7b08769c6d",
                "status": "modified"
            }
        ],
        "message": "fix for bug 50217, NPE in ftp chmod\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@1032188 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/8e1d92a9a014ff290213883c678b2d01bfab9c2c",
        "repo": "ant",
        "unit_tests": [
            "FTPTest.java"
        ]
    },
    "ant_d1503ea": {
        "bug_id": "ant_d1503ea",
        "commit": "https://github.com/apache/ant/commit/d1503ea657ceb138b9453ec8f8d1cd5d929fbbde",
        "file": [
            {
                "additions": 13,
                "blob_url": "https://github.com/apache/ant/blob/d1503ea657ceb138b9453ec8f8d1cd5d929fbbde/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "changes": 21,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java?ref=d1503ea657ceb138b9453ec8f8d1cd5d929fbbde",
                "deletions": 8,
                "filename": "src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "patch": "@@ -722,14 +722,17 @@ private int executeInVM(JUnitTest arg) throws BuildException {\n         try {\n             log(\"Using System properties \" + System.getProperties(), \n                 Project.MSG_VERBOSE);\n-            Path classpath = (Path) commandline.getClasspath().clone();\n-            if (includeAntRuntime) {\n-                log(\"Implicitly adding \" + antRuntimeClasses + \" to CLASSPATH\", \n-                    Project.MSG_VERBOSE);\n-                classpath.append(antRuntimeClasses);\n-            }\n-\n+            Path userClasspath = commandline.getClasspath();\n+            Path classpath = userClasspath == null \n+                                              ? null \n+                                              : (Path) userClasspath.clone();\n             if (classpath != null) {\n+                if (includeAntRuntime) {\n+                    log(\"Implicitly adding \" + antRuntimeClasses \n+                        + \" to CLASSPATH\", Project.MSG_VERBOSE);\n+                    classpath.append(antRuntimeClasses);\n+                }\n+\n                 cl = new AntClassLoader(null, project, classpath, false);\n                 log(\"Using CLASSPATH \" + cl.getClasspath(),\n                     Project.MSG_VERBOSE);\n@@ -772,7 +775,9 @@ private int executeInVM(JUnitTest arg) throws BuildException {\n             if (sysProperties != null) {\n                 sysProperties.restoreSystem();\n             }\n-            cl.resetThreadContextLoader();\n+            if (cl != null) {\n+                cl.resetThreadContextLoader();\n+            }\n         }\n     }\n ",
                "raw_url": "https://github.com/apache/ant/raw/d1503ea657ceb138b9453ec8f8d1cd5d929fbbde/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "sha": "f36dc8958f3af3238090bf9aea0ecea342fca3ab",
                "status": "modified"
            }
        ],
        "message": "fix nasty NPE in <junit> when the user doesn't specify a nested <classpath>.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@272471 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/ab37fb7c6e7430d4135c3937b39ed6ec0b937ea7",
        "repo": "ant",
        "unit_tests": [
            "JUnitTaskTest.java"
        ]
    },
    "ant_d2405f4": {
        "bug_id": "ant_d2405f4",
        "commit": "https://github.com/apache/ant/commit/d2405f4003191f71936d22f956496e8f28035cfa",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/ant/blob/d2405f4003191f71936d22f956496e8f28035cfa/src/main/org/apache/tools/ant/taskdefs/Manifest.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Manifest.java?ref=d2405f4003191f71936d22f956496e8f28035cfa",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Manifest.java",
                "patch": "@@ -707,7 +707,11 @@ public boolean equals(Object rhs) {\n         }\n \n         Manifest rhsManifest = (Manifest)rhs;\n-        if (!manifestVersion.equals(rhsManifest.manifestVersion)) {\n+        if (manifestVersion == null) {\n+            if (rhsManifest.manifestVersion != null) {\n+                return false;\n+            }\n+        } else if (!manifestVersion.equals(rhsManifest.manifestVersion)) {\n             return false;\n         }\n         if (sections.size() != rhsManifest.sections.size()) {",
                "raw_url": "https://github.com/apache/ant/raw/d2405f4003191f71936d22f956496e8f28035cfa/src/main/org/apache/tools/ant/taskdefs/Manifest.java",
                "sha": "eea2966741a37ffaab63bdb2d72f2298654d61d8",
                "status": "modified"
            }
        ],
        "message": "fix NPE.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@270142 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/4f98ab89b6dbdd6bb5d3d38d7a3c751282dc2dea",
        "repo": "ant",
        "unit_tests": [
            "ManifestTest.java"
        ]
    },
    "ant_d605afd": {
        "bug_id": "ant_d605afd",
        "commit": "https://github.com/apache/ant/commit/d605afdd5122d55bb5f39829944acbc2271f8474",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/ant/blob/d605afdd5122d55bb5f39829944acbc2271f8474/src/main/org/apache/tools/ant/taskdefs/Available.java",
                "changes": 18,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Available.java?ref=d605afdd5122d55bb5f39829944acbc2271f8474",
                "deletions": 11,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Available.java",
                "patch": "@@ -442,17 +442,13 @@ private boolean checkClass(String classname) {\n                 loader = getProject().createClassLoader(classpath);\n                 loader.setParentFirst(false);\n                 loader.addJavaLibraries();\n-                if (loader != null) {\n-                    try {\n-                        loader.findClass(classname);\n-                    } catch (SecurityException se) {\n-                        // class found but restricted name; this is\n-                        // actually the case we're looking for in JDK 1.3+,\n-                        // so catch the exception and return\n-                        return true;\n-                    }\n-                } else {\n-                    return false;\n+                try {\n+                    loader.findClass(classname);\n+                } catch (SecurityException se) {\n+                    // class found but restricted name; this is\n+                    // actually the case we're looking for in JDK 1.3+,\n+                    // so catch the exception and return\n+                    return true;\n                 }\n             } else if (loader != null) {\n                 loader.loadClass(classname);",
                "raw_url": "https://github.com/apache/ant/raw/d605afdd5122d55bb5f39829944acbc2271f8474/src/main/org/apache/tools/ant/taskdefs/Available.java",
                "sha": "2061e5f17d46546beab8403eb5f745bc596871ae",
                "status": "modified"
            }
        ],
        "message": "RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@1297161 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/538257ea859749802694e257143fce9d6efbd1b4",
        "repo": "ant",
        "unit_tests": [
            "AvailableTest.java"
        ]
    },
    "ant_d6bde1c": {
        "bug_id": "ant_d6bde1c",
        "commit": "https://github.com/apache/ant/commit/d6bde1c2c9fe3780f28877f4b772542d63bf07fe",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/ant/blob/d6bde1c2c9fe3780f28877f4b772542d63bf07fe/src/main/org/apache/tools/ant/taskdefs/SQLExec.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/SQLExec.java?ref=d6bde1c2c9fe3780f28877f4b772542d63bf07fe",
                "deletions": 0,
                "filename": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java",
                "patch": "@@ -436,6 +436,11 @@ public void execute() throws BuildException {\n             t.setSrc(srcFile);\n             t.addText(sqlCommand);\n \n+            if (getConnection() == null) {\n+                // not a valid rdbms\n+                return;\n+            }\n+\n             try {\n                 PrintStream out = System.out;\n                 try {",
                "raw_url": "https://github.com/apache/ant/raw/d6bde1c2c9fe3780f28877f4b772542d63bf07fe/src/main/org/apache/tools/ant/taskdefs/SQLExec.java",
                "sha": "87f4893c6d1a757f261a714eae2d951906492f29",
                "status": "modified"
            }
        ],
        "message": "Avoid NPE if database doesn't match expected vendor\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@675911 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/543148ca1d5e89008f16eb7de0cfc67f23bddc05",
        "repo": "ant",
        "unit_tests": [
            "SQLExecTest.java"
        ]
    },
    "ant_dc81004": {
        "bug_id": "ant_dc81004",
        "commit": "https://github.com/apache/ant/commit/dc8100463d3c5fbbab209d02d927d1da512ba796",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/ant/blob/dc8100463d3c5fbbab209d02d927d1da512ba796/src/main/org/apache/tools/ant/taskdefs/KeySubst.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/KeySubst.java?ref=dc8100463d3c5fbbab209d02d927d1da512ba796",
                "deletions": 2,
                "filename": "src/main/org/apache/tools/ant/taskdefs/KeySubst.java",
                "patch": "@@ -1,7 +1,7 @@\n /*\n  * The Apache Software License, Version 1.1\n  *\n- * Copyright (c) 2000,2002 The Apache Software Foundation.  All rights\n+ * Copyright (c) 2000,2002-2003 The Apache Software Foundation.  All rights\n  * reserved.\n  *\n  * Redistribution and use in source and binary forms, with or without\n@@ -123,7 +123,7 @@ public void execute() throws BuildException {\n                     // ignore\n                 }\n             }\n-            if (bw != null) {\n+            if (br != null) {\n                 try {\n                     br.close();\n                 } catch (IOException e) {",
                "raw_url": "https://github.com/apache/ant/raw/dc8100463d3c5fbbab209d02d927d1da512ba796/src/main/org/apache/tools/ant/taskdefs/KeySubst.java",
                "sha": "1b5fbc2d93365066bb858638f9c02d5b14c813e7",
                "status": "modified"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/ant/blob/dc8100463d3c5fbbab209d02d927d1da512ba796/src/main/org/apache/tools/ant/types/selectors/ContainsRegexpSelector.java",
                "changes": 11,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/types/selectors/ContainsRegexpSelector.java?ref=dc8100463d3c5fbbab209d02d927d1da512ba796",
                "deletions": 4,
                "filename": "src/main/org/apache/tools/ant/types/selectors/ContainsRegexpSelector.java",
                "patch": "@@ -172,10 +172,13 @@ public boolean isSelected(File basedir, String filename, File file) {\n         } catch (IOException ioe) {\n             throw new BuildException(\"Could not read file \" + filename);\n         } finally {\n-            try {\n-                in.close();\n-            } catch (Exception e) {\n-                throw new BuildException(\"Could not close file \" + filename);\n+            if (in != null) {\n+                try {\n+                    in.close();\n+                } catch (Exception e) {\n+                    throw new BuildException(\"Could not close file \" \n+                                             + filename);\n+                }\n             }\n         }\n     }",
                "raw_url": "https://github.com/apache/ant/raw/dc8100463d3c5fbbab209d02d927d1da512ba796/src/main/org/apache/tools/ant/types/selectors/ContainsRegexpSelector.java",
                "sha": "79b807bde06a87d118eb0c31ff35551f248f0b0b",
                "status": "modified"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/ant/blob/dc8100463d3c5fbbab209d02d927d1da512ba796/src/main/org/apache/tools/ant/types/selectors/ContainsSelector.java",
                "changes": 11,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/types/selectors/ContainsSelector.java?ref=dc8100463d3c5fbbab209d02d927d1da512ba796",
                "deletions": 4,
                "filename": "src/main/org/apache/tools/ant/types/selectors/ContainsSelector.java",
                "patch": "@@ -214,10 +214,13 @@ public boolean isSelected(File basedir, String filename, File file) {\n         } catch (IOException ioe) {\n             throw new BuildException(\"Could not read file \" + filename);\n         } finally {\n-            try {\n-                in.close();\n-            } catch (Exception e) {\n-                throw new BuildException(\"Could not close file \" + filename);\n+            if (in != null) {\n+                try {\n+                    in.close();\n+                } catch (Exception e) {\n+                    throw new BuildException(\"Could not close file \" \n+                                             + filename);\n+                }\n             }\n         }\n     }",
                "raw_url": "https://github.com/apache/ant/raw/dc8100463d3c5fbbab209d02d927d1da512ba796/src/main/org/apache/tools/ant/types/selectors/ContainsSelector.java",
                "sha": "1b12b5ffd902c3840ecdf3e8fb16da94173cb71d",
                "status": "modified"
            }
        ],
        "message": "Fix potential NPEs\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@274920 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/b66c87eff7277caeedb01e50a986b70a0d0687aa",
        "repo": "ant",
        "unit_tests": [
            "ContainsSelectorTest.java"
        ]
    },
    "ant_e11e04d": {
        "bug_id": "ant_e11e04d",
        "commit": "https://github.com/apache/ant/commit/e11e04dc6e6d6dcabe531346f60b597a8a58c453",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/e11e04dc6e6d6dcabe531346f60b597a8a58c453/src/main/org/apache/tools/ant/UnknownElement.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/UnknownElement.java?ref=e11e04dc6e6d6dcabe531346f60b597a8a58c453",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/UnknownElement.java",
                "patch": "@@ -127,7 +127,7 @@ protected void handleChildren(Object parent,\n                 realChild = makeTask(child, childWrapper);\n                 ((TaskContainer) parent).addTask((Task) realChild);\n             } else {\n-                ih.createElement(project, parent, child.getTag());\n+                realChild = ih.createElement(project, parent, child.getTag());\n             }\n \n             childWrapper.setProxy(realChild);",
                "raw_url": "https://github.com/apache/ant/raw/e11e04dc6e6d6dcabe531346f60b597a8a58c453/src/main/org/apache/tools/ant/UnknownElement.java",
                "sha": "c4d9386108f78e77824c2ce34ccadedd6dbc8643",
                "status": "modified"
            }
        ],
        "message": "Fix for the NPE that makes the Cactus build fail.\n\nActually test6 of taskdef.xml failed as well, I just didnd't run it\nafter my last changes as it is not part of the testsuite - argh.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@269402 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/fabddf48aa9d39fce88c9221b1b54d09717ee010",
        "repo": "ant",
        "unit_tests": [
            "UnknownElementTest.java"
        ]
    },
    "ant_e15b1d6": {
        "bug_id": "ant_e15b1d6",
        "commit": "https://github.com/apache/ant/commit/e15b1d67a0dc5a117442c1df6e5044d199059907",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/e15b1d67a0dc5a117442c1df6e5044d199059907/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=e15b1d67a0dc5a117442c1df6e5044d199059907",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -7,6 +7,9 @@ Changes that could break older environments:\n Fixed bugs:\n -----------\n \n+* <junit> in Ant 1.7.0 could throw NPE if no <classpath> was defined.\n+  Bugzilla report 41422.\n+\n * In Ant 1.7.0, <fileset> in <javadoc> does not by default include only\n   **/*.java as the documentation claims and earlier revisions did.\n   Bugzilla report 41264.",
                "raw_url": "https://github.com/apache/ant/raw/e15b1d67a0dc5a117442c1df6e5044d199059907/WHATSNEW",
                "sha": "629d42eb8802612cd7389188c54d30f3878abd91",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/ant/blob/e15b1d67a0dc5a117442c1df6e5044d199059907/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java?ref=e15b1d67a0dc5a117442c1df6e5044d199059907",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "patch": "@@ -756,7 +756,10 @@ public void execute() throws BuildException {\n         if (splitJunit) {\n             Path path = new Path(getProject());\n             path.add(antRuntimeClasses);\n-            path.add(getCommandline().getClasspath());\n+            Path extra = getCommandline().getClasspath();\n+            if (extra != null) {\n+                path.add(extra);\n+            }\n             mirrorLoader = new SplitLoader(myLoader, path);\n         } else {\n             mirrorLoader = myLoader;",
                "raw_url": "https://github.com/apache/ant/raw/e15b1d67a0dc5a117442c1df6e5044d199059907/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java",
                "sha": "541a08e506be7c48f74de34f722261105cae89af",
                "status": "modified"
            }
        ],
        "message": "#41422: <junit> in Ant 1.7.0 could throw NPE if no <classpath> was defined.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@498519 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/bddca28a0f8834581c589bf2d8e6c9a0232a7488",
        "repo": "ant",
        "unit_tests": [
            "JUnitTaskTest.java"
        ]
    },
    "ant_f37911b": {
        "bug_id": "ant_f37911b",
        "commit": "https://github.com/apache/ant/commit/f37911b4e528ec77ebc06cd815da76bae5442858",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/ant/blob/f37911b4e528ec77ebc06cd815da76bae5442858/src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Ant.java?ref=f37911b4e528ec77ebc06cd815da76bae5442858",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "patch": "@@ -157,7 +157,7 @@ public void init() {\n     }\n \n     /**\n-     * Called in execute or createProperty of newProject is null.\n+     * Called in execute or createProperty if newProject is null.\n      *\n      * <p>This can happen if the same instance of this task is run\n      * twice as newProject is set to null at the end of execute (to",
                "raw_url": "https://github.com/apache/ant/raw/f37911b4e528ec77ebc06cd815da76bae5442858/src/main/org/apache/tools/ant/taskdefs/Ant.java",
                "sha": "74aecedafce9f205e99382e78e7d21c0d0c68a56",
                "status": "modified"
            },
            {
                "additions": 33,
                "blob_url": "https://github.com/apache/ant/blob/f37911b4e528ec77ebc06cd815da76bae5442858/src/main/org/apache/tools/ant/taskdefs/CallTarget.java",
                "changes": 42,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/CallTarget.java?ref=f37911b4e528ec77ebc06cd815da76bae5442858",
                "deletions": 9,
                "filename": "src/main/org/apache/tools/ant/taskdefs/CallTarget.java",
                "patch": "@@ -85,8 +85,9 @@\n \n     private Ant callee;\n     private String subTarget;\n-    private boolean initialized = false;\n+    // must match the default value of Ant#inheritAll\n     private boolean inheritAll = true;\n+    // must match the default value of Ant#inheritRefs\n     private boolean inheritRefs = false;\n \n     /**\n@@ -96,7 +97,7 @@\n      **/\n     public void setInheritAll(boolean inherit) {\n        inheritAll = inherit;\n-    } //-- setInheritAll\n+    }\n \n     /**\n      * set the inherit refs flag\n@@ -111,12 +112,11 @@ public void setInheritRefs(boolean inheritRefs) {\n      * configuring it's by calling its own init method.\n      */\n     public void init() {\n-        callee = (Ant) project.createTask(\"ant\");\n-        callee.setOwningTarget(target);\n+        callee = (Ant) getProject().createTask(\"ant\");\n+        callee.setOwningTarget(getOwningTarget());\n         callee.setTaskName(getTaskName());\n-        callee.setLocation(location);\n+        callee.setLocation(getLocation());\n         callee.init();\n-        initialized = true;\n     }\n \n     /**\n@@ -125,7 +125,7 @@ public void init() {\n      * execute\n      */\n     public void execute() throws BuildException {\n-        if (!initialized) {\n+        if (callee == null) {\n             init();\n         }\n         \n@@ -134,30 +134,49 @@ public void execute() throws BuildException {\n                                      location);\n         }\n         \n-        callee.setDir(project.getBaseDir());\n-        callee.setAntfile(project.getProperty(\"ant.file\"));\n+        callee.setDir(getProject().getBaseDir());\n+        callee.setAntfile(getProject().getProperty(\"ant.file\"));\n         callee.setTarget(subTarget);\n         callee.setInheritAll(inheritAll);\n         callee.setInheritRefs(inheritRefs);\n         callee.execute();\n     }\n \n+    /**\n+     * Create a nested param element.\n+     */\n     public Property createParam() {\n+        if (callee == null) {\n+            init();\n+        }\n         return callee.createProperty();\n     }\n \n     /** \n      * create a reference element that identifies a data type that\n      * should be carried over to the new project.\n+     *\n+     * @since Ant 1.5\n      */\n     public void addReference(Ant.Reference r) {\n+        if (callee == null) {\n+            init();\n+        }\n         callee.addReference(r);\n     }\n \n+    /**\n+     * Sets the target attribute, required.\n+     */\n     public void setTarget(String target) {\n         subTarget = target;\n     }\n \n+    /**\n+     * Pass output sent to System.out to the new project.\n+     *\n+     * @since Ant 1.5\n+     */\n     protected void handleOutput(String line) {\n         if (callee != null) {\n             callee.handleOutput(line);\n@@ -167,6 +186,11 @@ protected void handleOutput(String line) {\n         }\n     }\n     \n+    /**\n+     * Pass output sent to System.err to the new project.\n+     *\n+     * @since Ant 1.5\n+     */\n     protected void handleErrorOutput(String line) {\n         if (callee != null) {\n             callee.handleErrorOutput(line);",
                "raw_url": "https://github.com/apache/ant/raw/f37911b4e528ec77ebc06cd815da76bae5442858/src/main/org/apache/tools/ant/taskdefs/CallTarget.java",
                "sha": "56310db825e2067a89b2b53439b71c0aca10d17a",
                "status": "modified"
            }
        ],
        "message": "fix possible (but unlikely) NPE in <antcall>, add some docs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@272333 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/55adbd06c9bd8887455a28f102e14797756bd9d8",
        "repo": "ant",
        "unit_tests": [
            "CallTargetTest.java"
        ]
    },
    "ant_f8e0dcd": {
        "bug_id": "ant_f8e0dcd",
        "commit": "https://github.com/apache/ant/commit/f8e0dcd65a5263ffe666a7446763c5caa8aa009b",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/ant/blob/f8e0dcd65a5263ffe666a7446763c5caa8aa009b/WHATSNEW",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/WHATSNEW?ref=f8e0dcd65a5263ffe666a7446763c5caa8aa009b",
                "deletions": 0,
                "filename": "WHATSNEW",
                "patch": "@@ -44,6 +44,9 @@ Fixed bugs:\n *  If <concat>'s first resourcecollection child is a <resources>,\n    any subsequently added child resourcecollection joins the first.\n    Bugzilla Report 48816.        \n+   \n+*  <get> with an invalid URL could trigger an NPE in some JVMs.\n+   Bugzilla Report 48833 \n \n Other changes:\n --------------",
                "raw_url": "https://github.com/apache/ant/raw/f8e0dcd65a5263ffe666a7446763c5caa8aa009b/WHATSNEW",
                "sha": "1886d2210ec449112972f5a079fddfd2aa4423f6",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/ant/blob/f8e0dcd65a5263ffe666a7446763c5caa8aa009b/src/main/org/apache/tools/ant/taskdefs/Get.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/ant/contents/src/main/org/apache/tools/ant/taskdefs/Get.java?ref=f8e0dcd65a5263ffe666a7446763c5caa8aa009b",
                "deletions": 1,
                "filename": "src/main/org/apache/tools/ant/taskdefs/Get.java",
                "patch": "@@ -658,7 +658,12 @@ private URLConnection openConnection(URL aSource) throws IOException {\n                         .setUseCaches(httpUseCaches);\n             }\n             // connect to the remote site (may take some time)\n-            connection.connect();\n+            try {\n+                connection.connect();\n+            } catch (NullPointerException e) {\n+                //bad URLs can trigger NPEs in some JVMs\n+                throw new BuildException(\"Failed to parse \" + source.toString(), e);\n+            }\n \n             // First check on a 301 / 302 (moved) response (HTTP only)\n             if (connection instanceof HttpURLConnection) {",
                "raw_url": "https://github.com/apache/ant/raw/f8e0dcd65a5263ffe666a7446763c5caa8aa009b/src/main/org/apache/tools/ant/taskdefs/Get.java",
                "sha": "3906e88df826635f254f5de0e29f093ff043b2d0",
                "status": "modified"
            }
        ],
        "message": "Bug 48833 -  NPE in <get>\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@917574 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/ant/commit/94099ccb050ba2897ddef01062ad223120c629f4",
        "repo": "ant",
        "unit_tests": [
            "GetTest.java"
        ]
    }
}