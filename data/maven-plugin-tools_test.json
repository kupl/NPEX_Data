{
    "maven-plugin-tools_805e0f8": {
        "repo": "maven-plugin-tools",
        "message": "[MPLUGIN-227]\no avoid NPE but get (intended-)explicit warning when unexpected situation happens (probably caused by using different plugin version between source generation and XML descriptor generation phases)\no try guessing the directory in such situation, using default location\no but don't fail in any case: \n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugin-tools/trunk@1406480 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-plugin-tools/commit/805e0f84a7700740458015444559496ad2304f65",
        "parent": "https://github.com/apache/maven-plugin-tools/commit/5d366fc36f7a2e59c0447c343e57c982d83063a3",
        "bug_id": "maven-plugin-tools_805e0f8",
        "file": [
            {
                "sha": "f49fa13d9d35e3c6d738dfed466e7eaa87fcc838",
                "filename": "maven-plugin-tools-generators/src/main/java/org/apache/maven/tools/plugin/generator/PluginDescriptorGenerator.java",
                "blob_url": "https://github.com/apache/maven-plugin-tools/blob/805e0f84a7700740458015444559496ad2304f65/maven-plugin-tools-generators/src/main/java/org/apache/maven/tools/plugin/generator/PluginDescriptorGenerator.java",
                "raw_url": "https://github.com/apache/maven-plugin-tools/raw/805e0f84a7700740458015444559496ad2304f65/maven-plugin-tools-generators/src/main/java/org/apache/maven/tools/plugin/generator/PluginDescriptorGenerator.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/maven-plugin-tools/contents/maven-plugin-tools-generators/src/main/java/org/apache/maven/tools/plugin/generator/PluginDescriptorGenerator.java?ref=805e0f84a7700740458015444559496ad2304f65",
                "patch": "@@ -28,6 +28,7 @@\n import org.apache.maven.tools.plugin.ExtendedMojoDescriptor;\n import org.apache.maven.tools.plugin.PluginToolsRequest;\n import org.apache.maven.tools.plugin.util.PluginUtils;\n+import org.codehaus.plexus.logging.AbstractLogEnabled;\n import org.codehaus.plexus.util.IOUtil;\n import org.codehaus.plexus.util.StringUtils;\n import org.codehaus.plexus.util.xml.PrettyPrintXMLWriter;\n@@ -56,6 +57,7 @@\n  * get validation directives to help users in IDEs.\n  */\n public class PluginDescriptorGenerator\n+    extends AbstractLogEnabled\n     implements Generator\n {\n \n@@ -66,7 +68,7 @@ public void execute( File destinationDirectory, PluginToolsRequest request )\n         throws GeneratorException\n     {\n         // eventually rewrite help mojo class to match actual package name\n-        PluginHelpGenerator.rewriteHelpMojo( request );\n+        PluginHelpGenerator.rewriteHelpMojo( request, getLogger() );\n \n         try\n         {",
                "deletions": 1
            },
            {
                "sha": "6fc53b0cba279e030494e030c8d492d94557b28f",
                "filename": "maven-plugin-tools-generators/src/main/java/org/apache/maven/tools/plugin/generator/PluginHelpGenerator.java",
                "blob_url": "https://github.com/apache/maven-plugin-tools/blob/805e0f84a7700740458015444559496ad2304f65/maven-plugin-tools-generators/src/main/java/org/apache/maven/tools/plugin/generator/PluginHelpGenerator.java",
                "raw_url": "https://github.com/apache/maven-plugin-tools/raw/805e0f84a7700740458015444559496ad2304f65/maven-plugin-tools-generators/src/main/java/org/apache/maven/tools/plugin/generator/PluginHelpGenerator.java",
                "status": "modified",
                "changes": 78,
                "additions": 50,
                "contents_url": "https://api.github.com/repos/apache/maven-plugin-tools/contents/maven-plugin-tools-generators/src/main/java/org/apache/maven/tools/plugin/generator/PluginHelpGenerator.java?ref=805e0f84a7700740458015444559496ad2304f65",
                "patch": "@@ -285,7 +285,7 @@ static String getPluginHelpPath( MavenProject mavenProject )\n      * @param request\n      * @throws GeneratorException\n      */\n-    static void rewriteHelpMojo( PluginToolsRequest request )\n+    static void rewriteHelpMojo( PluginToolsRequest request, Logger log )\n         throws GeneratorException\n     {\n         File tmpPropertiesFile =\n@@ -303,8 +303,22 @@ static void rewriteHelpMojo( PluginToolsRequest request )\n         // if helpPackageName property is empty, we have to rewrite the class with a better package name than empty\n         if ( StringUtils.isEmpty( helpPackageName ) )\n         {\n-            File destinationDirectory = new File( properties.getProperty( \"destinationDirectory\" ) );\n-            String helpMojoImplementation = rewriteHelpClassToMojoPackage( request, destinationDirectory );\n+            String destDir = properties.getProperty( \"destinationDirectory\" );\n+            File destinationDirectory;\n+            if ( StringUtils.isEmpty( destDir ) )\n+            {\n+                // writeHelpPropertiesFile() creates 2 properties: find one without the other should not be possible\n+                log.warn( \"\\n\\nUnexpected situation: destinationDirectory not defined in \" + HELP_PROPERTIES_FILENAME\n+                    + \" during help mojo source generation but expected during XML descriptor generation.\" );\n+                log.warn( \"Please check helpmojo goal version used in previous build phase.\" );\n+                destinationDirectory = new File( \"target/generated-sources/plugin\" );\n+                log.warn( \"Trying default location: \" + destinationDirectory );\n+            }\n+            else\n+            {\n+                destinationDirectory = new File( destDir );\n+            }\n+            String helpMojoImplementation = rewriteHelpClassToMojoPackage( request, destinationDirectory, log );\n \n             if ( helpMojoImplementation != null )\n             {\n@@ -314,7 +328,7 @@ static void rewriteHelpMojo( PluginToolsRequest request )\n         }\n     }\n \n-    private static String rewriteHelpClassToMojoPackage( PluginToolsRequest request, File destinationDirectory )\n+    private static String rewriteHelpClassToMojoPackage( PluginToolsRequest request, File destinationDirectory, Logger log )\n         throws GeneratorException\n     {\n         String destinationPackage = GeneratorUtils.discoverPackageName( request.getPluginDescriptor() );\n@@ -333,34 +347,42 @@ private static String rewriteHelpClassToMojoPackage( PluginToolsRequest request,\n \n         // rewrite help mojo source\n         File helpSourceFile = new File( destinationDirectory, HELP_MOJO_CLASS_NAME + \".java\" );\n-        File helpSourceFileNew = new File( destinationDirectory, packageAsDirectory + '/' + HELP_MOJO_CLASS_NAME + \".java\" );\n-        if ( !helpSourceFileNew.getParentFile().exists() )\n-        {\n-            helpSourceFileNew.getParentFile().mkdirs();\n-        }\n-        Reader sourceReader = null;\n-        PrintWriter sourceWriter = null;\n-        try\n-        {\n-            sourceReader = new InputStreamReader( new FileInputStream( helpSourceFile ), request.getEncoding() );\n-            sourceWriter =\n-                new PrintWriter( new OutputStreamWriter( new FileOutputStream( helpSourceFileNew ),\n-                                                         request.getEncoding() ) );\n-\n-            sourceWriter.println( \"package \" + destinationPackage + \";\" );\n-            IOUtil.copy( sourceReader, sourceWriter );\n-        }\n-        catch ( IOException e )\n+        if ( !helpSourceFile.exists() )\n         {\n-            throw new GeneratorException( e.getMessage(), e );\n+            log.warn( \"HelpMojo.java not found in default location: \" + helpSourceFile.getAbsolutePath() );\n+            log.warn( \"Help goal source won't be moved to package: \" + destinationPackage );\n         }\n-        finally\n+        else\n         {\n-            IOUtil.close( sourceReader );\n-            IOUtil.close( sourceWriter );\n+            File helpSourceFileNew = new File( destinationDirectory, packageAsDirectory + '/' + HELP_MOJO_CLASS_NAME + \".java\" );\n+            if ( !helpSourceFileNew.getParentFile().exists() )\n+            {\n+                helpSourceFileNew.getParentFile().mkdirs();\n+            }\n+            Reader sourceReader = null;\n+            PrintWriter sourceWriter = null;\n+            try\n+            {\n+                sourceReader = new InputStreamReader( new FileInputStream( helpSourceFile ), request.getEncoding() );\n+                sourceWriter =\n+                    new PrintWriter( new OutputStreamWriter( new FileOutputStream( helpSourceFileNew ),\n+                                                             request.getEncoding() ) );\n+    \n+                sourceWriter.println( \"package \" + destinationPackage + \";\" );\n+                IOUtil.copy( sourceReader, sourceWriter );\n+            }\n+            catch ( IOException e )\n+            {\n+                throw new GeneratorException( e.getMessage(), e );\n+            }\n+            finally\n+            {\n+                IOUtil.close( sourceReader );\n+                IOUtil.close( sourceWriter );\n+            }\n+            helpSourceFileNew.setLastModified( helpSourceFile.lastModified() );\n+            helpSourceFile.delete();\n         }\n-        helpSourceFileNew.setLastModified( helpSourceFile.lastModified() );\n-        helpSourceFile.delete();\n \n         // rewrite help mojo .class\n         File rewriteHelpClassFile =",
                "deletions": 28
            }
        ],
        "patched_files": [
            "PluginHelpGenerator.java",
            "PluginDescriptorGenerator.java"
        ],
        "unit_tests": [
            "PluginHelpGeneratorTest.java",
            "PluginDescriptorGeneratorTest.java"
        ]
    },
    "maven-plugin-tools_bf2ece6": {
        "repo": "maven-plugin-tools",
        "message": "[MPLUGIN-114] PluginXdocGenerator NullPointerException\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugin-tools/trunk@657562 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-plugin-tools/commit/bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1",
        "parent": "https://github.com/apache/maven-plugin-tools/commit/f3a91b5cfdc81b40bab389f7b67dbd2d7177f6c9",
        "bug_id": "maven-plugin-tools_bf2ece6",
        "file": [
            {
                "sha": "a8fcc82d5e7689c85d73241c2edff02885b07efe",
                "filename": "maven-plugin-plugin/src/main/java/org/apache/maven/plugin/plugin/PluginReport.java",
                "blob_url": "https://github.com/apache/maven-plugin-tools/blob/bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1/maven-plugin-plugin/src/main/java/org/apache/maven/plugin/plugin/PluginReport.java",
                "raw_url": "https://github.com/apache/maven-plugin-tools/raw/bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1/maven-plugin-plugin/src/main/java/org/apache/maven/plugin/plugin/PluginReport.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/maven-plugin-tools/contents/maven-plugin-plugin/src/main/java/org/apache/maven/plugin/plugin/PluginReport.java?ref=bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1",
                "patch": "@@ -277,7 +277,7 @@ public void renderBody()\n \n             if ( !( pluginDescriptor.getMojos() != null && pluginDescriptor.getMojos().size() > 0 ) )\n             {\n-                paragraph( getBundle( locale ).getString( \"report.plugin.nogoal\" ) );\n+                paragraph( getBundle( locale ).getString( \"report.plugin.goals.nogoal\" ) );\n                 endSection();\n                 return;\n             }",
                "deletions": 1
            },
            {
                "sha": "9f8ca2f4e0f19656cdd180406e46cb93bfa835a9",
                "filename": "maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/generator/PluginXdocGenerator.java",
                "blob_url": "https://github.com/apache/maven-plugin-tools/blob/bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/generator/PluginXdocGenerator.java",
                "raw_url": "https://github.com/apache/maven-plugin-tools/raw/bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/generator/PluginXdocGenerator.java",
                "status": "modified",
                "changes": 9,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/maven-plugin-tools/contents/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/generator/PluginXdocGenerator.java?ref=bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1",
                "patch": "@@ -93,10 +93,13 @@ public PluginXdocGenerator( MavenProject project, Locale locale )\n     public void execute( File destinationDirectory, PluginDescriptor pluginDescriptor )\n         throws IOException\n     {\n-        for ( Iterator it = pluginDescriptor.getMojos().iterator(); it.hasNext(); )\n+        if ( pluginDescriptor.getMojos() != null )\n         {\n-            MojoDescriptor descriptor = (MojoDescriptor) it.next();\n-            processMojoDescriptor( descriptor, destinationDirectory );\n+            for ( Iterator it = pluginDescriptor.getMojos().iterator(); it.hasNext(); )\n+            {\n+                MojoDescriptor descriptor = (MojoDescriptor) it.next();\n+                processMojoDescriptor( descriptor, destinationDirectory );\n+            }\n         }\n     }\n ",
                "deletions": 3
            },
            {
                "sha": "27f731ce34ee5a9c6360feb604b949d3bd07f817",
                "filename": "maven-plugin-tools-api/src/test/java/org/apache/maven/tools/plugin/scanner/DefaultMojoScannerTest.java",
                "blob_url": "https://github.com/apache/maven-plugin-tools/blob/bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1/maven-plugin-tools-api/src/test/java/org/apache/maven/tools/plugin/scanner/DefaultMojoScannerTest.java",
                "raw_url": "https://github.com/apache/maven-plugin-tools/raw/bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1/maven-plugin-tools-api/src/test/java/org/apache/maven/tools/plugin/scanner/DefaultMojoScannerTest.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/maven-plugin-tools/contents/maven-plugin-tools-api/src/test/java/org/apache/maven/tools/plugin/scanner/DefaultMojoScannerTest.java?ref=bf2ece6f7aa4cccf57d8ae9844e7a7c484fd06b1",
                "patch": "@@ -192,7 +192,7 @@ protected void checkResult( PluginDescriptor pluginDescriptor, Collection expect\n                         remainingGoals.remove( desc.getGoal() ) );\n         }\n \n-        assertTrue( \"Extpected goals missing from PluginDescriptor: \" + remainingGoals, remainingGoals.size() == 0 );\n+        assertTrue( \"Expected goals missing from PluginDescriptor: \" + remainingGoals, remainingGoals.size() == 0 );\n     }\n \n }\n\\ No newline at end of file",
                "deletions": 1
            }
        ],
        "patched_files": [
            "PluginXdocGenerator.java",
            "PluginReport.java",
            "DefaultMojoScanner.java"
        ],
        "unit_tests": [
            "PluginXdocGeneratorTest.java",
            "DefaultMojoScannerTest.java"
        ]
    },
    "maven-plugin-tools_6256119": {
        "repo": "maven-plugin-tools",
        "message": "[MPLUGIN-242] NullPointerException in MojoClassVisitor.visit() unit test\nSubmitted by: Mikolaj Izdebski\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugin-tools/trunk@1590803 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/maven-plugin-tools/commit/62561197e88bb2026420da3dfc9e5c033c08106a",
        "parent": "https://github.com/apache/maven-plugin-tools/commit/58f5506c596d0dce9ea5aa54283073a285c0a2fc",
        "bug_id": "maven-plugin-tools_6256119",
        "file": [
            {
                "sha": "4fd90bc6d280e01ed31e617882d61b928c24b19b",
                "filename": "maven-plugin-tools-annotations/src/test/java/java/lang/Object.java",
                "blob_url": "https://github.com/apache/maven-plugin-tools/blob/62561197e88bb2026420da3dfc9e5c033c08106a/maven-plugin-tools-annotations/src/test/java/java/lang/Object.java",
                "raw_url": "https://github.com/apache/maven-plugin-tools/raw/62561197e88bb2026420da3dfc9e5c033c08106a/maven-plugin-tools-annotations/src/test/java/java/lang/Object.java",
                "status": "added",
                "changes": 5,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/maven-plugin-tools/contents/maven-plugin-tools-annotations/src/test/java/java/lang/Object.java?ref=62561197e88bb2026420da3dfc9e5c033c08106a",
                "patch": "@@ -0,0 +1,5 @@\n+package java.lang;\n+\n+public class Object\n+{\n+}",
                "deletions": 0
            },
            {
                "sha": "ac77eddf9bd9fa0e72f27339d4b7523d84a6d3e1",
                "filename": "maven-plugin-tools-annotations/src/test/java/org/apache/maven/tools/plugin/annotations/TestAnnotationsReader.java",
                "blob_url": "https://github.com/apache/maven-plugin-tools/blob/62561197e88bb2026420da3dfc9e5c033c08106a/maven-plugin-tools-annotations/src/test/java/org/apache/maven/tools/plugin/annotations/TestAnnotationsReader.java",
                "raw_url": "https://github.com/apache/maven-plugin-tools/raw/62561197e88bb2026420da3dfc9e5c033c08106a/maven-plugin-tools-annotations/src/test/java/org/apache/maven/tools/plugin/annotations/TestAnnotationsReader.java",
                "status": "modified",
                "changes": 12,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/maven-plugin-tools/contents/maven-plugin-tools-annotations/src/test/java/org/apache/maven/tools/plugin/annotations/TestAnnotationsReader.java?ref=62561197e88bb2026420da3dfc9e5c033c08106a",
                "patch": "@@ -87,4 +87,16 @@ public void testReadMojoClass()\n             new ParameterAnnotationContent( \"beer\", null, \"thebeer\", \"coolbeer\", false, false,\n                                             String.class.getName() ) );\n     }\n+\n+    public void testReadingJavaLangObject()\n+        throws Exception\n+    {\n+        MojoAnnotationsScannerRequest request = new MojoAnnotationsScannerRequest();\n+        request.setClassesDirectories( Collections.singletonList( new File( \"target/test-classes\" ) ) );\n+        request.setIncludePatterns( Collections.singletonList( \"java/lang/Object.class\" ) );\n+        request.setProject( new MavenProject() );\n+\n+        MojoAnnotationsScanner scanner = (MojoAnnotationsScanner) lookup( MojoAnnotationsScanner.ROLE );\n+        scanner.scan( request );\n+    }\n }",
                "deletions": 0
            }
        ],
        "patched_files": [
            "Object.java"
        ],
        "unit_tests": [
            "TestAnnotationsReader.java"
        ]
    }
}