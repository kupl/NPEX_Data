[
    {
        "repo": "maven",
        "commit": "https://github.com/apache/maven/commit/9f7971dadbec8882b4c119345494b620d3a1f897",
        "bug_id": "maven_9f7971d",
        "message": "MNG-5805: Fix NPE in LifecyclePhase#toString()\n\nSigned-off-by: Jason van Zyl <jason@tesla.io>\n\ncloses #62",
        "parent": "https://github.com/apache/maven/commit/31e70dba9030925ce90727b9a7e0e83045c4aa0d",
        "patched_files": [
            "LifecyclePhase.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 21,
                "raw_url": "https://github.com/apache/maven/raw/9f7971dadbec8882b4c119345494b620d3a1f897/maven-core/src/main/java/org/apache/maven/lifecycle/mapping/LifecyclePhase.java",
                "contents_url": "https://api.github.com/repos/apache/maven/contents/maven-core/src/main/java/org/apache/maven/lifecycle/mapping/LifecyclePhase.java?ref=9f7971dadbec8882b4c119345494b620d3a1f897",
                "filename": "maven-core/src/main/java/org/apache/maven/lifecycle/mapping/LifecyclePhase.java",
                "deletions": 14,
                "sha": "059f23468822422e8d856626633192138aa8e9a9",
                "blob_url": "https://github.com/apache/maven/blob/9f7971dadbec8882b4c119345494b620d3a1f897/maven-core/src/main/java/org/apache/maven/lifecycle/mapping/LifecyclePhase.java",
                "patch": "@@ -55,13 +55,16 @@ public void set( String goals )\n     {\n         mojos = new ArrayList<>();\n         \n-        String[] mojoGoals = StringUtils.split( goals, \",\" );\n-        \n-        for ( String mojoGoal: mojoGoals )\n+        if ( StringUtils.isNotEmpty( goals ) )\n         {\n-            LifecycleMojo lifecycleMojo = new LifecycleMojo();\n-            lifecycleMojo.setGoal( mojoGoal.trim() );\n-            mojos.add( lifecycleMojo );\n+            String[] mojoGoals = StringUtils.split( goals, \",\" );\n+            \n+            for ( String mojoGoal: mojoGoals )\n+            {\n+                LifecycleMojo lifecycleMojo = new LifecycleMojo();\n+                lifecycleMojo.setGoal( mojoGoal.trim() );\n+                mojos.add( lifecycleMojo );\n+            }\n         }\n     }\n     \n@@ -70,17 +73,21 @@ public String toString()\n     {\n         StringBuilder sb = new StringBuilder();\n         boolean first = true;\n-        for ( LifecycleMojo mojo: getMojos() )\n+        List<LifecycleMojo> mojos = getMojos();\n+        if ( mojos != null )\n         {\n-            if ( first )\n-            {\n-                first = false;\n-            }\n-            else\n+            for ( LifecycleMojo mojo: mojos )\n             {\n-                sb.append( \",\" );\n+                if ( first )\n+                {\n+                    first = false;\n+                }\n+                else\n+                {\n+                    sb.append( \",\" );\n+                }\n+                sb.append( mojo.getGoal() );\n             }\n-            sb.append( mojo.getGoal() );\n         }\n         return sb.toString();\n     }",
                "changes": 35
            },
            {
                "status": "added",
                "additions": 73,
                "raw_url": "https://github.com/apache/maven/raw/9f7971dadbec8882b4c119345494b620d3a1f897/maven-core/src/test/java/org/apache/maven/lifecycle/mapping/LifecyclePhaseTest.java",
                "contents_url": "https://api.github.com/repos/apache/maven/contents/maven-core/src/test/java/org/apache/maven/lifecycle/mapping/LifecyclePhaseTest.java?ref=9f7971dadbec8882b4c119345494b620d3a1f897",
                "filename": "maven-core/src/test/java/org/apache/maven/lifecycle/mapping/LifecyclePhaseTest.java",
                "deletions": 0,
                "sha": "0d8cbdc68936114f9bfd2400979373a68d371a89",
                "blob_url": "https://github.com/apache/maven/blob/9f7971dadbec8882b4c119345494b620d3a1f897/maven-core/src/test/java/org/apache/maven/lifecycle/mapping/LifecyclePhaseTest.java",
                "patch": "@@ -0,0 +1,73 @@\n+package org.apache.maven.lifecycle.mapping;\n+\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional information regarding\n+ * copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance with the License. You may obtain a\n+ * copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License\n+ * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n+ * or implied. See the License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import org.junit.Test;\n+\n+/**\n+ * @author atanasenko\n+ */\n+public class LifecyclePhaseTest\n+{\n+    @Test\n+    public void testToString()\n+    {\n+        LifecyclePhase phase = new LifecyclePhase();\n+        assertEquals( \"\", phase.toString() );\n+        \n+        LifecycleMojo mojo1 = new LifecycleMojo();\n+        mojo1.setGoal( \"jar:jar\" );\n+        phase.setMojos( Arrays.asList( mojo1 ) );\n+        assertEquals( \"jar:jar\", phase.toString()  );\n+        \n+        LifecycleMojo mojo2 = new LifecycleMojo();\n+        mojo2.setGoal( \"war:war\" );\n+        phase.setMojos( Arrays.asList( mojo1, mojo2 ) );\n+        assertEquals( \"jar:jar,war:war\", phase.toString() );\n+    }\n+    \n+    @Test\n+    public void testSet()\n+    {\n+        LifecyclePhase phase = new LifecyclePhase();\n+        assertNull( phase.getMojos() );\n+        \n+        phase.set( \"\" );\n+        assertNotNull( phase.getMojos() );\n+        assertEquals( 0, phase.getMojos().size() );\n+        \n+        phase.set( \"jar:jar, war:war\" );\n+        \n+        List<LifecycleMojo> mojos = phase.getMojos();\n+        assertNotNull( mojos );\n+        assertEquals( 2, mojos.size() );\n+        \n+        LifecycleMojo mojo1 = mojos.get(0);\n+        assertNotNull( mojo1 );\n+        assertEquals( \"jar:jar\", mojo1.getGoal() );\n+        \n+        LifecycleMojo mojo2 = mojos.get(1);\n+        assertNotNull( mojo2 );\n+        assertEquals( \"war:war\", mojo2.getGoal() );\n+    }\n+}\n+",
                "changes": 73
            }
        ],
        "unit_tests": [
            "LifecyclePhaseTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "maven-core/src/test/java/org/apache/maven/lifecycle/mapping/LifecyclePhaseTest.java",
        "buggy_files": [
            "maven-core/src/main/java/org/apache/maven/lifecycle/mapping/LifecyclePhase.java"
        ],
        "fixed": true
    }
]