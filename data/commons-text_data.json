[
    {
        "commit": "https://github.com/apache/commons-text/commit/4c29a73b03f93eec9c8e2d47b8d4b65b7db9f136",
        "file": [
            {
                "patch": "@@ -18,6 +18,8 @@\n \n import java.io.IOException;\n import java.io.Writer;\n+import java.util.ArrayList;\n+import java.util.List;\n \n /**\n  * Executes a sequence of translators one after the other. Execution ends whenever \n@@ -27,7 +29,7 @@\n  */\n public class AggregateTranslator extends CharSequenceTranslator {\n \n-    private final CharSequenceTranslator[] translators;\n+    private final List<CharSequenceTranslator> translators = new ArrayList<>();\n \n     /**\n      * Specify the translators to be used at creation time. \n@@ -36,9 +38,11 @@\n      */\n     public AggregateTranslator(final CharSequenceTranslator... translators) {\n         if (translators != null) {\n-            this.translators = translators.clone();\n-        } else {\n-            this.translators = null;\n+            for (CharSequenceTranslator translator : translators) {\n+                if (translator != null) {\n+                    this.translators.add(translator);\n+                }\n+            }\n         }\n     }\n ",
                "additions": 8,
                "raw_url": "https://github.com/apache/commons-text/raw/4c29a73b03f93eec9c8e2d47b8d4b65b7db9f136/src/main/java/org/apache/commons/text/translate/AggregateTranslator.java",
                "status": "modified",
                "changes": 12,
                "deletions": 4,
                "sha": "010ab2a99f568d06d563d0d127bb8b24d5998f19",
                "blob_url": "https://github.com/apache/commons-text/blob/4c29a73b03f93eec9c8e2d47b8d4b65b7db9f136/src/main/java/org/apache/commons/text/translate/AggregateTranslator.java",
                "filename": "src/main/java/org/apache/commons/text/translate/AggregateTranslator.java",
                "contents_url": "https://api.github.com/repos/apache/commons-text/contents/src/main/java/org/apache/commons/text/translate/AggregateTranslator.java?ref=4c29a73b03f93eec9c8e2d47b8d4b65b7db9f136"
            },
            {
                "patch": "@@ -20,22 +20,26 @@\n \n import java.io.IOException;\n import java.io.StringWriter;\n-import java.lang.reflect.Field;\n \n import static org.junit.Assert.assertEquals;\n-import static org.junit.Assert.assertNull;\n \n /**\n  * Unit tests for {@link org.apache.commons.text.translate.AggregateTranslator}.\n  */\n public class AggregateTranslatorTest {\n \n     @Test\n-    public void testNullConstructor() throws NoSuchFieldException, IllegalAccessException {\n+    public void testNullConstructor() throws Exception {\n+        final String testString = \"foo\";\n         final AggregateTranslator subject = new AggregateTranslator((CharSequenceTranslator[]) null);\n-        final Field field = AggregateTranslator.class.getDeclaredField(\"translators\");\n-        field.setAccessible(Boolean.TRUE);\n-        assertNull(field.get(subject));\n+        assertEquals(testString, subject.translate(testString));\n+    }\n+    \n+    @Test\n+    public void testNullVarargConstructor() throws Exception {\n+        final String testString = \"foo\";\n+        final AggregateTranslator subject = new AggregateTranslator((CharSequenceTranslator) null);\n+        assertEquals(testString, subject.translate(testString));\n     }\n \n     @Test",
                "additions": 10,
                "raw_url": "https://github.com/apache/commons-text/raw/4c29a73b03f93eec9c8e2d47b8d4b65b7db9f136/src/test/java/org/apache/commons/text/translate/AggregateTranslatorTest.java",
                "status": "modified",
                "changes": 16,
                "deletions": 6,
                "sha": "53353962d94ef7c5c37f9e7239ffba1ee496477d",
                "blob_url": "https://github.com/apache/commons-text/blob/4c29a73b03f93eec9c8e2d47b8d4b65b7db9f136/src/test/java/org/apache/commons/text/translate/AggregateTranslatorTest.java",
                "filename": "src/test/java/org/apache/commons/text/translate/AggregateTranslatorTest.java",
                "contents_url": "https://api.github.com/repos/apache/commons-text/contents/src/test/java/org/apache/commons/text/translate/AggregateTranslatorTest.java?ref=4c29a73b03f93eec9c8e2d47b8d4b65b7db9f136"
            }
        ],
        "bug_id": "commons-text_1",
        "parent": "https://github.com/apache/commons-text/commit/322fe272311bedffe4c2f5275c816cc196a74890",
        "message": "Correctly handle null varargs in AggregateTranslator constructor\n\nThe previous code didn't handle null vararg parameters correctly and\nwould throw a NPE if passed a null CharSequenceTranslator object.\n\nWhile updating the unit tests to verify this, I adjusted the tests so\nthat reflection isn't used.",
        "repo": "commons-text"
    }
]