[{"commit": "https://github.com/apache/dubbo-proxy/commit/11dc687ace493653a803e853b2feccd2be425721", "parent": "https://github.com/apache/dubbo-proxy/commit/6130e36a7c8b5ad4a7a6100d55c73055728ab8e3", "message": "Merge pull request #14 from qixiaobo/fix-no-args-method\n\ndubbo-proxy throws npe while invoking no  arguments method", "bug_id": "dubbo-proxy_1", "file": [{"additions": 5, "raw_url": "https://github.com/apache/dubbo-proxy/raw/11dc687ace493653a803e853b2feccd2be425721/src/main/java/org/apache/dubbo/proxy/worker/RequestWorker.java", "blob_url": "https://github.com/apache/dubbo-proxy/blob/11dc687ace493653a803e853b2feccd2be425721/src/main/java/org/apache/dubbo/proxy/worker/RequestWorker.java", "sha": "cc89b83b0476658d1d55a1e0bf76843c8478252f", "changes": 9, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/dubbo-proxy/contents/src/main/java/org/apache/dubbo/proxy/worker/RequestWorker.java?ref=11dc687ace493653a803e853b2feccd2be425721", "patch": "@@ -1,6 +1,7 @@\n package org.apache.dubbo.proxy.worker;\n \n import com.alibaba.fastjson.JSON;\n+\n import org.apache.dubbo.proxy.dao.ServiceDefinition;\n import org.apache.dubbo.proxy.dao.ServiceMapping;\n import org.apache.dubbo.proxy.metadata.MetadataCollector;\n@@ -33,7 +34,7 @@\n import static io.netty.handler.codec.http.HttpVersion.HTTP_1_1;\n \n \n-public class RequestWorker implements Runnable{\n+public class RequestWorker implements Runnable {\n \n     private ServiceDefinition serviceDefinition;\n     private ChannelHandlerContext ctx;\n@@ -60,7 +61,7 @@ public void run() {\n         String interfaze = Tool.getInterface(serviceID);\n         String group = Tool.getGroup(serviceID);\n         String version = Tool.getVersion(serviceID);\n-        if (serviceDefinition.getParamTypes() == null) {\n+        if (serviceDefinition.getParamTypes() == null && serviceDefinition.getParamValues() != null) {\n             String[] types = getTypesFromMetadata(serviceDefinition.getApplication(), interfaze, group, version,\n                     serviceDefinition.getMethodName(), serviceDefinition.getParamValues().length);\n             serviceDefinition.setParamTypes(types);\n@@ -103,7 +104,7 @@ private boolean writeResponse(ChannelHandlerContext ctx, Object result) {\n             Set<Cookie> cookies = ServerCookieDecoder.STRICT.decode(cookieString);\n             if (!cookies.isEmpty()) {\n                 // Reset the cookies if necessary.\n-                for (Cookie cookie: cookies) {\n+                for (Cookie cookie : cookies) {\n                     response.headers().add(HttpHeaderNames.SET_COOKIE, ServerCookieEncoder.STRICT.encode(cookie));\n                 }\n             }\n@@ -119,7 +120,7 @@ private boolean writeResponse(ChannelHandlerContext ctx, Object result) {\n         MetadataIdentifier identifier = new MetadataIdentifier(interfaze, version, group, Constants.PROVIDER_SIDE, application);\n         String metadata = metadataCollector.getProviderMetaData(identifier);\n         FullServiceDefinition serviceDefinition = JSON.parseObject(metadata, FullServiceDefinition.class);\n-        List<MethodDefinition> methods  = serviceDefinition.getMethods();\n+        List<MethodDefinition> methods = serviceDefinition.getMethods();\n         if (methods != null) {\n             for (MethodDefinition m : methods) {\n                 if (Tool.sameMethod(m, methodName, paramLen)) {", "filename": "src/main/java/org/apache/dubbo/proxy/worker/RequestWorker.java"}], "repo": "dubbo-proxy"}, {"commit": "https://github.com/apache/dubbo-proxy/commit/660a69b607e3f424c45d2fe7c18962c5617a2702", "parent": "https://github.com/apache/dubbo-proxy/commit/fb6af3cbd393439568df739eb59b056dbd9feabb", "message": "maybe we hava a method without args\nso it make a npe like below\n```\nException in thread \"Dubbo-proxy-request-worker-pool-thread-3\" java.lang.NullPointerException\n        at org.apache.dubbo.proxy.worker.RequestWorker.run(RequestWorker.java:65)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:748)\n```", "bug_id": "dubbo-proxy_2", "file": [{"additions": 5, "raw_url": "https://github.com/apache/dubbo-proxy/raw/660a69b607e3f424c45d2fe7c18962c5617a2702/src/main/java/org/apache/dubbo/proxy/worker/RequestWorker.java", "blob_url": "https://github.com/apache/dubbo-proxy/blob/660a69b607e3f424c45d2fe7c18962c5617a2702/src/main/java/org/apache/dubbo/proxy/worker/RequestWorker.java", "sha": "cc89b83b0476658d1d55a1e0bf76843c8478252f", "changes": 9, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/dubbo-proxy/contents/src/main/java/org/apache/dubbo/proxy/worker/RequestWorker.java?ref=660a69b607e3f424c45d2fe7c18962c5617a2702", "patch": "@@ -1,6 +1,7 @@\n package org.apache.dubbo.proxy.worker;\n \n import com.alibaba.fastjson.JSON;\n+\n import org.apache.dubbo.proxy.dao.ServiceDefinition;\n import org.apache.dubbo.proxy.dao.ServiceMapping;\n import org.apache.dubbo.proxy.metadata.MetadataCollector;\n@@ -33,7 +34,7 @@\n import static io.netty.handler.codec.http.HttpVersion.HTTP_1_1;\n \n \n-public class RequestWorker implements Runnable{\n+public class RequestWorker implements Runnable {\n \n     private ServiceDefinition serviceDefinition;\n     private ChannelHandlerContext ctx;\n@@ -60,7 +61,7 @@ public void run() {\n         String interfaze = Tool.getInterface(serviceID);\n         String group = Tool.getGroup(serviceID);\n         String version = Tool.getVersion(serviceID);\n-        if (serviceDefinition.getParamTypes() == null) {\n+        if (serviceDefinition.getParamTypes() == null && serviceDefinition.getParamValues() != null) {\n             String[] types = getTypesFromMetadata(serviceDefinition.getApplication(), interfaze, group, version,\n                     serviceDefinition.getMethodName(), serviceDefinition.getParamValues().length);\n             serviceDefinition.setParamTypes(types);\n@@ -103,7 +104,7 @@ private boolean writeResponse(ChannelHandlerContext ctx, Object result) {\n             Set<Cookie> cookies = ServerCookieDecoder.STRICT.decode(cookieString);\n             if (!cookies.isEmpty()) {\n                 // Reset the cookies if necessary.\n-                for (Cookie cookie: cookies) {\n+                for (Cookie cookie : cookies) {\n                     response.headers().add(HttpHeaderNames.SET_COOKIE, ServerCookieEncoder.STRICT.encode(cookie));\n                 }\n             }\n@@ -119,7 +120,7 @@ private boolean writeResponse(ChannelHandlerContext ctx, Object result) {\n         MetadataIdentifier identifier = new MetadataIdentifier(interfaze, version, group, Constants.PROVIDER_SIDE, application);\n         String metadata = metadataCollector.getProviderMetaData(identifier);\n         FullServiceDefinition serviceDefinition = JSON.parseObject(metadata, FullServiceDefinition.class);\n-        List<MethodDefinition> methods  = serviceDefinition.getMethods();\n+        List<MethodDefinition> methods = serviceDefinition.getMethods();\n         if (methods != null) {\n             for (MethodDefinition m : methods) {\n                 if (Tool.sameMethod(m, methodName, paramLen)) {", "filename": "src/main/java/org/apache/dubbo/proxy/worker/RequestWorker.java"}], "repo": "dubbo-proxy"}]
