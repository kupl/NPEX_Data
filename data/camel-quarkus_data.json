[
    {
        "repo": "camel-quarkus",
        "message": "Merge pull request #120 from lburgazzoli/management-name\n\nOverride DefaultStreamCachingStrategy::resolveSpoolDirectory to avoid NPE",
        "commit": "https://github.com/apache/camel-quarkus/commit/d66aca35fac27a8c50f61fc132c7da0efa69ffbf",
        "parent": "https://github.com/apache/camel-quarkus/commit/741a1a26fe0e697313b302b08f0a6605e118aa93",
        "bug_id": "camel-quarkus_1",
        "file": [
            {
                "sha": "2dfabfc137308890a668d26e019d7650a9ac44ee",
                "filename": "extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/runtime/support/FastCamelContext.java",
                "blob_url": "https://github.com/apache/camel-quarkus/blob/d66aca35fac27a8c50f61fc132c7da0efa69ffbf/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/runtime/support/FastCamelContext.java",
                "raw_url": "https://github.com/apache/camel-quarkus/raw/d66aca35fac27a8c50f61fc132c7da0efa69ffbf/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/runtime/support/FastCamelContext.java",
                "status": "modified",
                "changes": 24,
                "additions": 23,
                "contents_url": "https://api.github.com/repos/apache/camel-quarkus/contents/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/runtime/support/FastCamelContext.java?ref=d66aca35fac27a8c50f61fc132c7da0efa69ffbf",
                "patch": "@@ -20,6 +20,7 @@\n import java.util.Map;\n import java.util.Properties;\n import java.util.concurrent.ExecutorService;\n+import java.util.regex.Matcher;\n \n import org.apache.camel.AggregationStrategy;\n import org.apache.camel.AsyncProcessor;\n@@ -102,6 +103,8 @@\n import org.apache.camel.spi.UnitOfWorkFactory;\n import org.apache.camel.spi.UuidGenerator;\n import org.apache.camel.spi.ValidatorRegistry;\n+import org.apache.camel.util.FilePathResolver;\n+import org.apache.camel.util.StringHelper;\n \n public class FastCamelContext extends AbstractCamelContext {\n \n@@ -313,7 +316,26 @@ protected RestRegistryFactory createRestRegistryFactory() {\n \n     @Override\n     protected StreamCachingStrategy createStreamCachingStrategy() {\n-        return new DefaultStreamCachingStrategy();\n+        return new DefaultStreamCachingStrategy() {\n+            @Override\n+            protected String resolveSpoolDirectory(String path) {\n+                StringHelper.notEmpty(path, \"path\");\n+\n+                // must quote the names to have it work as literal replacement\n+                String name = Matcher.quoteReplacement(getName());\n+\n+                // replace tokens\n+                String answer = path;\n+                answer = answer.replaceFirst(\"#camelId#\", name);\n+                answer = answer.replaceFirst(\"#name#\", name);\n+\n+                if (answer.contains(\"#uuid#\")) {\n+                    answer = answer.replaceFirst(\"#uuid#\", getUuidGenerator().generateUuid());\n+                }\n+\n+                return FilePathResolver.resolvePath(answer);\n+            }\n+        };\n     }\n \n     @Override",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "camel-quarkus",
        "message": "Override DefaultStreamCachingStrategy::resolveSpoolDirectory to avoid NPE\n\nThe default implementation of StreamCachingStrategy leverages the\nManagementNameStrategy to determine the name of the stream cache\nspool directory but as there's no ManagementNameStrategy in Camel\nQuarkus, it throws an NPE. The new method replaces the default\nimplementation with a simplified one",
        "commit": "https://github.com/apache/camel-quarkus/commit/7ddcfd317ec8a2aea0d62598e5880d8d6c9e140d",
        "parent": "https://github.com/apache/camel-quarkus/commit/741a1a26fe0e697313b302b08f0a6605e118aa93",
        "bug_id": "camel-quarkus_2",
        "file": [
            {
                "sha": "2dfabfc137308890a668d26e019d7650a9ac44ee",
                "filename": "extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/runtime/support/FastCamelContext.java",
                "blob_url": "https://github.com/apache/camel-quarkus/blob/7ddcfd317ec8a2aea0d62598e5880d8d6c9e140d/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/runtime/support/FastCamelContext.java",
                "raw_url": "https://github.com/apache/camel-quarkus/raw/7ddcfd317ec8a2aea0d62598e5880d8d6c9e140d/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/runtime/support/FastCamelContext.java",
                "status": "modified",
                "changes": 24,
                "additions": 23,
                "contents_url": "https://api.github.com/repos/apache/camel-quarkus/contents/extensions/core/runtime/src/main/java/org/apache/camel/quarkus/core/runtime/support/FastCamelContext.java?ref=7ddcfd317ec8a2aea0d62598e5880d8d6c9e140d",
                "patch": "@@ -20,6 +20,7 @@\n import java.util.Map;\n import java.util.Properties;\n import java.util.concurrent.ExecutorService;\n+import java.util.regex.Matcher;\n \n import org.apache.camel.AggregationStrategy;\n import org.apache.camel.AsyncProcessor;\n@@ -102,6 +103,8 @@\n import org.apache.camel.spi.UnitOfWorkFactory;\n import org.apache.camel.spi.UuidGenerator;\n import org.apache.camel.spi.ValidatorRegistry;\n+import org.apache.camel.util.FilePathResolver;\n+import org.apache.camel.util.StringHelper;\n \n public class FastCamelContext extends AbstractCamelContext {\n \n@@ -313,7 +316,26 @@ protected RestRegistryFactory createRestRegistryFactory() {\n \n     @Override\n     protected StreamCachingStrategy createStreamCachingStrategy() {\n-        return new DefaultStreamCachingStrategy();\n+        return new DefaultStreamCachingStrategy() {\n+            @Override\n+            protected String resolveSpoolDirectory(String path) {\n+                StringHelper.notEmpty(path, \"path\");\n+\n+                // must quote the names to have it work as literal replacement\n+                String name = Matcher.quoteReplacement(getName());\n+\n+                // replace tokens\n+                String answer = path;\n+                answer = answer.replaceFirst(\"#camelId#\", name);\n+                answer = answer.replaceFirst(\"#name#\", name);\n+\n+                if (answer.contains(\"#uuid#\")) {\n+                    answer = answer.replaceFirst(\"#uuid#\", getUuidGenerator().generateUuid());\n+                }\n+\n+                return FilePathResolver.resolvePath(answer);\n+            }\n+        };\n     }\n \n     @Override",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "camel-quarkus",
        "message": "Possible NPE in camel extension, fixes #2273",
        "commit": "https://github.com/apache/camel-quarkus/commit/936f05f623058e90f3541fae71e6bb615887c974",
        "parent": "https://github.com/apache/camel-quarkus/commit/3dd748cc5100174354f6044ef42fd006aae266f3",
        "bug_id": "camel-quarkus_3",
        "file": [
            {
                "sha": "6b5748f01f675e314159c6134bcb176cabc6d180",
                "filename": "extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java",
                "blob_url": "https://github.com/apache/camel-quarkus/blob/936f05f623058e90f3541fae71e6bb615887c974/extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java",
                "raw_url": "https://github.com/apache/camel-quarkus/raw/936f05f623058e90f3541fae71e6bb615887c974/extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/camel-quarkus/contents/extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java?ref=936f05f623058e90f3541fae71e6bb615887c974",
                "patch": "@@ -82,8 +82,8 @@ public void doInit() {\n             RuntimeSupport.bindProperties(pc.getInitialProperties(), pc, PFX_CAMEL_PROPERTIES);\n             context.addComponent(\"properties\", pc);\n \n-            fireEvent(InitializingEvent.class, new InitializingEvent());\n             this.context.getTypeConverterRegistry().setInjector(this.context.getInjector());\n+            fireEvent(InitializingEvent.class, new InitializingEvent());\n             if (buildTimeConfig.disableJaxb) {\n                 this.context.setModelJAXBContextFactory(() -> {\n                     throw new UnsupportedOperationException();",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "camel-quarkus",
        "message": "Fix NPE when using deferInitPhase",
        "commit": "https://github.com/apache/camel-quarkus/commit/973d88b434db2651289ca75257a7b0d9a5f6b5cd",
        "parent": "https://github.com/apache/camel-quarkus/commit/9c4aa7c1df571af6482e66229c9d2f979eed05e9",
        "bug_id": "camel-quarkus_4",
        "file": [
            {
                "sha": "8d92da88d9a57019239f05c529e6df6923dcc668",
                "filename": "extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java",
                "blob_url": "https://github.com/apache/camel-quarkus/blob/973d88b434db2651289ca75257a7b0d9a5f6b5cd/extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java",
                "raw_url": "https://github.com/apache/camel-quarkus/raw/973d88b434db2651289ca75257a7b0d9a5f6b5cd/extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/camel-quarkus/contents/extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java?ref=973d88b434db2651289ca75257a7b0d9a5f6b5cd",
                "patch": "@@ -55,6 +55,9 @@ public void init(BuildTime buildTimeConfig) {\n     @Override\n     public void start(Runtime runtimeConfig) throws Exception {\n         this.runtimeConfig = runtimeConfig;\n+        if (buildTimeConfig.deferInitPhase) {\n+            doInit();\n+        }\n         doStart();\n     }\n ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "camel-quarkus",
        "message": "Merge pull request #2278 from gnodet/fix-2273\n\nPossible NPE in camel extension, fixes #2273",
        "commit": "https://github.com/apache/camel-quarkus/commit/77ba3291a6c9425b2fdc8c82f13faca088750b1d",
        "parent": "https://github.com/apache/camel-quarkus/commit/0333ba98671585958e8a0c7d3a24b4db918a21e0",
        "bug_id": "camel-quarkus_5",
        "file": [
            {
                "sha": "6b5748f01f675e314159c6134bcb176cabc6d180",
                "filename": "extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java",
                "blob_url": "https://github.com/apache/camel-quarkus/blob/77ba3291a6c9425b2fdc8c82f13faca088750b1d/extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java",
                "raw_url": "https://github.com/apache/camel-quarkus/raw/77ba3291a6c9425b2fdc8c82f13faca088750b1d/extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/camel-quarkus/contents/extensions/core/runtime/src/main/java/io/quarkus/camel/core/runtime/support/FastCamelRuntime.java?ref=77ba3291a6c9425b2fdc8c82f13faca088750b1d",
                "patch": "@@ -82,8 +82,8 @@ public void doInit() {\n             RuntimeSupport.bindProperties(pc.getInitialProperties(), pc, PFX_CAMEL_PROPERTIES);\n             context.addComponent(\"properties\", pc);\n \n-            fireEvent(InitializingEvent.class, new InitializingEvent());\n             this.context.getTypeConverterRegistry().setInjector(this.context.getInjector());\n+            fireEvent(InitializingEvent.class, new InitializingEvent());\n             if (buildTimeConfig.disableJaxb) {\n                 this.context.setModelJAXBContextFactory(() -> {\n                     throw new UnsupportedOperationException();",
                "deletions": 1
            }
        ]
    }
]