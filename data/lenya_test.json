{
    "lenya_0da9bc3": {
        "bug_id": "lenya_0da9bc3",
        "commit": "https://github.com/apache/lenya/commit/0da9bc340236e6f10911b2a1c67c383e529d7c63",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/lenya/blob/0da9bc340236e6f10911b2a1c67c383e529d7c63/src/java/org/apache/lenya/cms/publication/DefaultDocument.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/java/org/apache/lenya/cms/publication/DefaultDocument.java?ref=0da9bc340236e6f10911b2a1c67c383e529d7c63",
                "deletions": 3,
                "filename": "src/java/org/apache/lenya/cms/publication/DefaultDocument.java",
                "patch": "@@ -1,5 +1,5 @@\n /*\n-$Id: DefaultDocument.java,v 1.20 2003/07/31 11:56:42 andreas Exp $\n+$Id: DefaultDocument.java,v 1.21 2003/08/08 08:35:58 gregor Exp $\n <License>\n \n  ============================================================================\n@@ -105,9 +105,11 @@ protected DefaultDocument(Publication publication, String id, String area) {\n \n         assert (publication != null) && !\"\".equals(publication);\n         this.publication = publication;\n+\n+\t\tsetArea(area);\n+\n \t\tthis.dublincore =  new DublinCore(this);\n \n-        setArea(area);\n     }\n \n \t/**\n@@ -124,9 +126,10 @@ protected DefaultDocument(Publication publication, String id, String area, Strin\n \t\tassert (publication != null) && !\"\".equals(publication);\n \t\tthis.publication = publication;\n \t\tthis.language = language;\n+\t\tsetArea(area);\n+\n \t\tthis.dublincore =  new DublinCore(this);\n \n-\t\tsetArea(area);\n \t}\n \n     /**",
                "raw_url": "https://github.com/apache/lenya/raw/0da9bc340236e6f10911b2a1c67c383e529d7c63/src/java/org/apache/lenya/cms/publication/DefaultDocument.java",
                "sha": "31fd40418246754dea36f5aea99419b697317728",
                "status": "modified"
            }
        ],
        "message": "we need to set the area before we call the DublinCore constructor or we'll get a NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/lenya/trunk@40628 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/7893547264e5734ac63d6f1fb3f6682420465f37",
        "patched_files": [
            "DefaultDocument.java"
        ],
        "repo": "lenya",
        "unit_tests": [
            "DefaultDocumentTest.java"
        ]
    },
    "lenya_19da45e": {
        "bug_id": "lenya_19da45e",
        "commit": "https://github.com/apache/lenya/commit/19da45e4e045790cdd3c559ff0802a5225cf3205",
        "file": [
            {
                "additions": 10,
                "blob_url": "https://github.com/apache/lenya/blob/19da45e4e045790cdd3c559ff0802a5225cf3205/src/java/org/apache/lenya/cms/site/SiteManager.java",
                "changes": 11,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/java/org/apache/lenya/cms/site/SiteManager.java?ref=19da45e4e045790cdd3c559ff0802a5225cf3205",
                "deletions": 1,
                "filename": "src/java/org/apache/lenya/cms/site/SiteManager.java",
                "patch": "@@ -147,10 +147,19 @@ boolean requires(DocumentIdentityMap map, Node dependingResource, Node requiredR\n      * It is meant to hide specific nodes within the \"public\" navigation whereas the node is visible within the info/site area.\n      * \n      * @param document The document.\n-     * @param label The label.\n+     * @param visibleInNav The visibility.\n      * @throws SiteException if an error occurs.\n      */\n     void setVisibleInNav(Document document, boolean visibleInNav) throws SiteException;\n+    \n+    /**\n+     * Returns the visibility of a node in the navigation. \n+     * \n+     * @param document The document.\n+     * @return A boolean value.\n+     * @throws SiteException if an error occurs.\n+     */\n+    boolean isVisibleInNav(Document document) throws SiteException;\n \n     /**\n      * Returns all documents in a certain area.",
                "raw_url": "https://github.com/apache/lenya/raw/19da45e4e045790cdd3c559ff0802a5225cf3205/src/java/org/apache/lenya/cms/site/SiteManager.java",
                "sha": "b81699467e81276bb642896a144c7e3e242d2661",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/lenya/blob/19da45e4e045790cdd3c559ff0802a5225cf3205/src/java/org/apache/lenya/cms/site/simple/SimpleSiteManager.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/java/org/apache/lenya/cms/site/simple/SimpleSiteManager.java?ref=19da45e4e045790cdd3c559ff0802a5225cf3205",
                "deletions": 1,
                "filename": "src/java/org/apache/lenya/cms/site/simple/SimpleSiteManager.java",
                "patch": "@@ -201,7 +201,7 @@ public void setLabel(Document document, String label) throws SiteException {\n \n     /**\n      * @see org.apache.lenya.cms.site.SiteManager#setVisibleInNav(org.apache.lenya.cms.publication.Document,\n-     *      java.lang.String)\n+     *      boolean)\n      */\n     public void setVisibleInNav(Document document, boolean visibleInNav) throws SiteException {\n     }\n@@ -236,4 +236,8 @@ public Document getAvailableDocument(Document document) throws SiteException {\n         return document;\n     }\n \n+    public boolean isVisibleInNav(Document document) throws SiteException {\n+        return true;\n+    }\n+\n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/lenya/raw/19da45e4e045790cdd3c559ff0802a5225cf3205/src/java/org/apache/lenya/cms/site/simple/SimpleSiteManager.java",
                "sha": "7aebca3b3599b25c49eaf47ff3080386ffad02fb",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/lenya/blob/19da45e4e045790cdd3c559ff0802a5225cf3205/src/java/org/apache/lenya/cms/site/topicmap/TopicMapSiteManager.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/java/org/apache/lenya/cms/site/topicmap/TopicMapSiteManager.java?ref=19da45e4e045790cdd3c559ff0802a5225cf3205",
                "deletions": 1,
                "filename": "src/java/org/apache/lenya/cms/site/topicmap/TopicMapSiteManager.java",
                "patch": "@@ -118,7 +118,7 @@ public void setLabel(Document document, String label) throws SiteException {\n     \n     /**\n      * @see org.apache.lenya.cms.site.SiteManager#setVisibleInNav(org.apache.lenya.cms.publication.Document,\n-     *      java.lang.String)\n+     *      boolean)\n      */\n     public void setVisibleInNav(Document document, boolean visibleInNav) throws SiteException {\n     }\n@@ -151,4 +151,8 @@ public Document getAvailableDocument(Document document) throws SiteException {\n         return document;\n     }\n \n+    public boolean isVisibleInNav(Document document) throws SiteException {\n+        return true;\n+    }\n+\n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/lenya/raw/19da45e4e045790cdd3c559ff0802a5225cf3205/src/java/org/apache/lenya/cms/site/topicmap/TopicMapSiteManager.java",
                "sha": "5b51ec333cf574bfc494b3e37c78eb1452a68baa",
                "status": "modified"
            },
            {
                "additions": 25,
                "blob_url": "https://github.com/apache/lenya/blob/19da45e4e045790cdd3c559ff0802a5225cf3205/src/java/org/apache/lenya/cms/site/usecases/CreateLanguage.java",
                "changes": 26,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/java/org/apache/lenya/cms/site/usecases/CreateLanguage.java?ref=19da45e4e045790cdd3c559ff0802a5225cf3205",
                "deletions": 1,
                "filename": "src/java/org/apache/lenya/cms/site/usecases/CreateLanguage.java",
                "patch": "@@ -19,12 +19,14 @@\n import java.util.ArrayList;\n import java.util.List;\n \n+import org.apache.avalon.framework.service.ServiceSelector;\n import org.apache.lenya.cms.publication.Document;\n import org.apache.lenya.cms.publication.DocumentBuildException;\n import org.apache.lenya.cms.publication.DocumentException;\n import org.apache.lenya.cms.publication.DocumentIdentityMap;\n-import org.apache.lenya.cms.publication.ResourceType;\n import org.apache.lenya.cms.publication.Publication;\n+import org.apache.lenya.cms.publication.ResourceType;\n+import org.apache.lenya.cms.site.SiteManager;\n \n /**\n  * Usecase to create a new language version of a resource.\n@@ -88,6 +90,7 @@ protected void initParameters() {\n \n         Document source = getSourceDocument();\n         if (source != null) {\n+            setParameter(DOCUMENT_ID, source.getId());\n             try {\n                 List nonExistingLanguages = getNonExistingLanguages();\n                 setParameter(LANGUAGES, nonExistingLanguages\n@@ -142,4 +145,25 @@ protected String getDocumentTypeName() {\n         return this.documentTypeName;\n     }\n \n+    protected boolean getVisibleInNav() {\n+        Document source = getSourceDocument();\n+        ServiceSelector selector = null;\n+        SiteManager siteManager = null;\n+        try {\n+            selector = (ServiceSelector) manager.lookup(SiteManager.ROLE + \"Selector\");\n+            siteManager = (SiteManager) selector.select(source.getPublication()\n+                    .getSiteManagerHint());\n+            return siteManager.isVisibleInNav(source);\n+        } catch (Exception e) {\n+            throw new RuntimeException(e);\n+        } finally {\n+            if (selector != null) {\n+                if (siteManager != null) {\n+                    selector.release(siteManager);\n+                }\n+                manager.release(selector);\n+            }\n+        }\n+    }\n+\n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/lenya/raw/19da45e4e045790cdd3c559ff0802a5225cf3205/src/java/org/apache/lenya/cms/site/usecases/CreateLanguage.java",
                "sha": "7231a989e9079cd9675dd89d52905ad67cc58f9f",
                "status": "modified"
            },
            {
                "additions": 35,
                "blob_url": "https://github.com/apache/lenya/blob/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/DefaultSiteTree.java",
                "changes": 53,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/DefaultSiteTree.java?ref=19da45e4e045790cdd3c559ff0802a5225cf3205",
                "deletions": 18,
                "filename": "src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/DefaultSiteTree.java",
                "patch": "@@ -120,9 +120,8 @@ public synchronized Document createDocument() throws ParserConfigurationExceptio\n \n         Element root = document.getDocumentElement();\n         root.setAttribute(\"xmlns:xsi\", \"http://www.w3.org/2001/XMLSchema-instance\");\n-        root\n-                .setAttribute(\"xsi:schemaLocation\",\n-                        \"http://apache.org/cocoon/lenya/sitetree/1.0  ../../../../resources/entities/sitetree.xsd\");\n+        root.setAttribute(\"xsi:schemaLocation\",\n+                \"http://apache.org/cocoon/lenya/sitetree/1.0  ../../../../resources/entities/sitetree.xsd\");\n \n         return document;\n     }\n@@ -177,8 +176,8 @@ public synchronized void addNode(SiteTreeNode node, String refDocumentId) throws\n      * @see org.apache.lenya.cms.site.tree.SiteTree#addNode(java.lang.String, java.lang.String,\n      *      org.apache.lenya.cms.site.Label[], boolean)\n      */\n-    public synchronized void addNode(String parentid, String id, Label[] labels, boolean visibleInNav)\n-            throws SiteException {\n+    public synchronized void addNode(String parentid, String id, Label[] labels,\n+            boolean visibleInNav) throws SiteException {\n         addNode(parentid, id, labels, visibleInNav, null, null, false);\n     }\n \n@@ -194,8 +193,8 @@ public synchronized void addNode(SiteTreeNode node) throws SiteException {\n      *      org.apache.lenya.cms.site.Label[], boolean, java.lang.String, java.lang.String, boolean,\n      *      java.lang.String)\n      */\n-    public synchronized void addNode(String documentid, Label[] labels, boolean visibleInNav, String href, String suffix,\n-            boolean link, String refDocumentId) throws SiteException {\n+    public synchronized void addNode(String documentid, Label[] labels, boolean visibleInNav,\n+            String href, String suffix, boolean link, String refDocumentId) throws SiteException {\n         StringBuffer buf = new StringBuffer();\n         StringTokenizer st = new StringTokenizer(documentid, \"/\");\n         int length = st.countTokens();\n@@ -212,17 +211,17 @@ public synchronized void addNode(String documentid, Label[] labels, boolean visi\n      * @see org.apache.lenya.cms.site.tree.SiteTree#addNode(java.lang.String,\n      *      org.apache.lenya.cms.site.Label[], boolean, java.lang.String, java.lang.String, boolean)\n      */\n-    public synchronized void addNode(String documentid, Label[] labels, boolean visibleInNav, String href, String suffix,\n-            boolean link) throws SiteException {\n+    public synchronized void addNode(String documentid, Label[] labels, boolean visibleInNav,\n+            String href, String suffix, boolean link) throws SiteException {\n         addNode(documentid, labels, visibleInNav, href, suffix, link, null);\n     }\n \n     /**\n      * @see org.apache.lenya.cms.site.tree.SiteTree#addNode(java.lang.String, java.lang.String,\n      *      org.apache.lenya.cms.site.Label[], boolean, java.lang.String, java.lang.String, boolean)\n      */\n-    public synchronized void addNode(String parentid, String id, Label[] labels, boolean visibleInNav, String href,\n-            String suffix, boolean link) throws SiteException {\n+    public synchronized void addNode(String parentid, String id, Label[] labels,\n+            boolean visibleInNav, String href, String suffix, boolean link) throws SiteException {\n         addNode(parentid, id, labels, visibleInNav, href, suffix, link, null);\n     }\n \n@@ -231,8 +230,9 @@ public synchronized void addNode(String parentid, String id, Label[] labels, boo\n      *      org.apache.lenya.cms.site.Label[], boolean, java.lang.String, java.lang.String, boolean,\n      *      java.lang.String)\n      */\n-    public synchronized void addNode(String parentid, String id, Label[] labels, boolean visibleInNav, String href,\n-            String suffix, boolean link, String refDocumentId) throws SiteException {\n+    public synchronized void addNode(String parentid, String id, Label[] labels,\n+            boolean visibleInNav, String href, String suffix, boolean link, String refDocumentId)\n+            throws SiteException {\n \n         Node parentNode = getNodeInternal(parentid);\n \n@@ -263,7 +263,7 @@ public synchronized void addNode(String parentid, String id, Label[] labels, boo\n         } else {\n             child.setAttribute(SiteTreeNodeImpl.VISIBLEINNAV_ATTRIBUTE_NAME, \"false\");\n         }\n-        \n+\n         if ((href != null) && (href.length() > 0)) {\n             child.setAttribute(SiteTreeNodeImpl.HREF_ATTRIBUTE_NAME, href);\n         }\n@@ -514,8 +514,14 @@ public synchronized void importSubtree(SiteTreeNode newParent, SiteTreeNode subt\n         String parentId = newParent.getAbsoluteId();\n         String id = newid;\n \n-        this.addNode(parentId, id, subtreeRoot.getLabels(), subtreeRoot.visibleInNav(), subtreeRoot.getHref(), subtreeRoot\n-                .getSuffix(), subtreeRoot.hasLink(), refDocumentId);\n+        this.addNode(parentId,\n+                id,\n+                subtreeRoot.getLabels(),\n+                subtreeRoot.visibleInNav(),\n+                subtreeRoot.getHref(),\n+                subtreeRoot.getSuffix(),\n+                subtreeRoot.hasLink(),\n+                refDocumentId);\n         newParent = this.getNode(parentId + \"/\" + id);\n         if (newParent == null) {\n             throw new SiteException(\"The added node was not found.\");\n@@ -546,11 +552,12 @@ public synchronized void setLabel(String documentId, Label label) {\n             throw new RuntimeException(e);\n         }\n     }\n-    \n+\n     /**\n      * @see org.apache.lenya.cms.site.tree.SiteTree#setVisibleInNav(java.lang.String, boolean)\n      */\n-    public synchronized void setVisibleInNav(String documentId, boolean visibleInNav)  throws SiteException {\n+    public synchronized void setVisibleInNav(String documentId, boolean visibleInNav)\n+            throws SiteException {\n         SiteTreeNode node = getNode(documentId);\n         if (visibleInNav) {\n             node.setNodeAttribute(SiteTreeNodeImpl.VISIBLEINNAV_ATTRIBUTE_NAME, \"true\");\n@@ -601,4 +608,14 @@ public void save() throws SiteException {\n         saveDocument();\n     }\n \n+    public boolean isVisibleInNav(String documentId) throws SiteException {\n+        SiteTreeNode node = getNode(documentId);\n+        String value = node.getNodeAttribute(SiteTreeNodeImpl.VISIBLEINNAV_ATTRIBUTE_NAME);\n+        if (value != null && !value.equals(\"\")) {\n+            return Boolean.valueOf(value).booleanValue();\n+        } else {\n+            return true;\n+        }\n+    }\n+\n }",
                "raw_url": "https://github.com/apache/lenya/raw/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/DefaultSiteTree.java",
                "sha": "3f929d3b28e28af33265726350f4462c057c33ba",
                "status": "modified"
            },
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/lenya/blob/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTree.java",
                "changes": 14,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTree.java?ref=19da45e4e045790cdd3c559ff0802a5225cf3205",
                "deletions": 2,
                "filename": "src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTree.java",
                "patch": "@@ -158,9 +158,19 @@ void addNode(String documentid, Label[] labels, boolean visibleInNav, String hre\n      * Sets the visibility in the navigation of an existing node. \n      * \n      * @param documentId the document-id to which the visibility is to be added.\n-     * @param visiblieInNav \n+     * @param visibleInNav The visibility. \n+     * @throws SiteException if an error occurs.\n+     */\n+    void setVisibleInNav(String documentId, boolean visibleInNav) throws SiteException;\n+    \n+    /**\n+     * Returns the visibility in the navigation of an existing node.\n+     *  \n+     * @param documentId The document ID.\n+     * @return A boolean value.\n+     * @throws SiteException\n      */\n-    void setVisibleInNav (String documentId, boolean visibleInNav) throws SiteException;\n+    boolean isVisibleInNav(String documentId) throws SiteException;\n \n     /**\n      * Remove a label from a node",
                "raw_url": "https://github.com/apache/lenya/raw/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTree.java",
                "sha": "2768394aa3661ec5c911e42bb3e0dcbfa8893e4f",
                "status": "modified"
            },
            {
                "additions": 8,
                "blob_url": "https://github.com/apache/lenya/blob/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTreeNode.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTreeNode.java?ref=19da45e4e045790cdd3c559ff0802a5225cf3205",
                "deletions": 0,
                "filename": "src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTreeNode.java",
                "patch": "@@ -204,6 +204,14 @@\n      */\n     void setNodeAttribute (String attributeName, String attributeValue);\n \n+    /**\n+     * Returns an attribute of this node.\n+     *\n+     * @param attributeName name of the attribute\n+     * @return The value.\n+     */\n+    String getNodeAttribute (String attributeName);\n+\n     /**\n      * Give a list of the children and this node in a pre order way\n      * @return The list",
                "raw_url": "https://github.com/apache/lenya/raw/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTreeNode.java",
                "sha": "3e70570046622b3e2617256099ef30b52fc18ffb",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/lenya/blob/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTreeNodeImpl.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTreeNodeImpl.java?ref=19da45e4e045790cdd3c559ff0802a5225cf3205",
                "deletions": 0,
                "filename": "src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTreeNodeImpl.java",
                "patch": "@@ -490,4 +490,9 @@ public List preOrder() {\n         return list;\n     }\n \n+    public String getNodeAttribute(String attributeName) {\n+        Element element = (Element) this.node;\n+        return element.getAttribute(attributeName);\n+    }\n+\n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/lenya/raw/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/SiteTreeNodeImpl.java",
                "sha": "6bbd43c8bdb8a47b95a5ebcb7aa8940e013fba40",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/lenya/blob/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/TreeSiteManager.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/TreeSiteManager.java?ref=19da45e4e045790cdd3c559ff0802a5225cf3205",
                "deletions": 2,
                "filename": "src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/TreeSiteManager.java",
                "patch": "@@ -302,10 +302,9 @@ public void setLabel(Document document, String label) throws SiteException {\n \n     /**\n      * @see org.apache.lenya.cms.site.SiteManager#setVisibleInNav(org.apache.lenya.cms.publication.Document,\n-     *      java.lang.String)\n+     *      boolean)\n      */\n     public void setVisibleInNav(Document document, boolean visibleInNav) throws SiteException {\n-\n         SiteTree tree = getTree(document);\n         tree.setVisibleInNav(document.getId(), visibleInNav);\n     }\n@@ -469,4 +468,9 @@ protected String computeUniqueDocumentId(Document document) throws SiteException\n \n         return documentId;\n     }\n+\n+    public boolean isVisibleInNav(Document document) throws SiteException {\n+        SiteTree tree = getTree(document);\n+        return tree.isVisibleInNav(document.getId());\n+    }\n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/lenya/raw/19da45e4e045790cdd3c559ff0802a5225cf3205/src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/TreeSiteManager.java",
                "sha": "5988d9e589c558938415fb00be9fe50f51e81ac4",
                "status": "modified"
            }
        ],
        "message": "Added isVisibleInNav() method to SiteManager. This allows to fix an NPE in the CreateLanguage usecase.\n\ngit-svn-id: https://svn.apache.org/repos/asf/lenya/trunk@370125 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/8397f305e42a57724b179d160014b23c9de92395",
        "patched_files": [
            "SiteTreeNodeImpl.java",
            "DefaultSiteTree.java"
        ],
        "repo": "lenya",
        "unit_tests": [
            "DefaultSiteTreeTest.java",
            "SiteTreeNodeImplTest.java"
        ]
    },
    "lenya_2c9f20d": {
        "bug_id": "lenya_2c9f20d",
        "commit": "https://github.com/apache/lenya/commit/2c9f20dbf6d8813f8662f4c4b904684f799289eb",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/lenya/blob/2c9f20dbf6d8813f8662f4c4b904684f799289eb/src/modules-core/usecase/java/src/org/apache/lenya/cms/usecase/AbstractUsecase.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules-core/usecase/java/src/org/apache/lenya/cms/usecase/AbstractUsecase.java?ref=2c9f20dbf6d8813f8662f4c4b904684f799289eb",
                "deletions": 1,
                "filename": "src/modules-core/usecase/java/src/org/apache/lenya/cms/usecase/AbstractUsecase.java",
                "patch": "@@ -86,9 +86,11 @@ protected void advanceState(String event) {\n \n     /**\n      * @see org.apache.lenya.cms.usecase.Usecase#getSourceURL()\n+     * We don't use getParameterAsString() because this will typically\n+     * cause stack overflows or NPEs in connection with initParameters().\n      */\n     public String getSourceURL() {\n-        return getParameterAsString(SOURCE_URL);\n+        return (String) this.parameters.get(SOURCE_URL);\n     }\n \n     /**",
                "raw_url": "https://github.com/apache/lenya/raw/2c9f20dbf6d8813f8662f4c4b904684f799289eb/src/modules-core/usecase/java/src/org/apache/lenya/cms/usecase/AbstractUsecase.java",
                "sha": "0c4794e5e1671bc3792288dbc9991f5c09363462",
                "status": "modified"
            }
        ],
        "message": "AbstractUsecase.getSourceURL() doesn't use getParameter() to avoid NPEs\n\ngit-svn-id: https://svn.apache.org/repos/asf/lenya/trunk@509212 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/c6a254b0d3f138f57d0a626976573a734f31ae3a",
        "patched_files": [
            "AbstractUsecase.java"
        ],
        "repo": "lenya",
        "unit_tests": [
            "AbstractUsecaseTest.java"
        ]
    },
    "lenya_45149c0": {
        "bug_id": "lenya_45149c0",
        "commit": "https://github.com/apache/lenya/commit/45149c09a73b5afbc5c35113aa3b066d7839ac62",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/lenya/blob/45149c09a73b5afbc5c35113aa3b066d7839ac62/src/impl/test/org/apache/lenya/cms/rc/RevisionControllerTest.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/impl/test/org/apache/lenya/cms/rc/RevisionControllerTest.java?ref=45149c09a73b5afbc5c35113aa3b066d7839ac62",
                "deletions": 2,
                "filename": "src/impl/test/org/apache/lenya/cms/rc/RevisionControllerTest.java",
                "patch": "@@ -77,8 +77,8 @@ public void testRevisionController() throws RepositoryException, RevisionControl\n         String source = args[1];\n         String identityD = args[2];\n         String destination = args[3];\n-        doc1.getRepositoryNode().checkout();\n-        doc2.getRepositoryNode().checkin();\n+        //doc1.getRepositoryNode().checkout();\n+        //doc2.getRepositoryNode().checkin();\n     }\n \n }",
                "raw_url": "https://github.com/apache/lenya/raw/45149c09a73b5afbc5c35113aa3b066d7839ac62/src/impl/test/org/apache/lenya/cms/rc/RevisionControllerTest.java",
                "sha": "c0acd9def9765631dac6841f2398eb95be355923",
                "status": "modified"
            }
        ],
        "message": "Commented out invalid checks to avoid NPE in RevisionControllerTest\n\ngit-svn-id: https://svn.apache.org/repos/asf/lenya/trunk@588618 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/99e05a9a54c3804d1b62a14df42981642c401ed0",
        "patched_files": [],
        "repo": "lenya",
        "unit_tests": [
            "RevisionControllerTest.java"
        ]
    },
    "lenya_567529d": {
        "bug_id": "lenya_567529d",
        "commit": "https://github.com/apache/lenya/commit/567529dd9fa991b2c259da94a40c693da693acf0",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/lenya/blob/567529dd9fa991b2c259da94a40c693da693acf0/src/java/org/apache/lenya/cms/ac/FileUser.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/java/org/apache/lenya/cms/ac/FileUser.java?ref=567529dd9fa991b2c259da94a40c693da693acf0",
                "deletions": 3,
                "filename": "src/java/org/apache/lenya/cms/ac/FileUser.java",
                "patch": "@@ -1,5 +1,5 @@\n /*\n- * $Id: FileUser.java,v 1.10 2003/06/06 17:20:06 egli Exp $\n+ * $Id: FileUser.java,v 1.11 2003/06/10 14:40:51 egli Exp $\n  * <License>\n  * The Apache Software License\n  *\n@@ -106,6 +106,7 @@ public FileUser(\n \n \tpublic FileUser(Publication publication, Configuration config)\n \t\tthrows ConfigurationException {\n+\t\tthis.publication = publication;\n \t\tid = config.getAttribute(ID_ATTRIBUTE);\n \t\tsetEmail(config.getChild(EMAIL).getValue());\n \t\tsetFullName(config.getChild(FULL_NAME).getValue());\n@@ -201,9 +202,7 @@ public void save() throws AccessControlException {\n \t */\n \tpublic void delete() throws AccessControlException {\n \t\tsuper.delete();\n-\n \t\tUserManager manager = UserManager.instance(publication);\n-\n \t\tmanager.remove(this);\n \t\tFile xmlPath = manager.getPath();\n \t\tFile xmlfile = new File(xmlPath, getId() + UserManager.SUFFIX);",
                "raw_url": "https://github.com/apache/lenya/raw/567529dd9fa991b2c259da94a40c693da693acf0/src/java/org/apache/lenya/cms/ac/FileUser.java",
                "sha": "e24e121967b7ba90b76dbf50457e97d74e44263a",
                "status": "modified"
            }
        ],
        "message": "When initialized (in the constructor) with a publication, do\ntry to remember it, i.e. forgot to store the publication, so\nwhen trying to delete later it failed with NullPointerException.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/lenya/trunk@39900 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/c3d8a70fecfc0dff46c47f8d3cd972dfb017fab0",
        "patched_files": [
            "FileUser.java"
        ],
        "repo": "lenya",
        "unit_tests": [
            "FileUserTest.java"
        ]
    },
    "lenya_6ab3f7a": {
        "bug_id": "lenya_6ab3f7a",
        "commit": "https://github.com/apache/lenya/commit/6ab3f7a37978c2bf4a91479bde794336a352ec09",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/lenya/blob/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/sitemanagement/java/src/org/apache/lenya/cms/metadata/usecases/Metadata.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules-core/sitemanagement/java/src/org/apache/lenya/cms/metadata/usecases/Metadata.java?ref=6ab3f7a37978c2bf4a91479bde794336a352ec09",
                "deletions": 1,
                "filename": "src/modules-core/sitemanagement/java/src/org/apache/lenya/cms/metadata/usecases/Metadata.java",
                "patch": "@@ -45,7 +45,10 @@\n      * @see org.apache.lenya.cms.usecase.AbstractUsecase#getNodesToLock()\n      */\n     protected Node[] getNodesToLock() throws UsecaseException {\n-        Node[] objects = { getSourceDocument().getRepositoryNode() };\n+        Node[] objects = new Node[0];\n+        if(getSourceDocument() != null) {\n+            objects = new Node[] { getSourceDocument().getRepositoryNode() };\n+        }\n         return objects;\n     }\n ",
                "raw_url": "https://github.com/apache/lenya/raw/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/sitemanagement/java/src/org/apache/lenya/cms/metadata/usecases/Metadata.java",
                "sha": "a19f41b8a650c26c33bc2447f92f6f2b2105a895",
                "status": "modified"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/lenya/blob/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/sitemanagement/java/src/org/apache/lenya/cms/site/usecases/MoveSubsite.java",
                "changes": 35,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules-core/sitemanagement/java/src/org/apache/lenya/cms/site/usecases/MoveSubsite.java?ref=6ab3f7a37978c2bf4a91479bde794336a352ec09",
                "deletions": 16,
                "filename": "src/modules-core/sitemanagement/java/src/org/apache/lenya/cms/site/usecases/MoveSubsite.java",
                "patch": "@@ -98,27 +98,30 @@ protected void doCheckPreconditions() throws Exception {\n      * changes to the site structure would compromise the operation.\n      */\n     protected Node[] getNodesToLock() throws UsecaseException {\n-        try {\n+        Set nodes = new HashSet();\n+  \n+        if(getSourceDocument() != null) {\n+            try {\n \n-            Set nodes = new HashSet();\n+                SiteStructure sourceSite = getSourceDocument().area().getSite();\n+                SiteStructure targetSite = getSourceDocument().getPublication()\n+                        .getArea(getTargetArea()).getSite();\n \n-            SiteStructure sourceSite = getSourceDocument().area().getSite();\n-            SiteStructure targetSite = getSourceDocument().getPublication()\n-                    .getArea(getTargetArea()).getSite();\n+                nodes.add(sourceSite.getRepositoryNode());\n+                nodes.add(targetSite.getRepositoryNode());\n \n-            nodes.add(sourceSite.getRepositoryNode());\n-            nodes.add(targetSite.getRepositoryNode());\n+                Document[] docs = SiteUtil.getSubSite(this.manager,\n+                        getSourceDocument().getLink().getNode()).getDocuments();\n+                for (int i = 0; i < docs.length; i++) {\n+                    nodes.add(docs[i].getRepositoryNode());\n+                }\n \n-            Document[] docs = SiteUtil.getSubSite(this.manager,\n-                    getSourceDocument().getLink().getNode()).getDocuments();\n-            for (int i = 0; i < docs.length; i++) {\n-                nodes.add(docs[i].getRepositoryNode());\n+            } catch (PublicationException e) {\n+                throw new UsecaseException(e);\n             }\n-\n-            return (Node[]) nodes.toArray(new Node[nodes.size()]);\n-        } catch (PublicationException e) {\n-            throw new UsecaseException(e);\n         }\n+ \n+        return (Node[]) nodes.toArray(new Node[nodes.size()]);\n     }\n \n     /**\n@@ -215,4 +218,4 @@ protected static String getParentPath(String path) {\n         return path.substring(0, path.lastIndexOf(\"/\"));\n     }\n \n-}\n\\ No newline at end of file\n+}",
                "raw_url": "https://github.com/apache/lenya/raw/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/sitemanagement/java/src/org/apache/lenya/cms/site/usecases/MoveSubsite.java",
                "sha": "4475477fb000b0d5be75bdbd5dc5d1c0fd74725c",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/lenya/blob/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/Deactivate.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/Deactivate.java?ref=6ab3f7a37978c2bf4a91479bde794336a352ec09",
                "deletions": 4,
                "filename": "src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/Deactivate.java",
                "patch": "@@ -86,9 +86,11 @@ protected void doCheckPreconditions() throws Exception {\n             List nodes = new ArrayList();\n \n             Document doc = getSourceDocument();\n-            Document liveDoc = doc.getAreaVersion(Publication.LIVE_AREA);\n-            nodes.add(liveDoc.getRepositoryNode());\n-            nodes.add(liveDoc.area().getSite().getRepositoryNode());\n+            if(doc != null) {\n+                Document liveDoc = doc.getAreaVersion(Publication.LIVE_AREA);\n+                nodes.add(liveDoc.getRepositoryNode());\n+                nodes.add(liveDoc.area().getSite().getRepositoryNode());\n+            }\n             return (org.apache.lenya.cms.repository.Node[]) nodes.toArray(new org.apache.lenya.cms.repository.Node[nodes.size()]);\n \n         } catch (Exception e) {\n@@ -201,4 +203,4 @@ public LinkList(ServiceManager manager, Document doc) {\n \n     }\n \n-}\n\\ No newline at end of file\n+}",
                "raw_url": "https://github.com/apache/lenya/raw/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/Deactivate.java",
                "sha": "84fa6bcf25cd4c45c3f7b21df43dc727a225f344",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/lenya/blob/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/InvokeWorkflow.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/InvokeWorkflow.java?ref=6ab3f7a37978c2bf4a91479bde794336a352ec09",
                "deletions": 2,
                "filename": "src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/InvokeWorkflow.java",
                "patch": "@@ -41,7 +41,10 @@\n      * @see org.apache.lenya.cms.usecase.AbstractUsecase#getNodesToLock()\n      */\n     protected Node[] getNodesToLock() throws UsecaseException {\n-        Node[] objects = { getSourceDocument().getRepositoryNode() };\n+        Node[] objects = new Node[0];\n+        if(getSourceDocument() != null) {\n+            objects = new Node[] { getSourceDocument().getRepositoryNode() };\n+        }\n         return objects;\n     }\n \n@@ -54,4 +57,4 @@ protected void doExecute() throws Exception {\n                 getEvent());\n     }\n \n-}\n\\ No newline at end of file\n+}",
                "raw_url": "https://github.com/apache/lenya/raw/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/InvokeWorkflow.java",
                "sha": "27718860a02b7452e0911ce1637afcdfdc8b7e68",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/lenya/blob/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/Publish.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/Publish.java?ref=6ab3f7a37978c2bf4a91479bde794336a352ec09",
                "deletions": 2,
                "filename": "src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/Publish.java",
                "patch": "@@ -133,8 +133,10 @@ protected boolean hasBrokenLinks() {\n             List nodes = new ArrayList();\n \n             Document doc = getSourceDocument();\n-            nodes.add(doc.getRepositoryNode());\n-            nodes.add(doc.area().getSite().getRepositoryNode());\n+            if(doc != null) {\n+                nodes.add(doc.getRepositoryNode());\n+                nodes.add(doc.area().getSite().getRepositoryNode());\n+            }\n \n             return (org.apache.lenya.cms.repository.Node[]) nodes\n                     .toArray(new org.apache.lenya.cms.repository.Node[nodes.size()]);",
                "raw_url": "https://github.com/apache/lenya/raw/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules-core/workflow/java/src/org/apache/lenya/cms/workflow/usecases/Publish.java",
                "sha": "91d9590e14a9f422f7674e5d0ac14982191b7f5b",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/lenya/blob/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules/sitetree/java/src/org/apache/lenya/cms/site/usecases/Nudge.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules/sitetree/java/src/org/apache/lenya/cms/site/usecases/Nudge.java?ref=6ab3f7a37978c2bf4a91479bde794336a352ec09",
                "deletions": 3,
                "filename": "src/modules/sitetree/java/src/org/apache/lenya/cms/site/usecases/Nudge.java",
                "patch": "@@ -104,8 +104,11 @@ protected void doCheckPreconditions() throws Exception {\n      * @see org.apache.lenya.cms.usecase.AbstractUsecase#getNodesToLock()\n      */\n     protected Node[] getNodesToLock() throws UsecaseException {\n-        Node node = getSourceDocument().area().getSite().getRepositoryNode();\n-        Node[] nodes = { node };\n+        Node[] nodes = new Node[0];\n+        if(getSourceDocument() != null) {\n+            Node node = getSourceDocument().area().getSite().getRepositoryNode();\n+            nodes = new Node[] { node };\n+        }\n         return nodes;\n     }\n \n@@ -150,4 +153,4 @@ protected void doExecute() throws Exception {\n         }\n \n     }\n-}\n\\ No newline at end of file\n+}",
                "raw_url": "https://github.com/apache/lenya/raw/6ab3f7a37978c2bf4a91479bde794336a352ec09/src/modules/sitetree/java/src/org/apache/lenya/cms/site/usecases/Nudge.java",
                "sha": "a679fb525c08804a78d73f1fcbb1441c68fad95d",
                "status": "modified"
            }
        ],
        "message": "Last changes to prevent NPEs when selecting authoring node under site tab.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/lenya/trunk@559063 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/e41efc2415df890373c182f00bcc54691819e623",
        "patched_files": [
            "MoveSubsite.java"
        ],
        "repo": "lenya",
        "unit_tests": [
            "MoveSubsiteTest.java"
        ]
    },
    "lenya_84e2ced": {
        "bug_id": "lenya_84e2ced",
        "commit": "https://github.com/apache/lenya/commit/84e2cedde53e39ef40a4d383dd549a2ed1bb892d",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/lenya/blob/84e2cedde53e39ef40a4d383dd549a2ed1bb892d/src/impl/java/org/apache/lenya/cms/publication/PublicationConfiguration.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/impl/java/org/apache/lenya/cms/publication/PublicationConfiguration.java?ref=84e2cedde53e39ef40a4d383dd549a2ed1bb892d",
                "deletions": 3,
                "filename": "src/impl/java/org/apache/lenya/cms/publication/PublicationConfiguration.java",
                "patch": "@@ -477,9 +477,11 @@ public boolean accept(File file) {\n                     return file.isDirectory() && !name.equals(\"rcml\") && !name.equals(\"rcbak\");\n                 }\n             });\n-            this.areas = new String[directories.length];\n-            for (int i = 0; i < directories.length; i++) {\n-                this.areas[i] = directories[i].getName();\n+            if (directories != null) {\n+                this.areas = new String[directories.length];\n+                for (int i = 0; i < directories.length; i++) {\n+                    this.areas[i] = directories[i].getName();\n+                }\n             }\n         }\n         return this.areas;",
                "raw_url": "https://github.com/apache/lenya/raw/84e2cedde53e39ef40a4d383dd549a2ed1bb892d/src/impl/java/org/apache/lenya/cms/publication/PublicationConfiguration.java",
                "sha": "302162aca45048dbff53441c93523568b5cccf54",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/lenya/blob/84e2cedde53e39ef40a4d383dd549a2ed1bb892d/src/modules/migration/java/test/org/apache/lenya/cms/migration/MigrateUuidsTest.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/modules/migration/java/test/org/apache/lenya/cms/migration/MigrateUuidsTest.java?ref=84e2cedde53e39ef40a4d383dd549a2ed1bb892d",
                "deletions": 3,
                "filename": "src/modules/migration/java/test/org/apache/lenya/cms/migration/MigrateUuidsTest.java",
                "patch": "@@ -67,9 +67,11 @@ private void migratePublication(Publication pub) throws Exception {\n         getLogger().info(\"Migrating publication [\" + pub.getId() + \"]\");\n \n         String[] areaNames = pub.getAreaNames();\n-        for (int i = 0; i < areaNames.length; i++) {\n-            Area area = pub.getArea(areaNames[i]);\n-            migrateArea(area);\n+        if (areaNames != null) {\n+            for (int i = 0; i < areaNames.length; i++) {\n+                Area area = pub.getArea(areaNames[i]);\n+                migrateArea(area);\n+            }\n         }\n     }\n ",
                "raw_url": "https://github.com/apache/lenya/raw/84e2cedde53e39ef40a4d383dd549a2ed1bb892d/src/modules/migration/java/test/org/apache/lenya/cms/migration/MigrateUuidsTest.java",
                "sha": "91546bba901226db02aed34cb4136b199cde8d0e",
                "status": "modified"
            }
        ],
        "message": "fixed some NPEs when migrating a pub with no areas (should skip pub, not give npe)\n\ngit-svn-id: https://svn.apache.org/repos/asf/lenya/trunk@438213 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/35d8498948614372e5a9976d8c5b06c274d137c1",
        "patched_files": [
            "PublicationConfiguration.java"
        ],
        "repo": "lenya",
        "unit_tests": [
            "MigrateUuidsTest.java"
        ]
    },
    "lenya_8b2f5c3": {
        "bug_id": "lenya_8b2f5c3",
        "commit": "https://github.com/apache/lenya/commit/8b2f5c3a05d47823d5d1dcc60a93dde124223498",
        "file": [
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/lenya/blob/8b2f5c3a05d47823d5d1dcc60a93dde124223498/src/java/org/apache/lenya/cms/publication/DefaultDocument.java",
                "changes": 11,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/java/org/apache/lenya/cms/publication/DefaultDocument.java?ref=8b2f5c3a05d47823d5d1dcc60a93dde124223498",
                "deletions": 4,
                "filename": "src/java/org/apache/lenya/cms/publication/DefaultDocument.java",
                "patch": "@@ -1,5 +1,5 @@\n /*\n-$Id: DefaultDocument.java,v 1.24 2003/08/13 09:57:31 egli Exp $\n+$Id: DefaultDocument.java,v 1.25 2003/08/13 15:05:59 egli Exp $\n <License>\n \n  ============================================================================\n@@ -187,9 +187,12 @@ public String getLanguage() {\n         SiteTree sitetree;\n         try {\n             sitetree = getPublication().getSiteTree(getArea());\n-            Label[] labels = sitetree.getNode(getId()).getLabels();\n-            for (int i = 0; i < labels.length; i++) {\n-                languages.add(labels[i].getLanguage());\n+            SiteTreeNode node = sitetree.getNode(getId());\n+            if (node != null) {\n+                Label[] labels = node.getLabels();\n+                for (int i = 0; i < labels.length; i++) {\n+                    languages.add(labels[i].getLanguage());\n+                }\n             }\n         } catch (SiteTreeException e) {\n             throw new DocumentException(e);",
                "raw_url": "https://github.com/apache/lenya/raw/8b2f5c3a05d47823d5d1dcc60a93dde124223498/src/java/org/apache/lenya/cms/publication/DefaultDocument.java",
                "sha": "f9409e73d8e39a441585bd4660608fbeef74a17a",
                "status": "modified"
            }
        ],
        "message": "Fix a nullPointerException by querying the node for != null\nbefore asking it for it's languages.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/lenya/trunk@40728 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/7fcb989e2420ea4608f45caf180262ae1a4396bb",
        "patched_files": [
            "DefaultDocument.java"
        ],
        "repo": "lenya",
        "unit_tests": [
            "DefaultDocumentTest.java"
        ]
    },
    "lenya_a65be31": {
        "bug_id": "lenya_a65be31",
        "commit": "https://github.com/apache/lenya/commit/a65be31aeb23ee3db823c5cc68e8722c30dc1e1f",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/lenya/blob/a65be31aeb23ee3db823c5cc68e8722c30dc1e1f/src/java/org/apache/lenya/cms/site/tree/SiteTreeNodeImpl.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/java/org/apache/lenya/cms/site/tree/SiteTreeNodeImpl.java?ref=a65be31aeb23ee3db823c5cc68e8722c30dc1e1f",
                "deletions": 2,
                "filename": "src/java/org/apache/lenya/cms/site/tree/SiteTreeNodeImpl.java",
                "patch": "@@ -202,8 +202,7 @@ public void removeLabel(Label label) {\n                 Node child = children.item(i);\n \n                 if ((child.getNodeType() == Node.ELEMENT_NODE)\n-                        && child.getNodeName().equals(LABEL_NAME)\n-                        && child.getFirstChild().getNodeValue().equals(label.getLabel())) {\n+                        && child.getNodeName().equals(LABEL_NAME)) {\n \n                     Node languageAttribute = child.getAttributes()\n                             .getNamedItem(LANGUAGE_ATTRIBUTE_NAME);",
                "raw_url": "https://github.com/apache/lenya/raw/a65be31aeb23ee3db823c5cc68e8722c30dc1e1f/src/java/org/apache/lenya/cms/site/tree/SiteTreeNodeImpl.java",
                "sha": "9d17668e0ba7192cba59d9a3b600870ea3656639",
                "status": "modified"
            }
        ],
        "message": "fixed NPE for empty sitetree node labels\n\ngit-svn-id: https://svn.apache.org/repos/asf/lenya/trunk@155316 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/51e791534aedcd9194479d18552cc4465590c54a",
        "patched_files": [
            "SiteTreeNodeImpl.java"
        ],
        "repo": "lenya",
        "unit_tests": [
            "SiteTreeNodeImplTest.java"
        ]
    },
    "lenya_cc8afb8": {
        "bug_id": "lenya_cc8afb8",
        "commit": "https://github.com/apache/lenya/commit/cc8afb8edfa19c03fca3c30177088f4546388b59",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/lenya/blob/cc8afb8edfa19c03fca3c30177088f4546388b59/src/test/org/apache/lenya/cms/rc/RevisionControllerTest.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/lenya/contents/src/test/org/apache/lenya/cms/rc/RevisionControllerTest.java?ref=cc8afb8edfa19c03fca3c30177088f4546388b59",
                "deletions": 1,
                "filename": "src/test/org/apache/lenya/cms/rc/RevisionControllerTest.java",
                "patch": "@@ -53,7 +53,7 @@ public static void main(String[] args) {\n         String source = args[1];\n         String identityD = args[2];\n         String destination = args[3];\n-        RevisionController rc = new RevisionController(\"\", \"\", \"\");\n+        RevisionController rc = new RevisionController(null, null, null);\n         try {\n             rc.reservedCheckOut(source, identityS);\n         } catch (FileNotFoundException e) // No such source file",
                "raw_url": "https://github.com/apache/lenya/raw/cc8afb8edfa19c03fca3c30177088f4546388b59/src/test/org/apache/lenya/cms/rc/RevisionControllerTest.java",
                "sha": "18df08fbd26ab9f96e0c98554fb7e4fc3318ecfb",
                "status": "modified"
            }
        ],
        "message": "use NULL to generate NPEs instead of FileNotFoundException\n\ngit-svn-id: https://svn.apache.org/repos/asf/lenya/trunk@123059 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/lenya/commit/88a8b5fd10d4b38ddff04f145ab014a220b4d3e2",
        "patched_files": [
            "RevisionController.java"
        ],
        "repo": "lenya",
        "unit_tests": [
            "RevisionControllerTest.java"
        ]
    }
}