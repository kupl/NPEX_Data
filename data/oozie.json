{
    "oozie_0533700": {
        "bug_id": "oozie_0533700",
        "commit": "https://github.com/apache/oozie/commit/05337002fc50d78750979dc15ecea5ad80c14931",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/oozie/blob/05337002fc50d78750979dc15ecea5ad80c14931/core/src/main/java/org/apache/oozie/action/hadoop/JavaActionExecutor.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/action/hadoop/JavaActionExecutor.java?ref=05337002fc50d78750979dc15ecea5ad80c14931",
                "deletions": 1,
                "filename": "core/src/main/java/org/apache/oozie/action/hadoop/JavaActionExecutor.java",
                "patch": "@@ -1410,7 +1410,11 @@ protected JobClient createJobClient(Context context, JobConf jobConf) throws Had\n     }\n \n     protected RunningJob getRunningJob(Context context, WorkflowAction action, JobClient jobClient) throws Exception{\n-        RunningJob runningJob = jobClient.getJob(JobID.forName(action.getExternalId()));\n+        String externalId = action.getExternalId();\n+        RunningJob runningJob = null;\n+        if (externalId != null) {\n+            runningJob = jobClient.getJob(JobID.forName(externalId));\n+        }\n         return runningJob;\n     }\n ",
                "raw_url": "https://github.com/apache/oozie/raw/05337002fc50d78750979dc15ecea5ad80c14931/core/src/main/java/org/apache/oozie/action/hadoop/JavaActionExecutor.java",
                "sha": "f315af77b9fc44be4810489a0dea0ff2c47d32f9",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/oozie/blob/05337002fc50d78750979dc15ecea5ad80c14931/core/src/main/java/org/apache/oozie/action/hadoop/MapReduceActionExecutor.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/action/hadoop/MapReduceActionExecutor.java?ref=05337002fc50d78750979dc15ecea5ad80c14931",
                "deletions": 5,
                "filename": "core/src/main/java/org/apache/oozie/action/hadoop/MapReduceActionExecutor.java",
                "patch": "@@ -335,12 +335,11 @@ public static void setStreaming(Configuration conf, String mapper, String reduce\n \n     @Override\n     protected RunningJob getRunningJob(Context context, WorkflowAction action, JobClient jobClient) throws Exception{\n-\n-        RunningJob runningJob;\n+        RunningJob runningJob = null;\n         String jobId = getActualExternalId(action);\n-\n-        runningJob = jobClient.getJob(JobID.forName(jobId));\n-\n+        if (jobId != null) {\n+            runningJob = jobClient.getJob(JobID.forName(jobId));\n+        }\n         return runningJob;\n     }\n ",
                "raw_url": "https://github.com/apache/oozie/raw/05337002fc50d78750979dc15ecea5ad80c14931/core/src/main/java/org/apache/oozie/action/hadoop/MapReduceActionExecutor.java",
                "sha": "55c937249ac35e14bd63dd0c1fa962ea636afa3a",
                "status": "modified"
            }
        ],
        "message": "OOZIE-2690 OOZIE NPE while executing kill() (abhishekbafna via jaydeepvishwakarma)",
        "parent": "https://github.com/apache/oozie/commit/1d54e476f7abe0317cffa526d9b42e21e2497fed",
        "repo": "oozie",
        "unit_tests": [
            "TestJavaActionExecutor.java",
            "TestMapReduceActionExecutor.java"
        ]
    },
    "oozie_48da5f2": {
        "bug_id": "oozie_48da5f2",
        "commit": "https://github.com/apache/oozie/commit/48da5f2e552e26192d1630b98a806d3c5753668e",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/client/src/main/java/org/apache/oozie/cli/OozieCLI.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/client/src/main/java/org/apache/oozie/cli/OozieCLI.java?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 1,
                "filename": "client/src/main/java/org/apache/oozie/cli/OozieCLI.java",
                "patch": "@@ -269,7 +269,8 @@ protected Options createJobsOptions() {\n         Option jobtype = new Option(JOBTYPE_OPTION, true,\n                 \"job type ('Supported in Oozie-2.0 or later versions ONLY - 'coordinator' or 'bundle' or 'wf'(default))\");\n         Option len = new Option(LEN_OPTION, true, \"number of jobs (default '100')\");\n-        Option filter = new Option(FILTER_OPTION, true, \"user=<U>;name=<N>;group=<G>;status=<S>;...\");\n+        Option filter = new Option(FILTER_OPTION, true, \"user=<U>;name=<N>;group=<G>;status=<S>;frequency=<F>;unit=<M> \" +\n+                        \"(Valid unit values are 'months', 'days', 'hours' or 'minutes'.)\");\n         Option localtime = new Option(LOCAL_TIME_OPTION, false, \"use local time (default GMT)\");\n         Option verbose = new Option(VERBOSE_OPTION, false, \"verbose mode\");\n         Option doAs = new Option(DO_AS_OPTION, true, \"doAs user, impersonates as the specified user\");",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/client/src/main/java/org/apache/oozie/cli/OozieCLI.java",
                "sha": "77fcdc1374de48d7cd97e1c78c6cca898d564359",
                "status": "modified"
            },
            {
                "additions": 20,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/LocalOozieClientCoord.java",
                "changes": 24,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/LocalOozieClientCoord.java?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 4,
                "filename": "core/src/main/java/org/apache/oozie/LocalOozieClientCoord.java",
                "patch": "@@ -6,9 +6,9 @@\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n- * \n+ *\n  *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n+ *\n  * Unless required by applicable law or agreed to in writing, software\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@@ -30,6 +30,9 @@\n import org.apache.oozie.client.WorkflowJob;\n import org.apache.oozie.client.rest.JsonCoordinatorAction;\n import org.apache.oozie.client.rest.JsonCoordinatorJob;\n+import org.apache.oozie.client.rest.RestConstants;\n+import org.apache.oozie.command.CommandException;\n+import org.apache.oozie.command.coord.CoordRerunXCommand;\n import org.apache.oozie.util.XConfiguration;\n \n /**\n@@ -252,15 +255,28 @@ public void reRun(String jobId, Properties conf) throws OozieClientException {\n     public List<CoordinatorAction> reRunCoord(String jobId, String rerunType, String scope, boolean refresh,\n             boolean noCleanup) throws OozieClientException {\n         try {\n+            if (!(rerunType.equals(RestConstants.JOB_COORD_RERUN_DATE) || rerunType\n+                    .equals(RestConstants.JOB_COORD_RERUN_ACTION))) {\n+                throw new CommandException(ErrorCode.E1018, \"date or action expected.\");\n+            }\n             CoordinatorActionInfo coordInfo = coordEngine.reRun(jobId, rerunType, scope, Boolean.valueOf(refresh),\n                     Boolean.valueOf(noCleanup));\n-            List<CoordinatorActionBean> actionBeans = coordInfo.getCoordActions();\n+            List<CoordinatorActionBean> actionBeans;\n+            if (coordInfo != null) {\n+                actionBeans = coordInfo.getCoordActions();\n+            }\n+            else {\n+                actionBeans = CoordRerunXCommand.getCoordActions(rerunType, jobId, scope);\n+            }\n             List<CoordinatorAction> actions = new ArrayList<CoordinatorAction>();\n             for (CoordinatorActionBean actionBean : actionBeans) {\n                 actions.add(actionBean);\n             }\n             return actions;\n         }\n+        catch(CommandException ce){\n+            throw new OozieClientException(ce.getErrorCode().toString(), ce);\n+        }\n         catch (BaseEngineException ex) {\n             throw new OozieClientException(ex.getErrorCode().toString(), ex);\n         }\n@@ -354,7 +370,7 @@ public CoordinatorJob getCoordJobInfo(String jobId) throws OozieClientException\n \n     /**\n      * Get the info of a coordinator action.\n-     * \n+     *\n      * @param actionId Id.\n      * @return the coordinator action info.\n      * @throws OozieClientException thrown if the job info could not be",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/LocalOozieClientCoord.java",
                "sha": "6a3dc1d94e1f5d11b7498fa4b197cc1ca66aea8c",
                "status": "modified"
            },
            {
                "additions": 25,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/command/coord/CoordRerunXCommand.java",
                "changes": 185,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/command/coord/CoordRerunXCommand.java?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 160,
                "filename": "core/src/main/java/org/apache/oozie/command/coord/CoordRerunXCommand.java",
                "patch": "@@ -6,9 +6,9 @@\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n- * \n+ *\n  *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n+ *\n  * Unless required by applicable law or agreed to in writing, software\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@@ -44,6 +44,7 @@\n import org.apache.oozie.command.RerunTransitionXCommand;\n import org.apache.oozie.command.bundle.BundleStatusUpdateXCommand;\n import org.apache.oozie.coord.CoordELFunctions;\n+import org.apache.oozie.coord.CoordUtils;\n import org.apache.oozie.executor.jpa.CoordActionGetJPAExecutor;\n import org.apache.oozie.executor.jpa.CoordJobGetActionForNominalTimeJPAExecutor;\n import org.apache.oozie.executor.jpa.CoordJobGetActionsForDatesJPAExecutor;\n@@ -102,159 +103,14 @@ public CoordRerunXCommand(String jobId, String rerunType, String scope, boolean\n         this.noCleanup = noCleanup;\n     }\n \n-    /**\n-     * Get the list of actions for given id ranges\n-     *\n-     * @param jobId coordinator job id\n-     * @param scope the id range to rerun separated by \",\"\n-     * @return the list of all actions to rerun\n-     * @throws CommandException thrown if failed to get coordinator actions by given id range\n-     */\n-    private List<CoordinatorActionBean> getCoordActionsFromIds(String jobId, String scope) throws CommandException {\n-        ParamChecker.notEmpty(jobId, \"jobId\");\n-        ParamChecker.notEmpty(scope, \"scope\");\n-\n-        Set<String> actions = new HashSet<String>();\n-        String[] list = scope.split(\",\");\n-        for (String s : list) {\n-            s = s.trim();\n-            if (s.contains(\"-\")) {\n-                String[] range = s.split(\"-\");\n-                if (range.length != 2) {\n-                    throw new CommandException(ErrorCode.E0302, \"format is wrong for action's range '\" + s + \"'\");\n-                }\n-                int start;\n-                int end;\n-                try {\n-                    start = Integer.parseInt(range[0].trim());\n-                    end = Integer.parseInt(range[1].trim());\n-                    if (start > end) {\n-                        throw new CommandException(ErrorCode.E0302, \"format is wrong for action's range '\" + s + \"'\");\n-                    }\n-                }\n-                catch (NumberFormatException ne) {\n-                    throw new CommandException(ErrorCode.E0302, ne);\n-                }\n-                for (int i = start; i <= end; i++) {\n-                    actions.add(jobId + \"@\" + i);\n-                }\n-            }\n-            else {\n-                try {\n-                    Integer.parseInt(s);\n-                }\n-                catch (NumberFormatException ne) {\n-                    throw new CommandException(ErrorCode.E0302, \"format is wrong for action id'\" + s\n-                            + \"'. Integer only.\");\n-                }\n-                actions.add(jobId + \"@\" + s);\n-            }\n-        }\n-\n-        List<CoordinatorActionBean> coordActions = new ArrayList<CoordinatorActionBean>();\n-        for (String id : actions) {\n-            CoordinatorActionBean coordAction;\n-            try {\n-                coordAction = jpaService.execute(new CoordActionGetJPAExecutor(id));\n-            }\n-            catch (JPAExecutorException je) {\n-                throw new CommandException(je);\n-            }\n-            coordActions.add(coordAction);\n-            LOG.debug(\"Rerun coordinator for actionId='\" + id + \"'\");\n-        }\n-        return coordActions;\n-    }\n-\n-    /**\n-     * Get the list of actions for given date ranges\n-     *\n-     * @param jobId coordinator job id\n-     * @param scope the date range to rerun separated by \",\"\n-     * @return the list of dates to rerun\n-     * @throws CommandException thrown if failed to get coordinator actions by given date range\n-     */\n-    private List<CoordinatorActionBean> getCoordActionsFromDates(String jobId, String scope) throws CommandException {\n-        ParamChecker.notEmpty(jobId, \"jobId\");\n-        ParamChecker.notEmpty(scope, \"scope\");\n-\n-        Set<CoordinatorActionBean> actionSet = new HashSet<CoordinatorActionBean>();\n-        String[] list = scope.split(\",\");\n-        for (String s : list) {\n-            s = s.trim();\n-            if (s.contains(\"::\")) {\n-                String[] dateRange = s.split(\"::\");\n-                if (dateRange.length != 2) {\n-                    throw new CommandException(ErrorCode.E0302, \"format is wrong for date's range '\" + s + \"'\");\n-                }\n-                Date start;\n-                Date end;\n-                try {\n-                    start = DateUtils.parseDateUTC(dateRange[0].trim());\n-                    end = DateUtils.parseDateUTC(dateRange[1].trim());\n-                    if (start.after(end)) {\n-                        throw new CommandException(ErrorCode.E0302, \"start date is older than end date: '\" + s + \"'\");\n-                    }\n-                }\n-                catch (Exception e) {\n-                    throw new CommandException(ErrorCode.E0302, e);\n-                }\n-\n-                List<CoordinatorActionBean> listOfActions = getActionIdsFromDateRange(jobId, start, end);\n-                actionSet.addAll(listOfActions);\n-            }\n-            else {\n-                try {\n-                    Date date = DateUtils.parseDateUTC(s.trim());\n-                    CoordinatorActionBean coordAction = jpaService\n-                            .execute(new CoordJobGetActionForNominalTimeJPAExecutor(jobId, date));\n-                    actionSet.add(coordAction);\n-                }\n-                catch (JPAExecutorException e) {\n-                    throw new CommandException(e);\n-                }\n-                catch (Exception e) {\n-                    throw new CommandException(ErrorCode.E0302, e);\n-                }\n-            }\n-        }\n-\n-        List<CoordinatorActionBean> coordActions = new ArrayList<CoordinatorActionBean>();\n-        for (CoordinatorActionBean coordAction : actionSet) {\n-            coordActions.add(coordAction);\n-            LOG.debug(\"Rerun coordinator for actionId='\" + coordAction.getId() + \"'\");\n-        }\n-        return coordActions;\n-    }\n-\n-    /**\n-     * Get coordinator action ids between given start and end time\n-     *\n-     * @param jobId coordinator job id\n-     * @param start start time\n-     * @param end end time\n-     * @return a list of coordinator actions belong to the range of start and end time\n-     * @throws CommandException thrown if failed to get coordinator actions\n-     */\n-    private List<CoordinatorActionBean> getActionIdsFromDateRange(String jobId, Date start, Date end)\n-            throws CommandException {\n-        List<CoordinatorActionBean> list;\n-        try {\n-            list = jpaService.execute(new CoordJobGetActionsForDatesJPAExecutor(jobId, start, end));\n-        }\n-        catch (JPAExecutorException je) {\n-            throw new CommandException(je);\n-        }\n-        return list;\n-    }\n-\n     /**\n      * Check if all given actions are eligible to rerun.\n      *\n      * @param actions list of CoordinatorActionBean\n      * @return true if all actions are eligible to rerun\n      */\n-    private boolean checkAllActionsRunnable(List<CoordinatorActionBean> coordActions) {\n+    private static boolean checkAllActionsRunnable(List<CoordinatorActionBean> coordActions) {\n+        ParamChecker.notNull(coordActions, \"Coord actions to be rerun\");\n         boolean ret = false;\n         for (CoordinatorActionBean coordAction : coordActions) {\n             ret = true;\n@@ -266,6 +122,25 @@ private boolean checkAllActionsRunnable(List<CoordinatorActionBean> coordActions\n         return ret;\n     }\n \n+    /**\n+     * Get the list of actions for a given coordinator job\n+     * @param rerunType the rerun type (date, action)\n+     * @param jobId the coordinator job id\n+     * @param scope the date scope or action id scope\n+     * @return the list of Coordinator actions\n+     * @throws CommandException\n+     */\n+    public static List<CoordinatorActionBean> getCoordActions(String rerunType, String jobId, String scope) throws CommandException{\n+        List<CoordinatorActionBean> coordActions = null;\n+        if (rerunType.equals(RestConstants.JOB_COORD_RERUN_DATE)) {\n+            coordActions = CoordUtils.getCoordActionsFromDates(jobId, scope);\n+        }\n+        else if (rerunType.equals(RestConstants.JOB_COORD_RERUN_ACTION)) {\n+            coordActions = CoordUtils.getCoordActionsFromIds(jobId, scope);\n+        }\n+        return coordActions;\n+    }\n+\n     /**\n      * Cleanup output-events directories\n      *\n@@ -436,17 +311,7 @@ public void rerunChildren() throws CommandException {\n         try {\n             CoordinatorActionInfo coordInfo = null;\n             InstrumentUtils.incrJobCounter(getName(), 1, getInstrumentation());\n-            List<CoordinatorActionBean> coordActions;\n-            if (rerunType.equals(RestConstants.JOB_COORD_RERUN_DATE)) {\n-                coordActions = getCoordActionsFromDates(jobId, scope);\n-            }\n-            else if (rerunType.equals(RestConstants.JOB_COORD_RERUN_ACTION)) {\n-                coordActions = getCoordActionsFromIds(jobId, scope);\n-            }\n-            else {\n-                isError = true;\n-                throw new CommandException(ErrorCode.E1018, \"date or action expected.\");\n-            }\n+            List<CoordinatorActionBean> coordActions = getCoordActions(rerunType, jobId, scope);\n             if (checkAllActionsRunnable(coordActions)) {\n                 for (CoordinatorActionBean coordAction : coordActions) {\n                     String actionXml = coordAction.getActionXml();",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/command/coord/CoordRerunXCommand.java",
                "sha": "09f247353ba850c20c422ba69ac30c1bc376890f",
                "status": "modified"
            },
            {
                "additions": 150,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/coord/CoordUtils.java",
                "changes": 152,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/coord/CoordUtils.java?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 2,
                "filename": "core/src/main/java/org/apache/oozie/coord/CoordUtils.java",
                "patch": "@@ -6,9 +6,9 @@\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n- * \n+ *\n  *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n+ *\n  * Unless required by applicable law or agreed to in writing, software\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@@ -17,8 +17,26 @@\n  */\n package org.apache.oozie.coord;\n \n+import java.text.ParseException;\n+import java.util.ArrayList;\n+import java.util.Date;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n import org.apache.hadoop.conf.Configuration;\n+import org.apache.oozie.CoordinatorActionBean;\n+import org.apache.oozie.ErrorCode;\n+import org.apache.oozie.XException;\n import org.apache.oozie.client.OozieClient;\n+import org.apache.oozie.command.CommandException;\n+import org.apache.oozie.executor.jpa.CoordActionGetJPAExecutor;\n+import org.apache.oozie.executor.jpa.CoordJobGetActionForNominalTimeJPAExecutor;\n+import org.apache.oozie.executor.jpa.JPAExecutorException;\n+import org.apache.oozie.service.JPAService;\n+import org.apache.oozie.service.Services;\n+import org.apache.oozie.util.CoordActionsInDateRange;\n+import org.apache.oozie.util.DateUtils;\n import org.apache.oozie.util.ParamChecker;\n import org.jdom.Element;\n \n@@ -45,4 +63,134 @@ public static Configuration getHadoopConf(Configuration jobConf) {\n         conf.set(HADOOP_UGI, user + \",\" + group);\n         return conf;\n     }\n+\n+    /**\n+     * Get the list of actions for given date ranges\n+     *\n+     * @param jobId coordinator job id\n+     * @param scope a comma-separated list of date ranges. Each date range element is specified with two dates separated by '::'\n+     * @return the list of Coordinator actions for the date range\n+     * @throws CommandException thrown if failed to get coordinator actions by given date range\n+     */\n+    public static List<CoordinatorActionBean> getCoordActionsFromDates(String jobId, String scope) throws CommandException {\n+        JPAService jpaService = Services.get().get(JPAService.class);\n+        ParamChecker.notEmpty(jobId, \"jobId\");\n+        ParamChecker.notEmpty(scope, \"scope\");\n+\n+        Set<CoordinatorActionBean> actionSet = new HashSet<CoordinatorActionBean>();\n+        String[] list = scope.split(\",\");\n+        for (String s : list) {\n+            s = s.trim();\n+            // A date range is specified with two dates separated by '::'\n+            if (s.contains(\"::\")) {\n+            List<CoordinatorActionBean> listOfActions;\n+            try {\n+                // Get list of actions within the range of date\n+                listOfActions = CoordActionsInDateRange.getCoordActionsFromDateRange(jobId, s);\n+            }\n+            catch (XException e) {\n+                throw new CommandException(e);\n+            }\n+            actionSet.addAll(listOfActions);\n+            }\n+            else {\n+                try {\n+                    // Get action for the nominal time\n+                    Date date = DateUtils.parseDateUTC(s.trim());\n+                    CoordinatorActionBean coordAction = jpaService\n+                            .execute(new CoordJobGetActionForNominalTimeJPAExecutor(jobId, date));\n+\n+                    if (coordAction != null) {\n+                        actionSet.add(coordAction);\n+                    }\n+                    else {\n+                        throw new RuntimeException(\"This should never happen, Coordinator Action shouldn't be null\");\n+                    }\n+                }\n+                catch (ParseException e) {\n+                    throw new CommandException(ErrorCode.E0302, e);\n+                }\n+                catch (JPAExecutorException e) {\n+                    throw new CommandException(e);\n+                }\n+\n+            }\n+        }\n+\n+        List<CoordinatorActionBean> coordActions = new ArrayList<CoordinatorActionBean>();\n+        for (CoordinatorActionBean coordAction : actionSet) {\n+            coordActions.add(coordAction);\n+        }\n+        return coordActions;\n+    }\n+\n+    /**\n+     * Get the list of actions for given id ranges\n+     *\n+     * @param jobId coordinator job id\n+     * @param scope a comma-separated list of action ranges. The action range is specified with two action numbers separated by '-'\n+     * @return the list of all Coordinator actions for action range\n+     * @throws CommandException thrown if failed to get coordinator actions by given id range\n+     */\n+     public static List<CoordinatorActionBean> getCoordActionsFromIds(String jobId, String scope) throws CommandException {\n+        JPAService jpaService = Services.get().get(JPAService.class);\n+        ParamChecker.notEmpty(jobId, \"jobId\");\n+        ParamChecker.notEmpty(scope, \"scope\");\n+\n+        Set<String> actions = new HashSet<String>();\n+        String[] list = scope.split(\",\");\n+        for (String s : list) {\n+            s = s.trim();\n+            // An action range is specified with two actions separated by '-'\n+            if (s.contains(\"-\")) {\n+                String[] range = s.split(\"-\");\n+                // Check the format for action's range\n+                if (range.length != 2) {\n+                    throw new CommandException(ErrorCode.E0302, \"format is wrong for action's range '\" + s + \"', an example of correct format is 1-5\");\n+                }\n+                int start;\n+                int end;\n+                try {\n+                    //Get the starting and ending action numbers\n+                    start = Integer.parseInt(range[0].trim());\n+                    end = Integer.parseInt(range[1].trim());\n+                    if (start > end) {\n+                        throw new CommandException(ErrorCode.E0302, \"format is wrong for action's range '\" + s\n+                                + \"', starting action number of the range should be less than ending action number, an example will be 1-4\");\n+                    }\n+                }\n+                catch (NumberFormatException ne) {\n+                    throw new CommandException(ErrorCode.E0302, ne);\n+                }\n+                // Add the actionIds\n+                for (int i = start; i <= end; i++) {\n+                    actions.add(jobId + \"@\" + i);\n+                }\n+            }\n+            else {\n+                try {\n+                    Integer.parseInt(s);\n+                }\n+                catch (NumberFormatException ne) {\n+                    throw new CommandException(ErrorCode.E0302, \"format is wrong for action id'\" + s\n+                            + \"'. Integer only.\");\n+                }\n+                actions.add(jobId + \"@\" + s);\n+            }\n+        }\n+        // Retrieve the actions using the corresponding actionIds\n+        List<CoordinatorActionBean> coordActions = new ArrayList<CoordinatorActionBean>();\n+        for (String id : actions) {\n+            CoordinatorActionBean coordAction;\n+            try {\n+                coordAction = jpaService.execute(new CoordActionGetJPAExecutor(id));\n+            }\n+            catch (JPAExecutorException je) {\n+                throw new CommandException(je);\n+            }\n+            coordActions.add(coordAction);\n+        }\n+        return coordActions;\n+    }\n+\n }",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/coord/CoordUtils.java",
                "sha": "8e5ef1ec3714eafa20c07ff2e169bbc749150975",
                "status": "modified"
            },
            {
                "additions": 18,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/servlet/JobServlet.java",
                "changes": 21,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/servlet/JobServlet.java?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 3,
                "filename": "core/src/main/java/org/apache/oozie/servlet/JobServlet.java",
                "patch": "@@ -6,9 +6,9 @@\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n- * \n+ *\n  *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n+ *\n  * Unless required by applicable law or agreed to in writing, software\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@@ -37,6 +37,8 @@\n import org.apache.oozie.client.rest.JsonTags;\n import org.apache.oozie.client.rest.JsonWorkflowJob;\n import org.apache.oozie.client.rest.RestConstants;\n+import org.apache.oozie.command.CommandException;\n+import org.apache.oozie.command.coord.CoordRerunXCommand;\n import org.apache.oozie.service.AuthorizationException;\n import org.apache.oozie.service.AuthorizationService;\n import org.apache.oozie.service.CoordinatorEngineService;\n@@ -128,9 +130,19 @@ else if (action.equals(RestConstants.JOB_COORD_ACTION_RERUN)) {\n                 String scope = request.getParameter(RestConstants.JOB_COORD_RERUN_SCOPE_PARAM);\n                 String refresh = request.getParameter(RestConstants.JOB_COORD_RERUN_REFRESH_PARAM);\n                 String noCleanup = request.getParameter(RestConstants.JOB_COORD_RERUN_NOCLEANUP_PARAM);\n+                if (!(rerunType.equals(RestConstants.JOB_COORD_RERUN_DATE) || rerunType\n+                        .equals(RestConstants.JOB_COORD_RERUN_ACTION))) {\n+                    throw new CommandException(ErrorCode.E1018, \"date or action expected.\");\n+                }\n                 CoordinatorActionInfo coordInfo = coordEngine.reRun(jobId, rerunType, scope, Boolean.valueOf(refresh),\n                         Boolean.valueOf(noCleanup));\n-                List<CoordinatorActionBean> actions = coordInfo.getCoordActions();\n+                List<CoordinatorActionBean> actions;\n+                if (coordInfo != null) {\n+                    actions = coordInfo.getCoordActions();\n+                }\n+                else {\n+                    actions = CoordRerunXCommand.getCoordActions(rerunType, jobId, scope);\n+                }\n                 JSONObject json = new JSONObject();\n                 json.put(JsonTags.COORDINATOR_ACTIONS, CoordinatorActionBean.toJSONArray(actions));\n                 startCron();\n@@ -141,6 +153,9 @@ else if (action.equals(RestConstants.JOB_COORD_ACTION_RERUN)) {\n                         RestConstants.ACTION_PARAM, action);\n             }\n         }\n+        catch (CommandException ex) {\n+            throw new XServletException(HttpServletResponse.SC_BAD_REQUEST, ex);\n+        }\n         catch (DagEngineException ex) {\n             throw new XServletException(HttpServletResponse.SC_BAD_REQUEST, ex);\n         }",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/servlet/JobServlet.java",
                "sha": "b97a7164ef471e48583cbb894606f24984cb9579",
                "status": "modified"
            },
            {
                "additions": 21,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/servlet/V1JobServlet.java",
                "changes": 25,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/servlet/V1JobServlet.java?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 4,
                "filename": "core/src/main/java/org/apache/oozie/servlet/V1JobServlet.java",
                "patch": "@@ -6,9 +6,9 @@\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n- * \n+ *\n  *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n+ *\n  * Unless required by applicable law or agreed to in writing, software\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@@ -33,6 +33,8 @@\n import org.apache.oozie.CoordinatorEngine;\n import org.apache.oozie.CoordinatorEngineException;\n import org.apache.oozie.command.CommandException;\n+import org.apache.oozie.command.coord.CoordRerunXCommand;\n+import org.apache.oozie.coord.CoordUtils;\n import org.apache.oozie.DagEngine;\n import org.apache.oozie.DagEngineException;\n import org.apache.oozie.ErrorCode;\n@@ -614,18 +616,33 @@ private JSONObject reRunCoordinatorActions(HttpServletRequest request, HttpServl\n                         + refresh + \", noCleanup=\" + noCleanup);\n \n         try {\n+            if (!(rerunType.equals(RestConstants.JOB_COORD_RERUN_DATE) || rerunType\n+                    .equals(RestConstants.JOB_COORD_RERUN_ACTION))) {\n+                throw new CommandException(ErrorCode.E1018, \"date or action expected.\");\n+            }\n             CoordinatorActionInfo coordInfo = coordEngine.reRun(jobId, rerunType, scope, Boolean.valueOf(refresh),\n                     Boolean.valueOf(noCleanup));\n-            List<CoordinatorActionBean> actions = coordInfo.getCoordActions();\n-            json.put(JsonTags.COORDINATOR_ACTIONS, CoordinatorActionBean.toJSONArray(actions));\n+            List<CoordinatorActionBean> coordActions;\n+            if (coordInfo != null) {\n+                coordActions = coordInfo.getCoordActions();\n+            }\n+            else {\n+                coordActions = CoordRerunXCommand.getCoordActions(rerunType, jobId, scope);\n+            }\n+            json.put(JsonTags.COORDINATOR_ACTIONS, CoordinatorActionBean.toJSONArray(coordActions));\n         }\n         catch (BaseEngineException ex) {\n             throw new XServletException(HttpServletResponse.SC_BAD_REQUEST, ex);\n         }\n+        catch (CommandException ex) {\n+            throw new XServletException(HttpServletResponse.SC_BAD_REQUEST, ex);\n+        }\n \n         return json;\n     }\n \n+\n+\n     /**\n      * Get workflow job\n      *",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/servlet/V1JobServlet.java",
                "sha": "eda84496d8fdcb807f4aa87bf9c9ec12efa0773a",
                "status": "modified"
            },
            {
                "additions": 32,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/util/CoordActionsInDateRange.java",
                "changes": 50,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/util/CoordActionsInDateRange.java?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 18,
                "filename": "core/src/main/java/org/apache/oozie/util/CoordActionsInDateRange.java",
                "patch": "@@ -18,6 +18,7 @@\n \n package org.apache.oozie.util;\n \n+import java.text.ParseException;\n import java.util.ArrayList;\n import java.util.Date;\n import java.util.HashSet;\n@@ -59,25 +60,8 @@\n         String[] list = scope.split(\",\");\n         for (String s : list) {\n             s = s.trim();\n-            // This block checks for errors in the format of specifying date range\n             if (s.contains(\"::\")) {\n-                String[] dateRange = s.split(\"::\");\n-                if (dateRange.length != 2) {\n-                    throw new XException(ErrorCode.E0308, \"'\" + s + \"'. Date value expected on both sides of the scope resolution operator '::' to signify start and end of range\");\n-                }\n-                Date start;\n-                Date end;\n-                try {\n-                start = DateUtils.parseDateUTC(dateRange[0].trim());\n-                end = DateUtils.parseDateUTC(dateRange[1].trim());\n-                }\n-                catch (Exception dx) {\n-                    throw new XException(ErrorCode.E0308, \"Error in parsing start or end date\");\n-                }\n-                if (start.after(end)) {\n-                    throw new XException(ErrorCode.E0308, \"'\" + s + \"'. Start date '\" + start + \"' is older than end date: '\" + end + \"'\");\n-                }\n-                List<CoordinatorActionBean> listOfActions = getActionIdsFromDateRange(jobId, start, end);\n+                List<CoordinatorActionBean> listOfActions = getCoordActionsFromDateRange(jobId, s);\n                 actionSet.addAll(listOfActions);\n             }\n             else {\n@@ -91,6 +75,36 @@\n         return coordActions;\n     }\n \n+    /**\n+     * Get the coordinator actions for a given date range\n+     * @param jobId the coordinator job id\n+     * @param range the date range separated by '::'\n+     * @return the list of Coordinator actions for the date range\n+     * @throws XException\n+     */\n+    public static List<CoordinatorActionBean> getCoordActionsFromDateRange(String jobId, String range) throws XException{\n+            String[] dateRange = range.split(\"::\");\n+            // This block checks for errors in the format of specifying date range\n+            if (dateRange.length != 2) {\n+                throw new XException(ErrorCode.E0308, \"'\" + range + \"'. Date value expected on both sides of the scope resolution operator '::' to signify start and end of range\");\n+            }\n+            Date start;\n+            Date end;\n+            try {\n+            // Get the start and end dates for the range\n+                start = DateUtils.parseDateUTC(dateRange[0].trim());\n+                end = DateUtils.parseDateUTC(dateRange[1].trim());\n+            }\n+            catch (ParseException dx) {\n+                throw new XException(ErrorCode.E0308, \"Error in parsing start or end date. \" + dx);\n+            }\n+            if (start.after(end)) {\n+                throw new XException(ErrorCode.E0308, \"'\" + range + \"'. Start date '\" + start + \"' is older than end date: '\" + end + \"'\");\n+            }\n+            List<CoordinatorActionBean> listOfActions = getActionIdsFromDateRange(jobId, start, end);\n+            return listOfActions;\n+    }\n+\n     /*\n      * Get coordinator action ids between given start and end time\n      *",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/util/CoordActionsInDateRange.java",
                "sha": "93751f8aa9608768dccdf9153d9684f576e849b5",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/util/DateUtils.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/util/DateUtils.java?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 4,
                "filename": "core/src/main/java/org/apache/oozie/util/DateUtils.java",
                "patch": "@@ -6,9 +6,9 @@\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n- * \n+ *\n  *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n+ *\n  * Unless required by applicable law or agreed to in writing, software\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@@ -19,6 +19,7 @@\n \n import java.sql.Timestamp;\n import java.text.DateFormat;\n+import java.text.ParseException;\n import java.text.ParsePosition;\n import java.text.SimpleDateFormat;\n import java.util.Calendar;\n@@ -101,7 +102,7 @@ private static DateFormat getISO8601DateFormat() {\n         dateFormat.setTimeZone(UTC);\n         return dateFormat;\n     }\n-    \n+\n     private static DateFormat getSpecificDateFormat(String format) {\n         DateFormat dateFormat = new SimpleDateFormat(format);\n         dateFormat.setTimeZone(UTC);\n@@ -119,7 +120,7 @@ public static TimeZone getTimeZone(String tzId) {\n         return tz;\n     }\n \n-    public static Date parseDateUTC(String s) throws Exception {\n+    public static Date parseDateUTC(String s) throws ParseException {\n         return getISO8601DateFormat().parse(s);\n     }\n ",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/main/java/org/apache/oozie/util/DateUtils.java",
                "sha": "a38d6ca38bf7314e5b427d0f86c470a97a1b26d1",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/test/java/org/apache/oozie/command/coord/TestCoordRerunXCommand.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/test/java/org/apache/oozie/command/coord/TestCoordRerunXCommand.java?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 2,
                "filename": "core/src/test/java/org/apache/oozie/command/coord/TestCoordRerunXCommand.java",
                "patch": "@@ -6,9 +6,9 @@\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n- * \n+ *\n  *      http://www.apache.org/licenses/LICENSE-2.0\n- * \n+ *\n  * Unless required by applicable law or agreed to in writing, software\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@@ -554,6 +554,7 @@ public void testCoordRerunRefresh() throws Exception {\n         store2.closeTrx();\n \n         waitFor(120 * 1000, new Predicate() {\n+            @Override\n             public boolean evaluate() throws Exception {\n                 CoordinatorAction bean = coordClient.getCoordActionInfo(actionId);\n                 return (bean.getStatus() == CoordinatorAction.Status.READY || bean.getStatus() == CoordinatorAction.Status.SUBMITTED);\n@@ -623,6 +624,7 @@ public void testCoordRerunCleanup() throws Exception {\n         store2.closeTrx();\n \n         waitFor(120 * 1000, new Predicate() {\n+            @Override\n             public boolean evaluate() throws Exception {\n                 CoordinatorAction bean = coordClient.getCoordActionInfo(actionId);\n                 return (bean.getStatus() == CoordinatorAction.Status.WAITING || bean.getStatus() == CoordinatorAction.Status.READY);\n@@ -667,6 +669,7 @@ public void testCoordRerunCleanupNoOutputEvents() throws Exception {\n         store2.commitTrx();\n         store2.closeTrx();\n         waitFor(120 * 1000, new Predicate() {\n+            @Override\n             public boolean evaluate() throws Exception {\n                 CoordinatorAction bean = coordClient.getCoordActionInfo(actionId);\n                 return (bean.getStatus() == CoordinatorAction.Status.WAITING || bean.getStatus() == CoordinatorAction.Status.READY);",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/core/src/test/java/org/apache/oozie/command/coord/TestCoordRerunXCommand.java",
                "sha": "459d4737a1ebaa5d89c8c6c1a80f379d73b4f318",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/docs/src/site/twiki/DG_CommandLineTool.twiki",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/docs/src/site/twiki/DG_CommandLineTool.twiki?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 1,
                "filename": "docs/src/site/twiki/DG_CommandLineTool.twiki",
                "patch": "@@ -491,9 +491,11 @@ Valid filter names are:\n    * user: the user that submitted the job.\n    * group: the group for the job.\n    * status: the status of the job.\n+   * frequency: the frequency of the Coordinator job.\n+   * unit: the time unit. It can take one of the following four values: months, days, hours or minutes. Time unit should be added only when frequency is specified.\n \n The query will do an AND among all the filter names. The query will do an OR among all the filter values for the same\n-name. Multiple values must be specified as different  name value pairs.\n+name. Multiple values must be specified as different name value pairs.\n \n ---+++ Checking the Status of multiple Coordinator Jobs\n ",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/docs/src/site/twiki/DG_CommandLineTool.twiki",
                "sha": "bcc33b784b4f2c5314d4c7c4439709a05014ddfa",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/docs/src/site/twiki/DG_CoordinatorRerun.twiki",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/docs/src/site/twiki/DG_CoordinatorRerun.twiki?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 1,
                "filename": "docs/src/site/twiki/DG_CoordinatorRerun.twiki",
                "patch": "@@ -43,7 +43,7 @@ $oozie job -rerun <coord_Job_id> [-nocleanup] [-refresh]\n    * Rerun for job, user should use job's start date and end date in -date.\n    * If the user specifies a date range (say Jan 1 to May 1), the actions that will be re-run are the existing actions\n      within that range.  If the existing actions are action #5....#40, which map to Jan 15 to Feb 15, then only those actions will run.\n-   * When rerun succeeds, the rerun action_id and nominal_time will be return.\n+   * The rerun action_id and nominal_time of the actions which are eligible to rerun will be returned.\n \n [[index][::Go back to Oozie Documentation Index::]]\n ",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/docs/src/site/twiki/DG_CoordinatorRerun.twiki",
                "sha": "cd593d17c014e8f6da764ff4dfff459b6ef5d2ae",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/oozie/blob/48da5f2e552e26192d1630b98a806d3c5753668e/release-log.txt",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/release-log.txt?ref=48da5f2e552e26192d1630b98a806d3c5753668e",
                "deletions": 0,
                "filename": "release-log.txt",
                "patch": "@@ -1,5 +1,7 @@\n -- Oozie 3.2.0 release\n \n+OOZIE-651: Coordinator rerun fails due to NPE in some cases.(Virag via Mohammad)\n+OOZIE-655: Information added to Oozie help.(Virag via Mohammad)\n OOZIE-642: Year support in dateOffset() El function.(Virag via Mohammad)\n OOZIE-652 Add proxyuser capabilities to Oozie HTTP API. (tucu)\n OOZIE-591: Oozie continues to materialize new actions after end date modification (Mohamed Battisha vis Angelo)",
                "raw_url": "https://github.com/apache/oozie/raw/48da5f2e552e26192d1630b98a806d3c5753668e/release-log.txt",
                "sha": "55d0c4111ae8b4517d02232c127e700f1e50ce2c",
                "status": "modified"
            }
        ],
        "message": "OOZIE-651: Coordinator rerun fails due to NPE in some cases.(Virag via Mohammad).OOZIE-655: Information added to Oozie help.(Virag via Mohammad)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/oozie/trunk@1235163 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/oozie/commit/a036914e0e11a617511ce7e48e676f6b8fab7eaf",
        "repo": "oozie",
        "unit_tests": [
            "TestOozieCLI.java",
            "TestLocalOozieClientCoord.java",
            "TestCoordRerunXCommand.java",
            "TestCoordUtils.java",
            "TestV1JobServlet.java",
            "TestCoordActionsInDateRange.java",
            "TestDateUtils.java"
        ]
    },
    "oozie_54a2f69": {
        "bug_id": "oozie_54a2f69",
        "commit": "https://github.com/apache/oozie/commit/54a2f6932111b7883396668201ddae220127c68c",
        "file": [
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/oozie/blob/54a2f6932111b7883396668201ddae220127c68c/bin/createjpaconf.sh",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/bin/createjpaconf.sh?ref=54a2f6932111b7883396668201ddae220127c68c",
                "deletions": 1,
                "filename": "bin/createjpaconf.sh",
                "patch": "@@ -70,7 +70,6 @@ CONNECTSTRING=\"DriverClassName=${DriverClassName},Url=${Url},Username=${USERNAME\n #create persistence.xml\n mkdir ${SCRIPT_DIR}/tmp\n cat << EOF-persistence.xml > ${SCRIPT_DIR}/tmp/persistence.xml\n-exit\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <!--\n  Licensed to the Apache Software Foundation (ASF) under one",
                "raw_url": "https://github.com/apache/oozie/raw/54a2f6932111b7883396668201ddae220127c68c/bin/createjpaconf.sh",
                "sha": "32e51f7efa635687c2bbc5b5fce59f78a91e329e",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/oozie/blob/54a2f6932111b7883396668201ddae220127c68c/client/src/main/bin/oozie",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/client/src/main/bin/oozie?ref=54a2f6932111b7883396668201ddae220127c68c",
                "deletions": 1,
                "filename": "client/src/main/bin/oozie",
                "patch": "@@ -1,4 +1,4 @@\n-#!/bin/sh\n+#!/bin/bash\n \n # resolve links - $0 may be a softlink\n PRG=\"${0}\"",
                "raw_url": "https://github.com/apache/oozie/raw/54a2f6932111b7883396668201ddae220127c68c/client/src/main/bin/oozie",
                "sha": "a23dfbcf38d425d3e8a5dd440d604f6e02d68fe5",
                "status": "modified"
            },
            {
                "additions": 28,
                "blob_url": "https://github.com/apache/oozie/blob/54a2f6932111b7883396668201ddae220127c68c/core/src/test/java/org/apache/oozie/test/XTestCase.java",
                "changes": 38,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/test/java/org/apache/oozie/test/XTestCase.java?ref=54a2f6932111b7883396668201ddae220127c68c",
                "deletions": 10,
                "filename": "core/src/test/java/org/apache/oozie/test/XTestCase.java",
                "patch": "@@ -21,10 +21,11 @@\n import org.apache.commons.logging.LogFactory;\n import org.apache.oozie.CoordinatorActionBean;\n import org.apache.oozie.CoordinatorJobBean;\n+import org.apache.oozie.WorkflowActionBean;\n+import org.apache.oozie.WorkflowJobBean;\n import org.apache.oozie.util.ParamChecker;\n import org.apache.oozie.util.XLog;\n import org.apache.oozie.util.db.Schema.Table;\n-import org.apache.oozie.service.ConfigurationService;\n import org.apache.oozie.service.StoreService;\n import org.apache.oozie.service.DBLiteWorkflowStoreService;\n import org.apache.oozie.service.WorkflowAppService;\n@@ -452,24 +453,41 @@ protected void cleanUpDBTables() throws StoreException {\n         CoordinatorStore store = new CoordinatorStore(false);\n         EntityManager entityManager = store.getEntityManager();\n         store.beginTrx();\n-        Query q = entityManager.createNamedQuery(\"GET_COORD_JOBS\");\n-        List<CoordinatorJobBean> coordBeans = q.getResultList();\n-        int jSize = coordBeans.size();\n-        for (CoordinatorJobBean w : coordBeans) {\n+\n+        Query q = entityManager.createNamedQuery(\"GET_WORKFLOWS\");\n+        List<WorkflowJobBean> wfjBeans = q.getResultList();\n+        int wfjSize = wfjBeans.size();\n+        for (WorkflowJobBean w : wfjBeans) {\n+            entityManager.remove(w);\n+        }\n+\n+        q = entityManager.createNamedQuery(\"GET_ACTIONS\");\n+        List<WorkflowActionBean> wfaBeans = q.getResultList();\n+        int wfaSize = wfaBeans.size();\n+        for (WorkflowActionBean w : wfaBeans) {\n+            entityManager.remove(w);\n+        }\n+\n+        q = entityManager.createNamedQuery(\"GET_COORD_JOBS\");\n+        List<CoordinatorJobBean> cojBeans = q.getResultList();\n+        int cojSize = cojBeans.size();\n+        for (CoordinatorJobBean w : cojBeans) {\n             entityManager.remove(w);\n         }\n \n         q = entityManager.createNamedQuery(\"GET_COORD_ACTIONS\");\n-        List<CoordinatorActionBean> caBeans = q.getResultList();\n-        int aSize = caBeans.size();\n-        for (CoordinatorActionBean w : caBeans) {\n+        List<CoordinatorActionBean> coaBeans = q.getResultList();\n+        int coaSize = coaBeans.size();\n+        for (CoordinatorActionBean w : coaBeans) {\n             entityManager.remove(w);\n         }\n \n         store.commitTrx();\n         store.closeTrx();\n-        log.info(jSize + \" entries in COORD_JOBS have removed from DB!\");\n-        log.info(aSize + \" entries in COORD_ACTIONS have removed from DB!\");\n+        log.info(wfjSize + \" entries in WF_JOBS have removed from DB!\");\n+        log.info(wfaSize + \" entries in WF_ACTIONS have removed from DB!\");\n+        log.info(cojSize + \" entries in COORD_JOBS have removed from DB!\");\n+        log.info(coaSize + \" entries in COORD_ACTIONS have removed from DB!\");\n     }\n \n     private static MiniDFSCluster dfsCluster = null;",
                "raw_url": "https://github.com/apache/oozie/raw/54a2f6932111b7883396668201ddae220127c68c/core/src/test/java/org/apache/oozie/test/XTestCase.java",
                "sha": "014e581b4127220c33f277732b0b960dfffd142c",
                "status": "modified"
            },
            {
                "additions": 9,
                "blob_url": "https://github.com/apache/oozie/blob/54a2f6932111b7883396668201ddae220127c68c/core/src/test/resources/META-INF/persistence.xml",
                "changes": 44,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/test/resources/META-INF/persistence.xml?ref=54a2f6932111b7883396668201ddae220127c68c",
                "deletions": 35,
                "filename": "core/src/test/resources/META-INF/persistence.xml",
                "patch": "@@ -7,19 +7,19 @@\n  to you under the Apache License, Version 2.0 (the\n  \"License\"); you may not use this file except in compliance\n  with the License.  You may obtain a copy of the License at\n- \n+\n  http://www.apache.org/licenses/LICENSE-2.0\n- \n+\n  Unless required by applicable law or agreed to in writing,\n  software distributed under the License is distributed on an\n  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  KIND, either express or implied.  See the License for the\n  specific language governing permissions and limitations\n- under the License.   \n+ under the License.\n -->\n <persistence xmlns=\"http://java.sun.com/xml/ns/persistence\"\n-             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n-             version=\"1.0\">\n+    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+    version=\"1.0\">\n \n     <!--\n         We need to enumerate each persistent class first in the persistence.xml\n@@ -67,37 +67,11 @@\n                 happen to be commented out here since the provided examples\n                 all specify the values via System properties.\n             -->\n-\n-            <!--property name=\"openjpa.ConnectionURL\" \n-                value=\"jdbc:mysql://localhost:3306/oozie\"/-->\n-            <!--property name=\"openjpa.ConnectionDriverName\" \n-                value=\"com.mysql.jdbc.Driver\"/-->\n-            <!--property name=\"openjpa.ConnectionUserName\" \n-                value=\"root\"/>\n-            <property name=\"openjpa.ConnectionPassword\" \n-                value=\"\"/-->\n-            <!--\n-                        <property name=\"openjpa.ConnectionURL\"\n-                            value=\"jdbc:derby:openjpa-database;create=true\"/>\n-                        <property name=\"openjpa.ConnectionDriverName\"\n-                            value=\"org.apache.derby.jdbc.EmbeddedDriver\"/>\n-                        <property name=\"openjpa.ConnectionUserName\"\n-                            value=\"user\"/>\n-                        <property name=\"openjpa.ConnectionPassword\"\n-                            value=\"secret\"/>\n-            -->\n-            <property name=\"openjpa.ConnectionURL\"\n-                      value=\"jdbc:hsqldb:mem/oozie;create=true\"/>\n-            <property name=\"openjpa.ConnectionDriverName\"\n-                      value=\"org.hsqldb.jdbcDriver\"/>\n-            <property name=\"openjpa.ConnectionUserName\"\n-                      value=\"sa\"/>\n-            <property name=\"openjpa.ConnectionPassword\"\n-                      value=\"\"/>\n-            <!--\n             <property name=\"openjpa.ConnectionDriverName\" value=\"org.apache.commons.dbcp.BasicDataSource\"/>\n-            <property name=\"openjpa.ConnectionProperties\" value=\"DriverClassName=oracle.jdbc.driver.OracleDriver,Url=jdbc:oracle:thin:@LOCALHOST:10001:BLUEDEV3,Username=oozie,Password=oozie,MaxActive=100\"/>\n-            <property name=\"openjpa.ConnectionProperties\" value=\"DriverClassName=com.mysql.jdbc.Driver,Url=jdbc:mysql://localhost:3306/oozie,Username=root,Password=,MaxActive=100\"/>            \n+            <property name=\"openjpa.ConnectionProperties\" value=\"DriverClassName=org.hsqldb.jdbcDriver,Url=jdbc:hsqldb:mem/oozie;create=true,Username=sa,Password=,MaxActive=100\"/>\n+            <!--\n+            <property name=\"openjpa.ConnectionProperties\" value=\"DriverClassName=oracle.jdbc.driver.OracleDriver,Url=jdbc:oracle:thin:@LOCALHOST:10001:BLUEDEV3,Username=oozie4,Password=oozie4,MaxActive=100\"/>\n+            <property name=\"openjpa.ConnectionProperties\" value=\"DriverClassName=com.mysql.jdbc.Driver,Url=jdbc:mysql://localhost:3306/oozie,Username=root,Password=,MaxActive=100\"/>\n             -->\n             <property name=\"openjpa.jdbc.SynchronizeMappings\" value=\"buildSchema(ForeignKeys=true)\"/>\n             <property name=\"openjpa.jdbc.DBDictionary\" value=\"UseGetBytesForBlobs=true\"/>",
                "raw_url": "https://github.com/apache/oozie/raw/54a2f6932111b7883396668201ddae220127c68c/core/src/test/resources/META-INF/persistence.xml",
                "sha": "c9b100f14bb9ee50af08e2c14a6cf7f12953411c",
                "status": "modified"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/oozie/blob/54a2f6932111b7883396668201ddae220127c68c/core/src/test/resources/wordcount-simple_Linux-i386-32_h20",
                "changes": 0,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/test/resources/wordcount-simple_Linux-i386-32_h20?ref=54a2f6932111b7883396668201ddae220127c68c",
                "deletions": 0,
                "filename": "core/src/test/resources/wordcount-simple_Linux-i386-32_h20",
                "raw_url": "https://github.com/apache/oozie/raw/54a2f6932111b7883396668201ddae220127c68c/core/src/test/resources/wordcount-simple_Linux-i386-32_h20",
                "sha": "75217c2a62e10ce0168f1d8bcd96e0298a907e22",
                "status": "modified"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/oozie/blob/54a2f6932111b7883396668201ddae220127c68c/webapp/pom.xml",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/webapp/pom.xml?ref=54a2f6932111b7883396668201ddae220127c68c",
                "deletions": 4,
                "filename": "webapp/pom.xml",
                "patch": "@@ -46,10 +46,6 @@\n                     <groupId>commons-cli</groupId>\n                     <artifactId>commons-cli</artifactId>\n                 </exclusion>\n-                <exclusion>\n-                    <groupId>log4j</groupId>\n-                    <artifactId>log4j</artifactId>\n-                </exclusion>\n                 <exclusion>\n                     <groupId>commons-httpclient</groupId>\n                     <artifactId>commons-httpclient</artifactId>",
                "raw_url": "https://github.com/apache/oozie/raw/54a2f6932111b7883396668201ddae220127c68c/webapp/pom.xml",
                "sha": "80a5e087da3c835fbdf08969a0626e5988620396",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/oozie/blob/54a2f6932111b7883396668201ddae220127c68c/webapp/src/main/resources/META-INF/persistence.xml",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/webapp/src/main/resources/META-INF/persistence.xml?ref=54a2f6932111b7883396668201ddae220127c68c",
                "deletions": 2,
                "filename": "webapp/src/main/resources/META-INF/persistence.xml",
                "patch": "@@ -1,4 +1,3 @@\n-exit\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <!--\n  Licensed to the Apache Software Foundation (ASF) under one\n@@ -70,7 +69,7 @@ exit\n             -->\n             <property name=\"openjpa.ConnectionDriverName\" value=\"org.apache.oozie.util.db.InstrumentedBasicDataSource\"/>\n \n-            <property name=\"openjpa.ConnectionProperties\" value=\"DriverClassName=org.hsqldb.jdbcDriver,Url=jdbc:hsqldb:mem/local;create=true,Username=root,Password=,MaxActive=100\"/>\n+            <property name=\"openjpa.ConnectionProperties\" value=\"DriverClassName=org.hsqldb.jdbcDriver,Url=jdbc:hsqldb:mem/oozie;create=true,Username=sa,Password=,MaxActive=100\"/>\n             <property name=\"openjpa.MetaDataFactory\" value=\"jpa(Types=org.apache.oozie.WorkflowActionBean;\n                 org.apache.oozie.WorkflowJobBean;\n                 org.apache.oozie.CoordinatorJobBean;",
                "raw_url": "https://github.com/apache/oozie/raw/54a2f6932111b7883396668201ddae220127c68c/webapp/src/main/resources/META-INF/persistence.xml",
                "sha": "87762b2be699413f79185fecfcc2e1ba7b6979e6",
                "status": "modified"
            }
        ],
        "message": "fixing NPEs by purging DB contents in XTestCase\nrecompiled binary wordcount for pipes testcase\nadding missing log4j dependency\ncorrections in the HSQL persistence information\n\nFrom: Alejandro Abdelnur <tucu00@gmail.com>\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/oozie/trunk@1168564 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/oozie/commit/9501311af7a50904c7eabee1fa1a9053c17234ac",
        "repo": "oozie",
        "unit_tests": [
            "TestXTestCase.java"
        ]
    },
    "oozie_6b9ed57": {
        "bug_id": "oozie_6b9ed57",
        "commit": "https://github.com/apache/oozie/commit/6b9ed571e599ca7edb3827f9e002660f9b769b3c",
        "file": [
            {
                "additions": 8,
                "blob_url": "https://github.com/apache/oozie/blob/6b9ed571e599ca7edb3827f9e002660f9b769b3c/core/src/main/java/org/apache/oozie/command/coord/CoordActionMissingDependenciesXCommand.java",
                "changes": 15,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/command/coord/CoordActionMissingDependenciesXCommand.java?ref=6b9ed571e599ca7edb3827f9e002660f9b769b3c",
                "deletions": 7,
                "filename": "core/src/main/java/org/apache/oozie/command/coord/CoordActionMissingDependenciesXCommand.java",
                "patch": "@@ -107,19 +107,20 @@ protected void verifyPrecondition() throws CommandException, PreconditionExcepti\n     @Override\n     protected List<Pair<CoordinatorActionBean, Map<String, ActionDependency>>> execute() throws CommandException {\n \n-        List<Pair<CoordinatorActionBean, Map<String, ActionDependency>>> inputDependenciesListPair =\n+        final List<Pair<CoordinatorActionBean, Map<String, ActionDependency>>> inputDependenciesListPair =\n                 new ArrayList<Pair<CoordinatorActionBean, Map<String, ActionDependency>>>();\n         try {\n \n-            for (CoordinatorActionBean coordAction : coordActions) {\n-                CoordInputDependency coordPullInputDependency = coordAction.getPullInputDependencies();\n-                CoordInputDependency coordPushInputDependency = coordAction.getPushInputDependencies();\n-                Map<String, ActionDependency> dependencyMap = new HashMap<String, ActionDependency>();\n+            for (final CoordinatorActionBean coordAction : coordActions) {\n+                final CoordInputDependency coordPullInputDependency = coordAction.getPullInputDependencies();\n+                final CoordInputDependency coordPushInputDependency = coordAction.getPushInputDependencies();\n+                final Map<String, ActionDependency> dependencyMap = new HashMap<>();\n                 dependencyMap.putAll(coordPullInputDependency.getMissingDependencies(coordAction));\n                 dependencyMap.putAll(coordPushInputDependency.getMissingDependencies(coordAction));\n \n-                inputDependenciesListPair.add(\n-                        new Pair<CoordinatorActionBean, Map<String, ActionDependency>>(coordAction, dependencyMap));\n+                if (!dependencyMap.isEmpty()) {\n+                    inputDependenciesListPair.add(new Pair<>(coordAction, dependencyMap));\n+                }\n             }\n         }\n         catch (Exception e) {",
                "raw_url": "https://github.com/apache/oozie/raw/6b9ed571e599ca7edb3827f9e002660f9b769b3c/core/src/main/java/org/apache/oozie/command/coord/CoordActionMissingDependenciesXCommand.java",
                "sha": "f5d87824d0fd4502cace932d409c39a7b03d5046",
                "status": "modified"
            },
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/oozie/blob/6b9ed571e599ca7edb3827f9e002660f9b769b3c/core/src/main/java/org/apache/oozie/coord/input/dependency/CoordOldInputDependency.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/coord/input/dependency/CoordOldInputDependency.java?ref=6b9ed571e599ca7edb3827f9e002660f9b769b3c",
                "deletions": 0,
                "filename": "core/src/main/java/org/apache/oozie/coord/input/dependency/CoordOldInputDependency.java",
                "patch": "@@ -370,6 +370,11 @@ public boolean checkUnresolved(CoordinatorActionBean coordAction, Element eActio\n \n         Element eAction = XmlUtils.parseXml(coordAction.getActionXml());\n         Element inputList = eAction.getChild(\"input-events\", eAction.getNamespace());\n+\n+        if (inputList == null || inputList.getChildren().isEmpty()) {\n+            return dependenciesMap;\n+        }\n+\n         List<Element> eDataEvents = inputList.getChildren(\"data-in\", eAction.getNamespace());\n         for (Element event : eDataEvents) {\n             Element uri = event.getChild(\"uris\", event.getNamespace());",
                "raw_url": "https://github.com/apache/oozie/raw/6b9ed571e599ca7edb3827f9e002660f9b769b3c/core/src/main/java/org/apache/oozie/coord/input/dependency/CoordOldInputDependency.java",
                "sha": "af298b99d34cbcb7d03939fdb9c2e4e73c96ea43",
                "status": "modified"
            },
            {
                "additions": 154,
                "blob_url": "https://github.com/apache/oozie/blob/6b9ed571e599ca7edb3827f9e002660f9b769b3c/core/src/test/java/org/apache/oozie/coord/input/dependency/TestCoordOldInputDependency.java",
                "changes": 154,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/test/java/org/apache/oozie/coord/input/dependency/TestCoordOldInputDependency.java?ref=6b9ed571e599ca7edb3827f9e002660f9b769b3c",
                "deletions": 0,
                "filename": "core/src/test/java/org/apache/oozie/coord/input/dependency/TestCoordOldInputDependency.java",
                "patch": "@@ -0,0 +1,154 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.oozie.coord.input.dependency;\n+\n+import org.apache.oozie.CoordinatorActionBean;\n+import org.apache.oozie.client.CoordinatorAction;\n+import org.apache.oozie.command.CommandException;\n+import org.apache.oozie.service.Services;\n+import org.apache.oozie.test.XHCatTestCase;\n+import org.jdom.JDOMException;\n+\n+import java.io.IOException;\n+\n+public class TestCoordOldInputDependency extends XHCatTestCase {\n+    private Services services;\n+\n+    @Override\n+    protected void setUp() throws Exception {\n+        super.setUp();\n+        services = super.setupServicesForHCatalog();\n+        services.init();\n+    }\n+\n+    @Override\n+    protected void tearDown() throws Exception {\n+        services.destroy();\n+        super.tearDown();\n+    }\n+\n+    public void testNoMissingInputDependencies() throws JDOMException, IOException, CommandException {\n+        final CoordinatorActionBean actionWithoutInputDependencies = createActionWithoutInputDependencies();\n+\n+        assertEquals(\"there should be no missing dependencies\",\n+                0,\n+                actionWithoutInputDependencies\n+                        .getPullInputDependencies()\n+                        .getMissingDependencies(actionWithoutInputDependencies).size());\n+    }\n+\n+    public void testOneMissingInputDependency() throws JDOMException, IOException, CommandException {\n+        final CoordinatorActionBean actionWithInputDependencies = createActionWithInputDependencies();\n+\n+        assertEquals(\"there should be one missing dependency\",\n+                1,\n+                actionWithInputDependencies\n+                        .getPullInputDependencies()\n+                        .getMissingDependencies(actionWithInputDependencies).size());\n+    }\n+\n+    private CoordinatorActionBean createActionWithoutInputDependencies() {\n+        final CoordinatorActionBean coordinatorAction = createAction();\n+\n+        coordinatorAction.setActionXml(\"<coordinator-app xmlns=\\\"uri:oozie:coordinator:0.2\\\" name=\\\"cron-coord\\\"\" +\n+                \" frequency=\\\"0/10 * * * *\\\" timezone=\\\"UTC\\\" freq_timeunit=\\\"CRON\\\" end_of_duration=\\\"NONE\\\"\" +\n+                \" instance-number=\\\"1\\\" action-nominal-time=\\\"2010-01-01T00:00Z\\\" action-actual-time=\\\"2018-11-29T12:55Z\\\">\\n\" +\n+                \"  <action>\\n\" +\n+                \"    <workflow>\\n\" +\n+                \"      <app-path>hdfs://localhost:9000/user/forsage/examples/apps/cron-schedule</app-path>\\n\" +\n+                \"      <configuration>\\n\" +\n+                \"        <property>\\n\" +\n+                \"          <name>resourceManager</name>\\n\" +\n+                \"          <value>localhost:8032</value>\\n\" +\n+                \"        </property>\\n\" +\n+                \"        <property>\\n\" +\n+                \"          <name>nameNode</name>\\n\" +\n+                \"          <value>hdfs://localhost:9000</value>\\n\" +\n+                \"        </property>\\n\" +\n+                \"        <property>\\n\" +\n+                \"          <name>queueName</name>\\n\" +\n+                \"          <value>default</value>\\n\" +\n+                \"        </property>\\n\" +\n+                \"      </configuration>\\n\" +\n+                \"    </workflow>\\n\" +\n+                \"  </action>\\n\" +\n+                \"</coordinator-app>\");\n+\n+        return coordinatorAction;\n+    }\n+\n+    private CoordinatorActionBean createAction() {\n+        final CoordinatorActionBean coordinatorAction = new CoordinatorActionBean();\n+\n+        coordinatorAction.setId(\"0000001-181129135145907-oozie-fors-C@1\");\n+        coordinatorAction.setJobId(\"0000001-181129135145907-oozie-fors-C\");\n+        coordinatorAction.setStatus(CoordinatorAction.Status.SUCCEEDED);\n+        coordinatorAction.setExternalId(\"0000002-181129135145907-oozie-fors-W\");\n+\n+        return coordinatorAction;\n+    }\n+\n+    private CoordinatorActionBean createActionWithInputDependencies() throws IOException {\n+        final CoordinatorActionBean action = createAction();\n+\n+        action.setActionXml(\"<coordinator-app xmlns=\\\"uri:oozie:coordinator:0.2\\\" name=\\\"cron-coord\\\"\" +\n+                \" frequency=\\\"0/10 * * * *\\\" timezone=\\\"UTC\\\" freq_timeunit=\\\"CRON\\\" end_of_duration=\\\"NONE\\\"\" +\n+                \" instance-number=\\\"1\\\" action-nominal-time=\\\"2010-01-01T00:00Z\\\" action-actual-time=\\\"2018-11-29T12:55Z\\\">\\n\" +\n+                \"    <datasets>\\n\" +\n+                \"        <dataset name=\\\"data-1\\\" frequency=\\\"${coord:minutes(20)}\\\" initial-instance=\\\"2010-01-01T00:00Z\\\">\\n\" +\n+                \"            <uri-template>${nameNode}/${YEAR}/${MONTH}/${DAY}/${HOUR}/${MINUTE}</uri-template>\\n\" +\n+                \"        </dataset>\\n\" +\n+                \"    </datasets>\\n\" +\n+                \"    <input-events>\\n\" +\n+                \"        <data-in name=\\\"input-1\\\" dataset=\\\"data-1\\\">\\n\" +\n+                \"            <start-instance>${coord:current(-2)}</start-instance>\\n\" +\n+                \"            <end-instance>${coord:current(0)}</end-instance>\\n\" +\n+                \"        </data-in>\\n\" +\n+                \"    </input-events>\\n\" +\n+                \"  <action>\\n\" +\n+                \"    <workflow>\\n\" +\n+                \"      <app-path>hdfs://localhost:9000/user/forsage/examples/apps/cron-schedule</app-path>\\n\" +\n+                \"      <configuration>\\n\" +\n+                \"        <property>\\n\" +\n+                \"          <name>resourceManager</name>\\n\" +\n+                \"          <value>localhost:8032</value>\\n\" +\n+                \"        </property>\\n\" +\n+                \"        <property>\\n\" +\n+                \"          <name>nameNode</name>\\n\" +\n+                \"          <value>hdfs://localhost:9000</value>\\n\" +\n+                \"        </property>\\n\" +\n+                \"        <property>\\n\" +\n+                \"          <name>queueName</name>\\n\" +\n+                \"          <value>default</value>\\n\" +\n+                \"        </property>\\n\" +\n+                \"      </configuration>\\n\" +\n+                \"    </workflow>\\n\" +\n+                \"  </action>\\n\" +\n+                \"</coordinator-app>\");\n+\n+        final CoordInputDependency coordPullInputDependency = CoordInputDependencyFactory\n+                .createPullInputDependencies(true);\n+        coordPullInputDependency.addUnResolvedList(\"data-1\", \"data-1\");\n+\n+        action.setMissingDependencies(coordPullInputDependency.serialize());\n+        action.setPullInputDependencies(coordPullInputDependency);\n+\n+        return action;\n+    }\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/oozie/raw/6b9ed571e599ca7edb3827f9e002660f9b769b3c/core/src/test/java/org/apache/oozie/coord/input/dependency/TestCoordOldInputDependency.java",
                "sha": "c6bd3c07e9f3579056321712deb4e5b086a58cd6",
                "status": "added"
            },
            {
                "additions": 16,
                "blob_url": "https://github.com/apache/oozie/blob/6b9ed571e599ca7edb3827f9e002660f9b769b3c/core/src/test/java/org/apache/oozie/servlet/TestV2JobServlet.java",
                "changes": 25,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/test/java/org/apache/oozie/servlet/TestV2JobServlet.java?ref=6b9ed571e599ca7edb3827f9e002660f9b769b3c",
                "deletions": 9,
                "filename": "core/src/test/java/org/apache/oozie/servlet/TestV2JobServlet.java",
                "patch": "@@ -19,7 +19,6 @@\n package org.apache.oozie.servlet;\n \n import org.apache.oozie.client.CoordinatorWfAction;\n-import org.apache.oozie.client.OozieClient;\n import org.apache.oozie.client.rest.RestConstants;\n import org.apache.oozie.client.rest.JsonTags;\n import org.apache.oozie.service.ConfigurationService;\n@@ -117,13 +116,20 @@ public Void call() throws Exception {\n                 url = createURL(MockCoordinatorEngineService.JOB_ID + (MockCoordinatorEngineService.coordJobs.size() + 1), params);\n                 conn = (HttpURLConnection) url.openConnection();\n                 conn.setRequestMethod(\"GET\");\n-                assertEquals(HttpServletResponse.SC_BAD_REQUEST, conn.getResponseCode());\n+                assertBadRequestOrInternalServerError(conn.getResponseCode());\n                 assertEquals(RestConstants.JOB_SHOW_INFO, MockCoordinatorEngineService.did);\n                 return null;\n             }\n         });\n     }\n \n+    private void assertBadRequestOrInternalServerError(final int responseCode) {\n+        assertTrue(String.format(\"HTTP response code [%d] is unexpected, should be one of [%d, %d]\",\n+                            responseCode, HttpServletResponse.SC_BAD_REQUEST, HttpServletResponse.SC_INTERNAL_SERVER_ERROR),\n+                HttpServletResponse.SC_BAD_REQUEST == responseCode\n+                || HttpServletResponse.SC_INTERNAL_SERVER_ERROR == responseCode);\n+    }\n+\n     public void testGetCoordActionReruns() throws Exception {\n         runTest(\"/v2/job/*\", V1JobServlet.class, IS_SECURITY_ENABLED, new Callable<Void>() {\n             @Override\n@@ -180,7 +186,7 @@ public Void call() throws Exception {\n                 conn.setRequestMethod(\"PUT\");\n                 conn.setRequestProperty(\"content-type\", RestConstants.XML_CONTENT_TYPE);\n                 conn.setDoOutput(true);\n-                assertEquals(HttpServletResponse.SC_BAD_REQUEST, conn.getResponseCode());\n+                assertBadRequestOrInternalServerError(conn.getResponseCode());\n                 assertEquals(RestConstants.JOB_ACTION_CHANGE, MockCoordinatorEngineService.did);\n \n                 return null;\n@@ -219,7 +225,7 @@ public Void call() throws Exception {\n                 conn.setRequestMethod(\"PUT\");\n                 conn.setRequestProperty(\"content-type\", RestConstants.XML_CONTENT_TYPE);\n                 conn.setDoOutput(true);\n-                assertEquals(HttpServletResponse.SC_BAD_REQUEST, conn.getResponseCode());\n+                assertBadRequestOrInternalServerError(conn.getResponseCode());\n                 assertEquals(RestConstants.JOB_ACTION_IGNORE, MockCoordinatorEngineService.did);\n \n                 return null;\n@@ -313,7 +319,7 @@ public Void call() throws Exception {\n                 URL url = createURL(MockCoordinatorEngineService.JOB_ID + 1, params);\n                 HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n                 conn.setRequestMethod(\"GET\");\n-                assertEquals(HttpServletResponse.SC_BAD_REQUEST, conn.getResponseCode());\n+                assertBadRequestOrInternalServerError(conn.getResponseCode());\n \n                 return null;\n             }\n@@ -334,7 +340,7 @@ public Void call() throws Exception {\n                 URL url = createURL(MockCoordinatorEngineService.JOB_ID + 1, params);\n                 HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n                 conn.setRequestMethod(\"GET\");\n-                assertEquals(HttpServletResponse.SC_BAD_REQUEST, conn.getResponseCode());\n+                assertBadRequestOrInternalServerError(conn.getResponseCode());\n \n                 return null;\n             }\n@@ -355,7 +361,7 @@ public Void call() throws Exception {\n                 URL url = createURL(MockCoordinatorEngineService.JOB_ID + 1, params);\n                 HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n                 conn.setRequestMethod(\"GET\");\n-                assertEquals(HttpServletResponse.SC_BAD_REQUEST, conn.getResponseCode());\n+                assertBadRequestOrInternalServerError(conn.getResponseCode());\n \n                 return null;\n             }\n@@ -419,7 +425,7 @@ public Void call() throws Exception {\n                 URL url = createURL(MockCoordinatorEngineService.JOB_ID + 1, params);\n                 HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n                 conn.setRequestMethod(\"GET\");\n-                assertEquals(HttpServletResponse.SC_BAD_REQUEST, conn.getResponseCode());\n+                assertBadRequestOrInternalServerError(conn.getResponseCode());\n \n                 return null;\n             }\n@@ -440,7 +446,8 @@ public Void call() throws Exception {\n                 URL url = createURL(MockCoordinatorEngineService.JOB_ID + 1, params);\n                 HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n                 conn.setRequestMethod(\"GET\");\n-                assertEquals(HttpServletResponse.SC_BAD_REQUEST, conn.getResponseCode());\n+                assertBadRequestOrInternalServerError(conn.getResponseCode());\n+\n                 return null;\n             }\n         });",
                "raw_url": "https://github.com/apache/oozie/raw/6b9ed571e599ca7edb3827f9e002660f9b769b3c/core/src/test/java/org/apache/oozie/servlet/TestV2JobServlet.java",
                "sha": "b42421d5656588131b8f4914bddd2af9a5f1ebd1",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/oozie/blob/6b9ed571e599ca7edb3827f9e002660f9b769b3c/release-log.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/release-log.txt?ref=6b9ed571e599ca7edb3827f9e002660f9b769b3c",
                "deletions": 0,
                "filename": "release-log.txt",
                "patch": "@@ -1,5 +1,6 @@\n -- Oozie 5.2.0 release (trunk - unreleased)\n \n+OOZIE-3389 Getting input dependency list on the UI throws NPE (andras.piros via asalamon74, kmarton)\n OOZIE-3382 [SSH action] [SSH action] Optimize process streams draining (asalamon74 via andras.piros)\n OOZIE-3384 [tests] TestWorkflowActionRetryInfoXCommand#testRetryConsoleUrlForked() is flaky (asalamon74 via kmarton)\n OOZIE-3386 Misleading error message when workflow application does not exist (kmarton)",
                "raw_url": "https://github.com/apache/oozie/raw/6b9ed571e599ca7edb3827f9e002660f9b769b3c/release-log.txt",
                "sha": "56900177a581907da6783c02d8503bb633a532c3",
                "status": "modified"
            }
        ],
        "message": "OOZIE-3389 Getting input dependency list on the UI throws NPE (andras.piros via asalamon74, kmarton)",
        "parent": "https://github.com/apache/oozie/commit/8013a945f16b5a10ad1fdd898ea10fcdb838117e",
        "repo": "oozie",
        "unit_tests": [
            "TestCoordActionMissingDependenciesXCommand.java",
            "TestCoordOldInputDependency.java"
        ]
    },
    "oozie_a94011b": {
        "bug_id": "oozie_a94011b",
        "commit": "https://github.com/apache/oozie/commit/a94011bcb0717c73cd3aff2f1a2c017f416e345a",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/oozie/blob/a94011bcb0717c73cd3aff2f1a2c017f416e345a/core/src/main/java/org/apache/oozie/action/hadoop/JavaActionExecutor.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/action/hadoop/JavaActionExecutor.java?ref=a94011bcb0717c73cd3aff2f1a2c017f416e345a",
                "deletions": 2,
                "filename": "core/src/main/java/org/apache/oozie/action/hadoop/JavaActionExecutor.java",
                "patch": "@@ -1252,10 +1252,10 @@ public void check(Context context, WorkflowAction action) throws ActionExecutorE\n                             Properties props = PropertiesUtils.stringToProperties(actionData\n                                     .get(LauncherMapper.ACTION_DATA_ERROR_PROPS));\n                             String errorCode = props.getProperty(\"error.code\");\n-                            if (errorCode.equals(\"0\")) {\n+                            if (\"0\".equals(errorCode)) {\n                                 errorCode = \"JA018\";\n                             }\n-                            if (errorCode.equals(\"-1\")) {\n+                            if (\"-1\".equals(errorCode)) {\n                                 errorCode = \"JA019\";\n                             }\n                             errorReason = props.getProperty(\"error.reason\");",
                "raw_url": "https://github.com/apache/oozie/raw/a94011bcb0717c73cd3aff2f1a2c017f416e345a/core/src/main/java/org/apache/oozie/action/hadoop/JavaActionExecutor.java",
                "sha": "8cc1a8976cac2d7d4acca7df8190a4cdc66a1cae",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/oozie/blob/a94011bcb0717c73cd3aff2f1a2c017f416e345a/release-log.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/release-log.txt?ref=a94011bcb0717c73cd3aff2f1a2c017f416e345a",
                "deletions": 0,
                "filename": "release-log.txt",
                "patch": "@@ -9,6 +9,7 @@ OOZIE-1943 Bump up trunk to 4.2.0-SNAPSHOT (bzhang)\n \n -- Oozie 4.1.0 release (4.1 - unreleased)\n \n+OOZIE-1945 NPE in JaveActionExecutor#check() (sree2k via rkanter)\n OOZIE-1984 SLACalculator in HA mode performs duplicate operations on records with completed jobs (mona)\n OOZIE-1958 address duplication of env variables in oozie.launcher.yarn.app.mapreduce.am.env when running with uber mode (ryota)\n OOZIE-1920 Capture Output for SSH Action doesn't work (Richard Williams via rkanter)",
                "raw_url": "https://github.com/apache/oozie/raw/a94011bcb0717c73cd3aff2f1a2c017f416e345a/release-log.txt",
                "sha": "6b082e6fc0e5e6a94eb553d46c587641e2f886f8",
                "status": "modified"
            }
        ],
        "message": "OOZIE-1945 NPE in JaveActionExecutor#check() (sree2k via rkanter)",
        "parent": "https://github.com/apache/oozie/commit/1ea1717bb83492a36749b8e7db1952afb223bcb9",
        "repo": "oozie",
        "unit_tests": [
            "TestJavaActionExecutor.java"
        ]
    },
    "oozie_aebf775": {
        "bug_id": "oozie_aebf775",
        "commit": "https://github.com/apache/oozie/commit/aebf775a35e618c491b20bc5690e93f82ac401bf",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/oozie/blob/aebf775a35e618c491b20bc5690e93f82ac401bf/core/src/main/java/org/apache/oozie/workflow/lite/LiteWorkflowAppParser.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/workflow/lite/LiteWorkflowAppParser.java?ref=aebf775a35e618c491b20bc5690e93f82ac401bf",
                "deletions": 2,
                "filename": "core/src/main/java/org/apache/oozie/workflow/lite/LiteWorkflowAppParser.java",
                "patch": "@@ -472,8 +472,8 @@ private LiteWorkflowApp parse(String strDef, Element root, Configuration configD\n                     } else if (SLA_INFO.equals(elem.getName()) || CREDENTIALS.equals(elem.getName())) {\n                         continue;\n                     } else {\n-                        if (!serializedGlobalConf  && elem.getName().equals(SubWorkflowActionExecutor.ACTION_TYPE) &&\n-                                elem.getChild((\"propagate-configuration\"), ns) != null) {\n+                        if (!serializedGlobalConf && elem.getName().equals(SubWorkflowActionExecutor.ACTION_TYPE) &&\n+                                elem.getChild((\"propagate-configuration\"), ns) != null && gData != null) {\n                             serializedGlobalConf = true;\n                             jobConf.set(OOZIE_GLOBAL, getGlobalString(gData));\n                         }",
                "raw_url": "https://github.com/apache/oozie/raw/aebf775a35e618c491b20bc5690e93f82ac401bf/core/src/main/java/org/apache/oozie/workflow/lite/LiteWorkflowAppParser.java",
                "sha": "a1b9cdba33cc07b4c972ed408530c794cd82c47a",
                "status": "modified"
            },
            {
                "additions": 21,
                "blob_url": "https://github.com/apache/oozie/blob/aebf775a35e618c491b20bc5690e93f82ac401bf/core/src/test/java/org/apache/oozie/workflow/lite/TestLiteWorkflowAppParser.java",
                "changes": 21,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/test/java/org/apache/oozie/workflow/lite/TestLiteWorkflowAppParser.java?ref=aebf775a35e618c491b20bc5690e93f82ac401bf",
                "deletions": 0,
                "filename": "core/src/test/java/org/apache/oozie/workflow/lite/TestLiteWorkflowAppParser.java",
                "patch": "@@ -510,6 +510,27 @@ public void testParserDefaultJobTrackerFail() throws Exception {\n         }\n     }\n \n+    public void testParserSubWorkflowPropagateNoGlobal() throws Exception {\n+        LiteWorkflowAppParser parser = new LiteWorkflowAppParser(null,\n+                LiteWorkflowStoreService.LiteControlNodeHandler.class,\n+                LiteWorkflowStoreService.LiteDecisionHandler.class,\n+                LiteWorkflowStoreService.LiteActionHandler.class);\n+\n+        LiteWorkflowApp app = parser.validateAndParse(\n+                IOUtils.getResourceAsReader(\"wf-schema-subworkflow-propagate-no-global.xml\", -1),\n+                new Configuration());\n+\n+        String a = app.getNode(\"a\").getConf();\n+        String expectedA =\n+                \"<sub-workflowxmlns=\\\"uri:oozie:workflow:0.4\\\">\\r\\n\" +\n+                        \"<app-path>/tmp/foo/</app-path>\\r\\n\" +\n+                        \"<propagate-configuration/>\\r\\n\" +\n+                        \"<configuration/>\\r\\n\" +\n+                        \"</sub-workflow>\";\n+        a = cleanupXml(a);\n+        assertEquals(expectedA.replaceAll(\" \", \"\"), a.replaceAll(\" \", \"\"));\n+    }\n+\n     public void testParserFsGlobalNN() throws Exception {\n         LiteWorkflowAppParser parser = new LiteWorkflowAppParser(null,\n                 LiteWorkflowStoreService.LiteControlNodeHandler.class,",
                "raw_url": "https://github.com/apache/oozie/raw/aebf775a35e618c491b20bc5690e93f82ac401bf/core/src/test/java/org/apache/oozie/workflow/lite/TestLiteWorkflowAppParser.java",
                "sha": "9002b6c5be6f4581c59b138d96c88c26a3290f6a",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/oozie/blob/aebf775a35e618c491b20bc5690e93f82ac401bf/release-log.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/release-log.txt?ref=aebf775a35e618c491b20bc5690e93f82ac401bf",
                "deletions": 0,
                "filename": "release-log.txt",
                "patch": "@@ -1,5 +1,6 @@\n -- Oozie 4.3.0 release (trunk - unreleased)\n \n+OOZIE-2441 SubWorkflow action with propagate-configuration but no global section throws NPE on submit (rkanter)\n OOZIE-2370 Docs for Coordinator Action Status Notification has wrong property name (eeeva via rkanter)\n OOZIE-2419 HBase credentials are not correctly proxied (qwertymaniac via rkanter)\n OOZIE-2439 FS Action no longer uses name-node from global section or default NN (rkanter)",
                "raw_url": "https://github.com/apache/oozie/raw/aebf775a35e618c491b20bc5690e93f82ac401bf/release-log.txt",
                "sha": "391834b9bc23e9d452f0c218e816c418f10207b1",
                "status": "modified"
            }
        ],
        "message": "OOZIE-2441 SubWorkflow action with propagate-configuration but no global section throws NPE on submit (rkanter)",
        "parent": "https://github.com/apache/oozie/commit/aa09df5b7f74b7de1f9eddd0c332bbad16e321b7",
        "repo": "oozie",
        "unit_tests": [
            "TestLiteWorkflowAppParser.java"
        ]
    },
    "oozie_b1f5cf0": {
        "bug_id": "oozie_b1f5cf0",
        "commit": "https://github.com/apache/oozie/commit/b1f5cf02758a8ec634302025bcc93fbbe88b5fcb",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/oozie/blob/b1f5cf02758a8ec634302025bcc93fbbe88b5fcb/core/src/main/java/org/apache/oozie/command/coord/CoordSubmitXCommand.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/main/java/org/apache/oozie/command/coord/CoordSubmitXCommand.java?ref=b1f5cf02758a8ec634302025bcc93fbbe88b5fcb",
                "deletions": 0,
                "filename": "core/src/main/java/org/apache/oozie/command/coord/CoordSubmitXCommand.java",
                "patch": "@@ -359,6 +359,9 @@ private void validateCoordinatorJob() throws Exception {\n             start = cal.getTime();\n \n             Date nextTime = CoordCommandUtils.getNextValidActionTimeForCronFrequency(start, coordJob);\n+            if (nextTime == null) {\n+                throw new IllegalArgumentException(\"Invalid coordinator cron frequency: \" + coordJob.getFrequency());\n+            }\n             if (!nextTime.before(coordJob.getEndTime())) {\n                 throw new IllegalArgumentException(\"Coordinator job with frequency '\" +\n                         coordJob.getFrequency() + \"' materializes no actions between start and end time.\");",
                "raw_url": "https://github.com/apache/oozie/raw/b1f5cf02758a8ec634302025bcc93fbbe88b5fcb/core/src/main/java/org/apache/oozie/command/coord/CoordSubmitXCommand.java",
                "sha": "ffb65d7311f8f2df4f013c1016788522bcf51ada",
                "status": "modified"
            },
            {
                "additions": 28,
                "blob_url": "https://github.com/apache/oozie/blob/b1f5cf02758a8ec634302025bcc93fbbe88b5fcb/core/src/test/java/org/apache/oozie/command/coord/TestCoordSubmitXCommand.java",
                "changes": 34,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/core/src/test/java/org/apache/oozie/command/coord/TestCoordSubmitXCommand.java?ref=b1f5cf02758a8ec634302025bcc93fbbe88b5fcb",
                "deletions": 6,
                "filename": "core/src/test/java/org/apache/oozie/command/coord/TestCoordSubmitXCommand.java",
                "patch": "@@ -182,23 +182,45 @@ public void testBasicSubmitWithStartTimeAfterEndTime() throws Exception {\n     }\n \n     public void testBasicSubmitWithCronFrequency() throws Exception {\n-        Configuration conf = new XConfiguration();\n-        File appPathFile = new File(getTestCaseDir(), \"coordinator.xml\");\n         String appXml = \"<coordinator-app name=\\\"NAME\\\" frequency=\\\"0 10 * * *\\\" start=\\\"2009-02-01T01:00Z\\\" \"\n                 + \"end=\\\"2009-02-03T23:59Z\\\" timezone=\\\"UTC\\\" \"\n                 + \"xmlns=\\\"uri:oozie:coordinator:0.2\\\"> <controls> \"\n                 + \"<execution>LIFO</execution> </controls>  <action> \"\n                 + \"<workflow> <app-path>hdfs:///tmp/workflows/</app-path> \"\n                 + \"</workflow> </action> </coordinator-app>\";\n+        testBasicSubmitWithCronFrequency(appXml, true);\n+        appXml = \"<coordinator-app name=\\\"NAME\\\" frequency=\\\"* * 30 FEB *\\\" start=\\\"2009-02-01T01:00Z\\\" \"\n+                + \"end=\\\"2009-02-03T23:59Z\\\" timezone=\\\"UTC\\\" \"\n+                + \"xmlns=\\\"uri:oozie:coordinator:0.2\\\"> <controls> \"\n+                + \"<execution>LIFO</execution> </controls>  <action> \"\n+                + \"<workflow> <app-path>hdfs:///tmp/workflows/</app-path> \"\n+                + \"</workflow> </action> </coordinator-app>\";\n+        testBasicSubmitWithCronFrequency(appXml, false);\n+    }\n+\n+    private void testBasicSubmitWithCronFrequency(String appXml, Boolean isValidFrequency) throws Exception {\n+        Configuration conf = new XConfiguration();\n+        File appPathFile = new File(getTestCaseDir(), \"coordinator.xml\");\n         writeToFile(appXml, appPathFile);\n         conf.set(OozieClient.COORDINATOR_APP_PATH, appPathFile.toURI().toString());\n         conf.set(OozieClient.USER_NAME, getTestUser());\n         CoordSubmitXCommand sc = new CoordSubmitXCommand(conf);\n \n-        String jobId = sc.call();\n-        assertEquals(jobId.substring(jobId.length() - 2), \"-C\");\n-        CoordinatorJobBean job = (CoordinatorJobBean) sc.getJob();\n-        assertEquals(job.getTimeUnitStr(), \"CRON\");\n+        if (isValidFrequency) {\n+            String jobId = sc.call();\n+            assertEquals(jobId.substring(jobId.length() - 2), \"-C\");\n+            CoordinatorJobBean job = (CoordinatorJobBean) sc.getJob();\n+            assertEquals(job.getTimeUnitStr(), \"CRON\");\n+        }\n+        else {\n+            try {\n+                String jobId = sc.call();\n+            }\n+            catch (Exception ex) {\n+                assertTrue(ex.getMessage().contains(\"Invalid coordinator cron frequency\"));\n+            }\n+        }\n+\n     }\n \n     public void testBasicSubmitWithIdenticalStartAndEndTime() throws Exception {",
                "raw_url": "https://github.com/apache/oozie/raw/b1f5cf02758a8ec634302025bcc93fbbe88b5fcb/core/src/test/java/org/apache/oozie/command/coord/TestCoordSubmitXCommand.java",
                "sha": "e17d1b5226e1ae02b2541468657b0dbe9ee25c37",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/oozie/blob/b1f5cf02758a8ec634302025bcc93fbbe88b5fcb/release-log.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/release-log.txt?ref=b1f5cf02758a8ec634302025bcc93fbbe88b5fcb",
                "deletions": 0,
                "filename": "release-log.txt",
                "patch": "@@ -1,5 +1,6 @@\n -- Oozie 4.2.0 release (trunk - unreleased)\n \n+OOZIE-2012 coordinator with an invalid cron frequency throws NPE after validation (bzhang)\n OOZIE-2129 Duplicate child jobs per instance (jaydeepvishwakarma via shwethags)\n OOZIE-2214 fix test case TestCoordRerunXCommand.testCoordRerunDateNeg (ryota)\n OOZIE-2213 oozie-setup.ps1 should use \"start-process\" rather than \"cmd /c\" to invoke OozieSharelibCLI or OozieDBCLI commands (bzhang)",
                "raw_url": "https://github.com/apache/oozie/raw/b1f5cf02758a8ec634302025bcc93fbbe88b5fcb/release-log.txt",
                "sha": "37452838240d02ab49d85d8fe04117285be909ff",
                "status": "modified"
            }
        ],
        "message": "OOZIE-2012 coordinator with an invalid cron frequency throws NPE after validation (bzhang)",
        "parent": "https://github.com/apache/oozie/commit/e86b96d45cc7af706a0e0f5bd1bf36d760266c8e",
        "repo": "oozie",
        "unit_tests": [
            "TestCoordSubmitXCommand.java"
        ]
    },
    "oozie_be293c0": {
        "bug_id": "oozie_be293c0",
        "commit": "https://github.com/apache/oozie/commit/be293c046d7d83765c65140921c3de5ca3d7b55a",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/oozie/blob/be293c046d7d83765c65140921c3de5ca3d7b55a/release-log.txt",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/release-log.txt?ref=be293c046d7d83765c65140921c3de5ca3d7b55a",
                "deletions": 0,
                "filename": "release-log.txt",
                "patch": "@@ -1,5 +1,6 @@\n -- Oozie 5.0.0 release (trunk - unreleased)\n \n+OOZIE-3078 PasswordMasker throws NPE with null arguments (asasvari)\n OOZIE-3075 Follow-up on OOZIE-3054: create the lib directory if it doesn't exist (pbacsko)\n OOZIE-3072 oozie.service.HadoopAccessorService.action.configurations   should overwrite default values set in Hadoop's configuration files (gezapeti)\n OOZIE-2963 Use net.hydromatic instead of org.pentaho aggdesigner-algorithmin pomfilesi (dbist13 via gezapeti)",
                "raw_url": "https://github.com/apache/oozie/raw/be293c046d7d83765c65140921c3de5ca3d7b55a/release-log.txt",
                "sha": "13d3a974915e292d36b8876023d4ea6ac9659133",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/oozie/blob/be293c046d7d83765c65140921c3de5ca3d7b55a/sharelib/oozie/src/main/java/org/apache/oozie/action/hadoop/PasswordMasker.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/sharelib/oozie/src/main/java/org/apache/oozie/action/hadoop/PasswordMasker.java?ref=be293c046d7d83765c65140921c3de5ca3d7b55a",
                "deletions": 4,
                "filename": "sharelib/oozie/src/main/java/org/apache/oozie/action/hadoop/PasswordMasker.java",
                "patch": "@@ -25,8 +25,6 @@\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n-import static com.google.common.base.Preconditions.checkNotNull;\n-\n /**\n  * A generic password masker that masks {@code Map<String, String>} values given that its keys are considered password keys.\n  * <p/>\n@@ -116,8 +114,9 @@ public String mask(Map.Entry<String, String> unmasked) {\n      * @return The value of the entry changed based on the replace algorithm described above\n      */\n     private String mask(String key, String value) {\n-        checkNotNull(key, \"key has to be set\");\n-        checkNotNull(value, \"value has to be set\");\n+        if (key == null || value == null || value.isEmpty()) {\n+            return value;\n+        }\n \n         if (isPasswordKey(key)) {\n             return PASSWORD_MASK;\n@@ -147,6 +146,9 @@ private boolean isPasswordKey(String key) {\n     }\n \n     private boolean containsPasswordFragment(String maybePasswordFragments) {\n+        if (maybePasswordFragments == null || maybePasswordFragments.length() == 0) {\n+            return false;\n+        }\n         return PASSWORD_CONTAINING_PATTERN\n                 .matcher(maybePasswordFragments)\n                 .matches();",
                "raw_url": "https://github.com/apache/oozie/raw/be293c046d7d83765c65140921c3de5ca3d7b55a/sharelib/oozie/src/main/java/org/apache/oozie/action/hadoop/PasswordMasker.java",
                "sha": "b5f7a860db3d3003f2f9cc67adb03dbe61af5a01",
                "status": "modified"
            },
            {
                "additions": 10,
                "blob_url": "https://github.com/apache/oozie/blob/be293c046d7d83765c65140921c3de5ca3d7b55a/sharelib/oozie/src/test/java/org/apache/oozie/action/hadoop/TestPasswordMasker.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/oozie/contents/sharelib/oozie/src/test/java/org/apache/oozie/action/hadoop/TestPasswordMasker.java?ref=be293c046d7d83765c65140921c3de5ca3d7b55a",
                "deletions": 0,
                "filename": "sharelib/oozie/src/test/java/org/apache/oozie/action/hadoop/TestPasswordMasker.java",
                "patch": "@@ -102,6 +102,16 @@ public void testMaskRandomMatchingStuff() {\n                 passwordMasker.maskPasswordsIfNecessary(\"aa -Djava.sysprop.password=1234 bb DUMMY_PASSWORD=dummy cc\"));\n     }\n \n+    @Test\n+    public void testMaskNullArgument() {\n+        assertEquals(null, passwordMasker.maskPasswordsIfNecessary(null));\n+    }\n+\n+    @Test\n+    public void testMaskEmptyArgument() {\n+        assertEquals(\"\", passwordMasker.maskPasswordsIfNecessary(\"\"));\n+    }\n+\n     @SuppressWarnings(\"unchecked\")\n     private Map<String, String> jsonToMap(String jsonPath) throws IOException {\n         return new ObjectMapper().readValue(getClass().getResourceAsStream(jsonPath), HashMap.class);",
                "raw_url": "https://github.com/apache/oozie/raw/be293c046d7d83765c65140921c3de5ca3d7b55a/sharelib/oozie/src/test/java/org/apache/oozie/action/hadoop/TestPasswordMasker.java",
                "sha": "e362759ee833fe1d611ed83ebecafadaa6945196",
                "status": "modified"
            }
        ],
        "message": "OOZIE-3078 PasswordMasker throws NPE with null arguments (asasvari)",
        "parent": "https://github.com/apache/oozie/commit/7bda357849e1006f2cc6df58320f8905da2bd3b8",
        "repo": "oozie",
        "unit_tests": [
            "TestPasswordMasker.java"
        ]
    }
}