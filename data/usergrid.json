{
    "usergrid_5233567": {
        "bug_id": "usergrid_5233567",
        "commit": "https://github.com/apache/usergrid/commit/52335673b3f9b1dd63300654785a28c9278d22ea",
        "file": [
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/usergrid/blob/52335673b3f9b1dd63300654785a28c9278d22ea/stack/services/src/main/java/org/apache/usergrid/management/AppInfoMigrationPlugin.java",
                "changes": 11,
                "contents_url": "https://api.github.com/repos/apache/usergrid/contents/stack/services/src/main/java/org/apache/usergrid/management/AppInfoMigrationPlugin.java?ref=52335673b3f9b1dd63300654785a28c9278d22ea",
                "deletions": 0,
                "filename": "stack/services/src/main/java/org/apache/usergrid/management/AppInfoMigrationPlugin.java",
                "patch": "@@ -178,6 +178,8 @@ private void migrateAppInfo( org.apache.usergrid.persistence.model.entity.Entity\n \n         final String name = ( String ) oldAppInfoMap.get( PROPERTY_NAME );\n \n+        logger.info( \"Attempting to migrate app {}\", name );\n+\n         try {\n             final String orgName = name.split( \"/\" )[0];\n             final String appName = name.split( \"/\" )[1];\n@@ -190,6 +192,15 @@ private void migrateAppInfo( org.apache.usergrid.persistence.model.entity.Entity\n             //avoid management org\n \n             EntityRef orgRef = managementEm.getAlias( Group.ENTITY_TYPE, orgName );\n+\n+            /**\n+             * No op, we couldn't find the org, so we can't roll the app forward\n+             */\n+            if(orgRef == null){\n+                logger.error( \"Unable to retrieve ref for org {}.  Not migrating app {}\", orgName, appName );\n+                return;\n+            }\n+\n             // create and connect new APPLICATION_INFO oldAppInfo to Organization\n             managementService.createApplication( orgRef.getUuid(), name, applicationId, null );\n ",
                "raw_url": "https://github.com/apache/usergrid/raw/52335673b3f9b1dd63300654785a28c9278d22ea/stack/services/src/main/java/org/apache/usergrid/management/AppInfoMigrationPlugin.java",
                "sha": "b78b64637b2fcd6ef0f63a08c281d1268dd3555f",
                "status": "modified"
            }
        ],
        "message": "Fixes NPE from missing org during testing",
        "parent": "https://github.com/apache/usergrid/commit/0b243c4d516e0f6ae58421c63787421b8b806052",
        "repo": "usergrid",
        "unit_tests": [
            "AppInfoMigrationPluginTest.java"
        ]
    }
}