[
    {
        "repo": "servicemix4-kernel",
        "message": "SMX4KNL-38: Fix NullPointerException instead of command not found in the console\n\ngit-svn-id: https://svn.apache.org/repos/asf/servicemix/smx4/kernel/trunk@658229 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/servicemix4-kernel/commit/735c6c8fb135d060745a82581871e38f5a42bdf8",
        "parent": "https://github.com/apache/servicemix4-kernel/commit/ad9469ec49539f4b789d9d4725d359c3324ad3e4",
        "bug_id": "servicemix4-kernel_1",
        "file": [
            {
                "sha": "41767be4384fc6642aa71cd0631cf6adbd7aa1c5",
                "filename": "gshell/gshell-core/src/main/java/org/apache/geronimo/gshell/spring/SpringCommandRegistry.java",
                "blob_url": "https://github.com/apache/servicemix4-kernel/blob/735c6c8fb135d060745a82581871e38f5a42bdf8/gshell/gshell-core/src/main/java/org/apache/geronimo/gshell/spring/SpringCommandRegistry.java",
                "raw_url": "https://github.com/apache/servicemix4-kernel/raw/735c6c8fb135d060745a82581871e38f5a42bdf8/gshell/gshell-core/src/main/java/org/apache/geronimo/gshell/spring/SpringCommandRegistry.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/servicemix4-kernel/contents/gshell/gshell-core/src/main/java/org/apache/geronimo/gshell/spring/SpringCommandRegistry.java?ref=735c6c8fb135d060745a82581871e38f5a42bdf8",
                "patch": "@@ -226,6 +226,9 @@ public Object execute(CommandContext commandContext, Object... objects) throws E\n                     if (n == null) {\n                         n = layout.find(cmdId);\n                     }\n+                    if (n == null) {\n+                        throw new NotFoundException(cmdId);\n+                    }\n                     CommandContext ctx = commandContext;\n                     Command cmd;\n                     if (n instanceof CommandNode) {",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "servicemix4-kernel",
        "message": "[SMX4KNL-204]OsgiConfiguration.unregister() throw NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/servicemix/smx4/kernel/trunk@745781 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/servicemix4-kernel/commit/f6f8ffb24d5794be53e946e23782da193411232b",
        "parent": "https://github.com/apache/servicemix4-kernel/commit/a848712505f5caf23292e6cdf07e2cd452bb6bd7",
        "bug_id": "servicemix4-kernel_2",
        "file": [
            {
                "sha": "c89db11b68e9d22e25b853f9029d3ee91225731c",
                "filename": "jaas/jaas-config/src/main/java/org/apache/servicemix/kernel/jaas/config/impl/OsgiConfiguration.java",
                "blob_url": "https://github.com/apache/servicemix4-kernel/blob/f6f8ffb24d5794be53e946e23782da193411232b/jaas/jaas-config/src/main/java/org/apache/servicemix/kernel/jaas/config/impl/OsgiConfiguration.java",
                "raw_url": "https://github.com/apache/servicemix4-kernel/raw/f6f8ffb24d5794be53e946e23782da193411232b/jaas/jaas-config/src/main/java/org/apache/servicemix/kernel/jaas/config/impl/OsgiConfiguration.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/servicemix4-kernel/contents/jaas/jaas-config/src/main/java/org/apache/servicemix/kernel/jaas/config/impl/OsgiConfiguration.java?ref=f6f8ffb24d5794be53e946e23782da193411232b",
                "patch": "@@ -46,7 +46,9 @@ public void register(JaasRealm realm, Map<String,?> properties) {\n     }\n \n     public void unregister(JaasRealm realm, Map<String,?> properties) {\n-        realms.remove(realm);\n+        if (realms != null) {\n+            realms.remove(realm);\n+        }\n     }\n \n     public AppConfigurationEntry[] getAppConfigurationEntry(String name) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "servicemix4-kernel",
        "message": "SMX4-72: NPE when doing 'features install'\n\ngit-svn-id: https://svn.apache.org/repos/asf/servicemix/smx4/kernel/trunk@679694 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/servicemix4-kernel/commit/05fbd3907eb580fdab1cc8e2738a421f59ab53e9",
        "parent": "https://github.com/apache/servicemix4-kernel/commit/ed06101aa6f2e0e394bbabc260f24c45dd7c2963",
        "bug_id": "servicemix4-kernel_3",
        "file": [
            {
                "sha": "3fad0ac98c43f5ff776035450b5c3b331aa936e3",
                "filename": "gshell/gshell-features/src/main/java/org/apache/servicemix/gshell/features/internal/FeaturesServiceImpl.java",
                "blob_url": "https://github.com/apache/servicemix4-kernel/blob/05fbd3907eb580fdab1cc8e2738a421f59ab53e9/gshell/gshell-features/src/main/java/org/apache/servicemix/gshell/features/internal/FeaturesServiceImpl.java",
                "raw_url": "https://github.com/apache/servicemix4-kernel/raw/05fbd3907eb580fdab1cc8e2738a421f59ab53e9/gshell/gshell-features/src/main/java/org/apache/servicemix/gshell/features/internal/FeaturesServiceImpl.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/servicemix4-kernel/contents/gshell/gshell-features/src/main/java/org/apache/servicemix/gshell/features/internal/FeaturesServiceImpl.java?ref=05fbd3907eb580fdab1cc8e2738a421f59ab53e9",
                "patch": "@@ -173,7 +173,7 @@ protected Bundle installBundleIfNeeded(String bundleLocation) throws IOException\n             Version v = vStr == null ? Version.emptyVersion : Version.parseVersion(vStr);\n             boolean install = true;\n             for (Bundle b : bundleContext.getBundles()) {\n-                if (b.getSymbolicName().equals(sn)) {\n+                if (b.getSymbolicName() != null && b.getSymbolicName().equals(sn)) {\n                     vStr = (String) b.getHeaders().get(Constants.BUNDLE_VERSION);\n                     Version bv = vStr == null ? Version.emptyVersion : Version.parseVersion(vStr);\n                     if (v.equals(bv)) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "servicemix4-kernel",
        "message": "SMX4KNL-181: osgi/install -s throws a NPE if the bundle can not be resolved\n\ngit-svn-id: https://svn.apache.org/repos/asf/servicemix/smx4/kernel/trunk@743268 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/servicemix4-kernel/commit/e1689c08414e44a6f2c8a16d7ba90c63ca402cb7",
        "parent": "https://github.com/apache/servicemix4-kernel/commit/1ef3e8e2768a4ec66d17a21e75c63054645154d3",
        "bug_id": "servicemix4-kernel_4",
        "file": [
            {
                "sha": "ad8d526280449929c62569b4721678a5ec0da4fd",
                "filename": "gshell/gshell-osgi/src/main/java/org/apache/servicemix/kernel/gshell/osgi/InstallBundle.java",
                "blob_url": "https://github.com/apache/servicemix4-kernel/blob/e1689c08414e44a6f2c8a16d7ba90c63ca402cb7/gshell/gshell-osgi/src/main/java/org/apache/servicemix/kernel/gshell/osgi/InstallBundle.java",
                "raw_url": "https://github.com/apache/servicemix4-kernel/raw/e1689c08414e44a6f2c8a16d7ba90c63ca402cb7/gshell/gshell-osgi/src/main/java/org/apache/servicemix/kernel/gshell/osgi/InstallBundle.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/servicemix4-kernel/contents/gshell/gshell-osgi/src/main/java/org/apache/servicemix/kernel/gshell/osgi/InstallBundle.java?ref=e1689c08414e44a6f2c8a16d7ba90c63ca402cb7",
                "patch": "@@ -39,8 +39,8 @@ protected Object doExecute() throws Exception {\n         StringBuffer sb = new StringBuffer();\n         for (String url : urls) {\n             Bundle bundle = install(url, io.out, io.err);\n-            bundles.add(bundle);\n             if (bundle != null) {\n+                bundles.add(bundle);\n                 if (sb.length() > 0) {\n                     sb.append(\", \");\n                 }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "servicemix4-kernel",
        "message": "Rename logger to LOGGER, avoid possible NPE when closing the jar and add an exception log\n\ngit-svn-id: https://svn.apache.org/repos/asf/servicemix/smx4/kernel/trunk@631303 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/servicemix4-kernel/commit/1f25e3e35bd516be4a51ab04e2c30b5d3480027b",
        "parent": "https://github.com/apache/servicemix4-kernel/commit/1619bac73a4e44d8d1c68043675a22cd4b19c384",
        "bug_id": "servicemix4-kernel_5",
        "file": [
            {
                "sha": "3f5568941282b32f7f1f100d15d9c9fb1a739f76",
                "filename": "filemonitor/src/main/java/org/apache/servicemix/kernel/filemonitor/FileMonitor.java",
                "blob_url": "https://github.com/apache/servicemix4-kernel/blob/1f25e3e35bd516be4a51ab04e2c30b5d3480027b/filemonitor/src/main/java/org/apache/servicemix/kernel/filemonitor/FileMonitor.java",
                "raw_url": "https://github.com/apache/servicemix4-kernel/raw/1f25e3e35bd516be4a51ab04e2c30b5d3480027b/filemonitor/src/main/java/org/apache/servicemix/kernel/filemonitor/FileMonitor.java",
                "status": "modified",
                "changes": 43,
                "additions": 24,
                "contents_url": "https://api.github.com/repos/apache/servicemix4-kernel/contents/filemonitor/src/main/java/org/apache/servicemix/kernel/filemonitor/FileMonitor.java?ref=1f25e3e35bd516be4a51ab04e2c30b5d3480027b",
                "patch": "@@ -67,8 +67,11 @@\n     public final static String DEPLOY_DIR = \"org.apache.servicemix.filemonitor.monitorDir\";\n     public final static String GENERATED_JAR_DIR = \"org.apache.servicemix.filemonitor.generatedJarDir\";\n     public final static String SCAN_INTERVAL = \"org.apache.servicemix.filemonitor.scanInterval\";\n+\n     protected static final String ALIAS_KEY = \"_alias_factory_pid\";\n-    private static Log logger = LogFactory.getLog(FileMonitor.class);\n+\n+    private static final Log LOGGER = LogFactory.getLog(FileMonitor.class);\n+\n     private FileMonitorActivator activator;\n     private File configDir = new File(\"./etc\");\n     private File deployDir = new File(\"./deploy\");\n@@ -130,11 +133,11 @@ public void filesChanged(List<String> filenames) throws Exception {\n             }\n         });\n \n-        logger.info(\"Starting to monitor the deploy directory: \" + deployDir + \" every \" + scanInterval + \" millis\");\n+        LOGGER.info(\"Starting to monitor the deploy directory: \" + deployDir + \" every \" + scanInterval + \" millis\");\n         if (configDir != null) {\n-            logger.info(\"Config directory is at: \" + configDir);\n+            LOGGER.info(\"Config directory is at: \" + configDir);\n         }\n-        logger.info(\"Will generate bundles from expanded source directories to: \" + generateDir);\n+        LOGGER.info(\"Will generate bundles from expanded source directories to: \" + generateDir);\n \n         scanner.start();\n     }\n@@ -212,7 +215,7 @@ protected synchronized void onFilesChanged(Collection<String> filenames) {\n \n             File file = new File(name);\n             try {\n-                logger.debug(\"File changed: \" + filename + \" with type: \" + filename.getClass().getName());\n+                LOGGER.debug(\"File changed: \" + filename + \" with type: \" + filename.getClass().getName());\n \n                 // Handle config files\n                 if (isValidConfigFile(file)) {\n@@ -251,7 +254,7 @@ protected synchronized void onFilesChanged(Collection<String> filenames) {\n                 if (file.exists()) {\n                     File f = transformArtifact(file);\n                     if (f == null) {\n-                        logger.warn(\"Unsupported deployment: \" + name);\n+                        LOGGER.warn(\"Unsupported deployment: \" + name);\n                         reschedule(file);\n                         continue;\n                     }\n@@ -277,7 +280,7 @@ protected synchronized void onFilesChanged(Collection<String> filenames) {\n                 }\n             }\n             catch (Exception e) {\n-                logger.warn(\"Failed to process: \" + file + \". Reason: \" + e, e);\n+                LOGGER.warn(\"Failed to process: \" + file + \". Reason: \" + e, e);\n             }\n         }\n         refreshPackagesAndStartOrUpdateBundles();\n@@ -333,15 +336,17 @@ private File transformArtifact(File file) throws Exception {\n                 return file;\n             }\n         } catch (Exception e) {\n-            // Ignore\n+            LOGGER.debug(\"Error transforming artifact\", e);\n         } finally {\n-            jar.close();\n+            if (jar != null) {\n+                jar.close();\n+            }\n         }\n         return null;\n \t}\n \n     protected void deployBundle(File file) throws IOException, BundleException {\n-        logger.info(\"Deloying: \" + file.getCanonicalPath());\n+        LOGGER.info(\"Deloying: \" + file.getCanonicalPath());\n \n         InputStream in = new FileInputStream(file);\n \n@@ -364,11 +369,11 @@ protected void deployBundle(File file) throws IOException, BundleException {\n     }\n \n     protected void undeployBundle(File file) throws BundleException, IOException {\n-        logger.info(\"Undeploying: \" + file.getCanonicalPath());\n+        LOGGER.info(\"Undeploying: \" + file.getCanonicalPath());\n         Bundle bundle = getBundleForJarFile(file);\n \n         if (bundle == null) {\n-            logger.warn(\"Could not find Bundle for file: \" + file.getCanonicalPath());\n+            LOGGER.warn(\"Could not find Bundle for file: \" + file.getCanonicalPath());\n         }\n         else {\n             changedBundles.add(bundle);\n@@ -394,7 +399,7 @@ protected void updateConfiguration(File file) throws IOException, InvalidSyntaxE\n         ConfigurationAdmin configurationAdmin = activator.getConfigurationAdmin();\n         if (configurationAdmin == null) {\n             if (!loggedConfigAdminWarning) {\n-                logger.warn(\"No ConfigurationAdmin so cannot deploy configurations\");\n+                LOGGER.warn(\"No ConfigurationAdmin so cannot deploy configurations\");\n                 loggedConfigAdminWarning = true;\n             }\n         }\n@@ -492,20 +497,20 @@ protected void refreshPackagesAndStartOrUpdateBundles() {\n         for (Bundle bundle : bundlesToUpdate) {\n             try {\n                 bundle.update();\n-                logger.info(\"Updated: \" + bundle);\n+                LOGGER.info(\"Updated: \" + bundle);\n \n             }\n             catch (BundleException e) {\n-                logger.warn(\"Failed to update bundle: \" + bundle + \". Reason: \" + e, e);\n+                LOGGER.warn(\"Failed to update bundle: \" + bundle + \". Reason: \" + e, e);\n             }\n         }\n         for (Bundle bundle : bundlesToStart) {\n             try {\n                 bundle.start();\n-                logger.info(\"Started: \" + bundle);\n+                LOGGER.info(\"Started: \" + bundle);\n             }\n             catch (BundleException e) {\n-                logger.warn(\"Failed to start bundle: \" + bundle + \". Reason: \" + e, e);\n+                LOGGER.warn(\"Failed to start bundle: \" + bundle + \". Reason: \" + e, e);\n             }\n         }\n     }\n@@ -518,7 +523,7 @@ protected File createBundleJar(File dir) throws BundleException, IOException {\n             undeployBundle(destFile);\n             destFile.delete();\n         }\n-        logger.info(\"Creating jar:  \" + destFile + \" from dir: \" + dir);\n+        LOGGER.info(\"Creating jar:  \" + destFile + \" from dir: \" + dir);\n         jar.setDestFile(destFile);\n         jar.setManifest(new File(new File(dir, \"META-INF\"), \"MANIFEST.MF\"));\n         jar.setBasedir(dir);\n@@ -631,7 +636,7 @@ protected void closeQuietly(Closeable in) {\n             in.close();\n         }\n         catch (IOException e) {\n-            logger.warn(\"Failed to close stream. \" + e, e);\n+            LOGGER.warn(\"Failed to close stream. \" + e, e);\n         }\n     }\n ",
                "deletions": 19
            },
            {
                "sha": "52b664d4d6cc557573ea0baf01670a2a9f0e943e",
                "filename": "pom.xml",
                "blob_url": "https://github.com/apache/servicemix4-kernel/blob/1f25e3e35bd516be4a51ab04e2c30b5d3480027b/pom.xml",
                "raw_url": "https://github.com/apache/servicemix4-kernel/raw/1f25e3e35bd516be4a51ab04e2c30b5d3480027b/pom.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/servicemix4-kernel/contents/pom.xml?ref=1f25e3e35bd516be4a51ab04e2c30b5d3480027b",
                "patch": "@@ -69,7 +69,7 @@\n       <felix.configadmin.version>0.9.0-r605854</felix.configadmin.version>\n       <felix.main.version>1.1.0-r605854</felix.main.version>\n       <felix.plugin.version>1.2.0</felix.plugin.version>\n-      <felix.framework.version>1.1.0-r605854-patched</felix.framework.version>\n+      <felix.framework.version>1.1.0-SNAPSHOT</felix.framework.version>\n       <felix.osgi.version>1.0.0</felix.osgi.version>\n       <felix.compendium.version>1.0.0</felix.compendium.version>\n       <felix.bundlerepository.version>1.1.0-r605854</felix.bundlerepository.version>",
                "deletions": 1
            }
        ]
    }
]