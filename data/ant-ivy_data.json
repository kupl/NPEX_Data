[{"commit": "https://github.com/apache/ant-ivy/commit/10118c9c1b00d31868d6ab43e8171e3c16efdcfc", "parent": "https://github.com/apache/ant-ivy/commit/c95e6a35b21bc5bcad2ac3a2d2d58843959b52f9", "message": "avoid an NPE on malformed p2 repository", "bug_id": "ant-ivy_1", "file": [{"additions": 3, "raw_url": "https://github.com/apache/ant-ivy/raw/10118c9c1b00d31868d6ab43e8171e3c16efdcfc/src/java/org/apache/ivy/osgi/p2/P2MetadataParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/10118c9c1b00d31868d6ab43e8171e3c16efdcfc/src/java/org/apache/ivy/osgi/p2/P2MetadataParser.java", "sha": "1630424e6cd2eb4b181c3b5f8edd1bd828f61c10", "changes": 3, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/osgi/p2/P2MetadataParser.java?ref=10118c9c1b00d31868d6ab43e8171e3c16efdcfc", "patch": "@@ -423,6 +423,9 @@ public FilterHandler() {\n     }\n \n     private static String namespace2Type(String namespace) {\n+        if (namespace == null) {\n+            return null;\n+        }\n         if (namespace.equals(\"java.package\")) {\n             return BundleInfo.PACKAGE_TYPE;\n         }", "filename": "src/java/org/apache/ivy/osgi/p2/P2MetadataParser.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/e1188f368087ba4bcfada44d645e4f8661d7f9b2", "parent": "https://github.com/apache/ant-ivy/commit/82bd5be8735c01a767fc3ebc3eb92369ac68302d", "message": "ant workspace resolver: avoid a NPE on not found resolver", "bug_id": "ant-ivy_2", "file": [{"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/e1188f368087ba4bcfada44d645e4f8661d7f9b2/src/java/org/apache/ivy/core/settings/IvySettings.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e1188f368087ba4bcfada44d645e4f8661d7f9b2/src/java/org/apache/ivy/core/settings/IvySettings.java", "sha": "b5f4849e61ea5062b17976d789832c5176890cd3", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/settings/IvySettings.java?ref=e1188f368087ba4bcfada44d645e4f8661d7f9b2", "patch": "@@ -915,9 +915,9 @@ public synchronized DependencyResolver getResolver(String resolverName) {\n         DependencyResolver resolver = resolversMap.get(resolverName);\n         if (resolver == null) {\n             Message.error(\"unknown resolver \" + resolverName);\n-        }\n-        if (workspaceResolver != null && !(resolver instanceof WorkspaceChainResolver)) {\n+        } else if (workspaceResolver != null && !(resolver instanceof WorkspaceChainResolver)) {\n             resolver = new WorkspaceChainResolver(this, resolver, workspaceResolver);\n+            resolversMap.put(resolver.getName(), resolver);\n             resolversMap.put(resolverName, resolver);\n         }\n         return resolver;", "filename": "src/java/org/apache/ivy/core/settings/IvySettings.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/391d296bf5314d8183a17a60564fafa52c3aede7", "parent": "https://github.com/apache/ant-ivy/commit/cefe582655f9b3f13191c500bd78304257e10746", "message": "prevent NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484449 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_3", "file": [{"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/391d296bf5314d8183a17a60564fafa52c3aede7/src/java/fr/jayasoft/ivy/resolver/BasicResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/391d296bf5314d8183a17a60564fafa52c3aede7/src/java/fr/jayasoft/ivy/resolver/BasicResolver.java", "sha": "e8e8cc8cbc7652fa348d9707c670b7721e1775bc", "changes": 8, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/fr/jayasoft/ivy/resolver/BasicResolver.java?ref=391d296bf5314d8183a17a60564fafa52c3aede7", "patch": "@@ -160,12 +160,12 @@ public ResolvedModuleRevision getDependency(DependencyDescriptor dd, ResolveData\n                 }\r\n             }\r\n         }\r\n-        if (getIvy().isInterrupted()) {\r\n+        if (getIvy() != null && getIvy().isInterrupted()) {\r\n         \tthrow new RuntimeException(\"interrupted\");\r\n         }\r\n         URL cachedIvyURL = null;\r\n         ResolvedResource ivyRef = findIvyFileRef(dd, data);\r\n-        if (getIvy().isInterrupted()) {\r\n+        if (getIvy() != null && getIvy().isInterrupted()) {\r\n         \tthrow new RuntimeException(\"interrupted\");\r\n         }\r\n         searched = true;\r\n@@ -183,7 +183,7 @@ public ResolvedModuleRevision getDependency(DependencyDescriptor dd, ResolveData\n             parser = XmlModuleDescriptorParser.getInstance();\r\n             md = DefaultModuleDescriptor.newDefaultInstance(mrid, dd.getAllDependencyArtifactsIncludes());\r\n             ResolvedResource artifactRef = findFirstArtifactRef(md, dd, data);\r\n-            if (getIvy().isInterrupted()) {\r\n+            if (getIvy() != null && getIvy().isInterrupted()) {\r\n             \tthrow new RuntimeException(\"interrupted\");\r\n             }\r\n             if (artifactRef == null) {\r\n@@ -688,7 +688,7 @@ public DownloadReport download(Artifact[] artifacts, Ivy ivy, File cache) {\n                 \tMessage.warn(\"\\t[FAILED     ] \"+artifacts[i]+\" : \"+ex.getMessage()+\" (\"+(System.currentTimeMillis()-start)+\"ms)\");\r\n                 \tadr.setDownloadStatus(DownloadStatus.FAILED);\r\n                 }\r\n-                if (getIvy().isInterrupted()) {\r\n+                if (getIvy() != null && getIvy().isInterrupted()) {\r\n                 \tthrow new RuntimeException(\"interrupted\");\r\n                 }\r\n         \t}\r", "filename": "src/java/fr/jayasoft/ivy/resolver/BasicResolver.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/391d296bf5314d8183a17a60564fafa52c3aede7/src/java/fr/jayasoft/ivy/resolver/ChainResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/391d296bf5314d8183a17a60564fafa52c3aede7/src/java/fr/jayasoft/ivy/resolver/ChainResolver.java", "sha": "a0e7840cb024c1dbcda0caa58f3dd116d029f84e", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/fr/jayasoft/ivy/resolver/ChainResolver.java?ref=391d296bf5314d8183a17a60564fafa52c3aede7", "patch": "@@ -77,7 +77,7 @@ public ResolvedModuleRevision getDependency(DependencyDescriptor dd, ResolveData\n                     setLatest(resolver, oldLatest);\r\n                 }\r\n             }\r\n-            if (getIvy().isInterrupted()) {\r\n+            if (getIvy() != null && getIvy().isInterrupted()) {\r\n             \tthrow new RuntimeException(\"interrupted\");\r\n             }\r\n             if (mr != null) {\r", "filename": "src/java/fr/jayasoft/ivy/resolver/ChainResolver.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/391d296bf5314d8183a17a60564fafa52c3aede7/src/java/fr/jayasoft/ivy/resolver/DualResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/391d296bf5314d8183a17a60564fafa52c3aede7/src/java/fr/jayasoft/ivy/resolver/DualResolver.java", "sha": "6bbba2701b618d2f962ef9b9805004970d64f7c3", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/fr/jayasoft/ivy/resolver/DualResolver.java?ref=391d296bf5314d8183a17a60564fafa52c3aede7", "patch": "@@ -57,7 +57,7 @@ public ResolvedModuleRevision getDependency(DependencyDescriptor dd, ResolveData\n         data = new ResolveData(data, doValidate(data));\r\n         final ResolvedModuleRevision mr = _ivyResolver.getDependency(dd, data);\r\n         if (mr == null) {\r\n-            if (getIvy().isInterrupted()) {\r\n+            if (getIvy() != null && getIvy().isInterrupted()) {\r\n             \tthrow new RuntimeException(\"interrupted\");\r\n             }\r\n             if (isAllownomd()) {\r", "filename": "src/java/fr/jayasoft/ivy/resolver/DualResolver.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/7cb2945d423a80ab17721bc290f9b61c2bda3f23", "parent": "https://github.com/apache/ant-ivy/commit/9740c824d5953ed90ab917b46611c5c9d6e04c56", "message": "fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484410 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_4", "file": [{"additions": 9, "raw_url": "https://github.com/apache/ant-ivy/raw/7cb2945d423a80ab17721bc290f9b61c2bda3f23/src/java/fr/jayasoft/ivy/event/download/EndArtifactDownloadEvent.java", "blob_url": "https://github.com/apache/ant-ivy/blob/7cb2945d423a80ab17721bc290f9b61c2bda3f23/src/java/fr/jayasoft/ivy/event/download/EndArtifactDownloadEvent.java", "sha": "f94521275efde29ffd33111932493fe296ac1178", "changes": 11, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/fr/jayasoft/ivy/event/download/EndArtifactDownloadEvent.java?ref=7cb2945d423a80ab17721bc290f9b61c2bda3f23", "patch": "@@ -7,6 +7,7 @@\n package fr.jayasoft.ivy.event.download;\r\n \r\n import fr.jayasoft.ivy.Artifact;\r\n+import fr.jayasoft.ivy.ArtifactOrigin;\r\n import fr.jayasoft.ivy.DependencyResolver;\r\n import fr.jayasoft.ivy.Ivy;\r\n import fr.jayasoft.ivy.report.ArtifactDownloadReport;\r\n@@ -24,8 +25,14 @@ public EndArtifactDownloadEvent(Ivy source, DependencyResolver resolver, Artifac\n         addAttribute(\"resolver\", _resolver.getName());\r\n         addAttribute(\"status\", _report.getDownloadStatus().toString());\r\n         addAttribute(\"size\", String.valueOf(_report.getSize()));\r\n-        addAttribute(\"origin\", _report.getArtifactOrigin().getLocation());\r\n-        addAttribute(\"local\", String.valueOf(_report.getArtifactOrigin().isLocal()));\r\n+        ArtifactOrigin origin = report.getArtifactOrigin();\r\n+        if (origin != null) {\r\n+        \taddAttribute(\"origin\", _report.getArtifactOrigin().getLocation());\r\n+        \taddAttribute(\"local\", String.valueOf(_report.getArtifactOrigin().isLocal()));\r\n+        } else {\r\n+            addAttribute(\"origin\", \"\");\r\n+            addAttribute(\"local\", \"\");\r\n+        }\r\n     }\r\n \r\n     public ArtifactDownloadReport getReport() {\r", "filename": "src/java/fr/jayasoft/ivy/event/download/EndArtifactDownloadEvent.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/b3cb62487e5f7531a2aa366665720e81cabc9783", "parent": "https://github.com/apache/ant-ivy/commit/6132d98ccb5171eb00802606c8dc729766986dbe", "message": "fix npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484309 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_5", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/b3cb62487e5f7531a2aa366665720e81cabc9783/src/java/fr/jayasoft/ivy/report/XmlReportOutputter.java", "blob_url": "https://github.com/apache/ant-ivy/blob/b3cb62487e5f7531a2aa366665720e81cabc9783/src/java/fr/jayasoft/ivy/report/XmlReportOutputter.java", "sha": "fd1ca748f3a7b955aa03e1d4675c3baef58543a4", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/fr/jayasoft/ivy/report/XmlReportOutputter.java?ref=b3cb62487e5f7531a2aa366665720e81cabc9783", "patch": "@@ -91,7 +91,7 @@ public void output(ConfigurationResolveReport report, File destDir) {\n                     if (md != null && md.getHomePage() != null) {\r\n                         details.append(\" homepage=\\\"\").append(md.getHomePage()).append(\"\\\"\");\r\n                     }\r\n-                    Map extraAttributes = md.getExtraAttributes();\r\n+                    Map extraAttributes = md!=null?md.getExtraAttributes():dep.getResolvedId().getExtraAttributes();\r\n                     for (Iterator iterator = extraAttributes.keySet().iterator(); iterator.hasNext();) {\r\n                         String attName = (String)iterator.next();\r\n                         details.append(\" \").append(attName).append(\"=\\\"\").append(extraAttributes.get(attName)).append(\"\\\"\");\r", "filename": "src/java/fr/jayasoft/ivy/report/XmlReportOutputter.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/1ae9dfaf45e0a51ee7d604551f7e1932d1787975", "parent": "https://github.com/apache/ant-ivy/commit/2e7597726743c34058cf9ad6c6ba5839ff9ec4dd", "message": "IVY-1288 : fix NPE when there is no branch\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@1373369 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_6", "file": [{"additions": 14, "raw_url": "https://github.com/apache/ant-ivy/raw/1ae9dfaf45e0a51ee7d604551f7e1932d1787975/src/java/org/apache/ivy/ant/IvyResolve.java", "blob_url": "https://github.com/apache/ant-ivy/blob/1ae9dfaf45e0a51ee7d604551f7e1932d1787975/src/java/org/apache/ivy/ant/IvyResolve.java", "sha": "c4de8b20106305a5c8d94faca47f7bb216c6fed1", "changes": 24, "status": "modified", "deletions": 10, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/ant/IvyResolve.java?ref=1ae9dfaf45e0a51ee7d604551f7e1932d1787975", "patch": "@@ -357,17 +357,21 @@ public void doExecute() throws BuildException {\n                     String parentModule = parent.getResolvedParentRevisionId().getName();\n                     String parentRevision = parent.getResolvedParentRevisionId().getRevision();\n                     String parentBranch = parent.getResolvedParentRevisionId().getBranch();\n-                    getProject().setProperty(\"ivy.parent[\"+i+\"].organisation\", parentOrg);\n-                    settings.setVariable(\"ivy.parent[\"+i+\"].organisation\", parentOrg);\n-                    getProject().setProperty(\"ivy.parent[\"+i+\"].module\", parentModule);\n-                    settings.setVariable(\"ivy.parent[\"+i+\"].module\", parentModule);\n-                    getProject().setProperty(\"ivy.parent[\"+i+\"].revision\", parentRevision);\n-                    settings.setVariable(\"ivy.parent[\"+i+\"].revision\", parentRevision);\n-                    getProject().setProperty(\"ivy.parent[\"+i+\"].branch\", parentBranch);\n-                    settings.setVariable(\"ivy.parent[\"+i+\"].branch\", parentBranch);\n+                    getProject().setProperty(\"ivy.parent[\" + i + \"].organisation\", parentOrg);\n+                    settings.setVariable(\"ivy.parent[\" + i + \"].organisation\", parentOrg);\n+                    getProject().setProperty(\"ivy.parent[\" + i + \"].module\", parentModule);\n+                    settings.setVariable(\"ivy.parent[\" + i + \"].module\", parentModule);\n+                    getProject().setProperty(\"ivy.parent[\" + i + \"].revision\", parentRevision);\n+                    settings.setVariable(\"ivy.parent[\" + i + \"].revision\", parentRevision);\n+                    if (parentBranch != null) {\n+                        getProject().setProperty(\"ivy.parent[\" + i + \"].branch\", parentBranch);\n+                        settings.setVariable(\"ivy.parent[\" + i + \"].branch\", parentBranch);\n+                    }\n                 }\n-                getProject().setProperty(\"ivy.parents.count\", String.valueOf(md.getInheritedDescriptors().length));\n-                settings.setVariable(\"ivy.parents.count\", String.valueOf(md.getInheritedDescriptors().length));\n+                getProject().setProperty(\"ivy.parents.count\",\n+                    String.valueOf(md.getInheritedDescriptors().length));\n+                settings.setVariable(\"ivy.parents.count\",\n+                    String.valueOf(md.getInheritedDescriptors().length));\n \n                 Boolean hasChanged = null;\n                 if (getCheckIfChanged()) {", "filename": "src/java/org/apache/ivy/ant/IvyResolve.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/9de9a1ceb8e0c285b0064d75f56b57968804ceef", "parent": "https://github.com/apache/ant-ivy/commit/f1dab549180cf947cb7560ffa63787647d0403e8", "message": "avoid NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@1201497 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_7", "file": [{"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/9de9a1ceb8e0c285b0064d75f56b57968804ceef/src/java/org/apache/ivy/osgi/core/BundleInfo.java", "blob_url": "https://github.com/apache/ant-ivy/blob/9de9a1ceb8e0c285b0064d75f56b57968804ceef/src/java/org/apache/ivy/osgi/core/BundleInfo.java", "sha": "218f12cba9f9c15d0e851258352d5d6242e9dc95", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/osgi/core/BundleInfo.java?ref=9de9a1ceb8e0c285b0064d75f56b57968804ceef", "patch": "@@ -267,7 +267,7 @@ public boolean equals(Object obj) {\n         Iterator itCapabilities = capabilities.iterator();\n         while (itCapabilities.hasNext()) {\n             BundleCapability capability = (BundleCapability) itCapabilities.next();\n-            if (capability.getType().equals(PACKAGE_TYPE)) {\n+            if (PACKAGE_TYPE.equals(capability.getType())) {\n                 set.add((ExportPackage) capability);\n             }\n         }\n@@ -279,7 +279,7 @@ public boolean equals(Object obj) {\n         Iterator itCapabilities = capabilities.iterator();\n         while (itCapabilities.hasNext()) {\n             BundleCapability capability = (BundleCapability) itCapabilities.next();\n-            if (capability.getType().equals(SERVICE_TYPE)) {\n+            if (SERVICE_TYPE.equals(capability.getType())) {\n                 set.add(capability);\n             }\n         }", "filename": "src/java/org/apache/ivy/osgi/core/BundleInfo.java"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/9de9a1ceb8e0c285b0064d75f56b57968804ceef/src/java/org/apache/ivy/osgi/core/BundleInfoAdapter.java", "blob_url": "https://github.com/apache/ant-ivy/blob/9de9a1ceb8e0c285b0064d75f56b57968804ceef/src/java/org/apache/ivy/osgi/core/BundleInfoAdapter.java", "sha": "d345ab96333ea22738376bf130453957182ed0cc", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/osgi/core/BundleInfoAdapter.java?ref=9de9a1ceb8e0c285b0064d75f56b57968804ceef", "patch": "@@ -283,7 +283,7 @@ private static void requirementAsDependency(DefaultModuleDescriptor md, BundleIn\n             String type = requirement.getType();\n             String name = requirement.getName();\n \n-            if (type.equals(BundleInfo.PACKAGE_TYPE) && exportedPkgNames.contains(name)) {\n+            if (BundleInfo.PACKAGE_TYPE.equals(type) && exportedPkgNames.contains(name)) {\n                 // don't declare package exported by the current bundle\n                 continue;\n             }\n@@ -293,7 +293,7 @@ private static void requirementAsDependency(DefaultModuleDescriptor md, BundleIn\n             DefaultDependencyDescriptor dd = new DefaultDependencyDescriptor(ddmrid, false);\n \n             String conf = CONF_NAME_DEFAULT;\n-            if (type.equals(BundleInfo.PACKAGE_TYPE)) {\n+            if (BundleInfo.PACKAGE_TYPE.equals(type)) {\n                 // declare the configuration for the package\n                 conf = CONF_USE_PREFIX + name;\n                 md.addConfiguration(new Configuration(CONF_USE_PREFIX + name, Visibility.PUBLIC,", "filename": "src/java/org/apache/ivy/osgi/core/BundleInfoAdapter.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/f91eece7131115bbc3ae0a38ef6da5c091a70955", "parent": "https://github.com/apache/ant-ivy/commit/9fd1c4fa3d8827c2d046eefd08e3474617cd302a", "message": "fix a NPE and remove a not working test\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@1056458 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_8", "file": [{"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/f91eece7131115bbc3ae0a38ef6da5c091a70955/src/java/org/apache/ivy/osgi/updatesite/xml/EclipseUpdateSiteParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/f91eece7131115bbc3ae0a38ef6da5c091a70955/src/java/org/apache/ivy/osgi/updatesite/xml/EclipseUpdateSiteParser.java", "sha": "b31a8f7d976b5dd29b9f08bdc87e22766c25123f", "changes": 2, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/osgi/updatesite/xml/EclipseUpdateSiteParser.java?ref=f91eece7131115bbc3ae0a38ef6da5c091a70955", "patch": "@@ -82,6 +82,8 @@ public void childHanlded(DelegetingHandler child) {\n         }\n \n         protected void handleAttributes(Attributes atts) {\n+            updatesite = new UpdateSite();\n+\n             String url = atts.getValue(URL);\n             if (url != null && !(\"\".equals(url.trim()))) {\n                 if (!url.endsWith(\"/\") && !url.endsWith(File.separator)) {", "filename": "src/java/org/apache/ivy/osgi/updatesite/xml/EclipseUpdateSiteParser.java"}, {"additions": 0, "raw_url": "https://github.com/apache/ant-ivy/raw/f91eece7131115bbc3ae0a38ef6da5c091a70955/test/java/org/apache/ivy/osgi/updatesite/UpdateSiteLoaderTest.java", "blob_url": "https://github.com/apache/ant-ivy/blob/f91eece7131115bbc3ae0a38ef6da5c091a70955/test/java/org/apache/ivy/osgi/updatesite/UpdateSiteLoaderTest.java", "sha": "bdff758435d66986f065c541798e92ee5bd1062a", "changes": 6, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/osgi/updatesite/UpdateSiteLoaderTest.java?ref=f91eece7131115bbc3ae0a38ef6da5c091a70955", "patch": "@@ -32,11 +32,5 @@ public void testIvyDE() throws IOException, ParseException, SAXException {\n         RepoDescriptor site = loader.load(\"http://www.apache.org/dist/ant/ivyde/updatesite/\");\n         assertEquals(13, site.getModules().size());\n     }\n-    \n \n-    public void testEclipse() throws IOException, ParseException, SAXException {\n-        UpdateSiteLoader loader = new UpdateSiteLoader();\n-        RepoDescriptor site = loader.load(\"http://download.eclipse.org/releases/helios/\");\n-        assertEquals(13, site.getModules().size());\n-    }\n }", "filename": "test/java/org/apache/ivy/osgi/updatesite/UpdateSiteLoaderTest.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/80729089051c99ba0935026619cb212d92e4339c", "parent": "https://github.com/apache/ant-ivy/commit/fd970696172c08dd024c8d607789c1252d5b08d9", "message": "Fixed a possible NPE in the FileUtil#forceDelete method.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@1052390 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_9", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/80729089051c99ba0935026619cb212d92e4339c/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/80729089051c99ba0935026619cb212d92e4339c/CHANGES.txt", "sha": "ed73c530009282716763c755e081762abb8182c2", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=80729089051c99ba0935026619cb212d92e4339c", "patch": "@@ -117,6 +117,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n - NEW: ivy:resolve and post resole task can now have inlined dependencies declaration.\n - NEW: Import Bushel into Ivy core (IVY-1241)\n \n+- FIX: NullPointerException in FileUtil#forceDelete.\n - FIX: XmlModuleDescriptorUpdater is a mess that produces broken xmls in many cases (IVY-1010)\n - FIX: ivy.xml that contains UTF-8 encoded umlauts cannot be bigger than 10000 bytes (IVY-1253)\n - FIX: Can not use a v[revision] in an artifact pattern of a filesystem resolver (IVY-1238)", "filename": "CHANGES.txt"}, {"additions": 5, "raw_url": "https://github.com/apache/ant-ivy/raw/80729089051c99ba0935026619cb212d92e4339c/src/java/org/apache/ivy/util/FileUtil.java", "blob_url": "https://github.com/apache/ant-ivy/blob/80729089051c99ba0935026619cb212d92e4339c/src/java/org/apache/ivy/util/FileUtil.java", "sha": "848a573dc20bdc0171847d2c7e2ae9ec42f64cd7", "changes": 8, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/FileUtil.java?ref=80729089051c99ba0935026619cb212d92e4339c", "patch": "@@ -309,9 +309,11 @@ public static boolean forceDelete(File file) {\n         }\n         if (file.isDirectory()) {\n             File[] files = file.listFiles();\n-            for (int i = 0; i < files.length; i++) {\n-                if (!forceDelete(files[i])) {\n-                    return false;\n+            if (files != null) {\n+                for (int i = 0; i < files.length; i++) {\n+                    if (!forceDelete(files[i])) {\n+                        return false;\n+                    }\n                 }\n             }\n         }", "filename": "src/java/org/apache/ivy/util/FileUtil.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/03be6a16ec7561d643c1d3d91eb31e30514c45ad", "parent": "https://github.com/apache/ant-ivy/commit/3ce8d6bf0bf163206774946d3581efd039c31036", "message": "Fixed NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@984586 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_10", "file": [{"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/03be6a16ec7561d643c1d3d91eb31e30514c45ad/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorWriter.java", "blob_url": "https://github.com/apache/ant-ivy/blob/03be6a16ec7561d643c1d3d91eb31e30514c45ad/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorWriter.java", "sha": "3e4d80de315181937da2f342e26feb641b226e59", "changes": 4, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorWriter.java?ref=03be6a16ec7561d643c1d3d91eb31e30514c45ad", "patch": "@@ -167,6 +167,10 @@ private static void printDependencies(ModuleDescriptor md, PrintWriter out,\n             \n             // now print the dependencies listed in the ModuleDescriptor\n             ConfigurationScopeMapping mapping = options.getMapping();\n+            if (mapping == null) {\n+                mapping = DEFAULT_MAPPING;\n+            }\n+            \n             for (int i = 0; i < dds.length; i++) {\n                 ModuleRevisionId mrid = dds[i].getDependencyRevisionId();\n                 out.println(\"    <dependency>\");", "filename": "src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorWriter.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/4f5d25205a9cec988de300a452d641a155406b79", "parent": "https://github.com/apache/ant-ivy/commit/79ee424b36cbc489b3bef05f6231e81d05f0b5e0", "message": "Avoid NPE if pubdate is null for some reason...\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@786260 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_11", "file": [{"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/4f5d25205a9cec988de300a452d641a155406b79/src/java/org/apache/ivy/plugins/report/XmlReportParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/4f5d25205a9cec988de300a452d641a155406b79/src/java/org/apache/ivy/plugins/report/XmlReportParser.java", "sha": "d094d112752e01880cdac5ce4018d1320aeb6967", "changes": 5, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/report/XmlReportParser.java?ref=4f5d25205a9cec988de300a452d641a155406b79", "patch": "@@ -104,7 +104,10 @@ public void startElement(String uri, String localName, String qName,\n                             realMrids.add(mrid);\n                         }\n                         try {\n-                            pubdate = Ivy.DATE_FORMAT.parse(attributes.getValue(\"pubdate\"));\n+                            String pubDateAttr = attributes.getValue(\"pubdate\");\n+                            if (pubDateAttr != null) {\n+                                pubdate = Ivy.DATE_FORMAT.parse(pubDateAttr);\n+                            }\n                             skip = false;\n                         } catch (ParseException e) {\n                             throw new IllegalArgumentException(\"invalid publication date for \"", "filename": "src/java/org/apache/ivy/plugins/report/XmlReportParser.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/79e8ea94db5f613b1d0d69bffb45eda968a41f04", "parent": "https://github.com/apache/ant-ivy/commit/cc06ae9bf7a1fb6cee46c40d2a6388ac05d3f5d1", "message": "FIX: NPE in LogReportOutputter (IVY-961)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@710178 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_12", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/79e8ea94db5f613b1d0d69bffb45eda968a41f04/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/79e8ea94db5f613b1d0d69bffb45eda968a41f04/CHANGES.txt", "sha": "a2c130afbab71a62421cc21346cdf6171cd5f389", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=79e8ea94db5f613b1d0d69bffb45eda968a41f04", "patch": "@@ -85,6 +85,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n =====================================\n - FIX: Log levels aren't respected in certain cases using the standalone functionality (IVY-960) (thanks to Patrick Woodworth)\n - FIX: Listing of URL's under a given URL does not handle fully specified URL's (IVY-959) (thanks to Randy Nott)\n+- FIX: NPE in LogReportOutputter (IVY-961)\n \n    2.0.0-rc2\n =====================================", "filename": "CHANGES.txt"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/79e8ea94db5f613b1d0d69bffb45eda968a41f04/src/java/org/apache/ivy/plugins/report/LogReportOutputter.java", "blob_url": "https://github.com/apache/ant-ivy/blob/79e8ea94db5f613b1d0d69bffb45eda968a41f04/src/java/org/apache/ivy/plugins/report/LogReportOutputter.java", "sha": "35aa519a6e65dd0fc3c99ec746fc832e988cf058", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/report/LogReportOutputter.java?ref=79e8ea94db5f613b1d0d69bffb45eda968a41f04", "patch": "@@ -48,6 +48,7 @@ public void output(\n             ResolveReport report, ResolutionCacheManager cacheMgr, ResolveOptions options) \n             throws IOException {\n         IvySettings settings = IvyContext.getContext().getSettings();\n+\n         if (settings.logModulesInUse() && ResolveOptions.LOG_DEFAULT.equals(options.getLog())) {\n             Message.info(\"\\t:: modules in use:\");\n             List dependencies = new ArrayList(report.getDependencies());\n@@ -56,7 +57,7 @@ public void output(\n                 String[] confs = report.getConfigurations();\n                 for (int i = 0; i < dependencies.size(); i++) {\n                     IvyNode node = (IvyNode) dependencies.get(i);\n-                    if (node.isCompletelyEvicted()) {\n+                    if (node.isCompletelyEvicted() || node.hasProblem()) {\n                         continue;\n                     }\n                     List nodeConfs = new ArrayList(confs.length);", "filename": "src/java/org/apache/ivy/plugins/report/LogReportOutputter.java"}, {"additions": 10, "raw_url": "https://github.com/apache/ant-ivy/raw/79e8ea94db5f613b1d0d69bffb45eda968a41f04/test/java/org/apache/ivy/ant/IvyResolveTest.java", "blob_url": "https://github.com/apache/ant-ivy/blob/79e8ea94db5f613b1d0d69bffb45eda968a41f04/test/java/org/apache/ivy/ant/IvyResolveTest.java", "sha": "c0e09784d7c2f96b85496923c996153abe8ebb86", "changes": 10, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/ant/IvyResolveTest.java?ref=79e8ea94db5f613b1d0d69bffb45eda968a41f04", "patch": "@@ -241,6 +241,16 @@ public void testFailure() throws Exception {\n         }\n     }\n \n+    public void testIvyLogModulesInUseWithFailure() throws Exception {\n+        resolve.getProject().setProperty(\"ivy.log.modules.in.use\", \"true\");\n+        resolve.setFile(new File(\"test/java/org/apache/ivy/ant/ivy-failure.xml\"));\n+        resolve.setHaltonfailure(false);\n+        resolve.execute();\n+        \n+        // we did manage to get here, so no NPE has been thrown (IVY-961)\n+    }\n+\n+    \n     public void testFailureWithMissingConfigurations() throws Exception {\n         try {\n             resolve.setFile(new File(\"test/java/org/apache/ivy/ant/ivy-simple.xml\"));", "filename": "test/java/org/apache/ivy/ant/IvyResolveTest.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/a93da01747d6d72a3aa155c12240549f1211dc43", "parent": "https://github.com/apache/ant-ivy/commit/dce9dcdd312bb39d9fbbaaedd120cc9e3dc81483", "message": "prevent NPE when relocated module is not found\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@636466 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_13", "file": [{"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/a93da01747d6d72a3aa155c12240549f1211dc43/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/a93da01747d6d72a3aa155c12240549f1211dc43/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java", "sha": "2bb1733a724ab3826641aa95a10a6211d8b154cd", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java?ref=a93da01747d6d72a3aa155c12240549f1211dc43", "patch": "@@ -134,6 +134,12 @@ public ModuleDescriptor parseDescriptor(ParserSettings ivySettings, URL descript\n                     Message.warn(\"Resolution will only pick dependencies of the relocated element.\"\n                             + \"  Artefact and other metadata will be ignored.\");\n                     ResolvedModuleRevision relocatedModule = parseOtherPom(ivySettings, relocation);\n+                    if (relocatedModule == null) {\n+                        throw new ParseException(\"impossible to load module \"\n+                            + relocation + \" to which \" \n+                            + mdBuilder.getModuleDescriptor().getModuleRevisionId()\n+                            + \" has been relocated\", 0);\n+                    }\n                     DependencyDescriptor[] dds = relocatedModule.getDescriptor().getDependencies();\n                     for (int i = 0; i < dds.length; i++) {\n                         mdBuilder.addDependency(dds[i]);", "filename": "src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/4b9e05f940da94ce9eacb3e89f900dcb40712fc8", "parent": "https://github.com/apache/ant-ivy/commit/3e5b60de4f90c3cffc88e3df769bb4531c0dc89e", "message": "prevent NPE when loading parent pom failed\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@635977 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_14", "file": [{"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/4b9e05f940da94ce9eacb3e89f900dcb40712fc8/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/4b9e05f940da94ce9eacb3e89f900dcb40712fc8/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java", "sha": "c09814483445cefb53293f4f6a4465b765fea19f", "changes": 7, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java?ref=4b9e05f940da94ce9eacb3e89f900dcb40712fc8", "patch": "@@ -171,7 +171,12 @@ public ModuleDescriptor parseDescriptor(ParserSettings ivySettings, URL descript\n                         domReader.getParentVersion());\n                     ResolvedModuleRevision parentModule = parseOtherPom(ivySettings, \n                         parentModRevID);\n-                    parentDescr = parentModule.getDescriptor();\n+                    if (parentModule != null) {\n+                        parentDescr = parentModule.getDescriptor();\n+                    } else {\n+                       Message.warn(\"impossible to load parent for \" + descriptorURL + \".\"\n+                           + \" Parent=\" + parentModRevID); \n+                    }\n                 }\n                                 \n                 Map pomProperties = domReader.getPomProperties();", "filename": "src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/cc28a242d0042076f20e6e237fba438b572d0a89", "parent": "https://github.com/apache/ant-ivy/commit/32c182c2d826c10ac17ad04c28ad4e37cd4a733e", "message": "FIX: NPE while resolving dependencies (IVY-701)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@612175 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_15", "file": [{"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/cc28a242d0042076f20e6e237fba438b572d0a89/src/java/org/apache/ivy/plugins/resolver/AbstractResourceResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/cc28a242d0042076f20e6e237fba438b572d0a89/src/java/org/apache/ivy/plugins/resolver/AbstractResourceResolver.java", "sha": "490ac6ef484ccfd7a5f3939d8aa63c68ac559a6c", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/AbstractResourceResolver.java?ref=cc28a242d0042076f20e6e237fba438b572d0a89", "patch": "@@ -158,6 +158,12 @@ public ResolvedResource findResource(ResolvedResource[] rress, String name,\n             }\n             if (versionMatcher.needModuleDescriptor(mrid, foundMrid)) {\n                 ResolvedResource r = rmdparser.parse(rres.getResource(), rres.getRevision());\n+                if (r == null) {\n+                    Message.debug(\"\\t\" + name \n+                        + \": impossible to get module descriptor resource: \" + rres);\n+                    rejected.add(rres.getRevision() + \" (no or bad MD)\");\n+                    continue;\n+                }\n                 ModuleDescriptor md = ((MDResolvedResource) r).getResolvedModuleRevision()\n                         .getDescriptor();\n                 if (md.isDefault()) {", "filename": "src/java/org/apache/ivy/plugins/resolver/AbstractResourceResolver.java"}, {"additions": 10, "raw_url": "https://github.com/apache/ant-ivy/raw/cc28a242d0042076f20e6e237fba438b572d0a89/src/java/org/apache/ivy/plugins/resolver/util/ResourceMDParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/cc28a242d0042076f20e6e237fba438b572d0a89/src/java/org/apache/ivy/plugins/resolver/util/ResourceMDParser.java", "sha": "fb3e072e530ad82c76a94e47d2d2a80010b4917d", "changes": 10, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/util/ResourceMDParser.java?ref=cc28a242d0042076f20e6e237fba438b572d0a89", "patch": "@@ -20,5 +20,15 @@\n import org.apache.ivy.plugins.repository.Resource;\n \n public interface ResourceMDParser {\n+    /**\n+     * Parses the module descriptor designed by the given resource.\n+     * \n+     * @param resource\n+     *            the resource at which the module descriptor is located\n+     * @param rev\n+     *            the revision at which the module descriptor should be\n+     * @return the parsed module descriptor as a {@link MDResolvedResource}, or <code>null</code>\n+     *         if parsing has failed or if the resource is not available.\n+     */\n     MDResolvedResource parse(Resource resource, String rev);\n }", "filename": "src/java/org/apache/ivy/plugins/resolver/util/ResourceMDParser.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/fe57a6529bce3d2bc15835f16e83cb9363bdc761", "parent": "https://github.com/apache/ant-ivy/commit/f917c22c7286a6d795a7ea6a5a941a3ae68a9b3b", "message": "Fixed NPE during Ivy build.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@537588 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_16", "file": [{"additions": 5, "raw_url": "https://github.com/apache/ant-ivy/raw/fe57a6529bce3d2bc15835f16e83cb9363bdc761/ant.patterns", "blob_url": "https://github.com/apache/ant-ivy/blob/fe57a6529bce3d2bc15835f16e83cb9363bdc761/ant.patterns", "sha": "dd6f5a7aeedb454e01baa9e96afd27e66f66e7e7", "changes": 7, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/ant.patterns?ref=fe57a6529bce3d2bc15835f16e83cb9363bdc761", "patch": "@@ -1,2 +1,5 @@\n-#This file defines the sources to compile for ivy-ant.jar\r\n-org/apache/ivy/ant/**/*.java\n\\ No newline at end of file\n+#This section defines the sources to compile for ivy-ant.jar\r\n+org/apache/ivy/ant/*.java\r\n+\r\n+#This section defines the resources to copy for ivy-ant.jar\r\n+org/apache/ivy/ant/*.xml\n\\ No newline at end of file", "filename": "ant.patterns"}, {"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/fe57a6529bce3d2bc15835f16e83cb9363bdc761/build.xml", "blob_url": "https://github.com/apache/ant-ivy/blob/fe57a6529bce3d2bc15835f16e83cb9363bdc761/build.xml", "sha": "24276d2c2beffb31445930e53e2d4fdbfd106be5", "changes": 8, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/build.xml?ref=fe57a6529bce3d2bc15835f16e83cb9363bdc761", "patch": "@@ -163,8 +163,9 @@\n \t\t</javac>\r\n \t\t<copy todir=\"${core.classes.build.dir}\" includeEmptyDirs=\"false\">\r\n     \t\t<fileset dir=\"${src.dir}\">\r\n-    \t\t\t<include name=\"org/apache/ivy/core/**\" />\r\n       \t\t\t<exclude name=\"**/*.java\"/>\r\n+    \t\t\t<excludesfile name=\"ant.patterns\" />\r\n+    \t\t\t<excludesfile name=\"optional.patterns\" />\r\n     \t\t</fileset>\r\n   \t\t</copy>\r\n \t\t\r\n@@ -198,7 +199,7 @@\n \t\t</javac>\r\n \t\t<copy todir=\"${ant.classes.build.dir}\" includeEmptyDirs=\"false\">\r\n     \t\t<fileset dir=\"${src.dir}\">\r\n-    \t\t\t<include name=\"org/apache/ivy/ant/**\" />\r\n+    \t\t\t<includesfile name=\"ant.patterns\" />\r\n       \t\t\t<exclude name=\"**/*.java\"/>\r\n     \t\t</fileset>\r\n   \t\t</copy>\r\n@@ -226,8 +227,7 @@\n \t\t</javac>\r\n \t\t<copy todir=\"${core.classes.build.dir}\" includeEmptyDirs=\"false\">\r\n     \t\t<fileset dir=\"${src.dir}\">\r\n-    \t\t\t<exclude name=\"org/apache/ivy/core/**\" />\r\n-    \t\t\t<exclude name=\"org/apache/ivy/ant/**\" />\r\n+    \t\t\t<includesfile name=\"optional.patterns\" />\r\n       \t\t\t<exclude name=\"**/*.java\"/>\r\n     \t\t</fileset>\r\n   \t\t</copy>\r", "filename": "build.xml"}, {"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/fe57a6529bce3d2bc15835f16e83cb9363bdc761/optional.patterns", "blob_url": "https://github.com/apache/ant-ivy/blob/fe57a6529bce3d2bc15835f16e83cb9363bdc761/optional.patterns", "sha": "384dbf1db55ad13d4718ab909e0c8dff69874b83", "changes": 5, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/optional.patterns?ref=fe57a6529bce3d2bc15835f16e83cb9363bdc761", "patch": "@@ -10,4 +10,7 @@ org/apache/ivy/plugins/resolver/SFTPResolver.java\n org/apache/ivy/plugins/resolver/SshResolver.java\r\n org/apache/ivy/plugins/resolver/VfsResolver.java\r\n org/apache/ivy/plugins/resolver/VsftpResolver.java\r\n-org/apache/ivy/util/url/HttpClientHandler.java\n\\ No newline at end of file\n+org/apache/ivy/util/url/HttpClientHandler.java\r\n+\r\n+#This section defines the resources to copy for ivy-optional.jar\r\n+org/apache/ivy/plugins/repository/vfs/*.xml\n\\ No newline at end of file", "filename": "optional.patterns"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/69fb66f53fbe62b7185adfb21cb045e754b30f91", "parent": "https://github.com/apache/ant-ivy/commit/835f6e0f616f2e359be98aff07c7cb4b18de2d2d", "message": "Fixed a NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@494217 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_17", "file": [{"additions": 5, "raw_url": "https://github.com/apache/ant-ivy/raw/69fb66f53fbe62b7185adfb21cb045e754b30f91/src/java/org/apache/ivy/util/FileUtil.java", "blob_url": "https://github.com/apache/ant-ivy/blob/69fb66f53fbe62b7185adfb21cb045e754b30f91/src/java/org/apache/ivy/util/FileUtil.java", "sha": "32ba8f4fa9a8a3c20f86aaeafb0e5cad0d2413ce", "changes": 7, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/FileUtil.java?ref=69fb66f53fbe62b7185adfb21cb045e754b30f91", "patch": "@@ -153,8 +153,11 @@ public static void copy(InputStream src, OutputStream dest, CopyProgressListener\n                 if (l != null) {\r\n                     l.progress(evt.update(buffer, c, total));\r\n                 }\r\n-            } \r\n-            evt.update(EMPTY_BUFFER, 0, total);\r\n+            }\r\n+            \r\n+            if (l != null) {\r\n+            \tevt.update(EMPTY_BUFFER, 0, total);\r\n+            }\r\n             \r\n             // close the streams\r\n             src.close();\r", "filename": "src/java/org/apache/ivy/util/FileUtil.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/2fd76a1a31ad87de8b68d18b3563b4881512a12d", "parent": "https://github.com/apache/ant-ivy/commit/1936c40d363ed898ff953708f1361939c86e2274", "message": "FIX: NPE with problems summary\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484486 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_18", "file": [{"additions": 13, "raw_url": "https://github.com/apache/ant-ivy/raw/2fd76a1a31ad87de8b68d18b3563b4881512a12d/src/java/fr/jayasoft/ivy/util/Message.java", "blob_url": "https://github.com/apache/ant-ivy/blob/2fd76a1a31ad87de8b68d18b3563b4881512a12d/src/java/fr/jayasoft/ivy/util/Message.java", "sha": "dda557941ea3f72ca5b804ea7f7ca98e8316de26", "changes": 18, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/fr/jayasoft/ivy/util/Message.java?ref=2fd76a1a31ad87de8b68d18b3563b4881512a12d", "patch": "@@ -128,20 +128,28 @@ public static void sumupProblems() {\n         if (_problems.size() > 0) {\r\n             info(\"\\n:: problems summary ::\");\r\n             if (_warns.size() > 0) {\r\n-            \tinfo(\"---------------- WARNINGS\");\r\n+            \tinfo(\":::: WARNINGS\");\r\n             \tfor (Iterator iter = _warns.iterator(); iter.hasNext();) {\r\n             \t\tString msg = (String) iter.next();\r\n-            \t\t_impl.log(\"\\t\"+msg+\"\\n\", MSG_WARN);\r\n+                    if (_impl != null) {\r\n+                    \t_impl.log(\"\\t\"+msg+\"\\n\", MSG_WARN);\r\n+                    } else {\r\n+                        System.err.println(msg);\r\n+                    }\r\n             \t}\r\n             }\r\n             if (_errors.size() > 0) {\r\n-                info(\"---------------- ERRORS\");\r\n+                info(\":::: ERRORS\");\r\n             \tfor (Iterator iter = _errors.iterator(); iter.hasNext();) {\r\n             \t\tString msg = (String) iter.next();\r\n-            \t\t_impl.log(\"\\t\"+msg+\"\\n\", MSG_ERR);\r\n+                    if (_impl != null) {\r\n+                    \t_impl.log(\"\\t\"+msg+\"\\n\", MSG_ERR);\r\n+                    } else {\r\n+                        System.err.println(msg);\r\n+                    }\r\n             \t}\r\n             }\r\n-            info(\"\\t--- USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS ---\");\r\n+            info(\"\\n:: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS\");\r\n             _problems.clear();\r\n             _warns.clear();\r\n             _errors.clear();\r", "filename": "src/java/fr/jayasoft/ivy/util/Message.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/76b3e400a9328a7cc07c38bf71900a9a529b772a", "parent": "https://github.com/apache/ant-ivy/commit/7ab73be36ba19fb0418f00187e187acf8873706b", "message": "FIX NPE when a node has no descriptor\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484184 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_19", "file": [{"additions": 3, "raw_url": "https://github.com/apache/ant-ivy/raw/76b3e400a9328a7cc07c38bf71900a9a529b772a/src/java/fr/jayasoft/ivy/report/XmlReportOutputter.java", "blob_url": "https://github.com/apache/ant-ivy/blob/76b3e400a9328a7cc07c38bf71900a9a529b772a/src/java/fr/jayasoft/ivy/report/XmlReportOutputter.java", "sha": "6b3a8c0ea7535bc089929cb02a91f328942bde1c", "changes": 5, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/fr/jayasoft/ivy/report/XmlReportOutputter.java?ref=76b3e400a9328a7cc07c38bf71900a9a529b772a", "patch": "@@ -83,11 +83,12 @@ public void output(ConfigurationResolveReport report, File destDir) {\n                     if (md != null && md.getHomePage() != null) {\r\n                         details += \" homepage=\\\"\"+md.getHomePage()+\"\\\"\";\r\n                     }\r\n-\t\t\t\t\tout.println(\"\\t\\t\\t<revision name=\\\"\"+dep.getResolvedId().getRevision()+\"\\\"\" +\r\n+\t\t\t\t\tString defaultValue = dep.getDescriptor() != null ? \" default=\\\"\"+dep.getDescriptor().isDefault()+\"\\\"\" : \"\";\r\n+                    out.println(\"\\t\\t\\t<revision name=\\\"\"+dep.getResolvedId().getRevision()+\"\\\"\" +\r\n \t\t\t\t\t\t\t details +\r\n                              \" downloaded=\\\"\"+dep.isDownloaded()+\"\\\"\"+\r\n                              \" searched=\\\"\"+dep.isSearched()+\"\\\"\"+\r\n-                             \" default=\\\"\"+dep.getDescriptor().isDefault()+\"\\\"\"+\r\n+                             defaultValue+\r\n \t\t\t\t\t\t\t \" conf=\\\"\"+toString(dep.getConfigurations(report.getConfiguration()))+\"\\\">\");\r\n                     if (md != null) {\r\n                         License[] licenses = md.getLicenses();\r", "filename": "src/java/fr/jayasoft/ivy/report/XmlReportOutputter.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/b7e86cdd772cc47a031d187b79d075af8155c2e0", "parent": "https://github.com/apache/ant-ivy/commit/51cd2f37a67d1d6a2c3e97a2a667d3881b9f71bc", "message": "fix a NPE when loading a composite P2 repository with no children\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@1554047 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_20", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/b7e86cdd772cc47a031d187b79d075af8155c2e0/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/b7e86cdd772cc47a031d187b79d075af8155c2e0/CHANGES.txt", "sha": "de6068b0bfa12d1a1851c3bb7e6c5db9a16c0ee1", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=b7e86cdd772cc47a031d187b79d075af8155c2e0", "patch": "@@ -170,6 +170,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n - FIX: When inheriting a module descriptor, also merge the exclude rules\n - FIX: Correct application of mediators (ie. override) during conflict resolution (IVY-1455)\n - FIX: Fix revision number mapping across namespaces (IVY-1423)\n+- FIX: fix a NPE when loading a composite P2 repository with no children\n \n    2.3.0\n =====================================", "filename": "CHANGES.txt"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/b7e86cdd772cc47a031d187b79d075af8155c2e0/src/java/org/apache/ivy/osgi/p2/P2CompositeParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/b7e86cdd772cc47a031d187b79d075af8155c2e0/src/java/org/apache/ivy/osgi/p2/P2CompositeParser.java", "sha": "8b1b041757381108cf03ab28ab10fbe314d64f1a", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/osgi/p2/P2CompositeParser.java?ref=b7e86cdd772cc47a031d187b79d075af8155c2e0", "patch": "@@ -21,6 +21,7 @@\n import java.io.InputStream;\n import java.text.ParseException;\n import java.util.ArrayList;\n+import java.util.Collections;\n import java.util.LinkedHashSet;\n import java.util.List;\n import java.util.Set;\n@@ -60,7 +61,7 @@ public void parse(InputStream in) throws ParseException, IOException, SAXExcepti\n         //\n         // private static final String VERSION = \"version\";\n \n-        List<String> childLocations;\n+        List<String> childLocations = Collections.emptyList();\n \n         public RepositoryHandler() {\n             super(REPOSITORY);", "filename": "src/java/org/apache/ivy/osgi/p2/P2CompositeParser.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/6526a5e83c1fb9644da34e44fdc5a3bb8a357c84", "parent": "https://github.com/apache/ant-ivy/commit/fd9a406ee4cfa64b8ff4e898564d20ad142a8765", "message": "fix NPE: some server seems to not return any content type\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@1398334 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_21", "file": [{"additions": 7, "raw_url": "https://github.com/apache/ant-ivy/raw/6526a5e83c1fb9644da34e44fdc5a3bb8a357c84/src/java/org/apache/ivy/util/url/BasicURLHandler.java", "blob_url": "https://github.com/apache/ant-ivy/blob/6526a5e83c1fb9644da34e44fdc5a3bb8a357c84/src/java/org/apache/ivy/util/url/BasicURLHandler.java", "sha": "d9f1cca54a833be1ff36c24c4c649c54a13bae59", "changes": 12, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/url/BasicURLHandler.java?ref=6526a5e83c1fb9644da34e44fdc5a3bb8a357c84", "patch": "@@ -108,11 +108,13 @@ public static String getCharSetFromContentType(String contentType) {\n \n         String charSet = null;\n \n-        String[] elements = contentType.split(\";\");\n-        for (int i = 0; i < elements.length; i++) {\n-            String element = elements[i].trim();\n-            if (element.toLowerCase().startsWith(\"charset=\")) {\n-                charSet = element.substring(\"charset=\".length());\n+        if (contentType != null) {\n+            String[] elements = contentType.split(\";\");\n+            for (int i = 0; i < elements.length; i++) {\n+                String element = elements[i].trim();\n+                if (element.toLowerCase().startsWith(\"charset=\")) {\n+                    charSet = element.substring(\"charset=\".length());\n+                }\n             }\n         }\n ", "filename": "src/java/org/apache/ivy/util/url/BasicURLHandler.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/26c458f09bc858537d02b3749868e8318b167a68", "parent": "https://github.com/apache/ant-ivy/commit/47e26f11f0901db6f132a3328b64dfbcc459a7a0", "message": "FIX: Artifact report throws NPE when artifact is not in cache (IVY-1150) (thanks to Steve Jones)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@892370 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_22", "file": [{"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/26c458f09bc858537d02b3749868e8318b167a68/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/26c458f09bc858537d02b3749868e8318b167a68/CHANGES.txt", "sha": "b3b730224c67f3a384b0d14ee5c6b73a9535d444", "changes": 2, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=26c458f09bc858537d02b3749868e8318b167a68", "patch": "@@ -46,6 +46,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n \tScott Hebert\n \tMatt Inger\n \tAnders Janmyr\n+\tSteve Jones\n \tChrister Jonsson\n \tMichael Kebe\n \tMatthias Kilian\n@@ -101,6 +102,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n - IMPROVEMENT: Trace a message when a property file referenced from the settings doesn't exixts (IVY-1074)\n - IMPROVEMENT: use defaultconf in combination with defaultconfmapping (IVY-1135) (thanks to Jon Schneider)\n \n+- FIX: Artifact report throws NPE when artifact is not in cache (IVY-1150) (thanks to Steve Jones)\n - FIX: resolve fails for transitive relocated maven modules when the type of the dependency was set to 'jar'\n - FIX: optional dependencies, sources and javadocs aren't resolved when a maven module is relocated\n - FIX: Encountered 'multiple artifacts retrieved to same file' error when module does not have multiple artifacts (IVY-1148)", "filename": "CHANGES.txt"}, {"additions": 8, "raw_url": "https://github.com/apache/ant-ivy/raw/26c458f09bc858537d02b3749868e8318b167a68/src/java/org/apache/ivy/ant/IvyArtifactReport.java", "blob_url": "https://github.com/apache/ant-ivy/blob/26c458f09bc858537d02b3749868e8318b167a68/src/java/org/apache/ivy/ant/IvyArtifactReport.java", "sha": "905c230dfccd02ddd496f473f89117fbd0aeb50e", "changes": 15, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/ant/IvyArtifactReport.java?ref=26c458f09bc858537d02b3749868e8318b167a68", "patch": "@@ -154,8 +154,7 @@ private void generateXml(IvyNode[] dependencies,\n                             startArtifact(saxHandler, artifact.getArtifact());\n \n                             writeOriginLocationIfPresent(cache, saxHandler, artifact);\n-\n-                            writeCacheLocation(cache, saxHandler, artifact);\n+                            writeCacheLocationIfPresent(cache, saxHandler, artifact);\n \n                             Set artifactDestPaths = (Set) artifactsToCopy.get(artifact);\n                             for (Iterator iterator = artifactDestPaths.iterator(); iterator\n@@ -243,14 +242,16 @@ private void writeOriginLocationIfPresent(\n         }\n     }\n \n-    private void writeCacheLocation(RepositoryCacheManager cache, TransformerHandler saxHandler,\n+    private void writeCacheLocationIfPresent(RepositoryCacheManager cache, TransformerHandler saxHandler,\n             ArtifactDownloadReport artifact) throws SAXException {\n         File archiveInCache = artifact.getLocalFile();\n \n-        saxHandler.startElement(null, \"cache-location\", \"cache-location\", new AttributesImpl());\n-        char[] archiveInCacheAsChars = archiveInCache.getPath().replace('\\\\', '/').toCharArray();\n-        saxHandler.characters(archiveInCacheAsChars, 0, archiveInCacheAsChars.length);\n-        saxHandler.endElement(null, \"cache-location\", \"cache-location\");\n+        if (archiveInCache != null) {\n+            saxHandler.startElement(null, \"cache-location\", \"cache-location\", new AttributesImpl());\n+            char[] archiveInCacheAsChars = archiveInCache.getPath().replace('\\\\', '/').toCharArray();\n+            saxHandler.characters(archiveInCacheAsChars, 0, archiveInCacheAsChars.length);\n+            saxHandler.endElement(null, \"cache-location\", \"cache-location\");\n+        }\n     }\n \n     private void writeRetrieveLocation(TransformerHandler saxHandler, String artifactDestPath)", "filename": "src/java/org/apache/ivy/ant/IvyArtifactReport.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/c9b1f2d6422803573c73c08d94186eb885feaa15", "parent": "https://github.com/apache/ant-ivy/commit/c5fb06dcb8ffe00dfda665f73477ba8aa875599c", "message": "FIX: NPE when a conf is unknown (related to IVY-983)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@790046 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_23", "file": [{"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/c9b1f2d6422803573c73c08d94186eb885feaa15/src/java/org/apache/ivy/core/resolve/IvyNodeCallers.java", "blob_url": "https://github.com/apache/ant-ivy/blob/c9b1f2d6422803573c73c08d94186eb885feaa15/src/java/org/apache/ivy/core/resolve/IvyNodeCallers.java", "sha": "3902c0922d52654d31c70ce0758c5179f8530b6a", "changes": 10, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/resolve/IvyNodeCallers.java?ref=c9b1f2d6422803573c73c08d94186eb885feaa15", "patch": "@@ -60,10 +60,12 @@ public Caller(ModuleDescriptor md, ModuleRevisionId mrid, DependencyDescriptor d\n         public void addConfiguration(String callerConf, String[] dependencyConfs) {\n             updateConfs(callerConf, dependencyConfs);\n             Configuration conf = md.getConfiguration(callerConf);\n-            String[] confExtends = conf.getExtends();\n-            if (confExtends != null) {\n-                for (int i = 0; i < confExtends.length; i++) {\n-                    addConfiguration(confExtends[i], dependencyConfs);\n+            if (conf != null) {\n+                String[] confExtends = conf.getExtends();\n+                if (confExtends != null) {\n+                    for (int i = 0; i < confExtends.length; i++) {\n+                        addConfiguration(confExtends[i], dependencyConfs);\n+                    }\n                 }\n             }\n         }", "filename": "src/java/org/apache/ivy/core/resolve/IvyNodeCallers.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/a0f5b1b4394a0a1cd2fd0ed8491d138a1cff1e3b", "parent": "https://github.com/apache/ant-ivy/commit/b8161dfd9c9edb93c83e461c158903d5608c373d", "message": "FIX: NPE in some cases, related to IVY-1083 implementation\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@787597 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_24", "file": [{"additions": 3, "raw_url": "https://github.com/apache/ant-ivy/raw/a0f5b1b4394a0a1cd2fd0ed8491d138a1cff1e3b/src/java/org/apache/ivy/core/resolve/IvyNodeUsage.java", "blob_url": "https://github.com/apache/ant-ivy/blob/a0f5b1b4394a0a1cd2fd0ed8491d138a1cff1e3b/src/java/org/apache/ivy/core/resolve/IvyNodeUsage.java", "sha": "6004c2bbb6176bc63548b60c0acf1f4b82d3cac5", "changes": 3, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/resolve/IvyNodeUsage.java?ref=a0f5b1b4394a0a1cd2fd0ed8491d138a1cff1e3b", "patch": "@@ -311,6 +311,9 @@ protected IvyNode getNode() {\n      */\n     public boolean hasTransitiveDepender(String rootModuleConf) {\n         Set/*<Depender>*/ dependersSet = (Set) dependers.get(rootModuleConf);\n+        if (dependersSet == null) {\n+            return false;\n+        }\n         for (Iterator iterator = dependersSet.iterator(); iterator.hasNext();) {\n             Depender depender = (Depender) iterator.next();\n             if (depender.dd.isTransitive()) {", "filename": "src/java/org/apache/ivy/core/resolve/IvyNodeUsage.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/cf0b494e4d528e9e514aba908d68bdfa1f844cc1", "parent": "https://github.com/apache/ant-ivy/commit/64d5ca7eb75ef1b03a2862df6ad3a8816f87647c", "message": "FIX: NPE for modules with 'pom' packaging (no main artifact)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@690952 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_25", "file": [{"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/cf0b494e4d528e9e514aba908d68bdfa1f844cc1/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/cf0b494e4d528e9e514aba908d68bdfa1f844cc1/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java", "sha": "d2ab1d8f42351e04805d56f930a6cdcaf6c19e56", "changes": 4, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java?ref=cf0b494e4d528e9e514aba908d68bdfa1f844cc1", "patch": "@@ -255,6 +255,10 @@ public ModuleDescriptor parseDescriptor(ParserSettings ivySettings, URL descript\n \n     private void addSourcesAndJavadocArtifactsIfPresent(\n             PomModuleDescriptorBuilder mdBuilder, ParserSettings ivySettings) {\n+        if (mdBuilder.getMainArtifact() == null) {\n+            // no main artifact in pom, we don't need to search for meta artifacts\n+            return;\n+        }\n         ModuleDescriptor md = mdBuilder.getModuleDescriptor();\n         ModuleRevisionId mrid = md.getModuleRevisionId();\n         DependencyResolver resolver = ivySettings.getResolver(", "filename": "src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/5a8ac6281ab6ef236a8742059aae81cfda0c87be", "parent": "https://github.com/apache/ant-ivy/commit/ae6d4c23378e2c2ebf9d72a88278a7e91d1be88a", "message": "FIX: NPE in Ivy:install task if the repository cache dir has been cleared (IVY-843)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@673998 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_26", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/5a8ac6281ab6ef236a8742059aae81cfda0c87be/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/5a8ac6281ab6ef236a8742059aae81cfda0c87be/CHANGES.txt", "sha": "f71d12a6667f9a1f41e0ea19ce093724216bf9c0", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=5a8ac6281ab6ef236a8742059aae81cfda0c87be", "patch": "@@ -91,6 +91,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n - IMPROVEMENT: Change allownomd and skipbuildwithoutivy into a more semantically correct name (IVY-297)\n - IMPROVEMENT: Smarter determination if an expression is exact or not for RegexpPatternMatcher and GlobPatternMatcher\n \n+- FIX: NPE in Ivy:install task if the repository cache dir has been cleared (IVY-843)\n - FIX: Maven version ranges with ( ) are not supported (IVY-678) (thanks to Michael Kebe)\n - FIX: Ignore maven metadata files when listing revisions (IVY-765)\n - FIX: haltonmissing on publish task does not prevent the other files to be published, even with an atomic publisher (IVY-656)", "filename": "CHANGES.txt"}, {"additions": 21, "raw_url": "https://github.com/apache/ant-ivy/raw/5a8ac6281ab6ef236a8742059aae81cfda0c87be/src/java/org/apache/ivy/plugins/namespace/NameSpaceHelper.java", "blob_url": "https://github.com/apache/ant-ivy/blob/5a8ac6281ab6ef236a8742059aae81cfda0c87be/src/java/org/apache/ivy/plugins/namespace/NameSpaceHelper.java", "sha": "fb9636d7c32372c2e27bc61de51dd50c434e2587", "changes": 22, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/namespace/NameSpaceHelper.java?ref=5a8ac6281ab6ef236a8742059aae81cfda0c87be", "patch": "@@ -26,6 +26,7 @@\n import org.apache.ivy.core.module.id.ArtifactId;\n import org.apache.ivy.core.module.id.ModuleId;\n import org.apache.ivy.core.module.id.ModuleRevisionId;\n+import org.apache.ivy.core.report.MetadataArtifactDownloadReport;\n import org.apache.ivy.core.resolve.ResolvedModuleRevision;\n \n public final class NameSpaceHelper {\n@@ -54,7 +55,8 @@ public static ResolvedModuleRevision toSystem(ResolvedModuleRevision rmr, Namesp\n             return rmr;\n         }\n         return new ResolvedModuleRevision(\n-            rmr.getResolver(), rmr.getArtifactResolver(), md, rmr.getReport());\n+            rmr.getResolver(), rmr.getArtifactResolver(), md, \n+            transform(rmr.getReport(), ns.getToSystemTransformer()));\n     }\n \n     public static Artifact transform(Artifact artifact, NamespaceTransformer t) {\n@@ -70,6 +72,24 @@ public static Artifact transform(Artifact artifact, NamespaceTransformer t) {\n                         .getQualifiedExtraAttributes());\n     }\n \n+    public static MetadataArtifactDownloadReport transform(\n+            MetadataArtifactDownloadReport report, NamespaceTransformer t) {\n+        if (t.isIdentity()) {\n+            return report;\n+        }\n+        MetadataArtifactDownloadReport madr = \n+            new MetadataArtifactDownloadReport(transform(report.getArtifact(), t));\n+        madr.setSearched(report.isSearched());\n+        madr.setDownloadStatus(report.getDownloadStatus());\n+        madr.setDownloadDetails(report.getDownloadDetails());\n+        madr.setArtifactOrigin(report.getArtifactOrigin());\n+        madr.setDownloadTimeMillis(report.getDownloadTimeMillis());\n+        madr.setOriginalLocalFile(report.getOriginalLocalFile());\n+        madr.setLocalFile(report.getLocalFile());\n+        madr.setSize(report.getSize());\n+        return madr;\n+    }\n+\n     public static ArtifactId transform(ArtifactId artifactId, NamespaceTransformer t) {\n         if (t.isIdentity()) {\n             return artifactId;", "filename": "src/java/org/apache/ivy/plugins/namespace/NameSpaceHelper.java"}, {"additions": 5, "raw_url": "https://github.com/apache/ant-ivy/raw/5a8ac6281ab6ef236a8742059aae81cfda0c87be/src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/5a8ac6281ab6ef236a8742059aae81cfda0c87be/src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java", "sha": "c96d889c3cda33e104389f04ce2e2bff9d2fc9f8", "changes": 5, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java?ref=5a8ac6281ab6ef236a8742059aae81cfda0c87be", "patch": "@@ -40,6 +40,7 @@\n import org.apache.ivy.core.report.ArtifactDownloadReport;\n import org.apache.ivy.core.report.DownloadReport;\n import org.apache.ivy.core.report.DownloadStatus;\n+import org.apache.ivy.core.report.MetadataArtifactDownloadReport;\n import org.apache.ivy.core.resolve.DownloadOptions;\n import org.apache.ivy.core.resolve.IvyNode;\n import org.apache.ivy.core.resolve.ResolveData;\n@@ -290,6 +291,10 @@ protected Artifact toSystem(Artifact artifact) {\n         return NameSpaceHelper.transform(artifact, getNamespace().getToSystemTransformer());\n     }\n \n+    protected MetadataArtifactDownloadReport toSystem(MetadataArtifactDownloadReport report) {\n+        return NameSpaceHelper.transform(report, getNamespace().getToSystemTransformer());\n+    }\n+\n     protected ResolvedModuleRevision toSystem(ResolvedModuleRevision rmr) {\n         return NameSpaceHelper.toSystem(rmr, getNamespace());\n     }", "filename": "src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java"}, {"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/5a8ac6281ab6ef236a8742059aae81cfda0c87be/src/java/org/apache/ivy/plugins/resolver/BasicResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/5a8ac6281ab6ef236a8742059aae81cfda0c87be/src/java/org/apache/ivy/plugins/resolver/BasicResolver.java", "sha": "15ff50fbf19a936ba1207fc36664de8c25303d5e", "changes": 15, "status": "modified", "deletions": 11, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/BasicResolver.java?ref=5a8ac6281ab6ef236a8742059aae81cfda0c87be", "patch": "@@ -241,7 +241,8 @@ public ResolvedModuleRevision getDependency(DependencyDescriptor dde, ResolveDat\n                         throw new UnresolvedDependencyException();\n                     }\n                 }\n-                if (!rmr.getReport().isDownloaded()) {\n+                if (!rmr.getReport().isDownloaded() \n+                        && rmr.getReport().getLocalFile() != null) {\n                     return toSystem(rmr);\n                 } else {\n                     nsMd = rmr.getDescriptor();\n@@ -264,16 +265,8 @@ public ResolvedModuleRevision getDependency(DependencyDescriptor dde, ResolveDat\n                             checkDescriptorConsistency(systemMrid, systemMd, ivyRef);\n                         }\n                     }\n-                    MetadataArtifactDownloadReport madr = \n-                        new MetadataArtifactDownloadReport(systemMd.getMetadataArtifact());\n-                    madr.setDownloadStatus(rmr.getReport().getDownloadStatus());\n-                    madr.setDownloadDetails(rmr.getReport().getDownloadDetails());\n-                    madr.setArtifactOrigin(rmr.getReport().getArtifactOrigin());\n-                    madr.setDownloadTimeMillis(rmr.getReport().getDownloadTimeMillis());\n-                    madr.setSize(rmr.getReport().getSize());\n-                    madr.setOriginalLocalFile(rmr.getReport().getOriginalLocalFile());\n-                    madr.setSearched(true);\n-                    rmr = new ResolvedModuleRevision(this, this, systemMd, madr);\n+                    rmr = new ResolvedModuleRevision(\n+                        this, this, systemMd, toSystem(rmr.getReport()));\n                 }\n             }\n ", "filename": "src/java/org/apache/ivy/plugins/resolver/BasicResolver.java"}, {"additions": 20, "raw_url": "https://github.com/apache/ant-ivy/raw/5a8ac6281ab6ef236a8742059aae81cfda0c87be/test/java/org/apache/ivy/ant/IvyInstallTest.java", "blob_url": "https://github.com/apache/ant-ivy/blob/5a8ac6281ab6ef236a8742059aae81cfda0c87be/test/java/org/apache/ivy/ant/IvyInstallTest.java", "sha": "b6717eb22e258ae1e7c5e631eef25732f0fcea79", "changes": 20, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/ant/IvyInstallTest.java?ref=5a8ac6281ab6ef236a8742059aae81cfda0c87be", "patch": "@@ -59,6 +59,7 @@ private void cleanCache() {\n \n     private void cleanInstall() {\n         FileUtil.forceDelete(new File(\"build/test/install\"));\n+        FileUtil.forceDelete(new File(\"build/test/install2\"));\n     }\n \n     public void testInstallDummyDefault() {\n@@ -81,6 +82,25 @@ public void testInstallDummyDefault() {\n         assertTrue(new File(\"build/test/install/org1/mod1.2/mod1.2-2.2.jar\").exists());\n     }\n \n+    public void testIVY843() {\n+        project.setProperty(\"ivy.settings.file\", \"test/repositories/ivysettings-IVY843.xml\");\n+        install.setOrganisation(\"org1\");\n+        install.setModule(\"mod1.4\");\n+        install.setRevision(\"1.0.1\");\n+        install.setFrom(\"test\");\n+        install.setTo(\"install\");\n+\n+        install.execute();\n+        \n+        cleanCache();\n+        \n+        install.setFrom(\"install\");\n+        install.setTo(\"install2\");\n+        install.execute();\n+\n+        assertTrue(new File(\"build/test/install2/org1/mod1.4/ivy-1.0.1.xml\").exists());\n+    }\n+\n     public void testInstallWithBranch() {\n         project.setProperty(\"ivy.settings.file\", \"test/repositories/branches/ivysettings.xml\");\n         install.setOrganisation(\"foo\");", "filename": "test/java/org/apache/ivy/ant/IvyInstallTest.java"}, {"additions": 52, "raw_url": "https://github.com/apache/ant-ivy/raw/5a8ac6281ab6ef236a8742059aae81cfda0c87be/test/repositories/ivysettings-IVY843.xml", "blob_url": "https://github.com/apache/ant-ivy/blob/5a8ac6281ab6ef236a8742059aae81cfda0c87be/test/repositories/ivysettings-IVY843.xml", "sha": "ff38e2ecb23d7c0e573bcd951ba0083e2bbe367e", "changes": 52, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/repositories/ivysettings-IVY843.xml?ref=5a8ac6281ab6ef236a8742059aae81cfda0c87be", "patch": "@@ -0,0 +1,52 @@\n+<!--\n+   Licensed to the Apache Software Foundation (ASF) under one\n+   or more contributor license agreements.  See the NOTICE file\n+   distributed with this work for additional information\n+   regarding copyright ownership.  The ASF licenses this file\n+   to you under the Apache License, Version 2.0 (the\n+   \"License\"); you may not use this file except in compliance\n+   with the License.  You may obtain a copy of the License at\n+\n+     http://www.apache.org/licenses/LICENSE-2.0\n+\n+   Unless required by applicable law or agreed to in writing,\n+   software distributed under the License is distributed on an\n+   \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+   KIND, either express or implied.  See the License for the\n+   specific language governing permissions and limitations\n+   under the License.    \n+-->\n+<ivysettings>\n+\t<properties file=\"${ivy.settings.dir}/ivysettings.properties\" />\n+\t<settings defaultResolver=\"dummy\" />\n+\t<caches defaultCacheDir=\"${cache.dir}\" useOrigin=\"true\" />\n+\t<resolvers>\n+\t\t<chain name=\"test\">\n+\t\t\t<filesystem name=\"1\">\n+\t\t\t\t<ivy pattern=\"${ivy.settings.dir}/1/[organisation]/[module]/ivys/ivy-[revision].xml\"/>\n+\t\t\t\t<artifact pattern=\"${ivy.settings.dir}/1/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]\"/>\n+\t\t\t</filesystem>\n+\t\t\t<dual name=\"2\">\n+\t\t\t\t<filesystem name=\"2-ivy\">\n+\t\t\t\t\t<ivy pattern=\"${ivy.settings.dir}/2/[module]/ivy-[revision].xml\"/>\n+\t\t\t\t</filesystem>\n+\t\t\t\t<filesystem name=\"2-artifact\">\n+\t\t\t\t\t<artifact pattern=\"${ivy.settings.dir}/2/[module]/[artifact]-[revision].[ext]\"/>\n+\t\t\t\t\t<artifact pattern=\"${ivy.settings.dir}/2/[module]/[artifact].[ext]\"/>\n+\t\t\t\t</filesystem>\n+\t\t\t</dual>\n+\t\t</chain>\n+\t\t<filesystem name=\"dummy\">\n+\t\t\t<ivy pattern=\"dummy/[organisation]/[module]/[artifact]-[revision].[ext]\"/>\n+\t\t\t<artifact pattern=\"dummy/[organisation]/[module]/[artifact]-[revision].[ext]\"/>\n+\t\t</filesystem>\n+\t\t<filesystem name=\"install\">\n+\t\t\t<ivy pattern=\"build/test/install/[organisation]/[module]/[artifact]-[revision].[ext]\"/>\n+\t\t\t<artifact pattern=\"build/test/install/[organisation]/[module]/[artifact]-[revision].[ext]\"/>\n+\t\t</filesystem>\n+\t\t<filesystem name=\"install2\">\n+\t\t\t<ivy pattern=\"build/test/install2/[organisation]/[module]/[artifact]-[revision].[ext]\"/>\n+\t\t\t<artifact pattern=\"build/test/install2/[organisation]/[module]/[artifact]-[revision].[ext]\"/>\n+\t\t</filesystem>\n+\t</resolvers>\n+</ivysettings>", "filename": "test/repositories/ivysettings-IVY843.xml"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/51d967fddb09497e0677b835140c32caf9be1dd4", "parent": "https://github.com/apache/ant-ivy/commit/b5c63335ec25862ffcef6f583888f723d09b200f", "message": "FIX: NPE in ivy:install if ivy.settings.xml contains custom attribute for a module (IVY-838)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@667269 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_27", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/51d967fddb09497e0677b835140c32caf9be1dd4/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/51d967fddb09497e0677b835140c32caf9be1dd4/CHANGES.txt", "sha": "692fe9c545ee8cae2f4531cbd402254751b72610", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=51d967fddb09497e0677b835140c32caf9be1dd4", "patch": "@@ -86,6 +86,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n - IMPROVEMENT: Change allownomd and skipbuildwithoutivy into a more semantically correct name (IVY-297)\n - IMPROVEMENT: Smarter determination if an expression is exact or not for RegexpPatternMatcher and GlobPatternMatcher\n \n+- FIX: NPE in ivy:install if ivy.settings.xml contains custom attribute for a module (IVY-838)\n - FIX: Ivy unit tests fail because 'classifier' attribute of 'artifacts' element is missing in ivy.xsd (IVY-837)\n - FIX: Ivy build system: fix build.xml to allow \"ant coverage-report\" behind a proxy (IVY-832)\n - FIX: NPE in AbstractResolver.exists() if a resource cannot be found (IVY-831)", "filename": "CHANGES.txt"}, {"additions": 5, "raw_url": "https://github.com/apache/ant-ivy/raw/51d967fddb09497e0677b835140c32caf9be1dd4/src/java/org/apache/ivy/plugins/matcher/MapMatcher.java", "blob_url": "https://github.com/apache/ant-ivy/blob/51d967fddb09497e0677b835140c32caf9be1dd4/src/java/org/apache/ivy/plugins/matcher/MapMatcher.java", "sha": "a915f3c1bb0f3861210d8b5a25e0965914f46f03", "changes": 7, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/matcher/MapMatcher.java?ref=51d967fddb09497e0677b835140c32caf9be1dd4", "patch": "@@ -45,11 +45,14 @@ public MapMatcher(Map attributes, PatternMatcher pm) {\n     public boolean matches(Map/*<String,String>*/ m) {\n         for (Iterator iter = matchers.entrySet().iterator(); iter.hasNext();) {\n             Entry entry = (Entry) iter.next();\n-            if (!((Matcher) entry.getValue())\n-                    .matches((String) m.get(entry.getKey()))) {\n+            \n+            Matcher matcher = (Matcher) entry.getValue();\n+            String value = (String) m.get(entry.getKey());\n+            if ((value == null) || !matcher.matches(value)) {\n                 return false;\n             }\n         }\n+        \n         return true;\n     }\n ", "filename": "src/java/org/apache/ivy/plugins/matcher/MapMatcher.java"}, {"additions": 8, "raw_url": "https://github.com/apache/ant-ivy/raw/51d967fddb09497e0677b835140c32caf9be1dd4/test/java/org/apache/ivy/core/settings/XmlSettingsParserTest.java", "blob_url": "https://github.com/apache/ant-ivy/blob/51d967fddb09497e0677b835140c32caf9be1dd4/test/java/org/apache/ivy/core/settings/XmlSettingsParserTest.java", "sha": "a7b7605f5f746c8c7a21e608ba44fc456df5b703", "changes": 8, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/core/settings/XmlSettingsParserTest.java?ref=51d967fddb09497e0677b835140c32caf9be1dd4", "patch": "@@ -174,6 +174,14 @@ public void testResolveMode() throws Exception {\n         assertEquals(\"dynamic\", settings.getResolveMode(new ModuleId(\"apache\", \"ivyde\")));\n         assertEquals(\"default\", settings.getResolveMode(new ModuleId(\"apache\", \"ant\")));\n     }\n+    \n+    public void testExtraModuleAttribute() throws Exception {\n+        IvySettings settings = new IvySettings();\n+        XmlSettingsParser parser = new XmlSettingsParser(settings);\n+        parser.parse(XmlSettingsParserTest.class.getResource(\"ivysettings-extra-module-attribute.xml\"));\n+\n+        assertEquals(\"default\", settings.getResolveMode(new ModuleId(\"foo\", \"bar\")));\n+    }\n \n     public void testCache() throws Exception {\n         IvySettings settings = new IvySettings();", "filename": "test/java/org/apache/ivy/core/settings/XmlSettingsParserTest.java"}, {"additions": 24, "raw_url": "https://github.com/apache/ant-ivy/raw/51d967fddb09497e0677b835140c32caf9be1dd4/test/java/org/apache/ivy/core/settings/ivysettings-extra-module-attribute.xml", "blob_url": "https://github.com/apache/ant-ivy/blob/51d967fddb09497e0677b835140c32caf9be1dd4/test/java/org/apache/ivy/core/settings/ivysettings-extra-module-attribute.xml", "sha": "ce34439006e62b34fc607a35538abdab9e17de1b", "changes": 24, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/core/settings/ivysettings-extra-module-attribute.xml?ref=51d967fddb09497e0677b835140c32caf9be1dd4", "patch": "@@ -0,0 +1,24 @@\n+<!--\r\n+   Licensed to the Apache Software Foundation (ASF) under one\r\n+   or more contributor license agreements.  See the NOTICE file\r\n+   distributed with this work for additional information\r\n+   regarding copyright ownership.  The ASF licenses this file\r\n+   to you under the Apache License, Version 2.0 (the\r\n+   \"License\"); you may not use this file except in compliance\r\n+   with the License.  You may obtain a copy of the License at\r\n+\r\n+     http://www.apache.org/licenses/LICENSE-2.0\r\n+\r\n+   Unless required by applicable law or agreed to in writing,\r\n+   software distributed under the License is distributed on an\r\n+   \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+   KIND, either express or implied.  See the License for the\r\n+   specific language governing permissions and limitations\r\n+   under the License.    \r\n+-->\r\n+<ivysettings>\r\n+\t<modules>\r\n+\t\t<module organisation=\"apache\" name=\"ivy\" myattr=\"test.*\" matcher=\"regexp\" resolveMode=\"dynamic\" />\r\n+\t\t<module organisation=\"apache\" name=\".*\" />\r\n+\t</modules>\r\n+</ivysettings>\r", "filename": "test/java/org/apache/ivy/core/settings/ivysettings-extra-module-attribute.xml"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/adbef440c89af0e96b5428637c77ebc8cf77a04f", "parent": "https://github.com/apache/ant-ivy/commit/82e9af9c68aa353a19c2b005838458563425660e", "message": "FIX: NPE in AbstractResolver.exists() if a resource cannot be found (IVY-831)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@666208 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_28", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/adbef440c89af0e96b5428637c77ebc8cf77a04f/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/adbef440c89af0e96b5428637c77ebc8cf77a04f/CHANGES.txt", "sha": "a3d3fd3980b0d2cf8114803565d86e888c12084c", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=adbef440c89af0e96b5428637c77ebc8cf77a04f", "patch": "@@ -83,6 +83,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n - IMPROVEMENT: Change allownomd and skipbuildwithoutivy into a more semantically correct name (IVY-297)\n - IMPROVEMENT: Smarter determination if an expression is exact or not for RegexpPatternMatcher and GlobPatternMatcher\n \n+- FIX: NPE in AbstractResolver.exists() if a resource cannot be found (IVY-831)\n - FIX: Ivy distribution jars contains duplicate entries (IVY-828)\n - FIX: ivy:report will generate an HTML file that references non-existent ivy-report.css (IVY-826)\n - FIX: dynamic resolveMode not being dynamic on branch (IVY-825)", "filename": "CHANGES.txt"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/adbef440c89af0e96b5428637c77ebc8cf77a04f/src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/adbef440c89af0e96b5428637c77ebc8cf77a04f/src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java", "sha": "42854498aac18a16854bbf79cb99b01c8eef05b7", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java?ref=adbef440c89af0e96b5428637c77ebc8cf77a04f", "patch": "@@ -199,7 +199,7 @@ public boolean exists(Artifact artifact) {\n              * of DependencyResolver says that it should never return null\n              */\n             throw new IllegalStateException(\n-                \"null download report returned by \" + getName() \n+                \"null download report returned by \" + getName() + \" (\" + getClass().getName() + \")\" \n                 + \" when trying to download \" + artifact);\n         }\n         ArtifactDownloadReport adr = dr.getArtifactReport(artifact);", "filename": "src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java"}, {"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/adbef440c89af0e96b5428637c77ebc8cf77a04f/test/java/org/apache/ivy/plugins/resolver/MockResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/adbef440c89af0e96b5428637c77ebc8cf77a04f/test/java/org/apache/ivy/plugins/resolver/MockResolver.java", "sha": "df4e0c967cabbc919b6cf3518e567beb8458831d", "changes": 7, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/plugins/resolver/MockResolver.java?ref=adbef440c89af0e96b5428637c77ebc8cf77a04f", "patch": "@@ -29,6 +29,7 @@\n import org.apache.ivy.core.module.descriptor.DefaultModuleDescriptor;\n import org.apache.ivy.core.module.descriptor.DependencyDescriptor;\n import org.apache.ivy.core.module.id.ModuleRevisionId;\n+import org.apache.ivy.core.report.ArtifactDownloadReport;\n import org.apache.ivy.core.report.DownloadReport;\n import org.apache.ivy.core.report.MetadataArtifactDownloadReport;\n import org.apache.ivy.core.resolve.DownloadOptions;\n@@ -72,7 +73,11 @@ public ResolvedModuleRevision getDependency(DependencyDescriptor dd, ResolveData\n     }\n \n     public DownloadReport download(Artifact[] artifacts, DownloadOptions options) {\n-        return null;\n+        DownloadReport dr = new DownloadReport();\n+        for (int i = 0; i < artifacts.length; i++) {\n+            dr.addArtifactReport(new ArtifactDownloadReport(artifacts[i]));\n+        }\n+        return dr;\n     }\n \n     public void publish(Artifact artifact, File src, boolean overwrite) throws IOException {", "filename": "test/java/org/apache/ivy/plugins/resolver/MockResolver.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/82e9af9c68aa353a19c2b005838458563425660e", "parent": "https://github.com/apache/ant-ivy/commit/e636160cda90c4626ddbd8e0af7884327f83dd21", "message": "FIX: NPE in AbstractResolver.exists() if a resource cannot be found  (IVY-831)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@666058 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_29", "file": [{"additions": 9, "raw_url": "https://github.com/apache/ant-ivy/raw/82e9af9c68aa353a19c2b005838458563425660e/src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/82e9af9c68aa353a19c2b005838458563425660e/src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java", "sha": "3400e12b32a521cc2d5aa2691f9e916b3785515e", "changes": 9, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java?ref=82e9af9c68aa353a19c2b005838458563425660e", "patch": "@@ -193,6 +193,15 @@ public String getTypeName() {\n      */\n     public boolean exists(Artifact artifact) {\n         DownloadReport dr = download(new Artifact[] {artifact}, new DownloadOptions());\n+        if (dr == null) {\n+            /*\n+             * according to IVY-831, it seems that this actually happen sometime, while the contract\n+             * of DependencyResolver says that it should never return null\n+             */\n+            throw new IllegalStateException(\n+                \"null download report returned by \" + getName() \n+                + \" when trying to download \" + artifact);\n+        }\n         ArtifactDownloadReport adr = dr.getArtifactReport(artifact);\n         return adr.getDownloadStatus() != DownloadStatus.FAILED;\n     }", "filename": "src/java/org/apache/ivy/plugins/resolver/AbstractResolver.java"}, {"additions": 18, "raw_url": "https://github.com/apache/ant-ivy/raw/82e9af9c68aa353a19c2b005838458563425660e/src/java/org/apache/ivy/plugins/resolver/DependencyResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/82e9af9c68aa353a19c2b005838458563425660e/src/java/org/apache/ivy/plugins/resolver/DependencyResolver.java", "sha": "ab727c4905550830e83d054d17e778836bc2dc65", "changes": 18, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/DependencyResolver.java?ref=82e9af9c68aa353a19c2b005838458563425660e", "patch": "@@ -70,6 +70,24 @@ ResolvedModuleRevision getDependency(DependencyDescriptor dd, ResolveData data)\n      */\n     ResolvedResource findIvyFileRef(DependencyDescriptor dd, ResolveData data);\n \n+    /**\n+     * Download artifacts with specified DownloadOptions.\n+     * <p>\n+     * The resolver will always make a best effort, and do not stop when an artifact is not\n+     * available. It rather continue to attempt to download other requested artifacts, and report\n+     * what has been done in the returned DownloadReport.\n+     * </p>\n+     * <p>\n+     * The returned DownloadReport is never <code>null</code>, and always contain an\n+     * {@link ArtifactDownloadReport} for each requested Artifact.\n+     * </p>\n+     * \n+     * @param artifacts\n+     *            an array of artifacts to download\n+     * @param options\n+     *            options to apply for this download\n+     * @return a DownloadReport with details about each Artifact download.\n+     */\n     DownloadReport download(Artifact[] artifacts, DownloadOptions options);\n \n     boolean exists(Artifact artifact);", "filename": "src/java/org/apache/ivy/plugins/resolver/DependencyResolver.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/51219169df2367a8cc1b4a612b6c9d569c29173e", "parent": "https://github.com/apache/ant-ivy/commit/66310f553103e515ab41aa573aaf2e4101efa635", "message": "FIX: NPE when specifying both resolveId and inline in an Ivy:Resolve (IVY-776)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@638627 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_30", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/51219169df2367a8cc1b4a612b6c9d569c29173e/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/51219169df2367a8cc1b4a612b6c9d569c29173e/CHANGES.txt", "sha": "7b769c5be531c091d2746651daae9a25ce5672e5", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=51219169df2367a8cc1b4a612b6c9d569c29173e", "patch": "@@ -73,6 +73,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n - IMPROVEMENT: Parse description and home page from poms (IVY-767)\n - IMPROVEMENT: Smarter determination if an expression is exact or not for RegexpPatternMatcher and GlobPatternMatcher\n \n+- FIX: NPE when specifying both resolveId and inline in an Ivy:Resolve (IVY-776)\n - FIX: repreport task not working against a repository structured by branches (IVY-716)\n - FIX: Ivy reports a conflict when the same file is supposed to be retrieved at the same location twice (or more) (IVY-743)\n - FIX: StackOverflowError when configuration extends itself (IVY-696)", "filename": "CHANGES.txt"}, {"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/51219169df2367a8cc1b4a612b6c9d569c29173e/src/java/org/apache/ivy/ant/IvyResolve.java", "blob_url": "https://github.com/apache/ant-ivy/blob/51219169df2367a8cc1b4a612b6c9d569c29173e/src/java/org/apache/ivy/ant/IvyResolve.java", "sha": "1e2c554eca17ea5dc0a50bf40eeedcf4a8367ede", "changes": 10, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/ant/IvyResolve.java?ref=51219169df2367a8cc1b4a612b6c9d569c29173e", "patch": "@@ -299,10 +299,12 @@ public void doExecute() throws BuildException {\n                                 .setProperty(\"ivy.resolved.configurations.\" + resolveId, conf);\n                         settings.setVariable(\"ivy.resolved.configurations.\" + resolveId, conf);\n                     }\n-                    getProject().setProperty(\"ivy.resolved.file.\" + resolveId,\n-                        file.getAbsolutePath());\n-                    settings\n-                            .setVariable(\"ivy.resolved.file.\" + resolveId, file.getAbsolutePath());\n+                    if (file != null) {\n+                        getProject().setProperty(\"ivy.resolved.file.\" + resolveId,\n+                            file.getAbsolutePath());\n+                        settings\n+                                .setVariable(\"ivy.resolved.file.\" + resolveId, file.getAbsolutePath());\n+                    }\n                 }\n             }\n         } catch (MalformedURLException e) {", "filename": "src/java/org/apache/ivy/ant/IvyResolve.java"}, {"additions": 16, "raw_url": "https://github.com/apache/ant-ivy/raw/51219169df2367a8cc1b4a612b6c9d569c29173e/test/java/org/apache/ivy/ant/IvyResolveTest.java", "blob_url": "https://github.com/apache/ant-ivy/blob/51219169df2367a8cc1b4a612b6c9d569c29173e/test/java/org/apache/ivy/ant/IvyResolveTest.java", "sha": "57f2e0213b45704161bfe1e881f4a67ea5d84040", "changes": 16, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/ant/IvyResolveTest.java?ref=51219169df2367a8cc1b4a612b6c9d569c29173e", "patch": "@@ -115,6 +115,22 @@ public void testInline() throws Exception {\n         assertTrue(getArchiveFileInCache(\"org1\", \"mod1.2\", \"2.0\", \"mod1.2\", \"jar\", \"jar\").exists());\n     }\n \n+    public void testInlineWithResolveId() throws Exception {\n+        // same as before, but expressing dependency directly without ivy file\n+        resolve.setOrganisation(\"org1\");\n+        resolve.setModule(\"mod1.2\");\n+        resolve.setRevision(\"2.0\");\n+        resolve.setInline(true);\n+        resolve.setResolveId(\"testInlineWithResolveId\");\n+        resolve.setKeep(true);\n+        resolve.execute();\n+\n+        // dependencies\n+        assertTrue(getIvyFileInCache(ModuleRevisionId.newInstance(\"org1\", \"mod1.2\", \"2.0\"))\n+                .exists());\n+        assertTrue(getArchiveFileInCache(\"org1\", \"mod1.2\", \"2.0\", \"mod1.2\", \"jar\", \"jar\").exists());\n+    }\n+\n     public void testInlineForNonExistingModule() throws Exception {\n         resolve.setOrganisation(\"org1XX\");\n         resolve.setModule(\"mod1.2\");", "filename": "test/java/org/apache/ivy/ant/IvyResolveTest.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/a9a5d588b96379e44e06167f5f9d9739ca07f352", "parent": "https://github.com/apache/ant-ivy/commit/474c321dfbf17395ae09889384223f0f74c74057", "message": "check for module descriptor nullity, to avoid a NPE if the ModuleDescriptorParser does not fulfill its contract\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@619957 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_31", "file": [{"additions": 8, "raw_url": "https://github.com/apache/ant-ivy/raw/a9a5d588b96379e44e06167f5f9d9739ca07f352/src/java/org/apache/ivy/core/cache/DefaultRepositoryCacheManager.java", "blob_url": "https://github.com/apache/ant-ivy/blob/a9a5d588b96379e44e06167f5f9d9739ca07f352/src/java/org/apache/ivy/core/cache/DefaultRepositoryCacheManager.java", "sha": "a8a0c5e06a776df94117a4a49ec682c106a7ed9b", "changes": 8, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/cache/DefaultRepositoryCacheManager.java?ref=a9a5d588b96379e44e06167f5f9d9739ca07f352", "patch": "@@ -890,6 +890,14 @@ public ResolvedResource resolve(Artifact artifact) {\n             try {\n                 ModuleDescriptor md = parser.parseDescriptor(\n                     settings, cachedMDURL, mdRef.getResource(), options.isValidate());\n+                if (md == null) {\n+                    throw new IllegalStateException(\n+                        \"module descriptor parser returned a null module descriptor, \" \n+                        + \"which is not allowed. \"\n+                        + \"parser=\" + parser \n+                        + \"; parser class=\" + parser.getClass().getName()\n+                        + \"; module descriptor resource=\" + mdRef.getResource());\n+                }\n                 Message.debug(\"\\t\" + getName() + \": parsed downloaded md file for \" + mrid \n                     + \"; parsed=\" + md.getModuleRevisionId());\n ", "filename": "src/java/org/apache/ivy/core/cache/DefaultRepositoryCacheManager.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/3c1c7dd449321c3e8951438b052bdc674e3b2d65", "parent": "https://github.com/apache/ant-ivy/commit/cf410674e479de4a935e83a9dbdd09b6d3c702dd", "message": "FIX: NPE when calling retrieve if some artifacts are not available locally (IVY-712)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@615446 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_32", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/3c1c7dd449321c3e8951438b052bdc674e3b2d65/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/3c1c7dd449321c3e8951438b052bdc674e3b2d65/CHANGES.txt", "sha": "92652df03bd8f086d0b0a4d10ab7a1200cef39ce", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=3c1c7dd449321c3e8951438b052bdc674e3b2d65", "patch": "@@ -76,6 +76,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n - IMPROVEMENT: Downgrade Ant version requirement to 1.6 to build Ivy (IVY-687)\n - IMPROVEMENT: In the ResolveReport class, add the possibility to filter the evicted module while getting the list of DownloadArtifact (IVY-704) (thanks to Nicolas Lalev\ufffde)\n \n+- FIX: NPE when calling retrieve if some artifacts are not available locally (IVY-712)\n - FIX: When in ssh plugin we does not set username in scheme, Ivy always try to connect with guest username, even if we change one in panel. (IVY-710) (thanks to Ruslan Shevchenko)\n - FIX: NPE in SshCache during publish with ssh resolver without passFile (IVY-709) (thanks to Ruslan Shevchenko)\n - FIX: Update install ivy build file example (IVY-705) (thanks to Benjamin Francisoud)", "filename": "CHANGES.txt"}, {"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/3c1c7dd449321c3e8951438b052bdc674e3b2d65/src/java/org/apache/ivy/core/retrieve/RetrieveEngine.java", "blob_url": "https://github.com/apache/ant-ivy/blob/3c1c7dd449321c3e8951438b052bdc674e3b2d65/src/java/org/apache/ivy/core/retrieve/RetrieveEngine.java", "sha": "2f346b10ed55150c7bb28dea787107caaddd1453", "changes": 4, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/retrieve/RetrieveEngine.java?ref=3c1c7dd449321c3e8951438b052bdc674e3b2d65", "patch": "@@ -107,6 +107,10 @@ public int retrieve(ModuleRevisionId mrid, String destFilePattern, RetrieveOptio\n             for (Iterator iter = artifactsToCopy.keySet().iterator(); iter.hasNext();) {\n                 ArtifactDownloadReport artifact = (ArtifactDownloadReport) iter.next();\n                 File archive = artifact.getLocalFile();\n+                if (archive == null) {\n+                    Message.verbose(\"\\tno local file available for \" + artifact + \": skipping\");\n+                    continue;\n+                }\n                 Set dest = (Set) artifactsToCopy.get(artifact);\n                 Message.verbose(\"\\tretrieving \" + archive);\n                 for (Iterator it2 = dest.iterator(); it2.hasNext();) {", "filename": "src/java/org/apache/ivy/core/retrieve/RetrieveEngine.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/ea33beff535a67023a743bbade1127bde66191ee", "parent": "https://github.com/apache/ant-ivy/commit/3de3a5e0b406e66376c66ba93bdfffacd0c8359f", "message": "FIX: NPE in SshCache during publish with ssh resolver without passFile (IVY-709) (thanks to Ruslan Shevchenko)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@613795 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_33", "file": [{"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/ea33beff535a67023a743bbade1127bde66191ee/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/ea33beff535a67023a743bbade1127bde66191ee/CHANGES.txt", "sha": "c533af3efd3548599e2513c3fed0cd39c15fe671", "changes": 2, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=ea33beff535a67023a743bbade1127bde66191ee", "patch": "@@ -51,6 +51,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n \tGeoff Reedy\n \tChristian Riege\n \tAndreas Sahlbach\n+\tRuslan Shevchenko\n \tJohn Shields\n \tJohan Stuyts\n \tJason Trump\n@@ -74,6 +75,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n - IMPROVEMENT: Downgrade Ant version requirement to 1.6 to build Ivy (IVY-687)\n - IMPROVEMENT: In the ResolveReport class, add the possibility to filter the evicted module while getting the list of DownloadArtifact (IVY-704) (thanks to Nicolas Lalev\ufffde)\n \n+- FIX: NPE in SshCache during publish with ssh resolver without passFile (IVY-709) (thanks to Ruslan Shevchenko)\n - FIX: Update install ivy build file example (IVY-705) (thanks to Benjamin Francisoud)\n - FIX: Ivy swallows ParseException when using a latest strategy requiring module descriptors (IVY-702) (thanks to Nicolas Lalev\ufffde)\n - FIX: Problem with cached Ivy files which have extra attributes (IVY-693)", "filename": "CHANGES.txt"}, {"additions": 3, "raw_url": "https://github.com/apache/ant-ivy/raw/ea33beff535a67023a743bbade1127bde66191ee/src/java/org/apache/ivy/plugins/repository/ssh/SshCache.java", "blob_url": "https://github.com/apache/ant-ivy/blob/ea33beff535a67023a743bbade1127bde66191ee/src/java/org/apache/ivy/plugins/repository/ssh/SshCache.java", "sha": "7f05235a17f553f2025010411b4a0885f807b9ae", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/repository/ssh/SshCache.java?ref=ea33beff535a67023a743bbade1127bde66191ee", "patch": "@@ -327,8 +327,10 @@ public Session getSession(String host, int port, String username, String userPas\n                 Message.verbose(\":: SSH :: connected to \" + host + \"!\");\n                 setSession(username, host, port, session);\n             } catch (JSchException e) {\n-                if (passFile.exists()) {\n+                if (passFile!=null) {\n+                  if (passFile.exists()) {\n                     passFile.delete();\n+                  }\n                 }\n                 IOException ex = new IOException(e.getMessage());\n                 ex.initCause(e);", "filename": "src/java/org/apache/ivy/plugins/repository/ssh/SshCache.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/acf486376ef70002207a89b96f626fb4173a2d35", "parent": "https://github.com/apache/ant-ivy/commit/4839abdcaefa1bd1ab675e76cfe9f54e0da3344c", "message": "Fixed a NPE when running the junit tests with JDK 1.4.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@605039 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_34", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/acf486376ef70002207a89b96f626fb4173a2d35/ivy.xml", "blob_url": "https://github.com/apache/ant-ivy/blob/acf486376ef70002207a89b96f626fb4173a2d35/ivy.xml", "sha": "f7506e6ac6b89fd5442a73f78587f40f4c58a53d", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/ivy.xml?ref=acf486376ef70002207a89b96f626fb4173a2d35", "patch": "@@ -52,6 +52,7 @@\n \t\t\n \t\t<!-- This dependency is necessary for having validation in junit tests when running with JDK1.4 -->\n \t\t<dependency org=\"xerces\" name=\"xercesImpl\" rev=\"2.6.2\" conf=\"test->default\" />\n+\t\t<dependency org=\"xerces\" name=\"xmlParserAPIs\" rev=\"2.6.2\" conf=\"test->default\" />\n \t\t\n \t\t<!-- Global exclude for junit -->\n \t\t<exclude org=\"junit\" module=\"junit\" conf=\"core,default\" />", "filename": "ivy.xml"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/6e9213054338791936d7211c1049d731f9980ba8", "parent": "https://github.com/apache/ant-ivy/commit/a1b57317786f000ce33cc8348eadc0508cc06358", "message": "FIX: NPE in namespace transformation during the ivy:findrevision and ivy:resolve task execution (IVY-659) (thanks to Andrea Bernardo Ciddio)\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@602022 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_35", "file": [{"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/6e9213054338791936d7211c1049d731f9980ba8/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/6e9213054338791936d7211c1049d731f9980ba8/CHANGES.txt", "sha": "a383ef8c55be9bbff7ce6ec978e467590b70f236", "changes": 2, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=6e9213054338791936d7211c1049d731f9980ba8", "patch": "@@ -19,6 +19,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n \tJim Bonanno\n \tMatthieu Brouillard\n \tKristian Cibulskis\n+\tAndrea Bernardo Ciddio\n \tJacob Grydholt Jensen\n \tScott Goldstein\n \tPierre H\ufffdgnestrand\n@@ -57,6 +58,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br\n    version in SVN\n =====================================\n - FIX: Strict conflictmanager seems to not support dynamic revisions (IVY-474)\n+- FIX: NPE in namespace transformation during the ivy:findrevision and ivy:resolve task execution (IVY-659) (thanks to Andrea Bernardo Ciddio)\n \n \n    2.0.0-beta1", "filename": "CHANGES.txt"}, {"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/6e9213054338791936d7211c1049d731f9980ba8/src/java/org/apache/ivy/plugins/namespace/Namespace.java", "blob_url": "https://github.com/apache/ant-ivy/blob/6e9213054338791936d7211c1049d731f9980ba8/src/java/org/apache/ivy/plugins/namespace/Namespace.java", "sha": "e32655deafee0c309dfa9c4fa3a4822f826683db", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/namespace/Namespace.java?ref=6e9213054338791936d7211c1049d731f9980ba8", "patch": "@@ -37,6 +37,9 @@\n \n     private NamespaceTransformer fromSystemTransformer = new NamespaceTransformer() {\n         public ModuleRevisionId transform(ModuleRevisionId mrid) {\n+            if (mrid == null) {\n+                return null;\n+            }\n             for (Iterator iter = rules.iterator(); iter.hasNext();) {\n                 NamespaceRule rule = (NamespaceRule) iter.next();\n                 ModuleRevisionId nmrid = rule.getFromSystem().transform(mrid);\n@@ -56,6 +59,9 @@ public boolean isIdentity() {\n \n     private NamespaceTransformer toSystemTransformer = new NamespaceTransformer() {\n         public ModuleRevisionId transform(ModuleRevisionId mrid) {\n+            if (mrid == null) {\n+                return null;\n+            }\n             for (Iterator iter = rules.iterator(); iter.hasNext();) {\n                 NamespaceRule rule = (NamespaceRule) iter.next();\n                 ModuleRevisionId nmrid = rule.getToSystem().transform(mrid);", "filename": "src/java/org/apache/ivy/plugins/namespace/Namespace.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/283f77d29ab46c5ae47d312455641a0317c58f58", "parent": "https://github.com/apache/ant-ivy/commit/556ccd95c84d75e459d7d21df8c4c10818fad16a", "message": "IVY-644 fix NPE in case of eviction by 2 modules on 2 different confs mixed with extends\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@596998 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_36", "file": [{"additions": 27, "raw_url": "https://github.com/apache/ant-ivy/raw/283f77d29ab46c5ae47d312455641a0317c58f58/src/java/org/apache/ivy/core/resolve/IvyNode.java", "blob_url": "https://github.com/apache/ant-ivy/blob/283f77d29ab46c5ae47d312455641a0317c58f58/src/java/org/apache/ivy/core/resolve/IvyNode.java", "sha": "f005cec21122792a4cb64aee1c3a65f1da1528f1", "changes": 39, "status": "modified", "deletions": 12, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/resolve/IvyNode.java?ref=283f77d29ab46c5ae47d312455641a0317c58f58", "patch": "@@ -98,6 +98,10 @@ public int hashCode() {\n             //CheckStyle:MagicNumber| OFF\n             return hash;\n         }\n+        \n+        public String toString() {\n+            return \"NodeConf(\" + conf + \")\";\n+        }\n     }\n \n     // //////// CONTEXT\n@@ -182,14 +186,21 @@ private void init(ResolveData data) {\n      */\n     public boolean loadData(String rootModuleConf, IvyNode parent, String parentConf, String conf,\n             boolean shouldBePublic) {\n+        Message.debug(\"loadData of \" + this.toString() + \" of rootConf=\" + rootModuleConf);\n         if (!isRoot() && (data.getReport() != null)) {\n             data.getReport().addDependency(this);\n         }\n \n         boolean loaded = false;\n-        if (!isEvicted(rootModuleConf)\n-                && (hasConfigurationsToLoad() || !isRootModuleConfLoaded(rootModuleConf))\n-                && !hasProblem()) {\n+        if (hasProblem()) {\n+            Message.debug(\"Node has problem.  Skip loading\");\n+            handleConfiguration(loaded, rootModuleConf, parent, parentConf, conf, shouldBePublic);\n+            return false;\n+        } else if (isEvicted(rootModuleConf)) {\n+            Message.debug(rootModuleConf + \" is evicted.  Skip loading\");\n+        } else if (!hasConfigurationsToLoad() && isRootModuleConfLoaded(rootModuleConf)) {\n+            Message.debug(rootModuleConf + \" is loaded and no conf to load.  Skip loading\");\n+        } else {\n             markRootModuleConfLoaded(rootModuleConf);\n             if (md == null) {\n                 DependencyResolver resolver = data.getSettings().getResolver(getModuleId());\n@@ -309,11 +320,6 @@ public boolean loadData(String rootModuleConf, IvyNode parent, String parentConf\n                 loaded = true;\n             }\n         }\n-        if (hasProblem()) {\n-            return handleConfiguration(loaded, rootModuleConf, parent, parentConf, conf,\n-                shouldBePublic)\n-                    && loaded;\n-        }\n         if (!handleConfiguration(loaded, rootModuleConf, parent, parentConf, conf, shouldBePublic)) {\n             return false;\n         }\n@@ -347,8 +353,7 @@ public Collection getDependencies(String rootModuleConf, String conf, String req\n                     \"impossible to get dependencies when data has not been loaded\");\n         }\n         DependencyDescriptor[] dds = md.getDependencies();\n-        Collection dependencies = new LinkedHashSet(); // it's important to respect dependencies\n-        // order\n+        Collection dependencies = new LinkedHashSet(); // it's important to respect order\n         for (int i = 0; i < dds.length; i++) {\n             DependencyDescriptor dd = dds[i];\n             String[] dependencyConfigurations = dd.getDependencyConfigurations(conf, requestedConf);\n@@ -547,6 +552,7 @@ public Configuration getConfiguration(String conf) {\n         return (String[]) depConfs.toArray(new String[depConfs.size()]);\n     }\n \n+    //This is never called.  Could we remove it?\n     public void discardConf(String rootModuleConf, String conf) {\n         Set depConfs = (Set) rootModuleConfs.get(rootModuleConf);\n         if (depConfs == null) {\n@@ -750,7 +756,13 @@ private void updateMapOfSetForKey(Map from, Map to, Object key) {\n             // no configuration required => no artifact required\n             return new Artifact[0];\n         }\n+        if (md == null) {\n+            throw new IllegalStateException(\n+                    \"impossible to get artefacts when data has not been loaded. IvyNode = \"\n+                    + this.toString());\n+        }\n \n+        \n         Set artifacts = new HashSet(); // the set we fill before returning\n \n         // we check if we have dependencyArtifacts includes description for this rootModuleConf\n@@ -909,7 +921,8 @@ public IvyNode getRoot() {\n     public ConflictManager getConflictManager(ModuleId mid) {\n         if (md == null) {\n             throw new IllegalStateException(\n-                    \"impossible to get conflict manager when data has not been loaded\");\n+                    \"impossible to get conflict manager when data has not been loaded. IvyNode = \"\n+                    + this.toString());\n         }\n         ConflictManager cm = md.getConflictManager(mid);\n         return cm == null ? settings.getConflictManager(mid) : cm;\n@@ -1097,7 +1110,9 @@ public boolean isEvicted(String rootModuleConf) {\n \n     public void markEvicted(String rootModuleConf, IvyNode node, ConflictManager conflictManager,\n             Collection resolved) {\n-        eviction.markEvicted(rootModuleConf, node, conflictManager, resolved);\n+        EvictionData evictionData = new EvictionData(rootModuleConf, node, conflictManager,\n+                resolved);\n+        markEvicted(evictionData);\n     }\n \n     public void setEvictedNodes(ModuleId moduleId, String rootModuleConf, Collection evicted) {", "filename": "src/java/org/apache/ivy/core/resolve/IvyNode.java"}, {"additions": 11, "raw_url": "https://github.com/apache/ant-ivy/raw/283f77d29ab46c5ae47d312455641a0317c58f58/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java", "blob_url": "https://github.com/apache/ant-ivy/blob/283f77d29ab46c5ae47d312455641a0317c58f58/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java", "sha": "9e4fb559b9d50b430a90936c62a57c2e9e2ab156", "changes": 21, "status": "modified", "deletions": 10, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java?ref=283f77d29ab46c5ae47d312455641a0317c58f58", "patch": "@@ -91,6 +91,10 @@ public Collection getSelected() {\n         public String getRootModuleConf() {\n             return rootModuleConf;\n         }\n+\n+        public boolean isTransitivelyEvicted() {\n+            return parent == null;\n+        }\n     }\n \n     private static final class ModuleIdConf {\n@@ -235,9 +239,13 @@ public void setEvictedNodes(ModuleId moduleId, String rootModuleConf, Collection\n     public boolean isEvicted(String rootModuleConf) {\n         cleanEvicted();\n         IvyNode root = node.getRoot();\n-        return root != node\n-                && !root.getResolvedRevisions(node.getId().getModuleId(), rootModuleConf).contains(\n-                    node.getResolvedId()) && getEvictedData(rootModuleConf) != null;\n+        ModuleId moduleId = node.getId().getModuleId();\n+        Collection resolvedRevisions = root.getResolvedRevisions(moduleId, rootModuleConf);\n+        EvictionData evictedData = getEvictedData(rootModuleConf);\n+        return root != node && evictedData != null \n+            && (!resolvedRevisions.contains(node.getResolvedId())\n+                || evictedData.isTransitivelyEvicted()\n+               );\n     }\n \n     public boolean isCompletelyEvicted() {\n@@ -273,13 +281,6 @@ private void cleanEvicted() {\n         }\n     }\n \n-    public void markEvicted(String rootModuleConf, IvyNode node, ConflictManager conflictManager,\n-            Collection resolved) {\n-        EvictionData evictionData = new EvictionData(rootModuleConf, node, conflictManager,\n-                resolved);\n-        markEvicted(evictionData);\n-    }\n-\n     public void markEvicted(EvictionData evictionData) {\n         evicted.put(evictionData.getRootModuleConf(), evictionData);\n     }", "filename": "src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java"}, {"additions": 20, "raw_url": "https://github.com/apache/ant-ivy/raw/283f77d29ab46c5ae47d312455641a0317c58f58/src/java/org/apache/ivy/core/resolve/ResolveEngine.java", "blob_url": "https://github.com/apache/ant-ivy/blob/283f77d29ab46c5ae47d312455641a0317c58f58/src/java/org/apache/ivy/core/resolve/ResolveEngine.java", "sha": "edde0089fea900171f436fe58b2a236ab00d63b6", "changes": 39, "status": "modified", "deletions": 19, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/resolve/ResolveEngine.java?ref=283f77d29ab46c5ae47d312455641a0317c58f58", "patch": "@@ -548,10 +548,11 @@ private void fetchDependencies(VisitNode node, String conf, boolean shouldBePubl\n         } else {\n             Message.verbose(\"== resolving dependencies for \" + node.getId() + \" [\" + conf + \"]\");\n         }\n-        resolveConflict(node);\n+        resolveConflict(node, conf);\n \n         if (node.loadData(conf, shouldBePublic)) {\n-            resolveConflict(node);\n+            resolveConflict(node, conf); //We just did it. Should it be redone? \n+                                   //NB:removing it break a unit test.\n             if (!node.isEvicted()) {\n                 String[] confs = node.getRealConfs(conf);\n                 for (int i = 0; i < confs.length; i++) {\n@@ -672,8 +673,8 @@ private boolean isDependenciesFetched(IvyNode node, String conf) {\n         return false;\n     }\n \n-    private void resolveConflict(VisitNode node) {\n-        resolveConflict(node, node.getParent(), Collections.EMPTY_SET);\n+    private void resolveConflict(VisitNode node, String conf) {\n+        resolveConflict(node, node.getParent(), conf,Collections.EMPTY_SET);\n     }\n \n     /**\n@@ -689,7 +690,8 @@ private void resolveConflict(VisitNode node) {\n      *            descendants of ancestor)\n      * @return true if conflict resolution has been done, false it can't be done yet\n      */\n-    private boolean resolveConflict(VisitNode node, VisitNode ancestor, Collection toevict) {\n+    private boolean resolveConflict(VisitNode node, VisitNode ancestor, String conf,\n+            Collection toevict) {\n         if (ancestor == null || node == ancestor) {\n             return true;\n         }\n@@ -702,7 +704,7 @@ private boolean resolveConflict(VisitNode node, VisitNode ancestor, Collection t\n             // job is done and node is selected, nothing to do for this ancestor, but we still have\n             // to check higher levels, for which conflict resolution might have been impossible\n             // before\n-            if (resolveConflict(node, ancestor.getParent(), toevict)) {\n+            if (resolveConflict(node, ancestor.getParent(), conf, toevict)) {\n                 // now that conflict resolution is ok in ancestors\n                 // we just have to check if the node wasn't previously evicted in root ancestor\n                 EvictionData evictionData = node.getEvictionDataInRoot(node.getRootModuleConf(),\n@@ -730,7 +732,7 @@ private boolean resolveConflict(VisitNode node, VisitNode ancestor, Collection t\n             node.getModuleId(), node.getRootModuleConf()));\n         resolvedNodes.addAll(ancestor.getNode().getPendingConflicts(node.getRootModuleConf(),\n             node.getModuleId()));\n-        Collection conflicts = computeConflicts(node, ancestor, toevict, resolvedNodes);\n+        Collection conflicts = computeConflicts(node, ancestor, conf, toevict, resolvedNodes);\n \n         if (settings.debugConflictResolution()) {\n             Message.debug(\"found conflicting revisions for \" + node + \" in \" + ancestor + \": \"\n@@ -788,7 +790,7 @@ private boolean resolveConflict(VisitNode node, VisitNode ancestor, Collection t\n             ancestor.getNode().setPendingConflicts(node.getModuleId(), node.getRootModuleConf(),\n                 Collections.EMPTY_SET);\n \n-            return resolveConflict(node, ancestor.getParent(), toevict);\n+            return resolveConflict(node, ancestor.getParent(), conf, toevict);\n         } else {\n             // node has been evicted for the current parent\n             if (resolved.isEmpty()) {\n@@ -827,16 +829,16 @@ private boolean resolveConflict(VisitNode node, VisitNode ancestor, Collection t\n                     IvyNode sel = (IvyNode) iter.next();\n                     if (!prevResolved.contains(sel)) {\n                         solved &= resolveConflict(node.gotoNode(sel), ancestor.getParent(),\n-                            toevict);\n+                            conf, toevict);\n                     }\n                 }\n             }\n             return solved;\n         }\n     }\n \n-    private Collection computeConflicts(VisitNode node, VisitNode ancestor, Collection toevict,\n-            Collection resolvedNodes) {\n+    private Collection computeConflicts(VisitNode node, VisitNode ancestor, String conf,\n+            Collection toevict, Collection resolvedNodes) {\n         Collection conflicts = new HashSet();\n         conflicts.add(node.getNode());\n         if (resolvedNodes.removeAll(toevict)) {\n@@ -853,14 +855,13 @@ private Collection computeConflicts(VisitNode node, VisitNode ancestor, Collecti\n                         .addAll(dep.getResolvedNodes(node.getModuleId(), node.getRootModuleConf()));\n             }\n         } else if (resolvedNodes.isEmpty() && node.getParent() != ancestor) {\n-            DependencyDescriptor[] dds = ancestor.getDescriptor().getDependencies();\n-            for (int i = 0; i < dds.length; i++) {\n-                if (dds[i].getDependencyId().equals(node.getModuleId())) {\n-                    IvyNode n = node.getNode().findNode(dds[i].getDependencyRevisionId());\n-                    if (n != null) {\n-                        conflicts.add(n);\n-                        break;\n-                    }\n+            //Conflict must only be computed per root configuration at this step.\n+            Collection ancestorDepIvyNodes = node.getParent().getNode()\n+                        .getDependencies(node.getRootModuleConf(), new String[] {conf});\n+            for (Iterator it = ancestorDepIvyNodes.iterator(); it.hasNext();) {\n+                IvyNode ancestorDep = (IvyNode) it.next();\n+                if (ancestorDep.getModuleId().equals(node.getModuleId())) {\n+                    conflicts.add(ancestorDep);\n                 }\n             }\n         } else {", "filename": "src/java/org/apache/ivy/core/resolve/ResolveEngine.java"}, {"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/283f77d29ab46c5ae47d312455641a0317c58f58/test/java/org/apache/ivy/core/resolve/ResolveTest.java", "blob_url": "https://github.com/apache/ant-ivy/blob/283f77d29ab46c5ae47d312455641a0317c58f58/test/java/org/apache/ivy/core/resolve/ResolveTest.java", "sha": "021b8c5388c264ce703d6a7866cde59f6d0ec8d6", "changes": 20, "status": "modified", "deletions": 14, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/core/resolve/ResolveTest.java?ref=283f77d29ab46c5ae47d312455641a0317c58f58", "patch": "@@ -18,9 +18,6 @@\n package org.apache.ivy.core.resolve;\n \n import java.io.File;\n-import java.io.IOException;\n-import java.net.MalformedURLException;\n-import java.text.ParseException;\n import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.Collection;\n@@ -35,7 +32,6 @@\n \n import org.apache.ivy.Ivy;\n import org.apache.ivy.TestHelper;\n-import org.apache.ivy.core.IvyContext;\n import org.apache.ivy.core.cache.ArtifactOrigin;\n import org.apache.ivy.core.cache.CacheManager;\n import org.apache.ivy.core.module.descriptor.Artifact;\n@@ -58,9 +54,7 @@\n import org.apache.ivy.plugins.resolver.DualResolver;\n import org.apache.ivy.plugins.resolver.FileSystemResolver;\n import org.apache.ivy.util.CacheCleaner;\n-import org.apache.ivy.util.DefaultMessageLogger;\n import org.apache.ivy.util.FileUtil;\n-import org.apache.ivy.util.Message;\n import org.apache.tools.ant.Project;\n import org.apache.tools.ant.taskdefs.Delete;\n import org.xml.sax.SAXException;\n@@ -675,8 +669,6 @@ public void testResolveMultipleConfsWithConflicts() throws Exception {\n             ModuleRevisionId.newInstance(\"org1\", \"mod1.2\", \"2.1\")).exists());\n         assertTrue(getArchiveFileInCache(\"org1\", \"mod1.2\", \"2.1\", \"mod1.2\", \"jar\", \"jar\").exists());\n \n-        assertFalse(cacheManager.getIvyFileInCache(\n-            ModuleRevisionId.newInstance(\"org1\", \"mod1.2\", \"2.0\")).exists());\n         assertFalse(getArchiveFileInCache(\"org1\", \"mod1.2\", \"2.0\", \"mod1.2\", \"jar\", \"jar\").exists());\n     }\n \n@@ -1474,7 +1466,7 @@ public void testResolveConflictFromPoms() throws Exception {\n     public void testTransitiveEviction() throws Exception {\n         // mod7.3 depends on mod7.2 v1.0 and on mod7.1 v2.0\n         // mod7.2 v1.0 depends on mod7.1 v1.0 (which then should be evicted)\n-        // mod7.1 v1.0 depends on mod 1.2 v1.0 (which should be evicted by transitivity)\n+        // mod7.1 v1.0 depends on mod 1.2 v2.0 (which should be evicted by transitivity)\n \n         ResolveReport report = ivy.resolve(new File(\"test/repositories/2/mod7.3/ivy-1.0.xml\")\n                 .toURL(), getResolveOptions(new String[] {\"*\"}));\n@@ -1495,9 +1487,9 @@ public void testTransitiveEviction() throws Exception {\n             ModuleRevisionId.newInstance(\"org7\", \"mod7.1\", \"2.0\")).exists());\n         assertTrue(getArchiveFileInCache(\"org7\", \"mod7.1\", \"2.0\", \"mod7.1\", \"jar\", \"jar\").exists());\n \n-        assertTrue(!getArchiveFileInCache(\"org7\", \"mod7.1\", \"1.0\", \"mod7.1\", \"jar\", \"jar\").exists());\n+        assertFalse(getArchiveFileInCache(\"org7\", \"mod7.1\", \"1.0\", \"mod7.1\", \"jar\", \"jar\").exists());\n \n-        assertTrue(!getArchiveFileInCache(\"org1\", \"mod1.2\", \"2.0\", \"mod1.2\", \"jar\", \"jar\").exists());\n+        assertFalse(getArchiveFileInCache(\"org1\", \"mod1.2\", \"2.0\", \"mod1.2\", \"jar\", \"jar\").exists());\n     }\n \n     public void testTransitiveEviction2() throws Exception {\n@@ -1753,15 +1745,15 @@ public void testEvictWithConfInMultiConf2() throws Exception {\n                 .newInstance(\"org5\", \"mod5.1\", \"4.2\")).length);\n     }\n \n-    /*\n+    \n     public void testMultipleEviction() throws Exception {\n         \n         ResolveReport report = ivy.resolve(\n             new File(\"test/repositories/1/IVY-644/M1/ivys/ivy-1.0.xml\").toURL(),\n-            getResolveOptions(new String[] {\"*\"}));\n+            getResolveOptions(new String[] {\"test\" , \"runtime\" })); //NB the order impact the bug\n         assertFalse(report.hasError());\n     }\n-    */\n+    \n     \n     public void testResolveForce() throws Exception {\n         // mod4.1 v 4.2 depends on", "filename": "test/java/org/apache/ivy/core/resolve/ResolveTest.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/5cf21cb13943796e1241f456f0503de2ebdae3ef", "parent": "https://github.com/apache/ant-ivy/commit/7951705198f2fc2b204cc0044d5d6e9ed9ec3758", "message": "IVY-618 : fix NPE when the module is evicted and the dependency descriptor is null\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@582811 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_37", "file": [{"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/5cf21cb13943796e1241f456f0503de2ebdae3ef/src/java/org/apache/ivy/core/resolve/ResolveEngine.java", "blob_url": "https://github.com/apache/ant-ivy/blob/5cf21cb13943796e1241f456f0503de2ebdae3ef/src/java/org/apache/ivy/core/resolve/ResolveEngine.java", "sha": "d7d0b03b03e40e06339c578992932f8a9c99e626", "changes": 7, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/resolve/ResolveEngine.java?ref=5cf21cb13943796e1241f456f0503de2ebdae3ef", "patch": "@@ -257,16 +257,13 @@ public ResolveReport resolve(ModuleDescriptor md, ResolveOptions options)\n                                 throw new NullPointerException(\"getResolvedId() is null for \" \n                                     + dependencies[i].toString());\n                             }\n-                            if (depDescriptor == null) {\n-                                throw new NullPointerException(\"getDescriptor() is null for \" \n-                                    + dependencies[i].toString());\n-                            }\n                             if (depRevisionId == null) {\n                                 throw new NullPointerException(\"getDependencyRevisionId() \"\n                                     + \"is null for \" + dd.toString());\n                             }\n                             String rev = depResolvedId.getRevision();\n-                            String status = depDescriptor.getStatus();\n+                            //The evicted modules have no descritpion, so we can't put their status. \n+                            String status = depDescriptor==null ? \"?\" : depDescriptor.getStatus();\n                             props.put(depRevisionId.encodeToString(), rev + \" \" + status);\n                         }\n                     }", "filename": "src/java/org/apache/ivy/core/resolve/ResolveEngine.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/a9e202f2df643f315dc985f73527cf813ae19573", "parent": "https://github.com/apache/ant-ivy/commit/e64f6947d4952a321f8a01580ff99d4d3eeaeb9b", "message": "clean code formatting and add NPE messages for IVY-618\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@582792 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_38", "file": [{"additions": 23, "raw_url": "https://github.com/apache/ant-ivy/raw/a9e202f2df643f315dc985f73527cf813ae19573/src/java/org/apache/ivy/core/resolve/ResolveEngine.java", "blob_url": "https://github.com/apache/ant-ivy/blob/a9e202f2df643f315dc985f73527cf813ae19573/src/java/org/apache/ivy/core/resolve/ResolveEngine.java", "sha": "7968c97cf33a2bbc6eddd6a979db65a5a2e60c14", "changes": 32, "status": "modified", "deletions": 9, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/resolve/ResolveEngine.java?ref=a9e202f2df643f315dc985f73527cf813ae19573", "patch": "@@ -98,7 +98,8 @@\n      *            the sort engine to use to sort modules before producing the dependency resolution\n      *            report. Must not be null.\n      */\n-    public ResolveEngine(ResolveEngineSettings settings, EventManager eventManager, SortEngine sortEngine) {\n+    public ResolveEngine(ResolveEngineSettings settings, EventManager eventManager,\n+                         SortEngine sortEngine) {\n         this.settings = settings;\n         this.eventManager = eventManager;\n         this.sortEngine = sortEngine;\n@@ -194,8 +195,7 @@ public ResolveReport resolve(URL ivySource, ResolveOptions options) throws Parse\n     }\n \n     /**\n-     * Resolve dependencies of a module described by a module descriptor Note: the method signature\n-     * is way too long, we should use a class to store the settings of the resolve.\n+     * Resolve dependencies of a module described by a module descriptor.\n      */\n     public ResolveReport resolve(ModuleDescriptor md, ResolveOptions options)\n             throws ParseException, IOException {\n@@ -241,19 +241,33 @@ public ResolveReport resolve(ModuleDescriptor md, ResolveOptions options)\n             // revision id,\n             // for direct dependencies only.\n             // this is used by the deliver task to resolve dynamic revisions to static ones\n-            File ivyPropertiesInCache = cacheManager.getResolvedIvyPropertiesInCache(md\n-                    .getResolvedModuleRevisionId());\n+            File ivyPropertiesInCache = cacheManager.getResolvedIvyPropertiesInCache(\n+                        md.getResolvedModuleRevisionId());\n             Properties props = new Properties();\n             if (dependencies.length > 0) {\n                 IvyNode root = dependencies[0].getRoot();\n                 for (int i = 0; i < dependencies.length; i++) {\n                     if (!dependencies[i].hasProblem()) {\n                         DependencyDescriptor dd = dependencies[i].getDependencyDescriptor(root);\n                         if (dd != null) {\n-                            String rev = dependencies[i].getResolvedId().getRevision();\n-                            String status = dependencies[i].getDescriptor().getStatus();\n-                            props.put(dd.getDependencyRevisionId().encodeToString(), rev + \" \"\n-                                    + status);\n+                            ModuleRevisionId depResolvedId = dependencies[i].getResolvedId();\n+                            ModuleDescriptor depDescriptor = dependencies[i].getDescriptor();\n+                            ModuleRevisionId depRevisionId = dd.getDependencyRevisionId();\n+                            if (depResolvedId == null) {\n+                                throw new NullPointerException(\"getResolvedId() is null for \" \n+                                    + dependencies[i].toString());\n+                            }\n+                            if (depDescriptor == null) {\n+                                throw new NullPointerException(\"getDescriptor() is null for \" \n+                                    + dependencies[i].toString());\n+                            }\n+                            if (depRevisionId == null) {\n+                                throw new NullPointerException(\"getDependencyRevisionId() \"\n+                                    + \"is null for \" + dd.toString());\n+                            }\n+                            String rev = depResolvedId.getRevision();\n+                            String status = depDescriptor.getStatus();\n+                            props.put(depRevisionId.encodeToString(), rev + \" \" + status);\n                         }\n                     }\n                 }", "filename": "src/java/org/apache/ivy/core/resolve/ResolveEngine.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/ae92d0a283ce4ee755a9b66727536ada40ee277d", "parent": "https://github.com/apache/ant-ivy/commit/dc1dd607a25b7b382c06cc7bfca3284214bc3dbe", "message": "FIX: NPE when report is called without conf while no resolve has been done\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@516353 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_39", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/ae92d0a283ce4ee755a9b66727536ada40ee277d/src/java/org/apache/ivy/ant/IvyReport.java", "blob_url": "https://github.com/apache/ant-ivy/blob/ae92d0a283ce4ee755a9b66727536ada40ee277d/src/java/org/apache/ivy/ant/IvyReport.java", "sha": "411692bdb49380d704668549b3c86e9e01f9c4f9", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/ant/IvyReport.java?ref=ae92d0a283ce4ee755a9b66727536ada40ee277d", "patch": "@@ -129,7 +129,7 @@ public void execute() throws BuildException {\n             _cache = settings.getDefaultCache();\r\n         }\r\n         _conf = getProperty(_conf, settings, \"ivy.resolved.configurations\", _resolveId);\r\n-        if (_conf.equals(\"*\")) {\r\n+        if (\"*\".equals(_conf)) {\r\n             _conf = getProperty(settings, \"ivy.resolved.configurations\", _resolveId);\r\n         }\r\n         if (_conf == null) {\r", "filename": "src/java/org/apache/ivy/ant/IvyReport.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/7126e673ceb6ff1fbac0ad53f82b268685cee9ff", "parent": "https://github.com/apache/ant-ivy/commit/de07bb13f0a395c2c9b7469b13736e0212eebcca", "message": "FIX: NPE when no organisation or no name is provided in module element of ivyconf (IVY-422)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@516010 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_40", "file": [{"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/CHANGES.txt", "sha": "c9ce3f049166c17e98e304a5bb59729d641bcbf1", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=7126e673ceb6ff1fbac0ad53f82b268685cee9ff", "patch": "@@ -16,7 +16,8 @@ for detailed view of each issue, please consult http://jira.jayasoft.org/\n - IMPROVE: Add a unit test to verify that latest.integration accepts released modules (IVY-394) (thanks to Gilles Scokart)\r\n - IMPROVE: New \"modules in use\" section in console report at the end of resolve (IVY-373) (thanks to John Wiliams)\r\n \r\n-- FIX:  FileUtil#copy(File src, File dest, CopyProgressListener l, boolean overwrite) (IVY-420)\r\n+- FIX: NPE when no organisation or no name is provided in module element of ivyconf (IVY-422)\r\n+- FIX: FileUtil#copy(File src, File dest, CopyProgressListener l, boolean overwrite) (IVY-420)\r\n - FIX: Ivy doesn't recognize maven2 classifiers (IVY-418)\r\n - FIX: Static revision replacement is not working when delivering an artifact with a dependency having extra attributes (IVY-415)\r\n - FIX: Static revision replacement is not working when delivering an artifact with a dependency on a branch (IVY-404)\r", "filename": "CHANGES.txt"}, {"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/src/java/org/apache/ivy/core/module/id/ModuleId.java", "blob_url": "https://github.com/apache/ant-ivy/blob/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/src/java/org/apache/ivy/core/module/id/ModuleId.java", "sha": "fc60cb288f3daae0872fba3de1fc2be75977489f", "changes": 8, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/module/id/ModuleId.java?ref=7126e673ceb6ff1fbac0ad53f82b268685cee9ff", "patch": "@@ -49,14 +49,18 @@ public boolean equals(Object obj) {\n             return false;\r\n         }\r\n         ModuleId other = (ModuleId)obj;\r\n-        return other._organisation.equals(_organisation) && other._name.equals(_name);\r\n+        if (other._organisation == null) {\r\n+        \treturn _organisation == null && other._name.equals(_name);\r\n+        } else {\r\n+        \treturn other._organisation.equals(_organisation) && other._name.equals(_name);\r\n+        }\r\n     }\r\n     public int hashCode() {\r\n         return _hash;\r\n     }\r\n     public int _hashCode() {\r\n         int hash = 31;\r\n-        hash = hash * 13 + _organisation.hashCode();\r\n+        hash = hash * 13 + (_organisation == null ? 0 : _organisation.hashCode());\r\n         hash = hash * 13 + _name.hashCode();\r\n         return hash;\r\n     }\r", "filename": "src/java/org/apache/ivy/core/module/id/ModuleId.java"}, {"additions": 9, "raw_url": "https://github.com/apache/ant-ivy/raw/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/src/java/org/apache/ivy/core/settings/XmlSettingsParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/src/java/org/apache/ivy/core/settings/XmlSettingsParser.java", "sha": "e7a43ad9fbafe411ef6a3c4fd33ec9ff3ec00559", "changes": 10, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/settings/XmlSettingsParser.java?ref=7126e673ceb6ff1fbac0ad53f82b268685cee9ff", "patch": "@@ -296,10 +296,18 @@ public void startElement(String uri, String localName, String qName, Attributes\n                 String cm = _ivy.substitute((String)attributes.get(\"conflict-manager\"));\r\n                 String matcher = _ivy.substitute((String)attributes.get(\"matcher\"));\r\n                 matcher = matcher == null ? PatternMatcher.EXACT_OR_REGEXP : matcher;\r\n+                if (organisation == null) {\r\n+                    throw new IllegalArgumentException(\"'organisation' is mandatory in module element: check your configuration\");\r\n+                }\r\n+                if (module == null) {\r\n+                    throw new IllegalArgumentException(\"'name' is mandatory in module element: check your configuration\");\r\n+                }\r\n                 _ivy.addModuleConfiguration(new ModuleId(organisation, module), _ivy.getMatcher(matcher), resolver, branch, cm);\r\n             }\r\n-        } catch (Exception ex) {\r\n+        } catch (ParseException ex) {\r\n             throw new SAXException(\"problem in config file: \"+ex.getMessage(), ex);\r\n+        } catch (IOException ex) {\r\n+            throw new SAXException(\"io problem while parsing config file: \"+ex.getMessage(), ex);\r\n         }\r\n     }\r\n \r", "filename": "src/java/org/apache/ivy/core/settings/XmlSettingsParser.java"}, {"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/src/java/org/apache/ivy/plugins/matcher/ModuleIdMatcher.java", "blob_url": "https://github.com/apache/ant-ivy/blob/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/src/java/org/apache/ivy/plugins/matcher/ModuleIdMatcher.java", "sha": "d3cfb8ca52535111235bc6c0f733d661153dbf92", "changes": 5, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/matcher/ModuleIdMatcher.java?ref=7126e673ceb6ff1fbac0ad53f82b268685cee9ff", "patch": "@@ -29,7 +29,10 @@\n     public ModuleIdMatcher(ModuleId mid, PatternMatcher pm) {\r\n         _mid = mid;\r\n         _pm = pm;\r\n-        _orgMatcher = pm.getMatcher(mid.getOrganisation());\r\n+        _orgMatcher = pm.getMatcher(\r\n+        \t\tmid.getOrganisation()==null?\r\n+        \t\t\t\tPatternMatcher.ANY_EXPRESSION\r\n+        \t\t\t\t:mid.getOrganisation());\r\n         _moduleMatcher = pm.getMatcher(mid.getName());\r\n     }\r\n     \r", "filename": "src/java/org/apache/ivy/plugins/matcher/ModuleIdMatcher.java"}, {"additions": 24, "raw_url": "https://github.com/apache/ant-ivy/raw/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/test/java/org/apache/ivy/core/settings/XmlSettingsParserTest.java", "blob_url": "https://github.com/apache/ant-ivy/blob/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/test/java/org/apache/ivy/core/settings/XmlSettingsParserTest.java", "sha": "7f06f34d070784c0ae29d20bd1b959f8838888bb", "changes": 24, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/core/settings/XmlSettingsParserTest.java?ref=7126e673ceb6ff1fbac0ad53f82b268685cee9ff", "patch": "@@ -18,6 +18,8 @@\n package org.apache.ivy.core.settings;\r\n \r\n import java.io.File;\r\n+import java.io.IOException;\r\n+import java.text.ParseException;\r\n import java.util.List;\r\n \r\n import junit.framework.TestCase;\r\n@@ -100,6 +102,28 @@ public void test() throws Exception {\n         assertEquals(\"int1\", settings.getResolver(new ModuleId(\"apache\", \"ivy\")).getName());\r\n         assertEquals(\"int1\", settings.getResolver(new ModuleId(\"apache\", \"ivyde\")).getName());        \r\n     }\r\n+    \r\n+    public void testNoOrgInModule() throws Exception {\r\n+        IvySettings settings = new IvySettings();\r\n+        XmlSettingsParser parser = new XmlSettingsParser(settings);\r\n+        try {\r\n+\t\t\tparser.parse(XmlSettingsParserTest.class.getResource(\"ivyconf-no-org-in-module.xml\"));\r\n+\t\t\tfail(\"no organisation in module is supposed to raise an exception\");\r\n+\t\t} catch (ParseException e) {\r\n+\t\t\tassertTrue(\"bad exception message: \"+e.getMessage(), e.getMessage().indexOf(\"'organisation'\") != -1);\r\n+\t\t}\r\n+    }\r\n+\r\n+    public void testNoNameInModule() throws Exception {\r\n+        IvySettings settings = new IvySettings();\r\n+        XmlSettingsParser parser = new XmlSettingsParser(settings);\r\n+        try {\r\n+\t\t\tparser.parse(XmlSettingsParserTest.class.getResource(\"ivyconf-no-name-in-module.xml\"));\r\n+\t\t\tfail(\"no name in module is supposed to raise an exception\");\r\n+\t\t} catch (ParseException e) {\r\n+\t\t\tassertTrue(\"bad exception message: \"+e.getMessage(), e.getMessage().indexOf(\"'name'\") != -1);\r\n+\t\t}\r\n+    }\r\n \r\n     public void testTypedef() throws Exception {\r\n     \tIvySettings settings = new IvySettings();\r", "filename": "test/java/org/apache/ivy/core/settings/XmlSettingsParserTest.java"}, {"additions": 5, "raw_url": "https://github.com/apache/ant-ivy/raw/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/test/java/org/apache/ivy/core/settings/ivyconf-no-name-in-module.xml", "blob_url": "https://github.com/apache/ant-ivy/blob/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/test/java/org/apache/ivy/core/settings/ivyconf-no-name-in-module.xml", "sha": "e57fdbbb42a097c38e75c80975d3ebcd9dbdd65e", "changes": 5, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/core/settings/ivyconf-no-name-in-module.xml?ref=7126e673ceb6ff1fbac0ad53f82b268685cee9ff", "patch": "@@ -0,0 +1,5 @@\n+<ivyconf>\r\n+\t<modules>\r\n+\t\t<module organisation=\".*\" branch=\"internal\"/>\r\n+\t</modules>\r\n+</ivyconf>\r", "filename": "test/java/org/apache/ivy/core/settings/ivyconf-no-name-in-module.xml"}, {"additions": 5, "raw_url": "https://github.com/apache/ant-ivy/raw/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/test/java/org/apache/ivy/core/settings/ivyconf-no-org-in-module.xml", "blob_url": "https://github.com/apache/ant-ivy/blob/7126e673ceb6ff1fbac0ad53f82b268685cee9ff/test/java/org/apache/ivy/core/settings/ivyconf-no-org-in-module.xml", "sha": "08b1681c4c43a8e4e3c67cee0a7599329fa8ed13", "changes": 5, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/org/apache/ivy/core/settings/ivyconf-no-org-in-module.xml?ref=7126e673ceb6ff1fbac0ad53f82b268685cee9ff", "patch": "@@ -0,0 +1,5 @@\n+<ivyconf>\r\n+\t<modules>\r\n+\t\t<module name=\".*\" branch=\"internal\"/>\r\n+\t</modules>\r\n+</ivyconf>\r", "filename": "test/java/org/apache/ivy/core/settings/ivyconf-no-org-in-module.xml"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/d55ed9283104db6e145dfce0970dd6d5f2a91806", "parent": "https://github.com/apache/ant-ivy/commit/64c1a69c4d5ae173e1743a96ddc2f0f42a130302", "message": "FIX: cryptic NPE due to spelling error in ivy.xml (IVY-177)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484229 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_41", "file": [{"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/d55ed9283104db6e145dfce0970dd6d5f2a91806/CHANGES.txt", "blob_url": "https://github.com/apache/ant-ivy/blob/d55ed9283104db6e145dfce0970dd6d5f2a91806/CHANGES.txt", "sha": "6dd52a84df30d0caa5f224b9dfcf66a17016e24b", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/CHANGES.txt?ref=d55ed9283104db6e145dfce0970dd6d5f2a91806", "patch": "@@ -1,5 +1,6 @@\n - IMPROVE: Retrieve task now also optionally do ivy file downloads (IVY-167) (with the contribution of Costin Leau)\r\n \r\n+- FIX: cryptic NPE due to spelling error in ivy.xml (IVY-177)\r\n - FIX: conflicts with dynamic revisions not resolved properly (IVY-181)\r\n - FIX: incorrect configuration definition gives misleading NullPointerException (IVY-175)\r\n - FIX: throw an error when using a non-existing conflict manager as default (IVY-179) (thanks to Maarten Coene)\r", "filename": "CHANGES.txt"}, {"additions": 5, "raw_url": "https://github.com/apache/ant-ivy/raw/d55ed9283104db6e145dfce0970dd6d5f2a91806/src/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/d55ed9283104db6e145dfce0970dd6d5f2a91806/src/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParser.java", "sha": "4fca74d6045cfcc584ec7193e237a651dd268919", "changes": 7, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParser.java?ref=d55ed9283104db6e145dfce0970dd6d5f2a91806", "patch": "@@ -149,6 +149,7 @@ private void parse(URL xmlURL, Resource res, boolean validate) throws ParseExcep\n             ise.initCause(ex);\r\n             throw ise;\r\n         } catch (Exception ex) {\r\n+            checkErrors();\r\n             ParseException pe = new ParseException(ex.getMessage()+\" in \"+xmlURL, 0);\r\n             pe.initCause(ex);\r\n             throw pe;\r\n@@ -383,8 +384,10 @@ public void startElement(String uri, String localName, String qName, Attributes\n                 addError(\"unknwon tag \"+qName);\r\n             }\r\n         } catch (Exception ex) {\r\n-            addError(\"exception while parsing: \"+ex.getMessage());\r\n-            throw new SAXException(\"exception while parsing: \"+ex.getMessage(), ex);\r\n+            if (ex instanceof SAXException) {\r\n+                throw (SAXException)ex;\r\n+            }\r\n+            throw new SAXException(\"problem occured while parsing ivy file. message: \"+ex.getMessage(), ex);\r\n         }\r\n     }\r\n \r", "filename": "src/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParser.java"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/d55ed9283104db6e145dfce0970dd6d5f2a91806/test/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParserTest.java", "blob_url": "https://github.com/apache/ant-ivy/blob/d55ed9283104db6e145dfce0970dd6d5f2a91806/test/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParserTest.java", "sha": "a0ba589f8fda05f395bc5527e9e29195a8f7a16d", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/test/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParserTest.java?ref=d55ed9283104db6e145dfce0970dd6d5f2a91806", "patch": "@@ -61,12 +61,12 @@ public void testBad() throws IOException {\n         }\r\n     }\r\n \r\n-    public void testBad2() throws IOException {\r\n+    public void testBadOrg() throws IOException {\r\n         try {\r\n             XmlModuleDescriptorParser.getInstance().parseDescriptor(_ivy, getClass().getResource(\"test-bad-org.xml\"), true);\r\n             fail(\"bad ivy file raised no error\");\r\n         } catch (ParseException ex) {\r\n-            // ok\r\n+            assertTrue(ex.getMessage().indexOf(\"organization\") != -1);\r\n         }\r\n     }\r\n \r", "filename": "test/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParserTest.java"}], "repo": "ant-ivy"}, {"commit": "https://github.com/apache/ant-ivy/commit/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "parent": "https://github.com/apache/ant-ivy/commit/f11bd7cbff7ee68afa55dcc6baec97b2adaf43e1", "message": "When catching an exception, and the stacktrace might be miningful (actually hightly valuable for a NPE), log the stack trace in debug.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@1374870 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "ant-ivy_42", "file": [{"additions": 0, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/ant/AntBuildTrigger.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/ant/AntBuildTrigger.java", "sha": "73d4279f392ca28c0cbff0eb95f6d26d4ecb2f2e", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/ant/AntBuildTrigger.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -107,7 +107,6 @@ public void progress(IvyEvent event) {\n                     ant.execute();\n                 } catch (BuildException e) {\n                     Message.verbose(\"Exception occurred while executing target \" + target);\n-                    e.printStackTrace(); // TODO: remove when finished debugging\n                     throw e;\n                 }\n                 markBuilt(f);", "filename": "src/java/org/apache/ivy/ant/AntBuildTrigger.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/ant/ConvertManifestTask.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/ant/ConvertManifestTask.java", "sha": "57dc24bdc426a69ab1e3ad9e3309171f45089548", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/ant/ConvertManifestTask.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -65,7 +65,7 @@ public void doExecute() throws BuildException {\n             try {\n                 profileProvider = new ExecutionEnvironmentProfileProvider();\n             } catch (IOException e) {\n-                throw new BuildException(\"Enable to load the default environment profiles\");\n+                throw new BuildException(\"Enable to load the default environment profiles\", e);\n             }\n         }\n ", "filename": "src/java/org/apache/ivy/ant/ConvertManifestTask.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/ant/IvyDependencyArtifact.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/ant/IvyDependencyArtifact.java", "sha": "e9d7197f984bbb20633c86e9e3ed2ae952a0a05f", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/ant/IvyDependencyArtifact.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -58,7 +58,7 @@ void addArtifact(DefaultDependencyDescriptor dd, String masterConf) {\n         try {\n             u = url == null ? null : new URL(url);\n         } catch (MalformedURLException e) {\n-            throw new BuildException(\"Malformed url in the artifact: \" + e.getMessage());\n+            throw new BuildException(\"Malformed url in the artifact: \" + e.getMessage(), e);\n         }\n         DefaultDependencyArtifactDescriptor dad = new DefaultDependencyArtifactDescriptor(dd, name,\n                 typePattern, extPattern, u, null);", "filename": "src/java/org/apache/ivy/ant/IvyDependencyArtifact.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/IvyContext.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/IvyContext.java", "sha": "4a84c81f9349cf045a52906c4fce3d19bf78397e", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/IvyContext.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -200,6 +200,7 @@ private Ivy getDefaultIvy() {\n             try {\n                 defaultIvy.configureDefault();\n             } catch (Exception e) {\n+                Message.debug(e);\n                 //???\n             }\n         }", "filename": "src/java/org/apache/ivy/core/IvyContext.java"}, {"additions": 11, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/cache/DefaultRepositoryCacheManager.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/cache/DefaultRepositoryCacheManager.java", "sha": "b30dd8b42d51c7cdf4b2a99a7592f2c461a04505", "changes": 20, "status": "modified", "deletions": 9, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/cache/DefaultRepositoryCacheManager.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -684,8 +684,7 @@ private ResolvedModuleRevision doFindModuleInCache(\n                     }\n                 } catch (Exception e) {\n                     // will try with resolver\n-                    Message.debug(\"\\tproblem while parsing cached ivy file for: \" + mrid + \": \"\n-                        + e.getMessage());\n+                    Message.debug(\"\\tproblem while parsing cached ivy file for: \" + mrid, e);\n                 }\n             } else {\n                 Message.debug(\"\\tno ivy file in cache for \" + mrid + \": tried \" + ivyFile);\n@@ -896,6 +895,7 @@ public ArtifactDownloadReport download(\n                         adr.setDownloadTimeMillis(System.currentTimeMillis() - start);\n                     }\n                 } catch (Exception ex) {\n+                    Message.debug(ex);\n                     adr.setDownloadStatus(DownloadStatus.FAILED);\n                     adr.setDownloadDetails(ex.getMessage());\n                     adr.setDownloadTimeMillis(System.currentTimeMillis() - start);\n@@ -982,6 +982,7 @@ public ArtifactDownloadReport downloadRepositoryResource(final Resource resource\n                         adr.setLocalFile(archiveFile);\n                     }\n                 } catch (Exception ex) {\n+                    Message.debug(ex);\n                     origin.setExist(false);\n                     saveArtifactOrigin(artifact, origin);\n                     adr.setDownloadStatus(DownloadStatus.FAILED);\n@@ -1081,11 +1082,13 @@ public void originalToCachedModuleDescriptor(\n         } catch (RuntimeException e) {\n             throw e;\n         } catch (Exception e) {\n-            Message.warn(\"impossible to put metadata file in cache: \" \n-                + (orginalMetadataRef == null \n-                        ? String.valueOf(md.getResolvedModuleRevisionId()) \n-                        : String.valueOf(orginalMetadataRef))\n-                + \". \" + e.getClass().getName() + \": \" + e.getMessage());\n+            String metadataRef;\n+            if (orginalMetadataRef == null) {\n+                metadataRef = String.valueOf(md.getResolvedModuleRevisionId());\n+            } else {\n+                metadataRef = String.valueOf(orginalMetadataRef);\n+            }\n+            Message.warn(\"impossible to put metadata file in cache: \" + metadataRef, e);\n         } finally {\n             unlockMetadataArtifact(mrid);\n         }\n@@ -1256,8 +1259,7 @@ public ResolvedResource resolve(Artifact artifact) {\n                 \n                 return new ResolvedModuleRevision(resolver, resolver, md, madr);\n             } catch (IOException ex) {\n-                Message.warn(\"io problem while parsing ivy file: \" + mdRef.getResource() + \": \"\n-                    + ex.getMessage());\n+                Message.warn(\"io problem while parsing ivy file: \" + mdRef.getResource(), ex);\n                 return null;\n             }\n         } finally {", "filename": "src/java/org/apache/ivy/core/cache/DefaultRepositoryCacheManager.java"}, {"additions": 3, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/check/CheckEngine.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/check/CheckEngine.java", "sha": "39f3723b6efdd704ffcc866e070d76cb2111a5ae", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/check/CheckEngine.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -124,13 +124,13 @@ public boolean check(URL ivyFile, String resolvername) {\n             }\n             return result;\n         } catch (ParseException e) {\n-            Message.info(\"parse problem on \" + ivyFile + \": \" + e);\n+            Message.info(\"parse problem on \" + ivyFile, e);\n             return false;\n         } catch (IOException e) {\n-            Message.info(\"io problem on \" + ivyFile + \": \" + e);\n+            Message.info(\"io problem on \" + ivyFile, e);\n             return false;\n         } catch (Exception e) {\n-            Message.info(\"problem on \" + ivyFile + \": \" + e);\n+            Message.info(\"problem on \" + ivyFile, e);\n             return false;\n         }\n     }", "filename": "src/java/org/apache/ivy/core/check/CheckEngine.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/report/ConfigurationResolveReport.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/report/ConfigurationResolveReport.java", "sha": "0a1e164b4a331aaa608903acd0893f3c8fae51f6", "changes": 3, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/report/ConfigurationResolveReport.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -101,8 +101,7 @@ public void checkIfChanged() {\n                 hasChanged = Boolean.valueOf(!previousDepSet.equals(getModuleRevisionIds()));\n             } catch (Exception e) {\n                 Message.warn(\"Error while parsing configuration resolve report \"\n-                        + previousReportFile.getAbsolutePath());\n-                e.printStackTrace();\n+                        + previousReportFile.getAbsolutePath(), e);\n                 hasChanged = Boolean.TRUE;\n             }\n         } else {", "filename": "src/java/org/apache/ivy/core/report/ConfigurationResolveReport.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/repository/RepositoryManagementEngine.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/repository/RepositoryManagementEngine.java", "sha": "c6f97d4e24a1735ff24f8f23ce4145fa41d2e089", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/repository/RepositoryManagementEngine.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -145,6 +145,7 @@ public void load() {\n             try {\n                 loadModuleRevision(mrids[i]);\n             } catch (Exception e) {\n+                Message.debug(e);\n                 errors.put(mrids[i], e.getMessage());\n             }\n         }", "filename": "src/java/org/apache/ivy/core/repository/RepositoryManagementEngine.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/resolve/ResolveEngine.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/resolve/ResolveEngine.java", "sha": "f36a3b56a0626af7e7ba0d9acf7bf981c3853956", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/resolve/ResolveEngine.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -346,6 +346,7 @@ public ResolveReport resolve(ModuleDescriptor md, ResolveOptions options)\n             eventManager.fireIvyEvent(new EndResolveEvent(md, confs, report));\n             return report;\n         } catch (RuntimeException ex) {\n+            Message.debug(ex);\n             Message.error(ex.getMessage());\n             Message.sumupProblems();\n             throw ex;", "filename": "src/java/org/apache/ivy/core/resolve/ResolveEngine.java"}, {"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/settings/IvySettings.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/core/settings/IvySettings.java", "sha": "ce8db6cf81e54e332e6be8bd0099d3c1677a8b71", "changes": 15, "status": "modified", "deletions": 9, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/core/settings/IvySettings.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -234,15 +234,14 @@ public IvySettings(IvyVariableContainer variableContainer) {\n                 } catch (FileNotFoundException e) {\n                     Message.warn(\"typedefs file not found: \" + files[i].trim());\n                 } catch (IOException e) {\n-                    Message.warn(\"problem with typedef file: \" + files[i].trim() + \": \"\n-                            + e.getMessage());\n+                    Message.warn(\"problem with typedef file: \" + files[i].trim(), e);\n                 }\n             }\n         } else {\n             try {\n                 typeDefs(getSettingsURL(\"typedef.properties\").openStream(), true);\n             } catch (IOException e) {\n-                Message.warn(\"impossible to load default type defs\");\n+                Message.warn(\"impossible to load default type defs\", e);\n             }\n         }\n         LatestLexicographicStrategy latestLexicographicStrategy = new LatestLexicographicStrategy();\n@@ -279,8 +278,8 @@ public IvySettings(IvyVariableContainer variableContainer) {\n             addMatcher((PatternMatcher) instanceField.get(null));\n         } catch (Exception e) {\n             // ignore: the matcher isn't on the classpath\n-            Message.info(\"impossible to define glob matcher: \" \n-                + \"org.apache.ivy.plugins.matcher.GlobPatternMatcher was not found.\");\n+            Message.info(\"impossible to define glob matcher: \"\n+                    + \"org.apache.ivy.plugins.matcher.GlobPatternMatcher was not found\", e);\n         }\n \n         addReportOutputter(new LogReportOutputter());\n@@ -323,8 +322,7 @@ public void configureRepositories(boolean remote) {\n                     props.load(URLHandlerRegistry.getDefault().openStream(url));\n                     configured = true;\n                 } catch (Exception ex) {\n-                    Message.verbose(\"unable to use remote repository configuration: \"\n-                            + ex.getMessage());\n+                    Message.verbose(\"unable to use remote repository configuration\", ex);\n                     props = new Properties();\n                 }\n             }\n@@ -334,8 +332,7 @@ public void configureRepositories(boolean remote) {\n                     repositoryPropsStream = getSettingsURL(\"repository.properties\").openStream();\n                     props.load(repositoryPropsStream);\n                 } catch (IOException e) {\n-                    Message.error(\"unable to use internal repository configuration: \"\n-                            + e.getMessage());\n+                    Message.error(\"unable to use internal repository configuration\", e);\n                     if (repositoryPropsStream != null) {\n                         try {\n                             repositoryPropsStream.close();", "filename": "src/java/org/apache/ivy/core/settings/IvySettings.java"}, {"additions": 3, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/osgi/obr/OBRResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/osgi/obr/OBRResolver.java", "sha": "581be3c6731847e3629e88061bea221bf719e971", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/osgi/obr/OBRResolver.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -128,15 +128,15 @@ private void loadRepoFromFile(URI baseUri, File repoFile, String sourceLocation)\n         } catch (ParseException e) {\n             throw new RuntimeException(\"The OBR repository resolver \" + getName()\n                     + \" couldn't be configured: the file \" + sourceLocation\n-                    + \" is incorrectly formed (\" + e.getMessage() + \")\");\n+                    + \" is incorrectly formed (\" + e.getMessage() + \")\", e);\n         } catch (IOException e) {\n             throw new RuntimeException(\"The OBR repository resolver \" + getName()\n                     + \" couldn't be configured: the file \" + sourceLocation\n-                    + \" could not be read (\" + e.getMessage() + \")\");\n+                    + \" could not be read (\" + e.getMessage() + \")\", e);\n         } catch (SAXException e) {\n             throw new RuntimeException(\"The OBR repository resolver \" + getName()\n                     + \" couldn't be configured: the file \" + sourceLocation\n-                    + \" has incorrect XML (\" + e.getMessage() + \")\");\n+                    + \" has incorrect XML (\" + e.getMessage() + \")\", e);\n         }\n         try {\n             in.close();", "filename": "src/java/org/apache/ivy/osgi/obr/OBRResolver.java"}, {"additions": 22, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/osgi/p2/P2MetadataParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/osgi/p2/P2MetadataParser.java", "sha": "0e9162285d192b7c442cdf9b78ccc80a7deac291", "changes": 37, "status": "modified", "deletions": 15, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/osgi/p2/P2MetadataParser.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -163,17 +163,24 @@ protected void handleAttributes(Attributes atts) throws SAXException {\n             options = Integer.parseInt(atts.getValue(OPTIONS));\n             name = atts.getValue(NAME);\n \n-            try {\n-                String uriAtt = atts.getValue(URI);\n-                String url = atts.getValue(URL);\n-                if (uri != null) {\n+            String uriAtt = atts.getValue(URI);\n+            String urlAtt = atts.getValue(URL);\n+\n+            if (uriAtt != null) {\n+                try {\n                     uri = new URI(uriAtt);\n-                } else if (url != null) {\n-                    uri = new URI(url);\n+                } catch (URISyntaxException e) {\n+                    throw new SAXParseException(\"Invalid uri attribute \" + uriAtt + \"(\"\n+                            + e.getMessage() + \")\", getLocator());\n+                }\n+            }\n+            if (uri != null && urlAtt != null) {\n+                try {\n+                    uri = new URI(urlAtt);\n+                } catch (URISyntaxException e) {\n+                    throw new SAXParseException(\"Invalid url attribute \" + urlAtt + \"(\"\n+                            + e.getMessage() + \")\", getLocator());\n                 }\n-            } catch (URISyntaxException e) {\n-                // TODO Auto-generated catch block\n-                e.printStackTrace();\n             }\n         }\n     }\n@@ -300,14 +307,14 @@ public void childHanlded(DelegetingHandler child) throws SAXParseException {\n                         try {\n                             embeddedInfo = ManifestParser.parseManifest(manifest);\n                         } catch (IOException e) {\n-                            Message.verbose(\"The Manifest of the source bundle \"\n-                                    + bundleInfo.getSymbolicName() + \" could not be parsed: \"\n-                                    + e.getMessage());\n+                            Message.verbose(\n+                                \"The Manifest of the source bundle \" + bundleInfo.getSymbolicName()\n+                                        + \" could not be parsed\", e);\n                             return;\n                         } catch (ParseException e) {\n-                            Message.verbose(\"The Manifest of the source bundle \"\n-                                    + bundleInfo.getSymbolicName() + \" is ill formed: \"\n-                                    + e.getMessage());\n+                            Message.verbose(\n+                                \"The Manifest of the source bundle \" + bundleInfo.getSymbolicName()\n+                                        + \" is ill formed\", e);\n                             return;\n                         }\n                         if (!embeddedInfo.isSource()) {", "filename": "src/java/org/apache/ivy/osgi/p2/P2MetadataParser.java"}, {"additions": 3, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/osgi/repo/AbstractFSManifestIterable.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/osgi/repo/AbstractFSManifestIterable.java", "sha": "6beee7296381581f23207481bb4c2c770d8ec0d4", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/osgi/repo/AbstractFSManifestIterable.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -89,7 +89,7 @@ public boolean hasNext() {\n                         try {\n                             bundleCandidates = listBundleFiles(currentDir).iterator();\n                         } catch (IOException e) {\n-                            Message.warn(\"Unlistable dir: \" + currentDir + \" (\" + e + \")\");\n+                            Message.warn(\"Unlistable dir: \" + currentDir, e);\n                             currentDir = null;\n                         }\n                     } else if (dirs.size() <= 1) {\n@@ -112,9 +112,9 @@ public boolean hasNext() {\n                             Message.debug(\"No manifest in jar: \" + bundleCandidate);\n                         }\n                     } catch (FileNotFoundException e) {\n-                        Message.debug(\"Jar file just removed: \" + bundleCandidate + \" (\" + e + \")\");\n+                        Message.debug(\"Jar file just removed: \" + bundleCandidate, e);\n                     } catch (IOException e) {\n-                        Message.warn(\"Unreadable jar: \" + bundleCandidate + \" (\" + e + \")\");\n+                        Message.warn(\"Unreadable jar: \" + bundleCandidate, e);\n                     } finally {\n                         if (in != null) {\n                             try {", "filename": "src/java/org/apache/ivy/osgi/repo/AbstractFSManifestIterable.java"}, {"additions": 6, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/osgi/util/DelegetingHandler.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/osgi/util/DelegetingHandler.java", "sha": "036de269b9a28843e3cd922f8d573203da41e21f", "changes": 7, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/osgi/util/DelegetingHandler.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -145,7 +145,7 @@ private void skipOnError(SkipOnErrorCallback callback) throws SAXException {\n         } catch (SAXException e) {\n             if (skipOnError) {\n                 skip();\n-                log(Message.MSG_ERR, e.getMessage());\n+                log(Message.MSG_ERR, e.getMessage(), e);\n             } else {\n                 throw e;\n             }\n@@ -511,6 +511,11 @@ protected void doFatalError(SAXParseException exception) throws SAXException {\n     // Functions related to error handling\n     // //////////////////////\n \n+    protected void log(int logLevel, String message, Throwable t) {\n+        Message.debug(t);\n+        log(logLevel, message);\n+    }\n+\n     protected void log(int logLevel, String message) {\n         Message.log(logLevel, getLocation(getLocator()) + message);\n     }", "filename": "src/java/org/apache/ivy/osgi/util/DelegetingHandler.java"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/parser/xml/XmlModuleDescriptorParser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/parser/xml/XmlModuleDescriptorParser.java", "sha": "ab209a55965a80d59cfbe8bfbc1b08f99c68fd89", "changes": 5, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/parser/xml/XmlModuleDescriptorParser.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -411,16 +411,15 @@ protected void extendsStarted(Attributes attributes) throws ParseException {\n                     parent = resolveParentFromModuleInheritanceRepository(parentResolver, parentMrid);\n                 }\n             } catch (IOException e) {\n-                Message.warn(\"Unable to parse included ivy file \" + location + \": \" \n-                    + e.getMessage());\n+                Message.warn(\"Unable to parse included ivy file \" + location, e);\n             }\n             \n             // if not found, tries to resolve using repositories\n             if (parent == null) {\n                 try {\n                     parent = parseOtherIvyFile(parentMrid);\n                 } catch (ParseException e) {\n-                    Message.warn(\"Unable to parse included ivy file for \" + parentMrid.toString());\n+                    Message.warn(\"Unable to parse included ivy file for \" + parentMrid.toString(), e);\n                 }\n             }\n             ", "filename": "src/java/org/apache/ivy/plugins/parser/xml/XmlModuleDescriptorParser.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/sftp/SFTPRepository.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/sftp/SFTPRepository.java", "sha": "02c113dc63b8f6afeb47fe1f78de45569e7f8cdc", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/repository/sftp/SFTPRepository.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -104,7 +104,7 @@ public Resource resolveResource(String path) {\n                 }\n             }\n         } catch (Exception e) {\n-            Message.debug(\"reolving resource error: \" + e.getMessage());\n+            Message.debug(\"Error while resolving resource \" + path, e);\n             // silent fail, return unexisting resource\n         }\n ", "filename": "src/java/org/apache/ivy/plugins/repository/sftp/SFTPRepository.java"}, {"additions": 7, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/url/ChainedRepository.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/url/ChainedRepository.java", "sha": "417b9a5efeb14b3a03a995bd7d8fa177a6fc856d", "changes": 13, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/repository/url/ChainedRepository.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -48,7 +48,7 @@ public Resource getResource(String source) throws IOException {\n                     return r;\n                 }\n             } catch (Exception e) {\n-                logFailed(repository);\n+                logFailed(repository, e);\n             }\n         }\n         // resource that basically doesn't exists\n@@ -65,7 +65,7 @@ public void get(String source, File destination) throws IOException {\n                 repository.get(source, destination);\n                 ok = true;\n             } catch (Exception e) {\n-                logFailed(repository);\n+                logFailed(repository, e);\n             }\n             if (ok) {\n                 logSuccess(repository);\n@@ -87,7 +87,7 @@ public List list(String parent) throws IOException {\n                     return list;\n                 }\n             } catch (Exception e) {\n-                logFailed(repository);\n+                logFailed(repository, e);\n             }\n         }\n         throw newIOEFail(\"list contents in \" + parent);\n@@ -97,9 +97,10 @@ private void logTry(Repository repository) {\n         Message.debug(\"Mirrored repository \" + getName() + \": trying \" + repository.getName());\n     }\n \n-    private void logFailed(Repository repository) {\n-        Message.warn(\"Mirrored repository \" + getName() + \": \" + repository\n-                + \" is not available. Trying the next one in the mirror list...\");\n+    private void logFailed(Repository repository, Exception e) {\n+        Message.warn(\"Mirrored repository \" + getName() + \": \" + repository.getName()\n+                + \" is not available\", e);\n+        Message.warn(\"Trying the next one in the mirror list...\");\n     }\n \n     private void logSuccess(Repository repository) {", "filename": "src/java/org/apache/ivy/plugins/repository/url/ChainedRepository.java"}, {"additions": 3, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/vfs/VfsResource.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/vfs/VfsResource.java", "sha": "3d753fdf879f032d7c27df979e1b83188541b130", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/repository/vfs/VfsResource.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -68,6 +68,7 @@ private void init() {\n                 lastModified = content.getLastModifiedTime();\n                 contentLength = content.getSize();\n             } catch (FileSystemException e) {\n+                Message.debug(e);\n                 Message.verbose(e.getLocalizedMessage());\n                 exists = false;\n                 lastModified = 0;\n@@ -98,6 +99,7 @@ public List getChildren() {\n                 }\n             }\n         } catch (IOException e) {\n+            Message.debug(e);\n             Message.verbose(e.getLocalizedMessage());\n         }\n         return list;\n@@ -186,7 +188,7 @@ public boolean physicallyExists() {\n             // include all exceptions when I found it would throw a NPE exception when the query was\n             // run on non-wellformed VFS URI.\n         } catch (Exception e) {\n-            Message.verbose(e.getLocalizedMessage());\n+            Message.verbose(\"Fail to check the existance of the resource \" + getName(), e);\n             return false;\n         }\n     }", "filename": "src/java/org/apache/ivy/plugins/repository/vfs/VfsResource.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpRepository.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpRepository.java", "sha": "fcae75875dc5127144d3bebd4020cfc73d9272a7", "changes": 4, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpRepository.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -659,9 +659,7 @@ protected Resource lslToResource(String file, String responseLine) {\n                     return new BasicResource(file, true, contentLength, FORMAT.parse(date)\n                             .getTime(), false);\n                 } catch (Exception ex) {\n-                    Message\n-                            .warn(\"impossible to parse server response: \" + responseLine + \": \"\n-                                    + ex);\n+                    Message.warn(\"impossible to parse server response: \" + responseLine, ex);\n                     return new BasicResource(file, false, 0, 0, false);\n                 }\n             }", "filename": "src/java/org/apache/ivy/plugins/repository/vsftp/VsftpRepository.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpResource.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpResource.java", "sha": "d28adb1c92db27f213c302bb3f2d5ed9fd3458ca", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpResource.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -36,6 +36,7 @@ protected void init() {\n         try {\n             init(repository.getInitResource(getName()));\n         } catch (IOException e) {\n+            Message.debug(e);\n             Message.verbose(e.toString());\n         }\n     }", "filename": "src/java/org/apache/ivy/plugins/repository/vsftp/VsftpResource.java"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/BasicResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/BasicResolver.java", "sha": "3c012df2bdf382dab613ef6e1b1c4d416d779f00", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/BasicResolver.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -549,7 +549,7 @@ public MDResolvedResource parse(Resource resource, String rev) {\n                         return new MDResolvedResource(resource, rev, rmr);\n                     }\n                 } catch (ParseException e) {\n-                    Message.warn(\"Failed to parse the file '\" + resource + \"': \" + e.getMessage());\n+                    Message.warn(\"Failed to parse the file '\" + resource + \"'\", e);\n                     return null;\n                 }\n             }\n@@ -868,6 +868,7 @@ public ResolvedResource resolve(Artifact artifact) {\n                         String revision = origin.getArtifact().getModuleRevisionId().getRevision();\n                         return new ResolvedResource(resource, revision);\n                     } catch (IOException e) {\n+                        Message.debug(e);\n                         return null;\n                     }\n                 }", "filename": "src/java/org/apache/ivy/plugins/resolver/BasicResolver.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/ChainResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/ChainResolver.java", "sha": "3b1904f1d83de19a392e5eca8424941bcb6b9ac5", "changes": 3, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/ChainResolver.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -106,8 +106,7 @@ public ResolvedModuleRevision getDependency(DependencyDescriptor dd, ResolveData\n                     mr = forcedRevision(mr);\n                 }\n             } catch (Exception ex) {\n-                Message.verbose(\"problem occurred while resolving \" + dd + \" with \" + resolver\n-                        + \": \" + StringUtils.getStackTrace(ex));\n+                Message.verbose(\"problem occurred while resolving \" + dd + \" with \" + resolver, ex);\n                 errors.add(ex);\n             } finally {\n                 if (oldLatest != null) {", "filename": "src/java/org/apache/ivy/plugins/resolver/ChainResolver.java"}, {"additions": 7, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/IBiblioResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/IBiblioResolver.java", "sha": "afc73ce305e62d00de613adf4caf63681f850d5e", "changes": 20, "status": "modified", "deletions": 13, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/IBiblioResolver.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -195,14 +195,11 @@ public void endElement(String uri, String localName, String qName)\n                     Message.verbose(\"\\tmaven-metadata not available: \" + metadata);\n                 }\n             } catch (IOException e) {\n-                Message.verbose(\n-                    \"impossible to access maven metadata file, ignored: \" + e.getMessage());\n+                Message.verbose(\"impossible to access maven metadata file, ignored\", e);\n             } catch (SAXException e) {\n-                Message.verbose(\n-                    \"impossible to parse maven metadata file, ignored: \" + e.getMessage());\n+                Message.verbose(\"impossible to parse maven metadata file, ignored\", e);\n             } catch (ParserConfigurationException e) {\n-                Message.verbose(\n-                    \"impossible to parse maven metadata file, ignored: \" + e.getMessage());\n+                Message.verbose(\"impossible to parse maven metadata file, ignored\", e);\n             } finally {\n                 if (metadataStream != null) {\n                     try {\n@@ -409,7 +406,7 @@ public void publish(Artifact artifact, File src) {\n                     } catch (IOException e) {\n                         Message.warn(\n                             \"impossible to get resource from name listed by maven-metadata.xml:\"\n-                            + rres + \": \" + e.getMessage());\n+                                    + rres, e);\n                     }\n                 }\n                 return (ResolvedResource[]) rres.toArray(new ResolvedResource[rres.size()]);\n@@ -452,14 +449,11 @@ public void endElement(String uri, String localName, String qName)\n                 Message.verbose(\"\\tmaven-metadata not available: \" + metadata);\n             }\n         } catch (IOException e) {\n-            Message.verbose(\n-                \"impossible to access maven metadata file, ignored: \" + e.getMessage());\n+            Message.verbose(\"impossible to access maven metadata file, ignored\", e);\n         } catch (SAXException e) {\n-            Message.verbose(\n-                \"impossible to parse maven metadata file, ignored: \" + e.getMessage());\n+            Message.verbose(\"impossible to parse maven metadata file, ignored\", e);\n         } catch (ParserConfigurationException e) {\n-            Message.verbose(\n-                \"impossible to parse maven metadata file, ignored: \" + e.getMessage());\n+            Message.verbose(\"impossible to parse maven metadata file, ignored\", e);\n         } finally {\n             if (metadataStream != null) {\n                 try {", "filename": "src/java/org/apache/ivy/plugins/resolver/IBiblioResolver.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/IvyRepResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/IvyRepResolver.java", "sha": "970db275fe550626da135f31c3fec2a47b62ace6", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/IvyRepResolver.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -239,7 +239,7 @@ public void startElement(String uri, String localName, String qName,\n         } catch (MalformedURLException e) {\n             //???\n         } catch (Exception e) {\n-            Message.warn(\"unable to parse content.xml file on ivyrep: \" + e.getMessage());\n+            Message.warn(\"unable to parse content.xml file on ivyrep\", e);\n         }\n         return super.listOrganisations();\n     }", "filename": "src/java/org/apache/ivy/plugins/resolver/IvyRepResolver.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/RepositoryResolver.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/RepositoryResolver.java", "sha": "ed99396fc645449420e0af941660a120bed32574", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/RepositoryResolver.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -309,6 +309,7 @@ protected boolean exist(String path) {\n             Resource resource = repository.getResource(path);\n             return resource.exists();\n         } catch (IOException e) {\n+            Message.debug(e);\n             return false;\n         }\n     }", "filename": "src/java/org/apache/ivy/plugins/resolver/RepositoryResolver.java"}, {"additions": 0, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/packager/PackagerCacheEntry.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/packager/PackagerCacheEntry.java", "sha": "43089686d19c706cb61a37239b09563c40422165", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/packager/PackagerCacheEntry.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -160,7 +160,6 @@ public synchronized void build(Resource packagerResource, Map properties) throws\n             project.executeTarget(\"build\");\n             this.built = true;\n         } catch (BuildException e) {\n-            e.printStackTrace(System.out);\n             Message.verbose(\"packager resolver build failed: \" + e);\n             throw e;\n         }", "filename": "src/java/org/apache/ivy/plugins/resolver/packager/PackagerCacheEntry.java"}, {"additions": 8, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/util/ResolverHelper.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/plugins/resolver/util/ResolverHelper.java", "sha": "1f748f18108fe9bf4accdaba4f3fbba16fb94ed9", "changes": 23, "status": "modified", "deletions": 15, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/plugins/resolver/util/ResolverHelper.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -89,13 +89,10 @@ private ResolverHelper() {\n                     return null;\n                 }\n             } catch (IOException e) {\n-                Message.verbose(\n-                    \"problem while listing resources in \" + root + \" with \" + rep + \":\");\n-                Message.verbose(\"  \" + e.getClass().getName() + \" \" + e.getMessage());\n+                Message.verbose(\"problem while listing resources in \" + root + \" with \" + rep, e);\n                 return null;\n             } catch (Exception e) {\n-                Message.warn(\"problem while listing resources in \" + root + \" with \" + rep + \":\");\n-                Message.warn(\"  \" + e.getClass().getName() + \" \" + e.getMessage());\n+                Message.warn(\"problem while listing resources in \" + root + \" with \" + rep, e);\n                 return null;\n             }\n         }\n@@ -123,12 +120,10 @@ private ResolverHelper() {\n                 return null;\n             }\n         } catch (IOException e) {\n-            Message.verbose(\"problem while listing resources in \" + parent + \" with \" + rep + \":\");\n-            Message.verbose(\"  \" + e.getClass().getName() + \" \" + e.getMessage());\n+            Message.verbose(\"problem while listing resources in \" + parent + \" with \" + rep, e);\n             return null;\n         } catch (Exception e) {\n-            Message.warn(\"problem while listing resources in \" + parent + \" with \" + rep + \":\");\n-            Message.warn(\"  \" + e.getClass().getName() + \" \" + e.getMessage());\n+            Message.warn(\"problem while listing resources in \" + parent + \" with \" + rep, e);\n             return null;\n         }\n     }\n@@ -159,7 +154,7 @@ private ResolverHelper() {\n                     }\n                 } catch (IOException e) {\n                     Message.warn(\"impossible to get resource from name listed by repository: \"\n-                            + rres + \": \" + e.getMessage());\n+                            + rres, e);\n                 }\n             }\n             if (revs.length != ret.size()) {\n@@ -180,7 +175,7 @@ private ResolverHelper() {\n                 }\n             } catch (IOException e) {\n                 Message.debug(\"\\timpossible to get resource from name listed by repository: \"\n-                        + partiallyResolvedPattern + \": \" + e.getMessage());\n+                        + partiallyResolvedPattern, e);\n             }\n             Message.debug(\"\\tno revision found\");\n         }\n@@ -304,8 +299,7 @@ private ResolverHelper() {\n                     Message.debug(\"\\t\\t\" + ret.size() + \" matched \" + pattern);\n                     return (String[]) ret.toArray(new String[ret.size()]);\n                 } catch (Exception e) {\n-                    Message.warn(\"problem while listing files in \" + root + \": \" + e.getClass()\n-                            + \" \" + e.getMessage());\n+                    Message.warn(\"problem while listing files in \" + root, e);\n                     return null;\n                 }\n             }\n@@ -337,8 +331,7 @@ private static String standardize(String path) {\n             }\n             return null;\n         } catch (Exception e) {\n-            Message.warn(\"problem while listing directories in \" + root + \": \" + e.getClass() + \" \"\n-                    + e.getMessage());\n+            Message.warn(\"problem while listing directories in \" + root, e);\n             return null;\n         }\n     }", "filename": "src/java/org/apache/ivy/plugins/resolver/util/ResolverHelper.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/tools/analyser/JarJarDependencyAnalyser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/tools/analyser/JarJarDependencyAnalyser.java", "sha": "343887423ceb4ae54dc9b312b86020ad73335a25", "changes": 3, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/tools/analyser/JarJarDependencyAnalyser.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -80,8 +80,7 @@ public JarJarDependencyAnalyser(File jarjarjarLocation) {\n                 md.addDependency(dd);\n             }\n         } catch (IOException e) {\n-            // TODO Auto-generated catch block\n-            e.printStackTrace();\n+            Message.debug(e);\n         }\n         return (ModuleDescriptor[]) mds.values().toArray(new ModuleDescriptor[mds.values().size()]);\n     }", "filename": "src/java/org/apache/ivy/tools/analyser/JarJarDependencyAnalyser.java"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/tools/analyser/JarModuleFinder.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/tools/analyser/JarModuleFinder.java", "sha": "8cbd262036b956a70787cdd16408ea367825faf6", "changes": 2, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/tools/analyser/JarModuleFinder.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -26,6 +26,7 @@\n import org.apache.ivy.plugins.resolver.util.FileURLLister;\n import org.apache.ivy.plugins.resolver.util.ResolverHelper;\n import org.apache.ivy.plugins.resolver.util.URLLister;\n+import org.apache.ivy.util.Message;\n \n public class JarModuleFinder {\n     private String pattern;\n@@ -62,6 +63,7 @@ public JarModuleFinder(String pattern) {\n             }\n \n         } catch (Exception e) {\n+            Message.debug(e);\n             // TODO: handle exception\n         }\n         return (JarModule[]) ret.toArray(new JarModule[ret.size()]);", "filename": "src/java/org/apache/ivy/tools/analyser/JarModuleFinder.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/tools/analyser/RepositoryAnalyser.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/tools/analyser/RepositoryAnalyser.java", "sha": "1353491e783131221640dfa74c1c4989ae67ff2c", "changes": 3, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/tools/analyser/RepositoryAnalyser.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -38,8 +38,7 @@ public void analyse(String pattern, DependencyAnalyser depAnalyser) {\n                 Message.info(\"generating \" + ivyFile);\n                 XmlModuleDescriptorWriter.write(mds[i], ivyFile);\n             } catch (IOException e) {\n-                // TODO Auto-generated catch block\n-                e.printStackTrace();\n+                Message.debug(e);\n             }\n         }\n     }", "filename": "src/java/org/apache/ivy/tools/analyser/RepositoryAnalyser.java"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/CredentialsUtil.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/CredentialsUtil.java", "sha": "68a0ba85b4e2905f383b96107cf736c8b65c0c72", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/CredentialsUtil.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -115,7 +115,7 @@ public static Credentials promptCredentials(Credentials c, File passfile) {\n                     fos = new FileOutputStream(passfile);\n                     props.store(fos, \"\");\n                 } catch (Exception e) {\n-                    Message.warn(\"error occurred while saving password file \" + passfile + \": \" + e);\n+                    Message.warn(\"error occurred while saving password file \" + passfile, e);\n                 } finally {\n                     if (fos != null) {\n                         try {\n@@ -148,7 +148,7 @@ public static Credentials loadPassfile(Credentials c, File passfile) {\n                 }\n                 return new Credentials(c.getRealm(), c.getHost(), username, passwd);\n             } catch (IOException e) {\n-                Message.warn(\"error occurred while loading password file \" + passfile + \": \" + e);\n+                Message.warn(\"error occurred while loading password file \" + passfile, e);\n             } finally {\n                 if (fis != null) {\n                     try {", "filename": "src/java/org/apache/ivy/util/CredentialsUtil.java"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/FileUtil.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/FileUtil.java", "sha": "769826b9d5a4ca29f26685ec6123cf5f45e72953", "changes": 7, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/FileUtil.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -156,11 +156,8 @@ public static void symlink(File src, File dest, CopyProgressListener l, boolean\n                 dest.delete(); // just make sure we do delete the invalid symlink!\n                 throw new IOException(\"error symlinking: \" + dest + \" isn't a symlink\"); \n             }\n-        } catch (IOException x) {\n-            Message.verbose(\"symlink failed; falling back to copy\");\n-            StringWriter buffer = new StringWriter();\n-            x.printStackTrace(new PrintWriter(buffer));\n-            Message.debug(buffer.toString());\n+        } catch (IOException e) {\n+            Message.verbose(\"symlink failed; falling back to copy\", e);\n             copy(src, dest, l, overwrite);\n         } catch (InterruptedException x) {\n             Thread.currentThread().interrupt();", "filename": "src/java/org/apache/ivy/util/FileUtil.java"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/MemoryUtil.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/MemoryUtil.java", "sha": "025c7b31ef32ec903ac045250ebc7bd05470f0b8", "changes": 5, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/MemoryUtil.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -47,8 +47,7 @@ public static long sizeOf(Class clazz) {\n             float approxSize = (endingMemoryUse - startingMemoryUse) / (float) objects.length;\n             size = Math.round(approxSize);\n         } catch (Exception e) {\n-            System.out.println(\"WARNING:couldn't instantiate\" + clazz);\n-            e.printStackTrace();\n+            Message.warn(\"Couldn't instantiate \" + clazz, e);\n         }\n         return size;\n     }\n@@ -80,7 +79,7 @@ private static void gc() {\n             System.runFinalization();\n             Thread.sleep(SLEEP_TIME);\n         } catch (Exception e) {\n-            e.printStackTrace();\n+            Message.debug(e);\n         }\n     }\n     ", "filename": "src/java/org/apache/ivy/util/MemoryUtil.java"}, {"additions": 50, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/Message.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/Message.java", "sha": "9650664c9327888343ba9e08a43d0f093912cdf6", "changes": 50, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/Message.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -165,4 +165,54 @@ public static void setShowProgress(boolean progress) {\n \n     private Message() {\n     }\n+\n+    public static void debug(String message, Throwable t) {\n+        if (t == null) {\n+            debug(message);\n+        } else {\n+            debug(message + \" (\" + t.getClass().getName() + \": \" + t.getMessage() + \")\");\n+            debug(t);\n+        }\n+    }\n+\n+    public static void verbose(String message, Throwable t) {\n+        if (t == null) {\n+            verbose(message);\n+        } else {\n+            verbose(message + \" (\" + t.getClass().getName() + \": \" + t.getMessage() + \")\");\n+            debug(t);\n+        }\n+    }\n+\n+    public static void info(String message, Throwable t) {\n+        if (t == null) {\n+            info(message);\n+        } else {\n+            info(message + \" (\" + t.getClass().getName() + \": \" + t.getMessage() + \")\");\n+            debug(t);\n+        }\n+    }\n+\n+    public static void warn(String message, Throwable t) {\n+        if (t == null) {\n+            warn(message);\n+        } else {\n+            warn(message + \" (\" + t.getClass().getName() + \": \" + t.getMessage() + \")\");\n+            debug(t);\n+        }\n+    }\n+\n+    public static void error(String message, Throwable t) {\n+        if (t == null) {\n+            error(message);\n+        } else {\n+            error(message + \" (\" + t.getClass().getName() + \": \" + t.getMessage() + \")\");\n+            debug(t);\n+        }\n+    }\n+\n+    public static void debug(Throwable t) {\n+        debug(StringUtils.getStackTrace(t));\n+    }\n+\n }", "filename": "src/java/org/apache/ivy/util/Message.java"}, {"additions": 2, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/PropertiesFile.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/PropertiesFile.java", "sha": "f4d204856c54cc8226a2e105239f07d0649af8b8", "changes": 6, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/PropertiesFile.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -40,8 +40,7 @@ public PropertiesFile(File file, String header) {\n                 fis = new FileInputStream(file);\n                 load(fis);\n             } catch (Exception ex) {\n-                Message.warn(\"exception occurred while reading properties file \" + file + \": \"\n-                        + ex.getMessage());\n+                Message.warn(\"exception occurred while reading properties file \" + file, ex);\n             }\n             try {\n                 if (fis != null) {\n@@ -62,8 +61,7 @@ public void save() {\n             fos = new FileOutputStream(file);\n             store(fos, header);\n         } catch (Exception ex) {\n-            Message.warn(\"exception occurred while writing properties file \" + file + \": \"\n-                    + ex.getMessage());\n+            Message.warn(\"exception occurred while writing properties file \" + file, ex);\n         }\n         try {\n             if (fos != null) {", "filename": "src/java/org/apache/ivy/util/PropertiesFile.java"}, {"additions": 5, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/StringUtils.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/StringUtils.java", "sha": "b041ef8e5b091c1d98e73d16903c7eaa00ce2ae5", "changes": 13, "status": "modified", "deletions": 8, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/StringUtils.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -17,8 +17,8 @@\n  */\n package org.apache.ivy.util;\n \n-import java.io.ByteArrayOutputStream;\n import java.io.PrintWriter;\n+import java.io.StringWriter;\n import java.lang.reflect.InvocationTargetException;\n import java.util.Locale;\n \n@@ -73,17 +73,14 @@ public static String getErrorMessage(Throwable t) {\n      *            the exception to get the stack trace from.\n      * @return the exception stack trace\n      */\n-    public static String getStackTrace(Exception e) {\n+    public static String getStackTrace(Throwable e) {\n         if (e == null) {\n             return \"\";\n         }\n-        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n-        PrintWriter printWriter = new PrintWriter(baos);\n+        StringWriter sw = new StringWriter();\n+        PrintWriter printWriter = new PrintWriter(sw, true);\n         e.printStackTrace(printWriter);\n-        printWriter.flush();\n-        String stackTrace = new String(baos.toByteArray());\n-        printWriter.close();\n-        return stackTrace;\n+        return sw.getBuffer().toString();\n     }\n \n     /**", "filename": "src/java/org/apache/ivy/util/StringUtils.java"}, {"additions": 4, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/XMLHelper.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/XMLHelper.java", "sha": "406adf34fe7319a789fe4c3d49adb82888774bab", "changes": 11, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/XMLHelper.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -64,9 +64,8 @@ private static SAXParser newSAXParser(URL schema, InputStream schemaStream)\n                 parser.setProperty(JAXP_SCHEMA_LANGUAGE, W3C_XML_SCHEMA);\n                 parser.setProperty(JAXP_SCHEMA_SOURCE, schemaStream);\n             } catch (SAXNotRecognizedException ex) {\n-                System.err.println(\n-                    \"WARNING: problem while setting JAXP validating property on SAXParser... \"\n-                    + \"XML validation will not be done: \" + ex.getMessage());\n+                Message.warn(\"problem while setting JAXP validating property on SAXParser... \"\n+                        + \"XML validation will not be done\", ex);\n                 canUseSchemaValidation = false;\n                 parserFactory.setValidating(false);\n                 parser = parserFactory.newSAXParser();\n@@ -123,9 +122,8 @@ public static void parse(\n                 try {\n                     parser.setProperty(\"http://xml.org/sax/properties/lexical-handler\", lHandler);\n                 } catch (SAXException ex) {\n-                    System.err.println(\n-                        \"WARNING: problem while setting the lexical handler property on SAXParser: \"\n-                                    + ex.getMessage());\n+                    Message.warn(\"problem while setting the lexical handler property on SAXParser\",\n+                        ex);\n                     // continue without the lexical handler\n                 }\n             }\n@@ -197,7 +195,6 @@ public static Document parseToDom(\n         try {\n             pomDomDoc = docBuilder.parse(stream, res.getName());\n         } catch (SAXException e) {\n-            e.printStackTrace();\n             throw e;\n         } finally {\n             stream.close();", "filename": "src/java/org/apache/ivy/util/XMLHelper.java"}, {"additions": 1, "raw_url": "https://github.com/apache/ant-ivy/raw/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/url/BasicURLHandler.java", "blob_url": "https://github.com/apache/ant-ivy/blob/e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716/src/java/org/apache/ivy/util/url/BasicURLHandler.java", "sha": "c962d06b4408a6074de1f4932f495d586302093f", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/ant-ivy/contents/src/java/org/apache/ivy/util/url/BasicURLHandler.java?ref=e80b85d504ae9fb64b8cff4f05bc3a3a4ec8f716", "patch": "@@ -89,7 +89,7 @@ public URLInfo getURLInfo(URL url, int timeout) {\n             Message.info(\"You probably access the destination server through \"\n                 + \"a proxy server that is not well configured.\");\n         } catch (IOException e) {\n-            Message.error(\"Server access Error: \" + e.getMessage() + \" url=\" + url);\n+            Message.error(\"Server access error at url \" + url, e);\n         } finally {\n             disconnect(con);\n         }", "filename": "src/java/org/apache/ivy/util/url/BasicURLHandler.java"}], "repo": "ant-ivy"}]
