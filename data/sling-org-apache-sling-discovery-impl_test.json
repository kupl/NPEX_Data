{
    "sling-org-apache-sling-discovery-impl_12ba50e": {
        "bug_id": "sling-org-apache-sling-discovery-impl_12ba50e",
        "commit": "https://github.com/apache/sling-org-apache-sling-discovery-impl/commit/12ba50eb634249d1bd076f5186d99b161873eeb4",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-discovery-impl/blob/12ba50eb634249d1bd076f5186d99b161873eeb4/src/main/java/org/apache/sling/discovery/impl/topology/connector/TopologyRequestValidator.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-discovery-impl/contents/src/main/java/org/apache/sling/discovery/impl/topology/connector/TopologyRequestValidator.java?ref=12ba50eb634249d1bd076f5186d99b161873eeb4",
                "deletions": 0,
                "filename": "src/main/java/org/apache/sling/discovery/impl/topology/connector/TopologyRequestValidator.java",
                "patch": "@@ -346,6 +346,9 @@ private String createTrustHeader(String bodyHash) {\n      */\n     private boolean checkTrustHeader(String bodyHash, String signature) {\n         try {\n+            if (bodyHash == null || signature == null ) {\n+                return false;\n+            }\n             String[] parts = signature.split(\"/\", 2);\n             int keyNo = Integer.parseInt(parts[0]);\n             return hmac(keyNo, bodyHash).equals(parts[1]);\n@@ -361,6 +364,8 @@ private boolean checkTrustHeader(String bodyHash, String signature) {\n             throw new RuntimeException(e.getMessage(), e);\n         } catch (NoSuchAlgorithmException e) {\n             throw new RuntimeException(e.getMessage(), e);\n+        } catch (Exception e) {\n+            throw new RuntimeException(e.getMessage(), e);\n         }\n     }\n ",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-discovery-impl/raw/12ba50eb634249d1bd076f5186d99b161873eeb4/src/main/java/org/apache/sling/discovery/impl/topology/connector/TopologyRequestValidator.java",
                "sha": "d649bb9528a50eed21c63750db27fc7d3bcbae05",
                "status": "modified"
            }
        ],
        "message": "SLING-3233 NPE in TopologyRequestValidator\nFixed NPE caused by missing http headers if enabled.\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1539358 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-discovery-impl/commit/83ba7bdfce10955a9069b297c6f76ddff8104389",
        "patched_files": [
            "TopologyRequestValidator.java"
        ],
        "repo": "sling-org-apache-sling-discovery-impl",
        "unit_tests": [
            "TopologyRequestValidatorTest.java"
        ]
    },
    "sling-org-apache-sling-discovery-impl_9f3e5c0": {
        "bug_id": "sling-org-apache-sling-discovery-impl_9f3e5c0",
        "commit": "https://github.com/apache/sling-org-apache-sling-discovery-impl/commit/9f3e5c040490781ea9873b29c93e1ef7981a823e",
        "file": [
            {
                "additions": 5,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-discovery-impl/blob/9f3e5c040490781ea9873b29c93e1ef7981a823e/src/test/java/org/apache/sling/discovery/impl/cluster/voting/VotingHandlerTest.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-discovery-impl/contents/src/test/java/org/apache/sling/discovery/impl/cluster/voting/VotingHandlerTest.java?ref=9f3e5c040490781ea9873b29c93e1ef7981a823e",
                "deletions": 1,
                "filename": "src/test/java/org/apache/sling/discovery/impl/cluster/voting/VotingHandlerTest.java",
                "patch": "@@ -535,7 +535,11 @@ public void doTestConcurrentVotes(int votingsLoopCnt, int perVotingInnerLoopCnt,\n //            if (expected>0) {\n //                assertEquals(expected, (int)noVotes);\n //            }\n-            totalPromotion += totalDetails.get(k).get(VotingDetail.PROMOTED);\n+            final Map<VotingDetail, Integer> map = totalDetails.get(k);\n+            final Integer i = map.get(VotingDetail.PROMOTED);\n+            if (i != null) {\n+                totalPromotion += i;\n+            }\n         }\n         assertEquals((int)votingsLoopCnt, totalPromotion);\n     }",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-discovery-impl/raw/9f3e5c040490781ea9873b29c93e1ef7981a823e/src/test/java/org/apache/sling/discovery/impl/cluster/voting/VotingHandlerTest.java",
                "sha": "59b887d4b7ebd9ebcffb78d3b605cbdaf2923f8e",
                "status": "modified"
            }
        ],
        "message": "SLING-5918 : discovery: catching a NPE in a test\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1756373 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-discovery-impl/commit/46f69f47214f08369d805bfea3ad808284d0b394",
        "patched_files": [
            "VotingHandler.java"
        ],
        "repo": "sling-org-apache-sling-discovery-impl",
        "unit_tests": [
            "VotingHandlerTest.java"
        ]
    },
    "sling-org-apache-sling-discovery-impl_d9e7c4b": {
        "bug_id": "sling-org-apache-sling-discovery-impl_d9e7c4b",
        "commit": "https://github.com/apache/sling-org-apache-sling-discovery-impl/commit/d9e7c4b628f8929c54e9b5e93474b9b019049b52",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-discovery-impl/blob/d9e7c4b628f8929c54e9b5e93474b9b019049b52/src/test/java/org/apache/sling/discovery/impl/cluster/SingleInstanceTest.java",
                "changes": 5,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-discovery-impl/contents/src/test/java/org/apache/sling/discovery/impl/cluster/SingleInstanceTest.java?ref=d9e7c4b628f8929c54e9b5e93474b9b019049b52",
                "deletions": 1,
                "filename": "src/test/java/org/apache/sling/discovery/impl/cluster/SingleInstanceTest.java",
                "patch": "@@ -71,7 +71,10 @@ public void tearDown() throws Exception {\n         final org.apache.log4j.Logger discoveryLogger = LogManager.getRootLogger().getLogger(\"org.apache.sling.discovery\");\n         discoveryLogger.setLevel(logLevel);\n         logger.info(\"tearDown: stopping standalone instance\");\n-        instance.stop();\n+        if (instance!=null) {\n+            instance.stop();\n+            instance = null;\n+        }\n         logger.info(\"tearDown: stopping standalone instance done\");\n     }\n ",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-discovery-impl/raw/d9e7c4b628f8929c54e9b5e93474b9b019049b52/src/test/java/org/apache/sling/discovery/impl/cluster/SingleInstanceTest.java",
                "sha": "bd30db5864f9b0963f9996c08e7e30068051ac92",
                "status": "modified"
            }
        ],
        "message": "no-jira : avoid NPE on teardown if instance was not successfully started\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1655748 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-discovery-impl/commit/3825ef3d9c96a3b8e904b0395273e85854d3af91",
        "patched_files": [],
        "repo": "sling-org-apache-sling-discovery-impl",
        "unit_tests": [
            "SingleInstanceTest.java"
        ]
    }
}