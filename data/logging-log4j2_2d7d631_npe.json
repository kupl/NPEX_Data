[
    {
        "repo": "logging-log4j2",
        "commit": "https://github.com/apache/logging-log4j2/commit/2d7d6311a808391e43137ae9c36060709fb185b6",
        "bug_id": "logging-log4j2_2d7d631",
        "message": "LOG4J2-234 - RegexFilter threw a NullPointerException when used as a context-wide filter.\n\ngit-svn-id: https://svn.apache.org/repos/asf/logging/log4j/log4j2/trunk@1479050 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/logging-log4j2/commit/70ad5f35c1cb62736e63650abf5b9183b625c823",
        "patched_files": [
            "RegexFilter.java",
            "changes.xml"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 6,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/2d7d6311a808391e43137ae9c36060709fb185b6/core/src/main/java/org/apache/logging/log4j/core/filter/RegexFilter.java",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/core/src/main/java/org/apache/logging/log4j/core/filter/RegexFilter.java?ref=2d7d6311a808391e43137ae9c36060709fb185b6",
                "filename": "core/src/main/java/org/apache/logging/log4j/core/filter/RegexFilter.java",
                "deletions": 0,
                "sha": "56d8ec658462c28d7879b3da7d4df0d391759256",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/2d7d6311a808391e43137ae9c36060709fb185b6/core/src/main/java/org/apache/logging/log4j/core/filter/RegexFilter.java",
                "patch": "@@ -57,12 +57,18 @@ public Result filter(final Logger logger, final Level level, final Marker marker\n     @Override\n     public Result filter(final Logger logger, final Level level, final Marker marker, final Object msg,\n                          final Throwable t) {\n+        if (msg == null) {\n+            return onMismatch;\n+        }\n         return filter(msg.toString());\n     }\n \n     @Override\n     public Result filter(final Logger logger, final Level level, final Marker marker, final Message msg,\n                          final Throwable t) {\n+        if (msg == null) {\n+            return onMismatch;\n+        }\n         final String text = useRawMessage ? msg.getFormat() : msg.getFormattedMessage();\n         return filter(text);\n     }",
                "changes": 6
            },
            {
                "status": "modified",
                "additions": 12,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/2d7d6311a808391e43137ae9c36060709fb185b6/core/src/test/java/org/apache/logging/log4j/core/filter/RegexFilterTest.java",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/core/src/test/java/org/apache/logging/log4j/core/filter/RegexFilterTest.java?ref=2d7d6311a808391e43137ae9c36060709fb185b6",
                "filename": "core/src/test/java/org/apache/logging/log4j/core/filter/RegexFilterTest.java",
                "deletions": 0,
                "sha": "dcb1096ee355dc6a2c448f728b5f80dd1a4430b9",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/2d7d6311a808391e43137ae9c36060709fb185b6/core/src/test/java/org/apache/logging/log4j/core/filter/RegexFilterTest.java",
                "patch": "@@ -20,6 +20,7 @@\n import org.apache.logging.log4j.core.Filter;\n import org.apache.logging.log4j.core.impl.Log4jLogEvent;\n import org.apache.logging.log4j.core.LogEvent;\n+import org.apache.logging.log4j.message.Message;\n import org.apache.logging.log4j.message.SimpleMessage;\n import org.apache.logging.log4j.status.StatusLogger;\n import org.junit.BeforeClass;\n@@ -51,4 +52,15 @@ public void testThresholds() {\n         filter = RegexFilter.createFilter(\"* test *\", null, null, null);\n         assertNull(filter);\n     }\n+\n+    @Test\n+    public void TestNoMsg() {\n+        RegexFilter filter = RegexFilter.createFilter(\".* test .*\", null, null, null);\n+        filter.start();\n+        assertTrue(filter.isStarted());\n+        assertTrue(filter.filter(null, Level.DEBUG, null, (String)null, (Throwable)null) == Filter.Result.DENY);\n+        assertTrue(filter.filter(null, Level.DEBUG, null, (Message)null, (Throwable)null) == Filter.Result.DENY);\n+        assertTrue(filter.filter(null, Level.DEBUG, null, null, (Object[])null) == Filter.Result.DENY);\n+\n+    }\n }",
                "changes": 12
            },
            {
                "status": "modified",
                "additions": 3,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/2d7d6311a808391e43137ae9c36060709fb185b6/src/changes/changes.xml",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/src/changes/changes.xml?ref=2d7d6311a808391e43137ae9c36060709fb185b6",
                "filename": "src/changes/changes.xml",
                "deletions": 0,
                "sha": "d95d42c7a03d53296b29594e053d20536fe93c50",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/2d7d6311a808391e43137ae9c36060709fb185b6/src/changes/changes.xml",
                "patch": "@@ -23,6 +23,9 @@\n \n   <body>\n     <release version=\"2.0-beta6\" date=\"@TBD@\" description=\"Bug fixes and enhancements\">\n+      <action issue=\"LOG4J2-234\" dev=\"rgoers\" type=\"fix\">\n+        RegexFilter threw a NullPointerException when used as a context-wide filter.\n+      </action>\n       <action issue=\"LOG4J2-192\" dev=\"rgoers\" type=\"fix\">\n         Add support for interpolating Environment variables when processing the configuration.\n       </action>",
                "changes": 3
            }
        ],
        "unit_tests": [
            "RegexFilterTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "core/src/test/java/org/apache/logging/log4j/core/filter/RegexFilterTest.java",
        "buggy_files": [
            "core/src/main/java/org/apache/logging/log4j/core/filter/RegexFilter.java",
            "src/changes/changes.xml"
        ],
        "fixed": true
    }
]