{
    "incubator-taverna-language_0757873": {
        "bug_id": "incubator-taverna-language_0757873",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/075787382e7a4b2db5da6b7dc84a09e9b5e2a65c",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/075787382e7a4b2db5da6b7dc84a09e9b5e2a65c/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java?ref=075787382e7a4b2db5da6b7dc84a09e9b5e2a65c",
                "deletions": 0,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "patch": "@@ -283,6 +283,10 @@ protected void makeProfile(uk.org.taverna.scufl2.xml.t2flow.jaxb.Workflow wf) {\n \t}\r\n \r\n \tprivate URI makeRavenURI(Raven raven, String className) {\r\n+\t\tif (raven == null) {\r\n+\t\t\treturn ravenURI.resolve(\"undefined/\" + uriTools.validFilename(className));\r\n+\t\t}\r\n+\t\t\r\n \t\treturn ravenURI.resolve(uriTools.validFilename(raven.getGroup()) + \"/\"\r\n \t\t\t\t+ uriTools.validFilename(raven.getArtifact()) + \"/\"\r\n \t\t\t\t+ uriTools.validFilename(raven.getVersion()) + \"/\"\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/075787382e7a4b2db5da6b7dc84a09e9b5e2a65c/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "sha": "9ad0fd3d81cfda4e627b0a2484050529e1294d42",
                "status": "modified"
            }
        ],
        "message": "Avoid NullPointerException if no <raven> element\n\n.. as in t2flow saved from Eclipse-Taverna\n\ngit-svn-id: https://taverna.googlecode.com/svn/unsorted/scufl2/trunk@14408 bf327186-88b3-11dd-a302-d386e5130c1c",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/7dc1734a0c218339fea4add3f988e34125989bb0",
        "patched_files": [
            "T2FlowParser.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestT2FlowParser.java"
        ]
    },
    "incubator-taverna-language_178e9c8": {
        "bug_id": "incubator-taverna-language_178e9c8",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/178e9c8e6c4708ae2c8dee9250f29b26b6ea4e85",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/178e9c8e6c4708ae2c8dee9250f29b26b6ea4e85/taverna-databundle/src/main/java/org/apache/taverna/databundle/DataBundles.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/taverna-databundle/src/main/java/org/apache/taverna/databundle/DataBundles.java?ref=178e9c8e6c4708ae2c8dee9250f29b26b6ea4e85",
                "deletions": 1,
                "filename": "taverna-databundle/src/main/java/org/apache/taverna/databundle/DataBundles.java",
                "patch": "@@ -404,7 +404,7 @@ public static WorkflowBundle getWorkflowBundle(Bundle dataBundle)\n \t\t\tthrows ReaderException, IOException {\n \t\tPath wf = getWorkflow(dataBundle);\n \t\t// String type = Files.probeContentType(wf);\n-\t\treturn wfBundleIO.readBundle(newInputStream(wf), null);\n+\t\treturn getWfBundleIO().readBundle(newInputStream(wf), null);\n \t}\n \n \tpublic static Path getIntermediates(Bundle dataBundle) throws IOException {",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/178e9c8e6c4708ae2c8dee9250f29b26b6ea4e85/taverna-databundle/src/main/java/org/apache/taverna/databundle/DataBundles.java",
                "sha": "ca2c7b81b446fd63225db640cd9180e7dc52c7ce",
                "status": "modified"
            }
        ],
        "message": "NPE in getWorkflowBundle fixed (TAVERNA-874)",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/e44ded0e7c6606b1a1297260104b014e7e5d4fa5",
        "patched_files": [
            "DataBundles.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestDataBundles.java"
        ]
    },
    "incubator-taverna-language_39e09f7": {
        "bug_id": "incubator-taverna-language_39e09f7",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/39e09f7c4ca2940778869459e94414c8b34cb9e1",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java?ref=39e09f7c4ca2940778869459e94414c8b34cb9e1",
                "deletions": 0,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "patch": "@@ -283,6 +283,10 @@ protected void makeProfile(uk.org.taverna.scufl2.xml.t2flow.jaxb.Workflow wf) {\n \t}\r\n \r\n \tprivate URI makeRavenURI(Raven raven, String className) {\r\n+\t\tif (raven == null) {\r\n+\t\t\treturn ravenURI.resolve(\"undefined/\" + uriTools.validFilename(className));\r\n+\t\t}\r\n+\t\t\r\n \t\treturn ravenURI.resolve(uriTools.validFilename(raven.getGroup()) + \"/\"\r\n \t\t\t\t+ uriTools.validFilename(raven.getArtifact()) + \"/\"\r\n \t\t\t\t+ uriTools.validFilename(raven.getVersion()) + \"/\"\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "sha": "9ad0fd3d81cfda4e627b0a2484050529e1294d42",
                "status": "modified"
            }
        ],
        "message": "Avoid NullPointerException if no <raven> element\n\n.. as in t2flow saved from Eclipse-Taverna",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/7dc1734a0c218339fea4add3f988e34125989bb0",
        "patched_files": [
            "T2FlowParser.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestT2FlowParser.java"
        ]
    },
    "incubator-taverna-language_4235811": {
        "bug_id": "incubator-taverna-language_4235811",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/42358111e7cb1e7d1ae3705ba261afaa34a646c3",
        "file": [
            {
                "additions": 123,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/README.md",
                "changes": 168,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/README.md?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 45,
                "filename": "README.md",
                "patch": "@@ -1,64 +1,142 @@\n SCUFL2\n ======\n-[SCUFL2 wiki][1]\n \n-(c) 2009-2010 myGrid, University of Manchester\n+See also the [SCUFL2 wiki][1]\n \n-Licensed under the [GNU Lesser General Public License (LGPL) 2.1][9],\n-except for `scufl2-usecases`, which are licensed under a [modified BSD\n-license](scufl2-usecases/LICENSE.txt). See LICENSE.txt for details.\n+(c) 2009-2011 University of Manchester, UK\n \n-This is the code, model and XML syntax of SCUFL2 which will replace the current \n-[Taverna][8] format [t2flow][2].\n+Licensed under the [GNU Lesser General Public License (LGPL) 2.1][6]. \n+See LICENSE.txt for the full terms of LGPL 2.1.\n \n-Compare this with the [t2flow XML schema][3] - which has documentation\n-about workflow elements as currently serialized.\n+This is the API, model and format of [SCUFL2][1], which replaces \n+[Taverna][5]'s workflow format .t2flow. This API allows \n+JVM applications to inspect, generate and modify Taverna workflow\n+definitions without depending on the Taverna runtime.\n \n-The t2flow serialization format suffers from being very close to the\n-Java object model, and contains various items that are simply Java beans\n-serialized using _XMLBeans_. As the t2flow format is very verbose, it\n-can be difficult to deal with for third party software to do\n-*inspection* (\"Which services does this workflow use?\"), *modification*\n-(\"Change all calls to http://broken.com/ to http://fixed.com/\") and\n-*generation* (\"Build a custom workflow from a button\").\n+A new format, called [Scufl2 Workflow Bundle][7] is defined alongside this\n+API. This format can be inspected, generated and modified independently\n+of this API.\n \n-Developers have informed us that the old SCUFL format of Taverna 1 was\n-significantly easier to work with. However, this format also has its\n-caveats, like no schema, unidentified ways to extend service definitions\n-for Taverna plugins and not supporting various new features in the\n-Taverna 2 engine.\n+Note that the ability for Scufl2 API to read a workflow bundle (using\n+the `scufl2-rdfxml` module) does not guarantee it is valid or\n+structurally sound. The experimental modules `scufl2-validation-*` will\n+in the future be able to provide such verification.\n \n-We have therefore decided to form a new serialisation format for\n-workflows, called *SCUFL2*. This format will be accompanied with an\n-*UML* model, and a primary serialisation format as *XML*, but also with\n-possible secondary serialisations as *JSON* and *RDF*, all following the\n-UML model. This model will also be reflected in a lightweight *API*,\n-which can deserialize and serialize these formats, in addition to\n-`.scufl` and `.t2flow`, but also more easily allow inspection of\n-workflow structures, modification and generation.\n \n-Rough overview:\n+Requisites\n+----------\n \n-* [*scufl2-api*](scufl2-api/) Java Beans for SCUFL2 objects (and currently XML import/export)\n-* [*scufl2-t2flow*](scufl2-t2flow/) .t2flow import (and later export)\n-* [*scufl2-rdf*](scufl2-rdf/) RDF export (and later import)\n-* [*scufl2-usecases*](scufl2-usecases/) Example code covering [SCUFL2 use cases][4]\n+* Java 1.5 or newer\n+* Maven 2.2 or newer (for building)\n \n \n-Here is an attempt at demonstrating the new proposed *XML syntax* for\n-Scufl2: [as.scufl2.xml][5] - a translation of\n-[as.t2flow][6]\n+Building\n+--------\n \n-Specification of *identifiers* in [Taverna URI templates][7].\n+* `mvn clean install`\n+\n+This will build each module and run their tests, producing JARs like\n+`scufl2-api/target/scufl2-api-0.9.jar`. \n+\n+First time you build Scufl2 this might download dependencies needed for\n+compliation. These have separate open source licenses, but should be\n+compatible with LGPL. None of the dependencies are neccessary for\n+using the compiled SCUFL2 API.\n+\n+Some of the experimental modules are not built automatically, to build\n+them separately, run the same command from within their folder.\n+\n+\n+\n+Usage\n+-----\n+\n+Scufl2 is built as a Maven project, and the easiest way to use it is\n+from other Maven projects.\n+\n+Typical users of the Scufl2 API will depend on the three modules\n+*scufl2-api*, *scufl2-t2flow* and *scufl2-rdfxml*. In your Maven\n+project's POM file, add this to your `<dependencies>` section:\n+\n+\t\t<dependency>\n+\t\t\t<groupId>uk.org.taverna.scufl2</groupId>\n+\t\t\t<artifactId>scufl2-api</artifactId>\n+\t\t\t<version>0.9</version>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>uk.org.taverna.scufl2</groupId>\n+\t\t\t<artifactId>scufl2-rdfxml</artifactId>\n+\t\t\t<version>0.9</version>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>uk.org.taverna.scufl2</groupId>\n+\t\t\t<artifactId>scufl2-t2flow</artifactId>\n+\t\t\t<version>0.9</version>\n+\t\t</dependency>\n+\n+All Scufl2 modules are also valid OSGi bundles.\n+\n+You can alternatively copy and add the JARs from these modules to your\n+classpath:\n+\n+* scufl2-api/target/scufl2-api-0.9.jar\n+* scufl2-rdfxml/target/scufl2-rdfxml-0.9.jar\n+* scufl2-t2flow/target/scufl2-t2flow-0.9.jar\n+\n+\n+See the *scufl2-validation* folder for examples of\n+usage. The best classes to start exploring would be\n+`uk.org.taverna.scufl2.api.io.WorkflowBundleIO` and\n+`uk.org.taverna.scufl2.api.container.WorkflowBundle`.\n+\n+Example of converting .t2flow to .wfbundle:\n+\n+    import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n+    import uk.org.taverna.scufl2.api.io.ReaderException;\n+    import uk.org.taverna.scufl2.api.io.WorkflowBundleIO;\n+    import uk.org.taverna.scufl2.api.io.WriterException;\n+\n+    // ..\n+    \n+    WorkflowBundleIO io = new WorkflowBundleIO();\n+    File t2File = new File(\"workflow.t2flow\");\n+    File scufl2File = new File(\"workflow.wfbundle\");\n+    WorkflowBundle wfBundle = io.readBundle(t2File, \"application/vnd.taverna.t2flow+xml\");\n+    io.writeBundle(wfBundle, scufl2File, \"application/vnd.taverna.scufl2.workflow-bundle\");\n+\n+Check out the GitHub project scufl2-examples[8] for examples of using Scufl2, \n+including the above code.\n+\n+\n+Modules\n+-------\n+\n+Official modules:\n+\n+* *scufl2-api* Java Beans for working with SCUFL2 \n+* *scufl2-t2flow* .t2flow import from Taverna 2\n+* *scufl2-rdfxml* .wfbundle import/export (RDF/XML)\n+\n+Experimental modules:\n+\n+* *scufl2-usecases* Example code covering [SCUFL2 use cases][4] (out of date)\n+* *scufl2-rdf* Pure RDF export/import (out of date)\n+* *scufl2-scufl* SCUFL 1 .xml import from Taverna 1\n+* *scufl2-validation* API for validating a Scufl2 workflow bundle\n+* *scufl2-validation-correctness* \n+  Validate correctness of Scufl2 workflow definition\n+* *scufl2-validation-structural*\n+  Validate that a Scufl2 workflow definition is structurally sound\n+* *scufl2-validation-integration*\n+  Integration tests for scufl2-validation modules\n \n \n \n [1]: http://www.mygrid.org.uk/dev/wiki/display/developer/SCUFL2\n-[2]: http://www.mygrid.org.uk/dev/wiki/display/story/Dataflow+serialization\n-[3]: http://code.google.com/p/taverna/source/browse/taverna#taverna/dev/xsd/trunk/t2flow\n+[2]: http://www.mygrid.org.uk/\n+[3]: http://www.mygrid.org.uk/dev/wiki/display/story/Dataflow+serialization\n [4]: http://www.mygrid.org.uk/dev/wiki/display/developer/SCUFL2+use+cases\n-[5]: http://www.mygrid.org.uk/dev/wiki/download/attachments/3572756/as.scufl2.xml?version=1&modificationDate=1270028271000\n-[6]: http://www.mygrid.org.uk/dev/wiki/download/attachments/3572756/as.t2flow?version=1&modificationDate=1270028403000\n-[7]: http://www.mygrid.org.uk/dev/wiki/display/developer/Taverna+URI+templates\n-[8]: http://www.taverna.org.uk/\n-[9]: http://www.gnu.org/licenses/lgpl-2.1.html\n+[5]: http://www.taverna.org.uk/\n+[6]: http://www.gnu.org/licenses/lgpl-2.1.html\n+[7]: http://www.mygrid.org.uk/dev/wiki/display/developer/Taverna+Workflow+Bundle\n+[8]: https://github.com/mygrid/scufl2-examples",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/README.md",
                "sha": "86e80132613275e31e26d429eeb6a1ffdbbd5b48",
                "status": "modified"
            },
            {
                "additions": 195,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/pom.xml",
                "changes": 378,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 183,
                "filename": "pom.xml",
                "patch": "@@ -1,183 +1,195 @@\n-<?xml version=\"1.0\"?>\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n-\t<modelVersion>4.0.0</modelVersion>\n-\t<parent>\n-\t\t<artifactId>parent</artifactId>\n-\t\t<groupId>net.sf.taverna</groupId>\n-\t\t<version>0.2.2011-01-24</version>\n-\t</parent>\n-\n-\t<groupId>uk.org.taverna.scufl2</groupId>\n-\t<artifactId>scufl2</artifactId>\n-\t<version>0.9-SNAPSHOT</version>\n-\t<packaging>pom</packaging>\n-\n-\t<name>Taverna Scufl 2</name>\n-\t<description>Taverna SCUFL 2 workflow language</description>\n-\n-\t<properties>\n-\t\t<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n-\t\t<project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n-\t\t<jaxb.version>2.2.4-1</jaxb.version>\n-\t</properties>\n-\t<dependencies>\n-\t\t<!-- Common dependencies - keep these to a minimum as we want to reduce \n-\t\t\tscufl2-api's dependencies -->\n-\t\t<dependency>\n-\t\t\t<groupId>junit</groupId>\n-\t\t\t<artifactId>junit</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\n-\t\t<!-- Enable for Java 5 -->\n-\t\t<!-- <dependency> <groupId>javax.xml.bind</groupId> <artifactId>jaxb-api</artifactId> \n-\t\t\t<version>2.1</version> </dependency> <dependency> <groupId>com.sun.xml.bind</groupId> \n-\t\t\t<artifactId>jaxb-impl</artifactId> <version>2.2</version> </dependency> -->\n-\n-\t</dependencies>\n-\n-\t<build>\n-\t\t<plugins>\n-\t\t\t<plugin>\n-\t\t\t\t<groupId>org.apache.felix</groupId>\n-\t\t\t\t<artifactId>maven-bundle-plugin</artifactId>\n-\t\t\t\t<extensions>true</extensions>\n-\t\t\t</plugin>\n-\t\t</plugins>\t\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.apache.felix</groupId>\n-\t\t\t\t\t<artifactId>maven-bundle-plugin</artifactId>\n-\t\t\t\t\t<version>2.1.0</version>\n-\t\t\t\t</plugin>\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.codehaus.mojo</groupId>\n-\t\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\n-\t\t\t\t\t<version>1.3.1</version>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<target>2.1</target>\n-\t\t\t\t\t\t<arguments>-enableIntrospection</arguments>\t\t\t\t\t\t\n-\t\t\t\t\t\t<!-- Needed for consistency across Java 6 and Java 7\n-\t\t\t\t\t\ton optional Booleans.\n-\t\t\t\t\t\t\n-\t\t\t\t\t\thttp://www.olivergierke.de/wordpress/2011/03/a-jaxb-or-rather-xjc-odyssey/\n-\t\t\t\t\t\thttp://www.mojavelinux.com/blog/archives/2006/09/the_great_jaxb_api_blunder/\n-\t\t\t\t\t\thttp://java.net/jira/browse/JAXB-131\n-\t\t\t\t\t\t\n-\t\t\t\t\t\t -->\n-\t\t\t\t\t</configuration>\n-\t\t\t\t\t<dependencies>\n-\t\t\t\t\t\t<dependency>\n-\t\t\t\t\t\t\t<groupId>com.sun.xml.bind</groupId>\n-\t\t\t\t\t\t\t<artifactId>jaxb-xjc</artifactId>\n-\t\t\t\t\t\t\t<version>${jaxb.version}</version>\n-\t\t\t\t\t\t</dependency>\n-\t\t\t\t\t\t\t<!-- \n-\t\t\t\t\t\t\t<dependency>\n-\t\t\t\t\t\t\t<groupId>com.sun.xml.bind</groupId>\n-\t\t\t\t\t\t\t<artifactId>jaxb-impl</artifactId>\n-\t\t\t\t\t\t\t<version>${jaxb.version}</version>\t\t\t\t\n-\t\t\t\t\t\t</dependency>\n-\t\t\t\t\t\t\t -->\n-\t\t\t\t\t</dependencies>\n-\t\t\t\t</plugin>\n-\n-\t\t\t\t<!-- Enable for Java 5 -->\n-\t\t\t\t<!-- <plugin> <groupId>org.apache.maven.plugins</groupId> <artifactId>maven-compiler-plugin</artifactId> \n-\t\t\t\t\t<version>2.3.2</version> <configuration> <source>1.5</source> <target>1.5</target> \n-\t\t\t\t\t</configuration> </plugin> -->\n-\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n-\t</build>\n-\n-\t<url>http://www.mygrid.org.uk/dev/wiki/display/developer/SCUFL2</url>\n-\t<scm>\n-\t\t<connection>scm:git:git://github.com/myGrid/scufl2.git</connection>\n-\t\t<developerConnection>scm:git:ssh://git@github.com/myGrid/scufl2.git</developerConnection>\n-\t\t<url>https://github.com/myGrid/scufl2/</url>\n-\t</scm>\n-\n-\t<repositories>\n-\t\t<repository>\n-\t\t\t<releases />\n-\t\t\t<snapshots>\n-\t\t\t\t<enabled>false</enabled>\n-\t\t\t</snapshots>\n-\t\t\t<id>mygrid-repository</id>\n-\t\t\t<name>myGrid Repository</name>\n-\t\t\t<url>http://www.mygrid.org.uk/maven/repository</url>\n-\t\t</repository>\n-\t\t<repository>\n-\t\t\t<id>com.springsource.repository.bundles.release</id>\n-\t\t\t<name>SpringSource Enterprise Bundle Repository - SpringSource Bundle Releases</name>\n-\t\t\t<url>http://repository.springsource.com/maven/bundles/release</url>\n-\t\t</repository>\n-\t\t<repository>\n-\t\t\t<id>com.springsource.repository.bundles.external</id>\n-\t\t\t<name>SpringSource Enterprise Bundle Repository - External Bundle Releases</name>\n-\t\t\t<url>http://repository.springsource.com/maven/bundles/external</url>\n-\t\t</repository>\n-\t</repositories>\n-\t<dependencyManagement>\n-\t\t<dependencies>\n-\t\t\t<dependency>\n-\t\t\t\t<groupId>junit</groupId>\n-\t\t\t\t<artifactId>junit</artifactId>\n-\t\t\t\t<version>4.4</version>\n-\t\t\t\t<scope>test</scope>\n-\t\t\t</dependency>\n-\t\t\t<dependency>\n-\t\t\t\t<groupId>commons-io</groupId>\n-\t\t\t\t<artifactId>commons-io</artifactId>\n-\t\t\t\t<version>2.0</version>\n-\t\t\t\t<scope>test</scope>\n-\t\t\t</dependency>\n-\t\t\t<dependency>\n-\t\t\t\t<groupId>org.jdom</groupId>\n-\t\t\t\t<artifactId>jdom</artifactId>\n-\t\t\t\t<version>1.1</version>\n-\t\t\t\t<type>jar</type>\n-\t\t\t\t<scope>test</scope>\n-\t\t\t</dependency>\n-\t\t\t<dependency>\n-\t\t\t\t<groupId>com.sun.xml.bind</groupId>\n-\t\t\t\t<artifactId>jaxb-impl</artifactId>\n-\t\t\t\t<version>${jaxb.version}</version>\n-\t\t\t\t<type>jar</type>\n-\t\t\t\t<optional>true</optional>\n-\t\t\t</dependency>\n-\t\t\t<dependency>\n-\t\t\t\t<groupId>jaxen</groupId>\n-\t\t\t\t<artifactId>jaxen</artifactId>\n-\t\t\t\t<version>1.1.1</version>\n-\t\t\t\t<type>jar</type>\n-\t\t\t\t<scope>test</scope>\n-\t\t\t</dependency>\n-\t\t\t<dependency>\n-\t\t\t\t<groupId>commons-beanutils</groupId>\n-\t\t\t\t<artifactId>commons-beanutils</artifactId>\n-\t\t\t\t<version>1.7.0</version>\n-\t\t\t\t<scope>test</scope>\n-\t\t\t</dependency>\n-\t\t</dependencies>\n-\t</dependencyManagement>\n-\t<modules>\n-\t\t<module>scufl2-ucfpackage</module>\n-\t\t<module>scufl2-api</module>\n-\t\t<!-- <module>scufl2-rdf</module> -->\n-\t\t<module>scufl2-rdfxml</module>\n-\n-\t\t<module>scufl2-t2flow</module>\n-\t\t<module>scufl2-scufl</module>\n-\t\t<module>scufl2-usecases</module>\n-\t\t<module>scufl2-validation</module>\n-\t\t<module>scufl2-validation-structural</module>\n-\n-\t\t<module>scufl2-validation-correctness</module>\n-        <!-- Disabled until unit tests work\n-\t\t<module>scufl2-validation-integration</module>\n-        -->\n-\t</modules>\n-</project>\n+<?xml version=\"1.0\"?>\r\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\r\n+\t<modelVersion>4.0.0</modelVersion>\r\n+\t<parent>\r\n+\t\t<artifactId>parent</artifactId>\r\n+\t\t<groupId>net.sf.taverna</groupId>\r\n+\t\t<version>0.2.2011-02-17</version>\r\n+\t</parent>\r\n+\r\n+\t<groupId>uk.org.taverna.scufl2</groupId>\r\n+\t<artifactId>scufl2</artifactId>\r\n+\t<version>0.11.0-SNAPSHOT</version>\r\n+\t<packaging>pom</packaging>\r\n+\r\n+\t<name>Taverna Scufl 2</name>\r\n+\t<description>Taverna SCUFL 2 workflow language</description>\r\n+\r\n+\t<properties>\r\n+\t\t<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n+\t\t<project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\r\n+\t\t<jaxb.version>2.2.4-1</jaxb.version>\r\n+\t</properties>\r\n+\t<dependencies>\r\n+\t\t<!-- Common dependencies - keep these to a minimum as we want to reduce \r\n+\t\t\tscufl2-api's dependencies -->\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>junit</groupId>\r\n+\t\t\t<artifactId>junit</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\r\n+\t\t<!-- Enable for Java 5 -->\r\n+\t\t<!-- <dependency> <groupId>javax.xml.bind</groupId> <artifactId>jaxb-api</artifactId> \r\n+\t\t\t<version>2.1</version> </dependency> <dependency> <groupId>com.sun.xml.bind</groupId> \r\n+\t\t\t<artifactId>jaxb-impl</artifactId> <version>2.2</version> </dependency> -->\r\n+\r\n+\t</dependencies>\r\n+\r\n+\t<build>\r\n+\t\t<plugins>\r\n+\t\t\t<plugin>\r\n+\t\t\t\t<groupId>org.apache.felix</groupId>\r\n+\t\t\t\t<artifactId>maven-bundle-plugin</artifactId>\r\n+\t\t\t\t<extensions>true</extensions>\r\n+\t\t\t</plugin>\r\n+\t\t</plugins>\r\n+\t\t<pluginManagement>\r\n+\t\t\t<plugins>\r\n+\t\t\t\t<plugin>\r\n+\t\t\t\t\t<groupId>org.apache.felix</groupId>\r\n+\t\t\t\t\t<artifactId>maven-bundle-plugin</artifactId>\r\n+\t\t\t\t\t<version>2.3.6</version>\r\n+\t\t\t\t</plugin>\r\n+\t\t\t\t<plugin>\r\n+\t\t\t\t\t<groupId>org.codehaus.mojo</groupId>\r\n+\t\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\r\n+\t\t\t\t\t<version>1.3.1</version>\r\n+\t\t\t\t\t<configuration>\r\n+\t\t\t\t\t\t<target>2.1</target>\r\n+\t\t\t\t\t\t<arguments>-enableIntrospection</arguments>\r\n+\t\t\t\t\t\t<!-- Needed for consistency across Java 6 and Java 7 on optional Booleans. \r\n+\t\t\t\t\t\t\thttp://www.olivergierke.de/wordpress/2011/03/a-jaxb-or-rather-xjc-odyssey/ \r\n+\t\t\t\t\t\t\thttp://www.mojavelinux.com/blog/archives/2006/09/the_great_jaxb_api_blunder/ \r\n+\t\t\t\t\t\t\thttp://java.net/jira/browse/JAXB-131 -->\r\n+\t\t\t\t\t</configuration>\r\n+\t\t\t\t\t<dependencies>\r\n+\t\t\t\t\t\t<dependency>\r\n+\t\t\t\t\t\t\t<groupId>com.sun.xml.bind</groupId>\r\n+\t\t\t\t\t\t\t<artifactId>jaxb-xjc</artifactId>\r\n+\t\t\t\t\t\t\t<version>${jaxb.version}</version>\r\n+\t\t\t\t\t\t</dependency>\r\n+\t\t\t\t\t\t<!-- <dependency> <groupId>com.sun.xml.bind</groupId> <artifactId>jaxb-impl</artifactId> \r\n+\t\t\t\t\t\t\t<version>${jaxb.version}</version> </dependency> -->\r\n+\t\t\t\t\t</dependencies>\r\n+\t\t\t\t</plugin>\r\n+\r\n+\t\t\t\t<!-- Enable for Java 5 -->\r\n+\t\t\t\t<!-- <plugin> <groupId>org.apache.maven.plugins</groupId> <artifactId>maven-compiler-plugin</artifactId> \r\n+\t\t\t\t\t<version>2.3.2</version> <configuration> <source>1.5</source> <target>1.5</target> \r\n+\t\t\t\t\t</configuration> </plugin> -->\r\n+\r\n+\t\t\t</plugins>\r\n+\t\t</pluginManagement>\r\n+\t</build>\r\n+\r\n+\t<url>http://www.mygrid.org.uk/dev/wiki/display/developer/SCUFL2</url>\r\n+\t<scm>\r\n+        <!--\r\n+\t\t<connection>scm:git:git://github.com/myGrid/scufl2.git</connection>\r\n+\t\t<developerConnection>scm:git:ssh://git@github.com/myGrid/scufl2.git</developerConnection>\r\n+\t\t<url>https://github.com/myGrid/scufl2/</url>\r\n+        -->\r\n+\t\t<connection>scm:svn:http://taverna.googlecode.com/svn/scufl2/trunk/</connection>\r\n+        <developerConnection>scm:svn:https://taverna.googlecode.com/svn/scufl2/trunk/</developerConnection>\r\n+        <url>http://code.google.com/p/taverna/source/browse/scufl2#scufl2%2Ftrunk</url>\r\n+\t</scm>\r\n+\r\n+\t<repositories>\r\n+\t\t<repository>\r\n+\t\t\t<id>mygrid-repository</id>\r\n+\t\t\t<name>myGrid Repository</name>\r\n+\t\t\t<url>http://www.mygrid.org.uk/maven/repository</url>\r\n+\t\t\t<releases />\r\n+\t\t\t<snapshots>\r\n+\t\t\t\t<enabled>false</enabled>\r\n+\t\t\t</snapshots>\r\n+\t\t</repository>\r\n+\t\t<repository>\r\n+\t\t\t<id>com.springsource.repository.bundles.release</id>\r\n+\t\t\t<name>SpringSource Enterprise Bundle Repository - SpringSource Bundle Releases</name>\r\n+\t\t\t<url>http://repository.springsource.com/maven/bundles/release</url>\r\n+\t\t\t<releases />\r\n+\t\t\t<snapshots>\r\n+\t\t\t\t<enabled>false</enabled>\r\n+\t\t\t</snapshots>\r\n+\t\t</repository>\r\n+\t\t<repository>\r\n+\t\t\t<id>com.springsource.repository.bundles.external</id>\r\n+\t\t\t<name>SpringSource Enterprise Bundle Repository - External Bundle Releases</name>\r\n+\t\t\t<url>http://repository.springsource.com/maven/bundles/external</url>\r\n+\t\t\t<releases />\r\n+\t\t\t<snapshots>\r\n+\t\t\t\t<enabled>false</enabled>\r\n+\t\t\t</snapshots>\r\n+\r\n+\t\t</repository>\r\n+\t</repositories>\r\n+\t<dependencyManagement>\r\n+\t\t<dependencies>\r\n+\t\t\t<dependency>\r\n+\t\t\t\t<groupId>junit</groupId>\r\n+\t\t\t\t<artifactId>junit</artifactId>\r\n+\t\t\t\t<version>4.4</version>\r\n+\t\t\t\t<scope>test</scope>\r\n+\t\t\t</dependency>\r\n+\t\t\t<dependency>\r\n+\t\t\t\t<groupId>commons-io</groupId>\r\n+\t\t\t\t<artifactId>commons-io</artifactId>\r\n+\t\t\t\t<version>2.1</version>\r\n+\t\t\t\t<scope>test</scope>\r\n+\t\t\t</dependency>\r\n+\t\t\t<dependency>\r\n+\t\t\t\t<groupId>org.jdom</groupId>\r\n+\t\t\t\t<artifactId>jdom</artifactId>\r\n+\t\t\t\t<version>1.1.2</version>\r\n+\t\t\t\t<type>jar</type>\r\n+\t\t\t\t<scope>test</scope>\r\n+\t\t\t</dependency>\r\n+\t\t\t<dependency>\r\n+\t\t\t\t<groupId>com.sun.xml.bind</groupId>\r\n+\t\t\t\t<artifactId>jaxb-impl</artifactId>\r\n+\t\t\t\t<version>${jaxb.version}</version>\r\n+\t\t\t\t<type>jar</type>\r\n+\t\t\t\t<optional>true</optional>\r\n+\t\t\t</dependency>\r\n+\t\t\t<dependency>\r\n+\t\t\t\t<groupId>jaxen</groupId>\r\n+\t\t\t\t<artifactId>jaxen</artifactId>\r\n+                <!-- 1.1.3 has missing dependencies -->\r\n+\t\t\t\t<version>1.1.1</version>\r\n+\t\t\t\t<type>jar</type>\r\n+\t\t\t\t<scope>test</scope>\r\n+\t\t\t</dependency>\r\n+\t\t\t<dependency>\r\n+\t\t\t\t<groupId>commons-beanutils</groupId>\r\n+\t\t\t\t<artifactId>commons-beanutils</artifactId>\r\n+\t\t\t\t<version>1.8.3</version>\r\n+\t\t\t\t<scope>test</scope>\r\n+\t\t\t</dependency>\r\n+\t\t</dependencies>\r\n+\t</dependencyManagement>\r\n+\t<modules>\r\n+\t\t<module>scufl2-ucfpackage</module>\r\n+\t\t<module>scufl2-api</module>\r\n+\t\t<!-- <module>scufl2-rdf</module> -->\r\n+\t\t<module>scufl2-rdfxml</module>\r\n+\r\n+\t\t<module>scufl2-t2flow</module>\r\n+\t\t<module>scufl2-scufl</module>\r\n+\t\t<module>scufl2-validation</module>\r\n+\t\t<module>scufl2-validation-structural</module>\r\n+\r\n+\t\t<module>scufl2-validation-correctness</module>\r\n+\t\t<!-- Disabled until unit tests work <module>scufl2-validation-integration</module> -->\r\n+\t\t\r\n+\t\t<module>scufl2-integration-tests</module>\r\n+\t</modules>\r\n+\t<licenses>\r\n+\t\t<license>\r\n+\t\t\t<name>GNU Lesser General Public License 2.1</name>\r\n+\t\t\t<url>http://www.gnu.org/licenses/old-licenses/lgpl-2.1.txt</url>\r\n+\t\t\t<distribution>repo</distribution>\r\n+\t\t</license>\r\n+\t</licenses>\r\n+</project>\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/pom.xml",
                "sha": "e95ffb860497df6510610f6eb9c6807a142fe2a5",
                "status": "modified"
            },
            {
                "additions": 31,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/pom.xml",
                "changes": 62,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 31,
                "filename": "scufl2-api/pom.xml",
                "patch": "@@ -1,31 +1,31 @@\n-<?xml version=\"1.0\"?>\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n-\t<modelVersion>4.0.0</modelVersion>\n-\t<parent>\n-\t\t<groupId>uk.org.taverna.scufl2</groupId>\n-\t\t<artifactId>scufl2</artifactId>\n-\t\t<version>0.9-SNAPSHOT</version>\n-\t</parent>\n-\t<artifactId>scufl2-api</artifactId>\n-\t<packaging>bundle</packaging>\n-\t<name>Taverna Scufl 2 API</name>\n-\t<description>Taverna workflow language API</description>\n-\t<dependencies>\n-\t\t<dependency>\n-\t\t\t<groupId>commons-beanutils</groupId>\n-\t\t\t<artifactId>commons-beanutils</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>commons-io</groupId>\n-\t\t\t<artifactId>commons-io</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>${project.groupId}</groupId>\n-\t\t\t<artifactId>scufl2-ucfpackage</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t</dependency>\n-\t</dependencies>\n-\n-</project>\n+<?xml version=\"1.0\"?>\r\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\r\n+\t<modelVersion>4.0.0</modelVersion>\r\n+\t<parent>\r\n+\t\t<groupId>uk.org.taverna.scufl2</groupId>\r\n+\t\t<artifactId>scufl2</artifactId>\r\n+\t\t<version>0.11.0-SNAPSHOT</version>\r\n+\t</parent>\r\n+\t<artifactId>scufl2-api</artifactId>\r\n+\t<packaging>bundle</packaging>\r\n+\t<name>Taverna Scufl 2 API</name>\r\n+\t<description>Taverna workflow language API</description>\r\n+\t<dependencies>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>commons-beanutils</groupId>\r\n+\t\t\t<artifactId>commons-beanutils</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>commons-io</groupId>\r\n+\t\t\t<artifactId>commons-io</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-ucfpackage</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t</dependency>\r\n+\t</dependencies>\r\n+\r\n+</project>\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/pom.xml",
                "sha": "8053d85b005d50f1ac8682ef1fbe210dce60b54a",
                "status": "modified"
            },
            {
                "additions": 130,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/Annotation.java",
                "changes": 130,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/Annotation.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/Annotation.java",
                "patch": "@@ -0,0 +1,130 @@\n+package uk.org.taverna.scufl2.api.annotation;\r\n+\r\n+import java.net.URI;\r\n+import java.util.ArrayList;\r\n+import java.util.Calendar;\r\n+import java.util.GregorianCalendar;\r\n+import java.util.List;\r\n+\r\n+import uk.org.taverna.scufl2.api.common.AbstractNamed;\r\n+import uk.org.taverna.scufl2.api.common.AbstractNamedChild;\r\n+import uk.org.taverna.scufl2.api.common.Child;\r\n+import uk.org.taverna.scufl2.api.common.Named;\r\n+import uk.org.taverna.scufl2.api.common.URITools;\r\n+import uk.org.taverna.scufl2.api.common.Visitor;\r\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\r\n+import uk.org.taverna.scufl2.api.container.WorkflowBundle;\r\n+import uk.org.taverna.scufl2.api.property.PropertyObject;\r\n+import uk.org.taverna.scufl2.api.property.PropertyResource;\r\n+\r\n+/**\r\n+ * An annotation of a WorkflowBean.\r\n+ * <p>\r\n+ * Modelled after http://openannotation.org/spec/core/20120509\r\n+ * \r\n+ * @author Stian Soiland-Reyes\r\n+ *\r\n+ */\r\n+public class Annotation extends AbstractNamed implements Named, Child<WorkflowBundle> {\r\n+\tprivate Calendar annotated;\r\n+\tprivate URI annotator;\r\n+\tprivate List<PropertyObject> bodyStatements = new ArrayList<PropertyObject>();\r\n+\tprivate Calendar generated = new GregorianCalendar();\r\n+\tprivate URI generator;\r\n+\tprivate WorkflowBean target;\r\n+\tprivate WorkflowBundle parent;\r\n+\tprivate URI body;\r\n+\t\r\n+\t\r\n+\tpublic Annotation(WorkflowBean target) {\r\n+\t\tsetTarget(target);\r\n+\t}\r\n+\r\n+\tpublic Annotation() {\r\n+\t}\r\n+\t\r\n+\t@Override\r\n+\tpublic boolean accept(Visitor visitor) {\r\n+\t\tvisitor.visitEnter(this);\r\n+\t\tfor (WorkflowBean b : getBodyStatements()) {\r\n+\t\t\tif (! b.accept(visitor)) {\r\n+\t\t\t\tbreak;\r\n+\t\t\t}\r\n+\t\t}\r\n+\t\treturn visitor.visitLeave(this);\t\t\r\n+\t}\r\n+\tpublic Calendar getAnnotated() {\r\n+\t\treturn annotated;\r\n+\t}\r\n+\tpublic URI getAnnotator() {\r\n+\t\treturn annotator;\r\n+\t}\r\n+\tpublic List<PropertyObject> getBodyStatements() {\r\n+\t\treturn bodyStatements;\r\n+\t}\r\n+\tpublic Calendar getGenerated() {\r\n+\t\treturn generated;\r\n+\t}\r\n+\tpublic URI getGenerator() {\r\n+\t\treturn generator;\r\n+\t}\r\n+\tpublic WorkflowBean getTarget() {\r\n+\t\tif (target == null) {\r\n+\t\t\treturn this;\r\n+\t\t}\r\n+\t\treturn target;\r\n+\t}\r\n+\tpublic void setAnnotated(Calendar annotated) {\r\n+\t\tthis.annotated = annotated;\r\n+\t}\r\n+\tpublic void setAnnotator(URI annotator) {\r\n+\t\tthis.annotator = annotator;\r\n+\t}\r\n+\tpublic void setBodyStatements(List<PropertyObject> bodyStatements) {\r\n+\t\tif (bodyStatements == null) { \r\n+\t\t\tthrow new NullPointerException(\"bodyStatements can't be null\");\r\n+\t\t}\r\n+\t\tthis.bodyStatements = bodyStatements;\r\n+\t}\r\n+\r\n+\tpublic void setGenerated(Calendar generated) {\r\n+\t\tthis.generated = generated;\r\n+\t}\r\n+\tpublic void setGenerator(URI generator) {\r\n+\t\tthis.generator = generator;\r\n+\t}\r\n+\tpublic void setTarget(WorkflowBean target) {\r\n+\t\tif (target == null) {\r\n+\t\t\tthrow new NullPointerException(\"Target can't be null\");\r\n+\t\t}\r\n+\t\tthis.target = target;\r\n+\t}\r\n+\r\n+\t@Override\r\n+\tpublic WorkflowBundle getParent() {\r\n+\t\treturn this.parent;\r\n+\t}\r\n+\r\n+\t@Override\r\n+\tpublic void setParent(WorkflowBundle parent) {\r\n+\t\tif (this.parent != null && this.parent != parent) {\r\n+\t\t\tthis.parent.getAnnotations().remove(this);\r\n+\t\t}\r\n+\t\tthis.parent = parent;\r\n+\t\tif (parent != null) {\r\n+\t\t\tparent.getAnnotations().add(this);\r\n+\t\t}\r\n+\r\n+\t}\r\n+\r\n+\tpublic URI getBody() {\r\n+\t\treturn body;\r\n+\t}\r\n+\r\n+\tpublic void setBody(URI body) {\r\n+\t\tthis.body = body;\r\n+\t}\r\n+\r\n+\r\n+\t\r\n+}\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/Annotation.java",
                "sha": "9f084e93f0357a6949e0226cffca794226f8d974",
                "status": "added"
            },
            {
                "additions": 159,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/Revision.java",
                "changes": 159,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/Revision.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/Revision.java",
                "patch": "@@ -0,0 +1,159 @@\n+package uk.org.taverna.scufl2.api.annotation;\r\n+\r\n+import java.net.URI;\r\n+import java.util.Calendar;\r\n+import java.util.Set;\r\n+\r\n+import uk.org.taverna.scufl2.api.property.MultiplePropertiesException;\r\n+import uk.org.taverna.scufl2.api.property.PropertyLiteral;\r\n+import uk.org.taverna.scufl2.api.property.PropertyNotFoundException;\r\n+import uk.org.taverna.scufl2.api.property.PropertyObject;\r\n+import uk.org.taverna.scufl2.api.property.PropertyReference;\r\n+import uk.org.taverna.scufl2.api.property.PropertyResource;\r\n+import uk.org.taverna.scufl2.api.property.UnexpectedPropertyException;\r\n+\r\n+public class Revision extends PropertyResource {\r\n+\r\n+\t/**\r\n+\t * Based on working draft http://www.w3.org/TR/2012/WD-prov-o-20120503/\r\n+\t * \r\n+\t * TODO: Update for PROV-O when released as spec\r\n+\t **/\r\n+\tprotected static final URI PROV = URI.create(\"http://www.w3.org/ns/prov#\");\r\n+\r\n+\tprotected static final URI AT_TIME = PROV.resolve(\"#atTime\");\r\n+\tprotected static final URI ENTITY = PROV.resolve(\"#Entity\");\r\n+\tprotected static final URI GENERATION = PROV.resolve(\"#Generation\");\r\n+\r\n+\tprotected static final URI QUALIFIED_GENERATION = PROV\r\n+\t\t\t.resolve(\"#qualifiedGeneration\");\r\n+\tprotected static final URI WAS_ATTRIBUTED_TO = PROV\r\n+\t\t\t.resolve(\"#wasAttributedTo\");\r\n+\tprotected static final URI WAS_REVISION_OF = PROV.resolve(\"#wasRevisionOf\");\r\n+\r\n+\tpublic Revision() {\r\n+\t\tthis(null, null);\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * Cloning constructor\r\n+\t * \r\n+\t * @param propertyAsResource\r\n+\t */\r\n+\tprotected Revision(PropertyResource propertyAsResource) {\r\n+\t\tsetTypeURI(propertyAsResource.getTypeURI());\r\n+\t\tsetResourceURI(propertyAsResource.getResourceURI());\r\n+\t\t/*\r\n+\t\t * Note: setProperties() makes an implicit clone of the properties map\r\n+\t\t */\r\n+\t\tsetProperties(propertyAsResource.getProperties());\r\n+\t}\r\n+\r\n+\tpublic Revision(URI uri) {\r\n+\t\tthis(uri, null);\r\n+\t}\r\n+\r\n+\tpublic Revision(URI uri, Revision previous) {\r\n+\t\tsetResourceURI(uri);\r\n+\t\tsetTypeURI(ENTITY);\r\n+\t\tsetPreviousRevision(previous);\r\n+\t}\r\n+\r\n+\tpublic void addCreator(URI creator) {\r\n+\t\taddPropertyReference(WAS_ATTRIBUTED_TO, creator);\r\n+\t}\r\n+\r\n+\tpublic Calendar getCreated() {\r\n+\t\tPropertyResource generation;\r\n+\t\ttry {\r\n+\t\t\tgeneration = getPropertyAsResource(QUALIFIED_GENERATION);\r\n+\t\t\treturn generation.getPropertyAsLiteral(AT_TIME)\r\n+\t\t\t\t\t.getLiteralValueAsCalendar();\r\n+\t\t} catch (PropertyNotFoundException e) {\r\n+\t\t\treturn null;\r\n+\t\t} catch (UnexpectedPropertyException e) {\r\n+\t\t\tthrow new IllegalStateException(String.format(\"Invalid %s or %s\",\r\n+\t\t\t\t\tQUALIFIED_GENERATION, AT_TIME), e);\r\n+\t\t} catch (MultiplePropertiesException e) {\r\n+\t\t\tthrow new IllegalStateException(String.format(\"Multiple %s or %s\",\r\n+\t\t\t\t\tQUALIFIED_GENERATION, AT_TIME), e);\r\n+\t\t}\r\n+\t}\r\n+\r\n+\tpublic Set<URI> getCreators() {\r\n+\t\ttry {\r\n+\t\t\treturn getPropertiesAsResourceURIs(WAS_ATTRIBUTED_TO);\r\n+\t\t} catch (UnexpectedPropertyException e) {\r\n+\t\t\tthrow new IllegalStateException(String.format(\"Invalid %s\",\r\n+\t\t\t\t\tWAS_ATTRIBUTED_TO), e);\r\n+\t\t}\r\n+\t}\r\n+\r\n+\tpublic Revision getPreviousRevision() {\r\n+\t\ttry {\r\n+\t\t\tPropertyObject property = getProperty(WAS_REVISION_OF);\r\n+\t\t\tRevision revision;\r\n+\t\t\tif (property instanceof Revision) {\r\n+\t\t\t\trevision = (Revision) property;\r\n+\t\t\t} else if (property instanceof PropertyResource) {\r\n+\t\t\t\t// Clone it as Revision subclass\r\n+\t\t\t\trevision = new Revision((PropertyResource) property);\r\n+\t\t\t\t// Replace the plain PropertyResource so changes shine through\r\n+\t\t\t\tsetPreviousRevision(revision);\r\n+\t\t\t} else if (property instanceof PropertyReference) {\r\n+\t\t\t\tURI previous = ((PropertyReference) property).getResourceURI();\r\n+\t\t\t\trevision = new Revision(previous);\r\n+\t\t\t\tsetPreviousRevision(revision);\r\n+\t\t\t} else {\r\n+\t\t\t\tthrow new IllegalStateException(String.format(\"Invalid %s\",\r\n+\t\t\t\t\t\tWAS_REVISION_OF));\r\n+\t\t\t}\r\n+\t\t\treturn revision;\r\n+\t\t} catch (PropertyNotFoundException e) {\r\n+\t\t\treturn null;\r\n+\t\t} catch (MultiplePropertiesException e) {\r\n+\t\t\tthrow new IllegalStateException(String.format(\"Multiple %s\",\r\n+\t\t\t\t\tWAS_REVISION_OF), e);\r\n+\t\t}\r\n+\t}\r\n+\r\n+\tpublic void setCreated(Calendar created) {\r\n+\t\tPropertyResource generation;\r\n+\t\ttry {\r\n+\t\t\tgeneration = getPropertyAsResource(QUALIFIED_GENERATION);\r\n+\t\t} catch (PropertyNotFoundException e) {\r\n+\t\t\tgeneration = addPropertyAsNewResource(QUALIFIED_GENERATION,\r\n+\t\t\t\t\tGENERATION);\r\n+\t\t} catch (UnexpectedPropertyException e) {\r\n+\t\t\tthrow new IllegalStateException(String.format(\"Invalid %s\",\r\n+\t\t\t\t\tQUALIFIED_GENERATION), e);\r\n+\t\t} catch (MultiplePropertiesException e) {\r\n+\t\t\tthrow new IllegalStateException(String.format(\"Multiple %s\",\r\n+\t\t\t\t\tQUALIFIED_GENERATION), e);\r\n+\t\t}\r\n+\t\tgeneration.clearProperties(AT_TIME);\r\n+\t\tgeneration.addProperty(AT_TIME, new PropertyLiteral(created));\r\n+\t}\r\n+\r\n+\tpublic void setCreators(Set<URI> creators) {\r\n+\t\tclearProperties(WAS_ATTRIBUTED_TO);\r\n+\t\tfor (URI creator : creators) {\r\n+\t\t\taddCreator(creator);\r\n+\t\t}\r\n+\t}\r\n+\r\n+\tpublic void setPreviousRevision(Revision previous) {\r\n+\t\tclearProperties(WAS_REVISION_OF);\r\n+\t\tif (previous != null) {\r\n+\t\t\taddProperty(WAS_REVISION_OF, previous);\r\n+\t\t}\r\n+\t}\r\n+\r\n+\tpublic void setPreviousRevision(URI previous) {\r\n+\t\tclearProperties(WAS_REVISION_OF);\r\n+\t\tif (previous != null) {\r\n+\t\t\taddPropertyReference(WAS_REVISION_OF, previous);\r\n+\t\t}\t\t\r\n+\t}\r\n+\r\n+}\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/Revision.java",
                "sha": "5b4044eeba23de4afb332bb83f87603566020399",
                "status": "added"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/package-info.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/package-info.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/package-info.java",
                "patch": "@@ -0,0 +1,7 @@\n+/**\n+ * Common annotations\n+ * \n+ */\n+package uk.org.taverna.scufl2.api.annotation;\n+\n+",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/annotation/package-info.java",
                "sha": "cb4d5e1d382edd8bd0d024ee10abe76666c3dd1e",
                "status": "added"
            },
            {
                "additions": 8,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Configurable.java",
                "changes": 11,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Configurable.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 3,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Configurable.java",
                "patch": "@@ -1,11 +1,16 @@\n package uk.org.taverna.scufl2.api.common;\r\n \r\n+import uk.org.taverna.scufl2.api.configurations.Configuration;\r\n+\r\n /**\r\n- * A marker interface for {@link WorkflowBean WorkflowBeans} that can have a\r\n+ * {@link WorkflowBean WorkflowBeans} that can have a\r\n  * {@link uk.org.taverna.scufl2.api.configurations.Configuration Configuration}.\r\n+ * <p>\r\n+ * Configurables are {@link Typed}, but note that this type is different from\r\n+ * the type of the {@link Configuration}.\r\n  * \r\n  * @author Alan R Williams\r\n+ * @author Stian Soiland-Reyes\r\n  */\r\n-public interface Configurable extends WorkflowBean {\r\n-\r\n+public interface Configurable extends Typed {\r\n }\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Configurable.java",
                "sha": "2c1a51a8aba7209c521e0640f080ebcaf4eb74f9",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Scufl2Tools.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Scufl2Tools.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 5,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Scufl2Tools.java",
                "patch": "@@ -1,7 +1,5 @@\n package uk.org.taverna.scufl2.api.common;\r\n \r\n-import uk.org.taverna.scufl2.api.property.PropertyException;\r\n-\r\n import java.net.URI;\r\n import java.util.ArrayList;\r\n import java.util.Collections;\r\n@@ -31,10 +29,8 @@\n import uk.org.taverna.scufl2.api.profiles.ProcessorOutputPortBinding;\r\n import uk.org.taverna.scufl2.api.profiles.ProcessorPortBinding;\r\n import uk.org.taverna.scufl2.api.profiles.Profile;\r\n-import uk.org.taverna.scufl2.api.property.MultiplePropertiesException;\r\n-import uk.org.taverna.scufl2.api.property.PropertyNotFoundException;\r\n+import uk.org.taverna.scufl2.api.property.PropertyException;\r\n import uk.org.taverna.scufl2.api.property.PropertyResource;\r\n-import uk.org.taverna.scufl2.api.property.UnexpectedPropertyException;\r\n \r\n \r\n /**\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Scufl2Tools.java",
                "sha": "6bab374bc19843da085af7cc4a3fa74e21d9346b",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Typed.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Typed.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Typed.java",
                "patch": "@@ -4,9 +4,13 @@\n \n /**\n  * A typed {@link WorkflowBean}.\n+ * \n+ * @author Stian Soiland-Reyes\n  */\n public interface Typed extends WorkflowBean {\n \n+\t// TODO: Change back to getType/setType()\n+\t\n \t/**\n \t * Returns the type of the {@link WorkflowBean}.\n \t * ",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Typed.java",
                "sha": "fb0272b2156512e763f475460625380a78f8cd0e",
                "status": "modified"
            },
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/URITools.java",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/URITools.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 2,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/URITools.java",
                "patch": "@@ -7,6 +7,7 @@\n import java.util.List;\n import java.util.Map;\n \n+import uk.org.taverna.scufl2.api.annotation.Annotation;\n import uk.org.taverna.scufl2.api.common.Visitor.VisitorWithPath;\n import uk.org.taverna.scufl2.api.configurations.Configuration;\n import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n@@ -23,6 +24,7 @@\n import uk.org.taverna.scufl2.api.port.ProcessorPort;\n import uk.org.taverna.scufl2.api.profiles.ProcessorPortBinding;\n import uk.org.taverna.scufl2.api.property.PropertyResource;\n+import uk.org.taverna.scufl2.api.property.PropertyResource.PropertyVisit;\n \n /**\n  * Utility methods for dealing with URIs.\n@@ -170,7 +172,7 @@ public URI uriForBean(WorkflowBean bean) {\n \t\t\tif (bean instanceof Named) {\n \t\t\t\tNamed named = (Named) bean;\n \t\t\t\tString name = validFilename(named.getName());\n-\t\t\t\tif (!(bean instanceof Port)) {\n+\t\t\t\tif (!(bean instanceof Port || bean instanceof Annotation)) {\n \t\t\t\t\tname = name + \"/\";\n \t\t\t\t}\n \t\t\t\treturn relationURI.resolve(name);\n@@ -232,7 +234,7 @@ public URI uriForBean(WorkflowBean bean) {\n \t\t\t\treturn parentUri.resolve(procPortUri);\n \t\t\t} else {\n \t\t\t\tthrow new IllegalStateException(\n-\t\t\t\t\t\t\"Can't create URIs for non-named child: \" + bean);\n+\t\t\t\t\t\t\"Can't create URIs for child of unrecogized type \" + bean.getClass());\n \t\t\t}\n \n \t\t}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/URITools.java",
                "sha": "5e7acb55986288eabdff66972d2ac94d7fa77a9e",
                "status": "modified"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Visitor.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Visitor.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 2,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Visitor.java",
                "patch": "@@ -3,8 +3,6 @@\n import java.util.List;\n import java.util.Stack;\n \n-import uk.org.taverna.scufl2.api.common.Visitor.VisitorAdapter;\n-import uk.org.taverna.scufl2.api.common.Visitor.VisitorWithPath;\n import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n import uk.org.taverna.scufl2.api.core.Processor;\n import uk.org.taverna.scufl2.api.core.Workflow;",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Visitor.java",
                "sha": "b73cdcc9f26fe248aec7aab22542480c0309103b",
                "status": "modified"
            },
            {
                "additions": 71,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/configurations/Configuration.java",
                "changes": 89,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/configurations/Configuration.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 18,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/configurations/Configuration.java",
                "patch": "@@ -23,18 +23,33 @@\n  * Configuration of a {@link Configurable} workflow bean.\n  * <p>\n  * A configuration is activated by a {@link Profile}, and provides a link to the\n- * {@link #getPropertyResource()} containing the properties to configure the bean, like an\n- * {@link Activity}.\n+ * {@link #getPropertyResource()} containing the properties to configure the\n+ * bean, like an {@link Activity}.\n  * <p>\n  * A configuration is of a certain (RDF) <strong>type</strong>, as defined by\n- * {@link PropertyResource#getTypeURI()} on the - which determines which properties are required and\n- * optional. For instance, the type\n- * <code>http://ns.taverna.org.uk/2010/activity/wsdl/ConfigType</code> requires the property\n+ * {@link PropertyResource#getTypeURI()} on the - which determines which\n+ * properties are required and optional. For instance, the type\n+ * <code>http://ns.taverna.org.uk/2010/activity/wsdl/ConfigType</code> requires\n+ * the property\n  * <code>http://ns.taverna.org.uk/2010/activity/wsdl/operation</code>.\n  * <p>\n- * These requirements are described in the {@link ConfigurationDefinition} which\n- * {@link ConfigurationDefinition#getConfigurableType()} matches this configuration's\n- * {@link #getTypeURI()}. <strong>TODO: Where are the ConfigurationDefinitions found?</strong>\n+ * These requirements are described in the {@link ConfigurationDefinition} that\n+ * matches the getConfigurableType() of the {@link Configurable} found by\n+ * {@link #getConfigures()}. Its\n+ * {@link ConfigurationDefinition#getPropertyResourceDefinition()} should in\n+ * {@link PropertyResourceDefinition#getTypeURI()} should match the\n+ * {@link #getType()} of this {@link Configuration}.\n+ * <p>\n+ * Note: {@link #getType()} (and the potentially misleading\n+ * {@link #getConfigurableType()}) return the type of <b>this</b> Configuration,\n+ * not the type of the {@link Configurable} bean that it happens to configure.\n+ * For instance, a Configuration typed\n+ * <code>http://example.com/WSDLConfiguration</code> might configure an activity\n+ * typed <code>http://example.com/WSDLActivity</code>, but could also have\n+ * configured an activity typed\n+ * <code>http://example.com/GlobusWSDLActivity</code>.\n+ * <p>\n+ * <strong>TODO: Where are the ConfigurationDefinitions found?</strong>\n  * \n  * @author Alan R Williams\n  * @author Stian Soiland-Reyes\n@@ -53,7 +68,7 @@ public Configuration() {\n \t}\n \n \t/**\n-\t * Constructs a <code>Configuration</code> with the specified name.\n+\t * Construct a <code>Configuration</code> with the specified name.\n \t * \n \t * @param name\n \t *            the name of the <code>Configuration</code>. <strong>Must not</strong> be\n@@ -72,17 +87,25 @@ public boolean accept(Visitor visitor) {\n \t}\n \n \t/**\n-\t * Returns the type of the <code>Configuration</code>.\n+\t * Return the type of the <code>Configuration</code>.\n+\t * <p>\n+\t * Note that this method name (inherited from {@link Typed}) can be\n+\t * misleading, as this is the type of the {@link Configuration}, not the\n+\t * {@link Configurable}. To avoid ambiguous code, \n+\t * you may use the {@link #getType()} method instead.\n+\t * \n+\t * @deprecated Use {@link #getType()} to avoid ambiguous code\n \t * \n \t * @return the type of the <code>Configuration</code>\n \t */\n+\t@Deprecated\n \t@Override\n \tpublic URI getConfigurableType() {\n-\t\treturn getPropertyResource().getTypeURI();\n+\t\treturn getType();\n \t}\n \n \t/**\n-\t * Returns the {@link Configurable} workflow bean that is configured. Typically an\n+\t * Return the {@link Configurable} workflow bean that is configured. Typically an\n \t * {@link Activity} or {@link DispatchStackLayer}, but in theory also {@link Processor},\n \t * {@link Workflow} and {@link Port} can be configured.\n \t * \n@@ -98,7 +121,7 @@ public Profile getParent() {\n \t}\n \n \t/**\n-\t * Returns the underlying {@link PropertyResource} which contains the properties set by this\n+\t * Return the underlying {@link PropertyResource} which contains the properties set by this\n \t * configuration.\n \t * \n \t * @return the backing {@link PropertyResource}.\n@@ -108,18 +131,36 @@ public PropertyResource getPropertyResource() {\n \t}\n \n \t/**\n-\t * Sets the type of the <code>Configuration</code>.\n+\t * Return the type of the <code>Configuration</code>.\n+\t * <p>\n+\t * The URI will match the {@link PropertyResource#getTypeURI()}.\n \t * \n+\t * @return the type of the <code>Configuration</code>\n+\t */\n+\tpublic URI getType() {\n+\t\treturn getPropertyResource().getTypeURI();\n+\t}\n+\n+\t/**\n+\t * Set the type of the <code>Configuration</code>.\n+\t * <p>\n+\t * Note that this method name (inherited from {@link Typed}) can be\n+\t * misleading, as this is the type of the {@link Configuration}, not the\n+\t * {@link Configurable}. To avoid ambiguous code, you may use the\n+\t * {@link #setType(URI)} method instead.\n+\t * \n+\t * @deprecated Use {@link #setType(URI)} to avoid ambiguous code\n \t * @param type\n-\t *            the type of the <code>Configuration</code>.\n+\t *             the type of the <code>Configuration</code>.\n \t */\n+\t@Deprecated\n \t@Override\n \tpublic void setConfigurableType(URI type) {\n-\t\tgetPropertyResource().setTypeURI(type);\n+\t\tsetType(type);\n \t}\n \n \t/**\n-\t * Sets the {@link Configurable} {@link WorkflowBean} that is configured.\n+\t * Set the {@link Configurable} {@link WorkflowBean} that is configured.\n \t * \n \t * @param configurable\n \t *            the <code>Configurable</code> <code>WorkflowBean</code> that is configured\n@@ -141,7 +182,7 @@ public void setParent(Profile parent) {\n \t}\n \n \t/**\n-\t * Sets the underlying {@link PropertyResource} which contains the properties set by this\n+\t * Se the underlying {@link PropertyResource} which contains the properties set by this\n \t * configuration.\n \t * \n \t * @param propertyResource\n@@ -152,4 +193,16 @@ public void setPropertyResource(PropertyResource propertyResource) {\n \t\tthis.propertyResource = propertyResource;\n \t}\n \n+\t/**\n+\t * Set the type of the <code>Configuration</code>.\n+\t * <p>\n+\t * This will also set {@link PropertyResource#setTypeURI(URI)}.\n+\t * \n+\t * @param type\n+\t *             the type of the <code>Configuration</code>.\n+\t */\n+\tpublic void setType(URI type) {\n+\t\tgetPropertyResource().setTypeURI(type);\n+\t}\n+\n }",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/configurations/Configuration.java",
                "sha": "c151a263e43a86b012a20784122edd722460168a",
                "status": "modified"
            },
            {
                "additions": 68,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/container/WorkflowBundle.java",
                "changes": 74,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/container/WorkflowBundle.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 6,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/container/WorkflowBundle.java",
                "patch": "@@ -6,9 +6,12 @@\n import java.util.Collection;\r\n import java.util.Iterator;\r\n import java.util.List;\r\n+import java.util.Map;\r\n import java.util.Set;\r\n import java.util.UUID;\r\n \r\n+import uk.org.taverna.scufl2.api.activity.Activity;\n+import uk.org.taverna.scufl2.api.annotation.Annotation;\r\n import uk.org.taverna.scufl2.api.common.AbstractNamed;\r\n import uk.org.taverna.scufl2.api.common.Named;\r\n import uk.org.taverna.scufl2.api.common.NamedSet;\r\n@@ -21,18 +24,19 @@\n \r\n /**\r\n  * @author Alan R Williams\r\n- *\r\n+ * \r\n  */\r\n public class WorkflowBundle extends AbstractNamed implements WorkflowBean,\r\n-Named, Root {\r\n+\t\tNamed, Root {\r\n \r\n \tpublic static final URI WORKFLOW_BUNDLE_ROOT = URI\r\n-\t.create(\"http://ns.taverna.org.uk/2010/workflowBundle/\");\r\n+\t\t\t.create(\"http://ns.taverna.org.uk/2010/workflowBundle/\");\r\n \r\n \tpublic static URI generateIdentifier() {\r\n \t\treturn WORKFLOW_BUNDLE_ROOT.resolve(UUID.randomUUID().toString() + \"/\");\r\n \t}\r\n \r\n+\tprivate NamedSet<Annotation> annotations = new NamedSet<Annotation>();\r\n \tprivate URI globalBaseURI = generateIdentifier();\r\n \tprivate final NamedSet<Profile> profiles = new NamedSet<Profile>();\r\n \tprivate final NamedSet<Workflow> workflows = new NamedSet<Workflow>();\r\n@@ -46,6 +50,7 @@ public boolean accept(Visitor visitor) {\n \t\t\tList<Iterable<? extends WorkflowBean>> children = new ArrayList<Iterable<? extends WorkflowBean>>();\r\n \t\t\tchildren.add(getWorkflows());\r\n \t\t\tchildren.add(getProfiles());\r\n+\t\t\tchildren.add(getAnnotations());\r\n \t\t\touter: for (Iterable<? extends WorkflowBean> it : children) {\r\n \t\t\t\tfor (WorkflowBean bean : it) {\r\n \t\t\t\t\tif (!bean.accept(visitor)) {\r\n@@ -123,20 +128,68 @@ public void setWorkflows(Set<Workflow> workflows) {\n \t\tthis.workflows.addAll(workflows);\r\n \t}\r\n \r\n+\t/**\r\n+\t * WorkflowBundles are only equal by instance identity.\r\n+\t * <p>\r\n+\t * Thus, if you load or construct the same workflow bundle twice, say as\r\n+\t * <code>wb1</code> and <code>wb2</code>, then\r\n+\t * <code>wb1.equals(wb2) == false</code>.\r\n+\t * <p>\r\n+\t * There are two reasons for this. Firstly, a workflow bundle is a complex\r\n+\t * object, as it bundles not just the {@link #getWorkflows()} and\r\n+\t * {@link #getProfiles()}, but also arbitrary resources in\r\n+\t * {@link #getResources()}. Two workflow bundles can for most purposes be\r\n+\t * assumed \"equal\" if they have the same identifier in\r\n+\t * {@link #getGlobalBaseURI()} - they might however vary in which\r\n+\t * annotations they carry.\r\n+\t * <p>\r\n+\t * The second is that applications might use {@link WorkflowBundle}\r\n+\t * instances as keys in a {@link Map} of open workflows, and want to\r\n+\t * distinguish between two workflow bundles from two different (but possibly\r\n+\t * identical) files; for instance a .t2flow and a .wfbundle.\r\n+\t * <p>\r\n+\t * Note that contained workflow beans such as {@link Workflow} and\r\n+\t * {@link Activity} will likewise not be\r\n+\t * {@link AbstractNamed#equals(Object)} across workflow bundles, as a named\r\n+\t * bean is considered equal only if its name matches and its parents are\r\n+\t * (recursively) equal. You may however detach the children by setting their\r\n+\t * parents to <code>null</code> and check for equality in isolation.\r\n+\t * \r\n+\t */\r\n+\t@Override\r\n+\tpublic boolean equals(Object obj) {\r\n+\t\treturn this == obj;\r\n+\t}\r\n+\r\n+\t@Override\r\n+\tpublic int hashCode() {\r\n+\t\t// TODO: Is there a way to call Object.hashCode() from here?\r\n+\t\t// Our super is hiding it.\r\n+\r\n+\t\t// Possible workaround:\r\n+\t\t/*\r\n+\t\t * private int hashCode = new Object().hashCode();\r\n+\t\t * \r\n+\t\t * @Override public int hashCode() { return hashCode; }\r\n+\t\t */\r\n+\r\n+\t\treturn super.hashCode();\r\n+\t}\r\n+\r\n \t@Override\r\n \tpublic String toString() {\r\n \t\tfinal int maxLen = 6;\r\n \t\treturn \"TavernaResearchObject [\" + \"profiles=\"\r\n-\t\t+ (profiles != null ? toString(profiles, maxLen) : null)\r\n-\t\t+ \", mainWorkflow=\" + mainWorkflow + \"]\";\r\n+\t\t\t\t+ (profiles != null ? toString(profiles, maxLen) : null)\r\n+\t\t\t\t+ \", mainWorkflow=\" + mainWorkflow + \"]\";\r\n \t}\r\n \r\n \tprivate String toString(Collection<?> collection, int maxLen) {\r\n \t\tStringBuilder builder = new StringBuilder();\r\n \t\tbuilder.append(\"[\");\r\n \t\tint i = 0;\r\n \t\tfor (Iterator<?> iterator = collection.iterator(); iterator.hasNext()\r\n-\t\t&& i < maxLen; i++) {\r\n+\t\t\t\t&& i < maxLen; i++) {\r\n \t\t\tif (i > 0) {\r\n \t\t\t\tbuilder.append(\", \");\r\n \t\t\t}\r\n@@ -146,4 +199,13 @@ private String toString(Collection<?> collection, int maxLen) {\n \t\treturn builder.toString();\r\n \t}\r\n \r\n+\tpublic NamedSet<Annotation> getAnnotations() {\r\n+\t\treturn annotations;\r\n+\t}\r\n+\r\n+\tpublic void setAnnotations(NamedSet<Annotation> annotations) {\r\n+\t\tthis.annotations.clear();\r\n+\t\tthis.annotations.addAll(annotations);\r\n+\t}\r\n+\r\n }\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/container/WorkflowBundle.java",
                "sha": "1273144e7d407d918e594b903b2021bc82866d44",
                "status": "modified"
            },
            {
                "additions": 13,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/BlockingControlLink.java",
                "changes": 44,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/BlockingControlLink.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 31,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/BlockingControlLink.java",
                "patch": "@@ -3,6 +3,7 @@\n import java.text.MessageFormat;\n \n import uk.org.taverna.scufl2.api.common.Visitor;\n+import uk.org.taverna.scufl2.api.impl.NullSafeComparator;\n \n /**\n  * A {@link ControlLink} that blocks a {@link Processor} from starting until another\n@@ -14,6 +15,8 @@\n @SuppressWarnings(\"rawtypes\")\n public class BlockingControlLink implements ControlLink {\n \n+\tprivate static NullSafeComparator nullSafeCompare = new NullSafeComparator();\n+\t\n \tprivate Workflow parent;\n \tprivate Processor block;\n \tprivate Processor untilFinished;\n@@ -46,42 +49,19 @@ public boolean accept(Visitor visitor) {\n \t\treturn visitor.visit(this);\n \t}\n \n+\t@SuppressWarnings(\"unchecked\")\n \t@Override\n \tpublic int compareTo(Object o) {\n \t\tif (!(o instanceof BlockingControlLink)) {\n \t\t\treturn o.getClass().getCanonicalName().compareTo(getClass().getCanonicalName());\n \t\t}\n \t\tBlockingControlLink o1 = this;\t\t\n-\t\tBlockingControlLink o2 = (BlockingControlLink) o;\n-\t\t\n-\t\tif (o1.getUntilFinished() == null) {\n-\t\t\tif (o2.getUntilFinished() != null) {\n-\t\t\t\treturn -1;\n-\t\t\t}\n-\t\t} else { \n-\t\t\tif (o2.getUntilFinished() == null) {\n-\t\t\t\treturn 1;\n-\t\t\t}\n-\t\t\tint untilFinished = o1.getUntilFinished().compareTo(o2.getUntilFinished());\n-\t\t\tif (untilFinished != 0) {\n-\t\t\t\treturn untilFinished;\n-\t\t\t}\n+\t\tBlockingControlLink o2 = (BlockingControlLink) o;\t\t\n+\t\tint untilFinishedCompare = nullSafeCompare.compare(o1.getUntilFinished(), o2.getUntilFinished());\n+\t\tif (untilFinishedCompare != 0) {\n+\t\t\treturn untilFinishedCompare;\n \t\t}\n-\n-\t\tif (o1.getBlock() == null) {\n-\t\t\tif (o2.getBlock() != null) {\n-\t\t\t\treturn -1;\n-\t\t\t}\n-\t\t} else { \n-\t\t\tif (o2.getBlock() == null) {\n-\t\t\t\treturn 1;\n-\t\t\t}\n-\t\t\tint block = o1.getBlock().compareTo(o2.getBlock());\n-\t\t\tif (block != 0) {\n-\t\t\t\treturn block;\n-\t\t\t}\n-\t\t}\t\t\n-\t\treturn 0;\n+\t\treturn nullSafeCompare.compare(o1.getBlock(), o2.getBlock());\n \t}\n \n \t@Override\n@@ -186,8 +166,10 @@ public void setUntilFinished(Processor untilFinished) {\n \n \t@Override\n \tpublic String toString() {\n-\t\treturn MessageFormat.format(\"block {0} until {1} is finished\", getBlock(),\n-\t\t\t\tgetUntilFinished());\n+\t\tString blockName = getBlock() != null ? getBlock().getName() : null;\n+\t\tString untilName = getUntilFinished() != null ? getUntilFinished().getName() : null;\n+\t\t\n+\t\treturn MessageFormat.format(\"{0}-blocks-{1}\", untilName, blockName);\n \t}\n \n }",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/BlockingControlLink.java",
                "sha": "23c131542ac12d4147e2be8b256f434db5cb4346",
                "status": "modified"
            },
            {
                "additions": 18,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/DataLink.java",
                "changes": 31,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/DataLink.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 13,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/DataLink.java",
                "patch": "@@ -2,6 +2,7 @@\n \r\n import uk.org.taverna.scufl2.api.common.Child;\r\n import uk.org.taverna.scufl2.api.common.Visitor;\r\n+import uk.org.taverna.scufl2.api.impl.NullSafeComparator;\r\n import uk.org.taverna.scufl2.api.port.ReceiverPort;\r\n import uk.org.taverna.scufl2.api.port.SenderPort;\r\n \r\n@@ -22,6 +23,9 @@\n  */\r\n public class DataLink implements Child<Workflow>, Comparable {\r\n \r\n+\t@SuppressWarnings(\"rawtypes\")\r\n+\tprivate static NullSafeComparator nullSafeCompare = new NullSafeComparator();\r\n+\t\r\n \tprivate ReceiverPort sendsTo;\r\n \r\n \tprivate SenderPort receivesFrom;\r\n@@ -70,28 +74,20 @@ public int compareTo(Object o) {\n \t\t}\r\n \t\tDataLink o1 = this;\r\n \t\tDataLink o2 = (DataLink) o;\r\n-\r\n-\t\tint senderCompare = o1.getReceivesFrom().compareTo(o2.getReceivesFrom());\r\n+\t\t\r\n+\t\tint senderCompare = nullSafeCompare.compare(o1.getReceivesFrom(), o2.getReceivesFrom());\r\n \t\tif (senderCompare != 0) {\r\n \t\t\treturn senderCompare;\r\n \t\t}\r\n \r\n-\t\tint receiverCompare = o1.getSendsTo().compareTo(o2.getSendsTo());\r\n+\t\tint receiverCompare = nullSafeCompare.compare(o1.getSendsTo(), o2.getSendsTo());\r\n \t\tif (receiverCompare != 0) {\r\n \t\t\treturn receiverCompare;\r\n \t\t}\r\n-\r\n-\t\tif (o1.getMergePosition() == null) {\r\n-\t\t\tif (o2.getMergePosition() == null) {\r\n-\t\t\t\treturn 0;\r\n-\t\t\t}\r\n-\t\t}\r\n-\t\tif (o2.getMergePosition() == null) {\r\n-\t\t\treturn -1;\r\n-\t\t}\r\n-\t\treturn o1.getMergePosition().compareTo(o2.getMergePosition());\r\n+\t\treturn nullSafeCompare.compare(o1.getMergePosition(), o2.getMergePosition());\r\n \t}\r\n \r\n+\t\r\n \t@Override\r\n \tpublic boolean equals(Object obj) {\r\n \t\tif (this == obj) {\r\n@@ -117,7 +113,16 @@ public boolean equals(Object obj) {\n \t\t\t}\r\n \t\t} else if (!getReceivesFrom().equals(other.getReceivesFrom())) {\r\n \t\t\treturn false;\r\n+\t\t}\t\t\r\n+\t\tif (getMergePosition() == null) {\r\n+\t\t\tif (other.getMergePosition() != null) {\r\n+\t\t\t\treturn false;\r\n+\t\t\t}\r\n+\t\t} else if (!getMergePosition().equals(other.getMergePosition())) {\r\n+\t\t\treturn false;\r\n \t\t}\r\n+\t\t\r\n+\t\t\r\n \t\treturn true;\r\n \t}\r\n \r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/DataLink.java",
                "sha": "31d3c2dc579288296cb4ffceefa8a88bb33e5c6c",
                "status": "modified"
            },
            {
                "additions": 146,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/Workflow.java",
                "changes": 181,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/Workflow.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 35,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/Workflow.java",
                "patch": "@@ -3,12 +3,15 @@\n import java.net.URI;\r\n import java.util.ArrayList;\r\n import java.util.Collection;\r\n+import java.util.Collections;\r\n+import java.util.GregorianCalendar;\r\n import java.util.Iterator;\r\n import java.util.List;\r\n import java.util.Set;\r\n import java.util.TreeSet;\r\n import java.util.UUID;\r\n \r\n+import uk.org.taverna.scufl2.api.annotation.Revision;\r\n import uk.org.taverna.scufl2.api.common.AbstractNamedChild;\r\n import uk.org.taverna.scufl2.api.common.Child;\r\n import uk.org.taverna.scufl2.api.common.NamedSet;\r\n@@ -20,14 +23,17 @@\n import uk.org.taverna.scufl2.api.port.OutputWorkflowPort;\r\n \r\n /**\r\n- * A <code>Workflow</code> is a set of {@link Processor}s and {@link DataLink}s between the\r\n- * <code>Processor</code>s. <code>Workflow</code>s may also have input and output ports.\r\n+ * A <code>Workflow</code> is a set of {@link Processor}s and {@link DataLink}s\r\n+ * between the <code>Processor</code>s. <code>Workflow</code>s may also have\r\n+ * input and output ports.\r\n  * \r\n  * @author Alan R Williams\r\n  */\r\n-public class Workflow extends AbstractNamedChild implements Child<WorkflowBundle>, Ported {\r\n+public class Workflow extends AbstractNamedChild implements\r\n+\t\tChild<WorkflowBundle>, Ported {\r\n \r\n-\tpublic static final URI WORKFLOW_ROOT = URI.create(\"http://ns.taverna.org.uk/2010/workflow/\");\r\n+\tpublic static final URI WORKFLOW_ROOT = URI\r\n+\t\t\t.create(\"http://ns.taverna.org.uk/2010/workflow/\");\r\n \r\n \tpublic static URI generateIdentifier() {\r\n \t\treturn WORKFLOW_ROOT.resolve(UUID.randomUUID().toString() + \"/\");\r\n@@ -40,15 +46,17 @@ public static URI generateIdentifier() {\n \tprivate final NamedSet<InputWorkflowPort> inputPorts = new NamedSet<InputWorkflowPort>();\r\n \tprivate final NamedSet<OutputWorkflowPort> outputPorts = new NamedSet<OutputWorkflowPort>();\r\n \tprivate final NamedSet<Processor> processors = new NamedSet<Processor>();\r\n-\tprivate URI workflowIdentifier;\r\n \tprivate WorkflowBundle parent;\r\n+\tprivate Revision currentRevision;\r\n+\r\n \r\n \t/**\r\n \t * Constructs a <code>Workflow</code> with a name based on a random UUID.\r\n \t */\r\n-\tpublic Workflow() {\r\n-\t\tsetWorkflowIdentifier(generateIdentifier());\r\n-\t\tString workflowId = WORKFLOW_ROOT.relativize(getWorkflowIdentifier()).toASCIIString();\r\n+\tpublic Workflow() {\t\r\n+\t\tnewRevision();\r\n+\t\tString workflowId = WORKFLOW_ROOT.relativize(getWorkflowIdentifier())\r\n+\t\t\t\t.toASCIIString();\r\n \t\tsetName(\"wf-\" + workflowId);\r\n \t}\r\n \r\n@@ -61,6 +69,7 @@ public boolean accept(Visitor visitor) {\n \t\t\tchildren.add(getProcessors());\r\n \t\t\tchildren.add(getDataLinks());\r\n \t\t\tchildren.add(getControlLinks());\r\n+\t\t\tchildren.add(Collections.singleton(getCurrentRevision()));\r\n \t\t\touter: for (Iterable<? extends WorkflowBean> it : children) {\r\n \t\t\t\tfor (WorkflowBean bean : it) {\r\n \t\t\t\t\tif (!bean.accept(visitor)) {\r\n@@ -82,6 +91,12 @@ public boolean accept(Visitor visitor) {\n \tpublic Set<ControlLink> getControlLinks() {\r\n \t\treturn controlLinks;\r\n \t}\r\n+\t\r\n+\r\n+\tpublic Revision getCurrentRevision() {\r\n+\t\treturn currentRevision;\r\n+\t}\r\n+\r\n \r\n \t/**\r\n \t * Returns the <code>DataLink</code>s.\r\n@@ -109,7 +124,8 @@ public boolean accept(Visitor visitor) {\n \t/**\r\n \t * Returns the <code>OutputWorkflowPort</code>s.\r\n \t * \r\n-\t * If there are no <code>OutputWorkflowPort</code>s an empty set is returned.\r\n+\t * If there are no <code>OutputWorkflowPort</code>s an empty set is\r\n+\t * returned.\r\n \t * \r\n \t * @return the <code>OutputWorkflowPort</code>s.\r\n \t */\r\n@@ -138,44 +154,65 @@ public WorkflowBundle getParent() {\n \t * Returns the workflow identifier.\r\n \t * <p>\r\n \t * The the default identifier is {@value #WORKFLOW_ROOT} plus a random UUID.\r\n+\t * \r\n \t * @see {@link #setWorkflowIdentifier(URI)}\r\n \t * \r\n \t * @return the workflow identifier\r\n \t */\r\n \tpublic URI getWorkflowIdentifier() {\r\n-\t\treturn workflowIdentifier;\r\n+\t\tif (getCurrentRevision() == null) {\r\n+\t\t\treturn null;\r\n+\t\t}\r\n+\t\treturn getCurrentRevision().getResourceURI();\r\n \t}\r\n \r\n \t/**\r\n-\t * Set the <code>ControlLink</code>s to be the contents of the specified set.\r\n+\t * Set the <code>ControlLink</code>s to be the contents of the specified\r\n+\t * set.\r\n \t * <p>\r\n-\t * <code>ControlLink</code>s can be added by using {@link #getControlLinks()}.add(controlLink).\r\n+\t * <code>ControlLink</code>s can be added by using\r\n+\t * {@link #getControlLinks()}.add(controlLink).\r\n \t * \r\n-\t * @param controlLinks the <code>ControlLink</code>s. <strong>Must not</strong> be null\r\n+\t * @param controlLinks\r\n+\t *            the <code>ControlLink</code>s. <strong>Must not</strong> be\r\n+\t *            null\r\n \t */\r\n \tpublic void setControlLinks(Set<ControlLink> controlLinks) {\r\n \t\tthis.controlLinks.clear();\r\n \t\tthis.controlLinks.addAll(controlLinks);\r\n \t}\r\n+\t\r\n+\tpublic void setCurrentRevision(Revision currentRevision) {\r\n+\t\tthis.currentRevision = currentRevision;\r\n+\t\tif (currentRevision == null) {\r\n+\t\t\tnewRevision();\t\t\r\n+\t\t}\r\n+\t}\r\n \r\n \t/**\r\n \t * Set the <code>DataLink</code>s to be the contents of the specified set.\r\n \t * <p>\r\n-\t * <code>DataLink</code>s can be added by using {@link #getDataLinks()}.add(dataLink).\r\n+\t * <code>DataLink</code>s can be added by using {@link #getDataLinks()}\r\n+\t * .add(dataLink).\r\n \t * \r\n-\t * @param dataLinks the <code>DataLink</code>s. <strong>Must not</strong> be null\r\n+\t * @param dataLinks\r\n+\t *            the <code>DataLink</code>s. <strong>Must not</strong> be null\r\n \t */\r\n \tpublic void setDataLinks(Set<DataLink> dataLinks) {\r\n \t\tdataLinks.clear();\r\n \t\tdataLinks.addAll(dataLinks);\r\n \t}\r\n \r\n \t/**\r\n-\t * Set the <code>InputWorkflowPort</code>s to be the contents of the specified set.\r\n+\t * Set the <code>InputWorkflowPort</code>s to be the contents of the\r\n+\t * specified set.\r\n \t * <p>\r\n-\t * <code>InputWorkflowPort</code>s can be added by using {@link #getInputWorkflowPorts()}.add(inputPort).\r\n+\t * <code>InputWorkflowPort</code>s can be added by using\r\n+\t * {@link #getInputWorkflowPorts()}.add(inputPort).\r\n \t * \r\n-\t * @param inputPorts the <code>InputWorkflowPort</code>s. <strong>Must not</strong> be null\r\n+\t * @param inputPorts\r\n+\t *            the <code>InputWorkflowPort</code>s. <strong>Must not</strong>\r\n+\t *            be null\r\n \t */\r\n \tpublic void setInputPorts(Set<InputWorkflowPort> inputPorts) {\r\n \t\tthis.inputPorts.clear();\r\n@@ -185,11 +222,15 @@ public void setInputPorts(Set<InputWorkflowPort> inputPorts) {\n \t}\r\n \r\n \t/**\r\n-\t * Set the <code>OutputWorkflowPort</code>s to be the contents of the specified set.\r\n+\t * Set the <code>OutputWorkflowPort</code>s to be the contents of the\r\n+\t * specified set.\r\n \t * <p>\r\n-\t * <code>OutputWorkflowPort</code>s can be added by using {@link #getOutputWorkflowPorts()}.add(outputPort).\r\n+\t * <code>OutputWorkflowPort</code>s can be added by using\r\n+\t * {@link #getOutputWorkflowPorts()}.add(outputPort).\r\n \t * \r\n-\t * @param outputPorts the <code>OutputWorkflowPort</code>s. <strong>Must not</strong> be null\r\n+\t * @param outputPorts\r\n+\t *            the <code>OutputWorkflowPort</code>s. <strong>Must\r\n+\t *            not</strong> be null\r\n \t */\r\n \tpublic void setOutputPorts(Set<OutputWorkflowPort> outputPorts) {\r\n \t\tthis.outputPorts.clear();\r\n@@ -213,9 +254,11 @@ public void setParent(WorkflowBundle parent) {\n \t/**\r\n \t * Set the <code>Processor</code>s to be the contents of the specified set.\r\n \t * <p>\r\n-\t * <code>Processor</code>s can be added by using {@link #getProcessors()}.add(processor).\r\n+\t * <code>Processor</code>s can be added by using {@link #getProcessors()}\r\n+\t * .add(processor).\r\n \t * \r\n-\t * @param processors the <code>Processor</code>s. <strong>Must not</strong> be null\r\n+\t * @param processors\r\n+\t *            the <code>Processor</code>s. <strong>Must not</strong> be null\r\n \t */\r\n \tpublic void setProcessors(Set<Processor> processors) {\r\n \t\tthis.processors.clear();\r\n@@ -225,32 +268,53 @@ public void setProcessors(Set<Processor> processors) {\n \t}\r\n \r\n \t/**\r\n-\t * Sets the workflow identifier.\r\n+\t * Set the workflow identifier.\r\n+\t * <p>\r\n+\t * This will delete any previous revisions in getRevision\r\n \t * \r\n-\t * @param workflowIdentifier the workflow identifier\r\n+\t * @param workflowIdentifier\r\n+\t *            the workflow identifier\r\n \t */\r\n \tpublic void setWorkflowIdentifier(URI workflowIdentifier) {\r\n-\t\tthis.workflowIdentifier = workflowIdentifier;\r\n+\t\tsetCurrentRevision(new Revision(workflowIdentifier));\r\n \t}\r\n \r\n \t@Override\r\n \tpublic String toString() {\r\n \t\tfinal int maxLen = 6;\r\n-\t\treturn \"Workflow [getName()=\" + getName() + \", getDatalinks()=\"\r\n-\t\t+ (getDataLinks() != null ? toString(getDataLinks(), maxLen) : null)\r\n-\t\t+ \", getInputPorts()=\"\r\n-\t\t+ (getInputPorts() != null ? toString(getInputPorts(), maxLen) : null)\r\n-\t\t+ \", getOutputPorts()=\"\r\n-\t\t+ (getOutputPorts() != null ? toString(getOutputPorts(), maxLen) : null)\r\n-\t\t+ \", getProcessors()=\"\r\n-\t\t+ (getProcessors() != null ? toString(getProcessors(), maxLen) : null) + \"]\";\r\n+\t\treturn \"Workflow [getName()=\"\r\n+\t\t\t\t+ getName()\r\n+\t\t\t\t+ \", getDatalinks()=\"\r\n+\t\t\t\t+ (getDataLinks() != null ? toString(getDataLinks(), maxLen)\r\n+\t\t\t\t\t\t: null)\r\n+\t\t\t\t+ \", getInputPorts()=\"\r\n+\t\t\t\t+ (getInputPorts() != null ? toString(getInputPorts(), maxLen)\r\n+\t\t\t\t\t\t: null)\r\n+\t\t\t\t+ \", getOutputPorts()=\"\r\n+\t\t\t\t+ (getOutputPorts() != null ? toString(getOutputPorts(), maxLen)\r\n+\t\t\t\t\t\t: null)\r\n+\t\t\t\t+ \", getProcessors()=\"\r\n+\t\t\t\t+ (getProcessors() != null ? toString(getProcessors(), maxLen)\r\n+\t\t\t\t\t\t: null) + \"]\";\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * Updates the workflow identifier.\r\n+\t * <p>\r\n+\t * The {@link #getCurrentRevision()} will be replaced using using\r\n+\t * {@link #newRevision()}.\r\n+\t * \r\n+\t */\r\n+\tpublic void updateWorkflowIdentifier() {\r\n+\t\tnewRevision();\r\n \t}\r\n \r\n \tprivate String toString(Collection<?> collection, int maxLen) {\r\n \t\tStringBuilder builder = new StringBuilder();\r\n \t\tbuilder.append(\"[\");\r\n \t\tint i = 0;\r\n-\t\tfor (Iterator<?> iterator = collection.iterator(); iterator.hasNext() && i < maxLen; i++) {\r\n+\t\tfor (Iterator<?> iterator = collection.iterator(); iterator.hasNext()\r\n+\t\t\t\t&& i < maxLen; i++) {\r\n \t\t\tif (i > 0) {\r\n \t\t\t\tbuilder.append(\", \");\r\n \t\t\t}\r\n@@ -260,4 +324,51 @@ private String toString(Collection<?> collection, int maxLen) {\n \t\treturn builder.toString();\r\n \t}\r\n \r\n+\t/**\r\n+\t * Make a new Revision to mark structural changes to this {@link Workflow}.\r\n+\t * <p>\r\n+\t * {@link #getWorkflowIdentifier()} will match the identifier of the new\r\n+\t * {@link #getCurrentRevision()}. The new revision will include the previous\r\n+\t * revision as {@link Revision#getPreviousRevision()} and\r\n+\t * {@link Revision#getCreated()} on the new revision will match the current\r\n+\t * {@link GregorianCalendar}.\r\n+\t * </p>\r\n+\t * \r\n+\t * @return The new {@link #getCurrentRevision()}, for setting any\r\n+\t *         further details.\r\n+\t */\r\n+\tpublic Revision newRevision() {\r\n+\t\treturn newRevision(null);\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * Make a new Revision to mark structural changes to this workflow\r\n+\t * with the given identifier.\r\n+\t * <p>\r\n+\t * {@link #getWorkflowIdentifier()} will match the new identifier. The new\r\n+\t * {@link #getCurrentRevision()} will include the previous revision as\r\n+\t * {@link Revision#getPreviousRevision()}.\r\n+\t * <p>\r\n+\t * Note, unlike the convenience method {@link #newRevision()} this method\r\n+\t * will not update {@link Revision#getCreated()}.\r\n+\t * </p>\r\n+\t * \r\n+\t * @param revisionIdentifier\r\n+\t *            The new workflow identifier\r\n+\t * @return The new {@link #getCurrentRevision()}, for setting any further\r\n+\t *         details.\r\n+\t */\r\n+\tpublic Revision newRevision(URI revisionIdentifier) {\r\n+\t\tGregorianCalendar created = null;\r\n+\t\tif (revisionIdentifier == null) {\r\n+\t\t\trevisionIdentifier = generateIdentifier();\r\n+\t\t\tcreated = new GregorianCalendar();\r\n+\t\t}\r\n+\t\tRevision newRevision = new Revision(revisionIdentifier,\r\n+\t\t\t\tgetCurrentRevision());\r\n+\t\tnewRevision.setCreated(created);\r\n+\t\tsetCurrentRevision(newRevision);\r\n+\t\treturn newRevision;\r\n+\t}\r\n+\r\n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/core/Workflow.java",
                "sha": "7839829bd737fe2a54d29e8315f9fe965e151b4b",
                "status": "modified"
            },
            {
                "additions": 36,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/impl/NullSafeComparator.java",
                "changes": 36,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/impl/NullSafeComparator.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/impl/NullSafeComparator.java",
                "patch": "@@ -0,0 +1,36 @@\n+package uk.org.taverna.scufl2.api.impl;\n+\n+import java.util.Comparator;\n+\n+/**\n+ * A Comparator that is null-safe\n+ * <p>\n+ * This comparator performs {@link Comparable#compareTo(Object)} if both objects\n+ * are non-null, and sorts <code>null</code> to be -1 (before the non-null), and compares two\n+ * <code>null</code>s as equal.\n+ * </p>\n+ * <p>\n+ * \n+ * \n+ * @author Stian Soiland-Reyes\n+ * \n+ * @param <T>\n+ */\n+public class NullSafeComparator<T extends Comparable<T>> implements\n+\t\tComparator<T> {\n+\n+\t@Override\n+\tpublic int compare(T a, T b) {\n+\t\tif (a == null && b == null) {\n+\t\t\treturn 0;\n+\t\t}\n+\t\tif (a == null && b != null) {\n+\t\t\treturn -1;\n+\t\t}\n+\t\tif (a != null && b == null) {\n+\t\t\treturn 1;\n+\t\t}\n+\t\treturn a.compareTo(b);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/impl/NullSafeComparator.java",
                "sha": "b47375207f6c90a4b630fbdcaea2046b44b08c72",
                "status": "added"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/WorkflowBundleIO.java",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/WorkflowBundleIO.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/WorkflowBundleIO.java",
                "patch": "@@ -3,7 +3,6 @@\n import java.io.BufferedInputStream;\n import java.io.File;\n import java.io.FileInputStream;\n-import java.io.FileReader;\n import java.io.IOException;\n import java.io.InputStream;\n import java.io.OutputStream;",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/WorkflowBundleIO.java",
                "sha": "80569af38de893758d9782d0f3dddc5b13e227b4",
                "status": "modified"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/structure/StructureReader.java",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/structure/StructureReader.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/structure/StructureReader.java",
                "patch": "@@ -5,7 +5,6 @@\n import java.io.FileInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n-import java.io.UnsupportedEncodingException;\n import java.net.URI;\n import java.nio.charset.Charset;\n import java.util.Collections;",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/structure/StructureReader.java",
                "sha": "495bd37e19e632c42d8663fde7896c0df39bc1b0",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/structure/StructureWriter.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/structure/StructureWriter.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 2,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/structure/StructureWriter.java",
                "patch": "@@ -210,9 +210,9 @@ protected String bundleString(WorkflowBundle wb) {\n \t\t\t\tappend(config);\n \n \t\t\t\tnewLine(3);\n-\t\t\t\tif (config.getConfigurableType() != null) {\n+\t\t\t\tif (config.getType() != null) {\n \t\t\t\t\tappend(\"Type\");\n-\t\t\t\t\tappend(config.getConfigurableType());\n+\t\t\t\t\tappend(config.getType());\n \t\t\t\t}\n \t\t\t\tnewLine(3);\n \t\t\t\tappend(\"Configures\");",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/io/structure/StructureWriter.java",
                "sha": "665eecb6c617666160fa2c4f6783d67541ad820f",
                "status": "modified"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/port/ReceiverPort.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/port/ReceiverPort.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/port/ReceiverPort.java",
                "patch": "@@ -1,9 +1,15 @@\n package uk.org.taverna.scufl2.api.port;\r\n \r\n+import uk.org.taverna.scufl2.api.core.DataLink;\r\n+import uk.org.taverna.scufl2.api.core.Workflow;\r\n+\r\n /**\r\n- * A <code>Port</code> that receives data.\r\n+ * A <code>Port</code> that receives data from a {@link DataLink} in a {@link Workflow}.\r\n  * \r\n+ * @see SenderPort\r\n+ * @see DataLink\r\n  * @author Alan R Williams\r\n+ * @author Stian Soiland-Reyes\r\n  */\r\n public interface ReceiverPort extends Port {\r\n \r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/port/ReceiverPort.java",
                "sha": "c85035bd53f67f50bd1562dd355ef4c21507d2b0",
                "status": "modified"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/port/SenderPort.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/port/SenderPort.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/port/SenderPort.java",
                "patch": "@@ -1,9 +1,15 @@\n package uk.org.taverna.scufl2.api.port;\r\n \r\n+import uk.org.taverna.scufl2.api.core.DataLink;\r\n+import uk.org.taverna.scufl2.api.core.Workflow;\r\n+\r\n /**\r\n- * A <code>Port</code> that sends data out.\r\n+ * A <code>Port</code> that sends data out to a {@link DataLink} in a {@link Workflow}.\r\n  * \r\n+ * @see DataLink\r\n+ * @see Workflow\r\n  * @author Alan R Williams\r\n+ * @author Stian Soiland-Reyes\r\n  */\r\n public interface SenderPort extends Port {\r\n \r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/port/SenderPort.java",
                "sha": "345236ef469cbc208139eca50ffb9a08e9f54b67",
                "status": "modified"
            },
            {
                "additions": 10,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/property/PropertyResource.java",
                "changes": 10,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/property/PropertyResource.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/property/PropertyResource.java",
                "patch": "@@ -274,6 +274,14 @@ public void addPropertyAsString(URI predicate, String value) {\n \tpublic void addPropertyReference(URI predicate, URI resourceURI) {\n \t\taddProperty(predicate, new PropertyReference(resourceURI));\n \t}\n+\t\n+\tpublic void clearAllProperties() {\n+\t\tgetProperties().clear();\n+\t}\n+\t\n+\tpublic void clearProperties(URI predicate) {\n+\t\tgetProperties().remove(predicate);\t\t\n+\t}\n \n \tpublic final Map<URI, SortedSet<PropertyObject>> getProperties() {\n \t\treturn properties;\n@@ -441,5 +449,7 @@ public boolean hasProperty(URI predicate) {\n \n \t\n \n+\t\n+\n \n }",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/property/PropertyResource.java",
                "sha": "75bb362625aea8b69064c1a185f3246056ddcd28",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/ExampleWorkflow.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/ExampleWorkflow.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/ExampleWorkflow.java",
                "patch": "@@ -206,7 +206,7 @@ public Profile makeSecondaryProfile() {\n \t\tProfile profile = makeMainProfile();\n \t\tprofile.setName(\"tavernaServer\");\n \t\tConfiguration config = profile.getConfigurations().getByName(\"Hello\");\n-\t\tconfig.getPropertyResource().getProperties().clear();\n+\t\tconfig.getPropertyResource().clearAllProperties();\n \t\t// FIXME: Need removeProperty!\n \t\tconfig.getPropertyResource()\n \t\t\t\t.addPropertyAsString(",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/ExampleWorkflow.java",
                "sha": "bacb9ce29bf073317c9169e563f5e58f9c483c64",
                "status": "modified"
            },
            {
                "additions": 24,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/annotation/TestAnnotations.java",
                "changes": 24,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/annotation/TestAnnotations.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/annotation/TestAnnotations.java",
                "patch": "@@ -0,0 +1,24 @@\n+package uk.org.taverna.scufl2.api.annotation;\r\n+\r\n+import static org.junit.Assert.*;\r\n+\r\n+import java.util.Map;\r\n+\r\n+import org.junit.Test;\r\n+\r\n+import uk.org.taverna.scufl2.api.container.WorkflowBundle;\r\n+import uk.org.taverna.scufl2.api.property.PropertyResource;\r\n+import uk.org.taverna.scufl2.ucfpackage.UCFPackage;\r\n+import uk.org.taverna.scufl2.ucfpackage.UCFPackage.ResourceEntry;\r\n+\r\n+public class TestAnnotations {\r\n+\t\r\n+\t\r\n+\tpublic void addAnnotation() {\r\n+\t\tWorkflowBundle wfBundle = new WorkflowBundle();\r\n+\t\tAnnotation ann = new Annotation();\r\n+\t\twfBundle.getAnnotations().add(ann);\r\n+\t\t\r\n+\t}\r\n+\t\r\n+}\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/annotation/TestAnnotations.java",
                "sha": "afd5ccfc391bb0bbeff84b723784a8e148a5717e",
                "status": "added"
            },
            {
                "additions": 209,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/annotation/TestRevision.java",
                "changes": 209,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/annotation/TestRevision.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/annotation/TestRevision.java",
                "patch": "@@ -0,0 +1,209 @@\n+package uk.org.taverna.scufl2.api.annotation;\r\n+\r\n+import static org.junit.Assert.*;\r\n+import static org.junit.Assert.assertEquals;\r\n+import static org.junit.Assert.assertNull;\r\n+import static org.junit.Assert.assertTrue;\r\n+\r\n+import java.net.URI;\r\n+import java.util.Arrays;\r\n+import java.util.Collections;\r\n+import java.util.GregorianCalendar;\r\n+import java.util.HashSet;\r\n+\r\n+import org.junit.Test;\r\n+\r\n+import uk.org.taverna.scufl2.api.property.PropertyReference;\r\n+import uk.org.taverna.scufl2.api.property.PropertyResource;\r\n+\r\n+public class TestRevision {\r\n+\r\n+\tURI example = URI.create(\"http://example.com/\");\r\n+\tURI r0 = example.resolve(\"r0\");\r\n+\tURI r1 = example.resolve(\"r1\");\r\n+\tURI r2 = example.resolve(\"r2\");\r\n+\r\n+\t@Test\r\n+\tpublic void constructorDefault() throws Exception {\r\n+\t\tRevision rev = new Revision();\r\n+\t\tassertTrue(rev.getProperties().isEmpty());\r\n+\t\tassertNull(rev.getResourceURI());\r\n+\t\tassertEquals(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#Entity\"), rev.getTypeURI());\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void constructorUri() throws Exception {\r\n+\t\tRevision rev = new Revision(r1);\r\n+\t\tassertTrue(rev.getProperties().isEmpty());\r\n+\t\tassertEquals(r1, rev.getResourceURI());\r\n+\t\tassertEquals(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#Entity\"), rev.getTypeURI());\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void constructorUriPrevious() throws Exception {\r\n+\t\tRevision rev1 = new Revision(r1);\r\n+\t\tRevision rev2 = new Revision(r2, rev1);\r\n+\t\tassertEquals(1, rev2.getProperties().size());\r\n+\t\tassertEquals(rev1, rev2.getPreviousRevision());\r\n+\t\tassertEquals(rev1, rev2.getProperty(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasRevisionOf\")));\r\n+\t\tassertEquals(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#Entity\"), rev2.getTypeURI());\r\n+\r\n+\t}\r\n+\t\r\n+\t@Test\r\n+\tpublic void getPreviousFromReference() throws Exception {\r\n+\t\tRevision rev2 = new Revision(r2);\t\t\r\n+\t\trev2.setPreviousRevision(r1);\t\t\r\n+\t\tPropertyReference rev1Prop = rev2.getPropertyAsReference(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasRevisionOf\"));\r\n+\t\tassertEquals(r1, rev1Prop.getResourceURI());\r\n+\t\tassertFalse(rev1Prop instanceof PropertyResource);\r\n+\t\tRevision rev1 = rev2.getPreviousRevision();\t\t\r\n+\t\tassertEquals(r1, rev1.getResourceURI());\r\n+\t\tassertEquals(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#Entity\"), rev1.getTypeURI());\r\n+\t\t\r\n+\t\t// Should have replaced it\r\n+\t\trev1Prop = rev2.getPropertyAsReference(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasRevisionOf\"));\r\n+\t\tassertEquals(r1, rev1Prop.getResourceURI());\r\n+\t\tassertTrue(rev1Prop instanceof PropertyResource);\r\n+\t\t\r\n+\t}\r\n+\t\r\n+\t@Test\r\n+\tpublic void getPreviousFromResource() throws Exception {\r\n+\t\tRevision rev2 = new Revision(r2);\t\t\r\n+\t\tPropertyResource custom = rev2.addPropertyAsNewResource(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasRevisionOf\"), example.resolve(\"custom\"));\r\n+\t\tcustom.setResourceURI(r1);\r\n+\t\tcustom.addPropertyAsString(URI.create(\"http://purl.org/dc/terms/description\"), \"Custom revision\");\r\n+\t\tRevision rev1 = rev2.getPreviousRevision();\r\n+\t\tassertEquals(r1, rev1.getResourceURI());\r\n+\t\tassertEquals(example.resolve(\"custom\"), rev1.getTypeURI());\r\n+\t\tassertEquals(\"Custom revision\", rev1.getPropertyAsString(URI.create(\"http://purl.org/dc/terms/description\")));\r\n+\t}\r\n+\t\r\n+\t\r\n+\r\n+\t@Test\r\n+\tpublic void setPrevious() throws Exception {\r\n+\t\tRevision rev1 = new Revision(r1);\r\n+\t\tRevision rev2 = new Revision(r2);\r\n+\t\trev2.setPreviousRevision(rev1);\r\n+\t\tassertEquals(1, rev2.getProperties().size());\r\n+\t\tassertEquals(rev1, rev2.getPreviousRevision());\r\n+\t\tassertEquals(rev1, rev2.getProperty(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasRevisionOf\")));\r\n+\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void setPreviousAgain() throws Exception {\r\n+\t\tRevision rev0 = new Revision(r0);\r\n+\t\tRevision rev1 = new Revision(r1);\r\n+\t\tRevision rev2 = new Revision(r2, rev1);\r\n+\t\trev2.setPreviousRevision(rev0);\r\n+\t\tassertEquals(1, rev2.getProperties().size());\r\n+\t\tassertEquals(rev0, rev2.getPreviousRevision());\r\n+\t\tassertEquals(rev0, rev2.getProperty(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasRevisionOf\")));\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void created() throws Exception {\r\n+\t\tRevision rev1 = new Revision(r1);\r\n+\t\tGregorianCalendar now = new GregorianCalendar();\r\n+\t\trev1.setCreated(now);\r\n+\t\t\r\n+\t\tassertEquals(now.getTime(), rev1.getCreated().getTime());\r\n+\t\tassertEquals(1, rev1.getProperties().size());\r\n+\t\tPropertyResource generation = rev1.getPropertyAsResource(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#qualifiedGeneration\"));\r\n+\t\tassertEquals(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#Generation\"), generation.getTypeURI());\r\n+\t\t//assertNull(generation.getResourceURI());\r\n+\t\tassertEquals(1, generation.getProperties().size());\r\n+\t\tassertEquals(now.getTime(), generation.getPropertyAsLiteral(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#atTime\")).getLiteralValueAsCalendar().getTime());\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void createdAgain() throws Exception {\r\n+\t\tRevision rev1 = new Revision(r1);\r\n+\t\tGregorianCalendar first = new GregorianCalendar();\r\n+\t\t\r\n+\t\trev1.setCreated(first);\r\n+\t\tPropertyResource generation = rev1.getPropertyAsResource(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#qualifiedGeneration\"));\r\n+\r\n+\t\tGregorianCalendar again = new GregorianCalendar();\r\n+\t\trev1.setCreated(again);\t\t\r\n+\t\tassertEquals(1, generation.getProperties().size());\r\n+\t\t\r\n+\t\t// Should have kept the generation\r\n+\t\tassertEquals(generation, rev1.getPropertyAsResource(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#qualifiedGeneration\")));\r\n+\t\t// But replaced the literal\t\t\r\n+\t\tassertEquals(again.getTime(), generation.getPropertyAsLiteral(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#atTime\")).getLiteralValueAsCalendar().getTime());\r\n+\t}\r\n+\r\n+\t\r\n+\t\r\n+\t@Test\r\n+\tpublic void addCreator() throws Exception {\r\n+\t\tRevision rev1 = new Revision(r1);\r\n+\t\tURI alice = example.resolve(\"alice\");\r\n+\t\trev1.addCreator(alice);\r\n+\t\tassertEquals(Collections.singleton(alice), rev1.getCreators());\r\n+\t\tassertEquals(1, rev1.getProperties().size());\r\n+\t\tassertEquals(alice, rev1.getPropertyAsResourceURI(URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasAttributedTo\")));\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void multipleAddCreator() throws Exception {\r\n+\t\tRevision rev1 = new Revision(r1);\r\n+\t\tURI alice = example.resolve(\"alice\");\r\n+\t\tURI bob = example.resolve(\"bob\");\r\n+\t\trev1.addCreator(alice);\r\n+\t\trev1.addCreator(bob);\r\n+\t\tHashSet<URI> aliceAndBob = new HashSet<URI>(Arrays.asList(alice, bob));\r\n+\t\tassertEquals(aliceAndBob, rev1.getCreators());\r\n+\t\tassertEquals(1, rev1.getProperties().size());\r\n+\t\tassertEquals(aliceAndBob, rev1.getPropertiesAsResourceURIs((URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasAttributedTo\"))));\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void setCreators() throws Exception {\r\n+\t\tRevision rev1 = new Revision(r1);\r\n+\t\tURI alice = example.resolve(\"alice\");\r\n+\t\tURI bob = example.resolve(\"bob\");\r\n+\t\tHashSet<URI> aliceAndBob = new HashSet<URI>(Arrays.asList(alice, bob));\r\n+\t\trev1.setCreators(aliceAndBob);\r\n+\t\tassertEquals(aliceAndBob, rev1.getCreators());\t\t\r\n+\t\tassertEquals(aliceAndBob, rev1.getPropertiesAsResourceURIs((URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasAttributedTo\"))));\r\n+\t}\r\n+\r\n+\t@Test\r\n+\tpublic void resetCreators() throws Exception {\r\n+\t\tRevision rev1 = new Revision(r1);\r\n+\t\tURI alice = example.resolve(\"alice\");\r\n+\t\trev1.addCreator(alice);\r\n+\r\n+\t\tURI bob = example.resolve(\"bob\");\r\n+\t\tHashSet<URI> justBob = new HashSet<URI>(Arrays.asList(bob));\r\n+\t\trev1.setCreators(justBob);\r\n+\t\tassertEquals(justBob, rev1.getCreators());\t\t\r\n+\t\tassertEquals(bob, rev1.getPropertyAsResourceURI((URI\r\n+\t\t\t\t.create(\"http://www.w3.org/ns/prov#wasAttributedTo\"))));\r\n+\t}\r\n+\r\n+}\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/annotation/TestRevision.java",
                "sha": "c0548b66a36c0b584cc005fa11f6421fbd17b4af",
                "status": "added"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/common/TestScufl2Tools.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/common/TestScufl2Tools.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/common/TestScufl2Tools.java",
                "patch": "@@ -1,8 +1,8 @@\n package uk.org.taverna.scufl2.api.common;\n \n-import static org.junit.Assert.*;\n import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n import static org.junit.Assert.assertSame;\n import static org.junit.Assert.assertTrue;\n ",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/common/TestScufl2Tools.java",
                "sha": "7e94f19f40a47fad72b5850b7e70eca8ee6a044c",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/common/TestURIToolsBeans.java",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/common/TestURIToolsBeans.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/common/TestURIToolsBeans.java",
                "patch": "@@ -328,6 +328,7 @@ public boolean visit() {\n \t\t\t\t\t\t+ \"    datalink?from=in/yourName&to=processor/Hello/in/name\\n\"\n \t\t\t\t\t\t+ \"    datalink?from=in/yourName&to=out/results&mergePosition=1\\n\"\n \t\t\t\t\t\t+ \"    control?block=processor/Hello/&untilFinished=processor/wait4me/\\n\"\n+\t\t\t\t\t    + \"    ../../../../workflow/00626652-55ae-4a9e-80d4-c8e9ac84e2ca/\\n\"\n \t\t\t\t\t\t+ \"  profile/tavernaServer/\\n\"\n \t\t\t\t\t\t+ \"    activity/HelloScript/\\n\"\n \t\t\t\t\t\t+ \"      in/personName\\n\"",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/common/TestURIToolsBeans.java",
                "sha": "f3c9e9d0ac0839d89902714cef568aeffc2fd82c",
                "status": "modified"
            },
            {
                "additions": 61,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/container/TestWorkflowBundleEquals.java",
                "changes": 61,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/container/TestWorkflowBundleEquals.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/container/TestWorkflowBundleEquals.java",
                "patch": "@@ -0,0 +1,61 @@\n+package uk.org.taverna.scufl2.api.container;\r\n+\r\n+import static org.junit.Assert.*;\r\n+\r\n+import java.net.URI;\r\n+\r\n+import org.junit.Test;\r\n+\r\n+import uk.org.taverna.scufl2.api.core.Workflow;\r\n+\r\n+public class TestWorkflowBundleEquals {\r\n+\t\r\n+\t@Test\r\n+\tpublic void notEquals() throws Exception {\r\n+\t\tWorkflowBundle wb1 = new WorkflowBundle();\r\n+\t\t\r\n+\t\tWorkflowBundle wb2 = new WorkflowBundle();\r\n+\t\t// Make them look \"equal\"\r\n+\t\twb1.setName(\"bob\");\r\n+\t\twb2.setName(\"bob\");\r\n+\t\twb1.setGlobalBaseURI(URI.create(\"http://example.com/bob\"));\r\n+\t\twb2.setGlobalBaseURI(URI.create(\"http://example.com/bob\"));\t\t\r\n+\t\tassertFalse(wb1.equals(wb2));\r\n+\t}\r\n+\t\r\n+\t@Test\r\n+\tpublic void equals() throws Exception {\r\n+\t\tWorkflowBundle wb1 = new WorkflowBundle();\t\r\n+\t\tassertTrue(wb1.equals(wb1));\t\t\r\n+\t}\r\n+\t\r\n+\t@Test \r\n+\tpublic void workflowsNotEqualsUnlessOrphans() {\r\n+\t\tWorkflow wf1 = new Workflow();\r\n+\t\tWorkflow wf2 = new Workflow();\r\n+\t\twf1.setName(\"fred\");\r\n+\t\twf2.setName(\"fred\");\r\n+\t\t// No parents, so they are equal\r\n+\t\tassertEquals(wf1, wf2);\r\n+\t\t\r\n+\t\t\r\n+\t\tWorkflowBundle wb1 = new WorkflowBundle();\r\n+\t\t\r\n+\t\tWorkflowBundle wb2 = new WorkflowBundle();\r\n+\t\t// Make them look \"equal\"\r\n+\t\twb2.setName(wb1.getName());\r\n+\t\twb2.setGlobalBaseURI(wb1.getGlobalBaseURI());\r\n+\t\tassertFalse(wb1.equals(wb2));\r\n+\t\t\r\n+\t\twf1.setParent(wb1);\r\n+\t\twf2.setParent(wb2);\t\t\r\n+\t\tassertFalse(wf1.equals(wf2));\r\n+\t\t\r\n+\t\twf1.setParent(null);\r\n+\t\tassertFalse(wf1.equals(wf2));\r\n+\t\tassertFalse(wf2.equals(wf1));\r\n+\t\twf2.setParent(null);\r\n+\t\tassertTrue(wf1.equals(wf2));\t\r\n+\t}\r\n+\t\r\n+}\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/container/TestWorkflowBundleEquals.java",
                "sha": "5526647000115685af60f3a5828b471788c825a1",
                "status": "added"
            },
            {
                "additions": 84,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/core/ControlLinkCompareTest.java",
                "changes": 84,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/core/ControlLinkCompareTest.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/core/ControlLinkCompareTest.java",
                "patch": "@@ -0,0 +1,84 @@\n+package uk.org.taverna.scufl2.api.core;\n+\n+import static org.junit.Assert.*;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import org.junit.Test;\n+\n+import uk.org.taverna.scufl2.api.port.InputWorkflowPort;\n+import uk.org.taverna.scufl2.api.port.OutputWorkflowPort;\n+\n+public class ControlLinkCompareTest {\n+\t@SuppressWarnings(\"unchecked\")\n+\t@Test\n+\tpublic void expectedOrder() throws Exception {\n+\n+\t\tWorkflow wf = new Workflow();\t\t\n+\t\twf.setName(\"wf\");\n+\t\t\n+\t\tProcessor a = new Processor(wf, \"a\");\n+\t\tProcessor b = new Processor(wf, \"b\");\n+\t\tProcessor c = new Processor(wf, \"c\");\n+\t\tProcessor d = new Processor(wf, \"d\");\n+\n+\t\tBlockingControlLink b_blocks_c = new BlockingControlLink(c, b);\n+\t\tBlockingControlLink a_blocks_c = new BlockingControlLink(c, a);\n+\t\tBlockingControlLink a_blocks_b = new BlockingControlLink(b, a);\n+\t\tBlockingControlLink b_blocks_d = new BlockingControlLink(d, b);\n+\t\tBlockingControlLink a_blocks_d = new BlockingControlLink(d, a);\n+\t\t\n+\t\tArrayList<ControlLink> links = new ArrayList<ControlLink>(wf.getControlLinks());\n+\t\tassertEquals(Arrays.asList(a_blocks_b, a_blocks_c, a_blocks_d, b_blocks_c, b_blocks_d), links);\n+\t\tCollections.shuffle(links);\n+\t\tCollections.sort(links);\n+\t\tassertEquals(Arrays.asList(a_blocks_b, a_blocks_c, a_blocks_d, b_blocks_c, b_blocks_d), links);\n+\t}\n+\n+\t@SuppressWarnings(\"unchecked\")\n+\t@Test\n+\tpublic void nullSupport() throws Exception {\n+\t\tWorkflow wf = new Workflow();\t\t\n+\t\twf.setName(\"wf\");\n+\t\t\n+\t\t\n+\t\t\n+\t\tProcessor a = new Processor(wf, \"a\");\n+\t\tProcessor b = new Processor(wf, \"b\");\n+\t\tProcessor c = new Processor(wf, \"c\");\n+\t\tProcessor d = new Processor(wf, \"d\");\n+\n+\t\tBlockingControlLink b_blocks_c = new BlockingControlLink(c, b);\n+\t\tBlockingControlLink null_blocks_c = new BlockingControlLink();\n+\t\tnull_blocks_c.setBlock(c);\n+\t\tnull_blocks_c.setParent(wf);\n+\t\tBlockingControlLink a_blocks_b = new BlockingControlLink(b, a);\n+\t\tBlockingControlLink b_blocks_null = new BlockingControlLink();\n+\t\tb_blocks_null.setUntilFinished(b);\n+\t\tb_blocks_null.setParent(wf);\n+\t\t\n+\t\tBlockingControlLink null_blocks_null = new BlockingControlLink();\t\t\n+\t\tnull_blocks_null.setParent(wf);\n+\t\t\n+\t\t\n+\t\tArrayList<ControlLink> links = new ArrayList<ControlLink>(wf.getControlLinks());\n+\t\tassertEquals(Arrays.asList(null_blocks_null, null_blocks_c, a_blocks_b, b_blocks_null, b_blocks_c), links);\t\t\t\t\n+\n+\t\tCollections.shuffle(links);\t\t\n+\t\tCollections.sort(links);\n+\t\t\n+\t\tBlockingControlLink a_blocks_d_no_parent = new BlockingControlLink();\n+\t\ta_blocks_d_no_parent.setBlock(d);\n+\t\ta_blocks_d_no_parent.setUntilFinished(a);\n+\t\t// no setParent\n+\t\tlinks.add(a_blocks_d_no_parent);\n+\t\tCollections.shuffle(links);\t\t\n+\t\tCollections.sort(links);\n+\t\t\n+\t\tassertEquals(Arrays.asList(null_blocks_null, null_blocks_c, a_blocks_b, a_blocks_d_no_parent, b_blocks_null, b_blocks_c), links);\t\t\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/core/ControlLinkCompareTest.java",
                "sha": "0965f18055314125d3e4491d31bc5205dc53baf1",
                "status": "added"
            },
            {
                "additions": 83,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/core/DataLinkCompareTest.java",
                "changes": 83,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/core/DataLinkCompareTest.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/core/DataLinkCompareTest.java",
                "patch": "@@ -0,0 +1,83 @@\n+package uk.org.taverna.scufl2.api.core;\n+\n+import static org.junit.Assert.*;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import org.junit.Test;\n+\n+import uk.org.taverna.scufl2.api.port.InputWorkflowPort;\n+import uk.org.taverna.scufl2.api.port.OutputWorkflowPort;\n+\n+public class DataLinkCompareTest {\n+\t@SuppressWarnings(\"unchecked\")\n+\t@Test\n+\tpublic void expectedOrder() throws Exception {\n+\n+\t\tWorkflow wf = new Workflow();\n+\t\twf.setName(\"wf\");\n+\t\tInputWorkflowPort a = new InputWorkflowPort(wf, \"a\");\n+\t\tInputWorkflowPort b = new InputWorkflowPort(wf, \"b\");\n+\t\tInputWorkflowPort c = new InputWorkflowPort(wf, \"c\");\n+\n+\t\tOutputWorkflowPort x = new OutputWorkflowPort(wf, \"x\");\n+\t\tOutputWorkflowPort y = new OutputWorkflowPort(wf, \"y\");\n+\t\tOutputWorkflowPort z = new OutputWorkflowPort(wf, \"z\");\n+\n+\t\tDataLink c_x = new DataLink(wf, c, x);\n+\t\tDataLink b_x = new DataLink(wf, b, x);\n+\t\tDataLink b_z = new DataLink(wf, b, z);\n+\t\tDataLink a_z = new DataLink(wf, a, z);\n+\t\tDataLink a_x = new DataLink(wf, a, x);\n+\n+\t\tArrayList<DataLink> links = new ArrayList<DataLink>(wf.getDataLinks());\n+\t\tassertEquals(Arrays.asList(a_x, a_z, b_x, b_z, c_x), links);\n+\t\tCollections.shuffle(links);\n+\t\tCollections.sort(links);\n+\t\tassertEquals(Arrays.asList(a_x, a_z, b_x, b_z, c_x), links);\n+\t}\n+\n+\t@SuppressWarnings(\"unchecked\")\n+\t@Test\n+\tpublic void nullSupport() throws Exception {\n+\n+\t\tWorkflow wf = new Workflow();\n+\t\twf.setName(\"wf\");\n+\t\tInputWorkflowPort a = new InputWorkflowPort(wf, \"a\");\n+\t\tInputWorkflowPort b = new InputWorkflowPort(wf, \"b\");\n+\t\tInputWorkflowPort c = new InputWorkflowPort(wf, \"c\");\n+\n+\t\tOutputWorkflowPort x = new OutputWorkflowPort(wf, \"x\");\n+\t\tOutputWorkflowPort y = new OutputWorkflowPort(wf, \"y\");\n+\t\tOutputWorkflowPort z = new OutputWorkflowPort(wf, \"z\");\n+\n+\t\tDataLink null_null = new DataLink();\n+\t\tnull_null.setParent(wf);\n+\t\t// neither receivesFrom nor sendsTo\n+\n+\t\tDataLink null_z = new DataLink();\n+\t\t// no receivesFrom\n+\t\tnull_z.setSendsTo(z);\n+\t\tnull_z.setParent(wf);\n+\t\tDataLink a_z = new DataLink(wf, a, z);\n+\t\tDataLink a_null = new DataLink();\n+\t\t// no sendsTo\n+\t\ta_null.setReceivesFrom(a);\n+\t\ta_null.setParent(wf);\n+\n+\t\tArrayList<DataLink> links = new ArrayList<DataLink>(wf.getDataLinks());\n+\t\tassertEquals(Arrays.asList(null_null, null_z, a_null, a_z), links);\n+\n+\t\tDataLink allNull = new DataLink();\n+\t\tlinks.add(allNull);\n+\n+\t\tCollections.shuffle(links);\n+\t\tCollections.sort(links);\n+\t\tassertEquals(Arrays.asList(allNull, null_null, null_z, a_null, a_z),\n+\t\t\t\tlinks);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/core/DataLinkCompareTest.java",
                "sha": "73e0c6a8cf5e4bb06c1b5d2effe0eea346d70d5a",
                "status": "added"
            },
            {
                "additions": 18,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/impl/TestNullCompare.java",
                "changes": 18,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/impl/TestNullCompare.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/impl/TestNullCompare.java",
                "patch": "@@ -0,0 +1,18 @@\n+package uk.org.taverna.scufl2.api.impl;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import org.junit.Test;\n+\n+public class TestNullCompare {\n+\t@Test\n+\tpublic void testNullCompare() throws Exception {\n+\t\tList<String> values = Arrays.asList(\"c\", null, \"b\", null, \"a\", \"c\");\n+\t\tCollections.sort(values, new NullSafeComparator<String>());\n+\t\tassertEquals(Arrays.asList(null, null, \"a\", \"b\", \"c\", \"c\"), values);\n+\t}\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/impl/TestNullCompare.java",
                "sha": "2ebf5aafcfb410d19a9be3ae1df0d9e61ea44c0f",
                "status": "added"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/io/TestWorkflowBundleIO.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/io/TestWorkflowBundleIO.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-api/src/test/java/uk/org/taverna/scufl2/api/io/TestWorkflowBundleIO.java",
                "patch": "@@ -1,10 +1,11 @@\n package uk.org.taverna.scufl2.api.io;\n \n import static org.junit.Assert.assertEquals;\n-import static org.junit.Assert.*;\n+import static org.junit.Assert.assertNotNull;\n import static org.junit.Assert.assertNull;\n import static org.junit.Assert.assertSame;\n import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n import static uk.org.taverna.scufl2.api.io.structure.StructureReader.TEXT_VND_TAVERNA_SCUFL2_STRUCTURE;\n \n import java.io.ByteArrayInputStream;",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-api/src/test/java/uk/org/taverna/scufl2/api/io/TestWorkflowBundleIO.java",
                "sha": "ee7c7e4fcada9c90754594c1bf59e0e17b663ea3",
                "status": "modified"
            },
            {
                "additions": 56,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/pom.xml",
                "changes": 56,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-integration-tests/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-integration-tests/pom.xml",
                "patch": "@@ -0,0 +1,56 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n+\t<modelVersion>4.0.0</modelVersion>\r\n+\t<parent>\r\n+\t\t<artifactId>scufl2</artifactId>\r\n+\t\t<groupId>uk.org.taverna.scufl2</groupId>\r\n+\t\t<version>0.11.0-SNAPSHOT</version>\r\n+\t\t<relativePath>..</relativePath>\r\n+\t</parent>\r\n+\t<artifactId>scufl2-integration-tests</artifactId>\r\n+\t<name>Taverna Scufl 2 Integration tests</name>\r\n+\t<description>Integration tests depending on multiple modules</description>\r\n+\t<build>\r\n+\t\t<plugins>\r\n+\t\t\t<plugin>\r\n+\t\t\t\t<artifactId>maven-failsafe-plugin</artifactId>\r\n+\t\t\t\t<version>2.12</version>\r\n+\t\t\t\t<executions>\r\n+\t\t\t\t\t<execution>\r\n+\t\t\t\t\t\t<goals>\r\n+\t\t\t\t\t\t\t<goal>integration-test</goal>\r\n+\t\t\t\t\t\t\t<goal>verify</goal>\r\n+\t\t\t\t\t\t</goals>\r\n+\t\t\t\t\t</execution>\r\n+\t\t\t\t</executions>\r\n+\t\t\t</plugin>\r\n+\t\t</plugins>\r\n+\t</build>\r\n+\t<dependencies>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-rdfxml</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-t2flow</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-scufl</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>commons-io</groupId>\r\n+\t\t\t<artifactId>commons-io</artifactId>\r\n+\t\t\t<type>jar</type>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t</dependencies>\r\n+\r\n+</project>\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/pom.xml",
                "sha": "5d4e819def8ef3907d3f3ff8aae58d87dd93651c",
                "status": "added"
            },
            {
                "additions": 34,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/EmptyStackIT.java",
                "changes": 34,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/EmptyStackIT.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/EmptyStackIT.java",
                "patch": "@@ -0,0 +1,34 @@\n+package uk.org.taverna.scufl2.translator.t2flow;\n+\n+import static org.junit.Assert.assertNotNull;\n+\n+import java.io.File;\n+import java.net.URL;\n+\n+import org.junit.Test;\n+\n+import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n+import uk.org.taverna.scufl2.api.io.WorkflowBundleIO;\n+\n+public class EmptyStackIT {\n+\n+\t/* From http://dev.mygrid.org.uk/issues/browse/SCUFL2-121 */\n+\n+\tprivate static final String WF_REST = \"/rest.t2flow\";\n+\tprivate static WorkflowBundleIO workflowBundleIO = new WorkflowBundleIO();\n+\t\n+\t\n+\t@Test\n+\tpublic void readSimpleWorkflow() throws Exception {\n+\t\tURL wfResource = getClass().getResource(WF_REST);\n+\t\tassertNotNull(\"Could not find workflow \" + WF_REST,\n+\t\t\t\twfResource);\n+\n+\t\tFile bundleFile = File.createTempFile(\"test\", \"wfbundle\");\t\t\n+\t\t\n+\t\tWorkflowBundle wfBundle = workflowBundleIO.readBundle(wfResource, null);\t\t\n+\t\tworkflowBundleIO.writeBundle(wfBundle, bundleFile, \"application/vnd.taverna.scufl2.workflow-bundle\");\n+\t\twfBundle = workflowBundleIO.readBundle(bundleFile, null);\n+\t}\n+\t\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/EmptyStackIT.java",
                "sha": "71631d83f4d829616e9a8165545829d42510bd95",
                "status": "added"
            },
            {
                "additions": 39,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/LiteralNamespacesIT.java",
                "changes": 39,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/LiteralNamespacesIT.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/LiteralNamespacesIT.java",
                "patch": "@@ -0,0 +1,39 @@\n+package uk.org.taverna.scufl2.translator.t2flow;\n+\n+import static org.junit.Assert.*;\n+import static org.junit.Assert.assertNotNull;\n+\n+import java.io.File;\n+import java.net.URL;\n+\n+import org.junit.Test;\n+\n+import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n+import uk.org.taverna.scufl2.api.io.WorkflowBundleIO;\n+\n+public class LiteralNamespacesIT {\n+\n+\t/* From http://dev.mygrid.org.uk/issues/browse/SCUFL2-120 */\n+\n+\tprivate static final String WF_APICONSUMER = \"/apiconsumer.t2flow\";\n+\tprivate static WorkflowBundleIO workflowBundleIO = new WorkflowBundleIO();\n+\t\n+\t\n+\t@Test\n+\tpublic void readSimpleWorkflow() throws Exception {\n+\t\tURL wfResource = getClass().getResource(WF_APICONSUMER);\n+\t\tassertNotNull(\"Could not find workflow \" + WF_APICONSUMER,\n+\t\t\t\twfResource);\n+\n+\t\tFile bundleFile = File.createTempFile(\"test\", \"wfbundle\");\t\t\n+\t\t\n+\t\tWorkflowBundle wfBundle = workflowBundleIO.readBundle(wfResource, null);\t\t\n+\t\tworkflowBundleIO.writeBundle(wfBundle, bundleFile, \"application/vnd.taverna.scufl2.workflow-bundle\");\n+\t\twfBundle = workflowBundleIO.readBundle(bundleFile, null);\n+\t\tString profile = wfBundle.getResources().getResourceAsString(\"profile/taverna-2.3.0.rdf\");\t\t\n+\t\t// Quick and rude way to check that prefixes were used\n+\t\tassertTrue(profile.contains(\"<rdf:li rdf:datatype=\"));\n+\t\tassertTrue(profile.contains(\"rdf:parseType=\"));\n+\t}\n+\t\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/LiteralNamespacesIT.java",
                "sha": "34c478813275bcffa2e4d83cb0a372cb17242220",
                "status": "added"
            },
            {
                "additions": 34,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/PropertyListRoundtripIT.java",
                "changes": 34,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/PropertyListRoundtripIT.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/PropertyListRoundtripIT.java",
                "patch": "@@ -0,0 +1,34 @@\n+package uk.org.taverna.scufl2.translator.t2flow;\n+\n+import static org.junit.Assert.assertNotNull;\n+\n+import java.io.File;\n+import java.net.URL;\n+\n+import org.junit.Test;\n+\n+import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n+import uk.org.taverna.scufl2.api.io.WorkflowBundleIO;\n+\n+public class PropertyListRoundtripIT {\n+\n+\t/* From http://dev.mygrid.org.uk/issues/browse/SCUFL2-120 */\n+\n+\tprivate static final String WF_APICONSUMER = \"/apiconsumer.t2flow\";\n+\tprivate static WorkflowBundleIO workflowBundleIO = new WorkflowBundleIO();\n+\t\n+\t\n+\t@Test\n+\tpublic void readSimpleWorkflow() throws Exception {\n+\t\tURL wfResource = getClass().getResource(WF_APICONSUMER);\n+\t\tassertNotNull(\"Could not find workflow \" + WF_APICONSUMER,\n+\t\t\t\twfResource);\n+\n+\t\tFile bundleFile = File.createTempFile(\"test\", \"wfbundle\");\t\t\n+\t\t\n+\t\tWorkflowBundle wfBundle = workflowBundleIO.readBundle(wfResource, null);\t\t\n+\t\tworkflowBundleIO.writeBundle(wfBundle, bundleFile, \"application/vnd.taverna.scufl2.workflow-bundle\");\n+\t\twfBundle = workflowBundleIO.readBundle(bundleFile, null);\n+\t}\n+\t\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/java/uk/org/taverna/scufl2/translator/t2flow/PropertyListRoundtripIT.java",
                "sha": "11e1701e74ebccde8260b8cc5a422374c2258b1c",
                "status": "added"
            },
            {
                "additions": 178,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/resources/apiconsumer.t2flow",
                "changes": 178,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-integration-tests/src/test/resources/apiconsumer.t2flow?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-integration-tests/src/test/resources/apiconsumer.t2flow",
                "patch": "@@ -0,0 +1,178 @@\n+<workflow xmlns=\"http://taverna.sf.net/2008/xml/t2flow\" version=\"1\" producedBy=\"taverna-2.3.0\"><dataflow id=\"8bf2b5e5-a3e0-4fbd-bfd2-aefc7b2a6b8a\" role=\"top\"><name>Workflow4</name><inputPorts><port><name>in</name><depth>0</depth><granularDepth>0</granularDepth><annotations /></port></inputPorts><outputPorts><port><name>out</name><annotations /></port></outputPorts><processors><processor><name>String</name><inputPorts><port><name>string</name><depth>0</depth></port></inputPorts><outputPorts><port><name>object</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>apiconsumer-activity</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.activities.apiconsumer.ApiConsumerActivity</class><inputMap><map from=\"string\" to=\"string\" /></inputMap><outputMap><map from=\"object\" to=\"object\" /></outputMap><configBean encoding=\"xstream\"><net.sf.taverna.t2.activities.apiconsumer.ApiConsumerActivityConfigurationBean xmlns=\"\">\r\n+  <inputs />\r\n+  <outputs />\r\n+  <classLoaderSharing>workflow</classLoaderSharing>\r\n+  <localDependencies />\r\n+  <artifactDependencies />\r\n+  <apiConsumerName>No name</apiConsumerName>\r\n+  <apiConsumerDescription>No description</apiConsumerDescription>\r\n+  <description />\r\n+  <className>java.lang.String</className>\r\n+  <methodName>String</methodName>\r\n+  <parameterNames>\r\n+    <string>string</string>\r\n+  </parameterNames>\r\n+  <parameterDimensions>\r\n+    <int>0</int>\r\n+  </parameterDimensions>\r\n+  <parameterTypes>\r\n+    <string>java.lang.String</string>\r\n+  </parameterTypes>\r\n+  <returnType>java.lang.String</returnType>\r\n+  <returnDimension>0</returnDimension>\r\n+  <isMethodStatic>false</isMethodStatic>\r\n+  <isMethodConstructor>true</isMethodConstructor>\r\n+</net.sf.taverna.t2.activities.apiconsumer.ApiConsumerActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns=\"\">\r\n+  <maxJobs>1</maxJobs>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns=\"\">\r\n+  <backoffFactor>1.0</backoffFactor>\r\n+  <initialDelay>1000</initialDelay>\r\n+  <maxDelay>5000</maxDelay>\r\n+  <maxRetries>0</maxRetries>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name=\"string\" depth=\"0\" /></cross></strategy></iteration></iterationStrategyStack></processor><processor><name>toUpperCase</name><inputPorts><port><name>object</name><depth>0</depth></port></inputPorts><outputPorts><port><name>result</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>apiconsumer-activity</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.activities.apiconsumer.ApiConsumerActivity</class><inputMap><map from=\"object\" to=\"object\" /></inputMap><outputMap><map from=\"result\" to=\"result\" /></outputMap><configBean encoding=\"xstream\"><net.sf.taverna.t2.activities.apiconsumer.ApiConsumerActivityConfigurationBean xmlns=\"\">\r\n+  <inputs />\r\n+  <outputs />\r\n+  <classLoaderSharing>workflow</classLoaderSharing>\r\n+  <localDependencies />\r\n+  <artifactDependencies />\r\n+  <apiConsumerName>No name</apiConsumerName>\r\n+  <apiConsumerDescription>No description</apiConsumerDescription>\r\n+  <description />\r\n+  <className>java.lang.String</className>\r\n+  <methodName>toUpperCase</methodName>\r\n+  <parameterNames />\r\n+  <parameterDimensions />\r\n+  <parameterTypes />\r\n+  <returnType>java.lang.String</returnType>\r\n+  <returnDimension>0</returnDimension>\r\n+  <isMethodStatic>false</isMethodStatic>\r\n+  <isMethodConstructor>false</isMethodConstructor>\r\n+</net.sf.taverna.t2.activities.apiconsumer.ApiConsumerActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns=\"\">\r\n+  <maxJobs>1</maxJobs>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns=\"\">\r\n+  <backoffFactor>1.0</backoffFactor>\r\n+  <initialDelay>1000</initialDelay>\r\n+  <maxDelay>5000</maxDelay>\r\n+  <maxRetries>0</maxRetries>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name=\"object\" depth=\"0\" /></cross></strategy></iteration></iterationStrategyStack></processor></processors><conditions /><datalinks><datalink><sink type=\"processor\"><processor>String</processor><port>string</port></sink><source type=\"dataflow\"><port>in</port></source></datalink><datalink><sink type=\"processor\"><processor>toUpperCase</processor><port>object</port></sink><source type=\"processor\"><processor>String</processor><port>object</port></source></datalink><datalink><sink type=\"dataflow\"><port>out</port></sink><source type=\"processor\"><processor>toUpperCase</processor><port>result</port></source></datalink></datalinks><annotations><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>483d65c6-98c1-4b94-b628-d5bcbf351e97</identification>\r\n+      </annotationBean>\r\n+      <date>2011-05-16 13:07:03.385 BST</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>d460e60a-43bb-47fc-a9f4-89e15274b100</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 12:43:09.911 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>0d977496-aa5d-4274-9827-85400d5f13a2</identification>\r\n+      </annotationBean>\r\n+      <date>2011-05-16 13:06:33.69 BST</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>8bf2b5e5-a3e0-4fbd-bfd2-aefc7b2a6b8a</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 12:46:41.313 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>58f30a52-57df-46ce-b1bb-b9533984f8dd</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 12:29:15.575 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>c2693c41-1373-48cf-afbe-d8bbe0ea9e35</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 12:31:01.678 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>1ce7f3a0-71f4-4794-8bbd-dbb6de42442d</identification>\r\n+      </annotationBean>\r\n+      <date>2011-05-16 12:57:01.975 BST</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>4c2b6995-eecb-47a7-b72c-63cfb96b6852</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 12:43:51.355 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>225db881-4e07-4cdb-920c-343dc1536edc</identification>\r\n+      </annotationBean>\r\n+      <date>2011-05-16 13:10:54.588 BST</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>404e203c-ce51-4a9f-907c-1dab7f2eaaa2</identification>\r\n+      </annotationBean>\r\n+      <date>2011-05-16 12:44:02.533 BST</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>0b6881f1-aa8d-483e-a7bb-7ad38b1da778</identification>\r\n+      </annotationBean>\r\n+      <date>2011-05-16 12:26:38.721 BST</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2></annotations></dataflow></workflow>\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/resources/apiconsumer.t2flow",
                "sha": "66ef4ac9d2144ea6c051bea535d148b6572d7fea",
                "status": "added"
            },
            {
                "additions": 154,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/resources/rest.t2flow",
                "changes": 154,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-integration-tests/src/test/resources/rest.t2flow?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-integration-tests/src/test/resources/rest.t2flow",
                "patch": "@@ -0,0 +1,154 @@\n+<workflow xmlns=\"http://taverna.sf.net/2008/xml/t2flow\" version=\"1\" producedBy=\"taverna-2.3.0\"><dataflow id=\"8e36176a-2975-498b-93f7-f2beba774532\" role=\"top\"><name>Workflow11</name><inputPorts /><outputPorts><port><name>out</name><annotations /></port></outputPorts><processors><processor><name>REST_Service</name><inputPorts><port><name>id</name><depth>0</depth></port></inputPorts><outputPorts><port><name>responseBody</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>rest-activity</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.activities.rest.RESTActivity</class><inputMap><map from=\"id\" to=\"id\" /></inputMap><outputMap><map from=\"responseBody\" to=\"responseBody\" /></outputMap><configBean encoding=\"xstream\"><net.sf.taverna.t2.activities.rest.RESTActivityConfigurationBean xmlns=\"\">\r\n+  <httpMethod>GET</httpMethod>\r\n+  <urlSignature>http://www.uniprot.org/uniprot/{id}.xml</urlSignature>\r\n+  <acceptsHeaderValue>text/plain</acceptsHeaderValue>\r\n+  <contentTypeForUpdates>application/xml</contentTypeForUpdates>\r\n+  <outgoingDataFormat>String</outgoingDataFormat>\r\n+  <sendHTTPExpectRequestHeader>false</sendHTTPExpectRequestHeader>\r\n+  <showRedirectionOutputPort>false</showRedirectionOutputPort>\r\n+  <escapeParameters>true</escapeParameters>\r\n+  <otherHTTPHeaders />\r\n+  <activityInputs>\r\n+    <entry>\r\n+      <string>id</string>\r\n+      <java-class>java.lang.String</java-class>\r\n+    </entry>\r\n+  </activityInputs>\r\n+</net.sf.taverna.t2.activities.rest.RESTActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns=\"\">\r\n+  <maxJobs>1</maxJobs>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns=\"\">\r\n+  <backoffFactor>1.0</backoffFactor>\r\n+  <initialDelay>1000</initialDelay>\r\n+  <maxDelay>5000</maxDelay>\r\n+  <maxRetries>0</maxRetries>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name=\"id\" depth=\"0\" /></cross></strategy></iteration></iterationStrategyStack></processor><processor><name>id_value</name><inputPorts /><outputPorts><port><name>value</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>stringconstant-activity</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.activities.stringconstant.StringConstantActivity</class><inputMap /><outputMap><map from=\"value\" to=\"value\" /></outputMap><configBean encoding=\"xstream\"><net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean xmlns=\"\">\r\n+  <value>P12345</value>\r\n+</net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns=\"\">\r\n+  <maxJobs>1</maxJobs>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns=\"\">\r\n+  <backoffFactor>1.0</backoffFactor>\r\n+  <initialDelay>1000</initialDelay>\r\n+  <maxDelay>5000</maxDelay>\r\n+  <maxRetries>0</maxRetries>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.3</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy /></iteration></iterationStrategyStack></processor></processors><conditions /><datalinks><datalink><sink type=\"processor\"><processor>REST_Service</processor><port>id</port></sink><source type=\"processor\"><processor>id_value</processor><port>value</port></source></datalink><datalink><sink type=\"dataflow\"><port>out</port></sink><source type=\"processor\"><processor>REST_Service</processor><port>responseBody</port></source></datalink></datalinks><annotations><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>30c58a3d-4037-4b92-b7d6-3aea761bdada</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 08:52:32.796 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>d090ff3c-c84d-461f-9027-ccd07fe0a352</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 10:09:35.558 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>1e2069a6-54c3-4e09-b639-c9bb27356eb9</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 09:59:38.235 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>f88604da-4047-4ab9-bd19-23cbbb8be88b</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 10:12:00.757 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>8e36176a-2975-498b-93f7-f2beba774532</identification>\r\n+      </annotationBean>\r\n+      <date>2012-02-10 15:56:15.960 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>b3887d66-e945-444d-820a-ddb5c1d6cecb</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 10:00:26.717 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>bbf68124-dbeb-482b-80c6-e461d264a98b</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 10:12:59.372 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>c2802c60-cc0e-4bc0-b401-473476811e46</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 10:02:16.255 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>d73137e0-8cfb-4536-849e-6d30b1b1f4dc</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 08:49:30.655 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>3f67a647-2d0e-4d7e-9937-5bde3d562fde</identification>\r\n+      </annotationBean>\r\n+      <date>2011-11-02 10:10:29.316 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>f76689f8-2629-4168-b0a6-e70c88acaca9</identification>\r\n+      </annotationBean>\r\n+      <date>2012-02-10 15:49:11.156 GMT</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2></annotations></dataflow></workflow>\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-integration-tests/src/test/resources/rest.t2flow",
                "sha": "f3f90b8b2096b11e899ab68e1a20c6d84b0c16d1",
                "status": "added"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdf/pom.xml",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdf/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 4,
                "filename": "scufl2-rdf/pom.xml",
                "patch": "@@ -5,7 +5,7 @@\n \t<parent>\r\n \t\t<groupId>uk.org.taverna.scufl2</groupId>\r\n \t\t<artifactId>scufl2</artifactId>\r\n-\t\t<version>0.1-SNAPSHOT</version>\r\n+\t\t<version>0.11.0-SNAPSHOT</version>\r\n \t</parent>\r\n \t<artifactId>scufl2-rdf</artifactId>\r\n \t<packaging>bundle</packaging>\r\n@@ -107,12 +107,10 @@\n \t\t<dependency>\r\n \t\t\t<groupId>junit</groupId>\r\n \t\t\t<artifactId>junit</artifactId>\r\n-\t\t\t<version>4.4</version>\r\n \t\t</dependency>\r\n \t\t<dependency>\r\n \t\t\t<groupId>commons-beanutils</groupId>\r\n \t\t\t<artifactId>commons-beanutils</artifactId>\r\n-\t\t\t<version>1.7.0</version>\r\n \t\t</dependency>\r\n \r\n \t\t<dependency>\r\n@@ -199,4 +197,4 @@\n \t\t\t<url>http://repo.aduna-software.org/maven2/releases</url>\r\n \t\t</pluginRepository>\r\n \t</pluginRepositories>\r\n-</project>\n\\ No newline at end of file\n+</project>\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdf/pom.xml",
                "sha": "6f0770876ac0d7bd7df7bfae94da3f9cc16567e3",
                "status": "modified"
            },
            {
                "additions": 123,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdf/src/main/resources/taverna-2.2.rdf",
                "changes": 123,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdf/src/main/resources/taverna-2.2.rdf?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-rdf/src/main/resources/taverna-2.2.rdf",
                "patch": "@@ -0,0 +1,123 @@\n+\n+<!-- Processed by Id: cwm.py,v 1.197 2007/12/13 15:38:39 syosi Exp -->\n+<!--     using base file:///home/stain/src/scufl2/scufl2-rdf/src/main/resources/taverna-2.2.ttl-->\n+\n+\n+<rdf:RDF xmlns=\"http://www.w3.org/2002/07/owl#\"\n+    xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n+    xmlns:owl=\"http://www.w3.org/2002/07/owl#\"\n+    xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n+    xmlns:rdfs=\"http://www.w3.org/2000/01/rdf-schema#\">\n+\n+    <Ontology rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/\">\n+        <dc:title>Taverna ontology</dc:title>\n+        <rdfs:comment>The ontology describing SCUFL2 components used by Taverna 2.2</rdfs:comment>\n+        <rdfs:seeAlso rdf:resource=\"http://www.mygrid.org.uk/dev/wiki/display/developer/SCUFL2\"/>\n+        <rdfs:seeAlso rdf:resource=\"http://www.taverna.org.uk/\"/>\n+        <imports rdf:resource=\"http://ns.taverna.org.uk/2010/taverna/2.2/\"/>\n+    </Ontology>\n+\n+    <Class rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/ActivityConfiguration\">\n+        <rdfs:subClassOf rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#Configuration\"/>\n+        <rdfs:subClassOf rdf:parseType=\"Resource\">\n+            <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+            <allValuesFrom rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#Activitity\"/>\n+            <onProperty rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#configures\"/>\n+        </rdfs:subClassOf>\n+    </Class>\n+\n+    <Class rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/DefaultDispatchStack\">\n+        <rdfs:comment>The default Taverna dispatch stack of Parallelise, \n+\t\tErrorBounce, Failover, Retry, Stop and Invoke.</rdfs:comment>\n+        <rdfs:subClassOf rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#DispatchStack\"/>\n+        <rdfs:subClassOf rdf:parseType=\"Resource\">\n+            <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+            <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#first\"/>\n+            <someValuesFrom rdf:resource=\"http://ns.taverna.org.uk/2010/taverna/2.2/Parallelise\"/>\n+        </rdfs:subClassOf>\n+        <rdfs:subClassOf rdf:parseType=\"Resource\">\n+            <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+            <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\"/>\n+            <someValuesFrom rdf:parseType=\"Resource\">\n+                <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#first\"/>\n+                <someValuesFrom rdf:resource=\"http://ns.taverna.org.uk/2010/taverna/2.2/ErrorBounce\"/>\n+            </someValuesFrom>\n+            <someValuesFrom rdf:parseType=\"Resource\">\n+                <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\"/>\n+                <someValuesFrom rdf:parseType=\"Resource\">\n+                    <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                    <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#first\"/>\n+                    <someValuesFrom rdf:resource=\"http://ns.taverna.org.uk/2010/taverna/2.2/Failover\"/>\n+                </someValuesFrom>\n+                <someValuesFrom rdf:parseType=\"Resource\">\n+                    <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                    <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\"/>\n+                    <someValuesFrom rdf:parseType=\"Resource\">\n+                        <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                        <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#first\"/>\n+                        <someValuesFrom rdf:resource=\"http://ns.taverna.org.uk/2010/taverna/2.2/Retry\"/>\n+                    </someValuesFrom>\n+                    <someValuesFrom rdf:parseType=\"Resource\">\n+                        <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                        <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\"/>\n+                        <someValuesFrom rdf:parseType=\"Resource\">\n+                            <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                            <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#first\"/>\n+                            <someValuesFrom rdf:resource=\"http://ns.taverna.org.uk/2010/taverna/2.2/Stop\"/>\n+                        </someValuesFrom>\n+                        <someValuesFrom rdf:parseType=\"Resource\">\n+                            <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                            <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\"/>\n+                            <someValuesFrom rdf:parseType=\"Resource\">\n+                                <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                                <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#first\"/>\n+                                <someValuesFrom rdf:resource=\"http://ns.taverna.org.uk/2010/taverna/2.2/Invoke\"/>\n+                            </someValuesFrom>\n+                            <someValuesFrom rdf:parseType=\"Resource\">\n+                                <rdf:type rdf:resource=\"http://www.w3.org/2002/07/owl#Restriction\"/>\n+                                <hasValue rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil\"/>\n+                                <onProperty rdf:resource=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\"/>\n+                            </someValuesFrom>\n+                        </someValuesFrom>\n+                    </someValuesFrom>\n+                </someValuesFrom>\n+            </someValuesFrom>\n+        </rdfs:subClassOf>\n+    </Class>\n+\n+    <Class rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/ErrorBounce\">\n+        <rdfs:subClassOf rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#DispatchStackLayer\"/>\n+    </Class>\n+\n+    <Class rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/Failover\">\n+        <rdfs:subClassOf rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#DispatchStackLayer\"/>\n+    </Class>\n+\n+    <Class rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/Invoke\">\n+        <rdfs:subClassOf rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#DispatchStackLayer\"/>\n+    </Class>\n+\n+    <Class rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/Loop\">\n+        <rdfs:subClassOf rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#DispatchStackLayer\"/>\n+    </Class>\n+\n+    <Class rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/Parallelise\">\n+        <rdfs:subClassOf rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#DispatchStackLayer\"/>\n+    </Class>\n+\n+    <Class rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/Retry\">\n+        <rdfs:subClassOf rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#DispatchStackLayer\"/>\n+    </Class>\n+\n+    <Class rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/Stop\">\n+        <rdfs:subClassOf rdf:resource=\"http://ns.taverna.org.uk/2010/scufl2#DispatchStackLayer\"/>\n+    </Class>\n+\n+    <DatatypeProperty rdf:about=\"http://ns.taverna.org.uk/2010/taverna/2.2/script\">\n+        <rdfs:domain rdf:resource=\"http://ns.taverna.org.uk/2010/taverna/2.2/ActivityConfiguration\"/>\n+        <rdfs:label>script</rdfs:label>\n+        <rdfs:range rdf:resource=\"http://www.w3.org/2001/XMLSchema#string\"/>\n+    </DatatypeProperty>\n+</rdf:RDF>",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdf/src/main/resources/taverna-2.2.rdf",
                "sha": "cbd7c46900524b65237096a62db831ce2ef7a8f6",
                "status": "added"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdf/src/main/resources/taverna-2.2.ttl",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdf/src/main/resources/taverna-2.2.ttl?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 2,
                "filename": "scufl2-rdf/src/main/resources/taverna-2.2.ttl",
                "patch": "@@ -13,8 +13,7 @@\n <>\n     a owl:Ontology ;\n     dc:title \"Taverna ontology\" ;\n-    owl:imports <http://purl.org/dc/elements/1.1/>,\n-    <http://purl.org/dc/terms/>,<http://www.w3.org/2000/01/rdf-schema#>,<http://ns.taverna.org.uk/2010/taverna/2.2/>;\n+    owl:imports <http://ns.taverna.org.uk/2010/taverna/2.2/>;\n \n     rdfs:comment \"\"\"The ontology describing SCUFL2 components used by Taverna 2.2\"\"\" ;\n     rdfs:seeAlso",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdf/src/main/resources/taverna-2.2.ttl",
                "sha": "1115c3d86b8573f724352cbb70ff1e0e7e1122b6",
                "status": "modified"
            },
            {
                "additions": 110,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/pom.xml",
                "changes": 220,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdfxml/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 110,
                "filename": "scufl2-rdfxml/pom.xml",
                "patch": "@@ -1,111 +1,111 @@\n-<?xml version=\"1.0\"?>\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n-\t<modelVersion>4.0.0</modelVersion>\n-\t<parent>\n-\t\t<groupId>uk.org.taverna.scufl2</groupId>\n-\t\t<artifactId>scufl2</artifactId>\n-\t\t<version>0.9-SNAPSHOT</version>\n-\t</parent>\n-\t<artifactId>scufl2-rdfxml</artifactId>\n-\t<packaging>bundle</packaging>\n-\t<name>Taverna Scufl 2 RDF/XML</name>\n-\t<description>XSD based XML serialisation which is RDF/XML compatible</description>\n-\t<properties>\n-\t\t<sesame.version>2.3.2</sesame.version>\n-\t</properties>\n-\t<build>\n-\t\t<plugins>\n-\t\t\t<plugin>\n-\t\t\t\t<groupId>org.codehaus.mojo</groupId>\n-\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\n-\t\t\t\t<executions>\n-\t\t\t\t\t<execution>\n-\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t<goal>xjc</goal>\n-\t\t\t\t\t\t</goals>\n-\t\t\t\t\t</execution>\n-\t\t\t\t</executions>\n-\t\t\t\t<configuration>\n-\t\t\t\t\t<!-- <packageName>uk.org.taverna.scufl2.rdfxml.jaxb</packageName> -->\n-\t\t\t\t\t<schemaDirectory>src/main/resources/uk/org/taverna/scufl2/rdfxml/xsd/</schemaDirectory>\n-\t\t\t\t</configuration>\n-\t\t\t</plugin>\n-\t\t</plugins>\n-\t</build>\n-\t<dependencies>\n-\t\t<dependency>\n-\t\t\t<groupId>${project.groupId}</groupId>\n-\t\t\t<artifactId>scufl2-api</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>${project.groupId}</groupId>\n-\t\t\t<artifactId>scufl2-api</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t\t<type>test-jar</type>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>${project.groupId}</groupId>\n-\t\t\t<artifactId>scufl2-ucfpackage</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>commons-io</groupId>\n-\t\t\t<artifactId>commons-io</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>org.jdom</groupId>\n-\t\t\t<artifactId>jdom</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\n-\t\t<dependency>\n-\t\t\t<groupId>org.openrdf.sesame</groupId>\n-\t\t\t<artifactId>sesame-repository-sail</artifactId>\n-\t\t\t<version>${sesame.version}</version>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>org.openrdf.sesame</groupId>\n-\t\t\t<artifactId>sesame-sail-memory</artifactId>\n-\t\t\t<version>${sesame.version}</version>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>com.sun.xml.bind</groupId>\n-\t\t\t<artifactId>jaxb-impl</artifactId>\n-\t\t\t<optional>true</optional>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>jaxen</groupId>\n-\t\t\t<artifactId>jaxen</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t</dependencies>\n-\t<repositories>\n-\t\t<repository>\n-\t\t\t<releases>\n-\t\t\t\t<enabled>true</enabled>\n-\t\t\t</releases>\n-\t\t\t<snapshots>\n-\t\t\t\t<enabled>false</enabled>\n-\t\t\t</snapshots>\n-\t\t\t<id>aduna-opensource.releases</id>\n-\t\t\t<name>Aduna Open Source - Maven releases</name>\n-\t\t\t<url>http://repo.aduna-software.org/maven2/releases</url>\n-\t\t</repository>\n-\t\t<repository>\n-\t\t\t<releases>\n-\t\t\t\t<enabled>false</enabled>\n-\t\t\t</releases>\n-\t\t\t<snapshots>\n-\t\t\t\t<enabled>true</enabled>\n-\t\t\t</snapshots>\n-\t\t\t<id>aduna-opensource.snapshots</id>\n-\t\t\t<name>Aduna Open Source - Maven snapshots</name>\n-\t\t\t<url>http://repo.aduna-software.org/maven2/snapshots</url>\n-\t\t</repository>\n-\t</repositories>\n+<?xml version=\"1.0\"?>\r\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n+\t<modelVersion>4.0.0</modelVersion>\r\n+\t<parent>\r\n+\t\t<groupId>uk.org.taverna.scufl2</groupId>\r\n+\t\t<artifactId>scufl2</artifactId>\r\n+\t\t<version>0.11.0-SNAPSHOT</version>\r\n+\t</parent>\r\n+\t<artifactId>scufl2-rdfxml</artifactId>\r\n+\t<packaging>bundle</packaging>\r\n+\t<name>Taverna Scufl 2 RDF/XML</name>\r\n+\t<description>XSD based XML serialisation which is RDF/XML compatible</description>\r\n+\t<properties>\r\n+\t\t<sesame.version>2.3.2</sesame.version>\r\n+\t</properties>\r\n+\t<build>\r\n+\t\t<plugins>\r\n+\t\t\t<plugin>\r\n+\t\t\t\t<groupId>org.codehaus.mojo</groupId>\r\n+\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\r\n+\t\t\t\t<executions>\r\n+\t\t\t\t\t<execution>\r\n+\t\t\t\t\t\t<goals>\r\n+\t\t\t\t\t\t\t<goal>xjc</goal>\r\n+\t\t\t\t\t\t</goals>\r\n+\t\t\t\t\t</execution>\r\n+\t\t\t\t</executions>\r\n+\t\t\t\t<configuration>\r\n+\t\t\t\t\t<!-- <packageName>uk.org.taverna.scufl2.rdfxml.jaxb</packageName> -->\r\n+\t\t\t\t\t<schemaDirectory>src/main/resources/uk/org/taverna/scufl2/rdfxml/xsd/</schemaDirectory>\r\n+\t\t\t\t</configuration>\r\n+\t\t\t</plugin>\r\n+\t\t</plugins>\r\n+\t</build>\r\n+\t<dependencies>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-api</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-api</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t\t<type>test-jar</type>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-ucfpackage</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>commons-io</groupId>\r\n+\t\t\t<artifactId>commons-io</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>org.jdom</groupId>\r\n+\t\t\t<artifactId>jdom</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>org.openrdf.sesame</groupId>\r\n+\t\t\t<artifactId>sesame-repository-sail</artifactId>\r\n+\t\t\t<version>${sesame.version}</version>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>org.openrdf.sesame</groupId>\r\n+\t\t\t<artifactId>sesame-sail-memory</artifactId>\r\n+\t\t\t<version>${sesame.version}</version>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>com.sun.xml.bind</groupId>\r\n+\t\t\t<artifactId>jaxb-impl</artifactId>\r\n+\t\t\t<optional>true</optional>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>jaxen</groupId>\r\n+\t\t\t<artifactId>jaxen</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t</dependencies>\r\n+\t<repositories>\r\n+\t\t<repository>\r\n+\t\t\t<releases>\r\n+\t\t\t\t<enabled>true</enabled>\r\n+\t\t\t</releases>\r\n+\t\t\t<snapshots>\r\n+\t\t\t\t<enabled>false</enabled>\r\n+\t\t\t</snapshots>\r\n+\t\t\t<id>aduna-opensource.releases</id>\r\n+\t\t\t<name>Aduna Open Source - Maven releases</name>\r\n+\t\t\t<url>http://repo.aduna-software.org/maven2/releases</url>\r\n+\t\t</repository>\r\n+\t\t<repository>\r\n+\t\t\t<releases>\r\n+\t\t\t\t<enabled>false</enabled>\r\n+\t\t\t</releases>\r\n+\t\t\t<snapshots>\r\n+\t\t\t\t<enabled>true</enabled>\r\n+\t\t\t</snapshots>\r\n+\t\t\t<id>aduna-opensource.snapshots</id>\r\n+\t\t\t<name>Aduna Open Source - Maven snapshots</name>\r\n+\t\t\t<url>http://repo.aduna-software.org/maven2/snapshots</url>\r\n+\t\t</repository>\r\n+\t</repositories>\r\n </project>\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/pom.xml",
                "sha": "138c7fc5487101084c5292ef65cac87752d30b6d",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/ProfileParser.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/ProfileParser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/ProfileParser.java",
                "patch": "@@ -215,7 +215,7 @@ protected PropertyObject parseList(Element element) throws ReaderException {\n \t\t\tif (!(node instanceof Element)) {\n \t\t\t\tcontinue;\n \t\t\t}\n-\t\t\tPropertyObject propertyObject = parseElement(element);\n+\t\t\tPropertyObject propertyObject = parseElement((Element) node);\n \t\t\tpropertyList.add(propertyObject);\n \n \t\t}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/ProfileParser.java",
                "sha": "d75de0a40dbdd32b9f175cb9a0e0c5921b9b554c",
                "status": "modified"
            },
            {
                "additions": 93,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/PropertyResourceSerialiser.java",
                "changes": 118,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/PropertyResourceSerialiser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 25,
                "filename": "scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/PropertyResourceSerialiser.java",
                "patch": "@@ -14,6 +14,7 @@\n import org.w3c.dom.Element;\n \n import uk.org.taverna.scufl2.api.common.Visitor.VisitorWithPath;\n+import uk.org.taverna.scufl2.api.common.URITools;\n import uk.org.taverna.scufl2.api.common.WorkflowBean;\n import uk.org.taverna.scufl2.api.property.PropertyList;\n import uk.org.taverna.scufl2.api.property.PropertyLiteral;\n@@ -22,6 +23,7 @@\n import uk.org.taverna.scufl2.api.property.PropertyResource.PropertyVisit;\n \n public class PropertyResourceSerialiser extends VisitorWithPath {\n+\tpublic static final String ABOUT = \"about\";\n \tpublic static final String DESCRIPTION = \"Description\";\n \tpublic static final String RESOURCE = \"resource\";\n \tpublic static final String LITERAL = \"Literal\";\n@@ -30,61 +32,98 @@\n \tpublic static final String PARSE_TYPE = \"parseType\";\n \tpublic static final String COLLECTION = \"Collection\";\n \tpublic static final String RDF = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\";\n+\n+\tpublic static final String RDF_ = \"rdf:\";\n+\tpublic static final String RDF_ELEM = RDF_ + \"RDF\";\n+\tpublic static final String RDF_ABOUT = RDF_ + ABOUT;\n+\tpublic static final String RDF_DESCRIPTION = RDF_ + DESCRIPTION;\n+\tpublic static final String RDF_DATATYPE = RDF_ + DATATYPE;\n+\tpublic static final String RDF_LI = RDF_ + LI;\n+\tpublic static final String RDF_PARSE_TYPE = RDF_ + PARSE_TYPE;\n+\tprivate static final String RDF_RESOURCE = RDF_ + RESOURCE;\n+\n+\tprivate static URITools uriTools = new URITools();\n+\t\n \tprotected Stack<Element> elementStack = new Stack<Element>();\n-\tprotected DocumentBuilder docBuilder;\n-\tprotected Document doc;\n-\tprivate Element rootElement;\n+\tprivate DocumentBuilder docBuilder;\n+\tprivate Document doc;\n+\tprivate final URI baseUri;\n \n \tpublic PropertyResourceSerialiser(URI baseUri) {\n+\t\tthis.baseUri = baseUri;\n \t\tDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n \t\tfactory.setNamespaceAware(true);\n \t\ttry {\n-\t\t\tdocBuilder = factory.newDocumentBuilder();\n+\t\t\tsetDocBuilder(factory.newDocumentBuilder());\n \t\t} catch (ParserConfigurationException e) {\n \t\t\tthrow new IllegalStateException(\"Can't create DocumentBuilder\", e);\n \t\t}\n-\t\tdoc = docBuilder.newDocument();\n+\t\tsetDoc(getDocBuilder().newDocument());\n \n \t}\n \n \tprivate void addElement(Element element) {\n \t\tif (elementStack.isEmpty()) {\n \t\t\t// Top level\n-\t\t\tif (getRootElement() == null) {\n+\t\t\tElement existingRoot = getRootElement();\n+\t\t\tif (existingRoot == null) {\n \t\t\t\tsetRootElement(element);\n \t\t\t} else {\n-\t\t\t\tif (getRootElement() != element) {\n-\t\t\t\t\tthrow new IllegalStateException(\"Unexpected root element \"\n-\t\t\t\t\t\t\t+ element + \" has: \" + getRootElement());\n+\t\t\t\tif (!existingRoot.getNodeName().equals(RDF_ELEM)) {\n+\t\t\t\t\t// Wrap existingRoot in <rdf:RDF>\n+\t\t\t\t\tElement rootElem = doc.createElementNS(RDF, RDF_ELEM);\n+\t\t\t\t\tsetRootElement(rootElem);\n+\t\t\t\t\trootElem.appendChild(existingRoot);\n \t\t\t\t}\n+\t\t\t\tgetRootElement().appendChild(element);\n \t\t\t}\n \t\t} else {\n \t\t\t// System.out.println(\"Appending to \" + elementStack.peek());\n \t\t\telementStack.peek().appendChild(element);\n \t\t}\n \n \t\telementStack.push(element);\n+\t\tprintStatus(false);\n \t}\n \n+\tprivate final void printStatus(boolean isClosing) {\n+\t};\n+\n+\t/*\n+\t * private final void printStatus(boolean isClosing) { StackTraceElement[]\n+\t * st = new Exception().getStackTrace(); StackTraceElement caller = st[1];\n+\t * \n+\t * // indent by stack depth for (Element e : elementStack) {\n+\t * System.out.print(\"-\"); } System.out.print(isClosing ? \"<\" : \">\");\n+\t * System.out.print(\" \" + getCurrentNode().getClass().getSimpleName() +\n+\t * \": \"); for (Element e : elementStack) { System.out.print(\"<\" +\n+\t * e.getNodeName() + \"> \"); } System.out.print(\"\\t\\t-- \" +\n+\t * caller.getMethodName() + \"(..) in (\" + caller.getFileName() + \":\" +\n+\t * caller.getLineNumber() + \")\"); System.out.println(\"\\t\" +\n+\t * getCurrentPath());\n+\t * \n+\t * }\n+\t */\n+\n \tpublic Element getRootElement() {\n-\t\treturn rootElement;\n+\t\treturn getDoc().getDocumentElement();\n \t}\n \n \tprotected void list(PropertyList node) {\n \t\tElement element = elementStack.peek();\n-\t\telement.setAttributeNS(RDF, PARSE_TYPE, COLLECTION);\n+\t\telement.setAttributeNS(RDF, RDF_PARSE_TYPE, COLLECTION);\n \t}\n \n \tprotected void literal(PropertyLiteral node) {\n \t\tElement element = elementStack.peek();\n \t\tif (node.getLiteralType().equals(PropertyLiteral.XML_LITERAL)) {\n \t\t\tElement nodeElement = node.getLiteralValueAsElement();\n-\t\t\telement.appendChild(doc.importNode(nodeElement, true));\n-\t\t\telement.setAttributeNS(RDF, PARSE_TYPE, LITERAL);\n+\t\t\telement.appendChild(getDoc().importNode(nodeElement, true));\n+\t\t\telement.setAttributeNS(RDF, RDF_PARSE_TYPE, LITERAL);\n \t\t} else {\n \t\t\telement.setTextContent(node.getLiteralValue());\n \t\t\tif (!node.getLiteralType().equals(PropertyLiteral.XSD_STRING)) {\n-\t\t\t\telement.setAttributeNS(RDF, DATATYPE, node.getLiteralType()\n+\t\t\t\telement.setAttributeNS(RDF, RDF_DATATYPE, node.getLiteralType()\n \t\t\t\t\t\t.toASCIIString());\n \t\t\t}\n \t\t}\n@@ -97,33 +136,41 @@ protected void property(PropertyVisit node) {\n \n \tprotected void reference(PropertyReference node) {\n \t\tElement element = elementStack.peek();\n-\t\telement.setAttributeNS(RDF, RESOURCE, node.getResourceURI()\n+\t\telement.setAttributeNS(RDF, RDF_RESOURCE, relativize(node.getResourceURI())\n \t\t\t\t.toASCIIString());\n \t}\n \n+\tprotected URI relativize(URI resourceURI) {\n+\t\treturn uriTools.relativePath(baseUri, resourceURI);\n+\t}\n+\n \tprotected void resource(PropertyResource node) {\n \t\tURI typeUri = node.getTypeURI();\n \t\tElement element;\n \t\tif (typeUri != null) {\n \t\t\telement = uriToElement(typeUri);\n \t\t} else {\n \t\t\t// Anonymous - give warning?\n-\t\t\telement = doc.createElementNS(RDF, DESCRIPTION);\n+\t\t\telement = getDoc().createElementNS(RDF, RDF_DESCRIPTION);\n \t\t}\n \t\tif (node.getResourceURI() != null) {\n-\t\t\telement.setAttributeNS(RDF, \"about\", node.getResourceURI()\n+\t\t\telement.setAttributeNS(RDF, RDF_ABOUT, relativize(node.getResourceURI())\n \t\t\t\t\t.toASCIIString());\n \t\t}\n \t\taddElement(element);\n \t}\n \n \tpublic void setRootElement(Element rootElement) {\n-\t\tthis.rootElement = rootElement;\n+\t\tElement oldRoot = getRootElement();\n+\t\tif (oldRoot != null) {\n+\t\t\tdoc.removeChild(oldRoot);\n+\t\t}\n+\t\tdoc.appendChild(rootElement);\n \t}\n \n \tprotected Element uriToElement(URI uri) {\n \t\tQName propertyQname = uriToQName(uri);\n-\t\treturn doc.createElementNS(propertyQname.getNamespaceURI(),\n+\t\treturn getDoc().createElementNS(propertyQname.getNamespaceURI(),\n \t\t\t\tpropertyQname.getLocalPart());\n \t}\n \n@@ -158,7 +205,7 @@ public boolean visit() {\n \t\t\t\tElement element = uriToElement(propertyVisit.getPredicateUri());\n \t\t\t\taddElement(element);\n \t\t\t} else if (parent instanceof PropertyList) {\n-\t\t\t\taddElement(doc.createElementNS(RDF, LI));\n+\t\t\t\taddElement(getDoc().createElementNS(RDF, RDF_LI));\n \t\t\t}\n \t\t}\n \t\tif (node instanceof PropertyList) {\n@@ -179,6 +226,7 @@ public boolean visit() {\n \n \t@Override\n \tpublic boolean visitLeave() {\n+\n \t\tStack<WorkflowBean> currentPath = getCurrentPath();\n \t\tif (currentPath.size() > 1\n \t\t\t\t&& currentPath.get(currentPath.size() - 2) instanceof PropertyVisit\n@@ -189,22 +237,42 @@ public boolean visitLeave() {\n \t\t}\n \t\tif (getCurrentNode() instanceof PropertyResource) {\n \t\t\t// We need to pop the <Class> before <predicate>\n+\t\t\tprintStatus(true);\n \t\t\telementStack.pop();\n \t\t}\n \n \t\tif (elementStack.isEmpty()) {\n \t\t\t// System.out.println(\"Stack empty! \" + getCurrentNode());\n \t\t\treturn true;\n \t\t}\n-\t\tElement element = elementStack.pop();\n-\t\t// System.out.println(\"Popping \" + element + \" current:\"\n-\t\t// + getCurrentNode());\n+\t\tElement element;\n+\t\tif (getCurrentPath().size() > 3\n+\t\t\t\t&& getCurrentPath().get(getCurrentPath().size() - 3) instanceof PropertyList) {\n+\t\t\treturn true;\n+\t\t}\n \n-\t\tif (elementStack.isEmpty()) {\n-\t\t\telementStack.push(element);\n+\t\tif (elementStack.size() > 1) {\n+\t\t\tprintStatus(true);\n+\t\t\telementStack.pop();\n \t\t}\n \t\t// System.out.println();\n \t\treturn true;\n \t}\n \n+\tpublic Document getDoc() {\n+\t\treturn doc;\n+\t}\n+\n+\tpublic void setDoc(Document doc) {\n+\t\tthis.doc = doc;\n+\t}\n+\n+\tpublic DocumentBuilder getDocBuilder() {\n+\t\treturn docBuilder;\n+\t}\n+\n+\tpublic void setDocBuilder(DocumentBuilder docBuilder) {\n+\t\tthis.docBuilder = docBuilder;\n+\t}\n+\n }",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/PropertyResourceSerialiser.java",
                "sha": "09bc5bc1c50ccc962d977bdcad555ed6f2810808",
                "status": "modified"
            },
            {
                "additions": 106,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/RDFXMLSerializer.java",
                "changes": 109,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/RDFXMLSerializer.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 3,
                "filename": "scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/RDFXMLSerializer.java",
                "patch": "@@ -1,11 +1,15 @@\n package uk.org.taverna.scufl2.rdfxml;\n \n+import static uk.org.taverna.scufl2.rdfxml.RDFXMLReader.APPLICATION_RDF_XML;\n+\n+import java.io.IOException;\n import java.io.OutputStream;\n import java.net.URI;\n import java.util.HashMap;\n import java.util.List;\n import java.util.Map;\n import java.util.Stack;\n+import java.util.logging.Level;\n import java.util.logging.Logger;\n \n import javax.xml.XMLConstants;\n@@ -24,6 +28,7 @@\n import org.xml.sax.SAXException;\n \n import uk.org.taverna.scufl2.api.activity.Activity;\n+import uk.org.taverna.scufl2.api.annotation.Annotation;\n import uk.org.taverna.scufl2.api.common.Typed;\n import uk.org.taverna.scufl2.api.common.URITools;\n import uk.org.taverna.scufl2.api.common.Visitor;\n@@ -52,6 +57,10 @@\n import uk.org.taverna.scufl2.api.profiles.ProcessorInputPortBinding;\n import uk.org.taverna.scufl2.api.profiles.ProcessorOutputPortBinding;\n import uk.org.taverna.scufl2.api.profiles.Profile;\n+import uk.org.taverna.scufl2.api.property.PropertyLiteral;\n+import uk.org.taverna.scufl2.api.property.PropertyObject;\n+import uk.org.taverna.scufl2.api.property.PropertyResource;\n+import uk.org.taverna.scufl2.api.property.PropertyResource.PropertyVisit;\n import uk.org.taverna.scufl2.rdfxml.impl.NamespacePrefixMapperJAXB_RI;\n import uk.org.taverna.scufl2.rdfxml.jaxb.Blocking;\n import uk.org.taverna.scufl2.rdfxml.jaxb.Control;\n@@ -74,6 +83,12 @@\n \n public class RDFXMLSerializer {\n \n+\tprivate static final String DOT_RDF = \".rdf\";\n+\n+\tprotected static final URI OA = URI.create(\"http://www.w3.org/ns/openannotation/core/\");\n+\n+\tprivate static boolean warnedOnce = false;\n+\t\n \tpublic class ProfileSerialisationVisitor implements Visitor {\n \n \t\tprivate uk.org.taverna.scufl2.rdfxml.jaxb.Activity activity;\n@@ -318,6 +333,11 @@ public boolean visit(WorkflowBean node) {\n \t\t\t\t\tworkflow.setWorkflowIdentifier(wfId);\n \t\t\t\t}\n \t\t\t}\n+\t\t\t\n+\t\t\tif (node instanceof PropertyVisit || node instanceof PropertyObject) {\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t\t\n \t\t\tURI uri = uriTools.relativeUriForBean(node, wf);\n \n \t\t\tif (node instanceof InputWorkflowPort) {\n@@ -557,6 +577,84 @@ protected synchronized static JAXBContext getJAxbContextStatic()\n \t\treturn jaxbContextStatic;\n \t}\n \n+\tpublic void annotation(final Annotation ann) {\n+\t\tURI wfBundleURI = uriTools.uriForBean(wfBundle);\n+\t\tURI annUri = uriTools.uriForBean(ann);\n+\t\tURI bodyURI = ann.getBody();\n+\t\tif (bodyURI == null || bodyURI.isAbsolute()) {\n+\t\t\t// Workaround with separate file for the annotation alone\n+\t\t\tbodyURI = annUri.resolve(uriTools.validFilename(ann.getName()) + DOT_RDF);\n+\t\t}\n+\t\tURI pathUri = uriTools.relativePath(wfBundleURI, bodyURI);\t\t\t\n+\t\tif (ann.getBody() == null || ann.getBody().equals(wfBundleURI.resolve(pathUri))) {\n+\t\t\t// Set the relative path\n+\t\t\tann.setBody(pathUri);\n+\t\t}\n+\n+\t\t// Miniature OA description for now\n+\t\t// See http://openannotation.org/spec/core/20120509.html\n+\t\tfinal PropertyResource annProv = new PropertyResource();\n+\t\tannProv.setResourceURI(annUri);\n+\t\tannProv.setTypeURI(OA.resolve(\"Annotation\"));\n+\t\tif (ann.getAnnotated() != null) {\n+\t\t\tannProv.addProperty(OA.resolve(\"annoted\"),\n+\t\t\t\t\tnew PropertyLiteral(ann.getAnnotated()));\n+\t\t}\n+\t\tif (ann.getGenerated() != null) {\n+\t\t\tannProv.addProperty(OA.resolve(\"created\"),\n+\t\t\t\t\tnew PropertyLiteral(ann.getGenerated()));\n+\t\t}\n+\t\tif (ann.getAnnotator() != null) {\n+\t\t\tannProv.addPropertyReference(OA.resolve(\"annotator\"),\n+\t\t\t\t\tann.getAnnotator());\n+\t\t}\n+\t\tif (ann.getGenerator() != null) {\n+\t\t\tannProv.addPropertyReference(OA.resolve(\"generator\"),\n+\t\t\t\t\tann.getGenerator());\n+\t\t}\n+\t\tif (ann.getBody() != null) {\n+\t\t\tannProv.addPropertyReference(OA.resolve(\"hasBody\"), ann.getBody());\n+\t\t} else if (! ann.getBodyStatements().isEmpty()){\t\t\t\t\t\t\n+\t\t\t// FIXME: Hack - Our body is also the annotation!\n+\t\t\tannProv.addPropertyReference(OA.resolve(\"hasBody\"), pathUri);\n+\t\t}\n+\t\t\n+\t\t// CHECK: should this be a relative reference instead?\n+\t\tannProv.addPropertyReference(OA.resolve(\"hasTarget\"), \n+\t\t\t\turiTools.uriForBean(ann.getTarget()));\t\t\t\t\t\n+\t\t// Serialize the metadata\n+\n+\t\t\n+\t\tPropertyResourceSerialiser visitor = new PropertyResourceSerialiser(\n+\t\t\t\tannUri) {\n+\t\t\t@Override\n+\t\t\tpublic boolean visit() {\n+\t\t\t\tif (getCurrentNode() instanceof Annotation) {\n+\t\t\t\t\tannProv.accept(this);\n+\t\t\t\t\t// visit our children, serialized as normal by superclass\n+\t\t\t\t\t// -- but don't call super.visit() which don't understand\n+\t\t\t\t\t// Annotation\n+\t\t\t\t\treturn true;\n+\t\t\t\t}\n+\t\t\t\treturn super.visit();\n+\t\t\t}\n+\t\t};\n+\t\tann.accept(visitor);\n+\n+\n+\t\ttry {\n+\t\t\t/*\n+\t\t\t * TODO: Serialize manually with nicer indentation/namespaces etc.,\n+\t\t\t * as done for our other RDF/XML documents\n+\t\t\t */\n+\t\t\twfBundle.getResources()\n+\t\t\t\t\t.addResource(visitor.getDoc(), pathUri.toASCIIString(), APPLICATION_RDF_XML);\n+\t\t} catch (IOException e) {\n+\t\t\tlogger.log(Level.WARNING, \"Can't write annotation to \" + pathUri, e);\n+\t\t}\n+\t\t\n+\t}\n+\n \tprivate ObjectFactory objectFactory = new ObjectFactory();\n \n \tprivate org.w3._2000._01.rdf_schema.ObjectFactory rdfsObjectFactory = new org.w3._2000._01.rdf_schema.ObjectFactory();\n@@ -716,6 +814,10 @@ protected ProfileDocument makeProfile(Profile pf, URI path) {\n \t\t\t}\n \t\t}\n \n+\t\tfor (Annotation ann : wfBundle.getAnnotations()) {\n+\t\t\tannotation(ann);\n+\t\t}\n+\t\t\n \t\treturn bundle;\n \t}\n \n@@ -759,12 +861,13 @@ protected void setPrefixMapper(Marshaller marshaller) {\n \t\t\t// Maven.\n \t\t\tsetPrefixMapper = true;\n \t\t} catch (Exception e) {\n-\t\t\te.printStackTrace();\n+\t\t\tlogger.log(Level.FINE, \"Can't find NamespacePrefixMapper\", e);\n \t\t}\n \n-\t\tif (!setPrefixMapper) {\n-\t\t\tlogger.warning(\"Could not set prefix mapper (incompatible JAXB) \"\n+\t\tif (!setPrefixMapper && ! warnedOnce) {\n+\t\t\tlogger.info(\"Could not set prefix mapper (missing or incompatible JAXB) \"\n \t\t\t\t\t+ \"- will use prefixes ns0, ns1, ..\");\n+\t\t\twarnedOnce = true;\n \t\t}\n \t}\n ",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/RDFXMLSerializer.java",
                "sha": "94c819845c05a95794427a7dac418f60820a0ee2",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestProfileParser.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestProfileParser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestProfileParser.java",
                "patch": "@@ -71,7 +71,7 @@ public void configuration() throws Exception {\n \t\t\t\thello.getConfigures());\n \t\tassertEquals(\n \"http://ns.taverna.org.uk/2010/activity/beanshell#Config\",\n-\t\t\t\thello.getConfigurableType().toASCIIString());\n+\t\t\t\thello.getType().toASCIIString());\n \t}\n \n \tpublic void loadProfileDocument() {",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestProfileParser.java",
                "sha": "38a329959463b59b4b75c7e1e415d894e113876b",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestPropertyParsing.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestPropertyParsing.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestPropertyParsing.java",
                "patch": "@@ -67,7 +67,7 @@ public void configuration() throws Exception {\n \t\tassertEquals(profile.getActivities().getByName(\"Get_XML_result\"),\n \t\t\t\tget_XML_result.getConfigures());\n \t\tassertEquals(\"http://ns.taverna.org.uk/2010/activity/wsdl#Config\",\n-\t\t\t\tget_XML_result.getConfigurableType().toASCIIString());\n+\t\t\t\tget_XML_result.getType().toASCIIString());\n \t}\n \n \tpublic void loadProfileDocument() {",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestPropertyParsing.java",
                "sha": "96c33e941700b089a00e85795d2ad2932a47348e",
                "status": "modified"
            },
            {
                "additions": 42,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestPropertySerialisation.java",
                "changes": 44,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestPropertySerialisation.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 2,
                "filename": "scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestPropertySerialisation.java",
                "patch": "@@ -12,6 +12,7 @@\n import org.junit.Test;\n import org.w3c.dom.Attr;\n import org.w3c.dom.Element;\n+import org.w3c.dom.Node;\n \n import uk.org.taverna.scufl2.api.property.PropertyList;\n import uk.org.taverna.scufl2.api.property.PropertyLiteral;\n@@ -130,7 +131,7 @@ public void propertyAnonymous() throws Exception {\n \t\t\n \t\tpropResource.accept(serialiser);\n \t\tElement elem = serialiser.getRootElement();\n-\t\tassertEquals(\"Description\", elem.getTagName());\n+\t\tassertEquals(\"rdf:Description\", elem.getTagName());\n \t\tassertEquals(PropertyResourceSerialiser.RDF, elem.getNamespaceURI());\n \t\tassertEquals(0, elem.getAttributes().getLength());\n \t\tassertEquals(0, elem.getChildNodes().getLength());\t\t\n@@ -142,7 +143,7 @@ public void propertyAnonymousWithAbout() throws Exception {\n \t\t\n \t\tpropResource.accept(serialiser);\n \t\tElement elem = serialiser.getRootElement();\n-\t\tassertEquals(\"Description\", elem.getTagName());\n+\t\tassertEquals(\"rdf:Description\", elem.getTagName());\n \t\tassertEquals(PropertyResourceSerialiser.RDF, elem.getNamespaceURI());\n \t\tassertEquals(1, elem.getAttributes().getLength());\n \t\tassertEquals(0, elem.getChildNodes().getLength());\n@@ -234,6 +235,45 @@ public void literalInteger() throws Exception {\n \t\tassertEquals(1, elem.getAttributes().getLength());\n \t\tassertEquals(1, elem.getChildNodes().getLength());\n \t}\n+\t\n+\n+\n+\t@Test\n+\tpublic void literalIntegerInList() throws Exception {\n+\t\t\n+\t\tPropertyList propList = new PropertyList();\n+\t\tpropResource.addProperty(property.resolve(\"#list\"), propList);\n+\t\t\t\t\n+\t\tPropertyLiteral literal = new PropertyLiteral(1337);\n+\t\tpropList.add(literal);\n+\t\t\n+\t\tpropResource.accept(serialiser);\n+\t\tElement elem = serialiser.getRootElement();\n+\t\telem = (Element) elem.getChildNodes().item(0);\n+\t\tassertEquals(\"list\", elem.getTagName());\n+\t\tassertEquals(\"http://example.com/property#\", elem.getNamespaceURI());\n+\t\tassertEquals(1, elem.getAttributes().getLength());\t\t\n+\t\tAttr collection = elem.getAttributeNodeNS(\n+\t\t\t\t\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\", \"parseType\");\n+\t\tassertEquals(\"Collection\", collection.getValue());\n+\t\tassertEquals(\"rdf\", collection.getPrefix());\n+\t\t\n+\t\tassertEquals(1, elem.getChildNodes().getLength());\n+\t\tElement liElem = (Element) elem.getChildNodes().item(0);\n+\t\tassertEquals(\"li\", liElem.getLocalName());\n+\t\tassertEquals(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\", liElem.getNamespaceURI());\n+\t\tassertEquals(\"rdf\", liElem.getPrefix());\n+\t\tassertEquals(\"rdf:li\", liElem.getTagName());\n+\t\tSystem.out.println(liElem.getAttributes().item(0).getPrefix());\n+\t\tassertEquals(\"1337\", elem.getTextContent());\n+\t\tAttr datatype = liElem.getAttributeNodeNS(\n+\t\t\t\t\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\", \"datatype\");\n+\t\tassertEquals(\"rdf\", datatype.getPrefix());\n+\t\tassertEquals(PropertyLiteral.XSD_INT.toASCIIString(), datatype.getValue());\n+\t\tassertEquals(1, liElem.getAttributes().getLength());\n+\t\tassertEquals(1, liElem.getChildNodes().getLength());\n+\t}\n+\t\n \n \t@Test\n \tpublic void literalDate() throws Exception {",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestPropertySerialisation.java",
                "sha": "323080af8f7c48ccdeedf04f9ebbf49bff37ad38",
                "status": "modified"
            },
            {
                "additions": 85,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestRevisionSerialization.java",
                "changes": 85,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestRevisionSerialization.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestRevisionSerialization.java",
                "patch": "@@ -0,0 +1,85 @@\n+package uk.org.taverna.scufl2.rdfxml;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+import java.net.URI;\n+import java.util.GregorianCalendar;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.w3c.dom.Element;\n+import org.w3c.dom.Node;\n+\n+import uk.org.taverna.scufl2.api.annotation.Revision;\n+\n+public class TestRevisionSerialization {\n+\n+\tprivate static final String PROV = \"http://www.w3.org/ns/prov#\";\n+\tprotected URI example = URI.create(\"http://example.com/\");\n+\tprotected URI r0 = example.resolve(\"r0\");\n+\tprotected URI r1 = example.resolve(\"r1\");\n+\tprotected URI r2 = example.resolve(\"r2\");\n+\tprotected URI r3 = example.resolve(\"r3\");\n+\n+\tprivate PropertyResourceSerialiser serialiser;\n+\tprivate Revision rev1;\n+\tprivate Revision rev2;\n+\tprivate Revision rev3;\n+\tprivate GregorianCalendar now;\n+\n+\t@Before\n+\tpublic void makeVisitor() {\n+\t\tserialiser = new PropertyResourceSerialiser(URI.create(\"/\"));\n+\t}\n+\n+\t@Before\n+\tpublic void makePropResource() {\n+\t\trev1 = new Revision(r1);\n+\t\trev1.setPreviousRevision(r0);\n+\t\trev2 = new Revision(r2, rev1);\n+\t\trev3 = new Revision(r3, rev2);\n+\t\trev3.addCreator(URI.create(\"http://example.com/bob\"));\n+\t\tnow = new GregorianCalendar();\n+\t\trev3.setCreated(now);\n+\t}\n+\n+\t@Test\n+\tpublic void serializingRevision() throws Exception {\n+\t\trev3.accept(serialiser);\n+\t\tElement rev3Entity = serialiser.getRootElement();\n+\t\tassertEquals(r3.toASCIIString(),\n+\t\t\t\trev3Entity.getAttributeNS(PropertyResourceSerialiser.RDF, \"about\"));\n+\t\tassertEquals(3, rev3Entity.getChildNodes().getLength());\n+\n+\t\tassertEquals(PROV, rev3Entity.getNamespaceURI());\n+\t\tassertEquals(\"Entity\", rev3Entity.getTagName());\n+\t\t\n+\t\tElement wasRevisionOf = (Element) rev3Entity.getElementsByTagNameNS(PROV,\n+\t\t\t\t\"wasRevisionOf\").item(0);\n+\t\tElement rev2Entity = (Element) wasRevisionOf.getChildNodes().item(0);\n+\t\tassertEquals(PROV, rev2Entity.getNamespaceURI());\n+\t\tassertEquals(\"Entity\", rev2Entity.getTagName());\n+\t\tassertEquals(r2.toASCIIString(),\n+\t\t\t\trev2Entity.getAttributeNS(PropertyResourceSerialiser.RDF, \"about\"));\n+\t\t\n+\t\tElement wasRevisionOf2 = (Element) rev2Entity.getElementsByTagNameNS(PROV,\n+\t\t\t\t\"wasRevisionOf\").item(0);\n+\t\tElement rev1Entity = (Element) wasRevisionOf2.getChildNodes().item(0);\n+\t\tassertEquals(PROV, rev1Entity.getNamespaceURI());\n+\t\tassertEquals(\"Entity\", rev1Entity.getTagName());\n+\t\tassertEquals(r1.toASCIIString(),\n+\t\t\t\trev1Entity.getAttributeNS(PropertyResourceSerialiser.RDF, \"about\"));\n+\t\t\n+\t\t\n+\t\tElement qualifiedGeneration = (Element) rev3Entity.getElementsByTagNameNS(PROV,\n+\t\t\t\t\"qualifiedGeneration\").item(0);\n+\t\tassertEquals(0, qualifiedGeneration.getAttributes().getLength());\n+\t\tassertEquals(1, qualifiedGeneration.getChildNodes().getLength());\n+\t\tElement atTime = (Element) qualifiedGeneration.getChildNodes().item(0).getChildNodes().item(0);\n+\t\tassertEquals(\"atTime\", atTime.getTagName());\n+\t\t\n+\t\t\n+\t\t\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-rdfxml/src/test/java/uk/org/taverna/scufl2/rdfxml/TestRevisionSerialization.java",
                "sha": "54f56c50b0de229c640f3e2f15ac887169fb27eb",
                "status": "added"
            },
            {
                "additions": 65,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-scufl/pom.xml",
                "changes": 129,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-scufl/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 64,
                "filename": "scufl2-scufl/pom.xml",
                "patch": "@@ -1,64 +1,65 @@\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n-  <modelVersion>4.0.0</modelVersion>\n-  <parent>\n-    <groupId>uk.org.taverna.scufl2</groupId>\n-    <artifactId>scufl2</artifactId>\n-    <version>0.9-SNAPSHOT</version>\n-  </parent>\n-  <artifactId>scufl2-scufl</artifactId>\n-  <packaging>bundle</packaging>\n-  <name>Taverna Scufl 2 SCUFL parser</name>\n-  \t<build>\n-\t\t<plugins>\n-\t\t\t<plugin>\n-\t\t\t\t<groupId>org.apache.felix</groupId>\n-\t\t\t\t<artifactId>maven-bundle-plugin</artifactId>\n-\t\t\t\t<extensions>true</extensions>\n-\t\t\t</plugin>\n-\t\t\t<plugin>\n-\t\t\t\t<groupId>org.codehaus.mojo</groupId>\n-\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\n-\t\t\t\t<executions>\n-\t\t\t\t\t<execution>\n-\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t<goal>xjc</goal>\n-\t\t\t\t\t\t</goals>\n-\t\t\t\t\t</execution>\n-\t\t\t\t</executions>\n-\t\t\t\t<configuration>\n-\t\t\t\t\t<packageName>uk.org.taverna.scufl2.xml.scufl.jaxb</packageName>\n-\t\t\t\t\t<schemaDirectory>src/main/resources/uk/org/taverna/scufl2/translator/scufl/xsd/</schemaDirectory>\n-\t\t\t\t</configuration>\n-\t\t\t</plugin>\n-\t\t</plugins>\n-\t</build>\n- \t<dependencies>\n-\t\t<dependency>\n-\t\t\t<groupId>${project.groupId}</groupId>\n-\t\t\t<artifactId>scufl2-api</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>com.sun.xml.bind</groupId>\n-\t\t\t<artifactId>jaxb-impl</artifactId>\n-\t\t\t<type>jar</type>\n-\t\t\t<optional>true</optional>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>commons-io</groupId>\n-\t\t\t<artifactId>commons-io</artifactId>\n-\t\t\t<type>jar</type>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>org.jdom</groupId>\n-\t\t\t<artifactId>jdom</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>jaxen</groupId>\n-\t\t\t<artifactId>jaxen</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t</dependencies> \n-</project>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n+  <modelVersion>4.0.0</modelVersion>\r\n+  <parent>\r\n+    <groupId>uk.org.taverna.scufl2</groupId>\r\n+    <artifactId>scufl2</artifactId>\r\n+    <version>0.11.0-SNAPSHOT</version>\r\n+  </parent>\r\n+  <artifactId>scufl2-scufl</artifactId>\r\n+  <packaging>bundle</packaging>\r\n+  <name>Taverna Scufl 2 SCUFL parser</name>\r\n+  <description>Parse Taverna 1.x workflows (Status: Experimental)</description>\r\n+  <build>\r\n+\t\t<plugins>\r\n+\t\t\t<plugin>\r\n+\t\t\t\t<groupId>org.apache.felix</groupId>\r\n+\t\t\t\t<artifactId>maven-bundle-plugin</artifactId>\r\n+\t\t\t\t<extensions>true</extensions>\r\n+\t\t\t</plugin>\r\n+\t\t\t<plugin>\r\n+\t\t\t\t<groupId>org.codehaus.mojo</groupId>\r\n+\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\r\n+\t\t\t\t<executions>\r\n+\t\t\t\t\t<execution>\r\n+\t\t\t\t\t\t<goals>\r\n+\t\t\t\t\t\t\t<goal>xjc</goal>\r\n+\t\t\t\t\t\t</goals>\r\n+\t\t\t\t\t</execution>\r\n+\t\t\t\t</executions>\r\n+\t\t\t\t<configuration>\r\n+\t\t\t\t\t<packageName>uk.org.taverna.scufl2.xml.scufl.jaxb</packageName>\r\n+\t\t\t\t\t<schemaDirectory>src/main/resources/uk/org/taverna/scufl2/translator/scufl/xsd/</schemaDirectory>\r\n+\t\t\t\t</configuration>\r\n+\t\t\t</plugin>\r\n+\t\t</plugins>\r\n+\t</build>\r\n+ \t<dependencies>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-api</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>com.sun.xml.bind</groupId>\r\n+\t\t\t<artifactId>jaxb-impl</artifactId>\r\n+\t\t\t<type>jar</type>\r\n+\t\t\t<optional>true</optional>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>commons-io</groupId>\r\n+\t\t\t<artifactId>commons-io</artifactId>\r\n+\t\t\t<type>jar</type>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>org.jdom</groupId>\r\n+\t\t\t<artifactId>jdom</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>jaxen</groupId>\r\n+\t\t\t<artifactId>jaxen</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t</dependencies> \r\n+</project>\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-scufl/pom.xml",
                "sha": "ceb560c41c021be2db30ff4011a61ce4c2ef1cbb",
                "status": "modified"
            },
            {
                "additions": 119,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/pom.xml",
                "changes": 184,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 65,
                "filename": "scufl2-t2flow/pom.xml",
                "patch": "@@ -1,65 +1,119 @@\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n-\t<modelVersion>4.0.0</modelVersion>\n-\t<parent>\n-\t\t<groupId>uk.org.taverna.scufl2</groupId>\n-\t\t<artifactId>scufl2</artifactId>\n-\t\t<version>0.9-SNAPSHOT</version>\n-\t</parent>\n-\t<artifactId>scufl2-t2flow</artifactId>\n-\t<packaging>bundle</packaging>\n-\t<name>Taverna Scufl 2 t2Flow parser</name>\n-\t<description>Parser for .t2flow file format</description>\n-\t<build>\n-\t\t<plugins>\n-\t\t\t<plugin>\n-\t\t\t\t<groupId>org.apache.felix</groupId>\n-\t\t\t\t<artifactId>maven-bundle-plugin</artifactId>\n-\t\t\t\t<extensions>true</extensions>\n-\t\t\t</plugin>\n-\t\t\t<plugin>\n-\t\t\t\t<groupId>org.codehaus.mojo</groupId>\n-\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\n-\t\t\t\t<executions>\n-\t\t\t\t\t<execution>\n-\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t<goal>xjc</goal>\n-\t\t\t\t\t\t</goals>\n-\t\t\t\t\t</execution>\n-\t\t\t\t</executions>\n-\t\t\t\t<configuration>\n-\t\t\t\t\t<packageName>uk.org.taverna.scufl2.xml.t2flow.jaxb</packageName>\n-\t\t\t\t\t<schemaDirectory>src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/</schemaDirectory>\n-\t\t\t\t</configuration>\n-\t\t\t</plugin>\n-\t\t</plugins>\n-\t</build>\n-\t<dependencies>\n-\t\t<dependency>\n-\t\t\t<groupId>${project.groupId}</groupId>\n-\t\t\t<artifactId>scufl2-api</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>com.sun.xml.bind</groupId>\n-\t\t\t<artifactId>jaxb-impl</artifactId>\n-\t\t\t<type>jar</type>\n-\t\t\t<optional>true</optional>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>commons-io</groupId>\n-\t\t\t<artifactId>commons-io</artifactId>\n-\t\t\t<type>jar</type>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>org.jdom</groupId>\n-\t\t\t<artifactId>jdom</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>jaxen</groupId>\n-\t\t\t<artifactId>jaxen</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t</dependencies>\n-</project>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\r\n+\t<modelVersion>4.0.0</modelVersion>\r\n+\t<parent>\r\n+\t\t<groupId>uk.org.taverna.scufl2</groupId>\r\n+\t\t<artifactId>scufl2</artifactId>\r\n+\t\t<version>0.11.0-SNAPSHOT</version>\r\n+\t</parent>\r\n+\t<artifactId>scufl2-t2flow</artifactId>\r\n+\t<packaging>bundle</packaging>\r\n+\t<name>Taverna Scufl 2 t2flow parser</name>\r\n+\t<description>Parser for .t2flow file format (Taverna 2.x)</description>\r\n+\t<build>\r\n+\t\t<plugins>\r\n+\t\t\t<plugin>\r\n+\t\t\t\t<groupId>org.apache.felix</groupId>\r\n+\t\t\t\t<artifactId>maven-bundle-plugin</artifactId>\r\n+\t\t\t\t<extensions>true</extensions>\r\n+\t\t\t</plugin>\r\n+\t\t\t<plugin>\r\n+\t\t\t\t<groupId>org.codehaus.mojo</groupId>\r\n+\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\r\n+\t\t\t\t<executions>\r\n+\t\t\t\t\t<execution>\r\n+\t\t\t\t\t\t<goals>\r\n+\t\t\t\t\t\t\t<goal>xjc</goal>\r\n+\t\t\t\t\t\t</goals>\r\n+\t\t\t\t\t</execution>\r\n+\t\t\t\t</executions>\r\n+\t\t\t\t<configuration>\r\n+\t\t\t\t\t<packageName>uk.org.taverna.scufl2.xml.t2flow.jaxb</packageName>\r\n+\t\t\t\t\t<schemaDirectory>src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/</schemaDirectory>\r\n+\t\t\t\t</configuration>\r\n+\t\t\t</plugin>\r\n+\t\t\t<plugin>\r\n+\t\t\t\t<!-- So that Eclipse m2e (with the buildhelper m2e connector) can find \r\n+\t\t\t\t\tthe generated sources -->\r\n+\t\t\t\t<groupId>org.codehaus.mojo</groupId>\r\n+\t\t\t\t<artifactId>build-helper-maven-plugin</artifactId>\r\n+\t\t\t\t<version>1.7</version>\r\n+\t\t\t\t<executions>\r\n+\t\t\t\t\t<execution>\r\n+\t\t\t\t\t\t<id>add-source</id>\r\n+\t\t\t\t\t\t<phase>generate-sources</phase>\r\n+\t\t\t\t\t\t<goals>\r\n+\t\t\t\t\t\t\t<goal>add-source</goal>\r\n+\t\t\t\t\t\t</goals>\r\n+\t\t\t\t\t\t<configuration>\r\n+\t\t\t\t\t\t\t<sources>\r\n+\t\t\t\t\t\t\t\t<source>${project.build.directory}/generated-sources/jaxb/</source>\r\n+\t\t\t\t\t\t\t</sources>\r\n+\t\t\t\t\t\t</configuration>\r\n+\t\t\t\t\t</execution>\r\n+\t\t\t\t</executions>\r\n+\t\t\t</plugin>\r\n+\t\t</plugins>\r\n+\r\n+\t\t<pluginManagement>\r\n+\t\t\t<plugins>\r\n+\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings \r\n+\t\t\t\t\tonly. It has no influence on the Maven build itself. -->\r\n+\t\t\t\t<plugin>\r\n+\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\r\n+\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\r\n+\t\t\t\t\t<version>1.0.0</version>\r\n+\t\t\t\t\t<configuration>\r\n+\t\t\t\t\t\t<lifecycleMappingMetadata>\r\n+\t\t\t\t\t\t\t<pluginExecutions>\r\n+\t\t\t\t\t\t\t\t<pluginExecution>\r\n+\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\r\n+\t\t\t\t\t\t\t\t\t\t<groupId>org.codehaus.mojo</groupId>\r\n+\t\t\t\t\t\t\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\r\n+\t\t\t\t\t\t\t\t\t\t<versionRange>[1.3.1,)</versionRange>\r\n+\t\t\t\t\t\t\t\t\t\t<goals>\r\n+\t\t\t\t\t\t\t\t\t\t\t<goal>xjc</goal>\r\n+\t\t\t\t\t\t\t\t\t\t</goals>\r\n+\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\r\n+\t\t\t\t\t\t\t\t\t<action>\r\n+\t\t\t\t\t\t\t\t\t\t<execute>\r\n+\t\t\t\t\t\t\t\t\t\t\t<runOnIncremental>false</runOnIncremental>\r\n+\t\t\t\t\t\t\t\t\t\t</execute>\r\n+\t\t\t\t\t\t\t\t\t</action>\r\n+\t\t\t\t\t\t\t\t</pluginExecution>\r\n+\t\t\t\t\t\t\t</pluginExecutions>\r\n+\t\t\t\t\t\t</lifecycleMappingMetadata>\r\n+\t\t\t\t\t</configuration>\r\n+\t\t\t\t</plugin>\r\n+\t\t\t</plugins>\r\n+\t\t</pluginManagement>\r\n+\t</build>\r\n+\t<dependencies>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-api</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>com.sun.xml.bind</groupId>\r\n+\t\t\t<artifactId>jaxb-impl</artifactId>\r\n+\t\t\t<type>jar</type>\r\n+\t\t\t<optional>true</optional>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>commons-io</groupId>\r\n+\t\t\t<artifactId>commons-io</artifactId>\r\n+\t\t\t<type>jar</type>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>org.jdom</groupId>\r\n+\t\t\t<artifactId>jdom</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>jaxen</groupId>\r\n+\t\t\t<artifactId>jaxen</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t</dependencies>\r\n+</project>\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/pom.xml",
                "sha": "179d0a49c346078f39f3fd2f7b4ff1f2f65e025c",
                "status": "modified"
            },
            {
                "additions": 256,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "changes": 290,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 34,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "patch": "@@ -6,15 +6,26 @@\n import java.net.URI;\r\n import java.net.URISyntaxException;\r\n import java.net.URL;\r\n+import java.text.ParseException;\r\n+import java.text.SimpleDateFormat;\r\n import java.util.ArrayList;\r\n+import java.util.Calendar;\r\n import java.util.Collection;\r\n+import java.util.Date;\r\n+import java.util.GregorianCalendar;\r\n import java.util.HashMap;\r\n import java.util.HashSet;\r\n import java.util.List;\r\n+import java.util.Locale;\r\n import java.util.Map;\r\n+import java.util.Map.Entry;\r\n import java.util.ServiceLoader;\r\n import java.util.Set;\r\n+import java.util.SortedMap;\r\n import java.util.SortedSet;\r\n+import java.util.TimeZone;\r\n+import java.util.TreeMap;\r\n+import java.util.UUID;\r\n import java.util.concurrent.atomic.AtomicInteger;\r\n import java.util.logging.Level;\r\n import java.util.logging.Logger;\r\n@@ -31,10 +42,13 @@\n import org.w3c.dom.Element;\r\n import org.xml.sax.SAXException;\r\n \r\n+import uk.org.taverna.scufl2.api.annotation.Annotation;\r\n+import uk.org.taverna.scufl2.api.annotation.Revision;\r\n import uk.org.taverna.scufl2.api.common.Named;\r\n import uk.org.taverna.scufl2.api.common.NamedSet;\r\n import uk.org.taverna.scufl2.api.common.Scufl2Tools;\r\n import uk.org.taverna.scufl2.api.common.URITools;\r\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\r\n import uk.org.taverna.scufl2.api.configurations.Configuration;\r\n import uk.org.taverna.scufl2.api.container.WorkflowBundle;\r\n import uk.org.taverna.scufl2.api.core.BlockingControlLink;\r\n@@ -62,10 +76,15 @@\n import uk.org.taverna.scufl2.api.profiles.Profile;\r\n import uk.org.taverna.scufl2.api.property.PropertyLiteral;\r\n import uk.org.taverna.scufl2.api.property.PropertyObject;\r\n+import uk.org.taverna.scufl2.api.property.PropertyResource;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.Activity;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.AnnotatedGranularDepthPort;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.AnnotatedGranularDepthPorts;\r\n+import uk.org.taverna.scufl2.xml.t2flow.jaxb.AnnotatedPort;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.AnnotatedPorts;\r\n+import uk.org.taverna.scufl2.xml.t2flow.jaxb.AnnotationAssertionImpl.NetSfTavernaT2AnnotationAnnotationAssertionImpl;\r\n+import uk.org.taverna.scufl2.xml.t2flow.jaxb.AnnotationChain;\r\n+import uk.org.taverna.scufl2.xml.t2flow.jaxb.Annotations;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.Condition;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.Conditions;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.ConfigBean;\r\n@@ -85,7 +104,6 @@\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.LinkType;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.Mapping;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.ObjectFactory;\r\n-import uk.org.taverna.scufl2.xml.t2flow.jaxb.Port;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.PortProduct;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.Processors;\r\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.Raven;\r\n@@ -94,6 +112,7 @@\n \r\n public class T2FlowParser {\r\n \r\n+\tprivate static final String IDENTIFICATION_ASSERTION = \"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\";\r\n \tprivate static final String T2FLOW_EXTENDED_XSD = \"xsd/t2flow-extended.xsd\";\r\n \t@SuppressWarnings(\"unused\")\r\n \tprivate static final String T2FLOW_XSD = \"xsd/t2flow.xsd\";\r\n@@ -106,6 +125,13 @@\n \r\n \tpublic static final URI configBeanURI = URI\r\n \t\t\t.create(\"http://ns.taverna.org.uk/2010/xml/t2flow/configbean/\");\r\n+\t\r\n+\tpublic static final URI t2flowParserURI = URI.create(\"http://ns.taverna.org.uk/2012/scufl2/t2flowParser\");\r\n+\t\r\n+\t// TODO: Find better example predicate\r\n+\tpublic static final URI exampleDataURI = URI\r\n+\t\t\t.create(\"http://biocatalogue.org/attribute/exampleData\");\r\n+\t\r\n \r\n \tpublic static <T extends Named> T findNamed(Collection<T> namedObjects,\r\n \t\t\tString name) {\r\n@@ -143,6 +169,7 @@ public final void setValidating(boolean validating) {\n \r\n \tprotected ServiceLoader<T2Parser> discoveredT2Parsers;\r\n \tprotected final ThreadLocal<Unmarshaller> unmarshaller;\r\n+\tprivate Map<String, URI> predicates;\r\n \r\n \tpublic T2FlowParser() throws JAXBException {\r\n \t\tjaxbContext = JAXBContext.newInstance(ObjectFactory.class);\r\n@@ -312,21 +339,28 @@ private URI mapTypeFromRaven(Raven raven, String activityClass)\n \t\treturn t2Parser.mapT2flowRavenIdToScufl2URI(classURI);\r\n \t}\r\n \r\n+\tprotected uk.org.taverna.scufl2.api.activity.Activity parseActivityAndAddToProfile(\r\n+\t\t\tActivity origActivity) throws ReaderException {\r\n+\t\tuk.org.taverna.scufl2.api.activity.Activity newActivity = parseActivity(origActivity);\r\n+\t\tnewActivity.setName(parserState.get().getCurrentProcessorBinding()\r\n+\t\t\t\t.getName());\r\n+\t\tparserState.get().getCurrentProfile().getActivities()\r\n+\t\t\t\t.addWithUniqueName(newActivity);\r\n+\t\tnewActivity.setParent(parserState.get().getCurrentProfile());\r\n+\t\treturn newActivity;\r\n+\t}\r\n+\r\n \tprotected uk.org.taverna.scufl2.api.activity.Activity parseActivity(\r\n \t\t\tActivity origActivity) throws ReaderException {\r\n \t\tRaven raven = origActivity.getRaven();\r\n \t\tString activityClass = origActivity.getClazz();\r\n \t\tURI activityId = mapTypeFromRaven(raven, activityClass);\r\n \t\tuk.org.taverna.scufl2.api.activity.Activity newActivity = new uk.org.taverna.scufl2.api.activity.Activity();\r\n \t\tnewActivity.setConfigurableType(activityId);\r\n-\t\tnewActivity.setName(parserState.get().getCurrentProcessorBinding()\r\n-\t\t\t\t.getName());\r\n-\t\tparserState.get().getCurrentProfile().getActivities()\r\n-\t\t\t\t.addWithUniqueName(newActivity);\r\n-\t\tnewActivity.setParent(parserState.get().getCurrentProfile());\r\n \t\treturn newActivity;\r\n \t}\r\n \r\n+\t\r\n \tprotected void parseActivityBinding(Activity origActivity,\r\n \t\t\tint activityPosition) throws ReaderException, JAXBException {\r\n \t\tProcessorBinding processorBinding = new ProcessorBinding();\r\n@@ -339,7 +373,7 @@ protected void parseActivityBinding(Activity origActivity,\n \t\tprocessorBinding.setBoundProcessor(parserState.get()\r\n \t\t\t\t.getCurrentProcessor());\r\n \t\tparserState.get().setCurrentProcessorBinding(processorBinding);\r\n-\t\tuk.org.taverna.scufl2.api.activity.Activity newActivity = parseActivity(origActivity);\r\n+\t\tuk.org.taverna.scufl2.api.activity.Activity newActivity = parseActivityAndAddToProfile(origActivity);\r\n \t\tparserState.get().setCurrentActivity(newActivity);\r\n \r\n \t\tparserState.get().getCurrentProfile().getActivities().add(newActivity);\r\n@@ -349,7 +383,7 @@ protected void parseActivityBinding(Activity origActivity,\n \t\tparserState.get().setCurrentConfigurable(newActivity);\r\n \r\n \t\ttry {\r\n-\t\t\tparseConfiguration(origActivity.getConfigBean(),\r\n+\t\t\tparseConfigurationAndAddToProfile(origActivity.getConfigBean(),\r\n \t\t\t\t\tConfigures.activity);\r\n \t\t} catch (JAXBException e) {\r\n \t\t\tif (isStrict()) {\r\n@@ -367,24 +401,44 @@ protected void parseActivityBinding(Activity origActivity,\n \t\tparserState.get().setCurrentProcessorBinding(null);\r\n \t}\r\n \r\n-\tenum Configures {\r\n+\tprotected enum Configures {\r\n \t\tactivity, dispatchLayer\r\n \t};\r\n \r\n-\tprotected void parseConfiguration(ConfigBean configBean,\r\n+\tprotected void parseConfigurationAndAddToProfile(ConfigBean configBean,\r\n \t\t\tConfigures configures) throws JAXBException, ReaderException {\r\n+\t\tConfiguration configuration = parseConfiguration(configBean);\r\n+\t\tif (configuration == null) { \r\n+\t\t\treturn;\r\n+\t\t}\r\n+\t\tif (configures == Configures.activity) {\r\n+\t\t\tconfiguration.setName(parserState.get().getCurrentActivity()\r\n+\t\t\t\t\t.getName());\r\n+\t\t} else {\r\n+\t\t\tDispatchStackLayer layer = (DispatchStackLayer) parserState.get().getCurrentConfigurable();\r\n+\t\t\tconfiguration.setName(parserState.get().getCurrentProcessor().getName() +\r\n+\t\t\t\t\t\"-dispatch-\" + parserState.get().getCurrentDispatchStack().size());\r\n \r\n+\t\t}\r\n+\t\tparserState.get().getCurrentProfile().getConfigurations()\r\n+\t\t\t\t.addWithUniqueName(configuration);\r\n+\t\tconfiguration.setConfigures(parserState.get().getCurrentConfigurable());\r\n+\t\tparserState.get().getCurrentProfile().getConfigurations().addWithUniqueName(configuration);\r\n+\t\t\r\n+\t}\r\n+\t\r\n+\tprotected Configuration parseConfiguration(ConfigBean configBean) throws JAXBException, ReaderException {\r\n \t\t// Placeholder to check later if no configuration have been provided\r\n \t\tConfiguration UNCONFIGURED = new Configuration();\r\n \t\t\r\n \t\tConfiguration configuration = UNCONFIGURED;\r\n \t\tif (parserState.get().getCurrentT2Parser() == null) {\r\n-\t\t\tString message = \"No config parser for \" + configures\r\n+\t\t\tString message = \"No config parser for \" \r\n \t\t\t\t\t+ parserState.get().getCurrentConfigurable();\r\n \t\t\tif (isStrict()) {\r\n \t\t\t\tthrow new ReaderException(message);\r\n \t\t\t}\r\n-\t\t\treturn;\r\n+\t\t\treturn null;\r\n \t\t}\r\n \r\n \t\ttry {\r\n@@ -397,14 +451,13 @@ protected void parseConfiguration(ConfigBean configBean,\n \t\t}\r\n \t\tif (configuration == null) {\r\n \t\t\t// Perfectly valid - true for say Invoke layer\r\n-\t\t\treturn;\r\n+\t\t\treturn null;\r\n \t\t}\r\n \t\t\r\n \t\tif (configuration == UNCONFIGURED) {\r\n \t\t\tif (isStrict()) {\r\n \t\t\t\tthrow new ReaderException(\"No configuration returned from \"\r\n-\t\t\t\t\t\t+ parserState.get().getCurrentT2Parser() + \" for \"\r\n-\t\t\t\t\t\t+ configures\r\n+\t\t\t\t\t\t+ parserState.get().getCurrentT2Parser() + \" for \"\t\t\t\t\t\t\r\n \t\t\t\t\t\t+ parserState.get().getCurrentConfigurable());\r\n \t\t\t}\r\n \t\t\t// We'll have to fake it\r\n@@ -421,22 +474,10 @@ protected void parseConfiguration(ConfigBean configBean,\n \t\t\t// literal.setLiteralValue(configBean.getAny().toString());\r\n \t\t\t// literal.setLiteralType(PropertyLiteral.XML_LITERAL);\r\n \t\t\tproperties.get(fallBackURI).add(literal);\r\n-\r\n \t\t}\r\n+\t\treturn configuration;\r\n+\t\t\r\n \t\t\r\n-\t\tif (configures == Configures.activity) {\r\n-\t\t\tconfiguration.setName(parserState.get().getCurrentActivity()\r\n-\t\t\t\t\t.getName());\r\n-\t\t} else {\r\n-\t\t\tDispatchStackLayer layer = (DispatchStackLayer) parserState.get().getCurrentConfigurable();\r\n-\t\t\tconfiguration.setName(parserState.get().getCurrentProcessor().getName() +\r\n-\t\t\t\t\t\"-dispatch-\" + parserState.get().getCurrentDispatchStack().size());\r\n-\r\n-\t\t}\r\n-\t\tparserState.get().getCurrentProfile().getConfigurations()\r\n-\t\t\t\t.addWithUniqueName(configuration);\r\n-\t\tconfiguration.setConfigures(parserState.get().getCurrentConfigurable());\r\n-\t\tparserState.get().getCurrentProfile().getConfigurations().addWithUniqueName(configuration);\r\n \t}\r\n \r\n \tpublic Unmarshaller getUnmarshaller() {\r\n@@ -592,12 +633,176 @@ protected Workflow parseDataflow(Dataflow df, Workflow wf)\n \t\twf.setOutputPorts(parseOutputPorts(df.getOutputPorts()));\r\n \t\twf.setProcessors(parseProcessors(df.getProcessors()));\r\n \t\twf.setDataLinks(parseDatalinks(df.getDatalinks()));\r\n-\t\twf.setControlLinks(parseControlLinks(df.getConditions()));\r\n-\t\t// TODO: annotations\r\n+\t\twf.setControlLinks(parseControlLinks(df.getConditions()));\t\t\r\n+\t\tRevision revision = parseIdentificationAnnotations(df.getAnnotations());\r\n+\t\tif (revision != null) {\r\n+\t\t\twf.setCurrentRevision(revision);\r\n+\t\t}\r\n+\t\tparseAnnotations(wf, df.getAnnotations());\r\n+\r\n \t\tparserState.get().setCurrentWorkflow(null);\r\n \t\treturn wf;\r\n \t}\r\n \r\n+\tpublic void parseAnnotations(WorkflowBean annotatedBean, Annotations annotations) {\r\n+\t\t\r\n+\t\t//logger.fine(\"Checking annotations for \" + annotatedSubject);\r\n+\t\t\r\n+\t\tMap<String, NetSfTavernaT2AnnotationAnnotationAssertionImpl> annotationElems = new HashMap<String, NetSfTavernaT2AnnotationAnnotationAssertionImpl>();\r\n+\t\tif (annotations == null || annotations.getAnnotationChainOrAnnotationChain22() == null) {\r\n+\t\t\treturn;\r\n+\t\t}\r\n+\t\tfor (JAXBElement<AnnotationChain> el : annotations\r\n+\t\t\t\t.getAnnotationChainOrAnnotationChain22()) {\r\n+\t\t\tNetSfTavernaT2AnnotationAnnotationAssertionImpl ann = el.getValue()\r\n+\t\t\t\t\t.getNetSfTavernaT2AnnotationAnnotationChainImpl()\r\n+\t\t\t\t\t.getAnnotationAssertions()\r\n+\t\t\t\t\t.getNetSfTavernaT2AnnotationAnnotationAssertionImpl();\r\n+\t\t\tString annClass = ann.getAnnotationBean().getClazz();\r\n+\t\t\tif (annotationElems.containsKey(annClass) && annotationElems.get(annClass).getDate().compareToIgnoreCase(ann.getDate()) > 0) {\r\n+\t\t\t\t// ann.getDate() is less than current 'latest' annotation, skip\r\n+\t\t\t\tcontinue;\r\n+\t\t\t}\r\n+\t\t\tannotationElems.put(annClass, ann);\r\n+\t\t}\r\n+\t\t\r\n+\t\t\r\n+\t\tfor (String clazz : annotationElems.keySet()) {\t\t\t\r\n+\t\t\tNetSfTavernaT2AnnotationAnnotationAssertionImpl ann = annotationElems.get(clazz);\r\n+\t\t\tCalendar cal = parseDate(ann.getDate());\t\t\t\t\t\r\n+\t\t\tString value = null;\r\n+\t\t\tfor (Object obj : ann.getAnnotationBean().getAny()) {\r\n+\t\t\t\tif (!(obj instanceof Element)) {\r\n+\t\t\t\t\tcontinue;\r\n+\t\t\t\t}\r\n+\t\t\t\tElement elem = (Element) obj;\r\n+\t\t\t\tif (elem.getNamespaceURI() == null\r\n+\t\t\t\t\t\t&& elem.getLocalName().equals(\"text\")) {\r\n+\t\t\t\t\tvalue = elem.getTextContent().trim();\r\n+\t\t\t\t\tbreak;\r\n+\t\t\t\t}\r\n+\t\t\t}\r\n+\t\t\tif (value != null) {\r\n+\t\t\t\t// Add the annotation\r\n+\t\t\t\tAnnotation annotation = new Annotation();\r\n+\t\t\t\tannotation.setParent(parserState.get().getCurrentWorkflowBundle());\r\n+\t\t\t\t\r\n+\t\t\t\t\r\n+\t\t\t\tannotation.setTarget(annotatedBean);\r\n+\t\t\t\tannotation.setAnnotated(cal);\r\n+\t\t\t\t//annotation.setAnnotator();\r\n+\t\t\t\tannotation.setGenerator(t2flowParserURI);\r\n+\t\t\t\tannotation.setGenerated(new GregorianCalendar());\r\n+\t\t\t\t\r\n+\t\t\t\tPropertyResource p = new PropertyResource();\r\n+\t\t\t\tURI annotatedSubject = uriTools.relativeUriForBean(annotatedBean,\r\n+\t\t\t\t\t\tannotation);\r\n+\t\t\t\tp.setResourceURI(annotatedSubject);\r\n+\t\t\t\tURI predicate = getPredicatesForClass().get(clazz);\r\n+\t\t\t\tif (predicate != null) {\r\n+\t\t\t\t\tp.addPropertyAsString(predicate, value);\r\n+\t\t\t\t}\r\n+\t\t\t\tannotation.getBodyStatements().add(p);\r\n+\t\t\t\t\r\n+\t\t\t}\r\n+\t\t}\r\n+\t}\r\n+\r\n+\tprivate Map<String, URI> getPredicatesForClass() {\r\n+\t\tif (this.predicates != null) {\r\n+\t\t\treturn this.predicates;\r\n+\t\t}\r\n+\t\tsynchronized (this) {\r\n+\t\t\tif (this.predicates != null) {\r\n+\t\t\t\treturn this.predicates;\r\n+\t\t\t}\r\n+\t\t\tMap<String, URI> predicates = new HashMap<String, URI>();\r\n+\t\t\tpredicates.put(\"net.sf.taverna.t2.annotation.annotationbeans.DescriptiveTitle\", \r\n+\t\t\t\t\tURI.create(\"http://purl.org/dc/terms/title\"));\r\n+\t\t\t\r\n+\t\t\tpredicates.put(\"net.sf.taverna.t2.annotation.annotationbeans.Author\", \r\n+\t\t\t\t\tURI.create(\"http://purl.org/dc/elements/1.1/creator\"));\r\n+\t\t\t\r\n+\t\t\tpredicates.put(\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\", \r\n+\t\t\t\t\tURI.create(\"http://purl.org/dc/terms/description\"));\r\n+\t\t\t\r\n+\t\t\tpredicates.put(\"net.sf.taverna.t2.annotation.annotationbeans.MimeType\", \r\n+\t\t\t\t\tURI.create(\"http://purl.org/dc/elements/1.1/format\"));\r\n+\t\t\t\r\n+\t\t\tpredicates.put(\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\", \r\n+\t\t\t\t\texampleDataURI);\r\n+\t\t\tthis.predicates = predicates;\r\n+\t\t\treturn this.predicates;\r\n+\t\t}\r\n+\t}\r\n+\r\n+\tprotected Revision parseIdentificationAnnotations(Annotations annotations) {\r\n+\t\tSortedMap<Calendar, UUID> revisions = new TreeMap<Calendar, UUID>();\r\n+\t\tif (annotations == null || annotations.getAnnotationChainOrAnnotationChain22() == null) {\r\n+\t\t\treturn null;\r\n+\t\t}\r\n+\t\tfor (JAXBElement<AnnotationChain> el : annotations\r\n+\t\t\t\t.getAnnotationChainOrAnnotationChain22()) {\r\n+\t\t\tNetSfTavernaT2AnnotationAnnotationAssertionImpl ann = el.getValue()\r\n+\t\t\t\t\t.getNetSfTavernaT2AnnotationAnnotationChainImpl()\r\n+\t\t\t\t\t.getAnnotationAssertions()\r\n+\t\t\t\t\t.getNetSfTavernaT2AnnotationAnnotationAssertionImpl();\r\n+\t\t\tString annClass = ann.getAnnotationBean().getClazz();\r\n+\t\t\tif (!annClass\r\n+\t\t\t\t\t.equals(IDENTIFICATION_ASSERTION)) {\r\n+\t\t\t\tcontinue;\r\n+\t\t\t}\r\n+\t\t\tfor (Object obj : ann.getAnnotationBean().getAny()) {\r\n+\t\t\t\tif (!(obj instanceof Element)) {\r\n+\t\t\t\t\tcontinue;\r\n+\t\t\t\t}\r\n+\t\t\t\tElement elem = (Element) obj;\r\n+\t\t\t\tif (elem.getNamespaceURI() == null\r\n+\t\t\t\t\t\t&& elem.getLocalName().equals(\"identification\")) {\r\n+\t\t\t\t\tString uuid = elem.getTextContent().trim();\r\n+\t\t\t\t\tString date = ann.getDate();\r\n+\t\t\t\t\tCalendar cal = parseDate(date);\t\t\t\t\t\r\n+\t\t\t\t\trevisions.put(cal, UUID.fromString(uuid));\r\n+\t\t\t\t}\t\t\t\t\r\n+\t\t\t}\r\n+\t\t}\r\n+\t\t\r\n+\t\tRevision rev = null;\r\n+\t\tfor (Entry<Calendar, UUID> entry : revisions.entrySet()) {\t\t\t\r\n+\t\t\tCalendar cal = entry.getKey();\r\n+\t\t\tUUID uuid = entry.getValue();\r\n+\t\t\tURI uri = Workflow.WORKFLOW_ROOT.resolve(uuid.toString() + \"/\");\r\n+\t\t\trev = new Revision(uri, rev);\r\n+\t\t\trev.setCreated(cal);\t\t\t\r\n+\t\t}\r\n+\t\treturn rev;\r\n+\t}\r\n+\r\n+\tprivate Calendar parseDate(String dateStr) {\r\n+\t\t// Based briefly on patterns used by \r\n+\t\t// com.thoughtworks.xstream.converters.basic.DateConverter\r\n+\t\t\r\n+\t\tList<String> patterns = new ArrayList<String>();\r\n+\t\tpatterns.add(\"yyyy-MM-dd HH:mm:ss.S z\");\r\n+\t\tpatterns.add(\"yyyy-MM-dd HH:mm:ss z\");\r\n+\t\tpatterns.add(\"yyyy-MM-dd HH:mm:ssz\");\r\n+\t\tpatterns.add(\"yyyy-MM-dd HH:mm:ss.S 'UTC'\");\r\n+\t\tpatterns.add(\"yyyy-MM-dd HH:mm:ss 'UTC'\");\r\n+        Date date;\r\n+\t\tfor (String pattern : patterns) {\r\n+        \tSimpleDateFormat dateFormat = new SimpleDateFormat(pattern, Locale.ENGLISH);\r\n+        \ttry {        \t\t\r\n+\t\t\t\tdate = dateFormat.parse(dateStr);\r\n+\t\t\t\tGregorianCalendar cal = new GregorianCalendar(TimeZone.getTimeZone(\"UTC\"), Locale.ENGLISH);\r\n+\t\t\t\tcal.setTime(date);\r\n+\t\t\t\treturn cal;\r\n+\t\t\t} catch (ParseException e) {\r\n+\t\t\t\tcontinue;\r\n+\t\t\t}\r\n+        }\r\n+        throw new IllegalArgumentException(\"Can't parse date: \" + dateStr);\t\t\r\n+\t}\r\n+\r\n \tprivate Set<ControlLink> parseControlLinks(Conditions conditions)\r\n \t\t\tthrows ReaderException {\r\n \t\tSet<ControlLink> links = new HashSet<ControlLink>();\r\n@@ -619,7 +824,12 @@ protected Workflow parseDataflow(Dataflow df, Workflow wf)\n \t\t\t\t\t\t\t\t+ control);\r\n \t\t\t}\r\n \r\n-\t\t\tlinks.add(new BlockingControlLink(block, untilFinished));\r\n+\t\t\tBlockingControlLink newLink = new BlockingControlLink(block, untilFinished);\r\n+\r\n+\t\t\t// FIXME: missing from t2flow and schema\r\n+\t\t\t//parseAnnotations(newLink, condition.getAnnotations());\r\n+\r\n+\t\t\tlinks.add(newLink);\r\n \t\t}\r\n \t\treturn links;\r\n \t}\r\n@@ -659,6 +869,10 @@ protected Workflow parseDataflow(Dataflow df, Workflow wf)\n \t\t\t\t\t}\r\n \t\t\t\t\tmergeCounts.put(receiverPort, new AtomicInteger(-1));\r\n \t\t\t\t}\r\n+\r\n+\t\t\t\t// FIXME: missing from t2flow and schema\r\n+\t\t\t\t//parseAnnotations(newLink, origLink.getAnnotations());\r\n+\r\n \t\t\t\tnewLinks.add(newLink);\r\n \t\t\t} catch (ReaderException ex) {\r\n \t\t\t\tlogger.log(Level.WARNING, \"Could not translate link:\\n\"\r\n@@ -695,7 +909,7 @@ protected DispatchStackLayer parseDispatchStack(DispatchLayer dispatchLayer)\n \t\tdispatchStackLayer.setConfigurableType(typeUri);\r\n \t\tparserState.get().setCurrentConfigurable(dispatchStackLayer);\r\n \t\ttry {\r\n-\t\t\tparseConfiguration(dispatchLayer.getConfigBean(),\r\n+\t\t\tparseConfigurationAndAddToProfile(dispatchLayer.getConfigBean(),\r\n \t\t\t\t\tConfigures.dispatchLayer);\r\n \t\t} catch (JAXBException ex) {\r\n \t\t\tString message = \"Can't parse configuration for dispatch layer in \"\r\n@@ -729,6 +943,8 @@ protected DispatchStackLayer parseDispatchStack(DispatchLayer dispatchLayer)\n \t\t\t\t\tthrow new ReaderException(message);\r\n \t\t\t\t}\r\n \t\t\t}\r\n+\t\t\tparseAnnotations(newPort, originalPort.getAnnotations());\r\n+\t\t\t\r\n \t\t\tcreatedPorts.add(newPort);\r\n \t\t}\r\n \t\treturn createdPorts;\r\n@@ -799,9 +1015,12 @@ protected IterationStrategyNode parseIterationStrategyNode(\n \tprotected Set<OutputWorkflowPort> parseOutputPorts(\r\n \t\t\tAnnotatedPorts originalPorts) {\r\n \t\tSet<OutputWorkflowPort> createdPorts = new HashSet<OutputWorkflowPort>();\r\n-\t\tfor (Port originalPort : originalPorts.getPort()) {\r\n+\t\tfor (AnnotatedPort originalPort : originalPorts.getPort()) {\r\n \t\t\tOutputWorkflowPort newPort = new OutputWorkflowPort(parserState\r\n \t\t\t\t\t.get().getCurrentWorkflow(), originalPort.getName());\r\n+\r\n+\t\t\tparseAnnotations(newPort, originalPort.getAnnotations());\r\n+\r\n \t\t\tcreatedPorts.add(newPort);\r\n \t\t}\r\n \t\treturn createdPorts;\r\n@@ -852,6 +1071,9 @@ protected IterationStrategyNode parseIterationStrategyNode(\n \t\t\t\t\t.getDispatchStack()));\r\n \t\t\tnewProc.setIterationStrategyStack(parseIterationStrategyStack(origProc\r\n \t\t\t\t\t.getIterationStrategyStack()));\r\n+\t\t\tparseAnnotations(newProc, origProc.getAnnotations());\r\n+\r\n+\t\t\t\r\n \t\t\tnewProcessors.add(newProc);\r\n \t\t\tint i = 0;\r\n \t\t\tfor (Activity origActivity : origProc.getActivities().getActivity()) {\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "sha": "cdedcd3b18dea9c4fa40de0bff152ab287b740ee",
                "status": "modified"
            },
            {
                "additions": 80,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowReader.java",
                "changes": 89,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowReader.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 9,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowReader.java",
                "patch": "@@ -1,25 +1,56 @@\n package uk.org.taverna.scufl2.translator.t2flow;\n \n+import java.io.BufferedInputStream;\n import java.io.File;\n+import java.io.FileInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.net.URI;\n import java.nio.charset.Charset;\n import java.util.Collections;\n import java.util.Set;\n+import java.util.UUID;\n \n import javax.xml.bind.JAXBException;\n \n import uk.org.taverna.scufl2.api.common.Scufl2Tools;\n+import uk.org.taverna.scufl2.api.common.URITools;\n import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n import uk.org.taverna.scufl2.api.io.ReaderException;\n import uk.org.taverna.scufl2.api.io.WorkflowBundleReader;\n \n public class T2FlowReader implements WorkflowBundleReader {\n+\t\n+\tprivate final class DelayedCloseBufferedInputStream extends\n+\t\t\tBufferedInputStream {\n+\t\tprivate DelayedCloseBufferedInputStream(InputStream in, int size) {\n+\t\t\tsuper(in, size);\n+\t\t}\n+\n+\t\t@Override\n+\t\tpublic void close() throws IOException {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tpublic void reallyClose() throws IOException {\n+\t\t\tsuper.close();\n+\t\t}\n+\t}\n+\n+\tprotected static final URI PROV = URI.create(\"http://www.w3.org/ns/prov#\");\n+\n+\tprotected static final URI HAD_ORIGINAL_SOURCE = PROV.resolve(\"#hadOriginalSource\");\n+\tprotected static final URI ENTITY = PROV.resolve(\"#Entity\");\n+\t\n+\tprivate static final int MEGABYTE = 1024 * 1024;\n+\tprivate static final int PRESERVE_ORIGINAL_MAXIMUM_BYTES = 5 * MEGABYTE;\n \tpublic static final String APPLICATION_VND_TAVERNA_T2FLOW_XML = \"application/vnd.taverna.t2flow+xml\";\n \tprivate T2FlowParser parser;\n \t\n \tprivate Scufl2Tools scufl2Tools = new Scufl2Tools();\n \t\n+\tprivate URITools uriTools = new URITools();\n+\t\n \t@Override\n \tpublic Set<String> getMediaTypes() {\n \t\treturn Collections.singleton(APPLICATION_VND_TAVERNA_T2FLOW_XML);\n@@ -31,6 +62,7 @@ public WorkflowBundle readBundle(File bundleFile, String mediaType)\n \t\ttry {\n \t\t\tWorkflowBundle bundle = getParser().parseT2Flow(bundleFile);\n \t\t\tscufl2Tools.setParents(bundle);\n+\t\t\tpreserveOriginal(bundle, new FileInputStream(bundleFile));\n \t\t\treturn bundle;\n \t\t} catch (JAXBException e) {\n \t\t\tif (e.getCause() instanceof IOException) {\n@@ -41,20 +73,59 @@ public WorkflowBundle readBundle(File bundleFile, String mediaType)\n \t\t}\n \t}\n \n+\tprotected void preserveOriginal(WorkflowBundle bundle, InputStream t2flowStream) throws IOException {\n+\t\tString path = \"history/\" + bundleUUID(bundle) + \".t2flow\";\n+\t\tbundle.getResources().addResource(t2flowStream, path, APPLICATION_VND_TAVERNA_T2FLOW_XML);\t\t\n+\t\t// TODO: Add annotation recording the provenance of this history file\n+//\t\tPropertyResource original = new PropertyResource();\n+//\t\toriginal.setTypeURI(ENTITY);\n+//\t\toriginal.setResourceURI(URI.create(\"../../\" + path));\n+//\t\t// TODO: dcterms:format ?\t\t\t\t\n+//\t\t// TODO: Add this annotation to the workflow bundle rather than main workflow\n+//\t\tbundle.getMainWorkflow().getCurrentRevision().addProperty(HAD_ORIGINAL_SOURCE, original);\t\t\n+\t}\n+\n+\tprotected String bundleUUID(WorkflowBundle bundle) {\n+\t\tString uuidPath = uriTools.relativePath(\n+\t\t\t\tWorkflowBundle.WORKFLOW_BUNDLE_ROOT, bundle.getGlobalBaseURI())\n+\t\t\t\t.getPath();\t\t\n+\t\tUUID uuid = UUID.fromString(uuidPath.substring(0, uuidPath.length() - 1));\n+\t\treturn uuid.toString();\n+\t}\n+\n \t@Override\n \tpublic WorkflowBundle readBundle(InputStream inputStream, String mediaType)\n \t\t\tthrows ReaderException, IOException {\n-\t\tT2FlowParser parser;\n+\t\tDelayedCloseBufferedInputStream buffered = new DelayedCloseBufferedInputStream(\n+\t\t\t\tinputStream, PRESERVE_ORIGINAL_MAXIMUM_BYTES);\n \t\ttry {\n-\t\t\tWorkflowBundle bundle = getParser().parseT2Flow(inputStream);\n-\t\t\tscufl2Tools.setParents(bundle);\n-\t\t\treturn bundle;\n-\t\t} catch (JAXBException e) {\n-\t\t\tif (e.getCause() instanceof IOException) {\n-\t\t\t\tIOException ioException = (IOException) e.getCause();\n-\t\t\t\tthrow ioException;\n+\t\t\tbuffered.mark(PRESERVE_ORIGINAL_MAXIMUM_BYTES);\n+\t\t\tWorkflowBundle bundle;\n+\t\t\ttry {\n+\t\t\t\tbundle = getParser().parseT2Flow(buffered);\n+\t\t\t\tscufl2Tools.setParents(bundle);\n+\t\t\t} catch (JAXBException e) {\n+\t\t\t\tif (e.getCause() instanceof IOException) {\n+\t\t\t\t\tIOException ioException = (IOException) e.getCause();\n+\t\t\t\t\tthrow ioException;\n+\t\t\t\t}\n+\t\t\t\tthrow new ReaderException(\"Can't parse t2flow\", e);\n \t\t\t}\n-\t\t\tthrow new ReaderException(\"Can't parse t2flow\", e);\n+\n+\t\t\t// Rewind and try to copy out the original t2flow\n+\t\t\ttry {\n+\t\t\t\tbuffered.reset();\n+\t\t\t} catch (IOException ex) {\n+\t\t\t\t// Too big workflow, can't preserve it.\n+\t\t\t\t// TODO: Store to Bundle first?\n+\t\t\t\t// FIXME: Can we close BufferedInputStream without closing\n+\t\t\t\t// inputStream from our parameter?\n+\t\t\t\treturn bundle;\n+\t\t\t}\n+\t\t\tpreserveOriginal(bundle, buffered);\n+\t\t\treturn bundle;\n+\t\t} finally {\n+\t\t\tbuffered.reallyClose();\n \t\t}\n \t}\n ",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowReader.java",
                "sha": "0023393ebbeab7a079fe0f0ff0c272e8182537ba",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultactivities/DataflowActivityParser.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultactivities/DataflowActivityParser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultactivities/DataflowActivityParser.java",
                "patch": "@@ -46,7 +46,7 @@ public Configuration parseConfiguration(T2FlowParser t2FlowParser,\n \t\tString wfId = dataflowConfig.getRef();\n \t\tURI wfUri = Workflow.WORKFLOW_ROOT.resolve(wfId + \"/\");\n \t\tWorkflow wf = (Workflow) getUriTools().resolveUri(wfUri, parserState.getCurrentWorkflowBundle());\t\t\n-\t\tURI uri = getUriTools().relativeUriForBean(wf, parserState.getCurrentWorkflowBundle());\n+\t\tURI uri = getUriTools().relativeUriForBean(wf, parserState.getCurrentProfile());\n \n \t\tconfiguration.getPropertyResource().addPropertyReference(nestedUri.resolve(\"#workflow\"), uri);\t\t\n \t\treturn configuration;",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultactivities/DataflowActivityParser.java",
                "sha": "430646f08411a358f15400145e62978342b3884b",
                "status": "modified"
            },
            {
                "additions": 56,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultdispatchstack/LoopParser.java",
                "changes": 69,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultdispatchstack/LoopParser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 13,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultdispatchstack/LoopParser.java",
                "patch": "@@ -2,16 +2,48 @@\n \n import java.net.URI;\n \n+import javax.xml.bind.JAXBException;\n+\n+import uk.org.taverna.scufl2.api.common.URITools;\n import uk.org.taverna.scufl2.api.configurations.Configuration;\n import uk.org.taverna.scufl2.api.io.ReaderException;\n import uk.org.taverna.scufl2.api.property.PropertyResource;\n import uk.org.taverna.scufl2.translator.t2flow.ParserState;\n import uk.org.taverna.scufl2.translator.t2flow.T2FlowParser;\n import uk.org.taverna.scufl2.translator.t2flow.defaultactivities.AbstractActivityParser;\n+import uk.org.taverna.scufl2.xml.t2flow.jaxb.Activity;\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.ConfigBean;\n import uk.org.taverna.scufl2.xml.t2flow.jaxb.LoopConfig;\n \n public class LoopParser extends AbstractActivityParser {\n+\tprivate static URITools uriTools = new URITools();\n+\t\n+\t/**\n+\t * Expose some of the useful activity/config parser methods to LoopParser\n+\t * with a different parser state.\n+\t * <p>\n+\t * TODO: Refactor T2FlowParser to avoid the need for this \n+\t *\n+\t */\n+\tprotected class ConditionalActivityParser extends T2FlowParser {\n+\t\tpublic ConditionalActivityParser(ParserState origState) throws JAXBException {\n+\t\t\tsuper();\n+\t\t\tparserState.get().setCurrentProfile(origState.getCurrentProfile());\n+\t\t\tparserState.get().setCurrentProcessor(origState.getCurrentProcessor());\n+\t\t}\n+\t\t@Override\n+\t\tpublic uk.org.taverna.scufl2.api.activity.Activity parseActivity(\n+\t\t\t\tActivity origActivity) throws ReaderException {\n+\t\t\tuk.org.taverna.scufl2.api.activity.Activity parsed = super.parseActivity(origActivity);\n+\t\t\tparserState.get().setCurrentActivity(parsed);\n+\t\t\treturn parsed;\n+\t\t}\n+\t\t@Override\n+\t\tprotected Configuration parseConfiguration(ConfigBean configBean)\n+\t\t\t\tthrows JAXBException, ReaderException {\n+\t\t\treturn super.parseConfiguration(configBean);\n+\t\t}\n+\t}\n \n \tprivate static URI ravenURI =\n \t\tT2FlowParser.ravenURI.resolve(\"net.sf.taverna.t2.core/workflowmodel-impl/\");\n@@ -43,24 +75,35 @@ public Configuration parseConfiguration(T2FlowParser t2FlowParser,\n \n \t\t\n \t\tfinal Configuration c = new Configuration();\t\t\n-\t\tc.setConfigurableType(scufl2Uri.resolve(\"#Config\"));\n+\t\tc.setType(scufl2Uri.resolve(\"Config\"));\n \n \t\tfinal PropertyResource resource = c.getPropertyResource();\n \n-\t\tString conditionXml = loopConfig.getConditionXML();\t\t\n-//\t\tActivity conditionActivity = unmarshallXml(getParserState().getT2FlowParser(), conditionXml, Activity.class);\t\t\n-\t\t\n-//\t\tgetParserState().parseLater(conditionActivity, new ParseLaterCallback<Activity>(){\n-//\t\t\t@Override\n-//\t\t\tpublic void parsed(Activity original, WorkflowBean parsedActivity,\n-//\t\t\t\t\tParserState parserState) {\n-//\t\t\t\tURI uriActivity = new URITools().relativeUriForBean(parsedActivity, c);\n-//\t\t\t\tresource.addPropertyReference(scufl2Uri.resolve(\"#condition\"), uriActivity);\n-//\t\t\t}\t\t\t\n-//\t\t});\n-\n \t\t\n \t\t\n+\t\tString conditionXml = loopConfig.getConditionXML();\t\t\n+\t\tActivity conditionActivity = unmarshallXml(parserState.getT2FlowParser(), conditionXml, Activity.class);\t\t\t\t\n+\t\ttry {\n+\t\t\tConditionalActivityParser internalParser = new ConditionalActivityParser(parserState);\n+\t\t\t\n+\t\t\tuk.org.taverna.scufl2.api.activity.Activity newActivity = internalParser.parseActivity(conditionActivity);\n+\t\t\tString procName = parserState.getCurrentProcessor().getName();\n+\t\t\tnewActivity.setName(procName + \"-loop\");\t\t\t\n+\t\t\tparserState.getCurrentProfile().getActivities().addWithUniqueName(newActivity);\n+\t\t\tnewActivity.setParent(parserState.getCurrentProfile());\n+\n+\t\t\tConfiguration newConfig = internalParser.parseConfiguration(conditionActivity.getConfigBean());\n+\t\t\tnewConfig.setName(procName + \"-loop-config\");\n+\t\t\tnewConfig.setConfigures(newActivity);\n+\t\t\tparserState.getCurrentProfile().getConfigurations().addWithUniqueName(newConfig);\n+\t\t\tnewConfig.setParent(parserState.getCurrentProfile());\n+\t\t\tc.setParent(parserState.getCurrentProfile());\n+\t\t\t\n+\t\t\tURI uriActivity = uriTools.relativeUriForBean(newActivity, c);\n+\t\t\tresource.addPropertyReference(scufl2Uri.resolve(\"#condition\"), uriActivity);\n+\t\t} catch (JAXBException e) {\n+\t\t\tthrow new ReaderException(\"Can't parse conditional loop activity\", e);\n+\t\t}\n \t\t\t\n \t\treturn c;\n \t}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultdispatchstack/LoopParser.java",
                "sha": "e68722fcdac59fa6ba176717db3dfcd635b6731b",
                "status": "modified"
            },
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/ExternalToolActivityParser.java",
                "changes": 27,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/ExternalToolActivityParser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 15,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/ExternalToolActivityParser.java",
                "patch": "@@ -131,22 +131,19 @@ public Configuration parseConfiguration(T2FlowParser t2FlowParser, ConfigBean co\n \t\t\tPropertyResource configResource = configuration.getPropertyResource();\n \t\t\tconfigResource.setTypeURI(ACTIVITY_URI.resolve(\"#Config\"));\n \n-\t\t\tif (usecaseConfig != null && usecaseConfig.getRepositoryUrl() != null) {\n-\t\t\t\tURI repositoryUri = URI.create(usecaseConfig.getRepositoryUrl());\n-\t\t\t\tURI usecase = repositoryUri.resolve(\"#\"\n-\t\t\t\t\t\t+ uriTools.validFilename(usecaseConfig.getUsecaseid()));\n-\t\t\t\tconfigResource.addPropertyReference(ACTIVITY_URI.resolve(\"#toolId\"), usecase);\n-\t\t\t} else if (externalToolConfig != null && externalToolConfig.getRepositoryUrl() != null) {\n-\t\t\t\tURI repositoryUri = URI.create(externalToolConfig.getRepositoryUrl());\n-\t\t\t\tURI usecase = repositoryUri.resolve(\"#\"\n-\t\t\t\t\t\t+ uriTools.validFilename(externalToolConfig.getExternaltoolid()));\n-\t\t\t\tconfigResource.addPropertyReference(ACTIVITY_URI.resolve(\"#toolId\"), usecase);\n-\t\t\t\tif (configResource.getProperties().containsKey(ACTIVITY_URI.resolve(\"#toolId\"))) {\n-\t\t\t\t\tconfigResource.addProperty(ACTIVITY_URI.resolve(\"#edited\"),\n-\t\t\t\t\t\t\tnew PropertyLiteral(externalToolConfig.isEdited()));\n+\t\t\tif (usecaseConfig != null) {\n+\t\t\t\tif (usecaseConfig.getRepositoryUrl() != null) {\n+\t\t\t\t\tconfigResource.addPropertyAsString(ACTIVITY_URI.resolve(\"#repositoryUrl\"), usecaseConfig.getRepositoryUrl());\n+\t\t\t\t}\n+\t\t\t\tconfigResource.addPropertyAsString(ACTIVITY_URI.resolve(\"#toolId\"), usecaseConfig.getUsecaseid());\n+\t\t\t} else if (externalToolConfig != null) {\n+\t\t\t\tif (externalToolConfig.getRepositoryUrl() != null) {\n+\t\t\t\t\tconfigResource.addPropertyAsString(ACTIVITY_URI.resolve(\"#repositoryUrl\"), externalToolConfig.getRepositoryUrl());\n \t\t\t\t}\n-\t\t\t} else if (externalToolConfig != null && externalToolConfig.getExternaltoolid() != null) {\n \t\t\t\tconfigResource.addPropertyAsString(ACTIVITY_URI.resolve(\"#toolId\"), externalToolConfig.getExternaltoolid());\n+\t\t\t\tif(externalToolConfig.isEdited()) {\n+\t\t\t\t\tconfigResource.addProperty(ACTIVITY_URI.resolve(\"#edited\"), new PropertyLiteral(externalToolConfig.isEdited()));\n+\t\t\t\t}\n \t\t\t}\n \n \t\t\tif (externalToolConfig != null) {\n@@ -256,7 +253,7 @@ private void parseMechanismXML(PropertyResource invocation) throws PropertyExcep\n \t\t\t\t\tnode.addPropertyAsString(ACTIVITY_URI.resolve(\"#copyCommand\"), copyCommand);\n \t\t\t\t}\n \t\t\t}\n-\t\t\tinvocation.getProperties().remove(ACTIVITY_URI.resolve(\"#mechanismXML\"));\n+\t\t\tinvocation.clearProperties(ACTIVITY_URI.resolve(\"#mechanismXML\"));\n \t\t} else {\n \n \t\t}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/ExternalToolActivityParser.java",
                "sha": "4b4e8a7ba42344c4f268c61c07ada47bc62a959a",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/XPathActivityParser.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/XPathActivityParser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/XPathActivityParser.java",
                "patch": "@@ -76,7 +76,7 @@ public Configuration parseConfiguration(T2FlowParser t2FlowParser,\n \n \t\t\tString xmlDocument = xpathConfig.getXmlDocument();\n \t\t\tconfigResource.addPropertyAsString(\n-\t\t\t\t\tACTIVITY_URI.resolve(\"#xmlDocument\"), xmlDocument);\n+\t\t\t\t\tACTIVITY_URI.resolve(\"#exampleXmlDocument\"), xmlDocument);\n \n \t\t\tString xpathExpression = xpathConfig.getXpathExpression();\n \t\t\tconfigResource.addPropertyAsString(",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/XPathActivityParser.java",
                "sha": "c3fd9d3a4d65d8ecb02bb2647848ebb9033cd5c0",
                "status": "modified"
            },
            {
                "additions": 144,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2annotations.xsd",
                "changes": 144,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2annotations.xsd?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2annotations.xsd",
                "patch": "@@ -0,0 +1,144 @@\n+<xsd:schema elementFormDefault=\"unqualified\"\r\n+\txmlns:tav=\"http://taverna.sf.net/2008/xml/t2flow\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\r\n+\txmlns:jxb=\"http://java.sun.com/xml/ns/jaxb\" xmlns:annotations=\"http://taverna.sf.net/2008/xml/t2flow/annotations\"\r\n+\tjxb:version=\"1.0\">\r\n+\r\n+\t<xsd:annotation>\r\n+\t\t<xsd:appinfo>\r\n+\t\t\t<!-- See http://docs.rakeshv.org/java/jaxb/users-guide/jaxb-custom.html -->\r\n+\r\n+\t\t\t<!-- <jxb:schemaBindings> <jxb:package name=\"uk.org.taverna.scufl2.xml.t2flow.annotations.jaxb\" \r\n+\t\t\t\t/> </jxb:schemaBindings> -->\r\n+\t\t</xsd:appinfo>\r\n+\t</xsd:annotation>\r\n+\r\n+\t<xsd:import namespace=\"http://taverna.sf.net/2008/xml/t2flow\"\r\n+\t\tschemaLocation=\"t2flow.xsd\" />\r\n+\r\n+<!-- Note: JAXB Does not seem to pick up these due to xsd:any in tav:AnnotationBean\r\n+\r\n+ -->\r\n+\t<xsd:complexType name=\"IdentificationAssertion\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"tav:AnnotationBean\">\r\n+\t\t\t\t<xsd:sequence>\r\n+\t\t\t\t\t<xsd:element name=\"identification\" type=\"tav:uuid\" />\r\n+\t\t\t\t</xsd:sequence>\r\n+\t\t\t\t<xsd:attribute name=\"class\" form=\"unqualified\"\r\n+\t\t\t\t\tfixed=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\" />\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\t\r\n+\t<xsd:complexType name=\"AbstractTextual\" abstract=\"true\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"tav:AnnotationBean\">\r\n+\t\t\t\t<xsd:sequence>\r\n+\t\t\t\t\t<xsd:element name=\"text\" type=\"xsd:string\" />\r\n+\t\t\t\t</xsd:sequence>\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\r\n+\r\n+\t<xsd:complexType name=\"Author\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"AbstractTextual\">\r\n+\t\t\t\t<xsd:sequence>\r\n+\t\t\t\t\t<xsd:element name=\"text\" type=\"xsd:string\" />\r\n+\t\t\t\t</xsd:sequence>\r\n+\t\t\t\t<xsd:attribute name=\"class\" form=\"unqualified\"\r\n+\t\t\t\t\tfixed=\"net.sf.taverna.t2.annotation.annotationbeans.Author\" />\r\n+\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\t\r\n+\t<xsd:complexType name=\"DescriptiveTitle\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"AbstractTextual\">\r\n+\t\t\t\t<xsd:sequence>\r\n+\t\t\t\t\t<xsd:element name=\"text\" type=\"xsd:string\" />\r\n+\t\t\t\t</xsd:sequence>\r\n+\t\t\t\t<xsd:attribute name=\"class\" form=\"unqualified\"\r\n+\t\t\t\t\tfixed=\"net.sf.taverna.t2.annotation.annotationbeans.DescriptiveTitle\" />\r\n+\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\r\n+\t<xsd:complexType name=\"ExampleValue\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"AbstractTextual\">\r\n+\t\t\t\t<xsd:sequence>\r\n+\t\t\t\t\t<xsd:element name=\"text\" type=\"xsd:string\" />\r\n+\t\t\t\t</xsd:sequence>\r\n+\t\t\t\t<xsd:attribute name=\"class\" form=\"unqualified\"\r\n+\t\t\t\t\tfixed=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\" />\r\n+\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\t<xsd:complexType name=\"FreeTextDescription\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"AbstractTextual\">\r\n+\t\t\t\t<xsd:sequence>\r\n+\t\t\t\t\t<xsd:element name=\"text\" type=\"xsd:string\" />\r\n+\t\t\t\t</xsd:sequence>\r\n+\t\t\t\t<xsd:attribute name=\"class\" form=\"unqualified\"\r\n+\t\t\t\t\tfixed=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\" />\r\n+\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\r\n+\t<xsd:complexType name=\"HostInstitution\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"AbstractTextual\">\r\n+\t\t\t\t<xsd:sequence>\r\n+\t\t\t\t\t<xsd:element name=\"text\" type=\"xsd:string\" />\r\n+\t\t\t\t</xsd:sequence>\r\n+\t\t\t\t<xsd:attribute name=\"class\" form=\"unqualified\"\r\n+\t\t\t\t\tfixed=\"net.sf.taverna.t2.annotation.annotationbeans.HostInstitution\" />\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\r\n+\t<xsd:complexType name=\"MimeType\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"AbstractTextual\">\r\n+\t\t\t\t<xsd:sequence>\r\n+\t\t\t\t\t<xsd:element name=\"text\" type=\"xsd:string\" />\r\n+\t\t\t\t</xsd:sequence>\r\n+\t\t\t\t<xsd:attribute name=\"class\" form=\"unqualified\"\r\n+\t\t\t\t\tfixed=\"net.sf.taverna.t2.annotation.annotationbeans.MimeType\" />\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\t\r\n+\t<xsd:complexType name=\"Optional\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"tav:AnnotationBean\">\r\n+\t\t\t\t<xsd:attribute name=\"class\" form=\"unqualified\"\r\n+\t\t\t\t\tfixed=\"net.sf.taverna.t2.annotation.annotationbeans.Optional\" />\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\r\n+\r\n+\t<xsd:complexType name=\"SemanticAnnotation\">\r\n+\t\t<xsd:complexContent>\r\n+\t\t\t<xsd:restriction base=\"tav:AnnotationBean\">\r\n+\t\t\t\t<xsd:sequence>\r\n+\t\t\t\t\t<xsd:element name=\"mimeType\" type=\"xsd:string\" default=\"text/rdf+n3\" />\r\n+\t\t\t\t\t<xsd:element name=\"content\" type=\"xsd:string\" />\r\n+\t\t\t\t</xsd:sequence>\r\n+\t\t\t\t<xsd:attribute name=\"class\" form=\"unqualified\"\r\n+\t\t\t\t\tfixed=\"net.sf.taverna.t2.annotation.annotationbeans.SemanticAnnotation\" />\r\n+\t\t\t</xsd:restriction>\r\n+\t\t</xsd:complexContent>\r\n+\t</xsd:complexType>\r\n+\r\n+\r\n+</xsd:schema>\r\n+\t\t\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2annotations.xsd",
                "sha": "c2d433553759e7bff76a8039e3fd309ddedcc782",
                "status": "added"
            },
            {
                "additions": 30,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow-extended.xsd",
                "changes": 46,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow-extended.xsd?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 16,
                "filename": "scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow-extended.xsd",
                "patch": "@@ -4,17 +4,22 @@\n \txmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:layers=\"http://taverna.sf.net/2008/xml/t2layers\"\n \txmlns:activities=\"http://taverna.sf.net/2008/xml/t2activities\">\n \t<xsd:import namespace=\"http://taverna.sf.net/2008/xml/t2layers\"\n-\t\tschemaLocation=\"t2layers.xsd\"></xsd:import>\n+\t\tschemaLocation=\"t2layers.xsd\" />\n+\t<xsd:import schemaLocation=\"t2annotations.xsd\" />\n \t<xsd:import namespace=\"http://taverna.sf.net/2008/xml/t2activities\"\n-\t\tschemaLocation=\"t2activities.xsd\"></xsd:import>\n+\t\tschemaLocation=\"t2activities.xsd\" />\n+\t<xsd:import schemaLocation=\"externaltoolactivity.xsd\" />\n+\t<xsd:import schemaLocation=\"restactivity.xsd\" />\n+\t<xsd:import schemaLocation=\"xpathactivity.xsd\" />\n \n \t<xsd:annotation>\n \t\t<xsd:documentation>\n \t\t\tRestricting schema of t2flow.xsd that describes the\n \t\t\tconfiguration beans for the\n \t\t\tdispatch stack layers and activities,\n \t\t\tgiven the shipped Taverna 2.0/2.1\n-\t\t\twith no additional plugins installed.\r\t\t</xsd:documentation>\n+\t\t\twith no additional plugins\n+\t\t\tinstalled.\r\t\t</xsd:documentation>\n \t</xsd:annotation>\n \t<xsd:redefine schemaLocation=\"t2flow.xsd\">\n \t\t<xsd:complexType name=\"ConfigBean\">\n@@ -76,29 +81,35 @@\n \t\t\t\t\t\t<xsd:element form=\"unqualified\" name=\"MartQuery\"\n \t\t\t\t\t\t\ttype=\"activities:BioMartConfig\">\n \t\t\t\t\t\t</xsd:element>\n-\t\t\t\t\t\t<xsd:element form=\"unqualified\" name=\"net.sf.taverna.t2.activities.biomoby.BiomobyActivityConfigurationBean\"\n-\t\t\t\t\t\t\ttype=\"activities:BioMobyConfig\"/>\n-\t\t\t\t\t\t<xsd:element form=\"unqualified\" name=\"net.sf.taverna.t2.activities.biomoby.BiomobyObjectActivityConfigurationBean\"\n+\t\t\t\t\t\t<xsd:element form=\"unqualified\"\n+\t\t\t\t\t\t\tname=\"net.sf.taverna.t2.activities.biomoby.BiomobyActivityConfigurationBean\"\n+\t\t\t\t\t\t\ttype=\"activities:BioMobyConfig\" />\n+\t\t\t\t\t\t<xsd:element form=\"unqualified\"\n+\t\t\t\t\t\t\tname=\"net.sf.taverna.t2.activities.biomoby.BiomobyObjectActivityConfigurationBean\"\n \t\t\t\t\t\t\ttype=\"activities:BioMobyObjectConfig\" />\n-\t\t\t\t\t\t<xsd:element form=\"unqualified\" name=\"net.sf.taverna.t2.activities.biomoby.MobyParseDatatypeActivityConfigurationBean\"\n-\t\t\t\t\t\t\ttype=\"activities:BioMobyParserConfig\"/>\n-\t\t\t\t\t\t\t\n-\t\t\t\t\t\t<xsd:element form=\"unqualified\" name=\"net.sf.taverna.t2.activities.spreadsheet.SpreadsheetImportConfiguration\"\n-\t\t\t\t\t\t\ttype=\"activities:SpreadsheetImportConfig\"/>\n+\t\t\t\t\t\t<xsd:element form=\"unqualified\"\n+\t\t\t\t\t\t\tname=\"net.sf.taverna.t2.activities.biomoby.MobyParseDatatypeActivityConfigurationBean\"\n+\t\t\t\t\t\t\ttype=\"activities:BioMobyParserConfig\" />\n+\n+\t\t\t\t\t\t<xsd:element form=\"unqualified\"\n+\t\t\t\t\t\t\tname=\"net.sf.taverna.t2.activities.spreadsheet.SpreadsheetImportConfiguration\"\n+\t\t\t\t\t\t\ttype=\"activities:SpreadsheetImportConfig\" />\n+\n+\t\t\t\t\t\t<xsd:element form=\"unqualified\"\n+\t\t\t\t\t\t\tname=\"net.sf.taverna.t2.activities.soaplab.SoaplabActivityConfigurationBean\"\n+\t\t\t\t\t\t\ttype=\"activities:SoaplabConfig\" />\n \n-\t\t\t\t\t\t<xsd:element form=\"unqualified\" name=\"net.sf.taverna.t2.activities.soaplab.SoaplabActivityConfigurationBean\"\n-\t\t\t\t\t\t\ttype=\"activities:SoaplabConfig\"/>\n \n-\t\t\t\t\t\t\n \t\t\t\t\t\t<xsd:element name=\"dataflow\" type=\"activities:DataflowConfig\" />\n-\t\t\t\t\t\t\n+\n \t\t\t\t\t\t<xsd:element ref=\"tav:abstractConfigBean\" />\n-\t\t\t\t\t\t\n+\n \t\t\t\t\t</xsd:choice>\n \t\t\t\t\t<xsd:attribute name=\"encoding\" use=\"required\" type=\"tav:Encoding\" />\n \t\t\t\t</xsd:restriction>\n \t\t\t</xsd:complexContent>\n \t\t</xsd:complexType>\n+\t\t\t\t\t\t\n \t</xsd:redefine>\n \n \n@@ -109,4 +120,7 @@\n \t\t\t<xsd:enumeration value=\"jdomxml\"></xsd:enumeration>\n \t\t</xsd:restriction>\n \t</xsd:simpleType>\n+\n+\n+\n </xsd:schema>\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow-extended.xsd",
                "sha": "1f5563ea036d0e646a47a4d20858204f4ae4770a",
                "status": "modified"
            },
            {
                "additions": 116,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow.xsd",
                "changes": 155,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow.xsd?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 39,
                "filename": "scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow.xsd",
                "patch": "@@ -14,7 +14,7 @@\n \t\t\t\t.t2flow and\n \t\t\t\tserved using the content-type\n \t\t\t\tapplication/vnd.taverna.t2flow+xml\n-\t</p>\r\t\t\t<p xmlns='http://www.w3.org/1999/xhtml'>\r\t\t\t\tStable as of 2009-09-11 by Stian Soiland-Reyes, should correctly\r\t\t\t\tdescribe workflows as saved from Taverna 2.0, 2.1 b1 and 2.1 b2, but\r\t\t\t\tas this schema has been made in retrospect no guarantees are made.\r\t\t\t\tTo test the schema against the examples, try xmllint:\r\t\t\t\t<code>xmllint --noout --schema t2flow.xsd examples/*t2flow</code>\r\t\t\t</p>\r\t\t</documentation>\r\t</annotation>\n+\t\t\t</p>\r\t\t\t<p xmlns='http://www.w3.org/1999/xhtml'>\r\t\t\t\tStable as of 2009-09-11 by Stian Soiland-Reyes, should correctly\r\t\t\t\tdescribe workflows as saved from Taverna 2.0, 2.1 b1 and 2.1 b2, but\r\t\t\t\tas this schema has been made in retrospect no guarantees are made.\r\t\t\t\tTo test the schema against the examples, try xmllint:\r\t\t\t\t<code>xmllint --noout --schema t2flow.xsd examples/*t2flow</code>\r\t\t\t</p>\r\t\t</documentation>\r\t</annotation>\n \t<element name=\"workflow\" type=\"tav:Workflow\">\n \t\t<annotation>\n \t\t\t<documentation>The container element for a .t2flow workflow\n@@ -79,7 +79,8 @@\n \t\t\t\tannotations (descriptions) about the Dataflow under 'annotations'.\n \t\t\t\tThe \"role\" attribute should be \"top\" for the main dataflow, and\n \t\t\t\t\"nested\" for nested dataflows. The uuid-s in \"id\" can be referenced\n-\t\t\t\tfrom a nested dataflow activity.</documentation>\n+\t\t\t\tfrom a nested dataflow activity.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n \t\t\t<element name=\"name\" type=\"string\">\n@@ -91,14 +92,16 @@\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>List of dataflow input ports. Input ports are the\n \t\t\t\t\t\t\"parameters\" or inputs to running a workflow and must be described\n-\t\t\t\t\t\twith depth and granular depth.</documentation>\n+\t\t\t\t\t\twith depth and granular depth.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"outputPorts\" type=\"tav:AnnotatedPorts\">\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>List of output ports of the dataflows. Results are\n \t\t\t\t\t\tdelivered to the output ports, the depth of the output port is\n-\t\t\t\t\t\tcalculated at runtime.</documentation>\n+\t\t\t\t\t\tcalculated at runtime.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"processors\" type=\"tav:Processors\">\n@@ -133,15 +136,17 @@\n \t\t\t\tminOccurs=\"0\">\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>List of annotations, ie. descriptions and metadata\n-\t\t\t\t\t\tabout the dataflow such as \"title\" and \"author\".</documentation>\n+\t\t\t\t\t\tabout the dataflow such as \"title\" and \"author\".\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t</sequence>\n \t\t<attribute name=\"id\" type=\"tav:uuid\" use=\"required\">\n \t\t\t<annotation>\n \t\t\t\t<documentation>A unique identifier for this dataflow (UUID). This id\n \t\t\t\t\tshould change whenever a structural change has been done to the\n-\t\t\t\t\tdataflow.</documentation>\n+\t\t\t\t\tdataflow.\n+\t\t\t\t</documentation>\n \t\t\t</annotation>\n \t\t</attribute>\n \t\t<attribute name=\"role\" type=\"tav:role\" use=\"required\">\n@@ -158,7 +163,8 @@\n \t\t<annotation>\n \t\t\t<documentation>A hex-formatted UUID. (Universial Unique IDentifier).\n \t\t\t\tUUIDs should be generated using a random algorithm so that they\n-\t\t\t\tcan't identify the machine who saved the dataflow.</documentation>\n+\t\t\t\tcan't identify the machine who saved the dataflow.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<restriction base=\"string\">\n \t\t\t<pattern\n@@ -212,7 +218,8 @@\n \t<complexType name=\"Datalinks\">\n \t\t<annotation>\n \t\t\t<documentation>List of datalinks between dataflow ports and\n-\t\t\t\tprocessors in a workflow.</documentation>\n+\t\t\t\tprocessors in a workflow.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n \t\t\t<element name=\"datalink\" type=\"tav:DataLink\" maxOccurs=\"unbounded\"\n@@ -234,15 +241,16 @@\n \t\t\t\tto reach the activities that invokes the actual services. The\n \t\t\t\toutputs from the services buble up through the dispatch stack and is\n \t\t\t\tpushed out on the output ports, indexed according to the iteration\n-\t\t\t\tstrategy.\r</documentation>\n+\t\t\t\tstrategy.\r\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n \t\t\t<element name=\"name\" type=\"tav:ProcessorName\">\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>Name of processor within the dataflow. This name is\n \t\t\t\t\t\tused to describe datalinks. The name of a processor must be\n \t\t\t\t\t\tlocally unique within a dataflow. (However the name can be reused\n-\t\t\t\t\t\tin a nested dataflow)</documentation>\n+\t\t\t\t\t\tin a nested dataflow)\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"inputPorts\" type=\"tav:DepthPorts\">\n@@ -252,7 +260,8 @@\n \t\t\t\t\t\tis served at a higher depth the iteration strategy stack will be\n \t\t\t\t\t\tinvolved to do the iteration over the input. \"Depth\" means the\n \t\t\t\t\t\tgranularity of data, single strings are depth 0, a list of strings\n-\t\t\t\t\t\tare depth 1, lists of such lists are depth 2, etc.</documentation>\n+\t\t\t\t\t\tare depth 1, lists of such lists are depth 2, etc.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"outputPorts\" type=\"tav:GranularDepthPorts\">\n@@ -266,15 +275,17 @@\n \t\t\t\t\t\tlower granularity than the granularDepth can be set to describe at\n \t\t\t\t\t\twhich level the intermediate outputs will be produced. (Note that\n \t\t\t\t\t\tsuch a processor would still need to produce the final list of the\n-\t\t\t\t\t\tdefined depth in the end).</documentation>\n+\t\t\t\t\t\tdefined depth in the end).\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"annotations\" type=\"tav:Annotations\" maxOccurs=\"1\"\n \t\t\t\tminOccurs=\"0\">\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>List of processor annotations, describing this\n \t\t\t\t\t\tprocessor. For instance a description could say what is the role\n-\t\t\t\t\t\tof this processor in the dataflow.</documentation>\n+\t\t\t\t\t\tof this processor in the dataflow.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \n@@ -287,7 +298,8 @@\n \t\t\t\t\t\toutput mapping to be able to populate all of this processors\n \t\t\t\t\t\toutputPorts, and can have input mapping to use one or more of the\n \t\t\t\t\t\tinput ports. Note that the depth of the mapped activity ports must\n-\t\t\t\t\t\tmatch the defined depths in the Processor ports.</documentation>\n+\t\t\t\t\t\tmatch the defined depths in the Processor ports.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"dispatchStack\" type=\"tav:DispatchStack\">\n@@ -300,7 +312,8 @@\n \t\t\t\t\t\tindividual processors, for instance if one wants to do failover\n \t\t\t\t\t\tbefore retries, or do a customized layer that does service\n \t\t\t\t\t\tselection at runtime by doing a lookup in a service repository\n-\t\t\t\t\t\tlike BioCatalogue.</documentation>\n+\t\t\t\t\t\tlike BioCatalogue.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"iterationStrategyStack\" type=\"tav:IterationStrategyStack\">\n@@ -310,7 +323,8 @@\n \t\t\t\t\t\tinputs of higher granularity than what it expects. The typical\n \t\t\t\t\t\tusecase is a single iteration strategy in the stack, and by\n \t\t\t\t\t\tdefault a single cross product of all the input ports (meaning\n-\t\t\t\t\t\tall-to-all iteration).</documentation>\n+\t\t\t\t\t\tall-to-all iteration).\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t</sequence>\n@@ -332,7 +346,8 @@\n \t\t<annotation>\n \t\t\t<documentation>List of activities. The list can be empty, used for\n \t\t\t\t\"abstract\" processors, placeholders until a matching activity is\n-\t\t\t\tfound.</documentation>\n+\t\t\t\tfound.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n \t\t\t<element name=\"activity\" type=\"tav:Activity\" maxOccurs=\"unbounded\"\n@@ -348,7 +363,7 @@\n \t\t\t\tthat knows how to locally execute a Beanshell script, or a Dataflow\n \t\t\t\tactivity that knows how to execute a nested dataflow. (Typically\n \t\t\t\tincluded as another dataflow element within this Workflow\n-\t\t\t\tdescription).\r</documentation>\n+\t\t\t\tdescription).\r\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n \t\t\t<element name=\"raven\" type=\"tav:Raven\" maxOccurs=\"1\"\n@@ -357,7 +372,8 @@\n \t\t\t\t\t<documentation>Raven artifact from which the activity\n \t\t\t\t\t\timplementation class is to be loaded. The version of this artifact\n \t\t\t\t\t\tis mainly informational, as the currently loaded artifact is\n-\t\t\t\t\t\tpreferred.</documentation>\n+\t\t\t\t\t\tpreferred.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"class\" type=\"string\">\n@@ -382,7 +398,8 @@\n \t\t\t\t\t\tadditional processor ports, and only map them in that activity.\n \t\t\t\t\t\t(If the other activity is invoked those inputs are ignored - but\n \t\t\t\t\t\tnote that they would still be iterated over according ot the\n-\t\t\t\t\t\titeration strategy). </documentation>\n+\t\t\t\t\t\titeration strategy).\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"outputMap\" type=\"tav:Map\">\n@@ -392,7 +409,8 @@\n \t\t\t\t\t\tNot all of the activity's output ports need to be mapped, but all\n \t\t\t\t\t\tof the processor output ports need to have a mapping. Notice that\n \t\t\t\t\t\tthis mapping is activityPort -> processorPort, while the order is\n-\t\t\t\t\t\topposite for inputMap.</documentation>\n+\t\t\t\t\t\topposite for inputMap.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"configBean\" type=\"tav:ConfigBean\">\n@@ -403,7 +421,8 @@\n \t\t\t\t\t\tinput and output ports will be defined at runtime after this\n \t\t\t\t\t\tconfiguration. (For some activities the configuration bean\n \t\t\t\t\t\tincludes this port definition, while other calculate the ports by\n-\t\t\t\t\t\tparsing service descriptions, etc).</documentation>\n+\t\t\t\t\t\tparsing service descriptions, etc).\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"annotations\" type=\"tav:Annotations\" maxOccurs=\"1\"\n@@ -420,7 +439,8 @@\n \t\t<annotation>\n \t\t\t<documentation>Raven artifact described using typical Maven groupId,\n \t\t\t\tartifactId and version. When loading a dataflow this artifact must\n-\t\t\t\thave already been loaded from one of the plugins.</documentation>\n+\t\t\t\thave already been loaded from one of the plugins.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n \t\t\t<element name=\"group\" type=\"string\" />\n@@ -434,13 +454,15 @@\n \t\t\t<documentation>A mapping of port names. For instance in an inputMap,\n \t\t\t\twhere a processor input port \"database\" is to be mapped to the\n \t\t\t\tactivity input port \"db\", an inputMap would be made with\n-\t\t\t\tfrom=\"database\" to=\"db\".</documentation>\n+\t\t\t\tfrom=\"database\" to=\"db\".\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<attribute use=\"required\" name=\"from\" type=\"tav:PortName\" />\n \t\t<attribute use=\"required\" name=\"to\" type=\"tav:PortName\" />\n \t</complexType>\n \n-\t<element name=\"abstractConfigBean\" abstract=\"true\" type=\"tav:AbstractConfigBean\"  />\n+\t<element name=\"abstractConfigBean\" abstract=\"true\"\n+\t\ttype=\"tav:AbstractConfigBean\" />\n \n \t<complexType name=\"AbstractConfigBean\" />\n \n@@ -452,10 +474,11 @@\n \t\t\t\tthe serialisation is therefore also dependent on the plugin defining\n \t\t\t\tthe activity or dispatch layer. The alternative schema\n \t\t\t\tt2flow-extended.xsd adds descriptions of the most typical activities\n-\t\t\t\tand dispatch layers.</documentation>\n+\t\t\t\tand dispatch layers.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n-\t\t\t <any namespace=\"##any\" processContents=\"lax\" />\n+\t\t\t<any namespace=\"##any\" processContents=\"lax\" />\n \t\t</sequence>\n \t\t<attribute name=\"encoding\" type=\"string\" use=\"required\" />\n \t</complexType>\n@@ -464,7 +487,8 @@\n \t\t<annotation>\n \t\t\t<documentation>List of dispatch layers. This would typically contain\n \t\t\t\tat least the Invoke layer to perform the actual invocation of the\n-\t\t\t\tactivity.</documentation>\n+\t\t\t\tactivity.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n \t\t\t<element name=\"dispatchLayer\" type=\"tav:DispatchLayer\"\n@@ -483,21 +507,24 @@\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>Raven artifact from which the layer class is to be\n \t\t\t\t\t\tloaded. The version of this artifact is mainly informational, as\n-\t\t\t\t\t\tthe currently loaded artifact is preferred.</documentation>\n+\t\t\t\t\t\tthe currently loaded artifact is preferred.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"class\" type=\"string\">\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>Fully qualified Java class name defining this\n \t\t\t\t\t\tdispatch layer. An instance of this class will be constructed and\n-\t\t\t\t\t\tthen configured with the deserialised configBean.</documentation>\n+\t\t\t\t\t\tthen configured with the deserialised configBean.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t\t<element name=\"configBean\" type=\"tav:ConfigBean\">\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>A serialised configuration for the dispatch layer.\n \t\t\t\t\t\tThe deserialised version of this bean will be passed to the layer\n-\t\t\t\t\t\tinstance after initialisation.</documentation>\n+\t\t\t\t\t\tinstance after initialisation.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t</sequence>\n@@ -661,22 +688,25 @@\n \t<complexType name=\"DataLink\">\n \t\t<annotation>\n \t\t\t<documentation>A link between two dataflow units, from source to\n-\t\t\t\tlink.</documentation>\n+\t\t\t\tlink.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n \t\t\t<element name=\"sink\" type=\"tav:Link\">\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>The sink of the link - where the data will be\n \t\t\t\t\t\tflowing to. This must be either a processor input port or a\n-\t\t\t\t\t\tdataflow output port.</documentation>\n+\t\t\t\t\t\tdataflow output port.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \n \t\t\t<element name=\"source\" type=\"tav:Link\">\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>The source of the link - where the data will be\n \t\t\t\t\t\tflowing from. This must be a dataflow input port or a processor\n-\t\t\t\t\t\toutput port.</documentation>\n+\t\t\t\t\t\toutput port.\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t</sequence>\n@@ -715,7 +745,8 @@\n \t\t\t\t<annotation>\n \t\t\t\t\t<documentation>If type is \"processor\" or \"merge\" this describes a\n \t\t\t\t\t\tprocessor input port (if this link is a sink) or output port (if\n-\t\t\t\t\t\tthis link is a source).</documentation>\n+\t\t\t\t\t\tthis link is a source).\n+\t\t\t\t\t</documentation>\n \t\t\t\t</annotation>\n \t\t\t</element>\n \t\t</sequence>\n@@ -756,14 +787,59 @@\n \t<complexType name=\"AnnotationChain\">\n \t\t<annotation>\n \t\t\t<documentation>Chain of annotations. Annotations are serialised Java\n-\t\t\t\tobjects, similar to the ConfigBeans.</documentation>\n+\t\t\t\tobjects, similar to the ConfigBeans.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<sequence>\n-\t\t\t<any namespace=\"##any\" processContents=\"lax\"></any>\n+\t\t\t<element name=\"net.sf.taverna.t2.annotation.AnnotationChainImpl\"\n+\t\t\t\tform=\"unqualified\">\n+\t\t\t\t<complexType>\n+\t\t\t\t\t<sequence>\n+\t\t\t\t\t\t<element name=\"annotationAssertions\" form=\"unqualified\"\n+\t\t\t\t\t\t\ttype=\"tav:AnnotationAssertionImpl\">\n+\n+\t\t\t\t\t\t</element>\n+\t\t\t\t\t</sequence>\n+\t\t\t\t</complexType>\n+\t\t\t</element>\n \t\t</sequence>\n \t\t<attribute use=\"required\" name=\"encoding\" type=\"string\"></attribute>\n \t</complexType>\n \n+\t<complexType name=\"AnnotationAssertionImpl\">\n+\t\t<sequence>\n+\t\t\t<element name=\"net.sf.taverna.t2.annotation.AnnotationAssertionImpl\"\n+\t\t\t\tform=\"unqualified\">\n+\t\t\t\t<complexType>\n+\t\t\t\t\t<sequence>\n+\t\t\t\t\t\t<element name=\"annotationBean\" form=\"unqualified\" type=\"tav:AnnotationBean\" />\t\t\t\t\t\t\t\t\t\t\n+\t\t\t\t\t\t<element name=\"date\" form=\"unqualified\" type=\"tav:datetime\" />\n+\t\t\t\t\t\t<element name=\"creators\" form=\"unqualified\" />\n+\t\t\t\t\t\t<element name=\"curationEventList\" form=\"unqualified\" />\n+\t\t\t\t\t</sequence>\n+\t\t\t\t</complexType>\n+\t\t\t</element>\n+\n+\t\t</sequence>\n+\t</complexType>\n+\t\n+\t<complexType name=\"AnnotationBean\">\n+\t\t<sequence>\n+\t\t\t<any minOccurs=\"0\" maxOccurs=\"unbounded\" processContents=\"lax\"  />\n+\t\t</sequence>\n+\t\t<attribute name=\"class\" form=\"unqualified\" />\n+\t</complexType>\n+\n+\t<simpleType name=\"datetime\">\n+\t\t<annotation>\n+\t\t\t<documentation>ISO 8601 datetime with spaces and letter time zones; YYYY-mm-dd hh:mm:ss.nnn TTT\n+\t\t\t</documentation>\n+\t\t</annotation>\n+\t\t<restriction base=\"string\">\n+\t\t\t<pattern value=\"\\d{4}-\\d\\d-\\d\\d \\d\\d:\\d\\d:\\d\\d\\.?\\d* .*\"></pattern>\n+\t\t</restriction>\n+\t</simpleType>\n+\n \t<simpleType name=\"Version1\">\n \t\t<annotation>\n \t\t\t<documentation>Version of workflow element covered by this schema -\n@@ -792,7 +868,8 @@\n \t\t\t<documentation>Name of a processor within a dataflow. Each processor\n \t\t\t\tin the same dataflow need a unique processor name. It is not\n \t\t\t\trequired, but recommended, to avoid 'special' characters like space,\n-\t\t\t\t\", -, ', \\, etc.</documentation>\n+\t\t\t\t\", -, ', \\, etc.\n+\t\t\t</documentation>\n \t\t</annotation>\n \t\t<restriction base=\"string\"></restriction>\n \t</simpleType>\n@@ -809,7 +886,7 @@\n \t\t\t\twith the same name (but they are separate ports), but not two input\n \t\t\t\tports or output ports with the same name. It is not required, but\n \t\t\t\trecommended, to avoid 'special' characters like space, \", -, ', \\,\n-\t\t\t\tetc.\r</documentation>\n+\t\t\t\tetc.\r\t\t\t</documentation>\n \t\t</annotation>\n \t\t<restriction base=\"string\"></restriction>\n \t</simpleType>",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow.xsd",
                "sha": "38ed24009936959168da0042a5e3398de0d3c2b6",
                "status": "modified"
            },
            {
                "additions": 54,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestAnnotationParsing.java",
                "changes": 54,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestAnnotationParsing.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestAnnotationParsing.java",
                "patch": "@@ -0,0 +1,54 @@\n+package uk.org.taverna.scufl2.translator.t2flow;\r\n+\r\n+import static org.junit.Assert.assertEquals;\r\n+import static org.junit.Assert.assertNotNull;\r\n+\r\n+import java.net.URI;\r\n+import java.net.URL;\r\n+import java.util.ArrayList;\r\n+import java.util.Arrays;\r\n+import java.util.List;\r\n+\r\n+import org.junit.Test;\r\n+\r\n+import uk.org.taverna.scufl2.api.annotation.Revision;\r\n+import uk.org.taverna.scufl2.api.common.Scufl2Tools;\r\n+import uk.org.taverna.scufl2.api.common.URITools;\r\n+import uk.org.taverna.scufl2.api.container.WorkflowBundle;\r\n+import uk.org.taverna.scufl2.api.core.Workflow;\r\n+\r\n+public class TestAnnotationParsing {\r\n+\r\n+\tprivate static final String WF_ANNOTATED = \"/annotated2.2.t2flow\";\r\n+\tprivate static Scufl2Tools scufl2Tools = new Scufl2Tools();\r\n+\r\n+\tprivate static URITools uriTools = new URITools();\r\n+\r\n+\t@Test\r\n+\tpublic void readSimpleWorkflow() throws Exception {\r\n+\t\tURL wfResource = getClass().getResource(WF_ANNOTATED);\r\n+\t\tassertNotNull(\"Could not find workflow \" + WF_ANNOTATED, wfResource);\r\n+\t\tT2FlowParser parser = new T2FlowParser();\r\n+\t\tparser.setValidating(true);\r\n+\t\tparser.setStrict(true);\r\n+\t\tWorkflowBundle wfBundle = parser.parseT2Flow(wfResource.openStream());\r\n+\t\tList<String> expectedRevisions = Arrays.asList(\r\n+\t\t\t\t\"9e1f7ffd-3bf9-4ba8-9c63-03b79b1858ad\",\r\n+\t\t\t\t\"bb902d82-b0e4-46fc-bed5-950a3b38bb98\");\r\n+\r\n+\t\tList<String> foundRevisions = new ArrayList<String>();\r\n+\r\n+\t\tRevision revision = wfBundle.getMainWorkflow().getCurrentRevision();\r\n+\t\twhile (revision != null) {\r\n+\t\t\tURI revisionUri = revision.getResourceURI();\r\n+\t\t\tString revisionUUID = uriTools\r\n+\t\t\t\t\t.relativePath(Workflow.WORKFLOW_ROOT, revisionUri)\r\n+\t\t\t\t\t.toASCIIString().replace(\"/\", \"\");\r\n+\t\t\tfoundRevisions.add(revisionUUID);\r\n+\t\t\trevision = revision.getPreviousRevision();\r\n+\t\t}\r\n+\t\tassertEquals(expectedRevisions, foundRevisions);\r\n+\r\n+\t}\r\n+\r\n+}\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestAnnotationParsing.java",
                "sha": "f9967274c2c63e7c534a5b41d8b7fabcdb09804e",
                "status": "added"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestDispatchLayerParsing.java",
                "changes": 14,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestDispatchLayerParsing.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 7,
                "filename": "scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestDispatchLayerParsing.java",
                "patch": "@@ -71,7 +71,7 @@ public void retriesDefault() throws Exception {\n \t\tURI RETRY = DISPATCH_LAYER.resolve(\"Retry\");\n \t\tDispatchStackLayer retry = scufl2Tools.dispatchStackByType(parallelise, RETRY);\n \t\tConfiguration retryConfig = scufl2Tools.configurationFor(retry, profile);\n-\t\tassertEquals(RETRY.resolve(\"#Config\"), retryConfig.getConfigurableType());\n+\t\tassertEquals(RETRY.resolve(\"#Config\"), retryConfig.getType());\n \t\tassertTrue(retryConfig.getPropertyResource().getProperties().isEmpty());\t\t\t\t\n \t}\n \t\n@@ -81,7 +81,7 @@ public void retriesDefaultFromT1() throws Exception {\n \t\tURI RETRY = DISPATCH_LAYER.resolve(\"Retry\");\n \t\tDispatchStackLayer retry = scufl2Tools.dispatchStackByType(alternates, RETRY);\n \t\tConfiguration retryConfig = scufl2Tools.configurationFor(retry, profile);\n-\t\tassertEquals(RETRY.resolve(\"#Config\"), retryConfig.getConfigurableType());\n+\t\tassertEquals(RETRY.resolve(\"#Config\"), retryConfig.getType());\n \t\tassertTrue(retryConfig.getPropertyResource().getProperties().isEmpty());\t\t\t\t\n \t}\n \t\n@@ -92,7 +92,7 @@ public void parallelizeDefault() throws Exception {\n \t\tURI PARALLELIZE = DISPATCH_LAYER.resolve(\"Parallelize\");\n \t\tDispatchStackLayer parallelize = scufl2Tools.dispatchStackByType(retry, PARALLELIZE);\n \t\tConfiguration parallelizeConfig = scufl2Tools.configurationFor(parallelize, profile);\n-\t\tassertEquals(PARALLELIZE.resolve(\"#Config\"), parallelizeConfig.getConfigurableType());\n+\t\tassertEquals(PARALLELIZE.resolve(\"#Config\"), parallelizeConfig.getType());\n \t\tassertTrue(parallelizeConfig.getPropertyResource().getProperties().isEmpty());\t\t\t\t\n \t}\n \t\n@@ -131,7 +131,7 @@ public void parallelizeDefaultFromT1() throws Exception {\n \t\tURI PARALLELIZE = DISPATCH_LAYER.resolve(\"Parallelize\");\n \t\tDispatchStackLayer parallelize = scufl2Tools.dispatchStackByType(alternates, PARALLELIZE);\n \t\tConfiguration parallelizeConfig = scufl2Tools.configurationFor(parallelize, profile);\n-\t\tassertEquals(PARALLELIZE.resolve(\"#Config\"), parallelizeConfig.getConfigurableType());\n+\t\tassertEquals(PARALLELIZE.resolve(\"#Config\"), parallelizeConfig.getType());\n \t\tassertTrue(parallelizeConfig.getPropertyResource().getProperties().isEmpty());\t\t\t\t\n \t}\n \t\n@@ -141,7 +141,7 @@ public void parallelize() throws Exception {\n \t\tURI PARALLELIZE = DISPATCH_LAYER.resolve(\"Parallelize\");\n \t\tDispatchStackLayer parallelize = scufl2Tools.dispatchStackByType(retry, PARALLELIZE);\n \t\tConfiguration parallelizeConfig = scufl2Tools.configurationFor(parallelize, profile);\n-\t\tassertEquals(PARALLELIZE.resolve(\"#Config\"), parallelizeConfig.getConfigurableType());\n+\t\tassertEquals(PARALLELIZE.resolve(\"#Config\"), parallelizeConfig.getType());\n \t\tassertFalse(parallelizeConfig.getPropertyResource().getProperties().isEmpty());\t\t\t\t\n \t\tassertEquals(5, parallelizeConfig.getPropertyResource().getPropertyAsLiteral(PARALLELIZE.resolve(\"#maxJobs\")).getLiteralValueAsInt());\n \t}\n@@ -153,7 +153,7 @@ public void retriesCustom() throws Exception {\n \t\tURI RETRY = DISPATCH_LAYER.resolve(\"Retry\");\n \t\tDispatchStackLayer retry = scufl2Tools.dispatchStackByType(retries, RETRY);\n \t\tConfiguration retryConfig = scufl2Tools.configurationFor(retry, profile);\n-\t\tassertEquals(RETRY.resolve(\"#Config\"), retryConfig.getConfigurableType());\n+\t\tassertEquals(RETRY.resolve(\"#Config\"), retryConfig.getType());\n \n \t\tassertTrue(retryConfig.getPropertyResource().hasProperty(RETRY.resolve(\"#maxRetries\")));\n \t\tassertTrue(retryConfig.getPropertyResource().hasProperty(RETRY.resolve(\"#initialDelay\")));\n@@ -174,7 +174,7 @@ public void retries() throws Exception {\n \t\tURI RETRY = DISPATCH_LAYER.resolve(\"Retry\");\n \t\tDispatchStackLayer retry = scufl2Tools.dispatchStackByType(retries, RETRY);\n \t\tConfiguration retryConfig = scufl2Tools.configurationFor(retry, profile);\n-\t\tassertEquals(RETRY.resolve(\"#Config\"), retryConfig.getConfigurableType());\n+\t\tassertEquals(RETRY.resolve(\"#Config\"), retryConfig.getType());\n \t\tassertEquals(3, retryConfig.getPropertyResource().getPropertyAsLiteral(RETRY.resolve(\"#maxRetries\")).getLiteralValueAsInt());\n \n \t\tassertFalse(retryConfig.getPropertyResource().hasProperty(RETRY.resolve(\"#initialDelay\")));",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestDispatchLayerParsing.java",
                "sha": "e03aaf2f8152eb62c4c46bcc7872dae0f12faa3e",
                "status": "modified"
            },
            {
                "additions": 32,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestT2FlowReader.java",
                "changes": 37,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestT2FlowReader.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 5,
                "filename": "scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestT2FlowReader.java",
                "patch": "@@ -6,6 +6,7 @@\n \n import java.io.ByteArrayOutputStream;\n import java.net.URL;\n+import java.util.Map;\n \n import org.apache.commons.io.IOUtils;\n import org.junit.Test;\n@@ -14,26 +15,28 @@\n import uk.org.taverna.scufl2.api.io.WorkflowBundleIO;\n import uk.org.taverna.scufl2.api.io.structure.StructureReader;\n import uk.org.taverna.scufl2.api.profiles.Profile;\n+import uk.org.taverna.scufl2.ucfpackage.UCFPackage.ResourceEntry;\n \n public class TestT2FlowReader {\n \t\n+\tprivate static final String AS_UUID = \"92c5e8d5-8360-4f86-a845-09c9849cbdc5\";\n \tWorkflowBundleIO io = new WorkflowBundleIO();\n \tprivate static final String AS_T2FLOW = \"/as.t2flow\";\n \n \t@Test\n \tpublic void readSimpleWorkflow() throws Exception {\n \t\tURL wfResource = getClass().getResource(AS_T2FLOW);\n \t\tassertNotNull(\"Could not find workflow \" + AS_T2FLOW, wfResource);\n-\t\tWorkflowBundle researchObj = io.readBundle(wfResource,\n+\t\tWorkflowBundle wfBundle = io.readBundle(wfResource,\n \t\t\t\tAPPLICATION_VND_TAVERNA_T2FLOW_XML);\n-\t\tProfile profile = researchObj.getMainProfile();\n-\t\tassertEquals(1, researchObj.getProfiles().size());\n+\t\tProfile profile = wfBundle.getMainProfile();\n+\t\tassertEquals(1, wfBundle.getProfiles().size());\n \t\tassertEquals(profile,\n-\t\t\t\tresearchObj.getProfiles().getByName(\"taverna-2.1.0\"));\n+\t\t\t\twfBundle.getProfiles().getByName(\"taverna-2.1.0\"));\n \t\t\n \t\tString report = IOUtils.toString(getClass().getResourceAsStream(\"/as.txt\"));\n \t\tByteArrayOutputStream byteStream = new ByteArrayOutputStream();\n-\t\tio.writeBundle(researchObj, byteStream, StructureReader.TEXT_VND_TAVERNA_SCUFL2_STRUCTURE);\n+\t\tio.writeBundle(wfBundle, byteStream, StructureReader.TEXT_VND_TAVERNA_SCUFL2_STRUCTURE);\n \t\tassertEquals(report, byteStream.toString(\"utf-8\"));\t\t\n \t}\n \t\n@@ -48,5 +51,29 @@ public void guessMediaType() throws Exception {\n \t\tfirstBytes[49] = 32;\n \t\tassertEquals(null, io.guessMediaTypeForSignature(firstBytes));\n \t}\n+\n+\t@Test\n+\tpublic void preservedOriginalT2flow() throws Exception {\n+\t\tURL wfResource = getClass().getResource(AS_T2FLOW);\n+\t\tassertNotNull(\"Could not find workflow \" + AS_T2FLOW, wfResource);\n+\t\tWorkflowBundle wfBundle = io.readBundle(wfResource,\n+\t\t\t\tAPPLICATION_VND_TAVERNA_T2FLOW_XML);\n+\t\tMap<String, ResourceEntry> history = wfBundle.getResources()\n+\t\t\t\t.listResources(\"history\");\n+\t\tassertEquals(1, history.size());\n+\t\tassertEquals(AS_UUID + \".t2flow\", history.keySet().iterator().next());\n+\t\tResourceEntry r = history.get(AS_UUID + \".t2flow\");\n+\t\tassertEquals(\"application/vnd.taverna.t2flow+xml\", r.getMediaType());\n+\t\tString original = IOUtils.toString(getClass().getResourceAsStream(\n+\t\t\t\tAS_T2FLOW));\n+\t\tString shouldBeOriginal = wfBundle.getResources().getResourceAsString(\n+\t\t\t\t\"history/\" + AS_UUID + \".t2flow\");\n+\t\tassertEquals(shouldBeOriginal, original);\n+\n+\t}\n+\t\n+\n+\t\n+\t\n \t\n }",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestT2FlowReader.java",
                "sha": "f3c908f95f0d747169ff78227077e5524159d600",
                "status": "modified"
            },
            {
                "additions": 15,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/TestExternalToolActivityParser.java",
                "changes": 27,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/TestExternalToolActivityParser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 12,
                "filename": "scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/TestExternalToolActivityParser.java",
                "patch": "@@ -71,15 +71,17 @@ public void parse2_2() throws Exception {\n \t\tassertNotNull(proc);\n \t\tConfiguration config = scufl2Tools.configurationForActivityBoundToProcessor(proc, profile);\n \t\tassertNotNull(config);\n-\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"), config.getConfigurableType());\n+\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"), config.getType());\n \n \t\tActivity activity = (Activity) config.getConfigures();\n \t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());\n \n-\t\tURI toolId = config.getPropertyResource().getPropertyAsResourceURI(\n+\t\tString repositoryUrl = config.getPropertyResource().getPropertyAsString(\n+\t\t\t\tACTIVITY_URI.resolve(\"#repositoryUrl\"));\n+\t\tassertEquals(\"http://taverna.nordugrid.org/sharedRepository/xml.php\", repositoryUrl);\n+\t\tString toolId = config.getPropertyResource().getPropertyAsString(\n \t\t\t\tACTIVITY_URI.resolve(\"#toolId\"));\n-\t\tassertEquals(\"http://taverna.nordugrid.org/sharedRepository/xml.php#cat\",\n-\t\t\t\ttoolId.toASCIIString());\n+\t\tassertEquals(\"cat\", toolId);\n \n \t\t// Not much more to check as 2.2 does not include tool description\n \n@@ -97,7 +99,7 @@ public void parse2_2_resaved() throws Exception {\n \t\tassertNotNull(proc);\n \t\tConfiguration config = scufl2Tools.configurationForActivityBoundToProcessor(proc, profile);\n \t\tassertNotNull(config);\n-\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"), config.getConfigurableType());\n+\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"), config.getType());\n \t\tPropertyResource resource = config.getPropertyResource();\n \t\tassertTrue(resource.hasProperty(ACTIVITY_URI.resolve(\"#toolId\")));\n \t\tURI toolId = resource.getPropertyAsResourceURI(ACTIVITY_URI.resolve(\"#toolId\"));\n@@ -215,14 +217,15 @@ public void parse2_2_resaved_simple() throws Exception {\n \t\tassertNotNull(proc);\n \t\tConfiguration config = scufl2Tools.configurationForActivityBoundToProcessor(proc, profile);\n \t\tassertNotNull(config);\n-\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"), config.getConfigurableType());\n+\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"), config.getType());\n \t\tPropertyResource resource = config.getPropertyResource();\n+\t\tassertTrue(resource.hasProperty(ACTIVITY_URI.resolve(\"#repositoryUrl\")));\n+\t\tString repositoryUrl = resource.getPropertyAsString(ACTIVITY_URI.resolve(\"#repositoryUrl\"));\n+\t\tassertEquals(\"http://taverna.nordugrid.org/sharedRepository/xml.php\", repositoryUrl);\n \t\tassertTrue(resource.hasProperty(ACTIVITY_URI.resolve(\"#toolId\")));\n-\t\tURI toolId = resource.getPropertyAsResourceURI(ACTIVITY_URI.resolve(\"#toolId\"));\n-\t\tassertEquals(\"http://taverna.nordugrid.org/sharedRepository/xml.php#cat\",\n-\t\t\t\ttoolId.toASCIIString());\n-\t\tassertEquals(false, resource.getPropertyAsLiteral(ACTIVITY_URI.resolve(\"#edited\"))\n-\t\t\t\t.getLiteralValueAsBoolean());\n+\t\tString toolId = resource.getPropertyAsString(ACTIVITY_URI.resolve(\"#toolId\"));\n+\t\tassertEquals(\"cat\", toolId);\n+\t\tassertFalse(resource.hasProperty(ACTIVITY_URI.resolve(\"#edited\")));\n \n \t\tassertEquals(\"789663B8-DA91-428A-9F7D-B3F3DA185FD4\",\n \t\t\t\tresource.getPropertyAsString(ACTIVITY_URI.resolve(\"#mechanismType\")));\n@@ -325,7 +328,7 @@ public void parse2_3() throws Exception {\n \t\tassertNotNull(proc);\n \t\tConfiguration config = scufl2Tools.configurationForActivityBoundToProcessor(proc, profile);\n \t\tassertNotNull(config);\n-\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"), config.getConfigurableType());\n+\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"), config.getType());\n \t\tPropertyResource resource = config.getPropertyResource();\n \t\tURI toolId = resource.getPropertyAsResourceURI(ACTIVITY_URI.resolve(\"#toolId\"));\n \t\tassertEquals(ACTIVITY_URI.resolve(\"#2cd545bf-64ae-4cda-84fc-8cfe2faed772\"), toolId);",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/TestExternalToolActivityParser.java",
                "sha": "f96555687a7562f6d1626b108d8890b7ba4bf7eb",
                "status": "modified"
            },
            {
                "additions": 9,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/TestRESTActivityParser.java",
                "changes": 18,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/TestRESTActivityParser.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 9,
                "filename": "scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/TestRESTActivityParser.java",
                "patch": "@@ -71,7 +71,7 @@ public void default_2_2_saved() throws Exception {\n \t\t\t\t.configurationForActivityBoundToProcessor(proc, profile);\n \t\tassertNotNull(config);\n \t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"),\n-\t\t\t\tconfig.getConfigurableType());\n+\t\t\t\tconfig.getType());\n \n \t\tActivity activity = (Activity) config.getConfigures();\n \t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());\n@@ -156,7 +156,7 @@ public void default2_2() throws Exception {\n \t\t\t\t.configurationForActivityBoundToProcessor(proc, profile);\n \t\tassertNotNull(config);\n \t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"),\n-\t\t\t\tconfig.getConfigurableType());\n+\t\t\t\tconfig.getType());\n \n \t\tActivity activity = (Activity) config.getConfigures();\n \t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());\n@@ -241,7 +241,7 @@ public void default2_3() throws Exception {\n \t\t\t\t.configurationForActivityBoundToProcessor(proc, profile);\n \t\tassertNotNull(config);\n \t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"),\n-\t\t\t\tconfig.getConfigurableType());\n+\t\t\t\tconfig.getType());\n \n \t\tActivity activity = (Activity) config.getConfigures();\n \t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());\n@@ -424,7 +424,7 @@ public void put2_2() throws Exception {\n \t\t\t\t.configurationForActivityBoundToProcessor(proc, profile);\n \t\tassertNotNull(config);\n \t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"),\n-\t\t\t\tconfig.getConfigurableType());\n+\t\t\t\tconfig.getType());\n \n \t\tActivity activity = (Activity) config.getConfigures();\n \t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());\n@@ -532,7 +532,7 @@ public void put2_2_resaved() throws Exception {\n \t\t\t\t\t.configurationForActivityBoundToProcessor(proc, profile);\n \t\t\tassertNotNull(config);\n \t\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"),\n-\t\t\t\t\tconfig.getConfigurableType());\n+\t\t\t\t\tconfig.getType());\n \n \t\t\tActivity activity = (Activity) config.getConfigures();\n \t\t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());\n@@ -640,7 +640,7 @@ public void put2_3() throws Exception {\n \t\t\t\t\t.configurationForActivityBoundToProcessor(proc, profile);\n \t\t\tassertNotNull(config);\n \t\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"),\n-\t\t\t\t\tconfig.getConfigurableType());\n+\t\t\t\t\tconfig.getType());\n \n \t\t\tActivity activity = (Activity) config.getConfigures();\n \t\t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());\n@@ -750,7 +750,7 @@ public void post2_2() throws Exception {\n \t\t\t\t\t.configurationForActivityBoundToProcessor(proc, profile);\n \t\t\tassertNotNull(config);\n \t\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"),\n-\t\t\t\t\tconfig.getConfigurableType());\n+\t\t\t\t\tconfig.getType());\n \n \t\t\tActivity activity = (Activity) config.getConfigures();\n \t\t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());\n@@ -847,7 +847,7 @@ public void post2_2_saved_2_3() throws Exception {\n \t\t\t\t\t\t.configurationForActivityBoundToProcessor(proc, profile);\n \t\t\t\tassertNotNull(config);\n \t\t\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"),\n-\t\t\t\t\t\tconfig.getConfigurableType());\n+\t\t\t\t\t\tconfig.getType());\n \n \t\t\t\tActivity activity = (Activity) config.getConfigures();\n \t\t\t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());\n@@ -944,7 +944,7 @@ public void post2_3() throws Exception {\n \t\t\t\t\t\t.configurationForActivityBoundToProcessor(proc, profile);\n \t\t\t\tassertNotNull(config);\n \t\t\t\tassertEquals(ACTIVITY_URI.resolve(\"#Config\"),\n-\t\t\t\t\t\tconfig.getConfigurableType());\n+\t\t\t\t\t\tconfig.getType());\n \n \t\t\t\tActivity activity = (Activity) config.getConfigures();\n \t\t\t\tassertEquals(ACTIVITY_URI, activity.getConfigurableType());",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/TestRESTActivityParser.java",
                "sha": "c824d1be776a17b36951c9f9818c7babfafecac2",
                "status": "modified"
            },
            {
                "additions": 408,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/resources/annotated2.2-xsd.t2flow",
                "changes": 408,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/resources/annotated2.2-xsd.t2flow?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-t2flow/src/test/resources/annotated2.2-xsd.t2flow",
                "patch": "@@ -0,0 +1,408 @@\n+<workflow xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n+\txsi:schemaLocation=\"http://taverna.sf.net/2008/xml/t2flow ../../main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow-extended.xsd\"\r\n+\txmlns=\"http://taverna.sf.net/2008/xml/t2flow\" version=\"1\" producedBy=\"taverna-2.2.0\">\r\n+\t<dataflow id=\"9e1f7ffd-3bf9-4ba8-9c63-03b79b1858ad\" role=\"top\">\r\n+\t\t<name>Workflow_title</name>\r\n+\t\t<inputPorts>\r\n+\t\t\t<port>\r\n+\t\t\t\t<name>in0</name>\r\n+\t\t\t\t<depth>0</depth>\r\n+\t\t\t\t<granularDepth>0</granularDepth>\r\n+\t\t\t\t<annotations>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>Only example</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:19:58.897 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t</annotations>\r\n+\t\t\t</port>\r\n+\t\t\t<port>\r\n+\t\t\t\t<name>in1</name>\r\n+\t\t\t\t<depth>1</depth>\r\n+\t\t\t\t<granularDepth>1</granularDepth>\r\n+\t\t\t\t<annotations>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>Only description</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:19:47.699 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t</annotations>\r\n+\t\t\t</port>\r\n+\t\t\t<port>\r\n+\t\t\t\t<name>in2</name>\r\n+\t\t\t\t<depth>2</depth>\r\n+\t\t\t\t<granularDepth>2</granularDepth>\r\n+\t\t\t\t<annotations>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>Some kind </text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:19:34.518 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>Workflow input in2</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:19:25.509 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t</annotations>\r\n+\t\t\t</port>\r\n+\t\t</inputPorts>\r\n+\t\t<outputPorts>\r\n+\t\t\t<port>\r\n+\t\t\t\t<name>out0</name>\r\n+\t\t\t\t<annotations>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\">\r\n+\t\t\t\t\t\t\t\t\t\t<text />\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:26:10.972 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>First annotation</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:20:30.875 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>Not empty</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:25:56.668 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>Third annotation</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:25:50.301 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>Empty again</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:26:05.105 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>Second annotation</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2010-07-21 11:25:39.729 BST</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t</annotations>\r\n+\t\t\t</port>\r\n+\t\t\t<port>\r\n+\t\t\t\t<name>out1</name>\r\n+\t\t\t\t<annotations />\r\n+\t\t\t</port>\r\n+\t\t</outputPorts>\r\n+\t\t<processors>\r\n+\t\t\t<processor>\r\n+\t\t\t\t<name>Beanshell</name>\r\n+\t\t\t\t<inputPorts />\r\n+\t\t\t\t<outputPorts />\r\n+\t\t\t\t<annotations />\r\n+\t\t\t\t<activities>\r\n+\t\t\t\t\t<activity>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.activities</group>\r\n+\t\t\t\t\t\t\t<artifact>beanshell-activity</artifact>\r\n+\t\t\t\t\t\t\t<version>1.2</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.activities.beanshell.BeanshellActivity</class>\r\n+\t\t\t\t\t\t<inputMap />\r\n+\t\t\t\t\t\t<outputMap />\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean\r\n+\t\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t\t<script />\r\n+\t\t\t\t\t\t\t\t<dependencies />\r\n+\t\t\t\t\t\t\t\t<classLoaderSharing>workflow</classLoaderSharing>\r\n+\t\t\t\t\t\t\t\t<localDependencies />\r\n+\t\t\t\t\t\t\t\t<artifactDependencies />\r\n+\t\t\t\t\t\t\t\t<inputs>\r\n+\t\t\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\r\n+\t\t\t\t\t\t\t\t\t\t<handledReferenceSchemes />\r\n+\t\t\t\t\t\t\t\t\t\t<translatedElementType>java.lang.String\r\n+\t\t\t\t\t\t\t\t\t\t</translatedElementType>\r\n+\t\t\t\t\t\t\t\t\t\t<allowsLiteralValues>true</allowsLiteralValues>\r\n+\t\t\t\t\t\t\t\t\t\t<name>in1</name>\r\n+\t\t\t\t\t\t\t\t\t\t<depth>0</depth>\r\n+\t\t\t\t\t\t\t\t\t\t<mimeTypes>\r\n+\t\t\t\t\t\t\t\t\t\t\t<string>text/plain</string>\r\n+\t\t\t\t\t\t\t\t\t\t</mimeTypes>\r\n+\t\t\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\r\n+\t\t\t\t\t\t\t\t</inputs>\r\n+\t\t\t\t\t\t\t\t<outputs>\r\n+\t\t\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\r\n+\t\t\t\t\t\t\t\t\t\t<granularDepth>0</granularDepth>\r\n+\t\t\t\t\t\t\t\t\t\t<name>out1</name>\r\n+\t\t\t\t\t\t\t\t\t\t<depth>0</depth>\r\n+\t\t\t\t\t\t\t\t\t\t<mimeTypes />\r\n+\t\t\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\r\n+\t\t\t\t\t\t\t\t</outputs>\r\n+\t\t\t\t\t\t\t</net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean>\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t\t<annotations />\r\n+\t\t\t\t\t</activity>\r\n+\t\t\t\t</activities>\r\n+\t\t\t\t<dispatchStack>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.2</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig\r\n+\t\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t\t<maxJobs>1</maxJobs>\r\n+\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig>\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.2</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<null xmlns=\"\" />\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.2</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<null xmlns=\"\" />\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.2</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig\r\n+\t\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t\t<backoffFactor>1.0</backoffFactor>\r\n+\t\t\t\t\t\t\t\t<initialDelay>1000</initialDelay>\r\n+\t\t\t\t\t\t\t\t<maxDelay>5000</maxDelay>\r\n+\t\t\t\t\t\t\t\t<maxRetries>0</maxRetries>\r\n+\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig>\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.2</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<null xmlns=\"\" />\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t</dispatchStack>\r\n+\t\t\t\t<iterationStrategyStack>\r\n+\t\t\t\t\t<iteration>\r\n+\t\t\t\t\t\t<strategy />\r\n+\t\t\t\t\t</iteration>\r\n+\t\t\t\t</iterationStrategyStack>\r\n+\t\t\t</processor>\r\n+\t\t</processors>\r\n+\t\t<conditions />\r\n+\t\t<datalinks />\r\n+\t\t<annotations>\r\n+\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.DescriptiveTitle\">\r\n+\t\t\t\t\t\t\t\t<text>Workflow title</text>\r\n+\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t<date>2010-07-21 11:20:43.824 BST</date>\r\n+\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t</annotation_chain>\r\n+\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t<text>Workflow description</text>\r\n+\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t<date>2010-07-21 11:20:50.161 BST</date>\r\n+\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t</annotation_chain>\r\n+\t\t\t<annotation_chain_2_2 encoding=\"xstream\">\r\n+\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+\t\t\t\t\t\t\t\t<identification>bb902d82-b0e4-46fc-bed5-950a3b38bb98</identification>\r\n+\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t<date>2010-07-21 11:22:31.286 BST</date>\r\n+\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t</annotation_chain_2_2>\r\n+\t\t\t<annotation_chain_2_2 encoding=\"xstream\">\r\n+\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+\t\t\t\t\t\t\t\t<identification>9e1f7ffd-3bf9-4ba8-9c63-03b79b1858ad</identification>\r\n+\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t<date>2010-07-21 11:26:16.844 BST</date>\r\n+\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t</annotation_chain_2_2>\r\n+\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.Author\">\r\n+\t\t\t\t\t\t\t\t<text>Workflow author</text>\r\n+\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t<date>2010-07-21 11:20:39.864 BST</date>\r\n+\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t</annotation_chain>\r\n+\t\t</annotations>\r\n+\t</dataflow>\r\n+</workflow>\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/resources/annotated2.2-xsd.t2flow",
                "sha": "45c525ca63a6f08544378f19dfb932ad5b05e305",
                "status": "added"
            },
            {
                "additions": 456,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/resources/annotations_2_4-xsd.t2flow",
                "changes": 456,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/resources/annotations_2_4-xsd.t2flow?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-t2flow/src/test/resources/annotations_2_4-xsd.t2flow",
                "patch": "@@ -0,0 +1,456 @@\n+<workflow xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n+\txsi:schemaLocation=\"http://taverna.sf.net/2008/xml/t2flow ../../main/resources/uk/org/taverna/scufl2/translator/t2flow/xsd/t2flow-extended.xsd\"\r\n+\r\n+\txmlns=\"http://taverna.sf.net/2008/xml/t2flow\" version=\"1\" producedBy=\"taverna-2.4.0\">\r\n+\t<dataflow id=\"42750c57-f4f0-4a98-8077-88eafd28d211\" role=\"top\">\r\n+\t\t<name>The_title</name>\r\n+\t\t<inputPorts>\r\n+\t\t\t<port>\r\n+\t\t\t\t<name>in1</name>\r\n+\t\t\t\t<depth>0</depth>\r\n+\t\t\t\t<granularDepth>0</granularDepth>\r\n+\t\t\t\t<annotations>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>The workflow input port in1</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2012-09-26 08:35:46.88 UTC</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>exampleIn</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2012-09-26 08:36:01.836 UTC</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t</annotations>\r\n+\t\t\t</port>\r\n+\t\t</inputPorts>\r\n+\t\t<outputPorts>\r\n+\t\t\t<port>\r\n+\t\t\t\t<name>out1</name>\r\n+\t\t\t\t<annotations>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>exampleOut</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2012-09-26 08:35:58.605 UTC</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>The workflow output out1</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2012-09-26 08:35:54.934 UTC</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t</annotations>\r\n+\t\t\t</port>\r\n+\t\t</outputPorts>\r\n+\t\t<processors>\r\n+\t\t\t<processor>\r\n+\t\t\t\t<name>Beanshell</name>\r\n+\t\t\t\t<inputPorts>\r\n+\t\t\t\t\t<port>\r\n+\t\t\t\t\t\t<name>in1</name>\r\n+\t\t\t\t\t\t<depth>0</depth>\r\n+\t\t\t\t\t</port>\r\n+\t\t\t\t</inputPorts>\r\n+\t\t\t\t<outputPorts>\r\n+\t\t\t\t\t<port>\r\n+\t\t\t\t\t\t<name>out1</name>\r\n+\t\t\t\t\t\t<depth>0</depth>\r\n+\t\t\t\t\t\t<granularDepth>0</granularDepth>\r\n+\t\t\t\t\t</port>\r\n+\t\t\t\t</outputPorts>\r\n+\t\t\t\t<annotations>\r\n+\t\t\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t\t\t<text>The processor description</text>\r\n+\t\t\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t\t\t<date>2012-09-26 08:35:04.898 UTC</date>\r\n+\t\t\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t\t\t</annotation_chain>\r\n+\t\t\t\t</annotations>\r\n+\t\t\t\t<activities>\r\n+\t\t\t\t\t<activity>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.activities</group>\r\n+\t\t\t\t\t\t\t<artifact>beanshell-activity</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.activities.beanshell.BeanshellActivity</class>\r\n+\t\t\t\t\t\t<inputMap>\r\n+\t\t\t\t\t\t\t<map from=\"in1\" to=\"in1\" />\r\n+\t\t\t\t\t\t</inputMap>\r\n+\t\t\t\t\t\t<outputMap>\r\n+\t\t\t\t\t\t\t<map from=\"out1\" to=\"out1\" />\r\n+\t\t\t\t\t\t</outputMap>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean\r\n+\t\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t\t<inputs>\r\n+\t\t\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\r\n+\t\t\t\t\t\t\t\t\t\t<name>in1</name>\r\n+\t\t\t\t\t\t\t\t\t\t<depth>0</depth>\r\n+\t\t\t\t\t\t\t\t\t\t<mimeTypes>\r\n+\t\t\t\t\t\t\t\t\t\t\t<string>text/plain</string>\r\n+\t\t\t\t\t\t\t\t\t\t</mimeTypes>\r\n+\t\t\t\t\t\t\t\t\t\t<handledReferenceSchemes />\r\n+\t\t\t\t\t\t\t\t\t\t<translatedElementType>java.lang.String\r\n+\t\t\t\t\t\t\t\t\t\t</translatedElementType>\r\n+\t\t\t\t\t\t\t\t\t\t<allowsLiteralValues>true</allowsLiteralValues>\r\n+\t\t\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\r\n+\t\t\t\t\t\t\t\t</inputs>\r\n+\t\t\t\t\t\t\t\t<outputs>\r\n+\t\t\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\r\n+\t\t\t\t\t\t\t\t\t\t<name>out1</name>\r\n+\t\t\t\t\t\t\t\t\t\t<depth>0</depth>\r\n+\t\t\t\t\t\t\t\t\t\t<mimeTypes />\r\n+\t\t\t\t\t\t\t\t\t\t<granularDepth>0</granularDepth>\r\n+\t\t\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\r\n+\t\t\t\t\t\t\t\t</outputs>\r\n+\t\t\t\t\t\t\t\t<classLoaderSharing>workflow</classLoaderSharing>\r\n+\t\t\t\t\t\t\t\t<localDependencies />\r\n+\t\t\t\t\t\t\t\t<artifactDependencies />\r\n+\t\t\t\t\t\t\t\t<script>the script</script>\r\n+\t\t\t\t\t\t\t\t<dependencies />\r\n+\t\t\t\t\t\t\t</net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean>\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t\t<annotations />\r\n+\t\t\t\t\t</activity>\r\n+\t\t\t\t</activities>\r\n+\t\t\t\t<dispatchStack>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig\r\n+\t\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t\t<maxJobs>1</maxJobs>\r\n+\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig>\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<null xmlns=\"\" />\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<null xmlns=\"\" />\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig\r\n+\t\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t\t<backoffFactor>1.0</backoffFactor>\r\n+\t\t\t\t\t\t\t\t<initialDelay>1000</initialDelay>\r\n+\t\t\t\t\t\t\t\t<maxDelay>5000</maxDelay>\r\n+\t\t\t\t\t\t\t\t<maxRetries>0</maxRetries>\r\n+\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig>\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<null xmlns=\"\" />\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t</dispatchStack>\r\n+\t\t\t\t<iterationStrategyStack>\r\n+\t\t\t\t\t<iteration>\r\n+\t\t\t\t\t\t<strategy>\r\n+\t\t\t\t\t\t\t<cross>\r\n+\t\t\t\t\t\t\t\t<port name=\"in1\" depth=\"0\" />\r\n+\t\t\t\t\t\t\t</cross>\r\n+\t\t\t\t\t\t</strategy>\r\n+\t\t\t\t\t</iteration>\r\n+\t\t\t\t</iterationStrategyStack>\r\n+\t\t\t</processor>\r\n+\t\t\t<processor>\r\n+\t\t\t\t<name>Text_constant</name>\r\n+\t\t\t\t<inputPorts />\r\n+\t\t\t\t<outputPorts>\r\n+\t\t\t\t\t<port>\r\n+\t\t\t\t\t\t<name>value</name>\r\n+\t\t\t\t\t\t<depth>0</depth>\r\n+\t\t\t\t\t\t<granularDepth>0</granularDepth>\r\n+\t\t\t\t\t</port>\r\n+\t\t\t\t</outputPorts>\r\n+\t\t\t\t<annotations />\r\n+\t\t\t\t<activities>\r\n+\t\t\t\t\t<activity>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.activities</group>\r\n+\t\t\t\t\t\t\t<artifact>stringconstant-activity</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.activities.stringconstant.StringConstantActivity</class>\r\n+\t\t\t\t\t\t<inputMap />\r\n+\t\t\t\t\t\t<outputMap>\r\n+\t\t\t\t\t\t\t<map from=\"value\" to=\"value\" />\r\n+\t\t\t\t\t\t</outputMap>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean\r\n+\t\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t\t<value>A text</value>\r\n+\t\t\t\t\t\t\t</net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean>\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t\t<annotations />\r\n+\t\t\t\t\t</activity>\r\n+\t\t\t\t</activities>\r\n+\t\t\t\t<dispatchStack>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig\r\n+\t\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t\t<maxJobs>1</maxJobs>\r\n+\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig>\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<null xmlns=\"\" />\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<null xmlns=\"\" />\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig\r\n+\t\t\t\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t\t\t\t<backoffFactor>1.0</backoffFactor>\r\n+\t\t\t\t\t\t\t\t<initialDelay>1000</initialDelay>\r\n+\t\t\t\t\t\t\t\t<maxDelay>5000</maxDelay>\r\n+\t\t\t\t\t\t\t\t<maxRetries>0</maxRetries>\r\n+\t\t\t\t\t\t\t</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig>\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t\t<dispatchLayer>\r\n+\t\t\t\t\t\t<raven>\r\n+\t\t\t\t\t\t\t<group>net.sf.taverna.t2.core</group>\r\n+\t\t\t\t\t\t\t<artifact>workflowmodel-impl</artifact>\r\n+\t\t\t\t\t\t\t<version>1.4</version>\r\n+\t\t\t\t\t\t</raven>\r\n+\t\t\t\t\t\t<class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class>\r\n+\t\t\t\t\t\t<configBean encoding=\"xstream\">\r\n+\t\t\t\t\t\t\t<null xmlns=\"\" />\r\n+\t\t\t\t\t\t</configBean>\r\n+\t\t\t\t\t</dispatchLayer>\r\n+\t\t\t\t</dispatchStack>\r\n+\t\t\t\t<iterationStrategyStack>\r\n+\t\t\t\t\t<iteration>\r\n+\t\t\t\t\t\t<strategy />\r\n+\t\t\t\t\t</iteration>\r\n+\t\t\t\t</iterationStrategyStack>\r\n+\t\t\t</processor>\r\n+\t\t</processors>\r\n+\t\t<conditions>\r\n+\t\t\t<condition control=\"Text_constant\" target=\"Beanshell\" />\r\n+\t\t</conditions>\r\n+\t\t<datalinks>\r\n+\t\t\t<datalink>\r\n+\t\t\t\t<sink type=\"processor\">\r\n+\t\t\t\t\t<processor>Beanshell</processor>\r\n+\t\t\t\t\t<port>in1</port>\r\n+\t\t\t\t</sink>\r\n+\t\t\t\t<source type=\"dataflow\">\r\n+\t\t\t\t\t<port>in1</port>\r\n+\t\t\t\t</source>\r\n+\t\t\t</datalink>\r\n+\t\t\t<datalink>\r\n+\t\t\t\t<sink type=\"merge\">\r\n+\t\t\t\t\t<port>out1</port>\r\n+\t\t\t\t</sink>\r\n+\t\t\t\t<source type=\"processor\">\r\n+\t\t\t\t\t<processor>Beanshell</processor>\r\n+\t\t\t\t\t<port>out1</port>\r\n+\t\t\t\t</source>\r\n+\t\t\t</datalink>\r\n+\t\t\t<datalink>\r\n+\t\t\t\t<sink type=\"merge\">\r\n+\t\t\t\t\t<port>out1</port>\r\n+\t\t\t\t</sink>\r\n+\t\t\t\t<source type=\"processor\">\r\n+\t\t\t\t\t<processor>Text_constant</processor>\r\n+\t\t\t\t\t<port>value</port>\r\n+\t\t\t\t</source>\r\n+\t\t\t</datalink>\r\n+\t\t</datalinks>\r\n+\t\t<annotations>\r\n+\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.Author\">\r\n+\t\t\t\t\t\t\t\t<text>The Author\r\n+\t\t\t\t\t\t\t\t\tand spaces and\r\n+\t\t\t\t\t\t\t\t\tnewlines\r\n+\t\t\t\t\t\t\t\t</text>\r\n+\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t<date>2012-09-26 08:34:42.432 UTC</date>\r\n+\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t</annotation_chain>\r\n+\t\t\t<annotation_chain_2_2 encoding=\"xstream\">\r\n+\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+\t\t\t\t\t\t\t\t<identification>42750c57-f4f0-4a98-8077-88eafd28d211\r\n+\t\t\t\t\t\t\t\t</identification>\r\n+\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t<date>2012-09-26 08:37:27.976 UTC</date>\r\n+\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t</annotation_chain_2_2>\r\n+\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+\t\t\t\t\t\t\t\t<text>The description.\r\n+\r\n+\t\t\t\t\t\t\t\t\tThis could be quite long.\r\n+\t\t\t\t\t\t\t\t</text>\r\n+\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t<date>2012-09-26 08:34:56.353 UTC</date>\r\n+\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t</annotation_chain>\r\n+\t\t\t<annotation_chain encoding=\"xstream\">\r\n+\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationChainImpl\r\n+\t\t\t\t\txmlns=\"\">\r\n+\t\t\t\t\t<annotationAssertions>\r\n+\t\t\t\t\t\t<net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t\t\t<annotationBean\r\n+\t\t\t\t\t\t\t\tclass=\"net.sf.taverna.t2.annotation.annotationbeans.DescriptiveTitle\">\r\n+\t\t\t\t\t\t\t\t<text>The title</text>\r\n+\t\t\t\t\t\t\t</annotationBean>\r\n+\t\t\t\t\t\t\t<date>2012-09-26 08:34:46.286 UTC</date>\r\n+\t\t\t\t\t\t\t<creators />\r\n+\t\t\t\t\t\t\t<curationEventList />\r\n+\t\t\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+\t\t\t\t\t</annotationAssertions>\r\n+\t\t\t\t</net.sf.taverna.t2.annotation.AnnotationChainImpl>\r\n+\t\t\t</annotation_chain>\r\n+\t\t</annotations>\r\n+\t</dataflow>\r\n+</workflow>\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/resources/annotations_2_4-xsd.t2flow",
                "sha": "955aa1de472181e80bac6025549f87374bbfa83c",
                "status": "added"
            },
            {
                "additions": 146,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/resources/annotations_2_4.t2flow",
                "changes": 146,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/resources/annotations_2_4.t2flow?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-t2flow/src/test/resources/annotations_2_4.t2flow",
                "patch": "@@ -0,0 +1,146 @@\n+<workflow xmlns=\"http://taverna.sf.net/2008/xml/t2flow\" version=\"1\" producedBy=\"taverna-2.4.0\"><dataflow id=\"42750c57-f4f0-4a98-8077-88eafd28d211\" role=\"top\"><name>The_title</name><inputPorts><port><name>in1</name><depth>0</depth><granularDepth>0</granularDepth><annotations><annotation_chain encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+        <text>The workflow input port in1</text>\r\n+      </annotationBean>\r\n+      <date>2012-09-26 08:35:46.88 UTC</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\">\r\n+        <text>exampleIn</text>\r\n+      </annotationBean>\r\n+      <date>2012-09-26 08:36:01.836 UTC</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations></port></inputPorts><outputPorts><port><name>out1</name><annotations><annotation_chain encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.ExampleValue\">\r\n+        <text>exampleOut</text>\r\n+      </annotationBean>\r\n+      <date>2012-09-26 08:35:58.605 UTC</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+        <text>The workflow output out1</text>\r\n+      </annotationBean>\r\n+      <date>2012-09-26 08:35:54.934 UTC</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations></port></outputPorts><processors><processor><name>Beanshell</name><inputPorts><port><name>in1</name><depth>0</depth></port></inputPorts><outputPorts><port><name>out1</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations><annotation_chain encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+        <text>The processor description</text>\r\n+      </annotationBean>\r\n+      <date>2012-09-26 08:35:04.898 UTC</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>beanshell-activity</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.activities.beanshell.BeanshellActivity</class><inputMap><map from=\"in1\" to=\"in1\" /></inputMap><outputMap><map from=\"out1\" to=\"out1\" /></outputMap><configBean encoding=\"xstream\"><net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean xmlns=\"\">\r\n+  <inputs>\r\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\r\n+      <name>in1</name>\r\n+      <depth>0</depth>\r\n+      <mimeTypes>\r\n+        <string>text/plain</string>\r\n+      </mimeTypes>\r\n+      <handledReferenceSchemes />\r\n+      <translatedElementType>java.lang.String</translatedElementType>\r\n+      <allowsLiteralValues>true</allowsLiteralValues>\r\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\r\n+  </inputs>\r\n+  <outputs>\r\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\r\n+      <name>out1</name>\r\n+      <depth>0</depth>\r\n+      <mimeTypes />\r\n+      <granularDepth>0</granularDepth>\r\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\r\n+  </outputs>\r\n+  <classLoaderSharing>workflow</classLoaderSharing>\r\n+  <localDependencies />\r\n+  <artifactDependencies />\r\n+  <script>the script</script>\r\n+  <dependencies />\r\n+</net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns=\"\">\r\n+  <maxJobs>1</maxJobs>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns=\"\">\r\n+  <backoffFactor>1.0</backoffFactor>\r\n+  <initialDelay>1000</initialDelay>\r\n+  <maxDelay>5000</maxDelay>\r\n+  <maxRetries>0</maxRetries>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name=\"in1\" depth=\"0\" /></cross></strategy></iteration></iterationStrategyStack></processor><processor><name>Text_constant</name><inputPorts /><outputPorts><port><name>value</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>stringconstant-activity</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.activities.stringconstant.StringConstantActivity</class><inputMap /><outputMap><map from=\"value\" to=\"value\" /></outputMap><configBean encoding=\"xstream\"><net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean xmlns=\"\">\r\n+  <value>A text</value>\r\n+</net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns=\"\">\r\n+  <maxJobs>1</maxJobs>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns=\"\">\r\n+  <backoffFactor>1.0</backoffFactor>\r\n+  <initialDelay>1000</initialDelay>\r\n+  <maxDelay>5000</maxDelay>\r\n+  <maxRetries>0</maxRetries>\r\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy /></iteration></iterationStrategyStack></processor></processors><conditions><condition control=\"Text_constant\" target=\"Beanshell\" /></conditions><datalinks><datalink><sink type=\"processor\"><processor>Beanshell</processor><port>in1</port></sink><source type=\"dataflow\"><port>in1</port></source></datalink><datalink><sink type=\"merge\"><port>out1</port></sink><source type=\"processor\"><processor>Beanshell</processor><port>out1</port></source></datalink><datalink><sink type=\"merge\"><port>out1</port></sink><source type=\"processor\"><processor>Text_constant</processor><port>value</port></source></datalink></datalinks><annotations><annotation_chain encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.Author\">\r\n+        <text>The Author\r\n+    and     spaces     and\r\n+newlines</text>\r\n+      </annotationBean>\r\n+      <date>2012-09-26 08:34:42.432 UTC</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\r\n+        <identification>42750c57-f4f0-4a98-8077-88eafd28d211</identification>\r\n+      </annotationBean>\r\n+      <date>2012-09-26 08:37:27.976 UTC</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription\">\r\n+        <text>The description.\r\n+\r\n+This could be quite long.</text>\r\n+      </annotationBean>\r\n+      <date>2012-09-26 08:34:56.353 UTC</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\r\n+  <annotationAssertions>\r\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.DescriptiveTitle\">\r\n+        <text>The title</text>\r\n+      </annotationBean>\r\n+      <date>2012-09-26 08:34:46.286 UTC</date>\r\n+      <creators />\r\n+      <curationEventList />\r\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\r\n+  </annotationAssertions>\r\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations></dataflow></workflow>\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-t2flow/src/test/resources/annotations_2_4.t2flow",
                "sha": "68194360aa0e615103841d73a5ba6ed381bda0ae",
                "status": "added"
            },
            {
                "additions": 68,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-ucfpackage/pom.xml",
                "changes": 133,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-ucfpackage/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 65,
                "filename": "scufl2-ucfpackage/pom.xml",
                "patch": "@@ -1,65 +1,68 @@\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n-\t<modelVersion>4.0.0</modelVersion>\n-\t<parent>\n-\t\t<groupId>uk.org.taverna.scufl2</groupId>\n-\t\t<artifactId>scufl2</artifactId>\n-\t\t<version>0.9-SNAPSHOT</version>\n-\t</parent>\n-\t<artifactId>scufl2-ucfpackage</artifactId>\n-\t<packaging>bundle</packaging>\n-\t<name>Taverna Scufl 2 UCF Package</name>\n-\t<description>Adobe UCF compatible Package API, making a structured ZIP file with manifest</description>\n-\t<dependencies>\n-\t\t<dependency>\n-\t\t\t<groupId>commons-io</groupId>\n-\t\t\t<artifactId>commons-io</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>org.jdom</groupId>\n-\t\t\t<artifactId>jdom</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t\t<dependency>\n-\t\t\t<groupId>jaxen</groupId>\n-\t\t\t<artifactId>jaxen</artifactId>\n-\t\t\t<scope>test</scope>\n-\t\t</dependency>\n-\t</dependencies>\n-\t<licenses>\n-\t\t<license>\n-\t\t\t<name>GNU Lesser General Public License</name>\n-\t\t\t<url>http://www.gnu.org/licenses/lgpl.txt</url>\n-\t\t\t<distribution>repo</distribution>\n-\t\t</license>\n-\t\t<license>\n-\t\t\t<name>Apache 2</name>\n-\t\t\t<url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>\n-\t\t\t<comments>The package uk.org.taverna.scul2.ucfpackage.impl.odfdom \n-\t\t\t\tcontains a patched subset of ODFDOM 0.8.6, \n-\t\t\t\tCopyright 2008, 2010 Oracle and/or its affiliates. \n-\t\t\t\tAll rights reserved. Copyright 2009 IBM. All rights reserved.</comments>\n-\t\t</license>\n-\t</licenses>\n-\n-\t<build>\n-\t\t<plugins>\n-\t\t\t<plugin>\n-\t\t\t\t<groupId>org.codehaus.mojo</groupId>\n-\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\n-\t\t\t\t<executions>\n-\t\t\t\t\t<execution>\n-\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t<goal>xjc</goal>\n-\t\t\t\t\t\t</goals>\n-\t\t\t\t\t</execution>\n-\t\t\t\t</executions>\n-\t\t\t\t<configuration>\n-\t\t\t\t</configuration>\n-\t\t\t</plugin>\n-\t\t</plugins>\n-\t</build>\n-\n-\n-\t<!-- -->\n-</project>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n+\t<modelVersion>4.0.0</modelVersion>\r\n+\t<parent>\r\n+\t\t<groupId>uk.org.taverna.scufl2</groupId>\r\n+\t\t<artifactId>scufl2</artifactId>\r\n+\t\t<version>0.11.0-SNAPSHOT</version>\r\n+\t</parent>\r\n+\t<artifactId>scufl2-ucfpackage</artifactId>\r\n+\t<packaging>bundle</packaging>\r\n+\t<name>Taverna Scufl 2 UCF Package</name>\r\n+\t<description>Adobe UCF compatible Package API, making a structured ZIP file with manifest</description>\r\n+\t<dependencies>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>commons-io</groupId>\r\n+\t\t\t<artifactId>commons-io</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>org.jdom</groupId>\r\n+\t\t\t<artifactId>jdom</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>jaxen</groupId>\r\n+\t\t\t<artifactId>jaxen</artifactId>\r\n+\t\t\t<scope>test</scope>\r\n+\t\t</dependency>\r\n+\t</dependencies>\r\n+\t<licenses>\r\n+\t\t<license>\r\n+\t\t\t<name>GNU Lesser General Public License</name>\r\n+\t\t\t<url>http://www.gnu.org/licenses/lgpl.txt</url>\r\n+\t\t\t<distribution>repo</distribution>\r\n+\t\t</license>\r\n+\t\t<license>\r\n+\t\t\t<name>Apache 2</name>\r\n+\t\t\t<url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>\r\n+\t\t\t<comments>The package uk.org.taverna.scul2.ucfpackage.impl.odfdom \r\n+\t\t\t\tcontains a patched subset of ODFDOM 0.8.6 - \r\n+\t\t\t\thttp://odftoolkit.org/projects/odfdom/pages/Home\r\n+\t\t\t\tCopyright 2008, 2010 Oracle and/or its affiliates. \r\n+\t\t\t\tAll rights reserved. Copyright 2009 IBM. All rights reserved.</comments>\r\n+\t\t</license>\r\n+\t</licenses>\r\n+\r\n+\t<build>\r\n+\t\t<plugins>\r\n+\t\t\t<plugin>\r\n+\t\t\t\t<groupId>org.codehaus.mojo</groupId>\r\n+\t\t\t\t<artifactId>jaxb2-maven-plugin</artifactId>\r\n+\t\t\t\t<executions>\r\n+\t\t\t\t\t<execution>\r\n+\t\t\t\t\t\t<id>jaxb</id>\r\n+\t\t\t\t\t\t<phase>generate-sources</phase>\r\n+\t\t\t\t\t\t<goals>\r\n+\t\t\t\t\t\t\t<goal>xjc</goal>\r\n+\t\t\t\t\t\t</goals>\r\n+\t\t\t\t\t\t<configuration>\r\n+\t\t\t\t\t\t</configuration>\r\n+\t\t\t\t\t</execution>\r\n+\t\t\t\t</executions>\r\n+\t\t\t</plugin>\r\n+\t\t</plugins>\r\n+\t</build>\r\n+\r\n+\r\n+\t<!-- -->\r\n+</project>\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-ucfpackage/pom.xml",
                "sha": "24e29d50be7540746b8999b80f5a6d78579bac30",
                "status": "modified"
            },
            {
                "additions": 31,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-ucfpackage/src/main/java/uk/org/taverna/scufl2/ucfpackage/UCFPackage.java",
                "changes": 44,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-ucfpackage/src/main/java/uk/org/taverna/scufl2/ucfpackage/UCFPackage.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 13,
                "filename": "scufl2-ucfpackage/src/main/java/uk/org/taverna/scufl2/ucfpackage/UCFPackage.java",
                "patch": "@@ -1,7 +1,9 @@\n package uk.org.taverna.scufl2.ucfpackage;\n \n+import java.io.BufferedInputStream;\n import java.io.File;\n import java.io.FileInputStream;\n+import java.io.FileNotFoundException;\n import java.io.IOException;\n import java.io.InputStream;\n import java.io.OutputStream;\n@@ -63,18 +65,23 @@ public UCFPackage() throws IOException {\n \t}\n \n \tpublic UCFPackage(File containerFile) throws IOException {\n+\t\topen(containerFile);\n+\t}\n+\n+\tprotected void open(File containerFile) throws IOException {\n+\t\tBufferedInputStream stream = new BufferedInputStream(new FileInputStream(containerFile));\n \t\ttry {\n-\t\t\todfPackage = OdfPackage.loadPackage(containerFile);\n-\t\t\tparseContainerXML();\n-\t\t} catch (IOException e) {\n-\t\t\tthrow e;\n-\t\t} catch (Exception e) {\n-\t\t\tthrow new IOException(\"Could not load UCF Package from \"\n-\t\t\t\t\t+ containerFile, e);\n+\t\t\topen(stream);\n+\t\t} finally {\n+\t\t\tstream.close();\n \t\t}\n \t}\n \n \tpublic UCFPackage(InputStream inputStream) throws IOException {\n+\t\topen(inputStream);\n+\t}\n+\n+\tprotected void open(InputStream inputStream) throws IOException {\n \t\ttry {\n \t\t\todfPackage = OdfPackage.loadPackage(inputStream);\n \t\t\tparseContainerXML();\n@@ -84,7 +91,6 @@ public UCFPackage(InputStream inputStream) throws IOException {\n \t\t\tthrow new IOException(\n \t\t\t\t\t\"Could not load UCF Package from input stream\", e);\n \t\t}\n-\n \t}\n \n \t@SuppressWarnings(\"unchecked\")\n@@ -126,9 +132,20 @@ public void setPackageMediaType(String mediaType) {\n \n \tpublic void save(File packageFile) throws IOException {\n \t\tFile tempFile = File.createTempFile(\".\" + packageFile.getName(),\n-\t\t\t\t\".tmp\", packageFile.getParentFile());\n+\t\t\t\t\".tmp\", packageFile.getCanonicalFile().getParentFile());\n \t\tprepareAndSave(tempFile);\n-\t\tif (!tempFile.renameTo(packageFile)) {\n+\t\tboolean renamed = tempFile.renameTo(packageFile);\n+\t\tif (!renamed) {\n+\t\t\tif (packageFile.exists() && tempFile.exists()) {\n+\t\t\t\t// Could happen on Windows\n+\t\t\t\tif (! packageFile.delete()) {\n+\t\t\t\t\t// Could have been permission problem\n+\t\t\t\t\tthrow new IOException(\"Could not delete existing \" + packageFile);\n+\t\t\t\t}\n+\t\t\t\trenamed = tempFile.renameTo(packageFile);\n+\t\t\t}\n+\t\t}\n+\t\tif (! renamed) {\n \t\t\tthrow new IOException(\"Could not rename temp file \" + tempFile\n \t\t\t\t\t+ \" to \" + packageFile);\n \t\t}\n@@ -151,12 +168,13 @@ protected void prepareAndSave(File tempFile) throws IOException {\n \t\t} finally {\n \t\t\todfPackage.close();\n \t\t}\n+\t\t\n \t\ttry {\n-\t\t\t// To be safe we'll reload from 'our' tempFile\n-\t\t\todfPackage = OdfPackage.loadPackage(tempFile);\n+\t\t\topen(tempFile);\n \t\t} catch (Exception e) {\n-\t\t\tthrow new IOException(\"Could not reload package from \" + tempFile);\n+\t\t\tthrow new IOException(\"Could not reload package from \" + tempFile, e);\n \t\t}\n+\t\t \n \t}\n \n \tprotected void prepareContainerXML() throws IOException {",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-ucfpackage/src/main/java/uk/org/taverna/scufl2/ucfpackage/UCFPackage.java",
                "sha": "577ef1e2cf10c274ca07f7a0296c5569ba11f67c",
                "status": "modified"
            },
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-ucfpackage/src/test/java/uk/org/taverna/scufl2/ucfpackage/TestUCFPackage.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-ucfpackage/src/test/java/uk/org/taverna/scufl2/ucfpackage/TestUCFPackage.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 2,
                "filename": "scufl2-ucfpackage/src/test/java/uk/org/taverna/scufl2/ucfpackage/TestUCFPackage.java",
                "patch": "@@ -208,7 +208,7 @@ public void retrieveStringLoadedFromFile() throws Exception {\n \t\tString s = loaded.getResourceAsString(\"helloworld.txt\");\n \t\tassertEquals(\"Hello there \u00fe\u0138\u0142\", s);\n \t}\n-\n+\t\n \t@Test\n \tpublic void doubleSave() throws Exception {\n \t\tUCFPackage container = new UCFPackage();\n@@ -432,6 +432,7 @@ public void removeResource() throws Exception {\n \t\tassertNull(\"sub/2.txt still in zip file\", zipFile.getEntry(\"sub/2.txt\"));\n \t\tassertNull(\"sub/3.txt still in zip file\", zipFile.getEntry(\"sub/3.txt\"));\n \t\tassertNull(\"sub/ still in zip file\", zipFile.getEntry(\"sub/\"));\n+\t\tzipFile.close();\n \n \t\tUCFPackage loaded = new UCFPackage(tmpFile);\n \t\tassertFalse(loaded.listAllResources().keySet().contains(\"soup.txt\"));\n@@ -445,7 +446,6 @@ public void removeResource() throws Exception {\n \t\t\t// OK\n \t\t}\n \t\tloaded.save(tmpFile);\n-\n \t}\n \n \t@Test",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-ucfpackage/src/test/java/uk/org/taverna/scufl2/ucfpackage/TestUCFPackage.java",
                "sha": "7c22afae50ab583f727aa76f3c63541f51e321bc",
                "status": "modified"
            },
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-usecases/LICENSE.txt",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-usecases/LICENSE.txt?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 3,
                "filename": "scufl2-usecases/LICENSE.txt",
                "patch": "@@ -1,7 +1,7 @@\n-Simplified BSD license [1]\n-==========================\n+Simplified 2-Clause BSD license\n+===============================\n \n-Copyright (c) 2010, myGrid, University of Mancester, UK\n+Copyright (c) 2010-2011, myGrid, University of Mancester, UK\n All rights reserved.\n \n Redistribution and use in source and binary forms, with or without",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-usecases/LICENSE.txt",
                "sha": "0f327ce82a50c2122232e14619eb28ea71778c5d",
                "status": "modified"
            },
            {
                "additions": 7,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-usecases/pom.xml",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-usecases/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-usecases/pom.xml",
                "patch": "@@ -3,7 +3,7 @@\n \t<parent>\n \t\t<groupId>uk.org.taverna.scufl2</groupId>\n \t\t<artifactId>scufl2</artifactId>\n-\t\t<version>0.9-SNAPSHOT</version>\n+\t\t<version>0.11.0-SNAPSHOT</version>\n \t</parent>\n \t<artifactId>scufl2-usecases</artifactId>\n \t<name>Taverna Scufl 2 use cases</name>\n@@ -42,4 +42,10 @@\n \t\t\t<optional>true</optional>\n \t\t</dependency>\n \t</dependencies>\n+    <licenses>\n+        <license>\n+            <name>The BSD 2-Clause License</name>\n+            <url>http://www.opensource.org/licenses/bsd-license</url>\n+        </license>\n+    </licenses>\n </project>",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-usecases/pom.xml",
                "sha": "089093e39bcdc74bef7d7aa524145766e5a1860f",
                "status": "modified"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-usecases/src/main/java/uk/org/taverna/scufl2/usecases/ConvertT2flowScufl2.java",
                "changes": 28,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-usecases/src/main/java/uk/org/taverna/scufl2/usecases/ConvertT2flowScufl2.java?ref=39e09f7c4ca2940778869459e94414c8b34cb9e1",
                "deletions": 28,
                "filename": "scufl2-usecases/src/main/java/uk/org/taverna/scufl2/usecases/ConvertT2flowScufl2.java",
                "patch": "@@ -1,28 +0,0 @@\n-package uk.org.taverna.scufl2.usecases;\n-\n-import java.io.File;\n-import java.io.IOException;\n-\n-import javax.xml.bind.JAXBException;\n-\n-import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n-import uk.org.taverna.scufl2.api.io.ReaderException;\n-import uk.org.taverna.scufl2.api.io.WorkflowBundleIO;\n-import uk.org.taverna.scufl2.api.io.WriterException;\n-\n-public class ConvertT2flowScufl2 {\n-\tpublic static void main(String[] args) throws JAXBException, IOException,\n-\t\t\tReaderException, WriterException {\n-\t\tWorkflowBundleIO io = new WorkflowBundleIO();\n-\t\tfor (String filepath : args) {\n-\t\t\tFile t2File = new File(filepath);\n-\t\t\tString filename = t2File.getName();\n-\t\t\tfilename = filename.replaceFirst(\"\\\\..*\", \".scufl2\");\n-\t\t\tFile scufl2File = new File(t2File.getParentFile(), filename);\n-\t\t\tWorkflowBundle wfBundle = io.readBundle(t2File, \"application/vnd.taverna.t2flow+xml\");\n-\t\t\tio.writeBundle(wfBundle, scufl2File, \"application/vnd.taverna.scufl2.workflow-bundle\");\n-\t\t\t//io.writeBundle(wfBundle, System.out, \"text/vnd.taverna.scufl2.structure\");\n-\t\t}\n-\t}\n-\n-}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-usecases/src/main/java/uk/org/taverna/scufl2/usecases/ConvertT2flowScufl2.java",
                "sha": "c92dc58e5a632fc576d0498cb59788b2fe14af3a",
                "status": "removed"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-usecases/src/main/java/uk/org/taverna/scufl2/usecases/ProcessorNames.java",
                "changes": 138,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-usecases/src/main/java/uk/org/taverna/scufl2/usecases/ProcessorNames.java?ref=39e09f7c4ca2940778869459e94414c8b34cb9e1",
                "deletions": 138,
                "filename": "scufl2-usecases/src/main/java/uk/org/taverna/scufl2/usecases/ProcessorNames.java",
                "patch": "@@ -1,138 +0,0 @@\n-package uk.org.taverna.scufl2.usecases;\n-\n-import java.io.File;\n-import java.io.IOException;\n-import java.net.URI;\n-import java.util.ArrayList;\n-import java.util.Collections;\n-import java.util.List;\n-\n-import javax.swing.tree.DefaultMutableTreeNode;\n-import javax.swing.tree.DefaultTreeModel;\n-import javax.swing.tree.TreeModel;\n-import javax.xml.bind.JAXBException;\n-\n-import uk.org.taverna.scufl2.api.activity.Activity;\n-import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n-import uk.org.taverna.scufl2.api.core.Processor;\n-import uk.org.taverna.scufl2.api.core.Workflow;\n-import uk.org.taverna.scufl2.api.io.ReaderException;\n-import uk.org.taverna.scufl2.api.io.WorkflowBundleIO;\n-import uk.org.taverna.scufl2.api.profiles.ProcessorBinding;\n-import uk.org.taverna.scufl2.api.profiles.Profile;\n-\n-public class ProcessorNames {\n-\n-\tpublic static void main(String[] args) throws JAXBException, IOException, ReaderException {\n-\t\tWorkflowBundleIO io = new WorkflowBundleIO();\n-\t\tProcessorNames processorNames = new ProcessorNames();\n-\t\tfor (String filename : args) {\n-\t\t\tWorkflowBundle ro = io.readBundle(new File(\n-\t\t\t\t\tfilename), \"application/vnd.taverna.t2flow+xml\");\n-\t\t\tSystem.out.print(filename + \": \");\n-\t\t\tSystem.out.println(processorNames.showProcessorNames(ro));\n-\t\t\tSystem.out.println(processorNames.showProcessorTree(ro));\n-\t\t}\n-\t}\n-\n-\tpublic List<String> showProcessorNames(WorkflowBundle ro)\n-\t\t\tthrows JAXBException, IOException {\n-\t\tArrayList<String> names = new ArrayList<String>();\n-\t\tfor (Processor processor : ro.getMainWorkflow().getProcessors()) {\n-\t\t\tnames.add(processor.getName());\n-\t\t}\n-\t\tCollections.sort(names);\n-\t\treturn names;\n-\t}\n-\n-\tpublic String showProcessorTree(WorkflowBundle ro)\n-\t\t\tthrows JAXBException, IOException {\n-\t\tTreeModel treeModel = makeProcessorTree(ro);\n-\t\treturn treeModelAsString(treeModel);\n-\t}\n-\n-\tpublic String treeModelAsString(TreeModel treeModel) {\n-\t\tStringBuffer sb = new StringBuffer();\n-\t\tObject root = treeModel.getRoot();\n-\t\ttreeModelAsString(treeModel, root, sb, \"\");\n-\t\treturn sb.toString();\n-\t}\n-\n-\tprotected void treeModelAsString(TreeModel treeModel, Object parent,\n-\t\t\tStringBuffer sb, String indentation) {\n-\t\tsb.append(indentation);\n-\t\tint childCount = treeModel.getChildCount(parent);\n-\t\tif (childCount == 0) {\n-\t\t\tsb.append(\"- \");\n-\t\t} else {\n-\t\t\tsb.append(\"+ \");\n-\t\t\tindentation = indentation + \"  \";\n-\t\t}\n-\t\tsb.append(parent);\n-\t\tsb.append(\"\\n\");\n-\t\tfor (int i = 0; i < childCount; i++) {\n-\t\t\tObject child = treeModel.getChild(parent, i);\n-\t\t\ttreeModelAsString(treeModel, child, sb, indentation);\n-\t\t}\n-\t}\n-\n-\tpublic TreeModel makeProcessorTree(WorkflowBundle ro)\n-\t\t\tthrows JAXBException, IOException {\n-\t\tWorkflow workflow = ro.getMainWorkflow();\n-\t\tTreeModel treeModel = new DefaultTreeModel(new DefaultMutableTreeNode(\n-\t\t\t\tworkflow.getName()));\n-\t\tDefaultMutableTreeNode parent = (DefaultMutableTreeNode) treeModel\n-\t\t\t\t.getRoot();\n-\n-\t\tfindProcessors(ro, workflow, parent);\n-\t\treturn treeModel;\n-\t}\n-\n-\tprivate void findProcessors(WorkflowBundle ro, Workflow workflow,\n-\t\t\tDefaultMutableTreeNode parent) {\n-\t\tfor (Processor processor : workflow.getProcessors()) {\n-\t\t\tDefaultMutableTreeNode processorNode = new DefaultMutableTreeNode(\n-\t\t\t\t\tprocessor.getName());\n-\t\t\tparent.add(processorNode);\n-\t\t\t// Look for nested workflows\n-\t\t\tfor (Profile profile : ro.getProfiles()) {\n-\t\t\t\tfor (ProcessorBinding pb : profile.getProcessorBindings()) {\n-\t\t\t\t\tif (pb.getBoundProcessor().equals(processor)) {\n-\t\t\t\t\t\tActivity boundActivity = pb.getBoundActivity();\n-\t\t\t\t\t\tif (!boundActivity\n-\t\t\t\t\t\t\t\t.getConfigurableType()\n-\n-\t\t\t\t\t\t\t\t.equals(URI.create(\n-\t\t\t\t\t\t\t\t\t\t\"http://ns.taverna.org.uk/2010/activity/nested-workflow\"))) {\n-\t\t\t\t\t\t\tcontinue;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t\t// ConfigurableProperty prop = boundActivity\n-\t\t\t\t\t\t// .getConfigurableProperties()\n-\t\t\t\t\t\t// .getByName(\n-\t\t\t\t\t\t// \"http://ns.taverna.org.uk/2010/activity/nested-workflow#workflow\");\n-\t\t\t\t\t\t// for (Configuration co : profile.getConfigurations())\n-\t\t\t\t\t\t// {\n-\t\t\t\t\t\t// if (!co.getConfigured().equals(boundActivity)) {\n-\t\t\t\t\t\t// continue;\n-\t\t\t\t\t\t// }\n-\t\t\t\t\t\t// for (ConfigurablePropertyConfiguration propConfig :\n-\t\t\t\t\t\t// co\n-\t\t\t\t\t\t// .getConfigurablePropertyConfigurations()) {\n-\t\t\t\t\t\t// if (!propConfig.getConfiguredProperty().equals(\n-\t\t\t\t\t\t// prop)) {\n-\t\t\t\t\t\t// continue;\n-\t\t\t\t\t\t// }\n-\t\t\t\t\t\t// String workflowId = (String) propConfig\n-\t\t\t\t\t\t// .getValue();\n-\t\t\t\t\t\t// Workflow wf = ro.getWorkflows().getByName(\n-\t\t\t\t\t\t// workflowId);\n-\t\t\t\t\t\t// findProcessors(ro, wf, processorNode);\n-\t\t\t\t\t\t//\n-\t\t\t\t\t\t// }\n-\t\t\t\t\t\t// }\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t}\n-}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-usecases/src/main/java/uk/org/taverna/scufl2/usecases/ProcessorNames.java",
                "sha": "a1bab2ec415e8e9e266c38fea134f6a96831302a",
                "status": "removed"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-usecases/src/main/python/processorNames.py",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-usecases/src/main/python/processorNames.py?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-usecases/src/main/python/processorNames.py",
                "patch": "@@ -98,7 +98,7 @@ def main(prg=\"processorNames.py\", filename=None):\n     if filename is None:\n         filename = os.path.join(os.path.dirname(prg), \"..\", \"..\", \"..\", \"..\", \n         \"scufl2-rdfxml\", \"src\", \"test\", \"resources\",\n-        \"uk\", \"org\", \"taverna\",\"scufl2\",\"rdfxml\", \"example.scufl2\")\n+        \"uk\", \"org\", \"taverna\",\"scufl2\",\"rdfxml\", \"example.wfbundle\")\n     \n     scufl2 = Scufl2(filename)\n     ",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-usecases/src/main/python/processorNames.py",
                "sha": "1e7e6297b2b3dfb175ea2b9486fab8451166ab32",
                "status": "modified"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-usecases/src/test/java/uk/org/taverna/scufl2/usecases/TestConvertT2flowScufl2.java",
                "changes": 31,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-usecases/src/test/java/uk/org/taverna/scufl2/usecases/TestConvertT2flowScufl2.java?ref=39e09f7c4ca2940778869459e94414c8b34cb9e1",
                "deletions": 31,
                "filename": "scufl2-usecases/src/test/java/uk/org/taverna/scufl2/usecases/TestConvertT2flowScufl2.java",
                "patch": "@@ -1,31 +0,0 @@\n-package uk.org.taverna.scufl2.usecases;\n-\n-import static org.junit.Assert.assertNotNull;\n-import static org.junit.Assert.assertTrue;\n-\n-import java.io.File;\n-import java.io.FileOutputStream;\n-import java.io.InputStream;\n-import java.util.zip.ZipFile;\n-\n-import org.apache.commons.io.IOUtils;\n-import org.junit.Test;\n-\n-public class TestConvertT2flowScufl2 {\n-\t@Test\n-\tpublic void testname() throws Exception {\n-\t\tFile tmp = File.createTempFile(\"scufl2-ebi-interproscan\", \".t2flow\");\n-\t\ttmp.deleteOnExit();\n-\t\tInputStream ebi = getClass().getResourceAsStream(\"/workflows/t2flow/ebi_interproscan_for_taverna_2_317472.t2flow\");\n-\t\tFileOutputStream output = new FileOutputStream(tmp);\n-\t\tIOUtils.copy(ebi, output);\n-\t\toutput.close();\n-\t\t\n-\t\tConvertT2flowScufl2.main(new String[]{tmp.getAbsolutePath()});\t\t\n-\t\tFile scufl2File = new File(tmp.getAbsolutePath().replace(\".t2flow\", \".scufl2\"));\n-\t\tassertTrue(scufl2File.isFile());\n-\t\tassertNotNull(new ZipFile(scufl2File).getEntry(\"workflowBundle.rdf\"));\n-\t\tscufl2File.deleteOnExit();\n-//\t\tSystem.out.println(scufl2File);\n-\t}\n-}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-usecases/src/test/java/uk/org/taverna/scufl2/usecases/TestConvertT2flowScufl2.java",
                "sha": "2ef796d65e43d389a4d1d407d31aeb2b59704012",
                "status": "removed"
            },
            {
                "additions": 0,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-usecases/src/test/java/uk/org/taverna/scufl2/usecases/TestProcessorNames.java",
                "changes": 39,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-usecases/src/test/java/uk/org/taverna/scufl2/usecases/TestProcessorNames.java?ref=39e09f7c4ca2940778869459e94414c8b34cb9e1",
                "deletions": 39,
                "filename": "scufl2-usecases/src/test/java/uk/org/taverna/scufl2/usecases/TestProcessorNames.java",
                "patch": "@@ -1,39 +0,0 @@\n-package uk.org.taverna.scufl2.usecases;\n-\n-import static org.junit.Assert.assertEquals;\n-import static org.junit.Assert.assertNotNull;\n-\n-import java.io.IOException;\n-import java.io.InputStream;\n-import java.util.Arrays;\n-import java.util.List;\n-\n-import javax.xml.bind.JAXBException;\n-\n-import org.junit.Test;\n-\n-import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n-import uk.org.taverna.scufl2.api.io.ReaderException;\n-import uk.org.taverna.scufl2.api.io.WorkflowBundleIO;\n-\n-public class TestProcessorNames {\n-\n-\t@Test\n-\tpublic void processorNames() throws JAXBException, IOException, ReaderException {\n-\t\tInputStream workflow = getClass().getResourceAsStream(\n-\t\t\t\t\"/workflows/t2flow/biomartandembossanalysis_904962.t2flow\");\n-\t\tassertNotNull(workflow);\n-\n-\t\tWorkflowBundleIO io = new WorkflowBundleIO();\n-\t\tWorkflowBundle ro = io.readBundle(workflow,\n-\t\t\t\t\"application/vnd.taverna.t2flow+xml\");\n-\n-\t\tList<String> expected = Arrays.asList(\"CreateFasta\",\n-\t\t\t\t\"FlattenImageList\", \"GetUniqueHomolog\", \"emma\",\n-\t\t\t\t\"getHSapSequence\", \"getMMusSequence\", \"getRNorSequence\",\n-\t\t\t\t\"hsapiensGeneEnsembl\", \"plot\", \"seqret\");\n-\t\tProcessorNames processorNames = new ProcessorNames();\n-\t\tassertEquals(expected, processorNames.showProcessorNames(ro));\n-\t\tSystem.out.println(processorNames.showProcessorTree(ro));\n-\t}\n-}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/39e09f7c4ca2940778869459e94414c8b34cb9e1/scufl2-usecases/src/test/java/uk/org/taverna/scufl2/usecases/TestProcessorNames.java",
                "sha": "2f27d73824f517e89c7158f1af0c942a1d055215",
                "status": "removed"
            },
            {
                "additions": 25,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/pom.xml",
                "changes": 50,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 25,
                "filename": "scufl2-validation-correctness/pom.xml",
                "patch": "@@ -1,25 +1,25 @@\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n-  <modelVersion>4.0.0</modelVersion>\n-  <parent>\n-    <groupId>uk.org.taverna.scufl2</groupId>\n-    <artifactId>scufl2</artifactId>\n-    <version>0.9-SNAPSHOT</version>\n-  </parent>\n-  <artifactId>scufl2-validation-correctness</artifactId>\n-  <packaging>bundle</packaging>\n-  <name>Taverna Scufl 2 validation correctness</name>\n-  <dependencies>\n-  \t\t<dependency>\n-\t\t\t<groupId>${project.groupId}</groupId>\n-\t\t\t<artifactId>scufl2-api</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t</dependency>\n- \t\t<dependency>\n-\t\t  <groupId>${project.groupId}</groupId>\n-  \t\t  <artifactId>scufl2-validation</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t</dependency>\n- \t\t\n-\t</dependencies>\n-  \n-</project>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n+  <modelVersion>4.0.0</modelVersion>\r\n+  <parent>\r\n+    <groupId>uk.org.taverna.scufl2</groupId>\r\n+    <artifactId>scufl2</artifactId>\r\n+    <version>0.11.0-SNAPSHOT</version>\r\n+  </parent>\r\n+  <artifactId>scufl2-validation-correctness</artifactId>\r\n+  <packaging>bundle</packaging>\r\n+  <name>Taverna Scufl 2 validation correctness</name>\r\n+  <dependencies>\r\n+  \t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-api</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t</dependency>\r\n+ \t\t<dependency>\r\n+\t\t  <groupId>${project.groupId}</groupId>\r\n+  \t\t  <artifactId>scufl2-validation</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t</dependency>\r\n+ \t\t\r\n+\t</dependencies>\r\n+  \r\n+</project>\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/pom.xml",
                "sha": "cdcf2609762d013d1160fb9b2d1971bfc93c9eb7",
                "status": "modified"
            },
            {
                "additions": 20,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/EmptyIterationStrategyTopNodeProblem.java",
                "changes": 20,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/EmptyIterationStrategyTopNodeProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/EmptyIterationStrategyTopNodeProblem.java",
                "patch": "@@ -0,0 +1,20 @@\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyTopNode;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class EmptyIterationStrategyTopNodeProblem extends ValidationProblem {\n+\t\n+\tpublic EmptyIterationStrategyTopNodeProblem(IterationStrategyTopNode bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+\tpublic String toString() {\n+\t\treturn (getBean() + \" is empty\");\n+\t}\n+\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/EmptyIterationStrategyTopNodeProblem.java",
                "sha": "e24c8a683d5e0dca6c2d992a3ee44e55b56c847b",
                "status": "added"
            },
            {
                "additions": 40,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/IncompatibleGranularDepthProblem.java",
                "changes": 40,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/IncompatibleGranularDepthProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/IncompatibleGranularDepthProblem.java",
                "patch": "@@ -0,0 +1,40 @@\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import uk.org.taverna.scufl2.api.port.AbstractGranularDepthPort;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class IncompatibleGranularDepthProblem extends ValidationProblem {\n+\n+\tprivate final Integer depth;\n+\tprivate final Integer granularDepth;\n+\n+\tpublic IncompatibleGranularDepthProblem(AbstractGranularDepthPort bean,\n+\t\t\tInteger depth, Integer granularDepth) {\n+\t\tsuper(bean);\n+\t\t\t\tthis.depth = depth;\n+\t\t\t\tthis.granularDepth = granularDepth;\n+\t}\n+\n+\t/**\n+\t * @return the depth\n+\t */\n+\tpublic Integer getDepth() {\n+\t\treturn depth;\n+\t}\n+\n+\t/**\n+\t * @return the granularDepth\n+\t */\n+\tpublic Integer getGranularDepth() {\n+\t\treturn granularDepth;\n+\t}\n+\t\n+\tpublic String toString() {\n+\t\treturn (getBean() + \" has depth \" + depth + \" and granular depth \" + granularDepth);\n+\t}\n+\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/IncompatibleGranularDepthProblem.java",
                "sha": "edc2a13d44a89996c9b57cf2eda98c6e2f41c4c8",
                "status": "added"
            },
            {
                "additions": 30,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/MismatchConfigurableTypeProblem.java",
                "changes": 30,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/MismatchConfigurableTypeProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/MismatchConfigurableTypeProblem.java",
                "patch": "@@ -0,0 +1,30 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import uk.org.taverna.scufl2.api.common.Configurable;\n+import uk.org.taverna.scufl2.api.configurations.Configuration;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+public class MismatchConfigurableTypeProblem extends ValidationProblem {\n+\t\n+\tprivate final Configurable configurable;\n+\n+\tpublic MismatchConfigurableTypeProblem(Configuration configuration, Configurable configurable) {\n+\t\tsuper(configuration);\n+\t\tthis.configurable = configurable;\t\n+\t}\n+\n+\t/**\n+\t * @return the configurable\n+\t */\n+\tpublic Configurable getConfigurable() {\n+\t\treturn configurable;\n+\t}\n+\t\n+\tpublic String toString() {\n+\t\treturn (\"The types of \" + getBean() + \" and \" + configurable + \" are mismatched\");\n+\t}\n+\t\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/MismatchConfigurableTypeProblem.java",
                "sha": "aaa3115824f0750fc14c568df9dac92020eccf6b",
                "status": "added"
            },
            {
                "additions": 38,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NegativeValueProblem.java",
                "changes": 38,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NegativeValueProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NegativeValueProblem.java",
                "patch": "@@ -0,0 +1,38 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+public class NegativeValueProblem extends ValidationProblem {\n+\tprivate final String fieldName;\n+\tprivate final Integer fieldValue;\n+\n+\tpublic NegativeValueProblem(WorkflowBean bean, String fieldName,\n+\t\t\tInteger fieldValue) {\n+\t\tsuper(bean);\n+\t\t\t\tthis.fieldName = fieldName;\n+\t\t\t\tthis.fieldValue = fieldValue;\n+\t\t\n+\t}\n+\n+\t/**\n+\t * @return the fieldName\n+\t */\n+\tpublic String getFieldName() {\n+\t\treturn fieldName;\n+\t}\n+\n+\t/**\n+\t * @return the fieldValue\n+\t */\n+\tpublic Integer getFieldValue() {\n+\t\treturn fieldValue;\n+\t}\n+\t\n+\tpublic String toString() {\n+\t\treturn (getBean() + \" has \" + fieldName + \" of value \" + fieldValue);\n+\t}\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NegativeValueProblem.java",
                "sha": "3e9386bff00638eaec5ec098b87eeb0360141f63",
                "status": "added"
            },
            {
                "additions": 40,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NonAbsoluteURIProblem.java",
                "changes": 40,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NonAbsoluteURIProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NonAbsoluteURIProblem.java",
                "patch": "@@ -0,0 +1,40 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import java.net.URI;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+public class NonAbsoluteURIProblem extends ValidationProblem {\n+\t\n+\tprivate String fieldName;\n+\tprivate URI fieldValue;\n+\t\n+\tpublic NonAbsoluteURIProblem(WorkflowBean bean, String fieldName, URI fieldValue) {\n+\t\tsuper(bean);\n+\t\tthis.fieldName = fieldName;\n+\t\tthis.fieldValue = fieldValue;\n+\t\t\n+\t}\n+\n+\t/**\n+\t * @return the fieldName\n+\t */\n+\tpublic String getFieldName() {\n+\t\treturn fieldName;\n+\t}\n+\n+\t/**\n+\t * @return the fieldValue\n+\t */\n+\tpublic URI getFieldValue() {\n+\t\treturn fieldValue;\n+\t}\n+\t\n+\tpublic String toString() {\n+\t\treturn(getBean() + \"has a non-absolute URI in field \" + fieldName + \" of value \" + fieldValue.toString());\n+\t}\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NonAbsoluteURIProblem.java",
                "sha": "758292911a0eb82d99f63a99eb8722cdd3e2df19",
                "status": "added"
            },
            {
                "additions": 27,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NullFieldProblem.java",
                "changes": 27,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NullFieldProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NullFieldProblem.java",
                "patch": "@@ -0,0 +1,27 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+public class NullFieldProblem extends ValidationProblem {\n+\tprivate final String fieldName;\n+\n+\tpublic NullFieldProblem(WorkflowBean bean, String fieldName) {\n+\t\tsuper(bean);\n+\t\tthis.fieldName = fieldName;\t\n+\t}\n+\n+\t/**\n+\t * @return the fieldName\n+\t */\n+\tpublic String getFieldName() {\n+\t\treturn fieldName;\n+\t}\n+\t\n+\tpublic String toString() {\n+\t\treturn (getBean() + \" has a null \" + fieldName);\n+\t}\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/NullFieldProblem.java",
                "sha": "c803f676df3a4378b07051a8cdba4553b395c644",
                "status": "added"
            },
            {
                "additions": 40,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/OutOfScopeValueProblem.java",
                "changes": 40,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/OutOfScopeValueProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/OutOfScopeValueProblem.java",
                "patch": "@@ -0,0 +1,40 @@\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class OutOfScopeValueProblem extends ValidationProblem {\n+\n+\tprivate final String fieldName;\n+\tprivate final Object value;\n+\n+\tpublic OutOfScopeValueProblem(WorkflowBean bean, String fieldName,\n+\t\t\tObject value) {\n+\t\tsuper(bean);\n+\t\t\t\tthis.fieldName = fieldName;\n+\t\t\t\tthis.value = value;\n+\t}\n+\n+\t/**\n+\t * @return the fieldName\n+\t */\n+\tpublic String getFieldName() {\n+\t\treturn fieldName;\n+\t}\n+\n+\t/**\n+\t * @return the value\n+\t */\n+\tpublic Object getValue() {\n+\t\treturn value;\n+\t}\n+\t\n+\tpublic String toString() {\n+\t\treturn (getBean() + \" has \" + fieldName + \" with out of scope value \" + value);\n+\t}\n+\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/OutOfScopeValueProblem.java",
                "sha": "3e8b0087349bcef7c6b0eec56e20a9681cf89599",
                "status": "added"
            },
            {
                "additions": 31,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/PortMentionedTwiceProblem.java",
                "changes": 31,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/PortMentionedTwiceProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/PortMentionedTwiceProblem.java",
                "patch": "@@ -0,0 +1,31 @@\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyNode;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class PortMentionedTwiceProblem extends ValidationProblem {\n+\n+\tprivate final IterationStrategyNode duplicateNode;\n+\n+\tpublic PortMentionedTwiceProblem(IterationStrategyNode originalNode,\n+\t\t\tIterationStrategyNode duplicateNode) {\n+\t\tsuper(originalNode);\n+\t\t\t\tthis.duplicateNode = duplicateNode;\n+\t}\n+\n+\t/**\n+\t * @return the iterationStrategyNode\n+\t */\n+\tpublic IterationStrategyNode getDuplicateNode() {\n+\t\treturn duplicateNode;\n+\t}\n+\t\n+\tpublic String toString() {\n+\t\treturn (getBean() + \" and \" + duplicateNode + \" reference the same port\");\n+\t}\n+\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/PortMentionedTwiceProblem.java",
                "sha": "96175e975f7b3dca0afa870d1694b4457b4e8f89",
                "status": "added"
            },
            {
                "additions": 33,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/PortMissingFromIterationStrategyStackProblem.java",
                "changes": 33,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/PortMissingFromIterationStrategyStackProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/PortMissingFromIterationStrategyStackProblem.java",
                "patch": "@@ -0,0 +1,33 @@\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyStack;\n+import uk.org.taverna.scufl2.api.port.Port;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class PortMissingFromIterationStrategyStackProblem extends ValidationProblem {\n+\n+\tprivate final Port port;\n+\n+\tpublic PortMissingFromIterationStrategyStackProblem(Port port,\n+\t\t\tIterationStrategyStack iterationStrategyStack) {\n+\t\tsuper(iterationStrategyStack);\n+\t\t\t\tthis.port = port;\n+\t}\n+\n+\t/**\n+\t * @return the port\n+\t */\n+\tpublic Port getPort() {\n+\t\treturn port;\n+\t}\n+\n+\t\n+\tpublic String toString() {\n+\t\treturn (getBean() + \" does not include \" + port);\n+\t}\n+\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/PortMissingFromIterationStrategyStackProblem.java",
                "sha": "508dad1069559d60535cb9c52f8a3ea1ebe51133",
                "status": "added"
            },
            {
                "additions": 220,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/ReportCorrectnessValidationListener.java",
                "changes": 220,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/ReportCorrectnessValidationListener.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/ReportCorrectnessValidationListener.java",
                "patch": "@@ -0,0 +1,220 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import java.net.URI;\n+import java.util.Collections;\n+import java.util.HashSet;\n+\n+import uk.org.taverna.scufl2.api.common.Child;\n+import uk.org.taverna.scufl2.api.common.Configurable;\n+import uk.org.taverna.scufl2.api.common.Root;\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.api.configurations.Configuration;\n+import uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyNode;\n+import uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyStack;\n+import uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyTopNode;\n+import uk.org.taverna.scufl2.api.port.AbstractGranularDepthPort;\n+import uk.org.taverna.scufl2.api.port.Port;\n+import uk.org.taverna.scufl2.validation.ValidationException;\n+import uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class ReportCorrectnessValidationListener implements\n+\t\tCorrectnessValidationListener {\n+\n+\tHashSet<EmptyIterationStrategyTopNodeProblem> emptyIterationStrategyTopNodeProblems = new HashSet<EmptyIterationStrategyTopNodeProblem> ();\n+\tHashSet<MismatchConfigurableTypeProblem> mismatchConfigurableTypeProblems = new HashSet<MismatchConfigurableTypeProblem>();\n+\tHashSet<NegativeValueProblem> negativeValueProblems = new HashSet<NegativeValueProblem>();\n+\n+\tHashSet<NonAbsoluteURIProblem> nonAbsoluteURIProblems = new HashSet<NonAbsoluteURIProblem>();\n+\tHashSet<NullFieldProblem> nullFieldProblems = new HashSet<NullFieldProblem>();\n+\tHashSet<OutOfScopeValueProblem> outOfScopeValueProblems = new HashSet<OutOfScopeValueProblem>();\n+\tHashSet<PortMentionedTwiceProblem> portMentionedTwiceProblems = new HashSet<PortMentionedTwiceProblem>();\n+\tprivate HashSet<PortMissingFromIterationStrategyStackProblem> portMissingFromIterationStrategyStackProblems = new HashSet<PortMissingFromIterationStrategyStackProblem>();\n+\tprivate HashSet<WrongParentProblem> wrongParentProblems = new HashSet<WrongParentProblem>();\n+\tprivate HashSet<IncompatibleGranularDepthProblem> incompatibleGranularDepthProblems = new HashSet<IncompatibleGranularDepthProblem>();\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener#emptyIterationStrategyTopNode(uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyTopNode)\n+\t */\n+\t@Override\n+\tpublic void emptyIterationStrategyTopNode(IterationStrategyTopNode bean) {\n+\t\temptyIterationStrategyTopNodeProblems.add(new EmptyIterationStrategyTopNodeProblem(bean));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener#mismatchConfigurableType(uk.org.taverna.scufl2.api.configurations.Configuration, uk.org.taverna.scufl2.api.common.Configurable)\n+\t */\n+\t@Override\n+\tpublic void mismatchConfigurableType(Configuration bean,\n+\t\t\tConfigurable configures) {\n+\t\tmismatchConfigurableTypeProblems.add(new MismatchConfigurableTypeProblem(bean, configures));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener#negativeValue(uk.org.taverna.scufl2.api.common.WorkflowBean, java.lang.String, java.lang.Integer)\n+\t */\n+\t@Override\n+\tpublic void negativeValue(WorkflowBean bean, String fieldName,\n+\t\t\tInteger fieldValue) {\n+\t\tnegativeValueProblems.add(new NegativeValueProblem(bean, fieldName, fieldValue));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener#nonAbsoluteGlobalBaseURI(uk.org.taverna.scufl2.api.common.Root)\n+\t */\n+\t@Override\n+\tpublic void nonAbsoluteURI(WorkflowBean bean, String fieldName, URI fieldValue) {\n+\t\tnonAbsoluteURIProblems.add(new NonAbsoluteURIProblem(bean, fieldName, fieldValue));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener#nullField(uk.org.taverna.scufl2.api.common.WorkflowBean, java.lang.String)\n+\t */\n+\t@Override\n+\tpublic void nullField(WorkflowBean bean, String string) {\n+\t\tnullFieldProblems.add(new NullFieldProblem(bean, string));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener#outOfScopeValue(uk.org.taverna.scufl2.api.common.WorkflowBean, java.lang.String, java.lang.Object)\n+\t */\n+\t@Override\n+\tpublic void outOfScopeValue(WorkflowBean bean, String fieldName,\n+\t\t\tObject value) {\n+\t\toutOfScopeValueProblems.add(new OutOfScopeValueProblem(bean, fieldName, value));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener#portMentionedTwice(uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyNode, uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyNode)\n+\t */\n+\t@Override\n+\tpublic void portMentionedTwice(IterationStrategyNode subNode,\n+\t\t\tIterationStrategyNode iterationStrategyNode) {\n+\t\tportMentionedTwiceProblems.add(new PortMentionedTwiceProblem(subNode, iterationStrategyNode));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener#portMissingFromIterationStrategyStack(uk.org.taverna.scufl2.api.port.Port, uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyStack)\n+\t */\n+\t@Override\n+\tpublic void portMissingFromIterationStrategyStack(Port p,\n+\t\t\tIterationStrategyStack bean) {\n+\t\tportMissingFromIterationStrategyStackProblems .add(new PortMissingFromIterationStrategyStackProblem(p, bean));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.correctness.CorrectnessValidationListener#wrongParent(uk.org.taverna.scufl2.api.common.Child)\n+\t */\n+\t@Override\n+\tpublic void wrongParent(Child iap) {\n+\t\twrongParentProblems.add(new WrongParentProblem(iap));\n+\t}\n+\t\n+\t@Override\n+\tpublic void incompatibleGranularDepth(AbstractGranularDepthPort bean,\n+\t\t\tInteger depth, Integer granularDepth) {\n+\t\tincompatibleGranularDepthProblems .add(new IncompatibleGranularDepthProblem(bean, depth, granularDepth));\n+\t}\n+\t\n+\tpublic HashSet<NegativeValueProblem> getNegativeValueProblems() {\n+\t\treturn negativeValueProblems;\n+\t}\n+\n+\t\n+\t/**\n+\t * @return the emptyIterationStrategyTopNodes\n+\t */\n+\tpublic HashSet<EmptyIterationStrategyTopNodeProblem> getEmptyIterationStrategyTopNodeProblems() {\n+\t\treturn emptyIterationStrategyTopNodeProblems;\n+\t}\n+\n+\t/**\n+\t * @return the mismatchConfigurableTypeProblems\n+\t */\n+\tpublic HashSet<MismatchConfigurableTypeProblem> getMismatchConfigurableTypeProblems() {\n+\t\treturn mismatchConfigurableTypeProblems;\n+\t}\n+\n+\t/**\n+\t * @return the nonAbsoluteGlobalBaseURIs\n+\t */\n+\tpublic HashSet<NonAbsoluteURIProblem> getNonAbsoluteURIProblems() {\n+\t\treturn nonAbsoluteURIProblems;\n+\t}\n+\n+\t/**\n+\t * @return the nullFieldProblems\n+\t */\n+\tpublic HashSet<NullFieldProblem> getNullFieldProblems() {\n+\t\treturn nullFieldProblems;\n+\t}\n+\n+\t/**\n+\t * @return the outOfScopeValueProblems\n+\t */\n+\tpublic HashSet<OutOfScopeValueProblem> getOutOfScopeValueProblems() {\n+\t\treturn outOfScopeValueProblems;\n+\t}\n+\n+\t/**\n+\t * @return the portMentionedTwiceProblems\n+\t */\n+\tpublic HashSet<PortMentionedTwiceProblem> getPortMentionedTwiceProblems() {\n+\t\treturn portMentionedTwiceProblems;\n+\t}\n+\n+\t/**\n+\t * @return the portMissingFromIterationStrategyStackProblems\n+\t */\n+\tpublic HashSet<PortMissingFromIterationStrategyStackProblem> getPortMissingFromIterationStrategyStackProblems() {\n+\t\treturn portMissingFromIterationStrategyStackProblems;\n+\t}\n+\n+\t/**\n+\t * @return the wrongParents\n+\t */\n+\tpublic HashSet<WrongParentProblem> getWrongParentProblems() {\n+\t\treturn wrongParentProblems;\n+\t}\n+\n+\t/**\n+\t * @return the incompatibleGranularDepthProblems\n+\t */\n+\tpublic HashSet<IncompatibleGranularDepthProblem> getIncompatibleGranularDepthProblems() {\n+\t\treturn incompatibleGranularDepthProblems;\n+\t}\n+\n+\t@Override\n+\tpublic boolean detectedProblems() {\n+\t\treturn (!(Collections.EMPTY_SET.equals(getEmptyIterationStrategyTopNodeProblems()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getIncompatibleGranularDepthProblems()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getMismatchConfigurableTypeProblems()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getNegativeValueProblems()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getNonAbsoluteURIProblems()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getNullFieldProblems()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getOutOfScopeValueProblems()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getPortMentionedTwiceProblems()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getPortMissingFromIterationStrategyStackProblems()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getWrongParentProblems())));\n+\t}\n+\n+\t@Override\n+\tpublic ValidationException getException() {\n+\t\t// TODO Needs to be improved;\n+\t\tif (detectedProblems()) {\n+\t\t\treturn new ValidationException(this.toString());\n+\t\t} else {\n+\t\t\treturn null;\n+\t\t}\n+\t}\n+\n+\n+\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/ReportCorrectnessValidationListener.java",
                "sha": "afb255d30e99c50cd1285e48d824f18fd909fca0",
                "status": "added"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/WrongParentProblem.java",
                "changes": 19,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/WrongParentProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/WrongParentProblem.java",
                "patch": "@@ -0,0 +1,19 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.correctness.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+public class WrongParentProblem extends ValidationProblem {\n+\t\n+\tpublic WrongParentProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\t\n+\tpublic String toString() {\n+\t\treturn(getBean() + \" does not have the correct parent\");\n+\t}\n+\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/main/java/uk/org/taverna/scufl2/validation/correctness/report/WrongParentProblem.java",
                "sha": "30aadc51ff6de67d520583e9e3d5db6775051c9e",
                "status": "added"
            },
            {
                "additions": 9,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/test/java/uk/org/taverna/scufl2/validation/correctness/DummyWorkflow.java",
                "changes": 24,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-correctness/src/test/java/uk/org/taverna/scufl2/validation/correctness/DummyWorkflow.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 15,
                "filename": "scufl2-validation-correctness/src/test/java/uk/org/taverna/scufl2/validation/correctness/DummyWorkflow.java",
                "patch": "@@ -3,11 +3,11 @@\n  */\n package uk.org.taverna.scufl2.validation.correctness;\n \n-import java.net.URI;\n import java.util.ArrayList;\n import java.util.List;\n import java.util.TreeSet;\n \n+import uk.org.taverna.scufl2.api.annotation.Revision;\n import uk.org.taverna.scufl2.api.common.NamedSet;\n import uk.org.taverna.scufl2.api.common.Visitor;\n import uk.org.taverna.scufl2.api.common.WorkflowBean;\n@@ -27,7 +27,14 @@\n \tprivate NamedSet<InputWorkflowPort> inputPorts = null;\n \tprivate NamedSet<OutputWorkflowPort> outputPorts = null;\n \tprivate NamedSet<Processor> processors = null;\n-\tprivate URI workflowIdentifier = null;\n+\tprivate Revision currentRevision = null;\n+\tpublic Revision getCurrentRevision() {\n+\t\treturn currentRevision;\n+\t}\n+\n+\tpublic void setCurrentRevision(Revision currentRevision) {\n+\t\tthis.currentRevision = currentRevision;\n+\t}\n \n \tprivate WorkflowBundle dummyParent = new WorkflowBundle();\n \t\n@@ -154,18 +161,5 @@ public void setProcessors(NamedSet<Processor> processors) {\n \t\tthis.processors = processors;\n \t}\n \n-\t/**\n-\t * @return the workflowIdentifier\n-\t */\n-\tpublic URI getWorkflowIdentifier() {\n-\t\treturn workflowIdentifier;\n-\t}\n-\n-\t/**\n-\t * @param workflowIdentifier the workflowIdentifier to set\n-\t */\n-\tpublic void setWorkflowIdentifier(URI workflowIdentifier) {\n-\t\tthis.workflowIdentifier = workflowIdentifier;\n-\t}\n \n }\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-correctness/src/test/java/uk/org/taverna/scufl2/validation/correctness/DummyWorkflow.java",
                "sha": "9b0775053052168d939bc32d73071129ca4f93d1",
                "status": "modified"
            },
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-integration/pom.xml",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-integration/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 1,
                "filename": "scufl2-validation-integration/pom.xml",
                "patch": "@@ -3,7 +3,7 @@\n   <parent>\n     <groupId>uk.org.taverna.scufl2</groupId>\n     <artifactId>scufl2</artifactId>\n-    <version>0.9-SNAPSHOT</version>\n+    <version>0.11.0-SNAPSHOT</version>\n   </parent>\n   <artifactId>scufl2-validation-integration</artifactId>\n   <packaging>bundle</packaging>",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-integration/pom.xml",
                "sha": "135db0a2805e6d8e80c33b9ad2ac4cf84216c88b",
                "status": "modified"
            },
            {
                "additions": 26,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/pom.xml",
                "changes": 52,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 26,
                "filename": "scufl2-validation-structural/pom.xml",
                "patch": "@@ -1,26 +1,26 @@\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n-  <modelVersion>4.0.0</modelVersion>\n-  <parent>\n-    <groupId>uk.org.taverna.scufl2</groupId>\n-    <artifactId>scufl2</artifactId>\n-    <version>0.9-SNAPSHOT</version>\n-  </parent>\n-  <artifactId>scufl2-validation-structural</artifactId>\n-  <packaging>bundle</packaging>\n-  <name>Taverna Scufl 2 validation structural</name>\n-  <description>Code to check that the SCUFL 2 could run as a valid workflow. This is separate from checking the activities within the SCUFL 2 are \"live\"</description>\n-  \t<dependencies>\n-  \t\t\t<dependency>\n-\t\t\t<groupId>${project.groupId}</groupId>\n-\t\t\t<artifactId>scufl2-validation</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t</dependency>\n-  \t\n-\t\t<dependency>\n-\t\t\t<groupId>${project.groupId}</groupId>\n-\t\t\t<artifactId>scufl2-api</artifactId>\n-\t\t\t<version>${project.version}</version>\n-\t\t</dependency>\n-\n-\t\t</dependencies>\n-</project>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n+  <modelVersion>4.0.0</modelVersion>\r\n+  <parent>\r\n+    <groupId>uk.org.taverna.scufl2</groupId>\r\n+    <artifactId>scufl2</artifactId>\r\n+    <version>0.11.0-SNAPSHOT</version>\r\n+  </parent>\r\n+  <artifactId>scufl2-validation-structural</artifactId>\r\n+  <packaging>bundle</packaging>\r\n+  <name>Taverna Scufl 2 validation structural</name>\r\n+  <description>Code to check that the SCUFL 2 could run as a valid workflow. This is separate from checking the activities within the SCUFL 2 are \"live\"</description>\r\n+  \t<dependencies>\r\n+  \t\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-validation</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t</dependency>\r\n+  \t\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>${project.groupId}</groupId>\r\n+\t\t\t<artifactId>scufl2-api</artifactId>\r\n+\t\t\t<version>${project.version}</version>\r\n+\t\t</dependency>\r\n+\r\n+\t\t</dependencies>\r\n+</project>\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/pom.xml",
                "sha": "9ed7041b682bd01886c25306a675af49814fc2ff",
                "status": "modified"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/DotProductIterationMismatchProblem.java",
                "changes": 19,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/DotProductIterationMismatchProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/DotProductIterationMismatchProblem.java",
                "patch": "@@ -0,0 +1,19 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class DotProductIterationMismatchProblem extends ValidationProblem {\n+\n+\tpublic DotProductIterationMismatchProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/DotProductIterationMismatchProblem.java",
                "sha": "9fec53be00bedddb04fa5fa54c3aa43a3dd0afea",
                "status": "added"
            },
            {
                "additions": 13,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/EmptyCrossProductProblem.java",
                "changes": 13,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/EmptyCrossProductProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/EmptyCrossProductProblem.java",
                "patch": "@@ -0,0 +1,13 @@\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+\n+public class EmptyCrossProductProblem extends ValidationProblem {\n+\n+\tpublic EmptyCrossProductProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/EmptyCrossProductProblem.java",
                "sha": "62e2c95e9a797832b8ce33ab30db72e0f2a6706d",
                "status": "added"
            },
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/EmptyDotProductProblem.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/EmptyDotProductProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/EmptyDotProductProblem.java",
                "patch": "@@ -0,0 +1,12 @@\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+public class EmptyDotProductProblem extends ValidationProblem {\n+\n+\tpublic EmptyDotProductProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/EmptyDotProductProblem.java",
                "sha": "cdf933bb492a9f4d17a98c87c5b86102c643744a",
                "status": "added"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/FailedProcessorProblem.java",
                "changes": 19,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/FailedProcessorProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/FailedProcessorProblem.java",
                "patch": "@@ -0,0 +1,19 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class FailedProcessorProblem extends ValidationProblem {\n+\n+\tpublic FailedProcessorProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/FailedProcessorProblem.java",
                "sha": "40efb302240539cbb7b7d46f5b9d4135653b6ed6",
                "status": "added"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/IncompleteWorkflowProblem.java",
                "changes": 19,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/IncompleteWorkflowProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/IncompleteWorkflowProblem.java",
                "patch": "@@ -0,0 +1,19 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class IncompleteWorkflowProblem extends ValidationProblem {\n+\n+\tpublic IncompleteWorkflowProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/IncompleteWorkflowProblem.java",
                "sha": "27e911ed3e9d4c1f7a20a331a68c28524cce473a",
                "status": "added"
            },
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/MissingIterationStrategyStackProblem.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/MissingIterationStrategyStackProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/MissingIterationStrategyStackProblem.java",
                "patch": "@@ -0,0 +1,12 @@\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+public class MissingIterationStrategyStackProblem extends ValidationProblem {\n+\n+\tpublic MissingIterationStrategyStackProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/MissingIterationStrategyStackProblem.java",
                "sha": "b255c572ddc113664edccf032275c29475a353c9",
                "status": "added"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/MissingMainIncomingDataLinkProblem.java",
                "changes": 19,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/MissingMainIncomingDataLinkProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/MissingMainIncomingDataLinkProblem.java",
                "patch": "@@ -0,0 +1,19 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class MissingMainIncomingDataLinkProblem extends ValidationProblem {\n+\n+\tpublic MissingMainIncomingDataLinkProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/MissingMainIncomingDataLinkProblem.java",
                "sha": "b806405c1f40623a86179b583c3299a56c80007e",
                "status": "added"
            },
            {
                "additions": 271,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/ReportStructuralValidationListener.java",
                "changes": 271,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/ReportStructuralValidationListener.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/ReportStructuralValidationListener.java",
                "patch": "@@ -0,0 +1,271 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.api.core.DataLink;\n+import uk.org.taverna.scufl2.api.core.Processor;\n+import uk.org.taverna.scufl2.api.core.Workflow;\n+import uk.org.taverna.scufl2.api.iterationstrategy.CrossProduct;\n+import uk.org.taverna.scufl2.api.iterationstrategy.DotProduct;\n+import uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyNode;\n+import uk.org.taverna.scufl2.api.port.OutputWorkflowPort;\n+import uk.org.taverna.scufl2.api.port.ReceiverPort;\n+import uk.org.taverna.scufl2.api.port.SenderPort;\n+import uk.org.taverna.scufl2.validation.ValidationException;\n+import uk.org.taverna.scufl2.validation.structural.DefaultStructuralValidationListener;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class ReportStructuralValidationListener extends\n+\t\tDefaultStructuralValidationListener {\n+\t\n+\tprivate Map<SenderPort, List<DataLink>> senderDataLinkMap = new HashMap<SenderPort, List<DataLink>>();\n+\tprivate Map<ReceiverPort, List<DataLink>> receiverDataLinkMap = new HashMap<ReceiverPort, List<DataLink>>();\n+\tprivate Map<WorkflowBean, Integer> resolvedDepthMap = new HashMap<WorkflowBean, Integer> ();\n+\tprivate Set<DotProductIterationMismatchProblem> dotProductIterationMismatchProblems = new HashSet<DotProductIterationMismatchProblem>();\n+\tprivate Set<EmptyCrossProductProblem> emptyCrossProducts = new HashSet<EmptyCrossProductProblem>();\n+\tprivate Set<EmptyDotProductProblem> emptyDotProducts = new HashSet<EmptyDotProductProblem>();\n+\tprivate Set<FailedProcessorProblem> failedProcessors = new HashSet<FailedProcessorProblem>();\n+\tprivate Set<IncompleteWorkflowProblem> incompleteWorkflows = new HashSet<IncompleteWorkflowProblem>();\n+\tprivate Set<MissingIterationStrategyStackProblem> missingIterationStrategyStacks = new HashSet<MissingIterationStrategyStackProblem>();\n+\tprivate Set<MissingMainIncomingDataLinkProblem> missingMainIncomingDataLinks = new HashSet<MissingMainIncomingDataLinkProblem> ();\n+\tprivate Set<Processor> passedProcessors = new HashSet<Processor>();\n+\tprivate Set<UnrecognizedIterationStrategyNodeProblem> unrecognizedIterationStrategyNodes = new HashSet<UnrecognizedIterationStrategyNodeProblem>();\n+\tprivate Set<UnresolvedOutputProblem> unresolvedOutputs = new HashSet<UnresolvedOutputProblem>();\n+\tprivate Set<UnresolvedProcessorProblem> unresolvedProcessors = new HashSet<UnresolvedProcessorProblem>();\n+\t\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#dataLinkReceiver(uk.org.taverna.scufl2.api.core.DataLink)\n+\t */\n+\t@Override\n+\tpublic void dataLinkReceiver(DataLink dl) {\n+\t\tReceiverPort receiver = dl.getSendsTo();\n+\t\tif (receiver != null) {\n+\t\t\tif (!receiverDataLinkMap.containsKey(receiver)) {\n+\t\t\t\treceiverDataLinkMap.put(receiver, new ArrayList<DataLink>());\n+\t\t\t}\n+\t\t\treceiverDataLinkMap.get(receiver).add(dl);\n+\t\t}\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#dataLinkSender(uk.org.taverna.scufl2.api.core.DataLink)\n+\t */\n+\t@Override\n+\tpublic void dataLinkSender(DataLink dl) {\n+\t\tSenderPort sender = dl.getReceivesFrom();\n+\t\tif (sender != null) {\n+\t\t\tif (!senderDataLinkMap.containsKey(sender)) {\n+\t\t\t\tsenderDataLinkMap.put(sender, new ArrayList<DataLink>());\n+\t\t\t}\n+\t\t\tsenderDataLinkMap.get(sender).add(dl);\n+\t\t}\n+\t}\n+\t\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#depthResolution(uk.org.taverna.scufl2.api.common.WorkflowBean, java.lang.Integer)\n+\t */\n+\t@Override\n+\tpublic void depthResolution(WorkflowBean owp, Integer portResolvedDepth) {\n+\t\tresolvedDepthMap.put(owp, portResolvedDepth);\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#dotProductIterationMismatch(uk.org.taverna.scufl2.api.iterationstrategy.DotProduct)\n+\t */\n+\t@Override\n+\tpublic void dotProductIterationMismatch(DotProduct dotProduct) {\n+\t\tdotProductIterationMismatchProblems.add(new DotProductIterationMismatchProblem(dotProduct));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#emptyCrossProduct(uk.org.taverna.scufl2.api.iterationstrategy.CrossProduct)\n+\t */\n+\t@Override\n+\tpublic void emptyCrossProduct(CrossProduct crossProduct) {\n+\t\temptyCrossProducts.add(new EmptyCrossProductProblem(crossProduct));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#emptyDotProduct(uk.org.taverna.scufl2.api.iterationstrategy.DotProduct)\n+\t */\n+\t@Override\n+\tpublic void emptyDotProduct(DotProduct dotProduct) {\n+\t\temptyDotProducts.add(new EmptyDotProductProblem(dotProduct));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#failedProcessorAdded(uk.org.taverna.scufl2.api.core.Processor)\n+\t */\n+\t@Override\n+\tpublic void failedProcessorAdded(Processor p) {\n+\t\tfailedProcessors.add(new FailedProcessorProblem(p));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#incompleteWorkflow(uk.org.taverna.scufl2.api.core.Workflow)\n+\t */\n+\t@Override\n+\tpublic void incompleteWorkflow(Workflow w) {\n+\t\tincompleteWorkflows.add(new IncompleteWorkflowProblem(w));\n+\t}\n+\t\n+\t/**\n+\t * @return\n+\t */\n+\tpublic Set<IncompleteWorkflowProblem> getIncompleteWorkflows() {\n+\t\treturn incompleteWorkflows;\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#missingIterationStrategyStack(uk.org.taverna.scufl2.api.core.Processor)\n+\t */\n+\t@Override\n+\tpublic void missingIterationStrategyStack(Processor p) {\n+\t\tmissingIterationStrategyStacks.add(new MissingIterationStrategyStackProblem(p));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#missingMainIncomingLink(uk.org.taverna.scufl2.api.port.ReceiverPort)\n+\t */\n+\t@Override\n+\tpublic void missingMainIncomingLink(ReceiverPort owp) {\n+\t\tmissingMainIncomingDataLinks.add(new MissingMainIncomingDataLinkProblem(owp));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#passedProcessorAdded(uk.org.taverna.scufl2.api.core.Processor)\n+\t */\n+\t@Override\n+\tpublic void passedProcessor(Processor p) {\n+\t\tpassedProcessors.add(p);\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#unrecognizedIterationStrategyNode(uk.org.taverna.scufl2.api.iterationstrategy.IterationStrategyNode)\n+\t */\n+\t@Override\n+\tpublic void unrecognizedIterationStrategyNode(\n+\t\t\tIterationStrategyNode iterationStrategyNode) {\n+\t\tunrecognizedIterationStrategyNodes.add(new UnrecognizedIterationStrategyNodeProblem(iterationStrategyNode));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#unresolvedOutput(uk.org.taverna.scufl2.api.port.OutputWorkflowPort)\n+\t */\n+\t@Override\n+\tpublic void unresolvedOutput(OutputWorkflowPort owp) {\n+\t\tunresolvedOutputs.add(new UnresolvedOutputProblem(owp));\n+\t}\n+\n+\t/* (non-Javadoc)\n+\t * @see uk.org.taverna.scufl2.validation.structural.StructuralValidationEventListener#unresolvedProcessorAdded(uk.org.taverna.scufl2.api.core.Processor)\n+\t */\n+\t@Override\n+\tpublic void unresolvedProcessorAdded(Processor p) {\n+\t\tunresolvedProcessors.add(new UnresolvedProcessorProblem(p));\n+\t}\n+\n+\t/**\n+\t * @return the dotProductIterationMismatches\n+\t */\n+\tpublic Set<DotProductIterationMismatchProblem> getDotProductIterationMismatches() {\n+\t\treturn dotProductIterationMismatchProblems;\n+\t}\n+\n+\t/**\n+\t * @return the emptyCrossProducts\n+\t */\n+\tpublic Set<EmptyCrossProductProblem> getEmptyCrossProducts() {\n+\t\treturn emptyCrossProducts;\n+\t}\n+\n+\t/**\n+\t * @return the emptyDotProducts\n+\t */\n+\tpublic Set<EmptyDotProductProblem> getEmptyDotProducts() {\n+\t\treturn emptyDotProducts;\n+\t}\n+\n+\t/**\n+\t * @return the failedProcessors\n+\t */\n+\tpublic Set<FailedProcessorProblem> getFailedProcessors() {\n+\t\treturn failedProcessors;\n+\t}\n+\n+\t/**\n+\t * @return the missingIterationStrategyStacks\n+\t */\n+\tpublic Set<MissingIterationStrategyStackProblem> getMissingIterationStrategyStacks() {\n+\t\treturn missingIterationStrategyStacks;\n+\t}\n+\n+\t/**\n+\t * @return the missingMainIncomingDataLinks\n+\t */\n+\tpublic Set<MissingMainIncomingDataLinkProblem> getMissingMainIncomingDataLinks() {\n+\t\treturn missingMainIncomingDataLinks;\n+\t}\n+\n+\t/**\n+\t * @return the unrecognizedIterationStrategyNodes\n+\t */\n+\tpublic Set<UnrecognizedIterationStrategyNodeProblem> getUnrecognizedIterationStrategyNodes() {\n+\t\treturn unrecognizedIterationStrategyNodes;\n+\t}\n+\n+\t/**\n+\t * @return the unresolvedOutputs\n+\t */\n+\tpublic Set<UnresolvedOutputProblem> getUnresolvedOutputs() {\n+\t\treturn unresolvedOutputs;\n+\t}\n+\n+\t/**\n+\t * @return the unresolvedProcessors\n+\t */\n+\tpublic Set<UnresolvedProcessorProblem> getUnresolvedProcessors() {\n+\t\treturn unresolvedProcessors;\n+\t}\n+\t\n+\t@Override\n+\tpublic boolean detectedProblems() {\n+\t\treturn (!\n+\t\t\t\t(Collections.EMPTY_SET.equals(getDotProductIterationMismatches()) && \n+\t\t\t\tCollections.EMPTY_SET.equals(getEmptyCrossProducts()) && \n+\t\t\t\tCollections.EMPTY_SET.equals(getEmptyDotProducts()) && \n+\t\t\t\tCollections.EMPTY_SET.equals(getFailedProcessors()) && \n+\t\t\t\tCollections.EMPTY_SET.equals(getIncompleteWorkflows()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getMissingIterationStrategyStacks()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getMissingMainIncomingDataLinks()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getUnrecognizedIterationStrategyNodes()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getUnresolvedOutputs()) &&\n+\t\t\t\tCollections.EMPTY_SET.equals(getUnresolvedProcessors())));\n+\t}\t\n+\n+\t@Override\n+\tpublic ValidationException getException() {\n+\t\t// TODO Needs to be improved;\n+\t\tif (detectedProblems()) {\n+\t\t\treturn new ValidationException(this.toString());\n+\t\t} else {\n+\t\t\treturn null;\n+\t\t}\n+\t}\n+\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/ReportStructuralValidationListener.java",
                "sha": "99b6f48ef5ce59e23edb3a1a640ce8c700a8806b",
                "status": "added"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnrecognizedIterationStrategyNodeProblem.java",
                "changes": 19,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnrecognizedIterationStrategyNodeProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnrecognizedIterationStrategyNodeProblem.java",
                "patch": "@@ -0,0 +1,19 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class UnrecognizedIterationStrategyNodeProblem extends ValidationProblem {\n+\n+\tpublic UnrecognizedIterationStrategyNodeProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnrecognizedIterationStrategyNodeProblem.java",
                "sha": "4556c7c55e0b7e0de86538677c0b062fca6be557",
                "status": "added"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnresolvedOutputProblem.java",
                "changes": 19,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnresolvedOutputProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnresolvedOutputProblem.java",
                "patch": "@@ -0,0 +1,19 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class UnresolvedOutputProblem extends ValidationProblem {\n+\n+\tpublic UnresolvedOutputProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnresolvedOutputProblem.java",
                "sha": "f8bd477865e55e96f5876b2c908ad11241993ee0",
                "status": "added"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnresolvedProcessorProblem.java",
                "changes": 19,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnresolvedProcessorProblem.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnresolvedProcessorProblem.java",
                "patch": "@@ -0,0 +1,19 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation.structural.report;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+import uk.org.taverna.scufl2.validation.ValidationProblem;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public class UnresolvedProcessorProblem extends ValidationProblem {\n+\n+\tpublic UnresolvedProcessorProblem(WorkflowBean bean) {\n+\t\tsuper(bean);\n+\t}\n+\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation-structural/src/main/java/uk/org/taverna/scufl2/validation/structural/report/UnresolvedProcessorProblem.java",
                "sha": "86c01688c0e14a88376e0e23c25ec926221c00c9",
                "status": "added"
            },
            {
                "additions": 19,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation/pom.xml",
                "changes": 38,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation/pom.xml?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 19,
                "filename": "scufl2-validation/pom.xml",
                "patch": "@@ -1,19 +1,19 @@\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n-  <modelVersion>4.0.0</modelVersion>\n-  <parent>\n-    <artifactId>scufl2</artifactId>\n-    <groupId>uk.org.taverna.scufl2</groupId>\n-    <version>0.9-SNAPSHOT</version>\n-  </parent>\n-  <packaging>bundle</packaging>\n-  <artifactId>scufl2-validation</artifactId>\n-  <name>Taverna Scufl 2 validation</name>\n-  <dependencies>\n-  \t<dependency>\n-  \t\t<groupId>uk.org.taverna.scufl2</groupId>\n-  \t\t<artifactId>scufl2-api</artifactId>\n-  \t\t<version>0.9-SNAPSHOT</version>\n-  \t\t<type>bundle</type>\n-  \t</dependency>\n-  </dependencies>\n-</project>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n+  <modelVersion>4.0.0</modelVersion>\r\n+  <parent>\r\n+    <artifactId>scufl2</artifactId>\r\n+    <groupId>uk.org.taverna.scufl2</groupId>\r\n+    <version>0.11.0-SNAPSHOT</version>\r\n+  </parent>\r\n+  <packaging>bundle</packaging>\r\n+  <artifactId>scufl2-validation</artifactId>\r\n+  <name>Taverna Scufl 2 validation</name>\r\n+  <dependencies>\r\n+  \t<dependency>\r\n+  \t\t<groupId>uk.org.taverna.scufl2</groupId>\r\n+  \t\t<artifactId>scufl2-api</artifactId>\r\n+  \t\t<version>${project.version}</version>\r\n+  \t\t<type>bundle</type>\r\n+  \t</dependency>\r\n+  </dependencies>\r\n+</project>\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation/pom.xml",
                "sha": "ac68e4a1ce2dd25850fcf7c6e829fec2137e9d8a",
                "status": "modified"
            },
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation/src/main/java/uk/org/taverna/scufl2/validation/Status.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation/src/main/java/uk/org/taverna/scufl2/validation/Status.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation/src/main/java/uk/org/taverna/scufl2/validation/Status.java",
                "patch": "@@ -0,0 +1,12 @@\n+/**\n+ * \n+ */\n+package uk.org.taverna.scufl2.validation;\n+\n+/**\n+ * @author alanrw\n+ *\n+ */\n+public enum Status {\n+\tOK, WARNING, SEVERE\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation/src/main/java/uk/org/taverna/scufl2/validation/Status.java",
                "sha": "28fd5daa7473cebaf74485196d006e820c76cd0d",
                "status": "added"
            },
            {
                "additions": 12,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation/src/main/java/uk/org/taverna/scufl2/validation/WorkflowBeanReport.java",
                "changes": 12,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-validation/src/main/java/uk/org/taverna/scufl2/validation/WorkflowBeanReport.java?ref=42358111e7cb1e7d1ae3705ba261afaa34a646c3",
                "deletions": 0,
                "filename": "scufl2-validation/src/main/java/uk/org/taverna/scufl2/validation/WorkflowBeanReport.java",
                "patch": "@@ -0,0 +1,12 @@\n+package uk.org.taverna.scufl2.validation;\n+\n+import uk.org.taverna.scufl2.api.common.WorkflowBean;\n+\n+public interface WorkflowBeanReport {\n+\n+\t/**\n+\t * @return the bean\n+\t */\n+\tpublic abstract WorkflowBean getBean();\n+\n+}\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/42358111e7cb1e7d1ae3705ba261afaa34a646c3/scufl2-validation/src/main/java/uk/org/taverna/scufl2/validation/WorkflowBeanReport.java",
                "sha": "f3d7316a742370b0d8da4e4c621d8d1b5d5c7261",
                "status": "added"
            }
        ],
        "message": "Merge branch 'master' into raven-npe",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/39e09f7c4ca2940778869459e94414c8b34cb9e1",
        "patched_files": [
            "Revision.java",
            "StructureReader.java",
            "annotated2.java",
            "MismatchConfigurableTypeProblem.java",
            "T2FlowReader.java",
            "annotations_2_4.java",
            "OutOfScopeValueProblem.java",
            "MissingMainIncomingDataLinkProblem.java",
            "NegativeValueProblem.java",
            "IncompatibleGranularDepthProblem.java",
            "t2flow-extended.java",
            "LICENSE.java",
            "UnresolvedOutputProblem.java",
            "URITools.java",
            "Configurable.java",
            "ProfileParser.java",
            "PropertyListRoundtripIT.java",
            "WorkflowBundle.java",
            "NullFieldProblem.java",
            "WorkflowBeanReport.java",
            "DataflowActivityParser.java",
            "DummyWorkflow.java",
            "WorkflowBundleIO.java",
            "ReceiverPort.java",
            "UnrecognizedIterationStrategyNodeProblem.java",
            "Configuration.java",
            "EmptyCrossProductProblem.java",
            "pom.java",
            "PropertyResource.java",
            "UCFPackage.java",
            "processorNames.java",
            "UnresolvedProcessorProblem.java",
            "RESTActivityParser.java",
            "Scufl2Tools.java",
            "taverna-2.java",
            "RDFXMLSerializer.java",
            "PropertyResourceSerialiser.java",
            "ProcessorNames.java",
            "t2flow.java",
            "NonAbsoluteURIProblem.java",
            "rest.java",
            "PortMissingFromIterationStrategyStackProblem.java",
            "T2FlowParser.java",
            "ReportStructuralValidationListener.java",
            "ConvertT2flowScufl2.java",
            "Annotation.java",
            "t2annotations.java",
            "WrongParentProblem.java",
            "Visitor.java",
            "LiteralNamespacesIT.java",
            "XPathActivityParser.java",
            "Workflow.java",
            "MissingIterationStrategyStackProblem.java",
            "EmptyStackIT.java",
            "DataLink.java",
            "FailedProcessorProblem.java",
            "StructureWriter.java",
            "Status.java",
            "SenderPort.java",
            "apiconsumer.java",
            "ExampleWorkflow.java",
            "annotations_2_4-xsd.java",
            "NullSafeComparator.java",
            "PortMentionedTwiceProblem.java",
            "LoopParser.java",
            "Typed.java",
            "DotProductIterationMismatchProblem.java",
            "ExternalToolActivityParser.java",
            "README.java",
            "ReportCorrectnessValidationListener.java",
            "BlockingControlLink.java",
            "package-info.java",
            "IncompleteWorkflowProblem.java",
            "EmptyIterationStrategyTopNodeProblem.java",
            "EmptyDotProductProblem.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "DataLinkCompareTest.java",
            "TestTyped.java",
            "TestRESTActivityParser.java",
            "TestAnnotationParsing.java",
            "TestBlockingControlLink.java",
            "TestPropertySerialisation.java",
            "TestWorkflowBundleIO.java",
            "TestT2FlowReader.java",
            "TestStructureReader.java",
            "TestProcessorNames.java",
            "TestRevision.java",
            "TestProfileParser.java",
            "WorkflowTest.java",
            "TestURITools.java",
            "TestURIToolsBeans.java",
            "ConfigurationTest.java",
            "TestPropertyParsing.java",
            "TestExternalToolActivityParser.java",
            "TestWorkflow.java",
            "TestWorkflowBundleEquals.java",
            "TestDispatchLayerParsing.java",
            "TestUCFPackage.java",
            "TestDataLink.java",
            "ControlLinkCompareTest.java",
            "VisitorTest.java",
            "TestExampleWorkflow.java",
            "TestAnnotations.java",
            "TestScufl2Tools.java",
            "TestRDFXMLSerializer.java",
            "TestConvertT2flowScufl2.java",
            "TestXPathActivityParser.java",
            "TestConfiguration.java",
            "TestT2FlowParser.java",
            "TestWorkflowBundle.java",
            "TestNullCompare.java",
            "TestRevisionSerialization.java"
        ]
    },
    "incubator-taverna-language_6f723b8": {
        "bug_id": "incubator-taverna-language_6f723b8",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/6f723b8ba343c167bec301e5e2fd4bf14f8973c1",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/6f723b8ba343c167bec301e5e2fd4bf14f8973c1/src/main/java/org/purl/wf4ever/robundle/Bundles.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/src/main/java/org/purl/wf4ever/robundle/Bundles.java?ref=6f723b8ba343c167bec301e5e2fd4bf14f8973c1",
                "deletions": 0,
                "filename": "src/main/java/org/purl/wf4ever/robundle/Bundles.java",
                "patch": "@@ -186,6 +186,8 @@ protected static void safeMoveOrCopy(Path source, Path destination, boolean move\n                 // Do the fallback by temporary files below\n             }\n         }\n+        \n+        destination = destination.toAbsolutePath();\n \n         String tmpName = destination.getFileName().toString();\n         Path tmpDestination = Files.createTempFile(destination.getParent(),",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/6f723b8ba343c167bec301e5e2fd4bf14f8973c1/src/main/java/org/purl/wf4ever/robundle/Bundles.java",
                "sha": "7f2362a1db5416ac2671dffdb385c1cd3674318e",
                "status": "modified"
            }
        ],
        "message": "T3-1026 Avoid NPE if relative path is used",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/295cf91aac1d67be559d8411e1433c21939d16dd",
        "patched_files": [
            "Bundles.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestBundles.java"
        ]
    },
    "incubator-taverna-language_78a62c9": {
        "bug_id": "incubator-taverna-language_78a62c9",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/78a62c997a2a80c88e3291a73c994eca2a5fc653",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/78a62c997a2a80c88e3291a73c994eca2a5fc653/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/RDFXMLSerializer.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/RDFXMLSerializer.java?ref=78a62c997a2a80c88e3291a73c994eca2a5fc653",
                "deletions": 1,
                "filename": "scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/RDFXMLSerializer.java",
                "patch": "@@ -294,7 +294,8 @@ private PortDepth makePortDepth(Integer depth) {\n \n \t\t@Override\n \t\tpublic boolean visitLeave(WorkflowBean node) {\n-\t\t\tif (node instanceof IterationStrategyParent) {\n+\t\t\tif (node instanceof IterationStrategyTopNode) {\n+\t\t\t\t// Actually for any Cross/Dot product\n \t\t\t\tproductStack.pop();\n \t\t\t}\n \t\t\treturn true;",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/78a62c997a2a80c88e3291a73c994eca2a5fc653/scufl2-rdfxml/src/main/java/uk/org/taverna/scufl2/rdfxml/RDFXMLSerializer.java",
                "sha": "709f6559abbbb7b38edf5dc33433ced9bb2f299a",
                "status": "modified"
            }
        ],
        "message": "pop productStack on IterationStrategyTopNode to avoid NPE on empty stacks",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/01f3f58771d929d0971a348ba1fc493423ae6340",
        "patched_files": [
            "RDFXMLSerializer.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestRDFXMLSerializer.java"
        ]
    },
    "incubator-taverna-language_7c9841f": {
        "bug_id": "incubator-taverna-language_7c9841f",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/7c9841f8ffbd7a322774a110b0caae0b37c4878b",
        "file": [
            {
                "additions": 38,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/7c9841f8ffbd7a322774a110b0caae0b37c4878b/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Scufl2Tools.java",
                "changes": 76,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Scufl2Tools.java?ref=7c9841f8ffbd7a322774a110b0caae0b37c4878b",
                "deletions": 38,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Scufl2Tools.java",
                "patch": "@@ -39,24 +39,24 @@\n \r\n /**\r\n  * Utility methods for dealing with SCUFL2 models\r\n- * \r\n+ *\r\n  * @author Stian Soiland-Reyes\r\n  */\r\n public class Scufl2Tools {\r\n \r\n \r\n \tpublic static URI PORT_DEFINITION = URI\r\n \t\t\t.create(\"http://ns.taverna.org.uk/2010/scufl2#portDefinition\");\r\n-\t\r\n+\r\n \tprivate static URITools uriTools = new URITools();\r\n-\t\r\n+\r\n \tpublic static URI NESTED_WORKFLOW = URI\r\n \t\t\t.create(\"http://ns.taverna.org.uk/2010/activity/nested-workflow\");\r\n \t/**\r\n \t * Compare {@link ProcessorBinding}s by their {@link ProcessorBinding#getActivityPosition()}.\r\n-\t * \r\n+\t *\r\n \t * Note: this comparator imposes orderings that are inconsistent with equals.\r\n-\t * \r\n+\t *\r\n \t * @author Stian Soiland-Reyes\r\n \t */\r\n \tpublic static class BindingComparator implements Comparator<ProcessorBinding> {\r\n@@ -70,7 +70,7 @@ public int compare(ProcessorBinding o1, ProcessorBinding o2) {\n \r\n \t/**\r\n \t * Returns the {@link Configuration} for a {@link Configurable} in the given {@link Profile}.\r\n-\t * \r\n+\t *\r\n \t * @param configurable\r\n \t *            the <code>Configurable</code> to find a <code>Configuration</code> for\r\n \t * @param profile\r\n@@ -98,7 +98,7 @@ public Configuration configurationForActivityBoundToProcessor(Processor processo\n \t/**\r\n \t * Returns the list of {@link Configuration Configurations} for a {@link Configurable} in the\r\n \t * given {@link Profile}.\r\n-\t * \r\n+\t *\r\n \t * @param configurable\r\n \t *            the <code>Configurable</code> to find a <code>Configuration</code> for\r\n \t * @param profile\r\n@@ -110,7 +110,7 @@ public Configuration configurationForActivityBoundToProcessor(Processor processo\n \tpublic List<Configuration> configurationsFor(Configurable configurable, Profile profile) {\r\n \t\tList<Configuration> configurations = new ArrayList<Configuration>();\r\n \t\tfor (Configuration config : profile.getConfigurations()) {\r\n-\t\t\tif (config.getConfigures().equals(configurable)) {\r\n+\t\t\tif (configurable.equals(config.getConfigures())) {\r\n \t\t\t\tconfigurations.add(config);\r\n \t\t\t}\r\n \t\t}\r\n@@ -193,14 +193,14 @@ public Configuration configurationForActivityBoundToProcessor(Processor processo\n \t\treturn null;\r\n \r\n \t}\r\n-\t\r\n+\r\n \tpublic PropertyResource portDefinitionFor(ActivityPort activityPort, Profile profile) throws PropertyException {\r\n \t\tConfiguration actConfig = configurationFor(activityPort.getParent(), profile);\r\n-\t\t\r\n+\r\n \t\tURI portURI = uriTools.uriForBean(activityPort);\r\n \t\tURI configURI = uriTools.uriForBean(actConfig);\r\n \r\n-\t\t\r\n+\r\n \t\tURI portDefinition;\r\n \t\tURI definesPort;\r\n \t\tif (activityPort instanceof InputPort) {\r\n@@ -210,8 +210,8 @@ public PropertyResource portDefinitionFor(ActivityPort activityPort, Profile pro\n \t\t\tportDefinition = PORT_DEFINITION.resolve(\"#outputPortDefinition\");\r\n \t\t\tdefinesPort = PORT_DEFINITION.resolve(\"#definesOutputPort\");\r\n \t\t}\r\n-\t\tfor (PropertyResource portDef : \r\n-\t\t\tactConfig.getPropertyResource().getPropertiesAsResources(portDefinition)) {\t\t\t\r\n+\t\tfor (PropertyResource portDef :\r\n+\t\t\tactConfig.getPropertyResource().getPropertiesAsResources(portDefinition)) {\r\n \t\t\tURI portDefURI = portDef.getPropertyAsResourceURI(definesPort);\r\n \t\t\t// We'll compare the URIs as absolute URIs - but portDefURI is most likely relative\r\n \t\t\t// to the config\r\n@@ -220,7 +220,7 @@ public PropertyResource portDefinitionFor(ActivityPort activityPort, Profile pro\n \t\t\t}\r\n \t\t}\r\n \t\treturn null;\r\n-\t\t\r\n+\r\n \t}\r\n \r\n \tpublic ProcessorBinding processorBindingForProcessor(Processor processor, Profile profile) {\r\n@@ -331,7 +331,7 @@ public DispatchStackLayer dispatchStackByType(Processor processor, URI type) {\n \t\t\t}\r\n \t\t}\r\n \t\treturn candidate;\r\n-\t\t\r\n+\r\n \t}\r\n \r\n \t/**\r\n@@ -340,10 +340,10 @@ public DispatchStackLayer dispatchStackByType(Processor processor, URI type) {\n \t * This is calculated as all processors in the dataflow, except the\r\n \t * processor itself, and any processor <em>upstream</em>, following both\r\n \t * data links and conditional links.\r\n-\t * \r\n+\t *\r\n \t * @see #possibleUpStreamProcessors(Dataflow, Processor)\r\n \t * @see #splitProcessors(Collection, Processor)\r\n-\t * \r\n+\t *\r\n \t * @param dataflow\r\n \t *            Dataflow from where to find processors\r\n \t * @param processor\r\n@@ -366,10 +366,10 @@ public DispatchStackLayer dispatchStackByType(Processor processor, URI type) {\n \t * This is calculated as all processors in the dataflow, except the\r\n \t * processor itself, and any processor <em>downstream</em>, following both\r\n \t * data links and conditional links.\r\n-\t * \r\n+\t *\r\n \t * @see #possibleDownStreamProcessors(Dataflow, Processor)\r\n \t * @see #splitProcessors(Collection, Processor)\r\n-\t * \r\n+\t *\r\n \t * @param dataflow\r\n \t *            Dataflow from where to find processors\r\n \t * @param processor\r\n@@ -387,7 +387,7 @@ public DispatchStackLayer dispatchStackByType(Processor processor, URI type) {\n \t}\r\n \r\n \t/**\r\n-\t * \r\n+\t *\r\n \t * @param processors\r\n \t * @param splitPoint\r\n \t * @return\r\n@@ -397,9 +397,9 @@ public ProcessorSplit splitProcessors(\n \t\tSet<Processor> upStream = new HashSet<Processor>();\r\n \t\tSet<Processor> downStream = new HashSet<Processor>();\r\n \t\tSet<Processor> queue = new HashSet<Processor>();\r\n-\t\r\n+\r\n \t\tqueue.add(splitPoint);\r\n-\t\r\n+\r\n \t\t// First let's go upstream\r\n \t\twhile (!queue.isEmpty()) {\r\n \t\t\tProcessor processor = queue.iterator().next();\r\n@@ -432,8 +432,8 @@ public ProcessorSplit splitProcessors(\n \t\t// Then downstream\r\n \t\twhile (!queue.isEmpty()) {\r\n \t\t\tProcessor processor = queue.iterator().next();\r\n-\t\t\tqueue.remove(processor);\t\t\t\r\n-\t\t\tList<BlockingControlLink> controlledConditions = controlLinksWaitingFor(processor);\t\t\t\t\r\n+\t\t\tqueue.remove(processor);\r\n+\t\t\tList<BlockingControlLink> controlledConditions = controlLinksWaitingFor(processor);\r\n \t\t\tfor (BlockingControlLink condition : controlledConditions) {\r\n \t\t\t\tProcessor downstreamProc = condition.getBlock();\r\n \t\t\t\tif (!downStream.contains(downstreamProc)) {\r\n@@ -466,9 +466,9 @@ public ProcessorSplit splitProcessors(\n \t/**\r\n \t * Result bean returned from\r\n \t * {@link Scufl2Tools#splitProcessors(Collection, Processor)}.\r\n-\t * \r\n+\t *\r\n \t * @author Stian Soiland-Reyes\r\n-\t * \r\n+\t *\r\n \t */\r\n \tpublic static class ProcessorSplit {\r\n \r\n@@ -479,7 +479,7 @@ public ProcessorSplit splitProcessors(\n \r\n \t\t/**\r\n \t\t * Processor that was used as a split point.\r\n-\t\t * \r\n+\t\t *\r\n \t\t * @return Split point processor\r\n \t\t */\r\n \t\tpublic Processor getSplitPoint() {\r\n@@ -488,7 +488,7 @@ public Processor getSplitPoint() {\n \r\n \t\t/**\r\n \t\t * Processors that are upstream from the split point.\r\n-\t\t * \r\n+\t\t *\r\n \t\t * @return Upstream processors\r\n \t\t */\r\n \t\tpublic Set<Processor> getUpStream() {\r\n@@ -497,7 +497,7 @@ public Processor getSplitPoint() {\n \r\n \t\t/**\r\n \t\t * Processors that are downstream from the split point.\r\n-\t\t * \r\n+\t\t *\r\n \t\t * @return Downstream processors\r\n \t\t */\r\n \t\tpublic Set<Processor> getDownStream() {\r\n@@ -515,7 +515,7 @@ public Processor getSplitPoint() {\n \t\t * unconnected processors downstream, but not along the path to the\r\n \t\t * {@link #getSplitPoint()}, or they could be upstream from any\r\n \t\t * processor in {@link #getDownStream()}.\r\n-\t\t * \r\n+\t\t *\r\n \t\t * @return Processors unconnected from the split point\r\n \t\t */\r\n \t\tpublic Set<Processor> getUnconnected() {\r\n@@ -524,7 +524,7 @@ public Processor getSplitPoint() {\n \r\n \t\t/**\r\n \t\t * Construct a new processor split result.\r\n-\t\t * \r\n+\t\t *\r\n \t\t * @param splitPoint\r\n \t\t *            Processor used as split point\r\n \t\t * @param upStream\r\n@@ -551,25 +551,25 @@ public ProcessorSplit(Processor splitPoint, Set<Processor> upStream,\n \t */\r\n \tpublic boolean containsNestedWorkflow(Processor processor) {\r\n \t\tfor (Profile profile : processor.getParent().getParent().getProfiles()) {\r\n-\t\t\tif (containsNestedWorkflow(processor, profile)) { \r\n+\t\t\tif (containsNestedWorkflow(processor, profile)) {\r\n \t\t\t\treturn true;\r\n \t\t\t}\r\n \t\t}\r\n-\t\treturn false;\t\t\r\n+\t\treturn false;\r\n \t}\r\n-\t\r\n+\r\n \t/**\r\n \t * Returns true if processor contains a nested workflow in the specified profile.\r\n-\t * \r\n+\t *\r\n \t */\r\n \tpublic boolean containsNestedWorkflow(Processor processor, Profile profile) {\r\n-\t\tfor (ProcessorBinding binding : \r\n+\t\tfor (ProcessorBinding binding :\r\n \t\t\tprocessorBindingsForProcessor(processor, profile)) {\r\n \t\t\tif (binding.getBoundActivity().getConfigurableType().equals(NESTED_WORKFLOW)) {\r\n \t\t\t\treturn true;\r\n \t\t\t}\r\n \t\t}\r\n-\t\treturn false;\t\t\r\n+\t\treturn false;\r\n \t}\r\n-\t\r\n+\r\n }\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/7c9841f8ffbd7a322774a110b0caae0b37c4878b/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/common/Scufl2Tools.java",
                "sha": "3b43753d04b9ebf24a7b6d57f1410d83b20504ad",
                "status": "modified"
            }
        ],
        "message": "avoid npe if Configuration has no configurable",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/fa854b771b84462137ccd1950b4a3a88401563d2",
        "patched_files": [
            "Scufl2Tools.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestScufl2Tools.java"
        ]
    },
    "incubator-taverna-language_8b98d61": {
        "bug_id": "incubator-taverna-language_8b98d61",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/8b98d61929fad1208cab8579d61bd68e87a05166",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/8b98d61929fad1208cab8579d61bd68e87a05166/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/container/WorkflowBundle.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/container/WorkflowBundle.java?ref=8b98d61929fad1208cab8579d61bd68e87a05166",
                "deletions": 2,
                "filename": "scufl2-api/src/main/java/uk/org/taverna/scufl2/api/container/WorkflowBundle.java",
                "patch": "@@ -92,12 +92,16 @@ public URI getSameBaseAs() {\n \t}\r\n \r\n \tpublic void setMainProfile(Profile mainProfile) {\r\n-\t\tgetProfiles().add(mainProfile);\r\n+\t\tif (mainProfile != null) {\r\n+\t\t\tgetProfiles().add(mainProfile);\r\n+\t\t}\r\n \t\tthis.mainProfile = mainProfile;\r\n \t}\r\n \r\n \tpublic void setMainWorkflow(Workflow mainWorkflow) {\r\n-\t\tgetWorkflows().add(mainWorkflow);\r\n+\t\tif (mainWorkflow != null) {\r\n+\t\t\tgetWorkflows().add(mainWorkflow);\r\n+\t\t}\r\n \t\tthis.mainWorkflow = mainWorkflow;\r\n \t}\r\n \r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/8b98d61929fad1208cab8579d61bd68e87a05166/scufl2-api/src/main/java/uk/org/taverna/scufl2/api/container/WorkflowBundle.java",
                "sha": "9e7c26ebea10691608264301785e344c0999870b",
                "status": "modified"
            }
        ],
        "message": "Support no mainProfile/mainWorkflow (avoid NPE)",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/504b54232e21187f9de0d3d8e0614729566860c7",
        "patched_files": [
            "WorkflowBundle.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestWorkflowBundle.java"
        ]
    },
    "incubator-taverna-language_9aa7007": {
        "bug_id": "incubator-taverna-language_9aa7007",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/9aa70073f56d3d253fd4f94e724f696df31ad14f",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/9aa70073f56d3d253fd4f94e724f696df31ad14f/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/RESTActivityParser.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/RESTActivityParser.java?ref=9aa70073f56d3d253fd4f94e724f696df31ad14f",
                "deletions": 1,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/RESTActivityParser.java",
                "patch": "@@ -123,7 +123,7 @@ public Configuration parseConfiguration(T2FlowParser t2FlowParser,\n \t\t\tif (restConfig.getShowActualUrlPort() != null) {\n \t\t\t    json.put(\"showActualURLPort\", restConfig.getShowActualUrlPort().booleanValue());\n \t\t\t}\n-            if (restConfig.getShowResponseHeadersPort()) {\n+            if (restConfig.getShowResponseHeadersPort() != null) {\n                 json.put(\"showResponseHeadersPort\", restConfig.getShowResponseHeadersPort().booleanValue());\n             }\n ",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/9aa70073f56d3d253fd4f94e724f696df31ad14f/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/t23activities/RESTActivityParser.java",
                "sha": "fb5e5e448ae032a0c40ffadd8f39e6d441b6ba0c",
                "status": "modified"
            }
        ],
        "message": "Avoid NPE",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/4ee87772d3ef53a80dfc2568b17a9950b2ac7a8f",
        "patched_files": [
            "RESTActivityParser.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestRESTActivityParser.java"
        ]
    },
    "incubator-taverna-language_a0558a9": {
        "bug_id": "incubator-taverna-language_a0558a9",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/a0558a94c72c91bba17f8d883f89f5ea9fa08987",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/a0558a94c72c91bba17f8d883f89f5ea9fa08987/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "changes": 7,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java?ref=a0558a94c72c91bba17f8d883f89f5ea9fa08987",
                "deletions": 1,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "patch": "@@ -635,6 +635,9 @@ public void parseAnnotations(WorkflowBean annotatedBean, Annotations annotations\n \t\t//logger.fine(\"Checking annotations for \" + annotatedSubject);\r\n \t\t\r\n \t\tMap<String, NetSfTavernaT2AnnotationAnnotationAssertionImpl> annotationElems = new HashMap<String, NetSfTavernaT2AnnotationAnnotationAssertionImpl>();\r\n+\t\tif (annotations == null || annotations.getAnnotationChainOrAnnotationChain22() == null) {\r\n+\t\t\treturn;\r\n+\t\t}\r\n \t\tfor (JAXBElement<AnnotationChain> el : annotations\r\n \t\t\t\t.getAnnotationChainOrAnnotationChain22()) {\r\n \t\t\tNetSfTavernaT2AnnotationAnnotationAssertionImpl ann = el.getValue()\r\n@@ -721,7 +724,9 @@ public void parseAnnotations(WorkflowBean annotatedBean, Annotations annotations\n \r\n \tprotected Revision parseIdentificationAnnotations(Annotations annotations) {\r\n \t\tSortedMap<Calendar, UUID> revisions = new TreeMap<Calendar, UUID>();\r\n-\r\n+\t\tif (annotations == null || annotations.getAnnotationChainOrAnnotationChain22() == null) {\r\n+\t\t\treturn null;\r\n+\t\t}\r\n \t\tfor (JAXBElement<AnnotationChain> el : annotations\r\n \t\t\t\t.getAnnotationChainOrAnnotationChain22()) {\r\n \t\t\tNetSfTavernaT2AnnotationAnnotationAssertionImpl ann = el.getValue()\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/a0558a94c72c91bba17f8d883f89f5ea9fa08987/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "sha": "60da18a111743f25cda5c1b2e2b7defde93b9e5c",
                "status": "modified"
            }
        ],
        "message": "Avoid NPE if there are no annotations",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/ba51b695e5c5dc2ae4e7c30f372209e386bbf0d8",
        "patched_files": [
            "T2FlowParser.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestT2FlowParser.java"
        ]
    },
    "incubator-taverna-language_b306be3": {
        "bug_id": "incubator-taverna-language_b306be3",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/b306be3a318c8c3a0cefd0fcebf777ad9ffce6b5",
        "file": [
            {
                "additions": 4,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/b306be3a318c8c3a0cefd0fcebf777ad9ffce6b5/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "changes": 4,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java?ref=b306be3a318c8c3a0cefd0fcebf777ad9ffce6b5",
                "deletions": 0,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "patch": "@@ -283,6 +283,10 @@ protected void makeProfile(uk.org.taverna.scufl2.xml.t2flow.jaxb.Workflow wf) {\n \t}\r\n \r\n \tprivate URI makeRavenURI(Raven raven, String className) {\r\n+\t\tif (raven == null) {\r\n+\t\t\treturn ravenURI.resolve(\"undefined/\" + uriTools.validFilename(className));\r\n+\t\t}\r\n+\t\t\r\n \t\treturn ravenURI.resolve(uriTools.validFilename(raven.getGroup()) + \"/\"\r\n \t\t\t\t+ uriTools.validFilename(raven.getArtifact()) + \"/\"\r\n \t\t\t\t+ uriTools.validFilename(raven.getVersion()) + \"/\"\r",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/b306be3a318c8c3a0cefd0fcebf777ad9ffce6b5/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/T2FlowParser.java",
                "sha": "9ad0fd3d81cfda4e627b0a2484050529e1294d42",
                "status": "modified"
            }
        ],
        "message": "Avoid NullPointerException if no <raven> element\n\n.. as in t2flow saved from Eclipse-Taverna\n\ngit-svn-id: https://taverna.googlecode.com/svn/unsorted/scufl2/trunk@14408 bf327186-88b3-11dd-a302-d386e5130c1c",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/5403db98f0000215c605ebe8a53b745eddaf197d",
        "patched_files": [
            "T2FlowParser.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestT2FlowParser.java"
        ]
    },
    "incubator-taverna-language_c82a002": {
        "bug_id": "incubator-taverna-language_c82a002",
        "commit": "https://github.com/apache/incubator-taverna-language/commit/c82a002a5712da9efb7c5adc3b9e38cfa93e6142",
        "file": [
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/c82a002a5712da9efb7c5adc3b9e38cfa93e6142/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultdispatchstack/LoopParser.java",
                "changes": 8,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultdispatchstack/LoopParser.java?ref=c82a002a5712da9efb7c5adc3b9e38cfa93e6142",
                "deletions": 2,
                "filename": "scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultdispatchstack/LoopParser.java",
                "patch": "@@ -81,7 +81,11 @@ public Configuration parseConfiguration(T2FlowParser t2FlowParser,\n \n \t\t\n \t\t\n-\t\tString conditionXml = loopConfig.getConditionXML();\t\t\n+\t\tString conditionXml = loopConfig.getConditionXML();\t\n+\t\tif (conditionXml == null) {\n+\t\t\t// Unconfigured\n+\t\t\treturn null;\t\t\t\n+\t\t}\n \t\tActivity conditionActivity = unmarshallXml(parserState.getT2FlowParser(), conditionXml, Activity.class);\t\t\t\t\n \t\ttry {\n \t\t\tConditionalActivityParser internalParser = new ConditionalActivityParser(parserState);\n@@ -100,7 +104,7 @@ public Configuration parseConfiguration(T2FlowParser t2FlowParser,\n \t\t\tURI uriActivity = uriTools.relativeUriForBean(newActivity, parserState.getCurrentProfile());\n \t\t\tresource.addPropertyReference(scufl2Uri.resolve(\"#condition\"), uriActivity);\n \t\t} catch (JAXBException e) {\n-\t\t\tthrow new ReaderException(\"Can't parse conditional loop activity\", e);\n+\t\t\tthrow new ReaderException(\"Can't parse conditional loop activity\", e);\t\t\t\n \t\t}\n \t\t\t\n \t\treturn c;",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/c82a002a5712da9efb7c5adc3b9e38cfa93e6142/scufl2-t2flow/src/main/java/uk/org/taverna/scufl2/translator/t2flow/defaultdispatchstack/LoopParser.java",
                "sha": "a79717dd5df8c46c090c335c0db55d0d771477bf",
                "status": "modified"
            },
            {
                "additions": 55,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/c82a002a5712da9efb7c5adc3b9e38cfa93e6142/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestT2FlowParser.java",
                "changes": 88,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestT2FlowParser.java?ref=c82a002a5712da9efb7c5adc3b9e38cfa93e6142",
                "deletions": 33,
                "filename": "scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestT2FlowParser.java",
                "patch": "@@ -1,33 +1,55 @@\n-package uk.org.taverna.scufl2.translator.t2flow;\r\n-\r\n-import static org.junit.Assert.assertEquals;\r\n-import static org.junit.Assert.assertNotNull;\r\n-\r\n-import java.net.URL;\r\n-\r\n-import org.junit.Test;\r\n-\r\n-import uk.org.taverna.scufl2.api.container.WorkflowBundle;\r\n-import uk.org.taverna.scufl2.api.profiles.Profile;\r\n-\r\n-public class TestT2FlowParser {\r\n-\r\n-\tprivate static final String AS_T2FLOW = \"/as.t2flow\";\r\n-\t\r\n-\t@Test\r\n-\tpublic void readSimpleWorkflow() throws Exception {\r\n-\t\tURL wfResource = getClass().getResource(AS_T2FLOW);\r\n-\t\tassertNotNull(\"Could not find workflow \" + AS_T2FLOW, wfResource);\r\n-\t\tT2FlowParser parser = new T2FlowParser();\r\n-\t\tparser.setStrict(true);\r\n-\t\tWorkflowBundle researchObj = parser.parseT2Flow(wfResource.openStream());\r\n-\t\tProfile profile = researchObj.getMainProfile();\r\n-\t\tassertEquals(1, researchObj.getProfiles().size());\r\n-\t\tassertEquals(profile, researchObj.getProfiles().getByName(\"taverna-2.1.0\"));\r\n-\t\t\r\n-\t}\r\n-\t\r\n-\t\r\n-\r\n-\t\r\n-}\r\n+package uk.org.taverna.scufl2.translator.t2flow;\n+\n+import static org.junit.Assert.*;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+\n+import java.net.URL;\n+import java.util.List;\n+\n+import org.junit.Test;\n+\n+import uk.org.taverna.scufl2.api.common.Scufl2Tools;\n+import uk.org.taverna.scufl2.api.configurations.Configuration;\n+import uk.org.taverna.scufl2.api.container.WorkflowBundle;\n+import uk.org.taverna.scufl2.api.core.Processor;\n+import uk.org.taverna.scufl2.api.dispatchstack.DispatchStackLayer;\n+import uk.org.taverna.scufl2.api.profiles.Profile;\n+\n+public class TestT2FlowParser {\n+\n+\tprivate static final String INTERACTION_WITH_LOOP = \"/interaction-with-strange-loop.t2flow\";\n+\tprivate static final String AS_T2FLOW = \"/as.t2flow\";\n+\t\n+\t@Test\n+\tpublic void readSimpleWorkflow() throws Exception {\n+\t\tURL wfResource = getClass().getResource(AS_T2FLOW);\n+\t\tassertNotNull(\"Could not find workflow \" + AS_T2FLOW, wfResource);\n+\t\tT2FlowParser parser = new T2FlowParser();\n+\t\tparser.setStrict(true);\n+\t\tWorkflowBundle wfBundle = parser.parseT2Flow(wfResource.openStream());\n+\t\tProfile profile = wfBundle.getMainProfile();\n+\t\tassertEquals(1, wfBundle.getProfiles().size());\n+\t\tassertEquals(profile, wfBundle.getProfiles().getByName(\"taverna-2.1.0\"));\n+\t\t\n+\t}\n+\t\n+\t@Test\n+\tpublic void unconfigureLoopLayer() throws Exception {\n+\t\tURL wfResource = getClass().getResource(INTERACTION_WITH_LOOP);\n+\t\tassertNotNull(\"Could not find workflow \" + INTERACTION_WITH_LOOP, wfResource);\n+\t\tT2FlowParser parser = new T2FlowParser();\n+\t\tparser.setStrict(false);\n+\t\tWorkflowBundle wfBundle = parser.parseT2Flow(wfResource.openStream());\n+\t\tScufl2Tools scufl2Tools = new Scufl2Tools();\n+\t\tProcessor interaction = wfBundle.getMainWorkflow().getProcessors().getByName(\"BioSTIFInteraction\");\n+\t\tDispatchStackLayer loopLayer = interaction.getDispatchStack().get(2);\n+\t\tassertEquals(\"http://ns.taverna.org.uk/2010/scufl2/taverna/dispatchlayer/Loop\", \n+\t\t\t\tloopLayer.getConfigurableType().toString());\n+\t\tList<Configuration> loopConfigs = scufl2Tools.configurationsFor(loopLayer, wfBundle.getMainProfile());\n+\t\t// unconfigured\n+\t\tassertTrue(loopConfigs.isEmpty());\t\t\n+\t}\n+\n+\t\n+}",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/c82a002a5712da9efb7c5adc3b9e38cfa93e6142/scufl2-t2flow/src/test/java/uk/org/taverna/scufl2/translator/t2flow/TestT2FlowParser.java",
                "sha": "c2746c3f4e3e8aa70c6f20528fd7d2d67e6e5404",
                "status": "modified"
            },
            {
                "additions": 212,
                "blob_url": "https://github.com/apache/incubator-taverna-language/blob/c82a002a5712da9efb7c5adc3b9e38cfa93e6142/scufl2-t2flow/src/test/resources/interaction-with-strange-loop.t2flow",
                "changes": 212,
                "contents_url": "https://api.github.com/repos/apache/incubator-taverna-language/contents/scufl2-t2flow/src/test/resources/interaction-with-strange-loop.t2flow?ref=c82a002a5712da9efb7c5adc3b9e38cfa93e6142",
                "deletions": 0,
                "filename": "scufl2-t2flow/src/test/resources/interaction-with-strange-loop.t2flow",
                "patch": "@@ -0,0 +1,212 @@\n+<workflow xmlns=\"http://taverna.sf.net/2008/xml/t2flow\" version=\"1\" producedBy=\"taverna-2.4.0\"><dataflow id=\"185649fa-f9da-48a2-8941-dc6354091db4\" role=\"top\"><name>Workflow74</name><inputPorts><port><name>flag</name><depth>0</depth><granularDepth>0</granularDepth><annotations /></port></inputPorts><outputPorts><port><name>mask_id</name><annotations /></port><port><name>created</name><annotations /></port></outputPorts><processors><processor><name>BioSTIFInteraction</name><inputPorts /><outputPorts><port><name>maskID</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>interaction-activity</artifact><version>1.0.0</version></raven><class>net.sf.taverna.t2.activities.interaction.InteractionActivity</class><inputMap /><outputMap><map from=\"maskID\" to=\"maskID\" /></outputMap><configBean encoding=\"xstream\"><net.sf.taverna.t2.activities.interaction.InteractionActivityConfigurationBean xmlns=\"\">\n+  <inputs>\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\n+      <name>dataURI</name>\n+      <depth>0</depth>\n+      <mimeTypes>\n+        <string>text/plain</string>\n+      </mimeTypes>\n+      <handledReferenceSchemes />\n+      <translatedElementType>java.lang.String</translatedElementType>\n+      <allowsLiteralValues>false</allowsLiteralValues>\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\n+      <name>contentType</name>\n+      <depth>0</depth>\n+      <mimeTypes>\n+        <string>text/plain</string>\n+      </mimeTypes>\n+      <handledReferenceSchemes />\n+      <translatedElementType>java.lang.String</translatedElementType>\n+      <allowsLiteralValues>false</allowsLiteralValues>\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\n+      <name>label</name>\n+      <depth>0</depth>\n+      <mimeTypes>\n+        <string>text/plain</string>\n+      </mimeTypes>\n+      <handledReferenceSchemes />\n+      <translatedElementType>java.lang.String</translatedElementType>\n+      <allowsLiteralValues>false</allowsLiteralValues>\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\n+      <name>layer</name>\n+      <depth>0</depth>\n+      <mimeTypes>\n+        <string>text/plain</string>\n+      </mimeTypes>\n+      <handledReferenceSchemes />\n+      <translatedElementType>java.lang.String</translatedElementType>\n+      <allowsLiteralValues>false</allowsLiteralValues>\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>\n+  </inputs>\n+  <outputs>\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\n+      <name>sourceURIs</name>\n+      <depth>0</depth>\n+      <mimeTypes />\n+      <granularDepth>0</granularDepth>\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\n+      <name>sourceCopyURIs</name>\n+      <depth>0</depth>\n+      <mimeTypes />\n+      <granularDepth>0</granularDepth>\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\n+      <name>resultURIs</name>\n+      <depth>0</depth>\n+      <mimeTypes />\n+      <granularDepth>0</granularDepth>\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\n+    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\n+      <name>maskID</name>\n+      <depth>0</depth>\n+      <mimeTypes />\n+      <granularDepth>0</granularDepth>\n+    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>\n+  </outputs>\n+  <presentationOrigin>http://biovel.iais.fraunhofer.de/biostif/interaction.debug.jsp</presentationOrigin>\n+  <interactionActivityType>LocallyPresentedHtml</interactionActivityType>\n+  <progressNotification>false</progressNotification>\n+</net.sf.taverna.t2.activities.interaction.InteractionActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns=\"\">\n+  <maxJobs>1</maxJobs>\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Loop</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.LoopConfiguration xmlns=\"\">\n+  <properties />\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.LoopConfiguration></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns=\"\">\n+  <backoffFactor>1.0</backoffFactor>\n+  <initialDelay>1000</initialDelay>\n+  <maxDelay>5000</maxDelay>\n+  <maxRetries>0</maxRetries>\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross /></strategy></iteration></iterationStrategyStack></processor><processor><name>created</name><inputPorts /><outputPorts><port><name>value</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>stringconstant-activity</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.activities.stringconstant.StringConstantActivity</class><inputMap /><outputMap><map from=\"value\" to=\"value\" /></outputMap><configBean encoding=\"xstream\"><net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean xmlns=\"\">\n+  <value>1</value>\n+</net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns=\"\">\n+  <maxJobs>1</maxJobs>\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding=\"xstream\"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns=\"\">\n+  <backoffFactor>1.0</backoffFactor>\n+  <initialDelay>1000</initialDelay>\n+  <maxDelay>5000</maxDelay>\n+  <maxRetries>0</maxRetries>\n+</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.4</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding=\"xstream\"><null xmlns=\"\" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy /></iteration></iterationStrategyStack></processor></processors><conditions /><datalinks><datalink><sink type=\"dataflow\"><port>mask_id</port></sink><source type=\"processor\"><processor>BioSTIFInteraction</processor><port>maskID</port></source></datalink><datalink><sink type=\"dataflow\"><port>created</port></sink><source type=\"processor\"><processor>created</processor><port>value</port></source></datalink></datalinks><annotations><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>dc87f7e5-6333-499d-9b33-7d1ca0b7b1b9</identification>\n+      </annotationBean>\n+      <date>2012-12-19 13:13:08.837 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>b529d630-93fa-4381-bc15-22c706a40564</identification>\n+      </annotationBean>\n+      <date>2012-12-19 13:12:19.329 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>28c20604-adbb-40a0-b22c-b901894a06ab</identification>\n+      </annotationBean>\n+      <date>2012-12-07 18:06:36.700 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>c85532d6-3fad-4a55-acc0-53e1785c3396</identification>\n+      </annotationBean>\n+      <date>2012-12-07 19:09:14.619 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>4acb2e1a-3d6d-4c6d-ae3d-8bd02f3083f9</identification>\n+      </annotationBean>\n+      <date>2012-12-07 17:48:04.813 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>e86b8475-20a4-4c99-a719-e55cfee24de7</identification>\n+      </annotationBean>\n+      <date>2012-12-07 19:18:34.1 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>ff7441b8-050c-4ace-a306-19f8d65d3d05</identification>\n+      </annotationBean>\n+      <date>2012-12-07 19:10:12.606 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>185649fa-f9da-48a2-8941-dc6354091db4</identification>\n+      </annotationBean>\n+      <date>2012-12-19 18:03:16.733 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>1192812b-ff79-42ac-a88d-25e2e9522298</identification>\n+      </annotationBean>\n+      <date>2012-12-07 19:42:21.20 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>78a253fd-4c6f-4c2e-bf00-4d31f1b84ce0</identification>\n+      </annotationBean>\n+      <date>2012-12-07 17:51:52.894 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2><annotation_chain_2_2 encoding=\"xstream\"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns=\"\">\n+  <annotationAssertions>\n+    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+      <annotationBean class=\"net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion\">\n+        <identification>82d3bff2-13c4-4c98-be7e-0588dd612cdd</identification>\n+      </annotationBean>\n+      <date>2012-12-07 19:12:35.324 UTC</date>\n+      <creators />\n+      <curationEventList />\n+    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>\n+  </annotationAssertions>\n+</net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain_2_2></annotations></dataflow></workflow>\n\\ No newline at end of file",
                "raw_url": "https://github.com/apache/incubator-taverna-language/raw/c82a002a5712da9efb7c5adc3b9e38cfa93e6142/scufl2-t2flow/src/test/resources/interaction-with-strange-loop.t2flow",
                "sha": "39c2d0c3f18e6c3d5683c79cef7d74af459f85b1",
                "status": "added"
            }
        ],
        "message": "SCUFL2-123 Avoid NPE on unconfigured loop layer",
        "parent": "https://github.com/apache/incubator-taverna-language/commit/a7127e7776dc5bbbf5c57f557701274849e43904",
        "patched_files": [
            "LoopParser.java",
            "T2FlowParser.java",
            "interaction-with-strange-loop.java"
        ],
        "repo": "incubator-taverna-language",
        "unit_tests": [
            "TestT2FlowParser.java"
        ]
    }
}