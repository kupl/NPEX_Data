{
    "sling-org-apache-sling-security_7cd29a5": {
        "bug_id": "sling-org-apache-sling-security_7cd29a5",
        "commit": "https://github.com/apache/sling-org-apache-sling-security/commit/7cd29a5b33ea8f2128484b383b5c8bddd9f18ffe",
        "file": [
            {
                "additions": 16,
                "blob_url": "https://github.com/apache/sling-org-apache-sling-security/blob/7cd29a5b33ea8f2128484b383b5c8bddd9f18ffe/src/main/java/org/apache/sling/security/impl/ContentDispositionFilter.java",
                "changes": 28,
                "contents_url": "https://api.github.com/repos/apache/sling-org-apache-sling-security/contents/src/main/java/org/apache/sling/security/impl/ContentDispositionFilter.java?ref=7cd29a5b33ea8f2128484b383b5c8bddd9f18ffe",
                "deletions": 12,
                "filename": "src/main/java/org/apache/sling/security/impl/ContentDispositionFilter.java",
                "patch": "@@ -283,19 +283,23 @@ private boolean setContentDisposition(Resource resource) {\n         \n         private boolean isJcrData(Resource resource){\n             boolean jcrData = false;\n-            if (resource!= null) {\n-                ValueMap props = resource.adaptTo(ValueMap.class);\n-                if (props != null && props.containsKey(PROP_JCR_DATA) ) {\n-                    jcrData = true;\n-                } else {\n-                    Resource jcrContent = resource.getChild(JCR_CONTENT_LEAF);\n-                    if (jcrContent!= null) {\n-                        props = jcrContent.adaptTo(ValueMap.class);\n-                        if (props != null && props.containsKey(PROP_JCR_DATA) ) {\n-                            jcrData = true;\n+            try {\n+                if (resource!= null) {\n+                    ValueMap props = resource.adaptTo(ValueMap.class);\n+                    if (props != null && props.containsKey(PROP_JCR_DATA) ) {\n+                        jcrData = true;\n+                    } else {\n+                        Resource jcrContent = resource.getChild(JCR_CONTENT_LEAF);\n+                        if (jcrContent!= null) {\n+                            props = jcrContent.adaptTo(ValueMap.class);\n+                            if (props != null && props.containsKey(PROP_JCR_DATA) ) {\n+                                jcrData = true;\n+                            }\n                         }\n-                    }\n-                }     \n+                    }     \n+                }\n+            } catch (Exception e) {\n+                logger.error(\"Exception in isJcrData\", e);\n             }\n             return jcrData;\n         }",
                "raw_url": "https://github.com/apache/sling-org-apache-sling-security/raw/7cd29a5b33ea8f2128484b383b5c8bddd9f18ffe/src/main/java/org/apache/sling/security/impl/ContentDispositionFilter.java",
                "sha": "34e78714367d8a611328252a24fbd875ee5b1970",
                "status": "modified"
            }
        ],
        "message": "SLING-4982 - NPE in ContentDispositionFilter\n\ngit-svn-id: https://svn.apache.org/repos/asf/sling/trunk@1700426 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/sling-org-apache-sling-security/commit/1fa2f4de0a375a7d93338c7d6d640867590fefd3",
        "repo": "sling-org-apache-sling-security",
        "unit_tests": [
            "ContentDispositionFilterTest.java"
        ]
    }
}