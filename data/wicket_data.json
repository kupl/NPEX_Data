[{"commit": "https://github.com/apache/wicket/commit/922d56236157b3356c9eba7a43aed8c838b0b4e2", "parent": "https://github.com/apache/wicket/commit/869ff926557468b23032ca78e1503ecd530e9aac", "message": "WICKET-6493 WebSocket SessionIds are wrong (HttpSession one used instead of Websocket one) + NPE if no HttpSession is found during Handshake Request", "bug_id": "wicket_1", "file": [{"additions": 9, "raw_url": "https://github.com/apache/wicket/raw/922d56236157b3356c9eba7a43aed8c838b0b4e2/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java", "blob_url": "https://github.com/apache/wicket/blob/922d56236157b3356c9eba7a43aed8c838b0b4e2/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java", "sha": "ca3569d63a39727e6a6a4cc2430ac1e1f64f6253", "changes": 11, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java?ref=922d56236157b3356c9eba7a43aed8c838b0b4e2", "patch": "@@ -17,6 +17,7 @@\n package org.apache.wicket.protocol.ws.api;\n \n import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpSession;\n \n import org.apache.wicket.Application;\n import org.apache.wicket.MarkupContainer;\n@@ -95,13 +96,19 @@\n \t * Constructor.\n \t *\n \t * @param request\n-\t *      the http request that was used to create the TomcatWebSocketProcessor\n+\t *      the http request that was used to create this {@link IWebSocketProcessor}\n \t * @param application\n \t *      the current Wicket Application\n \t */\n \tpublic AbstractWebSocketProcessor(final HttpServletRequest request, final WebApplication application)\n \t{\n-\t\tthis.sessionId = request.getSession(true).getId();\n+\t\tfinal HttpSession httpSession = request.getSession(true);\n+\t\tif (httpSession == null)\n+\t\t{\n+\t\t\tthrow new IllegalStateException(\"There is no HTTP Session bound. Without a session Wicket won't be \" +\n+\t\t\t\t\t\"able to find the stored page to update its components\");\n+\t\t}\n+\t\tthis.sessionId = httpSession.getId();\n \t\tString pageId = request.getParameter(\"pageId\");\n \t\tthis.resourceName = request.getParameter(\"resourceName\");\n \t\tif (Strings.isEmpty(pageId) && Strings.isEmpty(resourceName))", "filename": "wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java"}, {"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/922d56236157b3356c9eba7a43aed8c838b0b4e2/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/registry/IWebSocketConnectionRegistry.java", "blob_url": "https://github.com/apache/wicket/blob/922d56236157b3356c9eba7a43aed8c838b0b4e2/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/registry/IWebSocketConnectionRegistry.java", "sha": "2782a93b01c0113e19fa6629c68ead94761e7760", "changes": 7, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/registry/IWebSocketConnectionRegistry.java?ref=922d56236157b3356c9eba7a43aed8c838b0b4e2", "patch": "@@ -32,7 +32,7 @@\n \t * @param application\n \t *      the web application to look in\n \t * @param sessionId\n-\t *      the web socket client session id\n+\t *      the http session id\n \t * @param key\n \t *      the web socket client key\n \t * @return the web socket connection used by a client from the specified coordinates\n@@ -43,6 +43,7 @@\n \t * @param application\n \t *            the web application to look in\n \t * @param sessionId\n+\t *            the http session id\n \t * @return collection of web socket connection used by a client with the given session id\n \t */\n \tCollection<IWebSocketConnection> getConnections(Application application, String sessionId);\n@@ -61,7 +62,7 @@\n \t * @param application\n \t *      the web application to look in\n \t * @param sessionId\n-\t *      the web socket client session id\n+\t *      the http session id\n \t * @param key\n \t *      the web socket client key\n \t * @param connection\n@@ -75,7 +76,7 @@\n \t * @param application\n \t *      the web application to look in\n \t * @param sessionId\n-\t *      the web socket client session id\n+\t *      the http session id\n \t * @param key\n \t *      the web socket client key\n \t */", "filename": "wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/registry/IWebSocketConnectionRegistry.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/573fdf5739fb8a82223b54d551c343687b3aab35", "parent": "https://github.com/apache/wicket/commit/9e4c97cd6974484cb2fe6781ad85d6dfd6266e68", "message": "WICKET-6400 Object with array property fails on NPE when construction JSON object", "bug_id": "wicket_2", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/573fdf5739fb8a82223b54d551c343687b3aab35/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/573fdf5739fb8a82223b54d551c343687b3aab35/pom.xml", "sha": "ec0b72697761de931d923f2c031594858d9601d3", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/pom.xml?ref=573fdf5739fb8a82223b54d551c343687b3aab35", "patch": "@@ -434,7 +434,7 @@\n \t\t\t<dependency>\n \t\t\t\t<groupId>com.github.openjson</groupId>\n \t\t\t\t<artifactId>openjson</artifactId>\n-\t\t\t\t<version>1.0.6</version>\n+\t\t\t\t<version>1.0.7</version>\n \t\t\t\t<type>jar</type>\n \t\t\t</dependency>\n \t\t\t<dependency>", "filename": "pom.xml"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/3dd37b3fb67a44cc44390848d18a96ebd3db220e", "parent": "https://github.com/apache/wicket/commit/5c5490dafbc29748abfda0441e002fe456c1ff31", "message": "WICKET-5912 NPE in Page#hasInvisibleTransparentChild", "bug_id": "wicket_3", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/3dd37b3fb67a44cc44390848d18a96ebd3db220e/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java", "blob_url": "https://github.com/apache/wicket/blob/3dd37b3fb67a44cc44390848d18a96ebd3db220e/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java", "sha": "c01b90e4e56a54735917313c4c0ce8cc91a77dfa", "changes": 9, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java?ref=3dd37b3fb67a44cc44390848d18a96ebd3db220e", "patch": "@@ -727,8 +727,8 @@ public MarkupContainer replace(final Component child)\n \n \t\tif (child.getParent() != this)\n \t\t{\n-\t\t\t// Add to map\n-\t\t\tfinal Component replaced = put(child);\n+\t\t\t// Get the child component to replace\n+\t\t\tfinal Component replaced = children_get(child.getId());\n \n \t\t\t// Look up to make sure it was already in the map\n \t\t\tif (replaced == null)\n@@ -737,7 +737,10 @@ public MarkupContainer replace(final Component child)\n \t\t\t\t\texceptionMessage(\"Cannot replace a component which has not been added: id='\" +\n \t\t\t\t\t\tchild.getId() + \"', component=\" + child));\n \t\t\t}\n-\n+\t\t\t\n+\t\t\t// Add to map\n+\t\t\tput(child);\n+\t\t\t\n \t\t\t// first remove the component.\n \t\t\tremovedComponent(replaced);\n ", "filename": "wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/4b8ac4c8cc14f2926312e2572fee4299256e7b11", "parent": "https://github.com/apache/wicket/commit/39d7ac1f80c4ea5366e91eb0fd6deceb219e1b26", "message": "WICKET-6483 JavaxUpgradeHttpRequest can cause NullPointerException\n\nWICKET-6493 WebSocket SessionIds are wrong (HttpSession one used instead of Websocket one) + NPE if no HttpSession is found during Handshake Request\n\nRevert the change to use 'request.getSession(false) because this breaks WicketTester/WebSocketTester infrastructure", "bug_id": "wicket_4", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/4b8ac4c8cc14f2926312e2572fee4299256e7b11/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java", "blob_url": "https://github.com/apache/wicket/blob/4b8ac4c8cc14f2926312e2572fee4299256e7b11/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java", "sha": "ca3569d63a39727e6a6a4cc2430ac1e1f64f6253", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java?ref=4b8ac4c8cc14f2926312e2572fee4299256e7b11", "patch": "@@ -102,7 +102,7 @@\n \t */\n \tpublic AbstractWebSocketProcessor(final HttpServletRequest request, final WebApplication application)\n \t{\n-\t\tfinal HttpSession httpSession = request.getSession(false);\n+\t\tfinal HttpSession httpSession = request.getSession(true);\n \t\tif (httpSession == null)\n \t\t{\n \t\t\tthrow new IllegalStateException(\"There is no HTTP Session bound. Without a session Wicket won't be \" +", "filename": "wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/4b8ac4c8cc14f2926312e2572fee4299256e7b11/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/util/tester/WebSocketTester.java", "blob_url": "https://github.com/apache/wicket/blob/4b8ac4c8cc14f2926312e2572fee4299256e7b11/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/util/tester/WebSocketTester.java", "sha": "f83894f77921f632724c199cfcd8e7c33571c901", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/util/tester/WebSocketTester.java?ref=4b8ac4c8cc14f2926312e2572fee4299256e7b11", "patch": "@@ -39,7 +39,7 @@\n \n \t/**\n \t * Constructor.\n-\t * Prepares a WebSockConnection that will be used to send messages from the client (the test case)\n+\t * Prepares a WebSocketConnection that will be used to send messages from the client (the test case)\n \t * to the server.\n \t *\n \t * @param page", "filename": "wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/util/tester/WebSocketTester.java"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/4b8ac4c8cc14f2926312e2572fee4299256e7b11/wicket-native-websocket/wicket-native-websocket-core/src/test/java/org/apache/wicket/protocol/ws/util/tester/WebSocketTesterProcessorTest.java", "blob_url": "https://github.com/apache/wicket/blob/4b8ac4c8cc14f2926312e2572fee4299256e7b11/wicket-native-websocket/wicket-native-websocket-core/src/test/java/org/apache/wicket/protocol/ws/util/tester/WebSocketTesterProcessorTest.java", "sha": "0a7dd1041ef8b0d4859042dd57bcca4986437c2d", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-core/src/test/java/org/apache/wicket/protocol/ws/util/tester/WebSocketTesterProcessorTest.java?ref=4b8ac4c8cc14f2926312e2572fee4299256e7b11", "patch": "@@ -100,7 +100,6 @@ public void onConnectNoOrigin()\n \t\tassertTrue(TestWebSocketResource.ON_ABORT_CALLED.get());\n \t}\n \n-//\t@Ignore\n \t@Test\n \tpublic void onConnectMultipleOrigins()\n \t{", "filename": "wicket-native-websocket/wicket-native-websocket-core/src/test/java/org/apache/wicket/protocol/ws/util/tester/WebSocketTesterProcessorTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/b3f0862602043ef8889a149dda77e20e010a4f22", "parent": "https://github.com/apache/wicket/commit/bf118fbf67ab4d8f39aba57ddca746390eb07b8a", "message": "Fixed nagging NPE in Eclipse while importing Wicket\nEclipse gives a nasty NPE when importing wicket projects in M2E lifecycle\nmappings. Removing the submodule m2e lifecycle mapping definitions should\nwork better, as the NPE is related to double definitions of the plugin.", "bug_id": "wicket_5", "file": [{"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/archetypes/quickstart/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/archetypes/quickstart/pom.xml", "sha": "c0039cf2777d7492acc668e03060d15132fe1dc3", "changes": 34, "status": "modified", "deletions": 34, "contents_url": "https://api.github.com/repos/apache/wicket/contents/archetypes/quickstart/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -49,39 +49,5 @@\n \t\t\t\t<artifactId>maven-archetype-plugin</artifactId>\n \t\t\t</plugin>\n \t\t</plugins>\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n \t</build>\n </project>", "filename": "archetypes/quickstart/pom.xml"}, {"additions": 53, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/pom.xml", "sha": "765080a1d69c8d856954e67dfb2ed7ff7ac5def5", "changes": 53, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -910,6 +910,19 @@\n \t\t\t\t\t<configuration>\n \t\t\t\t\t\t<lifecycleMappingMetadata>\n \t\t\t\t\t\t\t<pluginExecutions>\n+\t\t\t\t\t\t\t\t<pluginExecution>\n+\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n+\t\t\t\t\t\t\t\t\t\t<groupId>net.alchim31.maven</groupId>\n+\t\t\t\t\t\t\t\t\t\t<artifactId>yuicompressor-maven-plugin</artifactId>\n+\t\t\t\t\t\t\t\t\t\t<versionRange>[1.3.0,)</versionRange>\n+\t\t\t\t\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t\t\t\t\t<goal>compress</goal>\n+\t\t\t\t\t\t\t\t\t\t</goals>\n+\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n+\t\t\t\t\t\t\t\t\t<action>\n+\t\t\t\t\t\t\t\t\t\t<ignore />\n+\t\t\t\t\t\t\t\t\t</action>\n+\t\t\t\t\t\t\t\t</pluginExecution>\n \t\t\t\t\t\t\t\t<pluginExecution>\n \t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n \t\t\t\t\t\t\t\t\t\t<groupId>org.codehaus.mojo</groupId>\n@@ -923,6 +936,46 @@\n \t\t\t\t\t\t\t\t\t\t<ignore/>\n \t\t\t\t\t\t\t\t\t</action>\n \t\t\t\t\t\t\t\t</pluginExecution>\n+\t\t\t\t\t\t\t\t<pluginExecution>\n+\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n+\t\t\t\t\t\t\t\t\t\t<groupId>org.apache.felix</groupId>\n+\t\t\t\t\t\t\t\t\t\t<artifactId>maven-bundle-plugin</artifactId>\n+\t\t\t\t\t\t\t\t\t\t<versionRange>[2.3.7,)</versionRange>\n+\t\t\t\t\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n+\t\t\t\t\t\t\t\t\t\t</goals>\n+\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n+\t\t\t\t\t\t\t\t\t<action>\n+\t\t\t\t\t\t\t\t\t\t<ignore />\n+\t\t\t\t\t\t\t\t\t</action>\n+\t\t\t\t\t\t\t\t</pluginExecution>\n+\t\t\t\t\t\t\t\t<pluginExecution>\n+\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n+\t\t\t\t\t\t\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n+\t\t\t\t\t\t\t\t\t\t<artifactId>maven-enforcer-plugin</artifactId>\n+\t\t\t\t\t\t\t\t\t\t<versionRange>[1.0.0,)</versionRange>\n+\t\t\t\t\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t\t\t\t\t<goal>enforce</goal>\n+\t\t\t\t\t\t\t\t\t\t</goals>\n+\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n+\t\t\t\t\t\t\t\t\t<action>\n+\t\t\t\t\t\t\t\t\t\t<ignore />\n+\t\t\t\t\t\t\t\t\t</action>\n+\t\t\t\t\t\t\t\t</pluginExecution>\n+\t\t                        <pluginExecution>\n+\t\t                            <pluginExecutionFilter>\n+\t\t                                <groupId>org.apache.maven.plugins</groupId>\n+\t\t                                <artifactId>maven-remote-resources-plugin</artifactId>\n+\t\t                                <versionRange>[1.0,)</versionRange>\n+\t\t                                <goals>\n+\t\t                                    <goal>process</goal>\n+\t\t                                </goals>\n+\t\t                            </pluginExecutionFilter>\n+\t\t                            <action>\n+\t\t                                <ignore>\n+\t\t                                </ignore>\n+\t\t                            </action>\n+\t\t                        </pluginExecution>\n \t\t\t\t\t\t\t</pluginExecutions>\n \t\t\t\t\t\t</lifecycleMappingMetadata>\n \t\t\t\t\t</configuration>", "filename": "pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/testing/wicket-common-tests/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/testing/wicket-common-tests/pom.xml", "sha": "60667c58ba52804a326ee4972f78b7642fa577c5", "changes": 30, "status": "modified", "deletions": 30, "contents_url": "https://api.github.com/repos/apache/wicket/contents/testing/wicket-common-tests/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -146,36 +146,6 @@\n     \t\t\t\t\t<skip>true</skip>\n     \t\t\t\t</configuration>\n     \t\t\t</plugin>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n \t\t\t</plugins>\n \t\t</pluginManagement>\n \t</build>", "filename": "testing/wicket-common-tests/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-auth-roles/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-auth-roles/pom.xml", "sha": "6038b03196d501bab3fef7b164ee38e82f492ae4", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-auth-roles/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -36,40 +36,4 @@\n \t\t\t<artifactId>wicket-core</artifactId>\n \t\t</dependency>\n \t</dependencies>\n-\t<build>\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n-\t</build>\n </project>", "filename": "wicket-auth-roles/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-core/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-core/pom.xml", "sha": "7d3d98ce3e21849a257dfb008910aa3c4136b686", "changes": 49, "status": "modified", "deletions": 49, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -89,55 +89,6 @@\n     \t\t\t\t\t</excludes>\n     \t\t\t\t</configuration>\n     \t\t\t</plugin>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\tnet.alchim31.maven\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tyuicompressor-maven-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[1.3.0,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>compress</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n \t\t\t</plugins>\n \t\t</pluginManagement>\n \t</build>", "filename": "wicket-core/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-datetime/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-datetime/pom.xml", "sha": "5856f3b208af220cb0451326e2015ab8fef65644", "changes": 34, "status": "modified", "deletions": 34, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-datetime/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -60,39 +60,5 @@\n \t\t\t\t</executions>\n \t\t\t</plugin>\n \t\t</plugins>\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n \t</build>\n </project>", "filename": "wicket-datetime/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-devutils/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-devutils/pom.xml", "sha": "1bffb84568facb7a3d3e38bbd70d571fa45af68c", "changes": 30, "status": "modified", "deletions": 30, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-devutils/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -51,36 +51,6 @@\n \t\t\t\t\t\t<skip>true</skip>\n \t\t\t\t\t</configuration>\n \t\t\t\t</plugin>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n \t\t\t</plugins>\n \t\t</pluginManagement>\n \t</build>", "filename": "wicket-devutils/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-examples/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-examples/pom.xml", "sha": "eb20aca9dad37944dac2526771b56a515615e640", "changes": 30, "status": "modified", "deletions": 30, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-examples/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -255,36 +255,6 @@\n     \t\t\t\t\t</archive>\n     \t\t\t\t</configuration>\n     \t\t\t</plugin>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n     \t\t\t<plugin>\n     \t\t\t\t<groupId>org.mortbay.jetty</groupId>\n     \t\t\t\t<artifactId>jetty-maven-plugin</artifactId>", "filename": "wicket-examples/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-experimental/wicket-atmosphere/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-experimental/wicket-atmosphere/pom.xml", "sha": "a6ec90add0550397d0deabdce9386962ab05d371", "changes": 53, "status": "modified", "deletions": 53, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-experimental/wicket-atmosphere/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -117,58 +117,5 @@\n                 <artifactId>yuicompressor-maven-plugin</artifactId>\n             </plugin>\n         </plugins>\n-        <pluginManagement>\n-        \t<plugins>\n-        \t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-        \t\t<plugin>\n-        \t\t\t<groupId>org.eclipse.m2e</groupId>\n-        \t\t\t<artifactId>lifecycle-mapping</artifactId>\n-        \t\t\t<configuration>\n-        \t\t\t\t<lifecycleMappingMetadata>\n-        \t\t\t\t\t<pluginExecutions>\n-        \t\t\t\t\t\t<pluginExecution>\n-        \t\t\t\t\t\t\t<pluginExecutionFilter>\n-        \t\t\t\t\t\t\t\t<groupId>\n-        \t\t\t\t\t\t\t\t\torg.apache.felix\n-        \t\t\t\t\t\t\t\t</groupId>\n-        \t\t\t\t\t\t\t\t<artifactId>\n-        \t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-        \t\t\t\t\t\t\t\t</artifactId>\n-        \t\t\t\t\t\t\t\t<versionRange>\n-        \t\t\t\t\t\t\t\t\t[2.3.7,)\n-        \t\t\t\t\t\t\t\t</versionRange>\n-        \t\t\t\t\t\t\t\t<goals>\n-        \t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-        \t\t\t\t\t\t\t\t</goals>\n-        \t\t\t\t\t\t\t</pluginExecutionFilter>\n-        \t\t\t\t\t\t\t<action>\n-        \t\t\t\t\t\t\t\t<ignore />\n-        \t\t\t\t\t\t\t</action>\n-        \t\t\t\t\t\t</pluginExecution>\n-        \t\t\t\t\t\t<pluginExecution>\n-        \t\t\t\t\t\t\t<pluginExecutionFilter>\n-        \t\t\t\t\t\t\t\t<groupId>\n-        \t\t\t\t\t\t\t\t\tnet.alchim31.maven\n-        \t\t\t\t\t\t\t\t</groupId>\n-        \t\t\t\t\t\t\t\t<artifactId>\n-        \t\t\t\t\t\t\t\t\tyuicompressor-maven-plugin\n-        \t\t\t\t\t\t\t\t</artifactId>\n-        \t\t\t\t\t\t\t\t<versionRange>\n-        \t\t\t\t\t\t\t\t\t[1.3.0,)\n-        \t\t\t\t\t\t\t\t</versionRange>\n-        \t\t\t\t\t\t\t\t<goals>\n-        \t\t\t\t\t\t\t\t\t<goal>compress</goal>\n-        \t\t\t\t\t\t\t\t</goals>\n-        \t\t\t\t\t\t\t</pluginExecutionFilter>\n-        \t\t\t\t\t\t\t<action>\n-        \t\t\t\t\t\t\t\t<ignore />\n-        \t\t\t\t\t\t\t</action>\n-        \t\t\t\t\t\t</pluginExecution>\n-        \t\t\t\t\t</pluginExecutions>\n-        \t\t\t\t</lifecycleMappingMetadata>\n-        \t\t\t</configuration>\n-        \t\t</plugin>\n-        \t</plugins>\n-        </pluginManagement>\n     </build>\n </project>", "filename": "wicket-experimental/wicket-atmosphere/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-extensions/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-extensions/pom.xml", "sha": "f643a28b5a3e3f23d03b26653d353670d1fdb9d0", "changes": 53, "status": "modified", "deletions": 53, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-extensions/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -45,58 +45,5 @@\n                 <artifactId>yuicompressor-maven-plugin</artifactId>\n             </plugin>\n         </plugins>\n-        <pluginManagement>\n-        \t<plugins>\n-        \t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-        \t\t<plugin>\n-        \t\t\t<groupId>org.eclipse.m2e</groupId>\n-        \t\t\t<artifactId>lifecycle-mapping</artifactId>\n-        \t\t\t<configuration>\n-        \t\t\t\t<lifecycleMappingMetadata>\n-        \t\t\t\t\t<pluginExecutions>\n-        \t\t\t\t\t\t<pluginExecution>\n-        \t\t\t\t\t\t\t<pluginExecutionFilter>\n-        \t\t\t\t\t\t\t\t<groupId>\n-        \t\t\t\t\t\t\t\t\torg.apache.felix\n-        \t\t\t\t\t\t\t\t</groupId>\n-        \t\t\t\t\t\t\t\t<artifactId>\n-        \t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-        \t\t\t\t\t\t\t\t</artifactId>\n-        \t\t\t\t\t\t\t\t<versionRange>\n-        \t\t\t\t\t\t\t\t\t[2.3.7,)\n-        \t\t\t\t\t\t\t\t</versionRange>\n-        \t\t\t\t\t\t\t\t<goals>\n-        \t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-        \t\t\t\t\t\t\t\t</goals>\n-        \t\t\t\t\t\t\t</pluginExecutionFilter>\n-        \t\t\t\t\t\t\t<action>\n-        \t\t\t\t\t\t\t\t<ignore />\n-        \t\t\t\t\t\t\t</action>\n-        \t\t\t\t\t\t</pluginExecution>\n-        \t\t\t\t\t\t<pluginExecution>\n-        \t\t\t\t\t\t\t<pluginExecutionFilter>\n-        \t\t\t\t\t\t\t\t<groupId>\n-        \t\t\t\t\t\t\t\t\tnet.alchim31.maven\n-        \t\t\t\t\t\t\t\t</groupId>\n-        \t\t\t\t\t\t\t\t<artifactId>\n-        \t\t\t\t\t\t\t\t\tyuicompressor-maven-plugin\n-        \t\t\t\t\t\t\t\t</artifactId>\n-        \t\t\t\t\t\t\t\t<versionRange>\n-        \t\t\t\t\t\t\t\t\t[1.3.0,)\n-        \t\t\t\t\t\t\t\t</versionRange>\n-        \t\t\t\t\t\t\t\t<goals>\n-        \t\t\t\t\t\t\t\t\t<goal>compress</goal>\n-        \t\t\t\t\t\t\t\t</goals>\n-        \t\t\t\t\t\t\t</pluginExecutionFilter>\n-        \t\t\t\t\t\t\t<action>\n-        \t\t\t\t\t\t\t\t<ignore />\n-        \t\t\t\t\t\t\t</action>\n-        \t\t\t\t\t\t</pluginExecution>\n-        \t\t\t\t\t</pluginExecutions>\n-        \t\t\t\t</lifecycleMappingMetadata>\n-        \t\t\t</configuration>\n-        \t\t</plugin>\n-        \t</plugins>\n-        </pluginManagement>\n     </build>\n </project>", "filename": "wicket-extensions/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-guice/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-guice/pom.xml", "sha": "fd291eb7cd0320f322b5fb943adea7fd26b14251", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-guice/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -44,40 +44,4 @@\n \t\t\t<artifactId>wicket-ioc</artifactId>\n \t\t</dependency>\n \t</dependencies>\n-\t<build>\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n-\t</build>\n </project>", "filename": "wicket-guice/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-ioc/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-ioc/pom.xml", "sha": "09714f7a3ca285a14b8c3157b2fd5066dba9492e", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-ioc/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -53,40 +53,4 @@\n \t\t\t<artifactId>mockito-core</artifactId>\n \t\t</dependency>\n \t</dependencies>\n-\t<build>\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n-\t</build>\n </project>", "filename": "wicket-ioc/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-jmx/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-jmx/pom.xml", "sha": "e89f50241d412a8744b4e476b1895b0967f25e81", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-jmx/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -37,40 +37,4 @@\n \t\t\t<artifactId>wicket-core</artifactId>\n \t\t</dependency>\n \t</dependencies>\n-\t<build>\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n-\t</build>\n </project>", "filename": "wicket-jmx/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-native-websocket/wicket-native-websocket-core/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-native-websocket/wicket-native-websocket-core/pom.xml", "sha": "23213bdac6257a4f215662ff6faede8e07be1a18", "changes": 37, "status": "modified", "deletions": 37, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-core/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -42,41 +42,4 @@\n         </dependency>\n \n     </dependencies>\n-\n-    <build>\n-    \t<pluginManagement>\n-    \t\t<plugins>\n-    \t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-    \t\t\t<plugin>\n-    \t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-    \t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-    \t\t\t\t<configuration>\n-    \t\t\t\t\t<lifecycleMappingMetadata>\n-    \t\t\t\t\t\t<pluginExecutions>\n-    \t\t\t\t\t\t\t<pluginExecution>\n-    \t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-    \t\t\t\t\t\t\t\t\t<groupId>\n-    \t\t\t\t\t\t\t\t\t\torg.apache.felix\n-    \t\t\t\t\t\t\t\t\t</groupId>\n-    \t\t\t\t\t\t\t\t\t<artifactId>\n-    \t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-    \t\t\t\t\t\t\t\t\t</artifactId>\n-    \t\t\t\t\t\t\t\t\t<versionRange>\n-    \t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-    \t\t\t\t\t\t\t\t\t</versionRange>\n-    \t\t\t\t\t\t\t\t\t<goals>\n-    \t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-    \t\t\t\t\t\t\t\t\t</goals>\n-    \t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-    \t\t\t\t\t\t\t\t<action>\n-    \t\t\t\t\t\t\t\t\t<ignore />\n-    \t\t\t\t\t\t\t\t</action>\n-    \t\t\t\t\t\t\t</pluginExecution>\n-    \t\t\t\t\t\t</pluginExecutions>\n-    \t\t\t\t\t</lifecycleMappingMetadata>\n-    \t\t\t\t</configuration>\n-    \t\t\t</plugin>\n-    \t\t</plugins>\n-    \t</pluginManagement>\n-    </build>\n </project>", "filename": "wicket-native-websocket/wicket-native-websocket-core/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-native-websocket/wicket-native-websocket-jetty/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-native-websocket/wicket-native-websocket-jetty/pom.xml", "sha": "7eed130e866b7f53146c6c0f371c2edf39757d1f", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-jetty/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -47,40 +47,4 @@\n             <artifactId>wicket-native-websocket-core</artifactId>\n         </dependency>\n     </dependencies>\n-    <build>\n-    \t<pluginManagement>\n-    \t\t<plugins>\n-    \t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-    \t\t\t<plugin>\n-    \t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-    \t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-    \t\t\t\t<configuration>\n-    \t\t\t\t\t<lifecycleMappingMetadata>\n-    \t\t\t\t\t\t<pluginExecutions>\n-    \t\t\t\t\t\t\t<pluginExecution>\n-    \t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-    \t\t\t\t\t\t\t\t\t<groupId>\n-    \t\t\t\t\t\t\t\t\t\torg.apache.felix\n-    \t\t\t\t\t\t\t\t\t</groupId>\n-    \t\t\t\t\t\t\t\t\t<artifactId>\n-    \t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-    \t\t\t\t\t\t\t\t\t</artifactId>\n-    \t\t\t\t\t\t\t\t\t<versionRange>\n-    \t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-    \t\t\t\t\t\t\t\t\t</versionRange>\n-    \t\t\t\t\t\t\t\t\t<goals>\n-    \t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-    \t\t\t\t\t\t\t\t\t</goals>\n-    \t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-    \t\t\t\t\t\t\t\t<action>\n-    \t\t\t\t\t\t\t\t\t<ignore />\n-    \t\t\t\t\t\t\t\t</action>\n-    \t\t\t\t\t\t\t</pluginExecution>\n-    \t\t\t\t\t\t</pluginExecutions>\n-    \t\t\t\t\t</lifecycleMappingMetadata>\n-    \t\t\t\t</configuration>\n-    \t\t\t</plugin>\n-    \t\t</plugins>\n-    \t</pluginManagement>\n-    </build>\n </project>", "filename": "wicket-native-websocket/wicket-native-websocket-jetty/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-native-websocket/wicket-native-websocket-jetty9/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-native-websocket/wicket-native-websocket-jetty9/pom.xml", "sha": "79457e2400444ef4ea6ede6c54b24d8a833f9edb", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-jetty9/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -47,40 +47,4 @@\n \t\t\t<artifactId>wicket-native-websocket-core</artifactId>\n \t\t</dependency>\n \t</dependencies>\n-\t<build>\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n-\t</build>\n </project>", "filename": "wicket-native-websocket/wicket-native-websocket-jetty9/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-native-websocket/wicket-native-websocket-tomcat/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-native-websocket/wicket-native-websocket-tomcat/pom.xml", "sha": "dc42742a699e8eb7385610f95758a538c0ac8fc3", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-tomcat/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -60,40 +60,4 @@\n             <artifactId>wicket-native-websocket-core</artifactId>\n         </dependency>\n     </dependencies>\n-    <build>\n-    \t<pluginManagement>\n-    \t\t<plugins>\n-    \t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-    \t\t\t<plugin>\n-    \t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-    \t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-    \t\t\t\t<configuration>\n-    \t\t\t\t\t<lifecycleMappingMetadata>\n-    \t\t\t\t\t\t<pluginExecutions>\n-    \t\t\t\t\t\t\t<pluginExecution>\n-    \t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-    \t\t\t\t\t\t\t\t\t<groupId>\n-    \t\t\t\t\t\t\t\t\t\torg.apache.felix\n-    \t\t\t\t\t\t\t\t\t</groupId>\n-    \t\t\t\t\t\t\t\t\t<artifactId>\n-    \t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-    \t\t\t\t\t\t\t\t\t</artifactId>\n-    \t\t\t\t\t\t\t\t\t<versionRange>\n-    \t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-    \t\t\t\t\t\t\t\t\t</versionRange>\n-    \t\t\t\t\t\t\t\t\t<goals>\n-    \t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-    \t\t\t\t\t\t\t\t\t</goals>\n-    \t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-    \t\t\t\t\t\t\t\t<action>\n-    \t\t\t\t\t\t\t\t\t<ignore />\n-    \t\t\t\t\t\t\t\t</action>\n-    \t\t\t\t\t\t\t</pluginExecution>\n-    \t\t\t\t\t\t</pluginExecutions>\n-    \t\t\t\t\t</lifecycleMappingMetadata>\n-    \t\t\t\t</configuration>\n-    \t\t\t</plugin>\n-    \t\t</plugins>\n-    \t</pluginManagement>\n-    </build>\n </project>", "filename": "wicket-native-websocket/wicket-native-websocket-tomcat/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-objectsizeof-agent/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-objectsizeof-agent/pom.xml", "sha": "82dc5d5140b572881c9ac5e86b6e015d09dbf9da", "changes": 30, "status": "modified", "deletions": 30, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-objectsizeof-agent/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -51,36 +51,6 @@\n     \t\t\t\t\t</archive>\n     \t\t\t\t</configuration>\n     \t\t\t</plugin>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n \t\t\t</plugins>\n \t\t</pluginManagement>\n \t</build>", "filename": "wicket-objectsizeof-agent/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-request/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-request/pom.xml", "sha": "71ae25016eec20cb12d5af998abce2d1ea9108a8", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-request/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -33,40 +33,4 @@\n       <artifactId>wicket-util</artifactId>\n     </dependency>\n   </dependencies>\n-  <build>\n-  \t<pluginManagement>\n-  \t\t<plugins>\n-  \t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-  \t\t\t<plugin>\n-  \t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-  \t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-  \t\t\t\t<configuration>\n-  \t\t\t\t\t<lifecycleMappingMetadata>\n-  \t\t\t\t\t\t<pluginExecutions>\n-  \t\t\t\t\t\t\t<pluginExecution>\n-  \t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-  \t\t\t\t\t\t\t\t\t<groupId>\n-  \t\t\t\t\t\t\t\t\t\torg.apache.felix\n-  \t\t\t\t\t\t\t\t\t</groupId>\n-  \t\t\t\t\t\t\t\t\t<artifactId>\n-  \t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-  \t\t\t\t\t\t\t\t\t</artifactId>\n-  \t\t\t\t\t\t\t\t\t<versionRange>\n-  \t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-  \t\t\t\t\t\t\t\t\t</versionRange>\n-  \t\t\t\t\t\t\t\t\t<goals>\n-  \t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-  \t\t\t\t\t\t\t\t\t</goals>\n-  \t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-  \t\t\t\t\t\t\t\t<action>\n-  \t\t\t\t\t\t\t\t\t<ignore />\n-  \t\t\t\t\t\t\t\t</action>\n-  \t\t\t\t\t\t\t</pluginExecution>\n-  \t\t\t\t\t\t</pluginExecutions>\n-  \t\t\t\t\t</lifecycleMappingMetadata>\n-  \t\t\t\t</configuration>\n-  \t\t\t</plugin>\n-  \t\t</plugins>\n-  \t</pluginManagement>\n-  </build>\n </project>", "filename": "wicket-request/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-spring/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-spring/pom.xml", "sha": "bf2e4971ba91fedf3433cc5d6dc0b6e56da6908a", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-spring/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -43,40 +43,4 @@\n \t\t\t<artifactId>wicket-ioc</artifactId>\n \t\t</dependency>\n \t</dependencies>\n-\t<build>\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n-\t</build>\n </project>", "filename": "wicket-spring/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-util/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-util/pom.xml", "sha": "d8c4293d30e273efa4741f71033c358cfb8a70da", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-util/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -40,40 +40,4 @@\n \t\t\t<artifactId>commons-io</artifactId>\n \t\t</dependency>\n \t</dependencies>\n-  <build>\n-  \t<pluginManagement>\n-  \t\t<plugins>\n-  \t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-  \t\t\t<plugin>\n-  \t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-  \t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-  \t\t\t\t<configuration>\n-  \t\t\t\t\t<lifecycleMappingMetadata>\n-  \t\t\t\t\t\t<pluginExecutions>\n-  \t\t\t\t\t\t\t<pluginExecution>\n-  \t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-  \t\t\t\t\t\t\t\t\t<groupId>\n-  \t\t\t\t\t\t\t\t\t\torg.apache.felix\n-  \t\t\t\t\t\t\t\t\t</groupId>\n-  \t\t\t\t\t\t\t\t\t<artifactId>\n-  \t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-  \t\t\t\t\t\t\t\t\t</artifactId>\n-  \t\t\t\t\t\t\t\t\t<versionRange>\n-  \t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-  \t\t\t\t\t\t\t\t\t</versionRange>\n-  \t\t\t\t\t\t\t\t\t<goals>\n-  \t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-  \t\t\t\t\t\t\t\t\t</goals>\n-  \t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-  \t\t\t\t\t\t\t\t<action>\n-  \t\t\t\t\t\t\t\t\t<ignore />\n-  \t\t\t\t\t\t\t\t</action>\n-  \t\t\t\t\t\t\t</pluginExecution>\n-  \t\t\t\t\t\t</pluginExecutions>\n-  \t\t\t\t\t</lifecycleMappingMetadata>\n-  \t\t\t\t</configuration>\n-  \t\t\t</plugin>\n-  \t\t</plugins>\n-  \t</pluginManagement>\n-  </build>\n </project>", "filename": "wicket-util/pom.xml"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-velocity/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/b3f0862602043ef8889a149dda77e20e010a4f22/wicket-velocity/pom.xml", "sha": "fd2dcd97339df13fbcdba274abb2cd6a54e353de", "changes": 36, "status": "modified", "deletions": 36, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-velocity/pom.xml?ref=b3f0862602043ef8889a149dda77e20e010a4f22", "patch": "@@ -41,40 +41,4 @@\n \t\t\t<artifactId>wicket-core</artifactId>\n \t\t</dependency>\n \t</dependencies>\n-\t<build>\n-\t\t<pluginManagement>\n-\t\t\t<plugins>\n-\t\t\t\t<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->\n-\t\t\t\t<plugin>\n-\t\t\t\t\t<groupId>org.eclipse.m2e</groupId>\n-\t\t\t\t\t<artifactId>lifecycle-mapping</artifactId>\n-\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<lifecycleMappingMetadata>\n-\t\t\t\t\t\t\t<pluginExecutions>\n-\t\t\t\t\t\t\t\t<pluginExecution>\n-\t\t\t\t\t\t\t\t\t<pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t\t<groupId>\n-\t\t\t\t\t\t\t\t\t\t\torg.apache.felix\n-\t\t\t\t\t\t\t\t\t\t</groupId>\n-\t\t\t\t\t\t\t\t\t\t<artifactId>\n-\t\t\t\t\t\t\t\t\t\t\tmaven-bundle-plugin\n-\t\t\t\t\t\t\t\t\t\t</artifactId>\n-\t\t\t\t\t\t\t\t\t\t<versionRange>\n-\t\t\t\t\t\t\t\t\t\t\t[2.3.7,)\n-\t\t\t\t\t\t\t\t\t\t</versionRange>\n-\t\t\t\t\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t\t\t\t\t<goal>manifest</goal>\n-\t\t\t\t\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t\t\t\t</pluginExecutionFilter>\n-\t\t\t\t\t\t\t\t\t<action>\n-\t\t\t\t\t\t\t\t\t\t<ignore />\n-\t\t\t\t\t\t\t\t\t</action>\n-\t\t\t\t\t\t\t\t</pluginExecution>\n-\t\t\t\t\t\t\t</pluginExecutions>\n-\t\t\t\t\t\t</lifecycleMappingMetadata>\n-\t\t\t\t\t</configuration>\n-\t\t\t\t</plugin>\n-\t\t\t</plugins>\n-\t\t</pluginManagement>\n-\t</build>\n </project>", "filename": "wicket-velocity/pom.xml"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/e4399d74234b657435f44eb137969db1a22896d5", "parent": "https://github.com/apache/wicket/commit/490fdf67646f1b987c2c1065a3fa6c55f6c5b338", "message": "WICKET-6031 NPE in PackageResourceReference#getResource() when there is no request", "bug_id": "wicket_6", "file": [{"additions": 26, "raw_url": "https://github.com/apache/wicket/raw/e4399d74234b657435f44eb137969db1a22896d5/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResourceReference.java", "blob_url": "https://github.com/apache/wicket/blob/e4399d74234b657435f44eb137969db1a22896d5/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResourceReference.java", "sha": "f10a01cb83b22133f83f457d6db6fbc5c0dbb966", "changes": 34, "status": "modified", "deletions": 8, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResourceReference.java?ref=e4399d74234b657435f44eb137969db1a22896d5", "patch": "@@ -111,10 +111,16 @@ public PackageResource getResource()\n \t\tfinal String extension = getExtension();\n \n \t\tfinal PackageResource resource;\n-\t\t\n-\t\tfinal Url url = RequestCycle.get().getRequest().getUrl();\n-\t\t//resource attributes (locale, style, variation) might be encoded in the URL\n-\t\tfinal UrlAttributes urlAttributes = ResourceUtil.decodeResourceReferenceAttributes(url);\n+\n+\t\tRequestCycle requestCycle = RequestCycle.get();\n+\t\tUrlAttributes urlAttributes = null;\n+\t\tif (requestCycle != null)\n+\t\t{\n+\t\t\t//resource attributes (locale, style, variation) might be encoded in the URL\n+\t\t\tfinal Url url = requestCycle.getRequest().getUrl();\n+\t\t\turlAttributes = ResourceUtil.decodeResourceReferenceAttributes(url);\n+\t\t}\n+\n \t\tfinal String currentVariation = getCurrentVariation(urlAttributes);\n \t\tfinal String currentStyle = getCurrentStyle(urlAttributes);\n \t\tfinal Locale currentLocale = getCurrentLocale(urlAttributes);\n@@ -185,7 +191,11 @@ private Locale getCurrentLocale(UrlAttributes attributes)\n \t{\n \t\tLocale currentLocale = getCurrentLocale();\n \n-\t\treturn currentLocale != null ? currentLocale : attributes.getLocale();\n+\t\treturn currentLocale != null\n+\t\t\t\t? currentLocale\n+\t\t\t\t: attributes != null\n+\t\t\t\t\t? attributes.getLocale()\n+\t\t\t\t\t: null;\n \t}\n \n \tprivate Locale getCurrentLocale()\n@@ -208,8 +218,12 @@ private Locale getCurrentLocale()\n \tprivate String getCurrentStyle(UrlAttributes attributes)\n \t{\n \t\tString currentStyle = getCurrentStyle();\n-\t\t\n-\t\treturn currentStyle != null ? currentStyle : attributes.getStyle();\n+\n+\t\treturn currentStyle != null\n+\t\t\t\t? currentStyle\n+\t\t\t\t: attributes != null\n+\t\t\t\t\t? attributes.getStyle()\n+\t\t\t\t\t: null;\n \t}\n \t\n \tprivate String getCurrentStyle()\n@@ -233,7 +247,11 @@ private String getCurrentVariation(UrlAttributes attributes)\n \t{\n \t\tfinal String variation = getVariation();\n \n-\t\treturn variation != null ? variation : attributes.getVariation();\n+\t\treturn variation != null\n+\t\t\t\t? variation\n+\t\t\t\t: attributes != null\n+\t\t\t\t\t? attributes.getVariation()\n+\t\t\t\t\t: null;\n \t}\n \n \t/**", "filename": "wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResourceReference.java"}, {"additions": 19, "raw_url": "https://github.com/apache/wicket/raw/e4399d74234b657435f44eb137969db1a22896d5/wicket-core/src/test/java/org/apache/wicket/request/resource/PackageResourceReferenceTest.java", "blob_url": "https://github.com/apache/wicket/blob/e4399d74234b657435f44eb137969db1a22896d5/wicket-core/src/test/java/org/apache/wicket/request/resource/PackageResourceReferenceTest.java", "sha": "de7a0a55b3f91d97e34e9685dbf9aef74a77c3e0", "changes": 19, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/test/java/org/apache/wicket/request/resource/PackageResourceReferenceTest.java?ref=e4399d74234b657435f44eb137969db1a22896d5", "patch": "@@ -21,6 +21,7 @@\n import java.util.Locale;\r\n \r\n import org.apache.wicket.Application;\r\n+import org.apache.wicket.ThreadContext;\r\n import org.apache.wicket.protocol.http.mock.MockHttpServletRequest;\r\n import org.apache.wicket.protocol.http.mock.MockHttpServletResponse;\r\n import org.apache.wicket.request.Request;\r\n@@ -355,5 +356,23 @@ public void testContentRangeHeaders()\n \t\t\tnew String(mockHttpServletResponse.getBinaryContent()));\r\n \t}\r\n \r\n+\t/**\r\n+\t * https://issues.apache.org/jira/browse/WICKET-6031\r\n+\t */\r\n+\t@Test\r\n+\tpublic void noRequestCycle()\r\n+\t{\r\n+\t\tThreadContext.setRequestCycle(null);\r\n+\r\n+\t\tPackageResourceReference reference = new PackageResourceReference(scope, \"resource.txt\",\r\n+\t\t\t\tlocales[1], styles[1], variations[1]);\r\n+\r\n+\t\tPackageResource resource = reference.getResource();\r\n+\t\tassertNotNull(resource);\r\n+\r\n+\t\tassertEquals(locales[1], resource.getResourceStream().getLocale());\r\n+\t\tassertEquals(styles[1], resource.getResourceStream().getStyle());\r\n+\t\tassertEquals(variations[1], resource.getResourceStream().getVariation());\r\n+\t}\r\n \r\n }\r", "filename": "wicket-core/src/test/java/org/apache/wicket/request/resource/PackageResourceReferenceTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/e37a9e101f6ee74aa03bff9a6797a16d304b3d0c", "parent": "https://github.com/apache/wicket/commit/af3f84485ccf7a10a7fafe9246d80ff83b13daed", "message": "WICKET-4968 NPE in FencedFeedbackPanel#onRemove", "bug_id": "wicket_7", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/e37a9e101f6ee74aa03bff9a6797a16d304b3d0c/wicket-core/src/main/java/org/apache/wicket/feedback/FencedFeedbackPanel.java", "blob_url": "https://github.com/apache/wicket/blob/e37a9e101f6ee74aa03bff9a6797a16d304b3d0c/wicket-core/src/main/java/org/apache/wicket/feedback/FencedFeedbackPanel.java", "sha": "f6916f2c8f0e19f04d4de8cbe3d0dc4210f3a43f", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/feedback/FencedFeedbackPanel.java?ref=e37a9e101f6ee74aa03bff9a6797a16d304b3d0c", "patch": "@@ -152,7 +152,7 @@ protected void onRemove()\n \t\t\t// decrement the fence count\n \n \t\t\tInteger count = fence.getMetaData(FENCE_KEY);\n-\t\t\tcount = count == 1 ? null : count - 1;\n+\t\t\tcount = (count == null || count == 1) ? null : count - 1;\n \t\t\tfence.setMetaData(FENCE_KEY, count);\n \t\t}\n \t}", "filename": "wicket-core/src/main/java/org/apache/wicket/feedback/FencedFeedbackPanel.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/b719561b4429941ccbd705ac1ddd13e4aa1aec0e", "parent": "https://github.com/apache/wicket/commit/4fc82e3598ec6d790fe13c05ef99b1a69095779e", "message": "WICKET-4706 SerializableChecker.close throws NPE", "bug_id": "wicket_8", "file": [{"additions": 9, "raw_url": "https://github.com/apache/wicket/raw/b719561b4429941ccbd705ac1ddd13e4aa1aec0e/wicket-core/src/main/java/org/apache/wicket/core/util/io/SerializableChecker.java", "blob_url": "https://github.com/apache/wicket/blob/b719561b4429941ccbd705ac1ddd13e4aa1aec0e/wicket-core/src/main/java/org/apache/wicket/core/util/io/SerializableChecker.java", "sha": "57f831716882a7750bc29cb274e46a8c3b771e81", "changes": 9, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/core/util/io/SerializableChecker.java?ref=b719561b4429941ccbd705ac1ddd13e4aa1aec0e", "patch": "@@ -349,6 +349,15 @@ public void reset() throws IOException\n \t\twriteObjectMethodMissing.clear();\n \t}\n \n+\t@Override\n+\tpublic void close() throws IOException\n+\t{\n+\t\t// do not call super.close() because SerializableChecker uses ObjectOutputStream's no-arg constructor\n+\n+\t\t// just null-ify the declared members\n+\t\treset();\n+\t}\n+\n \tprivate void check(Object obj)\n \t{\n \t\tif (obj == null)", "filename": "wicket-core/src/main/java/org/apache/wicket/core/util/io/SerializableChecker.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/11037c4d61481e10cc989cc74cffc99152b5b6d3", "parent": "https://github.com/apache/wicket/commit/c06052469a5cf1e895a4294ef2a9af5e2ed2d3c4", "message": "WICKET-4563 Possible NPE in FragmentMarkupSourcingStrategy.getMarkup", "bug_id": "wicket_9", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/11037c4d61481e10cc989cc74cffc99152b5b6d3/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/FragmentMarkupSourcingStrategy.java", "blob_url": "https://github.com/apache/wicket/blob/11037c4d61481e10cc989cc74cffc99152b5b6d3/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/FragmentMarkupSourcingStrategy.java", "sha": "81efccf62f60e6d3f8efe3da53f81275e0ee5acf", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/FragmentMarkupSourcingStrategy.java?ref=11037c4d61481e10cc989cc74cffc99152b5b6d3", "patch": "@@ -141,7 +141,7 @@ public IMarkupFragment getMarkup(final MarkupContainer container, final Componen\n \t\tif (childMarkup == null)\n \t\t{\n \t\t\tthrow new MarkupNotFoundException(\"No Markup found for Fragment \" + markupId +\n-\t\t\t\t\" in providing markup container \" + getMarkupProvider(container).toString());\n+\t\t\t\t\" in providing markup container \" + getMarkupProvider(container));\n \t\t}\n \n \t\tif (child == null)", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/html/panel/FragmentMarkupSourcingStrategy.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/c06052469a5cf1e895a4294ef2a9af5e2ed2d3c4", "parent": "https://github.com/apache/wicket/commit/245b19ec94ce082aefc921cc610b906ca65bc66f", "message": "WICKET-4563 Possible NPE in FragmentMarkupSourcingStrategy.getMarkup", "bug_id": "wicket_10", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/c06052469a5cf1e895a4294ef2a9af5e2ed2d3c4/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/FragmentMarkupSourcingStrategy.java", "blob_url": "https://github.com/apache/wicket/blob/c06052469a5cf1e895a4294ef2a9af5e2ed2d3c4/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/FragmentMarkupSourcingStrategy.java", "sha": "09b80796f2dcf9678a197a41251afb41de4f2530", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/FragmentMarkupSourcingStrategy.java?ref=c06052469a5cf1e895a4294ef2a9af5e2ed2d3c4", "patch": "@@ -141,7 +141,7 @@ public IMarkupFragment getMarkup(final MarkupContainer container, final Componen\n \t\tif (childMarkup == null)\n \t\t{\n \t\t\tthrow new MarkupNotFoundException(\"No Markup found for Fragment \" + markupId +\n-\t\t\t\t\" in providing markup container \" + markupProvider.toString());\n+\t\t\t\t\" in providing markup container \" + getMarkupProvider(container).toString());\n \t\t}\n \n \t\tif (child == null)", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/html/panel/FragmentMarkupSourcingStrategy.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/02808f7d08faab05432515b29d8e6e25e5343fe0", "parent": "https://github.com/apache/wicket/commit/e4ee449e54df86664e132c60892fffcc7aa0fac5", "message": "WICKET-6483 JavaxUpgradeHttpRequest can cause NullPointerException\n\nWICKET-6493 WebSocket SessionIds are wrong (HttpSession one used instead of Websocket one) + NPE if no HttpSession is found during Handshake Request\n\nUse HttpServletRequest.getSession(false) to make it more explicit that it is not possible to create a new HttpSession in WebSocket request.\nIf the session is existing it will be used, otherwise an exception will be thrown explaining the problem.", "bug_id": "wicket_11", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/02808f7d08faab05432515b29d8e6e25e5343fe0/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java", "blob_url": "https://github.com/apache/wicket/blob/02808f7d08faab05432515b29d8e6e25e5343fe0/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java", "sha": "550423dd429b4cc6d2c689a027b5f22d16ea3c5d", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java?ref=02808f7d08faab05432515b29d8e6e25e5343fe0", "patch": "@@ -102,7 +102,7 @@\n \t */\n \tpublic AbstractWebSocketProcessor(final HttpServletRequest request, final WebApplication application)\n \t{\n-\t\tfinal HttpSession httpSession = request.getSession(true);\n+\t\tfinal HttpSession httpSession = request.getSession(false);\n \t\tif (httpSession == null)\n \t\t{\n \t\t\tthrow new IllegalStateException(\"There is no HTTP Session bound. Without a session Wicket won't be \" +", "filename": "wicket-native-websocket/wicket-native-websocket-core/src/main/java/org/apache/wicket/protocol/ws/api/AbstractWebSocketProcessor.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/724066f406590a1b383a2476ee9983974f40ab80", "parent": "https://github.com/apache/wicket/commit/972c71522caddfa3c6836dafab6831a9643cbd08", "message": "WICKET-5497 NPE in JsonUtils when the value is null", "bug_id": "wicket_12", "file": [{"additions": 12, "raw_url": "https://github.com/apache/wicket/raw/724066f406590a1b383a2476ee9983974f40ab80/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java", "blob_url": "https://github.com/apache/wicket/blob/724066f406590a1b383a2476ee9983974f40ab80/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java", "sha": "ece49971528276158f163328eac2e31285412653", "changes": 24, "status": "modified", "deletions": 12, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java?ref=724066f406590a1b383a2476ee9983974f40ab80", "patch": "@@ -58,23 +58,23 @@ public static JSONArray asArray(Map<String, Object> map) throws JSONException\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t\telse if (value.getClass().isArray())\n+\t\t\t\telse if (value != null)\n \t\t\t\t{\n-\t\t\t\t\tObject[] array = (Object[]) value;\n-\t\t\t\t\tfor (Object v : array)\n+\t\t\t\t\tif (value.getClass().isArray())\n \t\t\t\t\t{\n-\t\t\t\t\t\tif (v != null)\n+\t\t\t\t\t\tObject[] array = (Object[]) value;\n+\t\t\t\t\t\tfor (Object v : array)\n \t\t\t\t\t\t{\n-\t\t\t\t\t\t\tJSONObject object = new JSONObject();\n-\t\t\t\t\t\t\tobject.put(\"name\", name);\n-\t\t\t\t\t\t\tobject.put(\"value\", v);\n-\t\t\t\t\t\t\tjsonArray.put(object);\n+\t\t\t\t\t\t\tif (v != null)\n+\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\tJSONObject object = new JSONObject();\n+\t\t\t\t\t\t\t\tobject.put(\"name\", name);\n+\t\t\t\t\t\t\t\tobject.put(\"value\", v);\n+\t\t\t\t\t\t\t\tjsonArray.put(object);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\telse\n-\t\t\t\t{\n-\t\t\t\t\tif (value != null)\n+\t\t\t\t\telse\n \t\t\t\t\t{\n \t\t\t\t\t\tJSONObject object = new JSONObject();\n \t\t\t\t\t\tobject.put(\"name\", name);", "filename": "wicket-core/src/main/java/org/apache/wicket/ajax/json/JsonUtils.java"}, {"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/724066f406590a1b383a2476ee9983974f40ab80/wicket-core/src/test/java/org/apache/wicket/ajax/json/JsonUtilsTest.java", "blob_url": "https://github.com/apache/wicket/blob/724066f406590a1b383a2476ee9983974f40ab80/wicket-core/src/test/java/org/apache/wicket/ajax/json/JsonUtilsTest.java", "sha": "b78003bcfd3f3906670deba8cb173e2621591127", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/test/java/org/apache/wicket/ajax/json/JsonUtilsTest.java?ref=724066f406590a1b383a2476ee9983974f40ab80", "patch": "@@ -56,5 +56,11 @@ public void asArray() throws Exception\n \t\tObject[] arrayValues = {\"arrayValue\", 3, null, true};\n \t\tmap.put(\"array\", arrayValues);\n \t\tassertEquals(\"[{\\\"name\\\":\\\"array\\\",\\\"value\\\":\\\"arrayValue\\\"},{\\\"name\\\":\\\"array\\\",\\\"value\\\":3},{\\\"name\\\":\\\"array\\\",\\\"value\\\":true}]\", JsonUtils.asArray(map).toString());\n+\n+\t\tmap.clear();\n+\t\tmap.put(\"null\", null);\n+\t\tassertEquals(\"[]\", JsonUtils.asArray(map).toString());\n+\t\tmap.put(\"notNull\", \"notNull\");\n+\t\tassertEquals(\"[{\\\"name\\\":\\\"notNull\\\",\\\"value\\\":\\\"notNull\\\"}]\", JsonUtils.asArray(map).toString());\n \t}\n }", "filename": "wicket-core/src/test/java/org/apache/wicket/ajax/json/JsonUtilsTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/af05b3d68ca8b8021db8e205d39557782eb68a7b", "parent": "https://github.com/apache/wicket/commit/a3a5a40fcea53384554d7a8ada08ef7bb021bf1d", "message": "WICKET-5462 fix npe in ajax form component label repainting", "bug_id": "wicket_13", "file": [{"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/af05b3d68ca8b8021db8e205d39557782eb68a7b/wicket-core/src/main/java/org/apache/wicket/markup/html/form/Form.java", "blob_url": "https://github.com/apache/wicket/blob/af05b3d68ca8b8021db8e205d39557782eb68a7b/wicket-core/src/main/java/org/apache/wicket/markup/html/form/Form.java", "sha": "7eeb1e17c4c76b9726b4859279bd15f8034abf08", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/html/form/Form.java?ref=af05b3d68ca8b8021db8e205d39557782eb68a7b", "patch": "@@ -774,10 +774,10 @@ else if (hasError())\n \t\t\tcallOnError(submitter);\n \t\t}\n \n-\n-\t\tif (((WebRequest)getRequest()).isAjax())\n+\t\t// update auto labels if we are inside an ajax request\n+\t\tfinal AjaxRequestTarget target = getRequestCycle().find(AjaxRequestTarget.class);\n+\t\tif (target != null)\n \t\t{\n-\t\t\tfinal AjaxRequestTarget target = getRequestCycle().find(AjaxRequestTarget.class);\n \t\t\tvisitChildren(FormComponent.class, new IVisitor<FormComponent<?>, Void>()\n \t\t\t{\n \t\t\t\t@Override", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/html/form/Form.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/a06d33178857561d83e7d4b4b573f2bf7189a120", "parent": "https://github.com/apache/wicket/commit/515e2be2a5301f5caf7b1baee4a593d21c20e275", "message": "WICKET-6091 NPE in RequestLoggerRequestCycleListener when using native-websockets\n\nUse the upgrade request's uri as url", "bug_id": "wicket_14", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/a06d33178857561d83e7d4b4b573f2bf7189a120/wicket-native-websocket/wicket-native-websocket-javax/src/main/java/org/apache/wicket/protocol/ws/javax/JavaxUpgradeHttpRequest.java", "blob_url": "https://github.com/apache/wicket/blob/a06d33178857561d83e7d4b4b573f2bf7189a120/wicket-native-websocket/wicket-native-websocket-javax/src/main/java/org/apache/wicket/protocol/ws/javax/JavaxUpgradeHttpRequest.java", "sha": "699337b1d6ccfde42272daf3947dce5e97ef2e03", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-native-websocket/wicket-native-websocket-javax/src/main/java/org/apache/wicket/protocol/ws/javax/JavaxUpgradeHttpRequest.java?ref=a06d33178857561d83e7d4b4b573f2bf7189a120", "patch": "@@ -254,7 +254,7 @@ public String getRequestURI()\n \t@Override\n \tpublic StringBuffer getRequestURL()\n \t{\n-\t\treturn null;\n+\t\treturn new StringBuffer(requestUri);\n \t}\n \n \t@Override", "filename": "wicket-native-websocket/wicket-native-websocket-javax/src/main/java/org/apache/wicket/protocol/ws/javax/JavaxUpgradeHttpRequest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/adc16f778a627e59d2b316beeb3c162426432f1b", "parent": "https://github.com/apache/wicket/commit/0cecd7fdfa449240f39aaa991c5f6c3046bc3c53", "message": "WICKET-5135: give more detailed error message, rather than NPE", "bug_id": "wicket_15", "file": [{"additions": 29, "raw_url": "https://github.com/apache/wicket/raw/adc16f778a627e59d2b316beeb3c162426432f1b/wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/EventBus.java", "blob_url": "https://github.com/apache/wicket/blob/adc16f778a627e59d2b316beeb3c162426432f1b/wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/EventBus.java", "sha": "8bada960d74afd96e0c1d3d78904b771d5246246", "changes": 31, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/EventBus.java?ref=adc16f778a627e59d2b316beeb3c162426432f1b", "patch": "@@ -32,6 +32,7 @@\n import org.apache.wicket.Page;\n import org.apache.wicket.Session;\n import org.apache.wicket.ThreadContext;\n+import org.apache.wicket.WicketRuntimeException;\n import org.apache.wicket.application.IComponentOnBeforeRenderListener;\n import org.apache.wicket.atmosphere.config.AtmosphereParameters;\n import org.apache.wicket.protocol.http.WebApplication;\n@@ -89,7 +90,14 @@ public static EventBus get()\n \t */\n \tpublic static EventBus get(Application application)\n \t{\n-\t\treturn application.getMetaData(EVENT_BUS_KEY);\n+\t\tEventBus eventBus = application.getMetaData(EVENT_BUS_KEY);\n+\t\tif (eventBus == null)\n+\t\t{\n+\t\t\tthrow new WicketRuntimeException(\n+\t\t\t\t\"There is no EventBus registered for the given application: \" +\n+\t\t\t\t\tapplication.getName());\n+\t\t}\n+\t\treturn eventBus;\n \t}\n \n \tprivate WebApplication application;\n@@ -112,7 +120,26 @@ public static EventBus get(Application application)\n \t */\n \tpublic EventBus(WebApplication application)\n \t{\n-\t\tthis(application, BroadcasterFactory.getDefault().lookupAll().iterator().next());\n+\t\tthis(application, lookupDefaultBroadcaster());\n+\t}\n+\n+\tprivate static Broadcaster lookupDefaultBroadcaster()\n+\t{\n+\t\tBroadcasterFactory factory = BroadcasterFactory.getDefault();\n+\t\tif (factory == null)\n+\t\t{\n+\t\t\tthrow new WicketRuntimeException(\n+\t\t\t\t\"There is no Atmosphere BroadcasterFactory configured. Did you include the \"\n+\t\t\t\t\t+ \"atmosphere.xml configuration file and configured AtmosphereServlet?\");\n+\t\t}\n+\t\tCollection<Broadcaster> allBroadcasters = factory.lookupAll();\n+\t\tif (allBroadcasters.isEmpty())\n+\t\t{\n+\t\t\tthrow new WicketRuntimeException(\n+\t\t\t\t\"The Atmosphere BroadcasterFactory has no Broadcasters, \"\n+\t\t\t\t\t+ \"something is wrong with your Atmosphere configuration.\");\n+\t\t}\n+\t\treturn allBroadcasters.iterator().next();\n \t}\n \n \t/**", "filename": "wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/EventBus.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/b65635188d73e3e46d4523b7643fa4ddcc509ca0", "parent": "https://github.com/apache/wicket/commit/f3914dd107cf7563eefc20aaa56cd75b4107410a", "message": "WICKET-5904 NPE after editing a markup file in debug mode", "bug_id": "wicket_16", "file": [{"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/b65635188d73e3e46d4523b7643fa4ddcc509ca0/wicket-core/src/main/java/org/apache/wicket/markup/parser/AbstractMarkupFilter.java", "blob_url": "https://github.com/apache/wicket/blob/b65635188d73e3e46d4523b7643fa4ddcc509ca0/wicket-core/src/main/java/org/apache/wicket/markup/parser/AbstractMarkupFilter.java", "sha": "db53a77bf480600034f8bcb737d6628addab8cd6", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/parser/AbstractMarkupFilter.java?ref=b65635188d73e3e46d4523b7643fa4ddcc509ca0", "patch": "@@ -43,13 +43,13 @@\n \n \t/** The next MarkupFilter in the chain */\n \tprivate IMarkupFilter parent;\n-\t\n+\n \t/** A key for a request-relative counter (see {@link #getRequestUniqueId()}) **/\n \tprivate final static MetaDataKey<AtomicInteger> REQUEST_COUNTER_KEY = new MetaDataKey<AtomicInteger>()\n \t{\n \t\tprivate static final long serialVersionUID = 1L;\n \t};\n-\t\t\n+\n \t/**\n \t * Construct.\n \t */\n@@ -194,7 +194,7 @@ else if (markupResourceStream != null)\n \t\t}\n \t\treturn wicketNamespace;\n \t}\n-\t\n+\n \t/**\n \t * Returns an id using a request-relative counter. This can be\n \t * useful for autocomponent tags that need to get a tag id.", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/parser/AbstractMarkupFilter.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/32a40bc1de5302f17bbcc19cd3ab769b0dc0f274", "parent": "https://github.com/apache/wicket/commit/52d99f303bea3994a28d2f08c878909ef56044f1", "message": "WICKET-5904 NPE after editing a markup file in debug mode", "bug_id": "wicket_17", "file": [{"additions": 30, "raw_url": "https://github.com/apache/wicket/raw/32a40bc1de5302f17bbcc19cd3ab769b0dc0f274/wicket-core/src/main/java/org/apache/wicket/markup/parser/AbstractMarkupFilter.java", "blob_url": "https://github.com/apache/wicket/blob/32a40bc1de5302f17bbcc19cd3ab769b0dc0f274/wicket-core/src/main/java/org/apache/wicket/markup/parser/AbstractMarkupFilter.java", "sha": "6478da26547d265dbe05a1edea4f5749e4c42d8c", "changes": 31, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/parser/AbstractMarkupFilter.java?ref=32a40bc1de5302f17bbcc19cd3ab769b0dc0f274", "patch": "@@ -17,14 +17,17 @@\n package org.apache.wicket.markup.parser;\n \n import java.text.ParseException;\n+import java.util.concurrent.atomic.AtomicLong;\n \n+import org.apache.wicket.MetaDataKey;\n import org.apache.wicket.markup.ComponentTag;\n import org.apache.wicket.markup.HtmlSpecialTag;\n import org.apache.wicket.markup.Markup;\n import org.apache.wicket.markup.MarkupElement;\n import org.apache.wicket.markup.MarkupParser;\n import org.apache.wicket.markup.MarkupResourceStream;\n import org.apache.wicket.markup.MarkupStream;\n+import org.apache.wicket.request.cycle.RequestCycle;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n@@ -45,7 +48,12 @@\n \n \t/** The next MarkupFilter in the chain */\n \tprivate IMarkupFilter parent;\n-\n+\t\n+\t/** A key for a request-relative counter (see {@link #getRequestUniqueId()}) **/\n+\tprivate final static MetaDataKey<AtomicLong> REQUEST_COUNTER_KEY = new MetaDataKey<AtomicLong>()\n+\t{\n+\t};\n+\t\t\n \t/**\n \t * Construct.\n \t */\n@@ -190,4 +198,25 @@ else if (markupResourceStream != null)\n \t\t}\n \t\treturn wicketNamespace;\n \t}\n+\t\n+\t/**\n+\t * Returns an id using a request-relative counter. This can be\n+\t * useful for autocomponent tags that needs to get tag id.\n+\t * \n+\t * @return\n+\t * \t\tthe request-relative id\n+\t */\n+\tprotected long getRequestUniqueId()\n+\t{\n+\t\tAtomicLong counter = RequestCycle.get().getMetaData(REQUEST_COUNTER_KEY);\n+\t\t\n+\t\tif (counter == null)\n+\t\t{\n+\t\t\tcounter = new AtomicLong();\n+\t\t\t\n+\t\t\tRequestCycle.get().setMetaData(REQUEST_COUNTER_KEY, counter);\n+\t\t}\n+\t\t\n+\t\treturn counter.getAndIncrement();\n+\t}\n }", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/parser/AbstractMarkupFilter.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/32a40bc1de5302f17bbcc19cd3ab769b0dc0f274/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/EnclosureHandler.java", "blob_url": "https://github.com/apache/wicket/blob/32a40bc1de5302f17bbcc19cd3ab769b0dc0f274/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/EnclosureHandler.java", "sha": "b29da3bef70a4499a7c830f2b446d40c5f4e4453", "changes": 11, "status": "modified", "deletions": 10, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/EnclosureHandler.java?ref=32a40bc1de5302f17bbcc19cd3ab769b0dc0f274", "patch": "@@ -19,7 +19,6 @@\n import java.text.ParseException;\n import java.util.ArrayDeque;\n import java.util.Deque;\n-import java.util.concurrent.atomic.AtomicLong;\n \n import org.apache.wicket.Component;\n import org.apache.wicket.MarkupContainer;\n@@ -73,14 +72,6 @@ public Component newComponent(MarkupContainer container, ComponentTag tag)\n \t/** Stack of <wicket:enclosure> tags */\n \tprivate Deque<ComponentTag> stack;\n \n-\t/**\n-\t * Used to assign unique ids to enclosures\n-\t * \n-\t * TODO queueing: there has to be a better way of doing this, perhaps some merged-markup-unique\n-\t * counter\n-\t */\n-\tprivate static final AtomicLong index = new AtomicLong();\n-\n \t/** The id of the first wicket tag inside the enclosure */\n \tprivate String childId;\n \n@@ -109,7 +100,7 @@ protected final MarkupElement onComponentTag(ComponentTag tag) throws ParseExcep\n \t\t\t// If open tag, than put the tag onto the stack\n \t\t\tif (tag.isOpen())\n \t\t\t{\n-\t\t\t\ttag.setId(tag.getId() + index.getAndIncrement());\n+\t\t\t\ttag.setId(tag.getId() + getRequestUniqueId());\n \t\t\t\ttag.setModified(true);\n \t\t\t\ttag.setAutoComponentFactory(FACTORY);\n ", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/EnclosureHandler.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/32a40bc1de5302f17bbcc19cd3ab769b0dc0f274/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/RelativePathPrefixHandler.java", "blob_url": "https://github.com/apache/wicket/blob/32a40bc1de5302f17bbcc19cd3ab769b0dc0f274/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/RelativePathPrefixHandler.java", "sha": "554df3edb071d8a2de01aebbf1fe95e8d5a371b1", "changes": 11, "status": "modified", "deletions": 10, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/RelativePathPrefixHandler.java?ref=32a40bc1de5302f17bbcc19cd3ab769b0dc0f274", "patch": "@@ -18,7 +18,6 @@\n \n import java.text.ParseException;\n import java.util.Iterator;\n-import java.util.concurrent.atomic.AtomicInteger;\n \n import org.apache.wicket.Component;\n import org.apache.wicket.MarkupContainer;\n@@ -109,14 +108,6 @@ public Component newComponent(MarkupContainer container, ComponentTag tag)\n \t\t}\n \t};\n \n-\t\n-\t/** \n-\t * https://issues.apache.org/jira/browse/WICKET-5724\n-\t * \n-\t * Unique index to generate new tag ids.\n-\t * */\n-\tprivate final AtomicInteger componentIndex = new AtomicInteger();\n-\n \t/**\n \t * Constructor for the IComponentResolver role.\n \t */\n@@ -164,7 +155,7 @@ protected final MarkupElement onComponentTag(ComponentTag tag) throws ParseExcep\n \t\t\t\tif (tag.getId() == null)\n \t\t\t\t{\n \t\t\t\t\ttag.setId(getWicketRelativePathPrefix(null)\n-\t\t\t\t\t\t+ componentIndex.getAndIncrement());\n+\t\t\t\t\t\t+ getRequestUniqueId());\n \t\t\t\t\ttag.setAutoComponentTag(true);\n \t\t\t\t}\n ", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/RelativePathPrefixHandler.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/ddfef631e242f303c52b6990ee607e0b262bbe14", "parent": "https://github.com/apache/wicket/commit/581c7306982888b64ac5c8b763a5f5d9ad8ff1ac", "message": "WICKET-5084: temp fix for NPE when rendering urls", "bug_id": "wicket_18", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/ddfef631e242f303c52b6990ee607e0b262bbe14/wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/AtmosphereWebResponse.java", "blob_url": "https://github.com/apache/wicket/blob/ddfef631e242f303c52b6990ee607e0b262bbe14/wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/AtmosphereWebResponse.java", "sha": "6a86e9745f9d97c7de24eca25903c91e3bd83755", "changes": 6, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/AtmosphereWebResponse.java?ref=ddfef631e242f303c52b6990ee607e0b262bbe14", "patch": "@@ -102,7 +102,8 @@ public void sendError(int sc, String msg)\n \t@Override\n \tpublic String encodeRedirectURL(CharSequence url)\n \t{\n-\t\treturn response.encodeRedirectUrl(url.toString());\n+\t\t// TODO temp fix for https://github.com/Atmosphere/atmosphere/issues/949\n+\t\treturn url.toString();\n \t}\n \n \t@Override\n@@ -128,7 +129,8 @@ public void write(byte[] array, int offset, int length)\n \t@Override\n \tpublic String encodeURL(CharSequence url)\n \t{\n-\t\treturn response.encodeURL(url.toString());\n+\t\t// TODO temp fix for https://github.com/Atmosphere/atmosphere/issues/949\n+\t\treturn url.toString();\n \t}\n \n \t@Override", "filename": "wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/AtmosphereWebResponse.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/a33cc473e3ff675b28ce341a2513ba1165f6c91a", "parent": "https://github.com/apache/wicket/commit/a4d76de8b4bcf703ffba54f6a0a0bebc03fbba97", "message": "WICKET-4965: Fix NPE when stopping the container", "bug_id": "wicket_19", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/a33cc473e3ff675b28ce341a2513ba1165f6c91a/wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/AtmosphereBehavior.java", "blob_url": "https://github.com/apache/wicket/blob/a33cc473e3ff675b28ce341a2513ba1165f6c91a/wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/AtmosphereBehavior.java", "sha": "862c3000d5164dd71bf417bafbef10f1c1029d81", "changes": 7, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/AtmosphereBehavior.java?ref=a33cc473e3ff675b28ce341a2513ba1165f6c91a", "patch": "@@ -179,7 +179,12 @@ public void onDisconnect(AtmosphereResourceEvent event)\n \t\t\tlog.info(String.format(\"%s connection dropped from ip %s:%s\", transport == null\n \t\t\t\t? \"websocket\" : transport, req.getRemoteAddr(), req.getRemotePort()));\n \t\t}\n-\t\tfindEventBus().unregisterConnection(event.getResource().uuid());\n+\t\t// It is possible that the application has already been destroyed, in which case\n+\t\t// unregistration is no longer needed\n+\t\tif (Application.get(applicationKey) != null)\n+\t\t{\n+\t\t\tfindEventBus().unregisterConnection(event.getResource().uuid());\n+\t\t}\n \t}\n \n \t@Override", "filename": "wicket-experimental/wicket-atmosphere/src/main/java/org/apache/wicket/atmosphere/AtmosphereBehavior.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/3e6fe1352e634b26a32d781ec5dd415d1dec2ea6", "parent": "https://github.com/apache/wicket/commit/e9625219691cabbb46a47de4daa54ca58832485f", "message": "WICKET-4074: NPE fix when RequestLogger is null", "bug_id": "wicket_20", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/3e6fe1352e634b26a32d781ec5dd415d1dec2ea6/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java", "blob_url": "https://github.com/apache/wicket/blob/3e6fe1352e634b26a32d781ec5dd415d1dec2ea6/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java", "sha": "8a9be142e0f613b4e13b5a39ada971b24985cc1e", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java?ref=3e6fe1352e634b26a32d781ec5dd415d1dec2ea6", "patch": "@@ -531,7 +531,8 @@ private void onInternalDetach()\n \t\tif (Application.exists())\n \t\t{\n \t\t\tIRequestLogger requestLogger = Application.get().getRequestLogger();\n-\t\t\trequestLogger.performLogging();\n+\t\t\tif (requestLogger != null)\n+\t\t\t\trequestLogger.performLogging();\n \t\t}\n \t}\n ", "filename": "wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/55eb52123ee45d5ffc70e3cac5e05b4400f2279e", "parent": "https://github.com/apache/wicket/commit/415e6debab43dc59235f54e79d6e52f62359ac66", "message": "WICKET-5209 NPE when using ComponentRenderer.renderComponent on a panel with <wicket:enclosure>", "bug_id": "wicket_21", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/55eb52123ee45d5ffc70e3cac5e05b4400f2279e/wicket-core/src/main/java/org/apache/wicket/core/util/string/ComponentRenderer.java", "blob_url": "https://github.com/apache/wicket/blob/55eb52123ee45d5ffc70e3cac5e05b4400f2279e/wicket-core/src/main/java/org/apache/wicket/core/util/string/ComponentRenderer.java", "sha": "41704a65c8cfa8e41e075062b367fcb13b3fb35f", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/core/util/string/ComponentRenderer.java?ref=55eb52123ee45d5ffc70e3cac5e05b4400f2279e", "patch": "@@ -100,6 +100,7 @@ public static CharSequence renderComponent(final Component component)\n \n \t\t\tRenderPage page = new RenderPage();\n \t\t\tpage.add(component);\n+\t\t\tpage.internalInitialize();\n \n \t\t\tcomponent.render();\n \t\t}", "filename": "wicket-core/src/main/java/org/apache/wicket/core/util/string/ComponentRenderer.java"}, {"additions": 39, "raw_url": "https://github.com/apache/wicket/raw/55eb52123ee45d5ffc70e3cac5e05b4400f2279e/wicket-core/src/test/java/org/apache/wicket/core/util/string/ComponentRendererTest.java", "blob_url": "https://github.com/apache/wicket/blob/55eb52123ee45d5ffc70e3cac5e05b4400f2279e/wicket-core/src/test/java/org/apache/wicket/core/util/string/ComponentRendererTest.java", "sha": "80922f8f6020d03b4a67a32af1f31cf13cf7a4dd", "changes": 39, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/test/java/org/apache/wicket/core/util/string/ComponentRendererTest.java?ref=55eb52123ee45d5ffc70e3cac5e05b4400f2279e", "patch": "@@ -0,0 +1,39 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.wicket.core.util.string;\n+\n+import org.apache.wicket.WicketTestCase;\n+import org.junit.Test;\n+\n+/**\n+ * Tests for ComponentRenderer\n+ */\n+public class ComponentRendererTest extends WicketTestCase\n+{\n+\n+\t/**\n+\t * https://issues.apache.org/jira/browse/WICKET-5209\n+\t *\n+\t * Tests that the page and the components in it are initialized.\n+\t * Enclosure won't know its child component without being initialized\n+\t */\n+\t@Test\n+\tpublic void componentsAreInitialized()\n+\t{\n+\t\tComponentRenderer.renderComponent(new EnclosurePanel(ComponentRenderer.COMP_ID));\n+\t}\n+}", "filename": "wicket-core/src/test/java/org/apache/wicket/core/util/string/ComponentRendererTest.java"}, {"additions": 22, "raw_url": "https://github.com/apache/wicket/raw/55eb52123ee45d5ffc70e3cac5e05b4400f2279e/wicket-core/src/test/java/org/apache/wicket/core/util/string/EnclosurePanel.html", "blob_url": "https://github.com/apache/wicket/blob/55eb52123ee45d5ffc70e3cac5e05b4400f2279e/wicket-core/src/test/java/org/apache/wicket/core/util/string/EnclosurePanel.html", "sha": "2977d1bd73e82d39222af38a8ef68d0b0ff38a28", "changes": 22, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/test/java/org/apache/wicket/core/util/string/EnclosurePanel.html?ref=55eb52123ee45d5ffc70e3cac5e05b4400f2279e", "patch": "@@ -0,0 +1,22 @@\n+<!--\n+    ====================================================================\n+    Licensed under the Apache License, Version 2.0 (the \"License\");\n+    you may not use this file except in compliance with the License.\n+    You may obtain a copy of the License at\n+\n+     http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing, software\n+    distributed under the License is distributed on an \"AS IS\" BASIS,\n+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+    See the License for the specific language governing permissions and\n+    limitations under the License.\n+-->\n+<!DOCTYPE html>\n+<html xmlns:wicket=\"http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd\">\n+\t<wicket:panel>\n+\t\t<wicket:enclosure child=\"externalLink\">\n+\t\t\t<a wicket:id=\"externalLink\">Google</a>\n+\t\t</wicket:enclosure>\n+\t</wicket:panel>\n+</html>\n\\ No newline at end of file", "filename": "wicket-core/src/test/java/org/apache/wicket/core/util/string/EnclosurePanel.html"}, {"additions": 35, "raw_url": "https://github.com/apache/wicket/raw/55eb52123ee45d5ffc70e3cac5e05b4400f2279e/wicket-core/src/test/java/org/apache/wicket/core/util/string/EnclosurePanel.java", "blob_url": "https://github.com/apache/wicket/blob/55eb52123ee45d5ffc70e3cac5e05b4400f2279e/wicket-core/src/test/java/org/apache/wicket/core/util/string/EnclosurePanel.java", "sha": "d204ed4c53b95eab3425771c57f1079b48de2406", "changes": 35, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/test/java/org/apache/wicket/core/util/string/EnclosurePanel.java?ref=55eb52123ee45d5ffc70e3cac5e05b4400f2279e", "patch": "@@ -0,0 +1,35 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.wicket.core.util.string;\n+\n+import org.apache.wicket.markup.html.link.ExternalLink;\n+import org.apache.wicket.markup.html.panel.Panel;\n+\n+class EnclosurePanel extends Panel\n+{\n+\t\n+\tprivate static final long serialVersionUID = 1L;\n+\t\n+\tprivate static final String TEST_LINK = \"http://google.com\";\n+\n+\tpublic EnclosurePanel(String id) {\n+\t\tsuper(id);\n+\t\t\n+\t\tExternalLink externalLink = new ExternalLink(\"externalLink\", TEST_LINK);\n+\t\tadd(externalLink);\n+\t}\n+}", "filename": "wicket-core/src/test/java/org/apache/wicket/core/util/string/EnclosurePanel.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/42a640a57b4a773f2507bbb485ca24dd5fb0dfc5", "parent": "https://github.com/apache/wicket/commit/b2dc52d6f522ad9c9aabcd6f25c1242f5071bc25", "message": "AAU-2949 fix NPE. hasRawInput() can return null for check boxes...", "bug_id": "wicket_22", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/42a640a57b4a773f2507bbb485ca24dd5fb0dfc5/wicket-core/src/main/java/org/apache/wicket/markup/html/form/Check.java", "blob_url": "https://github.com/apache/wicket/blob/42a640a57b4a773f2507bbb485ca24dd5fb0dfc5/wicket-core/src/main/java/org/apache/wicket/markup/html/form/Check.java", "sha": "f0f6b1c3771ba057eeb31398d0bfc7226e7afb73", "changes": 16, "status": "modified", "deletions": 10, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/html/form/Check.java?ref=42a640a57b4a773f2507bbb485ca24dd5fb0dfc5", "patch": "@@ -174,19 +174,15 @@ protected void onComponentTag(final ComponentTag tag)\n \t\t\t\t\"] contains a null model object, must be an object of type java.util.Collection\");\n \t\t}\n \n-\t\tif (group.hasRawInput())\n+\t\tfinal String raw = group.getRawInput();\n+\t\tif (!Strings.isEmpty(raw))\n \t\t{\n-\t\t\t// Wicket-2949 getInputAsArray() might not be the raw input\n-\t\t\tfinal String[] inputArray = group.getRawInput().split(FormComponent.VALUE_SEPARATOR);\n-\n-\t\t\tif (inputArray != null)\n+\t\t\tfinal String[] values = raw.split(FormComponent.VALUE_SEPARATOR);\n+\t\t\tfor (String value : values)\n \t\t\t{\n-\t\t\t\tfor (String input : inputArray)\n+\t\t\t\tif (uuid.equals(value))\n \t\t\t\t{\n-\t\t\t\t\tif (uuid.equals(input))\n-\t\t\t\t\t{\n-\t\t\t\t\t\ttag.put(\"checked\", \"checked\");\n-\t\t\t\t\t}\n+\t\t\t\t\ttag.put(\"checked\", \"checked\");\n \t\t\t\t}\n \t\t\t}\n \t\t}", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/html/form/Check.java"}, {"additions": 8, "raw_url": "https://github.com/apache/wicket/raw/42a640a57b4a773f2507bbb485ca24dd5fb0dfc5/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/form/select/Select.java", "blob_url": "https://github.com/apache/wicket/blob/42a640a57b4a773f2507bbb485ca24dd5fb0dfc5/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/form/select/Select.java", "sha": "45f8b373938ff16c9ac32e89cfb5baa6d2b84394", "changes": 19, "status": "modified", "deletions": 11, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/form/select/Select.java?ref=42a640a57b4a773f2507bbb485ca24dd5fb0dfc5", "patch": "@@ -221,22 +221,19 @@ boolean isSelected(final SelectOption<?> option)\n \t\tArgs.notNull(option, \"option\");\n \n \t\t// if the raw input is specified use that, otherwise use model\n-\t\tif (hasRawInput())\n+\t\tfinal String raw = getRawInput();\n+\t\tif (!Strings.isEmpty(raw))\n \t\t{\n-\t\t\t// Wicket-2949 getInputAsArray() might not be the raw input\n-\t\t\tString[] values = getRawInput().split(VALUE_SEPARATOR);\n-\t\t\tif (values != null && values.length > 0)\n+\t\t\tString[] values = raw.split(VALUE_SEPARATOR);\n+\t\t\tfor (int i = 0; i < values.length; i++)\n \t\t\t{\n-\t\t\t\tfor (int i = 0; i < values.length; i++)\n+\t\t\t\tString value = values[i];\n+\t\t\t\tif (value.equals(option.getValue()))\n \t\t\t\t{\n-\t\t\t\t\tString value = values[i];\n-\t\t\t\t\tif (value.equals(option.getValue()))\n-\t\t\t\t\t{\n-\t\t\t\t\t\treturn true;\n-\t\t\t\t\t}\n+\t\t\t\t\treturn true;\n \t\t\t\t}\n-\t\t\t\treturn false;\n \t\t\t}\n+\t\t\treturn false;\n \t\t}\n \n \t\treturn compareModels(getDefaultModelObject(), option.getDefaultModelObject());", "filename": "wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/form/select/Select.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/bc10ba570fd6ef9867351d7f7d9e960eb2ba3dfc", "parent": "https://github.com/apache/wicket/commit/0b78d759220c1b09abb0d47b5007757bbfeb4e0c", "message": "Move the check for non-null earlier in the method body. It would throw NPE in #checkHierarchyChange() otherwise.\n\nUse Args.", "bug_id": "wicket_23", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/bc10ba570fd6ef9867351d7f7d9e960eb2ba3dfc/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java", "blob_url": "https://github.com/apache/wicket/blob/bc10ba570fd6ef9867351d7f7d9e960eb2ba3dfc/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java", "sha": "731065c5f3aa82804f1f3fe85de5c0c7cc2bd4fb", "changes": 7, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java?ref=bc10ba570fd6ef9867351d7f7d9e960eb2ba3dfc", "patch": "@@ -710,12 +710,9 @@ public final void renderAssociatedMarkup(final String openTagName, final String\n \t */\n \tpublic MarkupContainer replace(final Component child)\n \t{\n-\t\tcheckHierarchyChange(child);\n+\t\tArgs.notNull(child, \"child\");\n \n-\t\tif (child == null)\n-\t\t{\n-\t\t\tthrow new IllegalArgumentException(\"argument child must be not null\");\n-\t\t}\n+\t\tcheckHierarchyChange(child);\n \n \t\tif (log.isDebugEnabled())\n \t\t{", "filename": "wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/d4dc0d42b115f1b8f34a344aeed513c301cf06ed", "parent": "https://github.com/apache/wicket/commit/184504bafe40650640b5df13c226dae6a679a2d3", "message": "possible npe fix\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@675322 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_24", "file": [{"additions": 23, "raw_url": "https://github.com/apache/wicket/raw/d4dc0d42b115f1b8f34a344aeed513c301cf06ed/wicket/src/main/java/org/apache/wicket/markup/html/tree/AbstractTree.java", "blob_url": "https://github.com/apache/wicket/blob/d4dc0d42b115f1b8f34a344aeed513c301cf06ed/wicket/src/main/java/org/apache/wicket/markup/html/tree/AbstractTree.java", "sha": "56357bc48cd389e24ad67e48483856e5d13550b6", "changes": 42, "status": "modified", "deletions": 19, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/markup/html/tree/AbstractTree.java?ref=d4dc0d42b115f1b8f34a344aeed513c301cf06ed", "patch": "@@ -771,26 +771,30 @@ public final void treeNodesInserted(TreeModelEvent e)\n \t\t{\n \t\t\tTreeItem parentItem = nodeToItemMap.get(parent);\n \n-\t\t\tif (parentItem.getChildren().isEmpty())\n+\t\t\tif (parentItem != null)\n \t\t\t{\n-\t\t\t\tinvalidateNode(parent, true);\n-\t\t\t}\n-\n-\t\t\tfor (int i = 0; i < e.getChildren().length; ++i)\n-\t\t\t{\n-\t\t\t\tObject node = e.getChildren()[i];\n-\t\t\t\tint index = e.getChildIndices()[i];\n-\t\t\t\tTreeItem item = newTreeItem(parentItem, node, parentItem.getLevel() + 1);\n-\t\t\t\titemContainer.add(item);\n-\t\t\t\tparentItem.getChildren().add(index, item);\n-\n-\t\t\t\tmarkTheLastButOneChildDirty(parentItem, item);\n-\n-\t\t\t\tif (!dirtyItems.contains(item))\n-\t\t\t\t\tdirtyItems.add(item);\n-\n-\t\t\t\tif (!dirtyItemsCreateDOM.contains(item))\n-\t\t\t\t\tdirtyItemsCreateDOM.add(item);\n+\t\t\t\n+\t\t\t\tif (parentItem.getChildren().isEmpty())\n+\t\t\t\t{\n+\t\t\t\t\tinvalidateNode(parent, true);\n+\t\t\t\t}\n+\t\n+\t\t\t\tfor (int i = 0; i < e.getChildren().length; ++i)\n+\t\t\t\t{\n+\t\t\t\t\tObject node = e.getChildren()[i];\n+\t\t\t\t\tint index = e.getChildIndices()[i];\n+\t\t\t\t\tTreeItem item = newTreeItem(parentItem, node, parentItem.getLevel() + 1);\n+\t\t\t\t\titemContainer.add(item);\n+\t\t\t\t\tparentItem.getChildren().add(index, item);\n+\t\n+\t\t\t\t\tmarkTheLastButOneChildDirty(parentItem, item);\n+\t\n+\t\t\t\t\tif (!dirtyItems.contains(item))\n+\t\t\t\t\t\tdirtyItems.add(item);\n+\t\n+\t\t\t\t\tif (!dirtyItemsCreateDOM.contains(item))\n+\t\t\t\t\t\tdirtyItemsCreateDOM.add(item);\n+\t\t\t\t}\n \t\t\t}\n \t\t}\n \t}", "filename": "wicket/src/main/java/org/apache/wicket/markup/html/tree/AbstractTree.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/184504bafe40650640b5df13c226dae6a679a2d3", "parent": "https://github.com/apache/wicket/commit/9970e5d703d89060bef3f4ebea4a0103dde197d8", "message": "fix npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@675321 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_25", "file": [{"additions": 39, "raw_url": "https://github.com/apache/wicket/raw/184504bafe40650640b5df13c226dae6a679a2d3/wicket/src/main/java/org/apache/wicket/markup/html/tree/AbstractTree.java", "blob_url": "https://github.com/apache/wicket/blob/184504bafe40650640b5df13c226dae6a679a2d3/wicket/src/main/java/org/apache/wicket/markup/html/tree/AbstractTree.java", "sha": "304da76078193238ee5494d8893a87e01b6979be", "changes": 78, "status": "modified", "deletions": 39, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/markup/html/tree/AbstractTree.java?ref=184504bafe40650640b5df13c226dae6a679a2d3", "patch": "@@ -49,7 +49,7 @@\n  * This class encapsulates the logic for displaying and (partial) updating the tree. Actual\n  * presentation is out of scope of this class. User should derive they own tree (if needed) from\n  * {@link BaseTree} (recommended).\n- * \n+ *\n  * @author Matej Knopp\n  */\n public abstract class AbstractTree extends Panel\n@@ -60,7 +60,7 @@\n {\n \n \t/**\n-\t * \n+\t *\n \t */\n \tprivate static final long serialVersionUID = 1L;\n \n@@ -71,7 +71,7 @@\n \t{\n \t\t/**\n \t\t * Visits the tree item.\n-\t\t * \n+\t\t *\n \t\t * @param item\n \t\t *            the item to visit\n \t\t */\n@@ -106,7 +106,7 @@\n \n \t\t/**\n \t\t * Construct.\n-\t\t * \n+\t\t *\n \t\t * @param id\n \t\t *            The component id\n \t\t * @param node\n@@ -167,7 +167,7 @@ public String getMarkupId()\n \n \t\t/**\n \t\t * Sets the children.\n-\t\t * \n+\t\t *\n \t\t * @param children\n \t\t *            The children\n \t\t */\n@@ -178,7 +178,7 @@ public void setChildren(List<TreeItem> children)\n \n \t\t/**\n \t\t * Whether to render children.\n-\t\t * \n+\t\t *\n \t\t * @return whether to render children\n \t\t */\n \t\tprotected final boolean isRenderChildren()\n@@ -348,7 +348,7 @@ public void visitItem(TreeItem item)\n \n \t\t/**\n \t\t * Construct.\n-\t\t * \n+\t\t *\n \t\t * @param id\n \t\t *            The component id\n \t\t */\n@@ -374,7 +374,7 @@ public void remove(Component component)\n \n \t\t/**\n \t\t * renders the tree items, making sure that items are rendered in the order they should be\n-\t\t * \n+\t\t *\n \t\t * @param markupStream\n \t\t */\n \t\t@Override\n@@ -470,7 +470,7 @@ public void visitItem(TreeItem item)\n \n \t/**\n \t * Tree constructor\n-\t * \n+\t *\n \t * @param id\n \t *            The component id\n \t */\n@@ -482,7 +482,7 @@ public AbstractTree(String id)\n \n \t/**\n \t * Tree constructor\n-\t * \n+\t *\n \t * @param id\n \t *            The component id\n \t * @param model\n@@ -508,7 +508,7 @@ public final void allNodesExpanded()\n \n \t/**\n \t * Returns the TreeState of this tree.\n-\t * \n+\t *\n \t * @return Tree state instance\n \t */\n \tpublic ITreeState getTreeState()\n@@ -669,7 +669,7 @@ public final void nodeUnselected(Object node)\n \n \t/**\n \t * Determines whether the TreeNode needs to be rebuilt if it is selected or deselected\n-\t * \n+\t *\n \t * @return true if the node should be rebuilt after (de)selection, false otherwise\n \t */\n \tprotected boolean isForceRebuildOnSelectionChange()\n@@ -679,7 +679,7 @@ protected boolean isForceRebuildOnSelectionChange()\n \n \t/**\n \t * Sets whether the root of the tree should be visible.\n-\t * \n+\t *\n \t * @param rootLess\n \t *            whether the root should be visible\n \t */\n@@ -734,10 +734,10 @@ public final void treeNodesChanged(TreeModelEvent e)\n \t/**\n \t * Marks the last but one visible child node of the given item as dirty, if give child is the\n \t * last item of parent.\n-\t * \n+\t *\n \t * We need this to refresh the previous visible item in case the inserted / deleted item was\n \t * last. The reason is that the line shape of previous item changes from L to |- .\n-\t * \n+\t *\n \t * @param parent\n \t * @param child\n \t */\n@@ -804,7 +804,7 @@ public final void treeNodesRemoved(TreeModelEvent e)\n \t\tObject parent = e.getTreePath().getLastPathComponent();\n \t\tTreeItem parentItem = nodeToItemMap.get(parent);\n \n-\t\tif (isNodeVisible(parent) && isNodeExpanded(parent))\n+\t\tif (parentItem != null && isNodeVisible(parent) && isNodeExpanded(parent))\n \t\t{\n \t\t\tboolean nonEmpty = !parentItem.getChildren().isEmpty();\n \t\t\tfor (int i = 0; i < e.getChildren().length; ++i)\n@@ -878,7 +878,7 @@ public final void updateTree()\n \n \t/**\n \t * Allows to intercept adding dirty components to AjaxRequestTarget.\n-\t * \n+\t *\n \t * @param target\n \t * @param component\n \t */\n@@ -993,7 +993,7 @@ public void onTargetRespond(AjaxRequestTarget target)\n \t * the component on page. Make sure that the tree model has fired the proper listener functions.\n \t * <p>\n \t * <b>You can only call this method once in a request.</b>\n-\t * \n+\t *\n \t * @param target\n \t *            Ajax request target used to send the update to the page\n \t */\n@@ -1009,7 +1009,7 @@ public final void updateTree(final AjaxRequestTarget target)\n \n \t/**\n \t * Returns whether the given node is expanded.\n-\t * \n+\t *\n \t * @param node\n \t *            The node to inspect\n \t * @return true if the node is expanded, false otherwise\n@@ -1028,7 +1028,7 @@ protected final boolean isNodeExpanded(Object node)\n \t/**\n \t * Creates the TreeState, which is an object where the current state of tree (which nodes are\n \t * expanded / collapsed, selected, ...) is stored.\n-\t * \n+\t *\n \t * @return Tree state instance\n \t */\n \tprotected ITreeState newTreeState()\n@@ -1050,10 +1050,10 @@ protected void onAfterRender()\n \t/**\n \t * This method is called after creating every TreeItem. This is the place for adding components\n \t * on item (junction links, labels, icons...)\n-\t * \n+\t *\n \t * @param item\n \t *            newly created tree item. The node can be obtained as item.getModelObject()\n-\t * \n+\t *\n \t * @param level\n \t *            how deep the component is in tree hierarchy (0 for root item)\n \t */\n@@ -1062,7 +1062,7 @@ protected void onAfterRender()\n \t/**\n \t * Builds the children for given TreeItem. It recursively traverses children of it's TreeNode\n \t * and creates TreeItem for every visible TreeNode.\n-\t * \n+\t *\n \t * @param item\n \t *            The parent tree item\n \t */\n@@ -1088,7 +1088,7 @@ private final void buildItemChildren(TreeItem item)\n \n \t/**\n \t * Builds (recursively) TreeItems for the given Iterator of TreeNodes.\n-\t * \n+\t *\n \t * @param parent\n \t * @param nodes\n \t *            The nodes to build tree items for\n@@ -1160,7 +1160,7 @@ public void visitItem(TreeItem item)\n \n \t/**\n \t * Returns the javascript used to delete removed elements.\n-\t * \n+\t *\n \t * @return The javascript\n \t */\n \tprivate String getElementsDeleteJavascript()\n@@ -1195,7 +1195,7 @@ private String getElementsDeleteJavascript()\n \n \t/**\n \t * returns the short version of item id (just the number part).\n-\t * \n+\t *\n \t * @param item\n \t *            The tree item\n \t * @return The id\n@@ -1233,7 +1233,7 @@ private final void init()\n \n \t/**\n \t * INTERNAL\n-\t * \n+\t *\n \t * @param node\n \t */\n \tpublic final void markNodeDirty(Object node)\n@@ -1243,7 +1243,7 @@ public final void markNodeDirty(Object node)\n \n \t/**\n \t * INTERNAL\n-\t * \n+\t *\n \t * @param node\n \t */\n \tpublic final void markNodeChildrenDirty(Object node)\n@@ -1264,7 +1264,7 @@ public void visitItem(TreeItem item)\n \t/**\n \t * Invalidates single node (without children). On the next render, this node will be updated.\n \t * Node will not be rebuilt, unless forceRebuild is true.\n-\t * \n+\t *\n \t * @param node\n \t *            The node to invalidate\n \t * @param forceRebuild\n@@ -1330,7 +1330,7 @@ private final void invalidateNode(Object node, boolean forceRebuild)\n \t/**\n \t * Invalidates node and it's children. On the next render, the node and children will be\n \t * updated. Node children will be rebuilt.\n-\t * \n+\t *\n \t * @param node\n \t *            The node to invalidate\n \t */\n@@ -1367,7 +1367,7 @@ public void visitItem(TreeItem item)\n \n \t/**\n \t * Returns whether the given node is visible, e.g. all it's parents are expanded.\n-\t * \n+\t *\n \t * @param node\n \t *            The node to inspect\n \t * @return true if the node is visible, false otherwise\n@@ -1392,7 +1392,7 @@ private final boolean isNodeVisible(Object node)\n \n \t/**\n \t * Returns parent node of given node.\n-\t * \n+\t *\n \t * @param node\n \t * @return\n \t */\n@@ -1412,7 +1412,7 @@ public Object getParentNode(Object node)\n \n \t/**\n \t * Creates a tree item for given node.\n-\t * \n+\t *\n \t * @param parent\n \t * @param node\n \t *            The tree node\n@@ -1427,7 +1427,7 @@ private final TreeItem newTreeItem(TreeItem parent, Object node, int level)\n \n \t/**\n \t * Creates a tree item for given node with specified id.\n-\t * \n+\t *\n \t * @param parent\n \t * @param node\n \t *            The tree node\n@@ -1444,7 +1444,7 @@ private final TreeItem newTreeItem(TreeItem parent, Object node, int level, Stri\n \n \t/**\n \t * Return the representation of node children as Iterator interface.\n-\t * \n+\t *\n \t * @param node\n \t *            The tree node\n \t * @return iterable presentation of node children\n@@ -1502,7 +1502,7 @@ private final void rebuildDirty()\n \t/**\n \t * Removes the item, appends it's id to deleteIds. This is called when a items parent is being\n \t * deleted or rebuilt.\n-\t * \n+\t *\n \t * @param item\n \t *            The item to remove\n \t */\n@@ -1544,7 +1544,7 @@ private final void updated()\n \n \t/**\n \t * Call the callback#visitItem method for the given item and all it's children.\n-\t * \n+\t *\n \t * @param item\n \t *            The tree item\n \t * @param callback\n@@ -1558,7 +1558,7 @@ private final void visitItemAndChildren(TreeItem item, IItemCallback callback)\n \n \t/**\n \t * Call the callback#visitItem method for every child of given item.\n-\t * \n+\t *\n \t * @param item\n \t *            The tree item\n \t * @param callback\n@@ -1579,7 +1579,7 @@ private final void visitItemChildren(TreeItem item, IItemCallback callback)\n \t/**\n \t * Returns the component associated with given node, or null, if node is not visible. This is\n \t * useful in situations when you want to touch the node element in html.\n-\t * \n+\t *\n \t * @param node\n \t *            Tree node\n \t * @return Component associated with given node, or null if node is not visible.", "filename": "wicket/src/main/java/org/apache/wicket/markup/html/tree/AbstractTree.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/0431d5bcccb0def666eebfb822acbd93c6b1fe2d", "parent": "https://github.com/apache/wicket/commit/5f6248ab5846c3e2c6ea6d0a7d4a347c576a0780", "message": "NPE check\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@567320 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_26", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/0431d5bcccb0def666eebfb822acbd93c6b1fe2d/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/pagestore/DiskPageStore.java", "blob_url": "https://github.com/apache/wicket/blob/0431d5bcccb0def666eebfb822acbd93c6b1fe2d/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/pagestore/DiskPageStore.java", "sha": "79ec04bb18e01b289170b9ed86829c848d596f61", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/pagestore/DiskPageStore.java?ref=0431d5bcccb0def666eebfb822acbd93c6b1fe2d", "patch": "@@ -343,7 +343,8 @@ public synchronized void unbind()\n \t\tpublic synchronized boolean exists(String pageMapName, int pageId, int versionNumber)\r\n \t\t{\r\n \t\t\tPageMapEntry entry = getPageMapEntry(pageMapName, false);\r\n-\t\t\treturn entry.getManager().getPageWindow(pageId, versionNumber, -1) != null;\r\n+\t\t\treturn entry != null &&\r\n+\t\t\t\t\tentry.getManager().getPageWindow(pageId, versionNumber, -1) != null;\r\n \t\t}\r\n \t}\r\n \r", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/pagestore/DiskPageStore.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/689669c193ebc7a5815ded063333a942450eea68", "parent": "https://github.com/apache/wicket/commit/3d465c25b8a06c19435488185e2e51e9d0c73fa5", "message": "fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@564872 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_27", "file": [{"additions": 5, "raw_url": "https://github.com/apache/wicket/raw/689669c193ebc7a5815ded063333a942450eea68/jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/resolver/AutoLinkResolver.java", "blob_url": "https://github.com/apache/wicket/blob/689669c193ebc7a5815ded063333a942450eea68/jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/resolver/AutoLinkResolver.java", "sha": "54c9e86b047fb41610ef555e7cf86231b44d9678", "changes": 6, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/resolver/AutoLinkResolver.java?ref=689669c193ebc7a5815ded063333a942450eea68", "patch": "@@ -432,7 +432,11 @@ public Component newAutoComponent(final MarkupContainer container, final String\n \t\t\t\t}\n \n \t\t\t\t// Make sure base markup pages (inheritance) are handled correct\n-\t\t\t\tMarkupContainer parentWithContainer = container.findParentWithAssociatedMarkup();\n+\t\t\t\tMarkupContainer parentWithContainer = container;\n+\t\t\t\tif (container.getParent() != null)\n+\t\t\t\t{\n+\t\t\t\t\tparentWithContainer = container.findParentWithAssociatedMarkup();\n+\t\t\t\t}\n \t\t\t\tif ((parentWithContainer instanceof Page) && !infoPath.startsWith(\".\") &&\n \t\t\t\t\t\tpage.getMarkupStream().isMergedMarkup())\n \t\t\t\t{", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/resolver/AutoLinkResolver.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/d0a9880f1e62e959e8863a8fc91b1a4f9d22c81c", "parent": "https://github.com/apache/wicket/commit/39ade271bc767fd1a9952261734239c896bbe973", "message": "avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@501497 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_28", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/d0a9880f1e62e959e8863a8fc91b1a4f9d22c81c/wicket/src/main/java/wicket/markup/html/pages/BrowserInfoPage.java", "blob_url": "https://github.com/apache/wicket/blob/d0a9880f1e62e959e8863a8fc91b1a4f9d22c81c/wicket/src/main/java/wicket/markup/html/pages/BrowserInfoPage.java", "sha": "34a06fb1d589018f0bb7068610153dc6012ca057", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/markup/html/pages/BrowserInfoPage.java?ref=d0a9880f1e62e959e8863a8fc91b1a4f9d22c81c", "patch": "@@ -70,7 +70,7 @@\n \t\tprivate String navigatorAppCodeName;\n \t\tprivate String navigatorAppName;\n \t\tprivate String navigatorAppVersion;\n-\t\tprivate Boolean navigatorCookieEnabled;\n+\t\tprivate Boolean navigatorCookieEnabled = Boolean.FALSE;\n \t\tprivate Boolean navigatorJavaEnabled = Boolean.FALSE;\n \t\tprivate String navigatorLanguage;\n \t\tprivate String navigatorPlatform;", "filename": "wicket/src/main/java/wicket/markup/html/pages/BrowserInfoPage.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/5dc077aa3ae8430fb2b3aa2c00203bbc17cebd49", "parent": "https://github.com/apache/wicket/commit/026030b3c97a624d6f10dbd12e404a121b4be5d7", "message": "avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@490365 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_29", "file": [{"additions": 16, "raw_url": "https://github.com/apache/wicket/raw/5dc077aa3ae8430fb2b3aa2c00203bbc17cebd49/wicket/src/main/java/wicket/markup/loader/InheritedMarkupMarkupLoader.java", "blob_url": "https://github.com/apache/wicket/blob/5dc077aa3ae8430fb2b3aa2c00203bbc17cebd49/wicket/src/main/java/wicket/markup/loader/InheritedMarkupMarkupLoader.java", "sha": "2f1bf56727645cfadef31b94b3499eccc1d126f1", "changes": 18, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/markup/loader/InheritedMarkupMarkupLoader.java?ref=5dc077aa3ae8430fb2b3aa2c00203bbc17cebd49", "patch": "@@ -287,7 +287,14 @@ public Object visit(MarkupElement element, MarkupFragment parent)\n \t\t\t\tString attr2 = body1.getTag().getAttributes().getString(ONLOAD);\n \t\t\t\tif ((Strings.isEmpty(attr1) == false) && (Strings.isEmpty(attr2) == false))\n \t\t\t\t{\n-\t\t\t\t\tonload = attr1 + \";\" + attr2;\n+\t\t\t\t\tif (attr1.endsWith(\";\"))\n+\t\t\t\t\t{\n+\t\t\t\t\t\tonload = attr1 + attr2;\n+\t\t\t\t\t}\n+\t\t\t\t\telse\n+\t\t\t\t\t{\n+\t\t\t\t\t\tonload = attr1 + \";\" + attr2;\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\telse if ((Strings.isEmpty(attr1) == false) && (Strings.isEmpty(attr2) == true))\n \t\t\t\t{\n@@ -308,7 +315,14 @@ else if ((Strings.isEmpty(attr1) == true) && (Strings.isEmpty(attr2) == false))\n \t\t\t\tattr2 = body1.getTag().getAttributes().getString(ONUNLOAD);\n \t\t\t\tif ((Strings.isEmpty(attr1) == false) && (Strings.isEmpty(attr2) == false))\n \t\t\t\t{\n-\t\t\t\t\tonunload = attr1 + \";\" + attr2;\n+\t\t\t\t\tif (attr1.endsWith(\";\"))\n+\t\t\t\t\t{\n+\t\t\t\t\t\tonunload = attr1 + attr2;\n+\t\t\t\t\t}\n+\t\t\t\t\telse\n+\t\t\t\t\t{\n+\t\t\t\t\t\tonunload = attr1 + \";\" + attr2;\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\telse if ((Strings.isEmpty(attr1) == false) && (Strings.isEmpty(attr2) == true))\n \t\t\t\t{", "filename": "wicket/src/main/java/wicket/markup/loader/InheritedMarkupMarkupLoader.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/875b2afde82f137b5ce359e85a9e6e82afdbc1ec", "parent": "https://github.com/apache/wicket/commit/6c8f9c4ee0e0d713d94e8709757bf9536ffb552e", "message": "avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@490284 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_30", "file": [{"additions": 31, "raw_url": "https://github.com/apache/wicket/raw/875b2afde82f137b5ce359e85a9e6e82afdbc1ec/wicket/src/main/java/wicket/markup/loader/InheritedMarkupMarkupLoader.java", "blob_url": "https://github.com/apache/wicket/blob/875b2afde82f137b5ce359e85a9e6e82afdbc1ec/wicket/src/main/java/wicket/markup/loader/InheritedMarkupMarkupLoader.java", "sha": "22c81bc42cf968f2ddb855ac2dca5aed2541f335", "changes": 36, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/markup/loader/InheritedMarkupMarkupLoader.java?ref=875b2afde82f137b5ce359e85a9e6e82afdbc1ec", "patch": "@@ -282,17 +282,43 @@ public Object visit(MarkupElement element, MarkupFragment parent)\n \t\t\t\t// Append the onload and onunload attributes\n \t\t\t\tComponentTag newBodyTag = body2.getTag().mutable();\n \n-\t\t\t\tString onload = Strings.join(\";\", newBodyTag.getAttributes().getString(ONLOAD),\n-\t\t\t\t\t\tbody1.getTag().getAttributes().getString(ONLOAD));\n-\n-\t\t\t\tString onunload = Strings.join(\";\", newBodyTag.getAttributes().getString(ONUNLOAD),\n-\t\t\t\t\t\tbody1.getTag().getAttributes().getString(ONUNLOAD));\n+\t\t\t\tString onload = null;\n+\t\t\t\tString attr1 = newBodyTag.getAttributes().getString(ONLOAD);\n+\t\t\t\tString attr2 = body1.getTag().getAttributes().getString(ONLOAD);\n+\t\t\t\tif ((Strings.isEmpty(attr1) == false) && (Strings.isEmpty(attr2) == false))\n+\t\t\t\t{\n+\t\t\t\t\tonload = attr1 + \";\" + attr2;\n+\t\t\t\t}\n+\t\t\t\telse if ((Strings.isEmpty(attr1) == false) && (Strings.isEmpty(attr2) == true))\n+\t\t\t\t{\n+\t\t\t\t\tonload = attr1;\n+\t\t\t\t}\n+\t\t\t\telse if ((Strings.isEmpty(attr1) == true) && (Strings.isEmpty(attr2) == false))\n+\t\t\t\t{\n+\t\t\t\t\tonload = attr2;\n+\t\t\t\t}\n \n \t\t\t\tif (Strings.isEmpty(onload) == false)\n \t\t\t\t{\n \t\t\t\t\tnewBodyTag.put(ONLOAD, onload);\n \t\t\t\t}\n \n+\t\t\t\tString onunload = null;\n+\t\t\t\tattr1 = newBodyTag.getAttributes().getString(ONUNLOAD);\n+\t\t\t\tattr2 = body1.getTag().getAttributes().getString(ONUNLOAD);\n+\t\t\t\tif ((Strings.isEmpty(attr1) == false) && (Strings.isEmpty(attr2) == false))\n+\t\t\t\t{\n+\t\t\t\t\tonunload = attr1 + \";\" + attr2;\n+\t\t\t\t}\n+\t\t\t\telse if ((Strings.isEmpty(attr1) == false) && (Strings.isEmpty(attr2) == true))\n+\t\t\t\t{\n+\t\t\t\t\tonunload = attr1;\n+\t\t\t\t}\n+\t\t\t\telse if ((Strings.isEmpty(attr1) == true) && (Strings.isEmpty(attr2) == false))\n+\t\t\t\t{\n+\t\t\t\t\tonunload = attr2;\n+\t\t\t\t}\n+\n \t\t\t\tif (Strings.isEmpty(onunload) == false)\n \t\t\t\t{\n \t\t\t\t\tnewBodyTag.put(ONUNLOAD, onunload);", "filename": "wicket/src/main/java/wicket/markup/loader/InheritedMarkupMarkupLoader.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/890500708fd45f139e8b4ebcfc29359d91810a09", "parent": "https://github.com/apache/wicket/commit/85429cd9bc8b001caac408c3227f2234ee231ffb", "message": "fix npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@471022 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_31", "file": [{"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/890500708fd45f139e8b4ebcfc29359d91810a09/wicket/src/main/java/wicket/util/lang/reflect/ReflectionUtils.java", "blob_url": "https://github.com/apache/wicket/blob/890500708fd45f139e8b4ebcfc29359d91810a09/wicket/src/main/java/wicket/util/lang/reflect/ReflectionUtils.java", "sha": "2e553aa3a85ac1e92986164828214edf57ccb63a", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/util/lang/reflect/ReflectionUtils.java?ref=890500708fd45f139e8b4ebcfc29359d91810a09", "patch": "@@ -26,6 +26,8 @@\n import java.util.Map;\r\n import java.util.concurrent.ConcurrentHashMap;\r\n \r\n+import wicket.util.lang.Objects;\r\n+\r\n \r\n /**\r\n  * Reflection utilities\r\n@@ -146,7 +148,7 @@ public static final boolean overrides(Method a, Method b)\n \r\n \t\t\t\tfinal Package apack = a.getDeclaringClass().getPackage();\r\n \t\t\t\tfinal Package bpack = b.getDeclaringClass().getPackage();\r\n-\t\t\t\tif (apack == bpack || apack.equals(bpack))\r\n+\t\t\t\tif (Objects.equal(apack, bpack))\r\n \t\t\t\t{\r\n \t\t\t\t\t// are in the same package\r\n \t\t\t\t\tif (!Modifier.isPrivate(amods) && !Modifier.isPrivate(bmods))\r", "filename": "wicket/src/main/java/wicket/util/lang/reflect/ReflectionUtils.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/4371fdeb662a9052383e96366241a8da4631fdcb", "parent": "https://github.com/apache/wicket/commit/46105d5e85c08b68c1f116d796985cc04df4c04e", "message": "npe check\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@462308 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_32", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/4371fdeb662a9052383e96366241a8da4631fdcb/wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java", "blob_url": "https://github.com/apache/wicket/blob/4371fdeb662a9052383e96366241a8da4631fdcb/wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java", "sha": "cc95b46bbac3c5a5cda31368ec242150699ae552", "changes": 9, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java?ref=4371fdeb662a9052383e96366241a8da4631fdcb", "patch": "@@ -143,9 +143,12 @@ public final MarkupElement nextTag() throws ParseException\n \t\t\t\tComponent c = null;\n \t\t\t\tPage page = RequestCycle.get().getResponsePage();\n \t\t\t\tString path = containerInfo.getComponentPath();\n-\t\t\t\tc = page.get(path);\n-\n-\t\t\t\tfinal String value = settings.getLocalizer().getString(messageKey, c);\n+\t\t\t\tString value = null;\n+\t\t\t\tif (page != null)\n+\t\t\t\t{\n+\t\t\t\t\tc = page.get(path);\n+\t\t\t\t\tvalue = settings.getLocalizer().getString(messageKey, c);\n+\t\t\t\t}\n \n \t\t\t\tif (value != null && (value.length() > 0))\n \t\t\t\t{", "filename": "wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/7143c452fd50dd4f386b53af58767cab09c8a7e5", "parent": "https://github.com/apache/wicket/commit/6c40584cdf94ae676e880f1b4ec6e1d1c5482930", "message": "fix npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@462304 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_33", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/7143c452fd50dd4f386b53af58767cab09c8a7e5/wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java", "blob_url": "https://github.com/apache/wicket/blob/7143c452fd50dd4f386b53af58767cab09c8a7e5/wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java", "sha": "2b957a6acca12fa45a2c3e1b262bd0cfff7db6b9", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java?ref=7143c452fd50dd4f386b53af58767cab09c8a7e5", "patch": "@@ -140,7 +140,7 @@ public final MarkupElement nextTag() throws ParseException\n \t\t\t\tfinal String value = settings.getLocalizer().getString(messageKey, null, searchStack,\n \t\t\t\t\t\tcontainerInfo.getLocale(), containerInfo.getStyle());\n \n-\t\t\t\tif (value.length() > 0)\n+\t\t\t\tif (value != null && (value.length() > 0))\n \t\t\t\t{\n \t\t\t\t\ttag.getAttributes().put(attrName, value);\n \t\t\t\t\ttag.setModified(true);", "filename": "wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/54668d26a88a734edfc7ced0d797cadc848a8aff", "parent": "https://github.com/apache/wicket/commit/c8b1e8c14e9038168ca279927de4bb8a8c47db56", "message": "NPE check\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@461813 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_34", "file": [{"additions": 5, "raw_url": "https://github.com/apache/wicket/raw/54668d26a88a734edfc7ced0d797cadc848a8aff/wicket/src/java/wicket/markup/html/link/PopupSettings.java", "blob_url": "https://github.com/apache/wicket/blob/54668d26a88a734edfc7ced0d797cadc848a8aff/wicket/src/java/wicket/markup/html/link/PopupSettings.java", "sha": "54e584807a5f1ad887b6ecbf8673b098eb352dc7", "changes": 5, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/link/PopupSettings.java?ref=54668d26a88a734edfc7ced0d797cadc848a8aff", "patch": "@@ -354,6 +354,11 @@ public PageMap getPageMap(Component callee)\n \t\t}\n \t\telse\n \t\t{\n+\t\t\tif (callee == null)\n+\t\t\t{\n+\t\t\t\tthrow new IllegalArgumentException(\n+\t\t\t\t\t\t\"when the page map is not set, argument callee may not be null\");\n+\t\t\t}\n \t\t\treturn callee.getPage().getPageMap();\n \t\t}\n \t}", "filename": "wicket/src/java/wicket/markup/html/link/PopupSettings.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/db0a4db0510392331298f7179193ef6c2b4b6053", "parent": "https://github.com/apache/wicket/commit/cfcaf4af4065396d7e1b6b940d7947c02f8d3fee", "message": "avoid NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@459438 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_35", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/db0a4db0510392331298f7179193ef6c2b4b6053/wicket-examples/src/java/wicket/examples/forminput/FormInput.java", "blob_url": "https://github.com/apache/wicket/blob/db0a4db0510392331298f7179193ef6c2b4b6053/wicket-examples/src/java/wicket/examples/forminput/FormInput.java", "sha": "31a127a8ab3c1bd381f1b1dce36f24eafd495343", "changes": 5, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-examples/src/java/wicket/examples/forminput/FormInput.java?ref=db0a4db0510392331298f7179193ef6c2b4b6053", "patch": "@@ -89,7 +89,10 @@ public FormInput()\n \t */\n \tpublic void setLocale(Locale locale)\n \t{\n-\t\tgetSession().setLocale(locale);\n+\t\tif (locale != null)\n+\t\t{\n+\t\t\tgetSession().setLocale(locale);\n+\t\t}\n \t}\n \n \t/**", "filename": "wicket-examples/src/java/wicket/examples/forminput/FormInput.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/aa24d761bfcf0cae32aa6d41589b2b7ed2b31191", "parent": "https://github.com/apache/wicket/commit/a96383b0210468fd4ee0087fec3961fb82a668ec", "message": "avoid NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@459396 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_36", "file": [{"additions": 5, "raw_url": "https://github.com/apache/wicket/raw/aa24d761bfcf0cae32aa6d41589b2b7ed2b31191/wicket/src/java/wicket/markup/html/form/Form.java", "blob_url": "https://github.com/apache/wicket/blob/aa24d761bfcf0cae32aa6d41589b2b7ed2b31191/wicket/src/java/wicket/markup/html/form/Form.java", "sha": "f63de6a4fd0ce458103997d5ff6fca87eb7abbf1", "changes": 5, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/form/Form.java?ref=aa24d761bfcf0cae32aa6d41589b2b7ed2b31191", "patch": "@@ -925,6 +925,11 @@ private void dispatchEvent(final Page page, final String url)\n \t{\n \t\tfinal RequestParameters requestParameters = getRequest().getRequestParameters();\n \t\tfinal Component component = page.get(requestParameters.getComponentPath());\n+\t\tif (component == null)\n+\t\t{\n+\t\t\tthrow new WicketRuntimeException(\n+\t\t\t\t\t\"Component not found: \" + requestParameters.getComponentPath());\n+\t\t}\n \t\tif (!component.isVisible())\n \t\t{\n \t\t\tthrow new WicketRuntimeException(", "filename": "wicket/src/java/wicket/markup/html/form/Form.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/a883f6fa318ab6547ee58dde230bda1ed4fd1e7d", "parent": "https://github.com/apache/wicket/commit/1c2dfc7ca12886772db92522331b1f2ee0b7be47", "message": "fix NPEs\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@459136 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_37", "file": [{"additions": 11, "raw_url": "https://github.com/apache/wicket/raw/a883f6fa318ab6547ee58dde230bda1ed4fd1e7d/wicket-auth-roles/src/main/java/wicket/authorization/strategies/role/metadata/MetaDataRoleAuthorizationStrategy.java", "blob_url": "https://github.com/apache/wicket/blob/a883f6fa318ab6547ee58dde230bda1ed4fd1e7d/wicket-auth-roles/src/main/java/wicket/authorization/strategies/role/metadata/MetaDataRoleAuthorizationStrategy.java", "sha": "da097ad510c7dc0ea4efaeedddb15431c87d9eb2", "changes": 13, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-auth-roles/src/main/java/wicket/authorization/strategies/role/metadata/MetaDataRoleAuthorizationStrategy.java?ref=a883f6fa318ab6547ee58dde230bda1ed4fd1e7d", "patch": "@@ -272,7 +272,12 @@ public boolean authorizeAction(final Component component, final Action action)\n \t\t\tthrow new IllegalArgumentException(\"argument action has to be not null\");\n \t\t}\n \n-\t\treturn hasAny((String[])rolesAuthorizedToPerformAction(component, action).toArray());\n+\t\tSet<String> roles = rolesAuthorizedToPerformAction(component, action);\n+\t\tif (roles != null)\n+\t\t{\n+\t\t\treturn hasAny(roles.toArray(new String[roles.size()]));\n+\t\t}\n+\t\treturn true;\n \t}\n \n \t/**\n@@ -297,7 +302,11 @@ public boolean authorizeInstantiation(final Class componentClass)\n \t\t}\n \n \t\tSet<String> roles = rolesAuthorizedToInstantiate(componentClass);\n-\t\treturn hasAny(roles.toArray(new String[roles.size()]));\n+\t\tif (roles != null)\n+\t\t{\n+\t\t\treturn hasAny(roles.toArray(new String[roles.size()]));\n+\t\t}\n+\t\treturn true;\n \t}\n \n \t/**", "filename": "wicket-auth-roles/src/main/java/wicket/authorization/strategies/role/metadata/MetaDataRoleAuthorizationStrategy.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/932f0f2728768e8fb4c209ec5dc1c6fe2f4b882d", "parent": "https://github.com/apache/wicket/commit/f6436bd1a6c935fb1b8f17f606b2eb2381c7d5d7", "message": "avoid NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@458816 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_38", "file": [{"additions": 24, "raw_url": "https://github.com/apache/wicket/raw/932f0f2728768e8fb4c209ec5dc1c6fe2f4b882d/wicket/src/java/wicket/Session.java", "blob_url": "https://github.com/apache/wicket/blob/932f0f2728768e8fb4c209ec5dc1c6fe2f4b882d/wicket/src/java/wicket/Session.java", "sha": "2c40bd72bf0986790c81a1b49f6dd75661c1a11e", "changes": 45, "status": "modified", "deletions": 21, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/Session.java?ref=932f0f2728768e8fb4c209ec5dc1c6fe2f4b882d", "patch": "@@ -755,31 +755,34 @@ protected void update()\n \t\t}\n \n \t\t// Go through all dirty entries, replicating any dirty objects\n-\t\tfor (final Iterator iterator = dirtyObjects.iterator(); iterator.hasNext();)\n+\t\tif (dirtyObjects != null)\n \t\t{\n-\t\t\tString attribute = null;\n-\t\t\tObject object = iterator.next();\n-\t\t\tif (object instanceof Page)\n+\t\t\tfor (final Iterator iterator = dirtyObjects.iterator(); iterator.hasNext();)\n \t\t\t{\n-\t\t\t\tfinal Page page = (Page)object;\n-\t\t\t\tattribute = page.getPageMap().attributeForId(page.getNumericId());\n-\t\t\t\tobject = page.getPageMapEntry();\n-\t\t\t}\n-\t\t\telse if (object instanceof PageMap)\n-\t\t\t{\n-\t\t\t\tattribute = attributeForPageMapName(((PageMap)object).getName());\n-\t\t\t}\n-\n-\t\t\t// only replicate if the object was really already in the map.\n-\t\t\t// for example stateless pages will not be in the map so they\n-\t\t\t// shouldn't be added\n-\t\t\tObject previous = getAttribute(attribute);\n-\t\t\tif (previous != null)\n-\t\t\t{\n-\t\t\t\tsetAttribute(attribute, object);\n+\t\t\t\tString attribute = null;\n+\t\t\t\tObject object = iterator.next();\n+\t\t\t\tif (object instanceof Page)\n+\t\t\t\t{\n+\t\t\t\t\tfinal Page page = (Page)object;\n+\t\t\t\t\tattribute = page.getPageMap().attributeForId(page.getNumericId());\n+\t\t\t\t\tobject = page.getPageMapEntry();\n+\t\t\t\t}\n+\t\t\t\telse if (object instanceof PageMap)\n+\t\t\t\t{\n+\t\t\t\t\tattribute = attributeForPageMapName(((PageMap)object).getName());\n+\t\t\t\t}\n+\t\n+\t\t\t\t// only replicate if the object was really already in the map.\n+\t\t\t\t// for example stateless pages will not be in the map so they\n+\t\t\t\t// shouldn't be added\n+\t\t\t\tObject previous = getAttribute(attribute);\n+\t\t\t\tif (previous != null)\n+\t\t\t\t{\n+\t\t\t\t\tsetAttribute(attribute, object);\n+\t\t\t\t}\n \t\t\t}\n+\t\t\tdirtyObjects = null;\n \t\t}\n-\t\tdirtyObjects = null;\n \t}\n \n \t/**", "filename": "wicket/src/java/wicket/Session.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/c0f64c221ccd7a742efb5b23e31b538a116c1b45", "parent": "https://github.com/apache/wicket/commit/d0d5e779ec48f144ddfcc4fa02f7101b0d5c52b5", "message": "NPE fix\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@457374 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_39", "file": [{"additions": 17, "raw_url": "https://github.com/apache/wicket/raw/c0f64c221ccd7a742efb5b23e31b538a116c1b45/wicket/src/java/wicket/markup/html/tree/TreeState.java", "blob_url": "https://github.com/apache/wicket/blob/c0f64c221ccd7a742efb5b23e31b538a116c1b45/wicket/src/java/wicket/markup/html/tree/TreeState.java", "sha": "131d4ba9e3107428ea9a3ab95e9143ab4fb98030", "changes": 30, "status": "modified", "deletions": 13, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/tree/TreeState.java?ref=c0f64c221ccd7a742efb5b23e31b538a116c1b45", "patch": "@@ -101,13 +101,17 @@ public void setSelectedPath(TreePath selection)\n \t\tsetExpandedState(selection, true);\n \t\tthis.selectedPath = selection;\n \n-\t\tif (treeSelectionModel.isPathSelected(selection))\n-\t\t{\n-\t\t\ttreeSelectionModel.removeSelectionPath(selection);\n-\t\t}\n-\t\telse\n+\t\t// if we have a multiple selection model\n+\t\tif (treeSelectionModel != null)\n \t\t{\n-\t\t\ttreeSelectionModel.addSelectionPath(selection);\n+\t\t\tif (treeSelectionModel.isPathSelected(selection))\n+\t\t\t{\n+\t\t\t\ttreeSelectionModel.removeSelectionPath(selection);\n+\t\t\t}\n+\t\t\telse\n+\t\t\t{\n+\t\t\t\ttreeSelectionModel.addSelectionPath(selection);\n+\t\t\t}\n \t\t}\n \t}\n \n@@ -149,20 +153,20 @@ public boolean isRootVisible()\n \t * Sets the <code>TreeSelectionModel</code> used to manage the selection\n \t * to new LSM.\n \t * \n-\t * @param newLSM\n+\t * @param selectionModel\n \t *\t\t\t  the new <code>TreeSelectionModel</code>\n \t */\n-\tpublic void setSelectionModel(TreeSelectionModel newLSM)\n+\tpublic void setSelectionModel(TreeSelectionModel selectionModel)\n \t{\n-\t\tif (treeSelectionModel != null)\n+\t\tif (this.treeSelectionModel != null)\n \t\t{\n-\t\t\ttreeSelectionModel.setRowMapper(null);\n+\t\t\tthis.treeSelectionModel.setRowMapper(null);\n \t\t}\n-\t\ttreeSelectionModel = newLSM;\n-\t\tif (treeSelectionModel != null)\n+\t\tif (selectionModel != null)\n \t\t{\n-\t\t\ttreeSelectionModel.setRowMapper(this);\n+\t\t\tselectionModel.setRowMapper(this);\n \t\t}\n+\t\tthis.treeSelectionModel = selectionModel;\n \t}\n \n \t/**", "filename": "wicket/src/java/wicket/markup/html/tree/TreeState.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/ba6682135f3d7d8eb186830c2fba7e33318cc56b", "parent": "https://github.com/apache/wicket/commit/be392f253276e85037d4abafa514079998f41a1e", "message": "Fix NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@456469 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_40", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/ba6682135f3d7d8eb186830c2fba7e33318cc56b/wicket/src/java/wicket/PageMap.java", "blob_url": "https://github.com/apache/wicket/blob/ba6682135f3d7d8eb186830c2fba7e33318cc56b/wicket/src/java/wicket/PageMap.java", "sha": "a9984759c1e7e43983f95e3c1628eaf589ce5e6f", "changes": 5, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/PageMap.java?ref=ba6682135f3d7d8eb186830c2fba7e33318cc56b", "patch": "@@ -130,7 +130,10 @@ public final boolean continueToOriginalDestination()\n \tpublic final Page get(final String id)\n \t{\n \t\tfinal Page page = (Page)getPages().get(id);\n-\t\tpage.setDirty(true);\n+\t\tif (page != null)\n+\t\t{\n+\t\t\tpage.setDirty(true);\n+\t\t}\n \t\treturn page;\n \t}\n ", "filename": "wicket/src/java/wicket/PageMap.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/be392f253276e85037d4abafa514079998f41a1e", "parent": "https://github.com/apache/wicket/commit/de6d46096d5dbd5a6fc94ca198c6a403cec2c266", "message": "npe check\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@456468 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_41", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/be392f253276e85037d4abafa514079998f41a1e/wicket/src/java/wicket/markup/html/form/upload/MultipartWebRequest.java", "blob_url": "https://github.com/apache/wicket/blob/be392f253276e85037d4abafa514079998f41a1e/wicket/src/java/wicket/markup/html/form/upload/MultipartWebRequest.java", "sha": "22c36c63abd7b81d4b2be2807c8f18d55d25e40b", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/form/upload/MultipartWebRequest.java?ref=be392f253276e85037d4abafa514079998f41a1e", "patch": "@@ -130,6 +130,7 @@ public Map getParameterMap()\n \t */\n \tpublic String[] getParameters(final String key)\n \t{\n-\t\treturn getParameter(key).split(\",\");\n+\t\tString val = getParameter(key);\n+\t\treturn (val != null) ? val.split(\",\") : null;\n \t}\n }", "filename": "wicket/src/java/wicket/markup/html/form/upload/MultipartWebRequest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/59b3e318762733adea00cfe3b31c5dd25e4d2147", "parent": "https://github.com/apache/wicket/commit/9575f0d93901b7163a46c2ea38f43f135ecd7d50", "message": "Move the try/catch just around the 'validator.validate()' call. Otherwise the construction of the error message will fail with NPE because 'validator' my be null", "bug_id": "wicket_42", "file": [{"additions": 21, "raw_url": "https://github.com/apache/wicket/raw/59b3e318762733adea00cfe3b31c5dd25e4d2147/wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java", "blob_url": "https://github.com/apache/wicket/blob/59b3e318762733adea00cfe3b31c5dd25e4d2147/wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java", "sha": "660cf5393620e7f470c83c30ab4eef91f6f37916", "changes": 42, "status": "modified", "deletions": 21, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java?ref=59b3e318762733adea00cfe3b31c5dd25e4d2147", "patch": "@@ -1503,38 +1503,38 @@ protected final void validateValidators()\n \n \t\tIValidator<T> validator = null;\n \n-\t\ttry\n+\t\tfor (Behavior behavior : getBehaviors())\n \t\t{\n-\t\t\tfor (Behavior behavior : getBehaviors())\n+\t\t\tvalidator = null;\n+\t\t\tif (behavior instanceof ValidatorAdapter)\n \t\t\t{\n-\t\t\t\tvalidator = null;\n-\t\t\t\tif (behavior instanceof ValidatorAdapter)\n-\t\t\t\t{\n-\t\t\t\t\tvalidator = ((ValidatorAdapter<T>)behavior).getValidator();\n-\t\t\t\t}\n-\t\t\t\telse if (behavior instanceof IValidator)\n-\t\t\t\t{\n-\t\t\t\t\tvalidator = (IValidator<T>)behavior;\n-\t\t\t\t}\n-\t\t\t\tif (validator != null)\n+\t\t\t\tvalidator = ((ValidatorAdapter<T>)behavior).getValidator();\n+\t\t\t}\n+\t\t\telse if (behavior instanceof IValidator)\n+\t\t\t{\n+\t\t\t\tvalidator = (IValidator<T>)behavior;\n+\t\t\t}\n+\t\t\tif (validator != null)\n+\t\t\t{\n+\t\t\t\tif (isNull == false || validator instanceof INullAcceptingValidator<?>)\n \t\t\t\t{\n-\t\t\t\t\tif (isNull == false || validator instanceof INullAcceptingValidator<?>)\n+\t\t\t\t\ttry\n \t\t\t\t\t{\n \t\t\t\t\t\tvalidator.validate(validatable);\n \t\t\t\t\t}\n-\t\t\t\t\tif (!isValid())\n+\t\t\t\t\tcatch (Exception e)\n \t\t\t\t\t{\n-\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\tthrow new WicketRuntimeException(\"Exception '\" + e.getMessage() +\n+\t\t\t\t\t\t\t\t\"' occurred during validation \" + validator.getClass().getName() +\n+\t\t\t\t\t\t\t\t\" on component \" + getPath(), e);\n \t\t\t\t\t}\n \t\t\t\t}\n+\t\t\t\tif (!isValid())\n+\t\t\t\t{\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tcatch (Exception e)\n-\t\t{\n-\t\t\tthrow new WicketRuntimeException(\"Exception '\" + e.getMessage() +\n-\t\t\t\t\"' occurred during validation \" + validator.getClass().getName() +\n-\t\t\t\t\" on component \" + getPath(), e);\n-\t\t}\n \t}\n \n \t/**", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/c14a1e127d7e324383ba5fc6c0c42aa1c3817449", "parent": "https://github.com/apache/wicket/commit/f5a62da5b38c504db8945a88857a53aae6b5d7b7", "message": "WICKET-3828 QueryStringWithTimestampResourceCachingStrategy#undecorateUrl(ResourceUrl) can causes NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1138591 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_43", "file": [{"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/c14a1e127d7e324383ba5fc6c0c42aa1c3817449/wicket-core/src/main/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapper.java", "blob_url": "https://github.com/apache/wicket/blob/c14a1e127d7e324383ba5fc6c0c42aa1c3817449/wicket-core/src/main/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapper.java", "sha": "cdc5ac7fd169ea5e328234d98316edcd5e1fe5ed", "changes": 7, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapper.java?ref=c14a1e127d7e324383ba5fc6c0c42aa1c3817449", "patch": "@@ -92,13 +92,6 @@ public IRequestHandler mapRequest(Request request)\n \t\t\t\t// should be stripped of timestamps\n \t\t\t\tif (i + 1 == segmentsSize)\n \t\t\t\t{\n-\t\t\t\t\t// since we need mutable page parameters for \n-\t\t\t\t\t// the caching strategy ensure they are not null \n-\t\t\t\t\tif (pageParameters == null)\n-\t\t\t\t\t{\n-\t\t\t\t\t\tpageParameters = new PageParameters();\n-\t\t\t\t\t}\n-\t\t\t\t\t\n \t\t\t\t\t// The filename + parameters eventually contain caching\n \t\t\t\t\t// related information which needs to be removed\n \t\t\t\t\tResourceUrl resourceUrl = new ResourceUrl(segment, pageParameters);", "filename": "wicket-core/src/main/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapper.java"}, {"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/c14a1e127d7e324383ba5fc6c0c42aa1c3817449/wicket-core/src/main/java/org/apache/wicket/request/resource/caching/QueryStringWithTimestampResourceCachingStrategy.java", "blob_url": "https://github.com/apache/wicket/blob/c14a1e127d7e324383ba5fc6c0c42aa1c3817449/wicket-core/src/main/java/org/apache/wicket/request/resource/caching/QueryStringWithTimestampResourceCachingStrategy.java", "sha": "654114ee84431de46c1c3c5d5d0da7a79ef9f7ef", "changes": 8, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/request/resource/caching/QueryStringWithTimestampResourceCachingStrategy.java?ref=c14a1e127d7e324383ba5fc6c0c42aa1c3817449", "patch": "@@ -17,6 +17,7 @@\n package org.apache.wicket.request.resource.caching;\n \n import org.apache.wicket.request.http.WebResponse;\n+import org.apache.wicket.request.mapper.parameter.INamedParameters;\n import org.apache.wicket.request.resource.AbstractResource;\n import org.apache.wicket.request.resource.ResourceReference;\n import org.apache.wicket.util.lang.Args;\n@@ -75,7 +76,12 @@ public void decorateUrl(ResourceUrl url, final ResourceReference reference)\n \n \tpublic void undecorateUrl(ResourceUrl url)\n \t{\n-\t\turl.getParameters().remove(timestampParameter);\n+\t\tfinal INamedParameters parameters = url.getParameters();\n+\t\t\n+\t\tif (parameters != null)\n+\t\t{\n+\t\t\tparameters.remove(timestampParameter);\n+\t\t}\n \t}\n \n \tpublic void decorateResponse(AbstractResource.ResourceResponse response)", "filename": "wicket-core/src/main/java/org/apache/wicket/request/resource/caching/QueryStringWithTimestampResourceCachingStrategy.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/f5a62da5b38c504db8945a88857a53aae6b5d7b7", "parent": "https://github.com/apache/wicket/commit/d997f7e9d4939eaa4074e185bd06ac07361e9ccd", "message": "WICKET-3828 QueryStringWithTimestampResourceCachingStrategy#undecorateUrl(ResourceUrl) can causes NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1138587 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_44", "file": [{"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/f5a62da5b38c504db8945a88857a53aae6b5d7b7/wicket-core/src/main/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapper.java", "blob_url": "https://github.com/apache/wicket/blob/f5a62da5b38c504db8945a88857a53aae6b5d7b7/wicket-core/src/main/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapper.java", "sha": "c1530cfdd5da3dbce6a5fb760db2933994625e47", "changes": 7, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapper.java?ref=f5a62da5b38c504db8945a88857a53aae6b5d7b7", "patch": "@@ -92,6 +92,13 @@ public IRequestHandler mapRequest(Request request)\n \t\t\t\t// should be stripped of timestamps\n \t\t\t\tif (i + 1 == segmentsSize)\n \t\t\t\t{\n+\t\t\t\t\t// since we need mutable page parameters for \n+\t\t\t\t\t// the caching strategy ensure they are not null \n+\t\t\t\t\tif (pageParameters == null)\n+\t\t\t\t\t{\n+\t\t\t\t\t\tpageParameters = new PageParameters();\n+\t\t\t\t\t}\n+\t\t\t\t\t\n \t\t\t\t\t// The filename + parameters eventually contain caching\n \t\t\t\t\t// related information which needs to be removed\n \t\t\t\t\tResourceUrl resourceUrl = new ResourceUrl(segment, pageParameters);", "filename": "wicket-core/src/main/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapper.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/eeb8ea14b24d8e10dc04226fbcf5203bcef93630", "parent": "https://github.com/apache/wicket/commit/0c0b44f07d5fd4410724a27ce690fb9fb6b07665", "message": "WICKET-3769 Using Session.getId() throws NPE when used through WicketSessionFilter\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1131067 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_45", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/eeb8ea14b24d8e10dc04226fbcf5203bcef93630/wicket-core/src/main/java/org/apache/wicket/Application.java", "blob_url": "https://github.com/apache/wicket/blob/eeb8ea14b24d8e10dc04226fbcf5203bcef93630/wicket-core/src/main/java/org/apache/wicket/Application.java", "sha": "b4d4d7d0494aa298aab8f3cd4a1de1612560a6c3", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/Application.java?ref=eeb8ea14b24d8e10dc04226fbcf5203bcef93630", "patch": "@@ -57,8 +57,8 @@\n import org.apache.wicket.page.IPageManagerContext;\n import org.apache.wicket.pageStore.IDataStore;\n import org.apache.wicket.pageStore.IPageStore;\n-import org.apache.wicket.protocol.http.RequestLogger;\n import org.apache.wicket.protocol.http.IRequestLogger;\n+import org.apache.wicket.protocol.http.RequestLogger;\n import org.apache.wicket.protocol.http.WebApplication;\n import org.apache.wicket.protocol.http.WebSession;\n import org.apache.wicket.request.IExceptionMapper;", "filename": "wicket-core/src/main/java/org/apache/wicket/Application.java"}, {"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/eeb8ea14b24d8e10dc04226fbcf5203bcef93630/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebApplication.java", "blob_url": "https://github.com/apache/wicket/blob/eeb8ea14b24d8e10dc04226fbcf5203bcef93630/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebApplication.java", "sha": "55f5c4da136cbf10bb2e423fd67064e840ca1930", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebApplication.java?ref=eeb8ea14b24d8e10dc04226fbcf5203bcef93630", "patch": "@@ -170,7 +170,6 @@ public WebApplication()\n \t/**\n \t * @see org.apache.wicket.Application#getApplicationKey()\n \t */\n-\t@Deprecated\n \t@Override\n \tpublic final String getApplicationKey()\n \t{\n@@ -249,7 +248,8 @@ public String getSessionAttributePrefix(final WebRequest request, String filterN\n \t\t\t\t// According to the ServletSpec, the filter might not yet been initialized\n \t\t\t\tfilterName = getWicketFilter().getFilterConfig().getFilterName();\n \t\t\t}\n-\t\t\tsessionAttributePrefix = \"wicket:\" + filterName + \":\";\n+\t\t\tString namespace = getMapperContext().getNamespace();\n+\t\t\tsessionAttributePrefix = namespace + ':' + filterName + ':';\n \t\t}\n \n \t\t// Namespacing for session attributes is provided by", "filename": "wicket-core/src/main/java/org/apache/wicket/protocol/http/WebApplication.java"}, {"additions": 5, "raw_url": "https://github.com/apache/wicket/raw/eeb8ea14b24d8e10dc04226fbcf5203bcef93630/wicket-core/src/main/java/org/apache/wicket/session/HttpSessionStore.java", "blob_url": "https://github.com/apache/wicket/blob/eeb8ea14b24d8e10dc04226fbcf5203bcef93630/wicket-core/src/main/java/org/apache/wicket/session/HttpSessionStore.java", "sha": "68e2a1a8dd33275bbb484e9f7975bd0f45c0a165", "changes": 18, "status": "modified", "deletions": 13, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/session/HttpSessionStore.java?ref=eeb8ea14b24d8e10dc04226fbcf5203bcef93630", "patch": "@@ -52,9 +52,6 @@\n \t/** log. */\n \tprivate static Logger log = LoggerFactory.getLogger(HttpSessionStore.class);\n \n-\t/** Name of session attribute under which this session is stored */\n-\tpublic static final String SESSION_ATTRIBUTE_NAME = \"session\";\n-\n \t/** */\n \tprivate final Set<UnboundListener> unboundListeners = new CopyOnWriteArraySet<UnboundListener>();\n \n@@ -65,11 +62,6 @@ public HttpSessionStore()\n \t{\n \t}\n \n-\tprivate String getSessionAttribute()\n-\t{\n-\t\treturn SESSION_ATTRIBUTE_NAME + Application.get().getApplicationKey();\n-\t}\n-\n \t/**\n \t * \n \t * @param request\n@@ -106,7 +98,7 @@ final HttpSession getHttpSession(final Request request, final boolean create)\n \t */\n \tpublic final void bind(final Request request, final Session newSession)\n \t{\n-\t\tif (getAttribute(request, getSessionAttribute()) != newSession)\n+\t\tif (getAttribute(request, Session.SESSION_ATTRIBUTE_NAME) != newSession)\n \t\t{\n \t\t\t// call template method\n \t\t\tonBind(request, newSession);\n@@ -121,21 +113,21 @@ public final void bind(final Request request, final Session newSession)\n \t\t\t\t\tnew SessionBindingListener(applicationKey, httpSession.getId()));\n \n \t\t\t\t// register the session object itself\n-\t\t\t\tsetAttribute(request, getSessionAttribute(), newSession);\n+\t\t\t\tsetAttribute(request, Session.SESSION_ATTRIBUTE_NAME, newSession);\n \t\t\t}\n \t\t}\n \t}\n \n \tpublic void flushSession(Request request, Session session)\n \t{\n-\t\tif (getAttribute(request, getSessionAttribute()) != session)\n+\t\tif (getAttribute(request, Session.SESSION_ATTRIBUTE_NAME) != session)\n \t\t{\n \t\t\t// this session is not yet bound, bind it\n \t\t\tbind(request, session);\n \t\t}\n \t\telse\n \t\t{\n-\t\t\tsetAttribute(request, getSessionAttribute(), session);\n+\t\t\tsetAttribute(request, Session.SESSION_ATTRIBUTE_NAME, session);\n \t\t}\n \t}\n \n@@ -194,7 +186,7 @@ public final Session lookup(final Request request)\n \t\tString sessionId = getSessionId(request, false);\n \t\tif (sessionId != null)\n \t\t{\n-\t\t\treturn (Session)getAttribute(request, getSessionAttribute());\n+\t\t\treturn (Session)getAttribute(request, Session.SESSION_ATTRIBUTE_NAME);\n \t\t}\n \t\treturn null;\n \t}", "filename": "wicket-core/src/main/java/org/apache/wicket/session/HttpSessionStore.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/6073fbd0585602fcca3d09e10dc89fcbc6a629c4", "parent": "https://github.com/apache/wicket/commit/90d7803ba60c644eef9bbbbf3dc792d2ab137aa6", "message": "Fixes WICKET-3632: NPE while injecting\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1095885 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_46", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/6073fbd0585602fcca3d09e10dc89fcbc6a629c4/wicket-spring/src/main/java/org/apache/wicket/spring/injection/annot/AnnotProxyFieldValueFactory.java", "blob_url": "https://github.com/apache/wicket/blob/6073fbd0585602fcca3d09e10dc89fcbc6a629c4/wicket-spring/src/main/java/org/apache/wicket/spring/injection/annot/AnnotProxyFieldValueFactory.java", "sha": "4a8880c05e58e76b6a753329d71f51fa36eeda78", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-spring/src/main/java/org/apache/wicket/spring/injection/annot/AnnotProxyFieldValueFactory.java?ref=6073fbd0585602fcca3d09e10dc89fcbc6a629c4", "patch": "@@ -188,7 +188,8 @@ private final String getBeanNameOfClass(final ApplicationContext ctx, final Clas\n \t\t\t\tBeanDefinition beanDef = getBeanDefinition(\n \t\t\t\t\t((AbstractApplicationContext)ctx).getBeanFactory(), possibility);\n \t\t\t\tif (BeanFactoryUtils.isFactoryDereference(possibility) ||\n-\t\t\t\t\tpossibility.startsWith(\"scopedTarget.\") || !beanDef.isAutowireCandidate())\n+\t\t\t\t\tpossibility.startsWith(\"scopedTarget.\") ||\n+\t\t\t\t\t(beanDef != null && !beanDef.isAutowireCandidate()))\n \t\t\t\t{\n \t\t\t\t\tit.remove();\n \t\t\t\t}", "filename": "wicket-spring/src/main/java/org/apache/wicket/spring/injection/annot/AnnotProxyFieldValueFactory.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/fc9ebb8547da7699e60d08cdfe201930ea1aeaa8", "parent": "https://github.com/apache/wicket/commit/9fc96ebde857a18c97d8b055ae2b3aeda2c60391", "message": "avoid NPE; added Args.XX test\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1083257 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_47", "file": [{"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/fc9ebb8547da7699e60d08cdfe201930ea1aeaa8/wicket-core/src/main/java/org/apache/wicket/util/tester/DiffUtil.java", "blob_url": "https://github.com/apache/wicket/blob/fc9ebb8547da7699e60d08cdfe201930ea1aeaa8/wicket-core/src/main/java/org/apache/wicket/util/tester/DiffUtil.java", "sha": "bfd276a3e4916f8dfbc37e7a449f361dd03991af", "changes": 3, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/util/tester/DiffUtil.java?ref=fc9ebb8547da7699e60d08cdfe201930ea1aeaa8", "patch": "@@ -30,6 +30,7 @@\n import org.apache.wicket.util.diff.DifferentiationFailedException;\n import org.apache.wicket.util.diff.Revision;\n import org.apache.wicket.util.io.Streams;\n+import org.apache.wicket.util.lang.Args;\n import org.apache.wicket.util.resource.ResourceStreamNotFoundException;\n import org.apache.wicket.util.string.StringList;\n import org.slf4j.Logger;\n@@ -93,6 +94,8 @@ public final static void replaceExpectedResultFile(final String document, final\n \tpublic static final boolean validatePage(String document, final Class<?> clazz,\n \t\tfinal String file, boolean failWithAssert) throws IOException\n \t{\n+\t\tArgs.notNull(document, \"document\");\n+\n \t\tString filename = clazz.getPackage().getName();\n \t\tfilename = filename.replace('.', '/');\n \t\tfilename += \"/\" + file;", "filename": "wicket-core/src/main/java/org/apache/wicket/util/tester/DiffUtil.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/47cb2c18f62fe1c167e83875607caf44391ce3db", "parent": "https://github.com/apache/wicket/commit/85aa6a16eb00bcb87a0efbabb2b38d6ddd0fb95e", "message": "WICKET-3057 NPE when deleting a TreeNode with visible children\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@998685 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_48", "file": [{"additions": 59, "raw_url": "https://github.com/apache/wicket/raw/47cb2c18f62fe1c167e83875607caf44391ce3db/wicket/src/main/java/org/apache/wicket/markup/html/tree/DefaultTreeState.java", "blob_url": "https://github.com/apache/wicket/blob/47cb2c18f62fe1c167e83875607caf44391ce3db/wicket/src/main/java/org/apache/wicket/markup/html/tree/DefaultTreeState.java", "sha": "2f9bb284d4ad9461d58563d76fd704dc28bb56eb", "changes": 76, "status": "modified", "deletions": 17, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/markup/html/tree/DefaultTreeState.java?ref=47cb2c18f62fe1c167e83875607caf44391ce3db", "patch": "@@ -20,7 +20,6 @@\n import java.util.Collection;\n import java.util.Collections;\n import java.util.HashSet;\n-import java.util.Iterator;\n import java.util.List;\n import java.util.Set;\n \n@@ -182,38 +181,81 @@ public void removeTreeStateListener(ITreeStateListener l)\n \t\tlisteners.remove(l);\n \t}\n \n-\tpublic void selectNode(Object node, boolean selected)\n+\n+\t/**\n+\t * If <code>node</code> is currently selected, it will be deselected and the\n+\t * <code>nodeUnselected</code> method will be called on all registered\n+\t * <code>ITreeStateListeners</code>.\n+\t * \n+\t * @param node\n+\t *            the node to be deselected\n+\t */\n+\tprivate void deselectNode(Object node)\n+\t{\n+\t\tif (selectedNodes.remove(node))\n+\t\t{\n+\t\t\tfor (ITreeStateListener listener : listeners.toArray(new ITreeStateListener[listeners.size()]))\n+\t\t\t{\n+\t\t\t\tlistener.nodeUnselected(node);\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Selects <code>node</code> and calls the <code>nodeSelected</code> method on all registered\n+\t * <code>ITreeStateListeners</code>. If <code>isAllowSelectMultiple</code> is <code>false</code>\n+\t * , any currently selected nodes are deselected.\n+\t * \n+\t * @param node\n+\t *            the node to be selected\n+\t */\n+\tprivate void selectNode(Object node)\n \t{\n-\t\tif (isAllowSelectMultiple() == false && selectedNodes.size() > 0)\n+\t\t// if multiple selections are not allowed, deselect current selections\n+\t\tif (selectedNodes.size() > 0 && !isAllowSelectMultiple())\n \t\t{\n-\t\t\tfor (Iterator<Object> i = selectedNodes.iterator(); i.hasNext();)\n+\t\t\tfor (Object currentlySelectedNode : selectedNodes.toArray())\n \t\t\t{\n-\t\t\t\tObject current = i.next();\n-\t\t\t\tif (current.equals(node) == false)\n+\t\t\t\tif (!currentlySelectedNode.equals(node))\n \t\t\t\t{\n-\t\t\t\t\ti.remove();\n-\t\t\t\t\tfor (ITreeStateListener listener : listeners)\n-\t\t\t\t\t\tlistener.nodeUnselected(current);\n+\t\t\t\t\tdeselectNode(currentlySelectedNode);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n \n-\t\tif (selected == true && selectedNodes.contains(node) == false)\n+\t\tif (!selectedNodes.contains(node))\n \t\t{\n-\n \t\t\tselectedNodes.add(node);\n-\t\t\tfor (ITreeStateListener listener : listeners)\n+\t\t\tfor (ITreeStateListener listener : listeners.toArray(new ITreeStateListener[listeners.size()]))\n+\t\t\t{\n \t\t\t\tlistener.nodeSelected(node);\n+\t\t\t}\n \t\t}\n-\t\telse if (selected == false && selectedNodes.contains(node) == true)\n-\t\t{\n-\t\t\tselectedNodes.remove(node);\n+\t}\n \n-\t\t\tfor (ITreeStateListener listener : listeners)\n-\t\t\t\tlistener.nodeUnselected(node);\n+\t/**\n+\t * Selects or deselects <code>node</code> and calls the corresponding method on all registered\n+\t * <code>ITreeStateListeners</code>. If <code>isAllowSelectMultiple</code> is <code>false</code>\n+\t * , any currently selected nodes are deselected.\n+\t * \n+\t * @param node\n+\t *            the node to be selected\n+\t * @param selected\n+\t *            true if node is to be selected, false if node is to be deselected\n+\t */\n+\tpublic void selectNode(Object node, boolean selected)\n+\t{\n+\t\tif (selected)\n+\t\t{\n+\t\t\tselectNode(node);\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tdeselectNode(node);\n \t\t}\n \t}\n \n+\n \t/**\n \t * @see org.apache.wicket.markup.html.tree.ITreeState#setAllowSelectMultiple(boolean)\n \t */", "filename": "wicket/src/main/java/org/apache/wicket/markup/html/tree/DefaultTreeState.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/7b06e4d36c3a28f7ec46458c0c1f2cb4beb72915", "parent": "https://github.com/apache/wicket/commit/94d9215ad928bb5542e3969e81a25562405b1c3d", "message": "fixed npe in palette\nIssue: WICKET-2852\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@988782 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_49", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/7b06e4d36c3a28f7ec46458c0c1f2cb4beb72915/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/form/palette/component/Recorder.java", "blob_url": "https://github.com/apache/wicket/blob/7b06e4d36c3a28f7ec46458c0c1f2cb4beb72915/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/form/palette/component/Recorder.java", "sha": "53c02ac83ba57a1651d7312c2da9e3fe4e1625e0", "changes": 4, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/form/palette/component/Recorder.java?ref=7b06e4d36c3a28f7ec46458c0c1f2cb4beb72915", "patch": "@@ -89,6 +89,10 @@ protected void onBeforeRender()\n \t\t{\n \t\t\tinitIds();\n \t\t}\n+\t\telse if (ids == null)\n+\t\t{\n+\t\t\tids = EMPTY_IDS;\n+\t\t}\n \t\tattached = true;\n \t}\n ", "filename": "wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/form/palette/component/Recorder.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/b02ba6d5f4810ab70f0144f9c16273311b976b9a", "parent": "https://github.com/apache/wicket/commit/9771e6b210e353c3e91aeefbf7c7214ef30b6d75", "message": "fixed: NPE after application hot redeployment (MarkupCache)\nIssue: WICKET-2475\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@816867 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_50", "file": [{"additions": 8, "raw_url": "https://github.com/apache/wicket/raw/b02ba6d5f4810ab70f0144f9c16273311b976b9a/wicket/src/main/java/org/apache/wicket/markup/MarkupCache.java", "blob_url": "https://github.com/apache/wicket/blob/b02ba6d5f4810ab70f0144f9c16273311b976b9a/wicket/src/main/java/org/apache/wicket/markup/MarkupCache.java", "sha": "3328337be9948e0ad20976b1f8e96de96be93aba", "changes": 8, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/markup/MarkupCache.java?ref=b02ba6d5f4810ab70f0144f9c16273311b976b9a", "patch": "@@ -694,6 +694,10 @@ public void clear()\n \t\t */\n \t\tpublic boolean containsKey(Object key)\n \t\t{\n+\t\t\tif (key == null)\n+\t\t\t{\n+\t\t\t\treturn false;\n+\t\t\t}\n \t\t\treturn cache.containsKey(key);\n \t\t}\n \n@@ -702,6 +706,10 @@ public boolean containsKey(Object key)\n \t\t */\n \t\tpublic V get(Object key)\n \t\t{\n+\t\t\tif (key == null)\n+\t\t\t{\n+\t\t\t\treturn null;\n+\t\t\t}\n \t\t\treturn cache.get(key);\n \t\t}\n ", "filename": "wicket/src/main/java/org/apache/wicket/markup/MarkupCache.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/be4649eb00a0b623c790ddea840873c46740a734", "parent": "https://github.com/apache/wicket/commit/b50c8c61e7c832d34fab13704417f7329aca8e75", "message": "WICKET-2418 NPE in ResourceReference\nIssue: WICKET-2418\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@801321 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_51", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/be4649eb00a0b623c790ddea840873c46740a734/wicket/src/main/java/org/apache/wicket/ResourceReference.java", "blob_url": "https://github.com/apache/wicket/blob/be4649eb00a0b623c790ddea840873c46740a734/wicket/src/main/java/org/apache/wicket/ResourceReference.java", "sha": "d2237644f7be5d4b40927e118de129f70535280c", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/ResourceReference.java?ref=be4649eb00a0b623c790ddea840873c46740a734", "patch": "@@ -151,10 +151,10 @@ public final void bind(final Application application)\n \t\t\t\t\t\t// still null? try to see whether it is a package\n \t\t\t\t\t\t// resource that should\n \t\t\t\t\t\t// be lazily loaded\n-\t\t\t\t\t\tPackageResource packageResource = PackageResource.get(getScope(), name);\n+\t\t\t\t\t\tresource = PackageResource.get(getScope(), name);\n \t\t\t\t\t\t// will throw an exception if not found, so if we come\n \t\t\t\t\t\t// here, it was found\n-\t\t\t\t\t\tsharedResources.add(name, packageResource);\n+\t\t\t\t\t\tsharedResources.add(name, resource);\n \t\t\t\t\t}\n \t\t\t\t}\n ", "filename": "wicket/src/main/java/org/apache/wicket/ResourceReference.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/ae7d7b55862ada19c0e714c95cbfb1a273234c48", "parent": "https://github.com/apache/wicket/commit/28583a29c3e8367d93105c097f9826302809a477", "message": "WICKET-2330 fixed npe in ajaxformsubmitbehavior\nIssue: WICKET-2330\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@785706 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_52", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/ae7d7b55862ada19c0e714c95cbfb1a273234c48/wicket/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java", "blob_url": "https://github.com/apache/wicket/blob/ae7d7b55862ada19c0e714c95cbfb1a273234c48/wicket/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java", "sha": "c0cb6acb65b5ab20b7ba23652e4590c81017d813", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java?ref=ae7d7b55862ada19c0e714c95cbfb1a273234c48", "patch": "@@ -1283,12 +1283,13 @@ private void submitAjaxFormSubmitBehavior(final Component component,\n \t\tForm<?> form = null;\n \t\ttry\n \t\t{\n-\t\t\tField formField = AjaxFormSubmitBehavior.class.getDeclaredField(\"form\");\n+\t\t\tField formField = AjaxFormSubmitBehavior.class.getDeclaredField(\"__form\");\n \t\t\tformField.setAccessible(true);\n \t\t\tform = (Form<?>)formField.get(behavior);\n \t\t}\n \t\tcatch (Exception e)\n \t\t{\n+\t\t\te.printStackTrace();\n \t\t\tfail(e.getMessage());\n \t\t}\n ", "filename": "wicket/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/28583a29c3e8367d93105c097f9826302809a477", "parent": "https://github.com/apache/wicket/commit/8ee095bf725cacd450d72411e609f007404df3f4", "message": "WICKET-2330 fixed npe in ajaxformsubmitbehavior\nIssue: WICKET-2330\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@785696 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_53", "file": [{"additions": 11, "raw_url": "https://github.com/apache/wicket/raw/28583a29c3e8367d93105c097f9826302809a477/wicket/src/main/java/org/apache/wicket/ajax/form/AjaxFormSubmitBehavior.java", "blob_url": "https://github.com/apache/wicket/blob/28583a29c3e8367d93105c097f9826302809a477/wicket/src/main/java/org/apache/wicket/ajax/form/AjaxFormSubmitBehavior.java", "sha": "3e7cd63946b080b671a32656f32cadf62d56fee4", "changes": 18, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/ajax/form/AjaxFormSubmitBehavior.java?ref=28583a29c3e8367d93105c097f9826302809a477", "patch": "@@ -40,7 +40,11 @@\n {\n \tprivate static final long serialVersionUID = 1L;\n \n-\tprivate Form<?> form;\n+\t/**\n+\t * should never be accessed directly (thus the __ cause its overkil to create a super class),\n+\t * instead always use #getForm()\n+\t */\n+\tprivate Form<?> __form;\n \n \t/**\n \t * Constructor. This constructor can only be used when the component this behavior is attached\n@@ -65,7 +69,7 @@ public AjaxFormSubmitBehavior(String event)\n \tpublic AjaxFormSubmitBehavior(Form<?> form, String event)\n \t{\n \t\tsuper(event);\n-\t\tthis.form = form;\n+\t\t__form = form;\n \n \t\tif (form != null)\n \t\t{\n@@ -79,20 +83,20 @@ public AjaxFormSubmitBehavior(Form<?> form, String event)\n \t */\n \tprotected Form<?> getForm()\n \t{\n-\t\tif (form == null)\n+\t\tif (__form == null)\n \t\t{\n \t\t\t// try to find form in the hierarchy of owning component\n \t\t\tComponent component = getComponent();\n-\t\t\tform = component.findParent(Form.class);\n-\t\t\tif (form == null)\n+\t\t\t__form = component.findParent(Form.class);\n+\t\t\tif (__form == null)\n \t\t\t{\n \t\t\t\tthrow new IllegalStateException(\n \t\t\t\t\t\"form was not specified in the constructor and cannot \"\n \t\t\t\t\t\t+ \"be found in the hierarchy of the component this behavior \"\n \t\t\t\t\t\t+ \"is attached to\");\n \t\t\t}\n \t\t}\n-\t\treturn form;\n+\t\treturn __form;\n \t}\n \n \t/**\n@@ -139,7 +143,7 @@ protected void onEvent(AjaxRequestTarget target)\n \t\t{\n \t\t\tonSubmit(target);\n \t\t}\n-\t\tif (form.findParent(Page.class) != null)\n+\t\tif (getForm().findParent(Page.class) != null)\n \t\t{\n \t\t\t/*\n \t\t\t * there can be cases when a form is replaced with another component in the onsubmit()", "filename": "wicket/src/main/java/org/apache/wicket/ajax/form/AjaxFormSubmitBehavior.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/c454713d0b9258bfcbf6368eb081e1d04e3251b0", "parent": "https://github.com/apache/wicket/commit/9d0afa0c9e039937af0894cc31754a4f359564bc", "message": "fixed wicket-examples/nested NPE problem\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@769558 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_54", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/c454713d0b9258bfcbf6368eb081e1d04e3251b0/wicket/src/main/java/org/apache/wicket/model/util/WildcardListModel.java", "blob_url": "https://github.com/apache/wicket/blob/c454713d0b9258bfcbf6368eb081e1d04e3251b0/wicket/src/main/java/org/apache/wicket/model/util/WildcardListModel.java", "sha": "059e7c73c363fc46f8eaedf37ffdf835b3aa9019", "changes": 4, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/model/util/WildcardListModel.java?ref=c454713d0b9258bfcbf6368eb081e1d04e3251b0", "patch": "@@ -53,6 +53,10 @@ public WildcardListModel(List<? extends T> list)\n \t@Override\n \tprotected List<? extends T> createSerializableVersionOf(List<? extends T> object)\n \t{\n+\t\tif (object == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n \t\treturn new ArrayList<T>(object);\n \t}\n }\n\\ No newline at end of file", "filename": "wicket/src/main/java/org/apache/wicket/model/util/WildcardListModel.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/999e86006793c58b45fb0bc09bd55fde1db42b49", "parent": "https://github.com/apache/wicket/commit/6b2a347b3d7e8e5959114ae57ff0a8666743d4f4", "message": "fixed wicket-2083: NPE when clearing DateTimeField \n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@744182 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_55", "file": [{"additions": 9, "raw_url": "https://github.com/apache/wicket/raw/999e86006793c58b45fb0bc09bd55fde1db42b49/wicket-datetime/src/main/java/org/apache/wicket/extensions/yui/calendar/DateTimeField.java", "blob_url": "https://github.com/apache/wicket/blob/999e86006793c58b45fb0bc09bd55fde1db42b49/wicket-datetime/src/main/java/org/apache/wicket/extensions/yui/calendar/DateTimeField.java", "sha": "c521336399874ccf22c7c29cdb9070d3dd3c99ac", "changes": 10, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-datetime/src/main/java/org/apache/wicket/extensions/yui/calendar/DateTimeField.java?ref=999e86006793c58b45fb0bc09bd55fde1db42b49", "patch": "@@ -228,7 +228,15 @@ public void setAmOrPm(AM_PM amOrPm)\n \t */\n \tpublic void setDate(Date date)\n \t{\n-\t\tthis.date = (date != null) ? new MutableDateTime(date) : null;\n+\t\tif (date == null) {\n+\t\t\tthis.date = null;\n+\t\t\tsetDefaultModelObject(null);\n+\t\t\tsetHours(null);\n+\t\t\tsetMinutes(null);\n+\t\t\treturn;\n+\t\t}\n+\t\t\n+\t\tthis.date = new MutableDateTime(date);\n \t\tsetDefaultModelObject(date);\n \n \t\tInteger hours = getHours();", "filename": "wicket-datetime/src/main/java/org/apache/wicket/extensions/yui/calendar/DateTimeField.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/c6b0a283654f71e249585bdedd30b30cf1c59384", "parent": "https://github.com/apache/wicket/commit/9db3853cce2d7fc940687edae387e8e24207f084", "message": "wicket-1583: NPE in EnclosureResolver\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@688515 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_56", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/c6b0a283654f71e249585bdedd30b30cf1c59384/wicket/src/main/java/org/apache/wicket/markup/resolver/EnclosureResolver.java", "blob_url": "https://github.com/apache/wicket/blob/c6b0a283654f71e249585bdedd30b30cf1c59384/wicket/src/main/java/org/apache/wicket/markup/resolver/EnclosureResolver.java", "sha": "451b1c70566bf4fb359274ba998fb1f39685e1f0", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/markup/resolver/EnclosureResolver.java?ref=c6b0a283654f71e249585bdedd30b30cf1c59384", "patch": "@@ -56,8 +56,8 @@ public boolean resolve(final MarkupContainer container, final MarkupStream marku\n \t\t\t{\n \t\t\t\tid = \"enclosure-\" + container.getPage().getAutoIndex();\n \t\t\t}\n-\t\t\tfinal Enclosure enclosure = new Enclosure(id, tag.getString(\n-\t\t\t\tEnclosureHandler.CHILD_ATTRIBUTE).toString());\n+\t\t\tfinal Enclosure enclosure = new Enclosure(id,\n+\t\t\t\ttag.getString(EnclosureHandler.CHILD_ATTRIBUTE));\n \t\t\tcontainer.autoAdd(enclosure, markupStream);\n \n \t\t\t// Yes, we handled the tag", "filename": "wicket/src/main/java/org/apache/wicket/markup/resolver/EnclosureResolver.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/2f0d10586617093046cf60909622f2c8f5be8d6a", "parent": "https://github.com/apache/wicket/commit/8cd64ee40d1ac5444d7136e9a68c71010085f65a", "message": "WICKET-1780 NPE in feedback panel\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@683906 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_57", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/2f0d10586617093046cf60909622f2c8f5be8d6a/wicket/src/main/java/org/apache/wicket/markup/html/panel/FeedbackPanel.java", "blob_url": "https://github.com/apache/wicket/blob/2f0d10586617093046cf60909622f2c8f5be8d6a/wicket/src/main/java/org/apache/wicket/markup/html/panel/FeedbackPanel.java", "sha": "7182eaeb2ce712193137b77aef7869d323feeae0", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/markup/html/panel/FeedbackPanel.java?ref=2f0d10586617093046cf60909622f2c8f5be8d6a", "patch": "@@ -326,7 +326,8 @@ protected FeedbackMessagesModel newFeedbackMessagesModel()\n \t */\n \tprotected Component newMessageDisplayComponent(String id, FeedbackMessage message)\n \t{\n-\t\tLabel label = new Label(id, message.getMessage().toString());\n+\t\tSerializable serializable = message.getMessage();\n+\t\tLabel label = new Label(id, (serializable == null) ? \"\" : serializable.toString());\n \t\tlabel.setEscapeModelStrings(FeedbackPanel.this.getEscapeModelStrings());\n \t\treturn label;\n \t}", "filename": "wicket/src/main/java/org/apache/wicket/markup/html/panel/FeedbackPanel.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/8cd64ee40d1ac5444d7136e9a68c71010085f65a", "parent": "https://github.com/apache/wicket/commit/02c85dba31a0d5c315f5e90a994df2263a61b2d9", "message": "patch possible npe when interface is passed in\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@683701 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_58", "file": [{"additions": 13, "raw_url": "https://github.com/apache/wicket/raw/8cd64ee40d1ac5444d7136e9a68c71010085f65a/wicket/src/main/java/org/apache/wicket/resource/loader/ComponentStringResourceLoader.java", "blob_url": "https://github.com/apache/wicket/blob/8cd64ee40d1ac5444d7136e9a68c71010085f65a/wicket/src/main/java/org/apache/wicket/resource/loader/ComponentStringResourceLoader.java", "sha": "a9554af89fb74d05902eade24f4accfe338a6fbc", "changes": 20, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/resource/loader/ComponentStringResourceLoader.java?ref=8cd64ee40d1ac5444d7136e9a68c71010085f65a", "patch": "@@ -110,7 +110,7 @@ public ComponentStringResourceLoader()\n \t * @see org.apache.wicket.resource.loader.IStringResourceLoader#loadStringResource(java.lang.Class,\n \t *      java.lang.String, java.util.Locale, java.lang.String)\n \t */\n-\tpublic String loadStringResource(Class< ? > clazz, final String key, final Locale locale,\n+\tpublic String loadStringResource(Class<?> clazz, final String key, final Locale locale,\n \t\tfinal String style)\n \t{\n \t\tif (clazz == null)\n@@ -132,7 +132,7 @@ public String loadStringResource(Class< ? > clazz, final String key, final Local\n \t\t\tResourceNameIterator iter = new ResourceNameIterator(path, style, locale, null);\n \t\t\twhile (iter.hasNext())\n \t\t\t{\n-\t\t\t\tString newPath = (String)iter.next();\n+\t\t\t\tString newPath = iter.next();\n \n \t\t\t\tfinal Properties props = propertiesFactory.load(clazz, newPath);\n \t\t\t\tif (props != null)\n@@ -159,6 +159,12 @@ public String loadStringResource(Class< ? > clazz, final String key, final Local\n \n \t\t\t// Move to the next superclass\n \t\t\tclazz = clazz.getSuperclass();\n+\n+\t\t\tif (clazz == null)\n+\t\t\t{\n+\t\t\t\t// nothing more to search, done\n+\t\t\t\tbreak;\n+\t\t\t}\n \t\t}\n \n \t\t// not found\n@@ -188,12 +194,12 @@ public String loadStringResource(final Component component, final String key)\n \n \t\t// The reason why we need to create that stack is because we need to\n \t\t// walk it downwards starting with Page down to the Component\n-\t\tList<Class< ? >> searchStack = getComponentStack(component);\n+\t\tList<Class<?>> searchStack = getComponentStack(component);\n \n \t\t// Walk the component hierarchy down from page to the component\n \t\tfor (int i = searchStack.size() - 1; (i >= 0) && (string == null); i--)\n \t\t{\n-\t\t\tClass< ? > clazz = searchStack.get(i);\n+\t\t\tClass<?> clazz = searchStack.get(i);\n \n \t\t\t// First, try the fully qualified resource name relative to the\n \t\t\t// component on the path from page down.\n@@ -226,10 +232,10 @@ public String loadStringResource(final Component component, final String key)\n \t *            The component to evaluate\n \t * @return The stack of classes\n \t */\n-\tprivate List<Class< ? >> getComponentStack(final Component component)\n+\tprivate List<Class<?>> getComponentStack(final Component component)\n \t{\n \t\t// Build the search stack\n-\t\tfinal List<Class< ? >> searchStack = new ArrayList<Class< ? >>();\n+\t\tfinal List<Class<?>> searchStack = new ArrayList<Class<?>>();\n \t\tsearchStack.add(component.getClass());\n \n \t\tif (!(component instanceof Page))\n@@ -258,7 +264,7 @@ public String loadStringResource(final Component component, final String key)\n \t *            The class to check\n \t * @return Whether to stop the search\n \t */\n-\tprotected boolean isStopResourceSearch(final Class< ? > clazz)\n+\tprotected boolean isStopResourceSearch(final Class<?> clazz)\n \t{\n \t\tif ((clazz == null) || clazz.equals(Object.class) || clazz.equals(Application.class))\n \t\t{", "filename": "wicket/src/main/java/org/apache/wicket/resource/loader/ComponentStringResourceLoader.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/8468de343669cdd482f41359acaaadc6ae4d5653", "parent": "https://github.com/apache/wicket/commit/7536a80d5183c8a00050dae51a0fa008ab0c40d9", "message": "WICKET-1415: BundleStringResourceLoader throws NPE if component is null\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@640155 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_59", "file": [{"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/8468de343669cdd482f41359acaaadc6ae4d5653/jdk-1.4/wicket/src/main/java/org/apache/wicket/resource/loader/BundleStringResourceLoader.java", "blob_url": "https://github.com/apache/wicket/blob/8468de343669cdd482f41359acaaadc6ae4d5653/jdk-1.4/wicket/src/main/java/org/apache/wicket/resource/loader/BundleStringResourceLoader.java", "sha": "2651fcf450c59a145e6cfa843eea3b89a648ef39", "changes": 5, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/resource/loader/BundleStringResourceLoader.java?ref=8468de343669cdd482f41359acaaadc6ae4d5653", "patch": "@@ -62,7 +62,7 @@ public BundleStringResourceLoader(final String bundleName)\n \t * @return The string resource value or null if resource not found\n \t */\n \tpublic final String loadStringResource(final Class clazz, final String key, Locale locale,\n-\t\t\tfinal String style)\n+\t\tfinal String style)\n \t{\n \t\tif (locale == null)\n \t\t{\n@@ -91,6 +91,7 @@ public final String loadStringResource(final Class clazz, final String key, Loca\n \t */\n \tpublic final String loadStringResource(final Component component, final String key)\n \t{\n-\t\treturn loadStringResource(null, key, component.getLocale(), null);\n+\t\tfinal Locale locale = (component != null) ? component.getLocale() : null;\n+\t\treturn loadStringResource(null, key, locale, null);\n \t}\n }", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/resource/loader/BundleStringResourceLoader.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/046c766581b8291edf1ece12ea3116edbe3fef89", "parent": "https://github.com/apache/wicket/commit/d09448e754f57eb0cce6127047560a66e6560c04", "message": "WICKET-1396: Add more explicit exception for NPE in HeaderResponse.java\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@635053 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_60", "file": [{"additions": 52, "raw_url": "https://github.com/apache/wicket/raw/046c766581b8291edf1ece12ea3116edbe3fef89/jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/html/internal/HeaderResponse.java", "blob_url": "https://github.com/apache/wicket/blob/046c766581b8291edf1ece12ea3116edbe3fef89/jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/html/internal/HeaderResponse.java", "sha": "3dbdcd4d18bddc05de20058996225c6a677b8a90", "changes": 56, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/html/internal/HeaderResponse.java?ref=046c766581b8291edf1ece12ea3116edbe3fef89", "patch": "@@ -29,6 +29,7 @@\n import org.apache.wicket.markup.html.WicketEventReference;\n import org.apache.wicket.response.NullResponse;\n import org.apache.wicket.util.string.JavascriptUtils;\n+import org.apache.wicket.util.string.Strings;\n \n \n /**\n@@ -69,6 +70,10 @@ public final void markRendered(Object object)\n \t */\n \tpublic void renderCSSReference(ResourceReference reference)\n \t{\n+\t\tif (reference == null)\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"reference cannot be null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\tCharSequence url = RequestCycle.get().urlFor(reference);\n@@ -82,6 +87,10 @@ public void renderCSSReference(ResourceReference reference)\n \t */\n \tpublic void renderCSSReference(ResourceReference reference, String media)\n \t{\n+\t\tif (reference == null)\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"reference cannot be null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\tCharSequence url = RequestCycle.get().urlFor(reference);\n@@ -94,6 +103,10 @@ public void renderCSSReference(ResourceReference reference, String media)\n \t */\n \tpublic void renderCSSReference(String url)\n \t{\n+\t\tif (Strings.isEmpty(url))\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"url cannot be empty or null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\trenderCSSReference(url, null);\n@@ -106,6 +119,10 @@ public void renderCSSReference(String url)\n \t */\n \tpublic void renderCSSReference(String url, String media)\n \t{\n+\t\tif (Strings.isEmpty(url))\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"url cannot be empty or null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\tList token = Arrays.asList(new Object[] { \"css\", url, media });\n@@ -131,6 +148,10 @@ public void renderCSSReference(String url, String media)\n \t */\n \tpublic void renderJavascriptReference(ResourceReference reference)\n \t{\n+\t\tif (reference == null)\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"reference cannot be null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\tCharSequence url = RequestCycle.get().urlFor(reference);\n@@ -144,6 +165,10 @@ public void renderJavascriptReference(ResourceReference reference)\n \t */\n \tpublic void renderJavascriptReference(ResourceReference reference, String id)\n \t{\n+\t\tif (reference == null)\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"reference cannot be null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\tCharSequence url = RequestCycle.get().urlFor(reference);\n@@ -156,6 +181,10 @@ public void renderJavascriptReference(ResourceReference reference, String id)\n \t */\n \tpublic void renderJavascriptReference(String url)\n \t{\n+\t\tif (Strings.isEmpty(url))\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"url cannot be empty or null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\tList token = Arrays.asList(new Object[] { \"javascript\", url });\n@@ -173,6 +202,10 @@ public void renderJavascriptReference(String url)\n \t */\n \tpublic void renderJavascriptReference(String url, String id)\n \t{\n+\t\tif (Strings.isEmpty(url))\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"url cannot be empty or null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\tList token1 = Arrays.asList(new Object[] { \"javascript\", url });\n@@ -192,6 +225,10 @@ public void renderJavascriptReference(String url, String id)\n \t */\n \tpublic void renderJavascript(CharSequence javascript, String id)\n \t{\n+\t\tif (javascript == null)\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"javascript cannot be null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\tList token = Arrays.asList(new Object[] { javascript.toString(), id });\n@@ -208,6 +245,10 @@ public void renderJavascript(CharSequence javascript, String id)\n \t */\n \tpublic void renderString(CharSequence string)\n \t{\n+\t\tif (string == null)\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"string cannot be null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\tString token = string.toString();\n@@ -232,6 +273,10 @@ public final boolean wasRendered(Object object)\n \t */\n \tpublic void renderOnDomReadyJavascript(String javascript)\n \t{\n+\t\tif (javascript == null)\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"javascript cannot be null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\trenderOnEventJavacript(\"window\", \"domready\", javascript);\n@@ -243,6 +288,10 @@ public void renderOnDomReadyJavascript(String javascript)\n \t */\n \tpublic void renderOnLoadJavascript(String javascript)\n \t{\n+\t\tif (javascript == null)\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\"javascript cannot be null\");\n+\t\t}\n \t\tif (!closed)\n \t\t{\n \t\t\trenderOnEventJavacript(\"window\", \"load\", javascript);\n@@ -258,13 +307,12 @@ public void renderOnEventJavacript(String target, String event, String javascrip\n \t{\n \t\tif (!closed)\n \t\t{\n-\t\t\tList token = Arrays\n-\t\t\t\t\t.asList(new Object[] { \"javascript-event\", target, event, javascript });\n+\t\t\tList token = Arrays.asList(new Object[] { \"javascript-event\", target, event, javascript });\n \t\t\tif (wasRendered(token) == false)\n \t\t\t{\n \t\t\t\trenderJavascriptReference(WicketEventReference.INSTANCE);\n \t\t\t\tJavascriptUtils.writeJavascript(getResponse(), \"Wicket.Event.add(\" + target +\n-\t\t\t\t\t\t\", \\\"\" + event + \"\\\", function() { \" + javascript + \";});\");\n+\t\t\t\t\t\", \\\"\" + event + \"\\\", function() { \" + javascript + \";});\");\n \t\t\t\tmarkRendered(token);\n \t\t\t}\n \t\t}\n@@ -275,7 +323,7 @@ public void renderOnEventJavacript(String target, String event, String javascrip\n \t */\n \tpublic void close()\n \t{\n-\t\tthis.closed = true;\n+\t\tclosed = true;\n \t}\n \n \t/**", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/html/internal/HeaderResponse.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/f97fb7f69aea695b566c5d32a7880fbc0a307f1d", "parent": "https://github.com/apache/wicket/commit/5146fb55b0e7c36688550ce41e4ebba7bad90604", "message": "(WICKET-790) WebExternalResourceStream.close() throws NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@559834 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_61", "file": [{"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/f97fb7f69aea695b566c5d32a7880fbc0a307f1d/jdk-1.4/wicket/src/main/java/org/apache/wicket/util/resource/WebExternalResourceStream.java", "blob_url": "https://github.com/apache/wicket/blob/f97fb7f69aea695b566c5d32a7880fbc0a307f1d/jdk-1.4/wicket/src/main/java/org/apache/wicket/util/resource/WebExternalResourceStream.java", "sha": "e0d220baf324505636d5857a05ab3b29a9120a66", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/util/resource/WebExternalResourceStream.java?ref=f97fb7f69aea695b566c5d32a7880fbc0a307f1d", "patch": "@@ -75,7 +75,9 @@ public long length()\n \n \tpublic void close() throws IOException\n \t{\n-\t\tin.close();\n+\t\t// getInputStream() is not always called (WICKET-790)\n+\t\tif (in != null)\n+\t\t\tin.close();\n \t}\n \n \tpublic Time lastModifiedTime()", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/util/resource/WebExternalResourceStream.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/2c194180a5c2660a70ae1121cd12ce355afebc52", "parent": "https://github.com/apache/wicket/commit/cd6e324a6751689013539f14d55085f3efc9c2ba", "message": "WICKET-738 setVisible(false) on Page throws NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@555407 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_62", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/2c194180a5c2660a70ae1121cd12ce355afebc52/jdk-1.4/wicket/src/main/java/org/apache/wicket/Component.java", "blob_url": "https://github.com/apache/wicket/blob/2c194180a5c2660a70ae1121cd12ce355afebc52/jdk-1.4/wicket/src/main/java/org/apache/wicket/Component.java", "sha": "8dc71e8c5edd275c83f2ab196f363adc5c3d7bdc", "changes": 3, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/Component.java?ref=2c194180a5c2660a70ae1121cd12ce355afebc52", "patch": "@@ -1979,7 +1979,8 @@ public final void render(final MarkupStream markupStream)\n \t\t\t\tlog.debug(\"End render \" + this);\n \t\t\t}\n \t\t}\n-\t\telse\n+\t\t// markupStream is null when rendering a page\n+\t\telse if (markupStream != null)\n \t\t{\n \t\t\tif (getFlag(FLAG_PLACEHOLDER))\n \t\t\t{", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/Component.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/798ad99efd7f8f6c0e2b22aa036c1ab3756e1c50", "parent": "https://github.com/apache/wicket/commit/54bf4e5ad9aae67297a5df30c0a71d9b50f9e6dd", "message": "Fix for possible NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@540931 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_63", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/798ad99efd7f8f6c0e2b22aa036c1ab3756e1c50/jdk-1.4/wicket/src/main/java/org/apache/wicket/request/target/coding/PackageRequestTargetUrlCodingStrategy.java", "blob_url": "https://github.com/apache/wicket/blob/798ad99efd7f8f6c0e2b22aa036c1ab3756e1c50/jdk-1.4/wicket/src/main/java/org/apache/wicket/request/target/coding/PackageRequestTargetUrlCodingStrategy.java", "sha": "5368f1496ef1a260f7992a85a7b9174ad251e617", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/request/target/coding/PackageRequestTargetUrlCodingStrategy.java?ref=798ad99efd7f8f6c0e2b22aa036c1ab3756e1c50", "patch": "@@ -111,7 +111,7 @@ public IRequestTarget decode(RequestParameters requestParameters)\n \t\t\t// If the class resolver wraps a ClassNotFoundException with a\n \t\t\t// RuntimeException, just return null here, which will cause a 404\n \t\t\t// or similar.\n-\t\t\tif (ex.getCause() instanceof ClassNotFoundException)\n+\t\t\tif (ex.getCause() != null && ex.getCause() instanceof ClassNotFoundException)\n \t\t\t{\n \t\t\t\treturn null;\n \t\t\t}", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/request/target/coding/PackageRequestTargetUrlCodingStrategy.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/40790b6e424b74008247900402c80ce1201c0806", "parent": "https://github.com/apache/wicket/commit/e6f106f7abb5bc78aa1634ff57e212acdd9588c0", "message": "throw exception with message rather than NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@535928 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_64", "file": [{"additions": 9, "raw_url": "https://github.com/apache/wicket/raw/40790b6e424b74008247900402c80ce1201c0806/jdk-1.4/wicket-velocity/src/main/java/org/apache/wicket/velocity/markup/html/VelocityPanel.java", "blob_url": "https://github.com/apache/wicket/blob/40790b6e424b74008247900402c80ce1201c0806/jdk-1.4/wicket-velocity/src/main/java/org/apache/wicket/velocity/markup/html/VelocityPanel.java", "sha": "64eef4ce7670002f4dfccd1e0d74b67a7283e4a0", "changes": 10, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket-velocity/src/main/java/org/apache/wicket/velocity/markup/html/VelocityPanel.java?ref=40790b6e424b74008247900402c80ce1201c0806", "patch": "@@ -81,11 +81,19 @@ public VelocityPanel(final String name, final IModel/* <Map> */model)\n \t */\n \tprivate Reader getTemplateReader()\n \t{\n-\t\tfinal String template = getTemplateResource().asString();\n+\t\tfinal IStringResourceStream resource = getTemplateResource();\n+\t\tif (resource == null)\n+\t\t{\n+\t\t\tthrow new IllegalArgumentException(\n+\t\t\t\t\t\"getTemplateResource must return a resource\");\n+\t\t}\n+\n+\t\tfinal String template = resource.asString();\n \t\tif (template != null)\n \t\t{\n \t\t\treturn new StringReader(template);\n \t\t}\n+\n \t\treturn null;\n \t}\n ", "filename": "jdk-1.4/wicket-velocity/src/main/java/org/apache/wicket/velocity/markup/html/VelocityPanel.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/2b5950625e73ad1ae56e346a0d250445f9c1ae9b", "parent": "https://github.com/apache/wicket/commit/ec80b3c774b9ed113fe694484dd6d14dbc5a3a7f", "message": "do NPE check where it makes sense\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@529103 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_65", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/2b5950625e73ad1ae56e346a0d250445f9c1ae9b/wicket/src/main/java/wicket/protocol/http/WebApplication.java", "blob_url": "https://github.com/apache/wicket/blob/2b5950625e73ad1ae56e346a0d250445f9c1ae9b/wicket/src/main/java/wicket/protocol/http/WebApplication.java", "sha": "0a578372ac45fe7bbeded20e5c9ff7cb42448500", "changes": 3, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/protocol/http/WebApplication.java?ref=2b5950625e73ad1ae56e346a0d250445f9c1ae9b", "patch": "@@ -270,12 +270,11 @@ public final WicketFilter getWicketFilter()\n \t */\n \tpublic final void mount(IRequestTargetUrlCodingStrategy encoder)\n \t{\n-\t\tcheckMountPath(encoder.getMountPath());\n-\n \t\tif (encoder == null)\n \t\t{\n \t\t\tthrow new IllegalArgumentException(\"Encoder must be not null\");\n \t\t}\n+\t\tcheckMountPath(encoder.getMountPath());\n \n \t\tgetRequestCycleProcessor().getRequestCodingStrategy().mount(encoder);\n \t}", "filename": "wicket/src/main/java/wicket/protocol/http/WebApplication.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/bd61e915a12ed1690df182e6e8745d477396bd25", "parent": "https://github.com/apache/wicket/commit/25c519429533d73bba7f5b2ad45162ee32acae76", "message": "backport of npe checks in webresponse\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@528855 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_66", "file": [{"additions": 35, "raw_url": "https://github.com/apache/wicket/raw/bd61e915a12ed1690df182e6e8745d477396bd25/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/WebResponse.java", "blob_url": "https://github.com/apache/wicket/blob/bd61e915a12ed1690df182e6e8745d477396bd25/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/WebResponse.java", "sha": "b872c892497b18f8e02ae882dd7ade15af814530", "changes": 46, "status": "modified", "deletions": 11, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/WebResponse.java?ref=bd61e915a12ed1690df182e6e8745d477396bd25", "patch": "@@ -82,7 +82,10 @@ public WebResponse(final HttpServletResponse httpServletResponse)\n \t */\n \tpublic void addCookie(final Cookie cookie)\n \t{\n-\t\tgetHttpServletResponse().addCookie(cookie);\n+\t\tif (httpServletResponse != null)\n+\t\t{\n+\t\t\thttpServletResponse.addCookie(cookie);\n+\t\t}\n \t}\n \n \t/**\n@@ -94,9 +97,12 @@ public void addCookie(final Cookie cookie)\n \t */\n \tpublic void clearCookie(final Cookie cookie)\n \t{\n-\t\tcookie.setMaxAge(0);\n-\t\tcookie.setValue(null);\n-\t\taddCookie(cookie);\n+\t\tif (httpServletResponse != null)\n+\t\t{\n+\t\t\tcookie.setMaxAge(0);\n+\t\t\tcookie.setValue(null);\n+\t\t\taddCookie(cookie);\n+\t\t}\n \t}\n \n \t/**\n@@ -229,25 +235,34 @@ public void redirect(String url)\n \t */\n \tpublic final void setContentType(final String mimeType)\n \t{\n-\t\thttpServletResponse.setContentType(mimeType);\n+\t\tif (httpServletResponse != null)\n+\t\t{\n+\t\t\thttpServletResponse.setContentType(mimeType);\n+\t\t}\n \t}\n \n \t/**\n \t * @see org.apache.wicket.Response#setContentLength(long)\n \t */\n \tpublic void setContentLength(long length)\n \t{\n-\t\thttpServletResponse.setContentLength((int)length);\n+\t\tif (httpServletResponse != null)\n+\t\t{\n+\t\t\thttpServletResponse.setContentLength((int)length);\n+\t\t}\n \t}\n \n \t/**\n \t * @see org.apache.wicket.Response#setLastModifiedTime(org.apache.wicket.util.time.Time)\n \t */\n \tpublic void setLastModifiedTime(Time time)\n \t{\n-\t\tif (time != null && time.getMilliseconds() != -1)\n+\t\tif (httpServletResponse != null)\n \t\t{\n-\t\t\thttpServletResponse.setDateHeader(\"Last-Modified\", time.getMilliseconds());\n+\t\t\tif (time != null && time.getMilliseconds() != -1)\n+\t\t\t{\n+\t\t\t\thttpServletResponse.setDateHeader(\"Last-Modified\", time.getMilliseconds());\n+\t\t\t}\n \t\t}\n \t}\n \n@@ -265,7 +280,10 @@ public void setLastModifiedTime(Time time)\n \t */\n \tpublic final void setLocale(final Locale locale)\n \t{\n-\t\thttpServletResponse.setLocale(locale);\n+\t\tif (httpServletResponse != null)\n+\t\t{\n+\t\t\thttpServletResponse.setLocale(locale);\n+\t\t}\n \t}\n \n \t/**\n@@ -333,7 +351,10 @@ public void write(AppendingStringBuffer asb)\n \t */\n \tpublic void setDateHeader(String header, long date)\n \t{\n-\t\thttpServletResponse.setDateHeader(header, date);\n+\t\tif (httpServletResponse != null)\n+\t\t{\n+\t\t\thttpServletResponse.setDateHeader(header, date);\n+\t\t}\n \t}\n \n \n@@ -345,7 +366,10 @@ public void setDateHeader(String header, long date)\n \t */\n \tpublic void setHeader(String header, String value)\n \t{\n-\t\thttpServletResponse.setHeader(header, value);\n+\t\tif (httpServletResponse != null)\n+\t\t{\n+\t\t\thttpServletResponse.setHeader(header, value);\n+\t\t}\n \t}\n \n \t/**", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/WebResponse.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/4422cdfdba97693e485d1c79e2380d234ffe01a3", "parent": "https://github.com/apache/wicket/commit/311717b36052f716e2d8f1bfd058ba9ec2387309", "message": "Fixed NPE in ClassStreamHandler\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@519457 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_67", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/4422cdfdba97693e485d1c79e2380d234ffe01a3/jdk-1.4/wicket/src/main/java/wicket/util/io/ClassStreamHandler.java", "blob_url": "https://github.com/apache/wicket/blob/4422cdfdba97693e485d1c79e2380d234ffe01a3/jdk-1.4/wicket/src/main/java/wicket/util/io/ClassStreamHandler.java", "sha": "ad0ba1d0207887345e975682d1f7056879d9fd68", "changes": 6, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/wicket/util/io/ClassStreamHandler.java?ref=4422cdfdba97693e485d1c79e2380d234ffe01a3", "patch": "@@ -381,7 +381,7 @@ public void writeFields(WicketObjectOutputStream woos, Object obj) throws Wicket\n \t\tFieldAndIndex fai = null;\n \t\ttry\n \t\t{\n-\t\t\tfor (int i = 0; i < fields.size(); i++)\n+\t\t\tfor (int i = 0; fields != null && i < fields.size(); i++)\n \t\t\t{\n \t\t\t\tfai = (FieldAndIndex)fields.get(i);\n \t\t\t\tfai.writeField(obj, woos);\n@@ -394,7 +394,9 @@ public void writeFields(WicketObjectOutputStream woos, Object obj) throws Wicket\n \t\t}\n \t\tcatch (Exception ex)\n \t\t{\n-\t\t\tthrow new WicketSerializeableException(\"Error writing field: \" + fai.field.getName() + \" for object class: \" + obj.getClass(), ex);\n+\t\t\tString field = fai == null || fai.field == null? \"\" : fai.field.getName();\n+\t\t\tString msg = \"Error writing field: \" + field + \" for object class: \" + obj.getClass();\n+\t\t\tthrow new WicketSerializeableException(msg, ex);\n \t\t}\n \n \t}", "filename": "jdk-1.4/wicket/src/main/java/wicket/util/io/ClassStreamHandler.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/51b46d307741581a0a5bdb258c45a548ab5dd382", "parent": "https://github.com/apache/wicket/commit/60fe19e2342aadb67b68112d187bfcaf058d56e7", "message": "fix for npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@511665 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_68", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/51b46d307741581a0a5bdb258c45a548ab5dd382/wicket/src/main/java/wicket/util/io/ClassStreamHandler.java", "blob_url": "https://github.com/apache/wicket/blob/51b46d307741581a0a5bdb258c45a548ab5dd382/wicket/src/main/java/wicket/util/io/ClassStreamHandler.java", "sha": "85db8fe29c679afddbc39655e03e257299d24ec6", "changes": 4, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/util/io/ClassStreamHandler.java?ref=51b46d307741581a0a5bdb258c45a548ab5dd382", "patch": "@@ -308,6 +308,10 @@ public Object createObject() throws IllegalArgumentException, InstantiationExcep\n \t */\n \tprivate void fillFields(Class cls)\n \t{\n+\t\tif (cls == null)\n+\t\t{\n+\t\t\treturn;\n+\t\t}\n \t\tField[] fields = cls.getDeclaredFields();\n \t\tfor (int i = 0; i < fields.length; i++)\n \t\t{", "filename": "wicket/src/main/java/wicket/util/io/ClassStreamHandler.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/899054e7d603fa1007e13f46937e4e1915047516", "parent": "https://github.com/apache/wicket/commit/d18523c855595fbcdb6ec46fce70394aa2c557e3", "message": "avoid NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@501496 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_69", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/899054e7d603fa1007e13f46937e4e1915047516/wicket/src/main/java/wicket/markup/html/pages/BrowserInfoPage.java", "blob_url": "https://github.com/apache/wicket/blob/899054e7d603fa1007e13f46937e4e1915047516/wicket/src/main/java/wicket/markup/html/pages/BrowserInfoPage.java", "sha": "5992b3736b4dd359b5ac7523190a620d6c9def65", "changes": 8, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/markup/html/pages/BrowserInfoPage.java?ref=899054e7d603fa1007e13f46937e4e1915047516", "patch": "@@ -69,7 +69,7 @@\n \t\tprivate String navigatorAppCodeName;\n \t\tprivate String navigatorAppName;\n \t\tprivate String navigatorAppVersion;\n-\t\tprivate Boolean navigatorCookieEnabled;\n+\t\tprivate Boolean navigatorCookieEnabled = Boolean.FALSE;\n \t\tprivate Boolean navigatorJavaEnabled = Boolean.FALSE;\n \t\tprivate String navigatorLanguage;\n \t\tprivate String navigatorPlatform;\n@@ -220,11 +220,11 @@ public void merge(ClientProperties properties)\n \t\t\tproperties.setScreenColorDepth(getInt(screenColorDepth));\n \t\t\tproperties.setUtcOffset(utcOffset);\n \t\t}\n-\t\t\n-\t\tprivate int getInt(String value) \n+\n+\t\tprivate int getInt(String value)\n \t\t{\n \t\t\tint intValue = -1;\n-\t\t\ttry \n+\t\t\ttry\n \t\t\t{\n \t\t\t\tintValue = Integer.parseInt(value);\n \t\t\t}", "filename": "wicket/src/main/java/wicket/markup/html/pages/BrowserInfoPage.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/729e2ec3393c406e73319168488b0a22b4ae1ade", "parent": "https://github.com/apache/wicket/commit/b415fd24cfa6468e6fde9ffd9ca97b318cbb03bb", "message": "WICKET-231: npe fix for sanicy check patch\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@499072 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_70", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/729e2ec3393c406e73319168488b0a22b4ae1ade/wicket/src/main/java/wicket/markup/html/form/ListMultipleChoice.java", "blob_url": "https://github.com/apache/wicket/blob/729e2ec3393c406e73319168488b0a22b4ae1ade/wicket/src/main/java/wicket/markup/html/form/ListMultipleChoice.java", "sha": "f99853a80432355bbb07fb71746df63ee2074349", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/markup/html/form/ListMultipleChoice.java?ref=729e2ec3393c406e73319168488b0a22b4ae1ade", "patch": "@@ -206,7 +206,7 @@ public final String getModelValue()\n \t{\n \t\t// Get the list of selected values\n \t\tObject modelObject = getModelObject();\n-\t\tif (!(modelObject instanceof Collection))\n+\t\tif (modelObject != null && !(modelObject instanceof Collection))\n \t\t{\n \t\t\tthrow new WicketRuntimeException(\n \t\t\t\t\t\"Model object for a ListMultipleChoice must be a Collection (found \"", "filename": "wicket/src/main/java/wicket/markup/html/form/ListMultipleChoice.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/e5c6fde7425fd308e7877aee3dbad770580829bb", "parent": "https://github.com/apache/wicket/commit/555b6a6e3eeaa6633827d92b3ce209d6e2966e24", "message": "WICKET-88 fixed npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@476593 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_71", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/e5c6fde7425fd308e7877aee3dbad770580829bb/wicket/src/main/java/wicket/markup/html/form/Check.java", "blob_url": "https://github.com/apache/wicket/blob/e5c6fde7425fd308e7877aee3dbad770580829bb/wicket/src/main/java/wicket/markup/html/form/Check.java", "sha": "ff81458d2383e2a0373913c390319c4e13fd532b", "changes": 9, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/markup/html/form/Check.java?ref=e5c6fde7425fd308e7877aee3dbad770580829bb", "patch": "@@ -132,11 +132,14 @@ protected void onComponentTag(final ComponentTag tag)\n \t\tif (group.hasRawInput())\n \t\t{\n \t\t\tString[] inputs = group.getInputAsArray();\n-\t\t\tfor (String input : inputs)\n+\t\t\tif (inputs != null)\n \t\t\t{\n-\t\t\t\tif (value.equals(input))\n+\t\t\t\tfor (String input : inputs)\n \t\t\t\t{\n-\t\t\t\t\ttag.put(\"checked\", \"checked\");\n+\t\t\t\t\tif (value.equals(input))\n+\t\t\t\t\t{\n+\t\t\t\t\t\ttag.put(\"checked\", \"checked\");\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}", "filename": "wicket/src/main/java/wicket/markup/html/form/Check.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/72d212a9a5b31acac00d0b5435a58ea9963f9ccc", "parent": "https://github.com/apache/wicket/commit/5edd92e75c204eeebc2fb343cb42a81a3397d9af", "message": "WICKET-88 fixed npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@476592 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_72", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/72d212a9a5b31acac00d0b5435a58ea9963f9ccc/wicket/src/main/java/wicket/markup/html/form/Check.java", "blob_url": "https://github.com/apache/wicket/blob/72d212a9a5b31acac00d0b5435a58ea9963f9ccc/wicket/src/main/java/wicket/markup/html/form/Check.java", "sha": "73b6722e2a1123986a439814124349a0676391bb", "changes": 9, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/markup/html/form/Check.java?ref=72d212a9a5b31acac00d0b5435a58ea9963f9ccc", "patch": "@@ -129,11 +129,14 @@ protected void onComponentTag(final ComponentTag tag)\n \t\t{\n \t\t\tfinal String[] input = group.getInputAsArray();\n \n-\t\t\tfor (int i = 0; i < input.length; i++)\n+\t\t\tif (input != null)\n \t\t\t{\n-\t\t\t\tif (uuid.equals(input[i]))\n+\t\t\t\tfor (int i = 0; i < input.length; i++)\n \t\t\t\t{\n-\t\t\t\t\ttag.put(\"checked\", \"checked\");\n+\t\t\t\t\tif (uuid.equals(input[i]))\n+\t\t\t\t\t{\n+\t\t\t\t\t\ttag.put(\"checked\", \"checked\");\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}", "filename": "wicket/src/main/java/wicket/markup/html/form/Check.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/75b31e22667ff2653311db25f0ef18d8de7e38bc", "parent": "https://github.com/apache/wicket/commit/048a792578734c8218ccd90295e8f47594c7884b", "message": "fixed NPE (see echo example)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@471188 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_73", "file": [{"additions": 5, "raw_url": "https://github.com/apache/wicket/raw/75b31e22667ff2653311db25f0ef18d8de7e38bc/wicket-examples/src/main/java/wicket/examples/source/SourcesPage.java", "blob_url": "https://github.com/apache/wicket/blob/75b31e22667ff2653311db25f0ef18d8de7e38bc/wicket-examples/src/main/java/wicket/examples/source/SourcesPage.java", "sha": "c33fce77ca1c0712b532be982279be72f8d36aab", "changes": 7, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-examples/src/main/java/wicket/examples/source/SourcesPage.java?ref=75b31e22667ff2653311db25f0ef18d8de7e38bc", "patch": "@@ -314,8 +314,11 @@ protected void populateItem(ListItem<String> item)\n \t\t\t\t\t\tpublic void onClick(AjaxRequestTarget target)\n \t\t\t\t\t\t{\n \t\t\t\t\t\t\tsetName(getModelObjectAsString());\n-\t\t\t\t\t\t\ttarget.addComponent(codePanel);\n-\t\t\t\t\t\t\ttarget.addComponent(filename);\n+\t\t\t\t\t\t\tif (target != null)\n+\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\ttarget.addComponent(codePanel);\n+\t\t\t\t\t\t\t\ttarget.addComponent(filename);\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t};\n \t\t\t\t\tnew Label(link, \"name\", item.getModelObjectAsString());", "filename": "wicket-examples/src/main/java/wicket/examples/source/SourcesPage.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/6f9e66a6f67bef352d15138957682736bf72c62f", "parent": "https://github.com/apache/wicket/commit/debef46af9e4b7a79feb8f4c1bdd854eef27200a", "message": "fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@464052 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_74", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/6f9e66a6f67bef352d15138957682736bf72c62f/wicket/src/main/java/wicket/Session.java", "blob_url": "https://github.com/apache/wicket/blob/6f9e66a6f67bef352d15138957682736bf72c62f/wicket/src/main/java/wicket/Session.java", "sha": "bf3fbfb5fad40ebd6a1d6e05fe27a0b8655b2acb", "changes": 6, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/Session.java?ref=6f9e66a6f67bef352d15138957682736bf72c62f", "patch": "@@ -168,7 +168,7 @@\n \t/** feedback messages */\n \tprivate FeedbackMessages feedbackMessages = new FeedbackMessages(new CopyOnWriteArrayList());\n \n-\tprivate transient Map pageMapsUsedInRequest;\n+\tprivate transient Map pageMapsUsedInRequest = new HashMap(3);\n \n \t/** cached id because you can't access the id after session unbound */\n \tprivate String id = null;\n@@ -644,10 +644,6 @@ public final void removePageMap(final PageMap pageMap)\n \t */\n \tpublic final void setApplication(final Application application)\n \t{\n-\t\tif (pageMapsUsedInRequest == null)\n-\t\t{\n-\t\t\tpageMapsUsedInRequest = new HashMap(2);\n-\t\t}\n \t}\n \n \t/**", "filename": "wicket/src/main/java/wicket/Session.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/d44db9b4613f8227534ddd228ac04aafad3b42b4", "parent": "https://github.com/apache/wicket/commit/89a5edcfdbf4f5389e6e8abd6516dc46d466cb1c", "message": "fix npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@462303 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_75", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/d44db9b4613f8227534ddd228ac04aafad3b42b4/wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java", "blob_url": "https://github.com/apache/wicket/blob/d44db9b4613f8227534ddd228ac04aafad3b42b4/wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java", "sha": "e11be195bb48918901917cec52a71d6e8e9eea6f", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java?ref=d44db9b4613f8227534ddd228ac04aafad3b42b4", "patch": "@@ -142,7 +142,7 @@ public final MarkupElement nextTag() throws ParseException\n \t\t\t\tString value = settings.getLocalizer().getString(messageKey, null, searchStack,\n \t\t\t\t\t\tcontainerInfo.getLocale(), containerInfo.getStyle());\n \n-\t\t\t\tif (value.length() > 0)\n+\t\t\t\tif (value != null && (value.length() > 0))\n \t\t\t\t{\n \t\t\t\t\ttag.getAttributes().put(attrName, value);\n \t\t\t\t\ttag.setModified(true);", "filename": "wicket/src/java/wicket/markup/parser/filter/WicketMessageTagHandler.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/31eff92cfa4e7fea55e9bf85144bb4fdc6e015f6", "parent": "https://github.com/apache/wicket/commit/754259b94a1a0c635363493d609aeca8f37b25d7", "message": "fix the previous fix to eliminate possible npe\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@462170 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_76", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/31eff92cfa4e7fea55e9bf85144bb4fdc6e015f6/wicket/src/java/wicket/Session.java", "blob_url": "https://github.com/apache/wicket/blob/31eff92cfa4e7fea55e9bf85144bb4fdc6e015f6/wicket/src/java/wicket/Session.java", "sha": "7437f49d2fafd3acd540facd65fa7737a3c5885d", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/Session.java?ref=31eff92cfa4e7fea55e9bf85144bb4fdc6e015f6", "patch": "@@ -452,7 +452,7 @@ public final synchronized Page getPage(final String pageMapName, final String pa\n \t\t}\n \n \t\t// Get page map by name, creating the default page map automatically\n-\t\tPageMap pageMap = pageMapForName(pageMapName, pageMapName.equals(PageMap.DEFAULT_NAME));\n+\t\tPageMap pageMap = pageMapForName(pageMapName, Objects.equal(PageMap.DEFAULT_NAME,pageMapName));\n \t\tif (pageMap != null)\n \t\t{\n \t\t\tlong startTime = System.currentTimeMillis();", "filename": "wicket/src/java/wicket/Session.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/c48ef460a9c570dcedfe50bf5ab92872dd0aa682", "parent": "https://github.com/apache/wicket/commit/ae260354840d0a55a9d19524940a913c0cf3aab5", "message": "avoid NPE in unicode conversion\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@462131 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_77", "file": [{"additions": 5, "raw_url": "https://github.com/apache/wicket/raw/c48ef460a9c570dcedfe50bf5ab92872dd0aa682/wicket/src/java/wicket/util/string/Strings.java", "blob_url": "https://github.com/apache/wicket/blob/c48ef460a9c570dcedfe50bf5ab92872dd0aa682/wicket/src/java/wicket/util/string/Strings.java", "sha": "715860c1747a3476ad59555680bb34f2bb9b7254", "changes": 6, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/string/Strings.java?ref=c48ef460a9c570dcedfe50bf5ab92872dd0aa682", "patch": "@@ -807,8 +807,12 @@ else if (aChar == 'f')\n \t *            The unicode string\n \t * @return The escaped unicode string, like '\\u4F60\\u597D'.\n \t */\n-\tpublic static String toEscapedUnicode(String unicodeString)\n+\tpublic static String toEscapedUnicode(final String unicodeString)\n \t{\n+\t\tif ((unicodeString == null) || (unicodeString.length() == 0))\n+\t\t{\n+\t\t\treturn unicodeString;\n+\t\t}\n \t\tint len = unicodeString.length();\n \t\tint bufLen = len * 2;\n \t\tStringBuffer outBuffer = new StringBuffer(bufLen);", "filename": "wicket/src/java/wicket/util/string/Strings.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/26bd939daeac5bfbea2d267c5d43ec2a1f73e8ff", "parent": "https://github.com/apache/wicket/commit/0cbbfbf457fd9185f70df60179a0a7029d8a31d7", "message": "fix NPE if cache key == null\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@461864 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_78", "file": [{"additions": 8, "raw_url": "https://github.com/apache/wicket/raw/26bd939daeac5bfbea2d267c5d43ec2a1f73e8ff/wicket/src/java/wicket/markup/MarkupCache.java", "blob_url": "https://github.com/apache/wicket/blob/26bd939daeac5bfbea2d267c5d43ec2a1f73e8ff/wicket/src/java/wicket/markup/MarkupCache.java", "sha": "c5cf8bbab00c5cd9ec22b0bf0c8ec788299d6ae0", "changes": 10, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/MarkupCache.java?ref=26bd939daeac5bfbea2d267c5d43ec2a1f73e8ff", "patch": "@@ -227,7 +227,10 @@ public final IMarkup getMarkup(final MarkupContainer<?> container,\n \t\t{\n \t\t\tsynchronized (markupCache)\n \t\t\t{\n-\t\t\t\tmarkup = markupCache.get(cacheKey);\n+\t\t\t\tif (cacheKey != null)\n+\t\t\t\t{\n+\t\t\t\t\tmarkup = markupCache.get(cacheKey);\n+\t\t\t\t}\n \n \t\t\t\t// Must Markup be loaded?\n \t\t\t\tif (markup == null)\n@@ -267,7 +270,10 @@ public final IMarkup getMarkup(final MarkupContainer<?> container,\n \n \t\t\t\t\t\t// Save any markup list (or absence of one) for next\n \t\t\t\t\t\t// time\n-\t\t\t\t\t\tmarkupCache.put(cacheKey, markup);\n+\t\t\t\t\t\tif (cacheKey != null)\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tmarkupCache.put(cacheKey, markup);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}", "filename": "wicket/src/java/wicket/markup/MarkupCache.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/88e6e44096fdc99516aabced20f1554101844187", "parent": "https://github.com/apache/wicket/commit/306d22c1bba6b0fa93abdf7734874d8beb5595c3", "message": "quick fix for NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@461408 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_79", "file": [{"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/88e6e44096fdc99516aabced20f1554101844187/wicket/src/java/wicket/AccessStackPageMap.java", "blob_url": "https://github.com/apache/wicket/blob/88e6e44096fdc99516aabced20f1554101844187/wicket/src/java/wicket/AccessStackPageMap.java", "sha": "a7213c44754f8b3a48c8b092ff657370c77c88b1", "changes": 7, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/AccessStackPageMap.java?ref=88e6e44096fdc99516aabced20f1554101844187", "patch": "@@ -197,6 +197,13 @@ public final IPageMapEntry lastAccessedEntry()\n \t@Override\n \tpublic final void removeEntry(final IPageMapEntry entry)\n \t{\n+\t\tif(entry == null)\n+\t\t{\n+\t\t\t// TODO this shouldn't happen but to many people are still getting this now and then/\n+\t\t\t// so first this \"fix\"\n+\t\t\tlog.warn(\"PageMap.removeEntry called with an null entry\");\n+\t\t\treturn;\n+\t\t}\n \t\t// Remove entry from session\n \t\tSession session = getSession();\n \t\tsynchronized (session)", "filename": "wicket/src/java/wicket/AccessStackPageMap.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/2f6091484c1ee6e9c7af011e328ec535abb8d91b", "parent": "https://github.com/apache/wicket/commit/fdb451fa3f97683f860d7dafa59e7c494f0535a7", "message": "Captured possible NPE's\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@460553 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_80", "file": [{"additions": 16, "raw_url": "https://github.com/apache/wicket/raw/2f6091484c1ee6e9c7af011e328ec535abb8d91b/wicket-examples/src/java/wicket/examples/source/SourcesPage.java", "blob_url": "https://github.com/apache/wicket/blob/2f6091484c1ee6e9c7af011e328ec535abb8d91b/wicket-examples/src/java/wicket/examples/source/SourcesPage.java", "sha": "ae7af3cc57023ce9da4f411ea9aa4a56db6fa831", "changes": 20, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-examples/src/java/wicket/examples/source/SourcesPage.java?ref=2f6091484c1ee6e9c7af011e328ec535abb8d91b", "patch": "@@ -19,6 +19,7 @@\n \n import java.io.BufferedReader;\n import java.io.IOException;\n+import java.io.InputStream;\n import java.io.InputStreamReader;\n import java.net.URL;\n import java.util.ArrayList;\n@@ -52,7 +53,7 @@\n public class SourcesPage extends WebPage\n {\n \tprivate static Log log = LogFactory.getLog(SourcesPage.class);\n-\t\n+\n \t/**\n \t * Model for retrieving the source code from the classpath of a packaged\n \t * resource.\n@@ -85,7 +86,12 @@ public Object getObject(Component component)\n \t\t\t{\n \t\t\t\tStringBuffer sb = new StringBuffer();\n \n-\t\t\t\tbr = new BufferedReader(new InputStreamReader(page.getResourceAsStream(name)));\n+\t\t\t\tInputStream resourceAsStream = page.getResourceAsStream(name);\n+\t\t\t\tif (resourceAsStream == null)\n+\t\t\t\t{\n+\t\t\t\t\treturn \"Unable to read the source for \" + name;\n+\t\t\t\t}\n+\t\t\t\tbr = new BufferedReader(new InputStreamReader(resourceAsStream));\n \n \t\t\t\twhile (br.ready())\n \t\t\t\t{\n@@ -96,7 +102,8 @@ public Object getObject(Component component)\n \t\t\t}\n \t\t\tcatch (IOException e)\n \t\t\t{\n-\t\t\t\tlog.error(\"Unable to read resource stream for: \" + name + \"; Page=\" + page.toString(), e);\n+\t\t\t\tlog.error(\"Unable to read resource stream for: \" + name + \"; Page=\"\n+\t\t\t\t\t\t+ page.toString(), e);\n \t\t\t\treturn \"\";\n \t\t\t}\n \t\t\tfinally\n@@ -180,7 +187,12 @@ private void getPackageContents(URL packageListing)\n \t\t\tBufferedReader br = null;\n \t\t\ttry\n \t\t\t{\n-\t\t\t\tbr = new BufferedReader(new InputStreamReader(packageListing.openStream()));\n+\t\t\t\tInputStream openStream = packageListing.openStream();\n+\t\t\t\tif (openStream == null)\n+\t\t\t\t{\n+\t\t\t\t\treturn;\n+\t\t\t\t}\n+\t\t\t\tbr = new BufferedReader(new InputStreamReader(openStream));\n \n \t\t\t\twhile (br.ready())\n \t\t\t\t{", "filename": "wicket-examples/src/java/wicket/examples/source/SourcesPage.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/2236a28f9a93a29b2dc7a83823017bb833338910", "parent": "https://github.com/apache/wicket/commit/bef8e5317da136b795036a41fe59df4b9e8cf719", "message": "fix for [ 1433377 ] NPE at AttributeAppender\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@459387 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_81", "file": [{"additions": 5, "raw_url": "https://github.com/apache/wicket/raw/2236a28f9a93a29b2dc7a83823017bb833338910/wicket/src/java/wicket/behavior/AttributeAppender.java", "blob_url": "https://github.com/apache/wicket/blob/2236a28f9a93a29b2dc7a83823017bb833338910/wicket/src/java/wicket/behavior/AttributeAppender.java", "sha": "cbe030ce23ce425fe2dfa7f91361bf591a61ec0e", "changes": 5, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/behavior/AttributeAppender.java?ref=2236a28f9a93a29b2dc7a83823017bb833338910", "patch": "@@ -102,6 +102,11 @@ public AttributeAppender(String attribute, IModel appendModel, String separator)\n \t */\n \tprotected String newValue(String currentValue, String appendValue)\n \t{\n+\t\tif(currentValue==null)\n+\t\t{\n+\t\t    return null;\n+\t\t}\n+\n \t\tStringBuffer sb = new StringBuffer(currentValue);\n \n \t\t// if the current value or the append value is empty, the separator is", "filename": "wicket/src/java/wicket/behavior/AttributeAppender.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/ce561eb90be180b04c442ce63f02cb4eb624d742", "parent": "https://github.com/apache/wicket/commit/e574f515c4b9c5f38f52899ba734fe37542a9427", "message": "Fix for NPE if component is null.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@459340 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_82", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/ce561eb90be180b04c442ce63f02cb4eb624d742/wicket/src/java/wicket/model/AbstractPropertyModel.java", "blob_url": "https://github.com/apache/wicket/blob/ce561eb90be180b04c442ce63f02cb4eb624d742/wicket/src/java/wicket/model/AbstractPropertyModel.java", "sha": "fbfac28cae17ee9324d790abf8f389013df12632", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/model/AbstractPropertyModel.java?ref=ce561eb90be180b04c442ce63f02cb4eb624d742", "patch": "@@ -173,7 +173,7 @@ protected void onSetObject(final Component component, Object object)\n \t\t\t\t}\n \t\t\t}\n \n-\t\t\tPropertyResolver.setValue(expression, modelObject, object, component.getConverter());\n+\t\t\tPropertyResolver.setValue(expression, modelObject, object, component==null ? null:component.getConverter());\n \t\t}\n \t}\n ", "filename": "wicket/src/java/wicket/model/AbstractPropertyModel.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/2e5daa658a8be6467bb922180ce8167e205a95d9", "parent": "https://github.com/apache/wicket/commit/1d9e3f86003812b0e963e2334c831949898ea9b4", "message": "NPE fix & unit test for fix\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@459301 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_83", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/2e5daa658a8be6467bb922180ce8167e205a95d9/wicket-auth-roles/src/main/java/wicket/authorization/strategies/role/annotations/AnnotationsRoleAuthorizationStrategy.java", "blob_url": "https://github.com/apache/wicket/blob/2e5daa658a8be6467bb922180ce8167e205a95d9/wicket-auth-roles/src/main/java/wicket/authorization/strategies/role/annotations/AnnotationsRoleAuthorizationStrategy.java", "sha": "d1196680f64a08a1940079004dfa5216c9d10e27", "changes": 9, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-auth-roles/src/main/java/wicket/authorization/strategies/role/annotations/AnnotationsRoleAuthorizationStrategy.java?ref=2e5daa658a8be6467bb922180ce8167e205a95d9", "patch": "@@ -116,11 +116,14 @@ public boolean isActionAuthorized(final Component component, final Action action\n \t */\n \tprivate boolean check(final Action action, final AuthorizeAction authorizeActionAnnotation)\n \t{\n-\t\tif (action.getName().equals(authorizeActionAnnotation.action()))\n+\t\tif (authorizeActionAnnotation != null)\n \t\t{\n-\t\t\tif (!hasAny(new Roles(authorizeActionAnnotation.roles())))\n+\t\t\tif (action.getName().equals(authorizeActionAnnotation.action()))\n \t\t\t{\n-\t\t\t\treturn false;\n+\t\t\t\tif (!hasAny(new Roles(authorizeActionAnnotation.roles())))\n+\t\t\t\t{\n+\t\t\t\t\treturn false;\n+\t\t\t\t}\n \t\t\t}\n \t\t}\n \t\treturn true;", "filename": "wicket-auth-roles/src/main/java/wicket/authorization/strategies/role/annotations/AnnotationsRoleAuthorizationStrategy.java"}, {"additions": 26, "raw_url": "https://github.com/apache/wicket/raw/2e5daa658a8be6467bb922180ce8167e205a95d9/wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/AnnotationsRoleTest.java", "blob_url": "https://github.com/apache/wicket/blob/2e5daa658a8be6467bb922180ce8167e205a95d9/wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/AnnotationsRoleTest.java", "sha": "944c16fccccdbe2178683514e20917ba88e4a320", "changes": 26, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/AnnotationsRoleTest.java?ref=2e5daa658a8be6467bb922180ce8167e205a95d9", "patch": "@@ -18,9 +18,12 @@\n package wicket.authorization.strategies.role.annotations;\n \n import java.io.Serializable;\n+import java.lang.reflect.InvocationTargetException;\n \n import junit.framework.TestCase;\n import wicket.Page;\n+import wicket.WicketRuntimeException;\n+import wicket.authorization.UnauthorizedInstantiationException;\n import wicket.authorization.strategies.role.IRoleCheckingStrategy;\n import wicket.authorization.strategies.role.RoleAuthorizationStrategy;\n import wicket.authorization.strategies.role.Roles;\n@@ -52,6 +55,24 @@ public AnnotationsRoleTest(String arg0)\n \t\tsuper(arg0);\n \t}\n \n+\t/**\n+\t * @throws Exception\n+\t */\n+\tpublic void testClear() throws Exception\n+\t{\n+\t\tWicketTester tester = new WicketTester();\n+\t\ttester.getSecuritySettings().setAuthorizationStrategy(\n+\t\t\t\tnew RoleAuthorizationStrategy(new UserRolesAuthorizer(\"FOO\")));\n+\t\ttester.startPage(new ITestPageSource()\n+\t\t{\n+\t\t\tpublic Page getTestPage()\n+\t\t\t{\n+\t\t\t\treturn new NormalPage();\n+\t\t\t}\n+\t\t});\n+\t\ttester.assertRenderedPage(NormalPage.class);\n+\t}\n+\n \t/**\n \t * @throws Exception\n \t */\n@@ -91,6 +112,11 @@ public Page getTestPage()\n \t\t}\n \t\tcatch (Exception e)\n \t\t{\n+\t\t\tif (!(e.getCause() instanceof InvocationTargetException && ((InvocationTargetException)e\n+\t\t\t\t\t.getCause()).getTargetException() instanceof UnauthorizedInstantiationException))\n+\t\t\t{\n+\t\t\t\tthrow e;\n+\t\t\t}\n \t\t}\n \t}\n ", "filename": "wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/AnnotationsRoleTest.java"}, {"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/2e5daa658a8be6467bb922180ce8167e205a95d9/wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/NormalPage.html", "blob_url": "https://github.com/apache/wicket/blob/2e5daa658a8be6467bb922180ce8167e205a95d9/wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/NormalPage.html", "sha": "07f9c7051a2b7176e850668b351f451adfe730e4", "changes": 7, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/NormalPage.html?ref=2e5daa658a8be6467bb922180ce8167e205a95d9", "patch": "@@ -0,0 +1,7 @@\n+<html>\n+\t<head>\n+\t</head>\n+\t<body>\n+\t\tHELLO\n+\t</body>\n+</html>", "filename": "wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/NormalPage.html"}, {"additions": 37, "raw_url": "https://github.com/apache/wicket/raw/2e5daa658a8be6467bb922180ce8167e205a95d9/wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/NormalPage.java", "blob_url": "https://github.com/apache/wicket/blob/2e5daa658a8be6467bb922180ce8167e205a95d9/wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/NormalPage.java", "sha": "11f4f087cfda0c249c42a91a6d237e0d26307546", "changes": 37, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/NormalPage.java?ref=2e5daa658a8be6467bb922180ce8167e205a95d9", "patch": "@@ -0,0 +1,37 @@\n+/*\n+ * $Id$ $Revision$\n+ * $Date$\n+ * \n+ * ==============================================================================\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ * \n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package wicket.authorization.strategies.role.annotations;\n+\n+import wicket.markup.html.WebPage;\n+\n+/**\n+ * Test page that has no annotation and should thus be available.\n+ * \n+ * @author Eelco Hillenius\n+ */\n+public class NormalPage extends WebPage\n+{\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\t/**\n+\t * Construct.\n+\t */\n+\tpublic NormalPage()\n+\t{\n+\t}\n+}", "filename": "wicket-auth-roles/src/test/java/wicket/authorization/strategies/role/annotations/NormalPage.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/22e97f12452b93610c5ff02e342054bd82c77d6e", "parent": "https://github.com/apache/wicket/commit/65a2e44d7884ef90e3fdd3da20aba669b6080e23", "message": "fixed NPE recorded by Martijn\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@458987 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_84", "file": [{"additions": 9, "raw_url": "https://github.com/apache/wicket/raw/22e97f12452b93610c5ff02e342054bd82c77d6e/wicket/src/java/wicket/util/crypt/AbstractCrypt.java", "blob_url": "https://github.com/apache/wicket/blob/22e97f12452b93610c5ff02e342054bd82c77d6e/wicket/src/java/wicket/util/crypt/AbstractCrypt.java", "sha": "3ecd22f4c26542645d3a074a22975f5c7bea257e", "changes": 19, "status": "modified", "deletions": 10, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/crypt/AbstractCrypt.java?ref=22e97f12452b93610c5ff02e342054bd82c77d6e", "patch": "@@ -1,14 +1,14 @@\n /*\n- * $Id$ $Revision$\n- * $Date$\n- *\n+ * $Id$\n+ * $Revision$ $Date$\n+ * \n  * ==============================================================================\n  * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n  * use this file except in compliance with the License. You may obtain a copy of\n  * the License at\n  * \n  * http://www.apache.org/licenses/LICENSE-2.0\n- *\n+ * \n  * Unless required by applicable law or agreed to in writing, software\n  * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n@@ -88,14 +88,14 @@ public final String encrypt(final String plainText)\n \t\t{\n \t\t\tbyte[] cipherText = encryptStringToByteArray(plainText);\n \t\t\tString text = new BASE64Encoder().encode(cipherText);\n-\t\t\t\n-\t\t\t// A standard compliant base64 encoder will insert a newline \n+\n+\t\t\t// A standard compliant base64 encoder will insert a newline\n \t\t\t// after 76 chars. Remove it. Hopefully the decoder is flexible\n \t\t\t// enough to cope with the missing new line.\n \t\t\tif ((text.indexOf(\"\\n\") != -1) || (text.indexOf(\"\\r\") != -1))\n \t\t\t{\n \t\t\t\tStringBuffer buf = new StringBuffer(text.length());\n-\t\t\t\tfor (int i=0; i < text.length(); i++)\n+\t\t\t\tfor (int i = 0; i < text.length(); i++)\n \t\t\t\t{\n \t\t\t\t\tchar ch = text.charAt(i);\n \t\t\t\t\tif ((ch != '\\n') && (ch != '\\r'))\n@@ -105,7 +105,7 @@ public final String encrypt(final String plainText)\n \t\t\t\t}\n \t\t\t\ttext = buf.toString();\n \t\t\t}\n-\t\t\t\n+\n \t\t\treturn text;\n \t\t}\n \t\tcatch (GeneralSecurityException e)\n@@ -170,8 +170,7 @@ public void setKey(final String key)\n \t\t}\n \t\tcatch (GeneralSecurityException e)\n \t\t{\n-\t\t\tlog.error(\"Unable to decrypt text '\" + encrypted + \"'\", e);\n-\t\t\treturn null;\n+\t\t\tthrow new WicketRuntimeException(\"Unable to decrypt the text '\" + encrypted + \"'\", e);\n \t\t}\n \t}\n ", "filename": "wicket/src/java/wicket/util/crypt/AbstractCrypt.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/4fe91d81aee44702ad547920f3ed48982eeeeec2", "parent": "https://github.com/apache/wicket/commit/7756a1904a49e4f850e1401be63d761a4627b28a", "message": "fixed NPE if getParent() returned null\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@458757 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_85", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/4fe91d81aee44702ad547920f3ed48982eeeeec2/wicket/src/java/wicket/Localizer.java", "blob_url": "https://github.com/apache/wicket/blob/4fe91d81aee44702ad547920f3ed48982eeeeec2/wicket/src/java/wicket/Localizer.java", "sha": "7dc2b13dc0448b0321e56d9e3b4fe4f806ae7fb8", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/Localizer.java?ref=4fe91d81aee44702ad547920f3ed48982eeeeec2", "patch": "@@ -405,7 +405,7 @@ private List getComponentStack(final Component component)\n \t\tif (!(component instanceof Page))\n \t\t{\n \t\t\tMarkupContainer container = component.getParent();\n-\t\t\twhile (true)\n+\t\t\twhile (container != null)\n \t\t\t{\n \t\t\t\tsearchStack.add(container.getClass());\n \t\t\t\tif (container instanceof Page)", "filename": "wicket/src/java/wicket/Localizer.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/3b1456662e3c75aa492921157c989e63e40f2a79", "parent": "https://github.com/apache/wicket/commit/c2cde5946a27fdaf3904545871ce776f27958748", "message": "fixed: javadoc changed: [ 1350108 ] NPE in wicket.Localizer.getString()\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@458241 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_86", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/3b1456662e3c75aa492921157c989e63e40f2a79/wicket/src/java/wicket/Localizer.java", "blob_url": "https://github.com/apache/wicket/blob/3b1456662e3c75aa492921157c989e63e40f2a79/wicket/src/java/wicket/Localizer.java", "sha": "f83752067143e8814b52d383e016053ec7a10462", "changes": 8, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/Localizer.java?ref=3b1456662e3c75aa492921157c989e63e40f2a79", "patch": "@@ -93,7 +93,7 @@ public void propertiesLoaded(final String key)\n \t * @param key\n \t *            The key to obtain the resource for\n \t * @param component\n-\t *            The component to get the resource for (optional)\n+\t *            The component to get the resource for\n \t * @return The string resource\n \t * @throws MissingResourceException\n \t *             If resource not found and configuration dictates that\n@@ -111,7 +111,7 @@ public String getString(final String key, final Component component)\n \t * @param key\n \t *            The key to obtain the resource for\n \t * @param component\n-\t *            The component to get the resource for (optional)\n+\t *            The component to get the resource for\n \t * @param model\n \t *            The model to use for OGNL substitutions in the strings\n \t *            (optional)\n@@ -132,7 +132,7 @@ public String getString(final String key, final Component component, final IMode\n \t * @param key\n \t *            The key to obtain the resource for\n \t * @param component\n-\t *            The component to get the resource for (optional)\n+\t *            The component to get the resource for\n \t * @param model\n \t *            The model to use for OGNL substitutions in the strings\n \t *            (optional)\n@@ -156,7 +156,7 @@ public String getString(final String key, final Component component, final IMode\n \t * @param key\n \t *            The key to obtain the resource for\n \t * @param component\n-\t *            The component to get the resource for (optional)\n+\t *            The component to get the resource for\n \t * @param defaultValue\n \t *            The default value (optional)\n \t * @return The string resource", "filename": "wicket/src/java/wicket/Localizer.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/8db6b0088a39eba990e878b6ec379dcf4753784a", "parent": "https://github.com/apache/wicket/commit/430a1f58ba7fcaf8f9e464878fb13c272c121403", "message": "exception instead of npe\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@458101 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_87", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/8db6b0088a39eba990e878b6ec379dcf4753784a/wicket/src/java/wicket/markup/html/form/Check.java", "blob_url": "https://github.com/apache/wicket/blob/8db6b0088a39eba990e878b6ec379dcf4753784a/wicket/src/java/wicket/markup/html/form/Check.java", "sha": "7c8568e4d045df590079d12913dc412c2ad777d4", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/form/Check.java?ref=8db6b0088a39eba990e878b6ec379dcf4753784a", "patch": "@@ -88,6 +88,12 @@ protected void onComponentTag(final ComponentTag tag)\n \t\t// check if the model collection of the group contains the model object.\n \t\t// if it does check the check box.\n \t\tCollection collection = (Collection)group.getModelObject();\n+\n+\t\t// check for npe in group's model object\n+\t\tif (collection==null) {\n+\t\t\tthrow new WicketRuntimeException(\"CheckGroup [\"+group.getPath()+\"] contains a null model object, must be an object of type java.util.Collection\");\n+\t\t}\n+\t\t\n \t\tif (collection.contains(getModelObject()))\n \t\t{\n \t\t\ttag.put(\"checked\", \"checked\");", "filename": "wicket/src/java/wicket/markup/html/form/Check.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/c0d38640f267939c3c8e46d381f62f8f48f912ae", "parent": "https://github.com/apache/wicket/commit/ce994531ed150f40de63a6a4e32adfcc164800ec", "message": "Fixed autolink NPE bug\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@457979 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_88", "file": [{"additions": 63, "raw_url": "https://github.com/apache/wicket/raw/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/java/wicket/AutoLinkResolver.java", "blob_url": "https://github.com/apache/wicket/blob/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/java/wicket/AutoLinkResolver.java", "sha": "e787a0e7ff2014261ee3647a7baa843a1ed14d52", "changes": 125, "status": "modified", "deletions": 62, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/AutoLinkResolver.java?ref=c0d38640f267939c3c8e46d381f62f8f48f912ae", "patch": "@@ -160,77 +160,78 @@ private final Component resolveAutomaticLink(final MarkupContainer container, fi\n \t\t{\n \t\t\textension = infoPath.substring(pos + 1);\n \t\t\tinfoPath = infoPath.substring(0, pos);\n-\t\t}\n-\n-\t\t// HTML hrefs are handled first\n-\t\tif (supportedPageExtensions.containsKey(extension.toLowerCase()))\n-\t\t{\n-\t\t\t// Obviously a href like href=\"myPkg.MyLabel.html\" will do as well.\n-\t\t\t// Wicket will not throw an exception. It accepts it.\n-\t\t\tinfoPath = Strings.replaceAll(infoPath, \"/\", \".\");\n \n-\t\t\tfinal ApplicationSettings appSettings = page.getApplicationSettings();\n-\t\t\tfinal IClassResolver defaultClassResolver = appSettings.getDefaultClassResolver();\n-\t\t\t\n-\t\t\tfinal String className;\n-\t\t\tif (!infoPath.startsWith(\".\"))\n-\t\t\t{\n-\t\t\t\t// Href is relative. Resolve the url given relative to the\n-\t\t\t\t// current page\n-\t\t\t\tclassName = Packages.extractPackageName(page.getClass()) + \".\" + infoPath;\n-\t\t\t}\n-\t\t\telse\n-\t\t\t{\n-\t\t\t\t// href is absolute. If class with the same absolute path\n-\t\t\t\t// exists, use it. Else don't change the href.\n-\t\t\t\tclassName = infoPath.substring(1);\n-\t\t\t}\n-\t\t\t\n-\t\t\ttry\n-\t\t\t{\n-\t\t\t\tfinal Class clazz = defaultClassResolver.resolveClass(className);\n-\t\t\t\treturn new AutolinkBookmarkablePageLink(autoId, clazz, pageParameters);\n-\t\t\t}\n-\t\t\tcatch (WicketRuntimeException ex)\n-\t\t\t{\n-\t\t\t\t// fall through\n-\t\t\t}\n-\t\t}\n-\t\t// It is not \"*.html\". Create a static resource reference\n-\t\telse\n-\t\t{\n-\t\t\tif (infoPath.startsWith(\"/\") || infoPath.startsWith(\"\\\\\"))\n-\t\t\t{\n-\t\t\t\t// href is absolute. Don't change it at all.\n-\t\t\t}\n-\t\t\telse\n+\t\t\t// HTML hrefs are handled first\n+\t\t\tif (supportedPageExtensions.containsKey(extension.toLowerCase()))\n \t\t\t{\n-\t\t\t\t// Href is relative. Create a resource reference pointing at\n-\t\t\t\t// this file\n-\n-\t\t\t\t// <wicket:head> components are handled differently. We can not\n-\t\t\t\t// use the container, because it is the container the header\n-\t\t\t\t// has been added to (e.g. the Page). What we need however, is\n-\t\t\t\t// the component (e.g. a Panel) which contributed it.\n-\t\t\t\tComponent relevantContainer = container;\n-\t\t\t\twhile ((relevantContainer instanceof IComponentResolver) \n-\t\t\t\t\t\t&& !(relevantContainer instanceof IComponentResolverMarker))\n+\t\t\t\t// Obviously a href like href=\"myPkg.MyLabel.html\" will do as well.\n+\t\t\t\t// Wicket will not throw an exception. It accepts it.\n+\t\t\t\tinfoPath = Strings.replaceAll(infoPath, \"/\", \".\");\n+\t\n+\t\t\t\tfinal ApplicationSettings appSettings = page.getApplicationSettings();\n+\t\t\t\tfinal IClassResolver defaultClassResolver = appSettings.getDefaultClassResolver();\n+\t\t\t\t\n+\t\t\t\tfinal String className;\n+\t\t\t\tif (!infoPath.startsWith(\".\"))\n \t\t\t\t{\n-\t\t\t\t\trelevantContainer = relevantContainer.getParent(); \n+\t\t\t\t\t// Href is relative. Resolve the url given relative to the\n+\t\t\t\t\t// current page\n+\t\t\t\t\tclassName = Packages.extractPackageName(page.getClass()) + \".\" + infoPath;\n \t\t\t\t}\n-\n+\t\t\t\telse\n+\t\t\t\t{\n+\t\t\t\t\t// href is absolute. If class with the same absolute path\n+\t\t\t\t\t// exists, use it. Else don't change the href.\n+\t\t\t\t\tclassName = infoPath.substring(1);\n+\t\t\t\t}\n+\t\t\t\t\n \t\t\t\ttry\n \t\t\t\t{\n-\t\t\t\t\t// Create the component implementing the link\n-\t\t\t\t\treturn new CssLink(autoId, relevantContainer.getClass(), href);\n+\t\t\t\t\tfinal Class clazz = defaultClassResolver.resolveClass(className);\n+\t\t\t\t\treturn new AutolinkBookmarkablePageLink(autoId, clazz, pageParameters);\n \t\t\t\t}\n \t\t\t\tcatch (WicketRuntimeException ex)\n \t\t\t\t{\n-\t\t\t\t\t// Provided the resource does not exist, assume the user did\n-\t\t\t\t\t// deliberately not point it to a page or resource. The href\n-\t\t\t\t\t// might still point to a valid homepage outside of wicket.\n-\t\t\t\t\tlog.info(\"Did not find autolink resource: \" + href \n-\t\t\t\t\t\t\t+ \"; Assume it is a valid external URL\");\n+\t\t\t\t\tlog.info(\"Did not find corresponding java class: \" + className);\n+\t\t\t\t\t// fall through\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\t// It is not \"*.html\". Create a static resource reference\n+\t\t\telse\n+\t\t\t{\n+\t\t\t\tif (infoPath.startsWith(\"/\") || infoPath.startsWith(\"\\\\\"))\n+\t\t\t\t{\n+\t\t\t\t\t// href is absolute. Don't change it at all.\n+\t\t\t\t}\n+\t\t\t\telse\n+\t\t\t\t{\n+\t\t\t\t\t// Href is relative. Create a resource reference pointing at\n+\t\t\t\t\t// this file\n+\t\n+\t\t\t\t\t// <wicket:head> components are handled differently. We can not\n+\t\t\t\t\t// use the container, because it is the container the header\n+\t\t\t\t\t// has been added to (e.g. the Page). What we need however, is\n+\t\t\t\t\t// the component (e.g. a Panel) which contributed it.\n+\t\t\t\t\tComponent relevantContainer = container;\n+\t\t\t\t\twhile ((relevantContainer instanceof IComponentResolver) \n+\t\t\t\t\t\t\t&& !(relevantContainer instanceof IComponentResolverMarker))\n+\t\t\t\t\t{\n+\t\t\t\t\t\trelevantContainer = relevantContainer.getParent(); \n+\t\t\t\t\t}\n+\t\n+\t\t\t\t\ttry\n+\t\t\t\t\t{\n+\t\t\t\t\t\t// Create the component implementing the link\n+\t\t\t\t\t\treturn new CssLink(autoId, relevantContainer.getClass(), href);\n+\t\t\t\t\t}\n+\t\t\t\t\tcatch (WicketRuntimeException ex)\n+\t\t\t\t\t{\n+\t\t\t\t\t\t// Provided the resource does not exist, assume the user did\n+\t\t\t\t\t\t// deliberately not point it to a page or resource. The href\n+\t\t\t\t\t\t// might still point to a valid homepage outside of wicket.\n+\t\t\t\t\t\tlog.info(\"Did not find autolink resource: \" + href \n+\t\t\t\t\t\t\t\t+ \"; Assume it is a valid external URL\");\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}", "filename": "wicket/src/java/wicket/AutoLinkResolver.java"}, {"additions": 14, "raw_url": "https://github.com/apache/wicket/raw/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/test/wicket/markup/html/link/AutolinkPageExpectedResult_4.html", "blob_url": "https://github.com/apache/wicket/blob/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/test/wicket/markup/html/link/AutolinkPageExpectedResult_4.html", "sha": "297ba3abe2080774f09d8cf232053a2e7280d428", "changes": 14, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/link/AutolinkPageExpectedResult_4.html?ref=c0d38640f267939c3c8e46d381f62f8f48f912ae", "patch": "@@ -0,0 +1,14 @@\n+<html xmlns:wicket>\n+<body>\n+<wicket:link autolink=\"true\">\n+  <!-- File/page does not exist => Do not change href at all -->\n+  <a href=\"PageDoesNotExist.html\">Home</a>\n+  <!-- Reference an internal target => Do not change href at all -->\n+  <a href=\"#link1\">Link 1</a>\n+  <!-- Not sure what it should do, but it is obviously valid => Do not change href at all -->\n+  <a href=\"\">Link 1</a>\n+  <!-- Not supported yet: Reference an internal target on an existing page -->\n+  <a href=\"SamePage.html#link1\">Link 1</a>\n+</wicket:link>\n+</body>\n+</html>", "filename": "wicket/src/test/wicket/markup/html/link/AutolinkPageExpectedResult_4.html"}, {"additions": 14, "raw_url": "https://github.com/apache/wicket/raw/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/test/wicket/markup/html/link/AutolinkPage_4.html", "blob_url": "https://github.com/apache/wicket/blob/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/test/wicket/markup/html/link/AutolinkPage_4.html", "sha": "0127b353c448344943876f6b331c9adb7a43772c", "changes": 14, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/link/AutolinkPage_4.html?ref=c0d38640f267939c3c8e46d381f62f8f48f912ae", "patch": "@@ -0,0 +1,14 @@\n+<html xmlns:wicket>\n+<body>\n+<wicket:link autolink=true>\n+  <!-- File/page does not exist => Do not change href at all -->\n+  <a href=\"PageDoesNotExist.html\">Home</a>\n+  <!-- Reference an internal target => Do not change href at all -->\n+  <a href=\"#link1\">Link 1</a>\n+  <!-- Not sure what it should do, but it is obviously valid => Do not change href at all -->\n+  <a href=\"\">Link 1</a>\n+  <!-- Not supported yet: Reference an internal target on an existing page -->\n+  <a href=\"SamePage.html#link1\">Link 1</a>\n+</wicket:link>\n+</body>\n+</html>", "filename": "wicket/src/test/wicket/markup/html/link/AutolinkPage_4.html"}, {"additions": 41, "raw_url": "https://github.com/apache/wicket/raw/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/test/wicket/markup/html/link/AutolinkPage_4.java", "blob_url": "https://github.com/apache/wicket/blob/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/test/wicket/markup/html/link/AutolinkPage_4.java", "sha": "ce87975437157afc279e34486952d80bdf6651f8", "changes": 41, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/link/AutolinkPage_4.java?ref=c0d38640f267939c3c8e46d381f62f8f48f912ae", "patch": "@@ -0,0 +1,41 @@\n+/*\n+ * $Id$\n+ * $Revision$\n+ * $Date$\n+ *\n+ * ====================================================================\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package wicket.markup.html.link;\n+\n+import wicket.PageParameters;\n+import wicket.markup.html.WebPage;\n+\n+\n+/**\n+ * Mock page for testing.\n+ *\n+ * @author Chris Turner\n+ */\n+public class AutolinkPage_4 extends WebPage \n+{\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\t/**\n+\t * Construct.\n+\t * @param parameters\n+\t */\n+\tpublic AutolinkPage_4(final PageParameters parameters) \n+\t{\n+    }\n+}", "filename": "wicket/src/test/wicket/markup/html/link/AutolinkPage_4.java"}, {"additions": 9, "raw_url": "https://github.com/apache/wicket/raw/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/test/wicket/markup/html/link/AutolinkTest.java", "blob_url": "https://github.com/apache/wicket/blob/c0d38640f267939c3c8e46d381f62f8f48f912ae/wicket/src/test/wicket/markup/html/link/AutolinkTest.java", "sha": "c489be2858cdd028ca3787e33d6d7029d7083fcc", "changes": 9, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/link/AutolinkTest.java?ref=c0d38640f267939c3c8e46d381f62f8f48f912ae", "patch": "@@ -70,4 +70,13 @@ public void testRenderHomePage_3() throws Exception\n         application.getSettings().setAutomaticLinking(true);\n \t    executeTest(AutolinkPage_3.class, \"AutolinkPageExpectedResult_3.html\");\n \t}\n+    \n+\t/**\n+\t * @throws Exception\n+\t */\n+\tpublic void testRenderHomePage_4() throws Exception\n+\t{\n+        application.getSettings().setAutomaticLinking(true);\n+\t    executeTest(AutolinkPage_4.class, \"AutolinkPageExpectedResult_4.html\");\n+\t}\n }", "filename": "wicket/src/test/wicket/markup/html/link/AutolinkTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/8511b06ce2f23cabd1f796b9d787b65245f06a23", "parent": "https://github.com/apache/wicket/commit/c0d9739c90cdb4e06c34c8346158e4a2a9aa58cf", "message": "fix for 1251658 (Possible NPE in AutoLinkResolver) and 1291603 (patch)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@457774 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_89", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/AutoLinkResolver.java", "blob_url": "https://github.com/apache/wicket/blob/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/AutoLinkResolver.java", "sha": "6499b5bcd9edd4f24b3e362be21792c0958f3157", "changes": 13, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/AutoLinkResolver.java?ref=8511b06ce2f23cabd1f796b9d787b65245f06a23", "patch": "@@ -29,6 +29,7 @@\n import wicket.markup.html.link.ExternalLink;\n import wicket.util.string.Strings;\n import wicket.util.value.ValueMap;\n+import wicket.util.lang.Packages;\n \n /**\n  * The AutoLinkResolver is responsible to handle automatic link resolution. Tags\n@@ -153,14 +154,14 @@ private final Component resolveAutomaticLink(final MarkupContainer container, fi\n \t\t\t// Wicket will not throw an exception. It accepts it.\n \t\t\tinfoPath = Strings.replaceAll(infoPath, \"/\", \".\");\n \n+\t\t\tfinal ApplicationSettings appSettings = page.getApplicationSettings();\n+\t\t\tfinal IClassResolver defaultClassResolver = appSettings.getDefaultClassResolver();\n \t\t\tif (!infoPath.startsWith(\".\"))\n \t\t\t{\n \t\t\t\t// Href is relative. Resolve the url given relative to the\n \t\t\t\t// current page\n-\t\t\t\tfinal String className = page.getClass().getPackage().getName() + \".\" + infoPath;\n-\t\t\t\tfinal Class clazz = page.getApplicationSettings().getDefaultClassResolver()\n-\t\t\t\t\t\t.resolveClass(className);\n-\n+\t\t\t\tfinal String className = Packages.extractPackageName( page.getClass() ) + \".\" + infoPath;\n+\t\t\t\tfinal Class clazz = defaultClassResolver.resolveClass(className);\n \t\t\t\treturn new AutolinkBookmarkablePageLink(autoId, clazz, pageParameters);\n \t\t\t}\n \t\t\telse\n@@ -170,9 +171,7 @@ private final Component resolveAutomaticLink(final MarkupContainer container, fi\n \t\t\t\tfinal String className = infoPath.substring(1);\n \t\t\t\ttry\n \t\t\t\t{\n-\t\t\t\t\tfinal Class clazz = page.getApplicationSettings().getDefaultClassResolver()\n-\t\t\t\t\t\t\t.resolveClass(className);\n-\n+\t\t\t\t\tfinal Class clazz = defaultClassResolver.resolveClass(className);\n \t\t\t\t\treturn new AutolinkBookmarkablePageLink(autoId, clazz, pageParameters);\n \t\t\t\t}\n \t\t\t\tcatch (WicketRuntimeException ex)", "filename": "wicket/src/java/wicket/AutoLinkResolver.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/markup/html/PackageResource.java", "blob_url": "https://github.com/apache/wicket/blob/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/markup/html/PackageResource.java", "sha": "f07973f856de94c95149b9ced09eb130229f33d8", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/PackageResource.java?ref=8511b06ce2f23cabd1f796b9d787b65245f06a23", "patch": "@@ -170,7 +170,7 @@ private PackageResource(final Class scope, final String path, final Locale local\n \t{\n \t\tthis.scope = scope;\n \t\t// Convert resource path to absolute path relative to base package\n-\t\tthis.absolutePath = Packages.absolutePath(scope.getPackage(), path);\n+\t\tthis.absolutePath = Packages.absolutePath(scope, path);\n \t\tthis.locale = locale;\n \t\tthis.style = style;\n \t\t", "filename": "wicket/src/java/wicket/markup/html/PackageResource.java"}, {"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/pageset/PackagePageSetMap.java", "blob_url": "https://github.com/apache/wicket/blob/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/pageset/PackagePageSetMap.java", "sha": "25d27766331df53ef7f7c1f8a0e98405f6c3e857", "changes": 11, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/pageset/PackagePageSetMap.java?ref=8511b06ce2f23cabd1f796b9d787b65245f06a23", "patch": "@@ -33,7 +33,7 @@\n public class PackagePageSetMap extends PageSetMap\n {\n \t/** Map from Package to PageSet */\n-\tprivate final Map packageToPageSet = new HashMap();\n+\tprivate final Map packageNameToPageSet = new HashMap();\n \n \t/**\n \t * Adds a mapping from a given class to a given PageSet\n@@ -46,21 +46,24 @@\n \tpublic final void add(final Class pageClass, final PageSet pageSet)\n \t{\n \t\tcheckPageClass(pageClass);\n-\t\tpackageToPageSet.put(pageClass.getPackage(), pageSet);\n+\t\tString packageName = Packages.extractPackageName( pageClass );\n+\t\tpackageNameToPageSet.put( packageName, pageSet );\n \t}\n \n \t/**\n \t * @see wicket.PageSetMap#pageSet(wicket.Page)\n \t */\n \tpublic PageSet pageSet(final Page page)\n \t{\n-\t\tfor (Package p = page.getClass().getPackage(); p != null; p = Packages.parent(p))\n+\t\tString packageName = Packages.extractPackageName( page.getClass() );\n+\t\twhile ( \"\".equals( packageName ) == false )\n \t\t{\n-\t\t\tfinal PageSet pageSet = (PageSet)packageToPageSet.get(p);\n+\t\t\tfinal PageSet pageSet = (PageSet)packageNameToPageSet.get(packageName);\n \t\t\tif (pageSet != null)\n \t\t\t{\n \t\t\t\treturn pageSet;\n \t\t\t}\n+\t\t\tpackageName = Packages.parent(packageName);\n \t\t}\n \t\treturn null;\n \t}", "filename": "wicket/src/java/wicket/pageset/PackagePageSetMap.java"}, {"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/util/lang/Classes.java", "blob_url": "https://github.com/apache/wicket/blob/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/util/lang/Classes.java", "sha": "b64973484df8a010d206834a370f13c5080fa61f", "changes": 14, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/lang/Classes.java?ref=8511b06ce2f23cabd1f796b9d787b65245f06a23", "patch": "@@ -53,24 +53,24 @@ public static String name(final Class c)\n \t}\n \n \t/**\n-\t * Takes a package and a relative path to a class and returns any class at\n-\t * that relative path. For example, if the given package was java.lang and\n+\t * Takes a Class and a relative path to a class and returns any class at\n+\t * that relative path. For example, if the given Class was java.lang.System and\n \t * the relative path was \"../util/List\", then the java.util.List class would\n \t * be returned.\n-\t * \n-\t * @param p\n+\t *\n+\t * @param scope\n \t *            The package to start at\n \t * @param path\n \t *            The relative path to the class\n \t * @return The class\n \t * @throws ClassNotFoundException\n \t */\n-\tpublic static Class relativeClass(final Package p, final String path)\n+\tpublic static Class relativeClass(final Class scope, final String path)\n \t\t\tthrows ClassNotFoundException\n \t{\n-\t\treturn Class.forName(Packages.absolutePath(p, path).replace('/', '.'));\n+\t\treturn Class.forName(Packages.absolutePath(scope, path).replace('/', '.'));\n \t}\n-\t\n+\n \t/**\n \t * Invoke the setter method for 'name' on object and provide the 'value'\n \t * ", "filename": "wicket/src/java/wicket/util/lang/Classes.java"}, {"additions": 84, "raw_url": "https://github.com/apache/wicket/raw/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/util/lang/Packages.java", "blob_url": "https://github.com/apache/wicket/blob/8511b06ce2f23cabd1f796b9d787b65245f06a23/wicket/src/java/wicket/util/lang/Packages.java", "sha": "b8586f88fd1ec675662baf6a3975d5586c184e0c", "changes": 97, "status": "modified", "deletions": 13, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/lang/Packages.java?ref=8511b06ce2f23cabd1f796b9d787b65245f06a23", "patch": "@@ -19,15 +19,33 @@\n \n import wicket.util.string.IStringIterator;\n import wicket.util.string.StringList;\n-import wicket.util.string.Strings;\n \n /**\n  * Utilities for dealing with packages.\n  * \n  * @author Jonathan Locke\n+ * @author Niclas Hedhman\n  */\n public final class Packages\n {\n+\t/**\n+\t * Takes a package and a relative path to a resource and returns an absolute\n+\t * path to the resource. For example, if the given package was java.lang and\n+\t * the relative path was \"../util/List\", then \"java/util/List\" would be\n+\t * returned.\n+\t * \n+\t * @param p\n+\t *            The package to start at\n+\t * @param relativePath\n+\t *            The relative path to the class\n+\t * @return The absolute path\n+\t */\n+\tpublic static String absolutePath(final Class p, final String relativePath)\n+\t{\n+\t\tString packName = extractPackageName(p);\n+\t\treturn absolutePath(packName, relativePath);\n+\t}\n+\n \t/**\n \t * Takes a package and a relative path to a resource and returns an absolute\n \t * path to the resource. For example, if the given package was java.lang and\n@@ -41,6 +59,23 @@\n \t * @return The absolute path\n \t */\n \tpublic static String absolutePath(final Package p, final String relativePath)\n+\t{\n+\t\treturn absolutePath(p.getName(), relativePath);\n+\t}\n+\n+\t/**\n+\t * Takes a package and a relative path to a resource and returns an absolute\n+\t * path to the resource. For example, if the given package was java.lang and\n+\t * the relative path was \"../util/List\", then \"java/util/List\" would be\n+\t * returned.\n+\t * \n+\t * @param packageName\n+\t *            The package to start at\n+\t * @param relativePath\n+\t *            The relative path to the class\n+\t * @return The absolute path\n+\t */\n+\tpublic static String absolutePath(final String packageName, final String relativePath)\n \t{\n \t\t// Is path already absolute?\n \t\tif (relativePath.startsWith(\"/\"))\n@@ -50,7 +85,7 @@ public static String absolutePath(final Package p, final String relativePath)\n \t\telse\n \t\t{\n \t\t\t// Break package into list of package names\n-\t\t\tfinal StringList absolutePath = StringList.tokenize(p.getName(), \".\");\n+\t\t\tfinal StringList absolutePath = StringList.tokenize(packageName, \".\");\n \n \t\t\t// Break path into folders\n \t\t\tfinal StringList folders = StringList.tokenize(relativePath, \"/\\\\\");\n@@ -62,7 +97,7 @@ public static String absolutePath(final Package p, final String relativePath)\n \t\t\t\tfinal String folder = iterator.next();\n \n \t\t\t\t// Up one?\n-\t\t\t\tif (folder.equals(\"..\"))\n+\t\t\t\tif (\"..\".equals(folder))\n \t\t\t\t{\n \t\t\t\t\t// Pop off stack\n \t\t\t\t\tif (absolutePath.size() > 0)\n@@ -87,23 +122,59 @@ public static String absolutePath(final Package p, final String relativePath)\n \t}\n \n \t/**\n-\t * @param p\n-\t *            The Package\n+\t * Determines the package name for the given class.\n+\t * \n+\t * @param forClass\n+\t *            the class\n+\t * @return the package name\n+\t */\n+\tpublic static String extractPackageName(final Class forClass)\n+\t{\n+\t\tString classname = forClass.getName();\n+\t\tString parent = parent(classname);\n+\t\treturn parent;\n+\t}\n+\n+\t/**\n+\t * Gets the parent package name.\n+\t * \n+\t * @param packageName\n+\t *            The Package name\n \t * @return The parent Package\n \t */\n-\tpublic static Package parent(final Package p)\n+\tpublic static String parent(final String packageName)\n \t{\n-\t\tfinal String packageName = p.getName();\n-\t\tif (packageName.indexOf('.') != -1)\n+\t\tint pos = packageName.lastIndexOf(\".\");\n+\t\tString parent;\n+\t\tif (pos < 0)\n \t\t{\n-\t\t\tfinal String parentPackageName = Strings.beforeLast(packageName, '.');\n-\t\t\treturn Package.getPackage(parentPackageName);\n+\t\t\tpos = packageName.lastIndexOf(\"/\");\n+\t\t\tif (pos < 0)\n+\t\t\t{\n+\t\t\t\tpos = 0;\n+\t\t\t}\n \t\t}\n-\t\treturn null;\n+\t\tparent = packageName.substring(0, pos);\n+\t\treturn parent;\n \t}\n-\t\n+\n+\n+\t/**\n+\t * Resolve scope for the given class by extracting it's package name and\n+\t * converting all dots to slashes.\n+\t * \n+\t * @param forClass\n+\t *            the class\n+\t * @return the scope string\n+\t */\n+\tpublic static String resolveScope(final Class forClass)\n+\t{\n+\t\tString packName = extractPackageName(forClass);\n+\t\treturn packName.replace('.', '/');\n+\t}\n+\n \t/**\n-\t * Instantiation not allowed\n+\t * Instantiation not allowed.\n \t */\n \tprivate Packages()\n \t{", "filename": "wicket/src/java/wicket/util/lang/Packages.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/8cb7d48aa7bbc058255abd1f282252897a9d9baa", "parent": "https://github.com/apache/wicket/commit/e8c477fadf373f35a068acc0d710d6a91ffa9ff7", "message": "Fixed possible NPE's, upped coverage from <25% to >30%\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@457539 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_90", "file": [{"additions": 22, "raw_url": "https://github.com/apache/wicket/raw/8cb7d48aa7bbc058255abd1f282252897a9d9baa/wicket/src/java/wicket/util/string/Strings.java", "blob_url": "https://github.com/apache/wicket/blob/8cb7d48aa7bbc058255abd1f282252897a9d9baa/wicket/src/java/wicket/util/string/Strings.java", "sha": "7e2c85225cfd87a84769f440903693d6bdf25228", "changes": 22, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/string/Strings.java?ref=8cb7d48aa7bbc058255abd1f282252897a9d9baa", "patch": "@@ -61,6 +61,10 @@\n \t */\n \tpublic static String afterFirst(final String s, final char c)\n \t{\n+\t\tif(s == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n \t\tfinal int index = s.indexOf(c);\n \n \t\tif (index == -1)\n@@ -90,6 +94,8 @@ public static String afterFirstPathComponent(final String path, final char separ\n \t}\n \n \t/**\n+\t * Returns everything after the last occurence of the given character in s.\n+\t *\n \t * @param s\n \t *            The string\n \t * @param c\n@@ -99,6 +105,10 @@ public static String afterFirstPathComponent(final String path, final char separ\n \t */\n \tpublic static String afterLast(final String s, final char c)\n \t{\n+\t\tif(s == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n \t\tfinal int index = s.lastIndexOf(c);\n \n \t\tif (index == -1)\n@@ -119,6 +129,10 @@ public static String afterLast(final String s, final char c)\n \t */\n \tpublic static String beforeFirst(final String s, final char c)\n \t{\n+\t\tif(s == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n \t\tfinal int index = s.indexOf(c);\n \n \t\tif (index == -1)\n@@ -139,6 +153,10 @@ public static String beforeFirst(final String s, final char c)\n \t */\n \tpublic static String beforeLast(final String s, final char c)\n \t{\n+\t\tif(s == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n \t\tfinal int index = s.lastIndexOf(c);\n \n \t\tif (index == -1)\n@@ -176,6 +194,10 @@ public static String beforeLastPathComponent(final String path, final char separ\n \t */\n \tpublic static String capitalize(final String s)\n \t{\n+\t\tif(s == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n \t\tfinal char[] chars = s.toCharArray();\n \n \t\tif (chars.length > 0)", "filename": "wicket/src/java/wicket/util/string/Strings.java"}, {"additions": 142, "raw_url": "https://github.com/apache/wicket/raw/8cb7d48aa7bbc058255abd1f282252897a9d9baa/wicket/src/test/wicket/util/string/StringsTest.java", "blob_url": "https://github.com/apache/wicket/blob/8cb7d48aa7bbc058255abd1f282252897a9d9baa/wicket/src/test/wicket/util/string/StringsTest.java", "sha": "097bd817cf560dac355616e6ad022e2c5d20f2df", "changes": 166, "status": "modified", "deletions": 24, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/util/string/StringsTest.java?ref=8cb7d48aa7bbc058255abd1f282252897a9d9baa", "patch": "@@ -25,33 +25,151 @@\n \n /**\n  * Test cases for this object\n+ * \n  * @author Jonathan Locke\n  */\n public final class StringsTest extends TestCase\n {\n-    /**\n-     *\n-     */\n-    public void test()\n-    {\n-        Assert.assertEquals(\"foo\", Strings.lastPathComponent(\"bar.garply.foo\", '.'));\n-        Assert.assertEquals(\"foo\", Strings.lastPathComponent(\"foo\", '.'));\n-        Assert.assertEquals(\"bar\", Strings.firstPathComponent(\"bar.garply.foo\", '.'));\n-        Assert.assertEquals(\"foo\", Strings.lastPathComponent(\"foo\", '.'));\n-        Assert.assertEquals(\"garply.foo\", Strings.afterFirstPathComponent(\"bar.garply.foo\", '.'));\n-        Assert.assertEquals(\"\", Strings.afterFirstPathComponent(\"foo\", '.'));\n-        Assert.assertEquals(\"bar.baz\", Strings.beforeLast(\"bar.baz.foo\", '.'));\n-        Assert.assertEquals(\"\", Strings.beforeLast(\"bar\", '.'));\n-        Assert.assertEquals(\"bar\", Strings.beforeFirst(\"bar.baz.foo\", '.'));\n-        Assert.assertEquals(\"\", Strings.beforeFirst(\"bar\", '.'));\n-        Assert.assertEquals(\"baz.foo\", Strings.afterFirst(\"bar.baz.foo\", '.'));\n-        Assert.assertEquals(\"\", Strings.afterFirst(\"bar\", '.'));\n-        Assert.assertEquals(\"foo\", Strings.afterLast(\"bar.baz.foo\", '.'));\n-        Assert.assertEquals(\"\", Strings.afterLast(\"bar\", '.'));\n-        Assert.assertEquals(\"foo\", Strings.replaceAll(\"afaooaaa\", \"a\", \"\"));\n-        Assert.assertEquals(\"fuzzyffuzzyoofuzzyfuzzyfuzzy\", Strings.replaceAll(\"afaooaaa\", \"a\",\n-                \"fuzzy\"));\n-    }\n-}\n+\t/**\n+\t * \n+\t */\n+\tpublic void test()\n+\t{\n+\t\tAssert.assertEquals(\"foo\", Strings.lastPathComponent(\"bar.garply.foo\", '.'));\n+\t\tAssert.assertEquals(\"foo\", Strings.lastPathComponent(\"foo\", '.'));\n+\t\tAssert.assertEquals(\"bar\", Strings.firstPathComponent(\"bar.garply.foo\", '.'));\n+\t\tAssert.assertEquals(\"foo\", Strings.lastPathComponent(\"foo\", '.'));\n+\t\tAssert.assertEquals(\"garply.foo\", Strings.afterFirstPathComponent(\"bar.garply.foo\", '.'));\n+\t\tAssert.assertEquals(\"\", Strings.afterFirstPathComponent(\"foo\", '.'));\n+\t\tAssert.assertEquals(\"bar.baz\", Strings.beforeLast(\"bar.baz.foo\", '.'));\n+\t\tAssert.assertEquals(\"\", Strings.beforeLast(\"bar\", '.'));\n+\t\tAssert.assertEquals(\"bar\", Strings.beforeFirst(\"bar.baz.foo\", '.'));\n+\t\tAssert.assertEquals(\"\", Strings.beforeFirst(\"bar\", '.'));\n+\t\tAssert.assertEquals(\"baz.foo\", Strings.afterFirst(\"bar.baz.foo\", '.'));\n+\t\tAssert.assertEquals(\"\", Strings.afterFirst(\"bar\", '.'));\n+\t\tAssert.assertEquals(\"foo\", Strings.afterLast(\"bar.baz.foo\", '.'));\n+\t\tAssert.assertEquals(\"\", Strings.afterLast(\"bar\", '.'));\n+\t\tAssert.assertEquals(\"foo\", Strings.replaceAll(\"afaooaaa\", \"a\", \"\"));\n+\t\tAssert.assertEquals(\"fuzzyffuzzyoofuzzyfuzzyfuzzy\", Strings.replaceAll(\"afaooaaa\", \"a\",\n+\t\t\t\t\"fuzzy\"));\n+\t}\n+\n+\t/**\n+\t * Tests the <code>beforeFirst</code> method.\n+\t */\n+\tpublic void testBeforeFirst()\n+\t{\n+\t\tassertNull(Strings.beforeFirst(null, '.'));\n+\t\tassertEquals(\"\", Strings.beforeFirst(\"\", '.'));\n+\t\tassertEquals(\"\", Strings.beforeFirst(\"\", ' '));\n+\t\tassertEquals(\"\", Strings.beforeFirst(\".\", '.'));\n+\t\tassertEquals(\"\", Strings.beforeFirst(\"..\", '.'));\n+\t\tassertEquals(\"com\", Strings.beforeFirst(\"com.foo.bar\", '.'));\n+\t\tassertEquals(\"com\", Strings.beforeFirst(\"com foo bar\", ' '));\n+\t\tassertEquals(\"com foo\", Strings.beforeFirst(\"com foo.bar\", '.'));\n+\t}\n+\n+\t/**\n+\t * Tests the <code>afterFirst</code> method.\n+\t */\n+\tpublic void testAfterFirst()\n+\t{\n+\t\tassertNull(Strings.afterFirst(null, '.'));\n+\t\tassertEquals(\"\", Strings.afterFirst(\"\", '.'));\n+\t\tassertEquals(\"\", Strings.afterFirst(\"\", ' '));\n+\t\tassertEquals(\"\", Strings.afterFirst(\".\", '.'));\n+\t\tassertEquals(\".\", Strings.afterFirst(\"..\", '.'));\n+\t\tassertEquals(\"foo.bar\", Strings.afterFirst(\"com.foo.bar\", '.'));\n+\t\tassertEquals(\"foo bar\", Strings.afterFirst(\"com foo bar\", ' '));\n+\t\tassertEquals(\"bar\", Strings.afterFirst(\"com.foo bar\", ' '));\n+\t}\n+\n+\t/**\n+\t * Tests the <code>afterLast</code> method.\n+\t */\n+\tpublic void testAfterLast()\n+\t{\n+\t\tassertNull(Strings.afterLast(null, '.'));\n+\t\tassertEquals(\"\", Strings.afterLast(\"\", '.'));\n+\t\tassertEquals(\"\", Strings.afterLast(\"\", ' '));\n+\t\tassertEquals(\"\", Strings.afterLast(\".\", '.'));\n+\t\tassertEquals(\"\", Strings.afterLast(\"..\", '.'));\n+\t\tassertEquals(\"bar\", Strings.afterLast(\"com.foo.bar\", '.'));\n+\t\tassertEquals(\"bar\", Strings.afterLast(\"com foo bar\", ' '));\n+\t\tassertEquals(\"bar\", Strings.afterLast(\"com foo.bar\", '.'));\n+\t}\n+\n+\t/**\n+\t * Tests the beforeLastPathComponent method\n+\t */\n+\tpublic void testBeforeLastPathComponent()\n+\t{\n+\t\tassertNull(Strings.beforeLastPathComponent(null, '.'));\n+\t\tassertEquals(\"\", Strings.beforeLastPathComponent(\"\", '.'));\n+\t\tassertEquals(\"\", Strings.beforeLastPathComponent(\"\", ' '));\n+\t\tassertEquals(\"\", Strings.beforeLastPathComponent(\".\", '.'));\n+\t\tassertEquals(\".\", Strings.beforeLastPathComponent(\"..\", '.'));\n+\t\tassertEquals(\"foo\", Strings.beforeLastPathComponent(\"foo.bar\", '.'));\n+\t\tassertEquals(\"\", Strings.beforeLastPathComponent(\"foo.bar\", ' '));\n+\t\tassertEquals(\"foo.ba\", Strings.beforeLastPathComponent(\"foo.bar\", 'r'));\n+\t\tassertEquals(\"com.foo\", Strings.beforeLastPathComponent(\"com.foo.bar\", '.'));\n+\t}\n \n+\t/**\n+\t * Tests the capitalize method.\n+\t */\n+\tpublic void testCapitalize()\n+\t{\n+\t\tassertEquals(\"Lorem ipsum dolor sit amet\", Strings.capitalize(\"lorem ipsum dolor sit amet\"));\n+\t\tassertEquals(\"Lorem ipsum dolor sit amet\", Strings.capitalize(\"Lorem ipsum dolor sit amet\"));\n+\t\tassertEquals(\" abcdefghijklm\", Strings.capitalize(\" abcdefghijklm\"));\n+\t\tassertEquals(\"\", Strings.capitalize(\"\"));\n+\t\tassertNull(Strings.capitalize(null));\n+\t}\n \n+\t/**\n+\t * Tests the escapeMarkup method.\n+\t */\n+\tpublic void testEscapeMarkup()\n+\t{\n+\t\tassertNull(Strings.escapeMarkup(null));\n+\t\tassertEquals(\"\", Strings.escapeMarkup(\"\"));\n+\n+\t\tassertEquals(\"&amp;\", Strings.escapeMarkup(\"&\"));\n+\t\tassertEquals(\"&#\", Strings.escapeMarkup(\"&#\"));\n+\t\tassertEquals(\"&#0000;\", Strings.escapeMarkup(\"&#0000;\"));\n+\t\t\n+\t\tassertEquals(\"&amp;amp;\", Strings.escapeMarkup(\"&amp;\"));\n+\t\tassertEquals(\"&lt; &gt;&amp;&quot;&#039;?:;{}[]-_+=()*^%$#@!~`\", Strings.escapeMarkup(\"< >&\\\"'?:;{}[]-_+=()*^%$#@!~`\"));\n+\t\tassertEquals(\"&lt;&nbsp;&gt;&amp;&quot;&#039;?:;{}[]-_+=()*^%$#@!~`\", Strings.escapeMarkup(\"< >&\\\"'?:;{}[]-_+=()*^%$#@!~`\", true));\n+\t}\n+\t\n+\t/**\n+\t * Tests the escapeMarkup method with whitespace.\n+\t */\n+\tpublic void testEscapeMarkupWhiteSpace()\n+\t{\n+\t\tassertNull(Strings.escapeMarkup(null, true));\n+\t\tassertEquals(\"\", Strings.escapeMarkup(\"\", true));\n+\t\t\n+\t\tassertEquals(\"\\n \\t\", Strings.escapeMarkup(\"\\n \\t\", false));\n+\t\tassertEquals(\"\\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\", Strings.escapeMarkup(\"\\n \\t\", true));\n+\t\tassertEquals(\"  \", Strings.escapeMarkup(\"  \", false));\n+\t\tassertEquals(\"&nbsp;&nbsp;\", Strings.escapeMarkup(\"  \", true));\n+\t}\n+\n+\t/**\n+\t * Tests the escapeMarkup method with unicode escapes.\n+\t */\n+\tpublic void testEscapeMarkupUnicode()\n+\t{\n+\t\tassertNull(Strings.escapeMarkup(null, true, true));\n+\t\tassertEquals(\"\", Strings.escapeMarkup(\"\", true, true));\n+\n+\t\tassertEquals(\"&#199;&#252;&#233;&#226;&#228;&#224;&#229;&#231;&#234;&#235;\", \n+\t\t\t\tStrings.escapeMarkup(\"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\", false, true));\n+\n+\t\tassertEquals(\"\\n \\t&#233;\", Strings.escapeMarkup(\"\\n \\t\ufffd\", false, true));\n+\t\tassertEquals(\"\\n \\t\ufffd\", Strings.escapeMarkup(\"\\n \\t\ufffd\", false, false));\n+\t}\n+}", "filename": "wicket/src/test/wicket/util/string/StringsTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/8911419f808f863815c3a5977e590ace40ed1282", "parent": "https://github.com/apache/wicket/commit/6611cafbe86f72ee7266c56779d855926c39fe41", "message": "avoid npe if not online\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@457492 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_91", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/8911419f808f863815c3a5977e590ace40ed1282/wicket-examples/src/java/wicket/examples/stockquote/StockQuoteLabel.java", "blob_url": "https://github.com/apache/wicket/blob/8911419f808f863815c3a5977e590ace40ed1282/wicket-examples/src/java/wicket/examples/stockquote/StockQuoteLabel.java", "sha": "0263fd7081cd2c92aefb705edd1dfd60eb58af00", "changes": 8, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-examples/src/java/wicket/examples/stockquote/StockQuoteLabel.java?ref=8911419f808f863815c3a5977e590ace40ed1282", "patch": "@@ -83,9 +83,13 @@ private String getQuote(String symbol)\n \t\tString strReturn = \"\";\n \t\tString strSOAPPacket = getSOAPQuote(symbol);\n \n-\t\tint nStart = strSOAPPacket.indexOf(\"<Result xsi:type='xsd:float'>\") + 29;\n+\t\tint nStart = strSOAPPacket.indexOf(\"<Result xsi:type='xsd:float'>\");\n+\t\tif (nStart == -1)\n+\t\t{\n+\t\t    return \"(unknown)\";\n+\t\t}\n \t\tint nEnd = strSOAPPacket.indexOf(\"</Result>\");\n-\t\tstrReturn = strSOAPPacket.substring(nStart, nEnd);\n+\t\tstrReturn = strSOAPPacket.substring(nStart + 29, nEnd);\n \t\treturn strReturn;\n \t}\n ", "filename": "wicket-examples/src/java/wicket/examples/stockquote/StockQuoteLabel.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/19eaefd68baa52e7d70428908ea67b1b65ff9671", "parent": "https://github.com/apache/wicket/commit/97760d3e67b8ebb3b1e883ae697e883535cdc3ed", "message": "NPE instead of IllegalArgE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@457138 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_92", "file": [{"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/19eaefd68baa52e7d70428908ea67b1b65ff9671/wicket/src/java/wicket/util/convert/Converter.java", "blob_url": "https://github.com/apache/wicket/blob/19eaefd68baa52e7d70428908ea67b1b65ff9671/wicket/src/java/wicket/util/convert/Converter.java", "sha": "57fa660bcb41e78d069e929934b5e3191e9b387d", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/convert/Converter.java?ref=19eaefd68baa52e7d70428908ea67b1b65ff9671", "patch": "@@ -169,7 +169,7 @@ public Object convert(Object value, Class c)\n \t\t// Class cannot be null\n \t\tif (c == null)\n \t\t{\n-\t\t\tthrow new IllegalArgumentException(\"Class cannot be null\");\n+\t\t\tthrow new NullPointerException(\"Class cannot be null\");\n \t\t}\n \n \t\t// Catch all cases where value is already the right type\n@@ -257,11 +257,11 @@ public ITypeConverter set(final Class c, final ITypeConverter converter)\n \t{\n \t\tif (converter == null)\n \t\t{\n-\t\t\tthrow new IllegalArgumentException(\"Converter cannot be null\");\n+\t\t\tthrow new NullPointerException(\"Converter cannot be null\");\n \t\t}\n \t\tif (c == null)\n \t\t{\n-\t\t\tthrow new IllegalArgumentException(\"Class cannot be null\");\n+\t\t\tthrow new NullPointerException(\"Class cannot be null\");\n \t\t}\n \t\treturn (ITypeConverter)classToConverter.put(c, converter);\n \t}", "filename": "wicket/src/java/wicket/util/convert/Converter.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/743503c86e52eb965bf73c47164e8f2f1b754e7a", "parent": "https://github.com/apache/wicket/commit/8c90a9193a82d1b21ac17873654eaf56aec9e88a", "message": "fixed [1182843 ] NPE in exception generation process\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@456498 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_93", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/743503c86e52eb965bf73c47164e8f2f1b754e7a/wicket/src/java/wicket/markup/MarkupCache.java", "blob_url": "https://github.com/apache/wicket/blob/743503c86e52eb965bf73c47164e8f2f1b754e7a/wicket/src/java/wicket/markup/MarkupCache.java", "sha": "4b848dbb1635013237d3106dc7afd52e0c8ff5b4", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/MarkupCache.java?ref=743503c86e52eb965bf73c47164e8f2f1b754e7a", "patch": "@@ -91,7 +91,7 @@ public final MarkupStream getMarkupStream(final MarkupContainer container, final\n \t\t\t// throw exception since there is no associated markup\n \t\t\tthrow new WicketRuntimeException(\n \t\t\t\t\t\"Markup not found. Component class: \"\n-\t\t\t\t\t\t\t+ clazz.getName()\n+\t\t\t\t\t\t\t+ (clazz != null ? clazz.getName() : container.getClass().getName())\n \t\t\t\t\t\t\t+ \" Enable debug messages for wicket.util.resource.Resource to get a list of all filenames tried.\");\n \t\t}\n \t}", "filename": "wicket/src/java/wicket/markup/MarkupCache.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/feed0b7814855c9d8815826ecd4c75f96da090cf", "parent": "https://github.com/apache/wicket/commit/5fe57410df21141d1a8db05fcb95728ab0ab8065", "message": "WICKET-5532 NPE calling PackageResource.getResourceStream() if there is no RequestCycle defined\n\nUse empty request and response when a PackageResource is used out of a request cycle\n\n(cherry picked from commit ae44d26db32587f4ddb9b8c52460ec1450dc96f5)", "bug_id": "wicket_94", "file": [{"additions": 13, "raw_url": "https://github.com/apache/wicket/raw/feed0b7814855c9d8815826ecd4c75f96da090cf/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResource.java", "blob_url": "https://github.com/apache/wicket/blob/feed0b7814855c9d8815826ecd4c75f96da090cf/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResource.java", "sha": "403d1f7da77e6859b25ac03d5b1174c046c1f8ef", "changes": 14, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResource.java?ref=feed0b7814855c9d8815826ecd4c75f96da090cf", "patch": "@@ -30,8 +30,11 @@\n import org.apache.wicket.core.util.lang.WicketObjects;\n import org.apache.wicket.core.util.resource.locator.IResourceStreamLocator;\n import org.apache.wicket.markup.html.IPackageResourceGuard;\n+import org.apache.wicket.mock.MockWebRequest;\n+import org.apache.wicket.request.Url;\n import org.apache.wicket.request.cycle.RequestCycle;\n import org.apache.wicket.request.resource.caching.IStaticCacheableResource;\n+import org.apache.wicket.response.StringResponse;\n import org.apache.wicket.util.io.IOUtils;\n import org.apache.wicket.util.lang.Classes;\n import org.apache.wicket.util.lang.Packages;\n@@ -493,7 +496,16 @@ public InputStream getInputStream() throws ResourceStreamNotFoundException\n \t\t\t}\n \n \t\t\tRequestCycle cycle = RequestCycle.get();\n-\t\t\tAttributes attributes = new Attributes(cycle.getRequest(), cycle.getResponse());\n+\t\t\tAttributes attributes;\n+\t\t\tif (cycle != null)\n+\t\t\t{\n+\t\t\t\tattributes = new Attributes(cycle.getRequest(), cycle.getResponse());\n+\t\t\t}\n+\t\t\telse\n+\t\t\t{\n+\t\t\t\t// use empty request and response in case of non-http thread. WICKET-5532\n+\t\t\t\tattributes = new Attributes(new MockWebRequest(Url.parse(\"\")), new StringResponse());\n+\t\t\t}\n \t\t\tbyte[] processedBytes = processResponse(attributes, bytes);\n \t\t\treturn new ByteArrayInputStream(processedBytes);\n \t\t}", "filename": "wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResource.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/ca2ae1ae5aa57665bd7ae292bc4ec5fe7524a158", "parent": "https://github.com/apache/wicket/commit/4fa68de58a9e18f183b2db381c47f7ac1a3b929d", "message": "WICKET-4152 NPE in CachingResourceStreamLocator due to the search in parent's markup in Autolink code\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1186767 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_95", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/ca2ae1ae5aa57665bd7ae292bc4ec5fe7524a158/wicket-core/src/main/java/org/apache/wicket/markup/resolver/AutoLinkResolver.java", "blob_url": "https://github.com/apache/wicket/blob/ca2ae1ae5aa57665bd7ae292bc4ec5fe7524a158/wicket-core/src/main/java/org/apache/wicket/markup/resolver/AutoLinkResolver.java", "sha": "5b20adb95c406a178f3b9aef5c517c610252b404", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/resolver/AutoLinkResolver.java?ref=ca2ae1ae5aa57665bd7ae292bc4ec5fe7524a158", "patch": "@@ -578,7 +578,7 @@ public ResourceReferenceAutolink(final String id, final Class<?> clazz, final St\n \t\t\tClass<?> cursor = clazz;\n \t\t\t// iterate all parents because the auto linked resource may come from\n \t\t\t// inherited markup\n-\t\t\twhile (cursor != null || cursor != Object.class)\n+\t\t\twhile (cursor != null && cursor != Object.class)\n \t\t\t{\n \t\t\t\tif (PackageResource.exists(cursor, href, getLocale(), getStyle(), getVariation()))\n \t\t\t\t{", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/resolver/AutoLinkResolver.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/638b55e428226b0bd39f9307320f46cb2b36e91a", "parent": "https://github.com/apache/wicket/commit/9f8574f42d1742323a35c7bb4f89b6ecf14c07e8", "message": "Fixes NPE when sessions are invalidated *outside* a request, e.g. due to session timeout\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1144212 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_96", "file": [{"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/638b55e428226b0bd39f9307320f46cb2b36e91a/wicket-core/src/main/java/org/apache/wicket/protocol/http/RequestLogger.java", "blob_url": "https://github.com/apache/wicket/blob/638b55e428226b0bd39f9307320f46cb2b36e91a/wicket-core/src/main/java/org/apache/wicket/protocol/http/RequestLogger.java", "sha": "1bfbc892886a3f273dcd755f48e7bfb062f2c824", "changes": 5, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/protocol/http/RequestLogger.java?ref=638b55e428226b0bd39f9307320f46cb2b36e91a", "patch": "@@ -339,7 +339,10 @@ public void sessionCreated(String sessionId)\n \n \tpublic void sessionDestroyed(String sessionId)\n \t{\n-\t\tRequestCycle.get().setMetaData(SESSION_DATA, liveSessions.remove(sessionId));\n+\t\tRequestCycle requestCycle = RequestCycle.get();\n+\t\tSessionData sessionData = liveSessions.remove(sessionId);\n+\t\tif (requestCycle != null)\n+\t\t\trequestCycle.setMetaData(SESSION_DATA, sessionData);\n \t}\n \n \tprotected RequestData getCurrentRequest()", "filename": "wicket-core/src/main/java/org/apache/wicket/protocol/http/RequestLogger.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/e9170ebd658342d5871a3a93397dbe85314e6a53", "parent": "https://github.com/apache/wicket/commit/802995c6f1be706d9c4f1f618e8d365a2fc9e971", "message": "WICKET-3736 npe in StoredResponsesMap\n\nAdd a check for null for the last entry.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1126429 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_97", "file": [{"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/e9170ebd658342d5871a3a93397dbe85314e6a53/wicket-core/src/main/java/org/apache/wicket/protocol/http/StoredResponsesMap.java", "blob_url": "https://github.com/apache/wicket/blob/e9170ebd658342d5871a3a93397dbe85314e6a53/wicket-core/src/main/java/org/apache/wicket/protocol/http/StoredResponsesMap.java", "sha": "29b61774d4da20daace5d1415130d124294461ec", "changes": 11, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/protocol/http/StoredResponsesMap.java?ref=e9170ebd658342d5871a3a93397dbe85314e6a53", "patch": "@@ -70,11 +70,14 @@ protected boolean removeEldestEntry(java.util.Map.Entry<String, Object> eldest)\n \t\tif (removed == false)\n \t\t{\n \t\t\tValue value = (Value)eldest.getValue();\n-\t\t\tDuration elapsedTime = Time.now().subtract(value.creationTime);\n-\t\t\tif (lifetime.lessThanOrEqual(elapsedTime))\n+\t\t\tif (value != null)\n \t\t\t{\n-\t\t\t\tremovedValue = value.response;\n-\t\t\t\tremoved = true;\n+\t\t\t\tDuration elapsedTime = Time.now().subtract(value.creationTime);\n+\t\t\t\tif (lifetime.lessThanOrEqual(elapsedTime))\n+\t\t\t\t{\n+\t\t\t\t\tremovedValue = value.response;\n+\t\t\t\t\tremoved = true;\n+\t\t\t\t}\n \t\t\t}\n \t\t}\n \t\treturn removed;", "filename": "wicket-core/src/main/java/org/apache/wicket/protocol/http/StoredResponsesMap.java"}, {"additions": 9, "raw_url": "https://github.com/apache/wicket/raw/e9170ebd658342d5871a3a93397dbe85314e6a53/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebApplication.java", "blob_url": "https://github.com/apache/wicket/blob/e9170ebd658342d5871a3a93397dbe85314e6a53/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebApplication.java", "sha": "62fa114656fe7a2eba15288f4b47872bfd435805", "changes": 18, "status": "modified", "deletions": 9, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebApplication.java?ref=e9170ebd658342d5871a3a93397dbe85314e6a53", "patch": "@@ -16,6 +16,13 @@\n  */\n package org.apache.wicket.protocol.http;\n \n+import java.io.UnsupportedEncodingException;\n+\n+import javax.servlet.ServletContext;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import javax.servlet.http.HttpSession;\n+\n import org.apache.wicket.Application;\n import org.apache.wicket.IPageRendererProvider;\n import org.apache.wicket.Page;\n@@ -62,13 +69,6 @@\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-import java.io.UnsupportedEncodingException;\n-\n-import javax.servlet.ServletContext;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-import javax.servlet.http.HttpSession;\n-\n \n /**\n  * A web application is a subclass of Application which associates with an instance of WicketServlet\n@@ -681,8 +681,8 @@ protected void outputDevelopmentModeWarning()\n \t}\n \n \t/*\n-\t * Can contain at most 1000 responses and each entry can live at most one minute for now there\n-\t * is no need to configure these parameters externally\n+\t * Can contain at most 1000 responses and each entry can live at most one minute. For now there\n+\t * is no need to configure these parameters externally.\n \t */\n \tprivate final StoredResponsesMap storedResponses = new StoredResponsesMap(1000,\n \t\tDuration.seconds(60));", "filename": "wicket-core/src/main/java/org/apache/wicket/protocol/http/WebApplication.java"}, {"additions": 64, "raw_url": "https://github.com/apache/wicket/raw/e9170ebd658342d5871a3a93397dbe85314e6a53/wicket-core/src/test/java/org/apache/wicket/protocol/http/StoredResponsesMapTest.java", "blob_url": "https://github.com/apache/wicket/blob/e9170ebd658342d5871a3a93397dbe85314e6a53/wicket-core/src/test/java/org/apache/wicket/protocol/http/StoredResponsesMapTest.java", "sha": "12effe3d29f700ede7140ab0eb44c1f4f7f332e6", "changes": 64, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/test/java/org/apache/wicket/protocol/http/StoredResponsesMapTest.java?ref=e9170ebd658342d5871a3a93397dbe85314e6a53", "patch": "@@ -20,10 +20,16 @@\n import static org.junit.Assert.assertNull;\n import static org.junit.Assert.assertTrue;\n \n+import java.security.SecureRandom;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.CountDownLatch;\n import java.util.concurrent.TimeUnit;\n \n import org.apache.wicket.util.time.Duration;\n+import org.junit.Ignore;\n import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n \n /**\n  * @see <a href=\"https://issues.apache.org/jira/browse/WICKET-3209\">WICKET-3209</a>\n@@ -75,4 +81,62 @@ public void cannotPutArbitraryValue()\n \t\tStoredResponsesMap map = new StoredResponsesMap(1000, Duration.days(1));\n \t\tmap.put(\"1\", new Object());\n \t}\n+\n+\t/**\n+\t * <a href=\"https://issues.apache.org/jira/browse/WICKET-3736\">WICKET-3736</a>\n+\t * \n+\t * Tries to simulate heavy load on the {@link StoredResponsesMap} by putting many entries and\n+\t * removing randomly them.\n+\t * \n+\t * The test is disabled by default because it is slow (~ 30secs). Enable it when we have\n+\t * categorized tests ({@link Category}) and run slow ones only at Apache CI servers\n+\t * \n+\t * @throws InterruptedException\n+\t */\n+\t@Test\n+\t@Ignore\n+\tpublic void heavyLoad() throws InterruptedException\n+\t{\n+\t\tint numberOfThreads = 100;\n+\t\tfinal int iterations = 10000;\n+\t\tfinal CountDownLatch startLatch = new CountDownLatch(numberOfThreads);\n+\t\tfinal CountDownLatch endLatch = new CountDownLatch(numberOfThreads);\n+\t\tfinal SecureRandom rnd = new SecureRandom();\n+\t\tfinal StoredResponsesMap map = new StoredResponsesMap(1000, Duration.seconds(60));\n+\t\tfinal List<String> keys = new ArrayList<String>();\n+\n+\t\tRunnable r = new Runnable()\n+\t\t{\n+\t\t\tpublic void run()\n+\t\t\t{\n+\t\t\t\tstartLatch.countDown();\n+\t\t\t\ttry\n+\t\t\t\t{\n+\t\t\t\t\t// wait all threads before starting the test\n+\t\t\t\t\tstartLatch.await();\n+\t\t\t\t}\n+\t\t\t\tcatch (InterruptedException e)\n+\t\t\t\t{\n+\t\t\t\t\tthrow new RuntimeException(e);\n+\t\t\t\t}\n+\n+\t\t\t\tfor (int i = 0; i < iterations; i++)\n+\t\t\t\t{\n+\t\t\t\t\tString key = \"abc\" + (rnd.nextDouble() * iterations);\n+\t\t\t\t\tkeys.add(key);\n+\t\t\t\t\tmap.put(key, new BufferedWebResponse(null));\n+\n+\t\t\t\t\tString key2 = keys.get(rnd.nextInt(keys.size() - 1));\n+\t\t\t\t\tmap.remove(key2);\n+\t\t\t\t}\n+\t\t\t\tendLatch.countDown();\n+\t\t\t}\n+\t\t};\n+\n+\t\tfor (int t = 0; t < numberOfThreads; t++)\n+\t\t{\n+\t\t\tnew Thread(r).start();\n+\t\t}\n+\t\tendLatch.await();\n+\t}\n }", "filename": "wicket-core/src/test/java/org/apache/wicket/protocol/http/StoredResponsesMapTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/f2db539e5cfab3801293b175581586a9cdf785e3", "parent": "https://github.com/apache/wicket/commit/c9c55aab22520a06833baddcd7d1532a667f97aa", "message": "Improve BufferedWebResponse#toString().\ncharSequenceAction may be null and thus calling #toString() fails with NPE\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1078105 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_98", "file": [{"additions": 10, "raw_url": "https://github.com/apache/wicket/raw/f2db539e5cfab3801293b175581586a9cdf785e3/wicket-core/src/main/java/org/apache/wicket/protocol/http/BufferedWebResponse.java", "blob_url": "https://github.com/apache/wicket/blob/f2db539e5cfab3801293b175581586a9cdf785e3/wicket-core/src/main/java/org/apache/wicket/protocol/http/BufferedWebResponse.java", "sha": "2ec9997bbd31494aef67be9bcd97afc55d499d46", "changes": 11, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/protocol/http/BufferedWebResponse.java?ref=f2db539e5cfab3801293b175581586a9cdf785e3", "patch": "@@ -548,7 +548,16 @@ public void write(byte[] b, int off, int len) throws IOException\n \t@Override\n \tpublic String toString()\n \t{\n-\t\treturn charSequenceAction.builder.toString();\n+\t\tfinal String toString;\n+\t\tif (charSequenceAction != null)\n+\t\t{\n+\t\t\ttoString = charSequenceAction.builder.toString();\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\ttoString = super.toString();\n+\t\t}\n+\t\treturn toString;\n \t}\n \n \t@Override", "filename": "wicket-core/src/main/java/org/apache/wicket/protocol/http/BufferedWebResponse.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/c940a378736e728ba959ec62d9a1f10fb0bc6a0f", "parent": "https://github.com/apache/wicket/commit/b40d5d6d529720e41948fa3ad55aa4bd29e527c4", "message": "fixed NPE when reloading updated markup in development mode\nIssue: WICKET-3336\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1059368 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_99", "file": [{"additions": 40, "raw_url": "https://github.com/apache/wicket/raw/c940a378736e728ba959ec62d9a1f10fb0bc6a0f/wicket-core/src/main/java/org/apache/wicket/markup/MarkupCache.java", "blob_url": "https://github.com/apache/wicket/blob/c940a378736e728ba959ec62d9a1f10fb0bc6a0f/wicket-core/src/main/java/org/apache/wicket/markup/MarkupCache.java", "sha": "dd4c4bc1a7a13a40d7dfb4c1e0a65be7c513c170", "changes": 40, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/markup/MarkupCache.java?ref=c940a378736e728ba959ec62d9a1f10fb0bc6a0f", "patch": "@@ -96,18 +96,27 @@ protected MarkupCache()\n \t\t}\n \t}\n \n+\t/**\n+\t * {@inheritDoc}\n+\t */\n \tpublic void clear()\n \t{\n \t\tmarkupCache.clear();\n \t\tmarkupKeyCache.clear();\n \t}\n \n+\t/**\n+\t * {@inheritDoc}\n+\t */\n \tpublic void shutdown()\n \t{\n \t\tmarkupCache.shutdown();\n \t\tmarkupKeyCache.shutdown();\n \t}\n \n+\t/**\n+\t * {@inheritDoc}\n+\t */\n \tpublic final IMarkupFragment removeMarkup(final String cacheKey)\n \t{\n \t\tArgs.notNull(cacheKey, \"cacheKey\");\n@@ -188,6 +197,10 @@ private boolean isBaseMarkupCached(final CharSequence key)\n \t{\n \t\t// Get the markup associated with key\n \t\tMarkup markup = markupCache.get(key);\n+\t\tif (markup == null)\n+\t\t{\n+\t\t\treturn false;\n+\t\t}\n \n \t\t// Get the base markup resource stream from the markup\n \t\tMarkupResourceStream resourceStream = markup.getMarkupResourceStream()\n@@ -215,6 +228,9 @@ private boolean isMarkupCached(final MarkupResourceStream resourceStream)\n \t\treturn false;\n \t}\n \n+\t/**\n+\t * {@inheritDoc}\n+\t */\n \tpublic final int size()\n \t{\n \t\treturn markupCache.size();\n@@ -610,11 +626,17 @@ public DefaultCacheImplementation()\n \t\t{\n \t\t}\n \n+\t\t/**\n+\t\t * {@inheritDoc}\n+\t\t */\n \t\tpublic void clear()\n \t\t{\n \t\t\tcache.clear();\n \t\t}\n \n+\t\t/**\n+\t\t * {@inheritDoc}\n+\t\t */\n \t\tpublic boolean containsKey(Object key)\n \t\t{\n \t\t\tif (key == null)\n@@ -624,6 +646,9 @@ public boolean containsKey(Object key)\n \t\t\treturn cache.containsKey(key);\n \t\t}\n \n+\t\t/**\n+\t\t * {@inheritDoc}\n+\t\t */\n \t\tpublic V get(Object key)\n \t\t{\n \t\t\tif (key == null)\n@@ -633,26 +658,41 @@ public V get(Object key)\n \t\t\treturn cache.get(key);\n \t\t}\n \n+\t\t/**\n+\t\t * {@inheritDoc}\n+\t\t */\n \t\tpublic Collection<K> getKeys()\n \t\t{\n \t\t\treturn cache.keySet();\n \t\t}\n \n+\t\t/**\n+\t\t * {@inheritDoc}\n+\t\t */\n \t\tpublic void put(K key, V value)\n \t\t{\n \t\t\tcache.put(key, value);\n \t\t}\n \n+\t\t/**\n+\t\t * {@inheritDoc}\n+\t\t */\n \t\tpublic boolean remove(K key)\n \t\t{\n \t\t\treturn cache.remove(key) == null;\n \t\t}\n \n+\t\t/**\n+\t\t * {@inheritDoc}\n+\t\t */\n \t\tpublic int size()\n \t\t{\n \t\t\treturn cache.size();\n \t\t}\n \n+\t\t/**\n+\t\t * {@inheritDoc}\n+\t\t */\n \t\tpublic void shutdown()\n \t\t{\n \t\t\tclear();", "filename": "wicket-core/src/main/java/org/apache/wicket/markup/MarkupCache.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/145b9f00b17e143c12a26527213e3eddc62026fc", "parent": "https://github.com/apache/wicket/commit/d6033493518adcddc3e28171b8ebd9d329d127c7", "message": "WICKET-3270  NPE in PageParameters toString method\n\nAdd a check for null for indexed and named parameters before iterating on them\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1050689 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_100", "file": [{"additions": 19, "raw_url": "https://github.com/apache/wicket/raw/145b9f00b17e143c12a26527213e3eddc62026fc/wicket-request/src/main/java/org/apache/wicket/request/mapper/parameter/PageParameters.java", "blob_url": "https://github.com/apache/wicket/blob/145b9f00b17e143c12a26527213e3eddc62026fc/wicket-request/src/main/java/org/apache/wicket/request/mapper/parameter/PageParameters.java", "sha": "190c4f2f88667d52327ef10adde854aa21505a32", "changes": 32, "status": "modified", "deletions": 13, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-request/src/main/java/org/apache/wicket/request/mapper/parameter/PageParameters.java?ref=145b9f00b17e143c12a26527213e3eddc62026fc", "patch": "@@ -577,29 +577,35 @@ public String toString()\n \t{\n \t\tStringBuilder str = new StringBuilder();\n \n-\t\tfor (int i = 0; i < indexedParameters.size(); i++)\n+\t\tif (indexedParameters != null)\n \t\t{\n-\t\t\tif (i > 0)\n-\t\t\t\tstr.append(\", \");\n+\t\t\tfor (int i = 0; i < indexedParameters.size(); i++)\n+\t\t\t{\n+\t\t\t\tif (i > 0)\n+\t\t\t\t\tstr.append(\", \");\n \n-\t\t\tstr.append(i);\n-\t\t\tstr.append('=');\n-\t\t\tstr.append('[').append(indexedParameters.get(i)).append(']');\n+\t\t\t\tstr.append(i);\n+\t\t\t\tstr.append('=');\n+\t\t\t\tstr.append('[').append(indexedParameters.get(i)).append(']');\n+\t\t\t}\n \t\t}\n \n \t\tif (str.length() > 0)\n \t\t\tstr.append(\", \");\n \n-\t\tfor (int i = 0; i < namedParameters.size(); i++)\n+\t\tif (namedParameters != null)\n \t\t{\n-\t\t\tEntry entry = namedParameters.get(i);\n+\t\t\tfor (int i = 0; i < namedParameters.size(); i++)\n+\t\t\t{\n+\t\t\t\tEntry entry = namedParameters.get(i);\n \n-\t\t\tif (i > 0)\n-\t\t\t\tstr.append(\", \");\n+\t\t\t\tif (i > 0)\n+\t\t\t\t\tstr.append(\", \");\n \n-\t\t\tstr.append(entry.key);\n-\t\t\tstr.append('=');\n-\t\t\tstr.append('[').append(entry.value).append(']');\n+\t\t\t\tstr.append(entry.key);\n+\t\t\t\tstr.append('=');\n+\t\t\t\tstr.append('[').append(entry.value).append(']');\n+\t\t\t}\n \t\t}\n \t\treturn str.toString();\n \t}", "filename": "wicket-request/src/main/java/org/apache/wicket/request/mapper/parameter/PageParameters.java"}], "repo": "wicket"}]
[{"commit": "https://github.com/apache/wicket/commit/d35517e5e8c6fb4730e60af2d7be1e20197f8c4a", "parent": "https://github.com/apache/wicket/commit/947823f922143d00103b2309c8afdcfa5669091b", "message": "test preventing the NPE requesting an StringResourceStream binded to the application as an resource\nIssue: WICKET-3187\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1038300 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_101", "file": [{"additions": 21, "raw_url": "https://github.com/apache/wicket/raw/d35517e5e8c6fb4730e60af2d7be1e20197f8c4a/wicket/src/test/java/org/apache/wicket/ResourceTest.java", "blob_url": "https://github.com/apache/wicket/blob/d35517e5e8c6fb4730e60af2d7be1e20197f8c4a/wicket/src/test/java/org/apache/wicket/ResourceTest.java", "sha": "ab431686d6316e4889a601d14767bfc0a7c909ae", "changes": 30, "status": "modified", "deletions": 9, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/java/org/apache/wicket/ResourceTest.java?ref=d35517e5e8c6fb4730e60af2d7be1e20197f8c4a", "patch": "@@ -25,6 +25,8 @@\n import org.apache.wicket.request.resource.IResource;\n import org.apache.wicket.request.resource.ResourceStreamResource;\n import org.apache.wicket.util.resource.FileResourceStream;\n+import org.apache.wicket.util.resource.IResourceStream;\n+import org.apache.wicket.util.resource.StringResourceStream;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n@@ -40,7 +42,7 @@\n \t/**\n \t * tests a resource that is not cacheable.\n \t */\n-\tpublic void testResource()\n+\tpublic void testFileResourceStream()\n \t{\n \t\tfinal File testFile;\n \t\ttry\n@@ -54,19 +56,29 @@ public void testResource()\n \t\t{\n \t\t\tthrow new RuntimeException(e);\n \t\t}\n-\n-\t\tIResource file = new ResourceStreamResource(new FileResourceStream(\n+\t\tbindToApplicationAsResourceAndRequestIt(new FileResourceStream(\n \t\t\tnew org.apache.wicket.util.file.File(testFile)));\n-\t\ttester.getApplication().getSharedResources().add(\"file\", file);\n+\t\tassertEquals(MockHttpServletResponse.formatDate(testFile.lastModified()),\n+\t\t\ttester.getLastModifiedFromResponseHeader());\n+\t\tassertEquals(TEST_STRING.length(), tester.getContentLengthFromResponseHeader());\n+\t}\n+\n+\tpublic void testStringResourceStream()\n+\t{\n+\t\tStringResourceStream resourceStream = new StringResourceStream(TEST_STRING);\n+\t\tbindToApplicationAsResourceAndRequestIt(resourceStream);\n+\t\tassertEquals(TEST_STRING.length(), tester.getContentLengthFromResponseHeader());\n+\t}\n+\n+\tprivate void bindToApplicationAsResourceAndRequestIt(IResourceStream iResourceStream)\n+\t{\n+\t\tIResource resource = new ResourceStreamResource(iResourceStream);\n+\t\ttester.getApplication().getSharedResources().add(\"resource\", resource);\n \t\ttester.getRequest().setUrl(\n \t\t\ttester.getRequestCycle().mapUrlFor(\n \t\t\t\ttester.getApplication()\n \t\t\t\t\t.getSharedResources()\n-\t\t\t\t\t.get(Application.class, \"file\", null, null, null, true), null));\n+\t\t\t\t\t.get(Application.class, \"resource\", null, null, null, true), null));\n \t\ttester.processRequest();\n-\n-\t\tassertEquals(MockHttpServletResponse.formatDate(testFile.lastModified()),\n-\t\t\ttester.getLastModifiedFromResponseHeader());\n-\t\tassertEquals(TEST_STRING.length(), tester.getContentLengthFromResponseHeader());\n \t}\n }", "filename": "wicket/src/test/java/org/apache/wicket/ResourceTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/d71a4cc86a2a4b10aacf222f219ee8af94fe0b48", "parent": "https://github.com/apache/wicket/commit/d314cd5b4119bda4569b1144eb92e62242ec5856", "message": "Without a stacktrace I could find the problem. Its all looking good. But some minor cleanup.\n\nWICKET-2479: NPE when clearing DateTimeField\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@816995 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_102", "file": [{"additions": 39, "raw_url": "https://github.com/apache/wicket/raw/d71a4cc86a2a4b10aacf222f219ee8af94fe0b48/wicket-datetime/src/main/java/org/apache/wicket/extensions/yui/calendar/DateTimeField.java", "blob_url": "https://github.com/apache/wicket/blob/d71a4cc86a2a4b10aacf222f219ee8af94fe0b48/wicket-datetime/src/main/java/org/apache/wicket/extensions/yui/calendar/DateTimeField.java", "sha": "8d624579e19769ad3c850e4847ea71381ed87fb4", "changes": 81, "status": "modified", "deletions": 42, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-datetime/src/main/java/org/apache/wicket/extensions/yui/calendar/DateTimeField.java?ref=d71a4cc86a2a4b10aacf222f219ee8af94fe0b48", "patch": "@@ -35,7 +35,6 @@\n import org.apache.wicket.request.ClientInfo;\n import org.apache.wicket.util.convert.IConverter;\n import org.apache.wicket.util.convert.converters.ZeroPaddingIntegerConverter;\n-import org.apache.wicket.util.lang.EnumeratedType;\n import org.apache.wicket.validation.validator.RangeValidator;\n import org.joda.time.DateTimeFieldType;\n import org.joda.time.DateTimeZone;\n@@ -53,33 +52,34 @@\n  */\n public class DateTimeField extends FormComponentPanel<Date>\n {\n+\tprivate static final long serialVersionUID = 1L;\n+\n \t/**\n \t * Enumerated type for different ways of handling the render part of requests.\n \t */\n-\t// enums are mucho nicer, but let's keep this project at 1.4 for now\n-\tprivate static class AM_PM extends EnumeratedType\n-\t{\n-\t\tprivate static final long serialVersionUID = 1L;\n+\tprivate static enum AM_PM {\n+\t\tAM(\"AM\"), PM(\"PM\");\n \n-\t\tstatic final AM_PM AM = new AM_PM(\"AM\");\n+\t\t/** */\n+\t\tprivate String value;\n \n-\t\tstatic final AM_PM PM = new AM_PM(\"PM\");\n-\n-\t\tpublic static AM_PM[] values()\n+\t\tAM_PM(final String name)\n \t\t{\n-\t\t\treturn new AM_PM[] { AM, PM };\n+\t\t\tvalue = name;\n \t\t}\n \n-\t\tprivate AM_PM(final String name)\n+\t\t/**\n+\t\t * @see java.lang.Enum#toString()\n+\t\t */\n+\t\t@Override\n+\t\tpublic String toString()\n \t\t{\n-\t\t\tsuper(name);\n+\t\t\treturn value;\n \t\t}\n \t}\n \n \tprivate static final IConverter MINUTES_CONVERTER = new ZeroPaddingIntegerConverter(2);\n \n-\tprivate static final long serialVersionUID = 1L;\n-\n \tprivate AM_PM amOrPm = AM_PM.AM;\n \n \tprivate DropDownChoice<AM_PM> amOrPmChoice;\n@@ -101,7 +101,7 @@ private AM_PM(final String name)\n \t * \n \t * @param id\n \t */\n-\tpublic DateTimeField(String id)\n+\tpublic DateTimeField(final String id)\n \t{\n \t\tthis(id, null);\n \t}\n@@ -112,9 +112,10 @@ public DateTimeField(String id)\n \t * @param id\n \t * @param model\n \t */\n-\tpublic DateTimeField(String id, IModel<Date> model)\n+\tpublic DateTimeField(final String id, final IModel<Date> model)\n \t{\n \t\tsuper(id, model);\n+\n \t\tsetType(Date.class);\n \t\tPropertyModel<Date> dateFieldModel = new PropertyModel<Date>(this, \"date\");\n \t\tadd(dateField = newDateTextField(\"date\", dateFieldModel));\n@@ -181,9 +182,13 @@ public Integer getHours()\n \t\treturn hours;\n \t}\n \n-\tprotected void configure(Map widgetProperties)\n+\t/**\n+\t * TODO comment\n+\t * \n+\t * @param widgetProperties\n+\t */\n+\tprotected void configure(Map< ? , ? > widgetProperties)\n \t{\n-\n \t}\n \n \t/**\n@@ -213,7 +218,7 @@ public Integer getMinutes()\n \t * @param amOrPm\n \t *            amOrPm\n \t */\n-\tpublic void setAmOrPm(AM_PM amOrPm)\n+\tpublic void setAmOrPm(final AM_PM amOrPm)\n \t{\n \t\tthis.amOrPm = amOrPm;\n \t}\n@@ -224,7 +229,7 @@ public void setAmOrPm(AM_PM amOrPm)\n \t * @param date\n \t *            date\n \t */\n-\tpublic void setDate(Date date)\n+\tpublic void setDate(final Date date)\n \t{\n \t\tif (date == null)\n \t\t{\n@@ -236,17 +241,18 @@ public void setDate(Date date)\n \t\t}\n \n \t\tthis.date = new MutableDateTime(date);\n-\t\tsetDefaultModelObject(date);\n \n \t\tInteger hours = getHours();\n-\t\tInteger minutes = getMinutes();\n-\t\tboolean use12HourFormat = use12HourFormat();\n \t\tif (hours != null)\n \t\t{\n+\t\t\tboolean use12HourFormat = use12HourFormat();\n \t\t\tthis.date.set(DateTimeFieldType.hourOfDay(), hours.intValue() %\n \t\t\t\t\t(use12HourFormat ? 12 : 24));\n+\n+\t\t\tInteger minutes = getMinutes();\n \t\t\tthis.date.setMinuteOfHour((minutes != null) ? minutes.intValue() : 0);\n \t\t}\n+\n \t\tsetDefaultModelObject(this.date.toDate());\n \t}\n \n@@ -256,7 +262,7 @@ public void setDate(Date date)\n \t * @param hours\n \t *            hours\n \t */\n-\tpublic void setHours(Integer hours)\n+\tpublic void setHours(final Integer hours)\n \t{\n \t\tthis.hours = hours;\n \t}\n@@ -267,7 +273,7 @@ public void setHours(Integer hours)\n \t * @param minutes\n \t *            minutes\n \t */\n-\tpublic void setMinutes(Integer minutes)\n+\tpublic void setMinutes(final Integer minutes)\n \t{\n \t\tthis.minutes = minutes;\n \t}\n@@ -346,30 +352,27 @@ protected void convertInput()\n \t\t}\n \t}\n \n+\t/**\n+\t * \n+\t * @param to\n+\t * @param from\n+\t * @param instant\n+\t * @return millis\n+\t */\n \tprivate long getMillis(TimeZone to, TimeZone from, long instant)\n \t{\n \t\treturn DateTimeZone.forTimeZone(from).getMillisKeepLocal(DateTimeZone.forTimeZone(to),\n \t\t\t\tinstant);\n \t}\n \n-\t/**\n-\t * @deprecated replaced by {@link #newDateTextField(String, PropertyModel)}\n-\t */\n-\t// TODO remove after deprecation release\n-\t@Deprecated\n-\tprotected final DateTextField newDateTextField(PropertyModel dateFieldModel)\n-\t{\n-\t\tthrow new UnsupportedOperationException();\n-\t}\n-\n \t/**\n \t * create a new {@link DateTextField} instance to be added to this panel.\n \t * \n \t * @param dateFieldModel\n \t *            model that should be used by the {@link DateTextField}\n \t * @return a new date text field instance\n \t */\n-\tprotected DateTextField newDateTextField(String id, PropertyModel dateFieldModel)\n+\tprotected DateTextField newDateTextField(String id, PropertyModel<Date> dateFieldModel)\n \t{\n \t\treturn new DateTextField(id, dateFieldModel, new StyleDateConverter(false));\n \t}\n@@ -384,12 +387,6 @@ protected void onBeforeRender()\n \t\thoursField.setRequired(isRequired());\n \t\tminutesField.setRequired(isRequired());\n \n-\t\t// obsolete with WICKET-1919\n-\t\t// dateField.setEnabled(isEnabledInHierarchy());\n-\t\t// hoursField.setEnabled(isEnabledInHierarchy());\n-\t\t// minutesField.setEnabled(isEnabledInHierarchy());\n-\t\t// amOrPmChoice.setEnabled(isEnabledInHierarchy());\n-\n \t\tboolean use12HourFormat = use12HourFormat();\n \t\tamOrPmChoice.setVisible(use12HourFormat);\n ", "filename": "wicket-datetime/src/main/java/org/apache/wicket/extensions/yui/calendar/DateTimeField.java"}, {"additions": 12, "raw_url": "https://github.com/apache/wicket/raw/d71a4cc86a2a4b10aacf222f219ee8af94fe0b48/wicket-examples/src/main/java/org/apache/wicket/examples/dates/DatesPage.html", "blob_url": "https://github.com/apache/wicket/blob/d71a4cc86a2a4b10aacf222f219ee8af94fe0b48/wicket-examples/src/main/java/org/apache/wicket/examples/dates/DatesPage.html", "sha": "138a60f7019b7cfb2f049defbbfa2db80831f124", "changes": 12, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-examples/src/main/java/org/apache/wicket/examples/dates/DatesPage.html?ref=d71a4cc86a2a4b10aacf222f219ee8af94fe0b48", "patch": "@@ -16,11 +16,23 @@\n \twicket:id=\"localeUSLink\">set to english</a>]</p>\n </form>\n <p>\n+Example using DateTextField:&nbsp;\n <form wicket:id=\"form\"><input type=\"text\"\n \twicket:id=\"dateTextField\" /> <input type=\"submit\" value=\"submit\" /></form>\n </p>\n+\n+<br/>\n+<p>\n+Example using DateTimeField:&nbsp;\n+<form wicket:id=\"form2\">\n+<span wicket:id=\"dateTimeField\"></span>\n+<input type=\"submit\" value=\"submit\" />\n+</form>\n+</p>\n+\n <p>\n \t<div wicket:id=\"feedback\"></div>\n </p>\n+\n </body>\n </html>", "filename": "wicket-examples/src/main/java/org/apache/wicket/examples/dates/DatesPage.html"}, {"additions": 16, "raw_url": "https://github.com/apache/wicket/raw/d71a4cc86a2a4b10aacf222f219ee8af94fe0b48/wicket-examples/src/main/java/org/apache/wicket/examples/dates/DatesPage.java", "blob_url": "https://github.com/apache/wicket/blob/d71a4cc86a2a4b10aacf222f219ee8af94fe0b48/wicket-examples/src/main/java/org/apache/wicket/examples/dates/DatesPage.java", "sha": "84141c44e2169d3081856d6a252b30f01b5b4793", "changes": 18, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-examples/src/main/java/org/apache/wicket/examples/dates/DatesPage.java?ref=d71a4cc86a2a4b10aacf222f219ee8af94fe0b48", "patch": "@@ -1,5 +1,6 @@\n /*\n  * Licensed to the Apache Software Foundation (ASF) under one or more\n+\n  * contributor license agreements.  See the NOTICE file distributed with\n  * this work for additional information regarding copyright ownership.\n  * The ASF licenses this file to You under the Apache License, Version 2.0\n@@ -29,6 +30,7 @@\n import org.apache.wicket.datetime.markup.html.form.DateTextField;\n import org.apache.wicket.examples.WicketExamplePage;\n import org.apache.wicket.extensions.yui.calendar.DatePicker;\n+import org.apache.wicket.extensions.yui.calendar.DateTimeField;\n import org.apache.wicket.markup.html.form.ChoiceRenderer;\n import org.apache.wicket.markup.html.form.DropDownChoice;\n import org.apache.wicket.markup.html.form.Form;\n@@ -130,6 +132,7 @@ protected boolean wantOnSelectionChangedNotifications()\n \t}\n \n \tprivate final Date date = new Date();\n+\tprivate final Date date2 = new Date();\n \n \tprivate Locale selectedLocale = LOCALE_EN;\n \n@@ -139,7 +142,7 @@ protected boolean wantOnSelectionChangedNotifications()\n \tpublic DatesPage()\n \t{\n \t\tselectedLocale = Session.get().getLocale();\n-\t\tForm<?> localeForm = new Form(\"localeForm\");\n+\t\tForm<?> localeForm = new Form<Void>(\"localeForm\");\n \t\tlocaleForm.add(new LocaleDropDownChoice(\"localeSelect\"));\n \t\tlocaleForm.add(new Link(\"localeUSLink\")\n \t\t{\n@@ -159,7 +162,7 @@ public Locale getLocale()\n \t\t\t\treturn selectedLocale;\n \t\t\t}\n \t\t};\n-\t\tForm<?> form = new Form(\"form\")\n+\t\tForm<?> form = new Form<Void>(\"form\")\n \t\t{\n \t\t\t@Override\n \t\t\tprotected void onSubmit()\n@@ -171,6 +174,17 @@ protected void onSubmit()\n \t\tform.add(dateTextField);\n \t\tdateTextField.add(new DatePicker());\n \t\tadd(new FeedbackPanel(\"feedback\"));\n+\n+\t\tForm<?> form2 = new Form<Void>(\"form2\")\n+\t\t{\n+\t\t\t@Override\n+\t\t\tprotected void onSubmit()\n+\t\t\t{\n+\t\t\t\tinfo(\"set date2 to \" + date2);\n+\t\t\t}\n+\t\t};\n+\t\tadd(form2);\n+\t\tform2.add(new DateTimeField(\"dateTimeField\", new PropertyModel<Date>(this, \"date2\")));\n \t}\n \n \t/**", "filename": "wicket-examples/src/main/java/org/apache/wicket/examples/dates/DatesPage.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/4040885d91e93fe388de78993ca71f062495d228", "parent": "https://github.com/apache/wicket/commit/077c7dff5c4f55b1b0d524704f122ecd51cb8105", "message": "WICKET-2142 Getting live sessions from RequestLogger results in NPE\n\nIssue: WICKET-2142\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@755197 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_103", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/4040885d91e93fe388de78993ca71f062495d228/wicket/src/main/java/org/apache/wicket/protocol/http/RequestLogger.java", "blob_url": "https://github.com/apache/wicket/blob/4040885d91e93fe388de78993ca71f062495d228/wicket/src/main/java/org/apache/wicket/protocol/http/RequestLogger.java", "sha": "8da0f807adeb208c8f6b02e050968d477eb778a8", "changes": 3, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/protocol/http/RequestLogger.java?ref=4040885d91e93fe388de78993ca71f062495d228", "patch": "@@ -162,8 +162,7 @@ public int getCurrentActiveRequestCount()\n \n \tpublic SessionData[] getLiveSessions()\n \t{\n-\t\tSessionData[] sessions = liveSessions.values()\n-\t\t\t.toArray(new SessionData[liveSessions.size()]);\n+\t\tSessionData[] sessions = (SessionData[])liveSessions.values().toArray(new SessionData[0]);\n \t\tArrays.sort(sessions);\n \t\treturn sessions;\n \t}", "filename": "wicket/src/main/java/org/apache/wicket/protocol/http/RequestLogger.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/536c1463ff53e5c19a41ccb06906689849af04aa", "parent": "https://github.com/apache/wicket/commit/b420fd96cac23bf1759d5248ccea43307617d129", "message": "WICKET-1780 NPE in feedback panel - added null check in constructor of feedback message to signal mistakes earlier.\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@683909 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_104", "file": [{"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/536c1463ff53e5c19a41ccb06906689849af04aa/wicket/src/main/java/org/apache/wicket/feedback/FeedbackMessage.java", "blob_url": "https://github.com/apache/wicket/blob/536c1463ff53e5c19a41ccb06906689849af04aa/wicket/src/main/java/org/apache/wicket/feedback/FeedbackMessage.java", "sha": "5ccec1bf406c4aca58bda644bcf8d55d0bd74833", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/org/apache/wicket/feedback/FeedbackMessage.java?ref=536c1463ff53e5c19a41ccb06906689849af04aa", "patch": "@@ -90,13 +90,15 @@\n \t * @param reporter\n \t *            The message reporter\n \t * @param message\n-\t *            The actual message\n+\t *            The actual message. Must not be <code>null</code>.\n \t * @param level\n \t *            The level of the message\n \t */\n \tpublic FeedbackMessage(final Component reporter, final Serializable message,\n \t\tfinal int level)\n \t{\n+\t\tif(message == null)\n+\t\t\tthrow new IllegalArgumentException(\"Parameter message can't be null\");\n \t\tthis.reporter = reporter;\n \t\tthis.message = message;\n \t\tthis.level = level;", "filename": "wicket/src/main/java/org/apache/wicket/feedback/FeedbackMessage.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/7614520e94eb49cb2e5c2c560d055b18c8785301", "parent": "https://github.com/apache/wicket/commit/0d0a8b78760f7dd7a984df0ab6e6329755fb7f3f", "message": "WICKET-1430: Form processing throws NPE if button.onsubmit() moves the button or its parents out of the component hierarchy\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@638021 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_105", "file": [{"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/7614520e94eb49cb2e5c2c560d055b18c8785301/jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/html/form/Form.java", "blob_url": "https://github.com/apache/wicket/blob/7614520e94eb49cb2e5c2c560d055b18c8785301/jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/html/form/Form.java", "sha": "0d712f2df35f973b53ace581e2ba31bb7ca108d8", "changes": 15, "status": "modified", "deletions": 8, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/html/form/Form.java?ref=7614520e94eb49cb2e5c2c560d055b18c8785301", "patch": "@@ -1319,9 +1319,9 @@ protected void delegateSubmit(IFormSubmittingComponent submittingComponent)\n \t\tForm formToProcess = this;\n \t\tif (submittingComponent != null)\n \t\t{\n-\t\t\tsubmittingComponent.onSubmit();\n \t\t\t// use the form which the submittingComponent has submitted for further processing\n \t\t\tformToProcess = submittingComponent.getForm();\n+\t\t\tsubmittingComponent.onSubmit();\n \t\t}\n \n \t\t// Model was successfully updated with valid data\n@@ -1368,13 +1368,12 @@ protected final String getJavascriptId()\n \n \n \t/**\n-\t * Gets the HTTP submit method that will appear in form markup. If no method is specified in \n-\t * the template, \"post\" is the default. Note that the markup-declared HTTP method may not\n-\t * correspond to the one actually used to submit the form; in an Ajax submit, for example, \n-\t * JavaScript event handlers may submit the form with a \"get\" even when the form method is \n-\t * declared as \"post.\" Therefore this method should not be considered a guarantee of the \n-\t * HTTP method used, but a value for the markup only.\n-\t * Override if you have a requirement to alter this behavior.\n+\t * Gets the HTTP submit method that will appear in form markup. If no method is specified in the\n+\t * template, \"post\" is the default. Note that the markup-declared HTTP method may not correspond\n+\t * to the one actually used to submit the form; in an Ajax submit, for example, JavaScript event\n+\t * handlers may submit the form with a \"get\" even when the form method is declared as \"post.\"\n+\t * Therefore this method should not be considered a guarantee of the HTTP method used, but a\n+\t * value for the markup only. Override if you have a requirement to alter this behavior.\n \t * \n \t * @return the submit method specified in markup.\n \t */", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/markup/html/form/Form.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/2bc1b27ed93d3a53dbd15c9fab706eb71481151e", "parent": "https://github.com/apache/wicket/commit/58e5c44174ace7106d4afe5cdd847dc4bbcbe3cf", "message": "Fix NPE on destroying when filter did not fully set up.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@541377 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_106", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/2bc1b27ed93d3a53dbd15c9fab706eb71481151e/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/WicketFilter.java", "blob_url": "https://github.com/apache/wicket/blob/2bc1b27ed93d3a53dbd15c9fab706eb71481151e/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/WicketFilter.java", "sha": "2f2f5c100910d8fcd5d53c1ee322e8427e4b4eda", "changes": 8, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/WicketFilter.java?ref=2bc1b27ed93d3a53dbd15c9fab706eb71481151e", "patch": "@@ -97,8 +97,11 @@\n \t */\n \tpublic void destroy()\n \t{\n-\t\tthis.webApplication.internalDestroy();\n-\t\tthis.webApplication = null;\n+\t\tif (this.webApplication != null)\n+\t\t{\n+\t\t\tthis.webApplication.internalDestroy();\n+\t\t\tthis.webApplication = null;\n+\t\t}\n \t}\n \n \t/**\n@@ -211,6 +214,7 @@ public final void doGet(final HttpServletRequest servletRequest,\n \t\t\t\t\t// Try to see if there is a redirect stored\n \t\t\t\t\tISessionStore sessionStore = webApplication.getSessionStore();\n \t\t\t\t\tString sessionId = sessionStore.getSessionId(request, false);\n+\t\t\t\t\tSystem.out.println(\"THOOF-WICKET: Redirect to buffer for session id \" + sessionId);\n \t\t\t\t\tif (sessionId != null)\n \t\t\t\t\t{\n \t\t\t\t\t\tBufferedHttpServletResponse bufferedResponse = webApplication", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/WicketFilter.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/3cc155807244aba7b6e0496c737fc06f8212b4ca", "parent": "https://github.com/apache/wicket/commit/b01f477f7a2b2fe5319a8f386ede4f6ba83f74bd", "message": "throw exception with more info which would otherwise be a NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@517396 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_107", "file": [{"additions": 8, "raw_url": "https://github.com/apache/wicket/raw/3cc155807244aba7b6e0496c737fc06f8212b4ca/jdk-1.4/wicket/src/main/java/wicket/protocol/http/request/urlcompressing/UrlCompressingWebRequestProcessor.java", "blob_url": "https://github.com/apache/wicket/blob/3cc155807244aba7b6e0496c737fc06f8212b4ca/jdk-1.4/wicket/src/main/java/wicket/protocol/http/request/urlcompressing/UrlCompressingWebRequestProcessor.java", "sha": "af5ad650cc9901bb0d70a280404c086daf9a2cd0", "changes": 8, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/wicket/protocol/http/request/urlcompressing/UrlCompressingWebRequestProcessor.java?ref=3cc155807244aba7b6e0496c737fc06f8212b4ca", "patch": "@@ -120,6 +120,14 @@ else if (interfaceName.equals(INewBrowserWindowListener.INTERFACE.getName()))\n \t\t\t\t}\n \t\t\t}\n \n+\t\t\tif (component == null)\n+\t\t\t{\n+\t\t\t\t// still null? that's not right\n+\t\t\t\tthrow new WicketRuntimeException(\"cannot resolve component with path '\"\n+\t\t\t\t\t\t+ pageRelativeComponentPath + \"', listener \" + listener + \" on page \"\n+\t\t\t\t\t\t+ page);\n+\t\t\t}\n+\n \t\t\tif (!component.isEnableAllowed())\n \t\t\t{\n \t\t\t\tthrow new UnauthorizedActionException(component, Component.ENABLE);", "filename": "jdk-1.4/wicket/src/main/java/wicket/protocol/http/request/urlcompressing/UrlCompressingWebRequestProcessor.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/5d78b712740665f876dbfa6ed8159b24dcd76434", "parent": "https://github.com/apache/wicket/commit/4db6b180a43e6c5cadc0aa29ca0af2d6da72690d", "message": "WICKET-340 Unexpected NPE in MapVariableInterpolator\n\nApplied patch and backported exceptionOnNullVarValue from trunk\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@515082 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_108", "file": [{"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/5d78b712740665f876dbfa6ed8159b24dcd76434/wicket/src/main/java/wicket/util/string/interpolator/MapVariableInterpolator.java", "blob_url": "https://github.com/apache/wicket/blob/5d78b712740665f876dbfa6ed8159b24dcd76434/wicket/src/main/java/wicket/util/string/interpolator/MapVariableInterpolator.java", "sha": "726d6f7abe7efe73ccd275b661bd901889405c42", "changes": 6, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/util/string/interpolator/MapVariableInterpolator.java?ref=5d78b712740665f876dbfa6ed8159b24dcd76434", "patch": "@@ -18,6 +18,8 @@\n \n import java.util.Map;\n \n+import wicket.util.string.Strings;\n+\n /**\n  * Interpolates variables into a string from a Map.\n  * \n@@ -42,7 +44,6 @@ public MapVariableInterpolator(final String string, final Map<?, ?> variables)\n \t\tthis.variables = variables;\n \t}\n \n-\n \t/**\n \t * Constructor\n \t * \n@@ -63,7 +64,6 @@ public MapVariableInterpolator(String string, final Map<?, ?> variables,\n \t\tthis.variables = variables;\n \t}\n \n-\n \t/**\n \t * Accessor to set variables\n \t * \n@@ -85,7 +85,7 @@ public final void setVariables(final Map<?, ?> variables)\n \t@Override\n \tprotected final String getValue(final String variableName)\n \t{\n-\t\treturn variables.get(variableName).toString();\n+\t\treturn Strings.toString(variables.get(variableName));\n \t}\n \n \t/**", "filename": "wicket/src/main/java/wicket/util/string/interpolator/MapVariableInterpolator.java"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/5d78b712740665f876dbfa6ed8159b24dcd76434/wicket/src/main/java/wicket/util/string/interpolator/VariableInterpolator.java", "blob_url": "https://github.com/apache/wicket/blob/5d78b712740665f876dbfa6ed8159b24dcd76434/wicket/src/main/java/wicket/util/string/interpolator/VariableInterpolator.java", "sha": "e5a95619e56fa5d055dd2f0bb7a29a5be529dbba", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/util/string/interpolator/VariableInterpolator.java?ref=5d78b712740665f876dbfa6ed8159b24dcd76434", "patch": "@@ -65,7 +65,6 @@ public VariableInterpolator(final String string, boolean exceptionOnNullVarValue\n \t\tthis.exceptionOnNullVarValue = exceptionOnNullVarValue;\n \t}\n \n-\n \t/**\n \t * Gets a value for a variable name during interpolation\n \t * ", "filename": "wicket/src/main/java/wicket/util/string/interpolator/VariableInterpolator.java"}, {"additions": 61, "raw_url": "https://github.com/apache/wicket/raw/5d78b712740665f876dbfa6ed8159b24dcd76434/wicket/src/test/java/wicket/util/string/interpolator/VariableInterpolatorTest.java", "blob_url": "https://github.com/apache/wicket/blob/5d78b712740665f876dbfa6ed8159b24dcd76434/wicket/src/test/java/wicket/util/string/interpolator/VariableInterpolatorTest.java", "sha": "10fb665f229c17de93912bcbf6b0114ed70dad2f", "changes": 61, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/java/wicket/util/string/interpolator/VariableInterpolatorTest.java?ref=5d78b712740665f876dbfa6ed8159b24dcd76434", "patch": "@@ -0,0 +1,61 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package wicket.util.string.interpolator;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import junit.framework.TestCase;\n+import wicket.util.string.interpolator.MapVariableInterpolator;\n+\n+/**\n+ * Tests {@link MapVariableInterpolator}\n+ * \n+ * @author <a href=\"mailto:jbq@apache.org\">Jean-Baptiste Quenot</a>\n+ */\n+public class VariableInterpolatorTest extends TestCase\n+{\n+\tpublic void testWithValue()\n+\t{\n+\t\tMap params = new HashMap();\n+\t\tparams.put(\"key\", \"value\");\n+\t\tMapVariableInterpolator in = new MapVariableInterpolator(\"${key}\", params);\n+\t\tassertEquals(\"value\", in.toString());\n+\t}\n+\n+\tpublic void testWithoutValue()\n+\t{\n+\t\tMap params = new HashMap();\n+\t\tMapVariableInterpolator in = new MapVariableInterpolator(\"${key}\", params);\n+\t\tassertEquals(\"${key}\", in.toString());\n+\t}\n+\n+\tpublic void testWithoutValueAndException()\n+\t{\n+\t\tMap params = new HashMap();\n+\t\tMapVariableInterpolator in = new MapVariableInterpolator(\"${key}\", params, true);\n+\t\ttry\n+\t\t{\n+\t\t\tin.toString();\n+\t\t\tfail(\"Should throw an exception\");\n+\t\t}\n+\t\tcatch (Exception e)\n+\t\t{\n+\n+\t\t}\n+\t}\n+}", "filename": "wicket/src/test/java/wicket/util/string/interpolator/VariableInterpolatorTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/dd001de3106579673028bf9223b812d2039510fd", "parent": "https://github.com/apache/wicket/commit/c0b1eab708e6cd49a0085ebb929c396d293cee63", "message": "WICKET-340 Unexpected NPE in MapVariableInterpolator\n\nApplied patch and backported exceptionOnNullVarValue from trunk\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@515082 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_109", "file": [{"additions": 23, "raw_url": "https://github.com/apache/wicket/raw/dd001de3106579673028bf9223b812d2039510fd/wicket/src/main/java/wicket/util/string/interpolator/MapVariableInterpolator.java", "blob_url": "https://github.com/apache/wicket/blob/dd001de3106579673028bf9223b812d2039510fd/wicket/src/main/java/wicket/util/string/interpolator/MapVariableInterpolator.java", "sha": "e106816b4a79adb3c6fbdd9407d6589625995c5e", "changes": 29, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/util/string/interpolator/MapVariableInterpolator.java?ref=dd001de3106579673028bf9223b812d2039510fd", "patch": "@@ -18,6 +18,8 @@\n \n import java.util.Map;\n \n+import wicket.util.string.Strings;\n+\n /**\n  * Interpolates variables into a string from a Map.\n  * \n@@ -42,6 +44,26 @@ public MapVariableInterpolator(final String string, final Map variables)\n \t\tthis.variables = variables;\n \t}\n \n+\t/**\n+\t * Constructor\n+\t * \n+\t * @param string\n+\t *            The string to interpolate into\n+\t * @param variables\n+\t *            The variables to substitute\n+\t * @param exceptionOnNullVarValue\n+\t *            if true an {@link IllegalStateException} will be thrown if a\n+\t *            {@link #getValue(String)} returns null, otherwise the\n+\t *            ${varname} string will be left in the <code>string</code> so\n+\t *            multiple interpolators can be chained\n+\t */\n+\tpublic MapVariableInterpolator(String string, final Map variables,\n+\t\t\tboolean exceptionOnNullVarValue)\n+\t{\n+\t\tsuper(string, exceptionOnNullVarValue);\n+\t\tthis.variables = variables;\n+\t}\n+\n \t/**\n \t * Accessor to set variables\n \t * \n@@ -62,12 +84,7 @@ public final void setVariables(final Map variables)\n \t */\n \tprotected final String getValue(final String variableName)\n \t{\n-\t\tfinal Object value = variables.get(variableName);\n-\t\tif (value != null)\n-\t\t{\n-\t\t\treturn value.toString();\n-\t\t}\n-\t\tthrow new IllegalStateException(\"Interpolated variable '\" + variableName + \"' not found.\");\n+\t\treturn Strings.toString(variables.get(variableName));\n \t}\n \n \t/**", "filename": "wicket/src/main/java/wicket/util/string/interpolator/MapVariableInterpolator.java"}, {"additions": 31, "raw_url": "https://github.com/apache/wicket/raw/dd001de3106579673028bf9223b812d2039510fd/wicket/src/main/java/wicket/util/string/interpolator/VariableInterpolator.java", "blob_url": "https://github.com/apache/wicket/blob/dd001de3106579673028bf9223b812d2039510fd/wicket/src/main/java/wicket/util/string/interpolator/VariableInterpolator.java", "sha": "c62981ff1e9963c6623291671972a6b197f5940d", "changes": 35, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/util/string/interpolator/VariableInterpolator.java?ref=dd001de3106579673028bf9223b812d2039510fd", "patch": "@@ -35,6 +35,8 @@\n \t/** The string to interpolate within */\n \tprotected final String string;\n \n+\tprivate boolean exceptionOnNullVarValue = false;\n+\n \t/**\n \t * Constructor\n \t * \n@@ -46,6 +48,23 @@ public VariableInterpolator(final String string)\n \t\tthis.string = string;\n \t}\n \n+\t/**\n+\t * Constructor\n+\t * \n+\t * @param string\n+\t *            String to interpolate with variable values\n+\t * @param exceptionOnNullVarValue\n+\t *            if true an {@link IllegalStateException} will be thrown if a\n+\t *            {@link #getValue(String)} returns null, otherwise the\n+\t *            ${varname} string will be left in the <code>string</code> so\n+\t *            multiple interpolators can be chained\n+\t */\n+\tpublic VariableInterpolator(final String string, boolean exceptionOnNullVarValue)\n+\t{\n+\t\tthis.string = string;\n+\t\tthis.exceptionOnNullVarValue = exceptionOnNullVarValue;\n+\t}\n+\n \t/**\n \t * Gets a value for a variable name during interpolation\n \t * \n@@ -93,10 +112,18 @@ public String toString()\n \t\t\t\t// If there's no value\n \t\t\t\tif (value == null)\n \t\t\t\t{\n-\t\t\t\t\t// Leave variable uninterpolated, allowing multiple\n-\t\t\t\t\t// interpolators to\n-\t\t\t\t\t// do their work on the same string\n-\t\t\t\t\tbuffer.append(\"${\" + variableName + \"}\");\n+\t\t\t\t\tif (exceptionOnNullVarValue)\n+\t\t\t\t\t{\n+\t\t\t\t\t\tthrow new IllegalArgumentException(\"Value of variable [[\" + variableName\n+\t\t\t\t\t\t\t\t+ \"]] could not be resolved while interpolating [[\" + string + \"]]\");\n+\t\t\t\t\t}\n+\t\t\t\t\telse\n+\t\t\t\t\t{\n+\t\t\t\t\t\t// Leave variable uninterpolated, allowing multiple\n+\t\t\t\t\t\t// interpolators to\n+\t\t\t\t\t\t// do their work on the same string\n+\t\t\t\t\t\tbuffer.append(\"${\" + variableName + \"}\");\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\telse\n \t\t\t\t{", "filename": "wicket/src/main/java/wicket/util/string/interpolator/VariableInterpolator.java"}, {"additions": 61, "raw_url": "https://github.com/apache/wicket/raw/dd001de3106579673028bf9223b812d2039510fd/wicket/src/test/java/wicket/util/string/interpolator/VariableInterpolatorTest.java", "blob_url": "https://github.com/apache/wicket/blob/dd001de3106579673028bf9223b812d2039510fd/wicket/src/test/java/wicket/util/string/interpolator/VariableInterpolatorTest.java", "sha": "10fb665f229c17de93912bcbf6b0114ed70dad2f", "changes": 61, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/java/wicket/util/string/interpolator/VariableInterpolatorTest.java?ref=dd001de3106579673028bf9223b812d2039510fd", "patch": "@@ -0,0 +1,61 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package wicket.util.string.interpolator;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import junit.framework.TestCase;\n+import wicket.util.string.interpolator.MapVariableInterpolator;\n+\n+/**\n+ * Tests {@link MapVariableInterpolator}\n+ * \n+ * @author <a href=\"mailto:jbq@apache.org\">Jean-Baptiste Quenot</a>\n+ */\n+public class VariableInterpolatorTest extends TestCase\n+{\n+\tpublic void testWithValue()\n+\t{\n+\t\tMap params = new HashMap();\n+\t\tparams.put(\"key\", \"value\");\n+\t\tMapVariableInterpolator in = new MapVariableInterpolator(\"${key}\", params);\n+\t\tassertEquals(\"value\", in.toString());\n+\t}\n+\n+\tpublic void testWithoutValue()\n+\t{\n+\t\tMap params = new HashMap();\n+\t\tMapVariableInterpolator in = new MapVariableInterpolator(\"${key}\", params);\n+\t\tassertEquals(\"${key}\", in.toString());\n+\t}\n+\n+\tpublic void testWithoutValueAndException()\n+\t{\n+\t\tMap params = new HashMap();\n+\t\tMapVariableInterpolator in = new MapVariableInterpolator(\"${key}\", params, true);\n+\t\ttry\n+\t\t{\n+\t\t\tin.toString();\n+\t\t\tfail(\"Should throw an exception\");\n+\t\t}\n+\t\tcatch (Exception e)\n+\t\t{\n+\n+\t\t}\n+\t}\n+}", "filename": "wicket/src/test/java/wicket/util/string/interpolator/VariableInterpolatorTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/7cc3599025cdf4c4fcd64e3d7be32cf29bbf4c2f", "parent": "https://github.com/apache/wicket/commit/81275860a9a4b82e894b23328b1d4232aee45c5d", "message": "WICKET-231: npe fix for sanicy check patch\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@499073 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_110", "file": [{"additions": 8, "raw_url": "https://github.com/apache/wicket/raw/7cc3599025cdf4c4fcd64e3d7be32cf29bbf4c2f/wicket/src/main/java/wicket/markup/html/form/ListMultipleChoice.java", "blob_url": "https://github.com/apache/wicket/blob/7cc3599025cdf4c4fcd64e3d7be32cf29bbf4c2f/wicket/src/main/java/wicket/markup/html/form/ListMultipleChoice.java", "sha": "4ac77c695b6b162ff85a7b35f183b7802a9badc7", "changes": 13, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/markup/html/form/ListMultipleChoice.java?ref=7cc3599025cdf4c4fcd64e3d7be32cf29bbf4c2f", "patch": "@@ -186,8 +186,10 @@ public final String getModelValue()\n \t{\n \t\t// Get the list of selected values\n \t\tObject modelObject = getModelObject();\n-\t\tif (! (modelObject instanceof Collection))\n-\t\t\tthrow new WicketRuntimeException(\"Model object for a ListMultipleChoice must be a Collection (found \" + modelObject.getClass() + \")\");\n+\t\tif (modelObject != null && !(modelObject instanceof Collection))\n+\t\t\tthrow new WicketRuntimeException(\n+\t\t\t\t\t\"Model object for a ListMultipleChoice must be a Collection (found \"\n+\t\t\t\t\t\t\t+ modelObject.getClass() + \")\");\n \t\tfinal Collection selectedValues = (Collection)modelObject;\n \t\tfinal AppendingStringBuffer buffer = new AppendingStringBuffer();\n \t\tif (selectedValues != null)\n@@ -235,7 +237,7 @@ protected final void onComponentTag(final ComponentTag tag)\n \t{\n \t\tsuper.onComponentTag(tag);\n \t\ttag.put(\"multiple\", \"multiple\");\n-\t\t\n+\n \t\tif (!tag.getAttributes().containsKey(\"size\"))\n \t\t{\n \t\t\ttag.put(\"size\", Math.min(maxRows, getChoices().size()));\n@@ -272,7 +274,7 @@ protected Object convertValue(String[] ids) throws ConversionException\n \t\t}\n \t\treturn selectedValues;\n \t}\n-\t\n+\n \t/**\n \t * @see FormComponent#updateModel()\n \t */\n@@ -282,7 +284,8 @@ public void updateModel()\n \t\tif (selectedValues != null)\n \t\t{\n \t\t\tif (getModelObject() != selectedValues)\n-\t\t\t\tthrow new WicketRuntimeException(\"Updating a ListMultipleChoice works by modifying the underlying model object in-place, so please make sure that getObject() always returns the same Collection instance!\");\n+\t\t\t\tthrow new WicketRuntimeException(\n+\t\t\t\t\t\t\"Updating a ListMultipleChoice works by modifying the underlying model object in-place, so please make sure that getObject() always returns the same Collection instance!\");\n \t\t\tmodelChanging();\n \t\t\tselectedValues.clear();\n \t\t\tselectedValues.addAll((Collection)getConvertedInput());", "filename": "wicket/src/main/java/wicket/markup/html/form/ListMultipleChoice.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/a478e78cb77abfe33dd58d1abbfda293972d0825", "parent": "https://github.com/apache/wicket/commit/4fb6fa4357823b3ee080501ed942920947e2a363", "message": "WICKET-142: made array_ non-transient so deserialization no longer causes NPEs\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@484849 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_111", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/a478e78cb77abfe33dd58d1abbfda293972d0825/wicket/src/main/java/wicket/util/concurrent/CopyOnWriteArrayList.java", "blob_url": "https://github.com/apache/wicket/blob/a478e78cb77abfe33dd58d1abbfda293972d0825/wicket/src/main/java/wicket/util/concurrent/CopyOnWriteArrayList.java", "sha": "cfc9cda77acc2d67bc115cb3c7765a102aeba8c4", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/util/concurrent/CopyOnWriteArrayList.java?ref=a478e78cb77abfe33dd58d1abbfda293972d0825", "patch": "@@ -73,7 +73,7 @@\n \t/**\r\n \t * The held array. Directly access only within synchronized methods\r\n \t */\r\n-\tprotected transient Object[] array_;\r\n+\tprotected Object[] array_;\r\n \r\n \t/**\r\n \t * Accessor to the array intended to be called from within unsynchronized\r", "filename": "wicket/src/main/java/wicket/util/concurrent/CopyOnWriteArrayList.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/dbd2be6157cb74332921166867ceacf6f613d1f5", "parent": "https://github.com/apache/wicket/commit/9639728fab956de03e218ecc65aa5b8da7525944", "message": "Some minor tiding up of surplus ';'s, places where the code can't reach & a check against a NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@462049 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_112", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/RequestCycle.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/RequestCycle.java", "sha": "9514d5465075f93f8e2d46d010a868ccf550d05e", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/RequestCycle.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -199,11 +199,11 @@\n \tprivate static final int RESOLVE_TARGET = 2;\n \n \t/** Responding using the currently set {@link IRequestTarget}. */\n-\tprivate static final int RESPOND = 4;;\n+\tprivate static final int RESPOND = 4;\n \n \t/**\n \t * Gets request cycle for calling thread.\n-\t * \n+\t *\n \t * @return Request cycle for calling thread\n \t */\n \tpublic final static RequestCycle get()", "filename": "wicket/src/java/wicket/RequestCycle.java"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/behavior/AbstractAjaxBehavior.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/behavior/AbstractAjaxBehavior.java", "sha": "a16afe11136170c03e5676bb312bb165a2ada9a1", "changes": 6, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/behavior/AbstractAjaxBehavior.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -118,12 +118,6 @@ public final CharSequence getCallbackUrl(final boolean recordPageVersion,\n \t\t\t\t\t\"Behavior must be bound to a component to create the URL\");\n \t\t}\n \n-\t\tif (!(this instanceof IBehaviorListener))\n-\t\t{\n-\t\t\tthrow new IllegalArgumentException(\n-\t\t\t\t\t\"The behavior must implement IBehaviorListener to accept requests\");\n-\t\t}\n-\n \t\tint index = getComponent().getBehaviors().indexOf(this);\n \t\tif (index == -1)\n \t\t{", "filename": "wicket/src/java/wicket/behavior/AbstractAjaxBehavior.java"}, {"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/markup/html/form/FormComponent.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/markup/html/form/FormComponent.java", "sha": "935ea84c4ae7e856071a59ba7381bb07502ffb3a", "changes": 7, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/form/FormComponent.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -739,8 +739,13 @@ protected final void validateValidators()\n \t\t}\n \t\tcatch (Exception e)\n \t\t{\n+\t\t\tString name = \"<null>\";\n+\t\t\tif (validator != null)\n+\t\t\t{\n+\t\t\t\tname = validator.getClass().getName();\n+\t\t\t}\n \t\t\tthrow new WicketRuntimeException(\"Exception '\" + e + \"' occurred during validation \"\n-\t\t\t\t\t+ validator.getClass().getName() + \" on component \" + this.getPath(), e);\n+\t\t\t\t\t+ name + \" on component \" + this.getPath(), e);\n \t\t}\n \t}\n ", "filename": "wicket/src/java/wicket/markup/html/form/FormComponent.java"}, {"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/markup/html/form/RadioChoice.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/markup/html/form/RadioChoice.java", "sha": "00d7820d41812045e299d152dd3b91932e364d96", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/form/RadioChoice.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -411,8 +411,8 @@ protected final void onComponentTagBody(final MarkupStream markupStream,\n \n \t\t\t// Get label for choice\n \t\t\tfinal String label = (String)getConverter().convert(\n-\t\t\t\t\tgetChoiceRenderer().getDisplayValue(choice), String.class);\n-\t\t\t;\n+\t\t\t\t\tgetChoiceRenderer().getDisplayValue(choice), String.class\n+\t\t\t);\n \n \t\t\t// If there is a display value for the choice, then we know that the\n \t\t\t// choice is automatic in some way. If label is /null/ then we know", "filename": "wicket/src/java/wicket/markup/html/form/RadioChoice.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/markup/html/tree/AbstractTree.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/markup/html/tree/AbstractTree.java", "sha": "5f7c2695d12d3b6922c1f876c4e031e24a5366fc", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/tree/AbstractTree.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -105,6 +105,7 @@ public void collapseSiblings(final DefaultMutableTreeNode node)\n \t\t{\n \t\t\tfinal TreePath siblingSelection = new TreePath(nextNode.getPath());\n \t\t\tsetExpandedState(siblingSelection, false); // inverse\n+\t\t\t// ToDo: Check if previousNode can be null? If so, needs trapping - Gwyn\n \t\t\tnextNode = previousNode.getNextSibling();\n \t\t}\n \t}", "filename": "wicket/src/java/wicket/markup/html/tree/AbstractTree.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/protocol/http/MockWebApplication.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/protocol/http/MockWebApplication.java", "sha": "86fc39812e7de1407850849260282cec7b1d1f85", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/protocol/http/MockWebApplication.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -138,7 +138,7 @@ public MockWebApplication(final String path)\n \t\t\tpublic ServletContext getServletContext()\n \t\t\t{\n \t\t\t\treturn context;\n-\t\t\t};\n+\t\t\t}\n \n \t\t\t/**\n \t\t\t * @see javax.servlet.GenericServlet#getInitParameter(java.lang.String)", "filename": "wicket/src/java/wicket/protocol/http/MockWebApplication.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/protocol/http/WebRequestCycle.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/protocol/http/WebRequestCycle.java", "sha": "3cbeba6f6eb8cb8b72f7ed7af5ddfcd5cb22b103", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/protocol/http/WebRequestCycle.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -149,7 +149,7 @@ public final void redirectTo(final Page page)\n \t\t\t\t\tpublic CharSequence encodeURL(CharSequence url)\n \t\t\t\t\t{\n \t\t\t\t\t\treturn currentResponse.encodeURL(url);\n-\t\t\t\t\t};\n+\t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tredirectResponse.setCharacterEncoding(currentResponse.getCharacterEncoding());\n ", "filename": "wicket/src/java/wicket/protocol/http/WebRequestCycle.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/request/target/coding/SharedResourceRequestTargetUrlCodingStrategy.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/request/target/coding/SharedResourceRequestTargetUrlCodingStrategy.java", "sha": "17986902b884af26048814811a06ef4caed6a883", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/request/target/coding/SharedResourceRequestTargetUrlCodingStrategy.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -91,7 +91,7 @@ public boolean matches(IRequestTarget requestTarget)\n \t{\r\n \t\tif (requestTarget instanceof ISharedResourceRequestTarget)\r\n \t\t{\r\n-\t\t\tSharedResourceRequestTarget target = (SharedResourceRequestTarget)requestTarget;\r\n+\t\t\tISharedResourceRequestTarget target = (ISharedResourceRequestTarget)requestTarget;\r\n \t\t\treturn target.getRequestParameters().getResourceKey().equals(resourceKey);\r\n \t\t}\r\n \t\telse\r", "filename": "wicket/src/java/wicket/request/target/coding/SharedResourceRequestTargetUrlCodingStrategy.java"}, {"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/util/collections/IntHashMap.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/util/collections/IntHashMap.java", "sha": "c12727acaba280e8ae9a74224a01dcfa061a1272", "changes": 4, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/collections/IntHashMap.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -625,7 +625,7 @@ private boolean containsNullValue()\n \t * \r\n \t * @return a shallow copy of this map.\r\n \t */\r\n-\tpublic Object clone()\r\n+\tpublic Object clone() throws CloneNotSupportedException\r\n \t{\r\n \t\tIntHashMap result = null;\r\n \t\ttry\r\n@@ -791,7 +791,7 @@ void createEntry(int key, Object value, int bucketIndex)\n \t\t\t{ // advance to first entry\r\n \t\t\t\twhile (i > 0 && (n = t[--i]) == null)\r\n \t\t\t\t{\r\n-\t\t\t\t\t;\r\n+\t\t\t\t\t/* NoOp*/ ;\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t\tnext = n;\r", "filename": "wicket/src/java/wicket/util/collections/IntHashMap.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/util/concurrent/ConcurrentReaderHashMap.java", "blob_url": "https://github.com/apache/wicket/blob/dbd2be6157cb74332921166867ceacf6f613d1f5/wicket/src/java/wicket/util/concurrent/ConcurrentReaderHashMap.java", "sha": "4dd115bb2a5aa5c80d3542e04c63eb1cda15ce92", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/concurrent/ConcurrentReaderHashMap.java?ref=dbd2be6157cb74332921166867ceacf6f613d1f5", "patch": "@@ -916,7 +916,7 @@ public synchronized void clear()\n \t * \n \t * @return a shallow copy of this map.\n \t */\n-\tpublic synchronized Object clone()\n+\tpublic synchronized Object clone() throws CloneNotSupportedException\n \t{\n \t\ttry\n \t\t{", "filename": "wicket/src/java/wicket/util/concurrent/ConcurrentReaderHashMap.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/e6df65118c046b8150ae76e5cc5319a1e94639e0", "parent": "https://github.com/apache/wicket/commit/570bd0140f446de07794f7f6d69160dfeaa5b6a9", "message": "Application.get() and Session.get() will now return null if threadlocal is not set as opposed to throwing an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@461953 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_113", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/e6df65118c046b8150ae76e5cc5319a1e94639e0/wicket/src/changes/changes.xml", "blob_url": "https://github.com/apache/wicket/blob/e6df65118c046b8150ae76e5cc5319a1e94639e0/wicket/src/changes/changes.xml", "sha": "492baf8406528b9c23b83c7b98381bb2c3f17ae5", "changes": 2, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/changes/changes.xml?ref=e6df65118c046b8150ae76e5cc5319a1e94639e0", "patch": "@@ -11,6 +11,8 @@\n   </properties>\n   <body>\n \t<release version=\"2.0-beta1\" date=\"tbd\" description=\"Wicket 2.0 beta 1\">\n+\t\t<action type=\"fix\" dev=\"Igor Vaynberg\">Application.get() and Session.get() will now return null if threadlocal is not set as opposed to throwing an NPE</action>\n+\t\t\n     <release version=\"1.2-rc4\" date=\"tbd\" description=\"Wicket 1.2 release candidate 4\">\n       <action type=\"add\" dev=\"Juergen Donnerstag\" issue=\"1357511\">Markup inheritance extended to support &lt;wicket:child&gt; ... &lt;/wicket:child&gt; as well</action>\n       <action type=\"add\" dev=\"Martijn Dashorst\" issue=\"1471603\" due-to=\"Dzenan Ridjanovic\">Added Bosnian/Herzegovinan translation of Application.properties</action>", "filename": "wicket/src/changes/changes.xml"}, {"additions": 3, "raw_url": "https://github.com/apache/wicket/raw/e6df65118c046b8150ae76e5cc5319a1e94639e0/wicket/src/java/wicket/Application.java", "blob_url": "https://github.com/apache/wicket/blob/e6df65118c046b8150ae76e5cc5319a1e94639e0/wicket/src/java/wicket/Application.java", "sha": "963c5210dea6108f035b8958c2f897946b02610e", "changes": 12, "status": "modified", "deletions": 9, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/Application.java?ref=e6df65118c046b8150ae76e5cc5319a1e94639e0", "patch": "@@ -169,17 +169,11 @@\n \t/**\n \t * Get Application for current thread.\n \t * \n-\t * @return The current thread's Application\n+\t * @return The current thread's Application, or null if not set\n \t */\n \tpublic static Application get()\n \t{\n-\t\tfinal Application application = current.get();\n-\t\tif (application == null)\n-\t\t{\n-\t\t\tthrow new WicketRuntimeException(\"There is no application attached to current thread \"\n-\t\t\t\t\t+ Thread.currentThread().getName());\n-\t\t}\n-\t\treturn application;\n+\t\treturn current.get();\n \t}\n \n \t/**\n@@ -752,7 +746,7 @@ protected void destroy()\n \n \t}\n \n-\t\n+\n \t/**\n \t * @param sessionId\n \t *            The session id that was destroyed", "filename": "wicket/src/java/wicket/Application.java"}, {"additions": 8, "raw_url": "https://github.com/apache/wicket/raw/e6df65118c046b8150ae76e5cc5319a1e94639e0/wicket/src/java/wicket/Session.java", "blob_url": "https://github.com/apache/wicket/blob/e6df65118c046b8150ae76e5cc5319a1e94639e0/wicket/src/java/wicket/Session.java", "sha": "f4a94202b514ce76688e59c5240b39da3fd8cdad", "changes": 22, "status": "modified", "deletions": 14, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/Session.java?ref=e6df65118c046b8150ae76e5cc5319a1e94639e0", "patch": "@@ -197,17 +197,11 @@\n \t/**\n \t * Get the session for the calling thread.\n \t * \n-\t * @return Session for calling thread\n+\t * @return Session for calling thread, or null if not set\n \t */\n \tpublic static Session get()\n \t{\n-\t\tfinal Session session = current.get();\n-\t\tif (session == null)\n-\t\t{\n-\t\t\tthrow new WicketRuntimeException(\"there is no session attached to current thread \"\n-\t\t\t\t\t+ Thread.currentThread().getName());\n-\t\t}\n-\t\treturn session;\n+\t\treturn current.get();\n \t}\n \n \t/**\n@@ -232,7 +226,7 @@ public static Session get()\n \tpublic static Session get(boolean forceBind)\n \t{\n \t\tSession session = get();\n-\t\tif(forceBind)\n+\t\tif (forceBind)\n \t\t{\n \t\t\tsession.bind();\n \t\t}\n@@ -461,11 +455,11 @@ public final synchronized Page getPage(final String pageMapName, final String pa\n \t\t{\n \t\t\t// Get page entry for id and version\n \t\t\tfinal String id = Strings.firstPathComponent(path, Component.PATH_SEPARATOR);\n-\t\t\tif(usedPages==null)\n+\t\t\tif (usedPages == null)\n \t\t\t{\n \t\t\t\tusedPages = new HashMap<String, Thread>(3);\n \t\t\t}\n-\t\t\t\n+\n \t\t\tThread t = usedPages.get(id);\n \t\t\twhile (t != null && t != Thread.currentThread())\n \t\t\t{\n@@ -479,7 +473,7 @@ public final synchronized Page getPage(final String pageMapName, final String pa\n \t\t\t\t}\n \t\t\t\tt = usedPages.get(id);\n \t\t\t}\n-\t\t\t\n+\n \t\t\tusedPages.put(id, Thread.currentThread());\n \t\t\tPage page = pageMap.get(Integer.parseInt(id), versionNumber);\n \t\t\tif (page == null)\n@@ -848,7 +842,7 @@ public final IConverter getConverter(Class type)\n \t\t{\n \t\t\t// Let the factory create a new converter\n \t\t\tconverterSupplier = getApplication().getApplicationSettings()\n-\t\t\t.getConverterSupplierFactory().newConverterSupplier();\n+\t\t\t\t\t.getConverterSupplierFactory().newConverterSupplier();\n \t\t}\n \t\treturn converterSupplier.getConverter(type);\n \t}\n@@ -1101,7 +1095,7 @@ void dirtyPage(final Page page)\n \t */\n \tfinal synchronized void pageDetached(Page page)\n \t{\n-\t\tif(usedPages!=null)\n+\t\tif (usedPages != null)\n \t\t{\n \t\t\tusedPages.remove(page.getId());\n \t\t}", "filename": "wicket/src/java/wicket/Session.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/5c99da5464273eb25819f663264a9a7d500d466d", "parent": "https://github.com/apache/wicket/commit/8841cd973deac3089b96b2deab87de96e46db695", "message": "fixed npe where sometimes pageparameters are null and coding strategy calls getparameters().put \n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/WICKET_1_2@460676 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_114", "file": [{"additions": 8, "raw_url": "https://github.com/apache/wicket/raw/5c99da5464273eb25819f663264a9a7d500d466d/wicket/src/java/wicket/request/target/component/BookmarkablePageRequestTarget.java", "blob_url": "https://github.com/apache/wicket/blob/5c99da5464273eb25819f663264a9a7d500d466d/wicket/src/java/wicket/request/target/component/BookmarkablePageRequestTarget.java", "sha": "182b55d6bf29ab419ebd06864f4aa7d7d975eca9", "changes": 14, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/request/target/component/BookmarkablePageRequestTarget.java?ref=5c99da5464273eb25819f663264a9a7d500d466d", "patch": "@@ -107,7 +107,7 @@ public BookmarkablePageRequestTarget(String pageMapName, Class pageClass,\n \t\t\t\t\t+ Page.class.getName());\n \t\t}\n \t\tthis.pageClass = pageClass;\n-\t\tthis.pageParameters = pageParameters;\n+\t\tthis.pageParameters = (pageParameters == null) ? new PageParameters() : pageParameters;\n \t\tthis.pageMapName = pageMapName;\n \t}\n \n@@ -116,7 +116,7 @@ public BookmarkablePageRequestTarget(String pageMapName, Class pageClass,\n \t */\n \tpublic void detach(RequestCycle requestCycle)\n \t{\n-\t\tif(page != null)\n+\t\tif (page != null)\n \t\t{\n \t\t\tpage.internalDetach();\n \t\t}\n@@ -149,9 +149,10 @@ public boolean equals(Object obj)\n \t\t}\n \t\treturn equal;\n \t}\n-\t\n+\n \t/**\n-\t * @return The page that was created, null if the response did not happen yet\n+\t * @return The page that was created, null if the response did not happen\n+\t *         yet\n \t */\n \tpublic final Page getPage()\n \t{\n@@ -204,7 +205,7 @@ public void processEvents(RequestCycle requestCycle)\n \t\t\tpage = getPage(requestCycle);\n \t\t}\n \t}\n-\t\n+\n \t/**\n \t * @see wicket.IRequestTarget#respond(wicket.RequestCycle)\n \t */\n@@ -215,7 +216,8 @@ public void respond(RequestCycle requestCycle)\n \t\t\tif (requestCycle.getRedirect())\n \t\t\t{\n \t\t\t\tIRequestCycleProcessor processor = requestCycle.getProcessor();\n-\t\t\t\tString redirectUrl = processor.getRequestCodingStrategy().encode(requestCycle,this).toString();\n+\t\t\t\tString redirectUrl = processor.getRequestCodingStrategy()\n+\t\t\t\t\t\t.encode(requestCycle, this).toString();\n \t\t\t\trequestCycle.getResponse().redirect(redirectUrl);\n \t\t\t}\n \t\t\telse", "filename": "wicket/src/java/wicket/request/target/component/BookmarkablePageRequestTarget.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/59de8b42d3b5192c18062d0a1e44b581c7a64eed", "parent": "https://github.com/apache/wicket/commit/59df7df16635532ebe0a4c29514c0569636ac7d4", "message": "Throw an explicit NPE with explanation if the 'choices' list is null when we come to try & retrieve it.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@460225 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_115", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/59de8b42d3b5192c18062d0a1e44b581c7a64eed/wicket/src/java/wicket/markup/html/form/AbstractChoice.java", "blob_url": "https://github.com/apache/wicket/blob/59de8b42d3b5192c18062d0a1e44b581c7a64eed/wicket/src/java/wicket/markup/html/form/AbstractChoice.java", "sha": "cf642de01794e78b2c85429dc1d173d0a0902940", "changes": 7, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/form/AbstractChoice.java?ref=59de8b42d3b5192c18062d0a1e44b581c7a64eed", "patch": "@@ -197,7 +197,12 @@ public AbstractChoice(final String id, IModel model, final IModel choices,\n \t */\n \tpublic List getChoices()\n \t{\n-\t\treturn (List)choices.getObject(this);\n+\t\tList choices = (List)this.choices.getObject(this);\n+\t\tif (choices == null)\n+\t\t{\n+\t\t\tthrow new NullPointerException(\"List of choices is null - Was the supplied 'Choices' model empty?\");\n+\t\t}\n+\t\treturn choices;\n \t}\n \n ", "filename": "wicket/src/java/wicket/markup/html/form/AbstractChoice.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/74b92abb83242b7bacd01dc9ddb8d78330ca5f76", "parent": "https://github.com/apache/wicket/commit/af8bc0ceff7d99d4bb431a9538974acee58d3680", "message": "fixed NPE and extended the unit test (provided by Thomas Singer)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@460162 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_116", "file": [{"additions": 15, "raw_url": "https://github.com/apache/wicket/raw/74b92abb83242b7bacd01dc9ddb8d78330ca5f76/wicket/src/java/wicket/markup/resolver/AutoLinkResolver.java", "blob_url": "https://github.com/apache/wicket/blob/74b92abb83242b7bacd01dc9ddb8d78330ca5f76/wicket/src/java/wicket/markup/resolver/AutoLinkResolver.java", "sha": "bb6ec333055c97048610ea4a95a73fd847bb2275", "changes": 28, "status": "modified", "deletions": 13, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/resolver/AutoLinkResolver.java?ref=74b92abb83242b7bacd01dc9ddb8d78330ca5f76", "patch": "@@ -440,20 +440,22 @@ public Component newAutoComponent(final MarkupContainer container, final String\n \t\t\t\t\t\t&& page.getMarkupStream().isMergedMarkup())\n \t\t\t\t{\n \t\t\t\t\tClass clazz = container.getMarkupStream().getTag().getMarkupClass();\n-\t\t\t\t\t\n-\t\t\t\t\t// Href is relative. Resolve the url given relative to the\n-\t\t\t\t\t// current page\n-\t\t\t\t\tclassName = Packages.extractPackageName(clazz) + \".\" + infoPath;\n-\t\n-\t\t\t\t\ttry\n+\t\t\t\t\tif (clazz != null)\n \t\t\t\t\t{\n-\t\t\t\t\t\tclazz = defaultClassResolver.resolveClass(className);\n-\t\t\t\t\t\treturn new AutolinkBookmarkablePageLink(autoId, clazz, pathInfo.getPageParameters());\n-\t\t\t\t\t}\n-\t\t\t\t\tcatch (WicketRuntimeException ex)\n-\t\t\t\t\t{\n-\t\t\t\t\t\tlog.warn(\"Did not find corresponding java class: \" + className);\n-\t\t\t\t\t\t// fall through\n+\t\t\t\t\t\t// Href is relative. Resolve the url given relative to the\n+\t\t\t\t\t\t// current page\n+\t\t\t\t\t\tclassName = Packages.extractPackageName(clazz) + \".\" + infoPath;\n+\t\n+\t\t\t\t\t\ttry\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tclazz = defaultClassResolver.resolveClass(className);\n+\t\t\t\t\t\t\treturn new AutolinkBookmarkablePageLink(autoId, clazz, pathInfo.getPageParameters());\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tcatch (WicketRuntimeException ex)\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tlog.warn(\"Did not find corresponding java class: \" + className);\n+\t\t\t\t\t\t\t// fall through\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}", "filename": "wicket/src/java/wicket/markup/resolver/AutoLinkResolver.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/af8bc0ceff7d99d4bb431a9538974acee58d3680", "parent": "https://github.com/apache/wicket/commit/153dd8404e080e1a4b70e05d6e0f55e34188e5bd", "message": "fixed NPE and extended the unit test (provided by Thomas Singer)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@460161 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_117", "file": [{"additions": 19, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/AutolinkTest.java", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/AutolinkTest.java", "sha": "1bbc1ba0644cd50df3740da51e95f24100d1a099", "changes": 23, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/AutolinkTest.java?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -21,6 +21,7 @@\n import org.apache.commons.logging.LogFactory;\n \n import wicket.WicketTestCase;\n+import wicket.markup.html.autolink.sub.PageB;\n import wicket.markup.resolver.AutoLinkResolver;\n \n /**\n@@ -41,15 +42,29 @@ public AutolinkTest(String name)\n \t}\n \n \t/**\n-\t * TODO Autolink: see https://sourceforge.net/tracker/index.php?func=detail&aid=1448200&group_id=119783&atid=684975\n-\t * The AnchorResolverDelegate implementation solves the problem. In that\n-\t * context it actually is not a test, rather than a solution which has not yet\n-\t * found its way into the core.\n \t * \n \t * @throws Exception\n \t */\n \tpublic void test_1() throws Exception\n \t{\n \t\texecuteTest(MyPage.class, \"MyPageExpectedResult.html\");\n \t}\n+\n+\t/**\n+\t * \n+\t * @throws Exception\n+\t */\n+\tpublic void test_2() throws Exception\n+\t{\n+\t\texecuteTest(PageA.class, \"PageAExpectedResult.html\");\n+\t}\n+\n+\t/**\n+\t * \n+\t * @throws Exception\n+\t */\n+\tpublic void test_3() throws Exception\n+\t{\n+\t\texecuteTest(PageB.class, \"PageBExpectedResult.html\");\n+\t}\n }", "filename": "wicket/src/test/wicket/markup/html/autolink/AutolinkTest.java"}, {"additions": 13, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/BasePage.html", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/BasePage.html", "sha": "0a04d9c4b750de00a1fc1acf43c90c4685c8bd36", "changes": 13, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/BasePage.html?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -0,0 +1,13 @@\n+<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\n+<html>\n+  <body>\n+    <wicket:link>\n+      <a href=\"MyPage.html\">My Page</a>\n+      <a href=\"PageA.html\">Page A</a>\n+      <a href=\"sub/PageB.html\">Page B</a>\n+    </wicket:link>\n+    START<br>\n+    <wicket:child/>\n+    END<br>\n+  </body>\n+</html>", "filename": "wicket/src/test/wicket/markup/html/autolink/BasePage.html"}, {"additions": 36, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/BasePage.java", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/BasePage.java", "sha": "e2583d7ddf3f9979cd666d7850bff21906f18f46", "changes": 36, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/BasePage.java?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -0,0 +1,36 @@\n+/*\n+ * $Id: ContainerWithAssociatedMarkupHelper.java,v 1.1 2006/03/10 22:20:42\n+ * jdonnerstag Exp $ $Revision$ $Date: 2006/03/10 22:20:42 $\n+ * \n+ * ==============================================================================\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ * \n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package wicket.markup.html.autolink;\n+\n+import wicket.markup.html.WebPage;\n+\n+/**\n+ * \n+ */\n+public class BasePage extends WebPage\n+{\n+\tprivate static final long serialVersionUID = 1L;\n+\n+\t/** \n+\t * Creates a new instance of BasePanel\n+\t * \n+\t */\n+\tpublic BasePage()\n+\t{\n+\t}\n+}", "filename": "wicket/src/test/wicket/markup/html/autolink/BasePage.java"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/MyPage.java", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/MyPage.java", "sha": "a5b593efc711e3227a2067e14f9c81b501125d19", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/MyPage.java?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -17,7 +17,6 @@\n  */\n package wicket.markup.html.autolink;\n \n-import wicket.markup.html.autolink.sub.BasePage;\n \n /**\n  * ", "filename": "wicket/src/test/wicket/markup/html/autolink/MyPage.java"}, {"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/MyPageExpectedResult.html", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/MyPageExpectedResult.html", "sha": "01f9ad375df56b3e7819ff70261e9d288c3d906a", "changes": 2, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/MyPageExpectedResult.html?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -2,6 +2,8 @@\n <html>\r\n   <body>\r\n     <wicket:link>\r\n+      <span><em>My Page</em></span>\r\n+      <a href=\"/MockWebApplication/MockWebApplication?wicket:bookmarkablePage=:wicket.markup.html.autolink.PageA\">Page A</a>\r\n       <a href=\"/MockWebApplication/MockWebApplication?wicket:bookmarkablePage=:wicket.markup.html.autolink.sub.PageB\">Page B</a>\r\n     </wicket:link>\r\n     START<br>\r", "filename": "wicket/src/test/wicket/markup/html/autolink/MyPageExpectedResult.html"}, {"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/PageA.html", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/PageA.html", "sha": "9e59faa483289aac0bb2ff4d68971f28b89b2ffa", "changes": 13, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/PageA.html?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -1,6 +1,7 @@\n-<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\n-<html>\n-  <body>\n-    Page A\n-  </body>\n-</html>\n+\n+<wicket:extend>\n+  <wicket:link>\n+    <a href=\"PageA.html\">Page A</a>\n+  </wicket:link>\n+  Page A\n+</wicket:extend>", "filename": "wicket/src/test/wicket/markup/html/autolink/PageA.html"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/PageA.java", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/PageA.java", "sha": "498814b4be75b22557d9e2a7ed13dbc0cb4ef2bf", "changes": 4, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/PageA.java?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -17,13 +17,11 @@\n  */\n package wicket.markup.html.autolink;\n \n-import wicket.markup.html.WebPage;\n-\n /**\n  * \n  * @author Juergen Donnerstag\n  */\n-public class PageA extends WebPage\n+public class PageA extends BasePage\n {\n \tprivate static final long serialVersionUID = 1L;\n ", "filename": "wicket/src/test/wicket/markup/html/autolink/PageA.java"}, {"additions": 18, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/PageAExpectedResult.html", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/PageAExpectedResult.html", "sha": "9506f717b55efd93867380c3dbeff4178844e721", "changes": 18, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/PageAExpectedResult.html?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -0,0 +1,18 @@\n+<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\r\n+<html>\r\n+  <body>\r\n+    <wicket:link>\r\n+      <a href=\"/MockWebApplication/MockWebApplication?wicket:bookmarkablePage=:wicket.markup.html.autolink.MyPage\">My Page</a>\r\n+      <span><em>Page A</em></span>\r\n+      <a href=\"/MockWebApplication/MockWebApplication?wicket:bookmarkablePage=:wicket.markup.html.autolink.sub.PageB\">Page B</a>\r\n+    </wicket:link>\r\n+    START<br>\r\n+    <wicket:child><wicket:extend>\r\n+  <wicket:link>\r\n+    <span><em>Page A</em></span>\r\n+  </wicket:link>\r\n+  Page A\r\n+</wicket:extend></wicket:child>\r\n+    END<br>\r\n+  </body>\r\n+</html>\r", "filename": "wicket/src/test/wicket/markup/html/autolink/PageAExpectedResult.html"}, {"additions": 16, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/PageBExpectedResult.html", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/PageBExpectedResult.html", "sha": "592bbbe2df992bfcb9fdd607a610a2a757f4d4a3", "changes": 16, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/PageBExpectedResult.html?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -0,0 +1,16 @@\n+<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\r\n+<html>\r\n+  <body>\r\n+    <wicket:link>\r\n+      <span><em>Page B</em></span>\r\n+    </wicket:link>\r\n+    START<br>\r\n+    <wicket:child><wicket:extend>\r\n+  <wicket:link>\r\n+    <a href=\"PageA.html\">Page A</a>\r\n+  </wicket:link>\r\n+  Page B\r\n+</wicket:extend></wicket:child>\r\n+    END<br>\r\n+  </body>\r\n+</html>\r", "filename": "wicket/src/test/wicket/markup/html/autolink/PageBExpectedResult.html"}, {"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/sub/PageB.html", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/sub/PageB.html", "sha": "05da0c93fede142a2594675d9747e7944b750281", "changes": 13, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/sub/PageB.html?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -1,6 +1,7 @@\n-<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\n-<html>\n-  <body>\n-    Page B\n-  </body>\n-</html>\n+\n+<wicket:extend>\n+  <wicket:link>\n+    <a href=\"PageA.html\">Page A</a>\n+  </wicket:link>\n+  Page B\n+</wicket:extend>", "filename": "wicket/src/test/wicket/markup/html/autolink/sub/PageB.html"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/sub/PageB.java", "blob_url": "https://github.com/apache/wicket/blob/af8bc0ceff7d99d4bb431a9538974acee58d3680/wicket/src/test/wicket/markup/html/autolink/sub/PageB.java", "sha": "339c6c8767ef4b017c26e917722269723bf77946", "changes": 3, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/autolink/sub/PageB.java?ref=af8bc0ceff7d99d4bb431a9538974acee58d3680", "patch": "@@ -17,13 +17,12 @@\n  */\n package wicket.markup.html.autolink.sub;\n \n-import wicket.markup.html.WebPage;\n \n /**\n  * \n  * @author Juergen Donnerstag\n  */\n-public class PageB extends WebPage\n+public class PageB extends BasePage\n {\n \tprivate static final long serialVersionUID = 1L;\n ", "filename": "wicket/src/test/wicket/markup/html/autolink/sub/PageB.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/bbaedf45534cc9d7ca4055be907d42b5cb2f7cd6", "parent": "https://github.com/apache/wicket/commit/273f7c3fc0949e5bac4c6a4329baa7206387f7c6", "message": "fixed core unit test failure (NPE) due to getApplication().getAuthorizationStrategy() returning null (application not initialized)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@458014 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_118", "file": [{"additions": 11, "raw_url": "https://github.com/apache/wicket/raw/bbaedf45534cc9d7ca4055be907d42b5cb2f7cd6/wicket/src/test/wicket/markup/html/list/TableTest.java", "blob_url": "https://github.com/apache/wicket/blob/bbaedf45534cc9d7ca4055be907d42b5cb2f7cd6/wicket/src/test/wicket/markup/html/list/TableTest.java", "sha": "230a550e6f32d6ea146950f665f8c64e76a3536a", "changes": 16, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/markup/html/list/TableTest.java?ref=bbaedf45534cc9d7ca4055be907d42b5cb2f7cd6", "patch": "@@ -20,19 +20,25 @@\n \n import java.util.ArrayList;\n \n-import wicket.markup.html.list.ListItem;\n-import wicket.markup.html.list.PageableListView;\n+import wicket.WicketTestCase;\n import wicket.model.Model;\n \n-import junit.framework.TestCase;\n-\n \n /**\n  * Test for tables.\n  * @author Juergen Donnerstag\n  */\n-public class TableTest extends TestCase\n+public class TableTest extends WicketTestCase\n {\n+\t/**\n+\t * Construct.\n+\t * @param name\n+\t */\n+\tpublic TableTest(String name)\n+\t{\n+\t\tsuper(name);\n+\t}\n+\n \t/**\n \t * creates a table.\n \t * @param modelListSize", "filename": "wicket/src/test/wicket/markup/html/list/TableTest.java"}, {"additions": 11, "raw_url": "https://github.com/apache/wicket/raw/bbaedf45534cc9d7ca4055be907d42b5cb2f7cd6/wicket/src/test/wicket/model/ModelToStringTest.java", "blob_url": "https://github.com/apache/wicket/blob/bbaedf45534cc9d7ca4055be907d42b5cb2f7cd6/wicket/src/test/wicket/model/ModelToStringTest.java", "sha": "2b7ee573a7d213f80d4f15b7270fd4d6782c4669", "changes": 14, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/model/ModelToStringTest.java?ref=bbaedf45534cc9d7ca4055be907d42b5cb2f7cd6", "patch": "@@ -3,15 +3,23 @@\n import java.util.Properties;\n \n import wicket.Component;\n+import wicket.WicketTestCase;\n import wicket.markup.html.basic.Label;\n \n-import junit.framework.TestCase;\n-\n /**\n  * Tests the toString() method on the models in the wicket.model package.\n  */\n-public class ModelToStringTest extends TestCase\n+public class ModelToStringTest extends WicketTestCase\n {\n+\t/**\n+\t * Construct.\n+\t * @param name\n+\t */\n+\tpublic ModelToStringTest(String name)\n+\t{\n+\t\tsuper(name);\n+\t}\n+\n \t/**\n \t * Used for models in testing.\n \t */", "filename": "wicket/src/test/wicket/model/ModelToStringTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/f54d28e18f2d0d6b4f8c1280cf29b36fe9d04a62", "parent": "https://github.com/apache/wicket/commit/7b3d8dd66861684ee73b1bbc4ad926c4f9568fb7", "message": "Fixed possible NPE's, and removed an endless loop construct (replaceAll(\"foo\", \"\", \"a\")).\n\nAdded more unittests.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@457544 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_119", "file": [{"additions": 84, "raw_url": "https://github.com/apache/wicket/raw/f54d28e18f2d0d6b4f8c1280cf29b36fe9d04a62/wicket/src/java/wicket/util/string/Strings.java", "blob_url": "https://github.com/apache/wicket/blob/f54d28e18f2d0d6b4f8c1280cf29b36fe9d04a62/wicket/src/java/wicket/util/string/Strings.java", "sha": "728fd44719916ef7bc6bcdfaa9b0309014aa4e0d", "changes": 121, "status": "modified", "deletions": 37, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/string/Strings.java?ref=f54d28e18f2d0d6b4f8c1280cf29b36fe9d04a62", "patch": "@@ -49,7 +49,7 @@\n  */\n public final class Strings\n {\n-    private static final Pattern htmlNumber = Pattern.compile(\"\\\\&\\\\#\\\\d+\\\\;\");\n+\tprivate static final Pattern htmlNumber = Pattern.compile(\"\\\\&\\\\#\\\\d+\\\\;\");\n \n \t/**\n \t * @param s\n@@ -61,7 +61,7 @@\n \t */\n \tpublic static String afterFirst(final String s, final char c)\n \t{\n-\t\tif(s == null)\n+\t\tif (s == null)\n \t\t{\n \t\t\treturn null;\n \t\t}\n@@ -95,7 +95,7 @@ public static String afterFirstPathComponent(final String path, final char separ\n \n \t/**\n \t * Returns everything after the last occurence of the given character in s.\n-\t *\n+\t * \n \t * @param s\n \t *            The string\n \t * @param c\n@@ -105,7 +105,7 @@ public static String afterFirstPathComponent(final String path, final char separ\n \t */\n \tpublic static String afterLast(final String s, final char c)\n \t{\n-\t\tif(s == null)\n+\t\tif (s == null)\n \t\t{\n \t\t\treturn null;\n \t\t}\n@@ -129,7 +129,7 @@ public static String afterLast(final String s, final char c)\n \t */\n \tpublic static String beforeFirst(final String s, final char c)\n \t{\n-\t\tif(s == null)\n+\t\tif (s == null)\n \t\t{\n \t\t\treturn null;\n \t\t}\n@@ -153,7 +153,7 @@ public static String beforeFirst(final String s, final char c)\n \t */\n \tpublic static String beforeLast(final String s, final char c)\n \t{\n-\t\tif(s == null)\n+\t\tif (s == null)\n \t\t{\n \t\t\treturn null;\n \t\t}\n@@ -194,7 +194,7 @@ public static String beforeLastPathComponent(final String path, final char separ\n \t */\n \tpublic static String capitalize(final String s)\n \t{\n-\t\tif(s == null)\n+\t\tif (s == null)\n \t\t{\n \t\t\treturn null;\n \t\t}\n@@ -255,8 +255,8 @@ public static String escapeMarkup(final String s, final boolean escapeSpaces)\n \t *            True to convert non-7 bit characters to unicode HTML (&#...)\n \t * @return The escaped string\n \t */\n-\tpublic static String escapeMarkup(final String s,\n-\t\t\tfinal boolean escapeSpaces, final boolean convertToHtmlUnicodeEscapes)\n+\tpublic static String escapeMarkup(final String s, final boolean escapeSpaces,\n+\t\t\tfinal boolean convertToHtmlUnicodeEscapes)\n \t{\n \t\tif (s == null)\n \t\t{\n@@ -305,46 +305,46 @@ public static String escapeMarkup(final String s,\n \t\t\t\t\t\tbuffer.append(\"&gt;\");\n \t\t\t\t\t\tbreak;\n \n-\t\t\t\t\tcase '&':\n+\t\t\t\t\tcase '&' :\n \n \t\t\t\t\t\t// if this is an entity (&#), then do not convert\n \t\t\t\t\t\tif ((i < len - 1) && (s.charAt(i + 1) == '#'))\n-\t\t\t\t\t    {\n+\t\t\t\t\t\t{\n \t\t\t\t\t\t\tbuffer.append(c);\n-\t\t\t\t\t\t\t\n-\t\t\t\t\t    }\n+\n+\t\t\t\t\t\t}\n \t\t\t\t\t\telse\n \t\t\t\t\t\t{\n \t\t\t\t\t\t\t// it is not an entity, so convert it to &amp;\n \t\t\t\t\t\t\tbuffer.append(\"&amp;\");\n \t\t\t\t\t\t}\n-\t\t\t\t\t    break;\n+\t\t\t\t\t\tbreak;\n \n-\t\t\t\t\tcase '\"':\n-\t\t\t\t\t    buffer.append(\"&quot;\");\n-\t\t\t\t\t    break;\n+\t\t\t\t\tcase '\"' :\n+\t\t\t\t\t\tbuffer.append(\"&quot;\");\n+\t\t\t\t\t\tbreak;\n \n-\t\t\t\t\tcase '\\'':\n-\t\t\t\t\t    buffer.append(\"&#039;\");\n-\t\t\t\t\t    break;\n+\t\t\t\t\tcase '\\'' :\n+\t\t\t\t\t\tbuffer.append(\"&#039;\");\n+\t\t\t\t\t\tbreak;\n \n \t\t\t\t\tdefault :\n \n \t\t\t\t\t\tif (convertToHtmlUnicodeEscapes)\n \t\t\t\t\t\t{\n-\t\t\t                int ci = 0xffff & c;\n-\t\t\t                if (ci < 160 )\n-\t\t\t\t\t\t\t{   \n+\t\t\t\t\t\t\tint ci = 0xffff & c;\n+\t\t\t\t\t\t\tif (ci < 160)\n+\t\t\t\t\t\t\t{\n \t\t\t\t\t\t\t\t// nothing special only 7 Bit\n \t\t\t\t\t\t\t\tbuffer.append(c);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\telse\n \t\t\t\t\t\t\t{\n-\t\t\t                    // Not 7 Bit use the unicode system\n+\t\t\t\t\t\t\t\t// Not 7 Bit use the unicode system\n \t\t\t\t\t\t\t\tbuffer.append(\"&#\");\n \t\t\t\t\t\t\t\tbuffer.append(new Integer(ci).toString());\n \t\t\t\t\t\t\t\tbuffer.append(';');\n-\t\t\t                }\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t\telse\n \t\t\t\t\t\t{\n@@ -362,23 +362,28 @@ public static String escapeMarkup(final String s,\n \t/**\n \t * Replace HTML numbers like &#20540 by the appropriate character.\n \t * \n-\t * @param str The text to be evaluated\n+\t * @param str\n+\t *            The text to be evaluated\n \t * @return The text with \"numbers\" replaced\n \t */\n \tpublic static String replaceHtmlEscapeNumber(String str)\n \t{\n+\t\tif (str == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n \t\tMatcher matcher = htmlNumber.matcher(str);\n \t\twhile (matcher.find())\n \t\t{\n-\t\t    int pos = matcher.start();\n-\t\t    int end = matcher.end();\n-\t\t    int number = Integer.parseInt(str.substring(pos+2, end-1));\n-\t\t    char ch = (char)number;\n-\t\t    str = str.substring(0, pos) + ch + str.substring(end);\n+\t\t\tint pos = matcher.start();\n+\t\t\tint end = matcher.end();\n+\t\t\tint number = Integer.parseInt(str.substring(pos + 2, end - 1));\n+\t\t\tchar ch = (char)number;\n+\t\t\tstr = str.substring(0, pos) + ch + str.substring(end);\n \t\t\tmatcher = htmlNumber.matcher(str);\n \t\t}\n-\t\t\n-\t    return str;\n+\n+\t\treturn str;\n \t}\n \n \t/**\n@@ -397,6 +402,10 @@ public static String replaceHtmlEscapeNumber(String str)\n \t */\n \tpublic static String firstPathComponent(final String path, final char separator)\n \t{\n+\t\tif (path == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n \t\tfinal int index = path.indexOf(separator);\n \n \t\tif (index == -1)\n@@ -408,6 +417,11 @@ public static String firstPathComponent(final String path, final char separator)\n \t}\n \n \t/**\n+\t * Checks whether the <code>string</code> is considered empty. Empty means\n+\t * that the string may contain whitespace, but no visible characters.\n+\t * \n+\t * \"\\n\\t \" is considered empty, while \" a\" is not.\n+\t * \n \t * @param string\n \t *            The string\n \t * @return True if the string is null or \"\"\n@@ -418,10 +432,20 @@ public static boolean isEmpty(final String string)\n \t}\n \n \t/**\n+\t * Converts the text in <code>s</code> to a corresponding boolean. On,\n+\t * yes, y, true and 1 are converted to <code>true</code>. Off, no, n,\n+\t * false and 0 (zero) are converted to <code>false</code>. An empty\n+\t * string is converted to <code>false</code>. Conversion is\n+\t * case-insensitive, and does <em>not</em> take internationalization into\n+\t * account.\n+\t * \n+\t * 'Ja', 'Oui', 'Igen', 'Nein', 'Nee', 'Non', 'Nem' are all illegal values.\n+\t * \n \t * @param s\n-\t *            String\n-\t * @return Boolean value\n+\t *            the value to convert into a boolean\n+\t * @return Boolean the converted value of <code>s</code>\n \t * @throws StringValueConversionException\n+\t *             when the value of <code>s</code> is not recognized.\n \t */\n \tpublic static boolean isTrue(final String s) throws StringValueConversionException\n \t{\n@@ -487,7 +511,7 @@ public static String lastPathComponent(final String path, final char separator)\n \t}\n \n \t/**\n-\t * Replace all occurrences of one string replaceWith another string\n+\t * Replace all occurrences of one string replaceWith another string.\n \t * \n \t * @param s\n \t *            The string to process\n@@ -497,8 +521,27 @@ public static String lastPathComponent(final String path, final char separator)\n \t *            The value to searchFor replaceWith\n \t * @return The resulting string with searchFor replaced with replaceWith\n \t */\n-\tpublic static String replaceAll(final String s, final String searchFor, final String replaceWith)\n+\tpublic static String replaceAll(final String s, final String searchFor, String replaceWith)\n \t{\n+\t\tif (s == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\t// if searchFor is null or the empty string, then there is nothing to\n+\t\t// replace, so returning s is the only option here.\n+\t\tif (searchFor == null || \"\".equals(searchFor))\n+\t\t{\n+\t\t\treturn s;\n+\t\t}\n+\n+\t\t// if replaceWith is null, then the searchFor should be replaced with\n+\t\t// nothing,\n+\t\t// which can be seen as the empty string.\n+\t\tif (replaceWith == null)\n+\t\t{\n+\t\t\treplaceWith = \"\";\n+\t\t}\n \t\t// Look for first occurrence of searchFor\n \t\tint matchIndex = s.indexOf(searchFor);\n \t\tif (matchIndex == -1)\n@@ -554,6 +597,10 @@ public static String replaceAll(final String s, final String searchFor, final St\n \t */\n \tpublic static String[] split(final String s, final char c)\n \t{\n+\t\tif (s == null)\n+\t\t{\n+\t\t\treturn new String[0];\n+\t\t}\n \t\tfinal List strings = new ArrayList();\n \t\tint pos = 0;\n \t\twhile (true)", "filename": "wicket/src/java/wicket/util/string/Strings.java"}, {"additions": 172, "raw_url": "https://github.com/apache/wicket/raw/f54d28e18f2d0d6b4f8c1280cf29b36fe9d04a62/wicket/src/test/wicket/util/string/StringsTest.java", "blob_url": "https://github.com/apache/wicket/blob/f54d28e18f2d0d6b4f8c1280cf29b36fe9d04a62/wicket/src/test/wicket/util/string/StringsTest.java", "sha": "6079168de19acc14f5bceb821387efec70e7cea8", "changes": 179, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/util/string/StringsTest.java?ref=f54d28e18f2d0d6b4f8c1280cf29b36fe9d04a62", "patch": "@@ -138,20 +138,22 @@ public void testEscapeMarkup()\n \t\tassertEquals(\"&amp;\", Strings.escapeMarkup(\"&\"));\n \t\tassertEquals(\"&#\", Strings.escapeMarkup(\"&#\"));\n \t\tassertEquals(\"&#0000;\", Strings.escapeMarkup(\"&#0000;\"));\n-\t\t\n+\n \t\tassertEquals(\"&amp;amp;\", Strings.escapeMarkup(\"&amp;\"));\n-\t\tassertEquals(\"&lt; &gt;&amp;&quot;&#039;?:;{}[]-_+=()*^%$#@!~`\", Strings.escapeMarkup(\"< >&\\\"'?:;{}[]-_+=()*^%$#@!~`\"));\n-\t\tassertEquals(\"&lt;&nbsp;&gt;&amp;&quot;&#039;?:;{}[]-_+=()*^%$#@!~`\", Strings.escapeMarkup(\"< >&\\\"'?:;{}[]-_+=()*^%$#@!~`\", true));\n+\t\tassertEquals(\"&lt; &gt;&amp;&quot;&#039;?:;{}[]-_+=()*^%$#@!~`\", Strings\n+\t\t\t\t.escapeMarkup(\"< >&\\\"'?:;{}[]-_+=()*^%$#@!~`\"));\n+\t\tassertEquals(\"&lt;&nbsp;&gt;&amp;&quot;&#039;?:;{}[]-_+=()*^%$#@!~`\", Strings.escapeMarkup(\n+\t\t\t\t\"< >&\\\"'?:;{}[]-_+=()*^%$#@!~`\", true));\n \t}\n-\t\n+\n \t/**\n \t * Tests the escapeMarkup method with whitespace.\n \t */\n \tpublic void testEscapeMarkupWhiteSpace()\n \t{\n \t\tassertNull(Strings.escapeMarkup(null, true));\n \t\tassertEquals(\"\", Strings.escapeMarkup(\"\", true));\n-\t\t\n+\n \t\tassertEquals(\"\\n \\t\", Strings.escapeMarkup(\"\\n \\t\", false));\n \t\tassertEquals(\"\\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\", Strings.escapeMarkup(\"\\n \\t\", true));\n \t\tassertEquals(\"  \", Strings.escapeMarkup(\"  \", false));\n@@ -166,10 +168,173 @@ public void testEscapeMarkupUnicode()\n \t\tassertNull(Strings.escapeMarkup(null, true, true));\n \t\tassertEquals(\"\", Strings.escapeMarkup(\"\", true, true));\n \n-\t\tassertEquals(\"&#199;&#252;&#233;&#226;&#228;&#224;&#229;&#231;&#234;&#235;\", \n-\t\t\t\tStrings.escapeMarkup(\"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\", false, true));\n+\t\tassertEquals(\"&#199;&#252;&#233;&#226;&#228;&#224;&#229;&#231;&#234;&#235;\", Strings\n+\t\t\t\t.escapeMarkup(\"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\", false, true));\n \n \t\tassertEquals(\"\\n \\t&#233;\", Strings.escapeMarkup(\"\\n \\t\ufffd\", false, true));\n \t\tassertEquals(\"\\n \\t\ufffd\", Strings.escapeMarkup(\"\\n \\t\ufffd\", false, false));\n \t}\n+\n+\t/**\n+\t * Tests the <code>replaceHtmlEscapeNumber</code> method.\n+\t */\n+\tpublic void testReplaceHtmlEscapeNumber()\n+\t{\n+\t\tassertNull(Strings.replaceHtmlEscapeNumber(null));\n+\t\tassertEquals(\"\", Strings.replaceHtmlEscapeNumber(\"\"));\n+\t\tassertEquals(\"abcdefghijklm\ufffd\", Strings.replaceHtmlEscapeNumber(\"abcdefghijklm\ufffd\"));\n+\t\tassertEquals(\"a &#\", Strings.replaceHtmlEscapeNumber(\"a &#\"));\n+\t\tassertEquals(\n+\t\t\t\t\"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\",\n+\t\t\t\tStrings\n+\t\t\t\t\t\t.replaceHtmlEscapeNumber(\"&#199;&#252;&#233;&#226;&#228;&#224;&#229;&#231;&#234;&#235;\"));\n+\t}\n+\n+\t/**\n+\t * Tests the <code>firstPathComponent</code> method.\n+\t */\n+\tpublic void testFirstPathComponent()\n+\t{\n+\t\tassertNull(Strings.firstPathComponent(null, '.'));\n+\t\tassertEquals(\"\", Strings.firstPathComponent(\"\", '.'));\n+\t\tassertEquals(\"foo\", Strings.firstPathComponent(\"foo\", '.'));\n+\t\tassertEquals(\"foo\", Strings.firstPathComponent(\"foo.bar\", '.'));\n+\t\tassertEquals(\"foo bar\", Strings.firstPathComponent(\"foo bar\", '.'));\n+\t}\n+\n+\t/**\n+\t * Tests the <code>isEmpty</code> method.\n+\t */\n+\tpublic void testIsEmpty()\n+\t{\n+\t\tassertTrue(Strings.isEmpty(null));\n+\t\tassertTrue(Strings.isEmpty(\"\"));\n+\t\tassertTrue(Strings.isEmpty(\" \"));\n+\t\tassertTrue(Strings.isEmpty(\"           \"));\n+\t\tassertTrue(Strings.isEmpty(\" \\n\\t\"));\n+\t\tassertFalse(Strings.isEmpty(\"a\"));\n+\t\tassertFalse(Strings.isEmpty(\" a\"));\n+\t}\n+\n+\t/**\n+\t * Tests the <code>isTrue</code> method.\n+\t * \n+\t * @throws StringValueConversionException\n+\t */\n+\tpublic void testIsTrue() throws StringValueConversionException\n+\t{\n+\t\tassertFalse(Strings.isTrue(null));\n+\t\tassertFalse(Strings.isTrue(\"\"));\n+\t\tassertFalse(Strings.isTrue(\" \\n \\t\"));\n+\n+\t\tassertFalse(Strings.isTrue(\"no\"));\n+\t\tassertFalse(Strings.isTrue(\"n\"));\n+\t\tassertFalse(Strings.isTrue(\"false\"));\n+\t\tassertFalse(Strings.isTrue(\"nO\"));\n+\t\tassertFalse(Strings.isTrue(\"N\"));\n+\t\tassertFalse(Strings.isTrue(\"fAlSe\"));\n+\t\tassertFalse(Strings.isTrue(\"0\"));\n+\n+\t\tassertTrue(Strings.isTrue(\"yes\"));\n+\t\tassertTrue(Strings.isTrue(\"y\"));\n+\t\tassertTrue(Strings.isTrue(\"true\"));\n+\t\tassertTrue(Strings.isTrue(\"1\"));\n+\t\tassertTrue(Strings.isTrue(\"YeS\"));\n+\t\tassertTrue(Strings.isTrue(\"Y\"));\n+\t\tassertTrue(Strings.isTrue(\"tRuE\"));\n+\t\tassertTrue(Strings.isTrue(\"1\"));\n+\n+\t\ttry\n+\t\t{\n+\t\t\tStrings.isTrue(\"foo\");\n+\t\t\tfail(\"Exception expected\");\n+\t\t}\n+\t\tcatch (StringValueConversionException e)\n+\t\t{\n+\t\t\tassertTrue(true);\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Tests the <code>replaceAll</code> method.\n+\t */\n+\tpublic void testReplaceAll()\n+\t{\n+\t\tassertNull(Strings.replaceAll(null, null, null));\n+\t\tassertNull(Strings.replaceAll(null, \"\", null));\n+\t\tassertNull(Strings.replaceAll(null, null, \"\"));\n+\t\tassertNull(Strings.replaceAll(null, \"\", \"\"));\n+\n+\t\tassertEquals(\"\", Strings.replaceAll(\"\", null, null));\n+\t\tassertEquals(\"\", Strings.replaceAll(\"\", \"\", null));\n+\t\tassertEquals(\"\", Strings.replaceAll(\"\", null, \"\"));\n+\t\tassertEquals(\"\", Strings.replaceAll(\"\", \"\", \"\"));\n+\t\tassertEquals(\"\", Strings.replaceAll(\"\", \"\", \"abc\"));\n+\t\tassertEquals(\"\", Strings.replaceAll(\"\", \"abc\", \"def\"));\n+\t\tassertEquals(\"\", Strings.replaceAll(\"abc\", \"abc\", \"\"));\n+\n+\t\tassertEquals(\"abc\", Strings.replaceAll(\"abc\", \"\", \"\"));\n+\t\tassertEquals(\"abc\", Strings.replaceAll(\"abc\", \"abc\", \"abc\"));\n+\t\tassertEquals(\"def\", Strings.replaceAll(\"abc\", \"abc\", \"def\"));\n+\t\tassertEquals(\"abc\", Strings.replaceAll(\"abc\", \"ABC\", \"\"));\n+\n+\t\tassertEquals(\"abc\", Strings.replaceAll(\"abc\", \"d\", null));\n+\t\tassertEquals(\"ab\", Strings.replaceAll(\"abc\", \"c\", null));\n+\t\tassertEquals(\"bc\", Strings.replaceAll(\"abc\", \"a\", null));\n+\n+\t\tassertEquals(\"aaaa\", Strings.replaceAll(\"aa\", \"a\", \"aa\"));\n+\t}\n+\n+\t/**\n+\t * Tests the <code>split</code> method.\n+\t */\n+\tpublic void testSplit()\n+\t{\n+\t\tassertEquals(new String[0], Strings.split(null, '.'));\n+\t\tassertEquals(new String[0], Strings.split(\"\", '.'));\n+\t\tassertEquals(new String[] { \"\", \"\" }, Strings.split(\".\", '.'));\n+\t\tassertEquals(new String[] { \"a\", \"\" }, Strings.split(\"a.\", '.'));\n+\t\tassertEquals(new String[] { \"a\", \"b\" }, Strings.split(\"a.b\", '.'));\n+\t\tassertEquals(new String[] { \"a\", \"b\", \"c\" }, Strings.split(\"a.b.c\", '.'));\n+\t\tassertEquals(new String[] { \"a\", \"b\", \"c\" }, Strings.split(\"a b c\", ' '));\n+\t\tassertEquals(new String[] { \"abc\" }, Strings.split(\"abc\", ' '));\n+\t}\n+\n+\t/**\n+\t * Asserts that both string arrays are equal.\n+\t * \n+\t * @param expected\n+\t *            the expected value\n+\t * @param actual\n+\t *            the actual value\n+\t */\n+\tprivate void assertEquals(String[] expected, String[] actual)\n+\t{\n+\t\tif (expected == null)\n+\t\t{\n+\t\t\tassertNull(actual);\n+\t\t}\n+\t\tassertEquals(stringValue(expected), stringValue(actual));\n+\t}\n+\n+\t/**\n+\t * Converts an array of strings to a String. {\"a\", \"b\"} becomes: \"{a,b}\"\n+\t * \n+\t * @param arrayOfStrings\n+\t *            the array to convert\n+\t * @return the array as a string.\n+\t */\n+\tprivate String stringValue(String[] arrayOfStrings)\n+\t{\n+\t\tStringBuffer sb = new StringBuffer(\"{\");\n+\t\tString komma = \"\";\n+\t\tfor (int i = 0; i < arrayOfStrings.length; i++)\n+\t\t{\n+\t\t\tsb.append(komma);\n+\t\t\tsb.append(arrayOfStrings[i]);\n+\t\t\tkomma = \",\";\n+\t\t}\n+\t\tsb.append(\"}\");\n+\t\treturn sb.toString();\n+\t}\n }", "filename": "wicket/src/test/wicket/util/string/StringsTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/eb7c860efdddcedf6ea323a903d4a5af9e814a02", "parent": "https://github.com/apache/wicket/commit/02f3c71e3c3c012e6cebd65363409124eb2b647a", "message": "prevent NPE being thrown from invalidateModel, if component not yet assigned to page\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@455216 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_120", "file": [{"additions": 5, "raw_url": "https://github.com/apache/wicket/raw/eb7c860efdddcedf6ea323a903d4a5af9e814a02/wicket/src/java/wicket/Component.java", "blob_url": "https://github.com/apache/wicket/blob/eb7c860efdddcedf6ea323a903d4a5af9e814a02/wicket/src/java/wicket/Component.java", "sha": "71af289fd8cf501f9a0eb435528e42571fbbd604", "changes": 5, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/Component.java?ref=eb7c860efdddcedf6ea323a903d4a5af9e814a02", "patch": "@@ -793,6 +793,11 @@ protected void invalidateModel()\n     {\n         // Find the page where this component lives\n         final Page page = getPage();\n+        \n+        if (page == null)\n+        {\n+            return;\n+        }\n \n         // Make all previous renderings of the page stale\n         page.setStaleRendering(page.getRendering());", "filename": "wicket/src/java/wicket/Component.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/35e9a11b577db1cd427bc893fb4d95f091ead2b1", "parent": "https://github.com/apache/wicket/commit/af9cae20fa58d20fd8e833e0366ad99f4207bb9c", "message": "WICKET-3691 NPE in PersistentPageManager.SessionEntry.writeObject(ObjectOutputStream) when using embedded Tomcat\n\nAdd check for pages == null.\nRename local variable to have more meaningful name (l -> serializedPages).\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@1101019 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_121", "file": [{"additions": 19, "raw_url": "https://github.com/apache/wicket/raw/35e9a11b577db1cd427bc893fb4d95f091ead2b1/wicket-core/src/main/java/org/apache/wicket/page/PersistentPageManager.java", "blob_url": "https://github.com/apache/wicket/blob/35e9a11b577db1cd427bc893fb4d95f091ead2b1/wicket-core/src/main/java/org/apache/wicket/page/PersistentPageManager.java", "sha": "c9fd4731e98007ad423cb7d7783425725c8e1033", "changes": 35, "status": "modified", "deletions": 16, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-core/src/main/java/org/apache/wicket/page/PersistentPageManager.java?ref=35e9a11b577db1cd427bc893fb4d95f091ead2b1", "patch": "@@ -218,26 +218,29 @@ private void writeObject(final ObjectOutputStream s) throws IOException\n \t\t\ts.defaultWriteObject();\n \n \t\t\t// prepare for serialization and store the pages\n-\t\t\tList<Serializable> l = new ArrayList<Serializable>();\n-\t\t\tIPageStore pageStore = getPageStore();\n-\t\t\tfor (IManageablePage p : pages)\n+\t\t\tList<Serializable> serializedPages = new ArrayList<Serializable>();\n+\t\t\tif (pages != null)\n \t\t\t{\n-\t\t\t\tSerializable preparedPage;\n-\t\t\t\tif (pageStore != null)\n-\t\t\t\t{\n-\t\t\t\t\tpreparedPage = pageStore.prepareForSerialization(sessionId, p);\n-\t\t\t\t}\n-\t\t\t\telse\n-\t\t\t\t{\n-\t\t\t\t\tpreparedPage = p;\n-\t\t\t\t}\n-\n-\t\t\t\tif (preparedPage != null)\n+\t\t\t\tIPageStore pageStore = getPageStore();\n+\t\t\t\tfor (IManageablePage p : pages)\n \t\t\t\t{\n-\t\t\t\t\tl.add(preparedPage);\n+\t\t\t\t\tSerializable preparedPage;\n+\t\t\t\t\tif (pageStore != null)\n+\t\t\t\t\t{\n+\t\t\t\t\t\tpreparedPage = pageStore.prepareForSerialization(sessionId, p);\n+\t\t\t\t\t}\n+\t\t\t\t\telse\n+\t\t\t\t\t{\n+\t\t\t\t\t\tpreparedPage = p;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tif (preparedPage != null)\n+\t\t\t\t\t{\n+\t\t\t\t\t\tserializedPages.add(preparedPage);\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n-\t\t\ts.writeObject(l);\n+\t\t\ts.writeObject(serializedPages);\n \t\t}\n \n \t\t/**", "filename": "wicket-core/src/main/java/org/apache/wicket/page/PersistentPageManager.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/12d5bdec280caab45bd4c4f2a8ea97ea56891d6b", "parent": "https://github.com/apache/wicket/commit/d781db38cae15af2a4778923c19e942b2d7c30e3", "message": "WICKET-1155: WebResponse.redirect(url) calls response.encodeRedirect(url) which is formally not supported on JSR-168 and thus can result in a NPE\nSee: http://issues.apache.org/jira/browse/WICKET-1155\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@594257 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_122", "file": [{"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/12d5bdec280caab45bd4c4f2a8ea97ea56891d6b/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/portlet/PortletActionServletResponseWrapper.java", "blob_url": "https://github.com/apache/wicket/blob/12d5bdec280caab45bd4c4f2a8ea97ea56891d6b/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/portlet/PortletActionServletResponseWrapper.java", "sha": "2f69b4ec2466751ac274521225a63b1e93fe07de", "changes": 10, "status": "modified", "deletions": 10, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/portlet/PortletActionServletResponseWrapper.java?ref=12d5bdec280caab45bd4c4f2a8ea97ea56891d6b", "patch": "@@ -52,16 +52,6 @@ public void addIntHeader(String s, int i)\n \t{\n \t}\n \n-\tpublic String encodeRedirectUrl(String s)\n-\t{\n-\t\treturn s;\n-\t}\n-\n-\tpublic String encodeRedirectURL(String s)\n-\t{\n-\t\treturn s;\n-\t}\n-\n \tpublic String encodeUrl(String s)\n \t{\n \t\treturn s;", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/portlet/PortletActionServletResponseWrapper.java"}, {"additions": 12, "raw_url": "https://github.com/apache/wicket/raw/12d5bdec280caab45bd4c4f2a8ea97ea56891d6b/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/portlet/PortletServletResponseWrapper.java", "blob_url": "https://github.com/apache/wicket/blob/12d5bdec280caab45bd4c4f2a8ea97ea56891d6b/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/portlet/PortletServletResponseWrapper.java", "sha": "aeea497fd5c44ffa86ff7ec1269799f199c8bacb", "changes": 12, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/portlet/PortletServletResponseWrapper.java?ref=12d5bdec280caab45bd4c4f2a8ea97ea56891d6b", "patch": "@@ -68,4 +68,16 @@ public void setStatus(int statusCode)\n \t{\n \t\tresponseState.setStatusCode(statusCode);\n \t}\n+\n+\tpublic String encodeRedirectUrl(String url)\n+\t{\n+\t\tString s = super.encodeRedirectUrl(url);\n+\t\treturn s != null ? s : url;\n+\t}\n+\n+\tpublic String encodeRedirectURL(String url)\n+\t{\n+\t\tString s = super.encodeRedirectURL(url);\n+\t\treturn s != null ? s : url;\n+\t}\n }", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/protocol/http/portlet/PortletServletResponseWrapper.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/3e8dd250edd9f44ef75fdcd61003707925a4e08a", "parent": "https://github.com/apache/wicket/commit/77abe45512f0b3f51f1412d94fc8002131475890", "message": "Added JUnit 3.8.2 as a dependency, as Maven's Starfire plugin V2.3 throws a NPE if it or TestNG's not present\n\ngit-svn-id: https://svn.apache.org/repos/asf/wicket/trunk@573288 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_123", "file": [{"additions": 7, "raw_url": "https://github.com/apache/wicket/raw/3e8dd250edd9f44ef75fdcd61003707925a4e08a/archetypes/quickstart/src/main/resources/archetype-resources/pom.xml", "blob_url": "https://github.com/apache/wicket/blob/3e8dd250edd9f44ef75fdcd61003707925a4e08a/archetypes/quickstart/src/main/resources/archetype-resources/pom.xml", "sha": "e20b910c14c1fba71c982778bfb5a69c59376dbf", "changes": 7, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/archetypes/quickstart/src/main/resources/archetype-resources/pom.xml?ref=3e8dd250edd9f44ef75fdcd61003707925a4e08a", "patch": "@@ -55,6 +55,13 @@\n \t\t\t<version>1.2.14</version>\n \t\t</dependency>\n \n+\t\t<!--  JUNIT DEPENDENCY FOR TESTING -->\n+\t\t <dependency>\n+\t\t\t\t <groupId>junit</groupId>\n+\t\t\t\t <artifactId>junit</artifactId>\n+\t\t\t\t <version>3.8.2</version>\n+\t\t\t\t <scope>testing</scope>\n+\t\t </dependency>\n \n \t\t<!--  JETTY DEPENDENCIES FOR TESTING  -->\n ", "filename": "archetypes/quickstart/src/main/resources/archetype-resources/pom.xml"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/7ebae3095e7ee9ad914a6d96f634e81b07e6020a", "parent": "https://github.com/apache/wicket/commit/5db310ad78875869177502a2d15581de227dc0cd", "message": "Fix for NPE in ListView on AJAX calls.  The problem was with IFeedback implementing components, which were special cased in onBeforeRenderChildren() based on the assumption that Page had already called beforeRender() on them.  This is not the case with an AJAX rendering.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@537919 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_124", "file": [{"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/7ebae3095e7ee9ad914a6d96f634e81b07e6020a/jdk-1.4/wicket/src/main/java/org/apache/wicket/MarkupContainer.java", "blob_url": "https://github.com/apache/wicket/blob/7ebae3095e7ee9ad914a6d96f634e81b07e6020a/jdk-1.4/wicket/src/main/java/org/apache/wicket/MarkupContainer.java", "sha": "27560128b0a5a3b2c2f3f56b591d71d58e67afb5", "changes": 9, "status": "modified", "deletions": 7, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/MarkupContainer.java?ref=7ebae3095e7ee9ad914a6d96f634e81b07e6020a", "patch": "@@ -23,7 +23,6 @@\n import java.util.Iterator;\n import java.util.List;\n \n-import org.apache.wicket.feedback.IFeedback;\n import org.apache.wicket.markup.ComponentTag;\n import org.apache.wicket.markup.MarkupElement;\n import org.apache.wicket.markup.MarkupException;\n@@ -1394,12 +1393,8 @@ void onBeforeRenderChildren()\n \t\t\t\t// Get next child\n \t\t\t\tfinal Component child = children_get(i);\n \n-\t\t\t\t// Ignore feedback as that was done in Page\n-\t\t\t\tif (!(child instanceof IFeedback))\n-\t\t\t\t{\n-\t\t\t\t\t// Call begin request on the child\n-\t\t\t\t\tchild.beforeRender();\n-\t\t\t\t}\n+\t\t\t\t// Call begin request on the child\n+\t\t\t\tchild.beforeRender();\n \t\t\t}\n \t\t}\n \t\tcatch (RuntimeException ex)", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/MarkupContainer.java"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/7ebae3095e7ee9ad914a6d96f634e81b07e6020a/jdk-1.4/wicket/src/main/java/org/apache/wicket/Page.java", "blob_url": "https://github.com/apache/wicket/blob/7ebae3095e7ee9ad914a6d96f634e81b07e6020a/jdk-1.4/wicket/src/main/java/org/apache/wicket/Page.java", "sha": "b4fbb7cadfcc397c6ab7e3933862e5cee4cd8779", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/jdk-1.4/wicket/src/main/java/org/apache/wicket/Page.java?ref=7ebae3095e7ee9ad914a6d96f634e81b07e6020a", "patch": "@@ -814,7 +814,6 @@ public final void renderPage()\n \t\t\tpublic Object component(Component component)\n \t\t\t{\n \t\t\t\t((IFeedback)component).updateFeedback();\n-\t\t\t\tcomponent.beforeRender();\n \t\t\t\treturn IVisitor.CONTINUE_TRAVERSAL;\n \t\t\t}\n \t\t});", "filename": "jdk-1.4/wicket/src/main/java/org/apache/wicket/Page.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/ac9c28c81e88b05a2bc755a3e1b995322852b3cb", "parent": "https://github.com/apache/wicket/commit/8dc2294ad12b857856e8569f643ca50fc10a60ed", "message": "popup settings synced the window name and page map name and doesn't throw a NPE anymore when no page map was set\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/WICKET_1_2@461814 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_125", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/ac9c28c81e88b05a2bc755a3e1b995322852b3cb/wicket/src/java/wicket/markup/html/link/BookmarkablePageLink.java", "blob_url": "https://github.com/apache/wicket/blob/ac9c28c81e88b05a2bc755a3e1b995322852b3cb/wicket/src/java/wicket/markup/html/link/BookmarkablePageLink.java", "sha": "b06f96cd4f83f7dfb94c9c68ba7bf62a082b9ee2", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/link/BookmarkablePageLink.java?ref=ac9c28c81e88b05a2bc755a3e1b995322852b3cb", "patch": "@@ -202,7 +202,7 @@ protected CharSequence getURL()\n \n \t\tif (getPopupSettings() != null)\n \t\t{\n-\t\t\treturn urlFor(getPopupSettings().getPageMap(), pageClass, parameters);\n+\t\t\treturn urlFor(getPopupSettings().getPageMap(this), pageClass, parameters);\n \t\t}\n \t\telse\n \t\t{", "filename": "wicket/src/java/wicket/markup/html/link/BookmarkablePageLink.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/ac9c28c81e88b05a2bc755a3e1b995322852b3cb/wicket/src/java/wicket/markup/html/link/Link.java", "blob_url": "https://github.com/apache/wicket/blob/ac9c28c81e88b05a2bc755a3e1b995322852b3cb/wicket/src/java/wicket/markup/html/link/Link.java", "sha": "d7e9faa58bd94efc1e9186bce9311f6ef3d17a6a", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/link/Link.java?ref=ac9c28c81e88b05a2bc755a3e1b995322852b3cb", "patch": "@@ -248,7 +248,7 @@ public final void onLinkClicked()\n \t\tif (popupSettings != null)\n \t\t{\n \t\t\tRequestCycle.get().getRequest().getRequestParameters().setPageMapName(\n-\t\t\t\t\tpopupSettings.getPageMap().getName());\n+\t\t\t\t\tpopupSettings.getPageMap(this).getName());\n \t\t}\n \t\t// Invoke subclass handler\n \t\tonClick();", "filename": "wicket/src/java/wicket/markup/html/link/Link.java"}, {"additions": 61, "raw_url": "https://github.com/apache/wicket/raw/ac9c28c81e88b05a2bc755a3e1b995322852b3cb/wicket/src/java/wicket/markup/html/link/PopupSettings.java", "blob_url": "https://github.com/apache/wicket/blob/ac9c28c81e88b05a2bc755a3e1b995322852b3cb/wicket/src/java/wicket/markup/html/link/PopupSettings.java", "sha": "85af2b7c62fde97626763c07083fedede4fc03fa", "changes": 67, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/link/PopupSettings.java?ref=ac9c28c81e88b05a2bc755a3e1b995322852b3cb", "patch": "@@ -1,6 +1,7 @@\n /*\n- * $Id$ $Revision:\n- * 1.7 $ $Date$\n+ * $Id: PopupSettings.java 4824 2006-03-08 20:04:37 +0000 (Wed, 08 Mar 2006)\n+ * eelco12 $ $Revision$ $Date: 2006-03-08 20:04:37 +0000 (Wed, 08 Mar\n+ * 2006) $\n  * \n  * ==============================================================================\n  * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n@@ -19,8 +20,12 @@\n \n import java.io.Serializable;\n \n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+\n+import wicket.Component;\n+import wicket.Page;\n import wicket.PageMap;\n-import wicket.RequestCycle;\n \n /**\n  * A popup specification can be used as a property of the {@link Link}classes\n@@ -40,6 +45,9 @@\n  */\n public class PopupSettings implements Serializable\n {\n+\t/** The log. */\n+\tprivate static final Log log = LogFactory.getLog(PopupSettings.class);\n+\n \tprivate static final long serialVersionUID = 1L;\n \n \t/** Flag to include location bar */\n@@ -135,6 +143,7 @@ public PopupSettings(final int displayFlags)\n \tpublic PopupSettings(PageMap pagemap)\n \t{\n \t\tthis.pageMapName = pagemap.getName();\n+\t\tthis.windowName = pageMapName;\n \t}\n \n \t/**\n@@ -154,6 +163,7 @@ public PopupSettings(PageMap pagemap, final int displayFlags)\n \t{\n \t\tthis.displayFlags = displayFlags;\n \t\tthis.pageMapName = pagemap.getName();\n+\t\tthis.windowName = pageMapName;\n \t}\n \n \t/**\n@@ -288,7 +298,17 @@ public PopupSettings setWidth(int popupWidth)\n \t */\n \tpublic PopupSettings setWindowName(String popupWindowName)\n \t{\n-\t\tthis.windowName = popupWindowName;\n+\t\tif (popupWindowName != null)\n+\t\t{\n+\t\t\tthis.windowName = popupWindowName;\n+\t\t\tif (pageMapName != null && (!pageMapName.equals(popupWindowName)))\n+\t\t\t{\n+\t\t\t\tlog.warn(\"the page map and window name should be the same. The page map was \"\n+\t\t\t\t\t\t+ pageMapName + \", and the requested window name is \" + popupWindowName\n+\t\t\t\t\t\t+ \"; changing the page map to \" + popupWindowName);\n+\t\t\t}\n+\t\t\tthis.pageMapName = popupWindowName;\n+\t\t}\n \t\treturn this;\n \t}\n \n@@ -306,6 +326,8 @@ private String flagToString(final int flag)\n \t * Gets the pagemap where the popup page must be created in.\n \t * \n \t * @return The pagemap where the popup page must be created in\n+\t * @deprecated will be removed in Wicket 2.0; use\n+\t *             {@link #getPageMap(Component)} instead\n \t */\n \tpublic PageMap getPageMap()\n \t{\n@@ -315,8 +337,41 @@ public PageMap getPageMap()\n \t\t}\n \t\telse\n \t\t{\n-\t\t\t// fallback on the current page map\n-\t\t\treturn RequestCycle.get().getRequest().getPage().getPageMap();\n+\t\t\tthrow new UnsupportedOperationException(\n+\t\t\t\t\t\"this method can only work when a page map is set. Either call\"\n+\t\t\t\t\t\t\t+ \" getPageMap(Component) or set the page map\");\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Gets the pagemap where the popup page must be created in.\n+\t * \n+\t * @param callee\n+\t *            Calling component\n+\t * @return The pagemap where the popup page must be created in\n+\t */\n+\tpublic PageMap getPageMap(Component callee)\n+\t{\n+\t\tif (pageMapName != null)\n+\t\t{\n+\t\t\treturn PageMap.forName(pageMapName);\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tif (callee == null)\n+\t\t\t{\n+\t\t\t\tthrow new IllegalArgumentException(\n+\t\t\t\t\t\t\"when the page map is not set, argument callee may not be null\");\n+\t\t\t}\n+\t\t\tPage page = callee.getPage();\n+\t\t\tif (page == null)\n+\t\t\t{\n+\t\t\t\tthrow new IllegalStateException(callee\n+\t\t\t\t\t\t+ \" is not yet set on a page; if you want to use this method \"\n+\t\t\t\t\t\t+ \"without a page map being set, argument callee must be not null \"\n+\t\t\t\t\t\t+ \"and added to a page\");\n+\t\t\t}\n+\t\t\treturn page.getPageMap();\n \t\t}\n \t}\n }", "filename": "wicket/src/java/wicket/markup/html/link/PopupSettings.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/20316d5f06ca46eb047e1471baf06d29c6ccd309", "parent": "https://github.com/apache/wicket/commit/07b20b4ee2e6e1fe4264b5cdf7eeb879cfed8e44", "message": "popup settings synced the window name and page map name and doesn't throw a NPE anymore when no page map was set\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@461810 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_126", "file": [{"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/20316d5f06ca46eb047e1471baf06d29c6ccd309/wicket/src/java/wicket/markup/html/link/BookmarkablePageLink.java", "blob_url": "https://github.com/apache/wicket/blob/20316d5f06ca46eb047e1471baf06d29c6ccd309/wicket/src/java/wicket/markup/html/link/BookmarkablePageLink.java", "sha": "8e1d959678a4bcceb64780795ee201f581ccfaf8", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/link/BookmarkablePageLink.java?ref=20316d5f06ca46eb047e1471baf06d29c6ccd309", "patch": "@@ -220,7 +220,7 @@ protected CharSequence getURL()\n \n \t\tif (getPopupSettings() != null)\n \t\t{\n-\t\t\treturn urlFor(getPopupSettings().getPageMap(), pageClass, parameters);\n+\t\t\treturn urlFor(getPopupSettings().getPageMap(this), pageClass, parameters);\n \t\t}\n \t\telse\n \t\t{", "filename": "wicket/src/java/wicket/markup/html/link/BookmarkablePageLink.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/20316d5f06ca46eb047e1471baf06d29c6ccd309/wicket/src/java/wicket/markup/html/link/Link.java", "blob_url": "https://github.com/apache/wicket/blob/20316d5f06ca46eb047e1471baf06d29c6ccd309/wicket/src/java/wicket/markup/html/link/Link.java", "sha": "2b15662283c34c8762be874408457ce8ead89ea3", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/link/Link.java?ref=20316d5f06ca46eb047e1471baf06d29c6ccd309", "patch": "@@ -260,7 +260,7 @@ public final void onLinkClicked()\n \t\tif (popupSettings != null)\n \t\t{\n \t\t\tRequestCycle.get().getRequest().getRequestParameters().setPageMapName(\n-\t\t\t\t\tpopupSettings.getPageMap().getName());\n+\t\t\t\t\tpopupSettings.getPageMap(this).getName());\n \t\t}\n \t\t// Invoke subclass handler\n \t\tonClick();", "filename": "wicket/src/java/wicket/markup/html/link/Link.java"}, {"additions": 30, "raw_url": "https://github.com/apache/wicket/raw/20316d5f06ca46eb047e1471baf06d29c6ccd309/wicket/src/java/wicket/markup/html/link/PopupSettings.java", "blob_url": "https://github.com/apache/wicket/blob/20316d5f06ca46eb047e1471baf06d29c6ccd309/wicket/src/java/wicket/markup/html/link/PopupSettings.java", "sha": "0b25b1de810ba3ede09e6f456384da2e1afc1d4d", "changes": 36, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/markup/html/link/PopupSettings.java?ref=20316d5f06ca46eb047e1471baf06d29c6ccd309", "patch": "@@ -20,8 +20,11 @@\n \n import java.io.Serializable;\n \n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+\n+import wicket.Component;\n import wicket.PageMap;\n-import wicket.RequestCycle;\n \n /**\n  * A popup specification can be used as a property of the {@link Link}classes\n@@ -41,6 +44,9 @@\n  */\n public class PopupSettings implements Serializable\n {\n+\t/** The log. */\n+\tprivate static final Log log = LogFactory.getLog(PopupSettings.class);\n+\n \tprivate static final long serialVersionUID = 1L;\n \n \t/** Flag to include location bar */\n@@ -136,6 +142,7 @@ public PopupSettings(final int displayFlags)\n \tpublic PopupSettings(PageMap pagemap)\n \t{\n \t\tthis.pageMapName = pagemap.getName();\n+\t\tthis.windowName = pageMapName;\n \t}\n \n \t/**\n@@ -155,6 +162,7 @@ public PopupSettings(PageMap pagemap, final int displayFlags)\n \t{\n \t\tthis.displayFlags = displayFlags;\n \t\tthis.pageMapName = pagemap.getName();\n+\t\tthis.windowName = pageMapName;\n \t}\n \n \t/**\n@@ -281,15 +289,30 @@ public PopupSettings setWidth(int popupWidth)\n \t * anything you want, although you should use alphanumeric characters only\n \t * (no spaces or punctuation). If you have a window already open and call\n \t * window.open a second time using the same windowName, the first window\n-\t * will be reused rather than opening a second window\n+\t * will be reused rather than opening a second window.\n+\t * <p>\n+\t * The window name and the name of the page map should have the same value.\n+\t * If it is different, the page map will be set to the value of the\n+\t * popupWindowName argument.\n+\t * </p>\n \t * \n \t * @param popupWindowName\n \t *            window name.\n \t * @return This\n \t */\n \tpublic PopupSettings setWindowName(String popupWindowName)\n \t{\n-\t\tthis.windowName = popupWindowName;\n+\t\tif (popupWindowName != null)\n+\t\t{\n+\t\t\tthis.windowName = popupWindowName;\n+\t\t\tif (pageMapName != null && (!pageMapName.equals(popupWindowName)))\n+\t\t\t{\n+\t\t\t\tlog.warn(\"the page map and window name should be the same. The page map was \"\n+\t\t\t\t\t\t+ pageMapName + \", and the requested window name is \" + popupWindowName\n+\t\t\t\t\t\t+ \"; changing the page map to \" + popupWindowName);\n+\t\t\t}\n+\t\t\tthis.pageMapName = popupWindowName;\n+\t\t}\n \t\treturn this;\n \t}\n \n@@ -306,18 +329,19 @@ private String flagToString(final int flag)\n \t/**\n \t * Gets the pagemap where the popup page must be created in.\n \t * \n+\t * @param callee\n+\t *            Calling component\n \t * @return The pagemap where the popup page must be created in\n \t */\n-\tpublic PageMap getPageMap()\n+\tpublic PageMap getPageMap(Component callee)\n \t{\n \t\tif (pageMapName != null)\n \t\t{\n \t\t\treturn PageMap.forName(pageMapName);\n \t\t}\n \t\telse\n \t\t{\n-\t\t\t// fallback on the current page map\n-\t\t\treturn RequestCycle.get().getRequest().getPage().getPageMap();\n+\t\t\treturn callee.getPage().getPageMap();\n \t\t}\n \t}\n }", "filename": "wicket/src/java/wicket/markup/html/link/PopupSettings.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/e8d90edfe71d6386b8fd21f77cb2d38727dd52a5", "parent": "https://github.com/apache/wicket/commit/d9eba07e3d0779576b1d420cdd55c0231b287623", "message": "Fixed NPE when removing items from tree, made sure when root node is not visible, this would still work when the tree has to be rebuilt\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/WICKET_1_2@461674 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_127", "file": [{"additions": 5, "raw_url": "https://github.com/apache/wicket/raw/e8d90edfe71d6386b8fd21f77cb2d38727dd52a5/wicket-extensions/src/java/wicket/extensions/markup/html/tree/AbstractTree.java", "blob_url": "https://github.com/apache/wicket/blob/e8d90edfe71d6386b8fd21f77cb2d38727dd52a5/wicket-extensions/src/java/wicket/extensions/markup/html/tree/AbstractTree.java", "sha": "41e1748789858256fbd4c937f5630526d302117a", "changes": 6, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket-extensions/src/java/wicket/extensions/markup/html/tree/AbstractTree.java?ref=e8d90edfe71d6386b8fd21f77cb2d38727dd52a5", "patch": "@@ -992,7 +992,7 @@ private final void invalidateNode(TreeNode node, boolean forceRebuld)\n \t\t\t// get item for this node\r\n \t\t\tTreeItem item = (TreeItem)nodeToItemMap.get(node);\r\n \t\r\n-\t\t\tif (forceRebuld)\r\n+\t\t\tif (forceRebuld && item != null)\r\n \t\t\t{\r\n \t\t\t\t// recreate the item\r\n \t\t\t\tint level = item.getLevel();\r\n@@ -1008,6 +1008,10 @@ private final void invalidateNode(TreeNode node, boolean forceRebuld)\n \t\t\t\titem.remove();\r\n \t\r\n \t\t\t\titem = newTreeItem(node, level, id);\r\n+\t\t\t\tif(level==-1) \r\n+\t\t\t\t{\r\n+\t\t\t\t\titem.setVisible(false);\r\n+\t\t\t\t}\r\n \t\t\t\titemContainer.add(item);\r\n \t\t\t\t\r\n \t\t\t\titem.setChildren(children);\r", "filename": "wicket-extensions/src/java/wicket/extensions/markup/html/tree/AbstractTree.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/422026702cb1821018547b394baa07c018b139bb", "parent": "https://github.com/apache/wicket/commit/f446858ccfdc681d51290341fb2a4c3cc906718f", "message": "Added illegal state exception when attempting to interpolate a non-existent variable.  This is much better than the existing NPE with no explanation of what variable was missing.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/WICKET_1_2@460938 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_128", "file": [{"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/422026702cb1821018547b394baa07c018b139bb/wicket/src/java/wicket/util/string/interpolator/MapVariableInterpolator.java", "blob_url": "https://github.com/apache/wicket/blob/422026702cb1821018547b394baa07c018b139bb/wicket/src/java/wicket/util/string/interpolator/MapVariableInterpolator.java", "sha": "441ecc89815d027078d38273de1eff81bb83ef8f", "changes": 7, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/string/interpolator/MapVariableInterpolator.java?ref=422026702cb1821018547b394baa07c018b139bb", "patch": "@@ -63,7 +63,12 @@ public final void setVariables(final Map variables)\n \t */\n \tprotected final String getValue(final String variableName)\n \t{\n-\t\treturn variables.get(variableName).toString();\n+\t\tfinal Object value = variables.get(variableName);\n+\t\tif (value != null)\n+\t\t{\n+\t\t\treturn value.toString();\n+\t\t}\n+\t\tthrow new IllegalStateException(\"Interpolated variable '\" + variableName + \"' not found.\");\n \t}\n \n \t/**", "filename": "wicket/src/java/wicket/util/string/interpolator/MapVariableInterpolator.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7", "parent": "https://github.com/apache/wicket/commit/7e2b92ff6cdc839832d514c3a41e716051e558cf", "message": "avoid NPE, lazy create SessionStore and move creation of request cycle which is now required to create page to \na central place (MockWebApplication)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@460207 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_129", "file": [{"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7/wicket/src/test/wicket/WicketTestCase.java", "blob_url": "https://github.com/apache/wicket/blob/44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7/wicket/src/test/wicket/WicketTestCase.java", "sha": "da879462a94e3827b933781d8333ea47a765c242", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/WicketTestCase.java?ref=44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7", "patch": "@@ -49,7 +49,6 @@ public WicketTestCase(String name)\n \tprotected void setUp() throws Exception\n \t{\n \t\tapplication = new MockWebApplication(null);\n-\t\tapplication.createRequestCycle();\n \t}\n \n \t/**", "filename": "wicket/src/test/wicket/WicketTestCase.java"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7/wicket/src/test/wicket/model/StringResourceModelTest.java", "blob_url": "https://github.com/apache/wicket/blob/44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7/wicket/src/test/wicket/model/StringResourceModelTest.java", "sha": "49fe9e069671e555f1b7b21e6855cdacf70abf81", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/model/StringResourceModelTest.java?ref=44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7", "patch": "@@ -62,7 +62,6 @@ protected void setUp() throws Exception\n \t\tapplication = new MockWebApplication(null);\n \t\tapplication.getResourceSettings().addStringResourceLoader(\n \t\t\t\tnew BundleStringResourceLoader(\"wicket.model.StringResourceModelTest\"));\n-\t\tapplication.createRequestCycle();\n \t\tpage = new MockPage();\n \t\tws = new WeatherStation();\n \t\twsModel = new Model(ws);", "filename": "wicket/src/test/wicket/model/StringResourceModelTest.java"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7/wicket/src/test/wicket/resource/StringResourceLoaderTestBase.java", "blob_url": "https://github.com/apache/wicket/blob/44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7/wicket/src/test/wicket/resource/StringResourceLoaderTestBase.java", "sha": "9968accc197e8ca00bd93e2fee2b8031de246822", "changes": 6, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/resource/StringResourceLoaderTestBase.java?ref=44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7", "patch": "@@ -22,11 +22,7 @@\n \n import junit.framework.Assert;\n import junit.framework.TestCase;\n-import wicket.Application;\n import wicket.Component;\n-import wicket.IRequestCycleFactory;\n-import wicket.RequestCycle;\n-import wicket.Session;\n import wicket.resource.loader.IStringResourceLoader;\n \n /**\n@@ -65,12 +61,10 @@ protected void setUp() throws Exception\n \t{\n \t\tsuper.setUp();\n \t\tthis.application = new DummyApplication();\n-\t\tthis.application.createRequestCycle();\n \t\tthis.component = new DummyComponent(\"test\", this.application);\n \t\tDummyPage page = new DummyPage();\n \t\tpage.add(this.component);\n \t\tthis.loader = createLoader();\n-\n \t}\n \n \t/**", "filename": "wicket/src/test/wicket/resource/StringResourceLoaderTestBase.java"}, {"additions": 0, "raw_url": "https://github.com/apache/wicket/raw/44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7/wicket/src/test/wicket/util/tester/WicketTesterTest.java", "blob_url": "https://github.com/apache/wicket/blob/44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7/wicket/src/test/wicket/util/tester/WicketTesterTest.java", "sha": "a8780780fb3614bf1ca121561e79a51d5b4f74e3", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/util/tester/WicketTesterTest.java?ref=44f3c5f7217f2c83e1eb4c80f3680964fe1c03d7", "patch": "@@ -138,7 +138,6 @@ public Page getTestPage()\n \tpublic void testPageConstructor() throws Exception\n \t{\n \t\tMyMockApplication tester = new MyMockApplication();\n-\t\ttester.createRequestCycle();\n \t\tBook mockBook = new Book(\"xxId\", \"xxName\");\n \t\tPage page = new ViewBook(mockBook);\n \t\ttester.startPage(page);", "filename": "wicket/src/test/wicket/util/tester/WicketTesterTest.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/7e2b92ff6cdc839832d514c3a41e716051e558cf", "parent": "https://github.com/apache/wicket/commit/891c5691ed4b147de544af8da5100bd0fc66b674", "message": "avoid NPE, lazy create SessionStore and move creation of request cycle which is now required to create page to \na central place (MockWebApplication)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@460206 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_130", "file": [{"additions": 26, "raw_url": "https://github.com/apache/wicket/raw/7e2b92ff6cdc839832d514c3a41e716051e558cf/wicket/src/java/wicket/Session.java", "blob_url": "https://github.com/apache/wicket/blob/7e2b92ff6cdc839832d514c3a41e716051e558cf/wicket/src/java/wicket/Session.java", "sha": "aac6b76ca0a091f18307df09080dd1e614538bf1", "changes": 31, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/Session.java?ref=7e2b92ff6cdc839832d514c3a41e716051e558cf", "patch": "@@ -795,15 +795,25 @@ protected final void dirty()\n \t */\n \tprotected final Object getAttribute(final String name)\n \t{\n-\t\treturn getSessionStore().getAttribute(RequestCycle.get().getRequest(), name);\n+\t\tRequestCycle cycle = RequestCycle.get();\n+\t\tif (cycle != null)\n+\t\t{\n+\t\t\treturn getSessionStore().getAttribute(cycle.getRequest(), name);\n+\t\t}\n+\t\treturn null;\n \t}\n \n \t/**\n \t * @return List of attributes for this session\n \t */\n \tprotected final List getAttributeNames()\n \t{\n-\t\treturn getSessionStore().getAttributeNames(RequestCycle.get().getRequest());\n+\t\tRequestCycle cycle = RequestCycle.get();\n+\t\tif (cycle != null)\n+\t\t{\n+\t\t\treturn getSessionStore().getAttributeNames(cycle.getRequest());\n+\t\t}\n+\t\treturn null;\n \t}\n \n \t/**\n@@ -833,7 +843,11 @@ protected final ISessionStore getSessionStore()\n \t */\n \tprotected final void removeAttribute(String name)\n \t{\n-\t\tgetSessionStore().removeAttribute(RequestCycle.get().getRequest(), name);\n+\t\tRequestCycle cycle = RequestCycle.get();\n+\t\tif (cycle != null)\n+\t\t{\n+\t\t\tgetSessionStore().removeAttribute(cycle.getRequest(), name);\n+\t\t}\n \t}\n \n \t/**\n@@ -846,8 +860,15 @@ protected final void removeAttribute(String name)\n \t */\n \tprotected final void setAttribute(String name, Object value)\n \t{\n-\t\t// Set the actual attribute\n-\t\tgetSessionStore().setAttribute(RequestCycle.get().getRequest(), name, value);\n+\t\tRequestCycle cycle = RequestCycle.get();\n+\t\tif (cycle != null)\n+\t\t{\n+\t\t\t// Set the actual attribute\n+\t\t\tgetSessionStore().setAttribute(cycle.getRequest(), name, value);\n+\t\t\treturn;\n+\t\t}\n+\t\t\n+\t\tthrow new WicketRuntimeException(\"Can not set the attribute. No RequestCycle available\");\n \t}\n \n \t/**", "filename": "wicket/src/java/wicket/Session.java"}, {"additions": 2, "raw_url": "https://github.com/apache/wicket/raw/7e2b92ff6cdc839832d514c3a41e716051e558cf/wicket/src/java/wicket/protocol/http/MockWebApplication.java", "blob_url": "https://github.com/apache/wicket/blob/7e2b92ff6cdc839832d514c3a41e716051e558cf/wicket/src/java/wicket/protocol/http/MockWebApplication.java", "sha": "97d36fbd91a50c7c1af0fbd2bf6465bd4ed9ca9a", "changes": 2, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/protocol/http/MockWebApplication.java?ref=7e2b92ff6cdc839832d514c3a41e716051e558cf", "patch": "@@ -169,6 +169,8 @@ public String getServletName()\n \n \t\tgetRequestCycleSettings().setRenderStrategy(IRequestCycleSettings.ONE_PASS_RENDER);\n \t\tgetResourceSettings().setResourceFinder(new WebApplicationPath(context));\n+\t\t\n+\t\tcreateRequestCycle();\n \t}\n \n \t/**", "filename": "wicket/src/java/wicket/protocol/http/MockWebApplication.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/876355f5152d28fe4c5b67eeb91e5f6de2471a68", "parent": "https://github.com/apache/wicket/commit/fd99af0d57e70329c24797a71b2e1cbba1c7e00f", "message": "Fixed converters once and for all. Null check results so that e.g., empty strings for numbers (e.g.) now return null instead of throwing a NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@456811 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_131", "file": [{"additions": 8, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/AbstractNumberConverter.java", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/AbstractNumberConverter.java", "sha": "d05256c05953981a68e77b630d041703a36ab4cc", "changes": 8, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/convert/converters/AbstractNumberConverter.java?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -53,16 +53,24 @@ protected Number parse(final Object value, final double min, final double max, L\n \t{\n \t\tfinal NumberFormat numberFormat = getNumberFormat(locale);\n \t\tfinal Number number = (Number)parse(numberFormat, value);\n+\n+\t\tif (number == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n \t\tif (number.doubleValue() < min)\n \t\t{\n \t\t\tthrow newConversionException(\"Value cannot be less than \" + min, value,locale).setFormat(\n \t\t\t\t\tnumberFormat);\n \t\t}\n+\n \t\tif (number.doubleValue() > max)\n \t\t{\n \t\t\tthrow newConversionException(\"Value cannot be greater than \" + max, value,locale).setFormat(\n \t\t\t\t\tnumberFormat);\n \t\t}\n+\n \t\treturn number;\n \t}\n }\n\\ No newline at end of file", "filename": "wicket/src/java/wicket/util/convert/converters/AbstractNumberConverter.java"}, {"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/ByteConverter.java", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/ByteConverter.java", "sha": "6fae117eef378f2b00868da14b0cbe16e6ecc029", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/convert/converters/ByteConverter.java?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -42,6 +42,12 @@ public Object convert(final Object value, Locale locale)\n     {\n         final Number number = value instanceof Number ? (Number)value : parse(value,\n                 Byte.MIN_VALUE, Byte.MAX_VALUE,locale);\n+\n+        if (number == null)\n+        {\n+        \treturn null;\n+        }\n+\n         return new Byte(number.byteValue());\n     }\n ", "filename": "wicket/src/java/wicket/util/convert/converters/ByteConverter.java"}, {"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/CharacterConverter.java", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/CharacterConverter.java", "sha": "e46702ad057a220e276e5b1042f94a70bf8f47d8", "changes": 7, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/convert/converters/CharacterConverter.java?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -40,7 +40,12 @@\n \tpublic Object convert(final Object value, Locale locale)\n \t{\n \t\tfinal String stringValue = value.toString();\n-\t\tif (stringValue.length() == 1)\n+\t\tint length = stringValue.length();\n+\t\tif (length == 0)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\t\telse if (length == 1)\n \t\t{\n \t\t\treturn new Character(value.toString().charAt(0));\n \t\t}", "filename": "wicket/src/java/wicket/util/convert/converters/CharacterConverter.java"}, {"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/DoubleConverter.java", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/DoubleConverter.java", "sha": "38acd3d43cd86ee4e452c8a5265e706bf99b42df", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/convert/converters/DoubleConverter.java?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -42,6 +42,12 @@ public Object convert(final Object value, Locale locale)\n         final Number number = value instanceof Number ? (Number)value : parse(value,\n                 Double.MAX_VALUE*-1, Double.MAX_VALUE,locale);\n         //Double.MIN is the smallest nonzero positive number, not the largest negative number\n+\n+        if (number == null)\n+        {\n+        \treturn null;\n+        }\n+\n         return new Double(number.doubleValue());\n \t}\n ", "filename": "wicket/src/java/wicket/util/convert/converters/DoubleConverter.java"}, {"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/FloatConverter.java", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/FloatConverter.java", "sha": "f19d55a2ac98428ef6b523e012f787ff9931bc66", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/convert/converters/FloatConverter.java?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -41,6 +41,12 @@ public Object convert(final Object value, Locale locale)\n \t{\n \t\tfinal Number number = value instanceof Number ? (Number)value : parse(value,\n \t\t\t\tFloat.MIN_VALUE, Float.MAX_VALUE,locale);\n+\n+        if (number == null)\n+        {\n+        \treturn null;\n+        }\n+\n \t\treturn new Float(number.floatValue());\n \t}\n ", "filename": "wicket/src/java/wicket/util/convert/converters/FloatConverter.java"}, {"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/IntegerConverter.java", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/IntegerConverter.java", "sha": "68c0e23eb59dd64507870bd756da8dad788bef18", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/convert/converters/IntegerConverter.java?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -41,6 +41,12 @@ public Object convert(final Object value, Locale locale)\n \t{\n \t\tfinal Number number = value instanceof Number ? (Number)value : parse(value,\n \t\t\t\tInteger.MIN_VALUE, Integer.MAX_VALUE,locale);\n+\n+        if (number == null)\n+        {\n+        \treturn null;\n+        }\n+\n \t\treturn new Integer(number.intValue());\n \t}\n ", "filename": "wicket/src/java/wicket/util/convert/converters/IntegerConverter.java"}, {"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/LongConverter.java", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/LongConverter.java", "sha": "fcda0bf53bdee3bee7673201551beb5ff8e3d209", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/convert/converters/LongConverter.java?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -41,6 +41,12 @@ public Object convert(final Object value, Locale locale)\n \t{\n \t\tfinal Number number = value instanceof Number ? (Number)value : parse(value,\n \t\t\t\tLong.MIN_VALUE, Long.MAX_VALUE,locale);\n+\n+        if (number == null)\n+        {\n+        \treturn null;\n+        }\n+\n \t\treturn new Long(number.longValue());\n \t}\n ", "filename": "wicket/src/java/wicket/util/convert/converters/LongConverter.java"}, {"additions": 6, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/ShortConverter.java", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/java/wicket/util/convert/converters/ShortConverter.java", "sha": "7d0dcff42c2ed11fb667ef4c0c784eb8e1caa80b", "changes": 6, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/util/convert/converters/ShortConverter.java?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -41,6 +41,12 @@ public Object convert(final Object value, Locale locale)\n \t{\n \t\tfinal Number number = value instanceof Number ? (Number)value : parse(value,\n \t\t\t\tShort.MIN_VALUE, Short.MAX_VALUE,locale);\n+\n+        if (number == null)\n+        {\n+        \treturn null;\n+        }\n+\n \t\treturn new Short(number.shortValue());\n \t}\n ", "filename": "wicket/src/java/wicket/util/convert/converters/ShortConverter.java"}, {"additions": 12, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/test/wicket/util/convert/converters/ConvertersTest.java", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/src/test/wicket/util/convert/converters/ConvertersTest.java", "sha": "2c77a840e75aba5bf1dce014432c264176f5b9f2", "changes": 12, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/test/wicket/util/convert/converters/ConvertersTest.java?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -63,6 +63,18 @@ public void testConversion()\n \n \t\tassertEquals(date, converter.convert(\"24-10-02\", Date.class));\n \t\tassertEquals(\"24-10-02\", converter.convert(date, String.class));\n+\n+\t\t// empty strings should return null, NOT throw NPEs\n+\t\tassertNull(converter.convert(\"\", Double.class));\n+\t\tassertNull(converter.convert(\"\", Long.class));\n+\t\tassertNull(converter.convert(\"\", Float.class));\n+\t\tassertNull(converter.convert(\"\", Integer.class));\n+\t\tassertNull(converter.convert(\"\", Byte.class));\n+\t\tassertNull(converter.convert(\"\", Character.class));\n+\t\tassertNull(converter.convert(\"\", Date.class));\n+\t\tassertNull(converter.convert(\"\", Short.class));\n+\t\tassertEquals(Boolean.FALSE, converter.convert(\"\", Boolean.class));\n+\t\tassertNotNull(converter.convert(\"\", String.class));\n \t}\n \n \t/**", "filename": "wicket/src/test/wicket/util/convert/converters/ConvertersTest.java"}, {"additions": 1, "raw_url": "https://github.com/apache/wicket/raw/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/xdocs/changes.xml", "blob_url": "https://github.com/apache/wicket/blob/876355f5152d28fe4c5b67eeb91e5f6de2471a68/wicket/xdocs/changes.xml", "sha": "75cdd5900dcc623f77e3fbde2f29e610c1550699", "changes": 1, "status": "modified", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/xdocs/changes.xml?ref=876355f5152d28fe4c5b67eeb91e5f6de2471a68", "patch": "@@ -11,6 +11,7 @@\n \t  <action type=\"add\" dev=\"Eelco Hillenius\">Added component wicket.markup.html.include.Include for including content from non-Wicket resources.</action>\n     </release>\n     <release version=\"1.0.0\" date=\"tbd\" description=\"1.0.0 final\">\n+      <action type=\"fix\" dev=\"Eelco Hillenius\" issue=\"1211663\" due-to=\"Martijn Dashorst\">Fixed converters once and for all. Null check results so that e.g., empty strings for numbers (e.g.) now return null instead of throwing a NPE</action>\n       <action type=\"fix\" dev=\"Eelco Hillenius\" issue=\"1209027\">The UploadForm now considers the encoding</action>\n       <action type=\"add\" dev=\"Juergen Donnerstag\">By means of Component.setRenderBodyOnly(boolean) it is now easily possible to print the tag's body only. This is e.g. necessary with &lt;span&gt; tags and Panels where in cases you want to be strictly HTML compliant the &lt;span&gt; tag itself must be removed. The (tag's) body will always be printed.</action>\n     </release>", "filename": "wicket/xdocs/changes.xml"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/4fc462187d294222372ef73951c5d4c849c148d5", "parent": "https://github.com/apache/wicket/commit/697a5cf7909733bc41f176dfc8969f96144713ee", "message": "WICKET-241, WICKET-240, all stages in requestcycle called again by wrapping methods that can generate exceptions in a try/catch block. Possible NPE's in calculation of size also captured, which was the cause of resource leaks (e.g. non-closed database connections when resource clean up is done in requestcycle.detach)\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x@501911 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_132", "file": [{"additions": 20, "raw_url": "https://github.com/apache/wicket/raw/4fc462187d294222372ef73951c5d4c849c148d5/wicket/src/main/java/wicket/RequestCycle.java", "blob_url": "https://github.com/apache/wicket/blob/4fc462187d294222372ef73951c5d4c849c148d5/wicket/src/main/java/wicket/RequestCycle.java", "sha": "2cadf154c26b9eb5c6c645cab720bae1745beca3", "changes": 32, "status": "modified", "deletions": 12, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/RequestCycle.java?ref=4fc462187d294222372ef73951c5d4c849c148d5", "patch": "@@ -890,14 +890,6 @@ private void detach()\n \t\t// clear the used pagemap for this thread, \n \t\t// maybe we can move this a few lines above to have a but more\n \t\t// concurrency (session.update)\n-\t\ttry\n-\t\t{\n-\t\t\tsession.requestDetached();\n-\t\t}\n-\t\tcatch(RuntimeException re)\n-\t\t{\n-\t\t\tlog.error(\"there was an error detaching the request from the session \" + session + \".\", re);\n-\t\t}\n \t\tif (getResponse() instanceof BufferedWebResponse)\n \t\t{\n \t\t\ttry\n@@ -910,12 +902,28 @@ private void detach()\n \t\t\t}\n \t\t}\n \n-\t\tIRequestLogger requestLogger = getApplication().getRequestLogger();\n-\t\tif (requestLogger != null)\n+\t\ttry\n \t\t{\n-\t\t\trequestLogger.requestTime((System.currentTimeMillis() - startTime));\n+\t\t\tIRequestLogger requestLogger = getApplication().getRequestLogger();\n+\t\t\tif (requestLogger != null)\n+\t\t\t{\n+\t\t\t\trequestLogger.requestTime((System.currentTimeMillis() - startTime));\n+\t\t\t}\n \t\t}\n-\t\t\n+\t\tcatch(RuntimeException re)\n+\t\t{\n+\t\t\tlog.error(\"there was an error in the RequestLogger ending.\", re);\n+\t\t}\n+\n+\t\ttry\n+\t\t{\n+\t\t\tsession.requestDetached();\n+\t\t}\n+\t\tcatch(RuntimeException re)\n+\t\t{\n+\t\t\tlog.error(\"there was an error detaching the request from the session \" + session + \".\", re);\n+\t\t}\n+\n \t\ttry\n \t\t{\n \t\t\tonEndRequest();", "filename": "wicket/src/main/java/wicket/RequestCycle.java"}, {"additions": 10, "raw_url": "https://github.com/apache/wicket/raw/4fc462187d294222372ef73951c5d4c849c148d5/wicket/src/main/java/wicket/protocol/http/RequestLogger.java", "blob_url": "https://github.com/apache/wicket/blob/4fc462187d294222372ef73951c5d4c849c148d5/wicket/src/main/java/wicket/protocol/http/RequestLogger.java", "sha": "77402191b69e23c326d5aecd6c427062ad4baf79", "changes": 20, "status": "modified", "deletions": 10, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/protocol/http/RequestLogger.java?ref=4fc462187d294222372ef73951c5d4c849c148d5", "patch": "@@ -202,28 +202,28 @@ public void requestTime(long timeTaken)\n \t\tRequestData rd = (RequestData)currentRequest.get();\n \t\tif(rd != null)\n \t\t{\n+\t\t\tsynchronized (this)\n+\t\t\t{\n+\t\t\t\tif(active > 0)\n+\t\t\t\t{\n+\t\t\t\t\trd.setActiveRequest(active--);\n+\t\t\t\t}\n+\t\t\t}\n \t\t\tSession session = Session.get();\n \t\t\tString sessionId = session.getId();\n \t\t\trd.setSessionId(sessionId);\n-\t\t\t\n+\n \t\t\tObject sessionInfo = getSessionInfo(session);\n \t\t\trd.setSessionInfo(sessionInfo);\n-\t\t\t\n+\n \t\t\tlong sizeInBytes = -1;\n \t\t\tif(Application.get().getRequestLoggerSettings().getRecordSessionSize())\n \t\t\t{\n \t\t\t\tsizeInBytes = session.getSizeInBytes();\n \t\t\t}\n \t\t\trd.setSessionSize(sizeInBytes);\n \t\t\trd.setTimeTaken(timeTaken);\n-\t\t\tsynchronized (this)\n-\t\t\t{\n-\t\t\t\tif(active > 0)\n-\t\t\t\t{\n-\t\t\t\t\trd.setActiveRequest(active--);\n-\t\t\t\t}\n-\t\t\t}\n-\t\t\t\n+\n \t\t\trequests.add(0, rd);\n \t\t\tcurrentRequest.set(null);\n \t\t\tif(sessionId != null)", "filename": "wicket/src/main/java/wicket/protocol/http/RequestLogger.java"}, {"additions": 4, "raw_url": "https://github.com/apache/wicket/raw/4fc462187d294222372ef73951c5d4c849c148d5/wicket/src/main/java/wicket/util/lang/Objects.java", "blob_url": "https://github.com/apache/wicket/blob/4fc462187d294222372ef73951c5d4c849c148d5/wicket/src/main/java/wicket/util/lang/Objects.java", "sha": "c5f166c38b1712e073263b39c2eeb0918020ad19", "changes": 6, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/main/java/wicket/util/lang/Objects.java?ref=4fc462187d294222372ef73951c5d4c849c148d5", "patch": "@@ -1052,16 +1052,18 @@ public static Number newInteger(int type, long value)\n \t */\n \tpublic static long sizeof(final Object object)\n \t{\n+\t\tif (object == null) return 0;\n \t\ttry\n \t\t{\n \t\t\tfinal ByteCountingOutputStream out = new ByteCountingOutputStream();\n \t\t\tnew ObjectOutputStream(out).writeObject(object);\n \t\t\tout.close();\n \t\t\treturn out.size();\n \t\t}\n-\t\tcatch (IOException e)\n+\t\tcatch (Exception e)\n \t\t{\n-\t\t\treturn -1;\n+\t\t\tlog.warn(\"Size of failed of object: \" + object.getClass().getName(), e);\n+\t\t\treturn 0;\n \t\t}\n \t}\n ", "filename": "wicket/src/main/java/wicket/util/lang/Objects.java"}], "repo": "wicket"}, {"commit": "https://github.com/apache/wicket/commit/717521f478a60b190e058e903a853d328f390546", "parent": "https://github.com/apache/wicket/commit/021c8a3d30a25e33d7b0281e793619138774c833", "message": "bug fix for: [ 1472477 ] NPE at wicket.PageMap.removeEntry\nnew pages are added to the session immediantly now.\nSo that they are there for another thread (to remove if needed)\nSo now if a page isn't already in the session it will not be added in session.update\nbecause it could already be deleted again by another thread.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/wicket/trunk@460350 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "wicket_133", "file": [{"additions": 13, "raw_url": "https://github.com/apache/wicket/raw/717521f478a60b190e058e903a853d328f390546/wicket/src/java/wicket/PageMap.java", "blob_url": "https://github.com/apache/wicket/blob/717521f478a60b190e058e903a853d328f390546/wicket/src/java/wicket/PageMap.java", "sha": "08626e65402f37c8094a5eacb69cdcc3525405c5", "changes": 19, "status": "modified", "deletions": 6, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/PageMap.java?ref=717521f478a60b190e058e903a853d328f390546", "patch": "@@ -225,7 +225,7 @@ public final ArrayListStack getAccessStack()\n \t */\n \tpublic final IPageMapEntry getEntry(final int id)\n \t{\n-\t\treturn (IPageMapEntry)session.getAttribute(attributeForId(id));\n+\t\treturn(IPageMapEntry)session.getAttribute(attributeForId(id));\n \t}\n \n \t/**\n@@ -511,11 +511,18 @@ final void put(final Page page)\n \n \t\t\t// Store entry in session\n \t\t\tfinal String attribute = attributeForId(entry.getNumericId());\n-\n-\t\t\t// Set attribute\n-\t\t\t//session.setAttribute(attribute, entry);\n-\t\t\t// Don't set it directly but add to the dirty map\n-\t\t\tsession.dirtyPage(page);\n+\t\t\t\n+\t\t\tif(session.getAttribute(attribute) == null)\n+\t\t\t{\n+\t\t\t\t// Set attribute if it is a new page, so that it will exists\n+\t\t\t\t// already for other threads that can come on the same time.\n+\t\t\t\tsession.setAttribute(attribute, entry);\n+\t\t\t}\n+\t\t\telse\n+\t\t\t{\n+\t\t\t\t// Else don't set it directly but add to the dirty map\n+\t\t\t\tsession.dirtyPage(page);\n+\t\t\t}\n \n \t\t\t// Evict any page(s) as need be\n \t\t\tsession.getApplication().getSessionSettings().getPageMapEvictionStrategy().evict(this);", "filename": "wicket/src/java/wicket/PageMap.java"}, {"additions": 8, "raw_url": "https://github.com/apache/wicket/raw/717521f478a60b190e058e903a853d328f390546/wicket/src/java/wicket/Session.java", "blob_url": "https://github.com/apache/wicket/blob/717521f478a60b190e058e903a853d328f390546/wicket/src/java/wicket/Session.java", "sha": "3306f0ad80fab47e41d3b188f67fc2e943e83826", "changes": 9, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/wicket/contents/wicket/src/java/wicket/Session.java?ref=717521f478a60b190e058e903a853d328f390546", "patch": "@@ -916,9 +916,16 @@ protected void update()\n \t\t\t\t\tfinal Page page = (Page)object;\n \t\t\t\t\tif (page.isStateless())\n \t\t\t\t\t{\n+\t\t\t\t\t\t// check, can it be that stateless pages where added to the session?\n+\t\t\t\t\t\t// and should be removed now?\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tattribute = page.getPageMap().attributeForId(page.getNumericId());\n+\t\t\t\t\tif(getAttribute(attribute) == null)\n+\t\t\t\t\t{\n+\t\t\t\t\t\t// page removed by another thread. don't add it again.\n+\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t}\n \t\t\t\t\tobject = page.getPageMapEntry();\n \t\t\t\t}\n \t\t\t\telse if (object instanceof PageMap)\n@@ -1018,7 +1025,7 @@ private final String attributeForPageMapName(final String pageMapName)\n \t/**\n \t * @return The current thread dirty objects list\n \t */\n-\tprivate List getDirtyObjectsList()\n+\tList getDirtyObjectsList()\n \t{\n \t\tList list = (List)dirtyObjects.get();\n \t\tif (list == null)", "filename": "wicket/src/java/wicket/Session.java"}], "repo": "wicket"}]
