[
    {
        "repo": "commons-configuration",
        "commit": "https://github.com/apache/commons-configuration/commit/514cdf8f1ae0ebff29e600e4888928bb28b18345",
        "bug_id": "commons-configuration_514cdf8",
        "message": "Fixed a potential NPE in DefaultReloadingDetectorFactory.\n\nThe refreshDelay property of the parameters object can now be null.\n\ngit-svn-id: https://svn.apache.org/repos/asf/commons/proper/configuration/trunk@1463687 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/commons-configuration/commit/369a9ebc8de0d3324485c95576d8c984078109e0",
        "patched_files": [
            "DefaultReloadingDetectorFactory.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 4,
                "raw_url": "https://github.com/apache/commons-configuration/raw/514cdf8f1ae0ebff29e600e4888928bb28b18345/src/main/java/org/apache/commons/configuration/builder/DefaultReloadingDetectorFactory.java",
                "contents_url": "https://api.github.com/repos/apache/commons-configuration/contents/src/main/java/org/apache/commons/configuration/builder/DefaultReloadingDetectorFactory.java?ref=514cdf8f1ae0ebff29e600e4888928bb28b18345",
                "filename": "src/main/java/org/apache/commons/configuration/builder/DefaultReloadingDetectorFactory.java",
                "deletions": 2,
                "sha": "1b2a35fbcc061c031168b4c9f91ad52a0ec07622",
                "blob_url": "https://github.com/apache/commons-configuration/blob/514cdf8f1ae0ebff29e600e4888928bb28b18345/src/main/java/org/apache/commons/configuration/builder/DefaultReloadingDetectorFactory.java",
                "patch": "@@ -40,7 +40,9 @@ public ReloadingDetector createReloadingDetector(FileHandler handler,\n             FileBasedBuilderParametersImpl params)\n             throws ConfigurationException\n     {\n-        return new FileHandlerReloadingDetector(handler,\n-                params.getReloadingRefreshDelay());\n+        Long refreshDelay = params.getReloadingRefreshDelay();\n+        return (refreshDelay != null) ? new FileHandlerReloadingDetector(\n+                handler, refreshDelay) : new FileHandlerReloadingDetector(\n+                handler);\n     }\n }",
                "changes": 6
            },
            {
                "status": "modified",
                "additions": 19,
                "raw_url": "https://github.com/apache/commons-configuration/raw/514cdf8f1ae0ebff29e600e4888928bb28b18345/src/test/java/org/apache/commons/configuration/builder/TestDefaultReloadingDetectorFactory.java",
                "contents_url": "https://api.github.com/repos/apache/commons-configuration/contents/src/test/java/org/apache/commons/configuration/builder/TestDefaultReloadingDetectorFactory.java?ref=514cdf8f1ae0ebff29e600e4888928bb28b18345",
                "filename": "src/test/java/org/apache/commons/configuration/builder/TestDefaultReloadingDetectorFactory.java",
                "deletions": 2,
                "sha": "ec9ce39e3b16b24a8f813443c9252a170ebad96e",
                "blob_url": "https://github.com/apache/commons-configuration/blob/514cdf8f1ae0ebff29e600e4888928bb28b18345/src/test/java/org/apache/commons/configuration/builder/TestDefaultReloadingDetectorFactory.java",
                "patch": "@@ -18,6 +18,7 @@\n \n import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertSame;\n+import static org.junit.Assert.assertTrue;\n \n import org.apache.commons.configuration.ConfigurationException;\n import org.apache.commons.configuration.io.FileHandler;\n@@ -50,13 +51,29 @@ public void testCreateReloadingDetector() throws ConfigurationException\n         FileHandler handler = new FileHandler();\n         FileBasedBuilderParametersImpl params =\n                 new FileBasedBuilderParametersImpl();\n-        final long refreshDelay = 10000L;\n+        final Long refreshDelay = 10000L;\n         params.setReloadingRefreshDelay(refreshDelay);\n         FileHandlerReloadingDetector detector =\n                 (FileHandlerReloadingDetector) factory.createReloadingDetector(\n                         handler, params);\n         assertSame(\"Wrong file handler\", handler, detector.getFileHandler());\n-        assertEquals(\"Wrong refresh delay\", refreshDelay,\n+        assertEquals(\"Wrong refresh delay\", refreshDelay.longValue(),\n                 detector.getRefreshDelay());\n     }\n+\n+    /**\n+     * Tests whether an undefined refresh delay is handled correctly.\n+     */\n+    @Test\n+    public void testCreateReloadingDetectorDefaultRefreshDelay()\n+            throws ConfigurationException\n+    {\n+        FileHandler handler = new FileHandler();\n+        FileBasedBuilderParametersImpl params =\n+                new FileBasedBuilderParametersImpl();\n+        FileHandlerReloadingDetector detector =\n+                (FileHandlerReloadingDetector) factory.createReloadingDetector(\n+                        handler, params);\n+        assertTrue(\"No default refresh delay\", detector.getRefreshDelay() != 0);\n+    }\n }",
                "changes": 21
            }
        ],
        "unit_tests": [
            "TestDefaultReloadingDetectorFactory.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "src/test/java/org/apache/commons/configuration/builder/TestDefaultReloadingDetectorFactory.java",
        "buggy_files": [
            "src/main/java/org/apache/commons/configuration/builder/DefaultReloadingDetectorFactory.java"
        ],
        "fixed": true
    }
]