[
    {
        "repo": "logging-log4j2",
        "commit": "https://github.com/apache/logging-log4j2/commit/20be2b03dd82875a225f1ecb607edf3ed1896587",
        "bug_id": "logging-log4j2_20be2b0",
        "message": "FIX NPE in RingBufferLogEventTest",
        "parent": "https://github.com/apache/logging-log4j2/commit/a0a4e43e2224130c8b33130772c3b78cbc7deece",
        "patched_files": [
            "RingBufferLogEvent.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 1,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/20be2b03dd82875a225f1ecb607edf3ed1896587/log4j-core/src/main/java/org/apache/logging/log4j/core/async/RingBufferLogEvent.java",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/log4j-core/src/main/java/org/apache/logging/log4j/core/async/RingBufferLogEvent.java?ref=20be2b03dd82875a225f1ecb607edf3ed1896587",
                "filename": "log4j-core/src/main/java/org/apache/logging/log4j/core/async/RingBufferLogEvent.java",
                "deletions": 1,
                "sha": "a241f0ab93e1af9ac35389bf24fecb53188cd65d",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/20be2b03dd82875a225f1ecb607edf3ed1896587/log4j-core/src/main/java/org/apache/logging/log4j/core/async/RingBufferLogEvent.java",
                "patch": "@@ -163,7 +163,7 @@ private void setMessage(final Message msg) {\n             ((ReusableMessage) msg).formatTo(getMessageTextForWriting());\n         } else {\n             // if the Message instance is reused, there is no point in freezing its message here\n-            if (!Constants.FORMAT_MESSAGES_IN_BACKGROUND) { // LOG4J2-898: user may choose\n+            if (!Constants.FORMAT_MESSAGES_IN_BACKGROUND && msg != null) { // LOG4J2-898: user may choose\n                 msg.getFormattedMessage(); // LOG4J2-763: ask message to freeze parameters\n             }\n             this.message = msg;",
                "changes": 2
            }
        ],
        "unit_tests": [
            "RingBufferLogEventTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "log4j-core/src/test/java/org/apache/logging/log4j/core/async/RingBufferLogEventTest.java",
        "buggy_files": [
            "log4j-core/src/main/java/org/apache/logging/log4j/core/async/RingBufferLogEvent.java"
        ],
        "fixed": true
    }
]