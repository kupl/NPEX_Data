[
    {
        "repo": "commons-dbcp",
        "commit": "https://github.com/apache/commons-dbcp/commit/71841bce6f67b8e58b26caaa49b5c0b1f7269534",
        "bug_id": "commons-dbcp_71841bc",
        "message": "[DBCP-488] NPE for\norg.apache.commons.dbcp2.cpdsadapter.DriverAdapterCPDS.setConnectionProperties(null).",
        "parent": "https://github.com/apache/commons-dbcp/commit/5226462744f1e3c11fe5477b543a60b18a80e548",
        "patched_files": [
            "changes.xml",
            "DriverAdapterCPDS.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 3,
                "raw_url": "https://github.com/apache/commons-dbcp/raw/71841bce6f67b8e58b26caaa49b5c0b1f7269534/src/changes/changes.xml",
                "contents_url": "https://api.github.com/repos/apache/commons-dbcp/contents/src/changes/changes.xml?ref=71841bce6f67b8e58b26caaa49b5c0b1f7269534",
                "filename": "src/changes/changes.xml",
                "deletions": 0,
                "sha": "67db1d51dbd176d6865e97720c31065ec2c55f7d",
                "blob_url": "https://github.com/apache/commons-dbcp/blob/71841bce6f67b8e58b26caaa49b5c0b1f7269534/src/changes/changes.xml",
                "patch": "@@ -73,6 +73,9 @@ The <action> type attribute can be add,update,fix,remove.\n       <action dev=\"ggregory\" type=\"update\" issue=\"DBCP-487\" due-to=\"Gary Gregory\">\n         Add API org.apache.commons.dbcp2.datasources.PerUserPoolDataSource.clear().\n       </action>\n+      <action dev=\"ggregory\" type=\"update\" issue=\"DBCP-488\" due-to=\"Gary Gregory\">\n+        NPE for org.apache.commons.dbcp2.cpdsadapter.DriverAdapterCPDS.setConnectionProperties(null).      \n+      </action>\n     </release>\n     <release version=\"2.2.0\" date=\"2017-12-DD\" description=\"This is a minor release, including bug fixes and enhancements.\">\n       <action dev=\"ggregory\" type=\"fix\" issue=\"DBCP-481\" due-to=\"Gary Gregory\">",
                "changes": 3
            },
            {
                "status": "modified",
                "additions": 7,
                "raw_url": "https://github.com/apache/commons-dbcp/raw/71841bce6f67b8e58b26caaa49b5c0b1f7269534/src/main/java/org/apache/commons/dbcp2/cpdsadapter/DriverAdapterCPDS.java",
                "contents_url": "https://api.github.com/repos/apache/commons-dbcp/contents/src/main/java/org/apache/commons/dbcp2/cpdsadapter/DriverAdapterCPDS.java?ref=71841bce6f67b8e58b26caaa49b5c0b1f7269534",
                "filename": "src/main/java/org/apache/commons/dbcp2/cpdsadapter/DriverAdapterCPDS.java",
                "deletions": 5,
                "sha": "f42c1dbd4bf119ae7c42777dc5cccc8980939e93",
                "blob_url": "https://github.com/apache/commons-dbcp/blob/71841bce6f67b8e58b26caaa49b5c0b1f7269534/src/main/java/org/apache/commons/dbcp2/cpdsadapter/DriverAdapterCPDS.java",
                "patch": "@@ -395,11 +395,13 @@ public Properties getConnectionProperties() {\n     public void setConnectionProperties(final Properties props) {\n         assertInitializationAllowed();\n         connectionProperties = props;\n-        if (connectionProperties.containsKey(KEY_USER)) {\n-            setUser(connectionProperties.getProperty(KEY_USER));\n-        }\n-        if (connectionProperties.containsKey(KEY_PASSWORD)) {\n-            setPassword(connectionProperties.getProperty(KEY_PASSWORD));\n+        if (connectionProperties != null) {\n+            if (connectionProperties.containsKey(KEY_USER)) {\n+                setUser(connectionProperties.getProperty(KEY_USER));\n+            }\n+            if (connectionProperties.containsKey(KEY_PASSWORD)) {\n+                setPassword(connectionProperties.getProperty(KEY_PASSWORD));\n+            }\n         }\n     }\n ",
                "changes": 12
            },
            {
                "status": "modified",
                "additions": 6,
                "raw_url": "https://github.com/apache/commons-dbcp/raw/71841bce6f67b8e58b26caaa49b5c0b1f7269534/src/test/java/org/apache/commons/dbcp2/cpdsadapter/TestDriverAdapterCPDS.java",
                "contents_url": "https://api.github.com/repos/apache/commons-dbcp/contents/src/test/java/org/apache/commons/dbcp2/cpdsadapter/TestDriverAdapterCPDS.java?ref=71841bce6f67b8e58b26caaa49b5c0b1f7269534",
                "filename": "src/test/java/org/apache/commons/dbcp2/cpdsadapter/TestDriverAdapterCPDS.java",
                "deletions": 1,
                "sha": "7820796d7170365642f97833ae38d0fcfd0a3f3c",
                "blob_url": "https://github.com/apache/commons-dbcp/blob/71841bce6f67b8e58b26caaa49b5c0b1f7269534/src/test/java/org/apache/commons/dbcp2/cpdsadapter/TestDriverAdapterCPDS.java",
                "patch": "@@ -142,7 +142,7 @@ public void testClosingWithUserName()\n     }\n \n     @Test\n-    public void testSetProperties() throws Exception {\n+    public void testSetConnectionProperties() throws Exception {\n         // Set user property to bad value\n         pcds.setUser(\"bad\");\n         // Supply correct value in connection properties\n@@ -162,6 +162,11 @@ public void testSetProperties() throws Exception {\n         assertEquals(\"bar\", pcds.getConnectionProperties().getProperty(\"password\"));\n     }\n     \n+    @Test\n+    public void testSetConnectionPropertiesNull() throws Exception {\n+        pcds.setConnectionProperties(null);\n+    }\n+    \n     @Test\n     public void testSetUserNull() throws Exception {\n         pcds.setUser(\"Alice\");",
                "changes": 7
            }
        ],
        "unit_tests": [
            "TestDriverAdapterCPDS.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "src/test/java/org/apache/commons/dbcp2/cpdsadapter/TestDriverAdapterCPDS.java",
        "buggy_files": [
            "src/changes/changes.xml",
            "src/main/java/org/apache/commons/dbcp2/cpdsadapter/DriverAdapterCPDS.java"
        ],
        "fixed": true
    }
]