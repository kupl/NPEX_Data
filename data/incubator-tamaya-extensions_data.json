[{"commit": "https://github.com/apache/incubator-tamaya-extensions/commit/e7163bd7638d0943b84dcba36cfb7b2823039fe4", "parent": "https://github.com/apache/incubator-tamaya-extensions/commit/fbd8304d8403fd4c1868dfdb6834a229fa903ac6", "message": "Fixed NPE.", "bug_id": "incubator-tamaya-extensions_1", "file": [{"additions": 0, "raw_url": "https://github.com/apache/incubator-tamaya-extensions/raw/e7163bd7638d0943b84dcba36cfb7b2823039fe4/modules/mutable-config/src/main/java/org/apache/tamaya/mutableconfig/spi/MutableConfigurationBackendSpi.java", "blob_url": "https://github.com/apache/incubator-tamaya-extensions/blob/e7163bd7638d0943b84dcba36cfb7b2823039fe4/modules/mutable-config/src/main/java/org/apache/tamaya/mutableconfig/spi/MutableConfigurationBackendSpi.java", "sha": "ebe2f83fc0b57452ffc5eb553e5a55abd8a57802", "changes": 1, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/incubator-tamaya-extensions/contents/modules/mutable-config/src/main/java/org/apache/tamaya/mutableconfig/spi/MutableConfigurationBackendSpi.java?ref=e7163bd7638d0943b84dcba36cfb7b2823039fe4", "patch": "@@ -19,7 +19,6 @@\n package org.apache.tamaya.mutableconfig.spi;\n \n import org.apache.tamaya.spi.PropertySource;\n-import org.apache.tamaya.spi.PropertyValue;\n \n import java.net.URI;\n import java.util.Collection;", "filename": "modules/mutable-config/src/main/java/org/apache/tamaya/mutableconfig/spi/MutableConfigurationBackendSpi.java"}], "repo": "incubator-tamaya-extensions"}, {"commit": "https://github.com/apache/incubator-tamaya-extensions/commit/a03615f5c342e27e2eba3b82632e10b3561967b4", "parent": "https://github.com/apache/incubator-tamaya-extensions/commit/335d6f1d4341fea670c9aa355964d9a07b3df122", "message": "TAMAYA-145: Fixed NPE on cascaded filters and mappings.", "bug_id": "incubator-tamaya-extensions_2", "file": [{"additions": 5, "raw_url": "https://github.com/apache/incubator-tamaya-extensions/raw/a03615f5c342e27e2eba3b82632e10b3561967b4/modules/functions/src/main/java/org/apache/tamaya/functions/ConfigurationFunctions.java", "blob_url": "https://github.com/apache/incubator-tamaya-extensions/blob/a03615f5c342e27e2eba3b82632e10b3561967b4/modules/functions/src/main/java/org/apache/tamaya/functions/ConfigurationFunctions.java", "sha": "6dd0427569508d59c5a2bf72d313fe5f38642fb1", "changes": 7, "status": "modified", "deletions": 2, "contents_url": "https://api.github.com/repos/apache/incubator-tamaya-extensions/contents/modules/functions/src/main/java/org/apache/tamaya/functions/ConfigurationFunctions.java?ref=a03615f5c342e27e2eba3b82632e10b3561967b4", "patch": "@@ -232,7 +232,10 @@ public boolean test(String k, String v) {\n                     return new MappedConfiguration(filtered, new KeyMapper(){\n                         @Override\n                         public String mapKey(String key) {\n-                            return key.substring(areaKey.length());\n+                            if(key.startsWith(areaKey)) {\n+                                return key.substring(areaKey.length());\n+                            }\n+                            return null;\n                         }\n                     }, \"stripped\");\n                 }\n@@ -249,7 +252,7 @@ public String mapKey(String key) {\n      * @return true, if the entry is exact in this section\n      */\n     public static boolean isKeyInSection(String key, String sectionKey) {\n-        return sectionKey.isEmpty() || key.startsWith(sectionKey);\n+        return key.startsWith(sectionKey);\n     }\n \n     /**", "filename": "modules/functions/src/main/java/org/apache/tamaya/functions/ConfigurationFunctions.java"}], "repo": "incubator-tamaya-extensions"}, {"commit": "https://github.com/apache/incubator-tamaya-extensions/commit/bb06268543432ad73a9b9bb99402a7ebfa890848", "parent": "https://github.com/apache/incubator-tamaya-extensions/commit/4383a45112e7f66dc2709a2c35e3ed429dccb677", "message": "TAMAYA-114: Fixed potential NPE for getOrdinal().", "bug_id": "incubator-tamaya-extensions_3", "file": [{"additions": 4, "raw_url": "https://github.com/apache/incubator-tamaya-extensions/raw/bb06268543432ad73a9b9bb99402a7ebfa890848/modules/spi-support/src/main/java/org/apache/tamaya/spisupport/MapPropertySource.java", "blob_url": "https://github.com/apache/incubator-tamaya-extensions/blob/bb06268543432ad73a9b9bb99402a7ebfa890848/modules/spi-support/src/main/java/org/apache/tamaya/spisupport/MapPropertySource.java", "sha": "ada292ae5e2884004aeda3388ba4b29b5f9c290c", "changes": 5, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/incubator-tamaya-extensions/contents/modules/spi-support/src/main/java/org/apache/tamaya/spisupport/MapPropertySource.java?ref=bb06268543432ad73a9b9bb99402a7ebfa890848", "patch": "@@ -129,7 +129,10 @@ public String getName() {\n \n     @Override\n     public int getOrdinal() {\n-        return priority;\n+        if(priority!=null) {\n+            return priority;\n+        }\n+        return super.getOrdinal();\n     }\n \n     @Override", "filename": "modules/spi-support/src/main/java/org/apache/tamaya/spisupport/MapPropertySource.java"}], "repo": "incubator-tamaya-extensions"}, {"commit": "https://github.com/apache/incubator-tamaya-extensions/commit/022b15e76079b3a65232eeab3d013c5c1b2bab87", "parent": "https://github.com/apache/incubator-tamaya-extensions/commit/37725cd059e461b51cb1513bc985faf607ffecb4", "message": "TAMAYA-42 avoid NPE and add TODOs", "bug_id": "incubator-tamaya-extensions_4", "file": [{"additions": 8, "raw_url": "https://github.com/apache/incubator-tamaya-extensions/raw/022b15e76079b3a65232eeab3d013c5c1b2bab87/core/src/main/java/org/apache/tamaya/core/internal/PropertyConverterManager.java", "blob_url": "https://github.com/apache/incubator-tamaya-extensions/blob/022b15e76079b3a65232eeab3d013c5c1b2bab87/core/src/main/java/org/apache/tamaya/core/internal/PropertyConverterManager.java", "sha": "86c8ebe1d095c9cea28dfa3fddb2b874821c9332", "changes": 16, "status": "modified", "deletions": 8, "contents_url": "https://api.github.com/repos/apache/incubator-tamaya-extensions/contents/core/src/main/java/org/apache/tamaya/core/internal/PropertyConverterManager.java?ref=022b15e76079b3a65232eeab3d013c5c1b2bab87", "patch": "@@ -65,25 +65,25 @@ public PropertyConverterManager() {\n      */\n     protected void initDefaultConverters() {\n         // Add default converters\n-        register(char.class, (s) -> s.charAt(0));\n+        register(char.class, (s) -> s != null ? s.charAt(0) : null);\n         register(byte.class, Byte::parseByte);\n         register(short.class, Short::parseShort);\n         register(int.class, Integer::parseInt);\n         register(long.class, Long::parseLong);\n         register(boolean.class, Boolean::parseBoolean);\n-        register(float.class, Float::parseFloat);\n-        register(double.class, Double::parseDouble);\n+        register(float.class, Float::parseFloat); //X TODO not good enough as this is Locale dependent!\n+        register(double.class, Double::parseDouble); //X TODO not good enough as this is Locale dependent!\n \n-        register(Character.class, (s) -> s.charAt(0));\n+        register(Character.class, (s) -> s != null ? s.charAt(0) : null );\n         register(Byte.class, Byte::valueOf);\n         register(Short.class, Short::valueOf);\n         register(Integer.class, Integer::valueOf);\n         register(Long.class, Long::valueOf);\n         register(Boolean.class, Boolean::valueOf);\n-        register(Float.class, Float::valueOf);\n-        register(Double.class, Double::valueOf);\n-        register(BigDecimal.class, BigDecimal::new);\n-        register(BigInteger.class, BigInteger::new);\n+        register(Float.class, Float::valueOf); //X TODO not good enough as this is Locale dependent!\n+        register(Double.class, Double::valueOf); //X TODO not good enough as this is Locale dependent!\n+        register(BigDecimal.class, BigDecimal::new); //X TODO not good enough as this is Locale dependent!\n+        register(BigInteger.class, BigInteger::new); //X TODO not good enough as this is Locale dependent!\n \n         register(Currency.class, Currency::getInstance);\n ", "filename": "core/src/main/java/org/apache/tamaya/core/internal/PropertyConverterManager.java"}, {"additions": 1, "raw_url": "https://github.com/apache/incubator-tamaya-extensions/raw/022b15e76079b3a65232eeab3d013c5c1b2bab87/core/src/main/java/org/apache/tamaya/core/propertysource/SystemPropertySource.java", "blob_url": "https://github.com/apache/incubator-tamaya-extensions/blob/022b15e76079b3a65232eeab3d013c5c1b2bab87/core/src/main/java/org/apache/tamaya/core/propertysource/SystemPropertySource.java", "sha": "4ead5aba9d273312c9ebc884b021ada442195171", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/incubator-tamaya-extensions/contents/core/src/main/java/org/apache/tamaya/core/propertysource/SystemPropertySource.java?ref=022b15e76079b3a65232eeab3d013c5c1b2bab87", "patch": "@@ -29,7 +29,7 @@\n public class SystemPropertySource extends BasePropertySource {\n \n     /**\n-     * cashed System.getProperties() filled in our Map\n+     * cached System.getProperties() filled in our Map\n      */\n     private Map<String, String> properties;\n ", "filename": "core/src/main/java/org/apache/tamaya/core/propertysource/SystemPropertySource.java"}], "repo": "incubator-tamaya-extensions"}, {"commit": "https://github.com/apache/incubator-tamaya-extensions/commit/930eb1af6591a4494023eaa568886f080039ef47", "parent": "https://github.com/apache/incubator-tamaya-extensions/commit/69303bee2067b0102c18522006eaa4c515805ee6", "message": "Fix for NPE, when only one service instance is available in some cases.", "bug_id": "incubator-tamaya-extensions_5", "file": [{"additions": 3, "raw_url": "https://github.com/apache/incubator-tamaya-extensions/raw/930eb1af6591a4494023eaa568886f080039ef47/code/api/src/main/java/org/apache/tamaya/spi/ServiceContextManager.java", "blob_url": "https://github.com/apache/incubator-tamaya-extensions/blob/930eb1af6591a4494023eaa568886f080039ef47/code/api/src/main/java/org/apache/tamaya/spi/ServiceContextManager.java", "sha": "30732321320760929678c55587b014f36af50943", "changes": 14, "status": "modified", "deletions": 11, "contents_url": "https://api.github.com/repos/apache/incubator-tamaya-extensions/contents/code/api/src/main/java/org/apache/tamaya/spi/ServiceContextManager.java?ref=930eb1af6591a4494023eaa568886f080039ef47", "patch": "@@ -57,24 +57,16 @@ private static ServiceContext loadDefaultServiceProvider() {\n         try {\n             int highestOrdinal = 0;\n             for (ServiceContext serviceContext : ServiceLoader.load(ServiceContext.class)) {\n-                if (serviceContext.ordinal() > highestOrdinal) {\n+                if(highestServiceContext==null){\n+                    highestServiceContext = serviceContext;\n+                }else if (serviceContext.ordinal() > highestOrdinal) {\n                     highestServiceContext = serviceContext;\n                     highestOrdinal = serviceContext.ordinal();\n                 }\n             }\n         } catch (Exception e) {\n             throw new ConfigException(\"ServiceContext not loadable\", e);\n         }\n-//        if (highestServiceContext==null){\n-//            String serviceContext = System.getProperty(ServiceContext.class.getName());\n-//            if(serviceContext != null){\n-//                try{\n-//                    highestServiceContext = (ServiceContext)Class.forName(serviceContext).newInstance();\n-//                } catch (Exception e) {\n-//                    throw new ConfigException(\"Configured ServiceContext not loadable: \" + serviceContext, e);\n-//                }\n-//            }\n-//        }\n         if (highestServiceContext==null){\n             throw new ConfigException(\"No ServiceContext found\");\n         }", "filename": "code/api/src/main/java/org/apache/tamaya/spi/ServiceContextManager.java"}], "repo": "incubator-tamaya-extensions"}, {"commit": "https://github.com/apache/incubator-tamaya-extensions/commit/88c99a10686da96aff5d101a2c2d99c0fafc8269", "parent": "https://github.com/apache/incubator-tamaya-extensions/commit/1e843618eaf7ab60588a04c0dcdada52b8d547ab", "message": "TAMAYA-116: Fixed NPE and test issues (using Weld by default, instead of OWB).", "bug_id": "incubator-tamaya-extensions_6", "file": [{"additions": 9, "raw_url": "https://github.com/apache/incubator-tamaya-extensions/raw/88c99a10686da96aff5d101a2c2d99c0fafc8269/modules/integration/cdi/pom.xml", "blob_url": "https://github.com/apache/incubator-tamaya-extensions/blob/88c99a10686da96aff5d101a2c2d99c0fafc8269/modules/integration/cdi/pom.xml", "sha": "2ebcc6b9d566c2db64b282936f1c616a0d216add", "changes": 14, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/incubator-tamaya-extensions/contents/modules/integration/cdi/pom.xml?ref=88c99a10686da96aff5d101a2c2d99c0fafc8269", "patch": "@@ -129,9 +129,9 @@ under the License.\n     <profiles>\n         <profile>\n             <id>OWB</id>\n-            <activation>\n-                <activeByDefault>true</activeByDefault>\n-            </activation>\n+            <!-- there is an issue with this profile:\n+                 java.lang.NoClassDefFoundError: org/apache/webbeans/event/EventMetadata\n+            -->\n             <dependencies>\n                 <!-- OWB specific dependencies-->\n                 <dependency>\n@@ -143,13 +143,13 @@ under the License.\n                     <groupId>org.apache.geronimo.specs</groupId>\n                     <artifactId>geronimo-interceptor_1.2_spec</artifactId>\n                     <version>${geronimo-interceptor-1.2-spec.version}</version>\n-                    <scope>provided</scope>\n+                    <scope>test</scope>\n                 </dependency>\n                 <dependency>\n                     <groupId>org.apache.geronimo.specs</groupId>\n                     <artifactId>geronimo-annotation_1.2_spec</artifactId>\n                     <version>1.0.MR2-SNAPSHOT</version>\n-                    <scope>provided</scope>\n+                    <scope>test</scope>\n                 </dependency>\n                 <dependency>\n                     <groupId>org.apache.geronimo.specs</groupId>\n@@ -189,11 +189,15 @@ under the License.\n         </profile>\n         <profile>\n             <id>Weld</id>\n+            <activation>\n+                <activeByDefault>true</activeByDefault>\n+            </activation>\n             <dependencies>\n                 <dependency>\n                     <groupId>org.jboss.weld.se</groupId>\n                     <artifactId>weld-se</artifactId>\n                     <version>${weld.version}</version>\n+                    <scope>test</scope>\n                 </dependency>\n                 <dependency>\n                     <groupId>org.apache.deltaspike.cdictrl</groupId>", "filename": "modules/integration/cdi/pom.xml"}, {"additions": 3, "raw_url": "https://github.com/apache/incubator-tamaya-extensions/raw/88c99a10686da96aff5d101a2c2d99c0fafc8269/modules/integration/cdi/src/main/java/org/apache/tamaya/integration/cdi/ConfigurationExtension.java", "blob_url": "https://github.com/apache/incubator-tamaya-extensions/blob/88c99a10686da96aff5d101a2c2d99c0fafc8269/modules/integration/cdi/src/main/java/org/apache/tamaya/integration/cdi/ConfigurationExtension.java", "sha": "b421cbc83eff88051a4a622918a9bbded3072d7d", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/incubator-tamaya-extensions/contents/modules/integration/cdi/src/main/java/org/apache/tamaya/integration/cdi/ConfigurationExtension.java?ref=88c99a10686da96aff5d101a2c2d99c0fafc8269", "patch": "@@ -141,7 +141,9 @@ public void retrieveTypes(@Observes final ProcessBean<?> pb) {\n                 final ConfigProperty annotation = injectionPoint.getAnnotated().getAnnotation(ConfigProperty.class);\n                 final ConfigDefault defaultAnnot = injectionPoint.getAnnotated().getAnnotation(ConfigDefault.class);\n                 final ConfigDefaultSections typeAnnot = injectionPoint.getAnnotated().getAnnotation(ConfigDefaultSections.class);\n-                final List<String> keys = evaluateKeys(injectionPoint.getMember().getName(), annotation.value(), typeAnnot.value());\n+                final List<String> keys = evaluateKeys(injectionPoint.getMember().getName(),\n+                        annotation!=null?annotation.value():null,\n+                        typeAnnot!=null?typeAnnot.value():null);\n \n                 final WithConfigOperator withOperatorAnnot = injectionPoint.getAnnotated().getAnnotation(WithConfigOperator.class);\n                 if(withOperatorAnnot!=null){", "filename": "modules/integration/cdi/src/main/java/org/apache/tamaya/integration/cdi/ConfigurationExtension.java"}, {"additions": 3, "raw_url": "https://github.com/apache/incubator-tamaya-extensions/raw/88c99a10686da96aff5d101a2c2d99c0fafc8269/modules/integration/cdi/src/main/java/org/apache/tamaya/integration/cdi/ConfigurationProducer.java", "blob_url": "https://github.com/apache/incubator-tamaya-extensions/blob/88c99a10686da96aff5d101a2c2d99c0fafc8269/modules/integration/cdi/src/main/java/org/apache/tamaya/integration/cdi/ConfigurationProducer.java", "sha": "9e18a3a81aefdafa924906119506665e6bf795e9", "changes": 4, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/incubator-tamaya-extensions/contents/modules/integration/cdi/src/main/java/org/apache/tamaya/integration/cdi/ConfigurationProducer.java?ref=88c99a10686da96aff5d101a2c2d99c0fafc8269", "patch": "@@ -45,7 +45,9 @@ public Object resolveAndConvert(final InjectionPoint injectionPoint) {\n         final ConfigProperty annotation = injectionPoint.getAnnotated().getAnnotation(ConfigProperty.class);\n         final ConfigDefault defaultAnnot = injectionPoint.getAnnotated().getAnnotation(ConfigDefault.class);\n         final ConfigDefaultSections typeAnnot = injectionPoint.getAnnotated().getAnnotation(ConfigDefaultSections.class);\n-        final List<String> keys = ConfigurationExtension.evaluateKeys(injectionPoint.getMember().getName(), annotation.value(), typeAnnot.value());\n+        final List<String> keys = ConfigurationExtension.evaluateKeys(injectionPoint.getMember().getName(),\n+                annotation!=null?annotation.value():null,\n+                typeAnnot!=null?typeAnnot.value():null);\n \n         final WithConfigOperator withOperatorAnnot = injectionPoint.getAnnotated().getAnnotation(WithConfigOperator.class);\n         ConfigOperator operator = null;", "filename": "modules/integration/cdi/src/main/java/org/apache/tamaya/integration/cdi/ConfigurationProducer.java"}], "repo": "incubator-tamaya-extensions"}]
