{
    "uima-ruta_62a3cce": {
        "bug_id": "uima-ruta_62a3cce",
        "commit": "https://github.com/apache/uima-ruta/commit/62a3cce74eb18209fb90136a806331a589572312",
        "file": [
            {
                "additions": 13,
                "blob_url": "https://github.com/apache/uima-ruta/blob/62a3cce74eb18209fb90136a806331a589572312/ruta-core/src/main/java/org/apache/uima/ruta/engine/RutaEngine.java",
                "changes": 23,
                "contents_url": "https://api.github.com/repos/apache/uima-ruta/contents/ruta-core/src/main/java/org/apache/uima/ruta/engine/RutaEngine.java?ref=62a3cce74eb18209fb90136a806331a589572312",
                "deletions": 10,
                "filename": "ruta-core/src/main/java/org/apache/uima/ruta/engine/RutaEngine.java",
                "patch": "@@ -71,7 +71,6 @@\n import org.apache.uima.ruta.parser.RutaLexer;\r\n import org.apache.uima.ruta.parser.RutaParser;\r\n import org.apache.uima.ruta.seed.RutaAnnotationSeeder;\r\n-import org.apache.uima.ruta.type.RutaBasic;\r\n import org.apache.uima.ruta.verbalize.RutaVerbalizer;\r\n import org.apache.uima.ruta.visitor.CreatedByVisitor;\r\n import org.apache.uima.ruta.visitor.DebugInfoCollectorVisitor;\r\n@@ -725,7 +724,7 @@ private void initializeScript(String viewName) throws AnalysisEngineProcessExcep\n       } catch (RecognitionException e) {\r\n         throw new AnalysisEngineProcessException(e);\r\n       }\r\n-    } else if(mainScript != null) {\r\n+    } else if (mainScript != null) {\r\n       String scriptLocation = locate(mainScript, scriptPaths, SCRIPT_FILE_EXTENSION);\r\n       if (scriptLocation == null) {\r\n         try {\r\n@@ -750,10 +749,10 @@ private void initializeScript(String viewName) throws AnalysisEngineProcessExcep\n         }\r\n       }\r\n     }\r\n-    if(script == null) {\r\n+    if (script == null) {\r\n       return;\r\n     }\r\n-    \r\n+\r\n     Map<String, RutaModule> additionalScriptsMap = new HashMap<String, RutaModule>();\r\n     Map<String, AnalysisEngine> additionalEnginesMap = new HashMap<String, AnalysisEngine>();\r\n \r\n@@ -1131,18 +1130,22 @@ private String collectionToString(Object[] collection) {\n   @Override\r\n   public void batchProcessComplete() throws AnalysisEngineProcessException {\r\n     super.batchProcessComplete();\r\n-    Collection<AnalysisEngine> values = script.getEngines().values();\r\n-    for (AnalysisEngine each : values) {\r\n-      each.batchProcessComplete();\r\n+    if (script != null) {\r\n+      Collection<AnalysisEngine> values = script.getEngines().values();\r\n+      for (AnalysisEngine each : values) {\r\n+        each.batchProcessComplete();\r\n+      }\r\n     }\r\n   }\r\n \r\n   @Override\r\n   public void collectionProcessComplete() throws AnalysisEngineProcessException {\r\n     super.collectionProcessComplete();\r\n-    Collection<AnalysisEngine> values = script.getEngines().values();\r\n-    for (AnalysisEngine each : values) {\r\n-      each.collectionProcessComplete();\r\n+    if (script != null) {\r\n+      Collection<AnalysisEngine> values = script.getEngines().values();\r\n+      for (AnalysisEngine each : values) {\r\n+        each.collectionProcessComplete();\r\n+      }\r\n     }\r\n   }\r\n \r",
                "raw_url": "https://github.com/apache/uima-ruta/raw/62a3cce74eb18209fb90136a806331a589572312/ruta-core/src/main/java/org/apache/uima/ruta/engine/RutaEngine.java",
                "sha": "5b27ad854595a4ae89567497f3c7266815745862",
                "status": "modified"
            }
        ],
        "message": "UIMA-4613\n- avoid NPE for template descriptor import\n\ngit-svn-id: https://svn.apache.org/repos/asf/uima/ruta/trunk@1709853 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/uima-ruta/commit/8d666d2d4b38dd9dd57e7059cc9ebe8e9cd66bf1",
        "repo": "uima-ruta",
        "unit_tests": [
            "RutaEngineTest.java"
        ]
    },
    "uima-ruta_65d892a": {
        "bug_id": "uima-ruta_65d892a",
        "commit": "https://github.com/apache/uima-ruta/commit/65d892aaa73f4272d367df0239b107378e3fe5aa",
        "file": [
            {
                "additions": 13,
                "blob_url": "https://github.com/apache/uima-ruta/blob/65d892aaa73f4272d367df0239b107378e3fe5aa/ruta-core/src/main/java/org/apache/uima/ruta/engine/RutaEngine.java",
                "changes": 16,
                "contents_url": "https://api.github.com/repos/apache/uima-ruta/contents/ruta-core/src/main/java/org/apache/uima/ruta/engine/RutaEngine.java?ref=65d892aaa73f4272d367df0239b107378e3fe5aa",
                "deletions": 3,
                "filename": "ruta-core/src/main/java/org/apache/uima/ruta/engine/RutaEngine.java",
                "patch": "@@ -615,11 +615,11 @@ private void initializeScript(String viewName) throws AnalysisEngineProcessExcep\n       } catch (IOException e) {\r\n         throw new AnalysisEngineProcessException(new FileNotFoundException(\"Script [\" + mainScript\r\n                 + \"] cannot be found at [\" + collectionToString(scriptPaths)\r\n-                + \"] with extension .ruta\"));\r\n+                + \"] or classpath with extension .ruta\"));\r\n       } catch (RecognitionException e) {\r\n         throw new AnalysisEngineProcessException(new FileNotFoundException(\"Script [\" + mainScript\r\n                 + \"] cannot be found at [\" + collectionToString(scriptPaths)\r\n-                + \"] with extension .ruta\"));\r\n+                + \"] or classpath  with extension .ruta\"));\r\n       }\r\n     } else {\r\n       try {\r\n@@ -876,6 +876,9 @@ private RutaModule loadScript(String scriptLocation) throws IOException, Recogni\n \r\n   private RutaModule loadScriptIS(String scriptLocation) throws IOException, RecognitionException {\r\n     InputStream scriptInputStream = getClass().getClassLoader().getResourceAsStream(scriptLocation);\r\n+    if (scriptInputStream == null) {\r\n+            throw new FileNotFoundException(\"No script found in location [\" + scriptLocation + \"]\");\r\n+    }\r\n     CharStream st = new ANTLRInputStream(scriptInputStream, scriptEncoding);\r\n     RutaLexer lexer = new RutaLexer(st);\r\n     CommonTokenStream tokens = new CommonTokenStream(lexer);\r\n@@ -914,9 +917,15 @@ private String collectionToString(Collection<?> collection) {\n   }\r\n \r\n   private String collectionToString(Object[] collection) {\r\n-    return collectionToString(Arrays.asList(collection));\r\n+    if (collection == null) {\r\n+      return \"\";\r\n+    }\r\n+    else {\r\n+      return collectionToString(Arrays.asList(collection));\r\n+    }\r\n   }\r\n \r\n+  @Override\r\n   public void batchProcessComplete() throws AnalysisEngineProcessException {\r\n     super.batchProcessComplete();\r\n     Collection<AnalysisEngine> values = script.getEngines().values();\r\n@@ -925,6 +934,7 @@ public void batchProcessComplete() throws AnalysisEngineProcessException {\n     }\r\n   }\r\n \r\n+  @Override\r\n   public void collectionProcessComplete() throws AnalysisEngineProcessException {\r\n     super.collectionProcessComplete();\r\n     Collection<AnalysisEngine> values = script.getEngines().values();\r",
                "raw_url": "https://github.com/apache/uima-ruta/raw/65d892aaa73f4272d367df0239b107378e3fe5aa/ruta-core/src/main/java/org/apache/uima/ruta/engine/RutaEngine.java",
                "sha": "3a93618859b04f8efb9bbd52d814969b6f0a22c2",
                "status": "modified"
            }
        ],
        "message": "[UIMA-3254] NPE if script cannot be found\n- Generate an interna FileNotFoundException in loadScriptIS\n- This is cought by initializeScript creating its own FileNotFoundException\n- Changed collectionToString to return \"\" when passed null instead of throwing another NPE\n- Added missing @Override annotations\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/uima/sandbox/ruta/trunk@1521087 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/uima-ruta/commit/c45d665c6cda22137e908e0458479e76520cca86",
        "repo": "uima-ruta",
        "unit_tests": [
            "RutaEngineTest.java"
        ]
    },
    "uima-ruta_7bb769c": {
        "bug_id": "uima-ruta_7bb769c",
        "commit": "https://github.com/apache/uima-ruta/commit/7bb769cdbab112f3752a1f9389c3d78b299c907d",
        "file": [
            {
                "additions": 17,
                "blob_url": "https://github.com/apache/uima-ruta/blob/7bb769cdbab112f3752a1f9389c3d78b299c907d/ruta-core/src/main/java/org/apache/uima/ruta/verbalize/RutaVerbalizer.java",
                "changes": 31,
                "contents_url": "https://api.github.com/repos/apache/uima-ruta/contents/ruta-core/src/main/java/org/apache/uima/ruta/verbalize/RutaVerbalizer.java?ref=7bb769cdbab112f3752a1f9389c3d78b299c907d",
                "deletions": 14,
                "filename": "ruta-core/src/main/java/org/apache/uima/ruta/verbalize/RutaVerbalizer.java",
                "patch": "@@ -67,21 +67,24 @@ public void addExternalVerbalizers(IRutaExtension verbalizer) {\n   }\r\n \r\n   public String verbalize(Object element) {\r\n-    if (externalVerbalizers.keySet().contains(element.getClass()) && element instanceof RutaElement) {\r\n-      return externalVerbalizers.get(element.getClass()).verbalize((RutaElement) element, this);\r\n-    } else if (element instanceof AbstractRutaAction) {\r\n-      return actionVerbalizer.verbalize((AbstractRutaAction) element);\r\n-    } else if (element instanceof AbstractRutaCondition) {\r\n-      return conditionVerbalizer.verbalize((AbstractRutaCondition) element);\r\n-    } else if (element instanceof IRutaExpression) {\r\n-      return expressionVerbalizer.verbalize((RutaExpression) element);\r\n-    } else if (element instanceof RutaBlock) {\r\n-      return verbalize((RutaBlock) element, false);\r\n-    } else if (element instanceof RutaElement) {\r\n-      return scriptVerbalizer.verbalize((RutaElement) element);\r\n-    } else {\r\n-      return element.getClass().getSimpleName();\r\n+    if (element != null) {\r\n+      if (externalVerbalizers.keySet().contains(element.getClass()) && element instanceof RutaElement) {\r\n+        return externalVerbalizers.get(element.getClass()).verbalize((RutaElement) element, this);\r\n+      } else if (element instanceof AbstractRutaAction) {\r\n+        return actionVerbalizer.verbalize((AbstractRutaAction) element);\r\n+      } else if (element instanceof AbstractRutaCondition) {\r\n+        return conditionVerbalizer.verbalize((AbstractRutaCondition) element);\r\n+      } else if (element instanceof IRutaExpression) {\r\n+        return expressionVerbalizer.verbalize((RutaExpression) element);\r\n+      } else if (element instanceof RutaBlock) {\r\n+        return verbalize((RutaBlock) element, false);\r\n+      } else if (element instanceof RutaElement) {\r\n+        return scriptVerbalizer.verbalize((RutaElement) element);\r\n+      } else {\r\n+        return element.getClass().getSimpleName();\r\n+      }\r\n     }\r\n+    return \"\";\r\n   }\r\n \r\n   public String verbalizeName(RutaElement element) {\r",
                "raw_url": "https://github.com/apache/uima-ruta/raw/7bb769cdbab112f3752a1f9389c3d78b299c907d/ruta-core/src/main/java/org/apache/uima/ruta/verbalize/RutaVerbalizer.java",
                "sha": "86d23cacb99ade94ddb8aad2af7d18c575096826",
                "status": "modified"
            }
        ],
        "message": "HD-6029: added NPE check in verbalization\n\ngit-svn-id: https://svn.apache.org/repos/asf/uima/ruta/trunk@1859298 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/uima-ruta/commit/7da5d3adfd1e485e5bf49a6998b4c025acc62c2d",
        "repo": "uima-ruta",
        "unit_tests": [
            "RutaVerbalizerTest.java"
        ]
    },
    "uima-ruta_9a24355": {
        "bug_id": "uima-ruta_9a24355",
        "commit": "https://github.com/apache/uima-ruta/commit/9a24355d4df677524647f56f856f125734c9190c",
        "file": [
            {
                "additions": 2,
                "blob_url": "https://github.com/apache/uima-ruta/blob/9a24355d4df677524647f56f856f125734c9190c/ruta-core/src/main/java/org/apache/uima/ruta/rule/RegExpRule.java",
                "changes": 3,
                "contents_url": "https://api.github.com/repos/apache/uima-ruta/contents/ruta-core/src/main/java/org/apache/uima/ruta/rule/RegExpRule.java?ref=9a24355d4df677524647f56f856f125734c9190c",
                "deletions": 1,
                "filename": "ruta-core/src/main/java/org/apache/uima/ruta/rule/RegExpRule.java",
                "patch": "@@ -98,7 +98,8 @@ public ScriptApply apply(RutaStream stream, InferenceCrowd crowd) {\n           ruleMatch.addMatched(0, afs);\r\n         }\r\n       }\r\n-      if (!ruleMatch.getMatchedAnnotationsOfRoot().isEmpty()) {\r\n+      List<AnnotationFS> matchedAnnotationsOfRoot = ruleMatch.getMatchedAnnotationsOfRoot();\r\n+      if (matchedAnnotationsOfRoot != null && !matchedAnnotationsOfRoot.isEmpty()) {\r\n         ruleApply.add(ruleMatch);\r\n       }\r\n     }\r",
                "raw_url": "https://github.com/apache/uima-ruta/raw/9a24355d4df677524647f56f856f125734c9190c/ruta-core/src/main/java/org/apache/uima/ruta/rule/RegExpRule.java",
                "sha": "eed68e2406540cbcfe8ca1cfa114241cb2a1c57f",
                "status": "modified"
            }
        ],
        "message": "UIMA-3051\n- fixed NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/uima/sandbox/ruta/trunk@1500266 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/uima-ruta/commit/217ac69ef38aeb8125b83b997ab70c173a85fc35",
        "repo": "uima-ruta",
        "unit_tests": [
            "RegExpRuleTest.java"
        ]
    },
    "uima-ruta_b9b202c": {
        "bug_id": "uima-ruta_b9b202c",
        "commit": "https://github.com/apache/uima-ruta/commit/b9b202cf48a0dea611235f03c87ca8f9c481f013",
        "file": [
            {
                "additions": 3,
                "blob_url": "https://github.com/apache/uima-ruta/blob/b9b202cf48a0dea611235f03c87ca8f9c481f013/ruta-core/src/main/antlr3/org/apache/uima/ruta/parser/RutaParser.g",
                "changes": 6,
                "contents_url": "https://api.github.com/repos/apache/uima-ruta/contents/ruta-core/src/main/antlr3/org/apache/uima/ruta/parser/RutaParser.g?ref=b9b202cf48a0dea611235f03c87ca8f9c481f013",
                "deletions": 3,
                "filename": "ruta-core/src/main/antlr3/org/apache/uima/ruta/parser/RutaParser.g",
                "patch": "@@ -142,20 +142,20 @@ public void setExternalFactory(RutaExternalFactory factory) {\n \t\r\n    \t    if (e instanceof NoViableAltException) {\r\n \t      NoViableAltException nvae = (NoViableAltException) e;\r\n-\t      String msg = \"Error in line \" + nvae.line + \", \\\"\" + text + \"\\\": found no viable alternative\";\r\n+\t      String msg = \"Error in \"+moduleName+\",  line \" + nvae.line + \", \\\"\" + text + \"\\\": found no viable alternative\";\r\n \t      emitErrorMessage(msg);\r\n \t    } else if (e instanceof MismatchedTokenException) {\r\n \t      MismatchedTokenException mte = (MismatchedTokenException) e;\r\n \t      int expectedInt = mte.expecting;\r\n \t      String stringExpected = getTokenNames()[expectedInt];\r\n-\t      String msg = \"Error in line \" + line + \", \\\"\" + text + \"\\\": expected \" + stringExpected\r\n+\t      String msg = \"Error in \"+moduleName+\", line \" + line + \", \\\"\" + text + \"\\\": expected \" + stringExpected\r\n \t              + \", but found \" + stringFound;\r\n \t      emitErrorMessage(msg);\r\n \t    } else if (e instanceof MissingTokenException) {\r\n \t      MissingTokenException mte = (MissingTokenException) e;\r\n     \t      int missingType = mte.getMissingType();\r\n     \t      String stringMissing = getTokenNames()[missingType];\r\n-    \t      String msg = \"Error in line \" + line + \", \\\"\" + text + \"\\\": missing \" + stringMissing\r\n+    \t      String msg = \"Error in \"+moduleName+\",  line \" + line + \", \\\"\" + text + \"\\\": missing \" + stringMissing\r\n                     + \", but found \" + stringFound;\r\n     \t      emitErrorMessage(msg);\r\n \t    } else {\r",
                "raw_url": "https://github.com/apache/uima-ruta/raw/b9b202cf48a0dea611235f03c87ca8f9c481f013/ruta-core/src/main/antlr3/org/apache/uima/ruta/parser/RutaParser.g",
                "sha": "3981a086dcd5dea5d705fdc8524628678b4be2b1",
                "status": "modified"
            },
            {
                "additions": 6,
                "blob_url": "https://github.com/apache/uima-ruta/blob/b9b202cf48a0dea611235f03c87ca8f9c481f013/ruta-maven-plugin/src/main/java/org/apache/uima/ruta/maven/RutaGenerateDescriptorMojo.java",
                "changes": 9,
                "contents_url": "https://api.github.com/repos/apache/uima-ruta/contents/ruta-maven-plugin/src/main/java/org/apache/uima/ruta/maven/RutaGenerateDescriptorMojo.java?ref=b9b202cf48a0dea611235f03c87ca8f9c481f013",
                "deletions": 3,
                "filename": "ruta-maven-plugin/src/main/java/org/apache/uima/ruta/maven/RutaGenerateDescriptorMojo.java",
                "patch": "@@ -297,11 +297,14 @@ private void createDescriptors(RutaDescriptorFactory factory, URLClassLoader cla\n           RutaBuildOptions options, RutaDescriptorInformation descriptorInformation)\n           throws IOException, RecognitionException, InvalidXMLException,\n           ResourceInitializationException, URISyntaxException, SAXException {\n-    String packageString = descriptorInformation.getPackageString().replaceAll(\"[.]\", \"/\");\n-    String engineOutput = new File(analysisEngineOutputDirectory, packageString + \"/\"\n+    String packageString = \"\";\n+    if(!StringUtils.isBlank(descriptorInformation.getPackageString())) {\n+    \tpackageString = descriptorInformation.getPackageString().replaceAll(\"[.]\", \"/\").concat(\"/\");\n+    }\n+    String engineOutput = new File(analysisEngineOutputDirectory, packageString\n             + descriptorInformation.getScriptName() + analysisEngineSuffix + \".xml\")\n             .getAbsolutePath();\n-    String typeSystemOutput = new File(typeSystemOutputDirectory, packageString + \"/\"\n+    String typeSystemOutput = new File(typeSystemOutputDirectory, packageString\n             + descriptorInformation.getScriptName() + typeSystemSuffix + \".xml\").getAbsolutePath();\n     Pair<AnalysisEngineDescription, TypeSystemDescription> descriptions = factory\n             .createDescriptions(engineOutput, typeSystemOutput, descriptorInformation, options,",
                "raw_url": "https://github.com/apache/uima-ruta/raw/b9b202cf48a0dea611235f03c87ca8f9c481f013/ruta-maven-plugin/src/main/java/org/apache/uima/ruta/maven/RutaGenerateDescriptorMojo.java",
                "sha": "3e3b3c2c95fe6c87114b73a656f34a40cb29a35e",
                "status": "modified"
            }
        ],
        "message": "UIMA-3650\n- fixed NPE for building without package def\n- improve error message in parser\n\ngit-svn-id: https://svn.apache.org/repos/asf/uima/ruta/trunk@1674756 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/uima-ruta/commit/b3b7cff5fd59be4afc8cd43e690871ca2efd523d",
        "repo": "uima-ruta",
        "unit_tests": [
            "RutaGenerateDescriptorMojoTest.java"
        ]
    },
    "uima-ruta_dddd9d8": {
        "bug_id": "uima-ruta_dddd9d8",
        "commit": "https://github.com/apache/uima-ruta/commit/dddd9d8c0fd32b656958febda4f96181970db6fe",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/uima-ruta/blob/dddd9d8c0fd32b656958febda4f96181970db6fe/ruta-core/src/main/java/org/apache/uima/ruta/verbalize/ScriptVerbalizer.java",
                "changes": 2,
                "contents_url": "https://api.github.com/repos/apache/uima-ruta/contents/ruta-core/src/main/java/org/apache/uima/ruta/verbalize/ScriptVerbalizer.java?ref=dddd9d8c0fd32b656958febda4f96181970db6fe",
                "deletions": 1,
                "filename": "ruta-core/src/main/java/org/apache/uima/ruta/verbalize/ScriptVerbalizer.java",
                "patch": "@@ -188,7 +188,7 @@ public String verbalizeRuleElement(RuleElement re) {\n         }\r\n       }\r\n       List<RutaStatement> inlinedActionRules = are.getInlinedActionRules();\r\n-      if (inlinedConditionRules != null && !inlinedActionRules.isEmpty()) {\r\n+      if (inlinedActionRules != null && !inlinedActionRules.isEmpty()) {\r\n         result.append(THEN);\r\n         result.append(CBOPEN);\r\n         for (RutaStatement rutaStatement : inlinedActionRules) {\r",
                "raw_url": "https://github.com/apache/uima-ruta/raw/dddd9d8c0fd32b656958febda4f96181970db6fe/ruta-core/src/main/java/org/apache/uima/ruta/verbalize/ScriptVerbalizer.java",
                "sha": "d3b1c210aad0ea7cc8e64960b39eef350ddd1f63",
                "status": "modified"
            }
        ],
        "message": "no jira - fixed possible NPE in explanation\n\ngit-svn-id: https://svn.apache.org/repos/asf/uima/ruta/trunk@1696531 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/uima-ruta/commit/ca4cee657f508f85ff6968bce7616f656aedfa90",
        "repo": "uima-ruta",
        "unit_tests": [
            "ScriptVerbalizerTest.java"
        ]
    }
}