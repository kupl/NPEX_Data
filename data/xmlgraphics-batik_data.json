[
    {
        "repo": "xmlgraphics-batik",
        "message": "recently introduced HashMap accepts the null key =>\nexplicitely throw a NullPointerException for null composite.\nWas detected by the SVGAcurracyTestValidator...\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@199778 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/e28ccb61379039388c5c4b0bcab86bbcafe5f76f",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/6137909ae2135bc28190f96834e38e0cbaa96df3",
        "bug_id": "xmlgraphics-batik_1",
        "file": [
            {
                "sha": "c81651fd257c3f73324ff57dc6856ada820b8602",
                "filename": "sources/org/apache/batik/svggen/SVGComposite.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/e28ccb61379039388c5c4b0bcab86bbcafe5f76f/sources/org/apache/batik/svggen/SVGComposite.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/e28ccb61379039388c5c4b0bcab86bbcafe5f76f/sources/org/apache/batik/svggen/SVGComposite.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/svggen/SVGComposite.java?ref=e28ccb61379039388c5c4b0bcab86bbcafe5f76f",
                "patch": "@@ -99,7 +99,7 @@ public SVGDescriptor toSVG(GraphicContext gc) {\n      *         equivalent of the input Composite\n      */\n     public SVGCompositeDescriptor toSVG(Composite composite) {\n-        if(composite instanceof AlphaComposite)\n+        if (composite instanceof AlphaComposite)\n             return svgAlphaComposite.toSVG((AlphaComposite)composite);\n         else\n             return svgCustomComposite.toSVG(composite);",
                "deletions": 1
            },
            {
                "sha": "0599ef92b496033f7772f382d57073e4830cb2ec",
                "filename": "sources/org/apache/batik/svggen/SVGCustomComposite.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/e28ccb61379039388c5c4b0bcab86bbcafe5f76f/sources/org/apache/batik/svggen/SVGCustomComposite.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/e28ccb61379039388c5c4b0bcab86bbcafe5f76f/sources/org/apache/batik/svggen/SVGCustomComposite.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/svggen/SVGCustomComposite.java?ref=e28ccb61379039388c5c4b0bcab86bbcafe5f76f",
                "patch": "@@ -52,6 +52,8 @@ public SVGDescriptor toSVG(GraphicContext gc) {\n      *         composite equivalent to the input Composite.\n      */\n     public SVGCompositeDescriptor toSVG(Composite composite) {\n+        if (composite == null)\n+            throw new NullPointerException();\n         SVGCompositeDescriptor compositeDesc =\n             (SVGCompositeDescriptor)descMap.get(composite);\n ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Avoid NPE for element's w/o bounds\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@961322 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/e8609ff2d8328db5b229104e3aba5b3cf34e590d",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/a8621b658e887022ab0bff73f9cfa8ce819906b1",
        "bug_id": "xmlgraphics-batik_2",
        "file": [
            {
                "sha": "351a77fc1d013368921a38b71e2dce2941c2734d",
                "filename": "sources/org/apache/batik/gvt/filter/BackgroundRable8Bit.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/e8609ff2d8328db5b229104e3aba5b3cf34e590d/sources/org/apache/batik/gvt/filter/BackgroundRable8Bit.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/e8609ff2d8328db5b229104e3aba5b3cf34e590d/sources/org/apache/batik/gvt/filter/BackgroundRable8Bit.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/filter/BackgroundRable8Bit.java?ref=e8609ff2d8328db5b229104e3aba5b3cf34e590d",
                "patch": "@@ -102,6 +102,7 @@ static Rectangle2D addBounds(CompositeGraphicsNode cgn,\n \n             // System.out.println(\"GN: \" + gn);\n             Rectangle2D cr2d = gn.getBounds();\n+            if (cr2d == null) continue;\n             AffineTransform at = gn.getTransform();\n             if (at != null)\n                 cr2d = at.createTransformedShape(cr2d).getBounds2D();\n@@ -301,6 +302,7 @@ public Filter getBackground(GraphicsNode gn,\n                     break;\n \n                 Rectangle2D cbounds = childGN.getBounds();\n+                if (cbounds == null) continue;\n                 // System.out.println(\"Child : \" + childGN);\n                 // System.out.println(\"Bounds: \" + cbounds);\n                 // System.out.println(\"      : \" + aoi);",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Fix and NPE when setting an 'unknown' animated attribute\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@738451 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/20eba79bc5581154cf58b354353235a58f7ad9a2",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/e0a3c4f03284808a35907cdc52955b6e48664013",
        "bug_id": "xmlgraphics-batik_3",
        "file": [
            {
                "sha": "de1f3caf47b439893477c72899a574b2ab40fea2",
                "filename": "sources/org/apache/batik/bridge/SVGUseElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/20eba79bc5581154cf58b354353235a58f7ad9a2/sources/org/apache/batik/bridge/SVGUseElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/20eba79bc5581154cf58b354353235a58f7ad9a2/sources/org/apache/batik/bridge/SVGUseElementBridge.java",
                "status": "modified",
                "changes": 29,
                "additions": 17,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGUseElementBridge.java?ref=20eba79bc5581154cf58b354353235a58f7ad9a2",
                "patch": "@@ -447,18 +447,23 @@ public void handleEvent(Event evt) {\n         try {\n             String ns = alav.getNamespaceURI();\n             String ln = alav.getLocalName();\n-            if (ns == null\n-                    && (ln.equals(SVG_X_ATTRIBUTE)\n-                        || ln.equals(SVG_Y_ATTRIBUTE)\n-                        || ln.equals(SVG_TRANSFORM_ATTRIBUTE))) {\n-                node.setTransform(computeTransform((SVGTransformable) e, ctx));\n-                handleGeometryChanged();\n-            } else if (ns == null\n-                    && (ln.equals(SVG_WIDTH_ATTRIBUTE)\n-                        || ln.equals(SVG_HEIGHT_ATTRIBUTE))\n-                    || ns.equals(XLINK_NAMESPACE_URI)\n-                        && (ln.equals(XLINK_HREF_ATTRIBUTE))) {\n-                buildCompositeGraphicsNode(ctx, e, (CompositeGraphicsNode)node);\n+            if (ns == null) {\n+                if (ln.equals(SVG_X_ATTRIBUTE) ||\n+                    ln.equals(SVG_Y_ATTRIBUTE) ||\n+                    ln.equals(SVG_TRANSFORM_ATTRIBUTE)) {\n+                    node.setTransform\n+                        (computeTransform((SVGTransformable) e, ctx));\n+                    handleGeometryChanged();\n+                } \n+                else if (ln.equals(SVG_WIDTH_ATTRIBUTE) ||\n+                         ln.equals(SVG_HEIGHT_ATTRIBUTE))\n+                    buildCompositeGraphicsNode\n+                        (ctx, e, (CompositeGraphicsNode)node);\n+            } else {\n+                if (ns.equals(XLINK_NAMESPACE_URI) &&\n+                    ln.equals(XLINK_HREF_ATTRIBUTE)) \n+                    buildCompositeGraphicsNode\n+                        (ctx, e, (CompositeGraphicsNode)node);\n             }\n         } catch (LiveAttributeException ex) {\n             throw new BridgeException(ctx, ex);",
                "deletions": 12
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Fixed(?) NPE when using getURL in an applet context.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@677245 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/906f803c4c8deccb4a67367baaba56805dc02bb1",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/c8697a149ea9ed8e176bee9e50bb775baef5f655",
        "bug_id": "xmlgraphics-batik_4",
        "file": [
            {
                "sha": "06d9067f70b569ba7025e7adf2244c1e7cf1eeb4",
                "filename": "sources/org/apache/batik/script/rhino/RhinoInterpreter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/906f803c4c8deccb4a67367baaba56805dc02bb1/sources/org/apache/batik/script/rhino/RhinoInterpreter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/906f803c4c8deccb4a67367baaba56805dc02bb1/sources/org/apache/batik/script/rhino/RhinoInterpreter.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/script/rhino/RhinoInterpreter.java?ref=906f803c4c8deccb4a67367baaba56805dc02bb1",
                "patch": "@@ -221,6 +221,7 @@ protected ScriptableObject createGlobalObject(Context ctx) {\n      * @see org.apache.batik.script.rhino.RhinoClassLoader\n      */\n     public AccessControlContext getAccessControlContext() {\n+        if (rhinoClassLoader == null) return null;\n         return rhinoClassLoader.getAccessControlContext();\n     }\n ",
                "deletions": 0
            },
            {
                "sha": "16cc92f589d4e9d16da56fc3542fcae59345415b",
                "filename": "sources/org/apache/batik/script/rhino/WindowWrapper.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/906f803c4c8deccb4a67367baaba56805dc02bb1/sources/org/apache/batik/script/rhino/WindowWrapper.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/906f803c4c8deccb4a67367baaba56805dc02bb1/sources/org/apache/batik/script/rhino/WindowWrapper.java",
                "status": "modified",
                "changes": 16,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/script/rhino/WindowWrapper.java?ref=906f803c4c8deccb4a67367baaba56805dc02bb1",
                "patch": "@@ -175,16 +175,24 @@ public static Object parseXML(Context cx,\n             throw Context.reportRuntimeError(\"invalid argument count\");\n         }\n \n-        AccessControlContext acc =\n-            ((RhinoInterpreter)window.getInterpreter()).getAccessControlContext();\n+        RhinoInterpreter     interp = (RhinoInterpreter)window.getInterpreter();\n+        AccessControlContext acc    = interp.getAccessControlContext();\n \n-        Object ret = AccessController.doPrivileged( new PrivilegedAction() {\n+        PrivilegedAction pa = new PrivilegedAction() {\n                 public Object run() {\n                     return window.parseXML\n                         ((String)Context.jsToJava(args[0], String.class),\n                          (Document)Context.jsToJava(args[1], Document.class));\n                 }\n-            }, acc);\n+            };\n+\n+        Object ret;\n+        // If acc is null we are running in an Applet (or some other\n+        // restrictive environment) so don't sweat security it's \n+        // the \"Browsers\" problem...\n+        if (acc != null) ret = AccessController.doPrivileged(pa , acc);\n+        else             ret = AccessController.doPrivileged(pa);\n+\n         return Context.toObject(ret, thisObj);\n     }\n ",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Prevent NPE if parser isn't set on Document Factory.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@649927 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/0ef6ba47dd1716a54f06f05431d775c83187cc33",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/65630a22d9c17299b51f61e36437c7280e575a29",
        "bug_id": "xmlgraphics-batik_5",
        "file": [
            {
                "sha": "6459337e6f94405165f65beecbbcf1c98d6f85eb",
                "filename": "sources/org/apache/batik/dom/util/SAXDocumentFactory.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0ef6ba47dd1716a54f06f05431d775c83187cc33/sources/org/apache/batik/dom/util/SAXDocumentFactory.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0ef6ba47dd1716a54f06f05431d775c83187cc33/sources/org/apache/batik/dom/util/SAXDocumentFactory.java",
                "status": "modified",
                "changes": 20,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/util/SAXDocumentFactory.java?ref=0ef6ba47dd1716a54f06f05431d775c83187cc33",
                "patch": "@@ -559,15 +559,17 @@ public void startElement(String     uri,\n \n         if (inProlog) {\n             inProlog = false;\n-            try {\n-                isStandalone = parser.getFeature\n-                    (\"http://xml.org/sax/features/is-standalone\");\n-            } catch (SAXNotRecognizedException ex) {\n-            }\n-            try {\n-                xmlVersion = (String) parser.getProperty\n-                    (\"http://xml.org/sax/properties/document-xml-version\");\n-            } catch (SAXNotRecognizedException ex) {\n+            if (parser != null) {\n+                try {\n+                    isStandalone = parser.getFeature\n+                        (\"http://xml.org/sax/features/is-standalone\");\n+                } catch (SAXNotRecognizedException ex) {\n+                }\n+                try {\n+                    xmlVersion = (String) parser.getProperty\n+                        (\"http://xml.org/sax/properties/document-xml-version\");\n+                } catch (SAXNotRecognizedException ex) {\n+                }\n             }\n         }\n ",
                "deletions": 9
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "prevent a potential NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@516914 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/057570d8c7fcb9a297a5e09794320c985072b6f8",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/b65bfe587963868e428e2f1e2e04c6db5483cdcf",
        "bug_id": "xmlgraphics-batik_6",
        "file": [
            {
                "sha": "f8280eb526e4ce0eed51719760576bb7a3d91d59",
                "filename": "sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/057570d8c7fcb9a297a5e09794320c985072b6f8/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/057570d8c7fcb9a297a5e09794320c985072b6f8/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "status": "modified",
                "changes": 8,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGTextElementBridge.java?ref=057570d8c7fcb9a297a5e09794320c985072b6f8",
                "patch": "@@ -2924,9 +2924,11 @@ public Set getTextEnclosureSet(AffineTransform at,\n             }\n \n             Rectangle2D glBounds = layout.getBounds2D();\n-            if (glBounds != null)\n-                glBounds = at.createTransformedShape\n-                    (glBounds).getBounds2D();\n+            if ( glBounds == null ){\n+                continue;\n+            }\n+\n+            glBounds = at.createTransformedShape( glBounds ).getBounds2D();\n \n             if (rect.contains(glBounds)) {\n                 elems.add(elem);",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Fixed repeated NPEs for animateTransforms by-animations.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@515307 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/d9b575cb1f1ff4b542332ff13a072f4cac1e1f46",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/cf574c6f73e720378b614d2df9ef144ecf06a3e2",
        "bug_id": "xmlgraphics-batik_7",
        "file": [
            {
                "sha": "b9616bb5276bb05f54628a534b67a63308e02318",
                "filename": "sources/org/apache/batik/anim/values/AnimatableTransformListValue.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/d9b575cb1f1ff4b542332ff13a072f4cac1e1f46/sources/org/apache/batik/anim/values/AnimatableTransformListValue.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/d9b575cb1f1ff4b542332ff13a072f4cac1e1f46/sources/org/apache/batik/anim/values/AnimatableTransformListValue.java",
                "status": "modified",
                "changes": 78,
                "additions": 71,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/anim/values/AnimatableTransformListValue.java?ref=d9b575cb1f1ff4b542332ff13a072f4cac1e1f46",
                "patch": "@@ -37,6 +37,39 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n  */\n public class AnimatableTransformListValue extends AnimatableValue {\n \n+    /**\n+     * Identity transform value of type 'skewX'.\n+     */\n+    protected static SVGOMTransform IDENTITY_SKEWX = new SVGOMTransform();\n+\n+    /**\n+     * Identity transform value of type 'skewY'.\n+     */\n+    protected static SVGOMTransform IDENTITY_SKEWY = new SVGOMTransform();\n+\n+    /**\n+     * Identity transform value of type 'scale'.\n+     */\n+    protected static SVGOMTransform IDENTITY_SCALE = new SVGOMTransform();\n+\n+    /**\n+     * Identity transform value of type 'rotate'.\n+     */\n+    protected static SVGOMTransform IDENTITY_ROTATE = new SVGOMTransform();\n+\n+    /**\n+     * Identity transform value of type 'translate'.\n+     */\n+    protected static SVGOMTransform IDENTITY_TRANSLATE = new SVGOMTransform();\n+\n+    static {\n+        IDENTITY_SKEWX.setSkewX(0f);\n+        IDENTITY_SKEWY.setSkewY(0f);\n+        IDENTITY_SCALE.setScale(0f, 0f);\n+        IDENTITY_ROTATE.setRotate(0f, 0f, 0f);\n+        IDENTITY_TRANSLATE.setTranslate(0f, 0f);\n+    }\n+\n     /**\n      * List of transforms.\n      */\n@@ -114,15 +147,46 @@ public AnimatableValue interpolate(AnimatableValue result,\n         }\n \n         if (to != null) {\n-            AbstractSVGTransform ft = (AbstractSVGTransform) transforms.lastElement();\n-            int type = ft.getType();\n-            AbstractSVGTransform tt = (AbstractSVGTransform) toTransformList.transforms.lastElement();\n+            AbstractSVGTransform tt =\n+                (AbstractSVGTransform) toTransformList.transforms.lastElement();\n+            AbstractSVGTransform ft = null;\n+            int type;\n+            if (transforms.isEmpty()) {\n+                // For the case of an additive animation with an underlying\n+                // transform list of zero elements.\n+                type = tt.getType();\n+                switch (type) {\n+                    case SVGTransform.SVG_TRANSFORM_SKEWX:\n+                        ft = IDENTITY_SKEWX;\n+                        break;\n+                    case SVGTransform.SVG_TRANSFORM_SKEWY:\n+                        ft = IDENTITY_SKEWY;\n+                        break;\n+                    case SVGTransform.SVG_TRANSFORM_SCALE:\n+                        ft = IDENTITY_SCALE;\n+                        break;\n+                    case SVGTransform.SVG_TRANSFORM_ROTATE:\n+                        ft = IDENTITY_ROTATE;\n+                        break;\n+                    case SVGTransform.SVG_TRANSFORM_TRANSLATE:\n+                        ft = IDENTITY_TRANSLATE;\n+                        break;\n+                }\n+            } else {\n+                ft = (AbstractSVGTransform) transforms.lastElement();\n+                type = ft.getType();\n+            }\n             if (type == tt.getType()) {\n-                AbstractSVGTransform t =\n-                    (AbstractSVGTransform) res.transforms.elementAt(index);\n-                if (t == null) {\n+                AbstractSVGTransform t;\n+                if (res.transforms.isEmpty()) {\n                     t = new SVGOMTransform();\n-                    res.transforms.setElementAt(t, index);\n+                    res.transforms.add(t);\n+                } else {\n+                    t = (AbstractSVGTransform) res.transforms.elementAt(index);\n+                    if (t == null) {\n+                        t = new SVGOMTransform();\n+                        res.transforms.setElementAt(t, index);\n+                    }\n                 }\n                 float x, y, r = 0;\n                 switch (type) {",
                "deletions": 7
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Fix NPEs that might arise when an attribute becomes unanimated.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@513048 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/78f6cfa634c3876bebfecd0987b3c7707cc63580",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/8ca628f3dba943c6bf728554aecf97f0d1804784",
        "bug_id": "xmlgraphics-batik_8",
        "file": [
            {
                "sha": "faac933a8a0000b62779322a5f4bc2cc91044f17",
                "filename": "sources/org/apache/batik/anim/AnimationEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/78f6cfa634c3876bebfecd0987b3c7707cc63580/sources/org/apache/batik/anim/AnimationEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/78f6cfa634c3876bebfecd0987b3c7707cc63580/sources/org/apache/batik/anim/AnimationEngine.java",
                "status": "modified",
                "changes": 23,
                "additions": 16,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/anim/AnimationEngine.java?ref=78f6cfa634c3876bebfecd0987b3c7707cc63580",
                "patch": "@@ -319,7 +319,7 @@ protected float tick(float time, boolean hyperlinking) {\n                     boolean usesUnderlying = false;\n                     AbstractAnimation anim = sandwich.animation;\n                     if (anim != null) {\n-                        av = sandwich.animation.getComposedValue();\n+                        av = anim.getComposedValue();\n                         usesUnderlying =\n                             sandwich.lowestAnimation.usesUnderlyingValue();\n                         anim.isDirty = false;\n@@ -345,9 +345,15 @@ protected float tick(float time, boolean hyperlinking) {\n                 String propertyName = (String) e2.getKey();\n                 Sandwich sandwich = (Sandwich) e2.getValue();\n                 if (sandwich.shouldUpdate || sandwich.animation.isDirty) {\n-                    AnimatableValue av = sandwich.animation.getComposedValue();\n-                    boolean usesUnderlying =\n-                        sandwich.lowestAnimation.usesUnderlyingValue();\n+                    AnimatableValue av = null;\n+                    boolean usesUnderlying = false;\n+                    AbstractAnimation anim = sandwich.animation;\n+                    if (anim != null) {\n+                        av = anim.getComposedValue();\n+                        usesUnderlying =\n+                            sandwich.lowestAnimation.usesUnderlyingValue();\n+                        anim.isDirty = false;\n+                    }\n                     if (usesUnderlying && !sandwich.listenerRegistered) {\n                         target.addTargetListener(null, propertyName, true,\n                                                  targetListener);\n@@ -364,7 +370,6 @@ protected float tick(float time, boolean hyperlinking) {\n                         target.updatePropertyValue(propertyName, av);\n                     }\n                     sandwich.shouldUpdate = false;\n-                    sandwich.animation.isDirty = false;\n                 }\n             }\n \n@@ -375,10 +380,14 @@ protected float tick(float time, boolean hyperlinking) {\n                 String type = (String) e2.getKey();\n                 Sandwich sandwich = (Sandwich) e2.getValue();\n                 if (sandwich.shouldUpdate || sandwich.animation.isDirty) {\n-                    AnimatableValue av = sandwich.animation.getComposedValue();\n+                    AnimatableValue av = null;\n+                    AbstractAnimation anim = sandwich.animation;\n+                    if (anim != null) {\n+                        av = sandwich.animation.getComposedValue();\n+                        anim.isDirty = false;\n+                    }\n                     target.updateOtherValue(type, av);\n                     sandwich.shouldUpdate = false;\n-                    sandwich.animation.isDirty = false;\n                 }\n             }\n         }",
                "deletions": 7
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Avoid NPEs when loading scripts from file: URIs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@488643 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/24641b566dfe9655b5bfd0ae31b54c64db2f06ff",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/73f1f9d88ea67e74723727d70e3bb71dc8c3eb8c",
        "bug_id": "xmlgraphics-batik_9",
        "file": [
            {
                "sha": "bd3d9ce44da734ad112cbd5243d5f708d0cbf6e8",
                "filename": "sources/org/apache/batik/bridge/BaseScriptingEnvironment.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/24641b566dfe9655b5bfd0ae31b54c64db2f06ff/sources/org/apache/batik/bridge/BaseScriptingEnvironment.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/24641b566dfe9655b5bfd0ae31b54c64db2f06ff/sources/org/apache/batik/bridge/BaseScriptingEnvironment.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/BaseScriptingEnvironment.java?ref=24641b566dfe9655b5bfd0ae31b54c64db2f06ff",
                "patch": "@@ -429,7 +429,7 @@ public void loadScripts() {\n                         }\n                     }\n                     if (reader == null) {\n-                        if (mediaType.equals(APPLICATION_ECMASCRIPT)) {\n+                        if (APPLICATION_ECMASCRIPT.equals(mediaType)) {\n                             // No encoding was specified in the MIME type, so\n                             // infer it according to RFC 4329.\n                             if (purl.hasContentTypeParameter(\"version\")) {",
                "deletions": 1
            },
            {
                "sha": "7656309dce0c7eb545016d4654bf9fe47bbc2dcf",
                "filename": "sources/org/apache/batik/util/ParsedURLData.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/24641b566dfe9655b5bfd0ae31b54c64db2f06ff/sources/org/apache/batik/util/ParsedURLData.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/24641b566dfe9655b5bfd0ae31b54c64db2f06ff/sources/org/apache/batik/util/ParsedURLData.java",
                "status": "modified",
                "changes": 6,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/util/ParsedURLData.java?ref=24641b566dfe9655b5bfd0ae31b54c64db2f06ff",
                "patch": "@@ -320,6 +320,9 @@ public String getContentTypeCharset(String userAgent) {\n      */\n     public boolean hasContentTypeParameter(String userAgent, String param) {\n         getContentType(userAgent);\n+        if (contentType == null) {\n+            return false;\n+        }\n         int i = 0;\n         int len = contentType.length();\n         int plen = param.length();\n@@ -367,6 +370,9 @@ public boolean hasContentTypeParameter(String userAgent, String param) {\n      */\n     protected void extractContentTypeParts(String userAgent) {\n         getContentType(userAgent);\n+        if (contentType == null) {\n+            return;\n+        }\n         int i = 0;\n         int len = contentType.length();\n loop1:  while (i < len) {",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Fixed NPE in event dispatch.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@201317 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/832ac8de1f5c96d4c3e624e01d7bd7a824a66cfc",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/5954b973c4689cd35487cf1ac3ce54c403f6b468",
        "bug_id": "xmlgraphics-batik_10",
        "file": [
            {
                "sha": "2185625e662cc034dc7047105cab54f68f488a28",
                "filename": "sources/org/apache/batik/swing/svg/JSVGComponent.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/832ac8de1f5c96d4c3e624e01d7bd7a824a66cfc/sources/org/apache/batik/swing/svg/JSVGComponent.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/832ac8de1f5c96d4c3e624e01d7bd7a824a66cfc/sources/org/apache/batik/swing/svg/JSVGComponent.java",
                "status": "modified",
                "changes": 6,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/swing/svg/JSVGComponent.java?ref=832ac8de1f5c96d4c3e624e01d7bd7a824a66cfc",
                "patch": "@@ -653,11 +653,9 @@ public void install() {\n             // before we install the new document otherwise bad\n             // things can happen with the update manager.\n             addUpdateManagerListener(new UpdateManagerAdapter () {\n-                    UpdateManager um = updateManager;\n                     public void managerStopped(UpdateManagerEvent e) {\n-                        // Remove ourselves from the old update manger,\n-                        // and install the new document.\n-                        um.removeUpdateManagerListener(this);\n+                        // Remove ourselves and install the new document.\n+                        JSVGComponent.this.removeUpdateManagerListener(this);\n                         synchronized (JSVGComponent.this) {\n                             EventQueue.invokeLater(afterStopRunnable);\n                             afterStopRunnable = null;",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Fixed possible NPE\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@201026 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/ba30dffd42813c1acbf00ddca05f453ab856bd79",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/bae6644e07ae3637eb2adbaac64660e28977a9bf",
        "bug_id": "xmlgraphics-batik_11",
        "file": [
            {
                "sha": "64d0d0053f052a6f4da98baa5fdf16e66dd4f1b4",
                "filename": "sources/org/apache/batik/apps/svgbrowser/XMLInputHandler.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ba30dffd42813c1acbf00ddca05f453ab856bd79/sources/org/apache/batik/apps/svgbrowser/XMLInputHandler.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ba30dffd42813c1acbf00ddca05f453ab856bd79/sources/org/apache/batik/apps/svgbrowser/XMLInputHandler.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/apps/svgbrowser/XMLInputHandler.java?ref=ba30dffd42813c1acbf00ddca05f453ab856bd79",
                "patch": "@@ -141,6 +141,10 @@ public boolean accept(ParsedURL purl) {\n      * be handled.\n      */\n     public boolean accept(String path) {\n+        if (path == null) {\n+            return false;\n+        }\n+\n         for (int i=0; i<XVG_FILE_EXTENSIONS.length; i++) {\n             if (path.endsWith(XVG_FILE_EXTENSIONS[i])) {\n                 return true;",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "fix a potential bug. Vincent manages to get a NullPointerException on the method\nisAncestorOf. The fix just ensures that the method does not crash. No futher\ninvestigation has been done to find where the error really comes from.\n\nPR:\nObtained from:\nSubmitted by:\nReviewed by:\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@200062 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/129c5b6d39d099e0c603ea131d46724700e82f97",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/9b70b0af86d610a6e0fe463331357bb4ddcd637c",
        "bug_id": "xmlgraphics-batik_12",
        "file": [
            {
                "sha": "ce76abe7d28ecd30d602e59d518431ca5badfa0a",
                "filename": "sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/129c5b6d39d099e0c603ea131d46724700e82f97/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/129c5b6d39d099e0c603ea131d46724700e82f97/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "status": "modified",
                "changes": 12,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGTextElementBridge.java?ref=129c5b6d39d099e0c603ea131d46724700e82f97",
                "patch": "@@ -495,16 +495,18 @@ protected AttributedString createAttributedString(String s,\n         return as;\n     }\n \n-    // returns true if node1 is an ancestor of node2\n+    /**\n+     * Returns true if node1 is an ancestor of node2\n+     */\n     private boolean nodeAncestorOf(Node node1, Node node2) {\n+        if (node2 == null || node1 == null) {\n+            return false;\n+        }\n         Node parent = node2.getParentNode();\n         while (parent != null && parent != node1) {\n             parent = parent.getParentNode();\n         }\n-        if (parent == node1) {\n-            return true;\n-        }\n-        return false;\n+        return (parent == node1);\n     }\n \n ",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Avoid an NPE when unloading a document that had an animation targetting a\nCSS property on an element that became display:none.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@1065441 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/0a231f73b4794e45d8174aa47334e5b90ad89f79",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/602881ed1c518b39b5495f275173995a2f948b92",
        "bug_id": "xmlgraphics-batik_13",
        "file": [
            {
                "sha": "06ea13907caaf58597b7f933064cec399e35b757",
                "filename": "CHANGES",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a231f73b4794e45d8174aa47334e5b90ad89f79/CHANGES",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a231f73b4794e45d8174aa47334e5b90ad89f79/CHANGES",
                "status": "modified",
                "changes": 6,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/CHANGES?ref=0a231f73b4794e45d8174aa47334e5b90ad89f79",
                "patch": "@@ -12,7 +12,7 @@ Bug fixing is an on-going task, so it is implied in all sub-releases.\n     43411, 43847, 43950, 44553, 44590, 44919, 44936, 44966, 45112,\n     45114, 45117, 45397, 45520, 45883, 45958, 46072, 46124, 46202,\n     46430, 46431, 46855, 46871, 47201, 47202, 48182, 48411, 49889,\n-    50006\n+    50006, 50100\n \n \n 2. New features\n@@ -64,6 +64,10 @@ Bug fixing is an on-going task, so it is implied in all sub-releases.\n   * Avoid an NPE in ttf2svg when resolving substitutions for Arabic script.\n   * ttf2svg now correctly writes out kerning pairs for characters that have\n     no name.\n+  * SVGGraphics2D now serializes font-size values in style=\"\" attributes\n+    with a unit.\n+  * Avoid an NPE when disposing a document that had animations targetting\n+    CSS properties on elements that subsequently became display:none.\n \n 5. Misc\n ",
                "deletions": 1
            },
            {
                "sha": "a2c6e95f7b95f52431cb62ace0b615ff3b74de66",
                "filename": "sources/org/apache/batik/dom/svg/SVGStylableElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a231f73b4794e45d8174aa47334e5b90ad89f79/sources/org/apache/batik/dom/svg/SVGStylableElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a231f73b4794e45d8174aa47334e5b90ad89f79/sources/org/apache/batik/dom/svg/SVGStylableElement.java",
                "status": "modified",
                "changes": 14,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGStylableElement.java?ref=0a231f73b4794e45d8174aa47334e5b90ad89f79",
                "patch": "@@ -226,8 +226,12 @@ public boolean useLinearRGBColorInterpolation() {\n      */\n     public void addTargetListener(String ns, String an, boolean isCSS,\n                                   AnimationTargetListener l) {\n-        if (isCSS && svgContext != null) {\n-            ((SVGAnimationTargetContext) svgContext).addTargetListener(an, l);\n+        if (isCSS) {\n+            if (svgContext != null) {\n+                SVGAnimationTargetContext actx =\n+                    (SVGAnimationTargetContext) svgContext;\n+                actx.addTargetListener(an, l);\n+            }\n         } else {\n             super.addTargetListener(ns, an, isCSS, l);\n         }\n@@ -239,7 +243,11 @@ public void addTargetListener(String ns, String an, boolean isCSS,\n     public void removeTargetListener(String ns, String an, boolean isCSS,\n                                      AnimationTargetListener l) {\n         if (isCSS) {\n-            ((SVGAnimationTargetContext)svgContext).removeTargetListener(an, l);\n+            if (svgContext != null) {\n+                SVGAnimationTargetContext actx =\n+                    (SVGAnimationTargetContext) svgContext;\n+                actx.removeTargetListener(an, l);\n+            }\n         } else {\n             super.removeTargetListener(ns, an, isCSS, l);\n         }",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Defend against some possible NPEs.\nThanks to Bogdan for pointing it out.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@755825 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/b08d9806ad7e5ffebfb8bb1ecbc2c714dc4d9ab2",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/705c89cb0b7dfdc6524c3b4b3eab99f99043ab84",
        "bug_id": "xmlgraphics-batik_14",
        "file": [
            {
                "sha": "984a16d88b779e2f778a4fb1bbc90d807f9c1e78",
                "filename": "sources/org/apache/batik/swing/svg/JSVGComponent.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/b08d9806ad7e5ffebfb8bb1ecbc2c714dc4d9ab2/sources/org/apache/batik/swing/svg/JSVGComponent.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/b08d9806ad7e5ffebfb8bb1ecbc2c714dc4d9ab2/sources/org/apache/batik/swing/svg/JSVGComponent.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/swing/svg/JSVGComponent.java?ref=b08d9806ad7e5ffebfb8bb1ecbc2c714dc4d9ab2",
                "patch": "@@ -843,7 +843,9 @@ public void setGraphicsNode(GraphicsNode gn, boolean createDispatcher) {\n         AffineTransform at = calculateViewingTransform\n             (fragmentIdentifier, elt);\n         CanvasGraphicsNode cgn = getCanvasGraphicsNode(gn);\n-        cgn.setViewingTransform(at);\n+        if (cgn != null) {\n+            cgn.setViewingTransform(at);\n+        }\n         viewingTransform = null;\n         initialTransform = new AffineTransform();\n         setRenderingTransform(initialTransform, false);\n@@ -1045,7 +1047,9 @@ protected boolean updateRenderingTransform() {\n                     CanvasGraphicsNode myCGN = getCanvasGraphicsNode();\n                     public void run() {\n                         synchronized (JSVGComponent.this) {\n-                            myCGN.setViewingTransform(myAT);\n+                            if (myCGN != null) {\n+                                myCGN.setViewingTransform(myAT);\n+                            }\n                             if (viewingTransform == myAT)\n                                 viewingTransform = null;\n                         }",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Ensure motion animations removed from a document don't cause an NPE.\nFixes bug 46124.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@711765 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/454e6b207f87249c001ef90d8882457bf8363a7a",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/c3eed261cbbcbbfbd653befd2b1068cd8f17d586",
        "bug_id": "xmlgraphics-batik_15",
        "file": [
            {
                "sha": "01d8a607dd17a93679bce484f19f639e8f6df1bb",
                "filename": "CHANGES",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/454e6b207f87249c001ef90d8882457bf8363a7a/CHANGES",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/454e6b207f87249c001ef90d8882457bf8363a7a/CHANGES",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/CHANGES?ref=454e6b207f87249c001ef90d8882457bf8363a7a",
                "patch": "@@ -10,7 +10,7 @@ Bug fixing is an on-going task, so it is implied in all sub-releases.\n 1. Bugzilla problem reports fixed:\n \n     44590, 44919, 44936, 44966, 45112, 45114, 45117, 45520, 45883, \n-    44553, 45958\t\n+    44553, 45958, 46124\n \n 2. New features\n \n@@ -35,6 +35,8 @@ Bug fixing is an on-going task, so it is implied in all sub-releases.\n   * Changes to a CDATA section in a <style> element are now detected.\n   * Fixed tight bounds calculation for Quadradic Bezier curves.\n   * Now uses float for Document Dimensions.\n+  * Ensure motion animations that are removed from a document don't\n+    cause an NPE.\n \n 1.7beta1 -> 1.7\n ---------------",
                "deletions": 1
            },
            {
                "sha": "85c1271269b59fbe44bf5bed20b60b771cccbcaf",
                "filename": "sources/org/apache/batik/anim/AnimationEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/454e6b207f87249c001ef90d8882457bf8363a7a/sources/org/apache/batik/anim/AnimationEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/454e6b207f87249c001ef90d8882457bf8363a7a/sources/org/apache/batik/anim/AnimationEngine.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/anim/AnimationEngine.java?ref=454e6b207f87249c001ef90d8882457bf8363a7a",
                "patch": "@@ -386,7 +386,9 @@ protected float tick(float time, boolean hyperlinking) {\n                 Map.Entry e2 = (Map.Entry) j.next();\n                 String type = (String) e2.getKey();\n                 Sandwich sandwich = (Sandwich) e2.getValue();\n-                if (sandwich.shouldUpdate || sandwich.animation.isDirty) {\n+                if (sandwich.shouldUpdate ||\n+                        sandwich.animation != null\n+                            && sandwich.animation.isDirty) {\n                     AnimatableValue av = null;\n                     AbstractAnimation anim = sandwich.animation;\n                     if (anim != null) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Avoid NPE in ParsedURL constructor.  Fixes bug 44054.\n\nSubmitted by: Jeremias M\u00e4rki <jeremias (at) apache.org>\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@606891 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/a7afbd4c9256bcd645a14d6ab485dc2aefe51a21",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/4b319edb9ce72baddb758d4756c756a588977b83",
        "bug_id": "xmlgraphics-batik_16",
        "file": [
            {
                "sha": "53981d963193e00a023e148339af826ceea67451",
                "filename": "CHANGES",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/a7afbd4c9256bcd645a14d6ab485dc2aefe51a21/CHANGES",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/a7afbd4c9256bcd645a14d6ab485dc2aefe51a21/CHANGES",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/CHANGES?ref=a7afbd4c9256bcd645a14d6ab485dc2aefe51a21",
                "patch": "@@ -16,7 +16,7 @@ Bug fixing is an on-going task, so it is implied in all sub-releases.\n     42543, 42645, 42651, 42697, 42698, 42807, 42961, 42963, 42968,\n     43022, 43043, 43045, 43165, 43194, 43195, 43370, 43418, 43446,\n     43638, 43657, 43744, 43760, 43764, 43787, 43854, 43871, 43904,\n-    43953, 44029, 44092\n+    43953, 44029, 44054, 44092\n \n 2. New features\n ",
                "deletions": 1
            },
            {
                "sha": "b4db90f275eb457dd2e486f49b0eb77075904df9",
                "filename": "sources/org/apache/batik/css/engine/CSSEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/a7afbd4c9256bcd645a14d6ab485dc2aefe51a21/sources/org/apache/batik/css/engine/CSSEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/a7afbd4c9256bcd645a14d6ab485dc2aefe51a21/sources/org/apache/batik/css/engine/CSSEngine.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/css/engine/CSSEngine.java?ref=a7afbd4c9256bcd645a14d6ab485dc2aefe51a21",
                "patch": "@@ -824,7 +824,7 @@ public void property(String pname, LexicalUnit lu,\n                         styleDeclarationDocumentHandler.styleMap = null;\n                     } catch (Exception e) {\n                         String m = e.getMessage();\n-                        if (m == null) m = \"\";\n+                        if (m == null) m = e.getClass().getName();\n                         String u = ((documentURI == null)?\"<unknown>\":\n                                     documentURI.toString());\n                         String s = Messages.formatMessage",
                "deletions": 1
            },
            {
                "sha": "1fbda9122aafe16895bc82372910a694053472ad",
                "filename": "sources/org/apache/batik/util/ParsedURL.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/a7afbd4c9256bcd645a14d6ab485dc2aefe51a21/sources/org/apache/batik/util/ParsedURL.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/a7afbd4c9256bcd645a14d6ab485dc2aefe51a21/sources/org/apache/batik/util/ParsedURL.java",
                "status": "modified",
                "changes": 7,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/util/ParsedURL.java?ref=a7afbd4c9256bcd645a14d6ab485dc2aefe51a21",
                "patch": "@@ -229,11 +229,12 @@ public ParsedURL(URL baseURL, String urlStr) {\n      *               the missing pieces will be taken from the baseURL.\n      */\n     public ParsedURL(ParsedURL baseURL, String urlStr) {\n-        userAgent = baseURL.getUserAgent();\n-        if (baseURL != null)\n+        if (baseURL != null) {\n+            userAgent = baseURL.getUserAgent();\n             data = parseURL(baseURL, urlStr);\n-        else\n+        } else {\n             data = parseURL(urlStr);\n+        }\n     }\n \n     /**",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Avoid NPE when accessing the enumeration part of the animated marker\norient value.  Fixes bug 21073, thanks Tonny!\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@591550 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/28c07f8e4ec0f49ba4f6e4d830e8ccf6a01989d2",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/fad88f2efd2e1afb17c63731c682a7ec0cceab02",
        "bug_id": "xmlgraphics-batik_17",
        "file": [
            {
                "sha": "690beea17b500ecec69c0660af7af881b62ff52e",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedMarkerOrientValue.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/28c07f8e4ec0f49ba4f6e4d830e8ccf6a01989d2/sources/org/apache/batik/dom/svg/SVGOMAnimatedMarkerOrientValue.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/28c07f8e4ec0f49ba4f6e4d830e8ccf6a01989d2/sources/org/apache/batik/dom/svg/SVGOMAnimatedMarkerOrientValue.java",
                "status": "modified",
                "changes": 12,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedMarkerOrientValue.java?ref=28c07f8e4ec0f49ba4f6e4d830e8ccf6a01989d2",
                "patch": "@@ -399,6 +399,9 @@ public SVGAngle getAnimVal() {\n          * <b>DOM</b>: Implements {@link SVGAnimatedEnumeration#getBaseVal()}.\n          */\n         public short getBaseVal() {\n+            if (baseAngleVal == null) {\n+                baseAngleVal = new BaseSVGAngle();\n+            }\n             baseAngleVal.revalidate();\n             return baseEnumerationVal;\n         }\n@@ -410,11 +413,17 @@ public short getBaseVal() {\n         public void setBaseVal(short baseVal) throws DOMException {\n             if (baseVal == SVGMarkerElement.SVG_MARKER_ORIENT_AUTO) {\n                 baseEnumerationVal = baseVal;\n+                if (baseAngleVal == null) {\n+                    baseAngleVal = new BaseSVGAngle();\n+                }\n                 baseAngleVal.unitType = SVGAngle.SVG_ANGLETYPE_UNSPECIFIED;\n                 baseAngleVal.value = 0;\n                 baseAngleVal.reset();\n             } else if (baseVal == SVGMarkerElement.SVG_MARKER_ORIENT_ANGLE) {\n                 baseEnumerationVal = baseVal;\n+                if (baseAngleVal == null) {\n+                    baseAngleVal = new BaseSVGAngle();\n+                }\n                 baseAngleVal.reset();\n             }\n         }\n@@ -426,6 +435,9 @@ public short getAnimVal() {\n             if (hasAnimVal) {\n                 return animEnumerationVal;\n             }\n+            if (baseAngleVal == null) {\n+                baseAngleVal = new BaseSVGAngle();\n+            }\n             baseAngleVal.revalidate();\n             return baseEnumerationVal;\n         }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Avoid NPE when painting a GraphicsNode on to a SVGGraphics2D.  Fixes bug 42386.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@579990 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/f22fab9a3c4bf5045589c45d195ca3e197ca8878",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/e82c2ec265002e350ce2e2c68df50b64cd51047a",
        "bug_id": "xmlgraphics-batik_18",
        "file": [
            {
                "sha": "71f8ec0c99d864e865f2c196b8f9c6aa13ebd7a3",
                "filename": "sources/org/apache/batik/ext/awt/image/GraphicsUtil.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f22fab9a3c4bf5045589c45d195ca3e197ca8878/sources/org/apache/batik/ext/awt/image/GraphicsUtil.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f22fab9a3c4bf5045589c45d195ca3e197ca8878/sources/org/apache/batik/ext/awt/image/GraphicsUtil.java",
                "status": "modified",
                "changes": 19,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/GraphicsUtil.java?ref=f22fab9a3c4bf5045589c45d195ca3e197ca8878",
                "patch": "@@ -511,6 +511,10 @@ public static BufferedImage getDestination(Graphics2D g2d) {\n \n         // Check if this is a BufferedImage G2d if so throw an error...\n         GraphicsConfiguration gc = g2d.getDeviceConfiguration();\n+        if (gc == null) {\n+            return null;\n+        }\n+\n         GraphicsDevice gd = gc.getDevice();\n         if (WARN_DESTINATION &&\n             (gd.getType() == GraphicsDevice.TYPE_IMAGE_BUFFER) &&\n@@ -525,12 +529,14 @@ public static BufferedImage getDestination(Graphics2D g2d) {\n \n     public static ColorModel getDestinationColorModel(Graphics2D g2d) {\n         BufferedImage bi = getDestination(g2d);\n-        if (bi != null)\n+        if (bi != null) {\n             return bi.getColorModel();\n+        }\n \n         GraphicsConfiguration gc = g2d.getDeviceConfiguration();\n-        if (gc == null)\n+        if (gc == null) {\n             return null; // Can't tell\n+        }\n \n         // We are going to a BufferedImage but no hint was provided\n         // so we can't determine the destination Color Model.\n@@ -556,15 +562,20 @@ public static ColorSpace getDestinationColorSpace(Graphics2D g2d) {\n \n     public static Rectangle getDestinationBounds(Graphics2D g2d) {\n         BufferedImage bi = getDestination(g2d);\n-        if (bi != null)\n+        if (bi != null) {\n             return new Rectangle(0, 0, bi.getWidth(), bi.getHeight());\n+        }\n \n         GraphicsConfiguration gc = g2d.getDeviceConfiguration();\n+        if (gc == null) {\n+            return null;\n+        }\n \n         // We are going to a BufferedImage but no hint was provided\n         // so we can't determine the destination bounds.\n-        if (gc.getDevice().getType() == GraphicsDevice.TYPE_IMAGE_BUFFER)\n+        if (gc.getDevice().getType() == GraphicsDevice.TYPE_IMAGE_BUFFER) {\n             return null;\n+        }\n \n         // This is a JDK 1.3ism, so we will just return null...\n         // return gc.getBounds();",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Avoid NPE when JSVGScrollPane's CanvasGraphicsNode doesn't return a bounds.\nFixes bug 42381.  Thanks Jeff!\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@579882 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/e82c2ec265002e350ce2e2c68df50b64cd51047a",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/52770e13c6f2205ba82b934e716ac1c27bb18cc0",
        "bug_id": "xmlgraphics-batik_19",
        "file": [
            {
                "sha": "2b8648681a6e09706f8f75e0ae47c1d265de478a",
                "filename": "sources/org/apache/batik/swing/JSVGScrollPane.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/e82c2ec265002e350ce2e2c68df50b64cd51047a/sources/org/apache/batik/swing/JSVGScrollPane.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/e82c2ec265002e350ce2e2c68df50b64cd51047a/sources/org/apache/batik/swing/JSVGScrollPane.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/swing/JSVGScrollPane.java?ref=e82c2ec265002e350ce2e2c68df50b64cd51047a",
                "patch": "@@ -604,7 +604,10 @@ protected Rectangle2D getViewBoxRect() {\n         GraphicsNode gn = canvas.getGraphicsNode();\n         if (gn == null) return null;\n \n-        return (Rectangle2D)gn.getBounds().clone();\n+        Rectangle2D bounds = gn.getBounds();\n+        if (bounds == null) return null;\n+\n+        return (Rectangle2D) bounds.clone();\n     }\n \n     /**",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Avoid NPE when cloning <symbol> and <image> Elements.\nFixes bug 42032.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@577978 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/c099b1b7cbeeae7b776c52b8b90808a835297ce5",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/d546c388db69a45a90d6f3e74d1e17d920ddf4ec",
        "bug_id": "xmlgraphics-batik_20",
        "file": [
            {
                "sha": "55e453db792cefcb85786c86df109de96fc70cfe",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMImageElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/c099b1b7cbeeae7b776c52b8b90808a835297ce5/sources/org/apache/batik/dom/svg/SVGOMImageElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/c099b1b7cbeeae7b776c52b8b90808a835297ce5/sources/org/apache/batik/dom/svg/SVGOMImageElement.java",
                "status": "modified",
                "changes": 3,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMImageElement.java?ref=c099b1b7cbeeae7b776c52b8b90808a835297ce5",
                "patch": "@@ -100,8 +100,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n     /**\n      * The 'preserveAspectRatio' attribute value.\n      */\n-    protected SVGOMAnimatedPreserveAspectRatio preserveAspectRatio =\n-        createLiveAnimatedPreserveAspectRatio();\n+    protected SVGOMAnimatedPreserveAspectRatio preserveAspectRatio;\n \n     /**\n      * Creates a new SVGOMImageElement object.",
                "deletions": 2
            },
            {
                "sha": "51cc6057bcbdb1ff4fdaa6aeecd1ffcbd7def8eb",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMSymbolElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/c099b1b7cbeeae7b776c52b8b90808a835297ce5/sources/org/apache/batik/dom/svg/SVGOMSymbolElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/c099b1b7cbeeae7b776c52b8b90808a835297ce5/sources/org/apache/batik/dom/svg/SVGOMSymbolElement.java",
                "status": "modified",
                "changes": 3,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMSymbolElement.java?ref=c099b1b7cbeeae7b776c52b8b90808a835297ce5",
                "patch": "@@ -58,8 +58,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n     /**\n      * The 'preserveAspectRatio' attribute value.\n      */\n-    protected SVGOMAnimatedPreserveAspectRatio preserveAspectRatio =\n-        createLiveAnimatedPreserveAspectRatio();\n+    protected SVGOMAnimatedPreserveAspectRatio preserveAspectRatio;\n \n     /**\n      * The attribute initializer.",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Avoid NPE when event-base timing specifiers reference an element by ID\nwithin a <use> shadow tree (bug 41955).\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@569999 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/e44f67ca466cbcf81e3c6a54fbb2f8cb5f068a8c",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/b2ee0b7b3bccb5c646ab30eb73a144b674f2315e",
        "bug_id": "xmlgraphics-batik_21",
        "file": [
            {
                "sha": "209e9570e374ba9343debe0c66e7d242505e909a",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMUseShadowRoot.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/e44f67ca466cbcf81e3c6a54fbb2f8cb5f068a8c/sources/org/apache/batik/dom/svg/SVGOMUseShadowRoot.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/e44f67ca466cbcf81e3c6a54fbb2f8cb5f068a8c/sources/org/apache/batik/dom/svg/SVGOMUseShadowRoot.java",
                "status": "modified",
                "changes": 8,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMUseShadowRoot.java?ref=e44f67ca466cbcf81e3c6a54fbb2f8cb5f068a8c",
                "patch": "@@ -34,7 +34,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n  */\n public class SVGOMUseShadowRoot\n         extends AbstractDocumentFragment\n-        implements CSSNavigableNode {\n+        implements CSSNavigableNode, IdContainer {\n \n     /**\n      * The parent CSS element.\n@@ -77,6 +77,12 @@ public boolean isReadonly() {\n     public void setReadonly(boolean v) {\n     }\n \n+    // IdContainer ///////////////////////////////////////////////////////////\n+\n+    public Element getElementById(String id) {\n+        return ownerDocument.getChildElementById(this, id);\n+    }\n+\n     // CSSNavigableNode //////////////////////////////////////////////////////\n \n     /**",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Defend against an NPE if the class isn't in a jar.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@568875 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/5002713b1e7d613bed03c6edd88bad1af0bf75a4",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/d6ea6dbdf543629985fcc93ba7c7e6aef9087ec0",
        "bug_id": "xmlgraphics-batik_22",
        "file": [
            {
                "sha": "ece08f596a81caa34197fbf332a831bcbeb6f711",
                "filename": "sources/org/apache/batik/Version.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/5002713b1e7d613bed03c6edd88bad1af0bf75a4/sources/org/apache/batik/Version.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/5002713b1e7d613bed03c6edd88bad1af0bf75a4/sources/org/apache/batik/Version.java",
                "status": "modified",
                "changes": 6,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/Version.java?ref=5002713b1e7d613bed03c6edd88bad1af0bf75a4",
                "patch": "@@ -67,7 +67,11 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n      * </p>\n      */\n     public static String getVersion() {\n-        String version = Version.class.getPackage().getImplementationVersion();\n+        Package pkg = Version.class.getPackage();\n+        String version = null;\n+        if (pkg != null) {\n+            version = pkg.getImplementationVersion();\n+        }\n         String headURL = \"$HeadURL$\";\n         String prefix = \"$HeadURL: \";\n         String suffix = \"/sources/org/apache/batik/Version.java $\";",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Fixed memory leak test to avoid false positives.\n2. Avoid NPE in gvt/flow/FlowTextPainter.java.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@503369 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/05cbb69bbb9d6b1210efde1f339dbea1acef96a3",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/3a86644c217b5bc0e9459eabc4ff3df9e711322b",
        "bug_id": "xmlgraphics-batik_23",
        "file": [
            {
                "sha": "85dca6bc5bb759c839815d9b1c687dd827f1d25b",
                "filename": "sources/org/apache/batik/gvt/flow/FlowTextPainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/05cbb69bbb9d6b1210efde1f339dbea1acef96a3/sources/org/apache/batik/gvt/flow/FlowTextPainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/05cbb69bbb9d6b1210efde1f339dbea1acef96a3/sources/org/apache/batik/gvt/flow/FlowTextPainter.java",
                "status": "modified",
                "changes": 26,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/flow/FlowTextPainter.java?ref=05cbb69bbb9d6b1210efde1f339dbea1acef96a3",
                "patch": "@@ -262,22 +262,26 @@ public static boolean textWrap(AttributedCharacterIterator [] acis,\n         return overflow;\n     }\n \n-    static int [] allocWordMap(int [] wordMap, int sz) {\n+    static int[] allocWordMap(int[] wordMap, int sz) {\n         if (wordMap != null) {\n-            if (sz <= wordMap.length)\n+            if (sz <= wordMap.length) {\n                 return wordMap;\n-            if (sz < wordMap.length*2)\n-                sz = wordMap.length*2;\n+            }\n+            if (sz < wordMap.length * 2) {\n+                sz = wordMap.length * 2;\n+            }\n         }\n \n         // we have a problem when wordMap actually IS null....\n-        int [] ret = new int[sz];\n-        int ext=0;\n-        if (wordMap != null)\n-            ext = wordMap.length;\n-        if (sz < ext) ext = sz;\n-        System.arraycopy( wordMap, 0, ret, 0, ext );\n-        Arrays.fill( ret, ext, sz, -1 );\n+        int[] ret = new int[sz];\n+        int ext = wordMap != null ? wordMap.length : 0;\n+        if (sz < ext) {\n+            ext = sz;\n+        }\n+        if (ext != 0) {\n+            System.arraycopy(wordMap, 0, ret, 0, ext);\n+        }\n+        Arrays.fill(ret, ext, sz, -1);\n \n         return ret;\n     }",
                "deletions": 11
            },
            {
                "sha": "1e53009e44c70718f8c26e95c32bb9b8ade59cbe",
                "filename": "test-sources/org/apache/batik/swing/JSVGCanvasHandler.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/05cbb69bbb9d6b1210efde1f339dbea1acef96a3/test-sources/org/apache/batik/swing/JSVGCanvasHandler.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/05cbb69bbb9d6b1210efde1f339dbea1acef96a3/test-sources/org/apache/batik/swing/JSVGCanvasHandler.java",
                "status": "modified",
                "changes": 34,
                "additions": 23,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-sources/org/apache/batik/swing/JSVGCanvasHandler.java?ref=05cbb69bbb9d6b1210efde1f339dbea1acef96a3",
                "patch": "@@ -23,6 +23,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n import java.awt.event.WindowAdapter;\n import java.awt.event.WindowEvent;\n import java.awt.event.WindowListener;\n+import java.lang.ref.WeakReference;\n \n import javax.swing.JFrame;\n \n@@ -107,7 +108,7 @@ public static String fmt(String key, Object []args) {\n \n     JFrame     frame = null;\n     JSVGCanvas canvas = null;\n-    UpdateManager updateManager = null;\n+    WeakReference updateManager = null;\n     WindowListener wl = null;\n     InitialRenderListener irl = null;\n     LoadListener ll = null;\n@@ -156,7 +157,7 @@ public void runCanvas(String desc) {\n                 checkRender();\n                 if ( abort) return;\n \n-                if (updateManager == null)\n+                if (updateManager == null || updateManager.get() == null)\n                     return;\n \n                 while (!done) {\n@@ -213,22 +214,24 @@ public void windowClosing(WindowEvent e) {\n     public void scriptDone() {\n         Runnable r = new Runnable() {\n                 public void run() {\n-                    if (updateManager != null)\n-                        updateManager.forceRepaint();\n+                    UpdateManager um = getUpdateManager();\n+                    if (um != null)\n+                        um.forceRepaint();\n                     synchronized(renderMonitor) {\n                         done = true;\n                         failed = false;\n                         renderMonitor.notifyAll();\n                     }\n                 }\n             };\n-        if ((updateManager == null) ||\n-            (!updateManager.isRunning())){\n+        UpdateManager um = getUpdateManager();\n+        if ((um == null) ||\n+            (!um.isRunning())){\n             // Don't run it in this thread or we deadlock the event queue.\n             Thread t = new Thread(r);\n             t.start();\n         } else {\n-            updateManager.getUpdateRunnableQueue().invokeLater(r);\n+            um.getUpdateRunnableQueue().invokeLater(r);\n         }\n     }\n \n@@ -286,10 +289,11 @@ public void checkUpdate() {\n     }\n \n     public void bindHost() {\n+        UpdateManager um = getUpdateManager();\n         RunnableQueue rq;\n-        rq = updateManager.getUpdateRunnableQueue();\n+        rq = um.getUpdateRunnableQueue();\n         rq.invokeLater(new Runnable() {\n-                UpdateManager um = updateManager;\n+                UpdateManager um = getUpdateManager();\n                 public void run() {\n                     ScriptingEnvironment scriptEnv;\n                     scriptEnv = um.getScriptingEnvironment();\n@@ -306,6 +310,13 @@ public void run() {\n             });\n     }\n \n+    protected UpdateManager getUpdateManager() {\n+        if (updateManager != null) {\n+            return (UpdateManager) updateManager.get();\n+        }\n+        return null;\n+    }\n+\n     class UpdateRenderListener implements UpdateManagerListener {\n         public void updateCompleted(UpdateManagerEvent e) {\n             synchronized(renderMonitor){\n@@ -374,9 +385,10 @@ public void documentLoadingCancelled(SVGDocumentLoaderEvent e) {\n         public void svgLoadEventDispatchStarted(SVGLoadEventDispatcherEvent e){\n             SVGLoadEventDispatcher dispatcher;\n             dispatcher = (SVGLoadEventDispatcher)e.getSource();\n-            updateManager = dispatcher.getUpdateManager();\n+            UpdateManager um = dispatcher.getUpdateManager();\n+            updateManager = new WeakReference(um);\n             url = new UpdateRenderListener();\n-            updateManager.addUpdateManagerListener(url);\n+            um.addUpdateManagerListener(url);\n         }\n     }\n     ",
                "deletions": 11
            },
            {
                "sha": "c09a5384d025504301d715cde4c4890c959674fe",
                "filename": "test-sources/org/apache/batik/swing/JSVGMemoryLeakTest.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/05cbb69bbb9d6b1210efde1f339dbea1acef96a3/test-sources/org/apache/batik/swing/JSVGMemoryLeakTest.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/05cbb69bbb9d6b1210efde1f339dbea1acef96a3/test-sources/org/apache/batik/swing/JSVGMemoryLeakTest.java",
                "status": "modified",
                "changes": 25,
                "additions": 19,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-sources/org/apache/batik/swing/JSVGMemoryLeakTest.java?ref=05cbb69bbb9d6b1210efde1f339dbea1acef96a3",
                "patch": "@@ -20,6 +20,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n \n import java.io.File;\n import java.net.MalformedURLException;\n+import java.lang.ref.WeakReference;\n \n import javax.swing.JFrame;\n import javax.swing.SwingUtilities;\n@@ -55,7 +56,19 @@ public JSVGMemoryLeakTest() {\n     boolean done;\n     JSVGCanvasHandler handler;\n     JFrame theFrame;\n-    JSVGCanvas theCanvas;\n+\n+    /**\n+     * A WeakReference to the JSVGCanvas.\n+     */\n+    WeakReference theCanvas;\n+\n+    protected void setTheCanvas(JSVGCanvas c) {\n+        theCanvas = new WeakReference(c);\n+    }\n+\n+    protected JSVGCanvas getTheCanvas() {\n+        return (JSVGCanvas) theCanvas.get();\n+    }\n \n     public static String fmt(String key, Object []args) {\n         return TestMessages.formatMessage(key, args);\n@@ -74,8 +87,8 @@ public TestReport doSomething() throws Exception {\n         SwingUtilities.invokeAndWait( new Runnable() {\n                 public void run() {\n                     // System.out.println(\"In Invoke\");\n-                    theFrame.remove(theCanvas);\n-                    theCanvas.dispose();\n+                    theFrame.remove(getTheCanvas());\n+                    getTheCanvas().dispose();\n \n                     theFrame.dispose();\n                     theFrame=null;\n@@ -119,7 +132,7 @@ public void scriptDone() {\n \n     public void registerElement(Element e, String desc) {\n         registerObjectDesc(e, desc);\n-        UpdateManager um = theCanvas.getUpdateManager();\n+        UpdateManager um = getTheCanvas().getUpdateManager();\n         BridgeContext bc = um.getBridgeContext();\n         GraphicsNode gn = bc.getGraphicsNode(e);\n         if (gn != null)\n@@ -134,7 +147,7 @@ public void registerElement(Element e, String desc) {\n     }\n \n     public void registerResourceContext(String uriSubstring, String desc) {\n-        UpdateManager um = theCanvas.getUpdateManager();\n+        UpdateManager um = getTheCanvas().getUpdateManager();\n         BridgeContext bc = um.getBridgeContext();\n         BridgeContext[] ctxs = bc.getChildContexts();\n         for (int i = 0; i < ctxs.length; i++) {\n@@ -152,7 +165,7 @@ public void registerResourceContext(String uriSubstring, String desc) {\n     /* JSVGCanvasHandler.Delegate Interface */\n     public boolean canvasInit(JSVGCanvas canvas) {\n         // System.err.println(\"In Init\");\n-        theCanvas = canvas;\n+        setTheCanvas(canvas);\n         theFrame  = handler.getFrame();\n \n         File f = new File(getId());",
                "deletions": 6
            },
            {
                "sha": "5edf80ebd54bb7a5946ab38252495a196f23eaff",
                "filename": "test-sources/org/apache/batik/swing/NullSetSVGDocumentTest.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/05cbb69bbb9d6b1210efde1f339dbea1acef96a3/test-sources/org/apache/batik/swing/NullSetSVGDocumentTest.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/05cbb69bbb9d6b1210efde1f339dbea1acef96a3/test-sources/org/apache/batik/swing/NullSetSVGDocumentTest.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-sources/org/apache/batik/swing/NullSetSVGDocumentTest.java?ref=05cbb69bbb9d6b1210efde1f339dbea1acef96a3",
                "patch": "@@ -84,7 +84,7 @@ public void run() {\n \n     /* JSVGCanvasHandler.Delegate Interface */\n     public boolean canvasInit(JSVGCanvas canvas) {\n-        theCanvas = canvas;\n+        setTheCanvas(canvas);\n         theFrame  = handler.getFrame();\n \n         canvas.setDocumentState(JSVGCanvas.ALWAYS_DYNAMIC);",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Fix NPE when removing an active animation from the document.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@495139 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/c6ef30d8e181de7e904d44252e25bd5b622dc291",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/76f8659938293a72a4e588c3a44f2774c184fa1c",
        "bug_id": "xmlgraphics-batik_24",
        "file": [
            {
                "sha": "3d5a89d82830bffb1f4575e63ead5209761066aa",
                "filename": "sources/org/apache/batik/anim/AnimationEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/c6ef30d8e181de7e904d44252e25bd5b622dc291/sources/org/apache/batik/anim/AnimationEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/c6ef30d8e181de7e904d44252e25bd5b622dc291/sources/org/apache/batik/anim/AnimationEngine.java",
                "status": "modified",
                "changes": 13,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/anim/AnimationEngine.java?ref=c6ef30d8e181de7e904d44252e25bd5b622dc291",
                "patch": "@@ -278,9 +278,15 @@ protected float tick(float time, boolean hyperlinking) {\n                 String localName = (String) e2.getKey2();\n                 Sandwich sandwich = (Sandwich) e2.getValue();\n                 if (sandwich.shouldUpdate || sandwich.animation.isDirty) {\n-                    AnimatableValue av = sandwich.animation.getComposedValue();\n-                    boolean usesUnderlying =\n-                        sandwich.lowestAnimation.usesUnderlyingValue();\n+                    AnimatableValue av = null;\n+                    boolean usesUnderlying = false;\n+                    AbstractAnimation anim = sandwich.animation;\n+                    if (anim != null) {\n+                        av = sandwich.animation.getComposedValue();\n+                        usesUnderlying =\n+                            sandwich.lowestAnimation.usesUnderlyingValue();\n+                        anim.isDirty = false;\n+                    }\n                     if (usesUnderlying && !sandwich.listenerRegistered) {\n                         target.addTargetListener(namespaceURI, localName, false,\n                                                  targetListener);\n@@ -292,7 +298,6 @@ protected float tick(float time, boolean hyperlinking) {\n                     }\n                     target.updateAttributeValue(namespaceURI, localName, av);\n                     sandwich.shouldUpdate = false;\n-                    sandwich.animation.isDirty = false;\n                 }\n             }\n ",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Prevent NPE when top level SVG element lacks a positioning transform\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@473694 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/f0d9483a53762fce69d03d4a39901293a4dd36e3",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/025881ca70ad853a3dcc9c558bcfe5b02b239c54",
        "bug_id": "xmlgraphics-batik_25",
        "file": [
            {
                "sha": "2e92a941f126f80b822839cff8ad06fc9ae378e5",
                "filename": "sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f0d9483a53762fce69d03d4a39901293a4dd36e3/sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f0d9483a53762fce69d03d4a39901293a4dd36e3/sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGSVGElementBridge.java?ref=f0d9483a53762fce69d03d4a39901293a4dd36e3",
                "patch": "@@ -362,7 +362,8 @@ public void handleDOMAttrModifiedEvent(MutationEvent evt) {\n                         try {\n                             AffineTransform at;\n                             at = cgn.getPositionTransform();\n-                            at = new AffineTransform(at);\n+                            if (at == null) at = new AffineTransform();\n+                            else            at = new AffineTransform(at);\n                             at.concatenate(newVT);\n                             at = at.createInverse(); // clip in user space\n                             clip = at.createTransformedShape(clip);",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Better exception reporting for animation element timing attribute errors.\n2. Fix for NPE with override stylesheet processing.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@429600 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/7877e5a7892d67a91c765a21c24b6e0f6660faa2",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/3b8256fa64d14b7e8e07320e3f92d4dbee62c9e9",
        "bug_id": "xmlgraphics-batik_26",
        "file": [
            {
                "sha": "7d338008de78f7d34a0db6516830d40daa078931",
                "filename": "sources/org/apache/batik/anim/timing/TimedElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/7877e5a7892d67a91c765a21c24b6e0f6660faa2/sources/org/apache/batik/anim/timing/TimedElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/7877e5a7892d67a91c765a21c24b6e0f6660faa2/sources/org/apache/batik/anim/timing/TimedElement.java",
                "status": "modified",
                "changes": 44,
                "additions": 34,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/anim/timing/TimedElement.java?ref=7877e5a7892d67a91c765a21c24b6e0f6660faa2",
                "patch": "@@ -923,12 +923,18 @@ public void parseAttributes(String begin, String dur, String end,\n      * Parses a new 'begin' attribute.\n      */\n     protected void parseBegin(String begin) {\n-        if (begin.length() == 0) {\n-            begin = SMIL_BEGIN_DEFAULT_VALUE;\n+        try {\n+            if (begin.length() == 0) {\n+                begin = SMIL_BEGIN_DEFAULT_VALUE;\n+            }\n+            beginTimes = TimingSpecifierListProducer.parseTimingSpecifierList\n+                (TimedElement.this, true, begin,\n+                 root.useSVG11AccessKeys, root.useSVG12AccessKeys);\n+        } catch (ParseException ex) {\n+            throw createException\n+                (\"attribute.malformed\",\n+                 new Object[] { null, SMIL_BEGIN_ATTRIBUTE });\n         }\n-        beginTimes = TimingSpecifierListProducer.parseTimingSpecifierList\n-            (TimedElement.this, true, begin,\n-             root.useSVG11AccessKeys, root.useSVG12AccessKeys);\n     }\n \n     /**\n@@ -978,9 +984,15 @@ public void clockValue(float newClockValue) {\n      * Parses a new 'end' attribute.\n      */\n     protected void parseEnd(String end) {\n-        endTimes = TimingSpecifierListProducer.parseTimingSpecifierList\n-            (TimedElement.this, false, end,\n-             root.useSVG11AccessKeys, root.useSVG12AccessKeys);\n+        try {\n+            endTimes = TimingSpecifierListProducer.parseTimingSpecifierList\n+                (TimedElement.this, false, end,\n+                 root.useSVG11AccessKeys, root.useSVG12AccessKeys);\n+        } catch (ParseException ex) {\n+            throw createException\n+                (\"attribute.malformed\",\n+                 new Object[] { null, SMIL_END_ATTRIBUTE });\n+        }\n     }\n \n     /**\n@@ -994,7 +1006,13 @@ protected void parseMin(String min) {\n             if (min.length() == 0) {\n                 this.min = 0;\n             } else {\n-                this.min = parseClockValue(min);\n+                try {\n+                    this.min = parseClockValue(min);\n+                } catch (ParseException ex) {\n+                    throw createException\n+                        (\"attribute.malformed\",\n+                         new Object[] { null, SMIL_MIN_ATTRIBUTE });\n+                }\n                 if (this.min < 0) {\n                     this.min = 0;\n                 }\n@@ -1013,7 +1031,13 @@ protected void parseMax(String max) {\n             if (max.length() == 0 || max.equals(SMIL_INDEFINITE_VALUE)) {\n                 this.max = INDEFINITE;\n             } else {\n-                this.max = parseClockValue(max);\n+                try {\n+                    this.max = parseClockValue(max);\n+                } catch (ParseException ex) {\n+                    throw createException\n+                        (\"attribute.malformed\",\n+                         new Object[] { null, SMIL_MAX_ATTRIBUTE });\n+                }\n                 if (this.max < 0) {\n                     this.max = 0;\n                 }",
                "deletions": 10
            },
            {
                "sha": "b1700cb8c3d9980071e8b5c4904d97211bc8f993",
                "filename": "sources/org/apache/batik/css/engine/CSSEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/7877e5a7892d67a91c765a21c24b6e0f6660faa2/sources/org/apache/batik/css/engine/CSSEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/7877e5a7892d67a91c765a21c24b6e0f6660faa2/sources/org/apache/batik/css/engine/CSSEngine.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/css/engine/CSSEngine.java?ref=7877e5a7892d67a91c765a21c24b6e0f6660faa2",
                "patch": "@@ -57,7 +57,6 @@\n import org.w3c.dom.events.EventTarget;\n import org.w3c.dom.events.MutationEvent;\n \n-\n /**\n  * This is the base class for all the CSS engines.\n  *\n@@ -2532,7 +2531,8 @@ public void overrideStylePropertyRemoved(CSSStylableElement elt,\n                 if (idx == declaration.getIndex(i)) {\n                     declaration.remove(i);\n                     StyleMap style = elt.getComputedStyleMap(null);\n-                    if (style.getOrigin(idx) == StyleMap.OVERRIDE_ORIGIN\n+                    if (style != null\n+                            && style.getOrigin(idx) == StyleMap.OVERRIDE_ORIGIN\n                             && style.isComputed(idx)) {\n                         invalidateProperties\n                             (elt, new int[] { idx }, null, true);",
                "deletions": 2
            },
            {
                "sha": "2ad9cfba2deb92989d41105f749dbf04e77d4460",
                "filename": "sources/org/apache/batik/dom/svg/SVGStylableElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/7877e5a7892d67a91c765a21c24b6e0f6660faa2/sources/org/apache/batik/dom/svg/SVGStylableElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/7877e5a7892d67a91c765a21c24b6e0f6660faa2/sources/org/apache/batik/dom/svg/SVGStylableElement.java",
                "status": "modified",
                "changes": 1,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGStylableElement.java?ref=7877e5a7892d67a91c765a21c24b6e0f6660faa2",
                "patch": "@@ -173,7 +173,6 @@ public StyleDeclarationProvider getOverrideStyleDeclarationProvider() {\n      */\n     public void updatePropertyValue(String pn, AnimatableValue val) {\n         CSSStyleDeclaration over = getOverrideStyle();\n-        //System.err.println(e.getAttributeNS(null, \"id\") + \".\" + pn + \" val is \" + val);\n         if (val == null) {\n             over.removeProperty(pn);\n         } else {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Fixed NPE when modifying viewBox on an 'svg' element that involved only a\n   translation.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@385917 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/5fe33e53097519c467c9ef4b7618a7ab730ce54c",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/9a78dbd2e8254b371374690acd35dd07d27b417e",
        "bug_id": "xmlgraphics-batik_27",
        "file": [
            {
                "sha": "9ca8c32b753a3bed678f39eae2345c2aa17daefd",
                "filename": "sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/5fe33e53097519c467c9ef4b7618a7ab730ce54c/sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/5fe33e53097519c467c9ef4b7618a7ab730ce54c/sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "status": "modified",
                "changes": 11,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGSVGElementBridge.java?ref=5fe33e53097519c467c9ef4b7618a7ab730ce54c",
                "patch": "@@ -1,6 +1,6 @@\n /*\n \n-   Copyright 2001-2004  The Apache Software Foundation \n+   Copyright 2001-2004,2006  The Apache Software Foundation \n \n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n@@ -376,9 +376,12 @@ public void handleDOMAttrModifiedEvent(MutationEvent evt) {\n                 \n                 if (clip != null) {\n                     try {\n-                        AffineTransform at;\n-                        at = cgn.getPositionTransform();\n-                        at = new AffineTransform(at);\n+                        AffineTransform at = cgn.getPositionTransform();\n+                        if (at == null) {\n+                            at = new AffineTransform();\n+                        } else {\n+                            at = new AffineTransform(at);\n+                        }\n                         at.concatenate(newVT);\n                         at = at.createInverse(); // clip in user space\n                         clip = at.createTransformedShape(clip);",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Fix for NPE when flowPara is empty.\nNow generates null ACI for TextNode (instead of unadorned\n'space').\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@325875 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/7946f5cde30c6ca2970915a45ebd87f7b418a78f",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/5fac5c42dfdab85cf2647dbb7a51e231406a8139",
        "bug_id": "xmlgraphics-batik_28",
        "file": [
            {
                "sha": "f98f0c423abc08194c336933f25ae7f12d2a9b79",
                "filename": "sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "status": "modified",
                "changes": 137,
                "additions": 88,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGTextElementBridge.java?ref=7946f5cde30c6ca2970915a45ebd87f7b418a78f",
                "patch": "@@ -544,12 +544,17 @@ protected boolean isParentDisplayed(Node childNode) {\n     protected void computeLaidoutText(BridgeContext ctx, \n                                       Element e,\n                                       GraphicsNode node) {\n+        TextNode tn = (TextNode)node;\n         AttributedString as = buildAttributedString(ctx, e);\n+        if (as == null) {\n+            tn.setAttributedCharacterIterator(null);\n+            return;\n+        }\n+\n         addGlyphPositionAttributes(as, e, ctx);\n         if (ctx.isDynamic()) {\n             laidoutText = new AttributedString(as.getIterator());\n         }\n-        TextNode tn = (TextNode)node;\n         elemTPI.clear();\n         // Add null TPI objects to the text (after we set it on the\n         // Text we will swap in the correct values.\n@@ -756,6 +761,8 @@ protected void rebuildACI() {\n             return;\n \n         TextNode tn = (TextNode)node;\n+        if (tn.getAttributedCharacterIterator() == null)\n+            return;\n \n         TextPaintInfo pi, oldPI;\n         if ( cssProceedElement == e ){\n@@ -785,6 +792,8 @@ protected void rebuildACI() {\n \n     int getElementStartIndex\n         (AttributedCharacterIterator aci, Element element) {\n+        if (aci == null) return -1;\n+\n         // calculate which chars in the string belong to this element\n         for (int i = 0; i < aci.getEndIndex();) {\n             aci.setIndex(i);\n@@ -799,6 +808,8 @@ protected void rebuildACI() {\n \n     int getElementEndIndex\n         (AttributedCharacterIterator aci, Element element) {\n+        if (aci == null) return -1;\n+\n         // calculate which chars in the string belong to this element\n         for (int i = aci.getEndIndex()-1; i >= 0;) {\n             aci.setIndex(i);\n@@ -1138,7 +1149,7 @@ public void stripLast() {\n         public AttributedString toAttributedString() {\n             switch (count) {\n             case 0:\n-                return new AttributedString(\" \");\n+                return null;\n             case 1:\n                 return new AttributedString((String)strings.get(0),\n                                             (Map)attributes.get(0));\n@@ -1710,8 +1721,10 @@ protected List getFontFamilyList(Element element, BridgeContext ctx) {\n      */\n     protected TextPaintInfo getParentTextPaintInfo\n         (AttributedCharacterIterator aci, Element child) {\n-        Element parent = null;\n+        if (aci == null)\n+            return new TextPaintInfo();\n \n+        Element parent = null;\n         // calculate which chars in the string belong to the parent\n         int firstChar = -1;\n         for (int i = 0; i < aci.getEndIndex();) {\n@@ -2210,7 +2223,10 @@ public int getCharNumAtPosition(float x , float y){\n      */\n     protected int getNumberOfChars(Element element){\n \n-        AttributedCharacterIterator aci = ((TextNode)node).getAttributedCharacterIterator();\n+        AttributedCharacterIterator aci;\n+        aci = ((TextNode)node).getAttributedCharacterIterator();\n+        if (aci == null)\n+            return 0;\n \n         //get the index in the aci for the first character\n         //of the element\n@@ -2233,6 +2249,7 @@ protected Rectangle2D getExtentOfChar(Element element,int charnum ){\n \n         AttributedCharacterIterator aci;\n         aci = ((TextNode)node).getAttributedCharacterIterator();\n+        if (aci == null) return null;\n \n         int firstChar = getElementStartIndex(aci,element);\n \n@@ -2287,10 +2304,12 @@ protected Rectangle2D getExtentOfChar(Element element,int charnum ){\n      */\n     protected Point2D getStartPositionOfChar(Element element,int charnum){\n \n-        AttributedCharacterIterator aci = ((TextNode)node).getAttributedCharacterIterator();\n+        AttributedCharacterIterator aci;\n+        aci = ((TextNode)node).getAttributedCharacterIterator();\n+        if (aci == null) \n+            return null;\n \n         int firstChar = getElementStartIndex(aci,element);\n-\n         if ( firstChar == -1 )\n             return null;\n \n@@ -2338,9 +2357,10 @@ protected Point2D getEndPositionOfChar(Element element,int charnum ){\n \n         AttributedCharacterIterator aci;\n         aci = ((TextNode)node).getAttributedCharacterIterator();\n+        if (aci == null)\n+            return null;\n \n         int firstChar = getElementStartIndex(aci,element);\n-\n         if ( firstChar == -1 )\n             return null;\n \n@@ -2389,9 +2409,11 @@ protected float getRotationOfChar(Element element, int charnum){\n \n         AttributedCharacterIterator aci;\n         aci = ((TextNode)node).getAttributedCharacterIterator();\n+        if (aci == null)\n+            return 0;\n+\n         //first the first character for the element\n         int firstChar = getElementStartIndex(aci,element);\n-\n         if ( firstChar == -1 )\n             return 0;\n \n@@ -2468,8 +2490,10 @@ protected float getSubStringLength(Element element,\n \n         AttributedCharacterIterator aci;\n         aci = ((TextNode)node).getAttributedCharacterIterator();\n-        TextNode textNode = (TextNode)node;\n+        if (aci == null)\n+            return -1;\n \n+        TextNode textNode = (TextNode)node;\n         int firstChar = getElementStartIndex(aci,element);\n \n         if ( firstChar == -1 )\n@@ -2602,8 +2626,10 @@ protected float getSubStringLength(Element element,\n     protected void selectSubString(Element element, int charnum, int nchars) {\n         AttributedCharacterIterator aci;\n         aci = ((TextNode)node).getAttributedCharacterIterator();\n-        TextNode textNode = (TextNode)node;\n+        if (aci == null)\n+            return;\n \n+        TextNode textNode = (TextNode)node;\n         int firstChar = getElementStartIndex(aci,element);\n \n         if ( firstChar == -1 )\n@@ -2633,6 +2659,10 @@ protected void selectSubString(Element element, int charnum, int nchars) {\n     protected int getCharNumAtPosition(Element e, float x, float y){\n         \n         TextNode textNode = (TextNode)node;\n+        AttributedCharacterIterator aci;\n+        aci = textNode.getAttributedCharacterIterator();\n+        if (aci == null)\n+            return -1;\n \n         //check if there is an hit\n         List list = getTextRuns(textNode);\n@@ -2642,29 +2672,25 @@ protected int getCharNumAtPosition(Element e, float x, float y){\n         TextHit hit = null;\n \n         for( int i = list.size()-1 ; i>= 0 && hit == null; i-- ){\n-\n-            hit = ((StrokingTextPainter.TextRun)list.get(i)).getLayout().hitTestChar(x,y);\n+            StrokingTextPainter.TextRun textRun;\n+            textRun = (StrokingTextPainter.TextRun)list.get(i);\n+            hit = textRun.getLayout().hitTestChar(x,y);\n         }\n \n-        if ( hit == null ){\n+        if ( hit == null )\n             return -1;\n-        }\n \n-        AttributedCharacterIterator aci = ((TextNode)node).getAttributedCharacterIterator();\n \n         //found an hit, check if it belong to the element\n         int first = getElementStartIndex( aci, e );\n         int last  = getElementEndIndex( aci, e );\n \n         int hitIndex = hit.getCharIndex();\n \n-        if ( hitIndex >= first && hitIndex <= last ){\n-            \n+        if ( hitIndex >= first && hitIndex <= last )\n             return hitIndex - first;\n-        }\n-        else{\n-            return -1;\n-        }\n+\n+        return -1;\n     }\n \n     /**\n@@ -2706,34 +2732,35 @@ protected List getTextRuns(TextNode node){\n         info.characterIndex = startIndex+charnum;\n \n         for (int i = 0; i < list.size(); i++) {\n-            StrokingTextPainter.TextRun run = \n-                (StrokingTextPainter.TextRun)list.get(i);\n-\n-            if ( run.getLayout().hasCharacterIndex(info.characterIndex) ){\n-                info.layout = run.getLayout();\n+            StrokingTextPainter.TextRun run;\n+            run = (StrokingTextPainter.TextRun)list.get(i);\n \n-                aci.setIndex(info.characterIndex);\n+            if (!run.getLayout().hasCharacterIndex(info.characterIndex) )\n+                continue;\n \n-                //check is it is a altGlyph\n-                if (aci.getAttribute(ALT_GLYPH_HANDLER) != null){\n+            info.layout = run.getLayout();\n+            \n+            aci.setIndex(info.characterIndex);\n+            \n+            //check is it is a altGlyph\n+            if (aci.getAttribute(ALT_GLYPH_HANDLER) != null){\n+                info.glyphIndexStart = 0;\n+                info.glyphIndexEnd = info.layout.getGlyphCount()-1;\n+            } else {\n+                info.glyphIndexStart = info.layout.getGlyphIndex\n+                    (info.characterIndex);\n+                \n+                //special case when the glyph does not have a unicode\n+                //associated to it, it will return -1\n+                if ( info.glyphIndexStart == -1 ){\n                     info.glyphIndexStart = 0;\n                     info.glyphIndexEnd = info.layout.getGlyphCount()-1;\n-                } else {\n-                    info.glyphIndexStart = info.layout.getGlyphIndex\n-                        (info.characterIndex);\n-\n-                    //special case when the glyph does not have a unicode\n-                    //associated to it, it will return -1\n-                    if ( info.glyphIndexStart == -1 ){\n-                        info.glyphIndexStart = 0;\n-                        info.glyphIndexEnd = info.layout.getGlyphCount()-1;\n-                    }\n-                    else{\n-                        info.glyphIndexEnd = info.glyphIndexStart;\n-                    }\n                 }\n-                return info;\n+                else{\n+                    info.glyphIndexEnd = info.glyphIndexStart;\n+                }\n             }\n+            return info;\n         }\n         return null;\n     }\n@@ -2766,9 +2793,13 @@ public double getComputedOrientationAngle(){\n \n     public Set getTextIntersectionSet(AffineTransform at,\n                                        Rectangle2D rect) {\n+        Set elems = new HashSet();\n+\n         TextNode tn  = (TextNode)node;\n         List list = tn.getTextRuns();\n-        Set elems = new HashSet();\n+        if (list == null)\n+            return elems;\n+\n         for (int i = 0 ; i < list.size(); i++) {\n             StrokingTextPainter.TextRun run;\n             run = (StrokingTextPainter.TextRun)list.get(i);\n@@ -2809,8 +2840,11 @@ public Set getTextEnclosureSet(AffineTransform at,\n         TextNode tn = (TextNode)node;\n \n         Set elems = new HashSet();\n-        Set reject = new HashSet();\n         List list = tn.getTextRuns();\n+        if (list == null)\n+            return elems;\n+\n+        Set reject = new HashSet();\n         for (int i = 0 ; i < list.size(); i++) {\n             StrokingTextPainter.TextRun run;\n             run = (StrokingTextPainter.TextRun)list.get(i);\n@@ -2863,6 +2897,10 @@ else if (svgCtx instanceof AbstractTextChildSVGContext) {\n         if (txtBridge == null) return false;\n \n         TextNode tn      = (TextNode)txtBridge.node;\n+        List list = tn.getTextRuns();\n+        if (list == null) \n+            return false;\n+\n         Element  txtElem = txtBridge.e;\n \n         AffineTransform at = tn.getGlobalTransform();\n@@ -2873,7 +2911,6 @@ else if (svgCtx instanceof AbstractTextChildSVGContext) {\n         tnRect = at.createTransformedShape(tnRect).getBounds2D();\n         if (!rect.intersects(tnRect)) return false;\n \n-        List list = tn.getTextRuns();\n         for (int i = 0 ; i < list.size(); i++) {\n             StrokingTextPainter.TextRun run;\n             run = (StrokingTextPainter.TextRun)list.get(i);\n@@ -2931,11 +2968,13 @@ else if (svgCtx instanceof AbstractTextChildSVGContext) {\n         if (txtBridge == null) return null;\n \n         TextNode tn      = (TextNode)txtBridge.node;\n-        Element  txtElem = txtBridge.e;\n+        List list = tn.getTextRuns();\n+        if (list == null) \n+            return null;\n \n+        Element  txtElem = txtBridge.e;\n         Rectangle2D ret = null;\n-        List list = tn.getTextRuns();\n-        if (list == null) return null;\n+\n         for (int i = 0 ; i < list.size(); i++) {\n             StrokingTextPainter.TextRun run;\n             run = (StrokingTextPainter.TextRun)list.get(i);",
                "deletions": 49
            },
            {
                "sha": "1ac61f921db8d76e7d171bc665b2e9d6fbac5a19",
                "filename": "sources/org/apache/batik/bridge/svg12/SVGFlowRootElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/bridge/svg12/SVGFlowRootElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/bridge/svg12/SVGFlowRootElementBridge.java",
                "status": "modified",
                "changes": 90,
                "additions": 51,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/svg12/SVGFlowRootElementBridge.java?ref=7946f5cde30c6ca2970915a45ebd87f7b418a78f",
                "patch": "@@ -81,21 +81,45 @@\n  */\n public class SVGFlowRootElementBridge extends SVG12TextElementBridge {\n \n-    public static final AttributedCharacterIterator.Attribute FLOW_PARAGRAPH\n-        = GVTAttributedCharacterIterator.TextAttribute.FLOW_PARAGRAPH;\n+    public static final \n+        AttributedCharacterIterator.Attribute FLOW_PARAGRAPH =\n+        GVTAttributedCharacterIterator.TextAttribute.FLOW_PARAGRAPH;\n \n-    public static final AttributedCharacterIterator.Attribute \n-        FLOW_EMPTY_PARAGRAPH\n-        = GVTAttributedCharacterIterator.TextAttribute.FLOW_EMPTY_PARAGRAPH;\n+    public static final \n+        AttributedCharacterIterator.Attribute FLOW_EMPTY_PARAGRAPH =\n+        GVTAttributedCharacterIterator.TextAttribute.FLOW_EMPTY_PARAGRAPH;\n \n-    public static final AttributedCharacterIterator.Attribute FLOW_LINE_BREAK\n-        = GVTAttributedCharacterIterator.TextAttribute.FLOW_LINE_BREAK;\n+    public static final \n+        AttributedCharacterIterator.Attribute FLOW_LINE_BREAK =\n+        GVTAttributedCharacterIterator.TextAttribute.FLOW_LINE_BREAK;\n     \n-    public static final AttributedCharacterIterator.Attribute FLOW_REGIONS\n-        = GVTAttributedCharacterIterator.TextAttribute.FLOW_REGIONS;\n+    public static final \n+        AttributedCharacterIterator.Attribute FLOW_REGIONS =\n+        GVTAttributedCharacterIterator.TextAttribute.FLOW_REGIONS;\n \n-    public static final AttributedCharacterIterator.Attribute LINE_HEIGHT\n-        = GVTAttributedCharacterIterator.TextAttribute.LINE_HEIGHT;\n+    public static final \n+        AttributedCharacterIterator.Attribute LINE_HEIGHT =\n+        GVTAttributedCharacterIterator.TextAttribute.LINE_HEIGHT;\n+\n+    public final static \n+        GVTAttributedCharacterIterator.TextAttribute TEXTPATH = \n+        GVTAttributedCharacterIterator.TextAttribute.TEXTPATH;\n+\n+    public final static \n+        GVTAttributedCharacterIterator.TextAttribute ANCHOR_TYPE = \n+        GVTAttributedCharacterIterator.TextAttribute.ANCHOR_TYPE;\n+\n+    public final static \n+        GVTAttributedCharacterIterator.TextAttribute LETTER_SPACING = \n+        GVTAttributedCharacterIterator.TextAttribute.LETTER_SPACING;\n+\n+    public final static \n+        GVTAttributedCharacterIterator.TextAttribute WORD_SPACING = \n+        GVTAttributedCharacterIterator.TextAttribute.WORD_SPACING;\n+\n+    public final static \n+        GVTAttributedCharacterIterator.TextAttribute KERNING = \n+        GVTAttributedCharacterIterator.TextAttribute.KERNING;\n \n     /**\n      * Map of flowRegion elements to their graphics nodes.\n@@ -268,6 +292,9 @@ public void buildGraphicsNode(BridgeContext ctx,\n         // build text node\n         GraphicsNode tn = (GraphicsNode) cgn.get(1);\n         super.buildGraphicsNode(ctx, e, tn);\n+\n+        // Drop references once static build is completed.\n+        flowRegionNodes = null;  \n     }\n \n     protected void computeLaidoutText(BridgeContext ctx, \n@@ -314,13 +341,16 @@ protected AttributedString buildAttributedString(BridgeContext ctx,\n                                                      Element element) {\n         List rgns = getRegions(ctx, element);\n         AttributedString ret = getFlowDiv(ctx, element);\n+        if (ret == null) return ret;\n         ret.addAttribute(FLOW_REGIONS, rgns, 0, 1);\n         TextLineBreaks.findLineBrk(ret);\n         // dumpACIWord(ret);\n         return ret;\n     }\n \n     protected void dumpACIWord(AttributedString as) {\n+        if (as == null) return;\n+\n         String chars = \"\";\n         String brkStr = \"\";\n         AttributedCharacterIterator aci = as.getIterator();\n@@ -401,6 +431,8 @@ protected AttributedString getFlowDiv(BridgeContext ctx, Element element) {\n         // Layer in the PARAGRAPH/LINE_BREAK Attributes so we can\n         // break up text chunks.\n         AttributedString ret = asb.toAttributedString();\n+        if (ret == null) \n+            return null;\n \n         // Note: The Working Group (in conjunction with XHTML working\n         // group) has decided that multiple line elements collapse.\n@@ -522,11 +554,11 @@ protected void fillAttributedStringBuffer(BridgeContext ctx,\n         if (preserve)\n             endLimit = startLen;\n         \n-\tMap map = getAttributeMap(ctx, element, null, bidiLevel);\n-\tObject o = map.get(TextAttribute.BIDI_EMBEDDING);\n+        Map map = getAttributeMap(ctx, element, null, bidiLevel);\n+        Object o = map.get(TextAttribute.BIDI_EMBEDDING);\n         Integer subBidiLevel = bidiLevel;\n-\tif (o != null)\n-\t    subBidiLevel = (Integer)o;\n+        if (o != null)\n+            subBidiLevel = (Integer)o;\n \n         int lineBreak = -1;\n         if (lnLocs.size() != 0)\n@@ -535,7 +567,7 @@ protected void fillAttributedStringBuffer(BridgeContext ctx,\n         for (Node n = getFirstChild(element);\n              n != null;\n              n = getNextSibling(n)) {\n-            \n+\n             if (preserve) {\n                 prevEndsWithSpace = false;\n             } else {\n@@ -566,7 +598,7 @@ protected void fillAttributedStringBuffer(BridgeContext ctx,\n                 if (ln.equals(SVG12Constants.SVG_FLOW_LINE_TAG)) {\n                     fillAttributedStringBuffer(ctx, nodeElement, \n                                                false, subBidiLevel, \n-\t\t\t\t\t       asb, lnLocs);\n+                                               asb, lnLocs);\n                     // System.out.println(\"Line: \" + asb.length() + \n                     //                    \" - '\" +  asb + \"'\");\n                     lineBreak = asb.length();\n@@ -575,7 +607,7 @@ protected void fillAttributedStringBuffer(BridgeContext ctx,\n                            ln.equals(SVG12Constants.SVG_ALT_GLYPH_TAG)) {\n                     fillAttributedStringBuffer(ctx, nodeElement,\n                                                false, subBidiLevel, \n-\t\t\t\t\t       asb, lnLocs);\n+                                               asb, lnLocs);\n                 } else if (ln.equals(SVG_A_TAG)) {\n                     if (ctx.isInteractive()) {\n                         NodeEventTarget target = (NodeEventTarget)nodeElement;\n@@ -609,7 +641,7 @@ protected void fillAttributedStringBuffer(BridgeContext ctx,\n                     s = normalizeString(s, preserve, prevEndsWithSpace);\n                     if (s != null) {\n                         Map m = getAttributeMap(ctx, nodeElement, null, \n-\t\t\t\t\t\tbidiLevel);\n+                                                bidiLevel);\n                         asb.append(s, m);\n                     }\n                 }\n@@ -665,26 +697,6 @@ protected Map getAttributeMap(BridgeContext ctx,\n         return result;\n     }\n \n-    protected final static \n-        GVTAttributedCharacterIterator.TextAttribute TEXTPATH = \n-        GVTAttributedCharacterIterator.TextAttribute.TEXTPATH;\n-\n-    protected final static \n-        GVTAttributedCharacterIterator.TextAttribute ANCHOR_TYPE = \n-        GVTAttributedCharacterIterator.TextAttribute.ANCHOR_TYPE;\n-\n-    protected final static \n-        GVTAttributedCharacterIterator.TextAttribute LETTER_SPACING = \n-        GVTAttributedCharacterIterator.TextAttribute.LETTER_SPACING;\n-\n-    protected final static \n-        GVTAttributedCharacterIterator.TextAttribute WORD_SPACING = \n-        GVTAttributedCharacterIterator.TextAttribute.WORD_SPACING;\n-\n-    protected final static \n-        GVTAttributedCharacterIterator.TextAttribute KERNING = \n-        GVTAttributedCharacterIterator.TextAttribute.KERNING;\n-\n     protected void checkMap(Map attrs) {\n         if (attrs.containsKey(TEXTPATH)) {\n             return; // Problem, unsupported attr",
                "deletions": 39
            },
            {
                "sha": "d06f658f6d907b1ce7ceacfc88f2976abfc043f3",
                "filename": "sources/org/apache/batik/dom/AbstractParentNode.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/dom/AbstractParentNode.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/dom/AbstractParentNode.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/AbstractParentNode.java?ref=7946f5cde30c6ca2970915a45ebd87f7b418a78f",
                "patch": "@@ -218,7 +218,7 @@ public Node appendChild(Node newChild) throws DOMException {\n \t    ExtendedNode n = childNodes.append((ExtendedNode)newChild);\n \t    n.setParentNode(this);\n \n-            nodeAdded(n);\n+        nodeAdded(n);\n \n \t    // Mutation event\n \t    fireDOMNodeInsertedEvent(n);",
                "deletions": 1
            },
            {
                "sha": "a37a0da8460c60a106225731a0cacba49c2677cc",
                "filename": "sources/org/apache/batik/gvt/TextNode.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/gvt/TextNode.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/gvt/TextNode.java",
                "status": "modified",
                "changes": 9,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/TextNode.java?ref=7946f5cde30c6ca2970915a45ebd87f7b418a78f",
                "patch": "@@ -147,7 +147,13 @@ public void setTextRuns(List textRuns) {\n      * Returns the text of this <tt>TextNode</tt> as a string.\n      */\n     public String getText() {\n-        if (text == null) {\n+\n+        if (text != null) \n+            return text;\n+\n+        if (aci == null) {\n+            text = \"\";\n+        } else {\n             StringBuffer buf = new StringBuffer(aci.getEndIndex());\n             for (char c = aci.first();\n                  c != CharacterIterator.DONE;\n@@ -344,6 +350,7 @@ public Object getSelection() {\n \n         int[] ranges = textPainter.getSelected(beginMark, endMark);\n         Object o = null;\n+        if (aci == null) return o;\n \n         // TODO: later we can return more complex things like\n         // noncontiguous selections",
                "deletions": 1
            },
            {
                "sha": "ae466168ce7893ca4b21eb69263abe28639ca084",
                "filename": "sources/org/apache/batik/gvt/flow/FlowGlyphLayout.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/gvt/flow/FlowGlyphLayout.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/7946f5cde30c6ca2970915a45ebd87f7b418a78f/sources/org/apache/batik/gvt/flow/FlowGlyphLayout.java",
                "status": "modified",
                "changes": 9,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/flow/FlowGlyphLayout.java?ref=7946f5cde30c6ca2970915a45ebd87f7b418a78f",
                "patch": "@@ -63,7 +63,7 @@ public FlowGlyphLayout(AttributedCharacterIterator aci,\n \n         int numChunks = acis.length;\n         // System.out.println(\"Len: \" + acis.length + \" Size: \" + \n-        //                    chunkLayouts.size());\n+        //                     chunkLayouts.size());\n \n         // Make a list of the GlyphVectors so we can construct a\n         // multiGlyphVector that makes them all look like one big\n@@ -77,7 +77,7 @@ public FlowGlyphLayout(AttributedCharacterIterator aci,\n         BlockInfo [] blockInfos = new BlockInfo[acis.length];\n         float      [] topSkip   = new float[acis.length];\n         for (int chunk=0; clIter.hasNext(); chunk++) {\n-            // System.out.println(\"Chunk: \" + chunk);\n+            // System.err.print(\"Chunk: \" + chunk + \" Str: '\");\n             AttributedCharacterIterator aci = acis[chunk];\n             List gvl = new LinkedList();\n             List layouts = (List)clIter.next();\n@@ -296,7 +296,10 @@ public FlowGlyphLayout(AttributedCharacterIterator aci,\n         \n         int aciWordStart = aciIdx;\n         GVTFont gvtFont = (GVTFont)aci.getAttribute(GVT_FONT);\n-        float lineHeight = ((Float)aci.getAttribute(LINE_HEIGHT)).floatValue();\n+        float lineHeight = 1.f;\n+        Float lineHeightFloat = (Float)aci.getAttribute(LINE_HEIGHT);\n+        if (lineHeightFloat != null) \n+            lineHeight = lineHeightFloat.floatValue();\n         int runLimit = aci.getRunLimit(szAtts);\n         WordInfo prevWI = null;\n         float   [] lastAdvAdj = new float  [numGlyphs];",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Fixed NPE with text selection if underlying text element is removed\nduring the selection gesture.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@201585 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/ae161535b31df7b1390e07898c5f94d8523a2c7c",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/a90e0fde02a967a10585bd670711666ec63b6116",
        "bug_id": "xmlgraphics-batik_29",
        "file": [
            {
                "sha": "52c249a3d03eab891b6b7ce4e2af983d7cfc936f",
                "filename": "sources/org/apache/batik/gvt/text/ConcreteTextSelector.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ae161535b31df7b1390e07898c5f94d8523a2c7c/sources/org/apache/batik/gvt/text/ConcreteTextSelector.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ae161535b31df7b1390e07898c5f94d8523a2c7c/sources/org/apache/batik/gvt/text/ConcreteTextSelector.java",
                "status": "modified",
                "changes": 60,
                "additions": 37,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/text/ConcreteTextSelector.java?ref=ae161535b31df7b1390e07898c5f94d8523a2c7c",
                "patch": "@@ -29,6 +29,7 @@\n import java.util.Iterator;\n \n import org.apache.batik.gvt.GraphicsNode;\n+import org.apache.batik.gvt.RootGraphicsNode;\n import org.apache.batik.gvt.Selectable;\n import org.apache.batik.gvt.Selector;\n import org.apache.batik.gvt.TextNode;\n@@ -40,7 +41,6 @@\n import org.apache.batik.gvt.event.SelectionListener;\n \n /**\n- * ConcreteTextSelector.java:\n  * A simple implementation of GraphicsNodeMouseListener for text selection.\n  *\n  * @author <a href=\"mailto:bill.haneman@ireland.sun.com\">Bill Haneman</a>\n@@ -49,9 +49,10 @@\n \n public class ConcreteTextSelector implements Selector {\n \n-    private ArrayList listeners = null;\n-    private GraphicsNode selectionNode = null;\n-    private GraphicsNode currentNode = null;\n+    private ArrayList listeners;\n+    private GraphicsNode selectionNode;\n+    private RootGraphicsNode selectionNodeRoot;\n+    private GraphicsNode currentNode;\n     private int firstHit;\n     private int lastHit;\n \n@@ -101,8 +102,11 @@ public void keyTyped(GraphicsNodeKeyEvent evt) {\n \n     public void changeStarted (GraphicsNodeChangeEvent gnce) {\n     }\n+\n     public void changeCompleted (GraphicsNodeChangeEvent gnce) {\n-        if (selectionNode == null) return;\n+        if (selectionNode == null) {\n+            return;\n+        }\n         Shape newShape =\n             ((Selectable)selectionNode).getHighlightShape();\n         dispatchSelectionEvent\n@@ -113,22 +117,26 @@ public void changeCompleted (GraphicsNodeChangeEvent gnce) {\n \n     public void setSelection(Mark begin, Mark end) {\n         TextNode node = begin.getTextNode();\n-        if (node != end.getTextNode())\n+        if (node != end.getTextNode()) {\n             throw new Error(\"Markers not from same TextNode\");\n+        }\n         node.setSelection(begin, end);\n         selectionNode = node;\n+        selectionNodeRoot = node.getRoot();\n         Object selection = getSelection();\n         Shape  shape     = node.getHighlightShape();\n         dispatchSelectionEvent(new SelectionEvent\n             (selection, SelectionEvent.SELECTION_DONE, shape));\n     }\n \n     public void clearSelection() {\n-        if (selectionNode == null) \n+        if (selectionNode == null) {\n             return;\n+        }\n         dispatchSelectionEvent(new SelectionEvent\n             (null, SelectionEvent.SELECTION_CLEARED, null));\n         selectionNode = null;\n+        selectionNodeRoot = null;\n     }\n \n     /*\n@@ -147,10 +155,9 @@ protected void checkSelectGesture(GraphicsNodeEvent evt) {\n \n         GraphicsNode source = evt.getGraphicsNode();\n         if (isDeselectGesture(evt)) {\n-            if (selectionNode != null)\n-                selectionNode.getRoot()\n-                    .removeTreeGraphicsNodeChangeListener(this);\n-\n+            if (selectionNode != null) {\n+                selectionNodeRoot.removeTreeGraphicsNodeChangeListener(this);\n+            }\n             clearSelection();\n         } else if (mevt != null) {\n \n@@ -170,24 +177,28 @@ protected void checkSelectGesture(GraphicsNodeEvent evt) {\n             if ((source instanceof Selectable) && \n                 (isSelectStartGesture(evt))) {\n                 if (selectionNode != source) {\n-                    if (selectionNode != null)\n-                        selectionNode.getRoot()\n+                    if (selectionNode != null) {\n+                        selectionNodeRoot\n                             .removeTreeGraphicsNodeChangeListener(this);\n-                    if (source != null)\n-                        source.getRoot()\n+                    }\n+                    selectionNode = source;\n+                    if (source != null) {\n+                        selectionNodeRoot = source.getRoot();\n+                        selectionNodeRoot\n                             .addTreeGraphicsNodeChangeListener(this);\n+                    }\n                 }\n \n-                selectionNode = source;\n                 ((Selectable) source).selectAt(p.getX(), p.getY());\n                 dispatchSelectionEvent(\n                         new SelectionEvent(null,\n                                 SelectionEvent.SELECTION_STARTED,\n                                 null));\n \n             } else if (isSelectEndGesture(evt)) {\n-                if (selectionNode == source) \n+                if (selectionNode == source)  {\n                     ((Selectable) source).selectTo(p.getX(), p.getY());\n+                }\n                 Object oldSelection = getSelection();\n                 if (selectionNode != null) {\n                     Shape newShape;\n@@ -215,14 +226,17 @@ protected void checkSelectGesture(GraphicsNodeEvent evt) {\n             } else if ((source instanceof Selectable) && \n                        (isSelectAllGesture(evt))) {\n                 if (selectionNode != source) {\n-                    if (selectionNode != null)\n-                        selectionNode.getRoot()\n+                    if (selectionNode != null) {\n+                        selectionNodeRoot\n                             .removeTreeGraphicsNodeChangeListener(this);\n-                    if (source != null)\n-                        source.getRoot()\n+                    }\n+                    selectionNode = source;\n+                    if (source != null) {\n+                        selectionNodeRoot = source.getRoot();\n+                        selectionNodeRoot\n                             .addTreeGraphicsNodeChangeListener(this);\n+                    }\n                 }\n-                selectionNode = source;\n                 ((Selectable) source).selectAll(p.getX(), p.getY());\n                 Object oldSelection = getSelection();\n                 Shape newShape =\n@@ -263,7 +277,7 @@ private boolean isSelectAllGesture(GraphicsNodeEvent evt) {\n     public Object getSelection() {\n         Object value = null;\n         if (selectionNode instanceof Selectable) {\n-            value =  ((Selectable) selectionNode).getSelection();\n+            value = ((Selectable) selectionNode).getSelection();\n         }\n         return value;\n     }",
                "deletions": 23
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Adding elements in the 'null' namespace nolonger causes a NPE exception.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@201363 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/f67fe210f12887ed89d5f4912d8a106e81a1ba39",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/3f87ce077ea3d2310a95d84cce8e47bf43973081",
        "bug_id": "xmlgraphics-batik_30",
        "file": [
            {
                "sha": "28727b695b68dac8629c9fdfff481fcd661906fa",
                "filename": "sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f67fe210f12887ed89d5f4912d8a106e81a1ba39/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f67fe210f12887ed89d5f4912d8a106e81a1ba39/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "status": "modified",
                "changes": 10,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGTextElementBridge.java?ref=f67fe210f12887ed89d5f4912d8a106e81a1ba39",
                "patch": "@@ -359,7 +359,7 @@ protected void initializeDynamicSupport(BridgeContext ctx,\n      * @see org.apache.batik.bridge.BridgeUpdateHandler\n      */\n     protected void addContextToChild(BridgeContext ctx,Element e) {\n-        if (e.getNamespaceURI().equals(SVG_NAMESPACE_URI)) {\n+        if (SVG_NAMESPACE_URI.equals(e.getNamespaceURI())) {\n             if (e.getLocalName().equals(SVG_TSPAN_TAG)) {\n                 ((SVGOMElement)e).setSVGContext\n                     (new TspanBridge(ctx, this, e));\n@@ -396,7 +396,7 @@ public void handleDOMNodeInsertedEvent(MutationEvent evt) {\n                 laidoutText = null;\n                 break;\n             case Node.ELEMENT_NODE:\n-                if (childNode.getNamespaceURI().equals(SVG_NAMESPACE_URI)) {\n+                if (SVG_NAMESPACE_URI.equals(childNode.getNamespaceURI())) {\n                     String nodeName = childNode.getLocalName();\n                     if (nodeName.equals(SVG_TSPAN_TAG) ||\n                         nodeName.equals(SVG_ALT_GLYPH_TAG) ||\n@@ -447,7 +447,7 @@ public void handleDOMChildNodeRemovedEvent(MutationEvent evt) {\n                 }\n                 break;\n             case Node.ELEMENT_NODE:\n-                if (childNode.getNamespaceURI().equals(SVG_NAMESPACE_URI)) {\n+                if (SVG_NAMESPACE_URI.equals(childNode.getNamespaceURI())) {\n                     String nodeName = childNode.getLocalName();\n                     if (nodeName.equals(SVG_TSPAN_TAG) ||\n                         nodeName.equals(SVG_ALT_GLYPH_TAG) ||\n@@ -501,7 +501,7 @@ public void handleDOMCharacterDataModified(MutationEvent evt){\n     protected boolean isParentDisplayed(Node childNode) {\n         Node parentNode = childNode.getParentNode();\n         if (parentNode.getNodeType() == Node.ELEMENT_NODE) {\n-            if (parentNode.getNamespaceURI().equals(SVG_NAMESPACE_URI)) {\n+            if (SVG_NAMESPACE_URI.equals(parentNode.getNamespaceURI())) {\n                 String nodeName = parentNode.getLocalName();\n                 if (nodeName.equals(SVG_TEXT_TAG) ||\n                     nodeName.equals(SVG_TSPAN_TAG) ||\n@@ -851,7 +851,7 @@ protected void fillAttributedStringBuffer(BridgeContext ctx,\n             \n             switch (n.getNodeType()) {\n             case Node.ELEMENT_NODE:\n-                if (n.getNamespaceURI() != SVG_NAMESPACE_URI) {\n+                if (!SVG_NAMESPACE_URI.equals(n.getNamespaceURI())) {\n                     break;\n                 }\n                 ",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "- update SVGMarkerElementBridge according to the current spec\n- use a internal method to access to the CSS property value\n  speed up build phase\n- remove the Thread check interupted from getBounds as it is not the good place\n  to do that and the 'null' value generates a NullPointerException with the\n  auto resize option 'on' on the first document\nPR:\nObtained from:\nSubmitted by:\nReviewed by:\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@199579 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/ce0f57047e75d62456eacbbb506a83702f67dfd2",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/79739114f390f908ffbd6238db689713fb5aa66f",
        "bug_id": "xmlgraphics-batik_31",
        "file": [
            {
                "sha": "51f2ed294d7c8eed7555ac6bcd808485dae115a1",
                "filename": "sources/org/apache/batik/bridge/CSSUtilities.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/CSSUtilities.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/CSSUtilities.java",
                "status": "modified",
                "changes": 80,
                "additions": 46,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/CSSUtilities.java?ref=ce0f57047e75d62456eacbbb506a83702f67dfd2",
                "patch": "@@ -79,16 +79,17 @@ protected CSSUtilities() {}\n      * Returns the View CSS associated to the specified element.\n      * @param e the element\n      */\n-    public static ViewCSS getViewCSS(Element e) {\n-        return (ViewCSS)((SVGOMDocument)e.getOwnerDocument()).getDefaultView();\n+    public static AbstractViewCSS getViewCSS(Element e) {\n+        return (AbstractViewCSS)\n+            ((SVGOMDocument)e.getOwnerDocument()).getDefaultView();\n     }\n \n     /**\n      * Returns the computed style of the specified element.\n      * @param e the element\n      */\n-    public static CSSStyleDeclaration getComputedStyle(Element e) {\n-        return getViewCSS(e).getComputedStyle(e, null);\n+    public static CSSOMReadOnlyStyleDeclaration getComputedStyle(Element e) {\n+        return getViewCSS(e).getComputedStyleInternal(e, null);\n     }\n \n     /////////////////////////////////////////////////////////////////////////\n@@ -105,8 +106,9 @@ public static CSSStyleDeclaration getComputedStyle(Element e) {\n         Rectangle2D convertEnableBackground(Element e,\n                                             UnitProcessor.Context uctx) {\n \n-        CSSStyleDeclaration decl = getComputedStyle(e);\n-        CSSValue v = decl.getPropertyCSSValue(CSS_ENABLE_BACKGROUND_PROPERTY);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n+        CSSValue v\n+            = decl.getPropertyCSSValueInternal(CSS_ENABLE_BACKGROUND_PROPERTY);\n         if (v.getCssValueType() != v.CSS_VALUE_LIST) {\n             return null; // accumulate\n         }\n@@ -152,8 +154,9 @@ Rectangle2D convertEnableBackground(Element e,\n     public static MultipleGradientPaint.ColorSpaceEnum\n         convertColorInterpolation(Element e) {\n \n-        CSSStyleDeclaration decl = CSSUtilities.getComputedStyle(e);\n-        CSSPrimitiveValue v = (CSSPrimitiveValue) decl.getPropertyCSSValue\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n+        CSSPrimitiveValue v\n+            = (CSSPrimitiveValue) decl.getPropertyCSSValueInternal\n             (CSS_COLOR_INTERPOLATION_PROPERTY);\n \n         return CSS_LINEARRGB_VALUE.equals(v.getStringValue())\n@@ -172,8 +175,8 @@ Rectangle2D convertEnableBackground(Element e,\n      * @param e the element\n      */\n     public static boolean convertVisibility(Element e) {\n-        CSSStyleDeclaration decl = getComputedStyle(e);\n-        CSSValue v = decl.getPropertyCSSValue(CSS_VISIBILITY_PROPERTY);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n+        CSSValue v = decl.getPropertyCSSValueInternal(CSS_VISIBILITY_PROPERTY);\n         if (v.getCssValueType() == CSSValue.CSS_INHERIT) {\n             // workaround for the CSS2 spec which indicates that the\n             // initial value is 'inherit'. So if we get 'inherit' it\n@@ -196,9 +199,10 @@ public static boolean convertVisibility(Element e) {\n      * @param e the element\n      */\n     public static Composite convertOpacity(Element e) {\n-        CSSStyleDeclaration decl = getComputedStyle(e);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n         CSSValue v =\n-            getComputedStyle(e).getPropertyCSSValue(CSS_OPACITY_PROPERTY);\n+            getComputedStyle(e).getPropertyCSSValueInternal\n+            (CSS_OPACITY_PROPERTY);\n         float opacity = PaintServer.convertOpacity(v);\n         if (opacity <= 0f) {\n             return null;\n@@ -222,9 +226,10 @@ public static Composite convertOpacity(Element e) {\n      * @param e the element with the 'overflow' property\n      */\n     public static boolean convertOverflow(Element e) {\n-        CSSStyleDeclaration decl = getComputedStyle(e);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n         CSSPrimitiveValue overflow =\n-            (CSSPrimitiveValue)decl.getPropertyCSSValue(CSS_OVERFLOW_PROPERTY);\n+            (CSSPrimitiveValue)decl.getPropertyCSSValueInternal\n+            (CSS_OVERFLOW_PROPERTY);\n         String s = overflow.getStringValue();\n         // clip if 'hidden' or 'scroll'\n         return (s.charAt(0) == 'h') || (s.charAt(0) == 's');\n@@ -238,9 +243,10 @@ public static boolean convertOverflow(Element e) {\n      * @param e the element with the 'clip' property\n      */\n     public static float[] convertClip(Element e) {\n-        CSSStyleDeclaration decl = getComputedStyle(e);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n         CSSPrimitiveValue clip =\n-            (CSSPrimitiveValue)decl.getPropertyCSSValue(CSS_CLIP_PROPERTY);\n+            (CSSPrimitiveValue)decl.getPropertyCSSValueInternal\n+            (CSS_CLIP_PROPERTY);\n         switch (clip.getPrimitiveType()) {\n         case CSSPrimitiveValue.CSS_RECT:\n             float [] off = new float[4];\n@@ -273,10 +279,11 @@ public static boolean convertOverflow(Element e) {\n     public static Filter convertFilter(Element filteredElement,\n                                        GraphicsNode filteredNode,\n                                        BridgeContext ctx) {\n-        CSSStyleDeclaration decl = getComputedStyle(filteredElement);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(filteredElement);\n \n         CSSPrimitiveValue filterValue =\n-            (CSSPrimitiveValue)decl.getPropertyCSSValue(CSS_FILTER_PROPERTY);\n+            (CSSPrimitiveValue)decl.getPropertyCSSValueInternal\n+            (CSS_FILTER_PROPERTY);\n \n         switch(filterValue.getPrimitiveType()){\n         case CSSPrimitiveValue.CSS_IDENT:\n@@ -315,10 +322,11 @@ public static Filter convertFilter(Element filteredElement,\n     public static Clip convertClipPath(Element clipedElement,\n                                        GraphicsNode clipedNode,\n                                        BridgeContext ctx) {\n-        CSSStyleDeclaration decl = getComputedStyle(clipedElement);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(clipedElement);\n \n         CSSPrimitiveValue clipValue =\n-            (CSSPrimitiveValue)decl.getPropertyCSSValue(CSS_CLIP_PATH_PROPERTY);\n+            (CSSPrimitiveValue)decl.getPropertyCSSValueInternal\n+            (CSS_CLIP_PATH_PROPERTY);\n \n         switch(clipValue.getPrimitiveType()){\n         case CSSPrimitiveValue.CSS_IDENT:\n@@ -348,8 +356,8 @@ public static Clip convertClipPath(Element clipedElement,\n      * @return GeneralPath.WIND_NON_ZERO | GeneralPath.WIND_EVEN_ODD\n      */\n     public static int convertClipRule(Element e) {\n-        CSSStyleDeclaration decl = getComputedStyle(e);\n-        return rule(decl.getPropertyCSSValue(CSS_CLIP_RULE_PROPERTY));\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n+        return rule(decl.getPropertyCSSValueInternal(CSS_CLIP_RULE_PROPERTY));\n     }\n \n     /////////////////////////////////////////////////////////////////////////\n@@ -368,10 +376,11 @@ public static int convertClipRule(Element e) {\n     public static Mask convertMask(Element maskedElement,\n                                    GraphicsNode maskedNode,\n                                    BridgeContext ctx) {\n-        CSSStyleDeclaration decl = getComputedStyle(maskedElement);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(maskedElement);\n \n         CSSPrimitiveValue maskValue =\n-            (CSSPrimitiveValue)decl.getPropertyCSSValue(CSS_MASK_PROPERTY);\n+            (CSSPrimitiveValue)decl.getPropertyCSSValueInternal\n+            (CSS_MASK_PROPERTY);\n \n         switch(maskValue.getPrimitiveType()){\n         case CSSPrimitiveValue.CSS_IDENT:\n@@ -401,8 +410,9 @@ public static Mask convertMask(Element maskedElement,\n      * @return GeneralPath.WIND_NON_ZERO | GeneralPath.WIND_EVEN_ODD\n      */\n     public static int convertFillRule(Element e) {\n-        CSSStyleDeclaration decl = getComputedStyle(e);\n-        return rule(decl.getPropertyCSSValue(CSS_FILL_RULE_PROPERTY));\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n+        return rule(decl.getPropertyCSSValueInternal\n+                    (CSS_FILL_RULE_PROPERTY));\n     }\n \n     /////////////////////////////////////////////////////////////////////////\n@@ -417,9 +427,9 @@ public static int convertFillRule(Element e) {\n      * @param ctx the bridge context\n      */\n     public static Color convertLightingColor(Element e, BridgeContext ctx) {\n-        CSSStyleDeclaration decl = getComputedStyle(e);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n \n-        CSSValue colorDef = decl.getPropertyCSSValue\n+        CSSValue colorDef = decl.getPropertyCSSValueInternal\n             (CSS_LIGHTING_COLOR_PROPERTY);\n         if (colorDef.getCssValueType() == CSSValue.CSS_PRIMITIVE_VALUE) {\n             CSSPrimitiveValue v = (CSSPrimitiveValue)colorDef;\n@@ -442,11 +452,12 @@ public static Color convertLightingColor(Element e, BridgeContext ctx) {\n      * @param ctx the bridge context\n      */\n     public static Color convertFloodColor(Element e, BridgeContext ctx) {\n-        CSSStyleDeclaration decl = getComputedStyle(e);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(e);\n         float opacity = PaintServer.convertOpacity\n-            (decl.getPropertyCSSValue(CSS_FLOOD_OPACITY_PROPERTY));\n+            (decl.getPropertyCSSValueInternal(CSS_FLOOD_OPACITY_PROPERTY));\n \n-        CSSValue colorDef = decl.getPropertyCSSValue(CSS_FLOOD_COLOR_PROPERTY);\n+        CSSValue colorDef\n+            = decl.getPropertyCSSValueInternal(CSS_FLOOD_COLOR_PROPERTY);\n         if (colorDef.getCssValueType() == CSSValue.CSS_PRIMITIVE_VALUE) {\n             CSSPrimitiveValue v = (CSSPrimitiveValue)colorDef;\n             return PaintServer.convertColor(v.getRGBColorValue(), opacity);\n@@ -472,12 +483,13 @@ public static Color convertStopColor(Element stopElement,\n                                          float opacity,\n                                          BridgeContext ctx) {\n \n-        CSSStyleDeclaration decl = getComputedStyle(stopElement);\n+        CSSOMReadOnlyStyleDeclaration decl = getComputedStyle(stopElement);\n \n-        CSSValue colorDef = decl.getPropertyCSSValue(CSS_STOP_COLOR_PROPERTY);\n+        CSSValue colorDef\n+            = decl.getPropertyCSSValueInternal(CSS_STOP_COLOR_PROPERTY);\n \n         float stopOpacity = PaintServer.convertOpacity\n-            (decl.getPropertyCSSValue(CSS_STOP_OPACITY_PROPERTY));\n+            (decl.getPropertyCSSValueInternal(CSS_STOP_OPACITY_PROPERTY));\n         opacity *= stopOpacity;\n \n         if (colorDef.getCssValueType() == CSSValue.CSS_PRIMITIVE_VALUE) {",
                "deletions": 34
            },
            {
                "sha": "a1972d2df088b81a0590e486e1c75150fd59ad58",
                "filename": "sources/org/apache/batik/bridge/PaintServer.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/PaintServer.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/PaintServer.java",
                "status": "modified",
                "changes": 45,
                "additions": 26,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/PaintServer.java?ref=ce0f57047e75d62456eacbbb506a83702f67dfd2",
                "patch": "@@ -14,7 +14,10 @@\n import java.awt.Shape;\n import java.awt.Stroke;\n \n+import org.apache.batik.css.CSSOMReadOnlyStyleDeclaration;\n+\n import org.apache.batik.ext.awt.color.ICCColorSpaceExt;\n+\n import org.apache.batik.gvt.CompositeShapePainter;\n import org.apache.batik.gvt.FillShapePainter;\n import org.apache.batik.gvt.GraphicsNode;\n@@ -23,6 +26,7 @@\n import org.apache.batik.gvt.ShapeNode;\n import org.apache.batik.gvt.ShapePainter;\n import org.apache.batik.gvt.StrokeShapePainter;\n+\n import org.apache.batik.util.CSSConstants;\n import org.apache.batik.util.SVGConstants;\n \n@@ -72,20 +76,20 @@ public static ShapePainter convertMarkers(Element paintedElement,\n                                               ShapeNode node,\n                                               BridgeContext ctx) {\n \n-        CSSStyleDeclaration decl\n+        CSSOMReadOnlyStyleDeclaration decl\n             = CSSUtilities.getComputedStyle(paintedElement);\n \n         CSSValue v;\n \n-        v = decl.getPropertyCSSValue(CSS_MARKER_START_PROPERTY);\n+        v = decl.getPropertyCSSValueInternal(CSS_MARKER_START_PROPERTY);\n         Marker startMarker\n             = convertMarker(paintedElement, (CSSPrimitiveValue)v, ctx);\n \n-        v = decl.getPropertyCSSValue(CSS_MARKER_MID_PROPERTY);\n+        v = decl.getPropertyCSSValueInternal(CSS_MARKER_MID_PROPERTY);\n         Marker midMarker\n             = convertMarker(paintedElement, (CSSPrimitiveValue)v, ctx);\n \n-        v = decl.getPropertyCSSValue(CSS_MARKER_END_PROPERTY);\n+        v = decl.getPropertyCSSValueInternal(CSS_MARKER_END_PROPERTY);\n         Marker endMarker\n             = convertMarker(paintedElement, (CSSPrimitiveValue)v, ctx);\n \n@@ -194,13 +198,14 @@ public static ShapePainter convertFillAndStroke(Element e,\n     public static Paint convertStrokePaint(Element strokedElement,\n                                            GraphicsNode strokedNode,\n                                            BridgeContext ctx) {\n-        CSSStyleDeclaration decl =\n+        CSSOMReadOnlyStyleDeclaration decl =\n             CSSUtilities.getComputedStyle(strokedElement);\n         // 'stroke-opacity'\n         float opacity = convertOpacity\n-            (decl.getPropertyCSSValue(CSS_STROKE_OPACITY_PROPERTY));\n+            (decl.getPropertyCSSValueInternal(CSS_STROKE_OPACITY_PROPERTY));\n         // 'stroke'\n-        CSSValue paintDef = decl.getPropertyCSSValue(CSS_STROKE_PROPERTY);\n+        CSSValue paintDef\n+            = decl.getPropertyCSSValueInternal(CSS_STROKE_PROPERTY);\n \n         return convertPaint(strokedElement,\n                             strokedNode,\n@@ -220,13 +225,13 @@ public static Paint convertStrokePaint(Element strokedElement,\n     public static Paint convertFillPaint(Element filledElement,\n                                          GraphicsNode filledNode,\n                                          BridgeContext ctx) {\n-        CSSStyleDeclaration decl =\n+        CSSOMReadOnlyStyleDeclaration decl =\n             CSSUtilities.getComputedStyle(filledElement);\n         // 'fill-opacity'\n         float opacity = convertOpacity\n-            (decl.getPropertyCSSValue(CSS_FILL_OPACITY_PROPERTY));\n+            (decl.getPropertyCSSValueInternal(CSS_FILL_OPACITY_PROPERTY));\n         // 'fill'\n-        CSSValue paintDef = decl.getPropertyCSSValue(CSS_FILL_PROPERTY);\n+        CSSValue paintDef = decl.getPropertyCSSValueInternal(CSS_FILL_PROPERTY);\n \n         return convertPaint(filledElement,\n                             filledNode,\n@@ -309,9 +314,10 @@ protected static Paint convertPaint(Element paintedElement,\n                                               opacity,\n                                               ctx);\n                 if (paint == null) { // no paint found\n-                    CSSStyleDeclaration decl =\n+                    CSSOMReadOnlyStyleDeclaration decl =\n                         CSSUtilities.getComputedStyle(paintedElement);\n-                    CSSValue v = decl.getPropertyCSSValue(CSS_COLOR_PROPERTY);\n+                    CSSValue v\n+                        = decl.getPropertyCSSValueInternal(CSS_COLOR_PROPERTY);\n                     paint =  convertColor\n                         (((CSSPrimitiveValue)v).getRGBColorValue(), opacity);\n                 }\n@@ -495,29 +501,30 @@ public static Stroke convertStroke(Element strokedElement,\n         // percentages and units are relative to the strokedElement's viewport\n         UnitProcessor.Context uctx\n             = UnitProcessor.createContext(ctx, strokedElement);\n-        CSSStyleDeclaration decl\n+        CSSOMReadOnlyStyleDeclaration decl\n             = CSSUtilities.getComputedStyle(strokedElement);\n         CSSValue v;\n \n-        v = decl.getPropertyCSSValue(CSS_STROKE_WIDTH_PROPERTY);\n+        v = decl.getPropertyCSSValueInternal(CSS_STROKE_WIDTH_PROPERTY);\n         float width = UnitProcessor.cssOtherLengthToUserSpace\n             (v, CSS_STROKE_WIDTH_PROPERTY, uctx);\n \n-        v = decl.getPropertyCSSValue(CSS_STROKE_LINECAP_PROPERTY);\n+        v = decl.getPropertyCSSValueInternal(CSS_STROKE_LINECAP_PROPERTY);\n         int linecap = convertStrokeLinecap((CSSPrimitiveValue)v);\n \n-        v = decl.getPropertyCSSValue(CSS_STROKE_LINEJOIN_PROPERTY);\n+        v = decl.getPropertyCSSValueInternal(CSS_STROKE_LINEJOIN_PROPERTY);\n         int linejoin = convertStrokeLinejoin((CSSPrimitiveValue)v);\n \n-        v = decl.getPropertyCSSValue(CSS_STROKE_MITERLIMIT_PROPERTY);\n+        v = decl.getPropertyCSSValueInternal(CSS_STROKE_MITERLIMIT_PROPERTY);\n         float miterlimit = convertStrokeMiterlimit((CSSPrimitiveValue)v);\n \n-        v = decl.getPropertyCSSValue(CSS_STROKE_DASHARRAY_PROPERTY);\n+        v = decl.getPropertyCSSValueInternal(CSS_STROKE_DASHARRAY_PROPERTY);\n         float [] dasharray = convertStrokeDasharray(v, uctx);\n \n         float dashoffset = 0;\n         if (dasharray != null) {\n-            v = decl.getPropertyCSSValue(CSS_STROKE_DASHOFFSET_PROPERTY);\n+            v = decl.getPropertyCSSValueInternal\n+                (CSS_STROKE_DASHOFFSET_PROPERTY);\n             dashoffset = UnitProcessor.cssOtherLengthToUserSpace\n                 (v, CSS_STROKE_DASHOFFSET_PROPERTY, uctx);\n         }",
                "deletions": 19
            },
            {
                "sha": "742ec0615f530930058849eb43a13078588081d2",
                "filename": "sources/org/apache/batik/bridge/SVGMarkerElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/SVGMarkerElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/SVGMarkerElementBridge.java",
                "status": "modified",
                "changes": 84,
                "additions": 22,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGMarkerElementBridge.java?ref=ce0f57047e75d62456eacbbb506a83702f67dfd2",
                "patch": "@@ -61,60 +61,17 @@ public Marker createMarker(BridgeContext ctx,\n                                Element markerElement,\n                                Element paintedElement) {\n \n-        //\n-        // CSS setup\n-        //\n-        // Properties inherit into the 'marker' element from its ancestors\n-        // and do not inherit from the element referencing the 'marker' element.\n-        //\n-        SVGOMDocument md = (SVGOMDocument)markerElement.getOwnerDocument();\n-        SVGOMDocument pd = (SVGOMDocument)paintedElement.getOwnerDocument();\n-        ViewCSS viewCSS = (ViewCSS)pd.getDefaultView();\n-        Element inst;\n-        if (md == pd) {\n-            inst = (Element)markerElement.cloneNode(true);\n-        } else {\n-            inst = (Element)paintedElement.getOwnerDocument().importNode\n-                (markerElement, true);\n-        }\n-        Element g = pd.createElementNS(SVG_NAMESPACE_URI, SVG_G_TAG);\n-        ((HiddenChildElement)g).setParentElement(paintedElement);\n-\n-        CSSOMReadOnlyStyleDeclaration gsd =\n-            (CSSOMReadOnlyStyleDeclaration)viewCSS.getComputedStyle(g, null);\n-\n-        gsd.setPropertyCSSValue\n-            (CSS_MARKER_PROPERTY,\n-             new CSSOMReadOnlyValue(ValueConstants.NONE_VALUE),\n-             gsd.getLocalPropertyPriority(CSS_MARKER_PROPERTY),\n-             gsd.getLocalPropertyOrigin(CSS_MARKER_PROPERTY));\n-        gsd.setPropertyCSSValue\n-            (CSS_MARKER_START_PROPERTY,\n-             new CSSOMReadOnlyValue(ValueConstants.NONE_VALUE),\n-             gsd.getLocalPropertyPriority(CSS_MARKER_START_PROPERTY),\n-             gsd.getLocalPropertyOrigin(CSS_MARKER_START_PROPERTY));\n-        gsd.setPropertyCSSValue\n-            (CSS_MARKER_MID_PROPERTY,\n-             new CSSOMReadOnlyValue(ValueConstants.NONE_VALUE),\n-             gsd.getLocalPropertyPriority(CSS_MARKER_START_PROPERTY),\n-             gsd.getLocalPropertyOrigin(CSS_MARKER_START_PROPERTY));\n-        gsd.setPropertyCSSValue\n-            (CSS_MARKER_END_PROPERTY,\n-             new CSSOMReadOnlyValue(ValueConstants.NONE_VALUE),\n-             gsd.getLocalPropertyPriority(CSS_MARKER_START_PROPERTY),\n-             gsd.getLocalPropertyOrigin(CSS_MARKER_START_PROPERTY));\n-        g.appendChild(inst);\n-        if (md != pd) {\n-            CSSUtilities.computeStyleAndURIs(markerElement, inst);\n-        }\n-\n         GVTBuilder builder = ctx.getGVTBuilder();\n+\n         CompositeGraphicsNode markerContentNode\n             = new CompositeGraphicsNode();\n \n         // build the GVT tree that represents the marker\n         boolean hasChildren = false;\n-        for(Node n=inst.getFirstChild(); n != null; n = n.getNextSibling()) {\n+        for(Node n = markerElement.getFirstChild();\n+            n != null;\n+            n = n.getNextSibling()) {\n+\n             // check if the node is a valid Element\n             if (n.getNodeType() != Node.ELEMENT_NODE) {\n                 continue;\n@@ -133,11 +90,12 @@ public Marker createMarker(BridgeContext ctx,\n         }\n \n         String s;\n-        UnitProcessor.Context uctx = UnitProcessor.createContext(ctx, inst);\n+        UnitProcessor.Context uctx\n+            = UnitProcessor.createContext(ctx, paintedElement);\n \n         // 'markerWidth' attribute - default is 3\n         float markerWidth = 3;\n-        s = inst.getAttributeNS(null, SVG_MARKER_WIDTH_ATTRIBUTE);\n+        s = markerElement.getAttributeNS(null, SVG_MARKER_WIDTH_ATTRIBUTE);\n         if (s.length() != 0) {\n             markerWidth = UnitProcessor.svgHorizontalLengthToUserSpace\n                 (s, SVG_MARKER_WIDTH_ATTRIBUTE, uctx);\n@@ -149,7 +107,7 @@ public Marker createMarker(BridgeContext ctx,\n \n         // 'markerHeight' attribute - default is 3\n         float markerHeight = 3;\n-        s = inst.getAttributeNS(null, SVG_MARKER_HEIGHT_ATTRIBUTE);\n+        s = markerElement.getAttributeNS(null, SVG_MARKER_HEIGHT_ATTRIBUTE);\n         if (s.length() != 0) {\n             markerHeight = UnitProcessor.svgVerticalLengthToUserSpace\n                 (s, SVG_MARKER_HEIGHT_ATTRIBUTE, uctx);\n@@ -161,7 +119,7 @@ public Marker createMarker(BridgeContext ctx,\n \n         // 'orient' attribute - default is 'auto'\n         double orient;\n-        s = inst.getAttributeNS(null, SVG_ORIENT_ATTRIBUTE);\n+        s = markerElement.getAttributeNS(null, SVG_ORIENT_ATTRIBUTE);\n         if (s.length() == 0 || VALUE_AUTO.equals(s)) {\n             orient = Double.NaN;\n         } else {\n@@ -177,22 +135,24 @@ public Marker createMarker(BridgeContext ctx,\n         // 'stroke-width' property\n         CSSStyleDeclaration decl\n             = CSSUtilities.getComputedStyle(paintedElement);\n-        UnitProcessor.Context puctx\n-            = UnitProcessor.createContext(ctx, paintedElement);\n         CSSValue v = decl.getPropertyCSSValue(CSS_STROKE_WIDTH_PROPERTY);\n         float strokeWidth = UnitProcessor.cssOtherLengthToUserSpace\n-            (v, CSS_STROKE_WIDTH_PROPERTY, puctx);\n+            (v, CSS_STROKE_WIDTH_PROPERTY, uctx);\n \n         // 'markerUnits' attribute - default is 'strokeWidth'\n         short unitsType;\n-        s = inst.getAttributeNS(null, SVG_MARKER_UNITS_ATTRIBUTE);\n+        s = markerElement.getAttributeNS(null, SVG_MARKER_UNITS_ATTRIBUTE);\n         if (s.length() == 0) {\n             unitsType = SVGUtilities.STROKE_WIDTH;\n         } else {\n             unitsType = SVGUtilities.parseMarkerCoordinateSystem\n-                (inst, SVG_MARKER_UNITS_ATTRIBUTE, s);\n+                (markerElement, SVG_MARKER_UNITS_ATTRIBUTE, s);\n         }\n \n+        //\n+        //\n+        //\n+\n         // compute an additional transform for 'strokeWidth' coordinate system\n         AffineTransform markerTxf;\n         if (unitsType == SVGUtilities.STROKE_WIDTH) {\n@@ -205,7 +165,7 @@ public Marker createMarker(BridgeContext ctx,\n         // 'viewBox' and 'preserveAspectRatio' attributes\n         // viewBox -> viewport(0, 0, markerWidth, markerHeight)\n         AffineTransform preserveAspectRatioTransform\n-            = ViewBox.getPreserveAspectRatioTransform(inst,\n+            = ViewBox.getPreserveAspectRatioTransform(markerElement,\n                                                       markerWidth,\n                                                       markerHeight);\n         if (preserveAspectRatioTransform == null) {\n@@ -218,9 +178,9 @@ public Marker createMarker(BridgeContext ctx,\n         markerContentNode.setTransform(markerTxf);\n \n         // 'overflow' property\n-        if (CSSUtilities.convertOverflow(inst)) { // overflow:hidden\n+        if (CSSUtilities.convertOverflow(markerElement)) { // overflow:hidden\n             Rectangle2D markerClip;\n-            float [] offsets = CSSUtilities.convertClip(inst);\n+            float [] offsets = CSSUtilities.convertClip(markerElement);\n             if (offsets == null) { // clip:auto\n                 markerClip\n                     = new Rectangle2D.Float(0,\n@@ -249,15 +209,15 @@ public Marker createMarker(BridgeContext ctx,\n \n         // 'refX' attribute - default is 0\n         float refX = 0;\n-        s = inst.getAttributeNS(null, SVG_REFX_ATTRIBUTE);\n+        s = markerElement.getAttributeNS(null, SVG_REFX_ATTRIBUTE);\n         if (s.length() != 0) {\n             refX = UnitProcessor.svgHorizontalCoordinateToUserSpace\n                 (s, SVG_REFX_ATTRIBUTE, uctx);\n         }\n \n         // 'refY' attribute - default is 0\n         float refY = 0;\n-        s = inst.getAttributeNS(null, SVG_REFY_ATTRIBUTE);\n+        s = markerElement.getAttributeNS(null, SVG_REFY_ATTRIBUTE);\n         if (s.length() != 0) {\n             refY = UnitProcessor.svgVerticalCoordinateToUserSpace\n                 (s, SVG_REFY_ATTRIBUTE, uctx);",
                "deletions": 62
            },
            {
                "sha": "36f766ba4e31fbf125b5916a51fcc885a1eb3e6d",
                "filename": "sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "status": "modified",
                "changes": 28,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGTextElementBridge.java?ref=ce0f57047e75d62456eacbbb506a83702f67dfd2",
                "patch": "@@ -30,6 +30,7 @@\n import java.util.List;\n import java.util.Map;\n \n+import org.apache.batik.css.CSSOMReadOnlyStyleDeclaration;\n import org.apache.batik.dom.svg.SVGOMDocument;\n import org.apache.batik.dom.util.XLinkSupport;\n import org.apache.batik.dom.util.XMLSupport;\n@@ -549,7 +550,8 @@ protected Map getAttributeMap(BridgeContext ctx,\n                                   Element element,\n                                   GraphicsNode node) {\n \n-        CSSStyleDeclaration cssDecl = CSSUtilities.getComputedStyle(element);\n+        CSSOMReadOnlyStyleDeclaration cssDecl\n+            = CSSUtilities.getComputedStyle(element);\n         UnitProcessor.Context uctx = UnitProcessor.createContext(ctx, element);\n \n         Map result = new HashMap();\n@@ -561,7 +563,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n         result.put(GVTAttributedCharacterIterator.TextAttribute.TEXT_COMPOUND_DELIMITER, element);\n \n         // Text-anchor\n-        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n             (CSS_TEXT_ANCHOR_PROPERTY);\n         s = v.getStringValue();\n         TextNode.Anchor a;\n@@ -583,7 +585,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n         result.put(TextAttribute.SIZE, new Float(fs));\n \n         // Font family\n-        CSSValueList ff = (CSSValueList)cssDecl.getPropertyCSSValue\n+        CSSValueList ff = (CSSValueList)cssDecl.getPropertyCSSValueInternal\n             (CSS_FONT_FAMILY_PROPERTY);\n         s = null;\n         for (int i = 0; s == null && i < ff.getLength(); i++) {\n@@ -596,7 +598,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n         // Font weight\n         // TODO: improve support for relative values\n         // (e.g. \"lighter\", \"bolder\")\n-        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n             (CSS_FONT_WEIGHT_PROPERTY);\n         if (v.getPrimitiveType() == CSSPrimitiveValue.CSS_IDENT) {\n             //System.out.println(\"CSS Font Weight \"+v.getStringValue());\n@@ -656,7 +658,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n \n         // Text baseline adjustment.\n         // TODO: support for <percentage> and <length> values.\n-        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n             (CSS_BASELINE_SHIFT_PROPERTY);\n         if (v.getPrimitiveType() == CSSPrimitiveValue.CSS_IDENT) {\n             s = v.getStringValue();\n@@ -693,7 +695,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n         // full support requires revision: see comments\n         // below regarding 'direction'\n \n-        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n             (CSS_UNICODE_BIDI_PROPERTY);\n         s = v.getStringValue();\n         if (s.charAt(0) == 'n') {\n@@ -711,7 +713,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n             // is only needed when one wants to override the\n             // normal writing direction for a string/substring.\n \n-            v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+            v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n                 (CSS_DIRECTION_PROPERTY);\n             String rs = v.getStringValue();\n             switch (rs.charAt(0)) {\n@@ -738,7 +740,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n \n         // Writing mode\n \n-        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n             (CSS_WRITING_MODE_PROPERTY);\n         s = v.getStringValue();\n         switch (s.charAt(0)) {\n@@ -759,7 +761,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n         }\n \n         // Font style\n-        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n             (CSS_FONT_STYLE_PROPERTY);\n         s = v.getStringValue();\n         switch (s.charAt(0)) {\n@@ -774,7 +776,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n         }\n \n         // Font stretch\n-        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n             (CSS_FONT_STRETCH_PROPERTY);\n         s = v.getStringValue();\n         switch (s.charAt(0)) {\n@@ -818,7 +820,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n         // text spacing properties...\n \n         // Letter Spacing\n-        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n             (CSS_LETTER_SPACING_PROPERTY);\n         t = v.getPrimitiveType();\n         if (t != CSSPrimitiveValue.CSS_IDENT) {\n@@ -837,7 +839,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n         }\n \n         // Word spacing\n-        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValue\n+        v = (CSSPrimitiveValue)cssDecl.getPropertyCSSValueInternal\n             (CSS_WORD_SPACING_PROPERTY);\n         t = v.getPrimitiveType();\n         if (t != CSSPrimitiveValue.CSS_IDENT) {\n@@ -925,7 +927,7 @@ protected Map getAttributeMap(BridgeContext ctx,\n         }\n \n         // Text decoration\n-        CSSValue cssVal = cssDecl.getPropertyCSSValue\n+        CSSValue cssVal = cssDecl.getPropertyCSSValueInternal\n             (CSS_TEXT_DECORATION_PROPERTY);\n         t = cssVal.getCssValueType();\n         if (t == CSSValue.CSS_VALUE_LIST) {",
                "deletions": 13
            },
            {
                "sha": "02e55f131d7c4b5b4b80cee9d22c70039fd55a98",
                "filename": "sources/org/apache/batik/bridge/TextUtilities.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/TextUtilities.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/TextUtilities.java",
                "status": "modified",
                "changes": 6,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/TextUtilities.java?ref=ce0f57047e75d62456eacbbb506a83702f67dfd2",
                "patch": "@@ -12,6 +12,7 @@\n import java.util.StringTokenizer;\n import org.w3c.dom.Element;\n \n+import org.apache.batik.css.CSSOMReadOnlyStyleDeclaration;\n import org.apache.batik.util.CSSConstants;\n \n import org.w3c.dom.css.CSSPrimitiveValue;\n@@ -96,11 +97,12 @@\n      */\n     public static float convertFontSize(Element svgElement,\n                                         BridgeContext ctx,\n-                                        CSSStyleDeclaration decl,\n+                                        CSSOMReadOnlyStyleDeclaration decl,\n                                         UnitProcessor.Context uctx) {\n \n         CSSPrimitiveValue v\n-            = (CSSPrimitiveValue)decl.getPropertyCSSValue(CSS_FONT_SIZE_PROPERTY);\n+            = (CSSPrimitiveValue)decl.getPropertyCSSValueInternal\n+            (CSS_FONT_SIZE_PROPERTY);\n \n         short t = v.getPrimitiveType();\n         switch (t) {",
                "deletions": 2
            },
            {
                "sha": "6c6975cddd9c8e1995d9941caac1c86120a70d09",
                "filename": "sources/org/apache/batik/bridge/UnitProcessor.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/UnitProcessor.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/bridge/UnitProcessor.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/UnitProcessor.java?ref=ce0f57047e75d62456eacbbb506a83702f67dfd2",
                "patch": "@@ -934,7 +934,7 @@ public float getMediumFontSize() {\n          * Returns the font-size value.\n          */\n         public CSSPrimitiveValue getFontSize() {\n-            return (CSSPrimitiveValue)CSSUtilities.getComputedStyle(e).getPropertyCSSValue(CSSConstants.CSS_FONT_SIZE_PROPERTY);\n+            return CSSUtilities.getComputedStyle(e).getPropertyCSSValueInternal(CSSConstants.CSS_FONT_SIZE_PROPERTY);\n         }\n \n         /**",
                "deletions": 1
            },
            {
                "sha": "d68245b7c3727e1adb3839a2172d726126476316",
                "filename": "sources/org/apache/batik/gvt/AbstractGraphicsNode.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/gvt/AbstractGraphicsNode.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/gvt/AbstractGraphicsNode.java",
                "status": "modified",
                "changes": 37,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/AbstractGraphicsNode.java?ref=ce0f57047e75d62456eacbbb506a83702f67dfd2",
                "patch": "@@ -775,28 +775,24 @@ protected void invalidateGeometryCache() {\n      */\n     public Rectangle2D getTransformedBounds(AffineTransform txf,\n                                             GraphicsNodeRenderContext rc){\n-        // System.out.println(\"getTransformedBounds A:\" + this.getClass().getName());\n         AffineTransform t = txf;\n         if(transform != null){\n             t = new AffineTransform(txf);\n             t.concatenate(transform);\n         }\n \n-        // The painted region, before cliping, masking\n-        // and compositing is either the area painted\n-        // by the primitive paint or the area painted\n-        // by the filter.\n+        // The painted region, before cliping, masking and compositing\n+        // is either the area painted by the primitive paint or the\n+        // area painted by the filter.\n         Rectangle2D tBounds = null;\n         if(filter == null){\n-            // System.out.println(\"getTransformedBounds B:\" + this.getClass().getName());\n             tBounds = getTransformedPrimitiveBounds(txf, rc); /* Use txf, not t */\n-            // System.out.println(\"getTransformedBounds C:\" + this.getClass().getName());\n         } else {\n-            tBounds = t.createTransformedShape(filter.getBounds2D()).getBounds2D();\n+            tBounds = t.createTransformedShape\n+                (filter.getBounds2D()).getBounds2D();\n         }\n         // Factor in the clipping area, if any\n         if(tBounds != null){\n-            // System.out.println(\"getTransformedBounds D:\" + this.getClass().getName());\n             if(clip != null) {\n                 tBounds.intersect(tBounds,\n                                   t.createTransformedShape(clip.getClipPath()).getBounds2D(),\n@@ -810,12 +806,12 @@ public Rectangle2D getTransformedBounds(AffineTransform txf,\n                                   tBounds);\n             }\n         }\n-        // System.out.println(\"getTransformedBounds E:\" + this.getClass().getName());\n         return tBounds;\n     }\n \n-    public Rectangle2D getTransformedPrimitiveBounds(AffineTransform txf,\n-                                                     GraphicsNodeRenderContext rc){\n+    public Rectangle2D getTransformedPrimitiveBounds\n+        (AffineTransform txf, GraphicsNodeRenderContext rc) {\n+\n         Rectangle2D tpBounds = getPrimitiveBounds(rc);\n         if (tpBounds == null) {\n             return null;\n@@ -829,8 +825,9 @@ public Rectangle2D getTransformedPrimitiveBounds(AffineTransform txf,\n         return t.createTransformedShape(tpBounds).getBounds2D();\n     }\n \n-    public Rectangle2D getTransformedGeometryBounds(AffineTransform txf,\n-                                                    GraphicsNodeRenderContext rc){\n+    public Rectangle2D getTransformedGeometryBounds\n+        (AffineTransform txf, GraphicsNodeRenderContext rc) {\n+\n         Rectangle2D tpBounds = getGeometryBounds(rc);\n         if (tpBounds == null) {\n             return null;\n@@ -854,20 +851,14 @@ public Rectangle2D getBounds(GraphicsNodeRenderContext rc){\n         // Get the primitive bounds\n         // Rectangle2D bounds = null;\n         if(bounds == null){\n-            if (Thread.currentThread().isInterrupted()) {\n-                return null;\n-            }\n-\n-            // The painted region, before cliping, masking\n-            // and compositing is either the area painted\n-            // by the primitive paint or the area painted\n-            // by the filter.\n+            // The painted region, before cliping, masking and\n+            // compositing is either the area painted by the primitive\n+            // paint or the area painted by the filter.\n             if(filter == null){\n                 bounds = getPrimitiveBounds(rc);\n             } else {\n                 bounds = filter.getBounds2D();\n             }\n-\n             // Factor in the clipping area, if any\n             if(bounds != null){\n                 if (clip != null) {",
                "deletions": 23
            },
            {
                "sha": "4a00c272232633bebea2a5add99e1c370948fdfd",
                "filename": "sources/org/apache/batik/gvt/CompositeGraphicsNode.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/gvt/CompositeGraphicsNode.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/gvt/CompositeGraphicsNode.java",
                "status": "modified",
                "changes": 23,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/CompositeGraphicsNode.java?ref=ce0f57047e75d62456eacbbb506a83702f67dfd2",
                "patch": "@@ -271,16 +271,13 @@ public Rectangle2D getPrimitiveBounds(GraphicsNodeRenderContext rc) {\n             // System.out.println(\"primitiveBounds are null:\" + this.getClass().getName());\n             int i=0;\n             while(primitiveBounds == null && i < count){\n-                // System.out.println(\"XX\");\n-                primitiveBounds = children[i++].getTransformedBounds(IDENTITY, rc);\n-                // System.out.println(\"child\" + (i -1) + \" bounds : \" + primitiveBounds);\n+                primitiveBounds = children[i++].getTransformedBounds\n+                    (IDENTITY, rc);\n             }\n \n             Rectangle2D ctb = null;\n             while(i < count){\n                 ctb = children[i++].getTransformedBounds(IDENTITY, rc);\n-                // System.out.println(\"YY\");\n-                // System.out.println(\"child add\" + (i -1) + \" bounds : \" + ctb);\n                 if(ctb != null){\n                     primitiveBounds.add(ctb);\n                 }\n@@ -309,13 +306,11 @@ public Rectangle2D getTransformedPrimitiveBounds(AffineTransform txf,\n         int i = 0;\n         Rectangle2D tpb = null;\n         while( tpb == null && i < count){\n-            // System.out.println(\"XX22\");\n             tpb = children[i++].getTransformedBounds(t, rc);\n         }\n \n         Rectangle2D ctb = null;\n         while(i < count){\n-            // System.out.println(\"YY22\");\n             ctb = children[i++].getTransformedBounds(t, rc);\n             if(ctb != null){\n                 tpb.add(ctb);\n@@ -335,18 +330,17 @@ public Rectangle2D getTransformedPrimitiveBounds(AffineTransform txf,\n      *\n      * @param rc the GraphicsNodeRenderContext for which this dimension applies\n       */\n-    public Rectangle2D getGeometryBounds(GraphicsNodeRenderContext rc){\n+    public Rectangle2D getGeometryBounds(GraphicsNodeRenderContext rc) {\n         if(geometryBounds == null){\n             // System.out.println(\"geometryBounds are null\");\n             int i=0;\n             while(geometryBounds == null && i < count){\n-                // System.out.println(\"XX33\");\n-                geometryBounds = children[i++].getTransformedGeometryBounds(IDENTITY, rc);\n+                geometryBounds\n+                    = children[i++].getTransformedGeometryBounds (IDENTITY, rc);\n             }\n \n             Rectangle2D cgb = null;\n             while(i<count){\n-                // System.out.println(\"YY33\");\n                 cgb = children[i++].getTransformedGeometryBounds(IDENTITY, rc);\n                 if(cgb != null){\n                     geometryBounds.add(cgb);\n@@ -369,8 +363,9 @@ public Rectangle2D getGeometryBounds(GraphicsNodeRenderContext rc){\n      *\n      * @param rc the GraphicsNodeRenderContext for which this dimension applies\n       */\n-    public Rectangle2D getTransformedGeometryBounds(AffineTransform txf,\n-                                                    GraphicsNodeRenderContext rc){\n+    public Rectangle2D getTransformedGeometryBounds\n+        (AffineTransform txf, GraphicsNodeRenderContext rc) {\n+\n         AffineTransform t = txf;\n         if(transform != null){\n             t = new AffineTransform(txf);\n@@ -380,13 +375,11 @@ public Rectangle2D getTransformedGeometryBounds(AffineTransform txf,\n         Rectangle2D gb = null;\n         int i=0;\n         while(gb == null && i < count){\n-            // System.out.println(\"XX44\");\n             gb = children[i++].getTransformedGeometryBounds(t, rc);\n         }\n \n         Rectangle2D cgb = null;\n         while(i < count){\n-            // System.out.println(\"YY44\");\n             cgb = children[i++].getTransformedGeometryBounds(t, rc);\n             if(cgb != null){\n                 gb.add(cgb);",
                "deletions": 15
            },
            {
                "sha": "095e1faf1b37959981d902885493bd422656deaa",
                "filename": "sources/org/apache/batik/gvt/CompositeShapePainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/gvt/CompositeShapePainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ce0f57047e75d62456eacbbb506a83702f67dfd2/sources/org/apache/batik/gvt/CompositeShapePainter.java",
                "status": "modified",
                "changes": 4,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/CompositeShapePainter.java?ref=ce0f57047e75d62456eacbbb506a83702f67dfd2",
                "patch": "@@ -52,11 +52,9 @@ public void addShapePainter(ShapePainter shapePainter) {\n         if (shapePainter == null) {\n             return;\n         }\n-\n         if(this.shape != shapePainter.getShape()){\n             shapePainter.setShape(shape);\n         }\n-\n         if (painters == null) {\n             painters = new ShapePainter[2];\n         }\n@@ -83,7 +81,7 @@ public void paint(Graphics2D g2d,\n     }\n \n     /**\n-     * Returns the area painted by this painter \n+     * Returns the area painted by this painter\n      */\n     public Shape getPaintedArea(GraphicsNodeRenderContext rc){\n         // <!> FIX ME: Use of GeneralPath is a work around Area problems.",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Bug fix:\n  Avoid NPE when resolving substitutions for Arabic script\n    (submitted by Tor Arne Vestb\u00f8 <torarnv@gmail.com>);\n    (closes bug 48182).\n\nGeneral:\n  Document -autorange option of ttf2svg.\n    (see bug 48182 comment 7).\n  Change default output character range to ASCII printable characters.\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@996358 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/aa370559774a473fef0662fe3c131642c3cd6162",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/78ea077b55be3a95040648bf228be25b7e6c680e",
        "bug_id": "xmlgraphics-batik_32",
        "file": [
            {
                "sha": "39158d01635073a8e9f5772d2ee46cfebb336ff8",
                "filename": "CHANGES",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/aa370559774a473fef0662fe3c131642c3cd6162/CHANGES",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/aa370559774a473fef0662fe3c131642c3cd6162/CHANGES",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/CHANGES?ref=aa370559774a473fef0662fe3c131642c3cd6162",
                "patch": "@@ -11,7 +11,7 @@ Bug fixing is an on-going task, so it is implied in all sub-releases.\n \n     43411, 43847, 44553, 44590, 44919, 44936, 44966, 45112, 45114,\n     45117, 45397, 45520, 45883, 45958, 46072, 46124, 46430, 46431,\n-    46855, 46871, 47201, 47202, 48411\n+    46855, 46871, 47201, 47202, 48182, 48411\n \n \n 2. New features",
                "deletions": 1
            },
            {
                "sha": "c3b3263afe0b8a064dce2fefcb424a127b562bc2",
                "filename": "documentation-sources/content/xdocs/tools/font-converter.xml",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/aa370559774a473fef0662fe3c131642c3cd6162/documentation-sources/content/xdocs/tools/font-converter.xml",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/aa370559774a473fef0662fe3c131642c3cd6162/documentation-sources/content/xdocs/tools/font-converter.xml",
                "status": "modified",
                "changes": 7,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/documentation-sources/content/xdocs/tools/font-converter.xml?ref=aa370559774a473fef0662fe3c131642c3cd6162",
                "patch": "@@ -52,7 +52,7 @@\n       <p>\n         In both cases, the options are the same:\n       </p>\n-      <source><em>ttf-path</em> <em>[</em><strong>-l</strong> <em>range-begin] [</em><strong>-h</strong> <em>range-end] [</em><strong>-ascii</strong><em>] [</em><strong>-id</strong> <em>id] [</em><strong>-o</strong> <em>output-path] [</em><strong>-testcard</strong><em>]</em></source>\n+      <source><em>ttf-path</em> <em>[</em><strong>-l</strong> <em>range-begin] [</em><strong>-h</strong> <em>range-end] [</em><strong>-autorange</strong><em>] [</em><strong>-ascii</strong><em>] [</em><strong>-id</strong> <em>id] [</em><strong>-o</strong> <em>output-path] [</em><strong>-testcard</strong><em>]</em></source>\n       <p>\n         where:\n       </p>\n@@ -67,6 +67,11 @@\n           <p>specifies the range of characters (by codepoint, in decimal) to be\n             converted,</p>\n         </dd>\n+        <dt><strong>-autorange</strong></dt>\n+        <dd>\n+          <p>automatically determines the available character range, instead of using the\n+            default, ASCII printable characters (ranging from 32 to 126),</p>\n+        </dd>\n         <dt><strong>-ascii</strong></dt>\n         <dd>\n           <p>forces usage of the ASCII character map in the font, instead of the",
                "deletions": 1
            },
            {
                "sha": "4225bf1425bc359ec4fd872b8cd758f710b828b2",
                "filename": "sources/org/apache/batik/svggen/font/SVGFont.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/aa370559774a473fef0662fe3c131642c3cd6162/sources/org/apache/batik/svggen/font/SVGFont.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/aa370559774a473fef0662fe3c131642c3cd6162/sources/org/apache/batik/svggen/font/SVGFont.java",
                "status": "modified",
                "changes": 20,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/svggen/font/SVGFont.java?ref=aa370559774a473fef0662fe3c131642c3cd6162",
                "patch": "@@ -51,7 +51,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n     static final String PROPERTY_LINE_SEPARATOR_DEFAULT = \"\\n\";\n \n     static final int DEFAULT_FIRST = 32;\n-    static final int DEFAULT_LAST = 128;\n+    static final int DEFAULT_LAST = 126;\n \n     static {\n         String  temp;\n@@ -339,12 +339,18 @@ protected static void writeFontAsSVGFragment(PrintStream ps, Font font, String i\n                     Feature medi = gsub.getFeatureList().findFeature(ls, FEATURE_TAG_MEDI);\n                     Feature fina = gsub.getFeatureList().findFeature(ls, FEATURE_TAG_FINA);\n \n-                    initialSubst = (SingleSubst)\n-                        gsub.getLookupList().getLookup(init, 0).getSubtable(0);\n-                    medialSubst = (SingleSubst)\n-                        gsub.getLookupList().getLookup(medi, 0).getSubtable(0);\n-                    terminalSubst = (SingleSubst)\n-                        gsub.getLookupList().getLookup(fina, 0).getSubtable(0);\n+                    if (init != null) {\n+                        initialSubst = (SingleSubst)\n+                            gsub.getLookupList().getLookup(init, 0).getSubtable(0);\n+                    }\n+                    if (medi != null) {\n+                        medialSubst = (SingleSubst)\n+                            gsub.getLookupList().getLookup(medi, 0).getSubtable(0);\n+                    }\n+                    if (fina != null) {\n+                        terminalSubst = (SingleSubst)\n+                            gsub.getLookupList().getLookup(fina, 0).getSubtable(0);\n+                    }\n                 }\n             }\n         }",
                "deletions": 7
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Fix mouse events on tspans.\n2) Revert some calls to 'addAll' (markers mid should now work again)\n3) Added needed NPE protection in text selection code.\n4) Some simple code cleanup in FlowTextPainter.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@761228 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/47b64c372374ab0a87fbb7dfe8536db14c9dd602",
        "bug_id": "xmlgraphics-batik_33",
        "file": [
            {
                "sha": "14e1cc871b8fee61eccafbd29dfc8ea6ef88cc9d",
                "filename": "sources/org/apache/batik/bridge/BridgeEventSupport.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/bridge/BridgeEventSupport.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/bridge/BridgeEventSupport.java",
                "status": "modified",
                "changes": 23,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/BridgeEventSupport.java?ref=da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e",
                "patch": "@@ -260,8 +260,7 @@ public void mouseReleased(GraphicsNodeMouseEvent evt) {\n         public void mouseEntered(GraphicsNodeMouseEvent evt) {\n             Point clientXY = evt.getClientPoint();\n             GraphicsNode node = evt.getGraphicsNode();\n-            Element targetElement = getEventTarget\n-                (node, new Point2D.Float(evt.getX(), evt.getY()));\n+            Element targetElement = getEventTarget(node, evt.getPoint2D());\n             Element relatedElement = getRelatedElement(evt);\n             dispatchMouseEvent(\"mouseover\",\n                                targetElement,\n@@ -275,7 +274,7 @@ public void mouseExited(GraphicsNodeMouseEvent evt) {\n             Point clientXY = evt.getClientPoint();\n             // Get the 'new' node for the DOM event.\n             GraphicsNode node = evt.getRelatedNode();\n-            Element targetElement = getEventTarget(node, clientXY);\n+            Element targetElement = getEventTarget(node, evt.getPoint2D());\n             if (lastTargetElement != null) {\n                 dispatchMouseEvent(\"mouseout\",\n                                    lastTargetElement, // target\n@@ -294,7 +293,7 @@ public void mouseDragged(GraphicsNodeMouseEvent evt) {\n         public void mouseMoved(GraphicsNodeMouseEvent evt) {\n             Point clientXY = evt.getClientPoint();\n             GraphicsNode node = evt.getGraphicsNode();\n-            Element targetElement = getEventTarget(node, clientXY);\n+            Element targetElement = getEventTarget(node, evt.getPoint2D());\n             Element holdLTE = lastTargetElement;\n             if (holdLTE != targetElement) {\n                 if (holdLTE != null) {\n@@ -335,8 +334,7 @@ protected void dispatchMouseEvent(String eventType,\n                                           boolean cancelable) {\n             Point clientXY = evt.getClientPoint();\n             GraphicsNode node = evt.getGraphicsNode();\n-            Element targetElement = getEventTarget\n-                (node, new Point2D.Float(evt.getX(), evt.getY()));\n+            Element targetElement = getEventTarget(node, evt.getPoint2D());\n             Element relatedElement = getRelatedElement(evt);\n             dispatchMouseEvent(eventType,\n                                targetElement,\n@@ -431,28 +429,21 @@ protected Element getRelatedElement(GraphicsNodeMouseEvent evt) {\n          * @param node the graphics node that received the event\n          * @param coords the mouse coordinates in the GVT tree space\n          */\n-        protected Element getEventTarget(GraphicsNode node, Point2D coords) {\n+        protected Element getEventTarget(GraphicsNode node, Point2D pt) {\n             Element target = context.getElement(node);\n             // Lookup inside the text element children to see if the target\n             // is a tspan or textPath\n-\n             if (target != null && node instanceof TextNode) {\n                 TextNode textNode = (TextNode)node;\n                 List list = textNode.getTextRuns();\n-                Point2D pt = (Point2D)coords.clone();\n-                // place coords in text node coordinate system\n-                try {\n-                    node.getGlobalTransform().createInverse().transform(pt, pt);\n-                } catch (NoninvertibleTransformException ex) {\n-                }\n                 if (list != null){\n+                    float x = (float)pt.getX();\n+                    float y = (float)pt.getY();\n                     for (int i = 0 ; i < list.size(); i++) {\n                         StrokingTextPainter.TextRun run =\n                             (StrokingTextPainter.TextRun)list.get(i);\n                         AttributedCharacterIterator aci = run.getACI();\n                         TextSpanLayout layout = run.getLayout();\n-                        float x = (float)pt.getX();\n-                        float y = (float)pt.getY();\n                         TextHit textHit = layout.hitTestChar(x, y);\n                         Rectangle2D bounds = layout.getBounds2D();\n                         if ((textHit != null) &&",
                "deletions": 16
            },
            {
                "sha": "a225e5c9a5b2a62d721991a4337ef8a9f832360d",
                "filename": "sources/org/apache/batik/bridge/SVGAnimationEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/bridge/SVGAnimationEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/bridge/SVGAnimationEngine.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGAnimationEngine.java?ref=da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e",
                "patch": "@@ -256,8 +256,12 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n             animationEventNames11.add(eventNamesCommon[i]);\n             animationEventNames12.add(eventNamesCommon[i]);\n         }\n-        animationEventNames11.addAll(Arrays.asList(eventNamesSVG11));\n-        animationEventNames12.addAll(Arrays.asList(eventNamesSVG12));\n+        for (int i = 0; i < eventNamesSVG11.length; i++) {\n+            animationEventNames11.add(eventNamesSVG11[i]);\n+        }\n+        for (int i = 0; i < eventNamesSVG12.length; i++) {\n+            animationEventNames12.add(eventNamesSVG12[i]);\n+        }\n     }\n \n     /**",
                "deletions": 2
            },
            {
                "sha": "f860738f6b40f4e397c0f0fc18c8e41be891ca42",
                "filename": "sources/org/apache/batik/gvt/MarkerShapePainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/gvt/MarkerShapePainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/gvt/MarkerShapePainter.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/MarkerShapePainter.java?ref=da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e",
                "patch": "@@ -301,7 +301,9 @@ protected void buildMarkerGroup(){\n         }\n \n         if (middleMarkerProxies != null) {\n-            children.addAll(Arrays.asList(middleMarkerProxies));\n+            for(int i=0; i<middleMarkerProxies.length; i++){\n+                children.add(middleMarkerProxies[i]);\n+            }\n         }\n \n         if (endMarkerProxy != null) {",
                "deletions": 1
            },
            {
                "sha": "b142b5d49a0e23be74e01b3ba384a9313bbaaab4",
                "filename": "sources/org/apache/batik/gvt/flow/FlowTextPainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/gvt/flow/FlowTextPainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/gvt/flow/FlowTextPainter.java",
                "status": "modified",
                "changes": 8,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/flow/FlowTextPainter.java?ref=da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e",
                "patch": "@@ -135,7 +135,7 @@ public static boolean textWrap(AttributedCharacterIterator [] acis,\n         // Make a list of the GlyphVectors so we can construct a\n         // multiGlyphVector that makes them all look like one big\n         // glyphVector\n-        GVTGlyphVector [] gvs            = new GVTGlyphVector[acis.length];       // todo - not used?\n+        // GVTGlyphVector [] gvs            = new GVTGlyphVector[acis.length];       // todo - not used?\n         WordInfo       [][] wordInfos    = new WordInfo[acis.length][];\n         Iterator clIter = chunkLayouts.iterator();\n \n@@ -154,7 +154,7 @@ public static boolean textWrap(AttributedCharacterIterator [] acis,\n                 gvl.add(gl.getGlyphVector());\n             }\n             GVTGlyphVector gv = new MultiGlyphVector(gvl);\n-            gvs[chunk] = gv;\n+            // gvs[chunk] = gv;\n             wordInfos[chunk] = doWordAnalysis(gv, aci, numWords, frc);\n             aci.first();\n             BlockInfo bi = (BlockInfo)aci.getAttribute(FLOW_PARAGRAPH);\n@@ -190,7 +190,7 @@ public static boolean textWrap(AttributedCharacterIterator [] acis,\n \n                 while (!li.addWord(wi)) {\n                     // step down 1/10 of a line height and try again.\n-                    newY = li.getCurrentY()+lh * 0.1;\n+                    newY = li.getCurrentY() + (lh * 0.1);\n                     if (li.gotoY(newY)) break;\n                 }\n                 if (fr.done()) break;\n@@ -213,7 +213,7 @@ public static boolean textWrap(AttributedCharacterIterator [] acis,\n \n                     li = new LineInfo(fr, bi, false);\n                     while (!li.addWord(wi)) {\n-                        newY =li.getCurrentY()+lh * 0.1;\n+                        newY =li.getCurrentY() + (lh * 0.1);\n                         if (li.gotoY(newY)) break;\n                     }\n                     if (fr.done()) break;",
                "deletions": 4
            },
            {
                "sha": "639ecfc884033e77be069a952bd052c91da72c9e",
                "filename": "sources/org/apache/batik/gvt/renderer/StrokingTextPainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/gvt/renderer/StrokingTextPainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e/sources/org/apache/batik/gvt/renderer/StrokingTextPainter.java",
                "status": "modified",
                "changes": 18,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/renderer/StrokingTextPainter.java?ref=da60b0809a3e3957d2a49bf65f6a69e8aecbfa3e",
                "patch": "@@ -1417,14 +1417,16 @@ protected Mark hitTest(double x, double y, TextNode node) {\n \n         // get the list of text runs\n         List textRuns = getTextRuns(node, aci);\n-\n-        // for each text run, see if its been hit\n-        for (int i = 0; i < textRuns.size(); ++i) {\n-            TextRun textRun = (TextRun)textRuns.get(i);\n-            TextSpanLayout layout = textRun.getLayout();\n-            TextHit textHit = layout.hitTestChar((float) x, (float) y);\n-            if (textHit != null && layout.getBounds2D().contains(x,y)) {\n-                return new BasicTextPainter.BasicMark(node, textHit);\n+        if (textRuns != null) {\n+            // for each text run, see if its been hit\n+            for (int i = 0; i < textRuns.size(); ++i) {\n+                TextRun textRun = (TextRun)textRuns.get(i);\n+                TextSpanLayout layout = textRun.getLayout();\n+                TextHit textHit = layout.hitTestChar((float) x, (float) y);\n+                Rectangle2D bounds = layout.getBounds2D();\n+                if ((textHit != null) && \n+                    (bounds != null) && bounds.contains(x,y))\n+                    return new BasicTextPainter.BasicMark(node, textHit);\n             }\n         }\n ",
                "deletions": 8
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "Avoid NPE when calling DOMMouseEvent.initMouseEvent(), and when trying\nto inspect the modifier state of an event object before it has been\ninitialised.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@598494 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/95b96d818af6519e624e13a01e41e4b8e39206e6",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/3d96ede9cbf3018b45718d5c436c4acd2cbe7b0c",
        "bug_id": "xmlgraphics-batik_34",
        "file": [
            {
                "sha": "886abeeb161b0de898bd15924fac956a6eb9d642",
                "filename": "sources/org/apache/batik/dom/events/DOMKeyboardEvent.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/95b96d818af6519e624e13a01e41e4b8e39206e6/sources/org/apache/batik/dom/events/DOMKeyboardEvent.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/95b96d818af6519e624e13a01e41e4b8e39206e6/sources/org/apache/batik/dom/events/DOMKeyboardEvent.java",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/events/DOMKeyboardEvent.java?ref=95b96d818af6519e624e13a01e41e4b8e39206e6",
                "patch": "@@ -234,7 +234,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n     /**\n      * The modifier keys in effect at the time of the event.\n      */\n-    protected HashSet modifierKeys;\n+    protected HashSet modifierKeys = new HashSet();\n \n     /**\n      * The identifier string for the key.\n@@ -322,7 +322,7 @@ public void initKeyboardEvent(String typeArg,\n         initUIEvent(typeArg, canBubbleArg, cancelableArg, viewArg, 0);\n         keyIdentifier = keyIdentifierArg;\n         keyLocation = keyLocationArg;\n-        modifierKeys = new HashSet();\n+        modifierKeys.clear();\n         String[] modifiers = split(modifiersList);\n         for (int i = 0; i < modifiers.length; i++) {\n             modifierKeys.add(modifiers[i]);\n@@ -361,7 +361,7 @@ public void initKeyboardEventNS(String namespaceURIArg,\n                                0);\n         keyIdentifier = keyIdentifierArg;\n         keyLocation = keyLocationArg;\n-        modifierKeys = new HashSet();\n+        modifierKeys.clear();\n         String[] modifiers = split(modifiersList);\n         for (int i = 0; i < modifiers.length; i++) {\n             modifierKeys.add(modifiers[i]);",
                "deletions": 3
            },
            {
                "sha": "84b685779de299d281dc93393c00d6d3637a3fbe",
                "filename": "sources/org/apache/batik/dom/events/DOMMouseEvent.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/95b96d818af6519e624e13a01e41e4b8e39206e6/sources/org/apache/batik/dom/events/DOMMouseEvent.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/95b96d818af6519e624e13a01e41e4b8e39206e6/sources/org/apache/batik/dom/events/DOMMouseEvent.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/events/DOMMouseEvent.java?ref=95b96d818af6519e624e13a01e41e4b8e39206e6",
                "patch": "@@ -44,7 +44,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n     /**\n      * The modifier keys in effect at the time of the event.\n      */\n-    protected HashSet modifierKeys;\n+    protected HashSet modifierKeys = new HashSet();\n \n     /**\n      * DOM: <code>screenX</code> indicates the horizontal coordinate\n@@ -265,7 +265,7 @@ public void initMouseEventNS(String namespaceURIArg,\n         clientY = clientYArg;\n         button = buttonArg;\n         relatedTarget = relatedTargetArg;\n-        modifierKeys = new HashSet();\n+        modifierKeys.clear();\n         String[] modifiers = split(modifiersList);\n         for (int i = 0; i < modifiers.length; i++) {\n             modifierKeys.add(modifiers[i]);",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "work on potential NPEs: fix some by changing control-flow, add a todo\nmake some internal exceptions tell more about the reason\nupdate some comments\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@588550 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/1ff1a7c0d860252ede7b160cbef9f3423916e7e2",
        "bug_id": "xmlgraphics-batik_35",
        "file": [
            {
                "sha": "b4ff1135e4f87f610a701db994b32e3188e7f434",
                "filename": "sources/org/apache/batik/bridge/FontFace.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/bridge/FontFace.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/bridge/FontFace.java",
                "status": "modified",
                "changes": 21,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/FontFace.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -80,15 +80,15 @@ protected FontFace(String familyName) {\n     public static CSSFontFace createFontFace(String familyName,\n                                              FontFace src) {\n         return new CSSFontFace\n-            (new LinkedList(src.srcs), \n+            (new LinkedList(src.srcs),\n              familyName, src.unitsPerEm, src.fontWeight,\n              src.fontStyle, src.fontVariant, src.fontStretch,\n              src.slope, src.panose1, src.ascent, src.descent,\n              src.strikethroughPosition, src.strikethroughThickness,\n              src.underlinePosition, src.underlineThickness,\n              src.overlinePosition, src.overlineThickness);\n     }\n-    \n+\n     /**\n      * Returns the font associated with this rule or element.\n      */\n@@ -99,7 +99,7 @@ public GVTFontFamily getFontFamily(BridgeContext ctx) {\n             return new AWTFontFamily(ff);\n         }\n \n-        Iterator iter = srcs.iterator(); \n+        Iterator iter = srcs.iterator();\n         while (iter.hasNext()) {\n             Object o = iter.next();\n             if (o instanceof String) {\n@@ -118,14 +118,14 @@ public GVTFontFamily getFontFamily(BridgeContext ctx) {\n                     // Security violation notify the user but keep going.\n                     ctx.getUserAgent().displayError(ex);\n                 } catch (BridgeException ex) {\n-                    // If Security violation notify \n+                    // If Security violation notify\n                     // the user but keep going.\n-                    if (ERR_URI_UNSECURE.equals(ex.getCode())) \n+                    if (ERR_URI_UNSECURE.equals(ex.getCode()))\n                         ctx.getUserAgent().displayError(ex);\n                 } catch (Exception ex) {\n                     // Do nothing couldn't get Referenced URL.\n                 }\n-            }   \n+            }\n         }\n \n         return new AWTFontFamily(this);\n@@ -159,7 +159,7 @@ protected GVTFontFamily getFontFamily(BridgeContext ctx,\n             // I'll vote yes just because it is a security exception (other\n             // exceptions like font not available etc I would skip).\n             userAgent.displayError(ex);\n-            return null; \n+            return null;\n         }\n \n         if (purl.getRef() != null) {\n@@ -183,7 +183,7 @@ protected GVTFontFamily getFontFamily(BridgeContext ctx,\n                                  \"xml:base\", base);\n                 CSSUtilities.computeStyleAndURIs(ref, fontElt, purlStr);\n             }\n-            \n+\n             // Search for a font-face element\n             Element fontFaceElt = null;\n             for (Node n = fontElt.getFirstChild();\n@@ -196,12 +196,13 @@ protected GVTFontFamily getFontFamily(BridgeContext ctx,\n                     break;\n                 }\n             }\n+            // todo : if the above loop fails to find a fontFaceElt, a null is passed to createFontFace()\n             \n             SVGFontFaceElementBridge fontFaceBridge;\n             fontFaceBridge = (SVGFontFaceElementBridge)ctx.getBridge\n                 (SVG_NAMESPACE_URI, SVG_FONT_FACE_TAG);\n             GVTFontFace gff = fontFaceBridge.createFontFace(ctx, fontFaceElt);\n-            \n+\n \n             return new SVGFontFamily(gff, fontElt, ctx);\n         }\n@@ -217,7 +218,7 @@ protected GVTFontFamily getFontFamily(BridgeContext ctx,\n     }\n \n     /**\n-     * Default implementation uses the root element of the document \n+     * Default implementation uses the root element of the document\n      * associated with BridgeContext.  This is useful for CSS case.\n      */\n     protected Element getBaseElement(BridgeContext ctx) {",
                "deletions": 10
            },
            {
                "sha": "5534249a45be83f9af87081a27fd70508f0aba53",
                "filename": "sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "status": "modified",
                "changes": 27,
                "additions": 16,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGTextElementBridge.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -2962,22 +2962,25 @@ public Set getTextIntersectionSet(AffineTransform at,\n             if (!isTextSensitive(elem))   continue;\n \n             Rectangle2D glBounds = layout.getBounds2D();\n-            if (glBounds != null)\n+            if (glBounds != null) {\n                 glBounds = at.createTransformedShape(glBounds).getBounds2D();\n \n-            if (!rect.intersects(glBounds))\n-                continue;\n-\n+                if (!rect.intersects(glBounds)) {\n+                    continue;\n+                }\n+            }\n+            \n             GVTGlyphVector gv = layout.getGlyphVector();\n             for (int g = 0; g < gv.getNumGlyphs(); g++) {\n                 Shape gBounds = gv.getGlyphLogicalBounds(g);\n-                if (gBounds != null)\n+                if (gBounds != null) {\n                     gBounds = at.createTransformedShape\n                         (gBounds).getBounds2D();\n \n-                if (gBounds.intersects(rect)) {\n-                    elems.add(elem);\n-                    break;\n+                    if (gBounds.intersects(rect)) {\n+                        elems.add(elem);\n+                        break;\n+                    }\n                 }\n             }\n         }\n@@ -3093,12 +3096,14 @@ else if (svgCtx instanceof AbstractTextChildSVGContext) {\n             GVTGlyphVector gv = layout.getGlyphVector();\n             for (int g = 0; g < gv.getNumGlyphs(); g++) {\n                 Shape gBounds = gv.getGlyphLogicalBounds(g);\n-                if (gBounds != null)\n+                if (gBounds != null) {\n                     gBounds = at.createTransformedShape\n                         (gBounds).getBounds2D();\n \n-                if (gBounds.intersects(rect))\n-                    return true;\n+                    if (gBounds.intersects(rect)){\n+                        return true;\n+                    }\n+                }\n             }\n         }\n         return false;",
                "deletions": 11
            },
            {
                "sha": "6119d2b68eb874892cab6b56b93990b183abe2fd",
                "filename": "sources/org/apache/batik/css/engine/CSSEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/css/engine/CSSEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/css/engine/CSSEngine.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/css/engine/CSSEngine.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -1895,7 +1895,7 @@ protected void inlineStyleAttributeUpdated(CSSStylableElement elt,\n                 for (int i = getNumberOfProperties() - 1; i >= 0; --i) {\n                     if (style.isComputed(i) && !updated[i]) {\n                         short origin = style.getOrigin(i);\n-                        if (origin >= StyleMap.INLINE_AUTHOR_ORIGIN) {\n+                        if (origin >= StyleMap.INLINE_AUTHOR_ORIGIN) {     // ToDo Jlint says: always same result ??\n                             removed = true;\n                             updated[i] = true;\n                         }\n@@ -2398,7 +2398,7 @@ protected void handleNodeRemoved(Node n) {\n     /**\n      * Handles a subtree modification in the document.\n      * todo the incoming Node is actually ignored (not used) here,\n-     *     but it seems caller-sites assume that it is used - is this done right?? \n+     *     but it seems caller-sites assume that it is used - is this done right??\n      */\n     protected void handleSubtreeModified(Node ignored) {\n         if (styleSheetRemoved) {",
                "deletions": 2
            },
            {
                "sha": "fe8bda166aa983cd56f91f73790cff03fe807888",
                "filename": "sources/org/apache/batik/dom/AbstractDocument.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/dom/AbstractDocument.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/dom/AbstractDocument.java",
                "status": "modified",
                "changes": 10,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/AbstractDocument.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -570,10 +570,8 @@ public void addIdEntry(Element e, String id) {\n \n         if (elementsById == null) {\n             Map tmp = new HashMap();\n-            synchronized (tmp) {\n-                elementsById = tmp;\n-                elementsById.put(id, new IdSoftRef(e, id));\n-            }\n+            tmp.put(id, new IdSoftRef(e, id));\n+            elementsById = tmp;\n             return;\n         }\n \n@@ -1301,7 +1299,7 @@ protected boolean normalizeDocument(Element e,\n                 }\n                 String s = sb.toString();\n                 if (s.length() == 0) {\n-                    Node next = n.getNextSibling();\n+                    Node next = n.getNextSibling();       // todo: Jlint says: n can be NULL\n                     e.removeChild(n);\n                     n = next;\n                     continue;\n@@ -1359,7 +1357,7 @@ protected boolean normalizeDocument(Element e,\n         HashMap names = new HashMap();                    // todo names is not used ?\n         for (int i = 0; i < nnm.getLength(); i++) {\n             Attr a = (Attr) nnm.item(i);\n-            String prefix = a.getPrefix();\n+            String prefix = a.getPrefix();                // todo : this breaks when a is null\n             if (a != null && XMLConstants.XMLNS_PREFIX.equals(prefix)\n                     || a.getNodeName().equals(XMLConstants.XMLNS_PREFIX)) {\n                 if (!namespaceDeclarations) {",
                "deletions": 6
            },
            {
                "sha": "e1946ab1bc7ad1ca0b94868f71ee8f70a8571a2c",
                "filename": "sources/org/apache/batik/dom/AbstractNode.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/dom/AbstractNode.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/dom/AbstractNode.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/AbstractNode.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -357,8 +357,12 @@ public void setPrefix(String prefix) throws DOMException {\n \n         String name = getLocalName();\n         if (prefix == null) {\n+            // prefix null is explicitly allowed by org.w3c.dom.Node#setPrefix(String)\n             setNodeName(name);\n+            return;\n         }\n+\n+        // prefix is guaranteed to be non-null here...\n         if (!prefix.equals(\"\") && !DOMUtilities.isValidName(prefix)) {\n             throw createDOMException(DOMException.INVALID_CHARACTER_ERR,\n                                      \"prefix\",\n@@ -939,7 +943,7 @@ public void addEventListener(String type,\n     /**\n      * <b>DOM</b>: Implements\n      * {@link\n-     * EventTarget#addEventListenerNS(String,String,EventListener,boolean,Object)}.\n+     * NodeEventTarget#addEventListenerNS(String,String,EventListener,boolean,Object)}.\n      */\n     public void addEventListenerNS(String namespaceURI,\n                                    String type,\n@@ -975,7 +979,7 @@ public void removeEventListener(String type,\n     /**\n      * <b>DOM</b>: Implements\n      * {@link\n-     * EventTarget#removeEventListenerNS(String,String,EventListener,boolean)}.\n+     * NodeEventTarget#removeEventListenerNS(String,String,EventListener,boolean)}.\n      */\n     public void removeEventListenerNS(String namespaceURI,\n                                       String type,",
                "deletions": 2
            },
            {
                "sha": "e9ec3694ed824d6c96da476640954d2f58c7f6b5",
                "filename": "sources/org/apache/batik/gvt/text/GlyphLayout.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/gvt/text/GlyphLayout.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/gvt/text/GlyphLayout.java",
                "status": "modified",
                "changes": 10,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/text/GlyphLayout.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -1383,7 +1383,7 @@ protected void doExplicitGlyphLayout() {\n                     if (transparentStart != -1) {\n                         Point2D         loc   = gv.getGlyphPosition(i);\n                         GVTGlyphMetrics gm    = gv.getGlyphMetrics(i);\n-                        int tyS=0, txS=0;\n+                        int tyS=0, txS=0;      // these never changed ??     todo\n                         float advX=0, advY=0;\n                         if (vertical) {\n                             if (glyphOrientationAuto ||\n@@ -1437,8 +1437,8 @@ else if (glyphOrientationAngle == 180)\n \n                             locT = new Point2D.Double(locX, locY);\n                             gv.setGlyphPosition(j, locT);\n-                            if ((txS != 0) || (tyS != 0)) {\n-                                AffineTransform at;\n+                            if ((txS != 0) || (tyS != 0)) {        // because txS, tyS are set to 0 and not\n+                                AffineTransform at;                // changed, this path is never used  todo\n                                 at = AffineTransform.getTranslateInstance\n                                     (tx,ty);\n                                 at.concatenate(gv.getGlyphTransform(i));\n@@ -2007,8 +2007,8 @@ protected int getGlyphOrientationAngle() {\n         }\n \n         // if not one of 0, 90, 180 or 270, round to nearest value\n-        if ((glyphOrientationAngle !=   0) || (glyphOrientationAngle !=  90) ||\n-            (glyphOrientationAngle != 180) || (glyphOrientationAngle != 270)) {\n+        if ((glyphOrientationAngle !=   0) || (glyphOrientationAngle !=  90) ||       // todo - this logic expression\n+            (glyphOrientationAngle != 180) || (glyphOrientationAngle != 270)) {       // is true for all values.....\n \n             while (glyphOrientationAngle < 0) {\n                 glyphOrientationAngle += 360;",
                "deletions": 5
            },
            {
                "sha": "c2594d297da3bbb02e18004abf6e5bbf8fa1f35a",
                "filename": "sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java",
                "status": "modified",
                "changes": 8,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -187,7 +187,7 @@ protected void transcode(Document document,\n             width = ((Float)hints.get(KEY_WIDTH)).floatValue();\n         if (hints.containsKey(KEY_HEIGHT))\n             height = ((Float)hints.get(KEY_HEIGHT)).floatValue();\n-        \n+\n \n         SVGOMDocument svgDoc = (SVGOMDocument)document;\n         SVGSVGElement root = svgDoc.getRootElement();\n@@ -832,7 +832,7 @@ public void displayError(String message) {\n                 SVGAbstractTranscoder.this.handler.error\n                     (new TranscoderException(message));\n             } catch (TranscoderException ex) {\n-                throw new RuntimeException();\n+                throw new RuntimeException( ex.getMessage() );\n             }\n         }\n \n@@ -845,7 +845,7 @@ public void displayError(Exception e) {\n                 SVGAbstractTranscoder.this.handler.error\n                     (new TranscoderException(e));\n             } catch (TranscoderException ex) {\n-                throw new RuntimeException();\n+                throw new RuntimeException( ex.getMessage() );\n             }\n         }\n \n@@ -857,7 +857,7 @@ public void displayMessage(String message) {\n                 SVGAbstractTranscoder.this.handler.warning\n                     (new TranscoderException(message));\n             } catch (TranscoderException ex) {\n-                throw new RuntimeException();\n+                throw new RuntimeException( ex.getMessage() );\n             }\n         }\n ",
                "deletions": 4
            },
            {
                "sha": "f44592401ea5568a740664e00d85a57e496765d9",
                "filename": "sources/org/apache/batik/transcoder/TranscodingHints.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/transcoder/TranscodingHints.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/transcoder/TranscodingHints.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/transcoder/TranscodingHints.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -144,7 +144,7 @@ public void putAll(Map m) {\n     public abstract static class Key {\n \n         /**\n-         * Construcst a key.\n+         * Constructs a key.\n          */\n         protected Key() { }\n ",
                "deletions": 1
            },
            {
                "sha": "9d31237cc20b07a0bc8f8cda70e968e6d15083fc",
                "filename": "sources/org/apache/batik/util/ClassFileUtilities.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/util/ClassFileUtilities.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/util/ClassFileUtilities.java",
                "status": "modified",
                "changes": 5,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/util/ClassFileUtilities.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -122,7 +122,8 @@ public static Set getClassDependencies(InputStream is) throws IOException {\n         Set desc = new HashSet();\n \n         for (int i = 1; i < len; i++) {\n-            switch (dis.readByte() & 0xff) {\n+            int constCode = dis.readByte() & 0xff;\n+            switch ( constCode ) {\n             case CONSTANT_LONG_INFO:\n             case CONSTANT_DOUBLE_INFO:\n                 dis.readLong();\n@@ -155,7 +156,7 @@ public static Set getClassDependencies(InputStream is) throws IOException {\n                 break;\n \n             default:\n-                throw new RuntimeException();\n+                throw new RuntimeException(\"unexpected data in constant-pool:\" + constCode );\n             }\n         }\n ",
                "deletions": 2
            },
            {
                "sha": "21123fd82f9ac404e87e94c49bbb52270934aaf9",
                "filename": "sources/org/apache/batik/util/SoftReferenceCache.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/util/SoftReferenceCache.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/util/SoftReferenceCache.java",
                "status": "modified",
                "changes": 10,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/util/SoftReferenceCache.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -48,9 +48,10 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n public class SoftReferenceCache {\n \n     /**\n-     * The map of cached objects.\n+     * The map of cached objects. Must not change after creation,\n+     * so it's final.\n      */\n-    protected Map map = new HashMap();\n+    protected final Map map = new HashMap();\n \n     /**\n      * Let people create their own caches.\n@@ -118,7 +119,8 @@ protected final synchronized boolean isDoneImpl(Object key) {\n     /**\n      * If this returns null then you are now 'on the hook'.\n      * to put the Object associated with key into the\n-     * cache.  */\n+     * cache.\n+     */\n     protected final synchronized Object requestImpl(Object key) {\n         if (map.containsKey(key)) {\n \n@@ -154,7 +156,7 @@ protected final synchronized Object requestImpl(Object key) {\n     /**\n      * Clear the entry for key.\n      * This is the easiest way to 'get off the hook'.\n-     * if you didn't indend to get on it.\n+     * if you didn't intend to get on it.\n      */\n     protected final synchronized void clearImpl(Object key) {\n         map.remove(key);",
                "deletions": 4
            },
            {
                "sha": "a80ee39683edd228647e59940fd81ab3db671b99",
                "filename": "sources/org/apache/batik/xml/XMLUtilities.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/xml/XMLUtilities.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84/sources/org/apache/batik/xml/XMLUtilities.java",
                "status": "modified",
                "changes": 16,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/xml/XMLUtilities.java?ref=eac7e5b1e6e54e49d57c1ffc2bb8e794460aef84",
                "patch": "@@ -85,10 +85,14 @@ public static boolean isXML11NameCharacter(char c) {\n \n     /**\n      * Tests whether the given 32 bits character is valid in XML documents.\n+     * Because the majority of code-points is covered by the table-lookup-test,\n+     * we do it first.\n+     * This method gives meaningful results only for c >= 0 .\n      */\n     public static boolean isXMLCharacter(int c) {\n-        return (c >= 0x10000 && c <= 0x10ffff) ||\n-            (XML_CHARACTER[c / 32] & (1 << (c % 32))) != 0;\n+\n+        return ( ( ( XML_CHARACTER[c >>> 5 ] & (1 << (c & 0x1F ))) != 0 )\n+                || (c >= 0x10000 && c <= 0x10ffff) );\n     }\n \n     /**\n@@ -233,7 +237,7 @@ protected static String getXMLDeclarationEncoding(Reader r, String e)\n         }\n \n         while (isXMLSpace((char)(c = r.read())));\n-            \n+\n         if (c != 'v') {\n             return e;\n         }\n@@ -255,7 +259,7 @@ protected static String getXMLDeclarationEncoding(Reader r, String e)\n         if ((c = r.read()) != 'n') {\n             return e;\n         }\n-             \n+\n         c = r.read();\n         while (isXMLSpace((char)c)) {\n             c = r.read();\n@@ -266,7 +270,7 @@ protected static String getXMLDeclarationEncoding(Reader r, String e)\n         }\n \n         while (isXMLSpace((char)(c = r.read())));\n-            \n+\n         if (c != '\"' && c != '\\'') {\n             return e;\n         }\n@@ -322,7 +326,7 @@ protected static String getXMLDeclarationEncoding(Reader r, String e)\n         }\n \n         while (isXMLSpace((char)(c = r.read())));\n-            \n+\n         if (c != '\"' && c != '\\'') {\n             return e;\n         }",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Fix NPE when the final animation for a given attribute/property is removed.\n2. Ensure that when an exception is occurring once per animation tick, these\n   are not endlessly reported to the user.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@522170 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/9d9b6fc76857093bee34b8589162821e462fed6e",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/f5a93fda21941bb949d1b8bdd930d2b36cd85bdf",
        "bug_id": "xmlgraphics-batik_36",
        "file": [
            {
                "sha": "864eef9bebc2682a36080bf385004be658f87691",
                "filename": "sources/org/apache/batik/anim/AnimationEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/9d9b6fc76857093bee34b8589162821e462fed6e/sources/org/apache/batik/anim/AnimationEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/9d9b6fc76857093bee34b8589162821e462fed6e/sources/org/apache/batik/anim/AnimationEngine.java",
                "status": "modified",
                "changes": 8,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/anim/AnimationEngine.java?ref=9d9b6fc76857093bee34b8589162821e462fed6e",
                "patch": "@@ -314,7 +314,9 @@ protected float tick(float time, boolean hyperlinking) {\n                 String namespaceURI = (String) e2.getKey1();\n                 String localName = (String) e2.getKey2();\n                 Sandwich sandwich = (Sandwich) e2.getValue();\n-                if (sandwich.shouldUpdate || sandwich.animation.isDirty) {\n+                if (sandwich.shouldUpdate ||\n+                        sandwich.animation != null\n+                            && sandwich.animation.isDirty) {\n                     AnimatableValue av = null;\n                     boolean usesUnderlying = false;\n                     AbstractAnimation anim = sandwich.animation;\n@@ -344,7 +346,9 @@ protected float tick(float time, boolean hyperlinking) {\n                 Map.Entry e2 = (Map.Entry) j.next();\n                 String propertyName = (String) e2.getKey();\n                 Sandwich sandwich = (Sandwich) e2.getValue();\n-                if (sandwich.shouldUpdate || sandwich.animation.isDirty) {\n+                if (sandwich.shouldUpdate ||\n+                        sandwich.animation != null\n+                            && sandwich.animation.isDirty) {\n                     AnimatableValue av = null;\n                     boolean usesUnderlying = false;\n                     AbstractAnimation anim = sandwich.animation;",
                "deletions": 2
            },
            {
                "sha": "3f3ad378ab57fc7aef59a24858fc6af9935da5c3",
                "filename": "sources/org/apache/batik/bridge/SVGAnimationEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/9d9b6fc76857093bee34b8589162821e462fed6e/sources/org/apache/batik/bridge/SVGAnimationEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/9d9b6fc76857093bee34b8589162821e462fed6e/sources/org/apache/batik/bridge/SVGAnimationEngine.java",
                "status": "modified",
                "changes": 30,
                "additions": 23,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGAnimationEngine.java?ref=9d9b6fc76857093bee34b8589162821e462fed6e",
                "patch": "@@ -449,7 +449,7 @@ public void start(long documentStartTime) {\n                 throw new BridgeException(ctx, ex.getElement().getElement(),\n                                           ex.getMessage());\n             }\n-        } catch (BridgeException ex) {\n+        } catch (Exception ex) {\n             if (ctx.getUserAgent() == null) {\n                 ex.printStackTrace();\n             } else {\n@@ -715,7 +715,7 @@ public void run() {\n                             (eng.ctx, ex.getElement().getElement(),\n                              ex.getMessage());\n                     }\n-                } catch (BridgeException ex) {\n+                } catch (Exception ex) {\n                     if (eng.ctx.getUserAgent() == null) {\n                         ex.printStackTrace();\n                     } else {\n@@ -788,6 +788,19 @@ public void run() {\n          */\n         protected WeakReference engRef;\n \n+        /**\n+         * The maximum number of consecutive exceptions to allow before\n+         * stopping the report of them.\n+         */\n+        protected static final int MAX_EXCEPTION_COUNT = 10;\n+\n+        /**\n+         * The number of consecutive exceptions that have been thrown.  This is\n+         * used to detect when exceptions are occurring every tick, and to stop\n+         * reporting them when this happens.\n+         */\n+        protected int exceptionCount;\n+\n         /**\n          * Creates a new AnimationTickRunnable.\n          */\n@@ -881,11 +894,14 @@ public void run() {\n                             (eng.ctx, ex.getElement().getElement(),\n                              ex.getMessage());\n                     }\n-                } catch (BridgeException ex) {\n-                    if (eng.ctx.getUserAgent() == null) {\n-                        ex.printStackTrace();\n-                    } else {\n-                        eng.ctx.getUserAgent().displayError(ex);\n+                    exceptionCount = 0;\n+                } catch (Exception ex) {\n+                    if (++exceptionCount < MAX_EXCEPTION_COUNT) {\n+                        if (eng.ctx.getUserAgent() == null) {\n+                            ex.printStackTrace();\n+                        } else {\n+                            eng.ctx.getUserAgent().displayError(ex);\n+                        }\n                     }\n                 }\n ",
                "deletions": 7
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Avoid NPE that occurs sometimes when performing a to-animation on CSS\n   properties.\n2. Reinstate missing Main-Class manifest header in batik-all.jar.\n3. Javadoc/documentation typos.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@490655 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/ed04da03288958024cd78105b886b9a0afba7af1",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/db589548b7feb876196e8459e2aa7a81a6eb3903",
        "bug_id": "xmlgraphics-batik_37",
        "file": [
            {
                "sha": "d43fc5f382788e86e1b6339652a2a596b33f4985",
                "filename": "build.xml",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/build.xml",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/build.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/build.xml?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -666,6 +666,7 @@ To display the available targets type:\n         <attribute name=\"Implementation-Version\" value=\"${version}${revisionType}${revisionNumber}${svn-revision-suffix}\"/>\n         <attribute name=\"Implementation-Vendor\" value=\"The Apache Software Foundation (http://xmlgraphics.apache.org/batik/)\"/>\n         <attribute name=\"Build-Id\" value=\"${build.id}\"/>\n+        <attribute name=\"Main-Class\" value=\"${class-prefix}.apps.svgbrowser.Main\"/>\n       </manifest>\n       <metainf dir=\"${basedir}\" includes=\"LICENSE,NOTICE\"/>\n       <fileset dir=\"${dest}\" excludes=\"**/.svn/\">",
                "deletions": 0
            },
            {
                "sha": "3111c16f8473998e731fc0ea4363c21bf8d41bbe",
                "filename": "documentation-sources/content/xdocs/using/extending.xml",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/documentation-sources/content/xdocs/using/extending.xml",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/documentation-sources/content/xdocs/using/extending.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/documentation-sources/content/xdocs/using/extending.xml?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -254,7 +254,7 @@\n             <p>\n               This handles the SVG <code>filter</code> element.  If you\n               wanted to implement a new element that could be\n-              referenced from the <code>filter</code>attribute on an SVG\n+              referenced from the <code>filter</code> attribute on an SVG\n               graphics node then you would need to subclass this\n               bridge. However, adding new types of filters to the\n               existing SVG <code>filter</code> element is accomplished via the",
                "deletions": 1
            },
            {
                "sha": "44426eb9d41f70c56476f44e6274f5297cfcda50",
                "filename": "sources/org/apache/batik/bridge/AnimatableSVGBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/bridge/AnimatableSVGBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/bridge/AnimatableSVGBridge.java",
                "status": "modified",
                "changes": 11,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/AnimatableSVGBridge.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -86,10 +86,13 @@ public void removeTargetListener(String pn, AnimationTargetListener l) {\n     protected void fireBaseAttributeListeners(String pn) {\n         if (targetListeners != null) {\n             LinkedList ll = (LinkedList) targetListeners.get(pn);\n-            Iterator it = ll.iterator();\n-            while (it.hasNext()) {\n-                AnimationTargetListener l = (AnimationTargetListener) it.next();\n-                l.baseValueChanged((AnimationTarget) e, null, pn, true);\n+            if (ll != null) {\n+                Iterator it = ll.iterator();\n+                while (it.hasNext()) {\n+                    AnimationTargetListener l =\n+                        (AnimationTargetListener) it.next();\n+                    l.baseValueChanged((AnimationTarget) e, null, pn, true);\n+                }\n             }\n         }\n     }",
                "deletions": 4
            },
            {
                "sha": "bdce9b4cde959ceb25c6e3b13ccac5c43eb72357",
                "filename": "sources/org/apache/batik/dom/svg/AbstractSVGAnimatedLength.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/AbstractSVGAnimatedLength.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/AbstractSVGAnimatedLength.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/AbstractSVGAnimatedLength.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -127,7 +127,7 @@ public SVGLength getAnimVal() {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "f5342c0d3e50383df0aec9327a6688b666ada2dc",
                "filename": "sources/org/apache/batik/dom/svg/AbstractSVGAnimatedValue.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/AbstractSVGAnimatedValue.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/AbstractSVGAnimatedValue.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/AbstractSVGAnimatedValue.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -91,7 +91,7 @@ public boolean isSpecified() {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected abstract void updateAnimatedValue(AnimatableValue val);\n ",
                "deletions": 1
            },
            {
                "sha": "d56857cb3e6b4c198699c07c2fadc259e1a23056",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedBoolean.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedBoolean.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedBoolean.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedBoolean.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -137,7 +137,7 @@ public void setAnimatedValue(boolean animVal) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "99ef45755f5084f277009931303eba6fa98daeee",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedEnumeration.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedEnumeration.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedEnumeration.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedEnumeration.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -181,7 +181,7 @@ public void attrAdded(Attr node, String newv) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "c5fd101f4dab5c95f5cf2d74f9aecb369348fd09",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedInteger.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedInteger.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedInteger.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedInteger.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -135,7 +135,7 @@ public AnimatableValue getUnderlyingValue(AnimationTarget target) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "5e9bd36b6882fb6d6cebf4a45e1f37f3862fef6d",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedLengthList.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedLengthList.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedLengthList.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedLengthList.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -137,7 +137,7 @@ public AnimatableValue getUnderlyingValue(AnimationTarget target) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "e5b4eef8a72ffacc584518abd3e9847708b52463",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedMarkerOrientValue.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedMarkerOrientValue.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedMarkerOrientValue.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedMarkerOrientValue.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -93,7 +93,7 @@ public SVGOMAnimatedMarkerOrientValue(AbstractElement elt,\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n    protected void updateAnimatedValue(AnimatableValue val) {\n         // XXX TODO",
                "deletions": 1
            },
            {
                "sha": "167d9ba1f00dbe224f612973533cd9921a210990",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedNumber.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedNumber.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedNumber.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedNumber.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -163,7 +163,7 @@ public AnimatableValue getUnderlyingValue(AnimationTarget target) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "80221960d5a4c03c5dabe0d1d02c3f453e025974",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedNumberList.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedNumberList.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedNumberList.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedNumberList.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -122,7 +122,7 @@ public AnimatableValue getUnderlyingValue(AnimationTarget target) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "9f2cceaee4e7992f6919813cb52551006b943afe",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedPathData.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedPathData.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedPathData.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedPathData.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -167,7 +167,7 @@ public AnimatableValue getUnderlyingValue(AnimationTarget target) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "e8232b9752543df3c4c61ea1e63cc96f03e1c43d",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedPoints.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedPoints.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedPoints.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedPoints.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -115,7 +115,7 @@ public AnimatableValue getUnderlyingValue(AnimationTarget target) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "20b8118423fa5fcd2b631819c98ca5a1cdc9292e",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedPreserveAspectRatio.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedPreserveAspectRatio.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedPreserveAspectRatio.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedPreserveAspectRatio.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -92,7 +92,7 @@ public AnimatableValue getUnderlyingValue(AnimationTarget target) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "24970e39f28f70ef9e94f16937a2674c31b6c860",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedRect.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedRect.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedRect.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedRect.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -86,7 +86,7 @@ public SVGRect getAnimVal() {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "ba445d14788045d138fe7d6d4b53a52f645be02b",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedString.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedString.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedString.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedString.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -84,7 +84,7 @@ public AnimatableValue getUnderlyingValue(AnimationTarget target) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            },
            {
                "sha": "466431fadd908a71a5d8d764809435db22153229",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMAnimatedTransformList.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedTransformList.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed04da03288958024cd78105b886b9a0afba7af1/sources/org/apache/batik/dom/svg/SVGOMAnimatedTransformList.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMAnimatedTransformList.java?ref=ed04da03288958024cd78105b886b9a0afba7af1",
                "patch": "@@ -114,7 +114,7 @@ public AnimatableValue getUnderlyingValue(AnimationTarget target) {\n     }\n \n     /**\n-     * Updates the animated value with the gien {@link AnimatableValue}.\n+     * Updates the animated value with the given {@link AnimatableValue}.\n      */\n     protected void updateAnimatedValue(AnimatableValue val) {\n         if (val == null) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Fixed some typos in the manifest files.\n2. Fixed bug resulting in a NPE when animating additive transform list values\n   that rely on the underlying value.\n3. Typos.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@476799 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/0c9b5e9c309e3ea0a22a9553055591d12a462409",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/aae9c22c4c3c5c09b371704abeef344ceb86bc74",
        "bug_id": "xmlgraphics-batik_38",
        "file": [
            {
                "sha": "a3584fd1db443e3c1f9e84078327aafecd8e0bcb",
                "filename": "MAINTAIN",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/MAINTAIN",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/MAINTAIN",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/MAINTAIN?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -96,7 +96,7 @@ For creating a distribution the following steps must be done:\n     files), the README, and the KEYS file under \n         /www/www.apache.org/dist/xml/batik/\n \n-     e.g., 'scp batik-1.1rc1.zip* vhardy@xmlgraphics.apache.org:/www/www.apache.org/dist/xml/batik/'\n+     e.g., 'scp batik-1.1rc1.zip* vhardy@people.apache.org:/www/www.apache.org/dist/xml/batik/'\n \n 11) Finish setting up the distribution directory in accordance with:\n ",
                "deletions": 1
            },
            {
                "sha": "938fc6392af5fb0ad2221a86fa8ffa93d52b90c4",
                "filename": "README",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/README",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/README",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/README?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -51,7 +51,7 @@\n   ------------------\n \n   By default, Batik includes a scripting engine for ECMAScript. It is possible\n-  to add support for additional scripting languages (Python and TCL)\n+  to add support for additional scripting languages (Python and TCL).\n   \n   See http://xmlgraphics.apache.org/batik/install.html#optionalComponents for\n   details.",
                "deletions": 1
            },
            {
                "sha": "00c3c9ae5c53b297c45ec4e22406202bba0cd4cd",
                "filename": "resources/org/apache/batik/apps/rasterizer/resources/rasterizer.bin.policy",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/resources/org/apache/batik/apps/rasterizer/resources/rasterizer.bin.policy",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/resources/org/apache/batik/apps/rasterizer/resources/rasterizer.bin.policy",
                "status": "modified",
                "changes": 5,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/resources/org/apache/batik/apps/rasterizer/resources/rasterizer.bin.policy?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -103,8 +103,3 @@ grant {\n   permission java.io.FilePermission \"lib/batik-svg-dom.jar\", \"read\";\n };\n \n-\n-\n-\n-\n-",
                "deletions": 5
            },
            {
                "sha": "4e25a89060c860cb50b8ca117468ec720af5387a",
                "filename": "resources/org/apache/batik/apps/rasterizer/resources/rasterizer.policy",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/resources/org/apache/batik/apps/rasterizer/resources/rasterizer.policy",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/resources/org/apache/batik/apps/rasterizer/resources/rasterizer.policy",
                "status": "modified",
                "changes": 19,
                "additions": 19,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/resources/org/apache/batik/apps/rasterizer/resources/rasterizer.policy?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -1,3 +1,22 @@\n+// -----------------------------------------------------------------------------\n+//\n+//   Licensed to the Apache Software Foundation (ASF) under one or more\n+//   contributor license agreements.  See the NOTICE file distributed with\n+//   this work for additional information regarding copyright ownership.\n+//   The ASF licenses this file to You under the Apache License, Version 2.0\n+//   (the \"License\"); you may not use this file except in compliance with\n+//   the License.  You may obtain a copy of the License at\n+//\n+//       http://www.apache.org/licenses/LICENSE-2.0\n+//\n+//   Unless required by applicable law or agreed to in writing, software\n+//   distributed under the License is distributed on an \"AS IS\" BASIS,\n+//   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+//   See the License for the specific language governing permissions and\n+//   limitations under the License.\n+//\n+// $Id$\n+// -----------------------------------------------------------------------------\n \n grant codeBase \"${app.dev.base}/classes/\" {\n   permission java.security.AllPermission;",
                "deletions": 0
            },
            {
                "sha": "43395361b7a6bdaf26366613c96d5f27f86b62df",
                "filename": "resources/org/apache/batik/apps/svgbrowser/resources/svgbrowser.policy",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/resources/org/apache/batik/apps/svgbrowser/resources/svgbrowser.policy",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/resources/org/apache/batik/apps/svgbrowser/resources/svgbrowser.policy",
                "status": "modified",
                "changes": 7,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/resources/org/apache/batik/apps/svgbrowser/resources/svgbrowser.policy?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -44,10 +44,3 @@ grant {\n   permission java.io.FilePermission \"resources/org/apache/batik/dom/svg/resources/UserAgentStyleSheet.css\", \"read\";\n };\n \n-\n-\n-\n-\n-\n-\n-",
                "deletions": 7
            },
            {
                "sha": "4a66859998a9dc0c68a9b6c7fa44a0836cbc78e6",
                "filename": "sources/batik-browser.mf",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/batik-browser.mf",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/batik-browser.mf",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/batik-browser.mf?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -17,6 +17,6 @@ Class-Path: lib/batik-ext.jar \\\n             lib/batik-util.jar \\\n             lib/batik-xml.jar \\\n             lib/xerces_2_5_0.jar \\\n-            lib/xalan-2_6_0.jar \\\n+            lib/xalan-2.6.0.jar \\\n             lib/xml-apis-dom3.jar \\\n             lib/js.jar",
                "deletions": 1
            },
            {
                "sha": "6636535d6def91ecf01fd47a502801903d2c7619",
                "filename": "sources/batik-rasterizer.mf",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/batik-rasterizer.mf",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/batik-rasterizer.mf",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/batik-rasterizer.mf?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -15,7 +15,7 @@ Class-Path: lib/batik-ext.jar \\\n             lib/batik-util.jar \\\n             lib/batik-xml.jar \\\n             lib/xerces_2_5_0.jar \\\n-            lib/xalan-2_6_0.jar \\\n+            lib/xalan-2.6.0.jar \\\n             lib/xml-apis-dom3.jar \\\n             lib/pdf-transcoder.jar \\\n             lib/js.jar",
                "deletions": 1
            },
            {
                "sha": "49d89394ba54e3b2f26d1eb4959e63e85dde31c2",
                "filename": "sources/batik-slideshow.mf",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/batik-slideshow.mf",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/batik-slideshow.mf",
                "status": "modified",
                "changes": 5,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/batik-slideshow.mf?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -1,4 +1,5 @@\n Manifest-Version: 1.0\n+Main-Class: org.apache.batik.apps.slideshow.Main\n Class-Path: lib/batik-ext.jar \\\n             lib/batik-dom.jar \\\n             lib/batik-css.jar \\\n@@ -16,8 +17,6 @@ Class-Path: lib/batik-ext.jar \\\n             lib/batik-util.jar \\\n             lib/batik-xml.jar \\\n             lib/xerces_2_5_0.jar \\\n-            lib/xalan-2_6_0.jar \\\n+            lib/xalan-2.6.0.jar \\\n             lib/xml-apis-dom3.jar \\\n             lib/js.jar\n-            \n-Main-Class: org.apache.batik.apps.slideshow.Main",
                "deletions": 3
            },
            {
                "sha": "ac4ae68ab853204fb0b6d66e410d11c281de45be",
                "filename": "sources/org/apache/batik/anim/values/AnimatableTransformListValue.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/org/apache/batik/anim/values/AnimatableTransformListValue.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/org/apache/batik/anim/values/AnimatableTransformListValue.java",
                "status": "modified",
                "changes": 48,
                "additions": 46,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/anim/values/AnimatableTransformListValue.java?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -66,6 +66,7 @@ public AnimatableTransformListValue(AnimationTarget target,\n         super(target);\n         int size = transforms.size();\n         this.transforms = new Vector(size);\n+        this.transforms.setSize(size);\n         for (int i = 0; i < size; i++) {\n             this.transforms.setElementAt(transforms.elementAt(i), i);\n         }\n@@ -262,9 +263,52 @@ public AnimatableValue getZeroValue() {\n \n     /**\n      * Returns the CSS text representation of the value.\n-     * XXX To be done; not so important, just for debugging.\n      */\n     public String toStringRep() {\n-        return null;\n+        StringBuffer sb = new StringBuffer();\n+        Iterator i = transforms.iterator();\n+        while (i.hasNext()) {\n+            AbstractSVGTransform t = (AbstractSVGTransform) i.next();\n+            SVGMatrix m = t.getMatrix();\n+            switch (t.getType()) {\n+                case SVGTransform.SVG_TRANSFORM_TRANSLATE:\n+                    sb.append(\"translate(\");\n+                    sb.append(m.getC());\n+                    sb.append(',');\n+                    sb.append(m.getF());\n+                    sb.append(')');\n+                    break;\n+                case SVGTransform.SVG_TRANSFORM_SCALE:\n+                    sb.append(\"scale(\");\n+                    sb.append(m.getA());\n+                    sb.append(',');\n+                    sb.append(m.getE());\n+                    sb.append(')');\n+                    break;\n+                case SVGTransform.SVG_TRANSFORM_SKEWX:\n+                    sb.append(\"skewX(\");\n+                    sb.append(m.getB());\n+                    sb.append(')');\n+                    break;\n+                case SVGTransform.SVG_TRANSFORM_SKEWY:\n+                    sb.append(\"skewY(\");\n+                    sb.append(m.getD());\n+                    sb.append(')');\n+                    break;\n+                case SVGTransform.SVG_TRANSFORM_ROTATE:\n+                    sb.append(\"rotate(\");\n+                    sb.append(t.getAngle());\n+                    sb.append(',');\n+                    sb.append(t.getX());\n+                    sb.append(',');\n+                    sb.append(t.getY());\n+                    sb.append(')');\n+                    break;\n+            }\n+            if (i.hasNext()) {\n+                sb.append(' ');\n+            }\n+        }\n+        return sb.toString();\n     }\n }",
                "deletions": 2
            },
            {
                "sha": "1680a58b3b2e9db4b576d2ef60d46fc7612e668c",
                "filename": "sources/org/apache/batik/dom/AbstractAttrNS.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/org/apache/batik/dom/AbstractAttrNS.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/org/apache/batik/dom/AbstractAttrNS.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/AbstractAttrNS.java?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -30,8 +30,8 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n  * @author <a href=\"mailto:stephane@hillion.org\">Stephane Hillion</a>\n  * @version $Id$\n  */\n-\n public abstract class AbstractAttrNS extends AbstractAttr {\n+\n     /**\n      * The namespace URI\n      */",
                "deletions": 1
            },
            {
                "sha": "5100ea9639c31ccc188b0bc0299268976c536c50",
                "filename": "sources/org/apache/batik/dom/anim/AnimatableElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/org/apache/batik/dom/anim/AnimatableElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0c9b5e9c309e3ea0a22a9553055591d12a462409/sources/org/apache/batik/dom/anim/AnimatableElement.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/anim/AnimatableElement.java?ref=0c9b5e9c309e3ea0a22a9553055591d12a462409",
                "patch": "@@ -22,7 +22,8 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n \n /**\n  * An interface for animatable elements to expose their underlying values\n- * to the compositing functions in {@link AbstractAnimation}.\n+ * to the compositing functions in\n+ * {@link org.apache.batik.anim.AbstractAnimation}.\n  * \n  * @author <a href=\"mailto:cam%40mcc%2eid%2eau\">Cameron McCormack</a>\n  * @version $Id$",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Make CSS engine not throw an NPE for extension elements that don't expose\n   an OverrideStyleProvider.\n2. Rename samples/tests/spec/scripting/domSVGcolor.svg to domSVGColor.svg so\n   that it is run properly from regard.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@425390 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/ed3d659501c48cc7028b90e369bccee91a086355",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/8f265d3ce4c41f42de634278703b316efaa6087b",
        "bug_id": "xmlgraphics-batik_39",
        "file": [
            {
                "sha": "12fbf4baeb328537d6b7859c8b2fce289447735b",
                "filename": "samples/tests/spec/scripting/domSVGColor.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed3d659501c48cc7028b90e369bccee91a086355/samples/tests/spec/scripting/domSVGColor.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed3d659501c48cc7028b90e369bccee91a086355/samples/tests/spec/scripting/domSVGColor.svg",
                "status": "renamed",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/samples/tests/spec/scripting/domSVGColor.svg?ref=ed3d659501c48cc7028b90e369bccee91a086355",
                "deletions": 0,
                "previous_filename": "samples/tests/spec/scripting/domSVGcolor.svg"
            },
            {
                "sha": "c4324098c57992b67c7e6ea96f15648aa6e52c41",
                "filename": "sources/org/apache/batik/Version.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed3d659501c48cc7028b90e369bccee91a086355/sources/org/apache/batik/Version.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed3d659501c48cc7028b90e369bccee91a086355/sources/org/apache/batik/Version.java",
                "status": "modified",
                "changes": 8,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/Version.java?ref=ed3d659501c48cc7028b90e369bccee91a086355",
                "patch": "@@ -39,20 +39,20 @@\n      *   <tr>\n      *     <th>Source</th>\n      *     <th>Version string</th>\n-     *   <tr>\n      *   </tr>\n+     *   <tr>\n      *     <td>Release version</td>\n      *     <td><em>version</em></td>\n-     *   <tr>\n      *   </tr>\n+     *   <tr>\n      *     <td>Trunk</td>\n      *     <td>SVN+<em>yyyymmdd</em></td>\n-     *   <tr>\n      *   </tr>\n+     *   <tr>\n      *     <td>Branch</td>\n      *     <td><em>branch-name</em> branch; SVN+<em>yyyymmdd</em></td>\n      *   </tr>\n-     *   </tr>\n+     *   <tr>\n      *     <td>Unknown</td>\n      *     <td>development version</td>\n      *   </tr>",
                "deletions": 4
            },
            {
                "sha": "715ce1dbd7e73cde991817726e4dd7756be96398",
                "filename": "sources/org/apache/batik/apps/svgbrowser/AboutDialog.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed3d659501c48cc7028b90e369bccee91a086355/sources/org/apache/batik/apps/svgbrowser/AboutDialog.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed3d659501c48cc7028b90e369bccee91a086355/sources/org/apache/batik/apps/svgbrowser/AboutDialog.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/apps/svgbrowser/AboutDialog.java?ref=ed3d659501c48cc7028b90e369bccee91a086355",
                "patch": "@@ -144,9 +144,9 @@ protected void buildGUI(){\n         //\n         // Add exact revision information\n         //\n-        String tagName = Version.getVersion();\n+        String version = \"Batik \" + Version.getVersion();\n \n-        panel.add(BorderLayout.SOUTH, new JLabel(tagName, SwingConstants.RIGHT));\n+        panel.add(BorderLayout.SOUTH, new JLabel(version, SwingConstants.RIGHT));\n \n         setBackground(Color.white);\n         getContentPane().setBackground(Color.white);",
                "deletions": 2
            },
            {
                "sha": "f5b22a847121ff13e776d5a332c3458b678b08a3",
                "filename": "sources/org/apache/batik/css/engine/CSSEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/ed3d659501c48cc7028b90e369bccee91a086355/sources/org/apache/batik/css/engine/CSSEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/ed3d659501c48cc7028b90e369bccee91a086355/sources/org/apache/batik/css/engine/CSSEngine.java",
                "status": "modified",
                "changes": 31,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/css/engine/CSSEngine.java?ref=ed3d659501c48cc7028b90e369bccee91a086355",
                "patch": "@@ -818,18 +818,13 @@ public void property(String pname, LexicalUnit lu,\n                         parser.parseStyleDeclaration(style);\n                         styleDeclarationDocumentHandler.styleMap = null;\n                     } catch (Exception e) {\n-                      System.err.println(\"\\n***** CSSEngine: exception style.syntax.error:\" + e );  // ---\n-                      System.err.println(\"\\nException:\" + e.getClass().getName() );\n-                      e.printStackTrace( System.err );                           // ---\n-                      System.err.println(\"\\n***** CSSEngine: exception....\" );   // ---\n-\n                         String m = e.getMessage();\n                         if (m == null) m = \"\";\n                         String u = ((documentURI == null)?\"<unknown>\":\n                                     documentURI.toString());\n                         String s = Messages.formatMessage\n                             (\"style.syntax.error.at\",\n-                             new Object[] { u, styleLocalName, style, m});\n+                             new Object[] { u, styleLocalName, style, m });\n                         DOMException de = new DOMException(DOMException.SYNTAX_ERR, s);\n                         if (userAgent == null) throw de;\n                         userAgent.displayError(de);\n@@ -840,17 +835,19 @@ public void property(String pname, LexicalUnit lu,\n             // Apply the override rules to the result.\n             StyleDeclarationProvider p =\n                 elt.getOverrideStyleDeclarationProvider();\n-            StyleDeclaration over = p.getStyleDeclaration();\n-            if (over != null) {\n-                int ol = over.size();\n-                for (int i = 0; i < ol; i++) {\n-                    int idx = over.getIndex(i);\n-                    Value value = over.getValue(i);\n-                    boolean important = over.getPriority(i);\n-                    if (!result.isImportant(idx) || important) {\n-                        result.putValue(idx, value);\n-                        result.putImportant(idx, important);\n-                        result.putOrigin(idx, StyleMap.OVERRIDE_ORIGIN);\n+            if (p != null) {\n+                StyleDeclaration over = p.getStyleDeclaration();\n+                if (over != null) {\n+                    int ol = over.size();\n+                    for (int i = 0; i < ol; i++) {\n+                        int idx = over.getIndex(i);\n+                        Value value = over.getValue(i);\n+                        boolean important = over.getPriority(i);\n+                        if (!result.isImportant(idx) || important) {\n+                            result.putValue(idx, value);\n+                            result.putImportant(idx, important);\n+                            result.putOrigin(idx, StyleMap.OVERRIDE_ORIGIN);\n+                        }\n                     }\n                 }\n             }",
                "deletions": 17
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) JSVGScrollPane now has 'scrollbarAlwaysVisible' mode.\n2) 38872 - G2D not disposed. (Thanks Eric Suen).\n3) 38930,38932 - Fallthroughs (Thanks Dieter von Holten)\n4) 38933 - NPE (actually I updated docs)\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@385233 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/86cd6d1bb7f6828e097a134a925a177c7dc69d75",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/f4775feab4874b90eadc2db77d1de12b591d8d4c",
        "bug_id": "xmlgraphics-batik_40",
        "file": [
            {
                "sha": "3fe961fdd426d921df4ae9b75d30dd98ca65e515",
                "filename": "contrib/scroll/ScrollExample.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/86cd6d1bb7f6828e097a134a925a177c7dc69d75/contrib/scroll/ScrollExample.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/86cd6d1bb7f6828e097a134a925a177c7dc69d75/contrib/scroll/ScrollExample.java",
                "status": "modified",
                "changes": 15,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/contrib/scroll/ScrollExample.java?ref=86cd6d1bb7f6828e097a134a925a177c7dc69d75",
                "patch": "@@ -79,17 +79,18 @@ private ScrollExample(URL url)\n \t\tJFrame frame = new JFrame(\"ScrollExample: \"+url.getFile());\n \t\tframe.setResizable(true);\n \t\tframe.setSize(new Dimension(500,500));\n-                frame.addWindowListener(new java.awt.event.WindowAdapter() {\n-                        public void windowClosing\n-                            (java.awt.event.WindowEvent e) {\n-                            System.exit(0);\n-                        }\n-                    });\n+        frame.addWindowListener(new java.awt.event.WindowAdapter() {\n+                public void windowClosing\n+                    (java.awt.event.WindowEvent e) {\n+                    System.exit(0);\n+                }\n+            });\n                 \n \t\t// frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n \t\t\n-                JSVGCanvas     canvas   = new JSVGCanvas();\n+        JSVGCanvas     canvas   = new JSVGCanvas();\n \t\tJSVGScrollPane scroller = new JSVGScrollPane(canvas);\n+        // scroller.setScrollbarsAlwaysVisible(true);\n \t\tcanvas.setURI(url.toString());\n \t\t\n \t\tframe.getContentPane().add(scroller);",
                "deletions": 7
            },
            {
                "sha": "f85c9f77017158c6e954ac201fc20709aec4f55e",
                "filename": "sources/org/apache/batik/ext/awt/image/GraphicsUtil.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/ext/awt/image/GraphicsUtil.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/ext/awt/image/GraphicsUtil.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/GraphicsUtil.java?ref=86cd6d1bb7f6828e097a134a925a177c7dc69d75",
                "patch": "@@ -898,24 +898,28 @@ public static WritableRaster copyRaster(Raster ras, int minX, int minY) {\n                 DataBufferByte retDBT = (DataBufferByte)retDB;\n                 System.arraycopy(srcDBT.getData(b), offsets[b],\n                                  retDBT.getData(b), offsets[b], len);\n+                break;\n             }\n             case DataBuffer.TYPE_INT: {\n                 DataBufferInt srcDBT = (DataBufferInt)srcDB;\n                 DataBufferInt retDBT = (DataBufferInt)retDB;\n                 System.arraycopy(srcDBT.getData(b), offsets[b],\n                                  retDBT.getData(b), offsets[b], len);\n+                break;\n             }\n             case DataBuffer.TYPE_SHORT: {\n                 DataBufferShort srcDBT = (DataBufferShort)srcDB;\n                 DataBufferShort retDBT = (DataBufferShort)retDB;\n                 System.arraycopy(srcDBT.getData(b), offsets[b],\n                                  retDBT.getData(b), offsets[b], len);\n+                break;\n             }\n             case DataBuffer.TYPE_USHORT: {\n                 DataBufferUShort srcDBT = (DataBufferUShort)srcDB;\n                 DataBufferUShort retDBT = (DataBufferUShort)retDB;\n                 System.arraycopy(srcDBT.getData(b), offsets[b],\n                                  retDBT.getData(b), offsets[b], len);\n+                break;\n             }\n             }\n         }",
                "deletions": 0
            },
            {
                "sha": "6bdda259ccc7649781ad7ce1b4e1af539506f367",
                "filename": "sources/org/apache/batik/ext/awt/image/codec/tiff/TIFFImageEncoder.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/ext/awt/image/codec/tiff/TIFFImageEncoder.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/ext/awt/image/codec/tiff/TIFFImageEncoder.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/codec/tiff/TIFFImageEncoder.java?ref=86cd6d1bb7f6828e097a134a925a177c7dc69d75",
                "patch": "@@ -832,6 +832,7 @@ private int encode(RenderedImage im, TIFFEncodeParam encodeParam,\n                    ColorSpace.TYPE_RGB) {\n                     jpegRGBToYCbCr = true;\n                 }\n+                break;\n             case COMP_DEFLATE:\n                 bufSize = (int)bytesPerTile;\n                 deflater = new Deflater(encodeParam.getDeflateLevel());",
                "deletions": 0
            },
            {
                "sha": "8fa7f155a0152c9703524c305d72a08133e6b59d",
                "filename": "sources/org/apache/batik/ext/awt/image/rendered/AbstractRed.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/ext/awt/image/rendered/AbstractRed.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/ext/awt/image/rendered/AbstractRed.java",
                "status": "modified",
                "changes": 14,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/rendered/AbstractRed.java?ref=86cd6d1bb7f6828e097a134a925a177c7dc69d75",
                "patch": "@@ -96,8 +96,8 @@ protected AbstractRed(Rectangle bounds, Map props) {\n      * @param props this initializes the props Map.  */\n     protected AbstractRed(CachableRed src, Map props) {\n         init(src, src.getBounds(), src.getColorModel(), src.getSampleModel(),\n-             (src==null)?0:src.getTileGridXOffset(),\n-             (src==null)?0:src.getTileGridYOffset(),\n+             src.getTileGridXOffset(),\n+             src.getTileGridYOffset(),\n              props);\n     }\n \n@@ -111,17 +111,17 @@ protected AbstractRed(CachableRed src, Map props) {\n      * @param props this initializes the props Map.  */\n     protected AbstractRed(CachableRed src, Rectangle bounds, Map props) {\n         init(src, bounds, src.getColorModel(), src.getSampleModel(),\n-             (src==null)?0:src.getTileGridXOffset(),\n-             (src==null)?0:src.getTileGridYOffset(),\n+             src.getTileGridXOffset(),\n+             src.getTileGridYOffset(),\n              props);\n     }\n \n     /**\n      * Construct an Abstract RenderedImage from a source image, bounds\n      * rect and props (may be null).\n-     * @param src will be the first (and only) member of the srcs\n-     * Vector. Src is also used to set the ColorModel, SampleModel,\n-     * and tile grid offsets.\n+     * @param src if not null, will be the first (and only) member \n+     * of the srcs Vector. Also if it is not null it provides the\n+     * tile grid offsets, otherwise they are zero.\n      * @param bounds The bounds of this image.\n      * @param cm The ColorModel to use. If null it will default to\n      * ComponentColorModel.",
                "deletions": 7
            },
            {
                "sha": "3d631549c2389a178b9d286761c4139a4adf72b3",
                "filename": "sources/org/apache/batik/gvt/AbstractGraphicsNode.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/gvt/AbstractGraphicsNode.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/gvt/AbstractGraphicsNode.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/AbstractGraphicsNode.java?ref=86cd6d1bb7f6828e097a134a925a177c7dc69d75",
                "patch": "@@ -548,8 +548,9 @@ public void paint(Graphics2D g2d){\n                 org.apache.batik.ext.awt.image.GraphicsUtil.drawImage\n                     (g2d, filteredImage);\n \n+                g2d.dispose();\n                 g2d = baseG2d;\n-                baseG2d = null;\n+                baseG2d = null;// Don't leave null we need g2d restored...\n             }\n         }\n ",
                "deletions": 1
            },
            {
                "sha": "a6f962c0c24de719a57d519a1e952b6b9eec4d23",
                "filename": "sources/org/apache/batik/swing/JSVGScrollPane.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/swing/JSVGScrollPane.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/swing/JSVGScrollPane.java",
                "status": "modified",
                "changes": 82,
                "additions": 55,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/swing/JSVGScrollPane.java?ref=86cd6d1bb7f6828e097a134a925a177c7dc69d75",
                "patch": "@@ -88,13 +88,14 @@\n     protected JScrollBar vertical;\n     protected JScrollBar horizontal;\n     protected Component cornerBox;\n+    protected boolean scrollbarsAlwaysVisible = false;\n+\n     protected SBListener hsbListener;\n     protected SBListener vsbListener;\n \t\n     protected Rectangle2D viewBox = null; // SVG Root element viewbox \n     protected boolean ignoreScrollChange = false;\n \t\n-\n     /**\n      *\tCreates a JSVGScrollPane, which will scroll an JSVGCanvas.\n      *\n@@ -106,7 +107,7 @@ public JSVGScrollPane(JSVGCanvas canvas)\n         canvas.setRecenterOnResize(false);\n \n         // create components\n-        vertical = new JScrollBar(JScrollBar.VERTICAL, 0, 0, 0, 0);\n+        vertical   = new JScrollBar(JScrollBar.VERTICAL,   0, 0, 0, 0);\n         horizontal = new JScrollBar(JScrollBar.HORIZONTAL, 0, 0, 0, 0);\n         \n         // create a spacer next to the horizontal bar\n@@ -124,9 +125,8 @@ public JSVGScrollPane(JSVGCanvas canvas)\n         vsbListener = createScrollBarListener(true);\n         vertical.getModel().addChangeListener(vsbListener);\n \t\t\n-        // by default, scrollbars are not visible\n-        horizontalPanel.setVisible(false);\n-        vertical       .setVisible(false);\n+        // by default, scrollbars are not needed\n+        updateScrollbarState(false, false);\n \t\t\n         // addMouseWheelListener(new WheelListener());\n \t\t\n@@ -148,6 +148,14 @@ public JSVGScrollPane(JSVGCanvas canvas)\n         canvas.addUpdateManagerListener  (xlistener);\n     }// JSVGScrollPane()\n \n+    public boolean getScrollbarsAlwaysVisible() {\n+        return scrollbarsAlwaysVisible;\n+    }\n+\n+    public void setScrollbarsAlwaysVisible(boolean vis) {\n+        scrollbarsAlwaysVisible = vis;\n+        resizeScrollBars();\n+    }\n \n     /**\n      * Scrollbar listener factory method so subclasses can\n@@ -206,8 +214,7 @@ public void handleEvent(Event evt) {\n     public void reset()\n     {\n         viewBox = null;\n-        horizontalPanel.setVisible(false);\n-        vertical       .setVisible(false);\n+        updateScrollbarState(false, false);\n         revalidate();\n     }// reset()\n \t\n@@ -367,9 +374,7 @@ public void componentResized(ComponentEvent evt)\n         public void gvtBuildStarted  (GVTTreeBuilderEvent e) { \n             isReady = false;\n             // Start by assuming we won't need them.\n-            vertical       .setVisible(false);\n-            horizontalPanel.setVisible(false);\n-            cornerBox      .setVisible(false);\n+            updateScrollbarState(false, false);\n         }\n         public void gvtBuildCompleted(GVTTreeBuilderEvent e)\n         {\n@@ -501,6 +506,7 @@ protected Dimension updateScrollbarVisibility(int tx, int ty,\n         // minVPW/H is the viewport W/H with scrollbars.\n         int maxVPW = vpSize.width;  int minVPW = vpSize.width;\n         int maxVPH = vpSize.height; int minVPH = vpSize.height;\n+\n         if (vertical.isVisible()) {\n             maxVPW += vertical.getPreferredSize().width;\n         } else {\n@@ -517,30 +523,52 @@ protected Dimension updateScrollbarVisibility(int tx, int ty,\n         // System.err.println(\"MAX: [\" + maxW + \",\" + maxH + \"]\");\n \n         // Fist check if we need either scrollbar (given maxVPW/H).\n-        boolean hVis = (maxW > maxVPW) || (tx != 0);\n-        boolean vVis = (maxH > maxVPH) || (ty != 0);\n-        // System.err.println(\"Vis flags: \" + hVis +\", \" + vVis);\n-        \n-        // This makes sure that if one scrollbar is visible\n-        // we 'recheck' the other scroll bar with the minVPW/H\n-        // since making one visible makes the room for displaying content\n-        // in the other dimension smaller. (This also makes the\n-        // 'corner box' visible if both scroll bars are visible).\n-        if      (vVis && !hVis) hVis = (maxW > minVPW);\n-        else if (hVis && !vVis) vVis = (maxH > minVPH);\n-\n+        boolean hNeeded, vNeeded;\n         Dimension ret = new Dimension();\n-        ret.width  = (hVis)?minVPW:maxVPW;\n-        ret.height = (vVis)?minVPH:maxVPH;\n \n-        vertical       .setVisible(vVis);\n-        horizontalPanel.setVisible(hVis);\n-        cornerBox      .setVisible(vVis && hVis);\n+        if (scrollbarsAlwaysVisible) {\n+            hNeeded = (maxW > minVPW);\n+            vNeeded = (maxH > minVPH);\n+            ret.width  = minVPW;\n+            ret.height = minVPH;\n+        } else {\n+            hNeeded = (maxW > maxVPW) || (tx != 0);\n+            vNeeded = (maxH > maxVPH) || (ty != 0);\n+            // System.err.println(\"Vis flags: \" + hNeeded +\", \" + vNeeded);\n+        \n+            // This makes sure that if one scrollbar is visible\n+            // we 'recheck' the other scroll bar with the minVPW/H\n+            // since making one visible makes the room for displaying content\n+            // in the other dimension smaller. (This also makes the\n+            // 'corner box' visible if both scroll bars are visible).\n+            if      (vNeeded && !hNeeded) hNeeded = (maxW > minVPW);\n+            else if (hNeeded && !vNeeded) vNeeded = (maxH > minVPH);\n+\n+            ret.width  = (hNeeded)?minVPW:maxVPW;\n+            ret.height = (vNeeded)?minVPH:maxVPH;\n+        }\n+\n+        updateScrollbarState(hNeeded, vNeeded);\n \n         //  Return the new size of the canvas.\n         return ret;\n     }\n \t\n+    protected void updateScrollbarState(boolean hNeeded, boolean vNeeded) {\n+        horizontal.setEnabled(hNeeded);\n+        vertical  .setEnabled(vNeeded);\n+\n+        if (scrollbarsAlwaysVisible) {\n+            horizontalPanel.setVisible(true);\n+            vertical       .setVisible(true);\n+            cornerBox      .setVisible(true);\n+        } else {\n+            horizontalPanel.setVisible(hNeeded);\n+            vertical       .setVisible(vNeeded);\n+            cornerBox      .setVisible(hNeeded&&vNeeded);\n+        }\n+    }\n+\n     /** \n      *\tDerives the SVG Viewbox from the SVG root element. \n      *\tCaches it. Assumes that it will not change.",
                "deletions": 27
            },
            {
                "sha": "bd56886b8e74614eace0089e04a88810329c121c",
                "filename": "sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/86cd6d1bb7f6828e097a134a925a177c7dc69d75/sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java?ref=86cd6d1bb7f6828e097a134a925a177c7dc69d75",
                "patch": "@@ -213,6 +213,7 @@ protected void transcode(Document document,\n                 se.dispatchSVGLoadEvent();\n             }\n         } catch (BridgeException ex) {\n+            ex.printStackTrace();\n             throw new TranscoderException(ex);\n         }\n ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Fixed NPE when the Batik flowText extension lacks any text.\n2) Optimizations in Arabic text handling (thanks dvholten)\n3) Added 'getters' for fill and stroke properties on GVT Painters.\n4) Corrected bounding code in Image Zoom Interactor (Thanks Urs)\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@380641 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/855a6a970650008557efc4482088b58e15342906",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/ee12290a1876dc8f1434efaf21f55dde8a50c130",
        "bug_id": "xmlgraphics-batik_41",
        "file": [
            {
                "sha": "929c2577374556d19504dce56919299caf0a3ba2",
                "filename": "samples/extensions/flowTextAlign.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/samples/extensions/flowTextAlign.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/samples/extensions/flowTextAlign.svg",
                "status": "modified",
                "changes": 15,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/samples/extensions/flowTextAlign.svg?ref=855a6a970650008557efc4482088b58e15342906",
                "patch": "@@ -163,6 +163,21 @@\n       </g>\n    </g>\n \n+    <!-- check a totally empty flow text element. -->\n+   <g font-family=\"serif\" transform=\"translate(0,405)\" >\n+\t <g fill=\"rgb(220,220,255)\">\n+      \t    <rect x=\"12.5\"  y=\"0\"  width=\"125\" height=\"72\"/>\n+     </g>\n+\n+     <flowText xmlns=\"http://xml.apache.org/batik/ext\"\n+               font-size=\"24\" xml:space=\"preserve\">\n+       <flowRegion vertical-align=\"top\">\n+               <rect x=\"12.5\"  y=\"0\"  width=\"125\" height=\"72\"/>\n+       </flowRegion>\n+       <flowPara/>\n+     </flowText>\n+   </g>\n+\n     <!-- ============================================================= -->\n     <!-- Batik sample mark                                             -->\n     <!-- ============================================================= -->",
                "deletions": 0
            },
            {
                "sha": "21d9f013efd8052eae3985f53302790166b25498",
                "filename": "sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGTextElementBridge.java?ref=855a6a970650008557efc4482088b58e15342906",
                "patch": "@@ -877,10 +877,10 @@ protected void fillAttributedStringBuffer(BridgeContext ctx,\n         if (preserve)\n             endLimit = asb.length();\n         \n-\tMap map = getAttributeMap(ctx, element, textPath, bidiLevel);\n-\tObject o = map.get(TextAttribute.BIDI_EMBEDDING);\n+        Map map = getAttributeMap(ctx, element, textPath, bidiLevel);\n+        Object o = map.get(TextAttribute.BIDI_EMBEDDING);\n         Integer subBidiLevel = bidiLevel;\n-\tif (o != null)\n+        if (o != null)\n \t    subBidiLevel = ((Integer)o);\n \n         for (Node n = getFirstChild(element);",
                "deletions": 3
            },
            {
                "sha": "aeb1f6d3d6e96ea1cdcff3714b51372717025532",
                "filename": "sources/org/apache/batik/extension/svg/BatikFlowTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/extension/svg/BatikFlowTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/extension/svg/BatikFlowTextElementBridge.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/extension/svg/BatikFlowTextElementBridge.java?ref=855a6a970650008557efc4482088b58e15342906",
                "patch": "@@ -137,6 +137,8 @@ protected AttributedString buildAttributedString(BridgeContext ctx,\n                                                      Element element) {\n         List rgns = getRegions(ctx, element);\n         AttributedString ret = getFlowDiv(ctx, element);\n+        if (ret == null) return ret;\n+\n         ret.addAttribute(FLOW_REGIONS, rgns, 0, 1);\n         return ret;\n     }",
                "deletions": 0
            },
            {
                "sha": "28b9db73bc9d6f6c2fc187913518dd446262569a",
                "filename": "sources/org/apache/batik/gvt/FillShapePainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/gvt/FillShapePainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/gvt/FillShapePainter.java",
                "status": "modified",
                "changes": 7,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/FillShapePainter.java?ref=855a6a970650008557efc4482088b58e15342906",
                "patch": "@@ -64,6 +64,13 @@ public void setPaint(Paint newPaint) {\n         this.paint = newPaint;\n     }\n \n+    /**\n+     * Gets the paint used to draw the outline of the shape.\n+     */\n+    public Paint getPaint() {\n+        return paint;\n+    }\n+\n     /**\n      * Paints the specified shape using the specified Graphics2D.\n      *",
                "deletions": 0
            },
            {
                "sha": "119773d40b1804eb312950b2d354424ffc340ed6",
                "filename": "sources/org/apache/batik/gvt/StrokeShapePainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/gvt/StrokeShapePainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/gvt/StrokeShapePainter.java",
                "status": "modified",
                "changes": 14,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/StrokeShapePainter.java?ref=855a6a970650008557efc4482088b58e15342906",
                "patch": "@@ -76,6 +76,13 @@ public void setStroke(Stroke newStroke) {\n         this.strokedShape = null;\n     }\n \n+    /**\n+     * Gets the stroke used to draw the outline of the shape.\n+     */\n+    public Stroke getStroke() {\n+        return stroke;\n+    }\n+\n     /**\n      * Sets the paint used to fill a shape.\n      *\n@@ -85,6 +92,13 @@ public void setPaint(Paint newPaint) {\n         this.paint = newPaint;\n     }\n \n+    /**\n+     * Gets the paint used to draw the outline of the shape.\n+     */\n+    public Paint getPaint() {\n+        return paint;\n+    }\n+\n     /**\n      * Paints the outline of the specified shape using the specified \n      * Graphics2D.",
                "deletions": 0
            },
            {
                "sha": "ae8a152b09500b7d81662bfbf9da770aea2eef79",
                "filename": "sources/org/apache/batik/gvt/font/AWTGVTGlyphVector.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/gvt/font/AWTGVTGlyphVector.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/gvt/font/AWTGVTGlyphVector.java",
                "status": "modified",
                "changes": 6,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/font/AWTGVTGlyphVector.java?ref=855a6a970650008557efc4482088b58e15342906",
                "patch": "@@ -799,11 +799,7 @@ public int getCharacterCount(int startGlyphIndex, int endGlyphIndex) {\n         int end   = endGlyphIndex+ci.getBeginIndex();\n \n         for (char c = ci.setIndex(start); ci.getIndex() <= end; c=ci.next()) {\n-            if (ArabicTextHandler.isLigature(c)) {\n-                charCount += ArabicTextHandler.getNumChars(c);\n-            } else {\n-                charCount++;\n-            }\n+            charCount += ArabicTextHandler.getNumChars(c);\n         }\n \n         return charCount;",
                "deletions": 5
            },
            {
                "sha": "5782f7e6abbd54415ce676686a3e33dfab3281fa",
                "filename": "sources/org/apache/batik/gvt/text/ArabicTextHandler.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/gvt/text/ArabicTextHandler.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/gvt/text/ArabicTextHandler.java",
                "status": "modified",
                "changes": 29,
                "additions": 18,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/text/ArabicTextHandler.java?ref=855a6a970650008557efc4482088b58e15342906",
                "patch": "@@ -263,11 +263,14 @@ public static boolean containsArabic(AttributedCharacterIterator aci) {\n      */\n     public static boolean arabicCharTransparent(char c) {\n         int charVal = c;\n-        if ((charVal >= 0x064B && charVal <= 0x0655) ||\n+        if ((charVal  < 0x064B) || (charVal > 0x06ED)) \n+            return false;\n+\n+        if ((charVal <= 0x0655)                      ||\n             (charVal == 0x0670)                      ||\n             (charVal >= 0x06D6 && charVal <= 0x06E4) ||\n             (charVal >= 0x06E7 && charVal <= 0x06E8) ||\n-            (charVal >= 0x06EA && charVal <= 0x06ED)) {\n+            (charVal >= 0x06EA)) {\n             return true;\n         }\n         return false;\n@@ -466,33 +469,37 @@ public static boolean charStartsLigature(char c) {\n     }\n \n     /**\n-     * Returns the number of characters the glyph for the specified character\n-     * represents. If the glyph represents a ligature this will be 2, otherwise 1.\n+     * Returns the number of characters the glyph for the specified\n+     * character represents. If the glyph represents a ligature this\n+     * will be 2, otherwise 1.\n      *\n      * @param c The character to test.\n      * @return The number of characters the glyph for c represents.\n      */\n     public static int getNumChars(char c) {\n         // if c is a ligature returns 2, else returns 1\n-        if (isLigature(c)) {\n+        if (isLigature(c))\n             // at the moment only support ligatures with two chars\n             return 2;\n-        }\n         return 1;\n     }\n \n     /**\n-     * Returns true if the glyph for the specified character respresents a ligature.\n+     * Returns true if the glyph for the specified character\n+     * respresents a ligature.\n      *\n      * @param c The character to test.\n      * @return True if c is a ligature, false otherwise.\n      */\n     public static boolean isLigature(char c) {\n         int charVal = c;\n-        if ((charVal >= 0xFE70 && charVal <= 0xFE72)\n-            || (charVal == 0xFE74)\n-            || (charVal >= 0xFE76 && charVal <= 0xFE7F)\n-            || (charVal >= 0xFEF5 && charVal <= 0xFEFC)) {\n+        if ((charVal < 0xFE70) || (charVal > 0xFEFC)) \n+            return false;\n+\n+        if ((charVal <= 0xFE72)                      ||\n+            (charVal == 0xFE74)                      ||\n+            (charVal >= 0xFE76 && charVal <= 0xFE7F) ||\n+            (charVal >= 0xFEF5)) {\n             return true;\n         }\n         return false;",
                "deletions": 11
            },
            {
                "sha": "91c6723e8cf9148524751cf8f00fe8f7b9eb282a",
                "filename": "sources/org/apache/batik/swing/gvt/AbstractImageZoomInteractor.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/swing/gvt/AbstractImageZoomInteractor.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/sources/org/apache/batik/swing/gvt/AbstractImageZoomInteractor.java",
                "status": "modified",
                "changes": 12,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/swing/gvt/AbstractImageZoomInteractor.java?ref=855a6a970650008557efc4482088b58e15342906",
                "patch": "@@ -106,20 +106,22 @@ public void mouseReleased(MouseEvent e) {\n      * bounds of the component).\n      */\n     public void mouseDragged(MouseEvent e) {\n+        AffineTransform at;\n         JGVTComponent c = (JGVTComponent)e.getSource();\n \n         xCurrent = e.getX();\n         yCurrent = e.getY();\n \n-        AffineTransform at = AffineTransform.getTranslateInstance(xStart, yStart);\n+        at = AffineTransform.getTranslateInstance(xStart, yStart);\n         int dy = yCurrent - yStart;\n+        double s;\n         if (dy < 0) {\n-            dy = (dy > -5) ? 15 : dy - 10;\n+            dy -= 10;\n+            s = (dy > -15) ? 1.0 : -15.0/dy;\n         } else {\n-            dy = (dy < 5) ? 15 : dy + 10;\n+            dy += 10;\n+            s = (dy <  15) ? 1.0 : dy/15.0;\n         }\n-        double s = dy / 15.0;\n-        s = (s > 0) ? s : -1 / s;\n \n         at.scale(s, s);\n         at.translate(-xStart, -yStart);",
                "deletions": 5
            },
            {
                "sha": "397f4de36a12e32f60276217b38f19172cf9e0fe",
                "filename": "test-references/samples/extensions/flowTextAlign.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/test-references/samples/extensions/flowTextAlign.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/test-references/samples/extensions/flowTextAlign.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/extensions/flowTextAlign.png?ref=855a6a970650008557efc4482088b58e15342906",
                "deletions": 0
            },
            {
                "sha": "5835e4d8d95989d0c99a2d6ee8358b5ad1a3323e",
                "filename": "test-resources/org/apache/batik/test/samplesRendering.xml",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/855a6a970650008557efc4482088b58e15342906/test-resources/org/apache/batik/test/samplesRendering.xml",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/855a6a970650008557efc4482088b58e15342906/test-resources/org/apache/batik/test/samplesRendering.xml",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/test/samplesRendering.xml?ref=855a6a970650008557efc4482088b58e15342906",
                "patch": "@@ -53,10 +53,10 @@\n         <test id=\"samples/textRotateShadows.svg\" />\n     </testGroup>\n \n-    <testGroup id=\"svg1.2\" name=\"SVG Version 1.2 functionality tests\">\n+    <testGroup id=\"tests.spec12\" name=\"SVG Version 1.2 functionality tests\">\n         <test id=\"samples/tests/spec12/text/flowBidi.svg\" >\n             <property name=\"Validating\" class=\"java.lang.Boolean\" value=\"false\" />\n-\t</test>\n+\t    </test>\n         <test id=\"samples/tests/spec12/text/flowText.svg\" >\n             <property name=\"Validating\" class=\"java.lang.Boolean\" value=\"false\" />\n \t</test>",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Ensure that Anchor listener is removed when it's anchor is\n   no longer displayed.\n2) Fixed NPE in FlowText when a line has no valid ranges for\n   placing text (too much interfearing geometry on line).\n3) JSVG/GVTComponent now clones AffineTransforms before\n   returning them.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@371920 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/f8c3c8de6a84e69425c951e7948db6abc5ebf766",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/69eccaafcd8efcca98f064b7c9e61aacf7deef9d",
        "bug_id": "xmlgraphics-batik_42",
        "file": [
            {
                "sha": "dd3bdbf15ae5f49e29385e0f2d4abb3f75d4878a",
                "filename": "samples/tests/spec12/text/flowTextAlign.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f8c3c8de6a84e69425c951e7948db6abc5ebf766/samples/tests/spec12/text/flowTextAlign.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f8c3c8de6a84e69425c951e7948db6abc5ebf766/samples/tests/spec12/text/flowTextAlign.svg",
                "status": "modified",
                "changes": 22,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/samples/tests/spec12/text/flowTextAlign.svg?ref=f8c3c8de6a84e69425c951e7948db6abc5ebf766",
                "patch": "@@ -43,8 +43,7 @@\n       \t    <rect x=\"312.5\" y=\"0\" width=\"125\" height=\"36\"/>\n \t </g>\n \n-      \t <flowText xmlns=\"http://xml.apache.org/batik/ext\"\n-      \t           font-size=\"24\" xml:space=\"preserve\">\n+      \t <flowRoot font-size=\"24\" xml:space=\"preserve\">\n       \t    <flowRegion vertical-align=\"top\">\n       \t            <rect x=\"12.5\"  y=\"0\" width=\"125\" height=\"36\" visibility=\"hidden\"/>\n       \t    </flowRegion>\n@@ -62,7 +61,7 @@\n                <flowRegionBreak justification=\"middle\"\n \t\t      >Try bottom</flowRegionBreak>\n \t    </flowDiv>\n-      \t </flowText>\n+      \t </flowRoot>\n       </g>\n \n       <g font-family=\"serif\" transform=\"translate(0,120)\" >\n@@ -75,8 +74,7 @@\n       \t    <rect x=\"312.5\" y=\"40\" width=\"125\" height=\"36\"/>\n \t </g>\n \n-      \t <flowText xmlns=\"http://xml.apache.org/batik/ext\"\n-      \t           font-size=\"24\" xml:space=\"preserve\">\n+      \t <flowRoot font-size=\"24\" xml:space=\"preserve\">\n       \t    <flowRegion vertical-align=\"top\">\n       \t            <rect x=\"12.5\"  y=\"0\"  width=\"125\" height=\"36\" visibility=\"hidden\"/>\n       \t            <rect x=\"12.5\"  y=\"40\" width=\"125\" height=\"36\" visibility=\"hidden\"/>\n@@ -97,7 +95,7 @@\n                <flowRegionBreak justification=\"middle\"\n \t\t      >Bottom two lines</flowRegionBreak>\n \t    </flowDiv>\n-      \t </flowText>\n+      \t </flowRoot>\n       </g>\n \n       <g font-family=\"serif\" transform=\"translate(0,220)\" >\n@@ -107,8 +105,7 @@\n       \t    <rect x=\"312.5\" y=\"0\"  width=\"125\" height=\"72\"/>\n \t </g>\n \n-      \t <flowText xmlns=\"http://xml.apache.org/batik/ext\"\n-      \t           font-size=\"24\" xml:space=\"preserve\">\n+      \t <flowRoot font-size=\"24\" xml:space=\"preserve\">\n       \t    <flowRegion vertical-align=\"top\">\n       \t            <rect x=\"12.5\"  y=\"0\"  width=\"125\" height=\"72\" visibility=\"hidden\"/>\n       \t    </flowRegion>\n@@ -126,7 +123,7 @@\n                <flowRegionBreak justification=\"middle\"\n \t\t      >Bottom two lines</flowRegionBreak>\n \t    </flowDiv>\n-      \t </flowText>\n+      \t </flowRoot>\n       </g>\n \n       <g font-family=\"serif\" transform=\"translate(0,320)\" >\n@@ -136,8 +133,7 @@\n       \t    <rect x=\"312.5\" y=\"0\"  width=\"125\" height=\"72\"/>\n \t </g>\n \n-      \t <flowText xmlns=\"http://xml.apache.org/batik/ext\"\n-      \t           font-size=\"24\" xml:space=\"preserve\">\n+      \t <flowRoot font-size=\"24\" xml:space=\"preserve\">\n       \t    <flowRegion vertical-align=\"top\">\n       \t            <rect x=\"12.5\"  y=\"0\"  width=\"125\" height=\"72\" visibility=\"hidden\"/>\n       \t    </flowRegion>\n@@ -161,12 +157,12 @@\n                <flowRegionBreak justification=\"middle\"\n \t\t      >two lines</flowRegionBreak>\n \t    </flowDiv>\n-      \t </flowText>\n+      \t </flowRoot>\n       </g>\n    </g>\n \n     <!-- ============================================================= -->\n     <!-- Batik sample mark                                             -->\n     <!-- ============================================================= -->\n-    <use xlink:href=\"../batikLogo.svg#Batik_Tag_Box\" />\n+    <use xlink:href=\"../../../batikLogo.svg#Batik_Tag_Box\" />\n </svg>",
                "deletions": 13
            },
            {
                "sha": "9ea02ae5eb26fbe1e28eab8f971f5005574ecfcd",
                "filename": "sources/org/apache/batik/bridge/SVGAElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f8c3c8de6a84e69425c951e7948db6abc5ebf766/sources/org/apache/batik/bridge/SVGAElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f8c3c8de6a84e69425c951e7948db6abc5ebf766/sources/org/apache/batik/bridge/SVGAElementBridge.java",
                "status": "modified",
                "changes": 54,
                "additions": 41,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGAElementBridge.java?ref=f8c3c8de6a84e69425c951e7948db6abc5ebf766",
                "patch": "@@ -38,6 +38,10 @@\n  */\n public class SVGAElementBridge extends SVGGElementBridge {\n \n+    protected AnchorListener          al;\n+    protected CursorMouseOverListener bl;\n+    protected CursorMouseOutListener  cl;\n+\n     /**\n      * Constructs a new bridge for the &lt;a> element.\n      */\n@@ -73,32 +77,56 @@ public void buildGraphicsNode(BridgeContext ctx,\n \n         if (ctx.isInteractive()) {\n             NodeEventTarget target = (NodeEventTarget)e;\n-            EventListener l = new AnchorListener(ctx.getUserAgent());\n+            al = new AnchorListener(ctx.getUserAgent());\n             target.addEventListenerNS\n                 (XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_CLICK,\n-                 l, false, null);\n+                 al, false, null);\n             ctx.storeEventListenerNS\n-                (target, XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_CLICK,\n-                 l, false);\n+                (target, \n+                 XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_CLICK,\n+                 al, false);\n \n-            l = new CursorMouseOverListener(ctx.getUserAgent());\n+            bl = new CursorMouseOverListener(ctx.getUserAgent());\n             target.addEventListenerNS\n                 (XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_MOUSEOVER,\n-                 l, false, null);\n+                 bl, false, null);\n             ctx.storeEventListenerNS\n-                (target, XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_MOUSEOVER,\n-                 l, false);\n-\n-            l = new CursorMouseOutListener(ctx.getUserAgent());\n+                (target, \n+                 XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_MOUSEOVER,\n+                 bl, false);\n+            cl = new CursorMouseOutListener(ctx.getUserAgent());\n             target.addEventListenerNS\n                 (XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_MOUSEOUT,\n-                 l, false, null);\n+                 cl, false, null);\n             ctx.storeEventListenerNS\n-                (target, XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_MOUSEOUT,\n-                 l, false);\n+                (target, \n+                 XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_MOUSEOUT,\n+                 cl, false);\n         }\n     }\n \n+    public void dispose() {\n+        NodeEventTarget target = (NodeEventTarget)e;\n+        if (al != null) {\n+            target.removeEventListenerNS\n+                (XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_CLICK, \n+                 al, false);\n+            al = null;\n+        }\n+        if (bl != null) {\n+            target.removeEventListenerNS\n+                (XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_MOUSEOVER, \n+                 bl, false);\n+            bl = null;\n+        }\n+        if (cl != null) {\n+            target.removeEventListenerNS\n+                (XMLConstants.XML_EVENTS_NAMESPACE_URI, SVG_EVENT_MOUSEOUT, \n+                 cl, false);\n+            cl = null;\n+        }\n+        super.dispose();\n+    }\n     /**\n      * Returns true as the &lt;a> element is a container.\n      */",
                "deletions": 13
            },
            {
                "sha": "a151f831209bb2fe123e33e626128e798b5596cf",
                "filename": "sources/org/apache/batik/gvt/flow/FlowRegions.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f8c3c8de6a84e69425c951e7948db6abc5ebf766/sources/org/apache/batik/gvt/flow/FlowRegions.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f8c3c8de6a84e69425c951e7948db6abc5ebf766/sources/org/apache/batik/gvt/flow/FlowRegions.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/flow/FlowRegions.java?ref=f8c3c8de6a84e69425c951e7948db6abc5ebf766",
                "patch": "@@ -81,6 +81,7 @@ public void newLineHeight(double lineHeight) {\n     }\n \n     public int getNumRangeOnLine() {\n+        if (validRanges == null) return 0;\n         return validRanges.size();\n     }\n     public void resetRange() {",
                "deletions": 0
            },
            {
                "sha": "292ec37540281881388503570d4108caa801411d",
                "filename": "sources/org/apache/batik/swing/gvt/AbstractJGVTComponent.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f8c3c8de6a84e69425c951e7948db6abc5ebf766/sources/org/apache/batik/swing/gvt/AbstractJGVTComponent.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f8c3c8de6a84e69425c951e7948db6abc5ebf766/sources/org/apache/batik/swing/gvt/AbstractJGVTComponent.java",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/swing/gvt/AbstractJGVTComponent.java?ref=f8c3c8de6a84e69425c951e7948db6abc5ebf766",
                "patch": "@@ -592,7 +592,7 @@ public void setRenderingTransform(AffineTransform at) {\n \n     public void setRenderingTransform(AffineTransform at, \n                                       boolean performRedraw) {\n-        renderingTransform = at;\n+        renderingTransform = new AffineTransform(at);\n         suspendInteractions = true;\n         if (eventDispatcher != null) {\n             try {\n@@ -620,14 +620,14 @@ public void setRenderingTransform(AffineTransform at,\n      * Returns the initial transform.\n      */\n     public AffineTransform getInitialTransform() {\n-        return initialTransform;\n+        return new AffineTransform(initialTransform);\n     }\n \n     /**\n      * Returns the current rendering transform.\n      */\n     public AffineTransform getRenderingTransform() {\n-        return renderingTransform;\n+        return new AffineTransform(renderingTransform);\n     }\n \n     /**",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Fixed NPE when 'double' clicking now empty text.\n2) Ensured that RegistryEntry classes fullfill DeferRable\n   contract and provide filter, even when exceptions occur.\n3) Fixed some minor issues with test cases.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@348574 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/434066aa9223a9857605fafd4bd1df96e5216d6e",
        "bug_id": "xmlgraphics-batik_43",
        "file": [
            {
                "sha": "28943d1ffd903111fe886f8f99d6dddc34577c12",
                "filename": "samples/tests/spec/scripting/styling.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/samples/tests/spec/scripting/styling.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/samples/tests/spec/scripting/styling.svg",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/samples/tests/spec/scripting/styling.svg?ref=72e9e74bd8b7f555cea3a3a8a7963f43d2d367be",
                "patch": "@@ -114,10 +114,11 @@\n       document.getElementById(\"test3\").setAttribute(\"class\", \"xxx\");\n       document.getElementById(\"test4\").setAttribute(\"class\", \"\");\n       document.getElementById(\"test5\").setAttribute(\"id\", \"foo\");\n-      regardTestInstance.scriptDone();\n       toggleSelected(document.getElementById(\"cb\"));\n \n       document.getElementById(\"a\").setAttribute(\"class\", \"\");\n+\n+      regardTestInstance.scriptDone();\n     }\n   ]]></script>\n ",
                "deletions": 1
            },
            {
                "sha": "bbe43975855f92dad96f2f90bced1b3c0c8ed165",
                "filename": "samples/tests/spec12/text/lineHeightFontShorthand.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/samples/tests/spec12/text/lineHeightFontShorthand.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/samples/tests/spec12/text/lineHeightFontShorthand.svg",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/samples/tests/spec12/text/lineHeightFontShorthand.svg?ref=72e9e74bd8b7f555cea3a3a8a7963f43d2d367be",
                "patch": "@@ -48,6 +48,7 @@\n   .f7 { font: italic bold 20/15px times; }\n   .f8 { font: 700 20/1em times; }\n   .f9 { font: 700 20/75% times; }\n+  flowRegion > rect { fill: none; }\n ]]></style>\n \n    <g id=\"testContent\" font=\"8pt sanserif\">",
                "deletions": 0
            },
            {
                "sha": "238be3627506685f8c9cd8133a16ea4a069fce25",
                "filename": "sources/org/apache/batik/ext/awt/image/spi/JDKRegistryEntry.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/ext/awt/image/spi/JDKRegistryEntry.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/ext/awt/image/spi/JDKRegistryEntry.java",
                "status": "modified",
                "changes": 25,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/spi/JDKRegistryEntry.java?ref=72e9e74bd8b7f555cea3a3a8a7963f43d2d367be",
                "patch": "@@ -107,17 +107,22 @@ public Filter handleURL(ParsedURL purl, boolean needRawData) {\n         Thread t = new Thread() {\n                 public void run() {\n                     Filter filt = null;\n-\n-                    Toolkit tk = Toolkit.getDefaultToolkit();\n-                    Image img = tk.createImage(url);\n-\n-                    if (img != null) {\n-                        RenderedImage ri = loadImage(img, dr);\n-                        if (ri != null) {\n-                            filt = new RedRable(GraphicsUtil.wrap(ri));\n+                    try {\n+                        Toolkit tk = Toolkit.getDefaultToolkit();\n+                        Image img = tk.createImage(url);\n+\n+                        if (img != null) {\n+                            RenderedImage ri = loadImage(img, dr);\n+                            if (ri != null) {\n+                                filt = new RedRable(GraphicsUtil.wrap(ri));\n+                            }\n                         }\n-                    }\n-\n+                    } catch (ThreadDeath td) {\n+                        filt = ImageTagRegistry.getBrokenLinkImage\n+                            (this, errCode, errParam);\n+                        dr.setSource(filt);\n+                        throw td;\n+                    } catch (Throwable t) { }\n                     if (filt == null)\n                         filt = ImageTagRegistry.getBrokenLinkImage\n                             (this, errCode, errParam);",
                "deletions": 10
            },
            {
                "sha": "c23b7b29631434a7679452a30c4b56d9066ceabf",
                "filename": "sources/org/apache/batik/ext/awt/image/spi/JPEGRegistryEntry.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/ext/awt/image/spi/JPEGRegistryEntry.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/ext/awt/image/spi/JPEGRegistryEntry.java",
                "status": "modified",
                "changes": 8,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/spi/JPEGRegistryEntry.java?ref=72e9e74bd8b7f555cea3a3a8a7963f43d2d367be",
                "patch": "@@ -111,6 +111,14 @@ public void run() {\n                         // Something bad happened here...\n                         filt = ImageTagRegistry.getBrokenLinkImage\n                             (this, errCode, errParam);\n+                    } catch (ThreadDeath td) {\n+                        filt = ImageTagRegistry.getBrokenLinkImage\n+                            (this, errCode, errParam);\n+                        dr.setSource(filt);\n+                        throw td;\n+                    } catch (Throwable t) {\n+                        filt = ImageTagRegistry.getBrokenLinkImage\n+                            (this, errCode, errParam);\n                     }\n \n                     dr.setSource(filt);",
                "deletions": 0
            },
            {
                "sha": "c4407c4d8fe0ece36c1fdc16de865f1fb27e54f7",
                "filename": "sources/org/apache/batik/ext/awt/image/spi/PNGRegistryEntry.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/ext/awt/image/spi/PNGRegistryEntry.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/ext/awt/image/spi/PNGRegistryEntry.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/spi/PNGRegistryEntry.java?ref=72e9e74bd8b7f555cea3a3a8a7963f43d2d367be",
                "patch": "@@ -101,6 +101,9 @@ public void run() {\n                         filt = ImageTagRegistry.getBrokenLinkImage\n                             (this, errCode, errParam);\n                     } catch (ThreadDeath td) {\n+                        filt = ImageTagRegistry.getBrokenLinkImage\n+                            (this, errCode, errParam);\n+                        dr.setSource(filt);\n                         throw td;\n                     } catch (Throwable t) {\n                         filt = ImageTagRegistry.getBrokenLinkImage",
                "deletions": 0
            },
            {
                "sha": "5c6a5bad41962e8fca9153529659c01ddfc795e7",
                "filename": "sources/org/apache/batik/ext/awt/image/spi/TIFFRegistryEntry.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/ext/awt/image/spi/TIFFRegistryEntry.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/ext/awt/image/spi/TIFFRegistryEntry.java",
                "status": "modified",
                "changes": 3,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/spi/TIFFRegistryEntry.java?ref=72e9e74bd8b7f555cea3a3a8a7963f43d2d367be",
                "patch": "@@ -86,6 +86,9 @@ public void run() {\n                         filt = ImageTagRegistry.getBrokenLinkImage\n                             (this, errCode, errParam);\n                     } catch (ThreadDeath td) {\n+                        filt = ImageTagRegistry.getBrokenLinkImage\n+                            (this, errCode, errParam);\n+                        dr.setSource(filt);\n                         throw td;\n                     } catch (Throwable t) {\n                         filt = ImageTagRegistry.getBrokenLinkImage",
                "deletions": 0
            },
            {
                "sha": "1e3a013a13f7a2177d2c73346277b836e00dfb10",
                "filename": "sources/org/apache/batik/gvt/TextNode.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/gvt/TextNode.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/gvt/TextNode.java",
                "status": "modified",
                "changes": 8,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/TextNode.java?ref=72e9e74bd8b7f555cea3a3a8a7963f43d2d367be",
                "patch": "@@ -337,8 +337,8 @@ public boolean selectTo(double x, double y) {\n      */\n     public boolean selectAll(double x, double y) {\n         beginMark = textPainter.selectFirst(this);\n-        endMark = textPainter.selectLast(this);\n-        return true;\n+        endMark   = textPainter.selectLast(this);\n+        return true; // assume this always changes selection, for now.\n     }\n \n     /**\n@@ -347,11 +347,11 @@ public boolean selectAll(double x, double y) {\n      * @return an object containing the selected content.\n      */\n     public Object getSelection() {\n-\n-        int[] ranges = textPainter.getSelected(beginMark, endMark);\n         Object o = null;\n         if (aci == null) return o;\n \n+        int[] ranges = textPainter.getSelected(beginMark, endMark);\n+\n         // TODO: later we can return more complex things like\n         // noncontiguous selections\n         if ((ranges != null) && (ranges.length > 1)) {",
                "deletions": 4
            },
            {
                "sha": "c1e65f46a63d674a49d2f21ccd88027ad7e1d01a",
                "filename": "sources/org/apache/batik/gvt/renderer/StrokingTextPainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/gvt/renderer/StrokingTextPainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/72e9e74bd8b7f555cea3a3a8a7963f43d2d367be/sources/org/apache/batik/gvt/renderer/StrokingTextPainter.java",
                "status": "modified",
                "changes": 36,
                "additions": 31,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/renderer/StrokingTextPainter.java?ref=72e9e74bd8b7f555cea3a3a8a7963f43d2d367be",
                "patch": "@@ -162,6 +162,8 @@ public static TextPainter getInstance() {\n     public void paint(TextNode node, Graphics2D g2d) {\n         AttributedCharacterIterator aci;\n         aci = node.getAttributedCharacterIterator();\n+        if (aci == null)\n+            return;\n \n         List textRuns = getTextRuns(node, aci);\n \n@@ -1029,7 +1031,10 @@ protected void paintTextRuns(List textRuns,\n     public Shape getOutline(TextNode node) {\n \n         GeneralPath outline = null;\n-        AttributedCharacterIterator aci = node.getAttributedCharacterIterator();\n+        AttributedCharacterIterator aci;\n+        aci = node.getAttributedCharacterIterator();\n+        if (aci == null)\n+            return null;\n \n         // get the list of text runs\n         List textRuns = getTextRuns(node, aci);\n@@ -1097,6 +1102,8 @@ public Shape getOutline(TextNode node) {\n      public Rectangle2D getBounds2D(TextNode node) {\n         AttributedCharacterIterator aci;\n         aci = node.getAttributedCharacterIterator();\n+        if (aci == null)\n+            return null;\n \n         // get the list of text runs\n         List textRuns = getTextRuns(node, aci);\n@@ -1412,6 +1419,9 @@ else if (prevPaint != null)\n     public Mark getMark(TextNode node, int index, boolean leadingEdge) {\n         AttributedCharacterIterator aci;\n         aci = node.getAttributedCharacterIterator();\n+        if (aci == null)\n+            return null;\n+\n         if ((index < aci.getBeginIndex()) ||\n             (index > aci.getEndIndex()))\n             return null;\n@@ -1423,6 +1433,8 @@ public Mark getMark(TextNode node, int index, boolean leadingEdge) {\n     protected Mark hitTest(double x, double y, TextNode node) {\n         AttributedCharacterIterator aci;\n         aci = node.getAttributedCharacterIterator();\n+        if (aci == null)\n+            return null;\n                            \n         // get the list of text runs\n         List textRuns = getTextRuns(node, aci);\n@@ -1446,6 +1458,9 @@ protected Mark hitTest(double x, double y, TextNode node) {\n     public Mark selectFirst(TextNode node) {\n         AttributedCharacterIterator aci;\n         aci = node.getAttributedCharacterIterator();\n+        if (aci == null)\n+            return null;\n+\n         TextHit textHit = new TextHit(aci.getBeginIndex(), false);\n         return new BasicTextPainter.BasicMark(node, textHit);\n     }\n@@ -1456,6 +1471,9 @@ public Mark selectFirst(TextNode node) {\n     public Mark selectLast(TextNode node) {\n         AttributedCharacterIterator aci;\n         aci = node.getAttributedCharacterIterator();\n+        if (aci == null)\n+            return null;\n+\n         TextHit textHit = new TextHit(aci.getEndIndex()-1, false);\n         return  new BasicTextPainter.BasicMark(node, textHit);\n     }\n@@ -1484,11 +1502,15 @@ public Mark selectLast(TextNode node) {\n         }\n \n         TextNode textNode = start.getTextNode();\n+        if (textNode == null)\n+            return null;\n         if (textNode != finish.getTextNode()) \n             throw new Error(\"Markers are from different TextNodes!\");\n \n         AttributedCharacterIterator aci;\n         aci = textNode.getAttributedCharacterIterator();\n+        if (aci == null)\n+            return null;\n                              \n         int[] result = new int[2];\n         result[0] = start.getHit().getCharIndex();\n@@ -1564,10 +1586,15 @@ public Shape getHighlightShape(Mark beginMark, Mark endMark) {\n                 (\"This Mark was not instantiated by this TextPainter class!\");\n         }\n \n-        TextNode textNode = begin.getTextNode();\n+        TextNode textNode = begin.getTextNode(); \n+        if (textNode == null)\n+            return null;\n         if (textNode != end.getTextNode()) \n             throw new Error(\"Markers are from different TextNodes!\");\n-        if (textNode == null)\n+\n+        AttributedCharacterIterator aci;\n+        aci = textNode.getAttributedCharacterIterator();\n+        if (aci == null)\n             return null;\n \n         int beginIndex = begin.getHit().getCharIndex();\n@@ -1582,8 +1609,7 @@ public Shape getHighlightShape(Mark beginMark, Mark endMark) {\n         }\n \n         // get the list of text runs\n-        List textRuns = getTextRuns\n-            (textNode, textNode.getAttributedCharacterIterator());\n+        List textRuns = getTextRuns(textNode, aci);\n \n         GeneralPath highlightedShape = new GeneralPath();\n ",
                "deletions": 5
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. Bindable elements are now SVGGraphicsElements so that getBBox()\n   works on them.\n2. Fix bug with XPath selectors for xbl:content elements, where changes\n   to the children of the bound element caused NPE errors with Xalan's\n   XPath code.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@328299 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/99c4dbe5fc7076a7c94409a6099faea7d3716d64",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/424272fa9ad1705933ddc711349617a846383f3a",
        "bug_id": "xmlgraphics-batik_44",
        "file": [
            {
                "sha": "e7f617ebb0fa6b13d878d1b4e1c8f6f2c9816b37",
                "filename": "sources/org/apache/batik/bridge/BridgeContext.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/99c4dbe5fc7076a7c94409a6099faea7d3716d64/sources/org/apache/batik/bridge/BridgeContext.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/99c4dbe5fc7076a7c94409a6099faea7d3716d64/sources/org/apache/batik/bridge/BridgeContext.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/BridgeContext.java?ref=99c4dbe5fc7076a7c94409a6099faea7d3716d64",
                "patch": "@@ -1083,7 +1083,7 @@ public void removeReservedNamespaceURI(String namespaceURI) {\n      * registered for the capture phase as the 'default' behavior\n      * for cursors is handled by the BridgeContext during the \n      * capture phase and the 'custom' behavior (handling of 'auto'\n-     * on anchors, for example), is handled during the bubling phase.\n+     * on anchors, for example), is handled during the bubbling phase.\n      */\n     public void addUIEventListeners(Document doc) {\n         NodeEventTarget evtTarget = (NodeEventTarget)doc.getDocumentElement();",
                "deletions": 1
            },
            {
                "sha": "60728da4c21dcaf774d5cea5d96f95f073c9aa96",
                "filename": "sources/org/apache/batik/bridge/svg12/SVG12BridgeContext.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/99c4dbe5fc7076a7c94409a6099faea7d3716d64/sources/org/apache/batik/bridge/svg12/SVG12BridgeContext.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/99c4dbe5fc7076a7c94409a6099faea7d3716d64/sources/org/apache/batik/bridge/svg12/SVG12BridgeContext.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/svg12/SVG12BridgeContext.java?ref=99c4dbe5fc7076a7c94409a6099faea7d3716d64",
                "patch": "@@ -261,7 +261,7 @@ public void addDOMListeners() {\n      * registered for the capture phase as the 'default' behavior\n      * for cursors is handled by the BridgeContext during the \n      * capture phase and the 'custom' behavior (handling of 'auto'\n-     * on anchors, for example), is handled during the bubling phase.\n+     * on anchors, for example), is handled during the bubbling phase.\n      */\n     public void addUIEventListeners(Document doc) {\n         EventTarget evtTarget = (EventTarget)doc.getDocumentElement();",
                "deletions": 1
            },
            {
                "sha": "c99f5cb40f62a28396a5663f4492727141d43c0b",
                "filename": "sources/org/apache/batik/bridge/svg12/XPathPatternContentSelector.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/99c4dbe5fc7076a7c94409a6099faea7d3716d64/sources/org/apache/batik/bridge/svg12/XPathPatternContentSelector.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/99c4dbe5fc7076a7c94409a6099faea7d3716d64/sources/org/apache/batik/bridge/svg12/XPathPatternContentSelector.java",
                "status": "modified",
                "changes": 18,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/svg12/XPathPatternContentSelector.java?ref=99c4dbe5fc7076a7c94409a6099faea7d3716d64",
                "patch": "@@ -75,17 +75,24 @@ public XPathPatternContentSelector(ContentManager cm,\n                                        Element bound,\n                                        String selector) {\n         super(cm, content, bound);\n+        expression = selector;\n+        parse();\n+    }\n+\n+    /**\n+     * Parses the XPath selector.\n+     */\n+    protected void parse() {\n+        context = new XPathContext();\n         try {\n-            xpath = new XPath(selector, null, prefixResolver, XPath.MATCH);\n-            context = new XPathContext();\n-            expression = selector;\n+            xpath = new XPath(expression, null, prefixResolver, XPath.MATCH);\n         } catch (javax.xml.transform.TransformerException te) {\n             AbstractDocument doc\n-                = (AbstractDocument) content.getOwnerDocument();\n+                = (AbstractDocument) contentElement.getOwnerDocument();\n             throw doc.createXPathException\n                 (XPathException.INVALID_EXPRESSION_ERR,\n                  \"xpath.invalid.expression\",\n-                 new Object[] { selector, te.getMessage() });\n+                 new Object[] { expression, te.getMessage() });\n         }\n     }\n \n@@ -112,6 +119,7 @@ boolean update() {\n             selectedContent = new SelectedNodes();\n             return true;\n         }\n+        parse();\n         return selectedContent.update();\n     }\n ",
                "deletions": 5
            },
            {
                "sha": "269c4ddeee9148497f0a7234cfd9c2c397c59df6",
                "filename": "sources/org/apache/batik/dom/svg12/BindableElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/99c4dbe5fc7076a7c94409a6099faea7d3716d64/sources/org/apache/batik/dom/svg12/BindableElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/99c4dbe5fc7076a7c94409a6099faea7d3716d64/sources/org/apache/batik/dom/svg12/BindableElement.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg12/BindableElement.java?ref=99c4dbe5fc7076a7c94409a6099faea7d3716d64",
                "patch": "@@ -19,7 +19,7 @@\n \n import org.apache.batik.dom.AbstractDocument;\n import org.apache.batik.dom.svg.AttributeInitializer;\n-import org.apache.batik.dom.svg.SVGStylableElement;\n+import org.apache.batik.dom.svg.SVGGraphicsElement;\n \n import org.w3c.dom.Node;\n \n@@ -30,7 +30,7 @@\n  * @author <a href=\"mailto:cam%40mcc%2eid%2eau\">Cameron McCormack</a>\n  * @version $Id$\n  */\n-public class BindableElement extends SVGStylableElement {\n+public class BindableElement extends SVGGraphicsElement {\n \n     /**\n      * The namespace URI of the custom element.",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Fixed misplaced glyph for mixed LTR and RTL text.\n2) Fixed NPE when closing open window without entering anything.\n3) New test for Bidi checking for misplaced glyph.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@226710 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/f39a9a42c136f5fed449d42e224048e1ae843f64",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/b72af7581c1f0bc3abf14309082b739be267a0be",
        "bug_id": "xmlgraphics-batik_45",
        "file": [
            {
                "sha": "afa1c1171840f13603a1aa2a6c6c930786e07c4a",
                "filename": "sources/org/apache/batik/apps/svgbrowser/JSVGViewerFrame.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f39a9a42c136f5fed449d42e224048e1ae843f64/sources/org/apache/batik/apps/svgbrowser/JSVGViewerFrame.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f39a9a42c136f5fed449d42e224048e1ae843f64/sources/org/apache/batik/apps/svgbrowser/JSVGViewerFrame.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/apps/svgbrowser/JSVGViewerFrame.java?ref=f39a9a42c136f5fed449d42e224048e1ae843f64",
                "patch": "@@ -1042,6 +1042,7 @@ public void actionPerformed(ActionEvent e) {\n             }\n             if (uriChooser.showDialog() == URIChooser.OK_OPTION) {\n                 String s = uriChooser.getText();\n+                if (s == null) return;\n                 int i = s.indexOf(\"#\");\n                 String t = \"\";\n                 if (i != -1) {",
                "deletions": 0
            },
            {
                "sha": "4a56fa1c99673282d28a16eb7f565eb0c2aa1faf",
                "filename": "sources/org/apache/batik/gvt/text/BidiAttributedCharacterIterator.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f39a9a42c136f5fed449d42e224048e1ae843f64/sources/org/apache/batik/gvt/text/BidiAttributedCharacterIterator.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f39a9a42c136f5fed449d42e224048e1ae843f64/sources/org/apache/batik/gvt/text/BidiAttributedCharacterIterator.java",
                "status": "modified",
                "changes": 15,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/text/BidiAttributedCharacterIterator.java?ref=f39a9a42c136f5fed449d42e224048e1ae843f64",
                "patch": "@@ -42,7 +42,7 @@\n     private FontRenderContext frc;\n     private int chunkStart;\n     private int [] newCharOrder;\n-\n+    private final static Float FLOAT_NAN = new Float(Float.NaN);\n     private final static Map mirroredGlyphs = new HashMap(50);\n \n \n@@ -162,16 +162,19 @@ public BidiAttributedCharacterIterator(AttributedCharacterIterator aci,\n \n         //  work out the new character order\n         newCharOrder = doBidiReorder(charIndices, charLevels, \n-                                           numChars, maxBiDi);\n+                                     numChars, maxBiDi);\n \n         // construct the string in the new order\n         StringBuffer reorderedString = new StringBuffer();\n         char c;\n+        int reorderedFirstChar = 0;\n         for (int i = 0; i < numChars; i++) {\n-            c = aci.setIndex(newCharOrder[i]);\n+            int srcIdx = newCharOrder[i];\n+            c = aci.setIndex(srcIdx);\n+            if (srcIdx == 0) reorderedFirstChar = i;\n \n             // check for mirrored char\n-            int bidiLevel = tl.getCharacterLevel(newCharOrder[i]);\n+            int bidiLevel = tl.getCharacterLevel(srcIdx);\n             if ((bidiLevel & 0x01) != 0) {\n                 // bidi level is odd so writing dir is right to left\n                 // So get the mirror version of the char if there\n@@ -221,14 +224,14 @@ public BidiAttributedCharacterIterator(AttributedCharacterIterator aci,\n         if (x != null && !x.isNaN()) {\n             reorderedAS.addAttribute\n                 (GVTAttributedCharacterIterator.TextAttribute.X,\n-                 new Float(Float.NaN), newCharOrder[0], newCharOrder[0]+1);\n+                 FLOAT_NAN, reorderedFirstChar, reorderedFirstChar+1);\n             reorderedAS.addAttribute\n                 (GVTAttributedCharacterIterator.TextAttribute.X, x, 0, 1);\n         }\n         if (y != null && !y.isNaN()) {\n             reorderedAS.addAttribute\n                 (GVTAttributedCharacterIterator.TextAttribute.Y,\n-                 new Float(Float.NaN), newCharOrder[0], newCharOrder[0]+1);\n+                 FLOAT_NAN, reorderedFirstChar, reorderedFirstChar+1);\n             reorderedAS.addAttribute\n                 (GVTAttributedCharacterIterator.TextAttribute.Y, y, 0, 1);\n         }",
                "deletions": 6
            },
            {
                "sha": "5e6d456680475cd3717a695b9a1070adda715a36",
                "filename": "test-references/samples/tests/spec/text/textBiDi2.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f39a9a42c136f5fed449d42e224048e1ae843f64/test-references/samples/tests/spec/text/textBiDi2.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f39a9a42c136f5fed449d42e224048e1ae843f64/test-references/samples/tests/spec/text/textBiDi2.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textBiDi2.png?ref=f39a9a42c136f5fed449d42e224048e1ae843f64",
                "deletions": 0
            },
            {
                "sha": "4aa181e387a2400d6b2fdd0ef7c83673a46e8647",
                "filename": "test-resources/org/apache/batik/test/samplesRendering.xml",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/f39a9a42c136f5fed449d42e224048e1ae843f64/test-resources/org/apache/batik/test/samplesRendering.xml",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/f39a9a42c136f5fed449d42e224048e1ae843f64/test-resources/org/apache/batik/test/samplesRendering.xml",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/test/samplesRendering.xml?ref=f39a9a42c136f5fed449d42e224048e1ae843f64",
                "patch": "@@ -329,6 +329,7 @@\n         <test id=\"samples/tests/spec/text/textAnchor2.svg\" />\n         <test id=\"samples/tests/spec/text/textAnchor3.svg\" />\n         <test id=\"samples/tests/spec/text/textBiDi.svg\" />\n+        <test id=\"samples/tests/spec/text/textBiDi2.svg\" />\n         <test id=\"samples/tests/spec/text/textDecoration.svg\" />\n         <test id=\"samples/tests/spec/text/textDecoration2.svg\" />\n         <test id=\"samples/tests/spec/text/textEffect.svg\" />",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Fixed PR 2667 a NPE for URIResolver when building from memory DOM.\n2) _Greatly_ increased the speed of small patterns (the smaller the\n   pattern block in device space the bigger the difference).\nPR: 2667\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@200016 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/eed00bec12388fd8bd9df19454bedb4572819b36",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/af2e76e739bbe3e43cc633a8622d7c32bdfd32b2",
        "bug_id": "xmlgraphics-batik_46",
        "file": [
            {
                "sha": "f79ace185b37fc1ec0ba4fd842422c61e8a79c2a",
                "filename": "sources/org/apache/batik/bridge/URIResolver.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/bridge/URIResolver.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/bridge/URIResolver.java",
                "status": "modified",
                "changes": 26,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/URIResolver.java?ref=eed00bec12388fd8bd9df19454bedb4572819b36",
                "patch": "@@ -85,22 +85,22 @@ public Node getNode(String uri)\n         if (documentURI == null)\n             documentURI = document.getURL();\n \n-        if (documentURI.equals(uri)) {\n-            return document;\n-        }\n-        if (uri.startsWith(documentURI) &&\n-            uri.length() > documentURI.length() + 1 &&\n-            uri.charAt(documentURI.length()) == '#') {\n-            uri = uri.substring(documentURI.length());\n-        }\n-\n-        if (uri.startsWith(\"#\")) {\n-            return document.getElementById(uri.substring(1));\n+        ParsedURL purl = new ParsedURL(documentURI, uri);\n+        String    ref  = purl.getRef();\n+        if ((ref != null) && (documentURI != null)) {\n+            ParsedURL pDocURL = new ParsedURL(documentURI);\n+            // Check if the rest of the URL matches...\n+            // if so then return the referenced element.\n+            if ((pDocURL.getPath() == purl.getPath()) &&\n+                (pDocURL.getPort() == purl.getPort()) &&\n+                (pDocURL.getHost() == purl.getHost()) &&\n+                (pDocURL.getProtocol() == purl.getProtocol()))\n+                return document.getElementById(ref);\n         }\n \n-        ParsedURL purl = new ParsedURL(documentURI, uri);\n+        // uri is not a reference into this document, so load the \n+        // document it does reference.\n         Document doc = documentLoader.loadDocument(purl.toString());\n-        String ref = purl.getRef();\n         if (ref != null)\n             return doc.getElementById(ref);\n         return doc;",
                "deletions": 13
            },
            {
                "sha": "2ef3cfd7c72f24a0dbab58deb4adecbe13ce4e7e",
                "filename": "sources/org/apache/batik/ext/awt/image/renderable/TileRable.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/ext/awt/image/renderable/TileRable.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/ext/awt/image/renderable/TileRable.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/renderable/TileRable.java?ref=eed00bec12388fd8bd9df19454bedb4572819b36",
                "patch": "@@ -16,7 +16,7 @@\n  * @author <a href=\"mailto:vincent.hardy@eng.sun.com\">Vincent Hardy</a>\n  * @version $Id$\n  */\n-public interface TileRable extends Filter {\n+public interface TileRable extends FilterColorInterpolation {\n     /**\n      * Returns the tile region\n      */",
                "deletions": 1
            },
            {
                "sha": "95265bd71bb75eaba2dccf3f7ad5ef4c54698115",
                "filename": "sources/org/apache/batik/ext/awt/image/renderable/TileRable8Bit.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/ext/awt/image/renderable/TileRable8Bit.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/ext/awt/image/renderable/TileRable8Bit.java",
                "status": "modified",
                "changes": 8,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/renderable/TileRable8Bit.java?ref=eed00bec12388fd8bd9df19454bedb4572819b36",
                "patch": "@@ -33,7 +33,9 @@\n  * @author <a href=\"mailto:vhardy@apache.org\">Vincent Hardy</a>\n  * @version $Id$\n  */\n-public class TileRable8Bit extends AbstractRable implements TileRable{\n+public class TileRable8Bit \n+    extends    AbstractColorInterpolationRable \n+    implements TileRable{\n     /**\n      * Tile region\n      */\n@@ -235,7 +237,7 @@ public RenderedImage createRendering(RenderContext rc){\n         RenderContext tileRc  = new RenderContext(tileAt, srcRect, rh);\n         // RenderedImage tileRed = new DemandRed(source, tileRc);\n         RenderedImage tileRed = source.createRendering(tileRc);\n-\n+        \n         // System.out.println(\"TileRed: \" + \n         //                    GraphicsUtil.wrap(tileRed).getBounds());\n \n@@ -269,7 +271,7 @@ public RenderedImage createRendering(RenderContext rc){\n                                       Integer.MAX_VALUE/2);\n         }\n         // System.out.println(\"tiledArea: \" + tiledArea);\n-\n+        tileRed = convertSourceCS(tileRed);\n         TileRed tiledRed = new TileRed(tileRed, tiledArea, dw, dh);\n \n         // org.apache.batik.test.gvt.ImageDisplay.showImage(\"Tile\", tiledRed);",
                "deletions": 3
            },
            {
                "sha": "fd418e0fdfeb51eaa5a14b326af4a3d2d624bf03",
                "filename": "sources/org/apache/batik/ext/awt/image/rendered/TileRed.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/ext/awt/image/rendered/TileRed.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/ext/awt/image/rendered/TileRed.java",
                "status": "modified",
                "changes": 58,
                "additions": 56,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/rendered/TileRed.java?ref=eed00bec12388fd8bd9df19454bedb4572819b36",
                "patch": "@@ -133,8 +133,62 @@ public TileRed(RenderedImage tile,\n              tile.getMinX(), tile.getMinY(), null);\n \n         if (raster != null) {\n-            fillRasterFrom(raster, tile);\n-            this.tile = null;  // don't need it (It's in the raster).\n+            int minX   = raster.getMinX();\n+            int minY   = raster.getMinY();\n+            int width  = raster.getWidth();\n+            int height = raster.getHeight();\n+\n+            // This is a fairly expensive operation so do it once\n+            // upfront.  If we wanted this to go even faster we could\n+            // bypass copyData alltogeather and do the copy loops\n+            // directly.\n+            boolean int_pack = GraphicsUtil.is_INT_PACK_Data(sm, false);\n+\n+            WritableRaster fromRaster = raster.createWritableChild\n+                (minX, minY, xStep, yStep, minX, minY, null);\n+\n+            // Fill one 'tile' of the input....\n+            fillRasterFrom(fromRaster, tile);\n+            this.tile = null;  // don't need it anymore (It's in the raster).\n+            \n+            // Now replicate that out to the rest of the \n+            // raster.  We keep growing the size of the\n+            // chunk we replicate by 2x.\n+\n+            // Start replicating across the first row...\n+            int step=xStep;\n+            for (int x=xStep; x<width; x+=step, step*=2) {\n+                int w = step;\n+                if (x+w > width) w = width-x;\n+                WritableRaster toRaster = raster.createWritableChild\n+                    (minX+x, minY, w, yStep, minX, minY, null);\n+\n+                if (int_pack)\n+                    GraphicsUtil.copyData_INT_PACK(fromRaster, toRaster);\n+                else\n+                    GraphicsUtil.copyData_FALLBACK(fromRaster, toRaster);\n+\n+                fromRaster = raster.createWritableChild\n+                    (minX, minY, x+w, yStep, minX, minY, null);\n+            }\n+\n+            // Next replicate that row down to the bottom of the raster...\n+            step = yStep;\n+            for (int y=yStep; y<height; y+=step, step*=2) {\n+                int h = step;\n+                if (y+h > height) h = height-y;\n+                WritableRaster toRaster = raster.createWritableChild\n+                    (minX, minY+y, width, h, minX, minY, null);\n+\n+                if (int_pack)\n+                    GraphicsUtil.copyData_INT_PACK(fromRaster, toRaster);\n+                else\n+                    GraphicsUtil.copyData_FALLBACK(fromRaster, toRaster);\n+\n+\n+                fromRaster = raster.createWritableChild\n+                    (minX, minY, width, y+h, minX, minY, null);\n+            }\n         }\n         else {\n             this.tile        = tile;",
                "deletions": 2
            },
            {
                "sha": "523e1c711c5b33943dcd1f42fcfdc7b32bd362ec",
                "filename": "sources/org/apache/batik/gvt/PatternPaintContext.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/gvt/PatternPaintContext.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/eed00bec12388fd8bd9df19454bedb4572819b36/sources/org/apache/batik/gvt/PatternPaintContext.java",
                "status": "modified",
                "changes": 59,
                "additions": 21,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/PatternPaintContext.java?ref=eed00bec12388fd8bd9df19454bedb4572819b36",
                "patch": "@@ -29,6 +29,7 @@\n \n import org.apache.batik.ext.awt.image.GraphicsUtil;\n import org.apache.batik.ext.awt.image.renderable.Filter;\n+import org.apache.batik.ext.awt.image.renderable.TileRable;\n import org.apache.batik.ext.awt.image.renderable.TileRable8Bit;\n import org.apache.batik.ext.awt.image.rendered.TileCacheRed;\n \n@@ -93,59 +94,41 @@ public PatternPaintContext(ColorModel      destCM,\n         // System.out.println(\"PatB: \" + patternRegion);\n         // System.out.println(\"Tile: \" + tile);\n \n-        Filter tileRable = new TileRable8Bit(tile,\n-                                             EVERYTHING,\n-                                             patternRegion,\n-                                             overflow);\n+        TileRable tileRable = new TileRable8Bit(tile,\n+                                                EVERYTHING,\n+                                                patternRegion,\n+                                                overflow);\n \n-        RenderContext rc = new RenderContext(usr2dev,  EVERYTHING, hints);\n+        ColorSpace destCS = destCM.getColorSpace();\n+        if (destCS == ColorSpace.getInstance(ColorSpace.CS_sRGB))\n+            tileRable.setColorSpaceLinear(false);\n+        else if (destCS == ColorSpace.getInstance(ColorSpace.CS_LINEAR_RGB))\n+            tileRable.setColorSpaceLinear(true);\n \n+        RenderContext rc = new RenderContext(usr2dev,  EVERYTHING, hints);\n         tiled = tileRable.createRendering(rc);\n \n         // System.out.println(\"tileRed: \" + tiled);\n         // org.apache.batik.test.gvt.ImageDisplay.showImage(\"Tiled: \", tiled);\n \n         //System.out.println(\"Created rendering\");\n-        if(tiled != null) {\n-            rasterCM = tiled.getColorModel();\n-            ColorSpace destCS = destCM.getColorSpace();\n-\n-            if (destCS != rasterCM.getColorSpace()) {\n-                if (destCS == ColorSpace.getInstance(ColorSpace.CS_sRGB))\n-                    tiled = GraphicsUtil.convertTosRGB\n-                        (GraphicsUtil.wrap(tiled));\n-                else if (destCS == \n-                         ColorSpace.getInstance(ColorSpace.CS_LINEAR_RGB))\n-                    tiled = GraphicsUtil.convertToLsRGB\n-                        (GraphicsUtil.wrap(tiled));\n-            }\n-\n-            rasterCM = tiled.getColorModel();\n-            if (rasterCM.hasAlpha()) {\n-                if (destCM.hasAlpha()) {\n-                    if (rasterCM.isAlphaPremultiplied() !=\n-                        destCM  .isAlphaPremultiplied())\n-                        rasterCM = GraphicsUtil.coerceColorModel\n-                            (rasterCM, destCM.isAlphaPremultiplied());\n-                } else {\n-                    rasterCM = GraphicsUtil.coerceColorModel(rasterCM, false);\n-                }\n-            }\n-        }\n-        else {\n+        if(tiled == null) {\n             //System.out.println(\"Tile was null\");\n             rasterCM = ColorModel.getRGBdefault();\n             WritableRaster wr;\n             wr = rasterCM.createCompatibleWritableRaster(32, 32);\n             tiled = new BufferedImage(rasterCM, wr, false, null);\n+            return;\n         }\n \n-\n-        // System.out.println(\"DestCM  : \" + destCM);\n-        // System.out.println(\"RasterCM: \" + rasterCM);\n-        // Exception e = new Exception(\"Pattern\");\n-        // e.printStackTrace();\n-        \n+        rasterCM = tiled.getColorModel();\n+        if (rasterCM.hasAlpha()) {\n+            if (destCM.hasAlpha()) \n+                rasterCM = GraphicsUtil.coerceColorModel\n+                    (rasterCM, destCM.isAlphaPremultiplied());\n+            else \n+                rasterCM = GraphicsUtil.coerceColorModel(rasterCM, false);\n+        }\n     }\n \n     public void dispose(){",
                "deletions": 38
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "workaround a JDK bug. That bug is:\n\nRenderingHints rh = new RenderingHints(null);\nObject obj = rh.get(RENDER...);\nrh.put(RENDER..., obj);\n\nthrows an NPE!!!\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@199986 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/c829d02118b0894ef608415e66471bb844e9bb99",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/970acf7f1a361ad5c66eeeb9cf18c50a71450865",
        "bug_id": "xmlgraphics-batik_47",
        "file": [
            {
                "sha": "d67a4972144dd5145ef6f7e89079495be3380478",
                "filename": "sources/org/apache/batik/ext/awt/g2d/GraphicContext.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/c829d02118b0894ef608415e66471bb844e9bb99/sources/org/apache/batik/ext/awt/g2d/GraphicContext.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/c829d02118b0894ef608415e66471bb844e9bb99/sources/org/apache/batik/ext/awt/g2d/GraphicContext.java",
                "status": "modified",
                "changes": 29,
                "additions": 14,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/g2d/GraphicContext.java?ref=c829d02118b0894ef608415e66471bb844e9bb99",
                "patch": "@@ -23,6 +23,7 @@\n  * + RenderingHints <br>\n  * + AffineTransform <br>\n  *\n+ * @author <a href=\"mailto:cjolif@ilog.fr\">Christophe Jolif</a>\n  * @author <a href=\"mailto:vincent.hardy@eng.sun.com\">Vincent Hardy</a>\n  * @version $Id$\n  */\n@@ -99,17 +100,20 @@\n     /**\n      * Default constructor\n      */\n-    public GraphicContext(){\n+    public GraphicContext() {\n+        // to workaround a JDK bug\n+        hints.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_DEFAULT);\n     }\n \n     /**\n      * @param defaultDeviceTransform Default affine transform applied to map the user space to the\n      *                               user space.\n      */\n-    public GraphicContext(AffineTransform defaultDeviceTransform){\n-        this.defaultTransform = new AffineTransform(defaultDeviceTransform);\n-        this.transform = new AffineTransform(defaultTransform);\n-        if(!defaultTransform.isIdentity())\n+    public GraphicContext(AffineTransform defaultDeviceTransform) {\n+        this();\n+        defaultTransform = new AffineTransform(defaultDeviceTransform);\n+        transform = new AffineTransform(defaultTransform);\n+        if (!defaultTransform.isIdentity())\n             transformStack.addElement(TransformStackElement.createGeneralTransformElement(defaultTransform));\n     }\n \n@@ -262,9 +266,6 @@ public Rectangle getClipBounds(){\n      * @see #setClip(Shape)\n      */\n     public void clipRect(int x, int y, int width, int height){\n-        // System.out.println(\"clipRect(\" + x + \",\" + y + \",\" + width + \",\" + height + \")\");\n-        // Exception e = new Exception(\"\");\n-        // e.printStackTrace();\n         clip(new Rectangle(x, y, width, height));\n     }\n \n@@ -284,7 +285,6 @@ public void clipRect(int x, int y, int width, int height){\n      * @since       JDK1.1\n      */\n     public void setClip(int x, int y, int width, int height){\n-        System.out.println(\"setClip(\" + x + \",\" + y + \",\" + width + \",\" + height + \")\");\n         setClip(new Rectangle(x, y, width, height));\n     }\n \n@@ -330,8 +330,8 @@ public Shape getClip(){\n      * @see         java.awt.Graphics#setClip(int, int, int, int)\n      * @since       JDK1.1\n      */\n-    public void setClip(Shape clip){\n-        if(clip != null)\n+    public void setClip(Shape clip) {\n+        if (clip != null)\n             this.clip = transform.createTransformedShape(clip);\n         else\n             this.clip = null;\n@@ -795,15 +795,14 @@ public Stroke getStroke(){\n      *          this method clears the current <code>Clip</code>.\n      */\n     public void clip(Shape s){\n-        if(s != null)\n+        if (s != null)\n             s = transform.createTransformedShape(s);\n \n-        if(clip != null){\n+        if (clip != null) {\n             Area newClip = new Area(clip);\n             newClip.intersect(new Area(s));\n             clip = new GeneralPath(newClip);\n-        }\n-        else{\n+        } else {\n             clip = s;\n         }\n     }",
                "deletions": 15
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1. GenericBridges are now handled more uniformly, so that extension\n   elements which do not inherit from AbstractGraphicsNodeBridge and are\n   not for title or desc elements will have their handleElement method\n   called.\n2. Fixed tool tip handling bug.\n   (http://issues.apache.org/eyebrowse/ReadMsg?listName=batik-dev@xml.apache.org&msgNo=1007)\n3. Changed BridgeExtension to allow extensions to specify if a particular\n   extension element should cause the document to be dynamic.\n4. Fixed fill-rule bug. (#28679)\n5. Implemented getX() and getY() methods of text elements.\n6. Fixed NPE in SVGList if the list is empty.\n7. Fixed NPE in SVGTextElementBridge.getSubStringLength if there is no text.\n   (#28702)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@201371 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/bb38ef825c3fa978a88361367b77d8e9d386ac0e",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/df0bfcf69e007981893e8d4f4d8b1f7ded27b77f",
        "bug_id": "xmlgraphics-batik_48",
        "file": [
            {
                "sha": "82bdc4377d25504292c1c5a3b4a2affe7d0769fe",
                "filename": "sources/org/apache/batik/bridge/AbstractGraphicsNodeBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/AbstractGraphicsNodeBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/AbstractGraphicsNodeBridge.java",
                "status": "modified",
                "changes": 3,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/AbstractGraphicsNodeBridge.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -166,9 +166,6 @@ public void buildGraphicsNode(BridgeContext ctx,\n         node.setPointerEventType(CSSUtilities.convertPointerEvents(e));\n \n         initializeDynamicSupport(ctx, e, node);\n-\n-        // Handle children elements such as <title>\n-        SVGUtilities.bridgeChildren(ctx, e);\n     }\n \n     /**",
                "deletions": 3
            },
            {
                "sha": "ba8a0d58e63cdbaa5bee287437d0bbac8948d162",
                "filename": "sources/org/apache/batik/bridge/BaseScriptingEnvironment.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/BaseScriptingEnvironment.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/BaseScriptingEnvironment.java",
                "status": "modified",
                "changes": 29,
                "additions": 16,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/BaseScriptingEnvironment.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -57,6 +57,8 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n import java.net.MalformedURLException;\n import java.net.URL;\n import java.util.HashSet;\n+import java.util.Iterator;\n+import java.util.List;\n import java.util.Set;\n import java.util.jar.Manifest;\n \n@@ -144,14 +146,15 @@ public static boolean isDynamicDocument(Document doc) {\n      * Tells whether the given SVG element is dynamic.\n      */\n     public static boolean isDynamicElement(Element elt) {\n-        if (SVGConstants.SVG_NAMESPACE_URI.equals(elt.getNamespaceURI())) {\n-            String name = elt.getLocalName();\n-            if (name.equals(SVGConstants.SVG_SCRIPT_TAG)) {\n-                return true;\n-            }\n-            if (name.startsWith(\"animate\") || name.equals(\"set\")) {\n+        List bridgeExtensions = BridgeContext.getBridgeExtensions();\n+        Iterator i = bridgeExtensions.iterator();\n+        while (i.hasNext()) {\n+            BridgeExtension bridgeExtension = (BridgeExtension) i.next();\n+            if (bridgeExtension.isDynamicElement(elt)) {\n                 return true;\n             }\n+        }\n+        if (SVGConstants.SVG_NAMESPACE_URI.equals(elt.getNamespaceURI())) {\n             if (elt.getAttributeNS\n                 (null, SVGConstants.SVG_ONKEYUP_ATTRIBUTE).length() > 0) {\n                 return true;\n@@ -208,14 +211,14 @@ public static boolean isDynamicElement(Element elt) {\n                 (null, SVGConstants.SVG_ONMOUSEUP_ATTRIBUTE).length() > 0) {\n                 return true;\n             }\n+        }\n \n-            for (Node n = elt.getFirstChild();\n-                 n != null;\n-                 n = n.getNextSibling()) {\n-                if (n.getNodeType() == Node.ELEMENT_NODE) {\n-                    if (isDynamicElement((Element)n)) {\n-                        return true;\n-                    }\n+        for (Node n = elt.getFirstChild();\n+             n != null;\n+             n = n.getNextSibling()) {\n+            if (n.getNodeType() == Node.ELEMENT_NODE) {\n+                if (isDynamicElement((Element)n)) {\n+                    return true;\n                 }\n             }\n         }",
                "deletions": 13
            },
            {
                "sha": "0936d538ea450752b1e960fef685add9dc126f0d",
                "filename": "sources/org/apache/batik/bridge/BridgeExtension.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/BridgeExtension.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/BridgeExtension.java",
                "status": "modified",
                "changes": 11,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/BridgeExtension.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -52,6 +52,8 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n \n import java.util.Iterator;\n \n+import org.w3c.dom.Element;\n+\n /**\n  * This is a Service interface for classes that want to extend the\n  * functionality of the Bridge, to support new tags in the rendering tree.\n@@ -109,4 +111,13 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n      * @param ctx The BridgeContext instance to be updated\n      */\n     public void registerTags(BridgeContext ctx);\n+\n+    /**\n+     * Whether the presence of the specified element should cause\n+     * the document to be dynamic.  If this element isn't handled\n+     * by this BridgeExtension, just return false.\n+     *\n+     * @param e The element to check.\n+     */\n+    public boolean isDynamicElement(Element e);\n }",
                "deletions": 0
            },
            {
                "sha": "5c5aa4c4284015b63a36795cf8c40aa0c7f8b37e",
                "filename": "sources/org/apache/batik/bridge/GVTBuilder.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/GVTBuilder.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/GVTBuilder.java",
                "status": "modified",
                "changes": 36,
                "additions": 33,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/GVTBuilder.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -143,7 +143,11 @@ public GraphicsNode build(BridgeContext ctx, Document document) {\n     public GraphicsNode build(BridgeContext ctx, Element e) {\n         // get the appropriate bridge according to the specified element\n         Bridge bridge = ctx.getBridge(e);\n-        if (bridge == null || !(bridge instanceof GraphicsNodeBridge)) {\n+        if (bridge instanceof GenericBridge) {\n+            // If it is a GenericBridge just handle it and return.\n+            ((GenericBridge) bridge).handleElement(ctx, e);\n+            return null;\n+        } else if (bridge == null || !(bridge instanceof GraphicsNodeBridge)) {\n             return null;\n         }\n         // create the associated graphics node\n@@ -156,6 +160,8 @@ public GraphicsNode build(BridgeContext ctx, Element e) {\n         if (gn != null) {\n             if (gnBridge.isComposite()) {\n                 buildComposite(ctx, e, (CompositeGraphicsNode)gn);\n+            } else {\n+                handleGenericBridges(ctx, e);\n             }\n             gnBridge.buildGraphicsNode(ctx, e, gn);\n         }\n@@ -207,7 +213,11 @@ protected void buildGraphicsNode(BridgeContext ctx,\n         }\n         // get the appropriate bridge according to the specified element\n         Bridge bridge = ctx.getBridge(e);\n-        if (bridge == null || !(bridge instanceof GraphicsNodeBridge)) {\n+        if (bridge instanceof GenericBridge) {\n+            // If it is a GenericBridge just handle it and return.\n+            ((GenericBridge) bridge).handleElement(ctx, e);\n+            return;\n+        } else if (bridge == null || !(bridge instanceof GraphicsNodeBridge)) {\n             return;\n         }\n         // check the display property\n@@ -224,6 +234,9 @@ protected void buildGraphicsNode(BridgeContext ctx,\n                 // check if the element has children to build\n                 if (gnBridge.isComposite()) {\n                     buildComposite(ctx, e, (CompositeGraphicsNode)gn);\n+                } else {\n+                    // if not then still handle the GenericBridges\n+                    handleGenericBridges(ctx, e);\n                 }\n                 gnBridge.buildGraphicsNode(ctx, e, gn);\n             }\n@@ -241,5 +254,22 @@ protected void buildGraphicsNode(BridgeContext ctx,\n             throw ex;\n         }\n     }\n-}\n \n+    /**\n+     * Handles any GenericBridge elements which are children of the\n+     * specified element.\n+     * @param ctx the bridge context\n+     * @param e the element whose child elements should be handled\n+     */\n+    protected void handleGenericBridges(BridgeContext ctx, Element e) {\n+        for (Node n = e.getFirstChild(); n != null; n = n.getNextSibling()) {\n+            if (n instanceof Element) {\n+                Element e2 = (Element) n;\n+                Bridge b = ctx.getBridge(e2);\n+                if (b instanceof GenericBridge) {\n+                    ((GenericBridge) b).handleElement(ctx, e2);\n+                }\n+            }\n+        }\n+    }\n+}",
                "deletions": 3
            },
            {
                "sha": "af7ea8fd48cfe46719c3c2af427f408c8f930640",
                "filename": "sources/org/apache/batik/bridge/SVGBridgeExtension.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGBridgeExtension.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGBridgeExtension.java",
                "status": "modified",
                "changes": 24,
                "additions": 24,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGBridgeExtension.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -53,6 +53,9 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n import java.util.Collections;\n import java.util.Iterator;\n \n+import org.apache.batik.util.SVGConstants;\n+import org.w3c.dom.Element;\n+\n /**\n  * This is a Service interface for classes that want to extend the\n  * functionality of the Bridge, to support new tags in the rendering tree.\n@@ -192,4 +195,25 @@ public void registerTags(BridgeContext ctx) {\n         ctx.putBridge(new SVGVKernElementBridge());\n \n     }\n+\n+    /**\n+     * Whether the presence of the specified element should cause\n+     * the document to be dynamic.  If this element isn't handled\n+     * by this BridgeExtension, just return false.\n+     *\n+     * @param e The element to check.\n+     */\n+    public boolean isDynamicElement(Element e) {\n+        String ns = e.getNamespaceURI();\n+        if (!SVGConstants.SVG_NAMESPACE_URI.equals(ns)) {\n+            return false;\n+        }\n+        String ln = e.getLocalName();\n+        if (ln.equals(SVGConstants.SVG_SCRIPT_TAG)\n+                || ln.startsWith(\"animate\")\n+                || ln.equals(\"set\")) {\n+            return true;\n+        }\n+        return false;\n+    }\n }",
                "deletions": 0
            },
            {
                "sha": "9ce6564262536376e284182358d4bfa89b4ddade",
                "filename": "sources/org/apache/batik/bridge/SVGPathElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGPathElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGPathElementBridge.java",
                "status": "modified",
                "changes": 13,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGPathElementBridge.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -53,6 +53,8 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n import java.awt.Shape;\n import java.awt.geom.GeneralPath;\n \n+import org.apache.batik.css.engine.CSSEngineEvent;\n+import org.apache.batik.css.engine.SVGCSSEngine;\n import org.apache.batik.gvt.ShapeNode;\n import org.apache.batik.parser.AWTPathProducer;\n import org.apache.batik.parser.ParseException;\n@@ -144,4 +146,15 @@ public void handleDOMAttrModifiedEvent(MutationEvent evt) {\n             super.handleDOMAttrModifiedEvent(evt);\n         }\n     }\n+\n+    protected void handleCSSPropertyChanged(int property) {\n+        switch(property) {\n+        case SVGCSSEngine.FILL_RULE_INDEX:\n+            buildShape(ctx, e, (ShapeNode) node);\n+            handleGeometryChanged();\n+            break;\n+        default:\n+            super.handleCSSPropertyChanged(property);\n+        }\n+    }\n }",
                "deletions": 0
            },
            {
                "sha": "96052f0914d9916365f721ad21419ed8a4de74bb",
                "filename": "sources/org/apache/batik/bridge/SVGPolygonElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGPolygonElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGPolygonElementBridge.java",
                "status": "modified",
                "changes": 13,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGPolygonElementBridge.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -53,6 +53,8 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n import java.awt.Shape;\n import java.awt.geom.GeneralPath;\n \n+import org.apache.batik.css.engine.CSSEngineEvent;\n+import org.apache.batik.css.engine.SVGCSSEngine;\n import org.apache.batik.gvt.ShapeNode;\n import org.apache.batik.parser.AWTPolygonProducer;\n import org.apache.batik.parser.ParseException;\n@@ -143,4 +145,15 @@ public void handleDOMAttrModifiedEvent(MutationEvent evt) {\n             super.handleDOMAttrModifiedEvent(evt);\n         }\n     }\n+\n+    protected void handleCSSPropertyChanged(int property) {\n+        switch(property) {\n+        case SVGCSSEngine.FILL_RULE_INDEX:\n+            buildShape(ctx, e, (ShapeNode) node);\n+            handleGeometryChanged();\n+            break;\n+        default:\n+            super.handleCSSPropertyChanged(property);\n+        }\n+    }\n }",
                "deletions": 0
            },
            {
                "sha": "fcfc3c83e0419ba866bf2ad816808646981043dc",
                "filename": "sources/org/apache/batik/bridge/SVGPolylineElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGPolylineElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGPolylineElementBridge.java",
                "status": "modified",
                "changes": 13,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGPolylineElementBridge.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -53,6 +53,8 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n import java.awt.Shape;\n import java.awt.geom.GeneralPath;\n \n+import org.apache.batik.css.engine.CSSEngineEvent;\n+import org.apache.batik.css.engine.SVGCSSEngine;\n import org.apache.batik.gvt.ShapeNode;\n import org.apache.batik.parser.AWTPolylineProducer;\n import org.apache.batik.parser.ParseException;\n@@ -143,4 +145,15 @@ public void handleDOMAttrModifiedEvent(MutationEvent evt) {\n             super.handleDOMAttrModifiedEvent(evt);\n         }\n     }\n+\n+    protected void handleCSSPropertyChanged(int property) {\n+        switch(property) {\n+        case SVGCSSEngine.FILL_RULE_INDEX:\n+            buildShape(ctx, e, (ShapeNode) node);\n+            handleGeometryChanged();\n+            break;\n+        default:\n+            super.handleCSSPropertyChanged(property);\n+        }\n+    }\n }",
                "deletions": 0
            },
            {
                "sha": "a6504885d44b606b7f493112b7f38f2b8fe0b98c",
                "filename": "sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "status": "modified",
                "changes": 3,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGSVGElementBridge.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -253,9 +253,6 @@ public void buildGraphicsNode(BridgeContext ctx,\n \n         initializeDynamicSupport(ctx, e, node);\n \n-        // Handle children elements such as <title>\n-        //SVGUtilities.bridgeChildren(ctx, e);\n-        //super.buildGraphicsNode(ctx, e, node);\n         ctx.closeViewport(e);\n     }\n ",
                "deletions": 3
            },
            {
                "sha": "0e65abee0c079bcdc1ff2ec495b15f35887a3188",
                "filename": "sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "status": "modified",
                "changes": 7,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGTextElementBridge.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -251,9 +251,6 @@ public void buildGraphicsNode(BridgeContext ctx,\n         node.setPointerEventType(CSSUtilities.convertPointerEvents(e));\n \n         initializeDynamicSupport(ctx, e, node);\n-\n-        // Handle children elements such as <title>\n-        SVGUtilities.bridgeChildren(ctx, e);\n     }\n \n     /**\n@@ -2399,6 +2396,10 @@ protected float getComputedTextLength(Element e) {\n     protected float getSubStringLength(Element element,\n                                        int charnum, \n                                        int nchars){\n+        if (nchars == 0) {\n+            return 0;\n+        }\n+\n         float length = 0;\n \n         AttributedCharacterIterator aci;",
                "deletions": 3
            },
            {
                "sha": "edf6e1d56cd71e08894493d97b66983397092d5b",
                "filename": "sources/org/apache/batik/bridge/SVGUtilities.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGUtilities.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/bridge/SVGUtilities.java",
                "status": "modified",
                "changes": 27,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGUtilities.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -1140,31 +1140,4 @@ public static Rectangle2D toObjectBBox(Rectangle2D r,\n             return new Rectangle2D.Double();\n         }\n     }\n-\n-    /**\n-     * Scans the children of the input <tt>e</tt> element and\n-     * invokes any registered bridge found for the children.\n-     *\n-     * @param ctx active BridgeContext\n-     * @param e element to be scanned\n-     */\n-    public static void bridgeChildren(BridgeContext ctx,\n-                                      Element elt){\n-        for (Node n = elt.getFirstChild();\n-             n != null;\n-             n = n.getNextSibling()) {\n-\n-            if ((n.getNodeType() != Node.ELEMENT_NODE)) {\n-                continue;\n-            }\n-\n-            Element e = (Element)n;\n-            Bridge bridge = ctx.getBridge(e);\n-            if (bridge == null || !(bridge instanceof GenericBridge)) {\n-                continue;\n-            }\n-\n-            ((GenericBridge)bridge).handleElement(ctx, e);\n-        }\n-    }\n }",
                "deletions": 27
            },
            {
                "sha": "b4bcf658a357924d80e298b611bf4d57ee790497",
                "filename": "sources/org/apache/batik/dom/svg/AbstractSVGList.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/dom/svg/AbstractSVGList.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/dom/svg/AbstractSVGList.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/AbstractSVGList.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -265,7 +265,7 @@ protected SVGItem getItemImpl ( int index )\n         throws DOMException {\n         revalidate();\n \n-        if ( index < 0 || index >= itemList.size() ){\n+        if ( index < 0 || itemList == null || index >= itemList.size() ){\n             throw createDOMException(DOMException.INDEX_SIZE_ERR,\n                     \"AbstractSVGList.getItem.OutOfBoundsException\",\n                     null);",
                "deletions": 1
            },
            {
                "sha": "5c4c14c7a088bb21020ac5f14e452fd972083816",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMTextElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/dom/svg/SVGOMTextElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/dom/svg/SVGOMTextElement.java",
                "status": "modified",
                "changes": 44,
                "additions": 44,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMTextElement.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -51,7 +51,9 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n package org.apache.batik.dom.svg;\n \n import org.apache.batik.dom.AbstractDocument;\n+import org.apache.batik.util.SVGConstants;\n import org.w3c.dom.Node;\n+import org.w3c.dom.svg.SVGAnimatedLengthList;\n import org.w3c.dom.svg.SVGAnimatedTransformList;\n import org.w3c.dom.svg.SVGElement;\n import org.w3c.dom.svg.SVGException;\n@@ -69,6 +71,10 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n     extends    SVGOMTextPositioningElement\n     implements SVGTextElement {\n \n+    // Default values for attributes on a text element\n+    public static final String X_DEFAULT_VALUE = \"0\";\n+    public static final String Y_DEFAULT_VALUE = \"0\";\n+\n     /**\n      * Creates a new SVGOMTextElement object.\n      */\n@@ -156,4 +162,42 @@ public SVGAnimatedTransformList getTransform() {\n     protected Node newNode() {\n         return new SVGOMTextElement();\n     }\n+\n+    // SVGTextPositioningElement support ////////////////////////////////////\n+\n+    /**\n+     * <b>DOM</b>: Implements {@link\n+     * org.w3c.dom.svg.SVGTextPositioningElement#getX()}.\n+     */\n+    public SVGAnimatedLengthList getX() {\n+        SVGOMAnimatedLengthList result = (SVGOMAnimatedLengthList)\n+            getLiveAttributeValue(null, SVGConstants.SVG_X_ATTRIBUTE);\n+        if (result == null) {\n+            result = new SVGOMAnimatedLengthList(this, null,\n+                                                 SVGConstants.SVG_X_ATTRIBUTE,\n+                                                 X_DEFAULT_VALUE,\n+                                                 AbstractSVGLength.HORIZONTAL_LENGTH);\n+            putLiveAttributeValue(null,\n+                                  SVGConstants.SVG_X_ATTRIBUTE, result);\n+        }\n+        return result;\n+    }\n+\n+    /**\n+     * <b>DOM</b>: Implements {@link\n+     * org.w3c.dom.svg.SVGTextPositioningElement#getY()}.\n+     */\n+    public SVGAnimatedLengthList getY() {\n+        SVGOMAnimatedLengthList result = (SVGOMAnimatedLengthList)\n+            getLiveAttributeValue(null, SVGConstants.SVG_Y_ATTRIBUTE);\n+        if (result == null) {\n+            result = new SVGOMAnimatedLengthList(this, null,\n+                                                 SVGConstants.SVG_Y_ATTRIBUTE,\n+                                                 Y_DEFAULT_VALUE,\n+                                                 AbstractSVGLength.VERTICAL_LENGTH);\n+            putLiveAttributeValue(null,\n+                                  SVGConstants.SVG_Y_ATTRIBUTE, result);\n+        }\n+        return result;\n+    }\n }",
                "deletions": 0
            },
            {
                "sha": "19187077bf818a13fa98440a1e27cd0bf361453f",
                "filename": "sources/org/apache/batik/dom/svg/SVGStylableElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/dom/svg/SVGStylableElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/dom/svg/SVGStylableElement.java",
                "status": "modified",
                "changes": 9,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGStylableElement.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -542,7 +542,7 @@ public void attrRemoved(Attr node, String oldv) {\n         extends CSSOMSVGStyleDeclaration\n         implements LiveAttributeValue,\n                    CSSOMSVGStyleDeclaration.ValueProvider,\n-                   CSSOMSVGStyleDeclaration.ModificationHandler, \n+                   CSSOMSVGStyleDeclaration.ModificationHandler,\n                    CSSEngine.MainPropertyReceiver {\n         \n         /**\n@@ -710,10 +710,3 @@ public void propertyChanged(String name, String value, String prio)\n         }\n     }\n }\n-\n-\n-\n-\n-\n-\n-",
                "deletions": 8
            },
            {
                "sha": "59e84477f6db8d7b82fcb0095f07161150ab1ee8",
                "filename": "sources/org/apache/batik/extension/svg/BatikBridgeExtension.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/extension/svg/BatikBridgeExtension.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/extension/svg/BatikBridgeExtension.java",
                "status": "modified",
                "changes": 12,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/extension/svg/BatikBridgeExtension.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -56,6 +56,7 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n \n import org.apache.batik.bridge.BridgeContext;\n import org.apache.batik.bridge.BridgeExtension;\n+import org.w3c.dom.Element;\n \n /**\n  * This is a Service interface for classes that want to extend the\n@@ -143,4 +144,15 @@ public void registerTags(BridgeContext ctx) {\n         ctx.putBridge(new ColorSwitchBridge());\n         ctx.putBridge(new SVGFlowTextElementBridge());\n     }\n+\n+    /**\n+     * Whether the presence of the specified element should cause\n+     * the document to be dynamic.  If this element isn't handled\n+     * by this BridgeExtension, just return false.\n+     *\n+     * @param e The element to check.\n+     */\n+    public boolean isDynamicElement(Element e) {\n+        return false;\n+    }\n }",
                "deletions": 0
            },
            {
                "sha": "d78dfe87921bb108420f243bafc8a6131c70d5c5",
                "filename": "sources/org/apache/batik/swing/JSVGCanvas.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/swing/JSVGCanvas.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/bb38ef825c3fa978a88361367b77d8e9d386ac0e/sources/org/apache/batik/swing/JSVGCanvas.java",
                "status": "modified",
                "changes": 57,
                "additions": 54,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/swing/JSVGCanvas.java?ref=bb38ef825c3fa978a88361367b77d8e9d386ac0e",
                "patch": "@@ -784,6 +784,16 @@ public boolean startInteraction(InputEvent ie) {\n         final String TOOLTIP_TITLE_AND_TEXT\n             = \"JSVGCanvas.CanvasUserAgent.ToolTip.titleAndDesc\";\n \n+        /**\n+         * The time of the last tool tip event.\n+         */\n+        protected long lastToolTipEventTimeStamp;\n+\n+        /**\n+         * The target for which the last tool tip event was fired.\n+         */\n+        protected EventTarget lastToolTipEventTarget;\n+\n         /**\n          * The handleElement method builds a tool tip from the\n          * content of a &lt;title&gt; element, a &lt;desc&gt;\n@@ -811,6 +821,12 @@ public void handleElement(Element elt, Object data){\n             if (!SVGConstants.SVG_NAMESPACE_URI.equals(elt.getNamespaceURI()))\n                 return;\n \n+            // Don't handle tool tips for the root SVG element.\n+            if (elt.getParentNode() == \n+                    elt.getOwnerDocument().getDocumentElement()) {\n+                return;\n+            }\n+\n             if (elt.getLocalName().equals(SVGConstants.SVG_TITLE_TAG)) {\n                 // If there is a <desc> peer, do nothing as the tooltip will\n                 // be handled when handleElement is invoked for the <desc>\n@@ -941,12 +957,12 @@ public void setToolTip(Element elt, String toolTip){\n \n             // On mouseover, set the tooltip to the title value\n             target.addEventListener(SVGConstants.SVG_EVENT_MOUSEOVER,\n-                                    new ToolTipModifier(toolTip),\n+                                    new ToolTipModifier(toolTip, this),\n                                     false);\n \n             // On mouseout, remove the tooltip\n             target.addEventListener(SVGConstants.SVG_EVENT_MOUSEOUT,\n-                                    new ToolTipModifier(null),\n+                                    new ToolTipModifier(null, this),\n                                     false);\n \n             if (locationListener == null) {\n@@ -985,6 +1001,23 @@ public void displayError(Exception ex) {\n                 dialog.show(); // Safe to be called from any thread\n             }\n         }\n+\n+        /**\n+         * Sets the time and element of the last tool tip event handled.\n+         */\n+        public void setLastToolTipEvent(long t, EventTarget et) {\n+            lastToolTipEventTimeStamp = t;\n+            lastToolTipEventTarget = et;\n+        }\n+\n+        /**\n+         * Checks if the specified event time and element are the same\n+         * as the last tool tip event.\n+         */\n+        public boolean matchLastToolTipEvent(long t, EventTarget et) {\n+            return lastToolTipEventTimeStamp == t\n+                && lastToolTipEventTarget == et;\n+        }\n     }\n \n     // ----------------------------------------------------------------------\n@@ -1028,15 +1061,33 @@ public int getLastY() {\n          */\n         protected String toolTip;\n \n+        /**\n+         * The CanvasUserAgent used to track the last tool tip event.\n+         */\n+        protected CanvasUserAgent canvasUserAgent;\n+\n         /**\n          * @param toolTip value to which the JSVGCanvas should be\n          *        set when the event occurs.\n+         * @param cua the CanvasUserAgent which will be used to track\n+         *        the last tool tip event.\n          */\n-        public ToolTipModifier(String toolTip){\n+        public ToolTipModifier(String toolTip, CanvasUserAgent cua) {\n             this.toolTip = toolTip;\n+            canvasUserAgent = cua;\n         }\n \n         public void handleEvent(Event evt){\n+            // Don't set the tool tip if another ToolTipModifier\n+            // has already handled this event (as it will have been\n+            // a higher priority tool tip).\n+            if (canvasUserAgent.matchLastToolTipEvent(evt.getTimeStamp(),\n+                                                     evt.getTarget())) {\n+                return;\n+            }\n+            canvasUserAgent.setLastToolTipEvent(evt.getTimeStamp(), \n+                                                evt.getTarget());\n+\n             EventQueue.invokeLater(new Runnable() {\n                     public void run() {\n                         setToolTipText(toolTip);",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "- bug fix in CompositeShapePainter (fix the first NullPointerException\nfor the first document).\n\n- bug fix for the window size. The document's size was computed using\nthe svg root element's dimension. The bug appears when external\n<image> element where used (anothe root svg element was found and the\ndocument's size was updated). Now, the size of the document is the\noutermost svg of the original document.\n\nPR:\nObtained from:\nSubmitted by:\nReviewed by:\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@199587 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/5f941b8879c1189c11f1ce30b87500a042ad46cb",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/cd643f8ddbf48cadd5b9b0d53ebed7e97bc78e05",
        "bug_id": "xmlgraphics-batik_49",
        "file": [
            {
                "sha": "3e541d675dcbef6ca9460acd8348f9d502b66945",
                "filename": "sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/5f941b8879c1189c11f1ce30b87500a042ad46cb/sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/5f941b8879c1189c11f1ce30b87500a042ad46cb/sources/org/apache/batik/bridge/SVGSVGElementBridge.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGSVGElementBridge.java?ref=5f941b8879c1189c11f1ce30b87500a042ad46cb",
                "patch": "@@ -129,7 +129,10 @@ public GraphicsNode createGraphicsNode(BridgeContext ctx, Element e) {\n                 }\n             }\n         } else {\n-            ctx.setDocumentSize(new Dimension((int)w, (int)h));\n+            // <!> FIXME: hack to compute the original document's size\n+            if (ctx.getDocumentSize() == null) {\n+                ctx.setDocumentSize(new Dimension((int)w, (int)h));\n+            }\n             clip = new Rectangle2D.Float(x, y, w, h);\n         }\n ",
                "deletions": 1
            },
            {
                "sha": "0b0ed6cbf2b8e3870465387e290d37534b4d13a8",
                "filename": "sources/org/apache/batik/bridge/ViewBox.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/5f941b8879c1189c11f1ce30b87500a042ad46cb/sources/org/apache/batik/bridge/ViewBox.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/5f941b8879c1189c11f1ce30b87500a042ad46cb/sources/org/apache/batik/bridge/ViewBox.java",
                "status": "modified",
                "changes": 3,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/ViewBox.java?ref=5f941b8879c1189c11f1ce30b87500a042ad46cb",
                "patch": "@@ -78,7 +78,6 @@ public static AffineTransform getPreserveAspectRatioTransform(Element e,\n \n         String aspectRatio\n             = e.getAttributeNS(null, SVG_PRESERVE_ASPECT_RATIO_ATTRIBUTE);\n-\n         return getPreserveAspectRatioTransform(e, viewBox, aspectRatio, w, h);\n     }\n \n@@ -180,7 +179,7 @@ AffineTransform getPreserveAspectRatioTransform(Element e,\n         implements PreserveAspectRatioHandler {\n \n         public short align;\n-        public boolean meet;\n+        public boolean meet = true;\n \n         /**\n          * Invoked when the PreserveAspectRatio parsing starts.",
                "deletions": 2
            },
            {
                "sha": "f870406637e4d7032eb4471749477c33eb0df3bb",
                "filename": "sources/org/apache/batik/gvt/CompositeShapePainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/5f941b8879c1189c11f1ce30b87500a042ad46cb/sources/org/apache/batik/gvt/CompositeShapePainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/5f941b8879c1189c11f1ce30b87500a042ad46cb/sources/org/apache/batik/gvt/CompositeShapePainter.java",
                "status": "modified",
                "changes": 11,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/CompositeShapePainter.java?ref=5f941b8879c1189c11f1ce30b87500a042ad46cb",
                "patch": "@@ -85,13 +85,18 @@ public void paint(Graphics2D g2d,\n      */\n     public Shape getPaintedArea(GraphicsNodeRenderContext rc){\n         // <!> FIX ME: Use of GeneralPath is a work around Area problems.\n-        GeneralPath paintedArea = new GeneralPath();\n         if (painters != null) {\n+            GeneralPath paintedArea = new GeneralPath();\n             for (int i=0; i < count; ++i) {\n-                paintedArea.append(painters[i].getPaintedArea(rc), false);\n+                Shape s = painters[i].getPaintedArea(rc);\n+                if (s != null) {\n+                    paintedArea.append(s, false);\n+                }\n             }\n+            return paintedArea;\n+        } else {\n+            return null;\n         }\n-        return paintedArea;\n     }\n \n     /**",
                "deletions": 3
            },
            {
                "sha": "6e6b645d0121d31b17c2c7e4cdde3971ae3bed27",
                "filename": "sources/org/apache/batik/gvt/StrokeShapePainter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/5f941b8879c1189c11f1ce30b87500a042ad46cb/sources/org/apache/batik/gvt/StrokeShapePainter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/5f941b8879c1189c11f1ce30b87500a042ad46cb/sources/org/apache/batik/gvt/StrokeShapePainter.java",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/StrokeShapePainter.java?ref=5f941b8879c1189c11f1ce30b87500a042ad46cb",
                "patch": "@@ -36,7 +36,7 @@\n     /**\n      * Constructs a new <tt>ShapePainter</tt> that can be used to draw\n      * the outline of a <tt>Shape</tt>.\n-     * \n+     *\n      * @param shape shape to be painted by this painter. Should not be null.\n      */\n     public StrokeShapePainter(Shape shape) {\n@@ -91,7 +91,7 @@ public Shape getPaintedArea(GraphicsNodeRenderContext rc){\n         if(paint != null && stroke != null){\n             return stroke.createStrokedShape(shape);\n         } else {\n-            return shape;\n+            return null;\n         }\n     }\n ",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Fixed NPE in RectListManager when the rect list was empty.\n2) FePointLightElement now returns the Z attribute not Y when appropriate.\n3) The glyph element's d attribute now uses the winding-rule property value\n   from the text element not from the glyph element (as per the SVG\n   specification)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@201321 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/2fcac4c3828a56f09070673659da147ddf47aad8",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/0a5a8102897a5b2cf5afc528c5962a83ab3a671d",
        "bug_id": "xmlgraphics-batik_50",
        "file": [
            {
                "sha": "2339f55853b9ab209087518d68fe68a4f685ded8",
                "filename": "sources/org/apache/batik/bridge/SVGGlyphElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/2fcac4c3828a56f09070673659da147ddf47aad8/sources/org/apache/batik/bridge/SVGGlyphElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/2fcac4c3828a56f09070673659da147ddf47aad8/sources/org/apache/batik/bridge/SVGGlyphElementBridge.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGGlyphElementBridge.java?ref=2fcac4c3828a56f09070673659da147ddf47aad8",
                "patch": "@@ -126,7 +126,8 @@ public Glyph createGlyph(BridgeContext ctx,\n         Shape dShape = null;\n         if (d.length() != 0) {\n             AWTPathProducer app = new AWTPathProducer();\n-            app.setWindingRule(CSSUtilities.convertFillRule(glyphElement));\n+            // Glyph is supposed to use properties from text element.\n+            app.setWindingRule(CSSUtilities.convertFillRule(textElement));\n             try {\n                 PathParser pathParser = new PathParser();\n                 pathParser.setPathHandler(app);",
                "deletions": 1
            },
            {
                "sha": "45b6cce742addd3ec218ae39c7f265db6f0ae417",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMFEPointLightElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/2fcac4c3828a56f09070673659da147ddf47aad8/sources/org/apache/batik/dom/svg/SVGOMFEPointLightElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/2fcac4c3828a56f09070673659da147ddf47aad8/sources/org/apache/batik/dom/svg/SVGOMFEPointLightElement.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMFEPointLightElement.java?ref=2fcac4c3828a56f09070673659da147ddf47aad8",
                "patch": "@@ -106,7 +106,7 @@ public SVGAnimatedNumber getY() {\n      * <b>DOM</b>: Implements {@link SVGFEPointLightElement#getZ()}.\n      */\n     public SVGAnimatedNumber getZ() {\n-        return getAnimatedNumberAttribute(null, SVG_Y_ATTRIBUTE, 0f);\n+        return getAnimatedNumberAttribute(null, SVG_Z_ATTRIBUTE, 0f);\n     }\n \n     /**",
                "deletions": 1
            },
            {
                "sha": "245f04ba80d3e711043cab987251d4653d88b40e",
                "filename": "sources/org/apache/batik/ext/awt/geom/RectListManager.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/2fcac4c3828a56f09070673659da147ddf47aad8/sources/org/apache/batik/ext/awt/geom/RectListManager.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/2fcac4c3828a56f09070673659da147ddf47aad8/sources/org/apache/batik/ext/awt/geom/RectListManager.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/geom/RectListManager.java?ref=2fcac4c3828a56f09070673659da147ddf47aad8",
                "patch": "@@ -618,6 +618,7 @@ public void add(RectListManager rlm) {\n     }\n \n     public void mergeRects(int overhead, int lineOverhead) {\n+        if (size == 0) return;\n         Rectangle r, cr, mr;\n         int cost1, cost2, cost3;\n         mr = new Rectangle();\n@@ -708,6 +709,7 @@ public void mergeRects(int overhead, int lineOverhead) {\n         }\n         size = j;\n         r = getBounds();\n+        if (r == null) return;\n         if (overhead + (r.height*lineOverhead) + (r.height*r.width) < area) {\n             rects[0] = r;\n             size=1;",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "- prevent SVGClip.java from throwing an NPE when the Shape converted by\n  SVGShape.java returns null.\n- when a null value is used for KEY_RENDERING is should produce the same SVG\n  file as for the default value.\n- SVGShape was wrapping the shape in parameter into a GeneralPath instance.\n  It is not necessary => remove it to speed a little bit the generator.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@199987 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/c88a72e2cd44cda5c0e42bfc03414b68a183b426",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/c829d02118b0894ef608415e66471bb844e9bb99",
        "bug_id": "xmlgraphics-batik_51",
        "file": [
            {
                "sha": "2f5a0f3ef0a0ca413230896a58b5265e439cebe8",
                "filename": "sources/org/apache/batik/svggen/SVGClip.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/c88a72e2cd44cda5c0e42bfc03414b68a183b426/sources/org/apache/batik/svggen/SVGClip.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/c88a72e2cd44cda5c0e42bfc03414b68a183b426/sources/org/apache/batik/svggen/SVGClip.java",
                "status": "modified",
                "changes": 31,
                "additions": 20,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/svggen/SVGClip.java?ref=c88a72e2cd44cda5c0e42bfc03414b68a183b426",
                "patch": "@@ -77,15 +77,19 @@ public SVGClipDescriptor toSVG(Shape clip) {\n \n             if (clipDesc == null) {\n                 Element clipDef = clipToSVG(clip);\n-                clipPathAttrBuf.append(SIGN_POUND);\n-                clipPathAttrBuf.append(clipDef.getAttributeNS(null, ATTR_ID));\n-                clipPathAttrBuf.append(URL_SUFFIX);\n-\n-                clipDesc = new SVGClipDescriptor(clipPathAttrBuf.toString(),\n-                                                 clipDef);\n-\n-                descMap.put(clipKey, clipDesc);\n-                defSet.add(clipDef);\n+                if (clipDef == null)\n+                    clipDesc = NO_CLIP;\n+                else {\n+                    clipPathAttrBuf.append(SIGN_POUND);\n+                    clipPathAttrBuf.append(clipDef.getAttributeNS(null, ATTR_ID));\n+                    clipPathAttrBuf.append(URL_SUFFIX);\n+\n+                    clipDesc = new SVGClipDescriptor(clipPathAttrBuf.toString(),\n+                                                     clipDef);\n+\n+                    descMap.put(clipKey, clipDesc);\n+                    defSet.add(clipDef);\n+                }\n             }\n         } else\n             clipDesc = NO_CLIP;\n@@ -112,8 +116,13 @@ private Element clipToSVG(Shape clip) {\n                                idGenerator.generateID(ID_PREFIX_CLIP_PATH));\n \n         Element clipPath = shapeConverter.toSVG(clip);\n-        clipDef.appendChild(clipPath);\n-        return clipDef;\n+        // unfortunately it may be null because of SVGPath that may produce null\n+        // SVG elements.\n+        if (clipPath != null) {\n+            clipDef.appendChild(clipPath);\n+            return clipDef;\n+        } else\n+            return null; // what means the shape return null ?\n     }\n }\n ",
                "deletions": 11
            },
            {
                "sha": "319a70821295e0c5ce8aa255a436701ab1ad8d27",
                "filename": "sources/org/apache/batik/svggen/SVGPath.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/c88a72e2cd44cda5c0e42bfc03414b68a183b426/sources/org/apache/batik/svggen/SVGPath.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/c88a72e2cd44cda5c0e42bfc03414b68a183b426/sources/org/apache/batik/svggen/SVGPath.java",
                "status": "modified",
                "changes": 19,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/svggen/SVGPath.java?ref=c88a72e2cd44cda5c0e42bfc03414b68a183b426",
                "patch": "@@ -30,6 +30,7 @@\n  * than the default. Otherwise, the attribute would have\n  * to be specified in the majority of path elements.\n  *\n+ * @author <a href=\"mailto:cjolif@ilog.fr\">Christophe Jolif</a>\n  * @author <a href=\"mailto:vincent.hardy@eng.sun.com\">Vincent Hardy</a>\n  * @version $Id$\n  */\n@@ -47,17 +48,10 @@ public SVGPath(SVGGeneratorContext generatorContext) {\n      * @return a path Element.\n      */\n     public Element toSVG(Shape path) {\n-        // Convert input path to GeneralPath if necessary\n-        GeneralPath shape = null;\n-        if (path instanceof GeneralPath)\n-            shape = (GeneralPath)path;\n-        else\n-            shape = new GeneralPath(path);\n-\n         // Create the path element and process its\n         // d attribute.\n-        String dAttr = toSVGPathData(shape);\n-        if (dAttr==null || dAttr.trim().length() == 0){\n+        String dAttr = toSVGPathData(path);\n+        if (dAttr==null || dAttr.length() == 0){\n             // be careful not to append null to the DOM tree\n             // because it will crash\n             return null;\n@@ -69,18 +63,17 @@ public Element toSVG(Shape path) {\n         svgPath.setAttributeNS(null, SVG_D_ATTRIBUTE, dAttr);\n \n         // Set winding rule if different than SVG's default\n-        if(shape.getWindingRule() == GeneralPath.WIND_EVEN_ODD)\n+        if (path.getPathIterator(null).getWindingRule() == GeneralPath.WIND_EVEN_ODD)\n             svgPath.setAttributeNS(null, SVG_FILL_RULE_ATTRIBUTE, SVG_EVEN_ODD_VALUE);\n \n         return svgPath;\n-\n     }\n \n     /**\n      * @param path the GeneralPath to convert\n      * @return the value of the corresponding d attribute\n      */\n-    static String toSVGPathData(GeneralPath path) {\n+    static String toSVGPathData(Shape path) {\n         StringBuffer d = new StringBuffer(\"\");\n         PathIterator pi = path.getPathIterator(null);\n         float seg[] = new float[6];\n@@ -125,7 +118,7 @@ static String toSVGPathData(GeneralPath path) {\n     /**\n      * Appends a coordinate to the path data\n      */\n-    private static void appendPoint(StringBuffer d, float x, float y){\n+    private static void appendPoint(StringBuffer d, float x, float y) {\n         d.append(doubleString(x));\n         d.append(SPACE);\n         d.append(doubleString(y));",
                "deletions": 13
            },
            {
                "sha": "dc0844b4c25577dadf22cdc8a1fd829ee68d402a",
                "filename": "sources/org/apache/batik/svggen/SVGRenderingHints.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/c88a72e2cd44cda5c0e42bfc03414b68a183b426/sources/org/apache/batik/svggen/SVGRenderingHints.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/c88a72e2cd44cda5c0e42bfc03414b68a183b426/sources/org/apache/batik/svggen/SVGRenderingHints.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/svggen/SVGRenderingHints.java?ref=c88a72e2cd44cda5c0e42bfc03414b68a183b426",
                "patch": "@@ -55,7 +55,8 @@ public SVGDescriptor toSVG(GraphicContext gc){\n      * @return map Map of attribute values that describe the hints\n      */\n     public static SVGHintsDescriptor toSVG(RenderingHints hints){\n-        String colorInterpolation = SVG_SRGB_VALUE;\n+        // no hints should mean default\n+        String colorInterpolation = SVG_AUTO_VALUE;\n         String colorRendering = SVG_AUTO_VALUE;\n         String textRendering = SVG_AUTO_VALUE;\n         String shapeRendering = SVG_AUTO_VALUE;",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1.) TimeContainer: avoid creation of array, iterate directly\n2.) TimedElement: remove some Vectors\n3.) TextPathLayout: remove potential NPE\n4.) SegmentList: simplify, comment\n5.) PNGImageDecoder: fix some todos: simplify string-building\n6.) ForwardSeekableStream: drop use of markPos, share with super (members hiding members -> surprises waiting to come)\n7.) SeekableStream: comment about shared markPos\n8.) FlowRegions: dont make a Point\n9.) BidiAttributedCharacterIterator: iterating over entrySet is slighty better than iterating over keySet() and get()\n10.) Service: close the streams\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@522271 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/4e3776e76111bec70881e61af5577a533b4fe268",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/9e98614d49a0aa3815fff8d8db6bbe077eab56af",
        "bug_id": "xmlgraphics-batik_52",
        "file": [
            {
                "sha": "50aa136f0143c69996b35281b54dd8d3f7a46892",
                "filename": "sources/org/apache/batik/anim/timing/TimeContainer.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/anim/timing/TimeContainer.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/anim/timing/TimeContainer.java",
                "status": "modified",
                "changes": 10,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/anim/timing/TimeContainer.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -39,7 +39,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n      * Adds a {@link TimedElement} to this container.\n      */\n     public void addChild(TimedElement e) {\n-        if ( e == this ){\n+        if ( e == this ) {\n             throw new IllegalArgumentException(\"recursive datastructure not allowed here!\");\n         }\n         children.add(e);\n@@ -57,10 +57,10 @@ protected void setRoot(TimedElement e, TimedDocumentRoot root) {\n         e.root = root;\n         if (e instanceof TimeContainer) {\n             TimeContainer c = (TimeContainer) e;\n-            TimedElement[] es = c.getChildren();       // cameron: is there specific need to\n-            for (int i = 0; i < es.length; i++) {      // use c.getChildren() ?? I'd propose\n-                setRoot(es[i], root);                  // to iterate over c.children directly,\n-            }                                          // this avoids creating the array\n+            for( Iterator it = c.children.iterator(); it.hasNext(); ) {\n+                TimedElement te = (TimedElement)it.next();\n+                setRoot( te, root);\n+            }\n         }\n     }\n ",
                "deletions": 5
            },
            {
                "sha": "d1770f33880597353576a14aed38d962a3aed8ea",
                "filename": "sources/org/apache/batik/anim/timing/TimedElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/anim/timing/TimedElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/anim/timing/TimedElement.java",
                "status": "modified",
                "changes": 32,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/anim/timing/TimedElement.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -18,17 +18,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n  */\n package org.apache.batik.anim.timing;\n \n-import java.util.Calendar;\n-import java.util.Collections;\n-import java.util.HashMap;\n-import java.util.HashSet;\n-import java.util.Iterator;\n-import java.util.LinkedList;\n-import java.util.Locale;\n-import java.util.Map;\n-import java.util.MissingResourceException;\n-import java.util.Vector;\n-import java.util.Set;\n+import java.util.*;\n \n import org.apache.batik.anim.AnimationException;\n import org.apache.batik.i18n.LocalizableSupport;\n@@ -176,12 +166,12 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n     /**\n      * List of begin InstanceTimes.\n      */\n-    protected Vector beginInstanceTimes = new Vector();\n+    protected List beginInstanceTimes = new ArrayList();\n \n     /**\n      * List of end InstanceTimes.\n      */\n-    protected Vector endInstanceTimes = new Vector();\n+    protected List endInstanceTimes = new ArrayList();\n \n     /**\n      * The current Interval.\n@@ -226,7 +216,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n      * Map of {@link Event} objects to {@link HashSet}s of {@link\n      * TimingSpecifier}s that caught them.\n      */\n-    protected HashMap handledEvents = new HashMap();\n+    protected Map handledEvents = new HashMap();\n \n     /**\n      * Whether this timed element is currently being sampled.\n@@ -284,12 +274,12 @@ public float getSimpleTime() {\n     protected float addInstanceTime(InstanceTime time, boolean isBegin) {\n         // Trace.enter(this, \"addInstanceTime\", new Object[] { time, new Boolean(isBegin) } ); try {\n         hasPropagated = true;\n-        Vector instanceTimes = isBegin ? beginInstanceTimes : endInstanceTimes;\n+        List instanceTimes = isBegin ? beginInstanceTimes : endInstanceTimes;\n         int index = Collections.binarySearch(instanceTimes, time);\n         if (index < 0) {\n             index = -(index + 1);\n         }\n-        instanceTimes.insertElementAt(time, index);\n+        instanceTimes.add( index, time );\n         shouldUpdateCurrentInterval = true;\n         float ret;\n         if (root.isSampling() && !isSampling) {\n@@ -310,7 +300,7 @@ protected float addInstanceTime(InstanceTime time, boolean isBegin) {\n     protected float removeInstanceTime(InstanceTime time, boolean isBegin) {\n         // Trace.enter(this, \"removeInstanceTime\", new Object[] { time, new Boolean(isBegin) } ); try {\n         hasPropagated = true;\n-        Vector instanceTimes = isBegin ? beginInstanceTimes : endInstanceTimes;\n+        List instanceTimes = isBegin ? beginInstanceTimes : endInstanceTimes;\n         int index = Collections.binarySearch(instanceTimes, time);\n         for (int i = index; i >= 0; i--) {\n             InstanceTime it = (InstanceTime) instanceTimes.get(i);\n@@ -1292,7 +1282,7 @@ public void beginElement() {\n      * semantics allow it).\n      */\n     public void beginElement(float offset) {\n-        float t = root.convertWallclockTime(Calendar.getInstance());\n+        float t = root.convertWallclockTime( Calendar.getInstance());\n         InstanceTime it = new InstanceTime(null, t + offset, null, true);\n         addInstanceTime(it, true);\n     }\n@@ -1370,7 +1360,7 @@ protected void fireTimeEvent(String eventType, float time, int detail) {\n      * will be processed at the beginning of the next tick.\n      */\n     void eventOccurred(TimingSpecifier t, Event e) {\n-        HashSet ts = (HashSet) handledEvents.get(e);\n+        Set ts = (HashSet) handledEvents.get(e);\n         if (ts == null) {\n             ts = new HashSet();\n             handledEvents.put(e, ts);\n@@ -1492,9 +1482,9 @@ public AnimationException createException(String code, Object[] params) {\n         new LocalizableSupport(RESOURCES, TimedElement.class.getClassLoader());\n \n     /**\n-     * Implements {@link org.apache.batik.i18n.Localizable#setLocale(Locale)}.\n+     * Implements {@link org.apache.batik.i18n.Localizable#setLocale(java.util.Locale)}.\n      */\n-    public static void setLocale(Locale l) {\n+    public static void setLocale( Locale l) {\n         localizableSupport.setLocale(l);\n     }\n ",
                "deletions": 21
            },
            {
                "sha": "bab277749f7393fa215b1243fee16296979d9fdd",
                "filename": "sources/org/apache/batik/ext/awt/font/TextPathLayout.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/font/TextPathLayout.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/font/TextPathLayout.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/font/TextPathLayout.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -98,11 +98,14 @@ public static Shape layoutGlyphVector(GlyphVector glyphs,\n         GeneralPath newPath = new GeneralPath();\n         PathLength pl = new PathLength(path);\n         float pathLength = pl.lengthOfPath();\n+\n+        if ( glyphs == null ){\n+            return newPath;\n+        }\n         float glyphsLength = (float) glyphs.getVisualBounds().getWidth();\n \n         // return from the ugly cases\n         if (path == null ||\n-            glyphs == null ||\n             glyphs.getNumGlyphs() == 0 ||\n             pl.lengthOfPath() == 0f ||\n             glyphsLength == 0f) {",
                "deletions": 1
            },
            {
                "sha": "2d9992d42150f2ac4ed39356a15c1be8d805e90c",
                "filename": "sources/org/apache/batik/ext/awt/geom/SegmentList.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/geom/SegmentList.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/geom/SegmentList.java",
                "status": "modified",
                "changes": 41,
                "additions": 31,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/geom/SegmentList.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -106,51 +106,72 @@ public void add(Segment s) {\n \n     public SegmentList.SplitResults split(double y) {\n         Iterator iter = segments.iterator();\n-        SegmentList above = null;\n-        SegmentList below = null;\n+        SegmentList above = new SegmentList();\n+        SegmentList below = new SegmentList();\n         while (iter.hasNext()) {\n             Segment seg = (Segment)iter.next();\n             Segment.SplitResults results = seg.split(y);\n             if (results == null) {\n                 Rectangle2D bounds = seg.getBounds2D();\n                 if (bounds.getY() > y) {\n-                    if (below == null) below = new SegmentList();\n                     below.add(seg);\n                 } else if (bounds.getY() == y) {\n                     if (bounds.getHeight() != 0) {\n-                        if (below == null) below = new SegmentList();\n                         below.add(seg);\n                     }\n                 } else {\n-                    if (above == null) above = new SegmentList();\n                     above.add(seg);\n                 }\n                 continue;\n             }\n \n             Segment [] resAbove = results.getAbove();\n             for(int i=0; i<resAbove.length; i++) {\n-                if (above == null) above = new SegmentList();\n                 above.add(resAbove[i]);\n             }\n \n             Segment [] resBelow = results.getBelow();\n             for(int i=0; i<resBelow.length; i++) {\n-                if (below == null) below = new SegmentList();\n                 below.add(resBelow[i]);\n             }\n         }\n         return new SegmentList.SplitResults(above, below);\n     }\n \n+    /**\n+     * read-only helper class to represent a split-result.\n+     * So far, used only by FlowRegions.\n+     */\n     public static class SplitResults {\n-        SegmentList above, below;\n+\n+        /**\n+         * is <code>null</code>, when the list is empty.\n+         */\n+        final SegmentList above;\n+        final SegmentList below;\n+\n         public SplitResults(SegmentList above, SegmentList below) {\n-            this.above = above;\n-            this.below = below;\n+\n+            if ( above != null && above.size() > 0 ){\n+                this.above = above;\n+            } else {\n+                this.above = null;\n+            }\n+            if ( below != null && below.size() > 0 ){\n+                this.below = below;\n+            } else {\n+                this.below = null;\n+            }\n         }\n \n+        /**\n+         * @return the list of segments above some split-point - can be null\n+         */\n         public SegmentList getAbove() { return above; }\n+\n+        /**\n+         * @return the list of segments below some split-point - can be null\n+         */\n         public SegmentList getBelow() { return below; }\n     }\n }",
                "deletions": 10
            },
            {
                "sha": "a6a5837c4d55d0386179c6039e2e45ee9b6983de",
                "filename": "sources/org/apache/batik/ext/awt/image/codec/png/PNGImageDecoder.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/image/codec/png/PNGImageDecoder.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/image/codec/png/PNGImageDecoder.java",
                "status": "modified",
                "changes": 45,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/codec/png/PNGImageDecoder.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -1219,21 +1219,21 @@ private void parse_sRGB_chunk(PNGChunk chunk) {\n     }\n \n     private void parse_tEXt_chunk(PNGChunk chunk) {\n-        String key = \"\";   // todo simplify this\n-        String value = \"\"; // todo simplify this\n-        byte b;\n \n+        byte b;\n+        StringBuffer key = new StringBuffer();\n         int textIndex = 0;\n         while ((b = chunk.getByte(textIndex++)) != 0) {\n-            key += (char)b;\n+            key.append( (char)b );\n         }\n \n+        StringBuffer value= new StringBuffer();\n         for (int i = textIndex; i < chunk.getLength(); i++) {\n-            value += (char)chunk.getByte(i);\n+            value.append( (char)chunk.getByte(i) );\n         }\n \n-        textKeys.add(key);\n-        textStrings.add(value);\n+        textKeys.add(key.toString() );\n+        textStrings.add(value.toString() );\n     }\n \n     private void parse_tIME_chunk(PNGChunk chunk) {\n@@ -1338,16 +1338,16 @@ private void parse_tRNS_chunk(PNGChunk chunk) {\n     }\n \n     private void parse_zTXt_chunk(PNGChunk chunk) {\n-        String key = \"\";    // todo simplify this\n-        String value = \"\";  // todo simplify this\n-        byte b;\n \n         int textIndex = 0;\n+        StringBuffer key = new StringBuffer();\n+        byte b;\n         while ((b = chunk.getByte(textIndex++)) != 0) {\n-            key += (char)b;\n+            key.append( (char)b );\n         }\n         /* int method = */ chunk.getByte(textIndex++);\n \n+        StringBuffer value = new StringBuffer();\n         try {\n             int length = chunk.getLength() - textIndex;\n             byte[] data = chunk.getData();\n@@ -1357,11 +1357,11 @@ private void parse_zTXt_chunk(PNGChunk chunk) {\n \n             int c;\n             while ((c = iis.read()) != -1) {\n-                value += (char)c;\n+                value.append( (char)c );\n             }\n \n-            ztextKeys.add(key);\n-            ztextStrings.add(value);\n+            ztextKeys.add(key.toString() );\n+            ztextStrings.add(value.toString() );\n         } catch (Exception e) {\n             e.printStackTrace();\n         }\n@@ -1444,21 +1444,6 @@ private static void decodeAverageFilter(byte[] curr, byte[] prev,\n         }\n     }\n \n-    private static int paethPredictor(int a, int b, int c) {\n-        int p = a + b - c;\n-        int pa = Math.abs(p - a);\n-        int pb = Math.abs(p - b);\n-        int pc = Math.abs(p - c);\n-\n-        if ((pa <= pb) && (pa <= pc)) {\n-            return a;\n-        } else if (pb <= pc) {\n-            return b;\n-        } else {\n-            return c;\n-        }\n-    }\n-\n     private static void decodePaethFilter(byte[] curr, byte[] prev,\n                                           int count, int bpp) {\n         int raw, priorPixel, priorRow, priorRowPixel;\n@@ -1476,7 +1461,7 @@ private static void decodePaethFilter(byte[] curr, byte[] prev,\n             priorRow = prev[i] & 0xff;\n             priorRowPixel = prev[i - bpp] & 0xff;\n \n-            curr[i] = (byte)(raw + paethPredictor(priorPixel,\n+            curr[i] = (byte)(raw + PNGEncodeParam.paethPredictor(priorPixel,\n                                                   priorRow,\n                                                   priorRowPixel));\n         }",
                "deletions": 30
            },
            {
                "sha": "c6e21a86bcc7bacf14c90da5e615f7193ece1df0",
                "filename": "sources/org/apache/batik/ext/awt/image/codec/util/ForwardSeekableStream.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/image/codec/util/ForwardSeekableStream.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/image/codec/util/ForwardSeekableStream.java",
                "status": "modified",
                "changes": 13,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/codec/util/ForwardSeekableStream.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -36,9 +36,6 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n     /** The current position. */\n     long pointer = 0L;\n \n-    /** The marked position. */\n-    long markPos = -1L;\n-\n     /**\n      * Constructs a <code>InputStreamForwardSeekableStream</code> from a\n      * regular <code>InputStream</code>.\n@@ -82,13 +79,19 @@ public final void close() throws IOException {\n         src.close();\n     }\n \n-    /** Forwards the request to the real <code>InputStream</code>. */\n+    /**\n+     * Forwards the request to the real <code>InputStream</code>.\n+     * We use {@link SeekableStream#markPos}\n+     */\n     public final synchronized void mark(int readLimit) {\n         markPos = pointer;\n         src.mark(readLimit);\n     }\n \n-    /** Forwards the request to the real <code>InputStream</code>. */\n+    /**\n+     * Forwards the request to the real <code>InputStream</code>.\n+     * We use {@link SeekableStream#markPos}\n+     */\n     public final synchronized void reset() throws IOException {\n         if (markPos != -1) {\n             pointer = markPos;",
                "deletions": 5
            },
            {
                "sha": "f2ae2fe8c154ab39c274a2e5487d0df63503abbd",
                "filename": "sources/org/apache/batik/ext/awt/image/codec/util/SeekableStream.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/image/codec/util/SeekableStream.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/ext/awt/image/codec/util/SeekableStream.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/ext/awt/image/codec/util/SeekableStream.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -192,7 +192,7 @@ public static SeekableStream wrapInputStream(InputStream is,\n     // public int available) throws IOException\n     // public void close() throws IOException;\n \n-    /** Marked position */\n+    /** Marked position, shared by {@link ForwardSeekableStream} */\n     protected long markPos = -1L;\n \n     /**",
                "deletions": 1
            },
            {
                "sha": "b6623f3b2e1eae4ed4bfebd0367192b5bf6ca48b",
                "filename": "sources/org/apache/batik/gvt/flow/FlowRegions.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/gvt/flow/FlowRegions.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/gvt/flow/FlowRegions.java",
                "status": "modified",
                "changes": 8,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/flow/FlowRegions.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -19,12 +19,12 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n package org.apache.batik.gvt.flow;\n \n import java.awt.Shape;\n-import java.awt.geom.Point2D;\n import java.util.Iterator;\n import java.util.List;\n import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.Comparator;\n+\n import org.apache.batik.ext.awt.geom.SegmentList;\n import org.apache.batik.ext.awt.geom.Segment;\n \n@@ -75,7 +75,7 @@ public boolean gotoY(double y) {\n     public void newLineHeight(double lineHeight) {\n         this.lineHeight = lineHeight;\n         sr = sl.split(currentY+lineHeight);\n-        \n+\n         if (sr.getAbove() != null) {\n             sortRow(sr.getAbove());\n         }\n@@ -91,7 +91,7 @@ public void resetRange() {\n     }\n \n     public double [] nextRange() {\n-        if (currentRange >= validRanges.size()) \n+        if (currentRange >= validRanges.size())\n             return null;\n         return (double [])validRanges.get(currentRange++);\n     }\n@@ -156,7 +156,7 @@ public void sortRow(SegmentList sl) {\n                     double cx = (openStart + t.loc)/2;\n                     double cy = currentY + lineHeight/2;\n                     // System.err.println(\"PT: \" + cx+\", \"+cy);\n-                    if (flowShape.contains(new Point2D.Double(cx, cy))) {\n+                    if (flowShape.contains( cx, cy )) {\n                         validRanges.add(new double[]{openStart, t.loc});\n                     }\n                 }",
                "deletions": 4
            },
            {
                "sha": "54314820dc0424adcb97cb0917313a1790426aec",
                "filename": "sources/org/apache/batik/gvt/text/BidiAttributedCharacterIterator.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/gvt/text/BidiAttributedCharacterIterator.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/gvt/text/BidiAttributedCharacterIterator.java",
                "status": "modified",
                "changes": 9,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/text/BidiAttributedCharacterIterator.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -99,13 +99,14 @@ public BidiAttributedCharacterIterator(AttributedCharacterIterator aci,\n                 Map attrMap = aci.getAttributes();\n                 int extent  = aci.getRunLimit();\n                 Map destMap = new HashMap(attrMap.size());\n-                Iterator i  = attrMap.keySet().iterator();\n-                while (i.hasNext()) {\n+                Iterator it  = attrMap.entrySet().iterator();\n+                while (it.hasNext()) {\n                     // Font doesn't like getting attribute sets with\n                     // null keys or values so we strip them here.\n-                    Object key = i.next();\n+                    Map.Entry e = (Map.Entry)it.next();\n+                    Object key = e.getKey();\n                     if (key == null) continue;\n-                    Object value = attrMap.get(key);\n+                    Object value = e.getValue();\n                     if (value == null) continue;\n                     destMap.put(key, value);\n                 }",
                "deletions": 4
            },
            {
                "sha": "8fe7e1598db62e7e46d0dbe10adc92924c3aafd9",
                "filename": "sources/org/apache/batik/util/Service.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/util/Service.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/4e3776e76111bec70881e61af5577a533b4fe268/sources/org/apache/batik/util/Service.java",
                "status": "modified",
                "changes": 31,
                "additions": 27,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/util/Service.java?ref=4e3776e76111bec70881e61af5577a533b4fe268",
                "patch": "@@ -90,13 +90,16 @@ public static synchronized Iterator providers(Class cls) {\n         }\n \n         while (e.hasMoreElements()) {\n+            InputStream    is = null;\n+            Reader         r  = null;\n+            BufferedReader br = null;\n             try {\n                 URL u = (URL)e.nextElement();\n                 // System.out.println(\"URL: \" + u);\n \n-                InputStream    is = u.openStream();\n-                Reader         r  = new InputStreamReader(is, \"UTF-8\");\n-                BufferedReader br = new BufferedReader(r);\n+                is = u.openStream();\n+                r  = new InputStreamReader(is, \"UTF-8\");\n+                br = new BufferedReader(r);\n \n                 String line = br.readLine();\n                 while (line != null) {\n@@ -116,7 +119,7 @@ public static synchronized Iterator providers(Class cls) {\n                         }\n                         // System.out.println(\"Line: \" + line);\n \n-                        // Try and load the class \n+                        // Try and load the class\n                         Object obj = cl.loadClass(line).newInstance();\n                         // stick it into our vector...\n                         l.add(obj);\n@@ -129,6 +132,26 @@ public static synchronized Iterator providers(Class cls) {\n                 // Just try the next file...\n             } catch (LinkageError le) {\n                 // Just try the next file...\n+            } finally {\n+                // close and release all io-resources to avoid leaks\n+                if ( is != null ){\n+                    try {\n+                        is.close();\n+                    } catch ( IOException ignored ){}\n+                    is = null;\n+                }\n+                if ( r != null ){\n+                    try{\n+                        r.close();\n+                    } catch ( IOException ignored ){}\n+                    r = null;\n+                }\n+                if ( br == null ){\n+                    try{\n+                        br.close();\n+                    } catch ( IOException ignored ){}\n+                    br = null;\n+                }\n             }\n         }\n         return l.iterator();",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Fixed Build.bat for new jars\n2) Added NullURI test back, since lockup seems fixed(?),\n   unfortunately the fix was done in the JSVGCanvasHandler\n   (I was hoping this was tied to stopAndRun problem in Canvas).\n   Still has uncleared references but we should investigate these.\n3) Fixed NPE when reloading an SVG12 document quickly.\n4) Fixed Broken Link images when interrupting the load of an\n   SVG image refernce.\n5) Fixed reference images for new gradient interpolation.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@484993 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/0a9a1305ecc27b1bc522d53286342ea4c215805b",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/0cf53b157b2561429ae89a38ce4f906ac4ac33fa",
        "bug_id": "xmlgraphics-batik_53",
        "file": [
            {
                "sha": "90206309851ba4db79dfc5321530abd0405bca2c",
                "filename": "build.bat",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/build.bat",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/build.bat",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/build.bat?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "patch": "@@ -33,11 +33,12 @@ if not \"%ANT_HOME%\" == \"\" goto gotAntHome\n :: ----- Set Up The Runtime Classpath -----------------------------------------\r\n \r\n \r\n-set CP=%JAVA_HOME%\\lib\\tools.jar;lib\\build\\ant_1_4_1.jar;.\\lib\\build\\crimson-ant.jar;.\\lib\\build\\jaxp.jar\r\n+set CP=%JAVA_HOME%\\lib\\tools.jar;.\\lib\\build\\ant-1.6.5.jar;.\\lib\\build\\ant-launcher-1.6.5.jar;.\\lib\\build\\crimson-1.1.3.jar\r\n  \r\n \r\n :: ----- Execute The Requested Build ------------------------------------------\r\n \r\n+echo %JAVA_HOME%\\bin\\java.exe %ANT_OPTS% -classpath %CP% org.apache.tools.ant.Main -emacs -Dant.home=. %1 -Dargs=\"%2 %3 %4 %5 %6 %7 %8 %9\"\r\n %JAVA_HOME%\\bin\\java.exe %ANT_OPTS% -classpath %CP% org.apache.tools.ant.Main -emacs -Dant.home=. %1 -Dargs=\"%2 %3 %4 %5 %6 %7 %8 %9\"\r\n \r\n :: ----- Cleanup the environment ----------------------------------------------\r",
                "deletions": 1
            },
            {
                "sha": "db80e371cdedb620167b19def02b48ab9e795472",
                "filename": "sources/org/apache/batik/bridge/SVGImageElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/sources/org/apache/batik/bridge/SVGImageElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/sources/org/apache/batik/bridge/SVGImageElementBridge.java",
                "status": "modified",
                "changes": 14,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGImageElementBridge.java?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "patch": "@@ -26,6 +26,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n import java.awt.geom.Rectangle2D;\n import java.io.BufferedInputStream;\n import java.io.InputStream;\n+import java.io.InterruptedIOException;\n import java.io.IOException;\n import java.util.ArrayList;\n import java.util.List;\n@@ -50,8 +51,9 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n import org.apache.batik.gvt.ImageNode;\n import org.apache.batik.gvt.RasterImageNode;\n import org.apache.batik.gvt.ShapeNode;\n-import org.apache.batik.util.ParsedURL;\n+import org.apache.batik.util.HaltingThread;\n import org.apache.batik.util.MimeTypeConstants;\n+import org.apache.batik.util.ParsedURL;\n import org.apache.batik.util.XMLConstants;\n \n import org.w3c.dom.Document;\n@@ -264,6 +266,8 @@ protected GraphicsNode createImageGraphicsNode(BridgeContext ctx,\n             // Reset the stream for next try.\n             reference.retry();\n         } catch (IOException ioe) {\n+            reference.release(); \n+            reference = null;\n             try {\n                 // Couldn't reset stream so reopen it.\n                 reference = openStream(e, purl);\n@@ -286,6 +290,12 @@ protected GraphicsNode createImageGraphicsNode(BridgeContext ctx,\n         } catch (SecurityException ex) {\n             throw new BridgeException(ctx, e, ERR_URI_UNSECURE,\n                                       new Object[] {purl});\n+        } catch (InterruptedIOException iioe) {\n+            if (HaltingThread.hasBeenHalted()) \n+                throw new InterruptedBridgeException();\n+\n+        } catch (InterruptedBridgeException ibe) {\n+            throw ibe;\n         } catch (Exception ex) {\n             /* Nothing to do */\n             // ex.printStackTrace();\n@@ -294,6 +304,8 @@ protected GraphicsNode createImageGraphicsNode(BridgeContext ctx,\n         try {\n             reference.retry();\n         } catch (IOException ioe) {\n+            reference.release();\n+            reference = null;\n             try {\n                 // Couldn't reset stream so reopen it.\n                 reference = openStream(e, purl);",
                "deletions": 1
            },
            {
                "sha": "636f0d60a2a64f17b604ca0cafa3187bcf045afb",
                "filename": "sources/org/apache/batik/bridge/svg12/SVG12BridgeContext.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/sources/org/apache/batik/bridge/svg12/SVG12BridgeContext.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/sources/org/apache/batik/bridge/svg12/SVG12BridgeContext.java",
                "status": "modified",
                "changes": 11,
                "additions": 8,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/svg12/SVG12BridgeContext.java?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "patch": "@@ -43,6 +43,7 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n \n import org.w3c.dom.Document;\n import org.w3c.dom.Element;\n+import org.w3c.dom.Node;\n import org.w3c.dom.events.Event;\n import org.w3c.dom.events.EventListener;\n import org.w3c.dom.events.EventTarget;\n@@ -131,8 +132,6 @@ public void addGVTListener(Document doc) {\n      * Disposes this BridgeContext.\n      */\n     public void dispose() {\n-        AbstractNode n = (AbstractNode) document;\n-        XBLEventSupport es = (XBLEventSupport) n.initializeEventSupport();\n \n         childContexts.clear();\n         synchronized (eventListenerSet) {\n@@ -150,7 +149,13 @@ public void dispose() {\n                 }\n                 if (m instanceof ImplementationEventListenerMememto) {\n                     String ns = m.getNamespaceURI();\n-                    es.removeImplementationEventListenerNS(ns, t, el, uc);\n+                    Node nde = (Node)et;\n+                    AbstractNode n = (AbstractNode)nde.getOwnerDocument();\n+                    if (n != null) {\n+                        XBLEventSupport es;\n+                        es = (XBLEventSupport) n.initializeEventSupport();\n+                        es.removeImplementationEventListenerNS(ns, t, el, uc);\n+                    }\n                 } else if (in) {\n                     String ns = m.getNamespaceURI();\n                     et.removeEventListenerNS(ns, t, el, uc);",
                "deletions": 3
            },
            {
                "sha": "dcd31179e647129eb853e946abea97de881ad130",
                "filename": "test-references/org/apache/batik/transcoder/image/cssMediaProjection.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/image/cssMediaProjection.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/image/cssMediaProjection.png",
                "status": "added",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/org/apache/batik/transcoder/image/cssMediaProjection.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "8d4c8db29d7853aa0c9f4a5caf95aa814af0bcb5",
                "filename": "test-references/org/apache/batik/transcoder/wmf/black_shapes.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/wmf/black_shapes.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/wmf/black_shapes.svg",
                "status": "modified",
                "changes": 22,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/org/apache/batik/transcoder/wmf/black_shapes.svg?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "patch": "@@ -4,22 +4,22 @@\n <svg stroke-dasharray=\"none\" shape-rendering=\"auto\" xmlns=\"http://www.w3.org/2000/svg\" font-family=\"&apos;Arial&apos;\" width=\"960\" text-rendering=\"auto\" fill-opacity=\"1\" contentScriptType=\"text/ecmascript\" color-rendering=\"auto\" color-interpolation=\"auto\" preserveAspectRatio=\"xMidYMid meet\" font-size=\"12\" viewBox=\"0 0 960 720\" fill=\"black\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" stroke=\"black\" image-rendering=\"auto\" stroke-miterlimit=\"10\" zoomAndPan=\"magnify\" version=\"1.0\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" contentStyleType=\"text/css\" font-style=\"normal\" height=\"720\" stroke-width=\"1\" stroke-dashoffset=\"0\" font-weight=\"normal\" stroke-opacity=\"1\"\n ><!--Generated by the Batik Graphics2D SVG Generator--><defs id=\"genericDefs\"\n   /><g\n-  ><g fill=\"white\" stroke=\"white\" stroke-linejoin=\"round\" stroke-linecap=\"butt\"\n-    ><rect width=\"960\" x=\"0\" height=\"720\" y=\"0\" stroke=\"none\"\n+  ><g fill=\"white\" stroke-linejoin=\"round\" stroke-linecap=\"butt\" stroke=\"white\"\n+    ><rect x=\"0\" width=\"960\" height=\"720\" y=\"0\" stroke=\"none\"\n     /></g\n-    ><g font-size=\"0\" stroke-linecap=\"butt\" fill=\"rgb(255,255,153)\" stroke-linejoin=\"round\" stroke=\"rgb(255,255,153)\" stroke-width=\"0.6667\"\n-    ><rect width=\"484\" x=\"240.1667\" height=\"492.1667\" y=\"114.1667\" stroke=\"none\"\n-      /><rect x=\"240.1667\" y=\"114.1667\" fill=\"none\" width=\"484\" height=\"492.1667\" stroke=\"black\"\n-      /><rect x=\"240\" y=\"432\" fill=\"black\" width=\"483.8333\" height=\"173.5\" stroke=\"none\"\n+    ><g fill=\"rgb(255,255,153)\" font-size=\"0\" stroke-width=\"0.6667\" stroke=\"rgb(255,255,153)\" stroke-linejoin=\"round\" stroke-linecap=\"butt\"\n+    ><rect x=\"240.1667\" width=\"484\" height=\"492.1667\" y=\"114.1667\" stroke=\"none\"\n+      /><rect fill=\"none\" x=\"240.1667\" width=\"484\" height=\"492.1667\" y=\"114.1667\" stroke=\"black\"\n+      /><rect fill=\"black\" x=\"240\" width=\"483.8333\" height=\"173.5\" y=\"432\" stroke=\"none\"\n     /></g\n-    ><g stroke-linecap=\"butt\" fill=\"aqua\" font-family=\"&apos;monospaced&apos;\" stroke-linejoin=\"round\" stroke=\"aqua\" stroke-width=\"0.6667\"\n-    ><text xml:space=\"preserve\" x=\"678.3334\" y=\"491.5\" stroke=\"none\"\n+    ><g fill=\"aqua\" stroke-width=\"0.6667\" font-family=\"&apos;monospaced&apos;\" stroke=\"aqua\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n+    ><text x=\"678.3334\" xml:space=\"preserve\" y=\"491.5\" stroke=\"none\"\n       >20</text\n-      ><text x=\"624\" font-size=\"10\" y=\"522.5\" fill=\"rgb(255,102,255)\" stroke=\"none\" xml:space=\"preserve\"\n+      ><text fill=\"rgb(255,102,255)\" x=\"624\" xml:space=\"preserve\" font-size=\"10\" y=\"522.5\" stroke=\"none\"\n       >SHTZ</text\n-      ><text x=\"655.6667\" font-size=\"10\" y=\"522.5\" fill=\"rgb(255,102,255)\" stroke=\"none\" xml:space=\"preserve\"\n+      ><text fill=\"rgb(255,102,255)\" x=\"655.6667\" xml:space=\"preserve\" font-size=\"10\" y=\"522.5\" stroke=\"none\"\n       >1500 </text\n-      ><text x=\"687.3334\" font-size=\"10\" y=\"522.5\" fill=\"rgb(255,102,255)\" stroke=\"none\" xml:space=\"preserve\"\n+      ><text fill=\"rgb(255,102,255)\" x=\"687.3334\" xml:space=\"preserve\" font-size=\"10\" y=\"522.5\" stroke=\"none\"\n       >FT</text\n       ><path fill=\"lime\" d=\"M520 473.5 L524.8334 473.8333 L527.1667 474 L527.6667 471.1667 L524.8334 470.8333 L520 470.5 L515.1667 470.8333 L510.3333 471.5 L509.8333 471.5 L507.8333 472.1667 L508.5 475 L511 474.3333 L510.3333 473 L510.3333 474.5 L515.1667 473.8333 Z\" stroke=\"none\"\n       /><path fill=\"lime\" d=\"M500.3333 477.8333 L499 475.1667 L496.5 476.3333 L492.6667 478.8333 L492.1667 479.1667 L488.6667 481.8333 L490.5 484.1667 L494.3333 481.3333 L493.1667 480.1667 L493.8333 481.6667 L497.6667 479.1667 Z\" stroke=\"none\"",
                "deletions": 11
            },
            {
                "sha": "2be6fe8875414d52c69518e5604c9a922296cd46",
                "filename": "test-references/org/apache/batik/transcoder/wmf/imageWMF.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/wmf/imageWMF.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/wmf/imageWMF.svg",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/org/apache/batik/transcoder/wmf/imageWMF.svg?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "patch": "@@ -4,8 +4,8 @@\n <svg stroke-dasharray=\"none\" shape-rendering=\"auto\" xmlns=\"http://www.w3.org/2000/svg\" font-family=\"&apos;Arial&apos;\" width=\"960\" text-rendering=\"auto\" fill-opacity=\"1\" contentScriptType=\"text/ecmascript\" color-rendering=\"auto\" color-interpolation=\"auto\" preserveAspectRatio=\"xMidYMid meet\" font-size=\"12\" viewBox=\"0 0 960 720\" fill=\"black\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" stroke=\"black\" image-rendering=\"auto\" stroke-miterlimit=\"10\" zoomAndPan=\"magnify\" version=\"1.0\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" contentStyleType=\"text/css\" font-style=\"normal\" height=\"720\" stroke-width=\"1\" stroke-dashoffset=\"0\" font-weight=\"normal\" stroke-opacity=\"1\"\n ><!--Generated by the Batik Graphics2D SVG Generator--><defs id=\"genericDefs\"\n   /><g\n-  ><g fill=\"white\" stroke-width=\"0.4805\" stroke=\"white\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><rect width=\"492\" x=\"247\" height=\"150\" y=\"279\" stroke=\"none\"\n+  ><g fill=\"white\" stroke-width=\"0.4805\" stroke=\"white\" stroke-linejoin=\"round\" stroke-linecap=\"butt\"\n+    ><rect x=\"247\" width=\"492\" height=\"150\" y=\"279\" stroke=\"none\"\n       /><image x=\"247\" y=\"279\" width=\"492\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAewAAACWCAYAAAAc5LtzAAAgAElEQVR42u29PWwc\n ybIumNJtAVWABqg2LsBe4BltPIPySI801uAxFuB4lLGAaHI8yZOMXYyMa3CMBSRj\n AdEbmhxPNB4gGg84NJ5BeSSwC4jGPtw27gWawLtAN7AH6DK40FZUVnblT0RmZFY1",
                "deletions": 2
            },
            {
                "sha": "26276767b8a05ddfe6407fb7c3677297677752b3",
                "filename": "test-references/org/apache/batik/transcoder/wmf/testChart.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/wmf/testChart.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/wmf/testChart.svg",
                "status": "modified",
                "changes": 168,
                "additions": 84,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/org/apache/batik/transcoder/wmf/testChart.svg?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "patch": "@@ -5,216 +5,216 @@\n ><!--Generated by the Batik Graphics2D SVG Generator--><defs id=\"genericDefs\"\n   /><g\n   ><defs id=\"defs1\"\n-    ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern1\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+    ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern1\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAOklEQVR42o3NQQ4A\n IAgDwZb//1mFg4kK0j1PWgIYK3SZgkjCFORjpqC4VlAJb5TCDD2wQgf8oQ075E23\n tx8QKLvT2gAAAABJRU5ErkJggg==\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"10\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern2\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern2\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAH0lEQVR42mNkYGD4\n z0AEYAER//8TVsvEQCQYVYgXAADl9AQSAIUWgQAAAABJRU5ErkJggg==\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"10\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern3\" height=\"8\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern3\" height=\"8\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAM0lEQVR42m2OsQ0A\n QAgChf13Rho/5AOddwaFpLkAeCMnYmpXRDpkVXayUm+z0v9G/yqps266GwzTfgxK\n AAAAAElFTkSuQmCC\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"8\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern4\" height=\"8\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern4\" height=\"8\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAOklEQVR42mNgAIP/\n //9DSAgAshkZYADCBwkxggSZMEUROjBFUUxHNhPEhduGDIAi6HZA2IwQB2C1AwDv\n GDvbZ2CR/gAAAABJRU5ErkJggg==\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"8\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern5\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern5\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAASklEQVR42oXPUQoA\n IAgD0Ln737myEMRc+ekeNQ3AWIPf0JGZPZHnxHlSYt97zlh0OND+OgcZZ3TBjOuB\n VJ1qDapOFbNDXWcqVPEEfe80ExU5GvgAAAAASUVORK5CYII=\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"10\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern6\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern6\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAHklEQVR42mNkYGD4\n z0AEYPn/nyh1DEwMRIJRhXgBAPHoBBIyVomkAAAAAElFTkSuQmCC\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"10\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern7\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern7\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGklEQVR42mNkYGD4\n DwQMhAATA5FgVCF1FAIAXaYEEMKvnIEAAAAASUVORK5CYII=\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"10\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern8\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern8\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQUlEQVR42oXQSQoA\n MAgDwCT//3MXiiCijScto2gJYJ2AC11E0kO8kRYrEoeVix9WfZiwuu4Oa9qpYv0u\n zVju/wJvF2YfEFUgIOwAAAAASUVORK5CYII=\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"10\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern9\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern9\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQElEQVR42mP8z8Dw\n HwgJAiawIkZiFIIAEYqZ4CwCiplQeHgUM2GI4FDMhFU7FsVMOB2FppgJr1eRFDMR\n DECoYgBjXAwRld6/zwAAAABJRU5ErkJggg==\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"10\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern10\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern10\" height=\"10\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"10\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQUlEQVR42oXQSQoA\n MAgDwCT//3MXiiCijScto2gJYJ2AC11E0kO8kRYrEoeVix9WfZiwuu4Oa9qpYv0u\n zVju/wJvF2YfEFUgIOwAAAAASUVORK5CYII=\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"10\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern11\" height=\"8\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern11\" height=\"8\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAJklEQVR42mP8//8/\n AxgwMjIyIAFGuASKKCMjEwMOQLoEdjvIMgoAOSQJC7g1m/AAAAAASUVORK5CYII=\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"8\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n-      ><pattern x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" patternUnits=\"userSpaceOnUse\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" id=\"pattern12\" height=\"8\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n+      ><pattern x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:type=\"simple\" patternUnits=\"userSpaceOnUse\" xlink:actuate=\"onLoad\" id=\"pattern12\" height=\"8\" preserveAspectRatio=\"xMidYMid meet\" xlink:show=\"other\"\n       ><image x=\"0\" y=\"0\" width=\"8\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAJUlEQVR42mNgwAX+\n //+PVZwJlxwTLn1MuMxkwmUfEy63MOFyJwBK/hT4sr1A4wAAAABJRU5ErkJggg==\" xlink:type=\"simple\" xlink:actuate=\"onLoad\" height=\"8\" preserveAspectRatio=\"none\" xlink:show=\"embed\"\n       /></pattern\n     ></defs\n-    ><g stroke-width=\"1.5118\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><rect fill=\"none\" width=\"454.3748\" x=\"47.2441\" height=\"156.6992\" y=\"580.989\"\n-      /><rect fill=\"none\" width=\"451.9937\" x=\"549.2787\" height=\"156.6992\" y=\"580.989\"\n-      /><rect fill=\"none\" width=\"454.3748\" x=\"549.2787\" height=\"154.3181\" y=\"174.7654\"\n-      /><rect fill=\"none\" width=\"454.3748\" x=\"47.2441\" height=\"153.1086\" y=\"178.3181\"\n-      /><text font-size=\"63\" x=\"33.0315\" y=\"84.1701\" text-decoration=\"underline\" stroke=\"none\" font-weight=\"bold\" xml:space=\"preserve\"\n+    ><g stroke-linecap=\"butt\" stroke-linejoin=\"round\" stroke-width=\"1.5118\"\n+    ><rect fill=\"none\" x=\"47.2441\" width=\"454.3748\" height=\"156.6992\" y=\"580.989\"\n+      /><rect fill=\"none\" x=\"549.2787\" width=\"451.9937\" height=\"156.6992\" y=\"580.989\"\n+      /><rect fill=\"none\" x=\"549.2787\" width=\"454.3748\" height=\"154.3181\" y=\"174.7654\"\n+      /><rect fill=\"none\" x=\"47.2441\" width=\"454.3748\" height=\"153.1086\" y=\"178.3181\"\n+      /><text x=\"33.0315\" font-size=\"63\" y=\"84.1701\" text-decoration=\"underline\" stroke=\"none\" font-weight=\"bold\" xml:space=\"preserve\"\n       >Metafile Companion Test Chart</text\n     ></g\n     ><g font-size=\"26\" stroke-linecap=\"butt\" transform=\"translate(70.1858,185.4992)\" fill=\"white\" stroke-linejoin=\"round\" stroke=\"white\" font-weight=\"bold\" stroke-width=\"1.5118\"\n-    ><rect width=\"100\" x=\"0\" height=\"25\" y=\"-19\" stroke=\"none\"\n+    ><rect x=\"0\" width=\"100\" height=\"25\" y=\"-19\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-weight=\"bold\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"70.1858\" y=\"185.4992\" stroke=\"none\"\n+    ><text x=\"70.1858\" xml:space=\"preserve\" y=\"185.4992\" stroke=\"none\"\n       >Objects</text\n       ><rect x=\"0\" y=\"-19\" transform=\"translate(573.4677,185.4992)\" fill=\"white\" width=\"86\" height=\"20\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-weight=\"bold\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"573.4677\" y=\"185.4992\" stroke=\"none\"\n+    ><text x=\"573.4677\" xml:space=\"preserve\" y=\"185.4992\" stroke=\"none\"\n       >Colors</text\n       ><rect x=\"-1\" y=\"-19\" transform=\"translate(573.4677,591.7606)\" fill=\"white\" width=\"130\" height=\"20\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-weight=\"bold\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"573.4677\" y=\"591.7606\" stroke=\"none\"\n+    ><text x=\"573.4677\" xml:space=\"preserve\" y=\"591.7606\" stroke=\"none\"\n       >Advanced</text\n       ><rect x=\"1\" y=\"-19\" transform=\"translate(72.7559,591.6094)\" fill=\"white\" width=\"54\" height=\"20\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-weight=\"bold\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"72.7559\" y=\"591.6094\" stroke=\"none\"\n+    ><text x=\"72.7559\" xml:space=\"preserve\" y=\"591.6094\" stroke=\"none\"\n       >Fills</text\n-      ><line fill=\"none\" x1=\"70.1102\" x2=\"112.8945\" y1=\"278.9291\" y2=\"230.8535\" stroke-width=\"0.7559\"\n-      /><rect x=\"200.8063\" y=\"235.011\" fill=\"none\" width=\"42.1417\" height=\"39.7607\" stroke-width=\"0.7559\"\n-      /><ellipse fill=\"none\" rx=\"26.9858\" cx=\"295.1055\" ry=\"24.0189\" cy=\"256.6488\" stroke-width=\"0.7559\"\n+      ><line y2=\"230.8535\" fill=\"none\" stroke-width=\"0.7559\" x1=\"70.1102\" x2=\"112.8945\" y1=\"278.9291\"\n+      /><rect fill=\"none\" x=\"200.8063\" width=\"42.1417\" stroke-width=\"0.7559\" height=\"39.7607\" y=\"235.011\"\n+      /><ellipse rx=\"26.9858\" fill=\"none\" ry=\"24.0189\" stroke-width=\"0.7559\" cx=\"295.1055\" cy=\"256.6488\"\n     /></g\n     ><g font-size=\"26\" stroke-linecap=\"butt\" transform=\"translate(857.7512,672.0977) rotate(-20)\" fill=\"white\" stroke-linejoin=\"round\" stroke=\"white\" stroke-width=\"0.7559\"\n-    ><rect width=\"88\" x=\"2\" height=\"20\" y=\"-19\" stroke=\"none\"\n+    ><rect x=\"2\" width=\"88\" height=\"20\" y=\"-19\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" transform=\"matrix(0.9397,-0.342,0.342,0.9397,-216.0685,358.3464)\" stroke-linejoin=\"round\" stroke-linecap=\"butt\"\n-    ><text xml:space=\"preserve\" x=\"945.7512\" y=\"662.0977\" stroke=\"none\"\n+    ><text x=\"945.7512\" xml:space=\"preserve\" y=\"662.0977\" stroke=\"none\"\n       >Rotated</text\n     ></g\n     ><g font-size=\"26\" stroke-linecap=\"butt\" transform=\"translate(433.1717,263.3575)\" fill=\"white\" stroke-linejoin=\"round\" stroke=\"white\" stroke-width=\"0.7559\"\n-    ><rect width=\"51\" x=\"0\" height=\"20\" y=\"-19\" stroke=\"none\"\n+    ><rect x=\"0\" width=\"51\" height=\"20\" y=\"-19\" stroke=\"none\"\n     /></g\n-    ><g font-size=\"26\" stroke-width=\"0.7559\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"433.1717\" y=\"263.3575\" stroke=\"none\"\n+    ><g font-size=\"26\" stroke-width=\"0.7559\" stroke-linejoin=\"round\" stroke-linecap=\"butt\"\n+    ><text x=\"433.1717\" xml:space=\"preserve\" y=\"263.3575\" stroke=\"none\"\n       >Text</text\n-      ><path fill=\"silver\" stroke-width=\"0.0378\" d=\"M792.6047 679.7858 L830.4 625.3607 L866.6835 679.7858 ZM806.3622 673.5874 L829.6441 638.9669 L852.6236 673.5874 ZM818.3055 665.5748 L828.8882 649.852 L839.3197 665.5748 Z\" fill-rule=\"evenodd\" stroke=\"none\"\n-      /><path fill=\"none\" d=\"M792.6047 679.7858 L830.4 625.3607 L866.6835 679.7858 Z\" stroke-width=\"0.0378\"\n-      /><path fill=\"none\" d=\"M806.3622 673.5874 L829.6441 638.9669 L852.6236 673.5874 Z\" stroke-width=\"0.0378\"\n-      /><path fill=\"none\" d=\"M818.3055 665.5748 L828.8882 649.852 L839.3197 665.5748 Z\" stroke-width=\"0.0378\"\n+      ><path fill=\"silver\" d=\"M792.6047 679.7858 L830.4 625.3607 L866.6835 679.7858 ZM806.3622 673.5874 L829.6441 638.9669 L852.6236 673.5874 ZM818.3055 665.5748 L828.8882 649.852 L839.3197 665.5748 Z\" stroke-width=\"0.0378\" fill-rule=\"evenodd\" stroke=\"none\"\n+      /><path fill=\"none\" stroke-width=\"0.0378\" d=\"M792.6047 679.7858 L830.4 625.3607 L866.6835 679.7858 Z\"\n+      /><path fill=\"none\" stroke-width=\"0.0378\" d=\"M806.3622 673.5874 L829.6441 638.9669 L852.6236 673.5874 Z\"\n+      /><path fill=\"none\" stroke-width=\"0.0378\" d=\"M818.3055 665.5748 L828.8882 649.852 L839.3197 665.5748 Z\"\n       /><line fill=\"none\" x1=\"75.4772\" x2=\"174.0472\" y1=\"478.7906\" y2=\"478.7906\" stroke-dasharray=\"15.0857,6.0343,3.0171,6.0343,3.0171,6.0343\" stroke-width=\"0.0378\" stroke-miterlimit=\"45.2571\"\n       /><line fill=\"none\" x1=\"75.4772\" x2=\"174.0472\" y1=\"441.1465\" y2=\"441.1465\" stroke-dasharray=\"3.0171,15.0857\" stroke-width=\"0.0378\" stroke-miterlimit=\"30.1714\"\n-      /><line fill=\"none\" x1=\"74.1165\" x2=\"172.6866\" y1=\"403.5023\" y2=\"403.5023\" stroke-width=\"0.0378\"\n+      /><line y2=\"403.5023\" fill=\"none\" stroke-width=\"0.0378\" x1=\"74.1165\" x2=\"172.6866\" y1=\"403.5023\"\n       /><line fill=\"none\" x1=\"74.1165\" x2=\"172.6866\" y1=\"421.6441\" y2=\"421.6441\" stroke-dasharray=\"15.0857,6.0343\" stroke-width=\"0.0378\" stroke-miterlimit=\"30.1714\"\n       /><line fill=\"none\" x1=\"75.4772\" x2=\"174.0472\" y1=\"459.2882\" y2=\"459.2882\" stroke-dasharray=\"15.0857,6.0343,3.0171,6.0343\" stroke-width=\"0.0378\" stroke-miterlimit=\"30.1714\"\n       /><rect x=\"133.4929\" y=\"661.304\" fill=\"url(#pattern1)\" width=\"44.485\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"133.4929\" y=\"661.304\" fill=\"none\" width=\"44.485\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"133.4929\" width=\"44.485\" stroke-width=\"0.0378\" height=\"44.485\" y=\"661.304\"\n       /><rect x=\"191.3575\" y=\"661.304\" fill=\"url(#pattern2)\" width=\"44.485\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"191.3575\" y=\"661.304\" fill=\"none\" width=\"44.485\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"191.3575\" width=\"44.485\" stroke-width=\"0.0378\" height=\"44.485\" y=\"661.304\"\n       /><rect x=\"354.3685\" y=\"606.9921\" fill=\"url(#pattern3)\" width=\"44.485\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"354.3685\" y=\"606.9921\" fill=\"none\" width=\"44.485\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"354.3685\" width=\"44.485\" stroke-width=\"0.0378\" height=\"44.485\" y=\"606.9921\"\n       /><rect x=\"871.748\" y=\"232.6299\" fill=\"blue\" width=\"45.6567\" height=\"45.6567\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"871.748\" y=\"232.6299\" fill=\"none\" width=\"45.6567\" height=\"45.6567\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"871.748\" width=\"45.6567\" stroke-width=\"0.0378\" height=\"45.6567\" y=\"232.6299\"\n       /><rect x=\"815.0173\" y=\"232.6299\" fill=\"green\" width=\"44.5228\" height=\"45.6567\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"815.0173\" y=\"232.6299\" fill=\"none\" width=\"44.5228\" height=\"45.6567\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"815.0173\" width=\"44.5228\" stroke-width=\"0.0378\" height=\"45.6567\" y=\"232.6299\"\n       /><rect x=\"411.0614\" y=\"606.9921\" fill=\"url(#pattern4)\" width=\"49.2095\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"411.0614\" y=\"606.9921\" fill=\"none\" width=\"49.2095\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"411.0614\" width=\"49.2095\" stroke-width=\"0.0378\" height=\"44.485\" y=\"606.9921\"\n       /><rect x=\"248.0504\" y=\"661.304\" fill=\"url(#pattern5)\" width=\"45.6945\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"248.0504\" y=\"661.304\" fill=\"none\" width=\"45.6945\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"248.0504\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"44.485\" y=\"661.304\"\n       /><rect x=\"929.6126\" y=\"232.6299\" fill=\"yellow\" width=\"45.6945\" height=\"45.6567\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"929.6126\" y=\"232.6299\" fill=\"none\" width=\"45.6945\" height=\"45.6567\" stroke-width=\"0.0378\"\n-      /><line fill=\"none\" x1=\"228.4724\" x2=\"327.0425\" y1=\"439.937\" y2=\"439.937\" stroke-width=\"4.5354\"\n-      /><line fill=\"none\" x1=\"227.1118\" x2=\"325.6819\" y1=\"402.2929\" y2=\"402.2929\" stroke-width=\"0.0378\"\n-      /><line fill=\"none\" x1=\"227.1118\" x2=\"325.6819\" y1=\"420.4346\" y2=\"420.4346\" stroke-width=\"2.2677\"\n-      /><line fill=\"none\" x1=\"228.4724\" x2=\"327.0425\" y1=\"458.0787\" y2=\"458.0787\" stroke-width=\"6.8031\"\n-      /><line fill=\"none\" x1=\"228.4724\" x2=\"327.0425\" y1=\"477.5811\" y2=\"477.5811\" stroke-width=\"9.0709\"\n-      /><rect x=\"133.4929\" y=\"606.9921\" fill=\"none\" width=\"44.485\" height=\"44.485\" stroke-width=\"0.0378\"\n-      /><rect x=\"75.5906\" y=\"606.9921\" width=\"45.6945\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"75.5906\" y=\"606.9921\" fill=\"none\" width=\"45.6945\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"929.6126\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"45.6567\" y=\"232.6299\"\n+      /><line y2=\"439.937\" fill=\"none\" stroke-width=\"4.5354\" x1=\"228.4724\" x2=\"327.0425\" y1=\"439.937\"\n+      /><line y2=\"402.2929\" fill=\"none\" stroke-width=\"0.0378\" x1=\"227.1118\" x2=\"325.6819\" y1=\"402.2929\"\n+      /><line y2=\"420.4346\" fill=\"none\" stroke-width=\"2.2677\" x1=\"227.1118\" x2=\"325.6819\" y1=\"420.4346\"\n+      /><line y2=\"458.0787\" fill=\"none\" stroke-width=\"6.8031\" x1=\"228.4724\" x2=\"327.0425\" y1=\"458.0787\"\n+      /><line y2=\"477.5811\" fill=\"none\" stroke-width=\"9.0709\" x1=\"228.4724\" x2=\"327.0425\" y1=\"477.5811\"\n+      /><rect fill=\"none\" x=\"133.4929\" width=\"44.485\" stroke-width=\"0.0378\" height=\"44.485\" y=\"606.9921\"\n+      /><rect x=\"75.5906\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"44.485\" y=\"606.9921\" stroke=\"none\"\n+      /><rect fill=\"none\" x=\"75.5906\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"44.485\" y=\"606.9921\"\n       /><rect x=\"191.3575\" y=\"606.9921\" fill=\"url(#pattern6)\" width=\"44.485\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"191.3575\" y=\"606.9921\" fill=\"none\" width=\"44.485\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"191.3575\" width=\"44.485\" stroke-width=\"0.0378\" height=\"44.485\" y=\"606.9921\"\n       /><rect x=\"248.0504\" y=\"606.9921\" fill=\"url(#pattern7)\" width=\"45.6945\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"248.0504\" y=\"606.9921\" fill=\"none\" width=\"45.6945\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"248.0504\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"44.485\" y=\"606.9921\"\n       /><rect x=\"639.0425\" y=\"232.6299\" fill=\"white\" width=\"44.485\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"639.0425\" y=\"232.6299\" fill=\"none\" width=\"44.485\" height=\"44.485\" stroke-width=\"0.0378\"\n-      /><rect x=\"581.1401\" y=\"232.6299\" width=\"45.6945\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"581.1401\" y=\"232.6299\" fill=\"none\" width=\"45.6945\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"639.0425\" width=\"44.485\" stroke-width=\"0.0378\" height=\"44.485\" y=\"232.6299\"\n+      /><rect x=\"581.1401\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"44.485\" y=\"232.6299\" stroke=\"none\"\n+      /><rect fill=\"none\" x=\"581.1401\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"44.485\" y=\"232.6299\"\n       /><rect x=\"696.9071\" y=\"232.6299\" fill=\"gray\" width=\"44.5228\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"696.9071\" y=\"232.6299\" fill=\"none\" width=\"44.5228\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"696.9071\" width=\"44.5228\" stroke-width=\"0.0378\" height=\"44.485\" y=\"232.6299\"\n       /><rect x=\"753.6\" y=\"232.6299\" fill=\"red\" width=\"45.6945\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"753.6\" y=\"232.6299\" fill=\"none\" width=\"45.6945\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"753.6\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"44.485\" y=\"232.6299\"\n       /><rect x=\"75.5906\" y=\"661.304\" fill=\"url(#pattern8)\" width=\"45.6945\" height=\"44.485\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"75.5906\" y=\"661.304\" fill=\"none\" width=\"45.6945\" height=\"44.485\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"75.5906\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"44.485\" y=\"661.304\"\n       /><path fill=\"none\" d=\"M123.4772 279.1559 L149.3291 250.5827 L166.2614 263.5843 L188.3339 232.4409\"\n       /><path fill=\"none\" d=\"M96.4157 254.1354 L96.5669 254.1354\"\n       /><path fill=\"none\" d=\"M352.8945 234.9354 L352.8945 257.1591 L374.6646 276.2079 L408.5291 276.2079 L404.7496 228.1323 L383.1307 248.3905 Z\"\n-      /><rect x=\"47.2441\" y=\"376.7055\" fill=\"none\" width=\"454.3748\" height=\"153.1465\" stroke-width=\"1.5118\"\n+      /><rect fill=\"none\" x=\"47.2441\" width=\"454.3748\" stroke-width=\"1.5118\" height=\"153.1465\" y=\"376.7055\"\n     /></g\n     ><g font-size=\"26\" stroke-linecap=\"butt\" transform=\"translate(74.1165,386.5701)\" fill=\"white\" stroke-linejoin=\"round\" stroke=\"white\" font-weight=\"bold\" stroke-width=\"1.5118\"\n-    ><rect width=\"70\" x=\"1\" height=\"20\" y=\"-19\" stroke=\"none\"\n+    ><rect x=\"1\" width=\"70\" height=\"20\" y=\"-19\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-weight=\"bold\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"74.1165\" y=\"386.5701\" stroke=\"none\"\n+    ><text x=\"74.1165\" xml:space=\"preserve\" y=\"386.5701\" stroke=\"none\"\n       >Lines</text\n-      ><rect fill=\"none\" width=\"451.9937\" x=\"549.2787\" height=\"156.6614\" y=\"376.7055\"\n+      ><rect fill=\"none\" x=\"549.2787\" width=\"451.9937\" height=\"156.6614\" y=\"376.7055\"\n       /><rect x=\"1\" y=\"-19\" transform=\"translate(574.8284,387.9307)\" fill=\"white\" width=\"73\" height=\"20\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-weight=\"bold\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"574.8284\" y=\"387.9307\" stroke=\"none\"\n+    ><text x=\"574.8284\" xml:space=\"preserve\" y=\"387.9307\" stroke=\"none\"\n       >Fonts</text\n       ><rect x=\"1\" y=\"-19\" transform=\"translate(820.0441,434.3433)\" fill=\"white\" width=\"59\" height=\"20\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-weight=\"bold\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"820.0441\" y=\"434.3433\" stroke=\"none\"\n+    ><text x=\"820.0441\" xml:space=\"preserve\" y=\"434.3433\" stroke=\"none\"\n       >Bold</text\n     ></g\n     ><g font-size=\"26\" stroke-linecap=\"butt\" transform=\"translate(822.6142,499.3512)\" fill=\"white\" font-family=\"&apos;Courier New&apos;\" stroke-linejoin=\"round\" stroke=\"white\" stroke-width=\"1.5118\"\n-    ><rect width=\"138\" x=\"1\" height=\"18\" y=\"-17\" stroke=\"none\"\n+    ><rect x=\"1\" width=\"138\" height=\"18\" y=\"-17\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-family=\"&apos;Courier New&apos;\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"822.6142\" y=\"499.3512\" text-decoration=\"underline\" stroke=\"none\"\n+    ><text x=\"822.6142\" xml:space=\"preserve\" y=\"499.3512\" text-decoration=\"underline\" stroke=\"none\"\n       >Underline</text\n     ></g\n     ><g font-size=\"26\" stroke-linecap=\"butt\" transform=\"translate(821.2535,465.4866)\" fill=\"white\" font-family=\"&apos;Times New Roman&apos;\" stroke-linejoin=\"round\" font-style=\"italic\" stroke=\"white\" stroke-width=\"1.5118\"\n-    ><rect width=\"58\" x=\"-1\" height=\"20\" y=\"-19\" stroke=\"none\"\n+    ><rect x=\"-1\" width=\"58\" height=\"20\" y=\"-19\" stroke=\"none\"\n     /></g\n-    ><g font-size=\"26\" stroke-linecap=\"butt\" font-family=\"&apos;Times New Roman&apos;\" stroke-linejoin=\"round\" font-style=\"italic\" stroke-width=\"1.5118\"\n-    ><text xml:space=\"preserve\" x=\"821.2535\" y=\"465.4866\" stroke=\"none\"\n+    ><g font-style=\"italic\" font-size=\"26\" stroke-width=\"1.5118\" font-family=\"&apos;Times New Roman&apos;\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n+    ><text x=\"821.2535\" xml:space=\"preserve\" y=\"465.4866\" stroke=\"none\"\n       >Italic</text\n     ></g\n     ><g font-size=\"26\" stroke-linecap=\"butt\" transform=\"translate(574.6772,433.1339)\" fill=\"white\" stroke-linejoin=\"round\" stroke=\"white\" stroke-width=\"1.5118\"\n-    ><rect width=\"52\" x=\"-1\" height=\"20\" y=\"-19\" stroke=\"none\"\n+    ><rect x=\"-1\" width=\"52\" height=\"20\" y=\"-19\" stroke=\"none\"\n     /></g\n-    ><g font-size=\"26\" stroke-width=\"1.5118\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"574.6772\" y=\"433.1339\" stroke=\"none\"\n+    ><g font-size=\"26\" stroke-width=\"1.5118\" stroke-linejoin=\"round\" stroke-linecap=\"butt\"\n+    ><text x=\"574.6772\" xml:space=\"preserve\" y=\"433.1339\" stroke=\"none\"\n       >Arial</text\n       ><rect x=\"0\" y=\"-19\" transform=\"translate(573.3165,465.4866)\" fill=\"white\" width=\"203\" height=\"20\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-family=\"&apos;Times New Roman&apos;\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"573.3165\" y=\"465.4866\" stroke=\"none\"\n+    ><text x=\"573.3165\" xml:space=\"preserve\" y=\"465.4866\" stroke=\"none\"\n       >Times New Roman</text\n       ><rect x=\"1\" y=\"-17\" transform=\"translate(574.6772,499.3512)\" fill=\"white\" width=\"170\" height=\"18\" stroke=\"none\"\n     /></g\n     ><g font-size=\"26\" stroke-width=\"1.5118\" font-family=\"&apos;Courier New&apos;\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"574.6772\" y=\"499.3512\" stroke=\"none\"\n+    ><text x=\"574.6772\" xml:space=\"preserve\" y=\"499.3512\" stroke=\"none\"\n       >Courier New</text\n       ><rect x=\"579.9685\" y=\"628.2331\" fill=\"url(#pattern9)\" width=\"45.6945\" height=\"45.6567\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"579.9685\" y=\"628.2331\" fill=\"none\" width=\"45.6945\" height=\"45.6567\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"579.9685\" width=\"45.6945\" stroke-width=\"0.0378\" height=\"45.6567\" y=\"628.2331\"\n       /><rect x=\"675.6661\" y=\"618.7842\" fill=\"yellow\" width=\"64.5543\" height=\"45.6567\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"675.6661\" y=\"618.7842\" fill=\"none\" width=\"64.5543\" height=\"45.6567\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"675.6661\" width=\"64.5543\" stroke-width=\"0.0378\" height=\"45.6567\" y=\"618.7842\"\n       /><rect x=\"656.7685\" y=\"634.1292\" fill=\"url(#pattern10)\" width=\"48.0378\" height=\"45.6945\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"656.7685\" y=\"634.1292\" fill=\"none\" width=\"48.0378\" height=\"45.6945\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"656.7685\" width=\"48.0378\" stroke-width=\"0.0378\" height=\"45.6945\" y=\"634.1292\"\n       /><rect x=\"714.6331\" y=\"634.1292\" fill=\"url(#pattern10)\" width=\"44.485\" height=\"45.6945\" stroke=\"none\" stroke-width=\"0.0378\"\n-      /><rect x=\"714.6331\" y=\"634.1292\" fill=\"none\" width=\"44.485\" height=\"45.6945\" stroke-width=\"0.0378\"\n+      /><rect fill=\"none\" x=\"714.6331\" width=\"44.485\" stroke-width=\"0.0378\" height=\"45.6945\" y=\"634.1292\"\n       /><text font-size=\"15\" x=\"933.7166\" y=\"721.9653\" font-family=\"&apos;Times New Roman&apos;\" stroke=\"none\" stroke-width=\"0.0378\" xml:space=\"preserve\"\n       >Text</text\n       ><text font-size=\"15\" x=\"921.7976\" y=\"705.1843\" font-family=\"&apos;Times New Roman&apos;\" stroke=\"none\" stroke-width=\"0.0378\" xml:space=\"preserve\"\n@@ -239,10 +239,10 @@ AxgwMjIyIAFGuASKKCMjEwMOQLoEdjvIMgoAOSQJC7g1m/AAAAAASUVORK5CYII=\" xlink:type=\"si\n       >Basic Fill Patterns</text\n     ></g\n     ><g font-size=\"15\" stroke-linecap=\"butt\" fill=\"url(#pattern11)\" font-family=\"&apos;Times New Roman&apos;\" stroke-linejoin=\"round\" stroke=\"url(#pattern11)\" stroke-width=\"0.0378\"\n-    ><rect width=\"44.485\" x=\"354.3685\" height=\"44.485\" y=\"661.304\" stroke=\"none\"\n-      /><rect x=\"354.3685\" y=\"661.304\" fill=\"none\" width=\"44.485\" height=\"44.485\" stroke=\"black\"\n-      /><rect x=\"411.0614\" y=\"661.304\" fill=\"url(#pattern12)\" width=\"49.2095\" height=\"44.485\" stroke=\"none\"\n-      /><rect x=\"411.0614\" y=\"661.304\" fill=\"none\" width=\"49.2095\" height=\"44.485\" stroke=\"black\"\n+    ><rect x=\"354.3685\" width=\"44.485\" height=\"44.485\" y=\"661.304\" stroke=\"none\"\n+      /><rect fill=\"none\" x=\"354.3685\" width=\"44.485\" height=\"44.485\" y=\"661.304\" stroke=\"black\"\n+      /><rect fill=\"url(#pattern12)\" x=\"411.0614\" width=\"49.2095\" height=\"44.485\" y=\"661.304\" stroke=\"none\"\n+      /><rect fill=\"none\" x=\"411.0614\" width=\"49.2095\" height=\"44.485\" y=\"661.304\" stroke=\"black\"\n     /></g\n   ></g\n ></svg",
                "deletions": 84
            },
            {
                "sha": "b9a9cec2a9c950e4349dede1e02cb0b0e4184ce3",
                "filename": "test-references/org/apache/batik/transcoder/wmf/textGreek.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/wmf/textGreek.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/org/apache/batik/transcoder/wmf/textGreek.svg",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/org/apache/batik/transcoder/wmf/textGreek.svg?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "patch": "@@ -4,11 +4,11 @@\n <svg stroke-dasharray=\"none\" shape-rendering=\"auto\" xmlns=\"http://www.w3.org/2000/svg\" font-family=\"&apos;Arial&apos;\" width=\"960\" text-rendering=\"auto\" fill-opacity=\"1\" contentScriptType=\"text/ecmascript\" color-rendering=\"auto\" color-interpolation=\"auto\" preserveAspectRatio=\"xMidYMid meet\" font-size=\"12\" viewBox=\"0 0 960 720\" fill=\"black\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" stroke=\"black\" image-rendering=\"auto\" stroke-miterlimit=\"10\" zoomAndPan=\"magnify\" version=\"1.0\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" contentStyleType=\"text/css\" font-style=\"normal\" height=\"720\" stroke-width=\"1\" stroke-dashoffset=\"0\" font-weight=\"normal\" stroke-opacity=\"1\"\n ><!--Generated by the Batik Graphics2D SVG Generator--><defs id=\"genericDefs\"\n   /><g\n-  ><g fill=\"white\" stroke-width=\"0.0756\" stroke=\"white\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><rect width=\"960\" x=\"0\" height=\"720\" y=\"0\" stroke=\"none\"\n+  ><g fill=\"white\" stroke-width=\"0.0756\" stroke=\"white\" stroke-linejoin=\"round\" stroke-linecap=\"butt\"\n+    ><rect x=\"0\" width=\"960\" height=\"720\" y=\"0\" stroke=\"none\"\n     /></g\n     ><g font-size=\"32\" stroke-width=\"0.1667\" font-family=\"&apos;Courier New&apos;\" stroke-linecap=\"butt\" stroke-linejoin=\"round\"\n-    ><text xml:space=\"preserve\" x=\"224\" y=\"248\" stroke=\"none\"\n+    ><text x=\"224\" xml:space=\"preserve\" y=\"248\" stroke=\"none\"\n       >\u03b1</text\n     ></g\n   ></g",
                "deletions": 3
            },
            {
                "sha": "7faa2c2942157e6af3ba47da1c33884203d09e9e",
                "filename": "test-references/samples/GVT.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/GVT.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/GVT.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/GVT.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "6667d648c61de43550353120ccbe5a0d5bbb5c17",
                "filename": "test-references/samples/asf-logo.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/asf-logo.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/asf-logo.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/asf-logo.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "d5e7cdd1fdabd38db8dfe8d1565fc55fdb4084e5",
                "filename": "test-references/samples/batik3D.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/batik3D.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/batik3D.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/batik3D.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "cd8c0721ad511980ee4e8302bd16017bd951d0e2",
                "filename": "test-references/samples/batikFX.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/batikFX.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/batikFX.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/batikFX.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "3103939ffd734f29823ab989b137031605f36aa3",
                "filename": "test-references/samples/batikYin.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/batikYin.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/batikYin.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/batikYin.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "4d90f055b64dbffea59376b3b0ebb52fb721da95",
                "filename": "test-references/samples/chessboard.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/chessboard.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/chessboard.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/chessboard.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "54e48525578a17ddfa00a62b59d82e8a63a2d680",
                "filename": "test-references/samples/extensions/colorSwitch.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/extensions/colorSwitch.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/extensions/colorSwitch.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/extensions/colorSwitch.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "c306ad7ff38e7ca14b59efa495e5e4e85bd850d5",
                "filename": "test-references/samples/gradients.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/gradients.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/gradients.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/gradients.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "fafbd0f5899e0f18d23cd34a912c6176bc57d087",
                "filename": "test-references/samples/moonPhases.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/moonPhases.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/moonPhases.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/moonPhases.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "ba18c9966fd5a4325bc28306e941f92b8a881494",
                "filename": "test-references/samples/sizeOfSun.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/sizeOfSun.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/sizeOfSun.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/sizeOfSun.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "4dbb438f3d54c455391c577566dbd40701ed1457",
                "filename": "test-references/samples/sunRise.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/sunRise.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/sunRise.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/sunRise.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "7444d598faf76aa51f03c39891ff41514ef173be",
                "filename": "test-references/samples/tests/spec/filters/feDisplacementMap.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/filters/feDisplacementMap.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/filters/feDisplacementMap.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/filters/feDisplacementMap.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "4f2d8d94d1d4fe9256c80c9117b0bbcfd26f8f81",
                "filename": "test-references/samples/tests/spec/filters/feTile.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/filters/feTile.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/filters/feTile.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/filters/feTile.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "235aea8fbc00d1d7a5459ecb2215e8d4277b1f7e",
                "filename": "test-references/samples/tests/spec/filters/feTileTarget.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/filters/feTileTarget.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/filters/feTileTarget.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/filters/feTileTarget.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "3ef46f6df0d51f63d0e4fce7b57b27e378b5c587",
                "filename": "test-references/samples/tests/spec/fonts/fontArabic.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/fonts/fontArabic.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/fonts/fontArabic.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/fonts/fontArabic.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "4c64141294f89a19393f8add308509c4cbffe05d",
                "filename": "test-references/samples/tests/spec/linking/anchor.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/linking/anchor.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/linking/anchor.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/linking/anchor.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "d29e52bf11b4f3d8c1f4fa8c1b6873cac6b4cebb",
                "filename": "test-references/samples/tests/spec/linking/pointerEvents2.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/linking/pointerEvents2.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/linking/pointerEvents2.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/linking/pointerEvents2.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "07e43ca88f31605563862ac83e7e5e6e28dd8a31",
                "filename": "test-references/samples/tests/spec/masking/clipTransform.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/masking/clipTransform.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/masking/clipTransform.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/masking/clipTransform.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "92e62b51c524dbcb361c6b1239c61e7be8533365",
                "filename": "test-references/samples/tests/spec/painting/bboxOnText.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/painting/bboxOnText.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/painting/bboxOnText.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/painting/bboxOnText.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "9f9e137626e411866fe44101564911b4e43ce767",
                "filename": "test-references/samples/tests/spec/painting/markersShapes.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/painting/markersShapes.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/painting/markersShapes.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/painting/markersShapes.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "326a926bf045e813f021fafaeac35b88ced182d7",
                "filename": "test-references/samples/tests/spec/paints/externalPaints.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/externalPaints.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/externalPaints.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/externalPaints.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "92aa7df591f07b9f1aefd3fb6efeaa26518af08a",
                "filename": "test-references/samples/tests/spec/paints/gradientLimit.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/gradientLimit.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/gradientLimit.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/gradientLimit.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "b722537e718e8339fd43b091fedfb43ab3ee0438",
                "filename": "test-references/samples/tests/spec/paints/linearGradientLine.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/linearGradientLine.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/linearGradientLine.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/linearGradientLine.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "e444298881301e28325115170554351260666917",
                "filename": "test-references/samples/tests/spec/paints/linearGradientOrientation.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/linearGradientOrientation.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/linearGradientOrientation.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/linearGradientOrientation.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "b3d782548a8ec9ba84b3c988af0648a84a2f7114",
                "filename": "test-references/samples/tests/spec/paints/linearGradientRepeat.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/linearGradientRepeat.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/linearGradientRepeat.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/linearGradientRepeat.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "d2e2e2ee6cc7cd2f7f89a29cd94483adce9d5ee6",
                "filename": "test-references/samples/tests/spec/paints/radialGradient.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradient.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradient.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/radialGradient.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "9f60f7eca27e227f036a7f8b536e270db9f82e90",
                "filename": "test-references/samples/tests/spec/paints/radialGradient2.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradient2.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradient2.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/radialGradient2.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "509d31d88244d7c90e60a7a0e1e6682563293fe1",
                "filename": "test-references/samples/tests/spec/paints/radialGradient3.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradient3.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradient3.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/radialGradient3.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "22526a6e0ccb340328411bf9766002cfb750f970",
                "filename": "test-references/samples/tests/spec/paints/radialGradientLine.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradientLine.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradientLine.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/radialGradientLine.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "f1fc4f2477a951d87ab4cdac2c464b3b188a12cc",
                "filename": "test-references/samples/tests/spec/paints/radialGradientOrientation.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradientOrientation.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/paints/radialGradientOrientation.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/paints/radialGradientOrientation.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "9405eec3831941c3ef788aa34ac9e8d1deb8dc22",
                "filename": "test-references/samples/tests/spec/rendering/paintOpacity.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/rendering/paintOpacity.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/rendering/paintOpacity.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/rendering/paintOpacity.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "b2ea318180eaa5b5dcef3cf6e281995dbd634bca",
                "filename": "test-references/samples/tests/spec/scripting/display.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/display.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/display.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/display.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "64ba8b7f98d1ab9ca9e526c098ccd455b0397b45",
                "filename": "test-references/samples/tests/spec/scripting/image.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/image.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/image.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/image.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "f720a9e158c2058faf8077da855e5eaeacbacd52",
                "filename": "test-references/samples/tests/spec/scripting/imageRefUpdate.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/imageRefUpdate.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/imageRefUpdate.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/imageRefUpdate.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "7cc2fe9c0b9390b0ec5cac1032c08ba34af6a323",
                "filename": "test-references/samples/tests/spec/scripting/imagesvg.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/imagesvg.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/imagesvg.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/imagesvg.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "94bf4f4ec769f32a774be5cdc389f4ac664d6241",
                "filename": "test-references/samples/tests/spec/scripting/paintType.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/paintType.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/paintType.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/paintType.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "db7cc2624cde89e07c5af040c45a6890548caa36",
                "filename": "test-references/samples/tests/spec/scripting/relativeURI.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/relativeURI.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/relativeURI.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/relativeURI.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "1c2fd4390d21e50e38ec34e558f027b1cea59b87",
                "filename": "test-references/samples/tests/spec/scripting/setProperty.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/setProperty.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/setProperty.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/setProperty.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "45d2ac2fc679184712ae796066fffb47f3897451",
                "filename": "test-references/samples/tests/spec/scripting/transform.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/transform.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/transform.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/transform.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "bda3c9bb10a63d99e87bb1695166961fccdd3c42",
                "filename": "test-references/samples/tests/spec/scripting/visibility.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/visibility.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/visibility.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/visibility.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "476c08cf1629fedb810fb01b3d1d3ad70459b804",
                "filename": "test-references/samples/tests/spec/scripting/visibilityOnClick.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/visibilityOnClick.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/visibilityOnClick.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/visibilityOnClick.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "34620a716054ead9abd065ced2aca3010d8a0f46",
                "filename": "test-references/samples/tests/spec/scripting/zeroSize.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/zeroSize.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/scripting/zeroSize.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/scripting/zeroSize.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "e3e5e7fb31b38ec9bb43e8c94c990d35a5d30d9e",
                "filename": "test-references/samples/tests/spec/structure/externalUseCascading.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/externalUseCascading.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/externalUseCascading.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/structure/externalUseCascading.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "b04756eb43c82b466189ac455debf5662a9b48e8",
                "filename": "test-references/samples/tests/spec/structure/image.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/image.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/image.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/structure/image.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "0b6a357b47f4fedf8ac3e62059d46c4ee186770a",
                "filename": "test-references/samples/tests/spec/structure/useStylesheet.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/useStylesheet.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/useStylesheet.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/structure/useStylesheet.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "0b6a357b47f4fedf8ac3e62059d46c4ee186770a",
                "filename": "test-references/samples/tests/spec/structure/useStyling.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/useStyling.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/useStyling.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/structure/useStyling.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "80ca5f42915ee3da201e491fef6d395946b87c5f",
                "filename": "test-references/samples/tests/spec/structure/useStylingURI.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/useStylingURI.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/useStylingURI.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/structure/useStylingURI.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "0de2befe0b34bcd0e16c0e63f1650a9fe1e1770f",
                "filename": "test-references/samples/tests/spec/structure/xmlBaseStyling.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/xmlBaseStyling.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/structure/xmlBaseStyling.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/structure/xmlBaseStyling.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "a7da0904bd9402711a3a281069e218cac605bb79",
                "filename": "test-references/samples/tests/spec/text/textEffect.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/text/textEffect.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/text/textEffect.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textEffect.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "d8f55fee324f76cf43b90b69e556cf63e59bbefc",
                "filename": "test-references/samples/tests/spec/text/textEffect2.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/text/textEffect2.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/text/textEffect2.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textEffect2.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "c4b0e352706c48b8e0881a0ef8ecc833dbc21cc4",
                "filename": "test-references/samples/tests/spec/text/textEffect3.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/text/textEffect3.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec/text/textEffect3.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textEffect3.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "87395f253d7ce04504b43facffa9d9cac666c0a3",
                "filename": "test-references/samples/tests/spec12/text/flowBidi.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec12/text/flowBidi.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec12/text/flowBidi.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec12/text/flowBidi.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "6c67a39424dcaf5b4b2505756707065f166e5760",
                "filename": "test-references/samples/tests/spec12/text/flowText5.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec12/text/flowText5.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/tests/spec12/text/flowText5.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec12/text/flowText5.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "4ba1b22fd4d6c43c0cdf8290fbd4a5ee0d83f391",
                "filename": "test-references/samples/textRotate.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/textRotate.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/textRotate.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/textRotate.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "5b00ae072ebdf8ae94fafb4c7ed1a6eaaba3123d",
                "filename": "test-references/samples/textRotateShadows.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/textRotateShadows.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/samples/textRotateShadows.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/textRotateShadows.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "dff33e58ef7483a5a590e767407b2b7b03a7fe6a",
                "filename": "test-references/svgbe/color-property-BE-02.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/color-property-BE-02.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/color-property-BE-02.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/color-property-BE-02.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "b298664a0309c1e98e7f736456440d8484f611a5",
                "filename": "test-references/svgbe/coords-unitsProc-BE-05.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/coords-unitsProc-BE-05.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/coords-unitsProc-BE-05.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/coords-unitsProc-BE-05.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "1a6dc83f224c7a30da7f4d26b3c193c950654fb4",
                "filename": "test-references/svgbe/filters-blend-BE-02.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/filters-blend-BE-02.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/filters-blend-BE-02.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/filters-blend-BE-02.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "940365c41e8b4a1efc01fdddf7b05f14e10fe5ce",
                "filename": "test-references/svgbe/filters-colorMtrx-BE-03.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/filters-colorMtrx-BE-03.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/filters-colorMtrx-BE-03.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/filters-colorMtrx-BE-03.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "16ca14493fc159a1c6cf4b2417f4cc3e2f897868",
                "filename": "test-references/svgbe/filters-transfer-BE-04.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/filters-transfer-BE-04.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/filters-transfer-BE-04.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/filters-transfer-BE-04.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "a2bb81e27d43f455b5d2ecd6729498b24b8f3fae",
                "filename": "test-references/svgbe/gradPatt-linearGr-BE-01.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-linearGr-BE-01.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-linearGr-BE-01.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/gradPatt-linearGr-BE-01.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "973095dd31ee6f698d46e80260bd767f82df9654",
                "filename": "test-references/svgbe/gradPatt-linearGr-BE-02.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-linearGr-BE-02.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-linearGr-BE-02.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/gradPatt-linearGr-BE-02.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "bd819154e4c2f9e7b808a3dcbe00da8d12172db0",
                "filename": "test-references/svgbe/gradPatt-radialGr-BE-04.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-radialGr-BE-04.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-radialGr-BE-04.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/gradPatt-radialGr-BE-04.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "0efd09abf52859ac29fc3291a2e43c287be9230c",
                "filename": "test-references/svgbe/gradPatt-radialGr-BE-05.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-radialGr-BE-05.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-radialGr-BE-05.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/gradPatt-radialGr-BE-05.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "f46e32ff5beee5f9fee2c311e0bb704edfdb622f",
                "filename": "test-references/svgbe/gradPatt-referenc-BE-08.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-referenc-BE-08.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-referenc-BE-08.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/gradPatt-referenc-BE-08.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "ad7a53e005824a686a21ae92d41055fd2c8d830b",
                "filename": "test-references/svgbe/gradPatt-stop-BE-06.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-stop-BE-06.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-stop-BE-06.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/gradPatt-stop-BE-06.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "c935b64e8683d4db72799f0febe6597eb1d90870",
                "filename": "test-references/svgbe/gradPatt-stop-BE-10.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-stop-BE-10.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-stop-BE-10.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/gradPatt-stop-BE-10.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "ff284b204c6bd032f34c173805f4dbe1eb2f06b2",
                "filename": "test-references/svgbe/gradPatt-transfrm-BE-09.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-transfrm-BE-09.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/gradPatt-transfrm-BE-09.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/gradPatt-transfrm-BE-09.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "2978dcf0aeed8ca9919f021c9d43f0069d3e31c2",
                "filename": "test-references/svgbe/masking-mask-BE-05.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/masking-mask-BE-05.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-references/svgbe/masking-mask-BE-05.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/svgbe/masking-mask-BE-05.png?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "deletions": 0
            },
            {
                "sha": "4312c1d3928bd2ffa79f2672eab7e51055066805",
                "filename": "test-resources/org/apache/batik/swing/unitTesting.xml",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-resources/org/apache/batik/swing/unitTesting.xml",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-resources/org/apache/batik/swing/unitTesting.xml",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/swing/unitTesting.xml?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "patch": "@@ -28,11 +28,11 @@\n     <test id=\"samples/tests/spec/scripting/primaryDoc.svg\"/>\n   </testGroup>\n \n-  <!--test id=\"NullURITest\" \n+  <test id=\"NullURITest\" \n         class=\"org.apache.batik.swing.NullURITest\" />\n \n   <test id=\"NullSetSVGDocumentTest\" \n-        class=\"org.apache.batik.swing.NullSetSVGDocumentTest\" /-->\n+        class=\"org.apache.batik.swing.NullSetSVGDocumentTest\" />\n \n   <test id=\"SetSVGDocumentTest\" \n         class=\"org.apache.batik.swing.SetSVGDocumentTest\" />",
                "deletions": 2
            },
            {
                "sha": "798a89ec244b356bb6c9214eb37210b7b2996ed1",
                "filename": "test-sources/org/apache/batik/swing/JSVGCanvasHandler.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-sources/org/apache/batik/swing/JSVGCanvasHandler.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/0a9a1305ecc27b1bc522d53286342ea4c215805b/test-sources/org/apache/batik/swing/JSVGCanvasHandler.java",
                "status": "modified",
                "changes": 46,
                "additions": 25,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-sources/org/apache/batik/swing/JSVGCanvasHandler.java?ref=0a9a1305ecc27b1bc522d53286342ea4c215805b",
                "patch": "@@ -44,6 +44,9 @@ Licensed to the Apache Software Foundation (ASF) under one or more\n import org.apache.batik.swing.JSVGCanvas;\n import org.apache.batik.swing.svg.SVGDocumentLoaderAdapter;\n import org.apache.batik.swing.svg.SVGDocumentLoaderEvent;\n+import org.apache.batik.swing.svg.SVGLoadEventDispatcherAdapter;\n+import org.apache.batik.swing.svg.SVGLoadEventDispatcherEvent;\n+import org.apache.batik.swing.svg.SVGLoadEventDispatcher;\n \n /**\n  * One line Class Desc\n@@ -108,6 +111,7 @@ public static String fmt(String key, Object []args) {\n     WindowListener wl = null;\n     InitialRenderListener irl = null;\n     LoadListener ll = null;\n+    SVGLoadEventListener sll = null;\n     UpdateRenderListener url = null;\n \n     boolean failed;\n@@ -152,29 +156,10 @@ public void runCanvas(String desc) {\n                 checkRender();\n                 if ( abort) return;\n \n-                try {\n-                    EventQueue.invokeAndWait(new Runnable() {\n-                            public void run() {\n-                                updateManager = canvas.getUpdateManager();\n-                                if (updateManager == null)\n-                                    return;\n-                                url = new UpdateRenderListener();\n-                                updateManager.addUpdateManagerListener(url);\n-                            }});\n-                } catch (Throwable t) { t.printStackTrace(); }\n-\n-                if ( abort) return;\n-\n+                System.err.println(\"UM: \" + updateManager);\n                 if (updateManager == null)\n                     return;\n \n-                // Wait for Update Manager to Start.\n-                while (!updateManager.isRunning());\n-\n-                bindHost();\n-\n-                if ( abort) return;\n-\n                 while (!done) {\n                     checkUpdate();\n                     if ( abort) return;\n@@ -216,6 +201,9 @@ public void windowClosing(WindowEvent e) {\n                         canvas.addGVTTreeRendererListener(irl);\n                         ll = new LoadListener();\n                         canvas.addSVGDocumentLoaderListener(ll);\n+                        sll = new SVGLoadEventListener();\n+                        canvas.addSVGLoadEventDispatcherListener(sll);\n+                        \n                     }});\n         } catch (Throwable t) {\n             t.printStackTrace();\n@@ -226,6 +214,8 @@ public void windowClosing(WindowEvent e) {\n     public void scriptDone() {\n         Runnable r = new Runnable() {\n                 public void run() {\n+                    if (updateManager != null)\n+                        updateManager.forceRepaint();\n                     synchronized(renderMonitor) {\n                         done = true;\n                         failed = false;\n@@ -329,7 +319,10 @@ public void updateFailed(UpdateManagerEvent e) {\n                 renderMonitor.notifyAll();\n             }\n         }\n-        public void managerStarted(UpdateManagerEvent e) { }\n+        public void managerStarted(UpdateManagerEvent e) {\n+            System.err.println(\"Binding Host: \" + updateManager);\n+          bindHost(); \n+        }\n         public void managerSuspended(UpdateManagerEvent e) { }\n         public void managerResumed(UpdateManagerEvent e) { }\n         public void managerStopped(UpdateManagerEvent e) { }\n@@ -378,4 +371,15 @@ public void documentLoadingCancelled(SVGDocumentLoaderEvent e) {\n             }\n         }\n     }\n+\n+    class SVGLoadEventListener extends SVGLoadEventDispatcherAdapter {\n+        public void svgLoadEventDispatchStarted(SVGLoadEventDispatcherEvent e){\n+            SVGLoadEventDispatcher dispatcher;\n+            dispatcher = (SVGLoadEventDispatcher)e.getSource();\n+            updateManager = dispatcher.getUpdateManager();\n+            url = new UpdateRenderListener();\n+            updateManager.addUpdateManagerListener(url);\n+        }\n+    }\n+    \n }",
                "deletions": 21
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Fixed an NPE with some updates.\n2) When an element is removed or CSS properties change all\n   next sibling elements are not repainted (unless a rendering property\n   truely changes as a result (think css '+' rules)).\n3) Changes to the 'class' attribute now update the rendering\n   tree appropriately.\n4) New test for this (samples/tests/scripting/styling.svg) and\n   for comments in style elements (samples/tests/styling/styleElement.svg).\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@201262 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/552deb7b74062b708bbec0046ad12549ef4be3ad",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/c88bb8bdc2b18955a50066c89a1ae85e957bdea4",
        "bug_id": "xmlgraphics-batik_54",
        "file": [
            {
                "sha": "5c2ed08c0b76409b12eb1f24643d5092bd6d9c41",
                "filename": "samples/tests/spec/scripting/styling.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/552deb7b74062b708bbec0046ad12549ef4be3ad/samples/tests/spec/scripting/styling.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/552deb7b74062b708bbec0046ad12549ef4be3ad/samples/tests/spec/scripting/styling.svg",
                "status": "added",
                "changes": 144,
                "additions": 144,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/samples/tests/spec/scripting/styling.svg?ref=552deb7b74062b708bbec0046ad12549ef4be3ad",
                "patch": "@@ -0,0 +1,144 @@\n+<?xml version=\"1.0\" standalone=\"no\"?>\n+<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\"\n+\"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n+\n+<!-- ====================================================================== -->\n+<!-- Copyright (C) The Apache Software Foundation. All rights reserved.     -->\n+<!--                                                                        -->\n+<!-- This software is published under the terms of the Apache Software      -->\n+<!-- License version 1.1, a copy of which has been included with this       -->\n+<!-- distribution in the LICENSE file.                                      -->\n+<!-- ====================================================================== -->\n+\n+<?xml-stylesheet type=\"text/css\" href=\"../../resources/style/test.css\" ?>  \n+\n+<svg xmlns=\"http://www.w3.org/2000/svg\" \n+     xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n+     xmlns:cb=\"http://www.example.org/gui/checkbox\"\n+     id=\"body\" width=\"450\" height=\"500\" viewBox=\"0 0 450 500\">\n+\n+  <title>Dynamic test of CSS selectors</title>\n+  <text x=\"50%\" y=\"45\" class=\"title\">Dynamic test of CSS selectors</text>\n+\n+  <style type=\"text/css\"><![CDATA[\n+    text.button {\n+    fill: #00F;\n+    }\n+\n+    text + text.button {\n+    fill: #888;\n+    }\n+\n+    text + g > text {\n+      fill: #F00;\n+    }\n+\n+    g > text {\n+      fill: #0F0;\n+    }\n+\n+    g.xxx > text { fill: #F0F; }\n+\n+    [id=test4] > text { fill: #80F; }\n+\n+    g + [id=foo] > text { fill: #808; }\n+\n+    .checkbox > path { fill: none; stroke: black; stroke-width: 2; }\n+    .checkbox > rect { fill: white; stroke: black; stroke-width: 1; }\n+    .checkbox[selected=true] > path { visibility: visible;}\n+    .checkbox[selected=false] > path { visibility: hidden; }\n+    ]]></style>\n+\n+  <script type=\"text/ecmascript\"><![CDATA[\n+    var svgns = \"http://www.w3.org/2000/svg\";\n+\n+    function insertTextEvt(evt, x, y) {\n+       insertText(evt.currentTarget, x, y);\n+    }\n+\n+    function removeTargetEvt(evt) {\n+       removeTarget(evt.currentTarget);\n+    }\n+\n+    function setAttributeEvt(evt, attr, val) {\n+      evt.currentTarget.setAttribute(attr, val);\n+    }\n+\n+    function removeTarget(e) {\n+       e.parentNode.removeChild(e);\n+    }\n+\n+    function insertText(e, x, y) {\n+       var t = document.createElementNS(svgns, \"text\");\n+       t.setAttribute(\"x\", x);\n+       t.setAttribute(\"y\", y);\n+       t.appendChild(document.createTextNode(\"Inserted\"));\n+       e.parentNode.insertBefore(t, e);\n+    }\n+\n+    function toggleSelectedEvt(evt) {\n+      toggleSelected(evt.currentTarget);\n+    }\n+    function toggleSelected(e) {\n+       var sel = e.getAttribute(\"selected\");\n+       if (sel == \"true\") {\n+         e.setAttribute(\"selected\", \"false\");\n+       } else {\n+         e.setAttribute(\"selected\", \"true\");\n+       }\n+    }\n+\n+    function regardStart() {\n+      var e;\n+      removeTarget(document.getElementById(\"rm1\"))\n+      insertText(document.getElementById(\"in1\"), '10', '75');\n+\n+      removeTarget(document.getElementById(\"rm2\"))\n+      insertText(document.getElementById(\"in2\"), '10', '125');\n+\n+      document.getElementById(\"test3\").setAttribute(\"class\", \"xxx\");\n+      document.getElementById(\"test4\").setAttribute(\"class\", \"\");\n+      document.getElementById(\"test5\").setAttribute(\"id\", \"foo\");\n+      regardTestInstance.scriptDone();\n+      toggleSelected(document.getElementById(\"cb\"));\n+    }\n+  ]]></script>\n+\n+  <g/>\n+  <text id=\"rm1\" x=\"10\" y=\"100\" onclick=\"removeTargetEvt(evt)\">Click me</text>\n+  <text x=\"100\" y=\"100\" class=\"button\">Do I change?</text>\n+\n+  <g/>\n+  <text id=\"in1\" x=\"100\" y=\"125\" class=\"button\" \n+        onclick=\"insertTextEvt(evt, '10', '125')\">Click Me!</text>\n+\n+  <g/>\n+  <text id=\"rm2\" x=\"10\" y=\"150\" onclick=\"removeTargetEvt(evt)\">Click me</text>\n+  <g id=\"test1\">\n+    <text id=\"ct\" x=\"100\" y=\"150\">Child Text</text>\n+  </g>\n+\n+  <g/>\n+  <g id=\"in2\" onclick=\"insertTextEvt(evt, '10', '175')\">\n+    <text id=\"ct2\" x=\"100\" y=\"175\">Click me</text>\n+  </g>\n+\n+  <g id=\"test3\" onclick=\"setAttributeEvt(evt, 'class', 'xxx')\">\n+    <text id=\"ct3\" x=\"10\" y=\"200\">Click me</text>\n+  </g>\n+\n+  <g id=\"test4\" class=\"xxx\" onclick=\"setAttributeEvt(evt, 'class', '')\">\n+    <text id=\"ct4\" x=\"100\" y=\"200\">Click me</text>\n+  </g>\n+\n+  <g id=\"test5\" class=\"xxx\" onclick=\"setAttributeEvt(evt, 'id', 'foo')\">\n+    <text id=\"ct5\" x=\"200\" y=\"200\">Click me</text>\n+  </g>\n+\n+  <g id=\"cb\" class=\"checkbox\" selected=\"true\" transform=\"translate(10, 225)\"\n+     onclick=\"toggleSelected(evt)\">\n+    <rect width=\"15\" height=\"15\" fill=\"white\" stroke=\"black\"/>\n+    <path d=\"M3,3 L12,12 M12,3 L3,12\"/>\n+  </g>\n+\n+</svg>",
                "deletions": 0
            },
            {
                "sha": "4faa7627841961b870d3ee8dbf3e7ea1427c4b16",
                "filename": "samples/tests/spec/styling/styleElement.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/552deb7b74062b708bbec0046ad12549ef4be3ad/samples/tests/spec/styling/styleElement.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/552deb7b74062b708bbec0046ad12549ef4be3ad/samples/tests/spec/styling/styleElement.svg",
                "status": "added",
                "changes": 69,
                "additions": 69,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/samples/tests/spec/styling/styleElement.svg?ref=552deb7b74062b708bbec0046ad12549ef4be3ad",
                "patch": "@@ -0,0 +1,69 @@\n+<?xml version=\"1.0\" standalone=\"no\"?>\n+<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\"\n+\"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n+\n+<!-- ====================================================================== -->\n+<!-- Copyright (C) The Apache Software Foundation. All rights reserved.     -->\n+<!--                                                                        -->\n+<!-- This software is published under the terms of the Apache Software      -->\n+<!-- License version 1.1, a copy of which has been included with this       -->\n+<!-- distribution in the LICENSE file.                                      -->\n+<!-- ====================================================================== -->\n+\n+<!-- ====================================================================== -->\n+<!-- Modification of a circle attributes                                    -->\n+<!--                                                                        -->\n+<!-- @author tkormann@ilog.fr                                               -->\n+<!-- @version $Id$ -->\n+<!-- ====================================================================== -->\n+\n+<?xml-stylesheet type=\"text/css\" href=\"../../resources/style/test.css\" ?>  \n+\n+<svg id=\"body\" width=\"450\" height=\"500\" viewBox=\"0 0 450 500\"\n+     xmlns=\"http://www.w3.org/2000/svg\" \n+     xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n+\n+  <style type=\"text/css\">\n+    rect { stroke=\"black\" }\n+  </style>\n+\n+<!-- The '.blue' will be applied as the comment characters will be ignored.\n+     the '.green' rule will not be as the parser will abort on the invalid\n+     'TEST' content because the CDATA block hides the XML comments from\n+     the XML parser. --> \n+\n+  <style type=\"text/css\"><![CDATA[\n+    <!-- .blue { fill: blue } -->\n+    <!-- TEST -->\n+    .green { fill: green }\n+    /*end of css */\n+  ]]></style>\n+\n+<!-- Only .yellow will be applied .purple will be stripped by the\n+     XML parser (Note no CDATA block). --> \n+\n+  <style type=\"text/css\">\n+    <!-- .purple { fill: purple } -->\n+    <!-- TEST -->\n+    .yellow { fill: yellow }\n+    /* end of css */\n+  </style>\n+\n+  <title>Test of XML comments in &lt;style&gt; elements</title>\n+  <text x=\"50%\" y=\"50\" class=\"title\"\n+    >Test of XML comments in &lt;style&gt; elements</text>\n+  <g id=\"test-content\" >\n+    <rect class=\"blue\" x=\"10\" y=\"100\" width=\"100\" height=\"50\"/>\n+    <text x=\"150\" y=\"125\">class=\"blue\"</text>\n+\n+    <rect class=\"green\" x=\"10\" y=\"175\" width=\"100\" height=\"50\"/>\n+    <text x=\"150\" y=\"200\">class=\"green\"</text>\n+\n+    <rect class=\"purple\" x=\"10\" y=\"250\" width=\"100\" height=\"50\"/>\n+    <text x=\"150\" y=\"275\">class=\"purple\"</text>\n+\n+    <rect class=\"yellow\" x=\"10\" y=\"325\" width=\"100\" height=\"50\"/>\n+    <text x=\"150\" y=\"350\">class=\"yellow\"</text>\n+  </g>\n+</svg>\n+",
                "deletions": 0
            },
            {
                "sha": "36205ff323d75c2451f72b83a50bfa860b740426",
                "filename": "sources/org/apache/batik/css/engine/CSSEngine.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/552deb7b74062b708bbec0046ad12549ef4be3ad/sources/org/apache/batik/css/engine/CSSEngine.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/552deb7b74062b708bbec0046ad12549ef4be3ad/sources/org/apache/batik/css/engine/CSSEngine.java",
                "status": "modified",
                "changes": 301,
                "additions": 120,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/css/engine/CSSEngine.java?ref=552deb7b74062b708bbec0046ad12549ef4be3ad",
                "patch": "@@ -1693,20 +1693,7 @@ protected void inlineStyleAttributeUpdated(CSSStylableElement elt,\n             }\n \n             if (removed) {\n-                // Invalidate all the values.\n-                elt.setComputedStyleMap(null, null);\n-\n-                firePropertiesChangedEvent(elt, ALL_PROPERTIES);\n-                    \n-                Node c = getImportedChild(elt);\n-                if (c != null) {\n-                    propagateChanges(c, ALL_PROPERTIES);\n-                }\n-                for (Node n = elt.getFirstChild();\n-                     n != null;\n-                     n = n.getNextSibling()) {\n-                    propagateChanges(n, ALL_PROPERTIES);\n-                }\n+                invalidateProperties(elt, null);\n             } else {\n                 int count = 0;\n             \n@@ -1754,17 +1741,7 @@ protected void inlineStyleAttributeUpdated(CSSStylableElement elt,\n                             props[count++] = i;\n                         }\n                     }\n-                    firePropertiesChangedEvent(elt, props);\n-                    \n-                    Node c = getImportedChild(elt);\n-                    if (c != null) {\n-                        propagateChanges(c, props);\n-                    }\n-                    for (Node n = elt.getFirstChild();\n-                         n != null;\n-                         n = n.getNextSibling()) {\n-                        propagateChanges(n, props);\n-                    }\n+                    invalidateProperties(elt, props);\n                 }\n             }\n             break;\n@@ -1789,137 +1766,141 @@ private static void clearComputedValue(StyleMap style, int n) {\n         style.putComputed(n, false);\n     }\n \n-    /**\n-     * Invalidates all the stylable elements descendant of the given\n-     * node, and the node.\n-     */\n-    protected void invalidateTreeProperties(Node node) {\n-        if (node instanceof CSSStylableElement) {\n-            CSSStylableElement elt = (CSSStylableElement)node;\n-            StyleMap style = elt.getComputedStyleMap(null);\n-            if (style != null) {\n-                elt.setComputedStyleMap(null, null);\n-                firePropertiesChangedEvent(elt, ALL_PROPERTIES);\n-            }\n-        }\n-\n-        Node c = getImportedChild(node);\n-        if (c != null) {\n-            propagateChanges(c, ALL_PROPERTIES);\n-        }\n-        for (Node n = node.getFirstChild();\n-             n != null;\n-             n = n.getNextSibling()) {\n-            invalidateTreeProperties(n);\n-        }\n-    }\n \n     /**\n      * Invalidates all the properties of the given node.\n      */\n-    protected void invalidateProperties(Node node) {\n-        if (node instanceof CSSStylableElement) {\n-            CSSStylableElement elt = (CSSStylableElement)node;\n-            StyleMap style = elt.getComputedStyleMap(null);\n-            if (style != null) {\n-                elt.setComputedStyleMap(null, null);\n-                firePropertiesChangedEvent(elt, ALL_PROPERTIES);\n+    protected void invalidateProperties(Node node, int [] properties) {\n+        if (!(node instanceof CSSStylableElement))\n+            return;  // Not Stylable sub tree\n+        // System.err.println(\"Node id: \" + \n+        //                    ((Element)node).getAttribute(\"id\"));\n+\n+        CSSStylableElement elt = (CSSStylableElement)node;\n+        StyleMap style = elt.getComputedStyleMap(null);\n+        if (style == null)\n+            return;  // Nothing to invalidate.\n+        \n+        StyleMap newStyle = getCascadedStyleMap(elt, null);\n+        elt.setComputedStyleMap(null, newStyle);\n+        boolean [] diffs = new boolean[getNumberOfProperties()];\n+        int count =0;\n+        if (properties != null) {\n+            for (int i=0; i<properties.length; i++)\n+                diffs[properties[i]] = true;\n+            count = properties.length;\n+        }\n+\n+        for (int i=0; i<diffs.length; i++) {\n+            if (diffs[i]) continue; // Already marked changed.\n+\n+            Value nv = newStyle.getValue(i);\n+            Value ov = null;\n+            if (!style.isNullCascaded(i)) {\n+                ov = style.getValue(i);\n+                if (ov instanceof ComputedValue) {\n+                    ov = ((ComputedValue)ov).getCascadedValue();\n+                }\n             }\n-        }\n \n-        Node c = getImportedChild(node);\n-        if (c != null) {\n-            propagateChanges(c, ALL_PROPERTIES);\n+            if (nv == ov) continue;\n+            if ((nv == null) || \n+                (!nv.equals(ov) && !nv.getCssText().equals(ov.getCssText()))) {\n+                count++;\n+                diffs[i] = true;\n+            }\n         }\n-        for (Node n = node.getFirstChild();\n-             n != null;\n-             n = n.getNextSibling()) {\n-            propagateChanges(n, ALL_PROPERTIES);\n+        int []props = null;\n+        if (count != 0) {\n+            props = new int[count];\n+            count = 0;\n+            for (int i=0; i<diffs.length; i++) {\n+                if (diffs[i])\n+                    props[count++] = i;\n+            }\n         }\n+        propagateChanges(elt, props);\n     }\n \n     /**\n      * Propagates the changes that occurs on the parent of the given node.\n      */\n     protected void propagateChanges(Node node, int[] props) {\n-        if (node instanceof CSSStylableElement) {\n-            CSSStylableElement elt = (CSSStylableElement)node;\n-            StyleMap style = elt.getComputedStyleMap(null);\n-            if (style != null) {\n-                boolean[] updated =\n-                    styleDeclarationUpdateHandler.updatedProperties;\n-                for (int i = getNumberOfProperties() - 1; i >= 0; --i) {\n-                    updated[i] = false;\n-                }\n+        if (!(node instanceof CSSStylableElement))\n+            return;\n+        CSSStylableElement elt = (CSSStylableElement)node;\n+        StyleMap style = elt.getComputedStyleMap(null);\n+        if (style != null) {\n+            boolean[] updated =\n+                styleDeclarationUpdateHandler.updatedProperties;\n+            for (int i = getNumberOfProperties() - 1; i >= 0; --i) {\n+                updated[i] = false;\n+            }\n+            if (props != null) {\n                 for (int i = props.length - 1; i >= 0; --i) {\n                     int idx = props[i];\n-                    if (style.isComputed(idx) &&\n-                        style.isParentRelative(idx)) {\n-                        updated[idx] = true;\n-                        clearComputedValue(style, idx);\n-                    }\n+                    updated[idx] = true;\n                 }\n+            }\n \n-                // Invalidate the relative values\n-                boolean fs = (fontSizeIndex == -1)\n-                    ? false\n-                    : updated[fontSizeIndex];\n-                boolean lh = (lineHeightIndex == -1)\n-                    ? false\n-                    : updated[lineHeightIndex];\n-                boolean cl = (colorIndex == -1)\n-                    ? false\n-                    : updated[colorIndex];\n-                int count = 0;\n-\n-                for (int i = getNumberOfProperties() - 1; i >= 0; --i) {\n-                    if (!updated[i]) {\n-                        if (style.isComputed(i)) {\n-                            if (fs && style.isFontSizeRelative(i)) {\n-                                updated[i] = true;\n-                                count++;\n-                                clearComputedValue(style, i);\n-                            }\n-                            if (lh && style.isLineHeightRelative(i)) {\n-                                updated[i] = true;\n-                                count++;\n-                                clearComputedValue(style, i);\n-                            }\n-                            if (cl && style.isColorRelative(i)) {\n-                                updated[i] = true;\n-                                count++;\n-                                clearComputedValue(style, i);\n-                            }\n-                        }\n-                    } else {\n+            // Invalidate the relative values\n+            boolean fs = (fontSizeIndex == -1)\n+                ? false\n+                : updated[fontSizeIndex];\n+            boolean lh = (lineHeightIndex == -1)\n+                ? false\n+                : updated[lineHeightIndex];\n+            boolean cl = (colorIndex == -1)\n+                ? false\n+                : updated[colorIndex];\n+            int count = 0;\n+\n+            for (int i = getNumberOfProperties() - 1; i >= 0; --i) {\n+                if (updated[i]) {\n+                    count++;\n+                    continue;\n+                }\n+                if (style.isComputed(i)) {\n+                    if (fs && style.isFontSizeRelative(i)) {\n+                        updated[i] = true;\n                         count++;\n+                        clearComputedValue(style, i);\n+                    }\n+                    if (lh && style.isLineHeightRelative(i)) {\n+                        updated[i] = true;\n+                        count++;\n+                        clearComputedValue(style, i);\n+                    }\n+                    if (cl && style.isColorRelative(i)) {\n+                        updated[i] = true;\n+                        count++;\n+                        clearComputedValue(style, i);\n                     }\n                 }\n+            }\n \n-                if (count > 0) {\n-                    props = new int[count];\n-                    count = 0;\n-                    for (int i = getNumberOfProperties() - 1; i >= 0; --i) {\n-                        if (updated[i]) {\n-                            props[count++] = i;\n-                        }\n+            if (count == 0) {\n+                props = null;\n+            } else {\n+                props = new int[count];\n+                count = 0;\n+                for (int i = getNumberOfProperties() - 1; i >= 0; --i) {\n+                    if (updated[i]) {\n+                        props[count++] = i;\n                     }\n-                    firePropertiesChangedEvent(elt, props);\n-                } else {\n-                    props = null;\n                 }\n+                firePropertiesChangedEvent(elt, props);\n             }\n         }\n-        if (props != null) {\n-            Node c = getImportedChild(node);\n-            if (c != null) {\n-                propagateChanges(c, props);\n-            }\n-            for (Node n = node.getFirstChild();\n-                 n != null;\n-                 n = n.getNextSibling()) {\n-                propagateChanges(n, props);\n-            }\n+\n+        Node c = getImportedChild(node);\n+        if (c != null) {\n+            invalidateProperties(c, props);\n+        }\n+        for (Node n = node.getFirstChild();\n+             n != null;\n+             n = n.getNextSibling()) {\n+            invalidateProperties(n, props);\n         }\n     }\n \n@@ -1976,6 +1957,7 @@ protected void nonCSSPresentationalHintUpdated(CSSStylableElement elt,\n                                                    StyleMap style,\n                                                    String property,\n                                                    MutationEvent evt) {\n+        // System.err.println(\"update: \" + property);\n         int idx = getPropertyIndex(property);\n \n         if (style.isImportant(idx)) {\n@@ -1991,8 +1973,6 @@ protected void nonCSSPresentationalHintUpdated(CSSStylableElement elt,\n             return;\n         }\n         \n-        boolean comp = style.isComputed(idx);\n-\n         switch (evt.getAttrChange()) {\n         case MutationEvent.ADDITION:\n         case MutationEvent.MODIFICATION:\n@@ -2021,26 +2001,7 @@ protected void nonCSSPresentationalHintUpdated(CSSStylableElement elt,\n             break;\n \n         case MutationEvent.REMOVAL:\n-            // Invalidate all the values.\n-            elt.setComputedStyleMap(null, null);\n-            \n-            firePropertiesChangedEvent(elt, ALL_PROPERTIES);\n-                    \n-            Node c = getImportedChild(elt);\n-            if (c != null) {\n-                propagateChanges(c, ALL_PROPERTIES);\n-            }\n-            for (Node n = elt.getFirstChild();\n-                 n != null;\n-                 n = n.getNextSibling()) {\n-                propagateChanges(n, ALL_PROPERTIES);\n-            }\n-            return;\n-        }\n-\n-        if (!comp) {\n-            // The previous value was not computed: nobody is\n-            // interested by this property modifications\n+            invalidateProperties(elt, null);\n             return;\n         }\n \n@@ -2087,17 +2048,8 @@ protected void nonCSSPresentationalHintUpdated(CSSStylableElement elt,\n                 props[count++] = i;\n             }\n         }\n-        firePropertiesChangedEvent(elt, props);\n \n-        Node c = getImportedChild(elt);\n-        if (c != null) {\n-            propagateChanges(c, props);\n-        }\n-        for (Node n = elt.getFirstChild();\n-             n != null;\n-             n = n.getNextSibling()) {\n-            propagateChanges(n, props);\n-        }\n+        invalidateProperties(elt, props);\n     }\n \n     /**\n@@ -2111,7 +2063,7 @@ public void handleEvent(Event evt) {\n                 styleSheetNodes = null;\n \n                 // Invalidate all the CSSStylableElements in the document.\n-                invalidateTreeProperties(document.getDocumentElement());\n+                invalidateProperties(document.getDocumentElement(), null);\n                 return;\n             }\n             if (et instanceof CSSStylableElement) {\n@@ -2121,7 +2073,7 @@ public void handleEvent(Event evt) {\n                 for (Node n = ((Node)evt.getTarget()).getNextSibling();\n                      n != null;\n                      n = n.getNextSibling()) {\n-                    invalidateProperties(n);\n+                    invalidateProperties(n, null);\n                 }\n             }\n         }\n@@ -2159,15 +2111,15 @@ public void handleEvent(Event evt) {\n                 styleSheetNodes = null;\n \n                 // Invalidate all the CSSStylableElements in the document.\n-                invalidateTreeProperties(document.getDocumentElement());\n+                invalidateProperties(document.getDocumentElement(), null);\n             } else if (removedStylableElementSibling != null) {\n                 // Invalidate the CSSStylableElement siblings, to\n                 // correctly match the adjacent selectors and\n                 // first-child pseudo-class.\n                 for (Node n = removedStylableElementSibling;\n                      n != null;\n                      n = n.getNextSibling()) {\n-                    invalidateProperties(n);\n+                    invalidateProperties(n, null);\n                 }\n                 removedStylableElementSibling = null;\n             }\n@@ -2184,7 +2136,7 @@ public void handleEvent(Event evt) {\n                 styleSheetNodes = null;\n \n                 // Invalidate all the CSSStylableElements in the document.\n-                invalidateTreeProperties(document.getDocumentElement());\n+                invalidateProperties(document.getDocumentElement(), null);\n             }\n         }\n     }\n@@ -2250,20 +2202,7 @@ public void handleEvent(Event evt) {\n                 selectorAttributes.contains(name)) {\n                 // An attribute has been modified, invalidate all the\n                 // properties to correctly match attribute selectors.\n-\n-                elt.setComputedStyleMap(null, null);\n-\n-                firePropertiesChangedEvent(elt, ALL_PROPERTIES);\n-                \n-                Node c = getImportedChild(elt);\n-                if (c != null) {\n-                    propagateChanges(c, ALL_PROPERTIES);\n-                }\n-                for (Node n = elt.getFirstChild();\n-                     n != null;\n-                     n = n.getNextSibling()) {\n-                    propagateChanges(n, ALL_PROPERTIES);\n-                }\n+                invalidateProperties(elt, null);\n             }\n         }\n     }",
                "deletions": 181
            },
            {
                "sha": "e5966e08e9b3bffa3e998811677e1af132001959",
                "filename": "sources/org/apache/batik/gvt/UpdateTracker.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/552deb7b74062b708bbec0046ad12549ef4be3ad/sources/org/apache/batik/gvt/UpdateTracker.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/552deb7b74062b708bbec0046ad12549ef4be3ad/sources/org/apache/batik/gvt/UpdateTracker.java",
                "status": "modified",
                "changes": 15,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/UpdateTracker.java?ref=552deb7b74062b708bbec0046ad12549ef4be3ad",
                "patch": "@@ -56,6 +56,7 @@ public List getDirtyAreas() {\n         while (i.hasNext()) {\n             WeakReference gnWRef = (WeakReference)i.next();\n             GraphicsNode  gn     = (GraphicsNode)gnWRef.get();\n+            //GraphicsNode  srcGN  = gn;\n \n             // if the weak ref has been cleared then this node is no\n             // longer part of the GVT tree (and the change should be\n@@ -131,6 +132,8 @@ public List getDirtyAreas() {\n                 //       srcORgn + \"\\n\" + srcNRgn + \"\\n\");\n                 // <!>\n                 Shape oRgn = srcORgn;\n+                // System.err.println(\"src: \" + srcORgn);\n+                // System.err.println(\"GN: \" + srcGN);\n                 if (oat != null){\n                     oRgn = oat.createTransformedShape(srcORgn);\n                 }\n@@ -218,11 +221,13 @@ public void changeStarted(GraphicsNodeChangeEvent gnce) {\n         }\n \n         GraphicsNode chngSrc = gnce.getChangeSrc();\n-        Rectangle2D rgn;\n+        Rectangle2D rgn = null;\n         if (chngSrc != null) {\n             // A child node is moving in the tree so assign it's dirty\n             // regions to this node before it moves.\n-            rgn = new ChngSrcRect(getNodeDirtyRegion(chngSrc));\n+            Rectangle2D drgn = getNodeDirtyRegion(chngSrc);\n+            if (drgn != null)\n+                rgn = new ChngSrcRect(drgn);\n         } else {\n             // Otherwise just use gn's current region.\n             rgn = gn.getBounds();\n@@ -233,6 +238,12 @@ public void changeStarted(GraphicsNodeChangeEvent gnce) {\n             if (r2d != null) r2d = r2d.createUnion(rgn);\n             else             r2d = rgn;\n         }\n+\n+        // if ((gn instanceof CompositeGraphicsNode) && \n+        //     (r2d.getWidth() > 200)) {\n+        //     new Exception(\"Adding Large: \" + gn).printStackTrace();\n+        // }\n+\n         // Store the bounds for the future.\n         fromBounds.put(gnWRef, r2d);\n     }",
                "deletions": 2
            },
            {
                "sha": "1d16ade7b16ca68da6e479c189e1daa79ef95785",
                "filename": "sources/org/apache/batik/script/rhino/WindowWrapper.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/552deb7b74062b708bbec0046ad12549ef4be3ad/sources/org/apache/batik/script/rhino/WindowWrapper.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/552deb7b74062b708bbec0046ad12549ef4be3ad/sources/org/apache/batik/script/rhino/WindowWrapper.java",
                "status": "modified",
                "changes": 85,
                "additions": 37,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/script/rhino/WindowWrapper.java?ref=552deb7b74062b708bbec0046ad12549ef4be3ad",
                "patch": "@@ -370,34 +370,9 @@ public void getURLDone(final boolean success,\n                                final String mime,\n                                final String content) {\n             try {\n-                interpreter.callHandler(function,\n-                    new RhinoInterpreter.ArgumentsBuilder() {\n-                        public Object[] buildArguments() {\n-                            try {\n-                                Object[] arguments = new Object[1];\n-                                ScriptableObject so =\n-                                    (ScriptableObject)interpreter.evaluate\n-                                    (new StringReader(\"new Object()\"));\n-                                so.put(\"success\", so,\n-                                       (success) ?\n-                                       Boolean.TRUE : Boolean.FALSE);\n-                                if (mime != null) {\n-                                    so.put(\"contentType\", so,\n-                                           Context.toObject(mime, scope));\n-                                }\n-                                if (content != null) {\n-                                    so.put(\"content\", so,\n-                                           Context.toObject(content, scope));\n-                                }\n-                                arguments[0] = so;\n-                                return arguments;\n-                            } catch (IOException e) {\n-                                throw new WrappedException(e);\n-                            } catch (InterpreterException e) {\n-                                throw new WrappedException(e);\n-                            }\n-                        }\n-                    });\n+                interpreter.callHandler\n+                    (function,\n+                     new GetURLDoneArgBuilder(success, mime, content, scope));\n             } catch (JavaScriptException e) {\n                 throw new WrappedException(e);\n             }\n@@ -451,30 +426,44 @@ public void getURLDone(final boolean success,\n             try {\n                 interpreter.callMethod\n                     (object, COMPLETE,\n-                     new RhinoInterpreter.ArgumentsBuilder() {\n-                         public Object[] buildArguments() {\n-                             Object[] arguments = new Object[1];\n-                             ScriptableObject so =\n-                                 new NativeObject();\n-                             so.put(\"success\", so,\n-                                    (success) ?\n-                                    Boolean.TRUE : Boolean.FALSE);\n-                             if (mime != null) {\n-                                 so.put(\"contentType\", so,\n-                                        Context.toObject(mime, scope));\n-                             }\n-                             if (content != null) {\n-                                 so.put(\"content\", so,\n-                                        Context.toObject(content, scope));\n-                             }\n-                             arguments[0] = so;\n-                             return arguments;\n-                         }\n-                     });\n+                     new GetURLDoneArgBuilder(success, mime, content, scope));\n             } catch (JavaScriptException e) {\n                 Context.exit();\n                 throw new WrappedException(e);\n             }\n         }\n     }\n+\n+    static class GetURLDoneArgBuilder \n+        implements RhinoInterpreter.ArgumentsBuilder {\n+        boolean success;\n+        String mime, content;\n+        ScriptableObject scope;\n+        public GetURLDoneArgBuilder(boolean success, \n+                                    String mime, String content,\n+                                    ScriptableObject scope) {\n+            this.success = success;\n+            this.mime    = mime;\n+            this.content = content;\n+            this.scope   = scope;\n+        }\n+\n+        public Object[] buildArguments() {\n+            Object[] arguments = new Object[1];\n+            ScriptableObject so = new NativeObject();\n+            so.put(\"success\", so,\n+                   (success) ? Boolean.TRUE : Boolean.FALSE);\n+            if (mime != null) {\n+                so.put(\"contentType\", so,\n+                       Context.toObject(mime, scope));\n+            }\n+            if (content != null) {\n+                so.put(\"content\", so,\n+                       Context.toObject(content, scope));\n+            }\n+            arguments[0] = so;\n+            return arguments;\n+        }\n+    }\n+    \n }",
                "deletions": 48
            },
            {
                "sha": "b270289ff22465f2d5400723587d0a91e206bf3d",
                "filename": "test-resources/org/apache/batik/test/samplesRendering.xml",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/552deb7b74062b708bbec0046ad12549ef4be3ad/test-resources/org/apache/batik/test/samplesRendering.xml",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/552deb7b74062b708bbec0046ad12549ef4be3ad/test-resources/org/apache/batik/test/samplesRendering.xml",
                "status": "modified",
                "changes": 18,
                "additions": 10,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/test/samplesRendering.xml?ref=552deb7b74062b708bbec0046ad12549ef4be3ad",
                "patch": "@@ -253,10 +253,18 @@\n          <test id=\"samples/tests/spec/styling/alternateStylesheet.svg\" />\n          <test id=\"samples/tests/spec/styling/cssMedia.svg\" />\n          <test id=\"samples/tests/spec/styling/cssMediaList.svg\" />\n-         <test id=\"samples/tests/spec/styling/smiley.svg\" />\n          <test id=\"samples/tests/spec/styling/emptyStyle.svg\" />\n+         <test id=\"samples/tests/spec/styling/smiley.svg\" />\n+         <test id=\"samples/tests/spec/styling/styleElement.svg\" />\n \n         <!-- Alternate stylesheet tests -->\n+        <!-- Sample tests, media test -->\n+        <testGroup id=\"media\" class=\"org.apache.batik.test.svg.SVGMediaRenderingAccuracyTest\">\n+            <test id=\"samples/tests/spec/styling/cssMedia.svg-Screen\" />\n+            <test id=\"samples/tests/spec/styling/cssMedia.svg-Print\" />\n+            <test id=\"samples/tests/spec/styling/cssMedia.svg-Projection\" />\n+        </testGroup>\n+\n         <testGroup id=\"alternate\" class=\"org.apache.batik.test.svg.SVGAlternateStyleSheetRenderingAccuracyTest\">\n             <test id=\"samples/tests/spec/styling/alternateStylesheet.svg-Hot\" />\n             <test id=\"samples/tests/spec/styling/alternateStylesheet.svg-Cold\" />\n@@ -267,13 +275,6 @@\n             <test id=\"samples/tests/spec/styling/smiley.svg-Oups\" />\n         </testGroup>\n \n-        <!-- Sample tests, media test -->\n-        <testGroup id=\"media\" class=\"org.apache.batik.test.svg.SVGMediaRenderingAccuracyTest\">\n-            <test id=\"samples/tests/spec/styling/cssMedia.svg-Screen\" />\n-            <test id=\"samples/tests/spec/styling/cssMedia.svg-Print\" />\n-            <test id=\"samples/tests/spec/styling/cssMedia.svg-Projection\" />\n-        </testGroup>\n-\n     </testGroup>\n \n     <testGroup id=\"tests.spec.text\">\n@@ -369,5 +370,6 @@\n         <test id=\"samples/tests/spec/scripting/rootSizeChange.svg\" />\n         <test id=\"samples/tests/spec/scripting/rectResizeOnClick.svg\" />\n         <test id=\"samples/tests/spec/scripting/setProperty.svg\" />\n+        <test id=\"samples/tests/spec/scripting/styling.svg\" />\n     </testGroup>\n </testSuite>",
                "deletions": 8
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) glyph-orientation-* will now accept '0' without units (all other\n   angle specifications must have a unit (rad, deg, etc).\n2) Fixed a NPE with alternateStylesheet.svg when selecting another style sheet.\n3) PaintServer no longer dies if shape is null on associated object (just\n   returns null).\n4) Fixed a bug in the SVGInputHandler when a url has a null 'path' part\n   (bit of an odd case really).\n5) moonPhases now displays the Japanese version correctly.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@200998 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/97bbc640a64d50a967f0c457880f758eede4a094",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/36296c99b8b3a17395f2f6c67475a6236356301a",
        "bug_id": "xmlgraphics-batik_55",
        "file": [
            {
                "sha": "a1a77e4632c92af8a1f61d1b00a8747e86d0dd2e",
                "filename": "samples/moonPhases.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/97bbc640a64d50a967f0c457880f758eede4a094/samples/moonPhases.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/97bbc640a64d50a967f0c457880f758eede4a094/samples/moonPhases.svg",
                "status": "modified",
                "changes": 30,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/samples/moonPhases.svg?ref=97bbc640a64d50a967f0c457880f758eede4a094",
                "patch": "@@ -371,27 +371,15 @@\n             <g systemLanguage=\"ja\">\n     \n \t\t<g transform=\"translate(330, -10)\" fill=\"white\" stroke=\"none\" >\n-        <use transform=\"scale(2)\" xlink:href=\"#New_Moon\" y=\"455\" />\n-        <use transform=\"scale(2)\" xlink:href=\"#Waxing_Crescent\" y=\"407\" />\n-        <use transform=\"scale(2)\" xlink:href=\"#Waxing_Quarter\" y=\"356\" />\n-        <use transform=\"scale(2)\" xlink:href=\"#Near_Full_Before_Full\" y=\"306\" />\n-        <use transform=\"scale(2)\" xlink:href=\"#Full_Moon\" y=\"263\" />\n-        <use transform=\"scale(2)\" xlink:href=\"#Near_Full_After_Full\" y=\"212\" />\n-        <use transform=\"scale(2)\" xlink:href=\"#Waning_Quarter\" y=\"165\" />\n-        <use transform=\"scale(2)\" xlink:href=\"#Waning_Quarter\" y=\"113\" />\n-        <use transform=\"scale(2)\" xlink:href=\"#New_Moon2\" y=\"67\" />\n-\n-        <!--\n-\t\t<text x=\"0\" y=\"455.0063\" >New <tspan x=\"0\" y=\"465.0063\">moon</tspan></text>\n-\t\t<text x=\"0\" y=\"407.3906\">Waxing <tspan x=\"0\" y=\"417.3906\">crescent</tspan></text>\n-\t\t<text x=\"0\" y=\"356.3438\" >Waxing <tspan x=\"0\" y=\"366.3438\">quarter</tspan></text>\n-  \t\t<text x=\"0\" y=\"306.0146\" >Near <tspan x=\"0\" y=\"316.0146\">full</tspan></text> \n-\t\t<text x=\"0\" y=\"263.7744\" >Full <tspan x=\"0\" y=\"273.7744\">moon</tspan></text>\n-\t\t<text x=\"0\" y=\"212.3188\" >Near <tspan x=\"0\" y=\"222.3188\">full</tspan></text> \n-\t\t<text x=\"0\" y=\"165.4707\" >Waning <tspan x=\"0\" y=\"175.4707\">quarter</tspan></text>\n-\t\t<text x=\"0\" y=\"113.2466\" >Waning <tspan x=\"0\" y=\"123.2466\">crescent</tspan></text>\n-\t\t<text x=\"0\" y=\"67.1665\" >New <tspan x=\"0\" y=\"77.1665\">moon</tspan></text>\n-        -->\n+        \t   <use transform=\"scale(2)\" xlink:href=\"#New_Moon2\" y=\"33\" />\n+        \t   <use transform=\"scale(2)\" xlink:href=\"#Waning_Crescent\" y=\"56\" />\n+        \t   <use transform=\"scale(2)\" xlink:href=\"#Waning_Quarter\" y=\"82\" />\n+        \t   <use transform=\"scale(2)\" xlink:href=\"#Near_Full_After_Full\" y=\"106\" />\n+        \t   <use transform=\"scale(2)\" xlink:href=\"#Full_Moon\" y=\"130\" />\n+        \t   <use transform=\"scale(2)\" xlink:href=\"#Near_Full_Before_Full\" y=\"154\" />\n+        \t   <use transform=\"scale(2)\" xlink:href=\"#Waxing_Quarter\" y=\"178\" />\n+        \t   <use transform=\"scale(2)\" xlink:href=\"#Waxing_Crescent\" y=\"202\" />\n+        \t   <use transform=\"scale(2)\" xlink:href=\"#New_Moon\" y=\"227\" />\n \t\t</g>\n \n         <g filter=\"url(#bgRect)\">",
                "deletions": 21
            },
            {
                "sha": "22df53f404724113d6aa2a2cab63a4c245e74e9a",
                "filename": "sources/org/apache/batik/apps/svgbrowser/SVGInputHandler.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/97bbc640a64d50a967f0c457880f758eede4a094/sources/org/apache/batik/apps/svgbrowser/SVGInputHandler.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/97bbc640a64d50a967f0c457880f758eede4a094/sources/org/apache/batik/apps/svgbrowser/SVGInputHandler.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/apps/svgbrowser/SVGInputHandler.java?ref=97bbc640a64d50a967f0c457880f758eede4a094",
                "patch": "@@ -76,6 +76,7 @@ public boolean accept(ParsedURL purl) {\n         }\n \n         String path = purl.getPath();\n+        if (path == null) return false;\n \n         return accept(path);\n     }\n@@ -84,6 +85,7 @@ public boolean accept(ParsedURL purl) {\n      * Returns true if the resource at the given path can be handled\n      */\n     public boolean accept(String path) {\n+        if (path == null) return false;\n         for (int i=0; i<SVG_FILE_EXTENSIONS.length; i++) {\n             if (path.endsWith(SVG_FILE_EXTENSIONS[i])) {\n                 return true;",
                "deletions": 0
            },
            {
                "sha": "eb9fed979055b22e33a08b1376d58e89eb6b3937",
                "filename": "sources/org/apache/batik/bridge/BridgeContext.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/97bbc640a64d50a967f0c457880f758eede4a094/sources/org/apache/batik/bridge/BridgeContext.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/97bbc640a64d50a967f0c457880f758eede4a094/sources/org/apache/batik/bridge/BridgeContext.java",
                "status": "modified",
                "changes": 6,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/BridgeContext.java?ref=97bbc640a64d50a967f0c457880f758eede4a094",
                "patch": "@@ -850,8 +850,10 @@ public void dispose() {\n \n         SVGOMDocument svgDocument = (SVGOMDocument)document;\n         CSSEngine cssEngine = svgDocument.getCSSEngine();\n-        cssEngine.removeCSSEngineListener(cssPropertiesChangedListener);\n-        cssEngine.dispose();\n+        if (cssEngine != null) {\n+            cssEngine.removeCSSEngineListener(cssPropertiesChangedListener);\n+            cssEngine.dispose();\n+        }\n         if (focusManager != null) {\n             focusManager.dispose();\n         }",
                "deletions": 2
            },
            {
                "sha": "d0c00fa1d6a4deeafba74b56aaa33fe2c3ff0a4b",
                "filename": "sources/org/apache/batik/bridge/PaintServer.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/97bbc640a64d50a967f0c457880f758eede4a094/sources/org/apache/batik/bridge/PaintServer.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/97bbc640a64d50a967f0c457880f758eede4a094/sources/org/apache/batik/bridge/PaintServer.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/PaintServer.java?ref=97bbc640a64d50a967f0c457880f758eede4a094",
                "patch": "@@ -148,6 +148,7 @@ public static ShapePainter convertFillAndStroke(Element e,\n         Paint strokePaint = convertStrokePaint(e, node, ctx);\n \n         Shape shape = node.getShape();\n+        if (shape == null) return null;\n         if (fillPaint != null && strokePaint != null) {\n             FillShapePainter fp = new FillShapePainter(shape);\n             fp.setPaint(fillPaint);",
                "deletions": 0
            },
            {
                "sha": "f40217804f7ab012c9a0fae94cc829b1e5168080",
                "filename": "sources/org/apache/batik/css/engine/value/svg/GlyphOrientationManager.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/97bbc640a64d50a967f0c457880f758eede4a094/sources/org/apache/batik/css/engine/value/svg/GlyphOrientationManager.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/97bbc640a64d50a967f0c457880f758eede4a094/sources/org/apache/batik/css/engine/value/svg/GlyphOrientationManager.java",
                "status": "modified",
                "changes": 15,
                "additions": 15,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/css/engine/value/svg/GlyphOrientationManager.java?ref=97bbc640a64d50a967f0c457880f758eede4a094",
                "patch": "@@ -60,7 +60,22 @@ public Value createValue(LexicalUnit lu, CSSEngine engine)\n \tcase LexicalUnit.SAC_RADIAN:\n             return new FloatValue(CSSPrimitiveValue.CSS_RAD,\n                                   lu.getFloatValue());\n+\tcase LexicalUnit.SAC_INTEGER:\n+        { \n+            float n = lu.getIntegerValue();\n+            if (n == 0f)\n+                return new FloatValue(CSSPrimitiveValue.CSS_DEG, 0f);\n+            break;\n         }\n+\tcase LexicalUnit.SAC_REAL:\n+        { \n+            float n = lu.getFloatValue();\n+            if (n == 0f)\n+                return new FloatValue(CSSPrimitiveValue.CSS_DEG, 0f);\n+            break;\n+        }\n+    }\n+        \n         throw createInvalidLexicalUnitDOMException(lu.getLexicalUnitType());\n     }\n ",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "xmlgraphics-batik",
        "message": "1) Applied patch 28188, fixed tooltip text & title text, thanks Glen\n2) Applied patch 28487, fixed enabled/disabled state fot\n   toolbar buttons, thanks Glen\n3) Added support for 'deselectAll' SVG DOM call.\n4) Fixed NPE regression with Images in a dynamic context.\n5) Fixed rendering regression with use elements in a dynamic context.\n6) Added support for get[Screen]PixelUnitToMillimeterX/Y\n7) Fixed bug in text selection (programatically selected text wouldn't\n   clear properly.\n8) Updated a number of reference images\n9) Permission tests now allow 'stopThread' - modifyThread prevents\n   stopping other threads.\n10) Tweaks to memory leak tests.\nPR: 28188, 28487\nObtained from: Glen Mazza\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/xmlgraphics/batik/trunk@201372 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/xmlgraphics-batik/commit/cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
        "parent": "https://github.com/apache/xmlgraphics-batik/commit/bb38ef825c3fa978a88361367b77d8e9d386ac0e",
        "bug_id": "xmlgraphics-batik_56",
        "file": [
            {
                "sha": "1380de948b0409f59f9f8966d71275151fe5b7f6",
                "filename": "build.xml",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/build.xml",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/build.xml",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/build.xml?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -1091,7 +1091,7 @@ To display the available targets type:\n     <java fork=\"yes\"\n           classname=\"${class-prefix}.test.xml.XMLTestSuiteRunner\">\n <!--      <jvmarg value=\"-Xrunhprof:format=b\" /> -->\n-<!--      <jvmarg value=\"-Xrunhprof:net=localhost:7001,format=b\" /> -->\n+<!--      <jvmarg value=\"-Xrunhprof:net=localhost:1234,format=b\" /> -->\n       <jvmarg value=\"-Xmx512m\"/>  <jvmarg value=\"-Xms64m\"/>\n       <classpath>\n         <pathelement location=\"${dest}\" />",
                "deletions": 1
            },
            {
                "sha": "1d82a216fda7f78078f8d4749ca5ab3f231b610e",
                "filename": "resources/org/apache/batik/apps/svgbrowser/resources/GUI.properties",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/resources/org/apache/batik/apps/svgbrowser/resources/GUI.properties",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/resources/org/apache/batik/apps/svgbrowser/resources/GUI.properties",
                "status": "modified",
                "changes": 4,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/resources/org/apache/batik/apps/svgbrowser/resources/GUI.properties?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -384,11 +384,11 @@ ToolReload.tooltip   = Reload the current document.\n \n ToolBack.icon      = resources/back.gif\n ToolBack.action    = BackAction\n-ToolBack.tooltip   = Back To The Previous The Document\n+ToolBack.tooltip   = Move back to the previous document.\n \n ToolForward.icon      = resources/forward.gif\n ToolForward.action    = ForwardAction\n-ToolForward.tooltip   = Forward To The Next The Document\n+ToolForward.tooltip   = Move forward to the next document.\n \n ToolPrint.icon      = resources/print.gif\n ToolPrint.action    = PrintAction",
                "deletions": 2
            },
            {
                "sha": "8cf61e222fcaff4844eaee004b661e46f50aeae3",
                "filename": "sources/org/apache/batik/apps/svgbrowser/JSVGViewerFrame.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/apps/svgbrowser/JSVGViewerFrame.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/apps/svgbrowser/JSVGViewerFrame.java",
                "status": "modified",
                "changes": 13,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/apps/svgbrowser/JSVGViewerFrame.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -1948,18 +1948,15 @@ public void setSVGDocument(SVGDocument svgDocument,\n \n         String dt = svgDocumentTitle;\n         if (dt.length() != 0) {\n-            setTitle(title + \":\" + dt);\n+            setTitle(title + \": \" + dt);\n         } else {\n             int i = s.lastIndexOf(\"/\");\n-            if (i == -1) {\n+            if (i == -1)\n                 i = s.lastIndexOf(\"\\\\\");\n-                if (i == -1) {\n-                    setTitle(title + \":\" + s);\n-                } else {\n-                    setTitle(title + \":\" + s.substring(i + 1));\n-                }\n+            if (i == -1) {\n+                setTitle(title + \": \" + s);\n             } else {\n-                setTitle(title + \":\" + s.substring(i + 1));\n+                setTitle(title + \": \" + s.substring(i + 1));\n             }\n         }\n ",
                "deletions": 8
            },
            {
                "sha": "25887ec193c72477a1fd9fddcd863800825bc78b",
                "filename": "sources/org/apache/batik/bridge/AbstractGraphicsNodeBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/AbstractGraphicsNodeBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/AbstractGraphicsNodeBridge.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/AbstractGraphicsNodeBridge.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -433,4 +433,8 @@ public float getFontSize() {\n         return CSSUtilities.getComputedStyle\n             (e, SVGCSSEngine.FONT_SIZE_INDEX).getFloatValue();\n     }\n+\n+    public void deselectAll() {\n+        ctx.getUserAgent().deselectAll();\n+    }\n }",
                "deletions": 0
            },
            {
                "sha": "746c5563e44cd9533f72f003454db9428378ce4a",
                "filename": "sources/org/apache/batik/bridge/SVGImageElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/SVGImageElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/SVGImageElementBridge.java",
                "status": "modified",
                "changes": 5,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGImageElementBridge.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -713,7 +713,10 @@ public void dispose() {\n             tgt.removeEventListener(SVG_EVENT_MOUSEUP,   listener, false);\n             listener = null;\n         }\n-        subCtx.removeUIEventListeners(imgDocument);\n+        if (subCtx != null) {\n+            subCtx.removeUIEventListeners(imgDocument);\n+        }\n+\n         imgDocument = null;\n         subCtx = null;\n     }",
                "deletions": 1
            },
            {
                "sha": "46a056edce11b5a668bdd3b82f0a6244431bae08",
                "filename": "sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/SVGTextElementBridge.java",
                "status": "modified",
                "changes": 7,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGTextElementBridge.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -2028,6 +2028,13 @@ public float getSubStringLength(int charnum, int nchars){\n         public int getCharNumAtPosition(float x , float y){\n             return textBridge.getCharNumAtPosition(e,x,y);\n         }\n+        /**\n+         * Informs the user agent that the text selection should be\n+         * cleared.\n+         */\n+        public void deselectAll() {\n+            textBridge.deselectAll();\n+        }\n     }\n \n     /**",
                "deletions": 0
            },
            {
                "sha": "709ecced4030304a01cf203a7266cfe6d2aa4b3d",
                "filename": "sources/org/apache/batik/bridge/SVGUseElementBridge.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/SVGUseElementBridge.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/SVGUseElementBridge.java",
                "status": "modified",
                "changes": 13,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/SVGUseElementBridge.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -144,6 +144,7 @@ public GraphicsNode createGraphicsNode(BridgeContext ctx, Element e) {\n         }\n \n         Element refElement = ctx.getReferencedElement(e, uri);\n+\n         SVGOMDocument document\n             = (SVGOMDocument)e.getOwnerDocument();\n         SVGOMDocument refDocument\n@@ -222,20 +223,15 @@ public GraphicsNode createGraphicsNode(BridgeContext ctx, Element e) {\n         CSSUtilities.computeStyleAndURIs(refElement, localRefElement, uri);\n \n         GVTBuilder builder = ctx.getGVTBuilder();\n-        GraphicsNode refNode = builder.build(theCtx, g);\n+        GraphicsNode refNode = builder.build(ctx, g);\n \n         ///////////////////////////////////////////////////////////////////////\n-        boolean update = true;\n         if (gn == null) {\n             gn = new CompositeGraphicsNode();\n-            update = false;\n-        }\n-\n-        if (update) {\n+        } else {\n             int s = gn.size();\n-            for (int i=0; i<s; i++) {\n+            for (int i=0; i<s; i++)\n                 gn.remove(0);\n-            }\n         }\n \n         gn.getChildren().add(refNode);\n@@ -248,6 +244,7 @@ public GraphicsNode createGraphicsNode(BridgeContext ctx, Element e) {\n         // 'visibility'\n         gn.setVisible(CSSUtilities.convertVisibility(e));\n \n+\n         // 'enable-background'\n         Rectangle2D r = CSSUtilities.convertEnableBackground(e);\n         if (r != null) {",
                "deletions": 8
            },
            {
                "sha": "65fd4520780f125b40e72307e1dcfd3afd519a44",
                "filename": "sources/org/apache/batik/bridge/UserAgent.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/UserAgent.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/UserAgent.java",
                "status": "modified",
                "changes": 5,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/UserAgent.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -174,6 +174,11 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n      */\n     void setTextSelection(Mark start, Mark end);\n \n+    /**\n+     * Informs the user agent that the text selection should be cleared.\n+     */\n+    void deselectAll();\n+\n     /**\n      * Returns the class name of the XML parser.\n      */",
                "deletions": 0
            },
            {
                "sha": "98ac883a89b4446d0224b556f05d172ba0c5a7e8",
                "filename": "sources/org/apache/batik/bridge/UserAgentAdapter.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/UserAgentAdapter.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/bridge/UserAgentAdapter.java",
                "status": "modified",
                "changes": 5,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/bridge/UserAgentAdapter.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -253,6 +253,11 @@ public void setSVGCursor(Cursor cursor) { }\n      */\n     public void setTextSelection(Mark start, Mark end) { }\n \n+    /**\n+     * This user agent doesn't display text selections so nothing to clear.\n+     */\n+    public void deselectAll() { }\n+\n     /**\n      * Unsupported operation.\n      */",
                "deletions": 0
            },
            {
                "sha": "d8f34a2dea2e0837b9fcf3dac4a4590387a657c5",
                "filename": "sources/org/apache/batik/dom/svg/SVGContext.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/dom/svg/SVGContext.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/dom/svg/SVGContext.java",
                "status": "modified",
                "changes": 6,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGContext.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -120,4 +120,10 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n      * Returns the font-size on the associated element.\n      */\n     float getFontSize();\n+\n+    /**\n+     * Informs the user agent that the text selection should be\n+     * cleared.\n+     */\n+    void deselectAll();\n }",
                "deletions": 0
            },
            {
                "sha": "f4a6acb5064ab659fb5cda8a9cbd5d740933af10",
                "filename": "sources/org/apache/batik/dom/svg/SVGOMSVGElement.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/dom/svg/SVGOMSVGElement.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/dom/svg/SVGOMSVGElement.java",
                "status": "modified",
                "changes": 10,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/dom/svg/SVGOMSVGElement.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -227,16 +227,16 @@ public SVGRect getViewport() {\n     } \n \n     public float getPixelUnitToMillimeterX( ) {\n-        throw new Error();\n+        return getSVGContext().getPixelUnitToMillimeter();\n     }\n     public float getPixelUnitToMillimeterY( ) {\n-        throw new Error();\n+        return getSVGContext().getPixelUnitToMillimeter();\n     }\n     public float getScreenPixelToMillimeterX( ) {\n-        throw new Error();\n+        return getSVGContext().getPixelUnitToMillimeter();\n     }\n     public float getScreenPixelToMillimeterY( ) {\n-        throw new Error();\n+        return getSVGContext().getPixelUnitToMillimeter();\n     }\n     public boolean getUseCurrentView( ) {\n         throw new Error();\n@@ -359,7 +359,7 @@ public boolean       checkEnclosure ( SVGElement element, SVGRect rect ) {\n         throw new Error();\n     }\n     public void          deselectAll (  ) {\n-        throw new Error();\n+        getSVGContext().deselectAll();\n     }\n \n     /**",
                "deletions": 5
            },
            {
                "sha": "76dbe882b9e3cdd5826a010588fa3e683f9124cc",
                "filename": "sources/org/apache/batik/gvt/text/ConcreteTextSelector.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/gvt/text/ConcreteTextSelector.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/gvt/text/ConcreteTextSelector.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/gvt/text/ConcreteTextSelector.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -149,6 +149,7 @@ public void setSelection(Mark begin, Mark end) {\n         if (node != end.getTextNode())\n             throw new Error(\"Markers not from same TextNode\");\n         node.setSelection(begin, end);\n+        selectionNode = node;\n         Object selection = getSelection();\n         Shape  shape     = node.getHighlightShape();\n         dispatchSelectionEvent(new SelectionEvent",
                "deletions": 0
            },
            {
                "sha": "5dbc50ec411e801ff75da0e34b95fd7404540a1b",
                "filename": "sources/org/apache/batik/swing/svg/JSVGComponent.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/swing/svg/JSVGComponent.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/swing/svg/JSVGComponent.java",
                "status": "modified",
                "changes": 36,
                "additions": 32,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/swing/svg/JSVGComponent.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -839,7 +839,10 @@ protected CanvasGraphicsNode getCanvasGraphicsNode(GraphicsNode gn) {\n         if (!(gn instanceof CompositeGraphicsNode))\n             return null;\n         CompositeGraphicsNode cgn = (CompositeGraphicsNode)gn;\n-        gn = (GraphicsNode)cgn.getChildren().get(0);\n+        List children = cgn.getChildren();\n+        if (children.size() == 0) \n+            return null;\n+        gn = (GraphicsNode)children.get(0);\n         if (!(gn instanceof CanvasGraphicsNode))\n             return null;\n         return (CanvasGraphicsNode)gn;\n@@ -2401,7 +2404,7 @@ public void run() {\n         }\n         \n         /**\n-         * Informs the user agent that the text selection has changed.\n+         * Informs the user agent that the text selection should changed.\n          * @param start The Mark for the start of the selection.\n          * @param end   The Mark for the end of the selection.\n          */\n@@ -2416,7 +2419,24 @@ public void run() {\n                     });\n             }\n         }\n-        \n+\n+        /**\n+         * Informs the user agent that the text selection should changed.\n+         * @param start The Mark for the start of the selection.\n+         * @param end   The Mark for the end of the selection.\n+         */\n+        public void deselectAll() {\n+            if (EventQueue.isDispatchThread()) {\n+                userAgent.deselectAll();\n+            } else {\n+                EventQueue.invokeLater(new Runnable() {\n+                        public void run() {\n+                            userAgent.deselectAll();\n+                        }\n+                    });\n+            }\n+        }\n+\n         /**\n          * Returns the class name of the XML parser.\n          */\n@@ -3098,7 +3118,15 @@ public void setSVGCursor(Cursor cursor) {\n          * @param end   The Mark for the end of the selection.\n          */\n         public void setTextSelection(Mark start, Mark end) {\n-            JSVGComponent.this.textSelectionManager.setSelection(start, end);\n+            JSVGComponent.this.select(start, end);\n+        }\n+\n+        /**\n+         * Informs the user agent that the text selection should be\n+         * cleared.\n+         */\n+        public void deselectAll() {\n+            JSVGComponent.this.deselectAll();\n         }\n \n         /**",
                "deletions": 4
            },
            {
                "sha": "bea402a682c138235a68cebd6727cbd43ae170ce",
                "filename": "sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java",
                "status": "modified",
                "changes": 17,
                "additions": 11,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/transcoder/SVGAbstractTranscoder.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -57,7 +57,8 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n import java.net.URL;\n import java.net.MalformedURLException;\n import java.util.StringTokenizer;\n-import java.util.Vector;\n+import java.util.LinkedList;\n+import java.util.List;\n \n import org.apache.batik.bridge.BaseScriptingEnvironment;\n import org.apache.batik.bridge.BridgeContext;\n@@ -272,7 +273,8 @@ protected void transcode(Document document,\n                 throw new TranscoderException(ex);\n             }\n \n-            if (Px.isIdentity() && (width != docWidth || height != docHeight)) {\n+            if (Px.isIdentity() && \n+                (width != docWidth || height != docHeight)) {\n                 // The document has no viewBox, we need to resize it by hand.\n                 // we want to keep the document size ratio\n                 float xscale, yscale;\n@@ -312,7 +314,10 @@ protected CanvasGraphicsNode getCanvasGraphicsNode(GraphicsNode gn) {\n         if (!(gn instanceof CompositeGraphicsNode))\n             return null;\n         CompositeGraphicsNode cgn = (CompositeGraphicsNode)gn;\n-        gn = (GraphicsNode)cgn.getChildren().get(0);\n+        List children = cgn.getChildren();\n+        if (children.size() == 0) \n+            return null;\n+        gn = (GraphicsNode)children.get(0);\n         if (!(gn instanceof CanvasGraphicsNode))\n             return null;\n         return (CanvasGraphicsNode)gn;\n@@ -775,7 +780,7 @@ protected void setImageSize(float docWidth, float docHeight) {\n         /**\n          * Vector containing the allowed script types\n          */\n-        protected Vector scripts;\n+        protected List scripts;\n \n         public SVGAbstractTranscoderUserAgent() {\n             addStdFeatures();\n@@ -984,7 +989,7 @@ public ScriptSecurity getScriptSecurity(String scriptType,\n          * values for the &lt;script&gt; element's type attribute.\n          */\n         protected void computeAllowedScripts(){\n-            scripts = new Vector();\n+            scripts = new LinkedList();\n             if (!SVGAbstractTranscoder.this.hints.containsKey\n                 (KEY_ALLOWED_SCRIPT_TYPES)) {\n                 return;\n@@ -996,7 +1001,7 @@ protected void computeAllowedScripts(){\n                 \n             StringTokenizer st = new StringTokenizer(allowedScripts, \",\");\n             while (st.hasMoreTokens()) {\n-                scripts.addElement(st.nextToken());\n+                scripts.add(st.nextToken());\n             }\n         }\n ",
                "deletions": 6
            },
            {
                "sha": "494204bb3aefab376d9ce2d2d947bb79bf85e7c6",
                "filename": "sources/org/apache/batik/transcoder/image/ImageTranscoder.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/transcoder/image/ImageTranscoder.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/transcoder/image/ImageTranscoder.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/transcoder/image/ImageTranscoder.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -131,6 +131,7 @@ protected void transcode(Document document,\n         // ImageRenderer renderer = rendFactory.createDynamicImageRenderer();\n         ImageRenderer renderer = rendFactory.createStaticImageRenderer();\n         renderer.updateOffScreen(w, h);\n+        // curTxf.translate(0.5, 0.5);\n         renderer.setTransform(curTxf);\n         renderer.setTree(this.root);\n         this.root = null; // We're done with it...",
                "deletions": 0
            },
            {
                "sha": "593eae44af4fe6cb5a2bbfa2c8fba56d75604403",
                "filename": "sources/org/apache/batik/util/gui/resource/ButtonFactory.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/util/gui/resource/ButtonFactory.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/sources/org/apache/batik/util/gui/resource/ButtonFactory.java",
                "status": "modified",
                "changes": 9,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/sources/org/apache/batik/util/gui/resource/ButtonFactory.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -4,7 +4,7 @@\n                    The Apache Software License, Version 1.1\n  ============================================================================\n \n- Copyright (C) 1999-2003 The Apache Software Foundation. All rights reserved.\n+ Copyright (C) 1999-2004 The Apache Software Foundation. All rights reserved.\n \n  Redistribution and use in source and binary forms, with or without modifica-\n  tion, are permitted provided that the following conditions are met:\n@@ -226,7 +226,12 @@ private void initializeButton(AbstractButton b, String name)\n                                                    name+ACTION_SUFFIX);\n \t    }\n \t    b.setAction(a);\n-            b.setText(getString(name+TEXT_SUFFIX));\n+            try {\n+                b.setText(getString(name+TEXT_SUFFIX));\n+            } catch (MissingResourceException mre) {\n+                // not all buttons have text defined so just\n+                // ignore this exception.\n+            }\n \t    if (a instanceof JComponentModifier) {\n \t\t((JComponentModifier)a).addJComponent(b);\n \t    }",
                "deletions": 2
            },
            {
                "sha": "e64c71cca4b71dea321dfa710d9ca182d2ae2efb",
                "filename": "test-references/samples/tests/spec/text/textBiDi-arabic-5-40.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-arabic-5-40.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-arabic-5-40.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textBiDi-arabic-5-40.png?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "deletions": 0
            },
            {
                "sha": "8034c9424437ae850e8e981f39374539453d5221",
                "filename": "test-references/samples/tests/spec/text/textBiDi-cyrillic-4-24.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-cyrillic-4-24.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-cyrillic-4-24.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textBiDi-cyrillic-4-24.png?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "deletions": 0
            },
            {
                "sha": "4dd298211bb685d4c9d107943f00180ac430ba41",
                "filename": "test-references/samples/tests/spec/text/textBiDi-greek-0-35.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-greek-0-35.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-greek-0-35.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textBiDi-greek-0-35.png?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "deletions": 0
            },
            {
                "sha": "430213d8e7adef052940f5e58bc254e31b6e469d",
                "filename": "test-references/samples/tests/spec/text/textBiDi-hebrew-10-20.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-hebrew-10-20.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-hebrew-10-20.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textBiDi-hebrew-10-20.png?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "deletions": 0
            },
            {
                "sha": "4a012bc5ffd6ccb50d77f8fba8a2b4afc83a829f",
                "filename": "test-references/samples/tests/spec/text/textBiDi-latin-0-20.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-latin-0-20.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-latin-0-20.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textBiDi-latin-0-20.png?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "deletions": 0
            },
            {
                "sha": "0903c2dbf875b3ca1870887de9fc8d1dc4309bc1",
                "filename": "test-references/samples/tests/spec/text/textBiDi-latin-extended-0-15.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-latin-extended-0-15.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi-latin-extended-0-15.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textBiDi-latin-extended-0-15.png?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "deletions": 0
            },
            {
                "sha": "5adf586b6936bf2bd09c12b1bff0dd4c2f41c39c",
                "filename": "test-references/samples/tests/spec/text/textBiDi.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textBiDi.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textBiDi.png?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "deletions": 0
            },
            {
                "sha": "4c6ce30806c1139620f058b0e41f366b002bd1e6",
                "filename": "test-references/samples/tests/spec/text/textDecoration2.png",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textDecoration2.png",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-references/samples/tests/spec/text/textDecoration2.png",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-references/samples/tests/spec/text/textDecoration2.png?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "deletions": 0
            },
            {
                "sha": "587570e519ae5835ea8157e2fa29150d43f3b86e",
                "filename": "test-resources/org/apache/batik/bridge/JarCheckPermissionsDenied.jar",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/JarCheckPermissionsDenied.jar",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/JarCheckPermissionsDenied.jar",
                "status": "modified",
                "changes": 0,
                "additions": 0,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/bridge/JarCheckPermissionsDenied.jar?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "deletions": 0
            },
            {
                "sha": "958adaf8af095a7dcc160ec5a3385509af859698",
                "filename": "test-resources/org/apache/batik/bridge/JarCheckPermissionsDenied.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/JarCheckPermissionsDenied.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/JarCheckPermissionsDenied.java",
                "status": "modified",
                "changes": 38,
                "additions": 26,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/bridge/JarCheckPermissionsDenied.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -134,7 +134,6 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n         {\"RuntimePermission setFactory\", new RuntimePermission(\"setFactory\")}, \n         {\"RuntimePermission setIO\", new RuntimePermission(\"setIO\")}, \n         {\"RuntimePermission modifyThread\", new RuntimePermission(\"modifyThread\")}, \n-        {\"RuntimePermission stopThread\", new RuntimePermission(\"stopThread\")}, \n         {\"RuntimePermission modifyThreadGroup\", new RuntimePermission(\"modifyThreadGroup\")}, \n         {\"RuntimePermission getProtectionDomain\", new RuntimePermission(\"getProtectionDomain\")}, \n         {\"RuntimePermission readFileDescriptor\", new RuntimePermission(\"readFileDescriptor\")}, \n@@ -190,23 +189,38 @@ public void run(final Document document, final Window win){\n         // class has permission to access the server\n         //\n         URL docURL = ((SVGOMDocument)document).getURLObject();\n-        if (docURL != null && docURL.getHost() != null && !\"\".equals(docURL.getHost())) {\n-            permissions = new Object[basePermissions.length + 3][2];\n-            System.arraycopy(basePermissions, 0, \n-                             permissions, 3, basePermissions.length);\n+        if ((docURL != null) && \n+            (docURL.getHost() != null) && \n+            (!\"\".equals(docURL.getHost()))) {\n+\n+            permissions = new Object[basePermissions.length + 4][2];\n \n             String docHost = docURL.getHost();\n             if (docURL.getPort() != -1) {\n                 docHost += \":\" + docURL.getPort();\n             }\n \n-            permissions[0][0] = \"SocketPermission accept \" + docHost;\n-            permissions[0][1] = new SocketPermission(docHost, \"accept\");\n-            permissions[1][0] = \"SocketPermission connect \" + docHost;\n-            permissions[1][1] = new SocketPermission(docHost, \"connect\");\n-            permissions[2][0] = \"SocketPermission resolve \" + docHost;\n-            permissions[2][1] = new SocketPermission(docHost, \"resolve\");\n-            nGrantedTmp = 3;\n+            int i=0;\n+            permissions[i][0] = \"SocketPermission accept \" + docHost;\n+            permissions[i][1] = new SocketPermission(docHost, \"accept\");\n+            i++;\n+\n+            permissions[i][0] = \"SocketPermission connect \" + docHost;\n+            permissions[i][1] = new SocketPermission(docHost, \"connect\");\n+            i++;\n+\n+            permissions[i][0] = \"SocketPermission resolve \" + docHost;\n+            permissions[i][1] = new SocketPermission(docHost, \"resolve\");\n+            i++;\n+            \n+            permissions[i][0] = \"RuntimePermission stopThread\";\n+            permissions[i][1] = new RuntimePermission(\"stopThread\");\n+            i++;\n+\n+            nGrantedTmp = i;\n+\n+            System.arraycopy(basePermissions, 0, permissions, i, \n+                             basePermissions.length);\n         } else {\n             permissions = basePermissions;\n         }",
                "deletions": 12
            },
            {
                "sha": "ed57b623e35e4800ed012de207315c7cd1726213",
                "filename": "test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDenied.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDenied.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDenied.svg",
                "status": "modified",
                "changes": 14,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDenied.svg?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -116,7 +116,6 @@ var basePermissions = [\n         [\"RuntimePermission setFactory\", new RuntimePermission(\"setFactory\")], \n         [\"RuntimePermission setIO\", new RuntimePermission(\"setIO\")], \n         [\"RuntimePermission modifyThread\", new RuntimePermission(\"modifyThread\")], \n-        [\"RuntimePermission stopThread\", new RuntimePermission(\"stopThread\")], \n         [\"RuntimePermission modifyThreadGroup\", new RuntimePermission(\"modifyThreadGroup\")], \n         [\"RuntimePermission getProtectionDomain\", new RuntimePermission(\"getProtectionDomain\")], \n         [\"RuntimePermission readFileDescriptor\", new RuntimePermission(\"readFileDescriptor\")], \n@@ -159,18 +158,19 @@ function init(){\n             docHost += \":\" + docURL.getPort();\n         }\n \n-        permissions[0] = [\"SocketPermission accept \" + docHost,\n+        nGranted = 0;\n+        permissions[nGranted++] = [\"SocketPermission accept \" + docHost,\n                           new SocketPermission(docHost, \"accept\")];\n-        permissions[1] = [\"SocketPermission connect \" + docHost,\n+        permissions[nGranted++] = [\"SocketPermission connect \" + docHost,\n                           new SocketPermission(docHost, \"connect\")];\n-        permissions[2] = [\"SocketPermission resolve \" + docHost,\n+        permissions[nGranted++] = [\"SocketPermission resolve \" + docHost,\n                           new SocketPermission(docHost, \"resolve\")];\n-        // permissions.concat(basePermissions);\n+        permissions[nGranted++] = [\"RuntimePermission stopThread\", \n+                                   new RuntimePermission(\"stopThread\")];\n \n         for (var i=0; i<basePermissions.length; i++){\n-            permissions[3+i] = basePermissions[i];\n+            permissions[nGranted+i] = basePermissions[i];\n         }\n-        nGranted = 3;\n     } else {\n         permissions = basePermissions;\n     }",
                "deletions": 7
            },
            {
                "sha": "2d3a7ee1a62f0ba579e8683c0f9b1d3e9bffbc7b",
                "filename": "test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDenied2.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDenied2.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDenied2.svg",
                "status": "modified",
                "changes": 14,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDenied2.svg?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -135,7 +135,6 @@ var basePermissions = [\n         [\"RuntimePermission setFactory\", new RuntimePermission(\"setFactory\")], \n         [\"RuntimePermission setIO\", new RuntimePermission(\"setIO\")], \n         [\"RuntimePermission modifyThread\", new RuntimePermission(\"modifyThread\")], \n-        [\"RuntimePermission stopThread\", new RuntimePermission(\"stopThread\")], \n         [\"RuntimePermission modifyThreadGroup\", new RuntimePermission(\"modifyThreadGroup\")], \n         [\"RuntimePermission getProtectionDomain\", new RuntimePermission(\"getProtectionDomain\")], \n         [\"RuntimePermission readFileDescriptor\", new RuntimePermission(\"readFileDescriptor\")], \n@@ -178,18 +177,19 @@ function init(){\n             docHost += \":\" + docURL.getPort();\n         }\n \n-        permissions[0] = [\"SocketPermission accept \" + docHost,\n+        nGranted = 0;\n+        permissions[nGranted++] = [\"SocketPermission accept \" + docHost,\n                           new SocketPermission(docHost, \"accept\")];\n-        permissions[1] = [\"SocketPermission connect \" + docHost,\n+        permissions[nGranted++] = [\"SocketPermission connect \" + docHost,\n                           new SocketPermission(docHost, \"connect\")];\n-        permissions[2] = [\"SocketPermission resolve \" + docHost,\n+        permissions[nGranted++] = [\"SocketPermission resolve \" + docHost,\n                           new SocketPermission(docHost, \"resolve\")];\n-        // permissions.concat(basePermissions);\n+        permissions[nGranted++] = [\"RuntimePermission stopThread\", \n+                                   new RuntimePermission(\"stopThread\")];\n \n         for (var i=0; i<basePermissions.length; i++){\n-            permissions[3+i] = basePermissions[i];\n+            permissions[nGranted+i] = basePermissions[i];\n         }\n-        nGranted = 3;\n     } else {\n         permissions = basePermissions;\n     }",
                "deletions": 7
            },
            {
                "sha": "ed3c82096de62a3a8fa53ccad4e6a3ed48055264",
                "filename": "test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDeniedEval.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDeniedEval.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDeniedEval.svg",
                "status": "modified",
                "changes": 14,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDeniedEval.svg?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -135,7 +135,6 @@ var basePermissions = [\n         [\"RuntimePermission setFactory\", new RuntimePermission(\"setFactory\")], \n         [\"RuntimePermission setIO\", new RuntimePermission(\"setIO\")], \n         [\"RuntimePermission modifyThread\", new RuntimePermission(\"modifyThread\")], \n-        [\"RuntimePermission stopThread\", new RuntimePermission(\"stopThread\")], \n         [\"RuntimePermission modifyThreadGroup\", new RuntimePermission(\"modifyThreadGroup\")], \n         [\"RuntimePermission getProtectionDomain\", new RuntimePermission(\"getProtectionDomain\")], \n         [\"RuntimePermission readFileDescriptor\", new RuntimePermission(\"readFileDescriptor\")], \n@@ -178,18 +177,19 @@ function init(){\n             docHost += \":\" + docURL.getPort();\n         }\n \n-        permissions[0] = [\"SocketPermission accept \" + docHost,\n+        nGranted = 0;\n+        permissions[nGranted++] = [\"SocketPermission accept \" + docHost,\n                           new SocketPermission(docHost, \"accept\")];\n-        permissions[1] = [\"SocketPermission connect \" + docHost,\n+        permissions[nGranted++] = [\"SocketPermission connect \" + docHost,\n                           new SocketPermission(docHost, \"connect\")];\n-        permissions[2] = [\"SocketPermission resolve \" + docHost,\n+        permissions[nGranted++] = [\"SocketPermission resolve \" + docHost,\n                           new SocketPermission(docHost, \"resolve\")];\n-        // permissions.concat(basePermissions);\n+        permissions[nGranted++] = [\"RuntimePermission stopThread\", \n+                                   new RuntimePermission(\"stopThread\")];\n \n         for (var i=0; i<basePermissions.length; i++){\n-            permissions[3+i] = basePermissions[i];\n+            permissions[nGranted+i] = basePermissions[i];\n         }\n-        nGranted = 3;\n     } else {\n         permissions = basePermissions;\n     }",
                "deletions": 7
            },
            {
                "sha": "e1b23798017c0023ddfb9966ca99e80bbba4cee7",
                "filename": "test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDeniedFunction.svg",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDeniedFunction.svg",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDeniedFunction.svg",
                "status": "modified",
                "changes": 14,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-resources/org/apache/batik/bridge/ecmaCheckPermissionsDeniedFunction.svg?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -135,7 +135,6 @@ var basePermissions = [\n         [\"RuntimePermission setFactory\", new RuntimePermission(\"setFactory\")], \n         [\"RuntimePermission setIO\", new RuntimePermission(\"setIO\")], \n         [\"RuntimePermission modifyThread\", new RuntimePermission(\"modifyThread\")], \n-        [\"RuntimePermission stopThread\", new RuntimePermission(\"stopThread\")], \n         [\"RuntimePermission modifyThreadGroup\", new RuntimePermission(\"modifyThreadGroup\")], \n         [\"RuntimePermission getProtectionDomain\", new RuntimePermission(\"getProtectionDomain\")], \n         [\"RuntimePermission readFileDescriptor\", new RuntimePermission(\"readFileDescriptor\")], \n@@ -178,18 +177,19 @@ function init(){\n             docHost += \":\" + docURL.getPort();\n         }\n \n-        permissions[0] = [\"SocketPermission accept \" + docHost,\n+        nGranted = 0;\n+        permissions[nGranted++] = [\"SocketPermission accept \" + docHost,\n                           new SocketPermission(docHost, \"accept\")];\n-        permissions[1] = [\"SocketPermission connect \" + docHost,\n+        permissions[nGranted++] = [\"SocketPermission connect \" + docHost,\n                           new SocketPermission(docHost, \"connect\")];\n-        permissions[2] = [\"SocketPermission resolve \" + docHost,\n+        permissions[nGranted++] = [\"SocketPermission resolve \" + docHost,\n                           new SocketPermission(docHost, \"resolve\")];\n-        // permissions.concat(basePermissions);\n+        permissions[nGranted++] = [\"RuntimePermission stopThread\", \n+                                   new RuntimePermission(\"stopThread\")];\n \n         for (var i=0; i<basePermissions.length; i++){\n-            permissions[3+i] = basePermissions[i];\n+            permissions[nGranted+i] = basePermissions[i];\n         }\n-        nGranted = 3;\n     } else {\n         permissions = basePermissions;\n     }",
                "deletions": 7
            },
            {
                "sha": "ca03108659ba87ca7281e9d21a8c9c297cb564dd",
                "filename": "test-sources/org/apache/batik/swing/JSVGMemoryLeakTest.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-sources/org/apache/batik/swing/JSVGMemoryLeakTest.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-sources/org/apache/batik/swing/JSVGMemoryLeakTest.java",
                "status": "modified",
                "changes": 32,
                "additions": 21,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-sources/org/apache/batik/swing/JSVGMemoryLeakTest.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -105,25 +105,35 @@ public TestReport doSomething() throws Exception {\n         SwingUtilities.invokeAndWait( new Runnable() {\n                 public void run() {\n                     // System.out.println(\"In Invoke\");\n-                    theCanvas.dispose();\n                     theFrame.remove(theCanvas);\n+                    theCanvas.dispose();\n+\n                     theFrame.dispose();\n                     theFrame=null;\n                     theCanvas=null;\n                 }\n             });\n \n-        {\n-            // Create a new Frame to take focus for Swing so old one\n-            // can be GC'd.\n-            javax.swing.JFrame jframe = new javax.swing.JFrame(\"FocusFrame\"); \n-            // registerObjectDesc(jframe, \"FocusFrame\");\n-            jframe.setSize(new java.awt.Dimension(40, 50));\n-            jframe.setVisible(true);\n-            jframe.setVisible(false);\n-            jframe.dispose();\n-        }\n+        try  { Thread.sleep(100); } catch (InterruptedException ie) { }\n \n+        SwingUtilities.invokeAndWait( new Runnable() {\n+                public void run() {\n+                    // Create a new Frame to take focus for Swing so old one\n+                    // can be GC'd.\n+                    theFrame = new JFrame(\"FocusFrame\"); \n+                    // registerObjectDesc(jframe, \"FocusFrame\");\n+                    theFrame.setSize(new java.awt.Dimension(40, 50));\n+                    theFrame.setVisible(true);\n+                }});\n+\n+        try  { Thread.sleep(100); } catch (InterruptedException ie) { }\n+        \n+        SwingUtilities.invokeAndWait( new Runnable() {\n+                public void run() {\n+                    theFrame.setVisible(false);\n+                    theFrame.dispose();\n+                }});\n+        \n         handler = null;\n         if (failReport != null) return failReport;\n         DefaultTestReport report = new DefaultTestReport(this);",
                "deletions": 11
            },
            {
                "sha": "d0b694f696fbf684501f2d7f0a6fc335f816261d",
                "filename": "test-sources/org/apache/batik/test/MemoryLeakTest.java",
                "blob_url": "https://github.com/apache/xmlgraphics-batik/blob/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-sources/org/apache/batik/test/MemoryLeakTest.java",
                "raw_url": "https://github.com/apache/xmlgraphics-batik/raw/cb22022ab74b20ba08ba59a6e76adafea36f5c8b/test-sources/org/apache/batik/test/MemoryLeakTest.java",
                "status": "modified",
                "changes": 12,
                "additions": 9,
                "contents_url": "https://api.github.com/repos/apache/xmlgraphics-batik/contents/test-sources/org/apache/batik/test/MemoryLeakTest.java?ref=cb22022ab74b20ba08ba59a6e76adafea36f5c8b",
                "patch": "@@ -78,7 +78,7 @@ developed  by the  Apache Software Foundation  (http://www.apache.org/).\"\n     // (why so large I don't know) - it will bail if the all\n     // the objects of interest are collected sooner so the runtime\n     // is really only a concern for failures.\n-    final static int NUM_GC=120;\n+    final static int NUM_GC=60;\n \n     final static String ERROR_OBJS_NOT_CLEARED = \n         \"MemoryLeakTest.message.error.objs.not.cleared\";\n@@ -154,7 +154,9 @@ public boolean checkObjects(String [] descs) {\n \n         if (objStr.length() > 40) \n             objStr = objStr.substring(0,40) + \"...\" ;\n-        System.err.print(\">>>>> Objects not cleared: \" + objStr + \"\\n\");\n+        System.err.println(\">>>>> Objects not cleared: \" + objStr);\n+        // System.err.println(\"Waiting for heap dump...\");\n+        // try { Thread.sleep(60000); } catch (InterruptedException ie) { }\n         return false;\n     }\n \n@@ -193,7 +195,9 @@ public boolean checkAllObjects() {\n                 if (!passed)\n                     sb.append(\",\");\n                 passed = false;\n+                sb.append(\"'\");\n                 sb.append(wr.getDesc());\n+                sb.append(\"'\");\n             }\n             if (passed) return true;\n         }\n@@ -207,7 +211,9 @@ public boolean checkAllObjects() {\n \n         if (objStr.length() > 40) \n             objStr = objStr.substring(0,40) + \"...\" ;\n-        System.err.print(\">>>>> Objects not cleared: \" + objStr + \"\\n\");\n+        System.err.println(\">>>>> Objects not cleared: \" + objStr);\n+        // System.err.println(\"Waiting for heap dump...\");\n+        // try { Thread.sleep(60000); } catch (InterruptedException ie) { }\n         return false;\n     }\n ",
                "deletions": 3
            }
        ]
    }
]