[
    {
        "repo": "abdera",
        "message": "https://issues.apache.org/jira/browse/ABDERA-152 - \"JSONFilter throws NPE when the response content-type is null\"\n\n\"If the response content-type is null (e.g., when responding with \"204 No Content\" after DELETE of an entry), JSONFilter throws a NullPointerException trying to determine whether to send JSON\"\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@655546 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/1263b14f8869c17179a49911ba948446bae312ab",
        "parent": "https://github.com/apache/abdera/commit/febd54d1d84bb504a2c2061b90e6a6b411cc87a4",
        "bug_id": "abdera_1",
        "file": [
            {
                "sha": "db8fe2dc656e3469075272d5decc3768e5d044fe",
                "filename": "extensions/json/src/main/java/org/apache/abdera/ext/json/JSONFilter.java",
                "blob_url": "https://github.com/apache/abdera/blob/1263b14f8869c17179a49911ba948446bae312ab/extensions/json/src/main/java/org/apache/abdera/ext/json/JSONFilter.java",
                "raw_url": "https://github.com/apache/abdera/raw/1263b14f8869c17179a49911ba948446bae312ab/extensions/json/src/main/java/org/apache/abdera/ext/json/JSONFilter.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/extensions/json/src/main/java/org/apache/abdera/ext/json/JSONFilter.java?ref=1263b14f8869c17179a49911ba948446bae312ab",
                "patch": "@@ -47,7 +47,8 @@ public ResponseContext filter(\n     FilterChain chain) {\n       ResponseContext resp = chain.next(request);\n       String format = request.getParameter(\"format\");\n-      return jsonPreferred(request,resp.getContentType().toString()) ||\n+      return (resp.getContentType() != null &&\n+        jsonPreferred(request,resp.getContentType().toString())) ||\n         (format != null && format.equalsIgnoreCase(\"json\")) ?\n         new JsonResponseContext(resp,request.getAbdera()) :\n         resp;",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fixing a NPE that occurs when inserting an entry created from the Factory.\n\ne.g.\n\nfeed.insertEntry(factory.newEntry());\nfeed.insertEntry(factory.newEntry()); // caused a NPE in Axiom\n\nExplicitly setting the inserted entries parent prior to the insert resolves the problem\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@438567 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/e5e95f5432127f1347737c1904f13df92ae1a712",
        "parent": "https://github.com/apache/abdera/commit/54e701bdf9d12173f7f13862ad4f698e227f7c98",
        "bug_id": "abdera_2",
        "file": [
            {
                "sha": "0bbe9d4be3b356343f64d1954e4a5ec3fe7a4b3f",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/FOMFeed.java",
                "blob_url": "https://github.com/apache/abdera/blob/e5e95f5432127f1347737c1904f13df92ae1a712/parser/src/main/java/org/apache/abdera/parser/stax/FOMFeed.java",
                "raw_url": "https://github.com/apache/abdera/raw/e5e95f5432127f1347737c1904f13df92ae1a712/parser/src/main/java/org/apache/abdera/parser/stax/FOMFeed.java",
                "status": "modified",
                "changes": 1,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/FOMFeed.java?ref=e5e95f5432127f1347737c1904f13df92ae1a712",
                "patch": "@@ -107,6 +107,7 @@ public void insertEntry(Entry entry) {\n     if (el == null) {\n       addEntry(entry);\n     } else {\n+      entry.setParentElement(this);\n       el.insertSiblingBefore((OMElement)entry);\n     }\n   }",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "avoid potential NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/abdera/java/trunk@774027 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/0526889d70a433c812791e5adde65903cff93258",
        "parent": "https://github.com/apache/abdera/commit/2d0e0de44876c7f3cc9129a89a7d650596b57004",
        "bug_id": "abdera_3",
        "file": [
            {
                "sha": "2d73671dac40f4d4207536f229f72497c0328966",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/StaxStreamWriter.java",
                "blob_url": "https://github.com/apache/abdera/blob/0526889d70a433c812791e5adde65903cff93258/parser/src/main/java/org/apache/abdera/parser/stax/StaxStreamWriter.java",
                "raw_url": "https://github.com/apache/abdera/raw/0526889d70a433c812791e5adde65903cff93258/parser/src/main/java/org/apache/abdera/parser/stax/StaxStreamWriter.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/StaxStreamWriter.java?ref=0526889d70a433c812791e5adde65903cff93258",
                "patch": "@@ -212,7 +212,7 @@ private void writeNamespace(\n   \n   private boolean needToWriteNamespace(String prefix, String namespace) {\n     NamespaceContext nc = writer.getNamespaceContext();\n-    String uri = nc.getNamespaceURI(prefix);\n+    String uri = nc.getNamespaceURI(prefix != null ? prefix : \"\");\n     return uri != null ? !uri.equals(namespace) : true;\n   }\n   ",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fix NPE waiting to happen\n\ngit-svn-id: https://svn.apache.org/repos/asf/abdera/java/trunk@772439 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/59a597489310a7fea9bdf897e640d6d28dad7fda",
        "parent": "https://github.com/apache/abdera/commit/6e31d5b27c4dbc340fe1b3be085a22aff55723ad",
        "bug_id": "abdera_4",
        "file": [
            {
                "sha": "c0c4e2519780a99fa789641ec9556cdce4b6d219",
                "filename": "dependencies/i18n/src/main/java/org/apache/abdera/i18n/text/UrlEncoding.java",
                "blob_url": "https://github.com/apache/abdera/blob/59a597489310a7fea9bdf897e640d6d28dad7fda/dependencies/i18n/src/main/java/org/apache/abdera/i18n/text/UrlEncoding.java",
                "raw_url": "https://github.com/apache/abdera/raw/59a597489310a7fea9bdf897e640d6d28dad7fda/dependencies/i18n/src/main/java/org/apache/abdera/i18n/text/UrlEncoding.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/dependencies/i18n/src/main/java/org/apache/abdera/i18n/text/UrlEncoding.java?ref=59a597489310a7fea9bdf897e640d6d28dad7fda",
                "patch": "@@ -367,7 +367,7 @@ public static String encode(\n     String enc, \n     Filter... filters) \n       throws UnsupportedEncodingException {\n-    if (s == null) return s.toString();\n+    if (s == null) return null;\n     StringBuilder sb = new StringBuilder();\n \n     for (int n = 0; n < s.length(); n++) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fix NPE reported by Remy Gendron\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@616793 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/dba1b0b346b1006fe4b6a79aa604319a0516962b",
        "parent": "https://github.com/apache/abdera/commit/48f80316bb0f8f5c24c449f3e18d7dc7ea7c0dbe",
        "bug_id": "abdera_5",
        "file": [
            {
                "sha": "e95a18a72fbf299104c6ba67d32e1a8aa250ae0a",
                "filename": "server/src/main/java/org/apache/abdera/protocol/server/context/AbstractRequestContext.java",
                "blob_url": "https://github.com/apache/abdera/blob/dba1b0b346b1006fe4b6a79aa604319a0516962b/server/src/main/java/org/apache/abdera/protocol/server/context/AbstractRequestContext.java",
                "raw_url": "https://github.com/apache/abdera/raw/dba1b0b346b1006fe4b6a79aa604319a0516962b/server/src/main/java/org/apache/abdera/protocol/server/context/AbstractRequestContext.java",
                "status": "modified",
                "changes": 19,
                "additions": 19,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/server/src/main/java/org/apache/abdera/protocol/server/context/AbstractRequestContext.java?ref=dba1b0b346b1006fe4b6a79aa604319a0516962b",
                "patch": "@@ -33,6 +33,8 @@\n import org.apache.abdera.protocol.server.Provider;\n import org.apache.abdera.protocol.server.RequestContext;\n import org.apache.abdera.protocol.server.Target;\n+import org.apache.abdera.protocol.server.TargetType;\n+import org.apache.abdera.protocol.server.impl.AbstractTarget;\n import org.apache.abdera.protocol.util.AbstractRequest;\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;\n@@ -61,6 +63,16 @@ protected AbstractRequestContext(\n       this.method = method;\n       this.baseUri = baseUri;\n       this.requestUri = requestUri;\n+      \n+  }\n+  \n+  protected Target initTarget() {\n+    try {\n+      Target target = provider.resolveTarget(this);\n+      return target != null ? target : new UnknownTarget(this);\n+    } catch (Exception e) {\n+      throw new RuntimeException(e);\n+    }\n   }\n   \n   public Abdera getAbdera() {\n@@ -169,4 +181,11 @@ public String absoluteUrlFor(\n       return getResolvedUri().resolve(\n         urlFor(key,param)).toString();\n     }\n+  \n+  public static class UnknownTarget \n+    extends AbstractTarget {\n+    public UnknownTarget(RequestContext context) {\n+      super(TargetType.TYPE_UNKNOWN, context);\n+    }\n+  }\n }",
                "deletions": 0
            },
            {
                "sha": "d55d5fc181fce15855efc218ea61cd970e4d4328",
                "filename": "server/src/main/java/org/apache/abdera/protocol/server/servlet/ServletRequestContext.java",
                "blob_url": "https://github.com/apache/abdera/blob/dba1b0b346b1006fe4b6a79aa604319a0516962b/server/src/main/java/org/apache/abdera/protocol/server/servlet/ServletRequestContext.java",
                "raw_url": "https://github.com/apache/abdera/raw/dba1b0b346b1006fe4b6a79aa604319a0516962b/server/src/main/java/org/apache/abdera/protocol/server/servlet/ServletRequestContext.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/server/src/main/java/org/apache/abdera/protocol/server/servlet/ServletRequestContext.java?ref=dba1b0b346b1006fe4b6a79aa604319a0516962b",
                "patch": "@@ -55,7 +55,7 @@ public ServletRequestContext(\n       this.session = request.getSession(false);\n       this.principal = request.getUserPrincipal();\n       this.subject = provider.resolveSubject(this);\n-      this.target = provider.resolveTarget(this);\n+      this.target = initTarget();\n   }\n   \n   public Object getProperty(Property property) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "fix NPE caused under certain conditions\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@610974 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/facb6696bd141f48eade3e7d2ef089ad56f4e0c7",
        "parent": "https://github.com/apache/abdera/commit/14dc6cdce6ba1e167811ea71a5d3bd5e31981159",
        "bug_id": "abdera_6",
        "file": [
            {
                "sha": "b2d8a3937b8e7f4fd69b32f79b320bdf624bc9e6",
                "filename": "client/src/main/java/org/apache/abdera/protocol/client/util/AutoReleasingInputStream.java",
                "blob_url": "https://github.com/apache/abdera/blob/facb6696bd141f48eade3e7d2ef089ad56f4e0c7/client/src/main/java/org/apache/abdera/protocol/client/util/AutoReleasingInputStream.java",
                "raw_url": "https://github.com/apache/abdera/raw/facb6696bd141f48eade3e7d2ef089ad56f4e0c7/client/src/main/java/org/apache/abdera/protocol/client/util/AutoReleasingInputStream.java",
                "status": "modified",
                "changes": 2,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/client/src/main/java/org/apache/abdera/protocol/client/util/AutoReleasingInputStream.java?ref=facb6696bd141f48eade3e7d2ef089ad56f4e0c7",
                "patch": "@@ -35,6 +35,7 @@ public AutoReleasingInputStream(HttpMethod method, InputStream in) {\n \n   @Override\n   public int read() throws IOException {\n+    if (this.in == null) return -1;\n     try {\n       int r = super.read();\n       if (r == -1) {\n@@ -50,6 +51,7 @@ public int read() throws IOException {\n \n   @Override\n   public int read(byte[] b, int off, int len) throws IOException {\n+    if (this.in == null) return -1;\n     try {\n       int r= super.read(b, off, len);\n       if (r == -1) {",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@600217 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/bebef6ee34e27e041440c830d237a404c8634a3c",
        "parent": "https://github.com/apache/abdera/commit/8e3647e0010c2e0e37f0926867324d5ffeb0407f",
        "bug_id": "abdera_7",
        "file": [
            {
                "sha": "df460a400644ea2b6d0b8f7f0741508534ea63e0",
                "filename": "core/src/main/java/org/apache/abdera/model/Element.java",
                "blob_url": "https://github.com/apache/abdera/blob/bebef6ee34e27e041440c830d237a404c8634a3c/core/src/main/java/org/apache/abdera/model/Element.java",
                "raw_url": "https://github.com/apache/abdera/raw/bebef6ee34e27e041440c830d237a404c8634a3c/core/src/main/java/org/apache/abdera/model/Element.java",
                "status": "modified",
                "changes": 6,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/core/src/main/java/org/apache/abdera/model/Element.java?ref=bebef6ee34e27e041440c830d237a404c8634a3c",
                "patch": "@@ -183,6 +183,12 @@\n    */\n   void removeAttribute(QName qname);\n   \n+  /**\n+   * Remove the named attribute\n+   * @param name The name of the attribute to remove\n+   */\n+  void removeAttribute(String name);\n+  \n   /**\n    * Sets the value of the named attribute\n    * @param name The name of the attribute",
                "deletions": 0
            },
            {
                "sha": "337e8dbbf1e268d747d7f2b4fb45c224a0025b68",
                "filename": "core/src/main/java/org/apache/abdera/model/ElementWrapper.java",
                "blob_url": "https://github.com/apache/abdera/blob/bebef6ee34e27e041440c830d237a404c8634a3c/core/src/main/java/org/apache/abdera/model/ElementWrapper.java",
                "raw_url": "https://github.com/apache/abdera/raw/bebef6ee34e27e041440c830d237a404c8634a3c/core/src/main/java/org/apache/abdera/model/ElementWrapper.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/core/src/main/java/org/apache/abdera/model/ElementWrapper.java?ref=bebef6ee34e27e041440c830d237a404c8634a3c",
                "patch": "@@ -167,6 +167,10 @@ public void removeAttribute(QName qname) {\n     internal.removeAttribute(qname);\n   }\n \n+  public void removeAttribute(String name) {\n+    internal.removeAttribute(name);\n+  }\n+  \n   public void setAttributeValue(QName qname, String value) {\n     internal.setAttributeValue(qname, value);\n   }",
                "deletions": 0
            },
            {
                "sha": "e2417c7b4208416fd2b63fce5f5eac5af76227a8",
                "filename": "core/src/test/java/org/apache/abdera/test/core/CoreTest.java",
                "blob_url": "https://github.com/apache/abdera/blob/bebef6ee34e27e041440c830d237a404c8634a3c/core/src/test/java/org/apache/abdera/test/core/CoreTest.java",
                "raw_url": "https://github.com/apache/abdera/raw/bebef6ee34e27e041440c830d237a404c8634a3c/core/src/test/java/org/apache/abdera/test/core/CoreTest.java",
                "status": "modified",
                "changes": 4,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/core/src/test/java/org/apache/abdera/test/core/CoreTest.java?ref=bebef6ee34e27e041440c830d237a404c8634a3c",
                "patch": "@@ -745,6 +745,8 @@ public void writeTo(String writer, OutputStream out, WriterOptions options)\n \n     public void writeTo(String writer, Writer out, WriterOptions options)\n         throws IOException {}\n+\n+    public void removeAttribute(String name) {}\n     \n   }\n   \n@@ -1410,6 +1412,8 @@ public void writeTo(String writer, OutputStream out, WriterOptions options)\n \n     public void writeTo(String writer, Writer out, WriterOptions options)\n         throws IOException {}\n+\n+    public void removeAttribute(String name) {}\n     \n   }\n }",
                "deletions": 0
            },
            {
                "sha": "b621440cb96990d73b66b8cc88b6f4f39d103b6e",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/FOMElement.java",
                "blob_url": "https://github.com/apache/abdera/blob/bebef6ee34e27e041440c830d237a404c8634a3c/parser/src/main/java/org/apache/abdera/parser/stax/FOMElement.java",
                "raw_url": "https://github.com/apache/abdera/raw/bebef6ee34e27e041440c830d237a404c8634a3c/parser/src/main/java/org/apache/abdera/parser/stax/FOMElement.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/FOMElement.java?ref=bebef6ee34e27e041440c830d237a404c8634a3c",
                "patch": "@@ -582,7 +582,8 @@ public void removeAttribute(QName qname) {\n   }\n   \n   public void removeAttribute(String name) {\n-    removeAttribute(getAttribute(new QName(name)));\n+    OMAttribute attr = getAttribute(new QName(name));\n+    if (attr != null) getAttribute(new QName(name));\n   }\n   \n   protected void _removeChildren(QName qname, boolean many) {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "fix NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@599869 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/4c2d4100c6125c0cecef81a91ed79f81411461ee",
        "parent": "https://github.com/apache/abdera/commit/f15692ad412242944b887ed11e19d7a3033baf11",
        "bug_id": "abdera_8",
        "file": [
            {
                "sha": "97247644a0801ae4713b1cdc85444f48690fc5b1",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/FOMFactory.java",
                "blob_url": "https://github.com/apache/abdera/blob/4c2d4100c6125c0cecef81a91ed79f81411461ee/parser/src/main/java/org/apache/abdera/parser/stax/FOMFactory.java",
                "raw_url": "https://github.com/apache/abdera/raw/4c2d4100c6125c0cecef81a91ed79f81411461ee/parser/src/main/java/org/apache/abdera/parser/stax/FOMFactory.java",
                "status": "modified",
                "changes": 4,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/FOMFactory.java?ref=4c2d4100c6125c0cecef81a91ed79f81411461ee",
                "patch": "@@ -707,7 +707,9 @@ protected OMElement createElement(\n       } else if (parent instanceof ExtensibleElement || \n                  parent instanceof Document) {\n         element = (OMElement) new FOMExtensibleElement(\n-          qname.getLocalPart(), namespace, parent, this);\n+          qname, parent, this);\n+      } else {\n+        element = (OMElement) new FOMExtensibleElement(qname,null,this);\n       }\n       return element;\n     }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "bug fix (NPE) in json writer\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@580496 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/c02e260181176bb01075c5cee28a0ff73e03e891",
        "parent": "https://github.com/apache/abdera/commit/fd18b65addf7134514dc0582fb5765eed2fdaecc",
        "bug_id": "abdera_9",
        "file": [
            {
                "sha": "e9c52bd166c36daba4e5623e49d4e2087021dcf6",
                "filename": "extensions/json/src/main/java/org/apache/abdera/ext/json/JSONUtil.java",
                "blob_url": "https://github.com/apache/abdera/blob/c02e260181176bb01075c5cee28a0ff73e03e891/extensions/json/src/main/java/org/apache/abdera/ext/json/JSONUtil.java",
                "raw_url": "https://github.com/apache/abdera/raw/c02e260181176bb01075c5cee28a0ff73e03e891/extensions/json/src/main/java/org/apache/abdera/ext/json/JSONUtil.java",
                "status": "modified",
                "changes": 8,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/extensions/json/src/main/java/org/apache/abdera/ext/json/JSONUtil.java?ref=c02e260181176bb01075c5cee28a0ff73e03e891",
                "patch": "@@ -188,8 +188,10 @@ private static void toJson(Element element, JSONStream jstream) throws IOExcepti\n       writeElement(\"rights\", source.getRightsElement(),jstream);\n       jstream.writeField(\"updated\", source.getUpdated());\n       writeElement(\"generator\", source.getGenerator(),jstream);\n-      jstream.writeField(\"icon\", source.getIconElement().getResolvedValue());\n-      jstream.writeField(\"logo\", source.getLogoElement().getResolvedValue());\n+      if (source.getIconElement() != null)\n+        jstream.writeField(\"icon\", source.getIconElement().getResolvedValue());\n+      if (source.getLogoElement() != null)\n+        jstream.writeField(\"logo\", source.getLogoElement().getResolvedValue());\n       writeList(\"authors\",source.getAuthors(),jstream);\n       writeList(\"contributors\",source.getContributors(),jstream);\n       writeList(\"links\",source.getLinks(),jstream);\n@@ -244,9 +246,7 @@ private static void writeElementValue(Element element, JSONStream jstream) throw\n   private static void writeElement(Element child, QName parentqname, JSONStream jstream) throws IOException {\n     QName childqname = child.getQName();\n     String prefix = childqname.getPrefix();\n-    String uri = childqname.getNamespaceURI();\n     jstream.startArray();\n-    \n     if (prefix != null && !\"\".equals(prefix)) {\n       jstream.writeQuoted(childqname.getPrefix() + \":\" + childqname.getLocalPart());\n     } else {",
                "deletions": 4
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "NPE when the value element is null\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@565958 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/c531c9615c74fc8c2e7f29cd36b2e7aca3203fbc",
        "parent": "https://github.com/apache/abdera/commit/925690a9e439713d9cd65da236188681cdafa474",
        "bug_id": "abdera_10",
        "file": [
            {
                "sha": "5d73b80a7ae512eabbd49ab00eec47c1495f67e4",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/FOMText.java",
                "blob_url": "https://github.com/apache/abdera/blob/c531c9615c74fc8c2e7f29cd36b2e7aca3203fbc/parser/src/main/java/org/apache/abdera/parser/stax/FOMText.java",
                "raw_url": "https://github.com/apache/abdera/raw/c531c9615c74fc8c2e7f29cd36b2e7aca3203fbc/parser/src/main/java/org/apache/abdera/parser/stax/FOMText.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/FOMText.java?ref=c531c9615c74fc8c2e7f29cd36b2e7aca3203fbc",
                "patch": "@@ -207,7 +207,7 @@ public IRI getResolvedBaseUri() {\n   public String getLanguage() {\n     if (Type.XHTML.equals(type)) {\n       Element el = getValueElement();\n-      if (el.getAttributeValue(LANG) != null)\n+      if (el != null && el.getAttributeValue(LANG) != null)\n         return el.getAttributeValue(LANG);\n     }\n     return super.getLanguage();",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Check for null before causing an NPE.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@538942 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/203800619c1913129a6180f532865ea7fea298cc",
        "parent": "https://github.com/apache/abdera/commit/043ad60a3e926fa71f1a0e40c60dad0f66a21850",
        "bug_id": "abdera_11",
        "file": [
            {
                "sha": "ed53f2775258ca5909c20f2802aa7a8ffc1021e6",
                "filename": "client/src/main/java/org/apache/abdera/protocol/client/AbstractClientResponse.java",
                "blob_url": "https://github.com/apache/abdera/blob/203800619c1913129a6180f532865ea7fea298cc/client/src/main/java/org/apache/abdera/protocol/client/AbstractClientResponse.java",
                "raw_url": "https://github.com/apache/abdera/raw/203800619c1913129a6180f532865ea7fea298cc/client/src/main/java/org/apache/abdera/protocol/client/AbstractClientResponse.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/client/src/main/java/org/apache/abdera/protocol/client/AbstractClientResponse.java?ref=203800619c1913129a6180f532865ea7fea298cc",
                "patch": "@@ -80,7 +80,7 @@ protected synchronized Parser getParser() {\n       String charset = getCharacterEncoding();\n       if (charset != null) options.setCharset(charset);\n       IRI cl = getContentLocation();\n-      if (!cl.isAbsolute()) {\n+      if (cl != null && !cl.isAbsolute()) {\n         IRI r = new IRI(getUri());\n         cl = r.resolve(cl);\n       }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fix NPE's and remove attributes is value == null\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@433333 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/1fdf5ce392ed0b2887c42477305c5ca06a7ee49e",
        "parent": "https://github.com/apache/abdera/commit/ee261cef58c2a7dd8f0a193636d817fe96e39237",
        "bug_id": "abdera_12",
        "file": [
            {
                "sha": "02a7a2e6135bdeec1f5ed5c569bd7399ac81c1d3",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/FOMLink.java",
                "blob_url": "https://github.com/apache/abdera/blob/1fdf5ce392ed0b2887c42477305c5ca06a7ee49e/parser/src/main/java/org/apache/abdera/parser/stax/FOMLink.java",
                "raw_url": "https://github.com/apache/abdera/raw/1fdf5ce392ed0b2887c42477305c5ca06a7ee49e/parser/src/main/java/org/apache/abdera/parser/stax/FOMLink.java",
                "status": "modified",
                "changes": 15,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/FOMLink.java?ref=1fdf5ce392ed0b2887c42477305c5ca06a7ee49e",
                "patch": "@@ -148,15 +148,21 @@ public String getHrefLang() {\n   }\n \n   public void setHrefLang(String lang) {\n-    setAttributeValue(HREFLANG, lang);\n+    if (lang != null)\n+      setAttributeValue(HREFLANG, lang);\n+    else \n+      removeAttribute(HREFLANG);\n   }\n \n   public String getTitle() {\n     return getAttributeValue(ATITLE);\n   }\n \n   public void setTitle(String title) {\n-    setAttributeValue(ATITLE, title);\n+    if (title != null)\n+      setAttributeValue(ATITLE, title);\n+    else \n+      removeAttribute(ATITLE);\n   }\n \n   public long getLength() {\n@@ -165,7 +171,10 @@ public long getLength() {\n   }\n \n   public void setLength(long length) {\n-    setAttributeValue(LENGTH, (length >= 0) ? String.valueOf(length) : \"0\");\n+    if (length > -1)\n+      setAttributeValue(LENGTH, (length >= 0) ? String.valueOf(length) : \"0\");\n+    else\n+      removeAttribute(LENGTH);\n   }\n \n   ",
                "deletions": 3
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fixing an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@432657 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/ca9fe63344476cb56ca1ea04bc6d88124eb0bf38",
        "parent": "https://github.com/apache/abdera/commit/960d971645ef744ea63e6d38d8280e1af5ac753a",
        "bug_id": "abdera_13",
        "file": [
            {
                "sha": "f3aeb2748851f3b077b2dbcffcbe67bc488b7cfa",
                "filename": "client/src/main/java/org/apache/abdera/protocol/util/BaseRequestEntity.java",
                "blob_url": "https://github.com/apache/abdera/blob/ca9fe63344476cb56ca1ea04bc6d88124eb0bf38/client/src/main/java/org/apache/abdera/protocol/util/BaseRequestEntity.java",
                "raw_url": "https://github.com/apache/abdera/raw/ca9fe63344476cb56ca1ea04bc6d88124eb0bf38/client/src/main/java/org/apache/abdera/protocol/util/BaseRequestEntity.java",
                "status": "modified",
                "changes": 14,
                "additions": 13,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/client/src/main/java/org/apache/abdera/protocol/util/BaseRequestEntity.java?ref=ca9fe63344476cb56ca1ea04bc6d88124eb0bf38",
                "patch": "@@ -55,7 +55,19 @@ public long getContentLength() {\n   public String getContentType() {\n     String type = null;\n     if (base instanceof Document) {\n-      type = ((Document)base).getContentType().toString();\n+      Document doc = (Document) base;\n+      if (doc.getContentType() != null) {\n+        type = doc.getContentType().toString();\n+      } else {\n+        if (doc.getRoot() instanceof Feed ||\n+            doc.getRoot() instanceof Entry) {\n+          type = \"application/atom+xml\";\n+        } else if (doc.getRoot() instanceof Service) {\n+          type = \"application/atomserv+xml\";\n+        } else {\n+          type = \"application/xml\";\n+        }\n+      }\n     } else if (base instanceof Feed || base instanceof Entry) {\n       Document doc = ((Element)base).getDocument();\n       if (doc != null && doc.getContentType() != null)",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fix an NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@429471 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/2856c54d318b0edd1ed81da9062659feb3a26541",
        "parent": "https://github.com/apache/abdera/commit/24345ad18ee1da2e592c5dd4453c88f9d5057313",
        "bug_id": "abdera_14",
        "file": [
            {
                "sha": "7d04b5aa0702397afffae41adf1a4da17d34d683",
                "filename": "core/src/main/java/org/apache/abdera/util/AbstractParser.java",
                "blob_url": "https://github.com/apache/abdera/blob/2856c54d318b0edd1ed81da9062659feb3a26541/core/src/main/java/org/apache/abdera/util/AbstractParser.java",
                "raw_url": "https://github.com/apache/abdera/raw/2856c54d318b0edd1ed81da9062659feb3a26541/core/src/main/java/org/apache/abdera/util/AbstractParser.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/core/src/main/java/org/apache/abdera/util/AbstractParser.java?ref=2856c54d318b0edd1ed81da9062659feb3a26541",
                "patch": "@@ -58,7 +58,7 @@\n     ParserOptions options) \n       throws ParseException, \n              URISyntaxException {\n-    return parse(in, new URI(base), options);\n+    return parse(in, (base != null) ? new URI(base) : null, options);\n   }\n   \n   public <T extends Element>Document<T> parse(",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fix a NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@429454 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/24345ad18ee1da2e592c5dd4453c88f9d5057313",
        "parent": "https://github.com/apache/abdera/commit/6dea94224e226b1fe75140496a5dcc96f82d2a26",
        "bug_id": "abdera_15",
        "file": [
            {
                "sha": "aef7375efa796654d7d50d687d4cf605a637331e",
                "filename": "client/src/main/java/org/apache/abdera/protocol/client/BaseRequestEntity.java",
                "blob_url": "https://github.com/apache/abdera/blob/24345ad18ee1da2e592c5dd4453c88f9d5057313/client/src/main/java/org/apache/abdera/protocol/client/BaseRequestEntity.java",
                "raw_url": "https://github.com/apache/abdera/raw/24345ad18ee1da2e592c5dd4453c88f9d5057313/client/src/main/java/org/apache/abdera/protocol/client/BaseRequestEntity.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/client/src/main/java/org/apache/abdera/protocol/client/BaseRequestEntity.java?ref=24345ad18ee1da2e592c5dd4453c88f9d5057313",
                "patch": "@@ -58,7 +58,7 @@ public String getContentType() {\n       type = ((Document)base).getContentType().toString();\n     } else if (base instanceof Feed || base instanceof Entry) {\n       Document doc = ((Element)base).getDocument();\n-      if (doc != null)\n+      if (doc != null && doc.getContentType() != null)\n         type = doc.getContentType().toString();\n       if (type == null)\n         type = \"application/atom+xml\";",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "- Fixed NPE bug in category\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@422930 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/54d25560ff53502df9c052239d1d737f7b8f9594",
        "parent": "https://github.com/apache/abdera/commit/d86c91509ad391d720048300de13d0b68194ae44",
        "bug_id": "abdera_16",
        "file": [
            {
                "sha": "ac0c5b4de56f880fa85e9aaf7bd3fe9f8750a9cc",
                "filename": "extensions/src/main/java/org/apache/abdera/ext/json/JSONWriter.java",
                "blob_url": "https://github.com/apache/abdera/blob/54d25560ff53502df9c052239d1d737f7b8f9594/extensions/src/main/java/org/apache/abdera/ext/json/JSONWriter.java",
                "raw_url": "https://github.com/apache/abdera/raw/54d25560ff53502df9c052239d1d737f7b8f9594/extensions/src/main/java/org/apache/abdera/ext/json/JSONWriter.java",
                "status": "modified",
                "changes": 22,
                "additions": 16,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/extensions/src/main/java/org/apache/abdera/ext/json/JSONWriter.java?ref=54d25560ff53502df9c052239d1d737f7b8f9594",
                "patch": "@@ -69,6 +69,7 @@ public void writeTo(Base base, java.io.Writer out) throws IOException {\n       Object result = toJSON(base);\n       out.write(result.toString());\n     } catch(Exception e) {\n+      e.printStackTrace();\n       throw new IOException(e.getMessage());\n     }    \n   }\n@@ -112,12 +113,21 @@ public static JSONObject toJSON(Entry entry) throws Exception {\n     \n     JSONArray jscategories = new JSONArray();\n     List<Category> categories = entry.getCategories();\n-    for(Category category : categories) {\n-      JSONObject jscategory = new JSONObject();\n-      jscategory.put(\"scheme\", category.getScheme().toString());\n-      jscategory.put(\"term\", category.getTerm());\n-      jscategory.put(\"label\", category.getLabel());\n-      jscategories.put(jscategory);\n+    for(Category category : categories) {      \n+      if(category.getScheme() != null || \n+          category.getLabel() != null ||\n+          category.getTerm() != null) {\n+        JSONObject jscategory = new JSONObject();\n+        if(category.getScheme() != null)\n+          jscategory.put(\"scheme\", category.getScheme().toString());\n+        \n+        if(category.getTerm() != null)\n+          jscategory.put(\"term\", category.getTerm());\n+        \n+        if(category.getLabel() != null)\n+          jscategory.put(\"label\", category.getLabel());\n+        jscategories.put(jscategory);\n+      }\n     }\n     jsentry.put(\"categories\", jscategories);\n     ",
                "deletions": 6
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "[ABDERA-205]: JSONStream throws a npe when the content element is empty\n\nI've added a simple test\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@710193 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/595d67876f8c66d59d6bc2851f2b525e82c7092a",
        "parent": "https://github.com/apache/abdera/commit/72b622897cd53b6b07583de19c021d34863a06ef",
        "bug_id": "abdera_17",
        "file": [
            {
                "sha": "5b405a361fa37798a8f18d4e143e812f9b727ccb",
                "filename": "extensions/json/src/main/java/org/apache/abdera/ext/json/JSONStream.java",
                "blob_url": "https://github.com/apache/abdera/blob/595d67876f8c66d59d6bc2851f2b525e82c7092a/extensions/json/src/main/java/org/apache/abdera/ext/json/JSONStream.java",
                "raw_url": "https://github.com/apache/abdera/raw/595d67876f8c66d59d6bc2851f2b525e82c7092a/extensions/json/src/main/java/org/apache/abdera/ext/json/JSONStream.java",
                "status": "modified",
                "changes": 10,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/extensions/json/src/main/java/org/apache/abdera/ext/json/JSONStream.java?ref=595d67876f8c66d59d6bc2851f2b525e82c7092a",
                "patch": "@@ -112,10 +112,12 @@ private void writeColon() throws IOException {\n   }\n   \n   public void writeQuoted(String value) throws IOException {\n-    writer.write('\"');\n-    writer.write(escape(value));\n-    writer.write('\"');\n-    writer.flush();\n+      if (value != null) {\n+        writer.write('\"');\n+        writer.write(escape(value));\n+        writer.write('\"');\n+        writer.flush();\n+      }\n   }\n \n   public void writeField(String name) throws IOException {",
                "deletions": 4
            },
            {
                "sha": "ca4e884b17a21b0e242f9c4439323ce6a48bea5d",
                "filename": "extensions/json/src/test/java/org/apache/abdera/ext/json/JSONStreamTest.java",
                "blob_url": "https://github.com/apache/abdera/blob/595d67876f8c66d59d6bc2851f2b525e82c7092a/extensions/json/src/test/java/org/apache/abdera/ext/json/JSONStreamTest.java",
                "raw_url": "https://github.com/apache/abdera/raw/595d67876f8c66d59d6bc2851f2b525e82c7092a/extensions/json/src/test/java/org/apache/abdera/ext/json/JSONStreamTest.java",
                "status": "added",
                "changes": 49,
                "additions": 49,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/extensions/json/src/test/java/org/apache/abdera/ext/json/JSONStreamTest.java?ref=595d67876f8c66d59d6bc2851f2b525e82c7092a",
                "patch": "@@ -0,0 +1,49 @@\n+/*\n+* Licensed to the Apache Software Foundation (ASF) under one or more\n+* contributor license agreements.  The ASF licenses this file to You\n+* under the Apache License, Version 2.0 (the \"License\"); you may not\n+* use this file except in compliance with the License.\n+* You may obtain a copy of the License at\n+*\n+*     http://www.apache.org/licenses/LICENSE-2.0\n+*\n+* Unless required by applicable law or agreed to in writing, software\n+* distributed under the License is distributed on an \"AS IS\" BASIS,\n+* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+* See the License for the specific language governing permissions and\n+* limitations under the License.  For additional information regarding\n+* copyright in this work, please see the NOTICE file in the top level\n+* directory of this distribution.\n+*/\n+package org.apache.abdera.ext.json;\n+\n+\n+import org.apache.abdera.ext.json.JSONStream;\n+import org.apache.abdera.Abdera;\n+import org.apache.abdera.writer.Writer;\n+import org.apache.abdera.i18n.iri.IRI;\n+import org.apache.abdera.model.Entry;\n+import org.junit.Test;\n+import org.junit.Assert;\n+import junit.framework.TestCase;\n+\n+\n+/**\n+ * JSONStreamTest\n+ *\n+ * @author David Calavera\n+ * @since 11/01/08\n+ */\n+public class JSONStreamTest extends TestCase {\n+\n+\t@Test\n+\tpublic void testJSONStreamContent() throws Exception {\n+\t    Abdera abdera = new Abdera();\n+        Entry entry = abdera.newEntry();\n+\n+        entry.setContent(new IRI(\"http://example.org/xml\"), \"text/xml\");\n+\n+        Writer json = abdera.getWriterFactory().getWriter(\"json\");\n+        entry.writeTo(json, System.out);\n+    }\n+}\n\\ No newline at end of file",
                "deletions": 0
            },
            {
                "sha": "dff928c5939927aa91193e3cdf69e2fc7567ebb0",
                "filename": "extensions/json/src/test/java/org/apache/abdera/ext/json/TestSuite.java",
                "blob_url": "https://github.com/apache/abdera/blob/595d67876f8c66d59d6bc2851f2b525e82c7092a/extensions/json/src/test/java/org/apache/abdera/ext/json/TestSuite.java",
                "raw_url": "https://github.com/apache/abdera/raw/595d67876f8c66d59d6bc2851f2b525e82c7092a/extensions/json/src/test/java/org/apache/abdera/ext/json/TestSuite.java",
                "status": "added",
                "changes": 29,
                "additions": 29,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/extensions/json/src/test/java/org/apache/abdera/ext/json/TestSuite.java?ref=595d67876f8c66d59d6bc2851f2b525e82c7092a",
                "patch": "@@ -0,0 +1,29 @@\n+/*\n+* Licensed to the Apache Software Foundation (ASF) under one or more\n+* contributor license agreements.  The ASF licenses this file to You\n+* under the Apache License, Version 2.0 (the \"License\"); you may not\n+* use this file except in compliance with the License.\n+* You may obtain a copy of the License at\n+*\n+*     http://www.apache.org/licenses/LICENSE-2.0\n+*\n+* Unless required by applicable law or agreed to in writing, software\n+* distributed under the License is distributed on an \"AS IS\" BASIS,\n+* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+* See the License for the specific language governing permissions and\n+* limitations under the License.  For additional information regarding\n+* copyright in this work, please see the NOTICE file in the top level\n+* directory of this distribution.\n+*/\n+package org.apache.abdera.ext.json;\n+\n+import org.junit.internal.runners.TextListener;\n+import org.junit.runner.JUnitCore;\n+\n+public class TestSuite  {\n+  public static void main(String[] args) {\n+    JUnitCore runner = new JUnitCore();\n+    runner.addListener(new TextListener(System.out));\n+    runner.run(JSONStreamTest.class);\n+  }\n+}\n\\ No newline at end of file",
                "deletions": 0
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "https://issues.apache.org/jira/browse/ABDERA-160 - NPE in AbstractProvider when building service doc for WorkspaceInfo with null CollectionInfo collection\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@656931 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/2d2a129c929a6e2c400f946214161c8c1792d075",
        "parent": "https://github.com/apache/abdera/commit/d7f1d74c809348a741d8ab74f744cb36c5c49b3c",
        "bug_id": "abdera_18",
        "file": [
            {
                "sha": "40fcd82aab7497ff48be6156e4110f6e7882fcb3",
                "filename": "server/src/main/java/org/apache/abdera/protocol/server/impl/AbstractProvider.java",
                "blob_url": "https://github.com/apache/abdera/blob/2d2a129c929a6e2c400f946214161c8c1792d075/server/src/main/java/org/apache/abdera/protocol/server/impl/AbstractProvider.java",
                "raw_url": "https://github.com/apache/abdera/raw/2d2a129c929a6e2c400f946214161c8c1792d075/server/src/main/java/org/apache/abdera/protocol/server/impl/AbstractProvider.java",
                "status": "modified",
                "changes": 50,
                "additions": 27,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/server/src/main/java/org/apache/abdera/protocol/server/impl/AbstractProvider.java?ref=2d2a129c929a6e2c400f946214161c8c1792d075",
                "patch": "@@ -19,6 +19,7 @@\n \n import java.io.IOException;\n import java.util.ArrayList;\n+import java.util.Collection;\n import java.util.List;\n import java.util.Map;\n \n@@ -300,33 +301,36 @@ protected void writeTo(\n             for (WorkspaceInfo wi : getWorkspaceManager(request).getWorkspaces(request)) {\n               sw.startWorkspace()\n                 .writeTitle(wi.getTitle(request));\n-              for (CollectionInfo ci : wi.getCollections(request)) {\n-                sw.startCollection(ci.getHref(request))\n-                  .writeTitle(ci.getTitle(request))\n-                  .writeAccepts(ci.getAccepts(request));\n-                CategoriesInfo[] catinfos = ci.getCategoriesInfo(request);\n-                if (catinfos != null) {\n-                  for (CategoriesInfo catinfo : catinfos) {\n-                    String cathref = catinfo.getHref(request);\n-                    if (cathref != null) {\n-                      sw.startCategories()\n-                        .writeAttribute(\"href\", request.getTargetBasePath() + cathref)\n-                        .endCategories();\n-                    } else {\n-                      sw.startCategories(\n-                        catinfo.isFixed(request), \n-                        catinfo.getScheme(request));\n-                      for (CategoryInfo cat : catinfo) {\n-                        sw.writeCategory(\n-                          cat.getTerm(request), \n-                          cat.getScheme(request), \n-                          cat.getLabel(request));\n+              Collection<CollectionInfo> collections = wi.getCollections(request);\n+              if (collections != null) {\n+                for (CollectionInfo ci : collections) {\n+                  sw.startCollection(ci.getHref(request))\n+                    .writeTitle(ci.getTitle(request))\n+                    .writeAccepts(ci.getAccepts(request));\n+                  CategoriesInfo[] catinfos = ci.getCategoriesInfo(request);\n+                  if (catinfos != null) {\n+                    for (CategoriesInfo catinfo : catinfos) {\n+                      String cathref = catinfo.getHref(request);\n+                      if (cathref != null) {\n+                        sw.startCategories()\n+                          .writeAttribute(\"href\", request.getTargetBasePath() + cathref)\n+                          .endCategories();\n+                      } else {\n+                        sw.startCategories(\n+                          catinfo.isFixed(request), \n+                          catinfo.getScheme(request));\n+                        for (CategoryInfo cat : catinfo) {\n+                          sw.writeCategory(\n+                            cat.getTerm(request), \n+                            cat.getScheme(request), \n+                            cat.getLabel(request));\n+                        }\n+                        sw.endCategories();\n                       }\n-                      sw.endCategories();\n                     }\n                   }\n+                  sw.endCollection();\n                 }\n-                sw.endCollection();\n               }\n               sw.endWorkspace();\n             }",
                "deletions": 23
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fix a NPE that I'm not sure would actually ever happen.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@530161 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/8c1fb4c64640bd45e6f1f75617e60c7ff25f438d",
        "parent": "https://github.com/apache/abdera/commit/46e4c9045ba66136075a513dd906c171174d5285",
        "bug_id": "abdera_19",
        "file": [
            {
                "sha": "c8454ab56c7353d8770a7483269aa8c1ccf26d53",
                "filename": "extensions/src/main/java/org/apache/abdera/ext/wsse/WSSEAuthScheme.java",
                "blob_url": "https://github.com/apache/abdera/blob/8c1fb4c64640bd45e6f1f75617e60c7ff25f438d/extensions/src/main/java/org/apache/abdera/ext/wsse/WSSEAuthScheme.java",
                "raw_url": "https://github.com/apache/abdera/raw/8c1fb4c64640bd45e6f1f75617e60c7ff25f438d/extensions/src/main/java/org/apache/abdera/ext/wsse/WSSEAuthScheme.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/extensions/src/main/java/org/apache/abdera/ext/wsse/WSSEAuthScheme.java?ref=8c1fb4c64640bd45e6f1f75617e60c7ff25f438d",
                "patch": "@@ -59,7 +59,7 @@ public String authenticate(\n                     \"PasswordDigest=\\\"\" + digest + \"\\\", \" +\n                     \"Nonce=\\\"\" + nonce + \"\\\", \" +\n                     \"Created=\\\"\" + now.getValue() + \"\\\"\";\n-      method.addRequestHeader(\"X-WSSE\", wsse);\n+      if (method != null) method.addRequestHeader(\"X-WSSE\", wsse);\n       return \"WSSE profile=\\\"UsernameToken\\\"\";\n     } else {\n       return null;",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fixing a NPE the occurs when getting a null simple extension\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@488837 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/f0836a4a33809131dd1ff6506ec3a789635495d2",
        "parent": "https://github.com/apache/abdera/commit/b789020268d0bc5dfcb76afe7f516bd53d1e4a78",
        "bug_id": "abdera_20",
        "file": [
            {
                "sha": "be5e37e923274defa313bca7d3c0599e96e73244",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/FOMExtensibleElement.java",
                "blob_url": "https://github.com/apache/abdera/blob/f0836a4a33809131dd1ff6506ec3a789635495d2/parser/src/main/java/org/apache/abdera/parser/stax/FOMExtensibleElement.java",
                "raw_url": "https://github.com/apache/abdera/raw/f0836a4a33809131dd1ff6506ec3a789635495d2/parser/src/main/java/org/apache/abdera/parser/stax/FOMExtensibleElement.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/FOMExtensibleElement.java?ref=f0836a4a33809131dd1ff6506ec3a789635495d2",
                "patch": "@@ -155,7 +155,7 @@ public Element addSimpleExtension(\n   \n   public String getSimpleExtension(QName qname) {\n     Element el  = getExtension(qname);\n-    return el.getText();\n+    return (el != null) ? el.getText() : null;\n   }\n   \n   public String getSimpleExtension(",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fix a NPE that occurs when text type == XHTML and no div is present\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@432030 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/6fee28098de61ae1b350eb03f7575f4e91d548cf",
        "parent": "https://github.com/apache/abdera/commit/901ca9d5e024f257692ab2801dd7a0638b560f9c",
        "bug_id": "abdera_21",
        "file": [
            {
                "sha": "ec3f9b0d01efa4858054b15c94befac55b719f9a",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/FOMText.java",
                "blob_url": "https://github.com/apache/abdera/blob/6fee28098de61ae1b350eb03f7575f4e91d548cf/parser/src/main/java/org/apache/abdera/parser/stax/FOMText.java",
                "raw_url": "https://github.com/apache/abdera/raw/6fee28098de61ae1b350eb03f7575f4e91d548cf/parser/src/main/java/org/apache/abdera/parser/stax/FOMText.java",
                "status": "modified",
                "changes": 3,
                "additions": 2,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/FOMText.java?ref=6fee28098de61ae1b350eb03f7575f4e91d548cf",
                "patch": "@@ -119,7 +119,8 @@ public String getValue() {\n     } else if (Type.HTML.equals(type)) {\n       val = getText();\n     } else if (Type.XHTML.equals(type)) {\n-      val = ((FOMDiv)this.getFirstChildWithName(Constants.DIV)).getInternalValue();\n+      FOMDiv div = (FOMDiv) this.getFirstChildWithName(Constants.DIV);\n+      val = (div != null) ? div.getInternalValue() : null;\n     }\n     return val;\n   }",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "Fix ABDERA-22, calling the Parser#parse(Reader r) method without passing in\na base argument always throws a NullPointerException.\n\n[ in parser/src/main/java/org/apache/abdera/parser/stax ]\n* FOMParser.java\n  (parse): Don't pass a null base into IRI's constructor, instead recognize\n   it and pass a null base IRI into getDocument.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@472152 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/491f2fe41a7771811ac95cc8adbc28f589df0c09",
        "parent": "https://github.com/apache/abdera/commit/34373548b60496f043d88b07f73cea3532f6cfe7",
        "bug_id": "abdera_22",
        "file": [
            {
                "sha": "32ec98108f6234cd6e92259a8e05d863b833711d",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/FOMParser.java",
                "blob_url": "https://github.com/apache/abdera/blob/491f2fe41a7771811ac95cc8adbc28f589df0c09/parser/src/main/java/org/apache/abdera/parser/stax/FOMParser.java",
                "raw_url": "https://github.com/apache/abdera/raw/491f2fe41a7771811ac95cc8adbc28f589df0c09/parser/src/main/java/org/apache/abdera/parser/stax/FOMParser.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/FOMParser.java?ref=491f2fe41a7771811ac95cc8adbc28f589df0c09",
                "patch": "@@ -128,7 +128,7 @@ private void setCharset(ParserOptions options, String charset, Document doc) {\n       FOMFactory factory = getFomFactory(options);\n       XMLStreamReader xmlreader = StAXUtils.createXMLStreamReader(in);\n       FOMBuilder builder = new FOMBuilder(factory, xmlreader, options);\n-      document = getDocument(builder, new IRI(base));\n+      document = getDocument(builder, base != null ? new IRI(base) : null);\n       setCharset(options, xmlreader.getCharacterEncodingScheme(), document);\n     } catch (Exception e) {\n       if (!(e instanceof ParseException))",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "https://issues.apache.org/jira/browse/ABDERA-155\n\nSwitch to lazy initialization of the various fields in the Abdera class to eliminate the likelihood of race conditions and NPE's in various environments\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@655544 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/faa24367da48d876b08a0c17e9e1e6511e4abb50",
        "parent": "https://github.com/apache/abdera/commit/4471b67a34b805bbffbf53d2176318b2578db859",
        "bug_id": "abdera_23",
        "file": [
            {
                "sha": "79a0a9027e8e207428e36d2d3dd00b271c1bebef",
                "filename": "core/src/main/java/org/apache/abdera/Abdera.java",
                "blob_url": "https://github.com/apache/abdera/blob/faa24367da48d876b08a0c17e9e1e6511e4abb50/core/src/main/java/org/apache/abdera/Abdera.java",
                "raw_url": "https://github.com/apache/abdera/raw/faa24367da48d876b08a0c17e9e1e6511e4abb50/core/src/main/java/org/apache/abdera/Abdera.java",
                "status": "modified",
                "changes": 42,
                "additions": 24,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/core/src/main/java/org/apache/abdera/Abdera.java?ref=faa24367da48d876b08a0c17e9e1e6511e4abb50",
                "patch": "@@ -67,12 +67,12 @@ public static synchronized Abdera getInstance() {\n   }\n   \n   private final Configuration config;\n-  private final Factory factory;\n-  private final Parser parser;\n-  private final XPath xpath;\n-  private final ParserFactory parserFactory;\n-  private final WriterFactory writerFactory;\n-  private final Writer writer;\n+  private Factory factory;\n+  private Parser parser;\n+  private XPath xpath;\n+  private ParserFactory parserFactory;\n+  private WriterFactory writerFactory;\n+  private Writer writer;\n   \n   /**\n    * Initialize using the default Abdera Configuration\n@@ -87,12 +87,6 @@ public Abdera() {\n    */\n   public Abdera(Configuration config) {\n     this.config = config;\n-    factory = newFactory();\n-    parser = newParser();\n-    xpath = newXPath();\n-    parserFactory = newParserFactory();\n-    writerFactory = newWriterFactory();\n-    writer = newWriter();\n     IRI.preinit();  // initializes the IRI stuff to improve performance later\n   }\n   \n@@ -147,7 +141,9 @@ public Configuration getConfiguration() {\n    * \n    * @return The factory instance\n    */\n-  public Factory getFactory() {\n+  public synchronized Factory getFactory() {\n+    if (factory == null)\n+      factory = newFactory();\n     return factory;\n   }\n   \n@@ -156,7 +152,9 @@ public Factory getFactory() {\n    * \n    * @return The parser instance\n    */\n-  public Parser getParser() {\n+  public synchronized Parser getParser() {\n+    if (parser == null)\n+      parser = newParser();\n     return parser;\n   }\n   \n@@ -165,7 +163,9 @@ public Parser getParser() {\n    * \n    * @return The XPath instance\n    */\n-  public XPath getXPath() {\n+  public synchronized XPath getXPath() {\n+    if (xpath == null)\n+      xpath = newXPath();\n     return xpath;\n   }\n   \n@@ -176,7 +176,9 @@ public XPath getXPath() {\n    * \n    * @return The ParserFactory instance\n    */\n-  public ParserFactory getParserFactory() {\n+  public synchronized ParserFactory getParserFactory() {\n+    if (parserFactory == null)\n+      parserFactory = newParserFactory();\n     return parserFactory;\n   }\n   \n@@ -187,7 +189,9 @@ public ParserFactory getParserFactory() {\n    * \n    * @return The WriterFactory instance\n    */\n-  public WriterFactory getWriterFactory() {\n+  public synchronized WriterFactory getWriterFactory() {\n+    if (writerFactory == null)\n+      writerFactory = newWriterFactory();\n     return writerFactory;\n   }\n   \n@@ -197,7 +201,9 @@ public WriterFactory getWriterFactory() {\n    * \n    * @return The default writer implementation\n    */\n-  public Writer getWriter() {\n+  public synchronized Writer getWriter() {\n+    if (writer == null)\n+      writer = newWriter();\n     return writer;\n   }\n   ",
                "deletions": 18
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "http://issues.apache.org/jira/browse/ABDERA-13\n\nFrom Ugo Cei:\n\n  The following code from CommonsClient.java:\n\n  122: options.setIfNoneMatch(cached_response.getEntityTag().toString());\n\n  throws an NPE when running tests because cached_response.getEntityTag() returns null. \n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@467039 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/d7aa2a33265625c92382d436fb66a6e34f76cb84",
        "parent": "https://github.com/apache/abdera/commit/1524aa1c32beff3aaea17c8e78144e324c89a808",
        "bug_id": "abdera_24",
        "file": [
            {
                "sha": "370d7d297bdedad13354869a94907cff15ae9359",
                "filename": "client/src/main/java/org/apache/abdera/protocol/client/CommonsClient.java",
                "blob_url": "https://github.com/apache/abdera/blob/d7aa2a33265625c92382d436fb66a6e34f76cb84/client/src/main/java/org/apache/abdera/protocol/client/CommonsClient.java",
                "raw_url": "https://github.com/apache/abdera/raw/d7aa2a33265625c92382d436fb66a6e34f76cb84/client/src/main/java/org/apache/abdera/protocol/client/CommonsClient.java",
                "status": "modified",
                "changes": 2,
                "additions": 1,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/client/src/main/java/org/apache/abdera/protocol/client/CommonsClient.java?ref=d7aa2a33265625c92382d436fb66a6e34f76cb84",
                "patch": "@@ -117,7 +117,7 @@ public ClientResponse execute(\n               return cached_response;\n           case STALE:                                                            // CACHE HIT: STALE\n             // revalidate the cached entry\n-            if (cached_response != null) {\n+            if (cached_response != null && cached_response.getEntityTag() != null) {\n               options.setIfModifiedSince(cached_response.getLastModified());\n               options.setIfNoneMatch(cached_response.getEntityTag().toString());\n             } else {",
                "deletions": 1
            }
        ]
    },
    {
        "repo": "abdera",
        "message": "entry.getContent() used to throw a NPE when XML or XHTML content is empty. \nStrictly speaking, this is ok, but it's not really necessary.  Fixed.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/abdera/java/trunk@422009 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/abdera/commit/b5a60dd947bbe93b5392c881a669b0d8c51e914e",
        "parent": "https://github.com/apache/abdera/commit/3ba3a77462900d50253d6300532b2927482e8726",
        "bug_id": "abdera_25",
        "file": [
            {
                "sha": "27162cab215db04d88018884b42dbfc17760f1c8",
                "filename": "parser/src/main/java/org/apache/abdera/parser/stax/FOMContent.java",
                "blob_url": "https://github.com/apache/abdera/blob/b5a60dd947bbe93b5392c881a669b0d8c51e914e/parser/src/main/java/org/apache/abdera/parser/stax/FOMContent.java",
                "raw_url": "https://github.com/apache/abdera/raw/b5a60dd947bbe93b5392c881a669b0d8c51e914e/parser/src/main/java/org/apache/abdera/parser/stax/FOMContent.java",
                "status": "modified",
                "changes": 6,
                "additions": 4,
                "contents_url": "https://api.github.com/repos/apache/abdera/contents/parser/src/main/java/org/apache/abdera/parser/stax/FOMContent.java?ref=b5a60dd947bbe93b5392c881a669b0d8c51e914e",
                "patch": "@@ -209,9 +209,11 @@ public String getValue() {\n     } else if (Type.HTML.equals(type)) {\n       val = getText();\n     } else if (Type.XHTML.equals(type)) {\n-      val = ((FOMDiv)this.getFirstChildWithName(Constants.DIV)).getInternalValue();\n+      FOMDiv div = (FOMDiv)this.getFirstChildWithName(Constants.DIV);\n+      if (div != null) val = div.getInternalValue();\n     } else if (Type.XML.equals(type)) {\n-      val = this.getFirstElement().toString();\n+      OMElement el = this.getFirstElement();\n+      if (el != null) val = el.toString();\n     } else if (Type.MEDIA.equals(type)) {\n       val = getText();\n     }",
                "deletions": 2
            }
        ]
    }
]