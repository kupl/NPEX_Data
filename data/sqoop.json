{
    "sqoop_79b7172": {
        "bug_id": "sqoop_79b7172",
        "commit": "https://github.com/apache/sqoop/commit/79b71726946f1bc792e034a32ee10835c58d5033",
        "file": [
            {
                "additions": 14,
                "blob_url": "https://github.com/apache/sqoop/blob/79b71726946f1bc792e034a32ee10835c58d5033/src/java/org/apache/sqoop/ConnFactory.java",
                "changes": 15,
                "contents_url": "https://api.github.com/repos/apache/sqoop/contents/src/java/org/apache/sqoop/ConnFactory.java?ref=79b71726946f1bc792e034a32ee10835c58d5033",
                "deletions": 1,
                "filename": "src/java/org/apache/sqoop/ConnFactory.java",
                "patch": "@@ -294,7 +294,20 @@ private Configuration loadManagersFromConfDir(Configuration conf) {\n     if (mgrDir.exists() && mgrDir.isDirectory()) {\n       // We have a managers.d subdirectory. Get the file list, sort it,\n       // and process them in order.\n-      String [] fileNames = mgrDir.list();\n+      String[] fileNames;\n+\n+      try {\n+        fileNames = mgrDir.list();\n+      } catch (SecurityException e) {\n+        fileNames = null;\n+      }\n+\n+      if (null == fileNames) {\n+        LOG.warn(\"Sqoop cannot read $SQOOP_CONF_DIR/managers.d. \"\n+            + \"Please check the permissions on managers.d.\");\n+        return conf;\n+      }\n+\n       Arrays.sort(fileNames);\n \n       for (String fileName : fileNames) {",
                "raw_url": "https://github.com/apache/sqoop/raw/79b71726946f1bc792e034a32ee10835c58d5033/src/java/org/apache/sqoop/ConnFactory.java",
                "sha": "335b03755dfcdbb6b7110dd0fe003954a287851a",
                "status": "modified"
            }
        ],
        "message": "SQOOP-1387: Incorrect permissions on manager.d directory can lead to NPE",
        "parent": "https://github.com/apache/sqoop/commit/ad53e4e334885980bf4fcefc0e85336c458dba7b",
        "repo": "sqoop",
        "unit_tests": [
            "TestConnFactory.java"
        ]
    },
    "sqoop_9aac957": {
        "bug_id": "sqoop_9aac957",
        "commit": "https://github.com/apache/sqoop/commit/9aac957b9c0e9f6c644df5cb529d5cd1a118dff8",
        "file": [
            {
                "additions": 15,
                "blob_url": "https://github.com/apache/sqoop/blob/9aac957b9c0e9f6c644df5cb529d5cd1a118dff8/src/java/org/apache/sqoop/accumulo/AccumuloUtil.java",
                "changes": 21,
                "contents_url": "https://api.github.com/repos/apache/sqoop/contents/src/java/org/apache/sqoop/accumulo/AccumuloUtil.java?ref=9aac957b9c0e9f6c644df5cb529d5cd1a118dff8",
                "deletions": 6,
                "filename": "src/java/org/apache/sqoop/accumulo/AccumuloUtil.java",
                "patch": "@@ -105,13 +105,22 @@ public static void addJars(Job job, SqoopOptions options) throws IOException {\n         .addAll(conf.getStringCollection(\n           ConfigurationConstants.MAPRED_DISTCACHE_CONF_PARAM));\n \n-      String dir = accumuloHome + File.separator + \"lib\";\n-      LOG.info(\"Adding jar files under \" + dir + \" to distributed cache\");\n-      addDirToCache(new File(dir), fs, localUrls, false);\n+      if (null == accumuloHome) {\n+        throw new IllegalArgumentException(\"ACCUMULO_HOME is not set.\");\n+      } else {\n+        File dir = new File(accumuloHome, \"lib\");\n+        String path = dir.getPath();\n+        LOG.info(\"Adding jar files under \" + path + \" to distributed cache\");\n+        addDirToCache(dir, fs, localUrls, false);\n+      }\n \n-      dir = zookeeperHome;\n-      LOG.info(\"Adding jar files under \" + dir + \" to distributed cache\");\n-      addDirToCache(new File(dir), fs, localUrls, false);\n+      if (null == zookeeperHome) {\n+        throw new IllegalArgumentException(\"ZOOKEEPER_HOME is not set.\");\n+      } else {\n+        String dir = zookeeperHome;\n+        LOG.info(\"Adding jar files under \" + dir + \" to distributed cache\");\n+        addDirToCache(new File(dir), fs, localUrls, false);\n+      }\n \n       String tmpjars = conf\n         .get(ConfigurationConstants.MAPRED_DISTCACHE_CONF_PARAM);",
                "raw_url": "https://github.com/apache/sqoop/raw/9aac957b9c0e9f6c644df5cb529d5cd1a118dff8/src/java/org/apache/sqoop/accumulo/AccumuloUtil.java",
                "sha": "06888c5d7e660bea4306ed282915c7805f0de649",
                "status": "modified"
            }
        ],
        "message": "SQOOP-1370: AccumuloUtils can throw NPE when zookeeper or accumulo home is null\n\n(Mike Drob via Jarek Jarcec Cecho)",
        "parent": "https://github.com/apache/sqoop/commit/92d363da65b8b4e0ba52695ebff049a9253cb52b",
        "repo": "sqoop",
        "unit_tests": [
            "TestAccumuloUtil.java"
        ]
    }
}