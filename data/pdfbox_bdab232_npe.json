[
    {
        "repo": "pdfbox",
        "commit": "https://github.com/apache/pdfbox/commit/bdab232e265a828d758979678920fcdaf2c5b7b9",
        "bug_id": "pdfbox_bdab232",
        "message": "PDFBOX-3946: avoid NPE if URI doesn't exist\n\ngit-svn-id: https://svn.apache.org/repos/asf/pdfbox/trunk@1810594 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/pdfbox/commit/55586aadb4fd2008e8b7bd9017bef208b63c3454",
        "patched_files": [
            "PDActionURI.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 8,
                "raw_url": "https://github.com/apache/pdfbox/raw/bdab232e265a828d758979678920fcdaf2c5b7b9/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURI.java",
                "contents_url": "https://api.github.com/repos/apache/pdfbox/contents/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURI.java?ref=bdab232e265a828d758979678920fcdaf2c5b7b9",
                "filename": "pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURI.java",
                "deletions": 2,
                "sha": "2898bbe14f6b80dc7cf19f92c72990f2dad3f44a",
                "blob_url": "https://github.com/apache/pdfbox/blob/bdab232e265a828d758979678920fcdaf2c5b7b9/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURI.java",
                "patch": "@@ -16,6 +16,7 @@\n  */\n package org.apache.pdfbox.pdmodel.interactive.action;\n \n+import org.apache.pdfbox.cos.COSBase;\n import org.apache.pdfbox.cos.COSDictionary;\n import org.apache.pdfbox.cos.COSName;\n import org.apache.pdfbox.cos.COSString;\n@@ -57,11 +58,16 @@ public PDActionURI(COSDictionary a)\n      * This will get the uniform resource identifier to resolve. It should be encoded in 7-bit\n      * ASCII, but UTF-8 is supported too.\n      *\n-     * @return The URI entry of the specific URI action dictionary.\n+     * @return The URI entry of the specific URI action dictionary or null if there isn't any.\n      */\n     public String getURI()\n     {\n-        return new String(((COSString) action.getDictionaryObject(COSName.URI)).getBytes(), Charsets.UTF_8);\n+        COSBase base = action.getDictionaryObject(COSName.URI);\n+        if (base instanceof COSString)\n+        {\n+            return new String(((COSString) base).getBytes(), Charsets.UTF_8);\n+        }\n+        return null;\n     }\n \n     /**",
                "changes": 10
            },
            {
                "status": "modified",
                "additions": 2,
                "raw_url": "https://github.com/apache/pdfbox/raw/bdab232e265a828d758979678920fcdaf2c5b7b9/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURITest.java",
                "contents_url": "https://api.github.com/repos/apache/pdfbox/contents/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURITest.java?ref=bdab232e265a828d758979678920fcdaf2c5b7b9",
                "filename": "pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURITest.java",
                "deletions": 0,
                "sha": "e8d07b1bb8daddcead89d23ae62f68f51e6eef6b",
                "blob_url": "https://github.com/apache/pdfbox/blob/bdab232e265a828d758979678920fcdaf2c5b7b9/pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURITest.java",
                "patch": "@@ -16,6 +16,7 @@\n package org.apache.pdfbox.pdmodel.interactive.action;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNull;\n import org.junit.Test;\n \n /**\n@@ -31,6 +32,7 @@\n     public void testUTF8URI()\n     {\n         PDActionURI actionURI = new PDActionURI();\n+        assertNull(actionURI.getURI());\n         actionURI.setURI(\"http://\u00e7\u00b5\u201e\u00e5\u0152\u00b6\u00e6\u203a\u00bf\u00e7\u00b6\u017d.com/\");\n         assertEquals(\"http://\u7d4c\u55b6\u627f\u7d99.com/\", actionURI.getURI());\n     }",
                "changes": 2
            }
        ],
        "unit_tests": [
            "PDActionURITest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "pdfbox/src/test/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURITest.java",
        "buggy_files": [
            "pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/action/PDActionURI.java"
        ],
        "fixed": true
    }
]