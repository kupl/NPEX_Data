[
    {
        "repo": "struts-sandbox",
        "message": "Fix for Bug 38670 - Standalone Tiles NullPointerException when debugging - patch supplied by David DeWolf\n\ngit-svn-id: https://svn.apache.org/repos/asf/struts/sandbox/trunk@379724 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/struts-sandbox/commit/80ff10ed8d19663308eb9bcca60a928dfb143322",
        "parent": "https://github.com/apache/struts-sandbox/commit/ee50b9ee4b1a47909c07f26346218d2e584e7108",
        "bug_id": "struts-sandbox_1",
        "file": [
            {
                "sha": "49043b1a5db2c2686eee3617ea5e7df62c9d3626",
                "filename": "tiles/src/java/org/apache/tiles/ComponentAttribute.java",
                "blob_url": "https://github.com/apache/struts-sandbox/blob/80ff10ed8d19663308eb9bcca60a928dfb143322/tiles/src/java/org/apache/tiles/ComponentAttribute.java",
                "raw_url": "https://github.com/apache/struts-sandbox/raw/80ff10ed8d19663308eb9bcca60a928dfb143322/tiles/src/java/org/apache/tiles/ComponentAttribute.java",
                "status": "modified",
                "changes": 7,
                "additions": 5,
                "contents_url": "https://api.github.com/repos/apache/struts-sandbox/contents/tiles/src/java/org/apache/tiles/ComponentAttribute.java?ref=80ff10ed8d19663308eb9bcca60a928dfb143322",
                "patch": "@@ -1,7 +1,7 @@\n /*\n  * $Id$\n  *\n- * Copyright 1999-2004 The Apache Software Foundation.\n+ * Copyright 1999-2006 The Apache Software Foundation.\n  * \n  * Licensed under the Apache License, Version 2.0 (the \"License\");\n  * you may not use this file except in compliance with the License.\n@@ -118,7 +118,10 @@ public void setValue(Object value) {\n      * Get String representation of this object.\n      */\n     public String toString() {\n-        return value.toString();\n+        if (value != null) {\n+            return value.toString();\n+        }\n+        return null;\n     }\n \n     public String getType() {",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "struts-sandbox",
        "message": "SB-38\nNow the tag check if a ComponentContext has been registered and, if there is one, uses it to take an attribute value.\nThis way the NullPointerException will not be thrown.\n\ngit-svn-id: https://svn.apache.org/repos/asf/struts/sandbox/trunk@437675 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/struts-sandbox/commit/78a0ac859a8dea74589f4fc5b6acc5e00b6bc53d",
        "parent": "https://github.com/apache/struts-sandbox/commit/3862175ec73fa4063a9add58c603ca86f9267c60",
        "bug_id": "struts-sandbox_2",
        "file": [
            {
                "sha": "88ec5c490b9ccd3deea5049f9386933acbd5c55f",
                "filename": "tiles/tiles-core/src/main/java/org/apache/tiles/taglib/InsertTag.java",
                "blob_url": "https://github.com/apache/struts-sandbox/blob/78a0ac859a8dea74589f4fc5b6acc5e00b6bc53d/tiles/tiles-core/src/main/java/org/apache/tiles/taglib/InsertTag.java",
                "raw_url": "https://github.com/apache/struts-sandbox/raw/78a0ac859a8dea74589f4fc5b6acc5e00b6bc53d/tiles/tiles-core/src/main/java/org/apache/tiles/taglib/InsertTag.java",
                "status": "modified",
                "changes": 14,
                "additions": 12,
                "contents_url": "https://api.github.com/repos/apache/struts-sandbox/contents/tiles/tiles-core/src/main/java/org/apache/tiles/taglib/InsertTag.java?ref=78a0ac859a8dea74589f4fc5b6acc5e00b6bc53d",
                "patch": "@@ -437,7 +437,12 @@ public TagHandler createTagHandler() throws JspException {\n \t * processDefinitionName()\n \t */\n \tpublic TagHandler processName(String name) throws JspException {\n-\t\tObject attrValue = getCurrentContext().getAttribute(name);\n+        Object attrValue = null;\n+        ComponentContext context = getCurrentContext();\n+        \n+        if (context != null) {\n+            attrValue = context.getAttribute(name);\n+        }\n \n \t\tif (attrValue != null && attrValue instanceof ComponentAttribute) {\n                     return processTypedAttribute((ComponentAttribute) attrValue);\n@@ -559,7 +564,12 @@ protected TagHandler processDefinition(ComponentDefinition definition)\n \t * @throws JspException - Throws by underlying nested call to processDefinitionName()\n \t */\n \tpublic TagHandler processAttribute(String name) throws JspException {\n-            Object attrValue = getCurrentContext().getAttribute(name);\n+            Object attrValue = null;\n+            ComponentContext context = getCurrentContext();\n+            \n+            if (context != null) {\n+                attrValue = context.getAttribute(name);\n+            }\n \n             if (attrValue == null) {\n                     throw new JspException(",
                "deletions": 2
            }
        ]
    },
    {
        "repo": "struts-sandbox",
        "message": "Miscellaneous fixes:\n\n* ShaleViewHandler - correctly deal with a JSP page that has\n  no corresponding ViewController defined as a manageed bean,\n  instead of throwing NPE.\n\n* Messages - return null if no entry found for a key, instead\n  of throwing MissingResourceException.\n\n* taglib.tld - correct element names for <rtexprvalue> elements.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/struts/sandbox/trunk@124049 13f79535-47bb-0310-9956-ffa450edef68",
        "commit": "https://github.com/apache/struts-sandbox/commit/3499a643f1886adab93d8ca2879ca9b2e5031bb2",
        "parent": "https://github.com/apache/struts-sandbox/commit/43e655a8bfa5a08020b94596ac4978fb9e56744f",
        "bug_id": "struts-sandbox_3",
        "file": [
            {
                "sha": "d42d87389420839634a48fd8960f22ba28a6c15e",
                "filename": "struts-shale/src/conf/taglib.tld",
                "blob_url": "https://github.com/apache/struts-sandbox/blob/3499a643f1886adab93d8ca2879ca9b2e5031bb2/struts-shale/src/conf/taglib.tld",
                "raw_url": "https://github.com/apache/struts-sandbox/raw/3499a643f1886adab93d8ca2879ca9b2e5031bb2/struts-shale/src/conf/taglib.tld",
                "status": "modified",
                "changes": 6,
                "additions": 3,
                "contents_url": "https://api.github.com/repos/apache/struts-sandbox/contents/struts-shale/src/conf/taglib.tld?ref=3499a643f1886adab93d8ca2879ca9b2e5031bb2",
                "patch": "@@ -55,7 +55,7 @@\n     <attribute>\n       <name>binding</name>\n       <required>false</required>\n-      <exprvalue>false</exprvalue>\n+      <rtexprvalue>false</rtexprvalue>\n       <description>\n         Value binding expression used to bind this component instance\n         to a backing bean property.\n@@ -65,7 +65,7 @@\n     <attribute>\n       <name>id</name>\n       <required>false</required>\n-      <exprvalue>false</exprvalue>\n+      <rtexprvalue>false</rtexprvalue>\n       <description>\n         Component identifier of this component.  If specified, this identifier\n         must be unique within the context of the closest parent UIComponent\n@@ -76,7 +76,7 @@\n     <attribute>\n       <name>rendered</name>\n       <required>false</required>\n-      <exprvalue>false</exprvalue>\n+      <rtexprvalue>false</rtexprvalue>\n       <description>\n         Flag indicating whether this component should be rendered.\n         Default value is true.",
                "deletions": 3
            },
            {
                "sha": "89da3d46b38033d21ecf0f320e9436823209597c",
                "filename": "struts-shale/src/java/org/apache/shale/faces/ShaleViewHandler.java",
                "blob_url": "https://github.com/apache/struts-sandbox/blob/3499a643f1886adab93d8ca2879ca9b2e5031bb2/struts-shale/src/java/org/apache/shale/faces/ShaleViewHandler.java",
                "raw_url": "https://github.com/apache/struts-sandbox/raw/3499a643f1886adab93d8ca2879ca9b2e5031bb2/struts-shale/src/java/org/apache/shale/faces/ShaleViewHandler.java",
                "status": "modified",
                "changes": 13,
                "additions": 7,
                "contents_url": "https://api.github.com/repos/apache/struts-sandbox/contents/struts-shale/src/java/org/apache/shale/faces/ShaleViewHandler.java?ref=3499a643f1886adab93d8ca2879ca9b2e5031bb2",
                "patch": "@@ -221,17 +221,18 @@ private void setupViewController(FacesContext context, UIViewRoot view,\n             context.getApplication().createValueBinding(\"#{\" + viewName + \"}\");\n         ViewController vc = null;\n         try {\n-            vc = (ViewController) vb.getValue(context);\n+            Object vcObject = vb.getValue(context);\n+            if (vcObject == null) {\n+                log.warn(messages.getMessage(\"view.noViewController\",\n+                                             new Object[] { viewId, viewName }));\n+                return;\n+            }\n+            vc = (ViewController) vcObject;\n         } catch (ClassCastException e) {\n             log.warn(messages.getMessage(\"view.notViewController\", \n                                          new Object[] { viewId, viewName }));\n             return;\n         }\n-        if (vc == null) {\n-            log.warn(messages.getMessage(\"view.noViewController\",\n-                                         new Object[] { viewId, viewName }));\n-            return;\n-        }\n \n         // Configure the instance properties and initialize it\n         vc.setPostBack(postBack);",
                "deletions": 6
            },
            {
                "sha": "96f61c1af858d4c3437870e34fed4277ff435288",
                "filename": "struts-shale/src/java/org/apache/shale/util/Messages.java",
                "blob_url": "https://github.com/apache/struts-sandbox/blob/3499a643f1886adab93d8ca2879ca9b2e5031bb2/struts-shale/src/java/org/apache/shale/util/Messages.java",
                "raw_url": "https://github.com/apache/struts-sandbox/raw/3499a643f1886adab93d8ca2879ca9b2e5031bb2/struts-shale/src/java/org/apache/shale/util/Messages.java",
                "status": "modified",
                "changes": 7,
                "additions": 6,
                "contents_url": "https://api.github.com/repos/apache/struts-sandbox/contents/struts-shale/src/java/org/apache/shale/util/Messages.java?ref=3499a643f1886adab93d8ca2879ca9b2e5031bb2",
                "patch": "@@ -20,6 +20,7 @@\n import java.util.HashMap;\n import java.util.Locale;\n import java.util.Map;\n+import java.util.MissingResourceException;\n import java.util.ResourceBundle;\n \n /**\n@@ -139,7 +140,11 @@ public String getMessage(String key, Object params[]) {\n     public String getMessage(String key, Locale locale) {\n \n         ResourceBundle rb = getBundle(locale);\n-        return rb.getString(key);\n+        try {\n+            return rb.getString(key);\n+        } catch (MissingResourceException e) {\n+            return null;\n+        }\n \n     }\n ",
                "deletions": 1
            }
        ]
    }
]