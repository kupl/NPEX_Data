[{"commit": "https://github.com/apache/incubator-retired-gossip/commit/3a4090878355487d2958805690af0090ce9b81cb", "parent": "https://github.com/apache/incubator-retired-gossip/commit/a7da35f270b5f899ae66667c9b135ac59906fceb", "message": "Possible NPE", "bug_id": "incubator-retired-gossip_1", "file": [{"additions": 2, "raw_url": "https://github.com/apache/incubator-retired-gossip/raw/3a4090878355487d2958805690af0090ce9b81cb/src/main/java/com/google/code/gossip/manager/GossipManager.java", "blob_url": "https://github.com/apache/incubator-retired-gossip/blob/3a4090878355487d2958805690af0090ce9b81cb/src/main/java/com/google/code/gossip/manager/GossipManager.java", "sha": "136f81d29535ce26af6dbf1a2337e68369b443fe", "changes": 5, "status": "modified", "deletions": 3, "contents_url": "https://api.github.com/repos/apache/incubator-retired-gossip/contents/src/main/java/com/google/code/gossip/manager/GossipManager.java?ref=3a4090878355487d2958805690af0090ce9b81cb", "patch": "@@ -57,7 +57,7 @@ public GossipManager(Class<? extends PassiveGossipThread> passiveGossipThreadCla\n         GossipService.LOGGER.debug(member);\n       }\n     }\n-\n+    _gossipThreadExecutor = Executors.newCachedThreadPool();\n     _gossipServiceRunning = new AtomicBoolean(true);\n     this.listener = listener;\n     Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {\n@@ -143,7 +143,6 @@ public void run() {\n         member.startTimeoutTimer();\n       }\n     }\n-    _gossipThreadExecutor = Executors.newCachedThreadPool();\n     try {\n       passiveGossipThread = _passiveGossipThreadClass.getConstructor(GossipManager.class)\n               .newInstance(this);\n@@ -170,6 +169,7 @@ public void run() {\n    * Shutdown the gossip service.\n    */\n   public void shutdown() {\n+    _gossipServiceRunning.set(false);\n     _gossipThreadExecutor.shutdown();\n     passiveGossipThread.shutdown();\n     activeGossipThread.shutdown();\n@@ -181,6 +181,5 @@ public void shutdown() {\n     } catch (InterruptedException e) {\n       LOGGER.error(e);\n     }\n-    _gossipServiceRunning.set(false);\n   }\n }", "filename": "src/main/java/com/google/code/gossip/manager/GossipManager.java"}], "repo": "incubator-retired-gossip"}]
