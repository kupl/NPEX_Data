{
    "fineract-cn-deposit-account-management_a646446": {
        "bug_id": "fineract-cn-deposit-account-management_a646446",
        "commit": "https://github.com/apache/fineract-cn-deposit-account-management/commit/a646446245d4cf44c9108adaf6f1a38f4c4aa51e",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/fineract-cn-deposit-account-management/blob/a646446245d4cf44c9108adaf6f1a38f4c4aa51e/api/src/main/java/io/mifos/deposit/api/v1/definition/domain/ProductDefinition.java",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/fineract-cn-deposit-account-management/contents/api/src/main/java/io/mifos/deposit/api/v1/definition/domain/ProductDefinition.java?ref=a646446245d4cf44c9108adaf6f1a38f4c4aa51e",
                "deletions": 0,
                "filename": "api/src/main/java/io/mifos/deposit/api/v1/definition/domain/ProductDefinition.java",
                "patch": "@@ -50,6 +50,7 @@\n   private Term term;\n   @Valid\n   private Set<Charge> charges;\n+  @NotNull\n   private Boolean flexible;\n   private Boolean active;\n ",
                "raw_url": "https://github.com/apache/fineract-cn-deposit-account-management/raw/a646446245d4cf44c9108adaf6f1a38f4c4aa51e/api/src/main/java/io/mifos/deposit/api/v1/definition/domain/ProductDefinition.java",
                "sha": "17ef7cd616f673ce3a395e66c19a968f5bc01b2b",
                "status": "modified"
            },
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/fineract-cn-deposit-account-management/blob/a646446245d4cf44c9108adaf6f1a38f4c4aa51e/service/src/main/java/io/mifos/deposit/service/internal/command/handler/ProductDefinitionAggregate.java",
                "changes": 20,
                "contents_url": "https://api.github.com/repos/apache/fineract-cn-deposit-account-management/contents/service/src/main/java/io/mifos/deposit/service/internal/command/handler/ProductDefinitionAggregate.java?ref=a646446245d4cf44c9108adaf6f1a38f4c4aa51e",
                "deletions": 9,
                "filename": "service/src/main/java/io/mifos/deposit/service/internal/command/handler/ProductDefinitionAggregate.java",
                "patch": "@@ -228,15 +228,17 @@ void saveDependingEntities(final ProductDefinition productDefinition, final Prod\n     termEntity.setProductDefinition(savedProductEntity);\n     this.termRepository.save(termEntity);\n \n-    this.chargeRepository.save(productDefinition.getCharges()\n-        .stream()\n-        .map(charge -> {\n-          final ChargeEntity chargeEntity = ChargeMapper.map(charge, this.actionRepository);\n-          chargeEntity.setProductDefinition(savedProductEntity);\n-          return chargeEntity;\n-        })\n-        .collect(Collectors.toSet())\n-    );\n+    if (productDefinition.getCharges() != null && !productDefinition.getCharges().isEmpty()) {\n+      this.chargeRepository.save(productDefinition.getCharges()\n+              .stream()\n+              .map(charge -> {\n+                final ChargeEntity chargeEntity = ChargeMapper.map(charge, this.actionRepository);\n+                chargeEntity.setProductDefinition(savedProductEntity);\n+                return chargeEntity;\n+              })\n+              .collect(Collectors.toSet())\n+      );\n+    }\n   }\n \n   void deleteDependingEntities(final ProductDefinitionEntity productDefinitionEntity) {",
                "raw_url": "https://github.com/apache/fineract-cn-deposit-account-management/raw/a646446245d4cf44c9108adaf6f1a38f4c4aa51e/service/src/main/java/io/mifos/deposit/service/internal/command/handler/ProductDefinitionAggregate.java",
                "sha": "b67ed48d6adcd6da732563cde4a9e37987873161",
                "status": "modified"
            }
        ],
        "message": "Add null check to prevent NPE when saving product definition without charges\nAdd null check for flexible to prevent SQL exception",
        "parent": "https://github.com/apache/fineract-cn-deposit-account-management/commit/102f0d7de9cead9a398a58b55bb42f00c26300c9",
        "patched_files": [
            "ProductDefinition.java"
        ],
        "repo": "fineract-cn-deposit-account-management",
        "unit_tests": [
            "TestProductDefinition.java"
        ]
    },
    "fineract-cn-deposit-account-management_addc4cb": {
        "bug_id": "fineract-cn-deposit-account-management_addc4cb",
        "commit": "https://github.com/apache/fineract-cn-deposit-account-management/commit/addc4cb4909201e84643f3505a3af0564b9ee9e8",
        "file": [
            {
                "additions": 1,
                "blob_url": "https://github.com/apache/fineract-cn-deposit-account-management/blob/addc4cb4909201e84643f3505a3af0564b9ee9e8/api/src/main/java/io/mifos/deposit/api/v1/definition/domain/ProductDefinition.java",
                "changes": 1,
                "contents_url": "https://api.github.com/repos/apache/fineract-cn-deposit-account-management/contents/api/src/main/java/io/mifos/deposit/api/v1/definition/domain/ProductDefinition.java?ref=addc4cb4909201e84643f3505a3af0564b9ee9e8",
                "deletions": 0,
                "filename": "api/src/main/java/io/mifos/deposit/api/v1/definition/domain/ProductDefinition.java",
                "patch": "@@ -50,6 +50,7 @@\n   private Term term;\n   @Valid\n   private Set<Charge> charges;\n+  @NotNull\n   private Boolean flexible;\n   private Boolean active;\n ",
                "raw_url": "https://github.com/apache/fineract-cn-deposit-account-management/raw/addc4cb4909201e84643f3505a3af0564b9ee9e8/api/src/main/java/io/mifos/deposit/api/v1/definition/domain/ProductDefinition.java",
                "sha": "17ef7cd616f673ce3a395e66c19a968f5bc01b2b",
                "status": "modified"
            },
            {
                "additions": 11,
                "blob_url": "https://github.com/apache/fineract-cn-deposit-account-management/blob/addc4cb4909201e84643f3505a3af0564b9ee9e8/service/src/main/java/io/mifos/deposit/service/internal/command/handler/ProductDefinitionAggregate.java",
                "changes": 20,
                "contents_url": "https://api.github.com/repos/apache/fineract-cn-deposit-account-management/contents/service/src/main/java/io/mifos/deposit/service/internal/command/handler/ProductDefinitionAggregate.java?ref=addc4cb4909201e84643f3505a3af0564b9ee9e8",
                "deletions": 9,
                "filename": "service/src/main/java/io/mifos/deposit/service/internal/command/handler/ProductDefinitionAggregate.java",
                "patch": "@@ -228,15 +228,17 @@ void saveDependingEntities(final ProductDefinition productDefinition, final Prod\n     termEntity.setProductDefinition(savedProductEntity);\n     this.termRepository.save(termEntity);\n \n-    this.chargeRepository.save(productDefinition.getCharges()\n-        .stream()\n-        .map(charge -> {\n-          final ChargeEntity chargeEntity = ChargeMapper.map(charge, this.actionRepository);\n-          chargeEntity.setProductDefinition(savedProductEntity);\n-          return chargeEntity;\n-        })\n-        .collect(Collectors.toSet())\n-    );\n+    if (productDefinition.getCharges() != null && !productDefinition.getCharges().isEmpty()) {\n+      this.chargeRepository.save(productDefinition.getCharges()\n+              .stream()\n+              .map(charge -> {\n+                final ChargeEntity chargeEntity = ChargeMapper.map(charge, this.actionRepository);\n+                chargeEntity.setProductDefinition(savedProductEntity);\n+                return chargeEntity;\n+              })\n+              .collect(Collectors.toSet())\n+      );\n+    }\n   }\n \n   void deleteDependingEntities(final ProductDefinitionEntity productDefinitionEntity) {",
                "raw_url": "https://github.com/apache/fineract-cn-deposit-account-management/raw/addc4cb4909201e84643f3505a3af0564b9ee9e8/service/src/main/java/io/mifos/deposit/service/internal/command/handler/ProductDefinitionAggregate.java",
                "sha": "b67ed48d6adcd6da732563cde4a9e37987873161",
                "status": "modified"
            }
        ],
        "message": "Merge pull request #9 from markvanveen/develop\n\nAdd null check to prevent NPE when saving product definition without \u2026",
        "parent": "https://github.com/apache/fineract-cn-deposit-account-management/commit/102f0d7de9cead9a398a58b55bb42f00c26300c9",
        "patched_files": [
            "ProductDefinition.java"
        ],
        "repo": "fineract-cn-deposit-account-management",
        "unit_tests": [
            "TestProductDefinition.java"
        ]
    }
}