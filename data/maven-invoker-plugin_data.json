[{"commit": "https://github.com/apache/maven-invoker-plugin/commit/e99a189e99cc655ed2f399cbb3d9f3a36625db4a", "parent": "https://github.com/apache/maven-invoker-plugin/commit/627fd3cb7c3dca3720341ed1088dc00f138d5016", "message": "avoid NPE\n\nSigned-off-by: olivier lamy <olamy@apache.org>", "bug_id": "maven-invoker-plugin_1", "file": [{"additions": 5, "raw_url": "https://github.com/apache/maven-invoker-plugin/raw/e99a189e99cc655ed2f399cbb3d9f3a36625db4a/src/main/java/org/apache/maven/plugins/invoker/InstallMojo.java", "blob_url": "https://github.com/apache/maven-invoker-plugin/blob/e99a189e99cc655ed2f399cbb3d9f3a36625db4a/src/main/java/org/apache/maven/plugins/invoker/InstallMojo.java", "sha": "41ee47e4fde2f675e2695e0443a7b2ffc88b524d", "changes": 6, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/maven-invoker-plugin/contents/src/main/java/org/apache/maven/plugins/invoker/InstallMojo.java?ref=e99a189e99cc655ed2f399cbb3d9f3a36625db4a", "patch": "@@ -458,7 +458,11 @@ private void installProjectDependencies( MavenProject mvnProject, Collection<Mav\n             for ( String projectId : dependencyProjects )\r\n             {\r\n                 MavenProject dependencyProject = projects.get( projectId );\r\n-\r\n+                if ( dependencyProject == null )\r\n+                {\r\n+                    getLog().error( \"dependencyProject null for projectId=\" + projectId );\r\n+                    continue;\r\n+                }\r\n                 installProjectArtifacts( dependencyProject );\r\n                 installProjectParents( dependencyProject );\r\n             }\r", "filename": "src/main/java/org/apache/maven/plugins/invoker/InstallMojo.java"}], "repo": "maven-invoker-plugin"}, {"commit": "https://github.com/apache/maven-invoker-plugin/commit/f26b28e891e36aa35e31fcdcb5d6a642ea837269", "parent": "https://github.com/apache/maven-invoker-plugin/commit/ec4b12469292531d9bf5e849dd448ce203a1c76d", "message": "[MINVOKER-51] NPE when packaging is pom\nSubmitted by: Peter Janes\nReviewed by: Benjamin Bentmann\n\no Applied with minor modifications/additions\n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@685574 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-invoker-plugin_2", "file": [{"additions": 57, "raw_url": "https://github.com/apache/maven-invoker-plugin/raw/f26b28e891e36aa35e31fcdcb5d6a642ea837269/src/it/staging-pom/pom.xml", "blob_url": "https://github.com/apache/maven-invoker-plugin/blob/f26b28e891e36aa35e31fcdcb5d6a642ea837269/src/it/staging-pom/pom.xml", "sha": "cf6e7a6808ab1a2283d6f863ce1173c59a015bcf", "changes": 57, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-invoker-plugin/contents/src/it/staging-pom/pom.xml?ref=f26b28e891e36aa35e31fcdcb5d6a642ea837269", "patch": "@@ -0,0 +1,57 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one\n+  ~ or more contributor license agreements.  See the NOTICE file\n+  ~ distributed with this work for additional information\n+  ~ regarding copyright ownership.  The ASF licenses this file\n+  ~ to you under the Apache License, Version 2.0 (the\n+  ~ \"License\"); you may not use this file except in compliance\n+  ~ with the License.  You may obtain a copy of the License at\n+  ~\n+  ~   http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing,\n+  ~ software distributed under the License is distributed on an\n+  ~ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+  ~ KIND, either express or implied.  See the License for the\n+  ~ specific language governing permissions and limitations\n+  ~ under the License.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <groupId>test</groupId>\n+  <artifactId>pom-packaging</artifactId>\n+  <version>1.0-SNAPSHOT</version>\n+  <packaging>pom</packaging>\n+\n+  <description>\n+    Test to check for MINVOKER-51, i.e. NPE when packaging is pom.\n+  </description>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-invoker-plugin</artifactId>\n+        <version>@pom.version@</version>\n+        <configuration>\n+          <localRepositoryPath>${project.build.directory}/it-repo</localRepositoryPath>\n+        </configuration>\n+        <executions>\n+          <execution>\n+            <id>integration-test</id>\n+            <phase>integration-test</phase>\n+            <goals>\n+              <goal>install</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+    </plugins>\n+  </build>\n+\n+</project>", "filename": "src/it/staging-pom/pom.xml"}, {"additions": 35, "raw_url": "https://github.com/apache/maven-invoker-plugin/raw/f26b28e891e36aa35e31fcdcb5d6a642ea837269/src/it/staging-pom/verify.bsh", "blob_url": "https://github.com/apache/maven-invoker-plugin/blob/f26b28e891e36aa35e31fcdcb5d6a642ea837269/src/it/staging-pom/verify.bsh", "sha": "32ebe7f9269a2007ff20e2b3f90823a36ff5ecf0", "changes": 35, "status": "added", "deletions": 0, "contents_url": "https://api.github.com/repos/apache/maven-invoker-plugin/contents/src/it/staging-pom/verify.bsh?ref=f26b28e891e36aa35e31fcdcb5d6a642ea837269", "patch": "@@ -0,0 +1,35 @@\n+import java.io.*;\n+import java.util.*;\n+import java.util.regex.*;\n+\n+try\n+{\n+    File itRepoDir = new File( basedir, \"target/it-repo\" );\n+    System.out.println( \"Checking for existence of: \" + itRepoDir );\n+    if ( !itRepoDir.isDirectory() )\n+    {\n+        System.out.println( \"FAILED!\" );\n+        return false;\n+    }\n+\n+    String[] files = {\n+            \"test/pom-packaging/1.0-SNAPSHOT/pom-packaging-1.0-SNAPSHOT.pom\",\n+      };\n+    for ( String file : files )\n+    {\n+        File stagedFile = new File( itRepoDir, file );\n+        System.out.println( \"Checking for existence of: \" + stagedFile );\n+        if ( !stagedFile.isFile() )\n+        {\n+            System.out.println( \"FAILED!\" );\n+            return false;\n+        }\n+    }\n+}\n+catch( Throwable t )\n+{\n+    t.printStackTrace();\n+    return false;\n+}\n+\n+return true;", "filename": "src/it/staging-pom/verify.bsh"}, {"additions": 5, "raw_url": "https://github.com/apache/maven-invoker-plugin/raw/f26b28e891e36aa35e31fcdcb5d6a642ea837269/src/main/java/org/apache/maven/plugin/invoker/InstallMojo.java", "blob_url": "https://github.com/apache/maven-invoker-plugin/blob/f26b28e891e36aa35e31fcdcb5d6a642ea837269/src/main/java/org/apache/maven/plugin/invoker/InstallMojo.java", "sha": "2797f622dd45aad25b1ad681bd5d6fcb8a7c1ba7", "changes": 6, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/maven-invoker-plugin/contents/src/main/java/org/apache/maven/plugin/invoker/InstallMojo.java?ref=f26b28e891e36aa35e31fcdcb5d6a642ea837269", "patch": "@@ -176,7 +176,11 @@ private void installProjectArtifacts( MavenProject mvnProject, ArtifactRepositor\n             installProjectPom( mvnProject, testRepository );\n \n             // Install the main project artifact\n-            installer.install( mvnProject.getArtifact().getFile(), mvnProject.getArtifact(), testRepository );\n+            File artifactFile = mvnProject.getArtifact().getFile();\n+            if ( artifactFile != null )\n+            {\n+                installer.install( artifactFile, mvnProject.getArtifact(), testRepository );\n+            }\n \n             // Install any attached project artifacts\n             Collection attachedArtifacts = mvnProject.getAttachedArtifacts();", "filename": "src/main/java/org/apache/maven/plugin/invoker/InstallMojo.java"}], "repo": "maven-invoker-plugin"}]
