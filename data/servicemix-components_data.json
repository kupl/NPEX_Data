[{"commit": "https://github.com/apache/servicemix-components/commit/8362c33fe132b2c0b3cf134e8bfd176fea880249", "parent": "https://github.com/apache/servicemix-components/commit/d44495cea99815f609d7f1bb708565b3b765e318", "message": "[SMXCOMP-952]NPE in CxfBcConsumer when ServiceMix is deployed as a web application\n\ngit-svn-id: https://svn.apache.org/repos/asf/servicemix/components/trunk@1406050 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "servicemix-components_1", "file": [{"additions": 6, "raw_url": "https://github.com/apache/servicemix-components/raw/8362c33fe132b2c0b3cf134e8bfd176fea880249/bindings/servicemix-cxf-bc/src/main/java/org/apache/servicemix/cxfbc/CxfBcConsumer.java", "blob_url": "https://github.com/apache/servicemix-components/blob/8362c33fe132b2c0b3cf134e8bfd176fea880249/bindings/servicemix-cxf-bc/src/main/java/org/apache/servicemix/cxfbc/CxfBcConsumer.java", "sha": "64b4c9a7d236b338d0ea0aeb12e40887804cbc48", "changes": 10, "status": "modified", "deletions": 4, "contents_url": "https://api.github.com/repos/apache/servicemix-components/contents/bindings/servicemix-cxf-bc/src/main/java/org/apache/servicemix/cxfbc/CxfBcConsumer.java?ref=8362c33fe132b2c0b3cf134e8bfd176fea880249", "patch": "@@ -420,11 +420,13 @@ public void deactivate() throws Exception {\n                 }\n                 providedBus = null;\n             } else {\n-                if (allBuses.keySet().contains(bus.getId())) {\n-                    allBuses.remove(bus.getId());\n+                if (bus != null) {\n+                    if (allBuses.keySet().contains(bus.getId())) {\n+                        allBuses.remove(bus.getId());\n+                    }\n+                    bus.shutdown(true);\n+                    bus = null;\n                 }\n-                bus.shutdown(true);\n-                bus = null;\n             }\n         }\n         super.deactivate();", "filename": "bindings/servicemix-cxf-bc/src/main/java/org/apache/servicemix/cxfbc/CxfBcConsumer.java"}], "repo": "servicemix-components"}, {"commit": "https://github.com/apache/servicemix-components/commit/6a3417bffe6f880d5bf25cf023f4ebfc1a0c89ea", "parent": "https://github.com/apache/servicemix-components/commit/3f71f35452b11f315b7f81387097a00c986c7265", "message": "[SMXCOMP-910]NPE Generated whenever a soap message is received that contains a namespace prefix but no namespace uri.\n\ngit-svn-id: https://svn.apache.org/repos/asf/servicemix/components/trunk@1185491 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "servicemix-components_2", "file": [{"additions": 6, "raw_url": "https://github.com/apache/servicemix-components/raw/6a3417bffe6f880d5bf25cf023f4ebfc1a0c89ea/bindings/servicemix-cxf-bc/src/main/java/org/apache/servicemix/cxfbc/interceptors/StaxJbiWrapper.java", "blob_url": "https://github.com/apache/servicemix-components/blob/6a3417bffe6f880d5bf25cf023f4ebfc1a0c89ea/bindings/servicemix-cxf-bc/src/main/java/org/apache/servicemix/cxfbc/interceptors/StaxJbiWrapper.java", "sha": "f8983f639cba6f7bc0258ccb3f90629a6535cd64", "changes": 11, "status": "modified", "deletions": 5, "contents_url": "https://api.github.com/repos/apache/servicemix-components/contents/bindings/servicemix-cxf-bc/src/main/java/org/apache/servicemix/cxfbc/interceptors/StaxJbiWrapper.java?ref=6a3417bffe6f880d5bf25cf023f4ebfc1a0c89ea", "patch": "@@ -515,12 +515,13 @@ public int getNamespaceCount() {\n \n     public String getNamespacePrefix(int i) {\n         String prefix = parts.get(part).get(reader).getNamespacePrefix(i);\n-        if (prefix != null && prefix.length() == 0 \n-                && parts.get(part).get(reader).getNamespaceURI().length() > 0) {\n-            return CxfJbiConstants.WSDL11_WRAPPER_PART_LOCALNAME;\n-        } else {\n-            return prefix;\n+        if (prefix != null && prefix.length() == 0) {\n+            String uri = parts.get(part).get(reader).getNamespaceURI();\n+            if (uri != null && uri.length() > 0) {\n+                return CxfJbiConstants.WSDL11_WRAPPER_PART_LOCALNAME;\n+            }\n         }\n+        return prefix;\n     }\n \n     public String getNamespaceURI(int i) {", "filename": "bindings/servicemix-cxf-bc/src/main/java/org/apache/servicemix/cxfbc/interceptors/StaxJbiWrapper.java"}, {"additions": 1, "raw_url": "https://github.com/apache/servicemix-components/raw/6a3417bffe6f880d5bf25cf023f4ebfc1a0c89ea/bindings/servicemix-cxf-bc/src/test/resources/HelloWorld-DOC-Input-extra-namespace.xml", "blob_url": "https://github.com/apache/servicemix-components/blob/6a3417bffe6f880d5bf25cf023f4ebfc1a0c89ea/bindings/servicemix-cxf-bc/src/test/resources/HelloWorld-DOC-Input-extra-namespace.xml", "sha": "e444136504ac63111076b825c001939a668a6e1e", "changes": 2, "status": "modified", "deletions": 1, "contents_url": "https://api.github.com/repos/apache/servicemix-components/contents/bindings/servicemix-cxf-bc/src/test/resources/HelloWorld-DOC-Input-extra-namespace.xml?ref=6a3417bffe6f880d5bf25cf023f4ebfc1a0c89ea", "patch": "@@ -18,4 +18,4 @@\n \n -->\n <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n-xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:ns2=\"uri:HelloWorld\"><soap:Body><ns2:SayHiRequest><text>hello</text></ns2:SayHiRequest></soap:Body></soap:Envelope>\n+xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:ns2=\"uri:HelloWorld\"><soap:Body><ns2:SayHiRequest><text xmlns=\"\" xmlns:q1=\"*\">q1:hello</text></ns2:SayHiRequest></soap:Body></soap:Envelope>", "filename": "bindings/servicemix-cxf-bc/src/test/resources/HelloWorld-DOC-Input-extra-namespace.xml"}], "repo": "servicemix-components"}]
