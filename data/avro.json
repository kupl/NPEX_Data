{
    "avro_2564afe": {
        "bug_id": "avro_2564afe",
        "commit": "https://github.com/apache/avro/commit/2564afeb1fdc4792603f7ddc1a7b3b347d05b54e",
        "file": [
            {
                "additions": 14,
                "blob_url": "https://github.com/apache/avro/blob/2564afeb1fdc4792603f7ddc1a7b3b347d05b54e/lang/java/tools/src/main/java/org/apache/avro/tool/Main.java",
                "changes": 15,
                "contents_url": "https://api.github.com/repos/apache/avro/contents/lang/java/tools/src/main/java/org/apache/avro/tool/Main.java?ref=2564afeb1fdc4792603f7ddc1a7b3b347d05b54e",
                "deletions": 1,
                "filename": "lang/java/tools/src/main/java/org/apache/avro/tool/Main.java",
                "patch": "@@ -17,6 +17,8 @@\n  */\n package org.apache.avro.tool;\n \n+import java.io.BufferedReader;\n+import java.io.InputStreamReader;\n import java.util.Arrays;\n import java.util.Map;\n import java.util.TreeMap;\n@@ -89,7 +91,7 @@ private int run(String[] args) throws Exception {\n     System.err.print(\"Version \");\n     printStream(Main.class.getClassLoader().getResourceAsStream(\"VERSION.txt\"));\n     System.err.print(\" of \");\n-    printStream(Main.class.getClassLoader().getResourceAsStream(\"NOTICE.txt\"));\n+    printHead(Main.class.getClassLoader().getResourceAsStream(\"META-INF/NOTICE\"), 5);\n     System.err.println(\"----------------\");\n \n     System.err.println(\"Available tools:\");\n@@ -106,4 +108,15 @@ private static void printStream(InputStream in) throws Exception {\n       System.err.write(buffer, 0, i);\n   }\n \n+  private static void printHead(InputStream in, int lines) throws Exception {\n+    BufferedReader r = new BufferedReader(new InputStreamReader(in));\n+    for (int i = 0; i < lines; i++) {\n+      String line = r.readLine();\n+      if (line == null) {\n+        break;\n+      }\n+      System.err.println(line);\n+    }\n+  }\n+\n }",
                "raw_url": "https://github.com/apache/avro/raw/2564afeb1fdc4792603f7ddc1a7b3b347d05b54e/lang/java/tools/src/main/java/org/apache/avro/tool/Main.java",
                "sha": "93c827ccd7d7934095ee0c5da25c0e8b3313e698",
                "status": "modified"
            }
        ],
        "message": "AVRO-1780: Java: Fix NPE in tools. Contributed by Tom White.\n\nChanges for AVRO-1728 moved NOTICE, which was used to create the\nno-argument output for Java's avro-tools. Using the new location fixed\nthe NPE and this also includes an update to show just the top of NOTICE\nsince it is now much longer.\n\ngit-svn-id: https://svn.apache.org/repos/asf/avro/trunk@1724287 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/avro/commit/080cd772f235a8f490928ce512aa62089af0f203",
        "repo": "avro",
        "unit_tests": [
            "TestMain.java"
        ]
    }
}