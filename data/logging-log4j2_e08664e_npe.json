[
    {
        "repo": "logging-log4j2",
        "commit": "https://github.com/apache/logging-log4j2/commit/e08664e77c5332fd1249ab8a5b4b297689138668",
        "bug_id": "logging-log4j2_e08664e",
        "message": "Specify default Facility level in FlumeAppender.\n\n  - Due to my recent changes involving how plugins are constructed, \n  this value had to be manually specified. Without the value, it \n  would cause an NPE later on.\n\ngit-svn-id: https://svn.apache.org/repos/asf/logging/log4j/log4j2/trunk@1597481 13f79535-47bb-0310-9956-ffa450edef68",
        "parent": "https://github.com/apache/logging-log4j2/commit/4d6bf6e3be504f2b8341b991f9484e29594ac2ac",
        "patched_files": [
            "FlumeAppender.java"
        ],
        "file": [
            {
                "status": "modified",
                "additions": 2,
                "raw_url": "https://github.com/apache/logging-log4j2/raw/e08664e77c5332fd1249ab8a5b4b297689138668/log4j-flume-ng/src/main/java/org/apache/logging/log4j/flume/appender/FlumeAppender.java",
                "contents_url": "https://api.github.com/repos/apache/logging-log4j2/contents/log4j-flume-ng/src/main/java/org/apache/logging/log4j/flume/appender/FlumeAppender.java?ref=e08664e77c5332fd1249ab8a5b4b297689138668",
                "filename": "log4j-flume-ng/src/main/java/org/apache/logging/log4j/flume/appender/FlumeAppender.java",
                "deletions": 1,
                "sha": "d7fd784b7c2704a38f734eed987d159547ed38ed",
                "blob_url": "https://github.com/apache/logging-log4j2/blob/e08664e77c5332fd1249ab8a5b4b297689138668/log4j-flume-ng/src/main/java/org/apache/logging/log4j/flume/appender/FlumeAppender.java",
                "patch": "@@ -29,6 +29,7 @@\n import org.apache.logging.log4j.core.config.plugins.PluginElement;\n import org.apache.logging.log4j.core.config.plugins.PluginFactory;\n import org.apache.logging.log4j.core.layout.Rfc5424Layout;\n+import org.apache.logging.log4j.core.net.Facility;\n import org.apache.logging.log4j.core.util.Booleans;\n import org.apache.logging.log4j.core.util.Integers;\n \n@@ -220,7 +221,7 @@ public static FlumeAppender createAppender(@PluginElement(\"Agents\") Agent[] agen\n \n         if (layout == null) {\n             final int enterpriseNumber = Integer.parseInt(Rfc5424Layout.DEFAULT_ENTERPRISE_NUMBER);\n-            layout = Rfc5424Layout.createLayout(null, null, enterpriseNumber, true, Rfc5424Layout.DEFAULT_MDCID,\n+            layout = Rfc5424Layout.createLayout(Facility.LOCAL0, null, enterpriseNumber, true, Rfc5424Layout.DEFAULT_MDCID,\n                     mdcPrefix, eventPrefix, false, null, null, null, excludes, includes, required, null, false, null,\n                     null);\n         }",
                "changes": 3
            }
        ],
        "unit_tests": [
            "FlumeAppenderTest.java"
        ]
    },
    {
        "buggy": false,
        "test_file": "log4j-flume-ng/src/test/java/org/apache/logging/log4j/flume/appender/FlumeAppenderTest.java",
        "buggy_files": [
            "log4j-flume-ng/src/main/java/org/apache/logging/log4j/flume/appender/FlumeAppender.java"
        ],
        "fixed": true
    }
]