[{"commit": "https://github.com/apache/maven-deploy-plugin/commit/9e1a3ec7107cf610d5758428a3a6d1c8787c3799", "parent": "https://github.com/apache/maven-deploy-plugin/commit/50e58cb727d5bf5e7a91b1d6e6722a941d52d510", "message": "[MDEPLOY-84] NPE when deploy-file with generatePom=false \n\ngit-svn-id: https://svn.apache.org/repos/asf/maven/plugins/trunk@754784 13f79535-47bb-0310-9956-ffa450edef68", "bug_id": "maven-deploy-plugin_1", "file": [{"additions": 11, "raw_url": "https://github.com/apache/maven-deploy-plugin/raw/9e1a3ec7107cf610d5758428a3a6d1c8787c3799/src/main/java/org/apache/maven/plugin/deploy/DeployFileMojo.java", "blob_url": "https://github.com/apache/maven-deploy-plugin/blob/9e1a3ec7107cf610d5758428a3a6d1c8787c3799/src/main/java/org/apache/maven/plugin/deploy/DeployFileMojo.java", "sha": "190017147c3ba3501419516bcb3c9a223b2f9bfc", "changes": 19, "status": "modified", "deletions": 8, "contents_url": "https://api.github.com/repos/apache/maven-deploy-plugin/contents/src/main/java/org/apache/maven/plugin/deploy/DeployFileMojo.java?ref=9e1a3ec7107cf610d5758428a3a6d1c8787c3799", "patch": "@@ -235,15 +235,18 @@ public void execute()\n         }\n \n         // Upload the POM if requested, generating one if need be\n-        if ( generatePom )\n+        if ( !\"pom\".equals( packaging ) )\n         {\n-            ArtifactMetadata metadata = new ProjectArtifactMetadata( artifact, generatePomFile() );\n-            artifact.addMetadata( metadata );\n-        }\n-        else\n-        {\n-            ArtifactMetadata metadata = new ProjectArtifactMetadata( artifact, pomFile );\n-            artifact.addMetadata( metadata );\n+            if ( pomFile != null )\n+            {\n+                ArtifactMetadata metadata = new ProjectArtifactMetadata( artifact, pomFile );\n+                artifact.addMetadata( metadata );\n+            }\n+            else if ( generatePom )\n+            {\n+                ArtifactMetadata metadata = new ProjectArtifactMetadata( artifact, generatePomFile() );\n+                artifact.addMetadata( metadata );\n+            }\n         }\n \n         try", "filename": "src/main/java/org/apache/maven/plugin/deploy/DeployFileMojo.java"}], "repo": "maven-deploy-plugin"}]
