<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started</title>
<link rel="stylesheet" href="css/blazebit.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="prettify/prettify.min.css">
<script src="prettify/prettify.min.js"></script>
<script src="prettify/lang-ext.js"></script>
<script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
<link rel="shortcut icon" href="images/favicon.png">
</head>
<body class="book toc2 toc-left">

<div class="brand">
    <a class="vendor" href="https://blazebit.com">
        <strong>Blazebit.com</strong>
    </a>
    <a class="logo" href="https://persistence.blazebit.com">
        <strong>blaze-persistence</strong>
    </a>
</div>
<br/>

<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#getting-started">Getting started</a>
<ul class="sectlevel2">
<li><a href="#getting-started-setup">Setup</a></li>
<li><a href="#anchor-environment">Environments</a></li>
<li><a href="#supported-java-runtimes">Supported Java runtimes</a></li>
<li><a href="#supported-environments-libraries">Supported environments/libraries</a></li>
<li><a href="#first-entity-view-query">First entity view query</a></li>
<li><a href="#getting-started-summary">Summary</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="getting-started"><a class="anchor" href="#getting-started"></a>Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a step-by-step introduction about how to get started with the entity view module of {projectname}.</p>
</div>
<div class="paragraph">
<p>The entity view module requires the {projectname} core so if you have not read the getting started
guide for the <a href="{core_doc}">core</a> yet, you might want to start your reading there.</p>
</div>
<div class="sect2">
<h3 id="getting-started-setup"><a class="anchor" href="#getting-started-setup"></a>Setup</h3>
<div class="paragraph">
<p>As already described in the <a href="{core_doc}#getting-started-setup">core module setup</a>, every module depends on the core module.
So if you haven&#8217;t setup the core module dependencies yet, get back here when you did.</p>
</div>
<div class="paragraph">
<p>To make use of the entity view module, you require all artifacts from the <em>entity-view</em> directory of the distribution.
CDI and Spring users can find integrations in <em>integration/entity-view</em> that give a good foundation for configuring for these environments.</p>
</div>
<div class="paragraph">
<p>Spring Data users can find a special integration in <em>integration/entity-view</em> which is described in more detail in a later <a href="#spring-data-integration">chapter</a>.
This integration depends on all artifacts of the <em>jpa-criteria</em> module.</p>
</div>
<div class="sect3">
<h4 id="maven-setup"><a class="anchor" href="#maven-setup"></a>Maven setup</h4>
<div class="paragraph">
<p>We recommend you introduce a version property for {projectname} which can be used for all artifacts.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;properties&gt;
    &lt;blaze-persistence.version&gt;{version}&lt;/blaze-persistence.version&gt;
&lt;/properties&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The required dependencies for the entity view module are</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-entity-view-api&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-entity-view-impl&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the environment, there are some integrations that help you with configuration</p>
</div>
<div class="sect4">
<h5 id="maven-setup-cdi-integration"><a class="anchor" href="#maven-setup-cdi-integration"></a>CDI integration</h5>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-integration-entity-view-cdi&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="maven-setup-spring-integration"><a class="anchor" href="#maven-setup-spring-integration"></a>Spring integration</h5>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-integration-entity-view-spring&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="maven-setup-spring-data-integration"><a class="anchor" href="#maven-setup-spring-data-integration"></a>Spring Data integration</h5>
<div class="paragraph">
<p>When you work with Spring Data you can additionally have first class integration by using the following dependencies.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-integration-spring-data-2.x&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If you still work with Spring Data 1.x you will have to use a different integration as Spring Data 2.x changed quite a bit.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-integration-spring-data-1.x&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Spring Data integration depends on the <em>jpa-criteria</em> module
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-jpa-criteria-api&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-jpa-criteria-impl&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If a JPA provider that does not implement the JPA 2.1 specification like Hibernate 4.2 or OpenJPA is used, the following compatibility dependency is also required.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-jpa-criteria-jpa-2-compatibility&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="anchor-environment"><a class="anchor" href="#anchor-environment"></a>Environments</h3>
<div class="paragraph">
<p>The entity view module of {projectname} is usable in Java EE, Spring as well as in Java SE environments.</p>
</div>
<div class="sect3">
<h4 id="environments-java-se"><a class="anchor" href="#environments-java-se"></a>Java SE</h4>
<div class="paragraph">
<p>In a Java SE environment the <code>EntityViewConfiguration</code> as well as the <code>EntityViewManager</code> must
be created manually as follows:</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">EntityViewConfiguration cfg = EntityViews.createDefaultConfiguration();
cfg.addEntityView(EntityView1.class);
// Add some more
cfg.addEntityView(EntityViewn.class);
EntityViewManager evm = cfg.createEntityViewManager(criteriaBuilderFactory);</pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, the <code>EntityViewConfiguration</code> is used to register all the entity
view classes that you want to make accessible within the an <code>EntityViewManager</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You may create multiple <code>EntityViewManager</code> instances with potentially different
configurations.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="environments-java-ee"><a class="anchor" href="#environments-java-ee"></a>Java EE</h4>
<div class="paragraph">
<p>For usage with CDI the integration module <em>blaze-persistence-integration-entity-view-cdi</em> provides a CDI
extension which takes over the task of creating and providing an <code>EntityViewConfiguration</code>
from which an <code>EntityViewManager</code> can be created like following example shows.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@Singleton // from javax.ejb
@Startup   // from javax.ejb
public class EntityViewManagerProducer {

    // inject the configuration provided by the cdi integration
    @Inject
    private EntityViewConfiguration config;

    // inject the criteria builder factory which will be used along with the entity view manager
    @Inject
    private CriteriaBuilderFactory criteriaBuilderFactory;

    private EntityViewManager evm;

    @PostConstruct
    public void init() {
        // do some configuration
        evm = config.createEntityViewManager(criteriaBuilderFactory);
    }

    @Produces
    @ApplicationScoped
    public EntityViewManager createEntityViewManager() {
        return evm;
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>The CDI extension collects all the entity views classes and provides a producer for the pre-configured <code>EntityViewConfiguration</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="environments-cdi"><a class="anchor" href="#environments-cdi"></a>CDI</h4>
<div class="paragraph">
<p>If EJBs aren&#8217;t available, the <code>EntityViewManager</code> can also be configured in a CDI 1.1 specific way similar to the Java EE way.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@ApplicationScoped
public class EntityViewManagerProducer {

    // inject the configuration provided by the cdi integration
    @Inject
    private EntityViewConfiguration config;

    // inject the criteria builder factory which will be used along with the entity view manager
    @Inject
    private CriteriaBuilderFactory criteriaBuilderFactory;

    private volatile EntityViewManager evm;

    public void init(@Observes @Initialized(ApplicationScoped.class) Object init) {
        // do some configuration
        evm = config.createEntityViewManager(criteriaBuilderFactory);
    }

    @Produces
    @ApplicationScoped
    public EntityViewManager createEntityViewManager() {
        return evm;
    }
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="anchor-environment-spring"><a class="anchor" href="#anchor-environment-spring"></a>Spring</h4>
<div class="paragraph">
<p>You have to enable the Spring entity-views integration via annotation based config or XML based config and you can also mix those two types of configuration:</p>
</div>
<div class="paragraph">
<p>Annotation Config</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@Configuration
@EnableEntityViews("my.entityviews.base.package")
public class AppConfig {
}</pre>
</div>
</div>
<div class="paragraph">
<p>XML Config</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:ev="http://persistence.blazebit.com/view/spring"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd
        http://persistence.blazebit.com/view/spring http://persistence.blazebit.com/view/spring/spring-entity-views-1.2.xsd"&gt;

    &lt;ev:entity-views base-package="my.entityviews.base.package"/&gt;

&lt;/beans&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The Spring integration collects all the entity views classes in the specified base-package and provides the pre-configured <code>EntityViewConfiguration</code> for injection.
This configuration is then used to create a <code>EntityViewManager</code> which should be provided as bean.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@Configuration
public class BlazePersistenceConfiguration {

    @Bean
    @Scope(ConfigurableBeanFactory.SCOPE_SINGLETON)
    @Lazy(false)
    // inject the criteria builder factory which will be used along with the entity view manager
    public EntityViewManager createEntityViewManager(CriteriaBuilderFactory cbf, EntityViewConfiguration entityViewConfiguration) {
        return entityViewConfiguration.createEntityViewManager(cbf);
    }
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="supported-java-runtimes"><a class="anchor" href="#supported-java-runtimes"></a>Supported Java runtimes</h3>
<div class="paragraph">
<p>The entity view module like all other modules generally follows what has already been stated in the <a href="{core_doc}#supported-java-runtimes">core moduel documentation</a>.</p>
</div>
<div class="paragraph">
<p>Automatic module names for modules.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Module</th>
<th class="tableblock halign-left valign-top">Automatic module name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entity View API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.blazebit.persistence.view</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entity View Impl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.blazebit.persistence.view.impl</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="supported-environments-libraries"><a class="anchor" href="#supported-environments-libraries"></a>Supported environments/libraries</h3>
<div class="paragraph">
<p>Generally, we support the usage in Java EE 6+ or Spring 4+ applications.</p>
</div>
<div class="paragraph">
<p>The following table outlines the supported library versions for the integrations.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Module</th>
<th class="tableblock halign-left valign-top">Automatic module name</th>
<th class="tableblock halign-left valign-top">Minimum version</th>
<th class="tableblock halign-left valign-top">Supported versions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CDI integration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.blazebit.persistence.integration.view.cdi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CDI 1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0, 1.1, 1.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring integration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.blazebit.persistence.integration.view.spring</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring 4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.3, 5.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DeltaSpike Data integration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.blazebit.persistence.integration.deltaspike.data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DeltaSpike 1.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7, 1.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Data integration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.blazebit.persistence.integration.spring.data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Data 1.11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.11, 2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Data Rest integration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.blazebit.persistence.integration.spring.data.rest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Data 1.11, Spring MVC 4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Data 1.11 + Spring MVC 4.3, Spring Data 2.0 + Spring MVC 5.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="first-entity-view-query"><a class="anchor" href="#first-entity-view-query"></a>First entity view query</h3>
<div class="paragraph">
<p>This section is supposed to give you a first feeling of how to use entity views.
For more detailed information, please see the subsequent chapters.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the following we suppose <code>cbf</code>, <code>em</code> and <code>evm</code> to refer to an instance of <code>CriteriaBuilderFactory</code>,
JPA&#8217;s <code>EntityManager</code> and <code>EntityViewManager</code>, respectively.
Take a look at the <a href="#anchor-environment">environments</a> chapter for how to obtain an <code>EntityViewManager</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An entity view can be thought of as the ORM world&#8217;s dual to a database table view.
It enables the user to query just a subset of an entity&#8217;s fields. This enables
developers to only query what they actually need for their current use case, thereby
reducing network traffic and improving performance.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start with a very simple example. Assume that in our application we want to
display a list of the names of all the cats in our database. Using entity views
we would first define a new view for this purpose:</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@EntityView(Cat.class)
public interface CatNameView {

    @IdMapping
    public Long getId();

    public String getName();

}</pre>
</div>
</div>
<div class="paragraph">
<p>The usage of the <code>CatNameView</code> could look like this:</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class);
CriteriaBuilder&lt;CatNameView&gt; catNameBuilder = evm.applySetting(EntityViewSetting.create(CatNameView.class), cb);
List&lt;CatNameView&gt; catNameViews = catNameBuilder.getResultList();</pre>
</div>
</div>
<div class="paragraph">
<p>Of course, you can apply further restrictions to your query by <code>CriteriaBuilder</code> means.
E.g. you could avoid duplicate names in the above example by calling <code>groupBy()</code> on the
CriteriaBuilder at any point after its creation.</p>
</div>
<div class="paragraph">
<p>By default the abstract getter methods in the view definition map to same named entity fields.
So the <code>getName()</code> getter in the above example actually triggers querying
of the <code>name</code> field. If we want to use a different name for the getter method we would
have to add an additional <code>@Mapping</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@EntityView(Cat.class)
public interface CatNameView {

    @IdMapping
    public Long getId();

    @Mapping("name")
    public String getCatName();

}</pre>
</div>
</div>
<div class="paragraph">
<p>Of course, it is also possible to combine various views via inheritance.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@EntityView(Cat.class)
public interface CatKittens {

    @IdMapping
    public Long getId();

    public List&lt;Kitten&gt; getKittens();

}

@EntityView(Cat.class)
public interface CatNameView {

    @IdMapping
    public Long getId();

    @Mapping("name")
    public String getCatName();

}

@EntityView(Cat.class)
public interface CombinedView extends CatKittens, CatNameView {

    @Mapping("SIZE(kittens)")
    public Integer getKittenSize();

}</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An entity view does not have to be an interface, it can be any class.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Moreover you can see that it is possible to use whole expressions inside the <code>@Mapping</code> annotations.
The allowed expression will be covered in more detail in subsequent chapters.</p>
</div>
<div class="paragraph">
<p>Another useful feature are subviews which is illustrated in following example.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@EntityView(Landlord.class)
public interface LandlordView {

    @IdMapping
    public Long getId();

    public String getName();

    public Integer getAge();

    @Mapping("ownedProperties")
    public PropertyAddressView getHouses();

}

@EntityView(Property.class)
public interface PropertyAddressView {

    @IdMapping
    public Long getId();

    public String getAddress();

}</pre>
</div>
</div>
<div class="paragraph">
<p>The last feature we are going to cover here are filters and sorters in conjunction with <code>EntityViewSetting</code> which
allows the dynamic configuration of filters and sorters on your entity view and are
also usable together with pagination. This makes them ideal an ideal fit whenever you need to query data for display
in a filterable and/or sortable data table. Following example illustrates how this looks like:</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@EntityView(Cat.class)
@ViewFilters({
    @ViewFilter(name = "customFilter", value = FilteredDocument.CustomFilter.class)
})
public interface FilteredCatView {

    @AttributeFilter(ContainsFilter.class)
    public String getName();

    public static class CustomFilter extends ViewFilterProvider {
        @Override
        public &lt;T extends WhereBuilder&lt;T&gt;&gt; T apply(T whereBuilder) {
            return whereBuilder.where("doctor.name").like().expression("Julia%").noEscape();
        }
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In this example we once again define a view on our Cat entity and select the cat&#8217;s name only.
But in addition we applied a filter on the name attribute. In this case we chose the <code>ContainsFilter</code>, one
of the predefined filters. We also defined a custom filter where we check whether the cat&#8217;s doctor&#8217;s name
starts with the string 'Julia'.
The next code snippet shows how we dynamically set the actual filter value by which the
query should filter and how we paginate the resulting query.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">// Base setting
EntityViewSetting&lt;FilteredCatView, PaginatedCriteriaBuilder&lt;FilteredCatView&gt;&gt; setting =
        EntityViewSetting.create(FilteredCatView.class, 0, 10);

// Query
CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class);
setting.addAttributeFilter("name", "Kitty");

PaginatedCriteriaBuilder&lt;FilteredCatView&gt; paginatedCb = evm.applySetting(setting, cb);
PagedList&lt;FilteredCatView&gt; result = paginatedCb.getResultList();</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="getting-started-summary"><a class="anchor" href="#getting-started-summary"></a>Summary</h3>
<div class="paragraph">
<p>If you want to go into more detail, you are now ready to discover the other chapters of the documentation or
the API yourself.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-08-05 16:46:14 KST
</div>
</div>
</body>
</html>