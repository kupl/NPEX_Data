<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DeltaSpike Data integration</title>
<link rel="stylesheet" href="css/blazebit.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="prettify/prettify.min.css">
<script src="prettify/prettify.min.js"></script>
<script src="prettify/lang-ext.js"></script>
<script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
<link rel="shortcut icon" href="images/favicon.png">
</head>
<body class="book toc2 toc-left">

<div class="brand">
    <a class="vendor" href="https://blazebit.com">
        <strong>Blazebit.com</strong>
    </a>
    <a class="logo" href="https://persistence.blazebit.com">
        <strong>blaze-persistence</strong>
    </a>
</div>
<br/>

<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#deltaspike-data-integration">DeltaSpike Data integration</a>
<ul class="sectlevel2">
<li><a href="#deltaspike-data-setup">Setup</a></li>
<li><a href="#deltaspike-data-features">Features</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="deltaspike-data-integration"><a class="anchor" href="#deltaspike-data-integration"></a>DeltaSpike Data integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>{projectname} provides an integration with <a href="https://deltaspike.apache.org/documentation/data.html">DeltaSpike Data</a> to create entity view based repositories.</p>
</div>
<div class="sect2">
<h3 id="deltaspike-data-setup"><a class="anchor" href="#deltaspike-data-setup"></a>Setup</h3>
<div class="paragraph">
<p>To setup the project for DeltaSpike Data you have to add the entity view and CDI integration dependencies as described
in the <a href="#getting-started-setup">getting started</a> section along with the integration dependencies for your JPA provider
as described in the <a href="{core_doc}#maven-setup">core module setup section</a>.</p>
</div>
<div class="paragraph">
<p>In addition, the following Maven dependencies are required:</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-integration-deltaspike-data-api&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-integration-deltaspike-data-impl-1.8&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If you still work with DeltaSpike Data 1.7 you will have to use a different integration as DeltaSpike Data 1.8 changed quite a bit.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint xml lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;
    &lt;artifactId&gt;blaze-persistence-integration-deltaspike-data-impl-1.7&lt;/artifactId&gt;
    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;
    &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>You also need to make beans available for <code>CriteriaBuilderFactory</code> and <code>EntityViewManager</code> as laid out in the
<a href="#anchor-environments-cdi">CDI environment</a> section.</p>
</div>
</div>
<div class="sect2">
<h3 id="deltaspike-data-features"><a class="anchor" href="#deltaspike-data-features"></a>Features</h3>
<div class="paragraph">
<p>To mark a class or an interface as repository, use the DeltaSpike <code>org.apache.deltaspike.data.api.Repository</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@Repository(forEntity = Person.class)
public interface PersonViewRepository {
    PersonView findAnyByName(String name);
}</pre>
</div>
</div>
<div class="paragraph">
<p>The integration provides the following base interfaces that you may optionally extend to define entity view repositories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.blazebit.persistence.deltaspike.data.api.EntityViewRepository</code> provides simple base methods.</p>
</li>
<li>
<p><code>com.blazebit.persistence.deltaspike.data.api.FullEntityViewRepository</code> adds JPA criteria support to the <code>com.blazebit.persistence.deltaspike.data.api.EntityViewRepository</code> interface.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">@Repository
public abstract class PersonViewRepository extends FullEntityViewRepository&lt;Person, PersonView, String&gt; {
    public abstract PersonView findAnyByName(String name);

    public List&lt;PersonView&gt; getPersonsByComplexCondition() {
        return criteria().or(
                criteria().gt(Person_.position, 3),
                criteria().likeIgnoreCase(Person_.name, "john%")
        ).select(PersonView.class).orderAsc(Person_.id).getResultList();
    }
}</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-08-05 16:46:14 KST
</div>
</div>
</body>
</html>