<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Predicate Builder</title>
<link rel="stylesheet" href="css/blazebit.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="prettify/prettify.min.css">
<script src="prettify/prettify.min.js"></script>
<script src="prettify/lang-ext.js"></script>
<script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
<link rel="shortcut icon" href="images/favicon.png">
</head>
<body class="book toc2 toc-left">

<div class="brand">
    <a class="vendor" href="https://blazebit.com">
        <strong>Blazebit.com</strong>
    </a>
    <a class="logo" href="https://persistence.blazebit.com">
        <strong>blaze-persistence</strong>
    </a>
</div>
<br/>

<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#predicate-builder">Predicate Builder</a>
<ul class="sectlevel2">
<li><a href="#restriction-builder">Restriction Builder</a></li>
<li><a href="#anchor_predicate_builder_case_when">Case When Expression Builder</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="predicate-builder"><a class="anchor" href="#predicate-builder"></a>Predicate Builder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Predicate Builder API tries to simplify construction but also the reuse of predicates. There are multiple clauses and expressions that support entering the API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Where clause">[Where clause]</a></p>
</li>
<li>
<p><a href="#Having clause">[Having clause]</a></p>
</li>
<li>
<p><a href="#On clause">[On clause]</a></p>
</li>
<li>
<p><a href="#case-when-expression-builder">Case When expression</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Every predicate builder follows the same scheme:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An entry method can be used to start the builder with the left hand side of a predicate</p>
</li>
<li>
<p>Entry methods are additive, and finishing a predicate results in adding that to the compound predicate</p>
</li>
<li>
<p>Once a predicate has been started, it must be properly finished</p>
</li>
<li>
<p>On the top level, a method to directly set a JPQL predicate expression is provided</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Subqueries are not supported to be directly embedded into expressions but instead have to be built with the builder API.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are multiple different entry methods to cover all possible usage scenarios. The entry methods are mostly named after the clause in which they are defined
e.g. in the <code>WHERE</code> clause the entry methods are named <code>where()</code>, <code>whereExists()</code> etc.
The following list of possible entry methods refers to <code>WHERE</code> clause entry methods for easier readability.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/WhereBuilder.html#where(java.lang.String)"><code>where(String expression)</code></a></dt>
<dd>
<p>Starts a builder for a predicate with the given expression on the left hand side.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .where("name").eq("Felix");</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.name = :param_1</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/BaseWhereBuilder.html#whereExists()"><code>whereExists()</code></a> &amp; <a href="{core_jdoc}/persistence/BaseWhereBuilder.html#whereNotExists()"><code>whereNotExists()</code></a></dt>
<dd>
<p>Starts a subquery builder for an exists predicate.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .whereExists()
        .from(Cat.class, "subCat")
        .select("1")
        .where("subCat").notEqExpression("cat")
        .where("subCat.name").eqExpression("cat.name")
    .end();</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE EXISTS (SELECT 1 FROM Cat subCat WHERE subCat &lt;&gt; cat AND subCat.name = cat.name)</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/BaseWhereBuilder.html#whereCase()"><code>whereCase()</code></a></dt>
<dd>
<p>Starts a general case when builder for a predicate with the resulting case when expression on the left hand side.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .whereCase()
        .when("cat.name").isNull()
            .then(1)
        .when("LENGTH(cat.name)").gt(10)
            .then(2)
        .otherwise(3)
    .eqExpression(":someValue");</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE CASE
      WHEN cat.name IS NULL THEN :param_1
      WHEN LENGTH(cat.name) &gt; 10 THEN :param_2
      ELSE :param_3
      END = :someValue</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/BaseWhereBuilder.html#whereSimpleCase(java.lang.String)"><code>whereSimpleCase(String expression)</code></a></dt>
<dd>
<p>Starts a general case when builder for a predicate with the resulting case when expression on the left hand side.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .whereSimpleCase("SUBSTRING(cat.name, 1, 2)")
        .when("'Dr.'", "'Doctor'")
        .when("'Mr'", "'Mister'")
        .otherwise("'Unknown'")
    .notEqExpression("cat.fullTitle");</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE CASE SUBSTRING(cat.name, 1, 2)
      WHEN 'Dr.' THEN 'Doctor'
      WHEN 'Mr.' THEN 'Mister'
      ELSE 'Unknown'
      END &lt;&gt; cat.fullTitle</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/BaseWhereBuilder.html#whereSubquery()"><code>whereSubquery()</code></a></dt>
<dd>
<p>Starts a subquery builder for a predicate with the resulting subquery expression on the left hand side.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .whereSubquery()
        .from(Cat.class, "subCat")
        .select("subCat.name")
        .where("subCat.id").eq(123)
    .end()
    .eqExpression("cat.name");</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE (SELECT subCat.name FROM Cat subCat WHERE subCat.id = :param_1) = cat.name</pre>
</div>
</div>
<div id="anchor_predicate_builder_subqueries" class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/BaseWhereBuilder.html#whereSubquery(java.lang.String,%20java.lang.String)"><code>whereSubquery(String subqueryAlias, String expression)</code></a></dt>
<dd>
<p>Like <code>whereSubquery()</code> but instead the <code>expression</code> is used on the left hand side. Occurrences of subqueryAlias in the expression will be replaced by the subquery expression.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .whereSubquery("subQuery1", "subQuery1 + 10")
        .from(Cat.class, "subCat")
        .select("subCat.age")
        .where("subCat.id").eq(123)
    .end()
    .gt(10);</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE (SELECT subCat.age FROM Cat subCat WHERE subCat.id = :param_1) + 10 &gt; 10</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/BaseWhereBuilder.html#whereSubqueries(java.lang.String)"><code>whereSubqueries(String expression)</code></a></dt>
<dd>
<p>Starts a subquery builder capable of handling multiple subqueries and uses the given <code>expression</code> on the left hand side of the predicate.
Subqueries are started with <code>with(String subqueryAlias)</code> and aliases occurring in the expression will be replaced by the respective subquery expressions.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .whereSubqueries("subQuery1 + subQuery2")
        .with("subQuery1")
            .from(Cat.class, "subCat")
            .select("subCat.age")
            .where("subCat.id").eq(123)
        .end()
        .with("subQuery2")
            .from(Cat.class, "subCat")
            .select("subCat.age")
            .where("subCat.id").eq(456)
        .end()
    .end()
    .gt(10);</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE (SELECT subCat.age FROM Cat subCat WHERE subCat.id = :param_1)
      + (SELECT subCat.age FROM Cat subCat WHERE subCat.id = :param_2) &gt; 10</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/WhereBuilder.html#whereOr()"><code>whereOr()</code></a> &amp; <a href="{core_jdoc}/persistence/WhereOrBuilder.html#whereAnd()"><code>whereAnd()</code></a></dt>
<dd>
<p>Starts a builder for a nested compound predicate. Elements of that predicate are connected with <code>OR</code> or <code>AND</code> respectively.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .whereOr()
        .where("cat.name").isNull()
        .whereAnd()
            .where("LENGTH(cat.name)").gt(10)
            .where("cat.name").like().value("F%").noEscape()
        .endAnd()
    .endOr();</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.name IS NULL OR LENGTH(cat.name) &gt; :param_1 AND cat.name LIKE :param_2</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/WhereBuilder.html#setWhereExpression(java.lang.String)"><code>setWhereExpression(String expression)</code></a></dt>
<dd>
<p>Sets the <code>WHERE</code> clause to the given JPQL predicate expression overwriting existing predicates.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .setWhereExpression("cat.name IS NULL OR LENGTH(cat.name) &gt; 10 AND cat.name LIKE 'F%'");</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.name IS NULL OR LENGTH(cat.name) &gt; 10 AND cat.name LIKE 'F%'</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/WhereBuilder.html#setWhereExpressionSubqueries(java.lang.String)"><code>setWhereExpressionSubqueries(String expression)</code></a></dt>
<dd>
<p>A combination of <code>setWhereExpression</code> and <code>whereSubqueries</code>. Sets the <code>WHERE</code> clause to the given JPQL predicate expression overwriting existing predicates. Subqueries replace aliases in the expression.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .setWhereExpressionSubqueries("cat.name IS NULL AND subQuery1 + subQuery2 &gt; 10")
        .with("subQuery1")
            .from(Cat.class, "subCat")
            .select("subCat.age")
            .where("subCat.id").eq(123)
        .end()
        .with("subQuery2")
            .from(Cat.class, "subCat")
            .select("subCat.age")
            .where("subCat.id").eq(456)
        .end()
    .end();</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.name IS NULL
  AND (SELECT subCat.age FROM Cat subCat WHERE subCat.id = :param_1)
      + (SELECT subCat.age FROM Cat subCat WHERE subCat.id = :param_2) &gt; 10</pre>
</div>
</div>
<div class="sect2">
<h3 id="restriction-builder"><a class="anchor" href="#restriction-builder"></a>Restriction Builder</h3>
<div class="paragraph">
<p>The restriction builder is used to build a predicate for an existing left hand side expression and chains to the right hand side expression.
It supports all standard predicates from JPQL and expressions can be of the following types:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Value/Parameter</dt>
<dd>
<p>The actual value will be registered as parameter value and a named parameter expression will be added instead.
Methods that accept values typical accept arguments of type <code>Object</code>.</p>
</dd>
<dt class="hdlist1">Expression</dt>
<dd>
<p>A JPQL scalar expression can be anything. A path expression, literal, parameter expression, etc.</p>
</dd>
<dt class="hdlist1">Subquery</dt>
<dd>
<p>A subquery is always created via a subquery builder. Variants for replacing aliases in expressions with subqueries also exist.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Available predicates</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/RestrictionBuilder.html#between(java.lang.Object)"><code>BETWEEN</code></a> &amp; <a href="{core_jdoc}/persistence/RestrictionBuilder.html#notBetween(java.lang.Object)"><code>NOT BETWEEN</code></a></dt>
<dd>
<p>The <code>between</code> methods expect the <strong>start value</strong> and chain to the between builder which is terminated with the <strong>end value</strong>.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .where("cat.age").between(1).and(10)
    .where("cat.age").notBetween(5).and(6);</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.age     BETWEEN :param_1 AND :param_2
  AND cat.age NOT BETWEEN :param_3 AND :param_4</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/RestrictionBuilder.html#eq(java.lang.Object)"><code>EQ</code></a>, <a href="{core_jdoc}/persistence/RestrictionBuilder.html#notEq(java.lang.Object)"><code>NOT EQ</code></a>, <a href="{core_jdoc}/persistence/RestrictionBuilder.html#lt(java.lang.Object)"><code>LT</code></a>, <a href="{core_jdoc}/persistence/RestrictionBuilder.html#le(java.lang.Object)"><code>LE</code></a>, <a href="{core_jdoc}/persistence/RestrictionBuilder.html#gt(java.lang.Object)"><code>GT</code></a> &amp; <a href="{core_jdoc}/persistence/RestrictionBuilder.html#ge(java.lang.Object)"><code>GE</code></a></dt>
<dd>
<p>The comparison predicates additionally support quantified subqueries e.g. <a href="{core_jdoc}/persistence/QuantifiableBinaryPredicateBuilder.html#all()"><code>ALL</code></a>
and <a href="{core_jdoc}/persistence/QuantifiableBinaryPredicateBuilder.html#any()"><code>ANY</code></a>.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .where("cat.age").notEq(10)
    .where("cat.age").ge().all()
        .from(Cat.class, "subCat")
        .select("subCat.age")
    .end();</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.age &lt;&gt; :param_1
  AND cat.age &gt;= ALL(
      SELECT subCat.age
      FROM Cat subCat
  )</pre>
</div>
</div>
<div id="anchor_predicate_builder_in_predicate" class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/RestrictionBuilder.html#in(java.lang.Object&#8230;&#8203;)"><code>IN</code></a> &amp; <a href="{core_jdoc}/persistence/RestrictionBuilder.html#notIn(java.lang.Object&#8230;&#8203;)"><code>NOT IN</code></a></dt>
<dd>
<p>This predicate supports value collections, literal expressions or in case of a single parameter expression, that parameter expression can be a collection valued parameter.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .where("cat.age").in(1, 2, 3, 4)
    .where("cat.age").notIn()
        .from(Cat.class, "subCat")
        .select("subCat.age")
        .where("subCat.name").notEqExpression("cat.name")
    .end();</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.age IN (:param_1, :param_2, :param_3, :param_4)
  AND cat.age NOT IN(
      SELECT subCat.age
      FROM Cat subCat
      WHERE subCat.name &lt;&gt; cat.name
  )</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/RestrictionBuilder.html#isNull()"><code>IS NULL</code></a> &amp; <a href="{core_jdoc}/persistence/RestrictionBuilder.html#isNotNull()"><code>IS NOT NULL</code></a></dt>
<dd>
<p>A simple null check.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .where("cat.age").isNotNull();</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.age IS NOT NULL</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/RestrictionBuilder.html#isEmpty()"><code>IS EMPTY</code></a> &amp; <a href="{core_jdoc}/persistence/RestrictionBuilder.html#isNotEmpty()"><code>IS NOT EMPTY</code></a></dt>
<dd>
<p>Checks if the left hand side is empty. Only valid for path expressions that evaluate to collections.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .where("cat.kittens").isNotEmpty();</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.kittens IS NOT EMPTY</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/RestrictionBuilder.html#isMemberOf(java.lang.String)"><code>MEMBER OF</code></a> &amp; <a href="{core_jdoc}/persistence/RestrictionBuilder.html#isNotMemberOf(java.lang.String)"><code>NOT MEMBER OF</code></a></dt>
<dd>
<p>Checks if the left hand side is a member of the collection typed path expression.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .where("cat.father").isNotMemberOf("cat.kittens");</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.father NOT MEMBER OF cat.kittens</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="{core_jdoc}/persistence/RestrictionBuilder.html#like()"><code>LIKE</code></a> &amp; <a href="{core_jdoc}/persistence/RestrictionBuilder.html#notLike()"><code>NOT LIKE</code></a></dt>
<dd>
<p>A <code>LIKE</code> with specifiable case sensitivity that must be terminated finally with an escape character or <code>noEscape()</code>.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .where("cat.name").like().value("Bill%").noEscape()
    .where("cat.name").notLike(false).expression("'%abc%'").noEscape();</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat FROM Cat cat
WHERE cat.name LIKE :param_1
  AND UPPER(cat.name) NOT LIKE UPPER('%abc%')</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="anchor_predicate_builder_case_when"><a class="anchor" href="#anchor_predicate_builder_case_when"></a>Case When Expression Builder</h3>
<div class="paragraph">
<p>The binary predicates <code>EQ</code>, <code>NOT EQ</code>, <code>LT</code>, <code>LE</code>, <code>GT</code> &amp; <code>GE</code> also allow to create case when expressions for the right hand side via a builder API.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilder&lt;Cat&gt; cb = cbf.create(em, Cat.class, "cat")
    .where("cat.name").eq()
        .caseWhen("cat.father").isNotNull()
            .thenExpression("cat.father.name")
        .caseWhen("cat.mother").isNotNull()
            .thenExpression("cat.mother.name")
        .otherwise("Billy");</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint sqlext lang-sqlext">SELECT cat
FROM Cat cat
LEFT JOIN cat.father father_1
LEFT JOIN cat.mother mother_1
WHERE cat.name = CASE
    WHEN father_1 IS NOT NULL
        THEN father_1.name
    WHEN mother_1 IS NOT NULL
        THEN mother_1.name
    ELSE
        :param_1
    END</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-08-05 16:46:14 KST
</div>
</div>
</body>
</html>