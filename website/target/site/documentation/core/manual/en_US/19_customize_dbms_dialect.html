<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Customize DBMS dialect</title>
<link rel="stylesheet" href="css/blazebit.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="prettify/prettify.min.css">
<script src="prettify/prettify.min.js"></script>
<script src="prettify/lang-ext.js"></script>
<script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
<link rel="shortcut icon" href="images/favicon.png">
</head>
<body class="book toc2 toc-left">

<div class="brand">
    <a class="vendor" href="https://blazebit.com">
        <strong>Blazebit.com</strong>
    </a>
    <a class="logo" href="https://persistence.blazebit.com">
        <strong>blaze-persistence</strong>
    </a>
</div>
<br/>

<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#customize-dbms-dialect">Customize DBMS dialect</a>
<ul class="sectlevel2">
<li><a href="#custom-sql-type-mappings">Custom SQL type mappings</a></li>
<li><a href="#custom-dbms-dialect-other-customizations">Other customizations</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="customize-dbms-dialect"><a class="anchor" href="#customize-dbms-dialect"></a>Customize DBMS dialect</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A DBMS dialect abstracts away some of the specifics of a DBMS like e.g. whether set operations are supported.
Although {projectname} tries very hard to make the DBMS dialects work on the most recent DBMS versions, it might sometimes be necessary to adapt the dialect to specific needs.</p>
</div>
<div class="paragraph">
<p>In general, you are well advised to extend the DBMS dialect that matches your DBMS best and override the methods you want in order to get the desired behavior.</p>
</div>
<div class="paragraph">
<p>A custom DBMS dialect must be registered on the configuration at boot time via <a href="{core_jdoc}/persistence/spi/CriteriaBuilderConfiguration.html#registerDialect(java.lang.String,%20com.blazebit.persistence.spi.DbmsDialect)"><code>registerDialect()</code></a>.
See the <a href="#anchor-environment">environment</a> section for how to get access to the <code>CriteriaBuilderConfiguration</code>.</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">CriteriaBuilderConfiguration config = //...
config.registerDialect("h2", new MyH2DbmsDialect());</pre>
</div>
</div>
<div class="sect2">
<h3 id="custom-sql-type-mappings"><a class="anchor" href="#custom-sql-type-mappings"></a>Custom SQL type mappings</h3>
<div class="paragraph">
<p>Sometimes it might be necessary to adapt the Java type to SQL type mappings for your DBMS. In order to do so, introduce a new method <code>getSqlTypes</code> and extend the dialect like</p>
</div>
<div class="listingblock">
<div class="content">
    <pre class="prettyprint javaext lang-javaext">public class MyH2DbmsDialect extends H2DbmsDialect {

    public MyH2DbmsDialect() {
        super(getSqlTypes());
    }

    private static Map&lt;Class&lt;?&gt;, String&gt; getSqlTypes() {
        Map&lt;Class&lt;?&gt;, String&gt; types = new HashMap&lt;Class&lt;?&gt;, String&gt;();

        types.put(String.class, "nvarchar");

        return types;
    }
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="custom-dbms-dialect-other-customizations"><a class="anchor" href="#custom-dbms-dialect-other-customizations"></a>Other customizations</h3>
<div class="paragraph">
<p>There are many other customizations possible. Take a look at the <a href="{core_jdoc}/persistence/spi/DbmsDialect.html"><code>DbmsDialect</code></a> API for more information.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-08-05 16:46:14 KST
</div>
</div>
</body>
</html>